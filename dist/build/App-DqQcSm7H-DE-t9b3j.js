const __vite__fileDeps=["History-DTYB9CSB-BuIBTLBS.js","strapi-B5tTVWvh.js","strapi-COJtagOC.css","hooks-E5u1mcgM-JqYWV2lq.js","Field-fBnTwgU4-CHsxRs9Z.js","objects-D6yBsdmx-CthYrbsS.js","useDebounce-DmuSJIF3-SDAuY1eC.js","ComponentIcon-u4bIXTFY-CwaBmbif.js","Field-fBnTwgU4-BmdxYdXS.css","Preview-Zzjg2_K_-BdAtjMSh.js","EditViewPage-BPFcUbqi-BuZdpD2k.js","ListViewPage-GKpL5p8A-Kzk6UA5s.js","ListConfigurationPage-qWx8r4D_-D9fj-Ne6.js","FieldTypeIcon-CMlNO8PE-D61ACuBp.js","EditConfigurationPage-C1ddZ_zf-BfHz0xbL.js","Form-BGl7PhlZ-DT42wmmt.js","ComponentConfigurationPage-CcRDqD0e-DcmJvQHo.js","NoPermissionsPage-BAZlWgJ4-f2M2hX_i.js","NoContentTypePage-B5Vc5Cal-Co1kwNzr.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{r as reactExports,aB as reactDomExports,lZ as React$2,lj as ReactDOM,f_ as $jFibJ$react,j as jsxRuntimeExports,d as dt$3,iL as lt$4,l_ as ForwardRef$4L,bF as mt$3,lK as ForwardRef$2f,l$ as ForwardRef$3z,m0 as ForwardRef$4p,m1 as ForwardRef$1Z,m2 as ForwardRef$4r,i5 as ForwardRef$3$,a9 as ft$4,gr as ForwardRef$4P,gy as ForwardRef$4l,hK as ForwardRef$V$1,m3 as nt$2,lJ as ForwardRef$4v,gd as ForwardRef$3$1,h7 as ForwardRef$2x,k8 as commonjsGlobal$1,i8 as getDefaultExportFromCjs$1,lu as require$$2,at as useLocation,au as useNavigate,aa as NavLink,gc as ForwardRef$55,gT as ForwardRef$3x,lX as ForwardRef$3v,gY as ForwardRef$3d,m4 as useBlocker,be as Link$1,hA as ForwardRef$1d,m5 as commonjsRequire,hF as ForwardRef$59,bB as __vitePreload,bq as useParams,aQ as useMatch,ht as ForwardRef$1r,m6 as ForwardRef$3L,lN as ForwardRef$1R,gX as ForwardRef$3j,gV as ForwardRef$3p,gZ as ForwardRef$3b,lL as ForwardRef$j$1,lM as ForwardRef$1b,he as ForwardRef$2l,m7 as ForwardRef$3P,gF as ForwardRef$41,m8 as ForwardRef$2j,h1 as ForwardRef$33,gx as ForwardRef$4x,m9 as ForwardRef$4J,ma as ForwardRef$4n,mb as ForwardRef$4t,R as Routes,a as Route}from"./strapi-B5tTVWvh.js";function $2b4dce13dd5a17fa$export$842a2cf37af977e1(mr,hr){return mr-hr*Math.floor(mr/hr)}const $3b62074eb05584b2$var$EPOCH=1721426;function $3b62074eb05584b2$export$f297eb839006d339(mr,hr,gr,vr){hr=$3b62074eb05584b2$export$c36e0ecb2d4fa69d(mr,hr);let xr=hr-1,Er=-2;return gr<=2?Er=0:$3b62074eb05584b2$export$553d7fa8e3805fc0(hr)&&(Er=-1),$3b62074eb05584b2$var$EPOCH-1+365*xr+Math.floor(xr/4)-Math.floor(xr/100)+Math.floor(xr/400)+Math.floor((367*gr-362)/12+Er+vr)}function $3b62074eb05584b2$export$553d7fa8e3805fc0(mr){return mr%4===0&&(mr%100!==0||mr%400===0)}function $3b62074eb05584b2$export$c36e0ecb2d4fa69d(mr,hr){return mr==="BC"?1-hr:hr}function $3b62074eb05584b2$export$4475b7e617eb123c(mr){let hr="AD";return mr<=0&&(hr="BC",mr=1-mr),[hr,mr]}const $3b62074eb05584b2$var$daysInMonth={standard:[31,28,31,30,31,30,31,31,30,31,30,31],leapyear:[31,29,31,30,31,30,31,31,30,31,30,31]};class $3b62074eb05584b2$export$80ee6245ec4f29ec{fromJulianDay(hr){let gr=hr,vr=gr-$3b62074eb05584b2$var$EPOCH,xr=Math.floor(vr/146097),Er=$2b4dce13dd5a17fa$export$842a2cf37af977e1(vr,146097),Cr=Math.floor(Er/36524),wr=$2b4dce13dd5a17fa$export$842a2cf37af977e1(Er,36524),Rr=Math.floor(wr/1461),kr=$2b4dce13dd5a17fa$export$842a2cf37af977e1(wr,1461),Dr=Math.floor(kr/365),Br=xr*400+Cr*100+Rr*4+Dr+(Cr!==4&&Dr!==4?1:0),[Hr,Gr]=$3b62074eb05584b2$export$4475b7e617eb123c(Br),qr=gr-$3b62074eb05584b2$export$f297eb839006d339(Hr,Gr,1,1),zr=2;gr<$3b62074eb05584b2$export$f297eb839006d339(Hr,Gr,3,1)?zr=0:$3b62074eb05584b2$export$553d7fa8e3805fc0(Gr)&&(zr=1);let Qr=Math.floor(((qr+zr)*12+373)/367),sn=gr-$3b62074eb05584b2$export$f297eb839006d339(Hr,Gr,Qr,1)+1;return new $35ea8db9cb2ccb90$export$99faa760c7908e4f(Hr,Gr,Qr,sn)}toJulianDay(hr){return $3b62074eb05584b2$export$f297eb839006d339(hr.era,hr.year,hr.month,hr.day)}getDaysInMonth(hr){return $3b62074eb05584b2$var$daysInMonth[$3b62074eb05584b2$export$553d7fa8e3805fc0(hr.year)?"leapyear":"standard"][hr.month-1]}getMonthsInYear(hr){return 12}getDaysInYear(hr){return $3b62074eb05584b2$export$553d7fa8e3805fc0(hr.year)?366:365}getYearsInEra(hr){return 9999}getEras(){return["BC","AD"]}isInverseEra(hr){return hr.era==="BC"}balanceDate(hr){hr.year<=0&&(hr.era=hr.era==="BC"?"AD":"BC",hr.year=1-hr.year)}constructor(){this.identifier="gregory"}}const $2fe286d2fb449abb$export$7a5acbd77d414bd9={"001":1,AD:1,AE:6,AF:6,AI:1,AL:1,AM:1,AN:1,AR:1,AT:1,AU:1,AX:1,AZ:1,BA:1,BE:1,BG:1,BH:6,BM:1,BN:1,BY:1,CH:1,CL:1,CM:1,CN:1,CR:1,CY:1,CZ:1,DE:1,DJ:6,DK:1,DZ:6,EC:1,EE:1,EG:6,ES:1,FI:1,FJ:1,FO:1,FR:1,GB:1,GE:1,GF:1,GP:1,GR:1,HR:1,HU:1,IE:1,IQ:6,IR:6,IS:1,IT:1,JO:6,KG:1,KW:6,KZ:1,LB:1,LI:1,LK:1,LT:1,LU:1,LV:1,LY:6,MC:1,MD:1,ME:1,MK:1,MN:1,MQ:1,MV:5,MY:1,NL:1,NO:1,NZ:1,OM:6,PL:1,QA:6,RE:1,RO:1,RS:1,RU:1,SD:6,SE:1,SI:1,SK:1,SM:1,SY:6,TJ:1,TM:1,TR:1,UA:1,UY:1,UZ:1,VA:1,VN:1,XK:1};function $14e0f24ef4ac5c92$export$ea39ec197993aef0(mr,hr){return hr=$11d87f3f76e88657$export$b4a036af3fc0b032(hr,mr.calendar),mr.era===hr.era&&mr.year===hr.year&&mr.month===hr.month&&mr.day===hr.day}function $14e0f24ef4ac5c92$export$2061056d06d7cdf7(mr,hr){let gr=mr.calendar.toJulianDay(mr),vr=Math.ceil(gr+1-$14e0f24ef4ac5c92$var$getWeekStart(hr))%7;return vr<0&&(vr+=7),vr}function $14e0f24ef4ac5c92$export$461939dd4422153(mr){return $11d87f3f76e88657$export$1b96692a1ba042ac(Date.now(),mr)}function $14e0f24ef4ac5c92$export$d0bdf45af03a6ea3(mr){return $11d87f3f76e88657$export$93522d1a439f3617($14e0f24ef4ac5c92$export$461939dd4422153(mr))}function $14e0f24ef4ac5c92$export$68781ddf31c0090f(mr,hr){return mr.calendar.toJulianDay(mr)-hr.calendar.toJulianDay(hr)}function $14e0f24ef4ac5c92$export$c19a80a9721b80f6(mr,hr){return $14e0f24ef4ac5c92$var$timeToMs(mr)-$14e0f24ef4ac5c92$var$timeToMs(hr)}function $14e0f24ef4ac5c92$var$timeToMs(mr){return mr.hour*36e5+mr.minute*6e4+mr.second*1e3+mr.millisecond}let $14e0f24ef4ac5c92$var$localTimeZone=null;function $14e0f24ef4ac5c92$export$aa8b41735afcabd2(){return $14e0f24ef4ac5c92$var$localTimeZone==null&&($14e0f24ef4ac5c92$var$localTimeZone=new Intl.DateTimeFormat().resolvedOptions().timeZone),$14e0f24ef4ac5c92$var$localTimeZone}function $14e0f24ef4ac5c92$export$a5a3b454ada2268e(mr){return mr.subtract({days:mr.day-1})}function $14e0f24ef4ac5c92$export$a2258d9c4118825c(mr){return mr.add({days:mr.calendar.getDaysInMonth(mr)-mr.day})}function $14e0f24ef4ac5c92$export$42c81a444fbfb5d4(mr,hr){let gr=$14e0f24ef4ac5c92$export$2061056d06d7cdf7(mr,hr);return mr.subtract({days:gr})}const $14e0f24ef4ac5c92$var$cachedRegions=new Map;function $14e0f24ef4ac5c92$var$getRegion(mr){if(Intl.Locale){let gr=$14e0f24ef4ac5c92$var$cachedRegions.get(mr);return gr||(gr=new Intl.Locale(mr).maximize().region,gr&&$14e0f24ef4ac5c92$var$cachedRegions.set(mr,gr)),gr}let hr=mr.split("-")[1];return hr==="u"?void 0:hr}function $14e0f24ef4ac5c92$var$getWeekStart(mr){let hr=$14e0f24ef4ac5c92$var$getRegion(mr);return hr&&$2fe286d2fb449abb$export$7a5acbd77d414bd9[hr]||0}function $14e0f24ef4ac5c92$export$5c333a116e949cdd(mr,hr){return mr&&hr?mr.compare(hr)<=0?mr:hr:mr||hr}function $14e0f24ef4ac5c92$export$a75f2bff57811055(mr,hr){return mr&&hr?mr.compare(hr)>=0?mr:hr:mr||hr}function $11d87f3f76e88657$export$bd4fb2bc8bb06fb(mr){mr=$11d87f3f76e88657$export$b4a036af3fc0b032(mr,new $3b62074eb05584b2$export$80ee6245ec4f29ec);let hr=$3b62074eb05584b2$export$c36e0ecb2d4fa69d(mr.era,mr.year);return $11d87f3f76e88657$var$epochFromParts(hr,mr.month,mr.day,mr.hour,mr.minute,mr.second,mr.millisecond)}function $11d87f3f76e88657$var$epochFromParts(mr,hr,gr,vr,xr,Er,Cr){let wr=new Date;return wr.setUTCHours(vr,xr,Er,Cr),wr.setUTCFullYear(mr,hr-1,gr),wr.getTime()}function $11d87f3f76e88657$export$59c99f3515d3493f(mr,hr){if(hr==="UTC")return 0;if(mr>0&&hr===$14e0f24ef4ac5c92$export$aa8b41735afcabd2())return new Date(mr).getTimezoneOffset()*-6e4;let{year:gr,month:vr,day:xr,hour:Er,minute:Cr,second:wr}=$11d87f3f76e88657$var$getTimeZoneParts(mr,hr);return $11d87f3f76e88657$var$epochFromParts(gr,vr,xr,Er,Cr,wr,0)-Math.floor(mr/1e3)*1e3}const $11d87f3f76e88657$var$formattersByTimeZone=new Map;function $11d87f3f76e88657$var$getTimeZoneParts(mr,hr){let gr=$11d87f3f76e88657$var$formattersByTimeZone.get(hr);gr||(gr=new Intl.DateTimeFormat("en-US",{timeZone:hr,hour12:!1,era:"short",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),$11d87f3f76e88657$var$formattersByTimeZone.set(hr,gr));let vr=gr.formatToParts(new Date(mr)),xr={};for(let Er of vr)Er.type!=="literal"&&(xr[Er.type]=Er.value);return{year:xr.era==="BC"||xr.era==="B"?-xr.year+1:+xr.year,month:+xr.month,day:+xr.day,hour:xr.hour==="24"?0:+xr.hour,minute:+xr.minute,second:+xr.second}}const $11d87f3f76e88657$var$DAYMILLIS=864e5;function $11d87f3f76e88657$var$getValidWallTimes(mr,hr,gr,vr){return(gr===vr?[gr]:[gr,vr]).filter(Er=>$11d87f3f76e88657$var$isValidWallTime(mr,hr,Er))}function $11d87f3f76e88657$var$isValidWallTime(mr,hr,gr){let vr=$11d87f3f76e88657$var$getTimeZoneParts(gr,hr);return mr.year===vr.year&&mr.month===vr.month&&mr.day===vr.day&&mr.hour===vr.hour&&mr.minute===vr.minute&&mr.second===vr.second}function $11d87f3f76e88657$export$5107c82f94518f5c(mr,hr,gr="compatible"){let vr=$11d87f3f76e88657$export$b21e0b124e224484(mr);if(hr==="UTC")return $11d87f3f76e88657$export$bd4fb2bc8bb06fb(vr);if(hr===$14e0f24ef4ac5c92$export$aa8b41735afcabd2()&&gr==="compatible"){vr=$11d87f3f76e88657$export$b4a036af3fc0b032(vr,new $3b62074eb05584b2$export$80ee6245ec4f29ec);let Rr=new Date,kr=$3b62074eb05584b2$export$c36e0ecb2d4fa69d(vr.era,vr.year);return Rr.setFullYear(kr,vr.month-1,vr.day),Rr.setHours(vr.hour,vr.minute,vr.second,vr.millisecond),Rr.getTime()}let xr=$11d87f3f76e88657$export$bd4fb2bc8bb06fb(vr),Er=$11d87f3f76e88657$export$59c99f3515d3493f(xr-$11d87f3f76e88657$var$DAYMILLIS,hr),Cr=$11d87f3f76e88657$export$59c99f3515d3493f(xr+$11d87f3f76e88657$var$DAYMILLIS,hr),wr=$11d87f3f76e88657$var$getValidWallTimes(vr,hr,xr-Er,xr-Cr);if(wr.length===1)return wr[0];if(wr.length>1)switch(gr){case"compatible":case"earlier":return wr[0];case"later":return wr[wr.length-1];case"reject":throw new RangeError("Multiple possible absolute times found")}switch(gr){case"earlier":return Math.min(xr-Er,xr-Cr);case"compatible":case"later":return Math.max(xr-Er,xr-Cr);case"reject":throw new RangeError("No such absolute time found")}}function $11d87f3f76e88657$export$e67a095c620b86fe(mr,hr,gr="compatible"){return new Date($11d87f3f76e88657$export$5107c82f94518f5c(mr,hr,gr))}function $11d87f3f76e88657$export$1b96692a1ba042ac(mr,hr){let gr=$11d87f3f76e88657$export$59c99f3515d3493f(mr,hr),vr=new Date(mr+gr),xr=vr.getUTCFullYear(),Er=vr.getUTCMonth()+1,Cr=vr.getUTCDate(),wr=vr.getUTCHours(),Rr=vr.getUTCMinutes(),kr=vr.getUTCSeconds(),Dr=vr.getUTCMilliseconds();return new $35ea8db9cb2ccb90$export$d3b7288e7994edea(xr,Er,Cr,hr,gr,wr,Rr,kr,Dr)}function $11d87f3f76e88657$export$93522d1a439f3617(mr){return new $35ea8db9cb2ccb90$export$99faa760c7908e4f(mr.calendar,mr.era,mr.year,mr.month,mr.day)}function $11d87f3f76e88657$export$b21e0b124e224484(mr,hr){let gr=0,vr=0,xr=0,Er=0;if("timeZone"in mr)({hour:gr,minute:vr,second:xr,millisecond:Er}=mr);else if("hour"in mr&&!hr)return mr;return hr&&({hour:gr,minute:vr,second:xr,millisecond:Er}=hr),new $35ea8db9cb2ccb90$export$ca871e8dbb80966f(mr.calendar,mr.era,mr.year,mr.month,mr.day,gr,vr,xr,Er)}function $11d87f3f76e88657$export$b4a036af3fc0b032(mr,hr){if(mr.calendar.identifier===hr.identifier)return mr;let gr=hr.fromJulianDay(mr.calendar.toJulianDay(mr)),vr=mr.copy();return vr.calendar=hr,vr.era=gr.era,vr.year=gr.year,vr.month=gr.month,vr.day=gr.day,$735220c2d4774dd3$export$c4e2ecac49351ef2(vr),vr}function $11d87f3f76e88657$export$84c95a83c799e074(mr,hr,gr){if(mr instanceof $35ea8db9cb2ccb90$export$d3b7288e7994edea)return mr.timeZone===hr?mr:$11d87f3f76e88657$export$538b00033cc11c75(mr,hr);let vr=$11d87f3f76e88657$export$5107c82f94518f5c(mr,hr,gr);return $11d87f3f76e88657$export$1b96692a1ba042ac(vr,hr)}function $11d87f3f76e88657$export$83aac07b4c37b25(mr){let hr=$11d87f3f76e88657$export$bd4fb2bc8bb06fb(mr)-mr.offset;return new Date(hr)}function $11d87f3f76e88657$export$538b00033cc11c75(mr,hr){let gr=$11d87f3f76e88657$export$bd4fb2bc8bb06fb(mr)-mr.offset;return $11d87f3f76e88657$export$b4a036af3fc0b032($11d87f3f76e88657$export$1b96692a1ba042ac(gr,hr),mr.calendar)}const $735220c2d4774dd3$var$ONE_HOUR=36e5;function $735220c2d4774dd3$export$e16d8520af44a096(mr,hr){let gr=mr.copy(),vr="hour"in gr?$735220c2d4774dd3$var$addTimeFields(gr,hr):0;$735220c2d4774dd3$var$addYears(gr,hr.years||0),gr.calendar.balanceYearMonth&&gr.calendar.balanceYearMonth(gr,mr),gr.month+=hr.months||0,$735220c2d4774dd3$var$balanceYearMonth(gr),$735220c2d4774dd3$var$constrainMonthDay(gr),gr.day+=(hr.weeks||0)*7,gr.day+=hr.days||0,gr.day+=vr,$735220c2d4774dd3$var$balanceDay(gr),gr.calendar.balanceDate&&gr.calendar.balanceDate(gr),gr.year<1&&(gr.year=1,gr.month=1,gr.day=1);let xr=gr.calendar.getYearsInEra(gr);if(gr.year>xr){var Er,Cr;let Rr=(Er=(Cr=gr.calendar).isInverseEra)===null||Er===void 0?void 0:Er.call(Cr,gr);gr.year=xr,gr.month=Rr?1:gr.calendar.getMonthsInYear(gr),gr.day=Rr?1:gr.calendar.getDaysInMonth(gr)}gr.month<1&&(gr.month=1,gr.day=1);let wr=gr.calendar.getMonthsInYear(gr);return gr.month>wr&&(gr.month=wr,gr.day=gr.calendar.getDaysInMonth(gr)),gr.day=Math.max(1,Math.min(gr.calendar.getDaysInMonth(gr),gr.day)),gr}function $735220c2d4774dd3$var$addYears(mr,hr){var gr,vr;!((gr=(vr=mr.calendar).isInverseEra)===null||gr===void 0)&&gr.call(vr,mr)&&(hr=-hr),mr.year+=hr}function $735220c2d4774dd3$var$balanceYearMonth(mr){for(;mr.month<1;)$735220c2d4774dd3$var$addYears(mr,-1),mr.month+=mr.calendar.getMonthsInYear(mr);let hr=0;for(;mr.month>(hr=mr.calendar.getMonthsInYear(mr));)mr.month-=hr,$735220c2d4774dd3$var$addYears(mr,1)}function $735220c2d4774dd3$var$balanceDay(mr){for(;mr.day<1;)mr.month--,$735220c2d4774dd3$var$balanceYearMonth(mr),mr.day+=mr.calendar.getDaysInMonth(mr);for(;mr.day>mr.calendar.getDaysInMonth(mr);)mr.day-=mr.calendar.getDaysInMonth(mr),mr.month++,$735220c2d4774dd3$var$balanceYearMonth(mr)}function $735220c2d4774dd3$var$constrainMonthDay(mr){mr.month=Math.max(1,Math.min(mr.calendar.getMonthsInYear(mr),mr.month)),mr.day=Math.max(1,Math.min(mr.calendar.getDaysInMonth(mr),mr.day))}function $735220c2d4774dd3$export$c4e2ecac49351ef2(mr){mr.calendar.constrainDate&&mr.calendar.constrainDate(mr),mr.year=Math.max(1,Math.min(mr.calendar.getYearsInEra(mr),mr.year)),$735220c2d4774dd3$var$constrainMonthDay(mr)}function $735220c2d4774dd3$export$3e2544e88a25bff8(mr){let hr={};for(let gr in mr)typeof mr[gr]=="number"&&(hr[gr]=-mr[gr]);return hr}function $735220c2d4774dd3$export$4e2d2ead65e5f7e3(mr,hr){return $735220c2d4774dd3$export$e16d8520af44a096(mr,$735220c2d4774dd3$export$3e2544e88a25bff8(hr))}function $735220c2d4774dd3$export$adaa4cf7ef1b65be(mr,hr){let gr=mr.copy();return hr.era!=null&&(gr.era=hr.era),hr.year!=null&&(gr.year=hr.year),hr.month!=null&&(gr.month=hr.month),hr.day!=null&&(gr.day=hr.day),$735220c2d4774dd3$export$c4e2ecac49351ef2(gr),gr}function $735220c2d4774dd3$export$e5d5e1c1822b6e56(mr,hr){let gr=mr.copy();return hr.hour!=null&&(gr.hour=hr.hour),hr.minute!=null&&(gr.minute=hr.minute),hr.second!=null&&(gr.second=hr.second),hr.millisecond!=null&&(gr.millisecond=hr.millisecond),$735220c2d4774dd3$export$7555de1e070510cb(gr),gr}function $735220c2d4774dd3$var$balanceTime(mr){mr.second+=Math.floor(mr.millisecond/1e3),mr.millisecond=$735220c2d4774dd3$var$nonNegativeMod(mr.millisecond,1e3),mr.minute+=Math.floor(mr.second/60),mr.second=$735220c2d4774dd3$var$nonNegativeMod(mr.second,60),mr.hour+=Math.floor(mr.minute/60),mr.minute=$735220c2d4774dd3$var$nonNegativeMod(mr.minute,60);let hr=Math.floor(mr.hour/24);return mr.hour=$735220c2d4774dd3$var$nonNegativeMod(mr.hour,24),hr}function $735220c2d4774dd3$export$7555de1e070510cb(mr){mr.millisecond=Math.max(0,Math.min(mr.millisecond,1e3)),mr.second=Math.max(0,Math.min(mr.second,59)),mr.minute=Math.max(0,Math.min(mr.minute,59)),mr.hour=Math.max(0,Math.min(mr.hour,23))}function $735220c2d4774dd3$var$nonNegativeMod(mr,hr){let gr=mr%hr;return gr<0&&(gr+=hr),gr}function $735220c2d4774dd3$var$addTimeFields(mr,hr){return mr.hour+=hr.hours||0,mr.minute+=hr.minutes||0,mr.second+=hr.seconds||0,mr.millisecond+=hr.milliseconds||0,$735220c2d4774dd3$var$balanceTime(mr)}function $735220c2d4774dd3$export$d52ced6badfb9a4c(mr,hr,gr,vr){let xr=mr.copy();switch(hr){case"era":{let wr=mr.calendar.getEras(),Rr=wr.indexOf(mr.era);if(Rr<0)throw new Error("Invalid era: "+mr.era);Rr=$735220c2d4774dd3$var$cycleValue(Rr,gr,0,wr.length-1,vr?.round),xr.era=wr[Rr],$735220c2d4774dd3$export$c4e2ecac49351ef2(xr);break}case"year":var Er,Cr;!((Er=(Cr=xr.calendar).isInverseEra)===null||Er===void 0)&&Er.call(Cr,xr)&&(gr=-gr),xr.year=$735220c2d4774dd3$var$cycleValue(mr.year,gr,-1/0,9999,vr?.round),xr.year===-1/0&&(xr.year=1),xr.calendar.balanceYearMonth&&xr.calendar.balanceYearMonth(xr,mr);break;case"month":xr.month=$735220c2d4774dd3$var$cycleValue(mr.month,gr,1,mr.calendar.getMonthsInYear(mr),vr?.round);break;case"day":xr.day=$735220c2d4774dd3$var$cycleValue(mr.day,gr,1,mr.calendar.getDaysInMonth(mr),vr?.round);break;default:throw new Error("Unsupported field "+hr)}return mr.calendar.balanceDate&&mr.calendar.balanceDate(xr),$735220c2d4774dd3$export$c4e2ecac49351ef2(xr),xr}function $735220c2d4774dd3$export$dd02b3e0007dfe28(mr,hr,gr,vr){let xr=mr.copy();switch(hr){case"hour":{let Er=mr.hour,Cr=0,wr=23;if(vr?.hourCycle===12){let Rr=Er>=12;Cr=Rr?12:0,wr=Rr?23:11}xr.hour=$735220c2d4774dd3$var$cycleValue(Er,gr,Cr,wr,vr?.round);break}case"minute":xr.minute=$735220c2d4774dd3$var$cycleValue(mr.minute,gr,0,59,vr?.round);break;case"second":xr.second=$735220c2d4774dd3$var$cycleValue(mr.second,gr,0,59,vr?.round);break;case"millisecond":xr.millisecond=$735220c2d4774dd3$var$cycleValue(mr.millisecond,gr,0,999,vr?.round);break;default:throw new Error("Unsupported field "+hr)}return xr}function $735220c2d4774dd3$var$cycleValue(mr,hr,gr,vr,xr=!1){if(xr){mr+=Math.sign(hr),mr<gr&&(mr=vr);let Er=Math.abs(hr);hr>0?mr=Math.ceil(mr/Er)*Er:mr=Math.floor(mr/Er)*Er,mr>vr&&(mr=gr)}else mr+=hr,mr<gr?mr=vr-(gr-mr-1):mr>vr&&(mr=gr+(mr-vr-1));return mr}function $735220c2d4774dd3$export$96b1d28349274637(mr,hr){let gr;if(hr.years!=null&&hr.years!==0||hr.months!=null&&hr.months!==0||hr.weeks!=null&&hr.weeks!==0||hr.days!=null&&hr.days!==0){let xr=$735220c2d4774dd3$export$e16d8520af44a096($11d87f3f76e88657$export$b21e0b124e224484(mr),{years:hr.years,months:hr.months,weeks:hr.weeks,days:hr.days});gr=$11d87f3f76e88657$export$5107c82f94518f5c(xr,mr.timeZone)}else gr=$11d87f3f76e88657$export$bd4fb2bc8bb06fb(mr)-mr.offset;gr+=hr.milliseconds||0,gr+=(hr.seconds||0)*1e3,gr+=(hr.minutes||0)*6e4,gr+=(hr.hours||0)*36e5;let vr=$11d87f3f76e88657$export$1b96692a1ba042ac(gr,mr.timeZone);return $11d87f3f76e88657$export$b4a036af3fc0b032(vr,mr.calendar)}function $735220c2d4774dd3$export$6814caac34ca03c7(mr,hr){return $735220c2d4774dd3$export$96b1d28349274637(mr,$735220c2d4774dd3$export$3e2544e88a25bff8(hr))}function $735220c2d4774dd3$export$9a297d111fc86b79(mr,hr,gr,vr){switch(hr){case"hour":{let xr=0,Er=23;if(vr?.hourCycle===12){let qr=mr.hour>=12;xr=qr?12:0,Er=qr?23:11}let Cr=$11d87f3f76e88657$export$b21e0b124e224484(mr),wr=$11d87f3f76e88657$export$b4a036af3fc0b032($735220c2d4774dd3$export$e5d5e1c1822b6e56(Cr,{hour:xr}),new $3b62074eb05584b2$export$80ee6245ec4f29ec),Rr=[$11d87f3f76e88657$export$5107c82f94518f5c(wr,mr.timeZone,"earlier"),$11d87f3f76e88657$export$5107c82f94518f5c(wr,mr.timeZone,"later")].filter(qr=>$11d87f3f76e88657$export$1b96692a1ba042ac(qr,mr.timeZone).day===wr.day)[0],kr=$11d87f3f76e88657$export$b4a036af3fc0b032($735220c2d4774dd3$export$e5d5e1c1822b6e56(Cr,{hour:Er}),new $3b62074eb05584b2$export$80ee6245ec4f29ec),Dr=[$11d87f3f76e88657$export$5107c82f94518f5c(kr,mr.timeZone,"earlier"),$11d87f3f76e88657$export$5107c82f94518f5c(kr,mr.timeZone,"later")].filter(qr=>$11d87f3f76e88657$export$1b96692a1ba042ac(qr,mr.timeZone).day===kr.day).pop(),Br=$11d87f3f76e88657$export$bd4fb2bc8bb06fb(mr)-mr.offset,Hr=Math.floor(Br/$735220c2d4774dd3$var$ONE_HOUR),Gr=Br%$735220c2d4774dd3$var$ONE_HOUR;return Br=$735220c2d4774dd3$var$cycleValue(Hr,gr,Math.floor(Rr/$735220c2d4774dd3$var$ONE_HOUR),Math.floor(Dr/$735220c2d4774dd3$var$ONE_HOUR),vr?.round)*$735220c2d4774dd3$var$ONE_HOUR+Gr,$11d87f3f76e88657$export$b4a036af3fc0b032($11d87f3f76e88657$export$1b96692a1ba042ac(Br,mr.timeZone),mr.calendar)}case"minute":case"second":case"millisecond":return $735220c2d4774dd3$export$dd02b3e0007dfe28(mr,hr,gr,vr);case"era":case"year":case"month":case"day":{let xr=$735220c2d4774dd3$export$d52ced6badfb9a4c($11d87f3f76e88657$export$b21e0b124e224484(mr),hr,gr,vr),Er=$11d87f3f76e88657$export$5107c82f94518f5c(xr,mr.timeZone);return $11d87f3f76e88657$export$b4a036af3fc0b032($11d87f3f76e88657$export$1b96692a1ba042ac(Er,mr.timeZone),mr.calendar)}default:throw new Error("Unsupported field "+hr)}}function $735220c2d4774dd3$export$31b5430eb18be4f8(mr,hr,gr){let vr=$11d87f3f76e88657$export$b21e0b124e224484(mr),xr=$735220c2d4774dd3$export$e5d5e1c1822b6e56($735220c2d4774dd3$export$adaa4cf7ef1b65be(vr,hr),hr);if(xr.compare(vr)===0)return mr;let Er=$11d87f3f76e88657$export$5107c82f94518f5c(xr,mr.timeZone,gr);return $11d87f3f76e88657$export$b4a036af3fc0b032($11d87f3f76e88657$export$1b96692a1ba042ac(Er,mr.timeZone),mr.calendar)}const $fae977aafc393c5c$var$ABSOLUTE_RE=/^(\d{4})-(\d{2})-(\d{2})(?:T(\d{2}))?(?::(\d{2}))?(?::(\d{2}))?(\.\d+)?(?:(?:([+-]\d{2})(?::?(\d{2}))?)|Z)$/;function $fae977aafc393c5c$export$5adfdab05168c219(mr,hr){let gr=mr.match($fae977aafc393c5c$var$ABSOLUTE_RE);if(!gr)throw new Error("Invalid ISO 8601 date time string: "+mr);let vr=new $35ea8db9cb2ccb90$export$d3b7288e7994edea($fae977aafc393c5c$var$parseNumber(gr[1],1,9999),$fae977aafc393c5c$var$parseNumber(gr[2],1,12),1,hr,0,gr[4]?$fae977aafc393c5c$var$parseNumber(gr[4],0,23):0,gr[5]?$fae977aafc393c5c$var$parseNumber(gr[5],0,59):0,gr[6]?$fae977aafc393c5c$var$parseNumber(gr[6],0,59):0,gr[7]?$fae977aafc393c5c$var$parseNumber(gr[7],0,1/0)*1e3:0);vr.day=$fae977aafc393c5c$var$parseNumber(gr[3],0,vr.calendar.getDaysInMonth(vr));var xr;return gr[8]&&(vr.offset=$fae977aafc393c5c$var$parseNumber(gr[8],-23,23)*36e5+$fae977aafc393c5c$var$parseNumber((xr=gr[9])!==null&&xr!==void 0?xr:"0",0,59)*6e4),$11d87f3f76e88657$export$538b00033cc11c75(vr,hr)}function $fae977aafc393c5c$export$8e384432362ed0f0(mr){return $fae977aafc393c5c$export$5adfdab05168c219(mr,$14e0f24ef4ac5c92$export$aa8b41735afcabd2())}function $fae977aafc393c5c$var$parseNumber(mr,hr,gr){let vr=Number(mr);if(vr<hr||vr>gr)throw new RangeError(`Value out of range: ${hr} <= ${vr} <= ${gr}`);return vr}function $fae977aafc393c5c$export$f59dee82248f5ad4(mr){return`${String(mr.hour).padStart(2,"0")}:${String(mr.minute).padStart(2,"0")}:${String(mr.second).padStart(2,"0")}${mr.millisecond?String(mr.millisecond/1e3).slice(1):""}`}function $fae977aafc393c5c$export$60dfd74aa96791bd(mr){let hr=$11d87f3f76e88657$export$b4a036af3fc0b032(mr,new $3b62074eb05584b2$export$80ee6245ec4f29ec);return`${String(hr.year).padStart(4,"0")}-${String(hr.month).padStart(2,"0")}-${String(hr.day).padStart(2,"0")}`}function $fae977aafc393c5c$export$4223de14708adc63(mr){return`${$fae977aafc393c5c$export$60dfd74aa96791bd(mr)}T${$fae977aafc393c5c$export$f59dee82248f5ad4(mr)}`}function $fae977aafc393c5c$var$offsetToString(mr){let hr=Math.sign(mr)<0?"-":"+";mr=Math.abs(mr);let gr=Math.floor(mr/36e5),vr=mr%36e5/6e4;return`${hr}${String(gr).padStart(2,"0")}:${String(vr).padStart(2,"0")}`}function $fae977aafc393c5c$export$bf79f1ebf4b18792(mr){return`${$fae977aafc393c5c$export$4223de14708adc63(mr)}${$fae977aafc393c5c$var$offsetToString(mr.offset)}[${mr.timeZone}]`}function _check_private_redeclaration(mr,hr){if(hr.has(mr))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _class_private_field_init(mr,hr,gr){_check_private_redeclaration(mr,hr),hr.set(mr,gr)}function $35ea8db9cb2ccb90$var$shiftArgs(mr){let hr=typeof mr[0]=="object"?mr.shift():new $3b62074eb05584b2$export$80ee6245ec4f29ec,gr;if(typeof mr[0]=="string")gr=mr.shift();else{let Cr=hr.getEras();gr=Cr[Cr.length-1]}let vr=mr.shift(),xr=mr.shift(),Er=mr.shift();return[hr,gr,vr,xr,Er]}var $35ea8db9cb2ccb90$var$_type=new WeakMap;class $35ea8db9cb2ccb90$export$99faa760c7908e4f{copy(){return this.era?new $35ea8db9cb2ccb90$export$99faa760c7908e4f(this.calendar,this.era,this.year,this.month,this.day):new $35ea8db9cb2ccb90$export$99faa760c7908e4f(this.calendar,this.year,this.month,this.day)}add(hr){return $735220c2d4774dd3$export$e16d8520af44a096(this,hr)}subtract(hr){return $735220c2d4774dd3$export$4e2d2ead65e5f7e3(this,hr)}set(hr){return $735220c2d4774dd3$export$adaa4cf7ef1b65be(this,hr)}cycle(hr,gr,vr){return $735220c2d4774dd3$export$d52ced6badfb9a4c(this,hr,gr,vr)}toDate(hr){return $11d87f3f76e88657$export$e67a095c620b86fe(this,hr)}toString(){return $fae977aafc393c5c$export$60dfd74aa96791bd(this)}compare(hr){return $14e0f24ef4ac5c92$export$68781ddf31c0090f(this,hr)}constructor(...hr){_class_private_field_init(this,$35ea8db9cb2ccb90$var$_type,{writable:!0,value:void 0});let[gr,vr,xr,Er,Cr]=$35ea8db9cb2ccb90$var$shiftArgs(hr);this.calendar=gr,this.era=vr,this.year=xr,this.month=Er,this.day=Cr,$735220c2d4774dd3$export$c4e2ecac49351ef2(this)}}var $35ea8db9cb2ccb90$var$_type2=new WeakMap;class $35ea8db9cb2ccb90$export$ca871e8dbb80966f{copy(){return this.era?new $35ea8db9cb2ccb90$export$ca871e8dbb80966f(this.calendar,this.era,this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond):new $35ea8db9cb2ccb90$export$ca871e8dbb80966f(this.calendar,this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond)}add(hr){return $735220c2d4774dd3$export$e16d8520af44a096(this,hr)}subtract(hr){return $735220c2d4774dd3$export$4e2d2ead65e5f7e3(this,hr)}set(hr){return $735220c2d4774dd3$export$adaa4cf7ef1b65be($735220c2d4774dd3$export$e5d5e1c1822b6e56(this,hr),hr)}cycle(hr,gr,vr){switch(hr){case"era":case"year":case"month":case"day":return $735220c2d4774dd3$export$d52ced6badfb9a4c(this,hr,gr,vr);default:return $735220c2d4774dd3$export$dd02b3e0007dfe28(this,hr,gr,vr)}}toDate(hr,gr){return $11d87f3f76e88657$export$e67a095c620b86fe(this,hr,gr)}toString(){return $fae977aafc393c5c$export$4223de14708adc63(this)}compare(hr){let gr=$14e0f24ef4ac5c92$export$68781ddf31c0090f(this,hr);return gr===0?$14e0f24ef4ac5c92$export$c19a80a9721b80f6(this,$11d87f3f76e88657$export$b21e0b124e224484(hr)):gr}constructor(...hr){_class_private_field_init(this,$35ea8db9cb2ccb90$var$_type2,{writable:!0,value:void 0});let[gr,vr,xr,Er,Cr]=$35ea8db9cb2ccb90$var$shiftArgs(hr);this.calendar=gr,this.era=vr,this.year=xr,this.month=Er,this.day=Cr,this.hour=hr.shift()||0,this.minute=hr.shift()||0,this.second=hr.shift()||0,this.millisecond=hr.shift()||0,$735220c2d4774dd3$export$c4e2ecac49351ef2(this)}}var $35ea8db9cb2ccb90$var$_type3=new WeakMap;class $35ea8db9cb2ccb90$export$d3b7288e7994edea{copy(){return this.era?new $35ea8db9cb2ccb90$export$d3b7288e7994edea(this.calendar,this.era,this.year,this.month,this.day,this.timeZone,this.offset,this.hour,this.minute,this.second,this.millisecond):new $35ea8db9cb2ccb90$export$d3b7288e7994edea(this.calendar,this.year,this.month,this.day,this.timeZone,this.offset,this.hour,this.minute,this.second,this.millisecond)}add(hr){return $735220c2d4774dd3$export$96b1d28349274637(this,hr)}subtract(hr){return $735220c2d4774dd3$export$6814caac34ca03c7(this,hr)}set(hr,gr){return $735220c2d4774dd3$export$31b5430eb18be4f8(this,hr,gr)}cycle(hr,gr,vr){return $735220c2d4774dd3$export$9a297d111fc86b79(this,hr,gr,vr)}toDate(){return $11d87f3f76e88657$export$83aac07b4c37b25(this)}toString(){return $fae977aafc393c5c$export$bf79f1ebf4b18792(this)}toAbsoluteString(){return this.toDate().toISOString()}compare(hr){return this.toDate().getTime()-$11d87f3f76e88657$export$84c95a83c799e074(hr,this.timeZone).toDate().getTime()}constructor(...hr){_class_private_field_init(this,$35ea8db9cb2ccb90$var$_type3,{writable:!0,value:void 0});let[gr,vr,xr,Er,Cr]=$35ea8db9cb2ccb90$var$shiftArgs(hr),wr=hr.shift(),Rr=hr.shift();this.calendar=gr,this.era=vr,this.year=xr,this.month=Er,this.day=Cr,this.timeZone=wr,this.offset=Rr,this.hour=hr.shift()||0,this.minute=hr.shift()||0,this.second=hr.shift()||0,this.millisecond=hr.shift()||0,$735220c2d4774dd3$export$c4e2ecac49351ef2(this)}}let $fb18d541ea1ad717$var$formatterCache=new Map;class $fb18d541ea1ad717$export$ad991b66133851cf{format(hr){return this.formatter.format(hr)}formatToParts(hr){return this.formatter.formatToParts(hr)}formatRange(hr,gr){if(typeof this.formatter.formatRange=="function")return this.formatter.formatRange(hr,gr);if(gr<hr)throw new RangeError("End date must be >= start date");return`${this.formatter.format(hr)} – ${this.formatter.format(gr)}`}formatRangeToParts(hr,gr){if(typeof this.formatter.formatRangeToParts=="function")return this.formatter.formatRangeToParts(hr,gr);if(gr<hr)throw new RangeError("End date must be >= start date");let vr=this.formatter.formatToParts(hr),xr=this.formatter.formatToParts(gr);return[...vr.map(Er=>({...Er,source:"startRange"})),{type:"literal",value:" – ",source:"shared"},...xr.map(Er=>({...Er,source:"endRange"}))]}resolvedOptions(){let hr=this.formatter.resolvedOptions();return $fb18d541ea1ad717$var$hasBuggyResolvedHourCycle()&&(this.resolvedHourCycle||(this.resolvedHourCycle=$fb18d541ea1ad717$var$getResolvedHourCycle(hr.locale,this.options)),hr.hourCycle=this.resolvedHourCycle,hr.hour12=this.resolvedHourCycle==="h11"||this.resolvedHourCycle==="h12"),hr.calendar==="ethiopic-amete-alem"&&(hr.calendar="ethioaa"),hr}constructor(hr,gr={}){this.formatter=$fb18d541ea1ad717$var$getCachedDateFormatter(hr,gr),this.options=gr}}const $fb18d541ea1ad717$var$hour12Preferences={true:{ja:"h11"},false:{}};function $fb18d541ea1ad717$var$getCachedDateFormatter(mr,hr={}){if(typeof hr.hour12=="boolean"&&$fb18d541ea1ad717$var$hasBuggyHour12Behavior()){hr={...hr};let xr=$fb18d541ea1ad717$var$hour12Preferences[String(hr.hour12)][mr.split("-")[0]],Er=hr.hour12?"h12":"h23";hr.hourCycle=xr??Er,delete hr.hour12}let gr=mr+(hr?Object.entries(hr).sort((xr,Er)=>xr[0]<Er[0]?-1:1).join():"");if($fb18d541ea1ad717$var$formatterCache.has(gr))return $fb18d541ea1ad717$var$formatterCache.get(gr);let vr=new Intl.DateTimeFormat(mr,hr);return $fb18d541ea1ad717$var$formatterCache.set(gr,vr),vr}let $fb18d541ea1ad717$var$_hasBuggyHour12Behavior=null;function $fb18d541ea1ad717$var$hasBuggyHour12Behavior(){return $fb18d541ea1ad717$var$_hasBuggyHour12Behavior==null&&($fb18d541ea1ad717$var$_hasBuggyHour12Behavior=new Intl.DateTimeFormat("en-US",{hour:"numeric",hour12:!1}).format(new Date(2020,2,3,0))==="24"),$fb18d541ea1ad717$var$_hasBuggyHour12Behavior}let $fb18d541ea1ad717$var$_hasBuggyResolvedHourCycle=null;function $fb18d541ea1ad717$var$hasBuggyResolvedHourCycle(){return $fb18d541ea1ad717$var$_hasBuggyResolvedHourCycle==null&&($fb18d541ea1ad717$var$_hasBuggyResolvedHourCycle=new Intl.DateTimeFormat("fr",{hour:"numeric",hour12:!1}).resolvedOptions().hourCycle==="h12"),$fb18d541ea1ad717$var$_hasBuggyResolvedHourCycle}function $fb18d541ea1ad717$var$getResolvedHourCycle(mr,hr){if(!hr.timeStyle&&!hr.hour)return;mr=mr.replace(/(-u-)?-nu-[a-zA-Z0-9]+/,""),mr+=(mr.includes("-u-")?"":"-u")+"-nu-latn";let gr=$fb18d541ea1ad717$var$getCachedDateFormatter(mr,{...hr,timeZone:void 0}),vr=parseInt(gr.formatToParts(new Date(2020,2,3,0)).find(Er=>Er.type==="hour").value,10),xr=parseInt(gr.formatToParts(new Date(2020,2,3,23)).find(Er=>Er.type==="hour").value,10);if(vr===0&&xr===23)return"h23";if(vr===24&&xr===23)return"h24";if(vr===0&&xr===11)return"h11";if(vr===12&&xr===11)return"h12";throw new Error("Unexpected hour cycle result")}function _extends$7(){return _extends$7=Object.assign?Object.assign.bind():function(mr){for(var hr=1;hr<arguments.length;hr++){var gr=arguments[hr];for(var vr in gr)({}).hasOwnProperty.call(gr,vr)&&(mr[vr]=gr[vr])}return mr},_extends$7.apply(null,arguments)}function $e42e1063c40fb3ef$export$b9ecd428b558ff10(mr,hr,{checkForDefaultPrevented:gr=!0}={}){return function(xr){if(mr?.(xr),gr===!1||!xr.defaultPrevented)return hr?.(xr)}}function $6ed0406888f73fc4$var$setRef(mr,hr){typeof mr=="function"?mr(hr):mr!=null&&(mr.current=hr)}function $6ed0406888f73fc4$export$43e446d32b3d21af(...mr){return hr=>mr.forEach(gr=>$6ed0406888f73fc4$var$setRef(gr,hr))}function $6ed0406888f73fc4$export$c7b2cbe3552a0d05(...mr){return reactExports.useCallback($6ed0406888f73fc4$export$43e446d32b3d21af(...mr),mr)}function $c512c27ab02ef895$export$fd42f52fd3ae1109(mr,hr){const gr=reactExports.createContext(hr);function vr(Er){const{children:Cr,...wr}=Er,Rr=reactExports.useMemo(()=>wr,Object.values(wr));return reactExports.createElement(gr.Provider,{value:Rr},Cr)}function xr(Er){const Cr=reactExports.useContext(gr);if(Cr)return Cr;if(hr!==void 0)return hr;throw new Error(`\`${Er}\` must be used within \`${mr}\``)}return vr.displayName=mr+"Provider",[vr,xr]}function $c512c27ab02ef895$export$50c7b4e9d9f19c1(mr,hr=[]){let gr=[];function vr(Er,Cr){const wr=reactExports.createContext(Cr),Rr=gr.length;gr=[...gr,Cr];function kr(Br){const{scope:Hr,children:Gr,...qr}=Br,zr=Hr?.[mr][Rr]||wr,Qr=reactExports.useMemo(()=>qr,Object.values(qr));return reactExports.createElement(zr.Provider,{value:Qr},Gr)}function Dr(Br,Hr){const Gr=Hr?.[mr][Rr]||wr,qr=reactExports.useContext(Gr);if(qr)return qr;if(Cr!==void 0)return Cr;throw new Error(`\`${Br}\` must be used within \`${Er}\``)}return kr.displayName=Er+"Provider",[kr,Dr]}const xr=()=>{const Er=gr.map(Cr=>reactExports.createContext(Cr));return function(wr){const Rr=wr?.[mr]||Er;return reactExports.useMemo(()=>({[`__scope${mr}`]:{...wr,[mr]:Rr}}),[wr,Rr])}};return xr.scopeName=mr,[vr,$c512c27ab02ef895$var$composeContextScopes(xr,...hr)]}function $c512c27ab02ef895$var$composeContextScopes(...mr){const hr=mr[0];if(mr.length===1)return hr;const gr=()=>{const vr=mr.map(xr=>({useScope:xr(),scopeName:xr.scopeName}));return function(Er){const Cr=vr.reduce((wr,{useScope:Rr,scopeName:kr})=>{const Br=Rr(Er)[`__scope${kr}`];return{...wr,...Br}},{});return reactExports.useMemo(()=>({[`__scope${hr.scopeName}`]:Cr}),[Cr])}};return gr.scopeName=hr.scopeName,gr}const $5e63c961fc1ce211$export$8c6ed5c666ac1360=reactExports.forwardRef((mr,hr)=>{const{children:gr,...vr}=mr,xr=reactExports.Children.toArray(gr),Er=xr.find($5e63c961fc1ce211$var$isSlottable);if(Er){const Cr=Er.props.children,wr=xr.map(Rr=>Rr===Er?reactExports.Children.count(Cr)>1?reactExports.Children.only(null):reactExports.isValidElement(Cr)?Cr.props.children:null:Rr);return reactExports.createElement($5e63c961fc1ce211$var$SlotClone,_extends$7({},vr,{ref:hr}),reactExports.isValidElement(Cr)?reactExports.cloneElement(Cr,void 0,wr):null)}return reactExports.createElement($5e63c961fc1ce211$var$SlotClone,_extends$7({},vr,{ref:hr}),gr)});$5e63c961fc1ce211$export$8c6ed5c666ac1360.displayName="Slot";const $5e63c961fc1ce211$var$SlotClone=reactExports.forwardRef((mr,hr)=>{const{children:gr,...vr}=mr;return reactExports.isValidElement(gr)?reactExports.cloneElement(gr,{...$5e63c961fc1ce211$var$mergeProps(vr,gr.props),ref:hr?$6ed0406888f73fc4$export$43e446d32b3d21af(hr,gr.ref):gr.ref}):reactExports.Children.count(gr)>1?reactExports.Children.only(null):null});$5e63c961fc1ce211$var$SlotClone.displayName="SlotClone";const $5e63c961fc1ce211$export$d9f1ccf0bdb05d45=({children:mr})=>reactExports.createElement(reactExports.Fragment,null,mr);function $5e63c961fc1ce211$var$isSlottable(mr){return reactExports.isValidElement(mr)&&mr.type===$5e63c961fc1ce211$export$d9f1ccf0bdb05d45}function $5e63c961fc1ce211$var$mergeProps(mr,hr){const gr={...hr};for(const vr in hr){const xr=mr[vr],Er=hr[vr];/^on[A-Z]/.test(vr)?xr&&Er?gr[vr]=(...wr)=>{Er(...wr),xr(...wr)}:xr&&(gr[vr]=xr):vr==="style"?gr[vr]={...xr,...Er}:vr==="className"&&(gr[vr]=[xr,Er].filter(Boolean).join(" "))}return{...mr,...gr}}const $8927f6f2acc4f386$var$NODES=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],$8927f6f2acc4f386$export$250ffa63cdc0d034=$8927f6f2acc4f386$var$NODES.reduce((mr,hr)=>{const gr=reactExports.forwardRef((vr,xr)=>{const{asChild:Er,...Cr}=vr,wr=Er?$5e63c961fc1ce211$export$8c6ed5c666ac1360:hr;return reactExports.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),reactExports.createElement(wr,_extends$7({},Cr,{ref:xr}))});return gr.displayName=`Primitive.${hr}`,{...mr,[hr]:gr}},{});function $8927f6f2acc4f386$export$6d1a0317bde7de7f(mr,hr){mr&&reactDomExports.flushSync(()=>mr.dispatchEvent(hr))}function $b1b2314f5f9a1d84$export$25bec8c6f54ee79a$1(mr){const hr=reactExports.useRef(mr);return reactExports.useEffect(()=>{hr.current=mr}),reactExports.useMemo(()=>(...gr)=>{var vr;return(vr=hr.current)===null||vr===void 0?void 0:vr.call(hr,...gr)},[])}function $addc16e1bbe58fd0$export$3a72a57244d6e765(mr,hr=globalThis?.document){const gr=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a$1(mr);reactExports.useEffect(()=>{const vr=xr=>{xr.key==="Escape"&&gr(xr)};return hr.addEventListener("keydown",vr),()=>hr.removeEventListener("keydown",vr)},[gr,hr])}const $5cb92bef7577960e$var$CONTEXT_UPDATE="dismissableLayer.update",$5cb92bef7577960e$var$POINTER_DOWN_OUTSIDE="dismissableLayer.pointerDownOutside",$5cb92bef7577960e$var$FOCUS_OUTSIDE="dismissableLayer.focusOutside";let $5cb92bef7577960e$var$originalBodyPointerEvents;const $5cb92bef7577960e$var$DismissableLayerContext=reactExports.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),$5cb92bef7577960e$export$177fb62ff3ec1f22=reactExports.forwardRef((mr,hr)=>{var gr;const{disableOutsidePointerEvents:vr=!1,onEscapeKeyDown:xr,onPointerDownOutside:Er,onFocusOutside:Cr,onInteractOutside:wr,onDismiss:Rr,...kr}=mr,Dr=reactExports.useContext($5cb92bef7577960e$var$DismissableLayerContext),[Br,Hr]=reactExports.useState(null),Gr=(gr=Br?.ownerDocument)!==null&&gr!==void 0?gr:globalThis?.document,[,qr]=reactExports.useState({}),zr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(hr,$n=>Hr($n)),Qr=Array.from(Dr.layers),[sn]=[...Dr.layersWithOutsidePointerEventsDisabled].slice(-1),hn=Qr.indexOf(sn),vn=Br?Qr.indexOf(Br):-1,yn=Dr.layersWithOutsidePointerEventsDisabled.size>0,gn=vn>=hn,bn=$5cb92bef7577960e$var$usePointerDownOutside($n=>{const Sn=$n.target,Cn=[...Dr.branches].some(Rn=>Rn.contains(Sn));!gn||Cn||(Er?.($n),wr?.($n),$n.defaultPrevented||Rr?.())},Gr),xn=$5cb92bef7577960e$var$useFocusOutside($n=>{const Sn=$n.target;[...Dr.branches].some(Rn=>Rn.contains(Sn))||(Cr?.($n),wr?.($n),$n.defaultPrevented||Rr?.())},Gr);return $addc16e1bbe58fd0$export$3a72a57244d6e765($n=>{vn===Dr.layers.size-1&&(xr?.($n),!$n.defaultPrevented&&Rr&&($n.preventDefault(),Rr()))},Gr),reactExports.useEffect(()=>{if(Br)return vr&&(Dr.layersWithOutsidePointerEventsDisabled.size===0&&($5cb92bef7577960e$var$originalBodyPointerEvents=Gr.body.style.pointerEvents,Gr.body.style.pointerEvents="none"),Dr.layersWithOutsidePointerEventsDisabled.add(Br)),Dr.layers.add(Br),$5cb92bef7577960e$var$dispatchUpdate(),()=>{vr&&Dr.layersWithOutsidePointerEventsDisabled.size===1&&(Gr.body.style.pointerEvents=$5cb92bef7577960e$var$originalBodyPointerEvents)}},[Br,Gr,vr,Dr]),reactExports.useEffect(()=>()=>{Br&&(Dr.layers.delete(Br),Dr.layersWithOutsidePointerEventsDisabled.delete(Br),$5cb92bef7577960e$var$dispatchUpdate())},[Br,Dr]),reactExports.useEffect(()=>{const $n=()=>qr({});return document.addEventListener($5cb92bef7577960e$var$CONTEXT_UPDATE,$n),()=>document.removeEventListener($5cb92bef7577960e$var$CONTEXT_UPDATE,$n)},[]),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$7({},kr,{ref:zr,style:{pointerEvents:yn?gn?"auto":"none":void 0,...mr.style},onFocusCapture:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onFocusCapture,xn.onFocusCapture),onBlurCapture:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onBlurCapture,xn.onBlurCapture),onPointerDownCapture:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onPointerDownCapture,bn.onPointerDownCapture)}))});function $5cb92bef7577960e$var$usePointerDownOutside(mr,hr=globalThis?.document){const gr=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a$1(mr),vr=reactExports.useRef(!1),xr=reactExports.useRef(()=>{});return reactExports.useEffect(()=>{const Er=wr=>{if(wr.target&&!vr.current){let kr=function(){$5cb92bef7577960e$var$handleAndDispatchCustomEvent($5cb92bef7577960e$var$POINTER_DOWN_OUTSIDE,gr,Rr,{discrete:!0})};const Rr={originalEvent:wr};wr.pointerType==="touch"?(hr.removeEventListener("click",xr.current),xr.current=kr,hr.addEventListener("click",xr.current,{once:!0})):kr()}else hr.removeEventListener("click",xr.current);vr.current=!1},Cr=window.setTimeout(()=>{hr.addEventListener("pointerdown",Er)},0);return()=>{window.clearTimeout(Cr),hr.removeEventListener("pointerdown",Er),hr.removeEventListener("click",xr.current)}},[hr,gr]),{onPointerDownCapture:()=>vr.current=!0}}function $5cb92bef7577960e$var$useFocusOutside(mr,hr=globalThis?.document){const gr=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a$1(mr),vr=reactExports.useRef(!1);return reactExports.useEffect(()=>{const xr=Er=>{Er.target&&!vr.current&&$5cb92bef7577960e$var$handleAndDispatchCustomEvent($5cb92bef7577960e$var$FOCUS_OUTSIDE,gr,{originalEvent:Er},{discrete:!1})};return hr.addEventListener("focusin",xr),()=>hr.removeEventListener("focusin",xr)},[hr,gr]),{onFocusCapture:()=>vr.current=!0,onBlurCapture:()=>vr.current=!1}}function $5cb92bef7577960e$var$dispatchUpdate(){const mr=new CustomEvent($5cb92bef7577960e$var$CONTEXT_UPDATE);document.dispatchEvent(mr)}function $5cb92bef7577960e$var$handleAndDispatchCustomEvent(mr,hr,gr,{discrete:vr}){const xr=gr.originalEvent.target,Er=new CustomEvent(mr,{bubbles:!1,cancelable:!0,detail:gr});hr&&xr.addEventListener(mr,hr,{once:!0}),vr?$8927f6f2acc4f386$export$6d1a0317bde7de7f(xr,Er):xr.dispatchEvent(Er)}const $5cb92bef7577960e$export$be92b6f5f03c0fe9=$5cb92bef7577960e$export$177fb62ff3ec1f22,$9f79659886946c16$export$e5c5a5f917a5871c=globalThis?.document?reactExports.useLayoutEffect:()=>{},$1746a345f3d73bb7$var$useReactId=React$2.useId||(()=>{});let $1746a345f3d73bb7$var$count=0;function $1746a345f3d73bb7$export$f680877a34711e37(mr){const[hr,gr]=reactExports.useState($1746a345f3d73bb7$var$useReactId());return $9f79659886946c16$export$e5c5a5f917a5871c(()=>{gr(vr=>vr??String($1746a345f3d73bb7$var$count++))},[mr]),hr?`radix-${hr}`:""}const sides=["top","right","bottom","left"],min$2=Math.min,max$3=Math.max,round$2=Math.round,floor$2=Math.floor,createCoords=mr=>({x:mr,y:mr}),oppositeSideMap={left:"right",right:"left",bottom:"top",top:"bottom"},oppositeAlignmentMap={start:"end",end:"start"};function clamp(mr,hr,gr){return max$3(mr,min$2(hr,gr))}function evaluate(mr,hr){return typeof mr=="function"?mr(hr):mr}function getSide$1(mr){return mr.split("-")[0]}function getAlignment(mr){return mr.split("-")[1]}function getOppositeAxis(mr){return mr==="x"?"y":"x"}function getAxisLength(mr){return mr==="y"?"height":"width"}function getSideAxis$1(mr){return["top","bottom"].includes(getSide$1(mr))?"y":"x"}function getAlignmentAxis(mr){return getOppositeAxis(getSideAxis$1(mr))}function getAlignmentSides(mr,hr,gr){gr===void 0&&(gr=!1);const vr=getAlignment(mr),xr=getAlignmentAxis(mr),Er=getAxisLength(xr);let Cr=xr==="x"?vr===(gr?"end":"start")?"right":"left":vr==="start"?"bottom":"top";return hr.reference[Er]>hr.floating[Er]&&(Cr=getOppositePlacement(Cr)),[Cr,getOppositePlacement(Cr)]}function getExpandedPlacements(mr){const hr=getOppositePlacement(mr);return[getOppositeAlignmentPlacement(mr),hr,getOppositeAlignmentPlacement(hr)]}function getOppositeAlignmentPlacement(mr){return mr.replace(/start|end/g,hr=>oppositeAlignmentMap[hr])}function getSideList(mr,hr,gr){const vr=["left","right"],xr=["right","left"],Er=["top","bottom"],Cr=["bottom","top"];switch(mr){case"top":case"bottom":return gr?hr?xr:vr:hr?vr:xr;case"left":case"right":return hr?Er:Cr;default:return[]}}function getOppositeAxisPlacements(mr,hr,gr,vr){const xr=getAlignment(mr);let Er=getSideList(getSide$1(mr),gr==="start",vr);return xr&&(Er=Er.map(Cr=>Cr+"-"+xr),hr&&(Er=Er.concat(Er.map(getOppositeAlignmentPlacement)))),Er}function getOppositePlacement(mr){return mr.replace(/left|right|bottom|top/g,hr=>oppositeSideMap[hr])}function expandPaddingObject(mr){return{top:0,right:0,bottom:0,left:0,...mr}}function getPaddingObject(mr){return typeof mr!="number"?expandPaddingObject(mr):{top:mr,right:mr,bottom:mr,left:mr}}function rectToClientRect(mr){const{x:hr,y:gr,width:vr,height:xr}=mr;return{width:vr,height:xr,top:gr,left:hr,right:hr+vr,bottom:gr+xr,x:hr,y:gr}}function computeCoordsFromPlacement$1(mr,hr,gr){let{reference:vr,floating:xr}=mr;const Er=getSideAxis$1(hr),Cr=getAlignmentAxis(hr),wr=getAxisLength(Cr),Rr=getSide$1(hr),kr=Er==="y",Dr=vr.x+vr.width/2-xr.width/2,Br=vr.y+vr.height/2-xr.height/2,Hr=vr[wr]/2-xr[wr]/2;let Gr;switch(Rr){case"top":Gr={x:Dr,y:vr.y-xr.height};break;case"bottom":Gr={x:Dr,y:vr.y+vr.height};break;case"right":Gr={x:vr.x+vr.width,y:Br};break;case"left":Gr={x:vr.x-xr.width,y:Br};break;default:Gr={x:vr.x,y:vr.y}}switch(getAlignment(hr)){case"start":Gr[Cr]-=Hr*(gr&&kr?-1:1);break;case"end":Gr[Cr]+=Hr*(gr&&kr?-1:1);break}return Gr}const computePosition$2=async(mr,hr,gr)=>{const{placement:vr="bottom",strategy:xr="absolute",middleware:Er=[],platform:Cr}=gr,wr=Er.filter(Boolean),Rr=await(Cr.isRTL==null?void 0:Cr.isRTL(hr));let kr=await Cr.getElementRects({reference:mr,floating:hr,strategy:xr}),{x:Dr,y:Br}=computeCoordsFromPlacement$1(kr,vr,Rr),Hr=vr,Gr={},qr=0;for(let zr=0;zr<wr.length;zr++){const{name:Qr,fn:sn}=wr[zr],{x:hn,y:vn,data:yn,reset:gn}=await sn({x:Dr,y:Br,initialPlacement:vr,placement:Hr,strategy:xr,middlewareData:Gr,rects:kr,platform:Cr,elements:{reference:mr,floating:hr}});Dr=hn??Dr,Br=vn??Br,Gr={...Gr,[Qr]:{...Gr[Qr],...yn}},gn&&qr<=50&&(qr++,typeof gn=="object"&&(gn.placement&&(Hr=gn.placement),gn.rects&&(kr=gn.rects===!0?await Cr.getElementRects({reference:mr,floating:hr,strategy:xr}):gn.rects),{x:Dr,y:Br}=computeCoordsFromPlacement$1(kr,Hr,Rr)),zr=-1)}return{x:Dr,y:Br,placement:Hr,strategy:xr,middlewareData:Gr}};async function detectOverflow(mr,hr){var gr;hr===void 0&&(hr={});const{x:vr,y:xr,platform:Er,rects:Cr,elements:wr,strategy:Rr}=mr,{boundary:kr="clippingAncestors",rootBoundary:Dr="viewport",elementContext:Br="floating",altBoundary:Hr=!1,padding:Gr=0}=evaluate(hr,mr),qr=getPaddingObject(Gr),Qr=wr[Hr?Br==="floating"?"reference":"floating":Br],sn=rectToClientRect(await Er.getClippingRect({element:(gr=await(Er.isElement==null?void 0:Er.isElement(Qr)))==null||gr?Qr:Qr.contextElement||await(Er.getDocumentElement==null?void 0:Er.getDocumentElement(wr.floating)),boundary:kr,rootBoundary:Dr,strategy:Rr})),hn=Br==="floating"?{x:vr,y:xr,width:Cr.floating.width,height:Cr.floating.height}:Cr.reference,vn=await(Er.getOffsetParent==null?void 0:Er.getOffsetParent(wr.floating)),yn=await(Er.isElement==null?void 0:Er.isElement(vn))?await(Er.getScale==null?void 0:Er.getScale(vn))||{x:1,y:1}:{x:1,y:1},gn=rectToClientRect(Er.convertOffsetParentRelativeRectToViewportRelativeRect?await Er.convertOffsetParentRelativeRectToViewportRelativeRect({elements:wr,rect:hn,offsetParent:vn,strategy:Rr}):hn);return{top:(sn.top-gn.top+qr.top)/yn.y,bottom:(gn.bottom-sn.bottom+qr.bottom)/yn.y,left:(sn.left-gn.left+qr.left)/yn.x,right:(gn.right-sn.right+qr.right)/yn.x}}const arrow$3=mr=>({name:"arrow",options:mr,async fn(hr){const{x:gr,y:vr,placement:xr,rects:Er,platform:Cr,elements:wr,middlewareData:Rr}=hr,{element:kr,padding:Dr=0}=evaluate(mr,hr)||{};if(kr==null)return{};const Br=getPaddingObject(Dr),Hr={x:gr,y:vr},Gr=getAlignmentAxis(xr),qr=getAxisLength(Gr),zr=await Cr.getDimensions(kr),Qr=Gr==="y",sn=Qr?"top":"left",hn=Qr?"bottom":"right",vn=Qr?"clientHeight":"clientWidth",yn=Er.reference[qr]+Er.reference[Gr]-Hr[Gr]-Er.floating[qr],gn=Hr[Gr]-Er.reference[Gr],bn=await(Cr.getOffsetParent==null?void 0:Cr.getOffsetParent(kr));let xn=bn?bn[vn]:0;(!xn||!await(Cr.isElement==null?void 0:Cr.isElement(bn)))&&(xn=wr.floating[vn]||Er.floating[qr]);const $n=yn/2-gn/2,Sn=xn/2-zr[qr]/2-1,Cn=min$2(Br[sn],Sn),Rn=min$2(Br[hn],Sn),Bn=Cn,Fn=xn-zr[qr]-Rn,Hn=xn/2-zr[qr]/2+$n,Gn=clamp(Bn,Hn,Fn),qn=!Rr.arrow&&getAlignment(xr)!=null&&Hn!==Gn&&Er.reference[qr]/2-(Hn<Bn?Cn:Rn)-zr[qr]/2<0,On=qn?Hn<Bn?Hn-Bn:Hn-Fn:0;return{[Gr]:Hr[Gr]+On,data:{[Gr]:Gn,centerOffset:Hn-Gn-On,...qn&&{alignmentOffset:On}},reset:qn}}}),flip$2=function(mr){return mr===void 0&&(mr={}),{name:"flip",options:mr,async fn(hr){var gr,vr;const{placement:xr,middlewareData:Er,rects:Cr,initialPlacement:wr,platform:Rr,elements:kr}=hr,{mainAxis:Dr=!0,crossAxis:Br=!0,fallbackPlacements:Hr,fallbackStrategy:Gr="bestFit",fallbackAxisSideDirection:qr="none",flipAlignment:zr=!0,...Qr}=evaluate(mr,hr);if((gr=Er.arrow)!=null&&gr.alignmentOffset)return{};const sn=getSide$1(xr),hn=getSideAxis$1(wr),vn=getSide$1(wr)===wr,yn=await(Rr.isRTL==null?void 0:Rr.isRTL(kr.floating)),gn=Hr||(vn||!zr?[getOppositePlacement(wr)]:getExpandedPlacements(wr)),bn=qr!=="none";!Hr&&bn&&gn.push(...getOppositeAxisPlacements(wr,zr,qr,yn));const xn=[wr,...gn],$n=await detectOverflow(hr,Qr),Sn=[];let Cn=((vr=Er.flip)==null?void 0:vr.overflows)||[];if(Dr&&Sn.push($n[sn]),Br){const Hn=getAlignmentSides(xr,Cr,yn);Sn.push($n[Hn[0]],$n[Hn[1]])}if(Cn=[...Cn,{placement:xr,overflows:Sn}],!Sn.every(Hn=>Hn<=0)){var Rn,Bn;const Hn=(((Rn=Er.flip)==null?void 0:Rn.index)||0)+1,Gn=xn[Hn];if(Gn)return{data:{index:Hn,overflows:Cn},reset:{placement:Gn}};let qn=(Bn=Cn.filter(On=>On.overflows[0]<=0).sort((On,wn)=>On.overflows[1]-wn.overflows[1])[0])==null?void 0:Bn.placement;if(!qn)switch(Gr){case"bestFit":{var Fn;const On=(Fn=Cn.filter(wn=>{if(bn){const _n=getSideAxis$1(wn.placement);return _n===hn||_n==="y"}return!0}).map(wn=>[wn.placement,wn.overflows.filter(_n=>_n>0).reduce((_n,Tn)=>_n+Tn,0)]).sort((wn,_n)=>wn[1]-_n[1])[0])==null?void 0:Fn[0];On&&(qn=On);break}case"initialPlacement":qn=wr;break}if(xr!==qn)return{reset:{placement:qn}}}return{}}}};function getSideOffsets(mr,hr){return{top:mr.top-hr.height,right:mr.right-hr.width,bottom:mr.bottom-hr.height,left:mr.left-hr.width}}function isAnySideFullyClipped(mr){return sides.some(hr=>mr[hr]>=0)}const hide$2=function(mr){return mr===void 0&&(mr={}),{name:"hide",options:mr,async fn(hr){const{rects:gr}=hr,{strategy:vr="referenceHidden",...xr}=evaluate(mr,hr);switch(vr){case"referenceHidden":{const Er=await detectOverflow(hr,{...xr,elementContext:"reference"}),Cr=getSideOffsets(Er,gr.reference);return{data:{referenceHiddenOffsets:Cr,referenceHidden:isAnySideFullyClipped(Cr)}}}case"escaped":{const Er=await detectOverflow(hr,{...xr,altBoundary:!0}),Cr=getSideOffsets(Er,gr.floating);return{data:{escapedOffsets:Cr,escaped:isAnySideFullyClipped(Cr)}}}default:return{}}}}};async function convertValueToCoords(mr,hr){const{placement:gr,platform:vr,elements:xr}=mr,Er=await(vr.isRTL==null?void 0:vr.isRTL(xr.floating)),Cr=getSide$1(gr),wr=getAlignment(gr),Rr=getSideAxis$1(gr)==="y",kr=["left","top"].includes(Cr)?-1:1,Dr=Er&&Rr?-1:1,Br=evaluate(hr,mr);let{mainAxis:Hr,crossAxis:Gr,alignmentAxis:qr}=typeof Br=="number"?{mainAxis:Br,crossAxis:0,alignmentAxis:null}:{mainAxis:Br.mainAxis||0,crossAxis:Br.crossAxis||0,alignmentAxis:Br.alignmentAxis};return wr&&typeof qr=="number"&&(Gr=wr==="end"?qr*-1:qr),Rr?{x:Gr*Dr,y:Hr*kr}:{x:Hr*kr,y:Gr*Dr}}const offset$2=function(mr){return mr===void 0&&(mr=0),{name:"offset",options:mr,async fn(hr){var gr,vr;const{x:xr,y:Er,placement:Cr,middlewareData:wr}=hr,Rr=await convertValueToCoords(hr,mr);return Cr===((gr=wr.offset)==null?void 0:gr.placement)&&(vr=wr.arrow)!=null&&vr.alignmentOffset?{}:{x:xr+Rr.x,y:Er+Rr.y,data:{...Rr,placement:Cr}}}}},shift$3=function(mr){return mr===void 0&&(mr={}),{name:"shift",options:mr,async fn(hr){const{x:gr,y:vr,placement:xr}=hr,{mainAxis:Er=!0,crossAxis:Cr=!1,limiter:wr={fn:Qr=>{let{x:sn,y:hn}=Qr;return{x:sn,y:hn}}},...Rr}=evaluate(mr,hr),kr={x:gr,y:vr},Dr=await detectOverflow(hr,Rr),Br=getSideAxis$1(getSide$1(xr)),Hr=getOppositeAxis(Br);let Gr=kr[Hr],qr=kr[Br];if(Er){const Qr=Hr==="y"?"top":"left",sn=Hr==="y"?"bottom":"right",hn=Gr+Dr[Qr],vn=Gr-Dr[sn];Gr=clamp(hn,Gr,vn)}if(Cr){const Qr=Br==="y"?"top":"left",sn=Br==="y"?"bottom":"right",hn=qr+Dr[Qr],vn=qr-Dr[sn];qr=clamp(hn,qr,vn)}const zr=wr.fn({...hr,[Hr]:Gr,[Br]:qr});return{...zr,data:{x:zr.x-gr,y:zr.y-vr,enabled:{[Hr]:Er,[Br]:Cr}}}}}},limitShift$2=function(mr){return mr===void 0&&(mr={}),{options:mr,fn(hr){const{x:gr,y:vr,placement:xr,rects:Er,middlewareData:Cr}=hr,{offset:wr=0,mainAxis:Rr=!0,crossAxis:kr=!0}=evaluate(mr,hr),Dr={x:gr,y:vr},Br=getSideAxis$1(xr),Hr=getOppositeAxis(Br);let Gr=Dr[Hr],qr=Dr[Br];const zr=evaluate(wr,hr),Qr=typeof zr=="number"?{mainAxis:zr,crossAxis:0}:{mainAxis:0,crossAxis:0,...zr};if(Rr){const vn=Hr==="y"?"height":"width",yn=Er.reference[Hr]-Er.floating[vn]+Qr.mainAxis,gn=Er.reference[Hr]+Er.reference[vn]-Qr.mainAxis;Gr<yn?Gr=yn:Gr>gn&&(Gr=gn)}if(kr){var sn,hn;const vn=Hr==="y"?"width":"height",yn=["top","left"].includes(getSide$1(xr)),gn=Er.reference[Br]-Er.floating[vn]+(yn&&((sn=Cr.offset)==null?void 0:sn[Br])||0)+(yn?0:Qr.crossAxis),bn=Er.reference[Br]+Er.reference[vn]+(yn?0:((hn=Cr.offset)==null?void 0:hn[Br])||0)-(yn?Qr.crossAxis:0);qr<gn?qr=gn:qr>bn&&(qr=bn)}return{[Hr]:Gr,[Br]:qr}}}},size$2=function(mr){return mr===void 0&&(mr={}),{name:"size",options:mr,async fn(hr){var gr,vr;const{placement:xr,rects:Er,platform:Cr,elements:wr}=hr,{apply:Rr=()=>{},...kr}=evaluate(mr,hr),Dr=await detectOverflow(hr,kr),Br=getSide$1(xr),Hr=getAlignment(xr),Gr=getSideAxis$1(xr)==="y",{width:qr,height:zr}=Er.floating;let Qr,sn;Br==="top"||Br==="bottom"?(Qr=Br,sn=Hr===(await(Cr.isRTL==null?void 0:Cr.isRTL(wr.floating))?"start":"end")?"left":"right"):(sn=Br,Qr=Hr==="end"?"top":"bottom");const hn=zr-Dr.top-Dr.bottom,vn=qr-Dr.left-Dr.right,yn=min$2(zr-Dr[Qr],hn),gn=min$2(qr-Dr[sn],vn),bn=!hr.middlewareData.shift;let xn=yn,$n=gn;if((gr=hr.middlewareData.shift)!=null&&gr.enabled.x&&($n=vn),(vr=hr.middlewareData.shift)!=null&&vr.enabled.y&&(xn=hn),bn&&!Hr){const Cn=max$3(Dr.left,0),Rn=max$3(Dr.right,0),Bn=max$3(Dr.top,0),Fn=max$3(Dr.bottom,0);Gr?$n=qr-2*(Cn!==0||Rn!==0?Cn+Rn:max$3(Dr.left,Dr.right)):xn=zr-2*(Bn!==0||Fn!==0?Bn+Fn:max$3(Dr.top,Dr.bottom))}await Rr({...hr,availableWidth:$n,availableHeight:xn});const Sn=await Cr.getDimensions(wr.floating);return qr!==Sn.width||zr!==Sn.height?{reset:{rects:!0}}:{}}}};function hasWindow(){return typeof window<"u"}function getNodeName(mr){return isNode(mr)?(mr.nodeName||"").toLowerCase():"#document"}function getWindow(mr){var hr;return(mr==null||(hr=mr.ownerDocument)==null?void 0:hr.defaultView)||window}function getDocumentElement(mr){var hr;return(hr=(isNode(mr)?mr.ownerDocument:mr.document)||window.document)==null?void 0:hr.documentElement}function isNode(mr){return hasWindow()?mr instanceof Node||mr instanceof getWindow(mr).Node:!1}function isElement$1(mr){return hasWindow()?mr instanceof Element||mr instanceof getWindow(mr).Element:!1}function isHTMLElement(mr){return hasWindow()?mr instanceof HTMLElement||mr instanceof getWindow(mr).HTMLElement:!1}function isShadowRoot(mr){return!hasWindow()||typeof ShadowRoot>"u"?!1:mr instanceof ShadowRoot||mr instanceof getWindow(mr).ShadowRoot}function isOverflowElement(mr){const{overflow:hr,overflowX:gr,overflowY:vr,display:xr}=getComputedStyle$1(mr);return/auto|scroll|overlay|hidden|clip/.test(hr+vr+gr)&&!["inline","contents"].includes(xr)}function isTableElement(mr){return["table","td","th"].includes(getNodeName(mr))}function isTopLayer(mr){return[":popover-open",":modal"].some(hr=>{try{return mr.matches(hr)}catch{return!1}})}function isContainingBlock(mr){const hr=isWebKit(),gr=isElement$1(mr)?getComputedStyle$1(mr):mr;return["transform","translate","scale","rotate","perspective"].some(vr=>gr[vr]?gr[vr]!=="none":!1)||(gr.containerType?gr.containerType!=="normal":!1)||!hr&&(gr.backdropFilter?gr.backdropFilter!=="none":!1)||!hr&&(gr.filter?gr.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(vr=>(gr.willChange||"").includes(vr))||["paint","layout","strict","content"].some(vr=>(gr.contain||"").includes(vr))}function getContainingBlock(mr){let hr=getParentNode(mr);for(;isHTMLElement(hr)&&!isLastTraversableNode(hr);){if(isContainingBlock(hr))return hr;if(isTopLayer(hr))return null;hr=getParentNode(hr)}return null}function isWebKit(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function isLastTraversableNode(mr){return["html","body","#document"].includes(getNodeName(mr))}function getComputedStyle$1(mr){return getWindow(mr).getComputedStyle(mr)}function getNodeScroll(mr){return isElement$1(mr)?{scrollLeft:mr.scrollLeft,scrollTop:mr.scrollTop}:{scrollLeft:mr.scrollX,scrollTop:mr.scrollY}}function getParentNode(mr){if(getNodeName(mr)==="html")return mr;const hr=mr.assignedSlot||mr.parentNode||isShadowRoot(mr)&&mr.host||getDocumentElement(mr);return isShadowRoot(hr)?hr.host:hr}function getNearestOverflowAncestor(mr){const hr=getParentNode(mr);return isLastTraversableNode(hr)?mr.ownerDocument?mr.ownerDocument.body:mr.body:isHTMLElement(hr)&&isOverflowElement(hr)?hr:getNearestOverflowAncestor(hr)}function getOverflowAncestors(mr,hr,gr){var vr;hr===void 0&&(hr=[]),gr===void 0&&(gr=!0);const xr=getNearestOverflowAncestor(mr),Er=xr===((vr=mr.ownerDocument)==null?void 0:vr.body),Cr=getWindow(xr);if(Er){const wr=getFrameElement(Cr);return hr.concat(Cr,Cr.visualViewport||[],isOverflowElement(xr)?xr:[],wr&&gr?getOverflowAncestors(wr):[])}return hr.concat(xr,getOverflowAncestors(xr,[],gr))}function getFrameElement(mr){return mr.parent&&Object.getPrototypeOf(mr.parent)?mr.frameElement:null}function getCssDimensions(mr){const hr=getComputedStyle$1(mr);let gr=parseFloat(hr.width)||0,vr=parseFloat(hr.height)||0;const xr=isHTMLElement(mr),Er=xr?mr.offsetWidth:gr,Cr=xr?mr.offsetHeight:vr,wr=round$2(gr)!==Er||round$2(vr)!==Cr;return wr&&(gr=Er,vr=Cr),{width:gr,height:vr,$:wr}}function unwrapElement(mr){return isElement$1(mr)?mr:mr.contextElement}function getScale$1(mr){const hr=unwrapElement(mr);if(!isHTMLElement(hr))return createCoords(1);const gr=hr.getBoundingClientRect(),{width:vr,height:xr,$:Er}=getCssDimensions(hr);let Cr=(Er?round$2(gr.width):gr.width)/vr,wr=(Er?round$2(gr.height):gr.height)/xr;return(!Cr||!Number.isFinite(Cr))&&(Cr=1),(!wr||!Number.isFinite(wr))&&(wr=1),{x:Cr,y:wr}}const noOffsets=createCoords(0);function getVisualOffsets(mr){const hr=getWindow(mr);return!isWebKit()||!hr.visualViewport?noOffsets:{x:hr.visualViewport.offsetLeft,y:hr.visualViewport.offsetTop}}function shouldAddVisualOffsets(mr,hr,gr){return hr===void 0&&(hr=!1),!gr||hr&&gr!==getWindow(mr)?!1:hr}function getBoundingClientRect(mr,hr,gr,vr){hr===void 0&&(hr=!1),gr===void 0&&(gr=!1);const xr=mr.getBoundingClientRect(),Er=unwrapElement(mr);let Cr=createCoords(1);hr&&(vr?isElement$1(vr)&&(Cr=getScale$1(vr)):Cr=getScale$1(mr));const wr=shouldAddVisualOffsets(Er,gr,vr)?getVisualOffsets(Er):createCoords(0);let Rr=(xr.left+wr.x)/Cr.x,kr=(xr.top+wr.y)/Cr.y,Dr=xr.width/Cr.x,Br=xr.height/Cr.y;if(Er){const Hr=getWindow(Er),Gr=vr&&isElement$1(vr)?getWindow(vr):vr;let qr=Hr,zr=getFrameElement(qr);for(;zr&&vr&&Gr!==qr;){const Qr=getScale$1(zr),sn=zr.getBoundingClientRect(),hn=getComputedStyle$1(zr),vn=sn.left+(zr.clientLeft+parseFloat(hn.paddingLeft))*Qr.x,yn=sn.top+(zr.clientTop+parseFloat(hn.paddingTop))*Qr.y;Rr*=Qr.x,kr*=Qr.y,Dr*=Qr.x,Br*=Qr.y,Rr+=vn,kr+=yn,qr=getWindow(zr),zr=getFrameElement(qr)}}return rectToClientRect({width:Dr,height:Br,x:Rr,y:kr})}function getWindowScrollBarX(mr,hr){const gr=getNodeScroll(mr).scrollLeft;return hr?hr.left+gr:getBoundingClientRect(getDocumentElement(mr)).left+gr}function getHTMLOffset(mr,hr,gr){gr===void 0&&(gr=!1);const vr=mr.getBoundingClientRect(),xr=vr.left+hr.scrollLeft-(gr?0:getWindowScrollBarX(mr,vr)),Er=vr.top+hr.scrollTop;return{x:xr,y:Er}}function convertOffsetParentRelativeRectToViewportRelativeRect(mr){let{elements:hr,rect:gr,offsetParent:vr,strategy:xr}=mr;const Er=xr==="fixed",Cr=getDocumentElement(vr),wr=hr?isTopLayer(hr.floating):!1;if(vr===Cr||wr&&Er)return gr;let Rr={scrollLeft:0,scrollTop:0},kr=createCoords(1);const Dr=createCoords(0),Br=isHTMLElement(vr);if((Br||!Br&&!Er)&&((getNodeName(vr)!=="body"||isOverflowElement(Cr))&&(Rr=getNodeScroll(vr)),isHTMLElement(vr))){const Gr=getBoundingClientRect(vr);kr=getScale$1(vr),Dr.x=Gr.x+vr.clientLeft,Dr.y=Gr.y+vr.clientTop}const Hr=Cr&&!Br&&!Er?getHTMLOffset(Cr,Rr,!0):createCoords(0);return{width:gr.width*kr.x,height:gr.height*kr.y,x:gr.x*kr.x-Rr.scrollLeft*kr.x+Dr.x+Hr.x,y:gr.y*kr.y-Rr.scrollTop*kr.y+Dr.y+Hr.y}}function getClientRects(mr){return Array.from(mr.getClientRects())}function getDocumentRect(mr){const hr=getDocumentElement(mr),gr=getNodeScroll(mr),vr=mr.ownerDocument.body,xr=max$3(hr.scrollWidth,hr.clientWidth,vr.scrollWidth,vr.clientWidth),Er=max$3(hr.scrollHeight,hr.clientHeight,vr.scrollHeight,vr.clientHeight);let Cr=-gr.scrollLeft+getWindowScrollBarX(mr);const wr=-gr.scrollTop;return getComputedStyle$1(vr).direction==="rtl"&&(Cr+=max$3(hr.clientWidth,vr.clientWidth)-xr),{width:xr,height:Er,x:Cr,y:wr}}function getViewportRect(mr,hr){const gr=getWindow(mr),vr=getDocumentElement(mr),xr=gr.visualViewport;let Er=vr.clientWidth,Cr=vr.clientHeight,wr=0,Rr=0;if(xr){Er=xr.width,Cr=xr.height;const kr=isWebKit();(!kr||kr&&hr==="fixed")&&(wr=xr.offsetLeft,Rr=xr.offsetTop)}return{width:Er,height:Cr,x:wr,y:Rr}}function getInnerBoundingClientRect(mr,hr){const gr=getBoundingClientRect(mr,!0,hr==="fixed"),vr=gr.top+mr.clientTop,xr=gr.left+mr.clientLeft,Er=isHTMLElement(mr)?getScale$1(mr):createCoords(1),Cr=mr.clientWidth*Er.x,wr=mr.clientHeight*Er.y,Rr=xr*Er.x,kr=vr*Er.y;return{width:Cr,height:wr,x:Rr,y:kr}}function getClientRectFromClippingAncestor(mr,hr,gr){let vr;if(hr==="viewport")vr=getViewportRect(mr,gr);else if(hr==="document")vr=getDocumentRect(getDocumentElement(mr));else if(isElement$1(hr))vr=getInnerBoundingClientRect(hr,gr);else{const xr=getVisualOffsets(mr);vr={x:hr.x-xr.x,y:hr.y-xr.y,width:hr.width,height:hr.height}}return rectToClientRect(vr)}function hasFixedPositionAncestor(mr,hr){const gr=getParentNode(mr);return gr===hr||!isElement$1(gr)||isLastTraversableNode(gr)?!1:getComputedStyle$1(gr).position==="fixed"||hasFixedPositionAncestor(gr,hr)}function getClippingElementAncestors(mr,hr){const gr=hr.get(mr);if(gr)return gr;let vr=getOverflowAncestors(mr,[],!1).filter(wr=>isElement$1(wr)&&getNodeName(wr)!=="body"),xr=null;const Er=getComputedStyle$1(mr).position==="fixed";let Cr=Er?getParentNode(mr):mr;for(;isElement$1(Cr)&&!isLastTraversableNode(Cr);){const wr=getComputedStyle$1(Cr),Rr=isContainingBlock(Cr);!Rr&&wr.position==="fixed"&&(xr=null),(Er?!Rr&&!xr:!Rr&&wr.position==="static"&&!!xr&&["absolute","fixed"].includes(xr.position)||isOverflowElement(Cr)&&!Rr&&hasFixedPositionAncestor(mr,Cr))?vr=vr.filter(Dr=>Dr!==Cr):xr=wr,Cr=getParentNode(Cr)}return hr.set(mr,vr),vr}function getClippingRect(mr){let{element:hr,boundary:gr,rootBoundary:vr,strategy:xr}=mr;const Cr=[...gr==="clippingAncestors"?isTopLayer(hr)?[]:getClippingElementAncestors(hr,this._c):[].concat(gr),vr],wr=Cr[0],Rr=Cr.reduce((kr,Dr)=>{const Br=getClientRectFromClippingAncestor(hr,Dr,xr);return kr.top=max$3(Br.top,kr.top),kr.right=min$2(Br.right,kr.right),kr.bottom=min$2(Br.bottom,kr.bottom),kr.left=max$3(Br.left,kr.left),kr},getClientRectFromClippingAncestor(hr,wr,xr));return{width:Rr.right-Rr.left,height:Rr.bottom-Rr.top,x:Rr.left,y:Rr.top}}function getDimensions(mr){const{width:hr,height:gr}=getCssDimensions(mr);return{width:hr,height:gr}}function getRectRelativeToOffsetParent$1(mr,hr,gr){const vr=isHTMLElement(hr),xr=getDocumentElement(hr),Er=gr==="fixed",Cr=getBoundingClientRect(mr,!0,Er,hr);let wr={scrollLeft:0,scrollTop:0};const Rr=createCoords(0);if(vr||!vr&&!Er)if((getNodeName(hr)!=="body"||isOverflowElement(xr))&&(wr=getNodeScroll(hr)),vr){const Hr=getBoundingClientRect(hr,!0,Er,hr);Rr.x=Hr.x+hr.clientLeft,Rr.y=Hr.y+hr.clientTop}else xr&&(Rr.x=getWindowScrollBarX(xr));const kr=xr&&!vr&&!Er?getHTMLOffset(xr,wr):createCoords(0),Dr=Cr.left+wr.scrollLeft-Rr.x-kr.x,Br=Cr.top+wr.scrollTop-Rr.y-kr.y;return{x:Dr,y:Br,width:Cr.width,height:Cr.height}}function isStaticPositioned(mr){return getComputedStyle$1(mr).position==="static"}function getTrueOffsetParent(mr,hr){if(!isHTMLElement(mr)||getComputedStyle$1(mr).position==="fixed")return null;if(hr)return hr(mr);let gr=mr.offsetParent;return getDocumentElement(mr)===gr&&(gr=gr.ownerDocument.body),gr}function getOffsetParent(mr,hr){const gr=getWindow(mr);if(isTopLayer(mr))return gr;if(!isHTMLElement(mr)){let xr=getParentNode(mr);for(;xr&&!isLastTraversableNode(xr);){if(isElement$1(xr)&&!isStaticPositioned(xr))return xr;xr=getParentNode(xr)}return gr}let vr=getTrueOffsetParent(mr,hr);for(;vr&&isTableElement(vr)&&isStaticPositioned(vr);)vr=getTrueOffsetParent(vr,hr);return vr&&isLastTraversableNode(vr)&&isStaticPositioned(vr)&&!isContainingBlock(vr)?gr:vr||getContainingBlock(mr)||gr}const getElementRects$1=async function(mr){const hr=this.getOffsetParent||getOffsetParent,gr=this.getDimensions,vr=await gr(mr.floating);return{reference:getRectRelativeToOffsetParent$1(mr.reference,await hr(mr.floating),mr.strategy),floating:{x:0,y:0,width:vr.width,height:vr.height}}};function isRTL(mr){return getComputedStyle$1(mr).direction==="rtl"}const platform$2={convertOffsetParentRelativeRectToViewportRelativeRect,getDocumentElement,getClippingRect,getOffsetParent,getElementRects:getElementRects$1,getClientRects,getDimensions,getScale:getScale$1,isElement:isElement$1,isRTL};function rectsAreEqual(mr,hr){return mr.x===hr.x&&mr.y===hr.y&&mr.width===hr.width&&mr.height===hr.height}function observeMove(mr,hr){let gr=null,vr;const xr=getDocumentElement(mr);function Er(){var wr;clearTimeout(vr),(wr=gr)==null||wr.disconnect(),gr=null}function Cr(wr,Rr){wr===void 0&&(wr=!1),Rr===void 0&&(Rr=1),Er();const kr=mr.getBoundingClientRect(),{left:Dr,top:Br,width:Hr,height:Gr}=kr;if(wr||hr(),!Hr||!Gr)return;const qr=floor$2(Br),zr=floor$2(xr.clientWidth-(Dr+Hr)),Qr=floor$2(xr.clientHeight-(Br+Gr)),sn=floor$2(Dr),vn={rootMargin:-qr+"px "+-zr+"px "+-Qr+"px "+-sn+"px",threshold:max$3(0,min$2(1,Rr))||1};let yn=!0;function gn(bn){const xn=bn[0].intersectionRatio;if(xn!==Rr){if(!yn)return Cr();xn?Cr(!1,xn):vr=setTimeout(()=>{Cr(!1,1e-7)},1e3)}xn===1&&!rectsAreEqual(kr,mr.getBoundingClientRect())&&Cr(),yn=!1}try{gr=new IntersectionObserver(gn,{...vn,root:xr.ownerDocument})}catch{gr=new IntersectionObserver(gn,vn)}gr.observe(mr)}return Cr(!0),Er}function autoUpdate(mr,hr,gr,vr){vr===void 0&&(vr={});const{ancestorScroll:xr=!0,ancestorResize:Er=!0,elementResize:Cr=typeof ResizeObserver=="function",layoutShift:wr=typeof IntersectionObserver=="function",animationFrame:Rr=!1}=vr,kr=unwrapElement(mr),Dr=xr||Er?[...kr?getOverflowAncestors(kr):[],...getOverflowAncestors(hr)]:[];Dr.forEach(sn=>{xr&&sn.addEventListener("scroll",gr,{passive:!0}),Er&&sn.addEventListener("resize",gr)});const Br=kr&&wr?observeMove(kr,gr):null;let Hr=-1,Gr=null;Cr&&(Gr=new ResizeObserver(sn=>{let[hn]=sn;hn&&hn.target===kr&&Gr&&(Gr.unobserve(hr),cancelAnimationFrame(Hr),Hr=requestAnimationFrame(()=>{var vn;(vn=Gr)==null||vn.observe(hr)})),gr()}),kr&&!Rr&&Gr.observe(kr),Gr.observe(hr));let qr,zr=Rr?getBoundingClientRect(mr):null;Rr&&Qr();function Qr(){const sn=getBoundingClientRect(mr);zr&&!rectsAreEqual(zr,sn)&&gr(),zr=sn,qr=requestAnimationFrame(Qr)}return gr(),()=>{var sn;Dr.forEach(hn=>{xr&&hn.removeEventListener("scroll",gr),Er&&hn.removeEventListener("resize",gr)}),Br?.(),(sn=Gr)==null||sn.disconnect(),Gr=null,Rr&&cancelAnimationFrame(qr)}}const offset$1=offset$2,shift$2=shift$3,flip$1=flip$2,size$1=size$2,hide$1=hide$2,arrow$2=arrow$3,limitShift$1=limitShift$2,computePosition$1=(mr,hr,gr)=>{const vr=new Map,xr={platform:platform$2,...gr},Er={...xr.platform,_c:vr};return computePosition$2(mr,hr,{...xr,platform:Er})};var index$1=typeof document<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function deepEqual(mr,hr){if(mr===hr)return!0;if(typeof mr!=typeof hr)return!1;if(typeof mr=="function"&&mr.toString()===hr.toString())return!0;let gr,vr,xr;if(mr&&hr&&typeof mr=="object"){if(Array.isArray(mr)){if(gr=mr.length,gr!==hr.length)return!1;for(vr=gr;vr--!==0;)if(!deepEqual(mr[vr],hr[vr]))return!1;return!0}if(xr=Object.keys(mr),gr=xr.length,gr!==Object.keys(hr).length)return!1;for(vr=gr;vr--!==0;)if(!{}.hasOwnProperty.call(hr,xr[vr]))return!1;for(vr=gr;vr--!==0;){const Er=xr[vr];if(!(Er==="_owner"&&mr.$$typeof)&&!deepEqual(mr[Er],hr[Er]))return!1}return!0}return mr!==mr&&hr!==hr}function getDPR(mr){return typeof window>"u"?1:(mr.ownerDocument.defaultView||window).devicePixelRatio||1}function roundByDPR(mr,hr){const gr=getDPR(mr);return Math.round(hr*gr)/gr}function useLatestRef(mr){const hr=reactExports.useRef(mr);return index$1(()=>{hr.current=mr}),hr}function useFloating(mr){mr===void 0&&(mr={});const{placement:hr="bottom",strategy:gr="absolute",middleware:vr=[],platform:xr,elements:{reference:Er,floating:Cr}={},transform:wr=!0,whileElementsMounted:Rr,open:kr}=mr,[Dr,Br]=reactExports.useState({x:0,y:0,strategy:gr,placement:hr,middlewareData:{},isPositioned:!1}),[Hr,Gr]=reactExports.useState(vr);deepEqual(Hr,vr)||Gr(vr);const[qr,zr]=reactExports.useState(null),[Qr,sn]=reactExports.useState(null),hn=reactExports.useCallback(On=>{On!==bn.current&&(bn.current=On,zr(On))},[]),vn=reactExports.useCallback(On=>{On!==xn.current&&(xn.current=On,sn(On))},[]),yn=Er||qr,gn=Cr||Qr,bn=reactExports.useRef(null),xn=reactExports.useRef(null),$n=reactExports.useRef(Dr),Sn=Rr!=null,Cn=useLatestRef(Rr),Rn=useLatestRef(xr),Bn=reactExports.useCallback(()=>{if(!bn.current||!xn.current)return;const On={placement:hr,strategy:gr,middleware:Hr};Rn.current&&(On.platform=Rn.current),computePosition$1(bn.current,xn.current,On).then(wn=>{const _n={...wn,isPositioned:!0};Fn.current&&!deepEqual($n.current,_n)&&($n.current=_n,reactDomExports.flushSync(()=>{Br(_n)}))})},[Hr,hr,gr,Rn]);index$1(()=>{kr===!1&&$n.current.isPositioned&&($n.current.isPositioned=!1,Br(On=>({...On,isPositioned:!1})))},[kr]);const Fn=reactExports.useRef(!1);index$1(()=>(Fn.current=!0,()=>{Fn.current=!1}),[]),index$1(()=>{if(yn&&(bn.current=yn),gn&&(xn.current=gn),yn&&gn){if(Cn.current)return Cn.current(yn,gn,Bn);Bn()}},[yn,gn,Bn,Cn,Sn]);const Hn=reactExports.useMemo(()=>({reference:bn,floating:xn,setReference:hn,setFloating:vn}),[hn,vn]),Gn=reactExports.useMemo(()=>({reference:yn,floating:gn}),[yn,gn]),qn=reactExports.useMemo(()=>{const On={position:gr,left:0,top:0};if(!Gn.floating)return On;const wn=roundByDPR(Gn.floating,Dr.x),_n=roundByDPR(Gn.floating,Dr.y);return wr?{...On,transform:"translate("+wn+"px, "+_n+"px)",...getDPR(Gn.floating)>=1.5&&{willChange:"transform"}}:{position:gr,left:wn,top:_n}},[gr,wr,Gn.floating,Dr.x,Dr.y]);return reactExports.useMemo(()=>({...Dr,update:Bn,refs:Hn,elements:Gn,floatingStyles:qn}),[Dr,Bn,Hn,Gn,qn])}const arrow$1=mr=>{function hr(gr){return{}.hasOwnProperty.call(gr,"current")}return{name:"arrow",options:mr,fn(gr){const{element:vr,padding:xr}=typeof mr=="function"?mr(gr):mr;return vr&&hr(vr)?vr.current!=null?arrow$2({element:vr.current,padding:xr}).fn(gr):{}:vr?arrow$2({element:vr,padding:xr}).fn(gr):{}}}},offset=(mr,hr)=>({...offset$1(mr),options:[mr,hr]}),shift$1=(mr,hr)=>({...shift$2(mr),options:[mr,hr]}),limitShift=(mr,hr)=>({...limitShift$1(mr),options:[mr,hr]}),flip=(mr,hr)=>({...flip$1(mr),options:[mr,hr]}),size=(mr,hr)=>({...size$1(mr),options:[mr,hr]}),hide=(mr,hr)=>({...hide$1(mr),options:[mr,hr]}),arrow=(mr,hr)=>({...arrow$1(mr),options:[mr,hr]}),$7e8f5cd07187803e$export$21b07c8f274aebd5=reactExports.forwardRef((mr,hr)=>{const{children:gr,width:vr=10,height:xr=5,...Er}=mr;return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.svg,_extends$7({},Er,{ref:hr,width:vr,height:xr,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),mr.asChild?gr:reactExports.createElement("polygon",{points:"0,0 30,0 15,10"}))}),$7e8f5cd07187803e$export$be92b6f5f03c0fe9=$7e8f5cd07187803e$export$21b07c8f274aebd5;function $db6c3485150b8e66$export$1ab7ae714698c4b8(mr){const[hr,gr]=reactExports.useState(void 0);return $9f79659886946c16$export$e5c5a5f917a5871c(()=>{if(mr){gr({width:mr.offsetWidth,height:mr.offsetHeight});const vr=new ResizeObserver(xr=>{if(!Array.isArray(xr)||!xr.length)return;const Er=xr[0];let Cr,wr;if("borderBoxSize"in Er){const Rr=Er.borderBoxSize,kr=Array.isArray(Rr)?Rr[0]:Rr;Cr=kr.inlineSize,wr=kr.blockSize}else Cr=mr.offsetWidth,wr=mr.offsetHeight;gr({width:Cr,height:wr})});return vr.observe(mr,{box:"border-box"}),()=>vr.unobserve(mr)}else gr(void 0)},[mr]),hr}const $cf1ac5d9fe0e8206$var$POPPER_NAME="Popper",[$cf1ac5d9fe0e8206$var$createPopperContext,$cf1ac5d9fe0e8206$export$722aac194ae923]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($cf1ac5d9fe0e8206$var$POPPER_NAME),[$cf1ac5d9fe0e8206$var$PopperProvider,$cf1ac5d9fe0e8206$var$usePopperContext]=$cf1ac5d9fe0e8206$var$createPopperContext($cf1ac5d9fe0e8206$var$POPPER_NAME),$cf1ac5d9fe0e8206$export$badac9ada3a0bdf9=mr=>{const{__scopePopper:hr,children:gr}=mr,[vr,xr]=reactExports.useState(null);return reactExports.createElement($cf1ac5d9fe0e8206$var$PopperProvider,{scope:hr,anchor:vr,onAnchorChange:xr},gr)},$cf1ac5d9fe0e8206$var$ANCHOR_NAME="PopperAnchor",$cf1ac5d9fe0e8206$export$ecd4e1ccab6ed6d=reactExports.forwardRef((mr,hr)=>{const{__scopePopper:gr,virtualRef:vr,...xr}=mr,Er=$cf1ac5d9fe0e8206$var$usePopperContext($cf1ac5d9fe0e8206$var$ANCHOR_NAME,gr),Cr=reactExports.useRef(null),wr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(hr,Cr);return reactExports.useEffect(()=>{Er.onAnchorChange(vr?.current||Cr.current)}),vr?null:reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$7({},xr,{ref:wr}))}),$cf1ac5d9fe0e8206$var$CONTENT_NAME="PopperContent",[$cf1ac5d9fe0e8206$var$PopperContentProvider,$cf1ac5d9fe0e8206$var$useContentContext]=$cf1ac5d9fe0e8206$var$createPopperContext($cf1ac5d9fe0e8206$var$CONTENT_NAME),$cf1ac5d9fe0e8206$export$bc4ae5855d3c4fc=reactExports.forwardRef((mr,hr)=>{var gr,vr,xr,Er,Cr,wr,Rr,kr;const{__scopePopper:Dr,side:Br="bottom",sideOffset:Hr=0,align:Gr="center",alignOffset:qr=0,arrowPadding:zr=0,avoidCollisions:Qr=!0,collisionBoundary:sn=[],collisionPadding:hn=0,sticky:vn="partial",hideWhenDetached:yn=!1,updatePositionStrategy:gn="optimized",onPlaced:bn,...xn}=mr,$n=$cf1ac5d9fe0e8206$var$usePopperContext($cf1ac5d9fe0e8206$var$CONTENT_NAME,Dr),[Sn,Cn]=reactExports.useState(null),Rn=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(hr,Bi=>Cn(Bi)),[Bn,Fn]=reactExports.useState(null),Hn=$db6c3485150b8e66$export$1ab7ae714698c4b8(Bn),Gn=(gr=Hn?.width)!==null&&gr!==void 0?gr:0,qn=(vr=Hn?.height)!==null&&vr!==void 0?vr:0,On=Br+(Gr!=="center"?"-"+Gr:""),wn=typeof hn=="number"?hn:{top:0,right:0,bottom:0,left:0,...hn},_n=Array.isArray(sn)?sn:[sn],Tn=_n.length>0,Mn={padding:wn,boundary:_n.filter($cf1ac5d9fe0e8206$var$isNotNull),altBoundary:Tn},{refs:Ln,floatingStyles:jn,placement:Kn,isPositioned:Nn,middlewareData:An}=useFloating({strategy:"fixed",placement:On,whileElementsMounted:(...Bi)=>autoUpdate(...Bi,{animationFrame:gn==="always"}),elements:{reference:$n.anchor},middleware:[offset({mainAxis:Hr+qn,alignmentAxis:qr}),Qr&&shift$1({mainAxis:!0,crossAxis:!1,limiter:vn==="partial"?limitShift():void 0,...Mn}),Qr&&flip({...Mn}),size({...Mn,apply:({elements:Bi,rects:zi,availableWidth:Xi,availableHeight:Ji})=>{const{width:ns,height:ps}=zi.reference,ls=Bi.floating.style;ls.setProperty("--radix-popper-available-width",`${Xi}px`),ls.setProperty("--radix-popper-available-height",`${Ji}px`),ls.setProperty("--radix-popper-anchor-width",`${ns}px`),ls.setProperty("--radix-popper-anchor-height",`${ps}px`)}}),Bn&&arrow({element:Bn,padding:zr}),$cf1ac5d9fe0e8206$var$transformOrigin({arrowWidth:Gn,arrowHeight:qn}),yn&&hide({strategy:"referenceHidden",...Mn})]}),[kn,Dn]=$cf1ac5d9fe0e8206$var$getSideAndAlignFromPlacement(Kn),Vn=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a$1(bn);$9f79659886946c16$export$e5c5a5f917a5871c(()=>{Nn&&Vn?.()},[Nn,Vn]);const zn=(xr=An.arrow)===null||xr===void 0?void 0:xr.x,Xn=(Er=An.arrow)===null||Er===void 0?void 0:Er.y,Zn=((Cr=An.arrow)===null||Cr===void 0?void 0:Cr.centerOffset)!==0,[Pi,Ya]=reactExports.useState();return $9f79659886946c16$export$e5c5a5f917a5871c(()=>{Sn&&Ya(window.getComputedStyle(Sn).zIndex)},[Sn]),reactExports.createElement("div",{ref:Ln.setFloating,"data-radix-popper-content-wrapper":"",style:{...jn,transform:Nn?jn.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Pi,"--radix-popper-transform-origin":[(wr=An.transformOrigin)===null||wr===void 0?void 0:wr.x,(Rr=An.transformOrigin)===null||Rr===void 0?void 0:Rr.y].join(" ")},dir:mr.dir},reactExports.createElement($cf1ac5d9fe0e8206$var$PopperContentProvider,{scope:Dr,placedSide:kn,onArrowChange:Fn,arrowX:zn,arrowY:Xn,shouldHideArrow:Zn},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$7({"data-side":kn,"data-align":Dn},xn,{ref:Rn,style:{...xn.style,animation:Nn?void 0:"none",opacity:(kr=An.hide)!==null&&kr!==void 0&&kr.referenceHidden?0:void 0}}))))}),$cf1ac5d9fe0e8206$var$ARROW_NAME="PopperArrow",$cf1ac5d9fe0e8206$var$OPPOSITE_SIDE={top:"bottom",right:"left",bottom:"top",left:"right"},$cf1ac5d9fe0e8206$export$79d62cd4e10a3fd0=reactExports.forwardRef(function(hr,gr){const{__scopePopper:vr,...xr}=hr,Er=$cf1ac5d9fe0e8206$var$useContentContext($cf1ac5d9fe0e8206$var$ARROW_NAME,vr),Cr=$cf1ac5d9fe0e8206$var$OPPOSITE_SIDE[Er.placedSide];return reactExports.createElement("span",{ref:Er.onArrowChange,style:{position:"absolute",left:Er.arrowX,top:Er.arrowY,[Cr]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[Er.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[Er.placedSide],visibility:Er.shouldHideArrow?"hidden":void 0}},reactExports.createElement($7e8f5cd07187803e$export$be92b6f5f03c0fe9,_extends$7({},xr,{ref:gr,style:{...xr.style,display:"block"}})))});function $cf1ac5d9fe0e8206$var$isNotNull(mr){return mr!==null}const $cf1ac5d9fe0e8206$var$transformOrigin=mr=>({name:"transformOrigin",options:mr,fn(hr){var gr,vr,xr,Er,Cr;const{placement:wr,rects:Rr,middlewareData:kr}=hr,Br=((gr=kr.arrow)===null||gr===void 0?void 0:gr.centerOffset)!==0,Hr=Br?0:mr.arrowWidth,Gr=Br?0:mr.arrowHeight,[qr,zr]=$cf1ac5d9fe0e8206$var$getSideAndAlignFromPlacement(wr),Qr={start:"0%",center:"50%",end:"100%"}[zr],sn=((vr=(xr=kr.arrow)===null||xr===void 0?void 0:xr.x)!==null&&vr!==void 0?vr:0)+Hr/2,hn=((Er=(Cr=kr.arrow)===null||Cr===void 0?void 0:Cr.y)!==null&&Er!==void 0?Er:0)+Gr/2;let vn="",yn="";return qr==="bottom"?(vn=Br?Qr:`${sn}px`,yn=`${-Gr}px`):qr==="top"?(vn=Br?Qr:`${sn}px`,yn=`${Rr.floating.height+Gr}px`):qr==="right"?(vn=`${-Gr}px`,yn=Br?Qr:`${hn}px`):qr==="left"&&(vn=`${Rr.floating.width+Gr}px`,yn=Br?Qr:`${hn}px`),{data:{x:vn,y:yn}}}});function $cf1ac5d9fe0e8206$var$getSideAndAlignFromPlacement(mr){const[hr,gr="center"]=mr.split("-");return[hr,gr]}const $cf1ac5d9fe0e8206$export$be92b6f5f03c0fe9=$cf1ac5d9fe0e8206$export$badac9ada3a0bdf9,$cf1ac5d9fe0e8206$export$b688253958b8dfe7=$cf1ac5d9fe0e8206$export$ecd4e1ccab6ed6d,$cf1ac5d9fe0e8206$export$7c6e2c02157bb7d2=$cf1ac5d9fe0e8206$export$bc4ae5855d3c4fc,$cf1ac5d9fe0e8206$export$21b07c8f274aebd5=$cf1ac5d9fe0e8206$export$79d62cd4e10a3fd0,$f1701beae083dbae$export$602eac185826482c=reactExports.forwardRef((mr,hr)=>{var gr;const{container:vr=globalThis==null||(gr=globalThis.document)===null||gr===void 0?void 0:gr.body,...xr}=mr;return vr?ReactDOM.createPortal(reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$7({},xr,{ref:hr})),vr):null});function $fe963b355347cc68$export$3e6543de14f8614f(mr,hr){return reactExports.useReducer((gr,vr)=>{const xr=hr[gr][vr];return xr??gr},mr)}const $921a889cee6df7e8$export$99c2b779aa4e8b8b=mr=>{const{present:hr,children:gr}=mr,vr=$921a889cee6df7e8$var$usePresence(hr),xr=typeof gr=="function"?gr({present:vr.isPresent}):reactExports.Children.only(gr),Er=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(vr.ref,xr.ref);return typeof gr=="function"||vr.isPresent?reactExports.cloneElement(xr,{ref:Er}):null};$921a889cee6df7e8$export$99c2b779aa4e8b8b.displayName="Presence";function $921a889cee6df7e8$var$usePresence(mr){const[hr,gr]=reactExports.useState(),vr=reactExports.useRef({}),xr=reactExports.useRef(mr),Er=reactExports.useRef("none"),Cr=mr?"mounted":"unmounted",[wr,Rr]=$fe963b355347cc68$export$3e6543de14f8614f(Cr,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return reactExports.useEffect(()=>{const kr=$921a889cee6df7e8$var$getAnimationName(vr.current);Er.current=wr==="mounted"?kr:"none"},[wr]),$9f79659886946c16$export$e5c5a5f917a5871c(()=>{const kr=vr.current,Dr=xr.current;if(Dr!==mr){const Hr=Er.current,Gr=$921a889cee6df7e8$var$getAnimationName(kr);mr?Rr("MOUNT"):Gr==="none"||kr?.display==="none"?Rr("UNMOUNT"):Rr(Dr&&Hr!==Gr?"ANIMATION_OUT":"UNMOUNT"),xr.current=mr}},[mr,Rr]),$9f79659886946c16$export$e5c5a5f917a5871c(()=>{if(hr){const kr=Br=>{const Gr=$921a889cee6df7e8$var$getAnimationName(vr.current).includes(Br.animationName);Br.target===hr&&Gr&&reactDomExports.flushSync(()=>Rr("ANIMATION_END"))},Dr=Br=>{Br.target===hr&&(Er.current=$921a889cee6df7e8$var$getAnimationName(vr.current))};return hr.addEventListener("animationstart",Dr),hr.addEventListener("animationcancel",kr),hr.addEventListener("animationend",kr),()=>{hr.removeEventListener("animationstart",Dr),hr.removeEventListener("animationcancel",kr),hr.removeEventListener("animationend",kr)}}else Rr("ANIMATION_END")},[hr,Rr]),{isPresent:["mounted","unmountSuspended"].includes(wr),ref:reactExports.useCallback(kr=>{kr&&(vr.current=getComputedStyle(kr)),gr(kr)},[])}}function $921a889cee6df7e8$var$getAnimationName(mr){return mr?.animationName||"none"}function $71cd76cc60e0454e$export$6f32135080cb4c3({prop:mr,defaultProp:hr,onChange:gr=()=>{}}){const[vr,xr]=$71cd76cc60e0454e$var$useUncontrolledState({defaultProp:hr,onChange:gr}),Er=mr!==void 0,Cr=Er?mr:vr,wr=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a$1(gr),Rr=reactExports.useCallback(kr=>{if(Er){const Br=typeof kr=="function"?kr(mr):kr;Br!==mr&&wr(Br)}else xr(kr)},[Er,mr,xr,wr]);return[Cr,Rr]}function $71cd76cc60e0454e$var$useUncontrolledState({defaultProp:mr,onChange:hr}){const gr=reactExports.useState(mr),[vr]=gr,xr=reactExports.useRef(vr),Er=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a$1(hr);return reactExports.useEffect(()=>{xr.current!==vr&&(Er(vr),xr.current=vr)},[vr,xr,Er]),gr}const $ea1ef594cf570d83$export$439d29a4e110a164=reactExports.forwardRef((mr,hr)=>reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.span,_extends$7({},mr,{ref:hr,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...mr.style}}))),$ea1ef594cf570d83$export$be92b6f5f03c0fe9=$ea1ef594cf570d83$export$439d29a4e110a164,[$a093c7e1ec25a057$var$createTooltipContext,$a093c7e1ec25a057$export$1c540a2224f0d865]=$c512c27ab02ef895$export$50c7b4e9d9f19c1("Tooltip",[$cf1ac5d9fe0e8206$export$722aac194ae923]),$a093c7e1ec25a057$var$usePopperScope=$cf1ac5d9fe0e8206$export$722aac194ae923(),$a093c7e1ec25a057$var$PROVIDER_NAME="TooltipProvider",$a093c7e1ec25a057$var$TOOLTIP_OPEN="tooltip.open",[$a093c7e1ec25a057$var$TooltipProviderContextProvider,$a093c7e1ec25a057$var$useTooltipProviderContext]=$a093c7e1ec25a057$var$createTooltipContext($a093c7e1ec25a057$var$PROVIDER_NAME),$a093c7e1ec25a057$var$TOOLTIP_NAME="Tooltip",[$a093c7e1ec25a057$var$TooltipContextProvider,$a093c7e1ec25a057$var$useTooltipContext]=$a093c7e1ec25a057$var$createTooltipContext($a093c7e1ec25a057$var$TOOLTIP_NAME),$a093c7e1ec25a057$export$28c660c63b792dea=mr=>{const{__scopeTooltip:hr,children:gr,open:vr,defaultOpen:xr=!1,onOpenChange:Er,disableHoverableContent:Cr,delayDuration:wr}=mr,Rr=$a093c7e1ec25a057$var$useTooltipProviderContext($a093c7e1ec25a057$var$TOOLTIP_NAME,mr.__scopeTooltip),kr=$a093c7e1ec25a057$var$usePopperScope(hr),[Dr,Br]=reactExports.useState(null),Hr=$1746a345f3d73bb7$export$f680877a34711e37(),Gr=reactExports.useRef(0),qr=Cr??Rr.disableHoverableContent,zr=wr??Rr.delayDuration,Qr=reactExports.useRef(!1),[sn=!1,hn]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:vr,defaultProp:xr,onChange:xn=>{xn?(Rr.onOpen(),document.dispatchEvent(new CustomEvent($a093c7e1ec25a057$var$TOOLTIP_OPEN))):Rr.onClose(),Er?.(xn)}}),vn=reactExports.useMemo(()=>sn?Qr.current?"delayed-open":"instant-open":"closed",[sn]),yn=reactExports.useCallback(()=>{window.clearTimeout(Gr.current),Qr.current=!1,hn(!0)},[hn]),gn=reactExports.useCallback(()=>{window.clearTimeout(Gr.current),hn(!1)},[hn]),bn=reactExports.useCallback(()=>{window.clearTimeout(Gr.current),Gr.current=window.setTimeout(()=>{Qr.current=!0,hn(!0)},zr)},[zr,hn]);return reactExports.useEffect(()=>()=>window.clearTimeout(Gr.current),[]),reactExports.createElement($cf1ac5d9fe0e8206$export$be92b6f5f03c0fe9,kr,reactExports.createElement($a093c7e1ec25a057$var$TooltipContextProvider,{scope:hr,contentId:Hr,open:sn,stateAttribute:vn,trigger:Dr,onTriggerChange:Br,onTriggerEnter:reactExports.useCallback(()=>{Rr.isOpenDelayed?bn():yn()},[Rr.isOpenDelayed,bn,yn]),onTriggerLeave:reactExports.useCallback(()=>{qr?gn():window.clearTimeout(Gr.current)},[gn,qr]),onOpen:yn,onClose:gn,disableHoverableContent:qr},gr))},$a093c7e1ec25a057$var$TRIGGER_NAME="TooltipTrigger",$a093c7e1ec25a057$export$8c610744efcf8a1d=reactExports.forwardRef((mr,hr)=>{const{__scopeTooltip:gr,...vr}=mr,xr=$a093c7e1ec25a057$var$useTooltipContext($a093c7e1ec25a057$var$TRIGGER_NAME,gr),Er=$a093c7e1ec25a057$var$useTooltipProviderContext($a093c7e1ec25a057$var$TRIGGER_NAME,gr),Cr=$a093c7e1ec25a057$var$usePopperScope(gr),wr=reactExports.useRef(null),Rr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(hr,wr,xr.onTriggerChange),kr=reactExports.useRef(!1),Dr=reactExports.useRef(!1),Br=reactExports.useCallback(()=>kr.current=!1,[]);return reactExports.useEffect(()=>()=>document.removeEventListener("pointerup",Br),[Br]),reactExports.createElement($cf1ac5d9fe0e8206$export$b688253958b8dfe7,_extends$7({asChild:!0},Cr),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.button,_extends$7({"aria-describedby":xr.open?xr.contentId:void 0,"data-state":xr.stateAttribute},vr,{ref:Rr,onPointerMove:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onPointerMove,Hr=>{Hr.pointerType!=="touch"&&!Dr.current&&!Er.isPointerInTransitRef.current&&(xr.onTriggerEnter(),Dr.current=!0)}),onPointerLeave:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onPointerLeave,()=>{xr.onTriggerLeave(),Dr.current=!1}),onPointerDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onPointerDown,()=>{kr.current=!0,document.addEventListener("pointerup",Br,{once:!0})}),onFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onFocus,()=>{kr.current||xr.onOpen()}),onBlur:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onBlur,xr.onClose),onClick:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onClick,xr.onClose)})))}),$a093c7e1ec25a057$var$PORTAL_NAME="TooltipPortal",[$a093c7e1ec25a057$var$PortalProvider,$a093c7e1ec25a057$var$usePortalContext]=$a093c7e1ec25a057$var$createTooltipContext($a093c7e1ec25a057$var$PORTAL_NAME,{forceMount:void 0}),$a093c7e1ec25a057$export$7b36b8f925ab7497=mr=>{const{__scopeTooltip:hr,forceMount:gr,children:vr,container:xr}=mr,Er=$a093c7e1ec25a057$var$useTooltipContext($a093c7e1ec25a057$var$PORTAL_NAME,hr);return reactExports.createElement($a093c7e1ec25a057$var$PortalProvider,{scope:hr,forceMount:gr},reactExports.createElement($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:gr||Er.open},reactExports.createElement($f1701beae083dbae$export$602eac185826482c,{asChild:!0,container:xr},vr)))},$a093c7e1ec25a057$var$CONTENT_NAME="TooltipContent",$a093c7e1ec25a057$export$e9003e2be37ec060=reactExports.forwardRef((mr,hr)=>{const gr=$a093c7e1ec25a057$var$usePortalContext($a093c7e1ec25a057$var$CONTENT_NAME,mr.__scopeTooltip),{forceMount:vr=gr.forceMount,side:xr="top",...Er}=mr,Cr=$a093c7e1ec25a057$var$useTooltipContext($a093c7e1ec25a057$var$CONTENT_NAME,mr.__scopeTooltip);return reactExports.createElement($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:vr||Cr.open},Cr.disableHoverableContent?reactExports.createElement($a093c7e1ec25a057$var$TooltipContentImpl,_extends$7({side:xr},Er,{ref:hr})):reactExports.createElement($a093c7e1ec25a057$var$TooltipContentHoverable,_extends$7({side:xr},Er,{ref:hr})))}),$a093c7e1ec25a057$var$TooltipContentHoverable=reactExports.forwardRef((mr,hr)=>{const gr=$a093c7e1ec25a057$var$useTooltipContext($a093c7e1ec25a057$var$CONTENT_NAME,mr.__scopeTooltip),vr=$a093c7e1ec25a057$var$useTooltipProviderContext($a093c7e1ec25a057$var$CONTENT_NAME,mr.__scopeTooltip),xr=reactExports.useRef(null),Er=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(hr,xr),[Cr,wr]=reactExports.useState(null),{trigger:Rr,onClose:kr}=gr,Dr=xr.current,{onPointerInTransitChange:Br}=vr,Hr=reactExports.useCallback(()=>{wr(null),Br(!1)},[Br]),Gr=reactExports.useCallback((qr,zr)=>{const Qr=qr.currentTarget,sn={x:qr.clientX,y:qr.clientY},hn=$a093c7e1ec25a057$var$getExitSideFromRect(sn,Qr.getBoundingClientRect()),vn=$a093c7e1ec25a057$var$getPaddedExitPoints(sn,hn),yn=$a093c7e1ec25a057$var$getPointsFromRect(zr.getBoundingClientRect()),gn=$a093c7e1ec25a057$var$getHull([...vn,...yn]);wr(gn),Br(!0)},[Br]);return reactExports.useEffect(()=>()=>Hr(),[Hr]),reactExports.useEffect(()=>{if(Rr&&Dr){const qr=Qr=>Gr(Qr,Dr),zr=Qr=>Gr(Qr,Rr);return Rr.addEventListener("pointerleave",qr),Dr.addEventListener("pointerleave",zr),()=>{Rr.removeEventListener("pointerleave",qr),Dr.removeEventListener("pointerleave",zr)}}},[Rr,Dr,Gr,Hr]),reactExports.useEffect(()=>{if(Cr){const qr=zr=>{const Qr=zr.target,sn={x:zr.clientX,y:zr.clientY},hn=Rr?.contains(Qr)||Dr?.contains(Qr),vn=!$a093c7e1ec25a057$var$isPointInPolygon(sn,Cr);hn?Hr():vn&&(Hr(),kr())};return document.addEventListener("pointermove",qr),()=>document.removeEventListener("pointermove",qr)}},[Rr,Dr,Cr,kr,Hr]),reactExports.createElement($a093c7e1ec25a057$var$TooltipContentImpl,_extends$7({},mr,{ref:Er}))}),[$a093c7e1ec25a057$var$VisuallyHiddenContentContextProvider,$a093c7e1ec25a057$var$useVisuallyHiddenContentContext]=$a093c7e1ec25a057$var$createTooltipContext($a093c7e1ec25a057$var$TOOLTIP_NAME,{isInside:!1}),$a093c7e1ec25a057$var$TooltipContentImpl=reactExports.forwardRef((mr,hr)=>{const{__scopeTooltip:gr,children:vr,"aria-label":xr,onEscapeKeyDown:Er,onPointerDownOutside:Cr,...wr}=mr,Rr=$a093c7e1ec25a057$var$useTooltipContext($a093c7e1ec25a057$var$CONTENT_NAME,gr),kr=$a093c7e1ec25a057$var$usePopperScope(gr),{onClose:Dr}=Rr;return reactExports.useEffect(()=>(document.addEventListener($a093c7e1ec25a057$var$TOOLTIP_OPEN,Dr),()=>document.removeEventListener($a093c7e1ec25a057$var$TOOLTIP_OPEN,Dr)),[Dr]),reactExports.useEffect(()=>{if(Rr.trigger){const Br=Hr=>{const Gr=Hr.target;Gr!=null&&Gr.contains(Rr.trigger)&&Dr()};return window.addEventListener("scroll",Br,{capture:!0}),()=>window.removeEventListener("scroll",Br,{capture:!0})}},[Rr.trigger,Dr]),reactExports.createElement($5cb92bef7577960e$export$177fb62ff3ec1f22,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:Er,onPointerDownOutside:Cr,onFocusOutside:Br=>Br.preventDefault(),onDismiss:Dr},reactExports.createElement($cf1ac5d9fe0e8206$export$7c6e2c02157bb7d2,_extends$7({"data-state":Rr.stateAttribute},kr,wr,{ref:hr,style:{...wr.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),reactExports.createElement($5e63c961fc1ce211$export$d9f1ccf0bdb05d45,null,vr),reactExports.createElement($a093c7e1ec25a057$var$VisuallyHiddenContentContextProvider,{scope:gr,isInside:!0},reactExports.createElement($ea1ef594cf570d83$export$be92b6f5f03c0fe9,{id:Rr.contentId,role:"tooltip"},xr||vr))))});function $a093c7e1ec25a057$var$getExitSideFromRect(mr,hr){const gr=Math.abs(hr.top-mr.y),vr=Math.abs(hr.bottom-mr.y),xr=Math.abs(hr.right-mr.x),Er=Math.abs(hr.left-mr.x);switch(Math.min(gr,vr,xr,Er)){case Er:return"left";case xr:return"right";case gr:return"top";case vr:return"bottom";default:throw new Error("unreachable")}}function $a093c7e1ec25a057$var$getPaddedExitPoints(mr,hr,gr=5){const vr=[];switch(hr){case"top":vr.push({x:mr.x-gr,y:mr.y+gr},{x:mr.x+gr,y:mr.y+gr});break;case"bottom":vr.push({x:mr.x-gr,y:mr.y-gr},{x:mr.x+gr,y:mr.y-gr});break;case"left":vr.push({x:mr.x+gr,y:mr.y-gr},{x:mr.x+gr,y:mr.y+gr});break;case"right":vr.push({x:mr.x-gr,y:mr.y-gr},{x:mr.x-gr,y:mr.y+gr});break}return vr}function $a093c7e1ec25a057$var$getPointsFromRect(mr){const{top:hr,right:gr,bottom:vr,left:xr}=mr;return[{x:xr,y:hr},{x:gr,y:hr},{x:gr,y:vr},{x:xr,y:vr}]}function $a093c7e1ec25a057$var$isPointInPolygon(mr,hr){const{x:gr,y:vr}=mr;let xr=!1;for(let Er=0,Cr=hr.length-1;Er<hr.length;Cr=Er++){const wr=hr[Er].x,Rr=hr[Er].y,kr=hr[Cr].x,Dr=hr[Cr].y;Rr>vr!=Dr>vr&&gr<(kr-wr)*(vr-Rr)/(Dr-Rr)+wr&&(xr=!xr)}return xr}function $a093c7e1ec25a057$var$getHull(mr){const hr=mr.slice();return hr.sort((gr,vr)=>gr.x<vr.x?-1:gr.x>vr.x?1:gr.y<vr.y?-1:gr.y>vr.y?1:0),$a093c7e1ec25a057$var$getHullPresorted(hr)}function $a093c7e1ec25a057$var$getHullPresorted(mr){if(mr.length<=1)return mr.slice();const hr=[];for(let vr=0;vr<mr.length;vr++){const xr=mr[vr];for(;hr.length>=2;){const Er=hr[hr.length-1],Cr=hr[hr.length-2];if((Er.x-Cr.x)*(xr.y-Cr.y)>=(Er.y-Cr.y)*(xr.x-Cr.x))hr.pop();else break}hr.push(xr)}hr.pop();const gr=[];for(let vr=mr.length-1;vr>=0;vr--){const xr=mr[vr];for(;gr.length>=2;){const Er=gr[gr.length-1],Cr=gr[gr.length-2];if((Er.x-Cr.x)*(xr.y-Cr.y)>=(Er.y-Cr.y)*(xr.x-Cr.x))gr.pop();else break}gr.push(xr)}return gr.pop(),hr.length===1&&gr.length===1&&hr[0].x===gr[0].x&&hr[0].y===gr[0].y?hr:hr.concat(gr)}const $a093c7e1ec25a057$export$be92b6f5f03c0fe9=$a093c7e1ec25a057$export$28c660c63b792dea,$a093c7e1ec25a057$export$41fb9f06171c75f4=$a093c7e1ec25a057$export$8c610744efcf8a1d,$a093c7e1ec25a057$export$602eac185826482c=$a093c7e1ec25a057$export$7b36b8f925ab7497,$a093c7e1ec25a057$export$7c6e2c02157bb7d2=$a093c7e1ec25a057$export$e9003e2be37ec060;let $3db38b7d1fb3fe6a$var$count$1=0;function $3db38b7d1fb3fe6a$export$b7ece24a22aeda8c$1(){reactExports.useEffect(()=>{var mr,hr;const gr=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(mr=gr[0])!==null&&mr!==void 0?mr:$3db38b7d1fb3fe6a$var$createFocusGuard$1()),document.body.insertAdjacentElement("beforeend",(hr=gr[1])!==null&&hr!==void 0?hr:$3db38b7d1fb3fe6a$var$createFocusGuard$1()),$3db38b7d1fb3fe6a$var$count$1++,()=>{$3db38b7d1fb3fe6a$var$count$1===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(vr=>vr.remove()),$3db38b7d1fb3fe6a$var$count$1--}},[])}function $3db38b7d1fb3fe6a$var$createFocusGuard$1(){const mr=document.createElement("span");return mr.setAttribute("data-radix-focus-guard",""),mr.tabIndex=0,mr.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",mr}const $d3863c46a17e8a28$var$AUTOFOCUS_ON_MOUNT="focusScope.autoFocusOnMount",$d3863c46a17e8a28$var$AUTOFOCUS_ON_UNMOUNT="focusScope.autoFocusOnUnmount",$d3863c46a17e8a28$var$EVENT_OPTIONS={bubbles:!1,cancelable:!0},$d3863c46a17e8a28$export$20e40289641fbbb6=reactExports.forwardRef((mr,hr)=>{const{loop:gr=!1,trapped:vr=!1,onMountAutoFocus:xr,onUnmountAutoFocus:Er,...Cr}=mr,[wr,Rr]=reactExports.useState(null),kr=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a$1(xr),Dr=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a$1(Er),Br=reactExports.useRef(null),Hr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(hr,zr=>Rr(zr)),Gr=reactExports.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;reactExports.useEffect(()=>{if(vr){let zr=function(vn){if(Gr.paused||!wr)return;const yn=vn.target;wr.contains(yn)?Br.current=yn:$d3863c46a17e8a28$var$focus(Br.current,{select:!0})},Qr=function(vn){if(Gr.paused||!wr)return;const yn=vn.relatedTarget;yn!==null&&(wr.contains(yn)||$d3863c46a17e8a28$var$focus(Br.current,{select:!0}))},sn=function(vn){if(document.activeElement===document.body)for(const gn of vn)gn.removedNodes.length>0&&$d3863c46a17e8a28$var$focus(wr)};document.addEventListener("focusin",zr),document.addEventListener("focusout",Qr);const hn=new MutationObserver(sn);return wr&&hn.observe(wr,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",zr),document.removeEventListener("focusout",Qr),hn.disconnect()}}},[vr,wr,Gr.paused]),reactExports.useEffect(()=>{if(wr){$d3863c46a17e8a28$var$focusScopesStack.add(Gr);const zr=document.activeElement;if(!wr.contains(zr)){const sn=new CustomEvent($d3863c46a17e8a28$var$AUTOFOCUS_ON_MOUNT,$d3863c46a17e8a28$var$EVENT_OPTIONS);wr.addEventListener($d3863c46a17e8a28$var$AUTOFOCUS_ON_MOUNT,kr),wr.dispatchEvent(sn),sn.defaultPrevented||($d3863c46a17e8a28$var$focusFirst($d3863c46a17e8a28$var$removeLinks($d3863c46a17e8a28$var$getTabbableCandidates(wr)),{select:!0}),document.activeElement===zr&&$d3863c46a17e8a28$var$focus(wr))}return()=>{wr.removeEventListener($d3863c46a17e8a28$var$AUTOFOCUS_ON_MOUNT,kr),setTimeout(()=>{const sn=new CustomEvent($d3863c46a17e8a28$var$AUTOFOCUS_ON_UNMOUNT,$d3863c46a17e8a28$var$EVENT_OPTIONS);wr.addEventListener($d3863c46a17e8a28$var$AUTOFOCUS_ON_UNMOUNT,Dr),wr.dispatchEvent(sn),sn.defaultPrevented||$d3863c46a17e8a28$var$focus(zr??document.body,{select:!0}),wr.removeEventListener($d3863c46a17e8a28$var$AUTOFOCUS_ON_UNMOUNT,Dr),$d3863c46a17e8a28$var$focusScopesStack.remove(Gr)},0)}}},[wr,kr,Dr,Gr]);const qr=reactExports.useCallback(zr=>{if(!gr&&!vr||Gr.paused)return;const Qr=zr.key==="Tab"&&!zr.altKey&&!zr.ctrlKey&&!zr.metaKey,sn=document.activeElement;if(Qr&&sn){const hn=zr.currentTarget,[vn,yn]=$d3863c46a17e8a28$var$getTabbableEdges(hn);vn&&yn?!zr.shiftKey&&sn===yn?(zr.preventDefault(),gr&&$d3863c46a17e8a28$var$focus(vn,{select:!0})):zr.shiftKey&&sn===vn&&(zr.preventDefault(),gr&&$d3863c46a17e8a28$var$focus(yn,{select:!0})):sn===hn&&zr.preventDefault()}},[gr,vr,Gr.paused]);return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$7({tabIndex:-1},Cr,{ref:Hr,onKeyDown:qr}))});function $d3863c46a17e8a28$var$focusFirst(mr,{select:hr=!1}={}){const gr=document.activeElement;for(const vr of mr)if($d3863c46a17e8a28$var$focus(vr,{select:hr}),document.activeElement!==gr)return}function $d3863c46a17e8a28$var$getTabbableEdges(mr){const hr=$d3863c46a17e8a28$var$getTabbableCandidates(mr),gr=$d3863c46a17e8a28$var$findVisible(hr,mr),vr=$d3863c46a17e8a28$var$findVisible(hr.reverse(),mr);return[gr,vr]}function $d3863c46a17e8a28$var$getTabbableCandidates(mr){const hr=[],gr=document.createTreeWalker(mr,NodeFilter.SHOW_ELEMENT,{acceptNode:vr=>{const xr=vr.tagName==="INPUT"&&vr.type==="hidden";return vr.disabled||vr.hidden||xr?NodeFilter.FILTER_SKIP:vr.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;gr.nextNode();)hr.push(gr.currentNode);return hr}function $d3863c46a17e8a28$var$findVisible(mr,hr){for(const gr of mr)if(!$d3863c46a17e8a28$var$isHidden(gr,{upTo:hr}))return gr}function $d3863c46a17e8a28$var$isHidden(mr,{upTo:hr}){if(getComputedStyle(mr).visibility==="hidden")return!0;for(;mr;){if(hr!==void 0&&mr===hr)return!1;if(getComputedStyle(mr).display==="none")return!0;mr=mr.parentElement}return!1}function $d3863c46a17e8a28$var$isSelectableInput(mr){return mr instanceof HTMLInputElement&&"select"in mr}function $d3863c46a17e8a28$var$focus(mr,{select:hr=!1}={}){if(mr&&mr.focus){const gr=document.activeElement;mr.focus({preventScroll:!0}),mr!==gr&&$d3863c46a17e8a28$var$isSelectableInput(mr)&&hr&&mr.select()}}const $d3863c46a17e8a28$var$focusScopesStack=$d3863c46a17e8a28$var$createFocusScopesStack();function $d3863c46a17e8a28$var$createFocusScopesStack(){let mr=[];return{add(hr){const gr=mr[0];hr!==gr&&gr?.pause(),mr=$d3863c46a17e8a28$var$arrayRemove(mr,hr),mr.unshift(hr)},remove(hr){var gr;mr=$d3863c46a17e8a28$var$arrayRemove(mr,hr),(gr=mr[0])===null||gr===void 0||gr.resume()}}}function $d3863c46a17e8a28$var$arrayRemove(mr,hr){const gr=[...mr],vr=gr.indexOf(hr);return vr!==-1&&gr.splice(vr,1),gr}function $d3863c46a17e8a28$var$removeLinks(mr){return mr.filter(hr=>hr.tagName!=="A")}var getDefaultParent=function(mr){if(typeof document>"u")return null;var hr=Array.isArray(mr)?mr[0]:mr;return hr.ownerDocument.body},counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={},lockCount=0,unwrapHost=function(mr){return mr&&(mr.host||unwrapHost(mr.parentNode))},correctTargets=function(mr,hr){return hr.map(function(gr){if(mr.contains(gr))return gr;var vr=unwrapHost(gr);return vr&&mr.contains(vr)?vr:(console.error("aria-hidden",gr,"in not contained inside",mr,". Doing nothing"),null)}).filter(function(gr){return!!gr})},applyAttributeToOthers=function(mr,hr,gr,vr){var xr=correctTargets(hr,Array.isArray(mr)?mr:[mr]);markerMap[gr]||(markerMap[gr]=new WeakMap);var Er=markerMap[gr],Cr=[],wr=new Set,Rr=new Set(xr),kr=function(Br){!Br||wr.has(Br)||(wr.add(Br),kr(Br.parentNode))};xr.forEach(kr);var Dr=function(Br){!Br||Rr.has(Br)||Array.prototype.forEach.call(Br.children,function(Hr){if(wr.has(Hr))Dr(Hr);else try{var Gr=Hr.getAttribute(vr),qr=Gr!==null&&Gr!=="false",zr=(counterMap.get(Hr)||0)+1,Qr=(Er.get(Hr)||0)+1;counterMap.set(Hr,zr),Er.set(Hr,Qr),Cr.push(Hr),zr===1&&qr&&uncontrolledNodes.set(Hr,!0),Qr===1&&Hr.setAttribute(gr,"true"),qr||Hr.setAttribute(vr,"true")}catch(sn){console.error("aria-hidden: cannot operate on ",Hr,sn)}})};return Dr(hr),wr.clear(),lockCount++,function(){Cr.forEach(function(Br){var Hr=counterMap.get(Br)-1,Gr=Er.get(Br)-1;counterMap.set(Br,Hr),Er.set(Br,Gr),Hr||(uncontrolledNodes.has(Br)||Br.removeAttribute(vr),uncontrolledNodes.delete(Br)),Gr||Br.removeAttribute(gr)}),lockCount--,lockCount||(counterMap=new WeakMap,counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={})}},hideOthers=function(mr,hr,gr){gr===void 0&&(gr="data-aria-hidden");var vr=Array.from(Array.isArray(mr)?mr:[mr]),xr=getDefaultParent(mr);return xr?(vr.push.apply(vr,Array.from(xr.querySelectorAll("[aria-live]"))),applyAttributeToOthers(vr,xr,gr,"aria-hidden")):function(){return null}},__assign=function(){return __assign=Object.assign||function(hr){for(var gr,vr=1,xr=arguments.length;vr<xr;vr++){gr=arguments[vr];for(var Er in gr)Object.prototype.hasOwnProperty.call(gr,Er)&&(hr[Er]=gr[Er])}return hr},__assign.apply(this,arguments)};function __rest(mr,hr){var gr={};for(var vr in mr)Object.prototype.hasOwnProperty.call(mr,vr)&&hr.indexOf(vr)<0&&(gr[vr]=mr[vr]);if(mr!=null&&typeof Object.getOwnPropertySymbols=="function")for(var xr=0,vr=Object.getOwnPropertySymbols(mr);xr<vr.length;xr++)hr.indexOf(vr[xr])<0&&Object.prototype.propertyIsEnumerable.call(mr,vr[xr])&&(gr[vr[xr]]=mr[vr[xr]]);return gr}function __spreadArray$4(mr,hr,gr){if(gr||arguments.length===2)for(var vr=0,xr=hr.length,Er;vr<xr;vr++)(Er||!(vr in hr))&&(Er||(Er=Array.prototype.slice.call(hr,0,vr)),Er[vr]=hr[vr]);return mr.concat(Er||Array.prototype.slice.call(hr))}typeof SuppressedError=="function"&&SuppressedError;var zeroRightClassName="right-scroll-bar-position",fullWidthClassName="width-before-scroll-bar",noScrollbarsClassName="with-scroll-bars-hidden",removedBarSizeVariable="--removed-body-scroll-bar-size";function assignRef(mr,hr){return typeof mr=="function"?mr(hr):mr&&(mr.current=hr),mr}function useCallbackRef$1(mr,hr){var gr=reactExports.useState(function(){return{value:mr,callback:hr,facade:{get current(){return gr.value},set current(vr){var xr=gr.value;xr!==vr&&(gr.value=vr,gr.callback(vr,xr))}}}})[0];return gr.callback=hr,gr.facade}var useIsomorphicLayoutEffect$4=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,currentValues=new WeakMap;function useMergeRefs(mr,hr){var gr=useCallbackRef$1(null,function(vr){return mr.forEach(function(xr){return assignRef(xr,vr)})});return useIsomorphicLayoutEffect$4(function(){var vr=currentValues.get(gr);if(vr){var xr=new Set(vr),Er=new Set(mr),Cr=gr.current;xr.forEach(function(wr){Er.has(wr)||assignRef(wr,null)}),Er.forEach(function(wr){xr.has(wr)||assignRef(wr,Cr)})}currentValues.set(gr,mr)},[mr]),gr}function ItoI(mr){return mr}function innerCreateMedium(mr,hr){hr===void 0&&(hr=ItoI);var gr=[],vr=!1,xr={read:function(){if(vr)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return gr.length?gr[gr.length-1]:mr},useMedium:function(Er){var Cr=hr(Er,vr);return gr.push(Cr),function(){gr=gr.filter(function(wr){return wr!==Cr})}},assignSyncMedium:function(Er){for(vr=!0;gr.length;){var Cr=gr;gr=[],Cr.forEach(Er)}gr={push:function(wr){return Er(wr)},filter:function(){return gr}}},assignMedium:function(Er){vr=!0;var Cr=[];if(gr.length){var wr=gr;gr=[],wr.forEach(Er),Cr=gr}var Rr=function(){var Dr=Cr;Cr=[],Dr.forEach(Er)},kr=function(){return Promise.resolve().then(Rr)};kr(),gr={push:function(Dr){Cr.push(Dr),kr()},filter:function(Dr){return Cr=Cr.filter(Dr),gr}}}};return xr}function createSidecarMedium(mr){mr===void 0&&(mr={});var hr=innerCreateMedium(null);return hr.options=__assign({async:!0,ssr:!1},mr),hr}var SideCar$5=function(mr){var hr=mr.sideCar,gr=__rest(mr,["sideCar"]);if(!hr)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var vr=hr.read();if(!vr)throw new Error("Sidecar medium not found");return reactExports.createElement(vr,__assign({},gr))};SideCar$5.isSideCarExport=!0;function exportSidecar(mr,hr){return mr.useMedium(hr),SideCar$5}var effectCar$4=createSidecarMedium(),nothing$4=function(){},RemoveScroll$4=reactExports.forwardRef(function(mr,hr){var gr=reactExports.useRef(null),vr=reactExports.useState({onScrollCapture:nothing$4,onWheelCapture:nothing$4,onTouchMoveCapture:nothing$4}),xr=vr[0],Er=vr[1],Cr=mr.forwardProps,wr=mr.children,Rr=mr.className,kr=mr.removeScrollBar,Dr=mr.enabled,Br=mr.shards,Hr=mr.sideCar,Gr=mr.noIsolation,qr=mr.inert,zr=mr.allowPinchZoom,Qr=mr.as,sn=Qr===void 0?"div":Qr,hn=mr.gapMode,vn=__rest(mr,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),yn=Hr,gn=useMergeRefs([gr,hr]),bn=__assign(__assign({},vn),xr);return reactExports.createElement(reactExports.Fragment,null,Dr&&reactExports.createElement(yn,{sideCar:effectCar$4,removeScrollBar:kr,shards:Br,noIsolation:Gr,inert:qr,setCallbacks:Er,allowPinchZoom:!!zr,lockRef:gr,gapMode:hn}),Cr?reactExports.cloneElement(reactExports.Children.only(wr),__assign(__assign({},bn),{ref:gn})):reactExports.createElement(sn,__assign({},bn,{className:Rr,ref:gn}),wr))});RemoveScroll$4.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};RemoveScroll$4.classNames={fullWidth:fullWidthClassName,zeroRight:zeroRightClassName};var getNonce=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function makeStyleTag(){if(!document)return null;var mr=document.createElement("style");mr.type="text/css";var hr=getNonce();return hr&&mr.setAttribute("nonce",hr),mr}function injectStyles(mr,hr){mr.styleSheet?mr.styleSheet.cssText=hr:mr.appendChild(document.createTextNode(hr))}function insertStyleTag(mr){var hr=document.head||document.getElementsByTagName("head")[0];hr.appendChild(mr)}var stylesheetSingleton=function(){var mr=0,hr=null;return{add:function(gr){mr==0&&(hr=makeStyleTag())&&(injectStyles(hr,gr),insertStyleTag(hr)),mr++},remove:function(){mr--,!mr&&hr&&(hr.parentNode&&hr.parentNode.removeChild(hr),hr=null)}}},styleHookSingleton=function(){var mr=stylesheetSingleton();return function(hr,gr){reactExports.useEffect(function(){return mr.add(hr),function(){mr.remove()}},[hr&&gr])}},styleSingleton=function(){var mr=styleHookSingleton(),hr=function(gr){var vr=gr.styles,xr=gr.dynamic;return mr(vr,xr),null};return hr},zeroGap={left:0,top:0,right:0,gap:0},parse$4=function(mr){return parseInt(mr||"",10)||0},getOffset$1=function(mr){var hr=window.getComputedStyle(document.body),gr=hr[mr==="padding"?"paddingLeft":"marginLeft"],vr=hr[mr==="padding"?"paddingTop":"marginTop"],xr=hr[mr==="padding"?"paddingRight":"marginRight"];return[parse$4(gr),parse$4(vr),parse$4(xr)]},getGapWidth=function(mr){if(mr===void 0&&(mr="margin"),typeof window>"u")return zeroGap;var hr=getOffset$1(mr),gr=document.documentElement.clientWidth,vr=window.innerWidth;return{left:hr[0],top:hr[1],right:hr[2],gap:Math.max(0,vr-gr+hr[2]-hr[0])}},Style=styleSingleton(),lockAttribute="data-scroll-locked",getStyles=function(mr,hr,gr,vr){var xr=mr.left,Er=mr.top,Cr=mr.right,wr=mr.gap;return gr===void 0&&(gr="margin"),`
  .`.concat(noScrollbarsClassName,` {
   overflow: hidden `).concat(vr,`;
   padding-right: `).concat(wr,"px ").concat(vr,`;
  }
  body[`).concat(lockAttribute,`] {
    overflow: hidden `).concat(vr,`;
    overscroll-behavior: contain;
    `).concat([hr&&"position: relative ".concat(vr,";"),gr==="margin"&&`
    padding-left: `.concat(xr,`px;
    padding-top: `).concat(Er,`px;
    padding-right: `).concat(Cr,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(wr,"px ").concat(vr,`;
    `),gr==="padding"&&"padding-right: ".concat(wr,"px ").concat(vr,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(zeroRightClassName,` {
    right: `).concat(wr,"px ").concat(vr,`;
  }
  
  .`).concat(fullWidthClassName,` {
    margin-right: `).concat(wr,"px ").concat(vr,`;
  }
  
  .`).concat(zeroRightClassName," .").concat(zeroRightClassName,` {
    right: 0 `).concat(vr,`;
  }
  
  .`).concat(fullWidthClassName," .").concat(fullWidthClassName,` {
    margin-right: 0 `).concat(vr,`;
  }
  
  body[`).concat(lockAttribute,`] {
    `).concat(removedBarSizeVariable,": ").concat(wr,`px;
  }
`)},getCurrentUseCounter=function(){var mr=parseInt(document.body.getAttribute(lockAttribute)||"0",10);return isFinite(mr)?mr:0},useLockAttribute=function(){reactExports.useEffect(function(){return document.body.setAttribute(lockAttribute,(getCurrentUseCounter()+1).toString()),function(){var mr=getCurrentUseCounter()-1;mr<=0?document.body.removeAttribute(lockAttribute):document.body.setAttribute(lockAttribute,mr.toString())}},[])},RemoveScrollBar=function(mr){var hr=mr.noRelative,gr=mr.noImportant,vr=mr.gapMode,xr=vr===void 0?"margin":vr;useLockAttribute();var Er=reactExports.useMemo(function(){return getGapWidth(xr)},[xr]);return reactExports.createElement(Style,{styles:getStyles(Er,!hr,xr,gr?"":"!important")})},passiveSupported$4=!1;if(typeof window<"u")try{var options$5=Object.defineProperty({},"passive",{get:function(){return passiveSupported$4=!0,!0}});window.addEventListener("test",options$5,options$5),window.removeEventListener("test",options$5,options$5)}catch{passiveSupported$4=!1}var nonPassive$4=passiveSupported$4?{passive:!1}:!1,alwaysContainsScroll$4=function(mr){return mr.tagName==="TEXTAREA"},elementCanBeScrolled$4=function(mr,hr){if(!(mr instanceof Element))return!1;var gr=window.getComputedStyle(mr);return gr[hr]!=="hidden"&&!(gr.overflowY===gr.overflowX&&!alwaysContainsScroll$4(mr)&&gr[hr]==="visible")},elementCouldBeVScrolled$4=function(mr){return elementCanBeScrolled$4(mr,"overflowY")},elementCouldBeHScrolled$4=function(mr){return elementCanBeScrolled$4(mr,"overflowX")},locationCouldBeScrolled$4=function(mr,hr){var gr=hr.ownerDocument,vr=hr;do{typeof ShadowRoot<"u"&&vr instanceof ShadowRoot&&(vr=vr.host);var xr=elementCouldBeScrolled$4(mr,vr);if(xr){var Er=getScrollVariables$4(mr,vr),Cr=Er[1],wr=Er[2];if(Cr>wr)return!0}vr=vr.parentNode}while(vr&&vr!==gr.body);return!1},getVScrollVariables$4=function(mr){var hr=mr.scrollTop,gr=mr.scrollHeight,vr=mr.clientHeight;return[hr,gr,vr]},getHScrollVariables$4=function(mr){var hr=mr.scrollLeft,gr=mr.scrollWidth,vr=mr.clientWidth;return[hr,gr,vr]},elementCouldBeScrolled$4=function(mr,hr){return mr==="v"?elementCouldBeVScrolled$4(hr):elementCouldBeHScrolled$4(hr)},getScrollVariables$4=function(mr,hr){return mr==="v"?getVScrollVariables$4(hr):getHScrollVariables$4(hr)},getDirectionFactor$4=function(mr,hr){return mr==="h"&&hr==="rtl"?-1:1},handleScroll$4=function(mr,hr,gr,vr,xr){var Er=getDirectionFactor$4(mr,window.getComputedStyle(hr).direction),Cr=Er*vr,wr=gr.target,Rr=hr.contains(wr),kr=!1,Dr=Cr>0,Br=0,Hr=0;do{var Gr=getScrollVariables$4(mr,wr),qr=Gr[0],zr=Gr[1],Qr=Gr[2],sn=zr-Qr-Er*qr;(qr||sn)&&elementCouldBeScrolled$4(mr,wr)&&(Br+=sn,Hr+=qr),wr instanceof ShadowRoot?wr=wr.host:wr=wr.parentNode}while(!Rr&&wr!==document.body||Rr&&(hr.contains(wr)||hr===wr));return(Dr&&(Math.abs(Br)<1||!xr)||!Dr&&(Math.abs(Hr)<1||!xr))&&(kr=!0),kr},getTouchXY$4=function(mr){return"changedTouches"in mr?[mr.changedTouches[0].clientX,mr.changedTouches[0].clientY]:[0,0]},getDeltaXY$4=function(mr){return[mr.deltaX,mr.deltaY]},extractRef$4=function(mr){return mr&&"current"in mr?mr.current:mr},deltaCompare$4=function(mr,hr){return mr[0]===hr[0]&&mr[1]===hr[1]},generateStyle$4=function(mr){return`
  .block-interactivity-`.concat(mr,` {pointer-events: none;}
  .allow-interactivity-`).concat(mr,` {pointer-events: all;}
`)},idCounter$4=0,lockStack$4=[];function RemoveScrollSideCar$4(mr){var hr=reactExports.useRef([]),gr=reactExports.useRef([0,0]),vr=reactExports.useRef(),xr=reactExports.useState(idCounter$4++)[0],Er=reactExports.useState(styleSingleton)[0],Cr=reactExports.useRef(mr);reactExports.useEffect(function(){Cr.current=mr},[mr]),reactExports.useEffect(function(){if(mr.inert){document.body.classList.add("block-interactivity-".concat(xr));var zr=__spreadArray$4([mr.lockRef.current],(mr.shards||[]).map(extractRef$4),!0).filter(Boolean);return zr.forEach(function(Qr){return Qr.classList.add("allow-interactivity-".concat(xr))}),function(){document.body.classList.remove("block-interactivity-".concat(xr)),zr.forEach(function(Qr){return Qr.classList.remove("allow-interactivity-".concat(xr))})}}},[mr.inert,mr.lockRef.current,mr.shards]);var wr=reactExports.useCallback(function(zr,Qr){if("touches"in zr&&zr.touches.length===2)return!Cr.current.allowPinchZoom;var sn=getTouchXY$4(zr),hn=gr.current,vn="deltaX"in zr?zr.deltaX:hn[0]-sn[0],yn="deltaY"in zr?zr.deltaY:hn[1]-sn[1],gn,bn=zr.target,xn=Math.abs(vn)>Math.abs(yn)?"h":"v";if("touches"in zr&&xn==="h"&&bn.type==="range")return!1;var $n=locationCouldBeScrolled$4(xn,bn);if(!$n)return!0;if($n?gn=xn:(gn=xn==="v"?"h":"v",$n=locationCouldBeScrolled$4(xn,bn)),!$n)return!1;if(!vr.current&&"changedTouches"in zr&&(vn||yn)&&(vr.current=gn),!gn)return!0;var Sn=vr.current||gn;return handleScroll$4(Sn,Qr,zr,Sn==="h"?vn:yn,!0)},[]),Rr=reactExports.useCallback(function(zr){var Qr=zr;if(!(!lockStack$4.length||lockStack$4[lockStack$4.length-1]!==Er)){var sn="deltaY"in Qr?getDeltaXY$4(Qr):getTouchXY$4(Qr),hn=hr.current.filter(function(gn){return gn.name===Qr.type&&(gn.target===Qr.target||Qr.target===gn.shadowParent)&&deltaCompare$4(gn.delta,sn)})[0];if(hn&&hn.should){Qr.cancelable&&Qr.preventDefault();return}if(!hn){var vn=(Cr.current.shards||[]).map(extractRef$4).filter(Boolean).filter(function(gn){return gn.contains(Qr.target)}),yn=vn.length>0?wr(Qr,vn[0]):!Cr.current.noIsolation;yn&&Qr.cancelable&&Qr.preventDefault()}}},[]),kr=reactExports.useCallback(function(zr,Qr,sn,hn){var vn={name:zr,delta:Qr,target:sn,should:hn,shadowParent:getOutermostShadowParent$1(sn)};hr.current.push(vn),setTimeout(function(){hr.current=hr.current.filter(function(yn){return yn!==vn})},1)},[]),Dr=reactExports.useCallback(function(zr){gr.current=getTouchXY$4(zr),vr.current=void 0},[]),Br=reactExports.useCallback(function(zr){kr(zr.type,getDeltaXY$4(zr),zr.target,wr(zr,mr.lockRef.current))},[]),Hr=reactExports.useCallback(function(zr){kr(zr.type,getTouchXY$4(zr),zr.target,wr(zr,mr.lockRef.current))},[]);reactExports.useEffect(function(){return lockStack$4.push(Er),mr.setCallbacks({onScrollCapture:Br,onWheelCapture:Br,onTouchMoveCapture:Hr}),document.addEventListener("wheel",Rr,nonPassive$4),document.addEventListener("touchmove",Rr,nonPassive$4),document.addEventListener("touchstart",Dr,nonPassive$4),function(){lockStack$4=lockStack$4.filter(function(zr){return zr!==Er}),document.removeEventListener("wheel",Rr,nonPassive$4),document.removeEventListener("touchmove",Rr,nonPassive$4),document.removeEventListener("touchstart",Dr,nonPassive$4)}},[]);var Gr=mr.removeScrollBar,qr=mr.inert;return reactExports.createElement(reactExports.Fragment,null,qr?reactExports.createElement(Er,{styles:generateStyle$4(xr)}):null,Gr?reactExports.createElement(RemoveScrollBar,{gapMode:mr.gapMode}):null)}function getOutermostShadowParent$1(mr){for(var hr=null;mr!==null;)mr instanceof ShadowRoot&&(hr=mr.host,mr=mr.host),mr=mr.parentNode;return hr}const SideCar$4=exportSidecar(effectCar$4,RemoveScrollSideCar$4);var ReactRemoveScroll$4=reactExports.forwardRef(function(mr,hr){return reactExports.createElement(RemoveScroll$4,__assign({},mr,{ref:hr,sideCar:SideCar$4}))});ReactRemoveScroll$4.classNames=RemoveScroll$4.classNames;function $ae6933e535247d3d$export$7d15b64cf5a3a4c4(mr,[hr,gr]){return Math.min(gr,Math.max(hr,mr))}function $e02a7d9cb1dc128c$export$c74125a8e3af6bb2(mr){const hr=mr+"CollectionProvider",[gr,vr]=$c512c27ab02ef895$export$50c7b4e9d9f19c1(hr),[xr,Er]=gr(hr,{collectionRef:{current:null},itemMap:new Map}),Cr=Gr=>{const{scope:qr,children:zr}=Gr,Qr=$jFibJ$react.useRef(null),sn=$jFibJ$react.useRef(new Map).current;return $jFibJ$react.createElement(xr,{scope:qr,itemMap:sn,collectionRef:Qr},zr)},wr=mr+"CollectionSlot",Rr=$jFibJ$react.forwardRef((Gr,qr)=>{const{scope:zr,children:Qr}=Gr,sn=Er(wr,zr),hn=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(qr,sn.collectionRef);return $jFibJ$react.createElement($5e63c961fc1ce211$export$8c6ed5c666ac1360,{ref:hn},Qr)}),kr=mr+"CollectionItemSlot",Dr="data-radix-collection-item",Br=$jFibJ$react.forwardRef((Gr,qr)=>{const{scope:zr,children:Qr,...sn}=Gr,hn=$jFibJ$react.useRef(null),vn=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(qr,hn),yn=Er(kr,zr);return $jFibJ$react.useEffect(()=>(yn.itemMap.set(hn,{ref:hn,...sn}),()=>void yn.itemMap.delete(hn))),$jFibJ$react.createElement($5e63c961fc1ce211$export$8c6ed5c666ac1360,{[Dr]:"",ref:vn},Qr)});function Hr(Gr){const qr=Er(mr+"CollectionConsumer",Gr);return $jFibJ$react.useCallback(()=>{const Qr=qr.collectionRef.current;if(!Qr)return[];const sn=Array.from(Qr.querySelectorAll(`[${Dr}]`));return Array.from(qr.itemMap.values()).sort((yn,gn)=>sn.indexOf(yn.ref.current)-sn.indexOf(gn.ref.current))},[qr.collectionRef,qr.itemMap])}return[{Provider:Cr,Slot:Rr,ItemSlot:Br},Hr,vr]}const $f631663db3294ace$var$DirectionContext=reactExports.createContext(void 0);function $f631663db3294ace$export$b39126d51d94e6f3(mr){const hr=reactExports.useContext($f631663db3294ace$var$DirectionContext);return mr||hr||"ltr"}function $010c2913dbd2fe3d$export$5cae361ad82dce8b(mr){const hr=reactExports.useRef({value:mr,previous:mr});return reactExports.useMemo(()=>(hr.current.value!==mr&&(hr.current.previous=hr.current.value,hr.current.value=mr),hr.current.previous),[mr])}function createCollection(mr){const hr=`${mr}CollectionProvider`,[gr,vr]=$c512c27ab02ef895$export$50c7b4e9d9f19c1(hr),[xr,Er]=gr(hr,{collectionRef:{current:null},itemMap:new Map,listeners:new Set}),Cr=Gr=>{const{scope:qr,children:zr}=Gr,Qr=reactExports.useRef(null),sn=reactExports.useRef(new Map).current,hn=reactExports.useRef(new Set).current;return jsxRuntimeExports.jsx(xr,{scope:qr,itemMap:sn,collectionRef:Qr,listeners:hn,children:zr})};Cr.displayName=hr;const wr=`${mr}CollectionSlot`,Rr=reactExports.forwardRef((Gr,qr)=>{const{scope:zr,children:Qr}=Gr,sn=Er(wr,zr),hn=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(qr,sn.collectionRef);return jsxRuntimeExports.jsx($5e63c961fc1ce211$export$8c6ed5c666ac1360,{ref:hn,children:Qr})});Rr.displayName=wr;const kr=`${mr}CollectionItemSlot`,Dr="data-radix-collection-item",Br=reactExports.forwardRef((Gr,qr)=>{const{scope:zr,children:Qr,...sn}=Gr,hn=reactExports.useRef(null),vn=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(qr,hn),yn=Er(kr,zr);return reactExports.useEffect(()=>{const gn=Array.from(yn.itemMap.values());return yn.itemMap.set(hn,{ref:hn,...sn}),yn.listeners.forEach(bn=>bn(Array.from(yn.itemMap.values()),gn)),()=>{const bn=Array.from(yn.itemMap.values());yn.itemMap.delete(hn),yn.listeners.forEach(xn=>xn(Array.from(yn.itemMap.values()),bn))}}),jsxRuntimeExports.jsx($5e63c961fc1ce211$export$8c6ed5c666ac1360,{[Dr]:"",ref:vn,children:Qr})});Br.displayName=kr;function Hr(Gr){const qr=Er(`${mr}CollectionConsumer`,Gr),zr=reactExports.useCallback(()=>{const sn=qr.collectionRef.current;if(!sn)return[];const hn=Array.from(sn.querySelectorAll(`[${Dr}]`));return Array.from(qr.itemMap.values()).sort((gn,bn)=>hn.indexOf(gn.ref.current)-hn.indexOf(bn.ref.current))},[qr.collectionRef,qr.itemMap]),Qr=reactExports.useCallback(sn=>(qr.listeners.add(sn),()=>qr.listeners.delete(sn)),[qr.listeners]);return{getItems:zr,subscribe:Qr}}return[{Provider:Cr,Slot:Rr,ItemSlot:Br},Hr,vr]}const cache$2=new Map;function useCollator(mr,hr){const gr=mr+(hr?Object.entries(hr).sort((xr,Er)=>xr[0]<Er[0]?-1:1).join():"");if(cache$2.has(gr))return cache$2.get(gr);const vr=new Intl.Collator(mr,hr);return cache$2.set(gr,vr),vr}function useFilter(mr,hr){const gr=useCollator(mr,{usage:"search",...hr});return{startsWith(vr,xr){return xr.length===0?!0:(vr=vr.normalize("NFC"),xr=xr.normalize("NFC"),gr.compare(vr.slice(0,xr.length),xr)===0)},endsWith(vr,xr){return xr.length===0?!0:(vr=vr.normalize("NFC"),xr=xr.normalize("NFC"),gr.compare(vr.slice(-xr.length),xr)===0)},contains(vr,xr){if(xr.length===0)return!0;vr=vr.normalize("NFC"),xr=xr.normalize("NFC");let Er=0;const Cr=xr.length;for(;Er+Cr<=vr.length;Er++){const wr=vr.slice(Er,Er+Cr);if(gr.compare(xr,wr)===0)return!0}return!1}}}const usePrev$1=mr=>{const hr=reactExports.useRef();return reactExports.useEffect(()=>{hr.current=mr}),hr.current},OPEN_KEYS$1=[" ","Enter","ArrowUp","ArrowDown"],SELECTION_KEYS$1=["Enter"],defaultIsPrintableCharacter=mr=>!!(mr.length===1&&mr.match(/\S| /)),COMBOBOX_NAME="Combobox",[Collection$1,useCollection$1]=createCollection(COMBOBOX_NAME),[ComboboxProvider,useComboboxContext]=$c512c27ab02ef895$export$fd42f52fd3ae1109(COMBOBOX_NAME),ComboboxProviders=({children:mr})=>jsxRuntimeExports.jsx($cf1ac5d9fe0e8206$export$be92b6f5f03c0fe9,{children:jsxRuntimeExports.jsx(Collection$1.Provider,{scope:void 0,children:mr})}),formatAutocomplete=mr=>typeof mr=="string"?mr==="none"?{type:mr,filter:void 0}:{type:mr,filter:"startsWith"}:mr,Combobox$1=mr=>{const{allowCustomValue:hr=!1,autocomplete:gr="none",children:vr,open:xr,defaultOpen:Er,onOpenChange:Cr,value:wr,defaultValue:Rr,onValueChange:kr,disabled:Dr,required:Br=!1,locale:Hr="en-EN",onTextValueChange:Gr,textValue:qr,defaultTextValue:zr,filterValue:Qr,defaultFilterValue:sn,onFilterValueChange:hn,isPrintableCharacter:vn=defaultIsPrintableCharacter}=mr,[yn,gn]=reactExports.useState(null),[bn,xn]=reactExports.useState(null),[$n,Sn]=reactExports.useState(null),[Cn,Rn]=reactExports.useState(null),[Bn=!1,Fn]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:xr,defaultProp:Er,onChange:Cr}),[Hn,Gn]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:wr,defaultProp:Rr,onChange:kr}),[qn,On]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:qr,defaultProp:hr&&!zr?wr:zr,onChange:Gr}),[wn,_n]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:Qr,defaultProp:sn,onChange:hn}),Tn=$1746a345f3d73bb7$export$f680877a34711e37(),Mn=reactExports.useCallback((jn,Kn)=>{const Nn=Kn.map(zn=>zn.ref.current),[An,...kn]=Nn,[Dn]=kn.slice(-1),Vn=Cn??Kn.find(zn=>zn.value===Hn)?.ref.current;for(const zn of jn){if(zn===Vn)return;if(zn?.scrollIntoView({block:"nearest"}),zn===An&&bn&&(bn.scrollTop=0),zn===Dn&&bn&&(bn.scrollTop=bn.scrollHeight),Rn(zn),gr==="both"){const Xn=Kn.find(Zn=>Zn.ref.current===zn);Xn&&On(Xn.textValue)}if(zn!==Vn)return}},[gr,On,bn,Cn,Hn]),Ln=formatAutocomplete(gr);return reactExports.useEffect(()=>{gr!=="both"&&Rn(null)},[qn,gr]),reactExports.useEffect(()=>{if($n&&yn)return hideOthers([$n,yn])},[$n,yn]),jsxRuntimeExports.jsx(ComboboxProviders,{children:jsxRuntimeExports.jsx(ComboboxProvider,{allowCustomValue:hr,autocomplete:Ln,required:Br,trigger:yn,onTriggerChange:gn,contentId:Tn,value:Hn,onValueChange:Gn,open:Bn,onOpenChange:Fn,disabled:Dr,locale:Hr,focusFirst:Mn,textValue:qn,onTextValueChange:On,onViewportChange:xn,onContentChange:Sn,visuallyFocussedItem:Cn,filterValue:wn,onFilterValueChange:_n,onVisuallyFocussedItemChange:Rn,isPrintableCharacter:vn,children:vr})})},TRIGGER_NAME$1="ComboboxTrigger",ComboboxTrigger=reactExports.forwardRef((mr,hr)=>{const{...gr}=mr,vr=useComboboxContext(TRIGGER_NAME$1),xr=()=>{vr.disabled||vr.onOpenChange(!0)};return jsxRuntimeExports.jsx($cf1ac5d9fe0e8206$export$b688253958b8dfe7,{asChild:!0,children:jsxRuntimeExports.jsx($d3863c46a17e8a28$export$20e40289641fbbb6,{asChild:!0,trapped:vr.open,onMountAutoFocus:Er=>{Er.preventDefault()},onUnmountAutoFocus:Er=>{vr.trigger?.focus({preventScroll:!0}),document.getSelection()?.empty(),Er.preventDefault()},children:jsxRuntimeExports.jsx("div",{ref:hr,"data-disabled":vr.disabled?"":void 0,...gr,onClick:$e42e1063c40fb3ef$export$b9ecd428b558ff10(gr.onClick,Er=>{if(vr.disabled){Er.preventDefault();return}vr.trigger?.focus()}),onPointerDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(gr.onPointerDown,Er=>{if(vr.disabled){Er.preventDefault();return}const Cr=Er.target;Cr.hasPointerCapture(Er.pointerId)&&Cr.releasePointerCapture(Er.pointerId),(Cr.closest("button")??Cr.closest("div"))===Er.currentTarget&&Er.button===0&&Er.ctrlKey===!1&&(xr(),vr.trigger?.focus())})})})})});ComboboxTrigger.displayName=TRIGGER_NAME$1;const INPUT_NAME="ComboboxInput",ComboxboxTextInput=reactExports.forwardRef((mr,hr)=>{const gr=useComboboxContext(INPUT_NAME),vr=reactExports.useRef(null),{getItems:xr}=useCollection$1(void 0),{startsWith:Er}=useFilter(gr.locale,{sensitivity:"base"}),Cr=gr.disabled,wr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(vr,hr,gr.onTriggerChange),Rr=()=>{Cr||gr.onOpenChange(!0)},kr=usePrev$1(gr.filterValue);return $9f79659886946c16$export$e5c5a5f917a5871c(()=>{const Dr=setTimeout(()=>{if(gr.textValue===""||gr.textValue===void 0||gr.filterValue===""||gr.filterValue===void 0)return;const Br=xr().find(Gr=>Gr.type==="option"&&Er(Gr.textValue,gr.textValue)),Hr=findChangedIndex(kr??"",gr.filterValue);Br&&!gr.visuallyFocussedItem&&Hr===gr.filterValue.length&&vr.current?.setSelectionRange(gr.filterValue.length,gr.textValue.length)});return()=>clearTimeout(Dr)},[gr.textValue,gr.filterValue,Er,gr.visuallyFocussedItem,xr,kr]),jsxRuntimeExports.jsx("input",{type:"text",role:"combobox","aria-controls":gr.contentId,"aria-expanded":gr.open,"aria-required":gr.required,"aria-autocomplete":gr.autocomplete.type,"data-state":gr.open?"open":"closed","aria-disabled":Cr,"aria-activedescendant":gr.visuallyFocussedItem?.id,disabled:Cr,"data-disabled":Cr?"":void 0,"data-placeholder":gr.textValue===void 0?"":void 0,value:gr.textValue??"",...mr,ref:wr,onKeyDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onKeyDown,Dr=>{if(["ArrowUp","ArrowDown","Home","End"].includes(Dr.key))gr.open||Rr(),setTimeout(()=>{let Hr=xr().filter(Gr=>!Gr.disabled&&Gr.isVisible).map(Gr=>Gr.ref.current);if(["ArrowUp","End"].includes(Dr.key)&&(Hr=Hr.slice().reverse()),["ArrowUp","ArrowDown"].includes(Dr.key)){const Gr=gr.visuallyFocussedItem??xr().find(qr=>qr.value===gr.value)?.ref.current;if(Gr){let qr=Hr.indexOf(Gr);qr===Hr.length-1&&(qr=-1),Hr=Hr.slice(qr+1)}}if(["ArrowDown"].includes(Dr.key)&&gr.autocomplete.type==="both"&&Hr.length>1){const[Gr,...qr]=Hr,zr=xr().find(Qr=>Qr.ref.current===Gr).textValue;gr.textValue===zr&&(Hr=qr)}gr.focusFirst(Hr,xr())}),Dr.preventDefault();else if(["Tab"].includes(Dr.key)&&gr.open)Dr.preventDefault();else if(["Escape"].includes(Dr.key))gr.open?gr.onOpenChange(!1):(gr.onValueChange(void 0),gr.onTextValueChange("")),Dr.preventDefault();else if(SELECTION_KEYS$1.includes(Dr.key)){if(gr.visuallyFocussedItem){const Br=xr().find(Hr=>Hr.ref.current===gr.visuallyFocussedItem);Br&&(gr.onValueChange(Br.value),gr.onTextValueChange(Br.textValue),gr.autocomplete.type==="both"&&gr.onFilterValueChange(Br.textValue),Br.ref.current?.click())}else{const Br=xr().find(Hr=>Hr.type==="option"&&!Hr.disabled&&Hr.textValue===gr.textValue);Br&&(gr.onValueChange(Br.value),gr.onTextValueChange(Br.textValue),gr.autocomplete.type==="both"&&gr.onFilterValueChange(Br.textValue),Br.ref.current?.click())}gr.onOpenChange(!1),Dr.preventDefault()}else gr.onVisuallyFocussedItemChange(null)}),onChange:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onChange,Dr=>{gr.onTextValueChange(Dr.currentTarget.value),gr.autocomplete.type==="both"&&gr.onFilterValueChange(Dr.currentTarget.value)}),onKeyUp:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onKeyUp,Dr=>{if(!gr.open&&(gr.isPrintableCharacter(Dr.key)||["Backspace"].includes(Dr.key))&&Rr(),setTimeout(()=>{if(gr.autocomplete.type==="both"&&gr.isPrintableCharacter(Dr.key)&&gr.filterValue!==void 0){const Br=gr.filterValue,Hr=xr().find(Gr=>Er(Gr.textValue,Br));Hr&&gr.onTextValueChange(Hr.textValue)}}),gr.autocomplete.type==="none"&&gr.isPrintableCharacter(Dr.key)){const Br=gr.textValue??"",Hr=xr().find(Gr=>Er(Gr.textValue,Br));Hr&&(gr.onVisuallyFocussedItemChange(Hr.ref.current),Hr.ref.current?.scrollIntoView())}}),onBlur:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onBlur,()=>{if(gr.open)return;gr.onVisuallyFocussedItemChange(null);const[Dr]=xr().filter(Hr=>Hr.textValue===gr.textValue&&Hr.type==="option");if(Dr){gr.onValueChange(Dr.value),gr.autocomplete.type==="both"&&gr.onFilterValueChange(Dr.textValue);return}if(gr.allowCustomValue){gr.onValueChange(gr.textValue),gr.autocomplete.type==="both"&&gr.onFilterValueChange(gr.textValue);return}const[Br]=xr().filter(Hr=>Hr.value===gr.value&&Hr.type==="option");Br&&gr.textValue!==""?(gr.onTextValueChange(Br.textValue),gr.autocomplete.type==="both"&&gr.onFilterValueChange(Br.textValue)):(gr.onValueChange(void 0),gr.onTextValueChange(""))})})});ComboxboxTextInput.displayName="ComboboxTextInput";const ComboboxIcon=reactExports.forwardRef((mr,hr)=>{const{children:gr,...vr}=mr,xr=useComboboxContext(INPUT_NAME),Er=xr.disabled,Cr=()=>{Er||(xr.onOpenChange(!0),xr.trigger?.focus())};return jsxRuntimeExports.jsx($8927f6f2acc4f386$export$250ffa63cdc0d034.button,{"aria-hidden":!0,type:"button","aria-disabled":Er,"aria-controls":xr.contentId,"aria-expanded":xr.open,disabled:Er,"data-disabled":Er?"":void 0,...vr,tabIndex:-1,ref:hr,onClick:$e42e1063c40fb3ef$export$b9ecd428b558ff10(vr.onClick,()=>{xr.trigger?.focus()}),onPointerDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(vr.onPointerDown,wr=>{wr.button===0&&wr.ctrlKey===!1&&(Cr(),wr.preventDefault())}),onKeyDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(vr.onKeyDown,wr=>{OPEN_KEYS$1.includes(wr.key)&&(Cr(),wr.preventDefault())}),children:gr||"▼"})});ComboboxIcon.displayName="ComboboxIcon";const PORTAL_NAME$1="ComboboxPortal",ComboboxPortal=mr=>jsxRuntimeExports.jsx($f1701beae083dbae$export$602eac185826482c,{asChild:!0,...mr});ComboboxPortal.displayName=PORTAL_NAME$1;const CONTENT_NAME$1="ComboboxContent",ComboboxContent=reactExports.forwardRef((mr,hr)=>{const gr=useComboboxContext(CONTENT_NAME$1),{getItems:vr}=useCollection$1(void 0),[xr,Er]=reactExports.useState();if($9f79659886946c16$export$e5c5a5f917a5871c(()=>{Er(new DocumentFragment)},[]),$9f79659886946c16$export$e5c5a5f917a5871c(()=>{gr.open&&gr.autocomplete.type==="none"&&setTimeout(()=>{vr().find(wr=>wr.value===gr.value)?.ref.current?.scrollIntoView({block:"nearest"})})},[vr,gr.autocomplete,gr.value,gr.open]),!gr.open){const Cr=xr;return Cr?reactDomExports.createPortal(jsxRuntimeExports.jsx(Collection$1.Slot,{scope:void 0,children:jsxRuntimeExports.jsx("div",{children:mr.children})}),Cr):null}return jsxRuntimeExports.jsx(ComboboxContentImpl,{...mr,ref:hr})});ComboboxContent.displayName=CONTENT_NAME$1;const CONTENT_MARGIN$1=10,ComboboxContentImpl=reactExports.forwardRef((mr,hr)=>{const{onEscapeKeyDown:gr,onPointerDownOutside:vr,...xr}=mr,Er=useComboboxContext(CONTENT_NAME$1),Cr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(hr,Rr=>Er.onContentChange(Rr)),{onOpenChange:wr}=Er;return $3db38b7d1fb3fe6a$export$b7ece24a22aeda8c$1(),reactExports.useEffect(()=>{const Rr=()=>{wr(!1)};return window.addEventListener("blur",Rr),window.addEventListener("resize",Rr),()=>{window.removeEventListener("blur",Rr),window.removeEventListener("resize",Rr)}},[wr]),jsxRuntimeExports.jsx(ReactRemoveScroll$4,{allowPinchZoom:!0,children:jsxRuntimeExports.jsx($5cb92bef7577960e$export$177fb62ff3ec1f22,{asChild:!0,onEscapeKeyDown:gr,onPointerDownOutside:vr,onFocusOutside:Rr=>{Rr.preventDefault()},onDismiss:()=>{Er.onOpenChange(!1),Er.trigger?.focus({preventScroll:!0})},children:jsxRuntimeExports.jsx(ComboboxPopperPosition,{role:"listbox",id:Er.contentId,"data-state":Er.open?"open":"closed",onContextMenu:Rr=>Rr.preventDefault(),...xr,ref:Cr,style:{display:"flex",flexDirection:"column",outline:"none",...xr.style}})})})});ComboboxContentImpl.displayName="ComboboxContentImpl";const ComboboxPopperPosition=reactExports.forwardRef((mr,hr)=>{const{align:gr="start",collisionPadding:vr=CONTENT_MARGIN$1,...xr}=mr;return jsxRuntimeExports.jsx($cf1ac5d9fe0e8206$export$7c6e2c02157bb7d2,{...xr,ref:hr,align:gr,collisionPadding:vr,style:{boxSizing:"border-box",...xr.style,"--radix-combobox-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-combobox-content-available-width":"var(--radix-popper-available-width)","--radix-combobox-content-available-height":"var(--radix-popper-available-height)","--radix-combobox-trigger-width":"var(--radix-popper-anchor-width)","--radix-combobox-trigger-height":"var(--radix-popper-anchor-height)"}})});ComboboxPopperPosition.displayName="ComboboxPopperPosition";const VIEWPORT_NAME$1="ComboboxViewport",ComboboxViewport=reactExports.forwardRef((mr,hr)=>{const gr=useComboboxContext(VIEWPORT_NAME$1),vr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(hr,gr.onViewportChange);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-combobox-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-combobox-viewport]::-webkit-scrollbar{display:none}"}}),jsxRuntimeExports.jsx(Collection$1.Slot,{scope:void 0,children:jsxRuntimeExports.jsx($8927f6f2acc4f386$export$250ffa63cdc0d034.div,{"data-radix-combobox-viewport":"",role:"presentation",...mr,ref:vr,style:{position:"relative",flex:1,overflow:"auto",...mr.style}})})]})});ComboboxViewport.displayName=VIEWPORT_NAME$1;const ITEM_NAME$1="ComboboxItem",[ComboboxItemProvider,useComboboxItemContext]=$c512c27ab02ef895$export$fd42f52fd3ae1109(ITEM_NAME$1),ComboboxItem=reactExports.forwardRef((mr,hr)=>{const{value:gr,disabled:vr=!1,textValue:xr,...Er}=mr,[Cr,wr]=reactExports.useState();$9f79659886946c16$export$e5c5a5f917a5871c(()=>{wr(new DocumentFragment)},[]);const{onTextValueChange:Rr,textValue:kr,...Dr}=useComboboxContext(ITEM_NAME$1),Br=$1746a345f3d73bb7$export$f680877a34711e37(),[Hr,Gr]=reactExports.useState(xr??""),qr=Dr.value===gr,{startsWith:zr,contains:Qr}=useFilter(Dr.locale,{sensitivity:"base"}),sn=reactExports.useCallback(hn=>{Gr(vn=>vn||(hn?.textContent??"").trim())},[]);return reactExports.useEffect(()=>{qr&&kr===void 0&&Hr!==""&&Rr(Hr)},[Hr,qr,kr,Rr]),Dr.autocomplete.type==="both"&&Hr&&Dr.filterValue&&!zr(Hr,Dr.filterValue)||Dr.autocomplete.type==="list"&&Dr.autocomplete.filter==="startsWith"&&Hr&&kr&&!zr(Hr,kr)||Dr.autocomplete.type==="list"&&Dr.autocomplete.filter==="contains"&&Hr&&kr&&!Qr(Hr,kr)?Cr?reactDomExports.createPortal(jsxRuntimeExports.jsx(ComboboxItemProvider,{textId:Br,onTextValueChange:sn,isSelected:qr,textValue:Hr,children:jsxRuntimeExports.jsx(Collection$1.ItemSlot,{scope:void 0,value:gr,textValue:Hr,disabled:vr,type:"option",isVisible:!1,children:jsxRuntimeExports.jsx(ComboboxItemImpl,{ref:hr,value:gr,disabled:vr,...Er})})}),Cr):null:jsxRuntimeExports.jsx(ComboboxItemProvider,{textId:Br,onTextValueChange:sn,isSelected:qr,textValue:Hr,children:jsxRuntimeExports.jsx(Collection$1.ItemSlot,{scope:void 0,value:gr,textValue:Hr,disabled:vr,type:"option",isVisible:!0,children:jsxRuntimeExports.jsx(ComboboxItemImpl,{ref:hr,value:gr,disabled:vr,...Er})})})});ComboboxItem.displayName=ITEM_NAME$1;const ITEM_IMPL_NAME="ComboboxItemImpl",ComboboxItemImpl=reactExports.forwardRef((mr,hr)=>{const{value:gr,disabled:vr=!1,...xr}=mr,Er=reactExports.useRef(null),Cr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(hr,Er),{getItems:wr}=useCollection$1(void 0),{onTextValueChange:Rr,visuallyFocussedItem:kr,...Dr}=useComboboxContext(ITEM_NAME$1),{isSelected:Br,textValue:Hr,textId:Gr}=useComboboxItemContext(ITEM_IMPL_NAME),qr=()=>{vr||(Dr.onValueChange(gr),Rr(Hr),Dr.onOpenChange(!1),Dr.autocomplete.type==="both"&&Dr.onFilterValueChange(Hr),Dr.trigger?.focus({preventScroll:!0}))},zr=reactExports.useMemo(()=>kr===wr().find(sn=>sn.ref.current===Er.current)?.ref.current,[wr,kr]),Qr=$1746a345f3d73bb7$export$f680877a34711e37();return jsxRuntimeExports.jsx($8927f6f2acc4f386$export$250ffa63cdc0d034.div,{role:"option","aria-labelledby":Gr,"data-highlighted":zr?"":void 0,"aria-selected":Br&&zr,"data-state":Br?"checked":"unchecked","aria-disabled":vr||void 0,"data-disabled":vr?"":void 0,tabIndex:vr?void 0:-1,...xr,id:Qr,ref:Cr,onPointerUp:$e42e1063c40fb3ef$export$b9ecd428b558ff10(xr.onPointerUp,qr)})});ComboboxItemImpl.displayName=ITEM_IMPL_NAME;const ITEM_TEXT_NAME$1="ComboboxItemText",ComboboxItemText=reactExports.forwardRef((mr,hr)=>{const{className:gr,style:vr,...xr}=mr,Er=useComboboxItemContext(ITEM_TEXT_NAME$1),Cr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(hr,Er.onTextValueChange);return jsxRuntimeExports.jsx($8927f6f2acc4f386$export$250ffa63cdc0d034.span,{id:Er.textId,...xr,ref:Cr})});ComboboxItemText.displayName=ITEM_TEXT_NAME$1;const ITEM_INDICATOR_NAME$1="ComboboxItemIndicator",ComboboxItemIndicator=reactExports.forwardRef((mr,hr)=>{const{isSelected:gr}=useComboboxItemContext(ITEM_INDICATOR_NAME$1);return gr?jsxRuntimeExports.jsx($8927f6f2acc4f386$export$250ffa63cdc0d034.span,{"aria-hidden":!0,...mr,ref:hr}):null});ComboboxItemIndicator.displayName=ITEM_INDICATOR_NAME$1;const NO_VALUE_FOUND_NAME="ComboboxNoValueFound",ComboboxNoValueFound=reactExports.forwardRef((mr,hr)=>{const{textValue:gr="",filterValue:vr="",locale:xr,autocomplete:Er}=useComboboxContext(NO_VALUE_FOUND_NAME),[Cr,wr]=reactExports.useState([]),{subscribe:Rr}=useCollection$1(void 0),{startsWith:kr,contains:Dr}=useFilter(xr,{sensitivity:"base"});return reactExports.useEffect(()=>{const Br=Rr(Hr=>{wr(Hr)});return()=>{Br()}},[Rr]),Er.type==="none"&&Cr.length>0||Er.type==="list"&&Er.filter==="startsWith"&&Cr.some(Br=>kr(Br.textValue,gr))||Er.type==="both"&&Cr.some(Br=>kr(Br.textValue,vr))||Er.type==="list"&&Er.filter==="contains"&&Cr.some(Br=>Dr(Br.textValue,gr))?null:jsxRuntimeExports.jsx($8927f6f2acc4f386$export$250ffa63cdc0d034.div,{...mr,ref:hr})});ComboboxNoValueFound.displayName=NO_VALUE_FOUND_NAME;const ComboboxCreateItem=reactExports.forwardRef((mr,hr)=>{const{disabled:gr=!1,...vr}=mr,xr=useComboboxContext(NO_VALUE_FOUND_NAME),{textValue:Er,visuallyFocussedItem:Cr}=xr,{getItems:wr,subscribe:Rr}=useCollection$1(void 0),kr=reactExports.useRef(null),[Dr,Br]=reactExports.useState(!1),Hr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(hr,kr),Gr=reactExports.useMemo(()=>Cr===wr().find(Qr=>Qr.ref.current===kr.current)?.ref.current,[wr,Cr]),qr=$1746a345f3d73bb7$export$f680877a34711e37(),zr=()=>{!gr&&Er&&(xr.onValueChange(Er),xr.onTextValueChange(Er),xr.onOpenChange(!1),xr.autocomplete.type==="both"&&xr.onFilterValueChange(Er),xr.trigger?.focus({preventScroll:!0}))};return $9f79659886946c16$export$e5c5a5f917a5871c(()=>{const Qr=Rr(sn=>{Br(!sn.some(hn=>hn.textValue===Er&&hn.type!=="create"))});return wr().length===0&&Br(!0),()=>{Qr()}},[Er,Rr,wr]),!Er||!Dr?null:jsxRuntimeExports.jsx(Collection$1.ItemSlot,{scope:void 0,value:Er??"",textValue:Er??"",disabled:gr,isVisible:!0,type:"create",children:jsxRuntimeExports.jsx($8927f6f2acc4f386$export$250ffa63cdc0d034.div,{role:"option",tabIndex:gr?void 0:-1,"aria-disabled":gr||void 0,"data-disabled":gr?"":void 0,"data-highlighted":Gr?"":void 0,...vr,id:qr,ref:Hr,onPointerUp:$e42e1063c40fb3ef$export$b9ecd428b558ff10(vr.onPointerUp,zr)})})});ComboboxCreateItem.displayName="ComboboxCreateItem";const Root$1$2=Combobox$1,Trigger$1$2=ComboboxTrigger,TextInput$2=ComboxboxTextInput,Icon$1=ComboboxIcon,Portal$1$1=ComboboxPortal,Content$1$1=ComboboxContent,Viewport$1$1=ComboboxViewport,Item$1=ComboboxItem,ItemText$1=ComboboxItemText,ItemIndicator$1=ComboboxItemIndicator,NoValueFound=ComboboxNoValueFound,CreateItem=ComboboxCreateItem;function findChangedIndex(mr,hr){const gr=Math.min(mr.length,hr.length);for(let vr=0;vr<gr;vr++)if(mr[vr]!==hr[vr])return vr;return gr}const Combobox$1$1=Object.freeze(Object.defineProperty({__proto__:null,ComboboxItem,Content:Content$1$1,CreateItem,Icon:Icon$1,Item:Item$1,ItemIndicator:ItemIndicator$1,ItemText:ItemText$1,NoValueFound,Portal:Portal$1$1,Root:Root$1$2,TextInput:TextInput$2,Trigger:Trigger$1$2,Viewport:Viewport$1$1},Symbol.toStringTag,{value:"Module"}));function useCallbackRef(mr){const hr=reactExports.useRef(mr);return reactExports.useEffect(()=>{hr.current=mr}),reactExports.useMemo(()=>(...gr)=>hr.current?.(...gr),[])}const OPEN_KEYS=[" ","Enter","ArrowUp","ArrowDown"],SELECTION_KEYS=[" ","Enter"],SELECT_NAME="Select",[Collection,useCollection,createCollectionScope]=$e02a7d9cb1dc128c$export$c74125a8e3af6bb2(SELECT_NAME),[createSelectContext,createSelectScope]=$c512c27ab02ef895$export$50c7b4e9d9f19c1(SELECT_NAME,[createCollectionScope,$cf1ac5d9fe0e8206$export$722aac194ae923]),usePopperScope=$cf1ac5d9fe0e8206$export$722aac194ae923(),[SelectProvider,useSelectContext]=createSelectContext(SELECT_NAME),[SelectNativeOptionsProvider,useSelectNativeOptionsContext]=createSelectContext(SELECT_NAME),Select$2=mr=>{const{__scopeSelect:hr,children:gr,open:vr,defaultOpen:xr,onOpenChange:Er,value:Cr,defaultValue:wr,onValueChange:Rr,dir:kr,disabled:Dr,required:Br,multi:Hr=!1}=mr,Gr=usePopperScope(hr),[qr,zr]=reactExports.useState(null),[Qr,sn]=reactExports.useState(null),[hn,vn]=reactExports.useState(!1),yn=$f631663db3294ace$export$b39126d51d94e6f3(kr),[gn=!1,bn]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:vr,defaultProp:xr,onChange:Er}),[xn,$n]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:Cr,defaultProp:wr,onChange(Bn){Rr&&(Array.isArray(Bn),Rr(Bn))}}),Sn=reactExports.useRef(null),[Cn,Rn]=reactExports.useState(new Set);return jsxRuntimeExports.jsx($cf1ac5d9fe0e8206$export$be92b6f5f03c0fe9,{...Gr,children:jsxRuntimeExports.jsx(SelectProvider,{required:Br,scope:hr,trigger:qr,onTriggerChange:zr,valueNode:Qr,onValueNodeChange:sn,valueNodeHasChildren:hn,onValueNodeHasChildrenChange:vn,contentId:$1746a345f3d73bb7$export$f680877a34711e37(),value:xn,onValueChange:$n,open:gn,onOpenChange:bn,dir:yn,triggerPointerDownPosRef:Sn,disabled:Dr,multi:Hr,children:jsxRuntimeExports.jsx(Collection.Provider,{scope:hr,children:jsxRuntimeExports.jsx(SelectNativeOptionsProvider,{scope:mr.__scopeSelect,onNativeOptionAdd:reactExports.useCallback(Bn=>{Rn(Fn=>new Set(Fn).add(Bn))},[]),onNativeOptionRemove:reactExports.useCallback(Bn=>{Rn(Fn=>{const Hn=new Set(Fn);return Hn.delete(Bn),Hn})},[]),children:gr})})})})};Select$2.displayName=SELECT_NAME;const TRIGGER_NAME="SelectTrigger",SelectTrigger$1=reactExports.forwardRef((mr,hr)=>{const{__scopeSelect:gr,...vr}=mr,xr=usePopperScope(gr),Er=useSelectContext(TRIGGER_NAME,gr),Cr=Er.disabled,wr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(hr,Er.onTriggerChange),Rr=useCollection(gr),[kr,Dr,Br]=useTypeaheadSearch(Gr=>{const qr=Rr().filter(sn=>!sn.disabled),zr=qr.find(sn=>sn.value===Er.value),Qr=findNextItem(qr,Gr,zr);if(Qr!==void 0&&!Array.isArray(Qr.value)){const sn=Er.multi?[Qr.value]:Qr.value;Er.onValueChange(sn)}}),Hr=()=>{Cr||(Er.onOpenChange(!0),Br())};return jsxRuntimeExports.jsx($cf1ac5d9fe0e8206$export$b688253958b8dfe7,{asChild:!0,...xr,children:jsxRuntimeExports.jsx($8927f6f2acc4f386$export$250ffa63cdc0d034.div,{role:"combobox","aria-controls":Er.contentId,"aria-expanded":Er.open,"aria-required":Er.required,"aria-autocomplete":"none",dir:Er.dir,"data-state":Er.open?"open":"closed","data-disabled":Cr?"":void 0,"data-placeholder":Er.value===void 0?"":void 0,tabIndex:Cr?void 0:0,...vr,ref:wr,onClick:$e42e1063c40fb3ef$export$b9ecd428b558ff10(vr.onClick,Gr=>{Gr.currentTarget.focus()}),onPointerDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(vr.onPointerDown,Gr=>{const qr=Gr.target;qr.hasPointerCapture(Gr.pointerId)&&qr.releasePointerCapture(Gr.pointerId),(qr.closest("button")??qr.closest("div"))===Gr.currentTarget&&Gr.button===0&&Gr.ctrlKey===!1&&(Hr(),Er.triggerPointerDownPosRef.current={x:Math.round(Gr.pageX),y:Math.round(Gr.pageY)},Gr.preventDefault())}),onKeyDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(vr.onKeyDown,Gr=>{const qr=kr.current!=="",zr=Gr.ctrlKey||Gr.altKey||Gr.metaKey,Qr=Gr.target;(Qr.closest("button")??Qr.closest("div"))===Gr.currentTarget&&(!zr&&Gr.key.length===1&&Dr(Gr.key),!(qr&&Gr.key===" ")&&OPEN_KEYS.includes(Gr.key)&&(Hr(),Gr.preventDefault()))})})})});SelectTrigger$1.displayName=TRIGGER_NAME;const VALUE_NAME="SelectValue",SelectValue$1=reactExports.forwardRef((mr,hr)=>{const{__scopeSelect:gr,children:vr,placeholder:xr,...Er}=mr,Cr=useSelectContext(VALUE_NAME,gr),{onValueNodeHasChildrenChange:wr}=Cr,Rr=vr!==void 0,kr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(hr,Cr.onValueNodeChange),[Dr,Br]=reactExports.useState([]),Hr=useCollection(gr);$9f79659886946c16$export$e5c5a5f917a5871c(()=>{wr(Rr)},[wr,Rr]),reactExports.useLayoutEffect(()=>{if(Array.isArray(Cr.value)&&Dr.length!==Cr.value.length){const qr=setTimeout(()=>{const zr=Hr().filter(Qr=>Array.isArray(Qr.value)?!1:Cr.value?.includes(Qr.value));Br(zr)});return()=>{clearTimeout(qr)}}},[Cr.value,Hr,Dr]);let Gr;if((Cr.value===void 0||Cr.value.length===0)&&xr!==void 0)Gr=jsxRuntimeExports.jsx("span",{children:xr});else if(typeof vr=="function")if(Array.isArray(Cr.value)){const qr=Cr.value.map(zr=>{const Qr=Dr.find(sn=>sn.value===zr);return Qr?vr({value:zr,textValue:Qr?.textValue}):null});Gr=qr.every(zr=>zr===null)?xr:qr}else Gr=vr(Cr.value);else Gr=vr;return jsxRuntimeExports.jsx($8927f6f2acc4f386$export$250ffa63cdc0d034.span,{...Er,ref:kr,children:Gr||null})});SelectValue$1.displayName=VALUE_NAME;const ICON_NAME="SelectIcon",SelectIcon=reactExports.forwardRef((mr,hr)=>{const{__scopeSelect:gr,children:vr,...xr}=mr;return jsxRuntimeExports.jsx($8927f6f2acc4f386$export$250ffa63cdc0d034.span,{"aria-hidden":!0,...xr,ref:hr,children:vr||"▼"})});SelectIcon.displayName=ICON_NAME;const PORTAL_NAME="SelectPortal",SelectPortal=mr=>jsxRuntimeExports.jsx($f1701beae083dbae$export$602eac185826482c,{asChild:!0,...mr});SelectPortal.displayName=PORTAL_NAME;const CONTENT_NAME$2="SelectContent",SelectContent$1=reactExports.forwardRef((mr,hr)=>{const gr=useSelectContext(CONTENT_NAME$2,mr.__scopeSelect),[vr,xr]=reactExports.useState();if($9f79659886946c16$export$e5c5a5f917a5871c(()=>{xr(new DocumentFragment)},[]),!gr.open){const Er=vr;return Er?reactDomExports.createPortal(jsxRuntimeExports.jsx(SelectContentProvider,{scope:mr.__scopeSelect,children:jsxRuntimeExports.jsx(Collection.Slot,{scope:mr.__scopeSelect,children:jsxRuntimeExports.jsx("div",{children:mr.children})})}),Er):null}return jsxRuntimeExports.jsx(SelectContentImpl,{...mr,ref:hr})});SelectContent$1.displayName=CONTENT_NAME$2;const CONTENT_MARGIN=10,[SelectContentProvider,useSelectContentContext]=createSelectContext(CONTENT_NAME$2),CONTENT_IMPL_NAME$1="SelectContentImpl",SelectContentImpl=reactExports.forwardRef((mr,hr)=>{const{__scopeSelect:gr,position:vr="item-aligned",onCloseAutoFocus:xr,onEscapeKeyDown:Er,onPointerDownOutside:Cr,side:wr,sideOffset:Rr,align:kr,alignOffset:Dr,arrowPadding:Br,collisionBoundary:Hr,collisionPadding:Gr,sticky:qr,hideWhenDetached:zr,avoidCollisions:Qr,...sn}=mr,hn=useSelectContext(CONTENT_NAME$2,gr),[vn,yn]=reactExports.useState(null),[gn,bn]=reactExports.useState(null),xn=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(hr,kn=>yn(kn)),[$n,Sn]=reactExports.useState(null),[Cn,Rn]=reactExports.useState(null),Bn=useCollection(gr),[Fn,Hn]=reactExports.useState(!1),Gn=reactExports.useRef(!1);reactExports.useEffect(()=>{if(vn)return hideOthers(vn)},[vn]),$3db38b7d1fb3fe6a$export$b7ece24a22aeda8c$1();const qn=reactExports.useCallback(kn=>{const[Dn,...Vn]=Bn().map(Zn=>Zn.ref.current),[zn]=Vn.slice(-1),Xn=document.activeElement;for(const Zn of kn)if(Zn===Xn||(Zn?.scrollIntoView({block:"nearest"}),Zn===Dn&&gn&&(gn.scrollTop=0),Zn===zn&&gn&&(gn.scrollTop=gn.scrollHeight),Zn?.focus(),document.activeElement!==Xn))return},[Bn,gn]),On=reactExports.useCallback(()=>qn([$n,vn]),[qn,$n,vn]);reactExports.useEffect(()=>{Fn&&On()},[Fn,On]);const{onOpenChange:wn,triggerPointerDownPosRef:_n}=hn;reactExports.useEffect(()=>{if(vn){let kn={x:0,y:0};const Dn=zn=>{kn={x:Math.abs(Math.round(zn.pageX)-(_n.current?.x??0)),y:Math.abs(Math.round(zn.pageY)-(_n.current?.y??0))}},Vn=zn=>{kn.x<=10&&kn.y<=10?zn.preventDefault():vn.contains(zn.target)||wn(!1),document.removeEventListener("pointermove",Dn),_n.current=null};return _n.current!==null&&(document.addEventListener("pointermove",Dn),document.addEventListener("pointerup",Vn,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Dn),document.removeEventListener("pointerup",Vn,{capture:!0})}}},[vn,wn,_n]),reactExports.useEffect(()=>{const kn=()=>wn(!1);return window.addEventListener("blur",kn),window.addEventListener("resize",kn),()=>{window.removeEventListener("blur",kn),window.removeEventListener("resize",kn)}},[wn]);const[Tn,Mn]=useTypeaheadSearch(kn=>{const Dn=Bn().filter(Xn=>!Xn.disabled),Vn=Dn.find(Xn=>Xn.ref.current===document.activeElement),zn=findNextItem(Dn,kn,Vn);zn&&setTimeout(()=>zn.ref.current.focus())}),Ln=reactExports.useCallback((kn,Dn,Vn)=>{const zn=!Gn.current&&!Vn;(hn.value!==void 0&&hn.value===Dn||zn)&&(Sn(kn),zn&&(Gn.current=!0))},[hn.value]),jn=reactExports.useCallback(()=>vn?.focus(),[vn]),Kn=reactExports.useCallback((kn,Dn,Vn)=>{const zn=!Gn.current&&!Vn;(hn.value!==void 0&&(Array.isArray(Dn)?Dn.every(Zn=>hn.value?.includes(Zn)):hn.value===Dn)||zn)&&Rn(kn)},[hn.value]),Nn=vr==="popper"?SelectPopperPosition:SelectItemAlignedPosition,An=Nn===SelectPopperPosition?{side:wr,sideOffset:Rr,align:kr,alignOffset:Dr,arrowPadding:Br,collisionBoundary:Hr,collisionPadding:Gr,sticky:qr,hideWhenDetached:zr,avoidCollisions:Qr}:{};return jsxRuntimeExports.jsx(SelectContentProvider,{scope:gr,content:vn,viewport:gn,onViewportChange:bn,itemRefCallback:Ln,selectedItem:$n,onItemLeave:jn,itemTextRefCallback:Kn,focusSelectedItem:On,selectedItemText:Cn,position:vr,isPositioned:Fn,searchRef:Tn,children:jsxRuntimeExports.jsx(ReactRemoveScroll$4,{as:$5e63c961fc1ce211$export$8c6ed5c666ac1360,allowPinchZoom:!0,children:jsxRuntimeExports.jsx($d3863c46a17e8a28$export$20e40289641fbbb6,{asChild:!0,trapped:hn.open,onMountAutoFocus:kn=>{kn.preventDefault()},onUnmountAutoFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(xr,kn=>{hn.trigger?.focus({preventScroll:!0}),document.getSelection()?.empty(),kn.preventDefault()}),children:jsxRuntimeExports.jsx($5cb92bef7577960e$export$177fb62ff3ec1f22,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:Er,onPointerDownOutside:Cr,onFocusOutside:kn=>kn.preventDefault(),onDismiss:()=>hn.onOpenChange(!1),children:jsxRuntimeExports.jsx(Nn,{role:"listbox",id:hn.contentId,"data-state":hn.open?"open":"closed","aria-multiselectable":hn.multi?"true":void 0,dir:hn.dir,onContextMenu:kn=>kn.preventDefault(),...sn,...An,onPlaced:()=>Hn(!0),ref:xn,style:{display:"flex",flexDirection:"column",outline:"none",...sn.style},onKeyDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(sn.onKeyDown,kn=>{const Dn=kn.ctrlKey||kn.altKey||kn.metaKey;if(kn.key==="Tab"&&kn.preventDefault(),!Dn&&kn.key.length===1&&Mn(kn.key),["ArrowUp","ArrowDown","Home","End"].includes(kn.key)){let zn=Bn().filter(Xn=>!Xn.disabled).map(Xn=>Xn.ref.current);if(["ArrowUp","End"].includes(kn.key)&&(zn=zn.slice().reverse()),["ArrowUp","ArrowDown"].includes(kn.key)){const Xn=kn.target,Zn=zn.indexOf(Xn);zn=zn.slice(Zn+1)}setTimeout(()=>qn(zn)),kn.preventDefault()}})})})})})})});SelectContentImpl.displayName=CONTENT_IMPL_NAME$1;const ITEM_ALIGNED_POSITION_NAME="SelectItemAlignedPosition",SelectItemAlignedPosition=reactExports.forwardRef((mr,hr)=>{const{__scopeSelect:gr,onPlaced:vr,...xr}=mr,Er=useSelectContext(CONTENT_NAME$2,gr),Cr=useSelectContentContext(CONTENT_NAME$2,gr),[wr,Rr]=reactExports.useState(null),[kr,Dr]=reactExports.useState(null),Br=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(hr,xn=>Dr(xn)),Hr=useCollection(gr),Gr=reactExports.useRef(!1),qr=reactExports.useRef(!0),{viewport:zr,selectedItem:Qr,selectedItemText:sn,focusSelectedItem:hn}=Cr,vn=reactExports.useCallback(()=>{if(Er.trigger&&Er.valueNode&&wr&&kr&&zr&&Qr&&sn){const xn=Er.trigger.getBoundingClientRect(),$n=kr.getBoundingClientRect(),Sn=Er.valueNode.getBoundingClientRect(),Cn=sn.getBoundingClientRect();if(Er.dir!=="rtl"){const Xn=Cn.left-$n.left,Zn=Sn.left-Xn,Pi=xn.left-Zn,Ya=xn.width+Pi,Bi=Math.max(Ya,$n.width),zi=window.innerWidth-CONTENT_MARGIN,Xi=$ae6933e535247d3d$export$7d15b64cf5a3a4c4(Zn,[CONTENT_MARGIN,zi-Bi]);wr.style.minWidth=`${Ya}px`,wr.style.left=`${Xi}px`}else{const Xn=$n.right-Cn.right,Zn=window.innerWidth-Sn.right-Xn,Pi=window.innerWidth-xn.right-Zn,Ya=xn.width+Pi,Bi=Math.max(Ya,$n.width),zi=window.innerWidth-CONTENT_MARGIN,Xi=$ae6933e535247d3d$export$7d15b64cf5a3a4c4(Zn,[CONTENT_MARGIN,zi-Bi]);wr.style.minWidth=`${Ya}px`,wr.style.right=`${Xi}px`}const Rn=Hr(),Bn=window.innerHeight-CONTENT_MARGIN*2,Fn=zr.scrollHeight,Hn=window.getComputedStyle(kr),Gn=parseInt(Hn.borderTopWidth,10),qn=parseInt(Hn.paddingTop,10),On=parseInt(Hn.borderBottomWidth,10),wn=parseInt(Hn.paddingBottom,10),_n=Gn+qn+Fn+wn+On,Tn=Math.min(Qr.offsetHeight*5,_n),Mn=window.getComputedStyle(zr),Ln=parseInt(Mn.paddingTop,10),jn=parseInt(Mn.paddingBottom,10),Kn=xn.top+xn.height/2-CONTENT_MARGIN,Nn=Bn-Kn,An=Qr.offsetHeight/2,kn=Qr.offsetTop+An,Dn=Gn+qn+kn,Vn=_n-Dn;if(Dn<=Kn){const Xn=Qr===Rn[Rn.length-1].ref.current;wr.style.bottom="0px";const Zn=kr.clientHeight-zr.offsetTop-zr.offsetHeight,Pi=Math.max(Nn,An+(Xn?jn:0)+Zn+On),Ya=Dn+Pi;wr.style.height=`${Ya}px`}else{const Xn=Qr===Rn[0].ref.current;wr.style.top="0px";const Pi=Math.max(Kn,Gn+zr.offsetTop+(Xn?Ln:0)+An)+Vn;wr.style.height=`${Pi}px`,zr.scrollTop=Dn-Kn+zr.offsetTop}wr.style.margin=`${CONTENT_MARGIN}px 0`,wr.style.minHeight=`${Tn}px`,wr.style.maxHeight=`${Bn}px`,vr?.(),requestAnimationFrame(()=>Gr.current=!0)}},[Hr,Er.trigger,Er.valueNode,wr,kr,zr,Qr,sn,Er.dir,vr]);$9f79659886946c16$export$e5c5a5f917a5871c(()=>vn(),[vn]);const[yn,gn]=reactExports.useState();$9f79659886946c16$export$e5c5a5f917a5871c(()=>{kr&&gn(window.getComputedStyle(kr).zIndex)},[kr]);const bn=reactExports.useCallback(xn=>{xn&&qr.current===!0&&(vn(),hn?.(),qr.current=!1)},[vn,hn]);return jsxRuntimeExports.jsx(SelectViewportProvider,{scope:gr,contentWrapper:wr,shouldExpandOnScrollRef:Gr,onScrollButtonChange:bn,children:jsxRuntimeExports.jsx("div",{ref:Rr,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:yn},children:jsxRuntimeExports.jsx($8927f6f2acc4f386$export$250ffa63cdc0d034.div,{...xr,ref:Br,style:{boxSizing:"border-box",maxHeight:"100%",...xr.style}})})})});SelectItemAlignedPosition.displayName=ITEM_ALIGNED_POSITION_NAME;const POPPER_POSITION_NAME="SelectPopperPosition",SelectPopperPosition=reactExports.forwardRef((mr,hr)=>{const{__scopeSelect:gr,align:vr="start",collisionPadding:xr=CONTENT_MARGIN,...Er}=mr,Cr=usePopperScope(gr);return jsxRuntimeExports.jsx($cf1ac5d9fe0e8206$export$7c6e2c02157bb7d2,{...Cr,...Er,ref:hr,align:vr,collisionPadding:xr,style:{boxSizing:"border-box",...Er.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});SelectPopperPosition.displayName=POPPER_POSITION_NAME;const[SelectViewportProvider,useSelectViewportContext]=createSelectContext(CONTENT_NAME$2,{}),VIEWPORT_NAME="SelectViewport",SelectViewport$1=reactExports.forwardRef((mr,hr)=>{const{__scopeSelect:gr,...vr}=mr,xr=useSelectContentContext(VIEWPORT_NAME,gr),Er=useSelectViewportContext(VIEWPORT_NAME,gr),Cr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(hr,xr.onViewportChange),wr=reactExports.useRef(0);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),jsxRuntimeExports.jsx(Collection.Slot,{scope:gr,children:jsxRuntimeExports.jsx($8927f6f2acc4f386$export$250ffa63cdc0d034.div,{"data-radix-select-viewport":"",role:"presentation",...vr,ref:Cr,style:{position:"relative",flex:1,overflow:"auto",...vr.style},onScroll:$e42e1063c40fb3ef$export$b9ecd428b558ff10(vr.onScroll,Rr=>{const kr=Rr.currentTarget,{contentWrapper:Dr,shouldExpandOnScrollRef:Br}=Er;if(Br?.current&&Dr){const Hr=Math.abs(wr.current-kr.scrollTop);if(Hr>0){const Gr=window.innerHeight-CONTENT_MARGIN*2,qr=parseFloat(Dr.style.minHeight),zr=parseFloat(Dr.style.height),Qr=Math.max(qr,zr);if(Qr<Gr){const sn=Qr+Hr,hn=Math.min(Gr,sn),vn=sn-hn;Dr.style.height=`${hn}px`,Dr.style.bottom==="0px"&&(kr.scrollTop=vn>0?vn:0,Dr.style.justifyContent="flex-end")}}}wr.current=kr.scrollTop})})})]})});SelectViewport$1.displayName=VIEWPORT_NAME;const GROUP_NAME="SelectGroup",[SelectGroupContextProvider,useSelectGroupContext]=createSelectContext(GROUP_NAME),SelectGroup=reactExports.forwardRef((mr,hr)=>{const{__scopeSelect:gr,...vr}=mr,xr=$1746a345f3d73bb7$export$f680877a34711e37();return jsxRuntimeExports.jsx(SelectGroupContextProvider,{scope:gr,id:xr,children:jsxRuntimeExports.jsx($8927f6f2acc4f386$export$250ffa63cdc0d034.div,{role:"group","aria-labelledby":xr,...vr,ref:hr})})});SelectGroup.displayName=GROUP_NAME;const LABEL_NAME="SelectLabel",SelectLabel=reactExports.forwardRef((mr,hr)=>{const{__scopeSelect:gr,...vr}=mr,xr=useSelectGroupContext(LABEL_NAME,gr);return jsxRuntimeExports.jsx($8927f6f2acc4f386$export$250ffa63cdc0d034.div,{id:xr.id,...vr,ref:hr})});SelectLabel.displayName=LABEL_NAME;const ITEM_NAME="SelectItem",[SelectItemContextProvider,useSelectItemContext]=createSelectContext(ITEM_NAME),SelectItem$1=reactExports.forwardRef((mr,hr)=>{const{__scopeSelect:gr,value:vr,disabled:xr=!1,textValue:Er,...Cr}=mr,wr=useSelectContext(ITEM_NAME,gr),Rr=useSelectContentContext(ITEM_NAME,gr),kr=typeof vr=="string"?Array.isArray(wr.value)?wr.value.includes(vr):wr.value===vr:vr.every(hn=>wr.value?.includes(hn)),Dr=Array.isArray(wr.value)&&Array.isArray(vr)&&vr.some(hn=>wr.value?.includes(hn)),[Br,Hr]=reactExports.useState(Er??""),[Gr,qr]=reactExports.useState(!1),zr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(hr,hn=>Rr.itemRefCallback?.(hn,vr,xr)),Qr=$1746a345f3d73bb7$export$f680877a34711e37(),sn=()=>{if(!xr){let hn=wr.multi&&typeof vr=="string"?[vr]:vr;Dr&&!kr?wr.onValueChange(hn):Array.isArray(wr.value)&&(hn=toggleArrayValue(vr,wr.value)),wr.onValueChange(hn),wr.multi||wr.onOpenChange(!1)}};if(!wr.multi&&Array.isArray(vr))throw new Error("You can only pass an array of values in multi selects");return jsxRuntimeExports.jsx(SelectItemContextProvider,{scope:gr,value:vr,disabled:xr,textId:Qr,isSelected:kr,isIntermediate:Dr,onItemTextChange:reactExports.useCallback(hn=>{Hr(vn=>vn||(hn?.textContent??"").trim())},[]),children:jsxRuntimeExports.jsx(Collection.ItemSlot,{scope:gr,value:vr,disabled:xr,textValue:Br,children:jsxRuntimeExports.jsx($8927f6f2acc4f386$export$250ffa63cdc0d034.div,{role:"option","aria-labelledby":Qr,"data-highlighted":Gr?"":void 0,"aria-selected":wr.multi?void 0:kr&&Gr,"aria-checked":wr.multi?kr:void 0,"data-state":kr?"checked":"unchecked","aria-disabled":xr||void 0,"data-disabled":xr?"":void 0,tabIndex:xr?void 0:-1,...Cr,ref:zr,onFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Cr.onFocus,()=>qr(!0)),onBlur:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Cr.onBlur,()=>qr(!1)),onPointerUp:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Cr.onPointerUp,sn),onPointerMove:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Cr.onPointerMove,hn=>{xr?Rr.onItemLeave?.():hn.currentTarget.focus({preventScroll:!0})}),onPointerLeave:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Cr.onPointerLeave,hn=>{hn.currentTarget===document.activeElement&&Rr.onItemLeave?.()}),onKeyDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Cr.onKeyDown,hn=>{Rr.searchRef?.current!==""&&hn.key===" "||(SELECTION_KEYS.includes(hn.key)&&sn(),hn.key===" "&&hn.preventDefault())})})})})});SelectItem$1.displayName=ITEM_NAME;const ITEM_TEXT_NAME="SelectItemText",SelectItemText=reactExports.forwardRef((mr,hr)=>{const{__scopeSelect:gr,className:vr,style:xr,...Er}=mr,Cr=useSelectContext(ITEM_TEXT_NAME,gr),wr=useSelectContentContext(ITEM_TEXT_NAME,gr),Rr=useSelectItemContext(ITEM_TEXT_NAME,gr),kr=useSelectNativeOptionsContext(ITEM_TEXT_NAME,gr),[Dr,Br]=reactExports.useState(null),Hr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(hr,sn=>Br(sn),Rr.onItemTextChange,sn=>wr.itemTextRefCallback?.(sn,Rr.value,Rr.disabled)),Gr=Dr?.textContent,qr=reactExports.useMemo(()=>jsxRuntimeExports.jsx("option",{value:Rr.value,disabled:Rr.disabled,children:Gr},Array.isArray(Rr.value)?Rr.value.join(";"):Rr.value),[Rr.disabled,Rr.value,Gr]),{onNativeOptionAdd:zr,onNativeOptionRemove:Qr}=kr;return $9f79659886946c16$export$e5c5a5f917a5871c(()=>(zr(qr),()=>Qr(qr)),[zr,Qr,qr]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx($8927f6f2acc4f386$export$250ffa63cdc0d034.span,{id:Rr.textId,...Er,ref:Hr}),Rr.isSelected&&Cr.valueNode&&!Cr.valueNodeHasChildren?reactDomExports.createPortal(Er.children,Cr.valueNode):null]})});SelectItemText.displayName=ITEM_TEXT_NAME;const ITEM_INDICATOR_NAME="SelectItemIndicator",SelectItemIndicator=reactExports.forwardRef((mr,hr)=>{const{__scopeSelect:gr,children:vr,...xr}=mr,Er=useSelectItemContext(ITEM_INDICATOR_NAME,gr);return typeof vr=="function"?jsxRuntimeExports.jsx($8927f6f2acc4f386$export$250ffa63cdc0d034.span,{"aria-hidden":!0,...xr,ref:hr,children:vr({isSelected:Er.isSelected,isIntermediate:Er.isIntermediate})}):Er.isSelected?jsxRuntimeExports.jsx($8927f6f2acc4f386$export$250ffa63cdc0d034.span,{"aria-hidden":!0,...xr,ref:hr,children:vr}):null});SelectItemIndicator.displayName=ITEM_INDICATOR_NAME;const SCROLL_UP_BUTTON_NAME="SelectScrollUpButton",SelectScrollUpButton=reactExports.forwardRef((mr,hr)=>{const gr=useSelectContentContext(SCROLL_UP_BUTTON_NAME,mr.__scopeSelect),vr=useSelectViewportContext(SCROLL_UP_BUTTON_NAME,mr.__scopeSelect),[xr,Er]=reactExports.useState(!1),Cr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(hr,vr.onScrollButtonChange);return $9f79659886946c16$export$e5c5a5f917a5871c(()=>{if(gr.viewport&&gr.isPositioned){const wr=gr.viewport,Rr=()=>{const kr=wr.scrollTop>0;Er(kr)};return Rr(),wr.addEventListener("scroll",Rr),()=>wr.removeEventListener("scroll",Rr)}},[gr.viewport,gr.isPositioned]),xr?jsxRuntimeExports.jsx(SelectScrollButtonImpl,{...mr,ref:Cr,onAutoScroll:()=>{const{viewport:wr,selectedItem:Rr}=gr;wr&&Rr&&(wr.scrollTop-=Rr.offsetHeight)}}):null});SelectScrollUpButton.displayName=SCROLL_UP_BUTTON_NAME;const SCROLL_DOWN_BUTTON_NAME="SelectScrollDownButton",SelectScrollDownButton=reactExports.forwardRef((mr,hr)=>{const gr=useSelectContentContext(SCROLL_DOWN_BUTTON_NAME,mr.__scopeSelect),vr=useSelectViewportContext(SCROLL_DOWN_BUTTON_NAME,mr.__scopeSelect),[xr,Er]=reactExports.useState(!1),Cr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(hr,vr.onScrollButtonChange);return $9f79659886946c16$export$e5c5a5f917a5871c(()=>{if(gr.viewport&&gr.isPositioned){const wr=gr.viewport,Rr=()=>{const kr=wr.scrollHeight-wr.clientHeight,Dr=Math.ceil(wr.scrollTop)<kr;Er(Dr)};return Rr(),wr.addEventListener("scroll",Rr),()=>wr.removeEventListener("scroll",Rr)}},[gr.viewport,gr.isPositioned]),xr?jsxRuntimeExports.jsx(SelectScrollButtonImpl,{...mr,ref:Cr,onAutoScroll:()=>{const{viewport:wr,selectedItem:Rr}=gr;wr&&Rr&&(wr.scrollTop+=Rr.offsetHeight)}}):null});SelectScrollDownButton.displayName=SCROLL_DOWN_BUTTON_NAME;const SelectScrollButtonImpl=reactExports.forwardRef((mr,hr)=>{const{__scopeSelect:gr,onAutoScroll:vr,...xr}=mr,Er=useSelectContentContext("SelectScrollButton",gr),Cr=reactExports.useRef(null),wr=useCollection(gr),Rr=reactExports.useCallback(()=>{Cr.current!==null&&(window.clearInterval(Cr.current),Cr.current=null)},[]);return reactExports.useEffect(()=>()=>Rr(),[Rr]),$9f79659886946c16$export$e5c5a5f917a5871c(()=>{wr().find(Dr=>Dr.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[wr]),jsxRuntimeExports.jsx($8927f6f2acc4f386$export$250ffa63cdc0d034.div,{"aria-hidden":!0,...xr,ref:hr,style:{flexShrink:0,...xr.style},onPointerMove:$e42e1063c40fb3ef$export$b9ecd428b558ff10(xr.onPointerMove,()=>{Er.onItemLeave?.(),Cr.current===null&&(Cr.current=window.setInterval(vr,50))}),onPointerLeave:$e42e1063c40fb3ef$export$b9ecd428b558ff10(xr.onPointerLeave,()=>{Rr()})})});SelectScrollButtonImpl.displayName="SelectScrollButtonImpl";const SEPARATOR_NAME="SelectSeparator",SelectSeparator=reactExports.forwardRef((mr,hr)=>{const{__scopeSelect:gr,...vr}=mr;return jsxRuntimeExports.jsx($8927f6f2acc4f386$export$250ffa63cdc0d034.div,{"aria-hidden":!0,...vr,ref:hr})});SelectSeparator.displayName=SEPARATOR_NAME;const ARROW_NAME="SelectArrow",SelectArrow=reactExports.forwardRef((mr,hr)=>{const{__scopeSelect:gr,...vr}=mr,xr=usePopperScope(gr),Er=useSelectContext(ARROW_NAME,gr),Cr=useSelectContentContext(ARROW_NAME,gr);return Er.open&&Cr.position==="popper"?jsxRuntimeExports.jsx($cf1ac5d9fe0e8206$export$21b07c8f274aebd5,{...xr,...vr,ref:hr}):null});SelectArrow.displayName=ARROW_NAME;const BUBBLE_SELECT_NAME="BubbleSelect",BubbleSelect=reactExports.forwardRef((mr,hr)=>{const{value:gr,...vr}=mr,xr=reactExports.useRef(null),Er=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(hr,xr),Cr=$010c2913dbd2fe3d$export$5cae361ad82dce8b(gr),wr=useSelectContext(BUBBLE_SELECT_NAME,void 0);reactExports.useEffect(()=>{const kr=xr.current,Dr=window.HTMLSelectElement.prototype,Hr=Object.getOwnPropertyDescriptor(Dr,"value").set;if(Cr!==gr&&Hr){const Gr=new Event("change",{bubbles:!0});Hr.call(kr,gr),kr.dispatchEvent(Gr)}},[Cr,gr]);let Rr=gr;return wr.multi&&!Array.isArray(gr)&&(Rr=[]),jsxRuntimeExports.jsx($ea1ef594cf570d83$export$439d29a4e110a164,{asChild:!0,children:jsxRuntimeExports.jsx("select",{...vr,multiple:wr.multi?!0:void 0,ref:Er,defaultValue:Rr})})});BubbleSelect.displayName="BubbleSelect";function useTypeaheadSearch(mr){const hr=useCallbackRef(mr),gr=reactExports.useRef(""),vr=reactExports.useRef(0),xr=reactExports.useCallback(Cr=>{const wr=gr.current+Cr;hr(wr),function Rr(kr){gr.current=kr,window.clearTimeout(vr.current),kr!==""&&(vr.current=window.setTimeout(()=>Rr(""),1e3))}(wr)},[hr]),Er=reactExports.useCallback(()=>{gr.current="",window.clearTimeout(vr.current)},[]);return reactExports.useEffect(()=>()=>window.clearTimeout(vr.current),[]),[gr,xr,Er]}function findNextItem(mr,hr,gr){const xr=hr.length>1&&Array.from(hr).every(kr=>kr===hr[0])?hr[0]:hr,Er=gr?mr.indexOf(gr):-1;let Cr=wrapArray(mr,Math.max(Er,0));xr.length===1&&(Cr=Cr.filter(kr=>kr!==gr));const Rr=Cr.find(kr=>kr.textValue.toLowerCase().startsWith(xr.toLowerCase()));return Rr!==gr?Rr:void 0}function wrapArray(mr,hr){return mr.map((gr,vr)=>mr[(hr+vr)%mr.length])}const toggleArrayValue=(mr,hr=[])=>{if(Array.isArray(mr))return mr.reduce((vr,xr)=>toggleArrayValue(xr,vr),hr);const gr=hr.indexOf(mr);return gr===-1?[...hr,mr]:[...hr.slice(0,gr),...hr.slice(gr+1)]},Root$a=Select$2,Trigger$9=SelectTrigger$1,Value$1=SelectValue$1,Icon=SelectIcon,Portal$2=SelectPortal,Content$9=SelectContent$1,Viewport$4=SelectViewport$1,Group$3=SelectGroup,Label$2=SelectLabel,Item$6=SelectItem$1,ItemText$2=SelectItemText,ItemIndicator$2=SelectItemIndicator,ScrollUpButton=SelectScrollUpButton,ScrollDownButton=SelectScrollDownButton,Separator=SelectSeparator,Arrow=SelectArrow,Select$1$1=Object.freeze(Object.defineProperty({__proto__:null,Arrow,Content:Content$9,Group:Group$3,Icon,Item:Item$6,ItemIndicator:ItemIndicator$2,ItemText:ItemText$2,Label:Label$2,Portal:Portal$2,Root:Root$a,ScrollDownButton,ScrollUpButton,Select:Select$2,SelectArrow,SelectContent:SelectContent$1,SelectGroup,SelectIcon,SelectItem:SelectItem$1,SelectItemIndicator,SelectItemText,SelectLabel,SelectPortal,SelectScrollDownButton,SelectScrollUpButton,SelectSeparator,SelectTrigger:SelectTrigger$1,SelectValue:SelectValue$1,SelectViewport:SelectViewport$1,Separator,Trigger:Trigger$9,Value:Value$1,Viewport:Viewport$4,createSelectScope},Symbol.toStringTag,{value:"Module"}));function composeEventHandlers(mr,hr,{checkForDefaultPrevented:gr=!0}={}){return function(xr){if(mr?.(xr),gr===!1||!xr.defaultPrevented)return hr?.(xr)}}const $409067139f391064$var$COLLAPSIBLE_NAME="Collapsible",[$409067139f391064$var$createCollapsibleContext,$409067139f391064$export$952b32dcbe73087a]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($409067139f391064$var$COLLAPSIBLE_NAME),[$409067139f391064$var$CollapsibleProvider,$409067139f391064$var$useCollapsibleContext]=$409067139f391064$var$createCollapsibleContext($409067139f391064$var$COLLAPSIBLE_NAME),$409067139f391064$export$6eb0f7ddcda6131f=reactExports.forwardRef((mr,hr)=>{const{__scopeCollapsible:gr,open:vr,defaultOpen:xr,disabled:Er,onOpenChange:Cr,...wr}=mr,[Rr=!1,kr]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:vr,defaultProp:xr,onChange:Cr});return reactExports.createElement($409067139f391064$var$CollapsibleProvider,{scope:gr,disabled:Er,contentId:$1746a345f3d73bb7$export$f680877a34711e37(),open:Rr,onOpenToggle:reactExports.useCallback(()=>kr(Dr=>!Dr),[kr])},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$7({"data-state":$409067139f391064$var$getState(Rr),"data-disabled":Er?"":void 0},wr,{ref:hr})))}),$409067139f391064$var$TRIGGER_NAME="CollapsibleTrigger",$409067139f391064$export$c135dce7b15bbbdc=reactExports.forwardRef((mr,hr)=>{const{__scopeCollapsible:gr,...vr}=mr,xr=$409067139f391064$var$useCollapsibleContext($409067139f391064$var$TRIGGER_NAME,gr);return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.button,_extends$7({type:"button","aria-controls":xr.contentId,"aria-expanded":xr.open||!1,"data-state":$409067139f391064$var$getState(xr.open),"data-disabled":xr.disabled?"":void 0,disabled:xr.disabled},vr,{ref:hr,onClick:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onClick,xr.onOpenToggle)}))}),$409067139f391064$var$CONTENT_NAME="CollapsibleContent",$409067139f391064$export$aadde00976f34151=reactExports.forwardRef((mr,hr)=>{const{forceMount:gr,...vr}=mr,xr=$409067139f391064$var$useCollapsibleContext($409067139f391064$var$CONTENT_NAME,mr.__scopeCollapsible);return reactExports.createElement($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:gr||xr.open},({present:Er})=>reactExports.createElement($409067139f391064$var$CollapsibleContentImpl,_extends$7({},vr,{ref:hr,present:Er})))}),$409067139f391064$var$CollapsibleContentImpl=reactExports.forwardRef((mr,hr)=>{const{__scopeCollapsible:gr,present:vr,children:xr,...Er}=mr,Cr=$409067139f391064$var$useCollapsibleContext($409067139f391064$var$CONTENT_NAME,gr),[wr,Rr]=reactExports.useState(vr),kr=reactExports.useRef(null),Dr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(hr,kr),Br=reactExports.useRef(0),Hr=Br.current,Gr=reactExports.useRef(0),qr=Gr.current,zr=Cr.open||wr,Qr=reactExports.useRef(zr),sn=reactExports.useRef();return reactExports.useEffect(()=>{const hn=requestAnimationFrame(()=>Qr.current=!1);return()=>cancelAnimationFrame(hn)},[]),$9f79659886946c16$export$e5c5a5f917a5871c(()=>{const hn=kr.current;if(hn){sn.current=sn.current||{transitionDuration:hn.style.transitionDuration,animationName:hn.style.animationName},hn.style.transitionDuration="0s",hn.style.animationName="none";const vn=hn.getBoundingClientRect();Br.current=vn.height,Gr.current=vn.width,Qr.current||(hn.style.transitionDuration=sn.current.transitionDuration,hn.style.animationName=sn.current.animationName),Rr(vr)}},[Cr.open,vr]),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$7({"data-state":$409067139f391064$var$getState(Cr.open),"data-disabled":Cr.disabled?"":void 0,id:Cr.contentId,hidden:!zr},Er,{ref:Dr,style:{"--radix-collapsible-content-height":Hr?`${Hr}px`:void 0,"--radix-collapsible-content-width":qr?`${qr}px`:void 0,...mr.style}}),zr&&xr)});function $409067139f391064$var$getState(mr){return mr?"open":"closed"}const $409067139f391064$export$be92b6f5f03c0fe9=$409067139f391064$export$6eb0f7ddcda6131f,$409067139f391064$export$41fb9f06171c75f4=$409067139f391064$export$c135dce7b15bbbdc,$409067139f391064$export$7c6e2c02157bb7d2=$409067139f391064$export$aadde00976f34151,$1bf158f521e1b1b4$var$ACCORDION_NAME="Accordion",$1bf158f521e1b1b4$var$ACCORDION_KEYS=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[$1bf158f521e1b1b4$var$Collection,$1bf158f521e1b1b4$var$useCollection,$1bf158f521e1b1b4$var$createCollectionScope]=$e02a7d9cb1dc128c$export$c74125a8e3af6bb2($1bf158f521e1b1b4$var$ACCORDION_NAME),[$1bf158f521e1b1b4$var$createAccordionContext,$1bf158f521e1b1b4$export$9748edc328a73be1]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($1bf158f521e1b1b4$var$ACCORDION_NAME,[$1bf158f521e1b1b4$var$createCollectionScope,$409067139f391064$export$952b32dcbe73087a]),$1bf158f521e1b1b4$var$useCollapsibleScope=$409067139f391064$export$952b32dcbe73087a(),$1bf158f521e1b1b4$export$a766cd26d0d69044=$jFibJ$react.forwardRef((mr,hr)=>{const{type:gr,...vr}=mr,xr=vr,Er=vr;return $jFibJ$react.createElement($1bf158f521e1b1b4$var$Collection.Provider,{scope:mr.__scopeAccordion},gr==="multiple"?$jFibJ$react.createElement($1bf158f521e1b1b4$var$AccordionImplMultiple,_extends$7({},Er,{ref:hr})):$jFibJ$react.createElement($1bf158f521e1b1b4$var$AccordionImplSingle,_extends$7({},xr,{ref:hr})))});$1bf158f521e1b1b4$export$a766cd26d0d69044.propTypes={type(mr){const hr=mr.value||mr.defaultValue;return mr.type&&!["single","multiple"].includes(mr.type)?new Error("Invalid prop `type` supplied to `Accordion`. Expected one of `single | multiple`."):mr.type==="multiple"&&typeof hr=="string"?new Error("Invalid prop `type` supplied to `Accordion`. Expected `single` when `defaultValue` or `value` is type `string`."):mr.type==="single"&&Array.isArray(hr)?new Error("Invalid prop `type` supplied to `Accordion`. Expected `multiple` when `defaultValue` or `value` is type `string[]`."):null}};const[$1bf158f521e1b1b4$var$AccordionValueProvider,$1bf158f521e1b1b4$var$useAccordionValueContext]=$1bf158f521e1b1b4$var$createAccordionContext($1bf158f521e1b1b4$var$ACCORDION_NAME),[$1bf158f521e1b1b4$var$AccordionCollapsibleProvider,$1bf158f521e1b1b4$var$useAccordionCollapsibleContext]=$1bf158f521e1b1b4$var$createAccordionContext($1bf158f521e1b1b4$var$ACCORDION_NAME,{collapsible:!1}),$1bf158f521e1b1b4$var$AccordionImplSingle=$jFibJ$react.forwardRef((mr,hr)=>{const{value:gr,defaultValue:vr,onValueChange:xr=()=>{},collapsible:Er=!1,...Cr}=mr,[wr,Rr]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:gr,defaultProp:vr,onChange:xr});return $jFibJ$react.createElement($1bf158f521e1b1b4$var$AccordionValueProvider,{scope:mr.__scopeAccordion,value:wr?[wr]:[],onItemOpen:Rr,onItemClose:$jFibJ$react.useCallback(()=>Er&&Rr(""),[Er,Rr])},$jFibJ$react.createElement($1bf158f521e1b1b4$var$AccordionCollapsibleProvider,{scope:mr.__scopeAccordion,collapsible:Er},$jFibJ$react.createElement($1bf158f521e1b1b4$var$AccordionImpl,_extends$7({},Cr,{ref:hr}))))}),$1bf158f521e1b1b4$var$AccordionImplMultiple=$jFibJ$react.forwardRef((mr,hr)=>{const{value:gr,defaultValue:vr,onValueChange:xr=()=>{},...Er}=mr,[Cr=[],wr]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:gr,defaultProp:vr,onChange:xr}),Rr=$jFibJ$react.useCallback(Dr=>wr((Br=[])=>[...Br,Dr]),[wr]),kr=$jFibJ$react.useCallback(Dr=>wr((Br=[])=>Br.filter(Hr=>Hr!==Dr)),[wr]);return $jFibJ$react.createElement($1bf158f521e1b1b4$var$AccordionValueProvider,{scope:mr.__scopeAccordion,value:Cr,onItemOpen:Rr,onItemClose:kr},$jFibJ$react.createElement($1bf158f521e1b1b4$var$AccordionCollapsibleProvider,{scope:mr.__scopeAccordion,collapsible:!0},$jFibJ$react.createElement($1bf158f521e1b1b4$var$AccordionImpl,_extends$7({},Er,{ref:hr}))))}),[$1bf158f521e1b1b4$var$AccordionImplProvider,$1bf158f521e1b1b4$var$useAccordionContext]=$1bf158f521e1b1b4$var$createAccordionContext($1bf158f521e1b1b4$var$ACCORDION_NAME),$1bf158f521e1b1b4$var$AccordionImpl=$jFibJ$react.forwardRef((mr,hr)=>{const{__scopeAccordion:gr,disabled:vr,dir:xr,orientation:Er="vertical",...Cr}=mr,wr=$jFibJ$react.useRef(null),Rr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(wr,hr),kr=$1bf158f521e1b1b4$var$useCollection(gr),Br=$f631663db3294ace$export$b39126d51d94e6f3(xr)==="ltr",Hr=$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onKeyDown,Gr=>{var qr;if(!$1bf158f521e1b1b4$var$ACCORDION_KEYS.includes(Gr.key))return;const zr=Gr.target,Qr=kr().filter(Sn=>{var Cn;return!((Cn=Sn.ref.current)!==null&&Cn!==void 0&&Cn.disabled)}),sn=Qr.findIndex(Sn=>Sn.ref.current===zr),hn=Qr.length;if(sn===-1)return;Gr.preventDefault();let vn=sn;const yn=0,gn=hn-1,bn=()=>{vn=sn+1,vn>gn&&(vn=yn)},xn=()=>{vn=sn-1,vn<yn&&(vn=gn)};switch(Gr.key){case"Home":vn=yn;break;case"End":vn=gn;break;case"ArrowRight":Er==="horizontal"&&(Br?bn():xn());break;case"ArrowDown":Er==="vertical"&&bn();break;case"ArrowLeft":Er==="horizontal"&&(Br?xn():bn());break;case"ArrowUp":Er==="vertical"&&xn();break}const $n=vn%hn;(qr=Qr[$n].ref.current)===null||qr===void 0||qr.focus()});return $jFibJ$react.createElement($1bf158f521e1b1b4$var$AccordionImplProvider,{scope:gr,disabled:vr,direction:xr,orientation:Er},$jFibJ$react.createElement($1bf158f521e1b1b4$var$Collection.Slot,{scope:gr},$jFibJ$react.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$7({},Cr,{"data-orientation":Er,ref:Rr,onKeyDown:vr?void 0:Hr}))))}),$1bf158f521e1b1b4$var$ITEM_NAME="AccordionItem",[$1bf158f521e1b1b4$var$AccordionItemProvider,$1bf158f521e1b1b4$var$useAccordionItemContext]=$1bf158f521e1b1b4$var$createAccordionContext($1bf158f521e1b1b4$var$ITEM_NAME),$1bf158f521e1b1b4$export$d99097c13d4dac9f=$jFibJ$react.forwardRef((mr,hr)=>{const{__scopeAccordion:gr,value:vr,...xr}=mr,Er=$1bf158f521e1b1b4$var$useAccordionContext($1bf158f521e1b1b4$var$ITEM_NAME,gr),Cr=$1bf158f521e1b1b4$var$useAccordionValueContext($1bf158f521e1b1b4$var$ITEM_NAME,gr),wr=$1bf158f521e1b1b4$var$useCollapsibleScope(gr),Rr=$1746a345f3d73bb7$export$f680877a34711e37(),kr=vr&&Cr.value.includes(vr)||!1,Dr=Er.disabled||mr.disabled;return $jFibJ$react.createElement($1bf158f521e1b1b4$var$AccordionItemProvider,{scope:gr,open:kr,disabled:Dr,triggerId:Rr},$jFibJ$react.createElement($409067139f391064$export$be92b6f5f03c0fe9,_extends$7({"data-orientation":Er.orientation,"data-state":$1bf158f521e1b1b4$var$getState(kr)},wr,xr,{ref:hr,disabled:Dr,open:kr,onOpenChange:Br=>{Br?Cr.onItemOpen(vr):Cr.onItemClose(vr)}})))}),$1bf158f521e1b1b4$var$HEADER_NAME="AccordionHeader",$1bf158f521e1b1b4$export$5e3e5deaaf81ee41=$jFibJ$react.forwardRef((mr,hr)=>{const{__scopeAccordion:gr,...vr}=mr,xr=$1bf158f521e1b1b4$var$useAccordionContext($1bf158f521e1b1b4$var$ACCORDION_NAME,gr),Er=$1bf158f521e1b1b4$var$useAccordionItemContext($1bf158f521e1b1b4$var$HEADER_NAME,gr);return $jFibJ$react.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.h3,_extends$7({"data-orientation":xr.orientation,"data-state":$1bf158f521e1b1b4$var$getState(Er.open),"data-disabled":Er.disabled?"":void 0},vr,{ref:hr}))}),$1bf158f521e1b1b4$var$TRIGGER_NAME="AccordionTrigger",$1bf158f521e1b1b4$export$94e939b1f85bdd73=$jFibJ$react.forwardRef((mr,hr)=>{const{__scopeAccordion:gr,...vr}=mr,xr=$1bf158f521e1b1b4$var$useAccordionContext($1bf158f521e1b1b4$var$ACCORDION_NAME,gr),Er=$1bf158f521e1b1b4$var$useAccordionItemContext($1bf158f521e1b1b4$var$TRIGGER_NAME,gr),Cr=$1bf158f521e1b1b4$var$useAccordionCollapsibleContext($1bf158f521e1b1b4$var$TRIGGER_NAME,gr),wr=$1bf158f521e1b1b4$var$useCollapsibleScope(gr);return $jFibJ$react.createElement($1bf158f521e1b1b4$var$Collection.ItemSlot,{scope:gr},$jFibJ$react.createElement($409067139f391064$export$41fb9f06171c75f4,_extends$7({"aria-disabled":Er.open&&!Cr.collapsible||void 0,"data-orientation":xr.orientation,id:Er.triggerId},wr,vr,{ref:hr})))}),$1bf158f521e1b1b4$var$CONTENT_NAME="AccordionContent",$1bf158f521e1b1b4$export$985b9a77379b54a0=$jFibJ$react.forwardRef((mr,hr)=>{const{__scopeAccordion:gr,...vr}=mr,xr=$1bf158f521e1b1b4$var$useAccordionContext($1bf158f521e1b1b4$var$ACCORDION_NAME,gr),Er=$1bf158f521e1b1b4$var$useAccordionItemContext($1bf158f521e1b1b4$var$CONTENT_NAME,gr),Cr=$1bf158f521e1b1b4$var$useCollapsibleScope(gr);return $jFibJ$react.createElement($409067139f391064$export$7c6e2c02157bb7d2,_extends$7({role:"region","aria-labelledby":Er.triggerId,"data-orientation":xr.orientation},Cr,vr,{ref:hr,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...mr.style}}))});function $1bf158f521e1b1b4$var$getState(mr){return mr?"open":"closed"}const $1bf158f521e1b1b4$export$be92b6f5f03c0fe9=$1bf158f521e1b1b4$export$a766cd26d0d69044,$1bf158f521e1b1b4$export$6d08773d2e66f8f2=$1bf158f521e1b1b4$export$d99097c13d4dac9f,$1bf158f521e1b1b4$export$8b251419efc915eb=$1bf158f521e1b1b4$export$5e3e5deaaf81ee41,$1bf158f521e1b1b4$export$41fb9f06171c75f4=$1bf158f521e1b1b4$export$94e939b1f85bdd73,$1bf158f521e1b1b4$export$7c6e2c02157bb7d2=$1bf158f521e1b1b4$export$985b9a77379b54a0,$cddcb0b647441e34$var$AVATAR_NAME="Avatar",[$cddcb0b647441e34$var$createAvatarContext,$cddcb0b647441e34$export$90370d16b488820f]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($cddcb0b647441e34$var$AVATAR_NAME),[$cddcb0b647441e34$var$AvatarProvider,$cddcb0b647441e34$var$useAvatarContext]=$cddcb0b647441e34$var$createAvatarContext($cddcb0b647441e34$var$AVATAR_NAME),$cddcb0b647441e34$export$e2255cf6045e8d47=reactExports.forwardRef((mr,hr)=>{const{__scopeAvatar:gr,...vr}=mr,[xr,Er]=reactExports.useState("idle");return reactExports.createElement($cddcb0b647441e34$var$AvatarProvider,{scope:gr,imageLoadingStatus:xr,onImageLoadingStatusChange:Er},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.span,_extends$7({},vr,{ref:hr})))}),$cddcb0b647441e34$var$IMAGE_NAME="AvatarImage",$cddcb0b647441e34$export$2cd8ae1985206fe8=reactExports.forwardRef((mr,hr)=>{const{__scopeAvatar:gr,src:vr,onLoadingStatusChange:xr=()=>{},...Er}=mr,Cr=$cddcb0b647441e34$var$useAvatarContext($cddcb0b647441e34$var$IMAGE_NAME,gr),wr=$cddcb0b647441e34$var$useImageLoadingStatus(vr),Rr=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a$1(kr=>{xr(kr),Cr.onImageLoadingStatusChange(kr)});return $9f79659886946c16$export$e5c5a5f917a5871c(()=>{wr!=="idle"&&Rr(wr)},[wr,Rr]),wr==="loaded"?reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.img,_extends$7({},Er,{ref:hr,src:vr})):null}),$cddcb0b647441e34$var$FALLBACK_NAME="AvatarFallback",$cddcb0b647441e34$export$69fffb6a9571fbfe=reactExports.forwardRef((mr,hr)=>{const{__scopeAvatar:gr,delayMs:vr,...xr}=mr,Er=$cddcb0b647441e34$var$useAvatarContext($cddcb0b647441e34$var$FALLBACK_NAME,gr),[Cr,wr]=reactExports.useState(vr===void 0);return reactExports.useEffect(()=>{if(vr!==void 0){const Rr=window.setTimeout(()=>wr(!0),vr);return()=>window.clearTimeout(Rr)}},[vr]),Cr&&Er.imageLoadingStatus!=="loaded"?reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.span,_extends$7({},xr,{ref:hr})):null});function $cddcb0b647441e34$var$useImageLoadingStatus(mr){const[hr,gr]=reactExports.useState("idle");return $9f79659886946c16$export$e5c5a5f917a5871c(()=>{if(!mr){gr("error");return}let vr=!0;const xr=new window.Image,Er=Cr=>()=>{vr&&gr(Cr)};return gr("loading"),xr.onload=Er("loaded"),xr.onerror=Er("error"),xr.src=mr,()=>{vr=!1}},[mr]),hr}const $cddcb0b647441e34$export$be92b6f5f03c0fe9=$cddcb0b647441e34$export$e2255cf6045e8d47,$cddcb0b647441e34$export$3e431a229df88919=$cddcb0b647441e34$export$2cd8ae1985206fe8,$cddcb0b647441e34$export$fb8d7f40caaeea67=$cddcb0b647441e34$export$69fffb6a9571fbfe,$d7bdfb9eb0fdf311$var$ENTRY_FOCUS="rovingFocusGroup.onEntryFocus",$d7bdfb9eb0fdf311$var$EVENT_OPTIONS={bubbles:!1,cancelable:!0},$d7bdfb9eb0fdf311$var$GROUP_NAME="RovingFocusGroup",[$d7bdfb9eb0fdf311$var$Collection,$d7bdfb9eb0fdf311$var$useCollection,$d7bdfb9eb0fdf311$var$createCollectionScope]=$e02a7d9cb1dc128c$export$c74125a8e3af6bb2($d7bdfb9eb0fdf311$var$GROUP_NAME),[$d7bdfb9eb0fdf311$var$createRovingFocusGroupContext,$d7bdfb9eb0fdf311$export$c7109489551a4f4]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($d7bdfb9eb0fdf311$var$GROUP_NAME,[$d7bdfb9eb0fdf311$var$createCollectionScope]),[$d7bdfb9eb0fdf311$var$RovingFocusProvider,$d7bdfb9eb0fdf311$var$useRovingFocusContext]=$d7bdfb9eb0fdf311$var$createRovingFocusGroupContext($d7bdfb9eb0fdf311$var$GROUP_NAME),$d7bdfb9eb0fdf311$export$8699f7c8af148338=reactExports.forwardRef((mr,hr)=>reactExports.createElement($d7bdfb9eb0fdf311$var$Collection.Provider,{scope:mr.__scopeRovingFocusGroup},reactExports.createElement($d7bdfb9eb0fdf311$var$Collection.Slot,{scope:mr.__scopeRovingFocusGroup},reactExports.createElement($d7bdfb9eb0fdf311$var$RovingFocusGroupImpl,_extends$7({},mr,{ref:hr}))))),$d7bdfb9eb0fdf311$var$RovingFocusGroupImpl=reactExports.forwardRef((mr,hr)=>{const{__scopeRovingFocusGroup:gr,orientation:vr,loop:xr=!1,dir:Er,currentTabStopId:Cr,defaultCurrentTabStopId:wr,onCurrentTabStopIdChange:Rr,onEntryFocus:kr,...Dr}=mr,Br=reactExports.useRef(null),Hr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(hr,Br),Gr=$f631663db3294ace$export$b39126d51d94e6f3(Er),[qr=null,zr]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:Cr,defaultProp:wr,onChange:Rr}),[Qr,sn]=reactExports.useState(!1),hn=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a$1(kr),vn=$d7bdfb9eb0fdf311$var$useCollection(gr),yn=reactExports.useRef(!1),[gn,bn]=reactExports.useState(0);return reactExports.useEffect(()=>{const xn=Br.current;if(xn)return xn.addEventListener($d7bdfb9eb0fdf311$var$ENTRY_FOCUS,hn),()=>xn.removeEventListener($d7bdfb9eb0fdf311$var$ENTRY_FOCUS,hn)},[hn]),reactExports.createElement($d7bdfb9eb0fdf311$var$RovingFocusProvider,{scope:gr,orientation:vr,dir:Gr,loop:xr,currentTabStopId:qr,onItemFocus:reactExports.useCallback(xn=>zr(xn),[zr]),onItemShiftTab:reactExports.useCallback(()=>sn(!0),[]),onFocusableItemAdd:reactExports.useCallback(()=>bn(xn=>xn+1),[]),onFocusableItemRemove:reactExports.useCallback(()=>bn(xn=>xn-1),[])},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$7({tabIndex:Qr||gn===0?-1:0,"data-orientation":vr},Dr,{ref:Hr,style:{outline:"none",...mr.style},onMouseDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onMouseDown,()=>{yn.current=!0}),onFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onFocus,xn=>{const $n=!yn.current;if(xn.target===xn.currentTarget&&$n&&!Qr){const Sn=new CustomEvent($d7bdfb9eb0fdf311$var$ENTRY_FOCUS,$d7bdfb9eb0fdf311$var$EVENT_OPTIONS);if(xn.currentTarget.dispatchEvent(Sn),!Sn.defaultPrevented){const Cn=vn().filter(Gn=>Gn.focusable),Rn=Cn.find(Gn=>Gn.active),Bn=Cn.find(Gn=>Gn.id===qr),Hn=[Rn,Bn,...Cn].filter(Boolean).map(Gn=>Gn.ref.current);$d7bdfb9eb0fdf311$var$focusFirst(Hn)}}yn.current=!1}),onBlur:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onBlur,()=>sn(!1))})))}),$d7bdfb9eb0fdf311$var$ITEM_NAME="RovingFocusGroupItem",$d7bdfb9eb0fdf311$export$ab9df7c53fe8454=reactExports.forwardRef((mr,hr)=>{const{__scopeRovingFocusGroup:gr,focusable:vr=!0,active:xr=!1,tabStopId:Er,...Cr}=mr,wr=$1746a345f3d73bb7$export$f680877a34711e37(),Rr=Er||wr,kr=$d7bdfb9eb0fdf311$var$useRovingFocusContext($d7bdfb9eb0fdf311$var$ITEM_NAME,gr),Dr=kr.currentTabStopId===Rr,Br=$d7bdfb9eb0fdf311$var$useCollection(gr),{onFocusableItemAdd:Hr,onFocusableItemRemove:Gr}=kr;return reactExports.useEffect(()=>{if(vr)return Hr(),()=>Gr()},[vr,Hr,Gr]),reactExports.createElement($d7bdfb9eb0fdf311$var$Collection.ItemSlot,{scope:gr,id:Rr,focusable:vr,active:xr},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.span,_extends$7({tabIndex:Dr?0:-1,"data-orientation":kr.orientation},Cr,{ref:hr,onMouseDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onMouseDown,qr=>{vr?kr.onItemFocus(Rr):qr.preventDefault()}),onFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onFocus,()=>kr.onItemFocus(Rr)),onKeyDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onKeyDown,qr=>{if(qr.key==="Tab"&&qr.shiftKey){kr.onItemShiftTab();return}if(qr.target!==qr.currentTarget)return;const zr=$d7bdfb9eb0fdf311$var$getFocusIntent(qr,kr.orientation,kr.dir);if(zr!==void 0){qr.preventDefault();let sn=Br().filter(hn=>hn.focusable).map(hn=>hn.ref.current);if(zr==="last")sn.reverse();else if(zr==="prev"||zr==="next"){zr==="prev"&&sn.reverse();const hn=sn.indexOf(qr.currentTarget);sn=kr.loop?$d7bdfb9eb0fdf311$var$wrapArray(sn,hn+1):sn.slice(hn+1)}setTimeout(()=>$d7bdfb9eb0fdf311$var$focusFirst(sn))}})})))}),$d7bdfb9eb0fdf311$var$MAP_KEY_TO_FOCUS_INTENT={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function $d7bdfb9eb0fdf311$var$getDirectionAwareKey(mr,hr){return hr!=="rtl"?mr:mr==="ArrowLeft"?"ArrowRight":mr==="ArrowRight"?"ArrowLeft":mr}function $d7bdfb9eb0fdf311$var$getFocusIntent(mr,hr,gr){const vr=$d7bdfb9eb0fdf311$var$getDirectionAwareKey(mr.key,gr);if(!(hr==="vertical"&&["ArrowLeft","ArrowRight"].includes(vr))&&!(hr==="horizontal"&&["ArrowUp","ArrowDown"].includes(vr)))return $d7bdfb9eb0fdf311$var$MAP_KEY_TO_FOCUS_INTENT[vr]}function $d7bdfb9eb0fdf311$var$focusFirst(mr){const hr=document.activeElement;for(const gr of mr)if(gr===hr||(gr.focus(),document.activeElement!==hr))return}function $d7bdfb9eb0fdf311$var$wrapArray(mr,hr){return mr.map((gr,vr)=>mr[(hr+vr)%mr.length])}const $d7bdfb9eb0fdf311$export$be92b6f5f03c0fe9=$d7bdfb9eb0fdf311$export$8699f7c8af148338,$d7bdfb9eb0fdf311$export$6d08773d2e66f8f2=$d7bdfb9eb0fdf311$export$ab9df7c53fe8454;var effectCar$3=createSidecarMedium(),nothing$3=function(){},RemoveScroll$3=reactExports.forwardRef(function(mr,hr){var gr=reactExports.useRef(null),vr=reactExports.useState({onScrollCapture:nothing$3,onWheelCapture:nothing$3,onTouchMoveCapture:nothing$3}),xr=vr[0],Er=vr[1],Cr=mr.forwardProps,wr=mr.children,Rr=mr.className,kr=mr.removeScrollBar,Dr=mr.enabled,Br=mr.shards,Hr=mr.sideCar,Gr=mr.noIsolation,qr=mr.inert,zr=mr.allowPinchZoom,Qr=mr.as,sn=Qr===void 0?"div":Qr,hn=__rest(mr,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),vn=Hr,yn=useMergeRefs([gr,hr]),gn=__assign(__assign({},hn),xr);return reactExports.createElement(reactExports.Fragment,null,Dr&&reactExports.createElement(vn,{sideCar:effectCar$3,removeScrollBar:kr,shards:Br,noIsolation:Gr,inert:qr,setCallbacks:Er,allowPinchZoom:!!zr,lockRef:gr}),Cr?reactExports.cloneElement(reactExports.Children.only(wr),__assign(__assign({},gn),{ref:yn})):reactExports.createElement(sn,__assign({},gn,{className:Rr,ref:yn}),wr))});RemoveScroll$3.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};RemoveScroll$3.classNames={fullWidth:fullWidthClassName,zeroRight:zeroRightClassName};var passiveSupported$3=!1;if(typeof window<"u")try{var options$4=Object.defineProperty({},"passive",{get:function(){return passiveSupported$3=!0,!0}});window.addEventListener("test",options$4,options$4),window.removeEventListener("test",options$4,options$4)}catch{passiveSupported$3=!1}var nonPassive$3=passiveSupported$3?{passive:!1}:!1,alwaysContainsScroll$3=function(mr){return mr.tagName==="TEXTAREA"},elementCanBeScrolled$3=function(mr,hr){var gr=window.getComputedStyle(mr);return gr[hr]!=="hidden"&&!(gr.overflowY===gr.overflowX&&!alwaysContainsScroll$3(mr)&&gr[hr]==="visible")},elementCouldBeVScrolled$3=function(mr){return elementCanBeScrolled$3(mr,"overflowY")},elementCouldBeHScrolled$3=function(mr){return elementCanBeScrolled$3(mr,"overflowX")},locationCouldBeScrolled$3=function(mr,hr){var gr=hr;do{typeof ShadowRoot<"u"&&gr instanceof ShadowRoot&&(gr=gr.host);var vr=elementCouldBeScrolled$3(mr,gr);if(vr){var xr=getScrollVariables$3(mr,gr),Er=xr[1],Cr=xr[2];if(Er>Cr)return!0}gr=gr.parentNode}while(gr&&gr!==document.body);return!1},getVScrollVariables$3=function(mr){var hr=mr.scrollTop,gr=mr.scrollHeight,vr=mr.clientHeight;return[hr,gr,vr]},getHScrollVariables$3=function(mr){var hr=mr.scrollLeft,gr=mr.scrollWidth,vr=mr.clientWidth;return[hr,gr,vr]},elementCouldBeScrolled$3=function(mr,hr){return mr==="v"?elementCouldBeVScrolled$3(hr):elementCouldBeHScrolled$3(hr)},getScrollVariables$3=function(mr,hr){return mr==="v"?getVScrollVariables$3(hr):getHScrollVariables$3(hr)},getDirectionFactor$3=function(mr,hr){return mr==="h"&&hr==="rtl"?-1:1},handleScroll$3=function(mr,hr,gr,vr,xr){var Er=getDirectionFactor$3(mr,window.getComputedStyle(hr).direction),Cr=Er*vr,wr=gr.target,Rr=hr.contains(wr),kr=!1,Dr=Cr>0,Br=0,Hr=0;do{var Gr=getScrollVariables$3(mr,wr),qr=Gr[0],zr=Gr[1],Qr=Gr[2],sn=zr-Qr-Er*qr;(qr||sn)&&elementCouldBeScrolled$3(mr,wr)&&(Br+=sn,Hr+=qr),wr=wr.parentNode}while(!Rr&&wr!==document.body||Rr&&(hr.contains(wr)||hr===wr));return(Dr&&(Br===0||!xr)||!Dr&&(Hr===0||!xr))&&(kr=!0),kr},getTouchXY$3=function(mr){return"changedTouches"in mr?[mr.changedTouches[0].clientX,mr.changedTouches[0].clientY]:[0,0]},getDeltaXY$3=function(mr){return[mr.deltaX,mr.deltaY]},extractRef$3=function(mr){return mr&&"current"in mr?mr.current:mr},deltaCompare$3=function(mr,hr){return mr[0]===hr[0]&&mr[1]===hr[1]},generateStyle$3=function(mr){return`
  .block-interactivity-`.concat(mr,` {pointer-events: none;}
  .allow-interactivity-`).concat(mr,` {pointer-events: all;}
`)},idCounter$3=0,lockStack$3=[];function RemoveScrollSideCar$3(mr){var hr=reactExports.useRef([]),gr=reactExports.useRef([0,0]),vr=reactExports.useRef(),xr=reactExports.useState(idCounter$3++)[0],Er=reactExports.useState(function(){return styleSingleton()})[0],Cr=reactExports.useRef(mr);reactExports.useEffect(function(){Cr.current=mr},[mr]),reactExports.useEffect(function(){if(mr.inert){document.body.classList.add("block-interactivity-".concat(xr));var zr=__spreadArray$4([mr.lockRef.current],(mr.shards||[]).map(extractRef$3),!0).filter(Boolean);return zr.forEach(function(Qr){return Qr.classList.add("allow-interactivity-".concat(xr))}),function(){document.body.classList.remove("block-interactivity-".concat(xr)),zr.forEach(function(Qr){return Qr.classList.remove("allow-interactivity-".concat(xr))})}}},[mr.inert,mr.lockRef.current,mr.shards]);var wr=reactExports.useCallback(function(zr,Qr){if("touches"in zr&&zr.touches.length===2)return!Cr.current.allowPinchZoom;var sn=getTouchXY$3(zr),hn=gr.current,vn="deltaX"in zr?zr.deltaX:hn[0]-sn[0],yn="deltaY"in zr?zr.deltaY:hn[1]-sn[1],gn,bn=zr.target,xn=Math.abs(vn)>Math.abs(yn)?"h":"v";if("touches"in zr&&xn==="h"&&bn.type==="range")return!1;var $n=locationCouldBeScrolled$3(xn,bn);if(!$n)return!0;if($n?gn=xn:(gn=xn==="v"?"h":"v",$n=locationCouldBeScrolled$3(xn,bn)),!$n)return!1;if(!vr.current&&"changedTouches"in zr&&(vn||yn)&&(vr.current=gn),!gn)return!0;var Sn=vr.current||gn;return handleScroll$3(Sn,Qr,zr,Sn==="h"?vn:yn,!0)},[]),Rr=reactExports.useCallback(function(zr){var Qr=zr;if(!(!lockStack$3.length||lockStack$3[lockStack$3.length-1]!==Er)){var sn="deltaY"in Qr?getDeltaXY$3(Qr):getTouchXY$3(Qr),hn=hr.current.filter(function(gn){return gn.name===Qr.type&&gn.target===Qr.target&&deltaCompare$3(gn.delta,sn)})[0];if(hn&&hn.should){Qr.cancelable&&Qr.preventDefault();return}if(!hn){var vn=(Cr.current.shards||[]).map(extractRef$3).filter(Boolean).filter(function(gn){return gn.contains(Qr.target)}),yn=vn.length>0?wr(Qr,vn[0]):!Cr.current.noIsolation;yn&&Qr.cancelable&&Qr.preventDefault()}}},[]),kr=reactExports.useCallback(function(zr,Qr,sn,hn){var vn={name:zr,delta:Qr,target:sn,should:hn};hr.current.push(vn),setTimeout(function(){hr.current=hr.current.filter(function(yn){return yn!==vn})},1)},[]),Dr=reactExports.useCallback(function(zr){gr.current=getTouchXY$3(zr),vr.current=void 0},[]),Br=reactExports.useCallback(function(zr){kr(zr.type,getDeltaXY$3(zr),zr.target,wr(zr,mr.lockRef.current))},[]),Hr=reactExports.useCallback(function(zr){kr(zr.type,getTouchXY$3(zr),zr.target,wr(zr,mr.lockRef.current))},[]);reactExports.useEffect(function(){return lockStack$3.push(Er),mr.setCallbacks({onScrollCapture:Br,onWheelCapture:Br,onTouchMoveCapture:Hr}),document.addEventListener("wheel",Rr,nonPassive$3),document.addEventListener("touchmove",Rr,nonPassive$3),document.addEventListener("touchstart",Dr,nonPassive$3),function(){lockStack$3=lockStack$3.filter(function(zr){return zr!==Er}),document.removeEventListener("wheel",Rr,nonPassive$3),document.removeEventListener("touchmove",Rr,nonPassive$3),document.removeEventListener("touchstart",Dr,nonPassive$3)}},[]);var Gr=mr.removeScrollBar,qr=mr.inert;return reactExports.createElement(reactExports.Fragment,null,qr?reactExports.createElement(Er,{styles:generateStyle$3(xr)}):null,Gr?reactExports.createElement(RemoveScrollBar,{gapMode:"margin"}):null)}const SideCar$3=exportSidecar(effectCar$3,RemoveScrollSideCar$3);var ReactRemoveScroll$3=reactExports.forwardRef(function(mr,hr){return reactExports.createElement(RemoveScroll$3,__assign({},mr,{ref:hr,sideCar:SideCar$3}))});ReactRemoveScroll$3.classNames=RemoveScroll$3.classNames;const $6cc32821e9371a1c$var$SELECTION_KEYS=["Enter"," "],$6cc32821e9371a1c$var$FIRST_KEYS=["ArrowDown","PageUp","Home"],$6cc32821e9371a1c$var$LAST_KEYS=["ArrowUp","PageDown","End"],$6cc32821e9371a1c$var$FIRST_LAST_KEYS=[...$6cc32821e9371a1c$var$FIRST_KEYS,...$6cc32821e9371a1c$var$LAST_KEYS],$6cc32821e9371a1c$var$SUB_OPEN_KEYS={ltr:[...$6cc32821e9371a1c$var$SELECTION_KEYS,"ArrowRight"],rtl:[...$6cc32821e9371a1c$var$SELECTION_KEYS,"ArrowLeft"]},$6cc32821e9371a1c$var$SUB_CLOSE_KEYS={ltr:["ArrowLeft"],rtl:["ArrowRight"]},$6cc32821e9371a1c$var$MENU_NAME="Menu",[$6cc32821e9371a1c$var$Collection,$6cc32821e9371a1c$var$useCollection,$6cc32821e9371a1c$var$createCollectionScope]=$e02a7d9cb1dc128c$export$c74125a8e3af6bb2($6cc32821e9371a1c$var$MENU_NAME),[$6cc32821e9371a1c$var$createMenuContext,$6cc32821e9371a1c$export$4027731b685e72eb]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($6cc32821e9371a1c$var$MENU_NAME,[$6cc32821e9371a1c$var$createCollectionScope,$cf1ac5d9fe0e8206$export$722aac194ae923,$d7bdfb9eb0fdf311$export$c7109489551a4f4]),$6cc32821e9371a1c$var$usePopperScope=$cf1ac5d9fe0e8206$export$722aac194ae923(),$6cc32821e9371a1c$var$useRovingFocusGroupScope=$d7bdfb9eb0fdf311$export$c7109489551a4f4(),[$6cc32821e9371a1c$var$MenuProvider,$6cc32821e9371a1c$var$useMenuContext]=$6cc32821e9371a1c$var$createMenuContext($6cc32821e9371a1c$var$MENU_NAME),[$6cc32821e9371a1c$var$MenuRootProvider,$6cc32821e9371a1c$var$useMenuRootContext]=$6cc32821e9371a1c$var$createMenuContext($6cc32821e9371a1c$var$MENU_NAME),$6cc32821e9371a1c$export$d9b273488cd8ce6f=mr=>{const{__scopeMenu:hr,open:gr=!1,children:vr,dir:xr,onOpenChange:Er,modal:Cr=!0}=mr,wr=$6cc32821e9371a1c$var$usePopperScope(hr),[Rr,kr]=reactExports.useState(null),Dr=reactExports.useRef(!1),Br=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a$1(Er),Hr=$f631663db3294ace$export$b39126d51d94e6f3(xr);return reactExports.useEffect(()=>{const Gr=()=>{Dr.current=!0,document.addEventListener("pointerdown",qr,{capture:!0,once:!0}),document.addEventListener("pointermove",qr,{capture:!0,once:!0})},qr=()=>Dr.current=!1;return document.addEventListener("keydown",Gr,{capture:!0}),()=>{document.removeEventListener("keydown",Gr,{capture:!0}),document.removeEventListener("pointerdown",qr,{capture:!0}),document.removeEventListener("pointermove",qr,{capture:!0})}},[]),reactExports.createElement($cf1ac5d9fe0e8206$export$be92b6f5f03c0fe9,wr,reactExports.createElement($6cc32821e9371a1c$var$MenuProvider,{scope:hr,open:gr,onOpenChange:Br,content:Rr,onContentChange:kr},reactExports.createElement($6cc32821e9371a1c$var$MenuRootProvider,{scope:hr,onClose:reactExports.useCallback(()=>Br(!1),[Br]),isUsingKeyboardRef:Dr,dir:Hr,modal:Cr},vr)))},$6cc32821e9371a1c$export$9fa5ebd18bee4d43=reactExports.forwardRef((mr,hr)=>{const{__scopeMenu:gr,...vr}=mr,xr=$6cc32821e9371a1c$var$usePopperScope(gr);return reactExports.createElement($cf1ac5d9fe0e8206$export$b688253958b8dfe7,_extends$7({},xr,vr,{ref:hr}))}),$6cc32821e9371a1c$var$PORTAL_NAME="MenuPortal",[$6cc32821e9371a1c$var$PortalProvider,$6cc32821e9371a1c$var$usePortalContext]=$6cc32821e9371a1c$var$createMenuContext($6cc32821e9371a1c$var$PORTAL_NAME,{forceMount:void 0}),$6cc32821e9371a1c$export$793392f970497feb=mr=>{const{__scopeMenu:hr,forceMount:gr,children:vr,container:xr}=mr,Er=$6cc32821e9371a1c$var$useMenuContext($6cc32821e9371a1c$var$PORTAL_NAME,hr);return reactExports.createElement($6cc32821e9371a1c$var$PortalProvider,{scope:hr,forceMount:gr},reactExports.createElement($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:gr||Er.open},reactExports.createElement($f1701beae083dbae$export$602eac185826482c,{asChild:!0,container:xr},vr)))},$6cc32821e9371a1c$var$CONTENT_NAME="MenuContent",[$6cc32821e9371a1c$var$MenuContentProvider,$6cc32821e9371a1c$var$useMenuContentContext]=$6cc32821e9371a1c$var$createMenuContext($6cc32821e9371a1c$var$CONTENT_NAME),$6cc32821e9371a1c$export$479f0f2f71193efe=reactExports.forwardRef((mr,hr)=>{const gr=$6cc32821e9371a1c$var$usePortalContext($6cc32821e9371a1c$var$CONTENT_NAME,mr.__scopeMenu),{forceMount:vr=gr.forceMount,...xr}=mr,Er=$6cc32821e9371a1c$var$useMenuContext($6cc32821e9371a1c$var$CONTENT_NAME,mr.__scopeMenu),Cr=$6cc32821e9371a1c$var$useMenuRootContext($6cc32821e9371a1c$var$CONTENT_NAME,mr.__scopeMenu);return reactExports.createElement($6cc32821e9371a1c$var$Collection.Provider,{scope:mr.__scopeMenu},reactExports.createElement($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:vr||Er.open},reactExports.createElement($6cc32821e9371a1c$var$Collection.Slot,{scope:mr.__scopeMenu},Cr.modal?reactExports.createElement($6cc32821e9371a1c$var$MenuRootContentModal,_extends$7({},xr,{ref:hr})):reactExports.createElement($6cc32821e9371a1c$var$MenuRootContentNonModal,_extends$7({},xr,{ref:hr})))))}),$6cc32821e9371a1c$var$MenuRootContentModal=reactExports.forwardRef((mr,hr)=>{const gr=$6cc32821e9371a1c$var$useMenuContext($6cc32821e9371a1c$var$CONTENT_NAME,mr.__scopeMenu),vr=reactExports.useRef(null),xr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(hr,vr);return reactExports.useEffect(()=>{const Er=vr.current;if(Er)return hideOthers(Er)},[]),reactExports.createElement($6cc32821e9371a1c$var$MenuContentImpl,_extends$7({},mr,{ref:xr,trapFocus:gr.open,disableOutsidePointerEvents:gr.open,disableOutsideScroll:!0,onFocusOutside:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onFocusOutside,Er=>Er.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>gr.onOpenChange(!1)}))}),$6cc32821e9371a1c$var$MenuRootContentNonModal=reactExports.forwardRef((mr,hr)=>{const gr=$6cc32821e9371a1c$var$useMenuContext($6cc32821e9371a1c$var$CONTENT_NAME,mr.__scopeMenu);return reactExports.createElement($6cc32821e9371a1c$var$MenuContentImpl,_extends$7({},mr,{ref:hr,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>gr.onOpenChange(!1)}))}),$6cc32821e9371a1c$var$MenuContentImpl=reactExports.forwardRef((mr,hr)=>{const{__scopeMenu:gr,loop:vr=!1,trapFocus:xr,onOpenAutoFocus:Er,onCloseAutoFocus:Cr,disableOutsidePointerEvents:wr,onEntryFocus:Rr,onEscapeKeyDown:kr,onPointerDownOutside:Dr,onFocusOutside:Br,onInteractOutside:Hr,onDismiss:Gr,disableOutsideScroll:qr,...zr}=mr,Qr=$6cc32821e9371a1c$var$useMenuContext($6cc32821e9371a1c$var$CONTENT_NAME,gr),sn=$6cc32821e9371a1c$var$useMenuRootContext($6cc32821e9371a1c$var$CONTENT_NAME,gr),hn=$6cc32821e9371a1c$var$usePopperScope(gr),vn=$6cc32821e9371a1c$var$useRovingFocusGroupScope(gr),yn=$6cc32821e9371a1c$var$useCollection(gr),[gn,bn]=reactExports.useState(null),xn=reactExports.useRef(null),$n=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(hr,xn,Qr.onContentChange),Sn=reactExports.useRef(0),Cn=reactExports.useRef(""),Rn=reactExports.useRef(0),Bn=reactExports.useRef(null),Fn=reactExports.useRef("right"),Hn=reactExports.useRef(0),Gn=qr?ReactRemoveScroll$3:reactExports.Fragment,qn=qr?{as:$5e63c961fc1ce211$export$8c6ed5c666ac1360,allowPinchZoom:!0}:void 0,On=_n=>{var Tn,Mn;const Ln=Cn.current+_n,jn=yn().filter(Vn=>!Vn.disabled),Kn=document.activeElement,Nn=(Tn=jn.find(Vn=>Vn.ref.current===Kn))===null||Tn===void 0?void 0:Tn.textValue,An=jn.map(Vn=>Vn.textValue),kn=$6cc32821e9371a1c$var$getNextMatch(An,Ln,Nn),Dn=(Mn=jn.find(Vn=>Vn.textValue===kn))===null||Mn===void 0?void 0:Mn.ref.current;(function Vn(zn){Cn.current=zn,window.clearTimeout(Sn.current),zn!==""&&(Sn.current=window.setTimeout(()=>Vn(""),1e3))})(Ln),Dn&&setTimeout(()=>Dn.focus())};reactExports.useEffect(()=>()=>window.clearTimeout(Sn.current),[]),$3db38b7d1fb3fe6a$export$b7ece24a22aeda8c$1();const wn=reactExports.useCallback(_n=>{var Tn,Mn;return Fn.current===((Tn=Bn.current)===null||Tn===void 0?void 0:Tn.side)&&$6cc32821e9371a1c$var$isPointerInGraceArea(_n,(Mn=Bn.current)===null||Mn===void 0?void 0:Mn.area)},[]);return reactExports.createElement($6cc32821e9371a1c$var$MenuContentProvider,{scope:gr,searchRef:Cn,onItemEnter:reactExports.useCallback(_n=>{wn(_n)&&_n.preventDefault()},[wn]),onItemLeave:reactExports.useCallback(_n=>{var Tn;wn(_n)||((Tn=xn.current)===null||Tn===void 0||Tn.focus(),bn(null))},[wn]),onTriggerLeave:reactExports.useCallback(_n=>{wn(_n)&&_n.preventDefault()},[wn]),pointerGraceTimerRef:Rn,onPointerGraceIntentChange:reactExports.useCallback(_n=>{Bn.current=_n},[])},reactExports.createElement(Gn,qn,reactExports.createElement($d3863c46a17e8a28$export$20e40289641fbbb6,{asChild:!0,trapped:xr,onMountAutoFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Er,_n=>{var Tn;_n.preventDefault(),(Tn=xn.current)===null||Tn===void 0||Tn.focus()}),onUnmountAutoFocus:Cr},reactExports.createElement($5cb92bef7577960e$export$177fb62ff3ec1f22,{asChild:!0,disableOutsidePointerEvents:wr,onEscapeKeyDown:kr,onPointerDownOutside:Dr,onFocusOutside:Br,onInteractOutside:Hr,onDismiss:Gr},reactExports.createElement($d7bdfb9eb0fdf311$export$be92b6f5f03c0fe9,_extends$7({asChild:!0},vn,{dir:sn.dir,orientation:"vertical",loop:vr,currentTabStopId:gn,onCurrentTabStopIdChange:bn,onEntryFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Rr,_n=>{sn.isUsingKeyboardRef.current||_n.preventDefault()})}),reactExports.createElement($cf1ac5d9fe0e8206$export$7c6e2c02157bb7d2,_extends$7({role:"menu","aria-orientation":"vertical","data-state":$6cc32821e9371a1c$var$getOpenState(Qr.open),"data-radix-menu-content":"",dir:sn.dir},hn,zr,{ref:$n,style:{outline:"none",...zr.style},onKeyDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(zr.onKeyDown,_n=>{const Mn=_n.target.closest("[data-radix-menu-content]")===_n.currentTarget,Ln=_n.ctrlKey||_n.altKey||_n.metaKey,jn=_n.key.length===1;Mn&&(_n.key==="Tab"&&_n.preventDefault(),!Ln&&jn&&On(_n.key));const Kn=xn.current;if(_n.target!==Kn||!$6cc32821e9371a1c$var$FIRST_LAST_KEYS.includes(_n.key))return;_n.preventDefault();const An=yn().filter(kn=>!kn.disabled).map(kn=>kn.ref.current);$6cc32821e9371a1c$var$LAST_KEYS.includes(_n.key)&&An.reverse(),$6cc32821e9371a1c$var$focusFirst(An)}),onBlur:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onBlur,_n=>{_n.currentTarget.contains(_n.target)||(window.clearTimeout(Sn.current),Cn.current="")}),onPointerMove:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onPointerMove,$6cc32821e9371a1c$var$whenMouse(_n=>{const Tn=_n.target,Mn=Hn.current!==_n.clientX;if(_n.currentTarget.contains(Tn)&&Mn){const Ln=_n.clientX>Hn.current?"right":"left";Fn.current=Ln,Hn.current=_n.clientX}}))})))))))}),$6cc32821e9371a1c$export$dd37bec0e8a99143=reactExports.forwardRef((mr,hr)=>{const{__scopeMenu:gr,...vr}=mr;return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$7({},vr,{ref:hr}))}),$6cc32821e9371a1c$var$ITEM_NAME="MenuItem",$6cc32821e9371a1c$var$ITEM_SELECT="menu.itemSelect",$6cc32821e9371a1c$export$2ce376c2cc3355c8=reactExports.forwardRef((mr,hr)=>{const{disabled:gr=!1,onSelect:vr,...xr}=mr,Er=reactExports.useRef(null),Cr=$6cc32821e9371a1c$var$useMenuRootContext($6cc32821e9371a1c$var$ITEM_NAME,mr.__scopeMenu),wr=$6cc32821e9371a1c$var$useMenuContentContext($6cc32821e9371a1c$var$ITEM_NAME,mr.__scopeMenu),Rr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(hr,Er),kr=reactExports.useRef(!1),Dr=()=>{const Br=Er.current;if(!gr&&Br){const Hr=new CustomEvent($6cc32821e9371a1c$var$ITEM_SELECT,{bubbles:!0,cancelable:!0});Br.addEventListener($6cc32821e9371a1c$var$ITEM_SELECT,Gr=>vr?.(Gr),{once:!0}),$8927f6f2acc4f386$export$6d1a0317bde7de7f(Br,Hr),Hr.defaultPrevented?kr.current=!1:Cr.onClose()}};return reactExports.createElement($6cc32821e9371a1c$var$MenuItemImpl,_extends$7({},xr,{ref:Rr,disabled:gr,onClick:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onClick,Dr),onPointerDown:Br=>{var Hr;(Hr=mr.onPointerDown)===null||Hr===void 0||Hr.call(mr,Br),kr.current=!0},onPointerUp:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onPointerUp,Br=>{var Hr;kr.current||(Hr=Br.currentTarget)===null||Hr===void 0||Hr.click()}),onKeyDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onKeyDown,Br=>{const Hr=wr.searchRef.current!=="";gr||Hr&&Br.key===" "||$6cc32821e9371a1c$var$SELECTION_KEYS.includes(Br.key)&&(Br.currentTarget.click(),Br.preventDefault())})}))}),$6cc32821e9371a1c$var$MenuItemImpl=reactExports.forwardRef((mr,hr)=>{const{__scopeMenu:gr,disabled:vr=!1,textValue:xr,...Er}=mr,Cr=$6cc32821e9371a1c$var$useMenuContentContext($6cc32821e9371a1c$var$ITEM_NAME,gr),wr=$6cc32821e9371a1c$var$useRovingFocusGroupScope(gr),Rr=reactExports.useRef(null),kr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(hr,Rr),[Dr,Br]=reactExports.useState(!1),[Hr,Gr]=reactExports.useState("");return reactExports.useEffect(()=>{const qr=Rr.current;if(qr){var zr;Gr(((zr=qr.textContent)!==null&&zr!==void 0?zr:"").trim())}},[Er.children]),reactExports.createElement($6cc32821e9371a1c$var$Collection.ItemSlot,{scope:gr,disabled:vr,textValue:xr??Hr},reactExports.createElement($d7bdfb9eb0fdf311$export$6d08773d2e66f8f2,_extends$7({asChild:!0},wr,{focusable:!vr}),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$7({role:"menuitem","data-highlighted":Dr?"":void 0,"aria-disabled":vr||void 0,"data-disabled":vr?"":void 0},Er,{ref:kr,onPointerMove:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onPointerMove,$6cc32821e9371a1c$var$whenMouse(qr=>{vr?Cr.onItemLeave(qr):(Cr.onItemEnter(qr),qr.defaultPrevented||qr.currentTarget.focus())})),onPointerLeave:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onPointerLeave,$6cc32821e9371a1c$var$whenMouse(qr=>Cr.onItemLeave(qr))),onFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onFocus,()=>Br(!0)),onBlur:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onBlur,()=>Br(!1))}))))}),$6cc32821e9371a1c$var$RADIO_GROUP_NAME="MenuRadioGroup";$6cc32821e9371a1c$var$createMenuContext($6cc32821e9371a1c$var$RADIO_GROUP_NAME,{value:void 0,onValueChange:()=>{}});const $6cc32821e9371a1c$var$ITEM_INDICATOR_NAME="MenuItemIndicator";$6cc32821e9371a1c$var$createMenuContext($6cc32821e9371a1c$var$ITEM_INDICATOR_NAME,{checked:!1});const $6cc32821e9371a1c$var$SUB_NAME="MenuSub",[$6cc32821e9371a1c$var$MenuSubProvider,$6cc32821e9371a1c$var$useMenuSubContext]=$6cc32821e9371a1c$var$createMenuContext($6cc32821e9371a1c$var$SUB_NAME),$6cc32821e9371a1c$export$71bdb9d1e2909932=mr=>{const{__scopeMenu:hr,children:gr,open:vr=!1,onOpenChange:xr}=mr,Er=$6cc32821e9371a1c$var$useMenuContext($6cc32821e9371a1c$var$SUB_NAME,hr),Cr=$6cc32821e9371a1c$var$usePopperScope(hr),[wr,Rr]=reactExports.useState(null),[kr,Dr]=reactExports.useState(null),Br=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a$1(xr);return reactExports.useEffect(()=>(Er.open===!1&&Br(!1),()=>Br(!1)),[Er.open,Br]),reactExports.createElement($cf1ac5d9fe0e8206$export$be92b6f5f03c0fe9,Cr,reactExports.createElement($6cc32821e9371a1c$var$MenuProvider,{scope:hr,open:vr,onOpenChange:Br,content:kr,onContentChange:Dr},reactExports.createElement($6cc32821e9371a1c$var$MenuSubProvider,{scope:hr,contentId:$1746a345f3d73bb7$export$f680877a34711e37(),triggerId:$1746a345f3d73bb7$export$f680877a34711e37(),trigger:wr,onTriggerChange:Rr},gr)))},$6cc32821e9371a1c$var$SUB_TRIGGER_NAME="MenuSubTrigger",$6cc32821e9371a1c$export$5fbbb3ba7297405f=reactExports.forwardRef((mr,hr)=>{const gr=$6cc32821e9371a1c$var$useMenuContext($6cc32821e9371a1c$var$SUB_TRIGGER_NAME,mr.__scopeMenu),vr=$6cc32821e9371a1c$var$useMenuRootContext($6cc32821e9371a1c$var$SUB_TRIGGER_NAME,mr.__scopeMenu),xr=$6cc32821e9371a1c$var$useMenuSubContext($6cc32821e9371a1c$var$SUB_TRIGGER_NAME,mr.__scopeMenu),Er=$6cc32821e9371a1c$var$useMenuContentContext($6cc32821e9371a1c$var$SUB_TRIGGER_NAME,mr.__scopeMenu),Cr=reactExports.useRef(null),{pointerGraceTimerRef:wr,onPointerGraceIntentChange:Rr}=Er,kr={__scopeMenu:mr.__scopeMenu},Dr=reactExports.useCallback(()=>{Cr.current&&window.clearTimeout(Cr.current),Cr.current=null},[]);return reactExports.useEffect(()=>Dr,[Dr]),reactExports.useEffect(()=>{const Br=wr.current;return()=>{window.clearTimeout(Br),Rr(null)}},[wr,Rr]),reactExports.createElement($6cc32821e9371a1c$export$9fa5ebd18bee4d43,_extends$7({asChild:!0},kr),reactExports.createElement($6cc32821e9371a1c$var$MenuItemImpl,_extends$7({id:xr.triggerId,"aria-haspopup":"menu","aria-expanded":gr.open,"aria-controls":xr.contentId,"data-state":$6cc32821e9371a1c$var$getOpenState(gr.open)},mr,{ref:$6ed0406888f73fc4$export$43e446d32b3d21af(hr,xr.onTriggerChange),onClick:Br=>{var Hr;(Hr=mr.onClick)===null||Hr===void 0||Hr.call(mr,Br),!(mr.disabled||Br.defaultPrevented)&&(Br.currentTarget.focus(),gr.open||gr.onOpenChange(!0))},onPointerMove:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onPointerMove,$6cc32821e9371a1c$var$whenMouse(Br=>{Er.onItemEnter(Br),!Br.defaultPrevented&&!mr.disabled&&!gr.open&&!Cr.current&&(Er.onPointerGraceIntentChange(null),Cr.current=window.setTimeout(()=>{gr.onOpenChange(!0),Dr()},100))})),onPointerLeave:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onPointerLeave,$6cc32821e9371a1c$var$whenMouse(Br=>{var Hr;Dr();const Gr=(Hr=gr.content)===null||Hr===void 0?void 0:Hr.getBoundingClientRect();if(Gr){var qr;const zr=(qr=gr.content)===null||qr===void 0?void 0:qr.dataset.side,Qr=zr==="right",sn=Qr?-5:5,hn=Gr[Qr?"left":"right"],vn=Gr[Qr?"right":"left"];Er.onPointerGraceIntentChange({area:[{x:Br.clientX+sn,y:Br.clientY},{x:hn,y:Gr.top},{x:vn,y:Gr.top},{x:vn,y:Gr.bottom},{x:hn,y:Gr.bottom}],side:zr}),window.clearTimeout(wr.current),wr.current=window.setTimeout(()=>Er.onPointerGraceIntentChange(null),300)}else{if(Er.onTriggerLeave(Br),Br.defaultPrevented)return;Er.onPointerGraceIntentChange(null)}})),onKeyDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onKeyDown,Br=>{const Hr=Er.searchRef.current!=="";if(!(mr.disabled||Hr&&Br.key===" ")&&$6cc32821e9371a1c$var$SUB_OPEN_KEYS[vr.dir].includes(Br.key)){var Gr;gr.onOpenChange(!0),(Gr=gr.content)===null||Gr===void 0||Gr.focus(),Br.preventDefault()}})})))}),$6cc32821e9371a1c$var$SUB_CONTENT_NAME="MenuSubContent",$6cc32821e9371a1c$export$e7142ab31822bde6=reactExports.forwardRef((mr,hr)=>{const gr=$6cc32821e9371a1c$var$usePortalContext($6cc32821e9371a1c$var$CONTENT_NAME,mr.__scopeMenu),{forceMount:vr=gr.forceMount,...xr}=mr,Er=$6cc32821e9371a1c$var$useMenuContext($6cc32821e9371a1c$var$CONTENT_NAME,mr.__scopeMenu),Cr=$6cc32821e9371a1c$var$useMenuRootContext($6cc32821e9371a1c$var$CONTENT_NAME,mr.__scopeMenu),wr=$6cc32821e9371a1c$var$useMenuSubContext($6cc32821e9371a1c$var$SUB_CONTENT_NAME,mr.__scopeMenu),Rr=reactExports.useRef(null),kr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(hr,Rr);return reactExports.createElement($6cc32821e9371a1c$var$Collection.Provider,{scope:mr.__scopeMenu},reactExports.createElement($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:vr||Er.open},reactExports.createElement($6cc32821e9371a1c$var$Collection.Slot,{scope:mr.__scopeMenu},reactExports.createElement($6cc32821e9371a1c$var$MenuContentImpl,_extends$7({id:wr.contentId,"aria-labelledby":wr.triggerId},xr,{ref:kr,align:"start",side:Cr.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:Dr=>{var Br;Cr.isUsingKeyboardRef.current&&((Br=Rr.current)===null||Br===void 0||Br.focus()),Dr.preventDefault()},onCloseAutoFocus:Dr=>Dr.preventDefault(),onFocusOutside:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onFocusOutside,Dr=>{Dr.target!==wr.trigger&&Er.onOpenChange(!1)}),onEscapeKeyDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onEscapeKeyDown,Dr=>{Cr.onClose(),Dr.preventDefault()}),onKeyDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onKeyDown,Dr=>{const Br=Dr.currentTarget.contains(Dr.target),Hr=$6cc32821e9371a1c$var$SUB_CLOSE_KEYS[Cr.dir].includes(Dr.key);if(Br&&Hr){var Gr;Er.onOpenChange(!1),(Gr=wr.trigger)===null||Gr===void 0||Gr.focus(),Dr.preventDefault()}})})))))});function $6cc32821e9371a1c$var$getOpenState(mr){return mr?"open":"closed"}function $6cc32821e9371a1c$var$focusFirst(mr){const hr=document.activeElement;for(const gr of mr)if(gr===hr||(gr.focus(),document.activeElement!==hr))return}function $6cc32821e9371a1c$var$wrapArray(mr,hr){return mr.map((gr,vr)=>mr[(hr+vr)%mr.length])}function $6cc32821e9371a1c$var$getNextMatch(mr,hr,gr){const xr=hr.length>1&&Array.from(hr).every(kr=>kr===hr[0])?hr[0]:hr,Er=gr?mr.indexOf(gr):-1;let Cr=$6cc32821e9371a1c$var$wrapArray(mr,Math.max(Er,0));xr.length===1&&(Cr=Cr.filter(kr=>kr!==gr));const Rr=Cr.find(kr=>kr.toLowerCase().startsWith(xr.toLowerCase()));return Rr!==gr?Rr:void 0}function $6cc32821e9371a1c$var$isPointInPolygon(mr,hr){const{x:gr,y:vr}=mr;let xr=!1;for(let Er=0,Cr=hr.length-1;Er<hr.length;Cr=Er++){const wr=hr[Er].x,Rr=hr[Er].y,kr=hr[Cr].x,Dr=hr[Cr].y;Rr>vr!=Dr>vr&&gr<(kr-wr)*(vr-Rr)/(Dr-Rr)+wr&&(xr=!xr)}return xr}function $6cc32821e9371a1c$var$isPointerInGraceArea(mr,hr){if(!hr)return!1;const gr={x:mr.clientX,y:mr.clientY};return $6cc32821e9371a1c$var$isPointInPolygon(gr,hr)}function $6cc32821e9371a1c$var$whenMouse(mr){return hr=>hr.pointerType==="mouse"?mr(hr):void 0}const $6cc32821e9371a1c$export$be92b6f5f03c0fe9=$6cc32821e9371a1c$export$d9b273488cd8ce6f,$6cc32821e9371a1c$export$b688253958b8dfe7=$6cc32821e9371a1c$export$9fa5ebd18bee4d43,$6cc32821e9371a1c$export$602eac185826482c=$6cc32821e9371a1c$export$793392f970497feb,$6cc32821e9371a1c$export$7c6e2c02157bb7d2=$6cc32821e9371a1c$export$479f0f2f71193efe,$6cc32821e9371a1c$export$b04be29aa201d4f5=$6cc32821e9371a1c$export$dd37bec0e8a99143,$6cc32821e9371a1c$export$6d08773d2e66f8f2=$6cc32821e9371a1c$export$2ce376c2cc3355c8,$6cc32821e9371a1c$export$d7a01e11500dfb6f=$6cc32821e9371a1c$export$71bdb9d1e2909932,$6cc32821e9371a1c$export$2ea8a7a591ac5eac=$6cc32821e9371a1c$export$5fbbb3ba7297405f,$6cc32821e9371a1c$export$6d4de93b380beddf=$6cc32821e9371a1c$export$e7142ab31822bde6,$d08ef79370b62062$var$DROPDOWN_MENU_NAME="DropdownMenu",[$d08ef79370b62062$var$createDropdownMenuContext,$d08ef79370b62062$export$c0623cd925aeb687]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($d08ef79370b62062$var$DROPDOWN_MENU_NAME,[$6cc32821e9371a1c$export$4027731b685e72eb]),$d08ef79370b62062$var$useMenuScope=$6cc32821e9371a1c$export$4027731b685e72eb(),[$d08ef79370b62062$var$DropdownMenuProvider,$d08ef79370b62062$var$useDropdownMenuContext]=$d08ef79370b62062$var$createDropdownMenuContext($d08ef79370b62062$var$DROPDOWN_MENU_NAME),$d08ef79370b62062$export$e44a253a59704894=mr=>{const{__scopeDropdownMenu:hr,children:gr,dir:vr,open:xr,defaultOpen:Er,onOpenChange:Cr,modal:wr=!0}=mr,Rr=$d08ef79370b62062$var$useMenuScope(hr),kr=reactExports.useRef(null),[Dr=!1,Br]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:xr,defaultProp:Er,onChange:Cr});return reactExports.createElement($d08ef79370b62062$var$DropdownMenuProvider,{scope:hr,triggerId:$1746a345f3d73bb7$export$f680877a34711e37(),triggerRef:kr,contentId:$1746a345f3d73bb7$export$f680877a34711e37(),open:Dr,onOpenChange:Br,onOpenToggle:reactExports.useCallback(()=>Br(Hr=>!Hr),[Br]),modal:wr},reactExports.createElement($6cc32821e9371a1c$export$be92b6f5f03c0fe9,_extends$7({},Rr,{open:Dr,onOpenChange:Br,dir:vr,modal:wr}),gr))},$d08ef79370b62062$var$TRIGGER_NAME="DropdownMenuTrigger",$d08ef79370b62062$export$d2469213b3befba9=reactExports.forwardRef((mr,hr)=>{const{__scopeDropdownMenu:gr,disabled:vr=!1,...xr}=mr,Er=$d08ef79370b62062$var$useDropdownMenuContext($d08ef79370b62062$var$TRIGGER_NAME,gr),Cr=$d08ef79370b62062$var$useMenuScope(gr);return reactExports.createElement($6cc32821e9371a1c$export$b688253958b8dfe7,_extends$7({asChild:!0},Cr),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.button,_extends$7({type:"button",id:Er.triggerId,"aria-haspopup":"menu","aria-expanded":Er.open,"aria-controls":Er.open?Er.contentId:void 0,"data-state":Er.open?"open":"closed","data-disabled":vr?"":void 0,disabled:vr},xr,{ref:$6ed0406888f73fc4$export$43e446d32b3d21af(hr,Er.triggerRef),onPointerDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onPointerDown,wr=>{!vr&&wr.button===0&&wr.ctrlKey===!1&&(Er.onOpenToggle(),Er.open||wr.preventDefault())}),onKeyDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onKeyDown,wr=>{vr||(["Enter"," "].includes(wr.key)&&Er.onOpenToggle(),wr.key==="ArrowDown"&&Er.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(wr.key)&&wr.preventDefault())})})))}),$d08ef79370b62062$export$cd369b4d4d54efc9=mr=>{const{__scopeDropdownMenu:hr,...gr}=mr,vr=$d08ef79370b62062$var$useMenuScope(hr);return reactExports.createElement($6cc32821e9371a1c$export$602eac185826482c,_extends$7({},vr,gr))},$d08ef79370b62062$var$CONTENT_NAME="DropdownMenuContent",$d08ef79370b62062$export$6e76d93a37c01248=reactExports.forwardRef((mr,hr)=>{const{__scopeDropdownMenu:gr,...vr}=mr,xr=$d08ef79370b62062$var$useDropdownMenuContext($d08ef79370b62062$var$CONTENT_NAME,gr),Er=$d08ef79370b62062$var$useMenuScope(gr),Cr=reactExports.useRef(!1);return reactExports.createElement($6cc32821e9371a1c$export$7c6e2c02157bb7d2,_extends$7({id:xr.contentId,"aria-labelledby":xr.triggerId},Er,vr,{ref:hr,onCloseAutoFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onCloseAutoFocus,wr=>{var Rr;Cr.current||(Rr=xr.triggerRef.current)===null||Rr===void 0||Rr.focus(),Cr.current=!1,wr.preventDefault()}),onInteractOutside:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onInteractOutside,wr=>{const Rr=wr.detail.originalEvent,kr=Rr.button===0&&Rr.ctrlKey===!0,Dr=Rr.button===2||kr;(!xr.modal||Dr)&&(Cr.current=!0)}),style:{...mr.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))}),$d08ef79370b62062$export$76e48c5b57f24495=reactExports.forwardRef((mr,hr)=>{const{__scopeDropdownMenu:gr,...vr}=mr,xr=$d08ef79370b62062$var$useMenuScope(gr);return reactExports.createElement($6cc32821e9371a1c$export$b04be29aa201d4f5,_extends$7({},xr,vr,{ref:hr}))}),$d08ef79370b62062$export$ed97964d1871885d=reactExports.forwardRef((mr,hr)=>{const{__scopeDropdownMenu:gr,...vr}=mr,xr=$d08ef79370b62062$var$useMenuScope(gr);return reactExports.createElement($6cc32821e9371a1c$export$6d08773d2e66f8f2,_extends$7({},xr,vr,{ref:hr}))}),$d08ef79370b62062$export$2f307d81a64f5442=mr=>{const{__scopeDropdownMenu:hr,children:gr,open:vr,onOpenChange:xr,defaultOpen:Er}=mr,Cr=$d08ef79370b62062$var$useMenuScope(hr),[wr=!1,Rr]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:vr,defaultProp:Er,onChange:xr});return reactExports.createElement($6cc32821e9371a1c$export$d7a01e11500dfb6f,_extends$7({},Cr,{open:wr,onOpenChange:Rr}),gr)},$d08ef79370b62062$export$21dcb7ec56f874cf=reactExports.forwardRef((mr,hr)=>{const{__scopeDropdownMenu:gr,...vr}=mr,xr=$d08ef79370b62062$var$useMenuScope(gr);return reactExports.createElement($6cc32821e9371a1c$export$2ea8a7a591ac5eac,_extends$7({},xr,vr,{ref:hr}))}),$d08ef79370b62062$export$f34ec8bc2482cc5f=reactExports.forwardRef((mr,hr)=>{const{__scopeDropdownMenu:gr,...vr}=mr,xr=$d08ef79370b62062$var$useMenuScope(gr);return reactExports.createElement($6cc32821e9371a1c$export$6d4de93b380beddf,_extends$7({},xr,vr,{ref:hr,style:{...mr.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))}),$d08ef79370b62062$export$be92b6f5f03c0fe9=$d08ef79370b62062$export$e44a253a59704894,$d08ef79370b62062$export$41fb9f06171c75f4=$d08ef79370b62062$export$d2469213b3befba9,$d08ef79370b62062$export$602eac185826482c=$d08ef79370b62062$export$cd369b4d4d54efc9,$d08ef79370b62062$export$7c6e2c02157bb7d2=$d08ef79370b62062$export$6e76d93a37c01248,$d08ef79370b62062$export$b04be29aa201d4f5=$d08ef79370b62062$export$76e48c5b57f24495,$d08ef79370b62062$export$6d08773d2e66f8f2=$d08ef79370b62062$export$ed97964d1871885d,$d08ef79370b62062$export$d7a01e11500dfb6f=$d08ef79370b62062$export$2f307d81a64f5442,$d08ef79370b62062$export$2ea8a7a591ac5eac=$d08ef79370b62062$export$21dcb7ec56f874cf,$d08ef79370b62062$export$6d4de93b380beddf=$d08ef79370b62062$export$f34ec8bc2482cc5f,$e698a72e93240346$var$CHECKBOX_NAME="Checkbox",[$e698a72e93240346$var$createCheckboxContext,$e698a72e93240346$export$b566c4ff5488ea01]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($e698a72e93240346$var$CHECKBOX_NAME),[$e698a72e93240346$var$CheckboxProvider,$e698a72e93240346$var$useCheckboxContext]=$e698a72e93240346$var$createCheckboxContext($e698a72e93240346$var$CHECKBOX_NAME),$e698a72e93240346$export$48513f6b9f8ce62d=reactExports.forwardRef((mr,hr)=>{const{__scopeCheckbox:gr,name:vr,checked:xr,defaultChecked:Er,required:Cr,disabled:wr,value:Rr="on",onCheckedChange:kr,...Dr}=mr,[Br,Hr]=reactExports.useState(null),Gr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(hr,vn=>Hr(vn)),qr=reactExports.useRef(!1),zr=Br?!!Br.closest("form"):!0,[Qr=!1,sn]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:xr,defaultProp:Er,onChange:kr}),hn=reactExports.useRef(Qr);return reactExports.useEffect(()=>{const vn=Br?.form;if(vn){const yn=()=>sn(hn.current);return vn.addEventListener("reset",yn),()=>vn.removeEventListener("reset",yn)}},[Br,sn]),reactExports.createElement($e698a72e93240346$var$CheckboxProvider,{scope:gr,state:Qr,disabled:wr},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.button,_extends$7({type:"button",role:"checkbox","aria-checked":$e698a72e93240346$var$isIndeterminate(Qr)?"mixed":Qr,"aria-required":Cr,"data-state":$e698a72e93240346$var$getState(Qr),"data-disabled":wr?"":void 0,disabled:wr,value:Rr},Dr,{ref:Gr,onKeyDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onKeyDown,vn=>{vn.key==="Enter"&&vn.preventDefault()}),onClick:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onClick,vn=>{sn(yn=>$e698a72e93240346$var$isIndeterminate(yn)?!0:!yn),zr&&(qr.current=vn.isPropagationStopped(),qr.current||vn.stopPropagation())})})),zr&&reactExports.createElement($e698a72e93240346$var$BubbleInput,{control:Br,bubbles:!qr.current,name:vr,value:Rr,checked:Qr,required:Cr,disabled:wr,style:{transform:"translateX(-100%)"}}))}),$e698a72e93240346$var$INDICATOR_NAME="CheckboxIndicator",$e698a72e93240346$export$59aad738f51d1c05=reactExports.forwardRef((mr,hr)=>{const{__scopeCheckbox:gr,forceMount:vr,...xr}=mr,Er=$e698a72e93240346$var$useCheckboxContext($e698a72e93240346$var$INDICATOR_NAME,gr);return reactExports.createElement($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:vr||$e698a72e93240346$var$isIndeterminate(Er.state)||Er.state===!0},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.span,_extends$7({"data-state":$e698a72e93240346$var$getState(Er.state),"data-disabled":Er.disabled?"":void 0},xr,{ref:hr,style:{pointerEvents:"none",...mr.style}})))}),$e698a72e93240346$var$BubbleInput=mr=>{const{control:hr,checked:gr,bubbles:vr=!0,...xr}=mr,Er=reactExports.useRef(null),Cr=$010c2913dbd2fe3d$export$5cae361ad82dce8b(gr),wr=$db6c3485150b8e66$export$1ab7ae714698c4b8(hr);return reactExports.useEffect(()=>{const Rr=Er.current,kr=window.HTMLInputElement.prototype,Br=Object.getOwnPropertyDescriptor(kr,"checked").set;if(Cr!==gr&&Br){const Hr=new Event("click",{bubbles:vr});Rr.indeterminate=$e698a72e93240346$var$isIndeterminate(gr),Br.call(Rr,$e698a72e93240346$var$isIndeterminate(gr)?!1:gr),Rr.dispatchEvent(Hr)}},[Cr,gr,vr]),reactExports.createElement("input",_extends$7({type:"checkbox","aria-hidden":!0,defaultChecked:$e698a72e93240346$var$isIndeterminate(gr)?!1:gr},xr,{tabIndex:-1,ref:Er,style:{...mr.style,...wr,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function $e698a72e93240346$var$isIndeterminate(mr){return mr==="indeterminate"}function $e698a72e93240346$var$getState(mr){return $e698a72e93240346$var$isIndeterminate(mr)?"indeterminate":mr?"checked":"unchecked"}const $e698a72e93240346$export$be92b6f5f03c0fe9=$e698a72e93240346$export$48513f6b9f8ce62d,$e698a72e93240346$export$adb584737d712b70=$e698a72e93240346$export$59aad738f51d1c05;var effectCar$2=createSidecarMedium(),nothing$2=function(){},RemoveScroll$2=reactExports.forwardRef(function(mr,hr){var gr=reactExports.useRef(null),vr=reactExports.useState({onScrollCapture:nothing$2,onWheelCapture:nothing$2,onTouchMoveCapture:nothing$2}),xr=vr[0],Er=vr[1],Cr=mr.forwardProps,wr=mr.children,Rr=mr.className,kr=mr.removeScrollBar,Dr=mr.enabled,Br=mr.shards,Hr=mr.sideCar,Gr=mr.noIsolation,qr=mr.inert,zr=mr.allowPinchZoom,Qr=mr.as,sn=Qr===void 0?"div":Qr,hn=__rest(mr,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),vn=Hr,yn=useMergeRefs([gr,hr]),gn=__assign(__assign({},hn),xr);return reactExports.createElement(reactExports.Fragment,null,Dr&&reactExports.createElement(vn,{sideCar:effectCar$2,removeScrollBar:kr,shards:Br,noIsolation:Gr,inert:qr,setCallbacks:Er,allowPinchZoom:!!zr,lockRef:gr}),Cr?reactExports.cloneElement(reactExports.Children.only(wr),__assign(__assign({},gn),{ref:yn})):reactExports.createElement(sn,__assign({},gn,{className:Rr,ref:yn}),wr))});RemoveScroll$2.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};RemoveScroll$2.classNames={fullWidth:fullWidthClassName,zeroRight:zeroRightClassName};var passiveSupported$2=!1;if(typeof window<"u")try{var options$3=Object.defineProperty({},"passive",{get:function(){return passiveSupported$2=!0,!0}});window.addEventListener("test",options$3,options$3),window.removeEventListener("test",options$3,options$3)}catch{passiveSupported$2=!1}var nonPassive$2=passiveSupported$2?{passive:!1}:!1,alwaysContainsScroll$2=function(mr){return mr.tagName==="TEXTAREA"},elementCanBeScrolled$2=function(mr,hr){var gr=window.getComputedStyle(mr);return gr[hr]!=="hidden"&&!(gr.overflowY===gr.overflowX&&!alwaysContainsScroll$2(mr)&&gr[hr]==="visible")},elementCouldBeVScrolled$2=function(mr){return elementCanBeScrolled$2(mr,"overflowY")},elementCouldBeHScrolled$2=function(mr){return elementCanBeScrolled$2(mr,"overflowX")},locationCouldBeScrolled$2=function(mr,hr){var gr=hr;do{typeof ShadowRoot<"u"&&gr instanceof ShadowRoot&&(gr=gr.host);var vr=elementCouldBeScrolled$2(mr,gr);if(vr){var xr=getScrollVariables$2(mr,gr),Er=xr[1],Cr=xr[2];if(Er>Cr)return!0}gr=gr.parentNode}while(gr&&gr!==document.body);return!1},getVScrollVariables$2=function(mr){var hr=mr.scrollTop,gr=mr.scrollHeight,vr=mr.clientHeight;return[hr,gr,vr]},getHScrollVariables$2=function(mr){var hr=mr.scrollLeft,gr=mr.scrollWidth,vr=mr.clientWidth;return[hr,gr,vr]},elementCouldBeScrolled$2=function(mr,hr){return mr==="v"?elementCouldBeVScrolled$2(hr):elementCouldBeHScrolled$2(hr)},getScrollVariables$2=function(mr,hr){return mr==="v"?getVScrollVariables$2(hr):getHScrollVariables$2(hr)},getDirectionFactor$2=function(mr,hr){return mr==="h"&&hr==="rtl"?-1:1},handleScroll$2=function(mr,hr,gr,vr,xr){var Er=getDirectionFactor$2(mr,window.getComputedStyle(hr).direction),Cr=Er*vr,wr=gr.target,Rr=hr.contains(wr),kr=!1,Dr=Cr>0,Br=0,Hr=0;do{var Gr=getScrollVariables$2(mr,wr),qr=Gr[0],zr=Gr[1],Qr=Gr[2],sn=zr-Qr-Er*qr;(qr||sn)&&elementCouldBeScrolled$2(mr,wr)&&(Br+=sn,Hr+=qr),wr=wr.parentNode}while(!Rr&&wr!==document.body||Rr&&(hr.contains(wr)||hr===wr));return(Dr&&(Br===0||!xr)||!Dr&&(Hr===0||!xr))&&(kr=!0),kr},getTouchXY$2=function(mr){return"changedTouches"in mr?[mr.changedTouches[0].clientX,mr.changedTouches[0].clientY]:[0,0]},getDeltaXY$2=function(mr){return[mr.deltaX,mr.deltaY]},extractRef$2=function(mr){return mr&&"current"in mr?mr.current:mr},deltaCompare$2=function(mr,hr){return mr[0]===hr[0]&&mr[1]===hr[1]},generateStyle$2=function(mr){return`
  .block-interactivity-`.concat(mr,` {pointer-events: none;}
  .allow-interactivity-`).concat(mr,` {pointer-events: all;}
`)},idCounter$2=0,lockStack$2=[];function RemoveScrollSideCar$2(mr){var hr=reactExports.useRef([]),gr=reactExports.useRef([0,0]),vr=reactExports.useRef(),xr=reactExports.useState(idCounter$2++)[0],Er=reactExports.useState(function(){return styleSingleton()})[0],Cr=reactExports.useRef(mr);reactExports.useEffect(function(){Cr.current=mr},[mr]),reactExports.useEffect(function(){if(mr.inert){document.body.classList.add("block-interactivity-".concat(xr));var zr=__spreadArray$4([mr.lockRef.current],(mr.shards||[]).map(extractRef$2),!0).filter(Boolean);return zr.forEach(function(Qr){return Qr.classList.add("allow-interactivity-".concat(xr))}),function(){document.body.classList.remove("block-interactivity-".concat(xr)),zr.forEach(function(Qr){return Qr.classList.remove("allow-interactivity-".concat(xr))})}}},[mr.inert,mr.lockRef.current,mr.shards]);var wr=reactExports.useCallback(function(zr,Qr){if("touches"in zr&&zr.touches.length===2)return!Cr.current.allowPinchZoom;var sn=getTouchXY$2(zr),hn=gr.current,vn="deltaX"in zr?zr.deltaX:hn[0]-sn[0],yn="deltaY"in zr?zr.deltaY:hn[1]-sn[1],gn,bn=zr.target,xn=Math.abs(vn)>Math.abs(yn)?"h":"v";if("touches"in zr&&xn==="h"&&bn.type==="range")return!1;var $n=locationCouldBeScrolled$2(xn,bn);if(!$n)return!0;if($n?gn=xn:(gn=xn==="v"?"h":"v",$n=locationCouldBeScrolled$2(xn,bn)),!$n)return!1;if(!vr.current&&"changedTouches"in zr&&(vn||yn)&&(vr.current=gn),!gn)return!0;var Sn=vr.current||gn;return handleScroll$2(Sn,Qr,zr,Sn==="h"?vn:yn,!0)},[]),Rr=reactExports.useCallback(function(zr){var Qr=zr;if(!(!lockStack$2.length||lockStack$2[lockStack$2.length-1]!==Er)){var sn="deltaY"in Qr?getDeltaXY$2(Qr):getTouchXY$2(Qr),hn=hr.current.filter(function(gn){return gn.name===Qr.type&&gn.target===Qr.target&&deltaCompare$2(gn.delta,sn)})[0];if(hn&&hn.should){Qr.cancelable&&Qr.preventDefault();return}if(!hn){var vn=(Cr.current.shards||[]).map(extractRef$2).filter(Boolean).filter(function(gn){return gn.contains(Qr.target)}),yn=vn.length>0?wr(Qr,vn[0]):!Cr.current.noIsolation;yn&&Qr.cancelable&&Qr.preventDefault()}}},[]),kr=reactExports.useCallback(function(zr,Qr,sn,hn){var vn={name:zr,delta:Qr,target:sn,should:hn};hr.current.push(vn),setTimeout(function(){hr.current=hr.current.filter(function(yn){return yn!==vn})},1)},[]),Dr=reactExports.useCallback(function(zr){gr.current=getTouchXY$2(zr),vr.current=void 0},[]),Br=reactExports.useCallback(function(zr){kr(zr.type,getDeltaXY$2(zr),zr.target,wr(zr,mr.lockRef.current))},[]),Hr=reactExports.useCallback(function(zr){kr(zr.type,getTouchXY$2(zr),zr.target,wr(zr,mr.lockRef.current))},[]);reactExports.useEffect(function(){return lockStack$2.push(Er),mr.setCallbacks({onScrollCapture:Br,onWheelCapture:Br,onTouchMoveCapture:Hr}),document.addEventListener("wheel",Rr,nonPassive$2),document.addEventListener("touchmove",Rr,nonPassive$2),document.addEventListener("touchstart",Dr,nonPassive$2),function(){lockStack$2=lockStack$2.filter(function(zr){return zr!==Er}),document.removeEventListener("wheel",Rr,nonPassive$2),document.removeEventListener("touchmove",Rr,nonPassive$2),document.removeEventListener("touchstart",Dr,nonPassive$2)}},[]);var Gr=mr.removeScrollBar,qr=mr.inert;return reactExports.createElement(reactExports.Fragment,null,qr?reactExports.createElement(Er,{styles:generateStyle$2(xr)}):null,Gr?reactExports.createElement(RemoveScrollBar,{gapMode:"margin"}):null)}const SideCar$2=exportSidecar(effectCar$2,RemoveScrollSideCar$2);var ReactRemoveScroll$2=reactExports.forwardRef(function(mr,hr){return reactExports.createElement(RemoveScroll$2,__assign({},mr,{ref:hr,sideCar:SideCar$2}))});ReactRemoveScroll$2.classNames=RemoveScroll$2.classNames;const $5d3850c4d0b4e6c7$var$DIALOG_NAME="Dialog",[$5d3850c4d0b4e6c7$var$createDialogContext,$5d3850c4d0b4e6c7$export$cc702773b8ea3e41]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($5d3850c4d0b4e6c7$var$DIALOG_NAME),[$5d3850c4d0b4e6c7$var$DialogProvider,$5d3850c4d0b4e6c7$var$useDialogContext]=$5d3850c4d0b4e6c7$var$createDialogContext($5d3850c4d0b4e6c7$var$DIALOG_NAME),$5d3850c4d0b4e6c7$export$3ddf2d174ce01153=mr=>{const{__scopeDialog:hr,children:gr,open:vr,defaultOpen:xr,onOpenChange:Er,modal:Cr=!0}=mr,wr=reactExports.useRef(null),Rr=reactExports.useRef(null),[kr=!1,Dr]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:vr,defaultProp:xr,onChange:Er});return reactExports.createElement($5d3850c4d0b4e6c7$var$DialogProvider,{scope:hr,triggerRef:wr,contentRef:Rr,contentId:$1746a345f3d73bb7$export$f680877a34711e37(),titleId:$1746a345f3d73bb7$export$f680877a34711e37(),descriptionId:$1746a345f3d73bb7$export$f680877a34711e37(),open:kr,onOpenChange:Dr,onOpenToggle:reactExports.useCallback(()=>Dr(Br=>!Br),[Dr]),modal:Cr},gr)},$5d3850c4d0b4e6c7$var$TRIGGER_NAME="DialogTrigger",$5d3850c4d0b4e6c7$export$2e1e1122cf0cba88=reactExports.forwardRef((mr,hr)=>{const{__scopeDialog:gr,...vr}=mr,xr=$5d3850c4d0b4e6c7$var$useDialogContext($5d3850c4d0b4e6c7$var$TRIGGER_NAME,gr),Er=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(hr,xr.triggerRef);return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.button,_extends$7({type:"button","aria-haspopup":"dialog","aria-expanded":xr.open,"aria-controls":xr.contentId,"data-state":$5d3850c4d0b4e6c7$var$getState(xr.open)},vr,{ref:Er,onClick:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onClick,xr.onOpenToggle)}))}),$5d3850c4d0b4e6c7$var$PORTAL_NAME="DialogPortal",[$5d3850c4d0b4e6c7$var$PortalProvider,$5d3850c4d0b4e6c7$var$usePortalContext]=$5d3850c4d0b4e6c7$var$createDialogContext($5d3850c4d0b4e6c7$var$PORTAL_NAME,{forceMount:void 0}),$5d3850c4d0b4e6c7$export$dad7c95542bacce0=mr=>{const{__scopeDialog:hr,forceMount:gr,children:vr,container:xr}=mr,Er=$5d3850c4d0b4e6c7$var$useDialogContext($5d3850c4d0b4e6c7$var$PORTAL_NAME,hr);return reactExports.createElement($5d3850c4d0b4e6c7$var$PortalProvider,{scope:hr,forceMount:gr},reactExports.Children.map(vr,Cr=>reactExports.createElement($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:gr||Er.open},reactExports.createElement($f1701beae083dbae$export$602eac185826482c,{asChild:!0,container:xr},Cr))))},$5d3850c4d0b4e6c7$var$OVERLAY_NAME="DialogOverlay",$5d3850c4d0b4e6c7$export$bd1d06c79be19e17=reactExports.forwardRef((mr,hr)=>{const gr=$5d3850c4d0b4e6c7$var$usePortalContext($5d3850c4d0b4e6c7$var$OVERLAY_NAME,mr.__scopeDialog),{forceMount:vr=gr.forceMount,...xr}=mr,Er=$5d3850c4d0b4e6c7$var$useDialogContext($5d3850c4d0b4e6c7$var$OVERLAY_NAME,mr.__scopeDialog);return Er.modal?reactExports.createElement($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:vr||Er.open},reactExports.createElement($5d3850c4d0b4e6c7$var$DialogOverlayImpl,_extends$7({},xr,{ref:hr}))):null}),$5d3850c4d0b4e6c7$var$DialogOverlayImpl=reactExports.forwardRef((mr,hr)=>{const{__scopeDialog:gr,...vr}=mr,xr=$5d3850c4d0b4e6c7$var$useDialogContext($5d3850c4d0b4e6c7$var$OVERLAY_NAME,gr);return reactExports.createElement(ReactRemoveScroll$2,{as:$5e63c961fc1ce211$export$8c6ed5c666ac1360,allowPinchZoom:!0,shards:[xr.contentRef]},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$7({"data-state":$5d3850c4d0b4e6c7$var$getState(xr.open)},vr,{ref:hr,style:{pointerEvents:"auto",...vr.style}})))}),$5d3850c4d0b4e6c7$var$CONTENT_NAME="DialogContent",$5d3850c4d0b4e6c7$export$b6d9565de1e068cf=reactExports.forwardRef((mr,hr)=>{const gr=$5d3850c4d0b4e6c7$var$usePortalContext($5d3850c4d0b4e6c7$var$CONTENT_NAME,mr.__scopeDialog),{forceMount:vr=gr.forceMount,...xr}=mr,Er=$5d3850c4d0b4e6c7$var$useDialogContext($5d3850c4d0b4e6c7$var$CONTENT_NAME,mr.__scopeDialog);return reactExports.createElement($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:vr||Er.open},Er.modal?reactExports.createElement($5d3850c4d0b4e6c7$var$DialogContentModal,_extends$7({},xr,{ref:hr})):reactExports.createElement($5d3850c4d0b4e6c7$var$DialogContentNonModal,_extends$7({},xr,{ref:hr})))}),$5d3850c4d0b4e6c7$var$DialogContentModal=reactExports.forwardRef((mr,hr)=>{const gr=$5d3850c4d0b4e6c7$var$useDialogContext($5d3850c4d0b4e6c7$var$CONTENT_NAME,mr.__scopeDialog),vr=reactExports.useRef(null),xr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(hr,gr.contentRef,vr);return reactExports.useEffect(()=>{const Er=vr.current;if(Er)return hideOthers(Er)},[]),reactExports.createElement($5d3850c4d0b4e6c7$var$DialogContentImpl,_extends$7({},mr,{ref:xr,trapFocus:gr.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onCloseAutoFocus,Er=>{var Cr;Er.preventDefault(),(Cr=gr.triggerRef.current)===null||Cr===void 0||Cr.focus()}),onPointerDownOutside:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onPointerDownOutside,Er=>{const Cr=Er.detail.originalEvent,wr=Cr.button===0&&Cr.ctrlKey===!0;(Cr.button===2||wr)&&Er.preventDefault()}),onFocusOutside:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onFocusOutside,Er=>Er.preventDefault())}))}),$5d3850c4d0b4e6c7$var$DialogContentNonModal=reactExports.forwardRef((mr,hr)=>{const gr=$5d3850c4d0b4e6c7$var$useDialogContext($5d3850c4d0b4e6c7$var$CONTENT_NAME,mr.__scopeDialog),vr=reactExports.useRef(!1),xr=reactExports.useRef(!1);return reactExports.createElement($5d3850c4d0b4e6c7$var$DialogContentImpl,_extends$7({},mr,{ref:hr,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:Er=>{var Cr;if((Cr=mr.onCloseAutoFocus)===null||Cr===void 0||Cr.call(mr,Er),!Er.defaultPrevented){var wr;vr.current||(wr=gr.triggerRef.current)===null||wr===void 0||wr.focus(),Er.preventDefault()}vr.current=!1,xr.current=!1},onInteractOutside:Er=>{var Cr,wr;(Cr=mr.onInteractOutside)===null||Cr===void 0||Cr.call(mr,Er),Er.defaultPrevented||(vr.current=!0,Er.detail.originalEvent.type==="pointerdown"&&(xr.current=!0));const Rr=Er.target;((wr=gr.triggerRef.current)===null||wr===void 0?void 0:wr.contains(Rr))&&Er.preventDefault(),Er.detail.originalEvent.type==="focusin"&&xr.current&&Er.preventDefault()}}))}),$5d3850c4d0b4e6c7$var$DialogContentImpl=reactExports.forwardRef((mr,hr)=>{const{__scopeDialog:gr,trapFocus:vr,onOpenAutoFocus:xr,onCloseAutoFocus:Er,...Cr}=mr,wr=$5d3850c4d0b4e6c7$var$useDialogContext($5d3850c4d0b4e6c7$var$CONTENT_NAME,gr),Rr=reactExports.useRef(null),kr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(hr,Rr);return $3db38b7d1fb3fe6a$export$b7ece24a22aeda8c$1(),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement($d3863c46a17e8a28$export$20e40289641fbbb6,{asChild:!0,loop:!0,trapped:vr,onMountAutoFocus:xr,onUnmountAutoFocus:Er},reactExports.createElement($5cb92bef7577960e$export$177fb62ff3ec1f22,_extends$7({role:"dialog",id:wr.contentId,"aria-describedby":wr.descriptionId,"aria-labelledby":wr.titleId,"data-state":$5d3850c4d0b4e6c7$var$getState(wr.open)},Cr,{ref:kr,onDismiss:()=>wr.onOpenChange(!1)}))),!1)}),$5d3850c4d0b4e6c7$var$TITLE_NAME="DialogTitle",$5d3850c4d0b4e6c7$export$16f7638e4a34b909=reactExports.forwardRef((mr,hr)=>{const{__scopeDialog:gr,...vr}=mr,xr=$5d3850c4d0b4e6c7$var$useDialogContext($5d3850c4d0b4e6c7$var$TITLE_NAME,gr);return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.h2,_extends$7({id:xr.titleId},vr,{ref:hr}))}),$5d3850c4d0b4e6c7$var$DESCRIPTION_NAME="DialogDescription",$5d3850c4d0b4e6c7$export$94e94c2ec2c954d5=reactExports.forwardRef((mr,hr)=>{const{__scopeDialog:gr,...vr}=mr,xr=$5d3850c4d0b4e6c7$var$useDialogContext($5d3850c4d0b4e6c7$var$DESCRIPTION_NAME,gr);return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.p,_extends$7({id:xr.descriptionId},vr,{ref:hr}))}),$5d3850c4d0b4e6c7$var$CLOSE_NAME="DialogClose",$5d3850c4d0b4e6c7$export$fba2fb7cd781b7ac=reactExports.forwardRef((mr,hr)=>{const{__scopeDialog:gr,...vr}=mr,xr=$5d3850c4d0b4e6c7$var$useDialogContext($5d3850c4d0b4e6c7$var$CLOSE_NAME,gr);return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.button,_extends$7({type:"button"},vr,{ref:hr,onClick:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onClick,()=>xr.onOpenChange(!1))}))});function $5d3850c4d0b4e6c7$var$getState(mr){return mr?"open":"closed"}const $5d3850c4d0b4e6c7$var$TITLE_WARNING_NAME="DialogTitleWarning",[$5d3850c4d0b4e6c7$export$69b62a49393917d6,$5d3850c4d0b4e6c7$var$useWarningContext]=$c512c27ab02ef895$export$fd42f52fd3ae1109($5d3850c4d0b4e6c7$var$TITLE_WARNING_NAME,{contentName:$5d3850c4d0b4e6c7$var$CONTENT_NAME,titleName:$5d3850c4d0b4e6c7$var$TITLE_NAME,docsSlug:"dialog"}),$5d3850c4d0b4e6c7$export$be92b6f5f03c0fe9=$5d3850c4d0b4e6c7$export$3ddf2d174ce01153,$5d3850c4d0b4e6c7$export$41fb9f06171c75f4=$5d3850c4d0b4e6c7$export$2e1e1122cf0cba88,$5d3850c4d0b4e6c7$export$602eac185826482c=$5d3850c4d0b4e6c7$export$dad7c95542bacce0,$5d3850c4d0b4e6c7$export$c6fdb837b070b4ff=$5d3850c4d0b4e6c7$export$bd1d06c79be19e17,$5d3850c4d0b4e6c7$export$7c6e2c02157bb7d2=$5d3850c4d0b4e6c7$export$b6d9565de1e068cf,$5d3850c4d0b4e6c7$export$f99233281efd08a0=$5d3850c4d0b4e6c7$export$16f7638e4a34b909,$5d3850c4d0b4e6c7$export$393edc798c47379d=$5d3850c4d0b4e6c7$export$94e94c2ec2c954d5,$5d3850c4d0b4e6c7$export$f39c2d165cd861fe=$5d3850c4d0b4e6c7$export$fba2fb7cd781b7ac,$905f4ae918aab1aa$var$ROOT_NAME="AlertDialog",[$905f4ae918aab1aa$var$createAlertDialogContext,$905f4ae918aab1aa$export$b8891880751c2c5b]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($905f4ae918aab1aa$var$ROOT_NAME,[$5d3850c4d0b4e6c7$export$cc702773b8ea3e41]),$905f4ae918aab1aa$var$useDialogScope=$5d3850c4d0b4e6c7$export$cc702773b8ea3e41(),$905f4ae918aab1aa$export$de466dd8317b0b75=mr=>{const{__scopeAlertDialog:hr,...gr}=mr,vr=$905f4ae918aab1aa$var$useDialogScope(hr);return reactExports.createElement($5d3850c4d0b4e6c7$export$be92b6f5f03c0fe9,_extends$7({},vr,gr,{modal:!0}))},$905f4ae918aab1aa$export$6edd7a623ef0f40b=reactExports.forwardRef((mr,hr)=>{const{__scopeAlertDialog:gr,...vr}=mr,xr=$905f4ae918aab1aa$var$useDialogScope(gr);return reactExports.createElement($5d3850c4d0b4e6c7$export$41fb9f06171c75f4,_extends$7({},xr,vr,{ref:hr}))}),$905f4ae918aab1aa$export$660f2bfdb986706c=mr=>{const{__scopeAlertDialog:hr,...gr}=mr,vr=$905f4ae918aab1aa$var$useDialogScope(hr);return reactExports.createElement($5d3850c4d0b4e6c7$export$602eac185826482c,_extends$7({},vr,gr))},$905f4ae918aab1aa$export$a707a4895ce23256=reactExports.forwardRef((mr,hr)=>{const{__scopeAlertDialog:gr,...vr}=mr,xr=$905f4ae918aab1aa$var$useDialogScope(gr);return reactExports.createElement($5d3850c4d0b4e6c7$export$c6fdb837b070b4ff,_extends$7({},xr,vr,{ref:hr}))}),$905f4ae918aab1aa$var$CONTENT_NAME="AlertDialogContent",[$905f4ae918aab1aa$var$AlertDialogContentProvider,$905f4ae918aab1aa$var$useAlertDialogContentContext]=$905f4ae918aab1aa$var$createAlertDialogContext($905f4ae918aab1aa$var$CONTENT_NAME),$905f4ae918aab1aa$export$94e6af45f0af4efd=reactExports.forwardRef((mr,hr)=>{const{__scopeAlertDialog:gr,children:vr,...xr}=mr,Er=$905f4ae918aab1aa$var$useDialogScope(gr),Cr=reactExports.useRef(null),wr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(hr,Cr),Rr=reactExports.useRef(null);return reactExports.createElement($5d3850c4d0b4e6c7$export$69b62a49393917d6,{contentName:$905f4ae918aab1aa$var$CONTENT_NAME,titleName:$905f4ae918aab1aa$var$TITLE_NAME,docsSlug:"alert-dialog"},reactExports.createElement($905f4ae918aab1aa$var$AlertDialogContentProvider,{scope:gr,cancelRef:Rr},reactExports.createElement($5d3850c4d0b4e6c7$export$7c6e2c02157bb7d2,_extends$7({role:"alertdialog"},Er,xr,{ref:wr,onOpenAutoFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(xr.onOpenAutoFocus,kr=>{var Dr;kr.preventDefault(),(Dr=Rr.current)===null||Dr===void 0||Dr.focus({preventScroll:!0})}),onPointerDownOutside:kr=>kr.preventDefault(),onInteractOutside:kr=>kr.preventDefault()}),reactExports.createElement($5e63c961fc1ce211$export$d9f1ccf0bdb05d45,null,vr),!1)))}),$905f4ae918aab1aa$var$TITLE_NAME="AlertDialogTitle",$905f4ae918aab1aa$export$225e0da62d314b7=reactExports.forwardRef((mr,hr)=>{const{__scopeAlertDialog:gr,...vr}=mr,xr=$905f4ae918aab1aa$var$useDialogScope(gr);return reactExports.createElement($5d3850c4d0b4e6c7$export$f99233281efd08a0,_extends$7({},xr,vr,{ref:hr}))}),$905f4ae918aab1aa$export$a23b55cde55ad9a5=reactExports.forwardRef((mr,hr)=>{const{__scopeAlertDialog:gr,...vr}=mr,xr=$905f4ae918aab1aa$var$useDialogScope(gr);return reactExports.createElement($5d3850c4d0b4e6c7$export$393edc798c47379d,_extends$7({},xr,vr,{ref:hr}))}),$905f4ae918aab1aa$export$b454f818c58ee85d=reactExports.forwardRef((mr,hr)=>{const{__scopeAlertDialog:gr,...vr}=mr,xr=$905f4ae918aab1aa$var$useDialogScope(gr);return reactExports.createElement($5d3850c4d0b4e6c7$export$f39c2d165cd861fe,_extends$7({},xr,vr,{ref:hr}))}),$905f4ae918aab1aa$var$CANCEL_NAME="AlertDialogCancel",$905f4ae918aab1aa$export$2f67a923571aaea0=reactExports.forwardRef((mr,hr)=>{const{__scopeAlertDialog:gr,...vr}=mr,{cancelRef:xr}=$905f4ae918aab1aa$var$useAlertDialogContentContext($905f4ae918aab1aa$var$CANCEL_NAME,gr),Er=$905f4ae918aab1aa$var$useDialogScope(gr),Cr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(hr,xr);return reactExports.createElement($5d3850c4d0b4e6c7$export$f39c2d165cd861fe,_extends$7({},Er,vr,{ref:Cr}))}),$905f4ae918aab1aa$export$be92b6f5f03c0fe9=$905f4ae918aab1aa$export$de466dd8317b0b75,$905f4ae918aab1aa$export$41fb9f06171c75f4=$905f4ae918aab1aa$export$6edd7a623ef0f40b,$905f4ae918aab1aa$export$602eac185826482c=$905f4ae918aab1aa$export$660f2bfdb986706c,$905f4ae918aab1aa$export$c6fdb837b070b4ff=$905f4ae918aab1aa$export$a707a4895ce23256,$905f4ae918aab1aa$export$7c6e2c02157bb7d2=$905f4ae918aab1aa$export$94e6af45f0af4efd,$905f4ae918aab1aa$export$e19cd5f9376f8cee=$905f4ae918aab1aa$export$b454f818c58ee85d,$905f4ae918aab1aa$export$848c9b7ead0df967=$905f4ae918aab1aa$export$2f67a923571aaea0,$905f4ae918aab1aa$export$f99233281efd08a0=$905f4ae918aab1aa$export$225e0da62d314b7,$905f4ae918aab1aa$export$393edc798c47379d=$905f4ae918aab1aa$export$a23b55cde55ad9a5;var effectCar$1=createSidecarMedium(),nothing$1=function(){},RemoveScroll$1=reactExports.forwardRef(function(mr,hr){var gr=reactExports.useRef(null),vr=reactExports.useState({onScrollCapture:nothing$1,onWheelCapture:nothing$1,onTouchMoveCapture:nothing$1}),xr=vr[0],Er=vr[1],Cr=mr.forwardProps,wr=mr.children,Rr=mr.className,kr=mr.removeScrollBar,Dr=mr.enabled,Br=mr.shards,Hr=mr.sideCar,Gr=mr.noIsolation,qr=mr.inert,zr=mr.allowPinchZoom,Qr=mr.as,sn=Qr===void 0?"div":Qr,hn=mr.gapMode,vn=__rest(mr,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),yn=Hr,gn=useMergeRefs([gr,hr]),bn=__assign(__assign({},vn),xr);return reactExports.createElement(reactExports.Fragment,null,Dr&&reactExports.createElement(yn,{sideCar:effectCar$1,removeScrollBar:kr,shards:Br,noIsolation:Gr,inert:qr,setCallbacks:Er,allowPinchZoom:!!zr,lockRef:gr,gapMode:hn}),Cr?reactExports.cloneElement(reactExports.Children.only(wr),__assign(__assign({},bn),{ref:gn})):reactExports.createElement(sn,__assign({},bn,{className:Rr,ref:gn}),wr))});RemoveScroll$1.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};RemoveScroll$1.classNames={fullWidth:fullWidthClassName,zeroRight:zeroRightClassName};var passiveSupported$1=!1;if(typeof window<"u")try{var options$2=Object.defineProperty({},"passive",{get:function(){return passiveSupported$1=!0,!0}});window.addEventListener("test",options$2,options$2),window.removeEventListener("test",options$2,options$2)}catch{passiveSupported$1=!1}var nonPassive$1=passiveSupported$1?{passive:!1}:!1,alwaysContainsScroll$1=function(mr){return mr.tagName==="TEXTAREA"},elementCanBeScrolled$1=function(mr,hr){if(!(mr instanceof Element))return!1;var gr=window.getComputedStyle(mr);return gr[hr]!=="hidden"&&!(gr.overflowY===gr.overflowX&&!alwaysContainsScroll$1(mr)&&gr[hr]==="visible")},elementCouldBeVScrolled$1=function(mr){return elementCanBeScrolled$1(mr,"overflowY")},elementCouldBeHScrolled$1=function(mr){return elementCanBeScrolled$1(mr,"overflowX")},locationCouldBeScrolled$1=function(mr,hr){var gr=hr.ownerDocument,vr=hr;do{typeof ShadowRoot<"u"&&vr instanceof ShadowRoot&&(vr=vr.host);var xr=elementCouldBeScrolled$1(mr,vr);if(xr){var Er=getScrollVariables$1(mr,vr),Cr=Er[1],wr=Er[2];if(Cr>wr)return!0}vr=vr.parentNode}while(vr&&vr!==gr.body);return!1},getVScrollVariables$1=function(mr){var hr=mr.scrollTop,gr=mr.scrollHeight,vr=mr.clientHeight;return[hr,gr,vr]},getHScrollVariables$1=function(mr){var hr=mr.scrollLeft,gr=mr.scrollWidth,vr=mr.clientWidth;return[hr,gr,vr]},elementCouldBeScrolled$1=function(mr,hr){return mr==="v"?elementCouldBeVScrolled$1(hr):elementCouldBeHScrolled$1(hr)},getScrollVariables$1=function(mr,hr){return mr==="v"?getVScrollVariables$1(hr):getHScrollVariables$1(hr)},getDirectionFactor$1=function(mr,hr){return mr==="h"&&hr==="rtl"?-1:1},handleScroll$1=function(mr,hr,gr,vr,xr){var Er=getDirectionFactor$1(mr,window.getComputedStyle(hr).direction),Cr=Er*vr,wr=gr.target,Rr=hr.contains(wr),kr=!1,Dr=Cr>0,Br=0,Hr=0;do{var Gr=getScrollVariables$1(mr,wr),qr=Gr[0],zr=Gr[1],Qr=Gr[2],sn=zr-Qr-Er*qr;(qr||sn)&&elementCouldBeScrolled$1(mr,wr)&&(Br+=sn,Hr+=qr),wr instanceof ShadowRoot?wr=wr.host:wr=wr.parentNode}while(!Rr&&wr!==document.body||Rr&&(hr.contains(wr)||hr===wr));return(Dr&&(Math.abs(Br)<1||!xr)||!Dr&&(Math.abs(Hr)<1||!xr))&&(kr=!0),kr},getTouchXY$1=function(mr){return"changedTouches"in mr?[mr.changedTouches[0].clientX,mr.changedTouches[0].clientY]:[0,0]},getDeltaXY$1=function(mr){return[mr.deltaX,mr.deltaY]},extractRef$1=function(mr){return mr&&"current"in mr?mr.current:mr},deltaCompare$1=function(mr,hr){return mr[0]===hr[0]&&mr[1]===hr[1]},generateStyle$1=function(mr){return`
  .block-interactivity-`.concat(mr,` {pointer-events: none;}
  .allow-interactivity-`).concat(mr,` {pointer-events: all;}
`)},idCounter$1=0,lockStack$1=[];function RemoveScrollSideCar$1(mr){var hr=reactExports.useRef([]),gr=reactExports.useRef([0,0]),vr=reactExports.useRef(),xr=reactExports.useState(idCounter$1++)[0],Er=reactExports.useState(styleSingleton)[0],Cr=reactExports.useRef(mr);reactExports.useEffect(function(){Cr.current=mr},[mr]),reactExports.useEffect(function(){if(mr.inert){document.body.classList.add("block-interactivity-".concat(xr));var zr=__spreadArray$4([mr.lockRef.current],(mr.shards||[]).map(extractRef$1),!0).filter(Boolean);return zr.forEach(function(Qr){return Qr.classList.add("allow-interactivity-".concat(xr))}),function(){document.body.classList.remove("block-interactivity-".concat(xr)),zr.forEach(function(Qr){return Qr.classList.remove("allow-interactivity-".concat(xr))})}}},[mr.inert,mr.lockRef.current,mr.shards]);var wr=reactExports.useCallback(function(zr,Qr){if("touches"in zr&&zr.touches.length===2)return!Cr.current.allowPinchZoom;var sn=getTouchXY$1(zr),hn=gr.current,vn="deltaX"in zr?zr.deltaX:hn[0]-sn[0],yn="deltaY"in zr?zr.deltaY:hn[1]-sn[1],gn,bn=zr.target,xn=Math.abs(vn)>Math.abs(yn)?"h":"v";if("touches"in zr&&xn==="h"&&bn.type==="range")return!1;var $n=locationCouldBeScrolled$1(xn,bn);if(!$n)return!0;if($n?gn=xn:(gn=xn==="v"?"h":"v",$n=locationCouldBeScrolled$1(xn,bn)),!$n)return!1;if(!vr.current&&"changedTouches"in zr&&(vn||yn)&&(vr.current=gn),!gn)return!0;var Sn=vr.current||gn;return handleScroll$1(Sn,Qr,zr,Sn==="h"?vn:yn,!0)},[]),Rr=reactExports.useCallback(function(zr){var Qr=zr;if(!(!lockStack$1.length||lockStack$1[lockStack$1.length-1]!==Er)){var sn="deltaY"in Qr?getDeltaXY$1(Qr):getTouchXY$1(Qr),hn=hr.current.filter(function(gn){return gn.name===Qr.type&&(gn.target===Qr.target||Qr.target===gn.shadowParent)&&deltaCompare$1(gn.delta,sn)})[0];if(hn&&hn.should){Qr.cancelable&&Qr.preventDefault();return}if(!hn){var vn=(Cr.current.shards||[]).map(extractRef$1).filter(Boolean).filter(function(gn){return gn.contains(Qr.target)}),yn=vn.length>0?wr(Qr,vn[0]):!Cr.current.noIsolation;yn&&Qr.cancelable&&Qr.preventDefault()}}},[]),kr=reactExports.useCallback(function(zr,Qr,sn,hn){var vn={name:zr,delta:Qr,target:sn,should:hn,shadowParent:getOutermostShadowParent(sn)};hr.current.push(vn),setTimeout(function(){hr.current=hr.current.filter(function(yn){return yn!==vn})},1)},[]),Dr=reactExports.useCallback(function(zr){gr.current=getTouchXY$1(zr),vr.current=void 0},[]),Br=reactExports.useCallback(function(zr){kr(zr.type,getDeltaXY$1(zr),zr.target,wr(zr,mr.lockRef.current))},[]),Hr=reactExports.useCallback(function(zr){kr(zr.type,getTouchXY$1(zr),zr.target,wr(zr,mr.lockRef.current))},[]);reactExports.useEffect(function(){return lockStack$1.push(Er),mr.setCallbacks({onScrollCapture:Br,onWheelCapture:Br,onTouchMoveCapture:Hr}),document.addEventListener("wheel",Rr,nonPassive$1),document.addEventListener("touchmove",Rr,nonPassive$1),document.addEventListener("touchstart",Dr,nonPassive$1),function(){lockStack$1=lockStack$1.filter(function(zr){return zr!==Er}),document.removeEventListener("wheel",Rr,nonPassive$1),document.removeEventListener("touchmove",Rr,nonPassive$1),document.removeEventListener("touchstart",Dr,nonPassive$1)}},[]);var Gr=mr.removeScrollBar,qr=mr.inert;return reactExports.createElement(reactExports.Fragment,null,qr?reactExports.createElement(Er,{styles:generateStyle$1(xr)}):null,Gr?reactExports.createElement(RemoveScrollBar,{gapMode:mr.gapMode}):null)}function getOutermostShadowParent(mr){for(var hr=null;mr!==null;)mr instanceof ShadowRoot&&(hr=mr.host,mr=mr.host),mr=mr.parentNode;return hr}const SideCar$1=exportSidecar(effectCar$1,RemoveScrollSideCar$1);var ReactRemoveScroll$1=reactExports.forwardRef(function(mr,hr){return reactExports.createElement(RemoveScroll$1,__assign({},mr,{ref:hr,sideCar:SideCar$1}))});ReactRemoveScroll$1.classNames=RemoveScroll$1.classNames;const DefaultBufferLength=1024;let nextPropID=0,Range$1=class{constructor(hr,gr){this.from=hr,this.to=gr}};class NodeProp{constructor(hr={}){this.id=nextPropID++,this.perNode=!!hr.perNode,this.deserialize=hr.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(hr){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof hr!="function"&&(hr=NodeType.match(hr)),gr=>{let vr=hr(gr);return vr===void 0?null:[this,vr]}}}NodeProp.closedBy=new NodeProp({deserialize:mr=>mr.split(" ")});NodeProp.openedBy=new NodeProp({deserialize:mr=>mr.split(" ")});NodeProp.group=new NodeProp({deserialize:mr=>mr.split(" ")});NodeProp.isolate=new NodeProp({deserialize:mr=>{if(mr&&mr!="rtl"&&mr!="ltr"&&mr!="auto")throw new RangeError("Invalid value for isolate: "+mr);return mr||"auto"}});NodeProp.contextHash=new NodeProp({perNode:!0});NodeProp.lookAhead=new NodeProp({perNode:!0});NodeProp.mounted=new NodeProp({perNode:!0});class MountedTree{constructor(hr,gr,vr){this.tree=hr,this.overlay=gr,this.parser=vr}static get(hr){return hr&&hr.props&&hr.props[NodeProp.mounted.id]}}const noProps=Object.create(null);class NodeType{constructor(hr,gr,vr,xr=0){this.name=hr,this.props=gr,this.id=vr,this.flags=xr}static define(hr){let gr=hr.props&&hr.props.length?Object.create(null):noProps,vr=(hr.top?1:0)|(hr.skipped?2:0)|(hr.error?4:0)|(hr.name==null?8:0),xr=new NodeType(hr.name||"",gr,hr.id,vr);if(hr.props){for(let Er of hr.props)if(Array.isArray(Er)||(Er=Er(xr)),Er){if(Er[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");gr[Er[0].id]=Er[1]}}return xr}prop(hr){return this.props[hr.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(hr){if(typeof hr=="string"){if(this.name==hr)return!0;let gr=this.prop(NodeProp.group);return gr?gr.indexOf(hr)>-1:!1}return this.id==hr}static match(hr){let gr=Object.create(null);for(let vr in hr)for(let xr of vr.split(" "))gr[xr]=hr[vr];return vr=>{for(let xr=vr.prop(NodeProp.group),Er=-1;Er<(xr?xr.length:0);Er++){let Cr=gr[Er<0?vr.name:xr[Er]];if(Cr)return Cr}}}}NodeType.none=new NodeType("",Object.create(null),0,8);class NodeSet{constructor(hr){this.types=hr;for(let gr=0;gr<hr.length;gr++)if(hr[gr].id!=gr)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...hr){let gr=[];for(let vr of this.types){let xr=null;for(let Er of hr){let Cr=Er(vr);Cr&&(xr||(xr=Object.assign({},vr.props)),xr[Cr[0].id]=Cr[1])}gr.push(xr?new NodeType(vr.name,xr,vr.id,vr.flags):vr)}return new NodeSet(gr)}}const CachedNode=new WeakMap,CachedInnerNode=new WeakMap;var IterMode;(function(mr){mr[mr.ExcludeBuffers=1]="ExcludeBuffers",mr[mr.IncludeAnonymous=2]="IncludeAnonymous",mr[mr.IgnoreMounts=4]="IgnoreMounts",mr[mr.IgnoreOverlays=8]="IgnoreOverlays"})(IterMode||(IterMode={}));class Tree{constructor(hr,gr,vr,xr,Er){if(this.type=hr,this.children=gr,this.positions=vr,this.length=xr,this.props=null,Er&&Er.length){this.props=Object.create(null);for(let[Cr,wr]of Er)this.props[typeof Cr=="number"?Cr:Cr.id]=wr}}toString(){let hr=MountedTree.get(this);if(hr&&!hr.overlay)return hr.tree.toString();let gr="";for(let vr of this.children){let xr=vr.toString();xr&&(gr&&(gr+=","),gr+=xr)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(gr.length?"("+gr+")":""):gr}cursor(hr=0){return new TreeCursor(this.topNode,hr)}cursorAt(hr,gr=0,vr=0){let xr=CachedNode.get(this)||this.topNode,Er=new TreeCursor(xr);return Er.moveTo(hr,gr),CachedNode.set(this,Er._tree),Er}get topNode(){return new TreeNode(this,0,0,null)}resolve(hr,gr=0){let vr=resolveNode(CachedNode.get(this)||this.topNode,hr,gr,!1);return CachedNode.set(this,vr),vr}resolveInner(hr,gr=0){let vr=resolveNode(CachedInnerNode.get(this)||this.topNode,hr,gr,!0);return CachedInnerNode.set(this,vr),vr}resolveStack(hr,gr=0){return stackIterator(this,hr,gr)}iterate(hr){let{enter:gr,leave:vr,from:xr=0,to:Er=this.length}=hr,Cr=hr.mode||0,wr=(Cr&IterMode.IncludeAnonymous)>0;for(let Rr=this.cursor(Cr|IterMode.IncludeAnonymous);;){let kr=!1;if(Rr.from<=Er&&Rr.to>=xr&&(!wr&&Rr.type.isAnonymous||gr(Rr)!==!1)){if(Rr.firstChild())continue;kr=!0}for(;kr&&vr&&(wr||!Rr.type.isAnonymous)&&vr(Rr),!Rr.nextSibling();){if(!Rr.parent())return;kr=!0}}}prop(hr){return hr.perNode?this.props?this.props[hr.id]:void 0:this.type.prop(hr)}get propValues(){let hr=[];if(this.props)for(let gr in this.props)hr.push([+gr,this.props[gr]]);return hr}balance(hr={}){return this.children.length<=8?this:balanceRange(NodeType.none,this.children,this.positions,0,this.children.length,0,this.length,(gr,vr,xr)=>new Tree(this.type,gr,vr,xr,this.propValues),hr.makeTree||((gr,vr,xr)=>new Tree(NodeType.none,gr,vr,xr)))}static build(hr){return buildTree(hr)}}Tree.empty=new Tree(NodeType.none,[],[],0);class FlatBufferCursor{constructor(hr,gr){this.buffer=hr,this.index=gr}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new FlatBufferCursor(this.buffer,this.index)}}class TreeBuffer{constructor(hr,gr,vr){this.buffer=hr,this.length=gr,this.set=vr}get type(){return NodeType.none}toString(){let hr=[];for(let gr=0;gr<this.buffer.length;)hr.push(this.childString(gr)),gr=this.buffer[gr+3];return hr.join(",")}childString(hr){let gr=this.buffer[hr],vr=this.buffer[hr+3],xr=this.set.types[gr],Er=xr.name;if(/\W/.test(Er)&&!xr.isError&&(Er=JSON.stringify(Er)),hr+=4,vr==hr)return Er;let Cr=[];for(;hr<vr;)Cr.push(this.childString(hr)),hr=this.buffer[hr+3];return Er+"("+Cr.join(",")+")"}findChild(hr,gr,vr,xr,Er){let{buffer:Cr}=this,wr=-1;for(let Rr=hr;Rr!=gr&&!(checkSide(Er,xr,Cr[Rr+1],Cr[Rr+2])&&(wr=Rr,vr>0));Rr=Cr[Rr+3]);return wr}slice(hr,gr,vr){let xr=this.buffer,Er=new Uint16Array(gr-hr),Cr=0;for(let wr=hr,Rr=0;wr<gr;){Er[Rr++]=xr[wr++],Er[Rr++]=xr[wr++]-vr;let kr=Er[Rr++]=xr[wr++]-vr;Er[Rr++]=xr[wr++]-hr,Cr=Math.max(Cr,kr)}return new TreeBuffer(Er,Cr,this.set)}}function checkSide(mr,hr,gr,vr){switch(mr){case-2:return gr<hr;case-1:return vr>=hr&&gr<hr;case 0:return gr<hr&&vr>hr;case 1:return gr<=hr&&vr>hr;case 2:return vr>hr;case 4:return!0}}function resolveNode(mr,hr,gr,vr){for(var xr;mr.from==mr.to||(gr<1?mr.from>=hr:mr.from>hr)||(gr>-1?mr.to<=hr:mr.to<hr);){let Cr=!vr&&mr instanceof TreeNode&&mr.index<0?null:mr.parent;if(!Cr)return mr;mr=Cr}let Er=vr?0:IterMode.IgnoreOverlays;if(vr)for(let Cr=mr,wr=Cr.parent;wr;Cr=wr,wr=Cr.parent)Cr instanceof TreeNode&&Cr.index<0&&((xr=wr.enter(hr,gr,Er))===null||xr===void 0?void 0:xr.from)!=Cr.from&&(mr=wr);for(;;){let Cr=mr.enter(hr,gr,Er);if(!Cr)return mr;mr=Cr}}class BaseNode{cursor(hr=0){return new TreeCursor(this,hr)}getChild(hr,gr=null,vr=null){let xr=getChildren(this,hr,gr,vr);return xr.length?xr[0]:null}getChildren(hr,gr=null,vr=null){return getChildren(this,hr,gr,vr)}resolve(hr,gr=0){return resolveNode(this,hr,gr,!1)}resolveInner(hr,gr=0){return resolveNode(this,hr,gr,!0)}matchContext(hr){return matchNodeContext(this.parent,hr)}enterUnfinishedNodesBefore(hr){let gr=this.childBefore(hr),vr=this;for(;gr;){let xr=gr.lastChild;if(!xr||xr.to!=gr.to)break;xr.type.isError&&xr.from==xr.to?(vr=gr,gr=xr.prevSibling):gr=xr}return vr}get node(){return this}get next(){return this.parent}}class TreeNode extends BaseNode{constructor(hr,gr,vr,xr){super(),this._tree=hr,this.from=gr,this.index=vr,this._parent=xr}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(hr,gr,vr,xr,Er=0){for(let Cr=this;;){for(let{children:wr,positions:Rr}=Cr._tree,kr=gr>0?wr.length:-1;hr!=kr;hr+=gr){let Dr=wr[hr],Br=Rr[hr]+Cr.from;if(checkSide(xr,vr,Br,Br+Dr.length)){if(Dr instanceof TreeBuffer){if(Er&IterMode.ExcludeBuffers)continue;let Hr=Dr.findChild(0,Dr.buffer.length,gr,vr-Br,xr);if(Hr>-1)return new BufferNode(new BufferContext(Cr,Dr,hr,Br),null,Hr)}else if(Er&IterMode.IncludeAnonymous||!Dr.type.isAnonymous||hasChild(Dr)){let Hr;if(!(Er&IterMode.IgnoreMounts)&&(Hr=MountedTree.get(Dr))&&!Hr.overlay)return new TreeNode(Hr.tree,Br,hr,Cr);let Gr=new TreeNode(Dr,Br,hr,Cr);return Er&IterMode.IncludeAnonymous||!Gr.type.isAnonymous?Gr:Gr.nextChild(gr<0?Dr.children.length-1:0,gr,vr,xr)}}}if(Er&IterMode.IncludeAnonymous||!Cr.type.isAnonymous||(Cr.index>=0?hr=Cr.index+gr:hr=gr<0?-1:Cr._parent._tree.children.length,Cr=Cr._parent,!Cr))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(hr){return this.nextChild(0,1,hr,2)}childBefore(hr){return this.nextChild(this._tree.children.length-1,-1,hr,-2)}enter(hr,gr,vr=0){let xr;if(!(vr&IterMode.IgnoreOverlays)&&(xr=MountedTree.get(this._tree))&&xr.overlay){let Er=hr-this.from;for(let{from:Cr,to:wr}of xr.overlay)if((gr>0?Cr<=Er:Cr<Er)&&(gr<0?wr>=Er:wr>Er))return new TreeNode(xr.tree,xr.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,hr,gr,vr)}nextSignificantParent(){let hr=this;for(;hr.type.isAnonymous&&hr._parent;)hr=hr._parent;return hr}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function getChildren(mr,hr,gr,vr){let xr=mr.cursor(),Er=[];if(!xr.firstChild())return Er;if(gr!=null){for(let Cr=!1;!Cr;)if(Cr=xr.type.is(gr),!xr.nextSibling())return Er}for(;;){if(vr!=null&&xr.type.is(vr))return Er;if(xr.type.is(hr)&&Er.push(xr.node),!xr.nextSibling())return vr==null?Er:[]}}function matchNodeContext(mr,hr,gr=hr.length-1){for(let vr=mr;gr>=0;vr=vr.parent){if(!vr)return!1;if(!vr.type.isAnonymous){if(hr[gr]&&hr[gr]!=vr.name)return!1;gr--}}return!0}class BufferContext{constructor(hr,gr,vr,xr){this.parent=hr,this.buffer=gr,this.index=vr,this.start=xr}}class BufferNode extends BaseNode{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(hr,gr,vr){super(),this.context=hr,this._parent=gr,this.index=vr,this.type=hr.buffer.set.types[hr.buffer.buffer[vr]]}child(hr,gr,vr){let{buffer:xr}=this.context,Er=xr.findChild(this.index+4,xr.buffer[this.index+3],hr,gr-this.context.start,vr);return Er<0?null:new BufferNode(this.context,this,Er)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(hr){return this.child(1,hr,2)}childBefore(hr){return this.child(-1,hr,-2)}enter(hr,gr,vr=0){if(vr&IterMode.ExcludeBuffers)return null;let{buffer:xr}=this.context,Er=xr.findChild(this.index+4,xr.buffer[this.index+3],gr>0?1:-1,hr-this.context.start,gr);return Er<0?null:new BufferNode(this.context,this,Er)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(hr){return this._parent?null:this.context.parent.nextChild(this.context.index+hr,hr,0,4)}get nextSibling(){let{buffer:hr}=this.context,gr=hr.buffer[this.index+3];return gr<(this._parent?hr.buffer[this._parent.index+3]:hr.buffer.length)?new BufferNode(this.context,this._parent,gr):this.externalSibling(1)}get prevSibling(){let{buffer:hr}=this.context,gr=this._parent?this._parent.index+4:0;return this.index==gr?this.externalSibling(-1):new BufferNode(this.context,this._parent,hr.findChild(gr,this.index,-1,0,4))}get tree(){return null}toTree(){let hr=[],gr=[],{buffer:vr}=this.context,xr=this.index+4,Er=vr.buffer[this.index+3];if(Er>xr){let Cr=vr.buffer[this.index+1];hr.push(vr.slice(xr,Er,Cr)),gr.push(0)}return new Tree(this.type,hr,gr,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function iterStack(mr){if(!mr.length)return null;let hr=0,gr=mr[0];for(let Er=1;Er<mr.length;Er++){let Cr=mr[Er];(Cr.from>gr.from||Cr.to<gr.to)&&(gr=Cr,hr=Er)}let vr=gr instanceof TreeNode&&gr.index<0?null:gr.parent,xr=mr.slice();return vr?xr[hr]=vr:xr.splice(hr,1),new StackIterator(xr,gr)}class StackIterator{constructor(hr,gr){this.heads=hr,this.node=gr}get next(){return iterStack(this.heads)}}function stackIterator(mr,hr,gr){let vr=mr.resolveInner(hr,gr),xr=null;for(let Er=vr instanceof TreeNode?vr:vr.context.parent;Er;Er=Er.parent)if(Er.index<0){let Cr=Er.parent;(xr||(xr=[vr])).push(Cr.resolve(hr,gr)),Er=Cr}else{let Cr=MountedTree.get(Er.tree);if(Cr&&Cr.overlay&&Cr.overlay[0].from<=hr&&Cr.overlay[Cr.overlay.length-1].to>=hr){let wr=new TreeNode(Cr.tree,Cr.overlay[0].from+Er.from,-1,Er);(xr||(xr=[vr])).push(resolveNode(wr,hr,gr,!1))}}return xr?iterStack(xr):vr}class TreeCursor{get name(){return this.type.name}constructor(hr,gr=0){if(this.mode=gr,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,hr instanceof TreeNode)this.yieldNode(hr);else{this._tree=hr.context.parent,this.buffer=hr.context;for(let vr=hr._parent;vr;vr=vr._parent)this.stack.unshift(vr.index);this.bufferNode=hr,this.yieldBuf(hr.index)}}yieldNode(hr){return hr?(this._tree=hr,this.type=hr.type,this.from=hr.from,this.to=hr.to,!0):!1}yieldBuf(hr,gr){this.index=hr;let{start:vr,buffer:xr}=this.buffer;return this.type=gr||xr.set.types[xr.buffer[hr]],this.from=vr+xr.buffer[hr+1],this.to=vr+xr.buffer[hr+2],!0}yield(hr){return hr?hr instanceof TreeNode?(this.buffer=null,this.yieldNode(hr)):(this.buffer=hr.context,this.yieldBuf(hr.index,hr.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(hr,gr,vr){if(!this.buffer)return this.yield(this._tree.nextChild(hr<0?this._tree._tree.children.length-1:0,hr,gr,vr,this.mode));let{buffer:xr}=this.buffer,Er=xr.findChild(this.index+4,xr.buffer[this.index+3],hr,gr-this.buffer.start,vr);return Er<0?!1:(this.stack.push(this.index),this.yieldBuf(Er))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(hr){return this.enterChild(1,hr,2)}childBefore(hr){return this.enterChild(-1,hr,-2)}enter(hr,gr,vr=this.mode){return this.buffer?vr&IterMode.ExcludeBuffers?!1:this.enterChild(1,hr,gr):this.yield(this._tree.enter(hr,gr,vr))}parent(){if(!this.buffer)return this.yieldNode(this.mode&IterMode.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let hr=this.mode&IterMode.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(hr)}sibling(hr){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+hr,hr,0,4,this.mode)):!1;let{buffer:gr}=this.buffer,vr=this.stack.length-1;if(hr<0){let xr=vr<0?0:this.stack[vr]+4;if(this.index!=xr)return this.yieldBuf(gr.findChild(xr,this.index,-1,0,4))}else{let xr=gr.buffer[this.index+3];if(xr<(vr<0?gr.buffer.length:gr.buffer[this.stack[vr]+3]))return this.yieldBuf(xr)}return vr<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+hr,hr,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(hr){let gr,vr,{buffer:xr}=this;if(xr){if(hr>0){if(this.index<xr.buffer.buffer.length)return!1}else for(let Er=0;Er<this.index;Er++)if(xr.buffer.buffer[Er+3]<this.index)return!1;({index:gr,parent:vr}=xr)}else({index:gr,_parent:vr}=this._tree);for(;vr;{index:gr,_parent:vr}=vr)if(gr>-1)for(let Er=gr+hr,Cr=hr<0?-1:vr._tree.children.length;Er!=Cr;Er+=hr){let wr=vr._tree.children[Er];if(this.mode&IterMode.IncludeAnonymous||wr instanceof TreeBuffer||!wr.type.isAnonymous||hasChild(wr))return!1}return!0}move(hr,gr){if(gr&&this.enterChild(hr,0,4))return!0;for(;;){if(this.sibling(hr))return!0;if(this.atLastNode(hr)||!this.parent())return!1}}next(hr=!0){return this.move(1,hr)}prev(hr=!0){return this.move(-1,hr)}moveTo(hr,gr=0){for(;(this.from==this.to||(gr<1?this.from>=hr:this.from>hr)||(gr>-1?this.to<=hr:this.to<hr))&&this.parent(););for(;this.enterChild(1,hr,gr););return this}get node(){if(!this.buffer)return this._tree;let hr=this.bufferNode,gr=null,vr=0;if(hr&&hr.context==this.buffer)e:for(let xr=this.index,Er=this.stack.length;Er>=0;){for(let Cr=hr;Cr;Cr=Cr._parent)if(Cr.index==xr){if(xr==this.index)return Cr;gr=Cr,vr=Er+1;break e}xr=this.stack[--Er]}for(let xr=vr;xr<this.stack.length;xr++)gr=new BufferNode(this.buffer,gr,this.stack[xr]);return this.bufferNode=new BufferNode(this.buffer,gr,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(hr,gr){for(let vr=0;;){let xr=!1;if(this.type.isAnonymous||hr(this)!==!1){if(this.firstChild()){vr++;continue}this.type.isAnonymous||(xr=!0)}for(;;){if(xr&&gr&&gr(this),xr=this.type.isAnonymous,!vr)return;if(this.nextSibling())break;this.parent(),vr--,xr=!0}}}matchContext(hr){if(!this.buffer)return matchNodeContext(this.node.parent,hr);let{buffer:gr}=this.buffer,{types:vr}=gr.set;for(let xr=hr.length-1,Er=this.stack.length-1;xr>=0;Er--){if(Er<0)return matchNodeContext(this._tree,hr,xr);let Cr=vr[gr.buffer[this.stack[Er]]];if(!Cr.isAnonymous){if(hr[xr]&&hr[xr]!=Cr.name)return!1;xr--}}return!0}}function hasChild(mr){return mr.children.some(hr=>hr instanceof TreeBuffer||!hr.type.isAnonymous||hasChild(hr))}function buildTree(mr){var hr;let{buffer:gr,nodeSet:vr,maxBufferLength:xr=DefaultBufferLength,reused:Er=[],minRepeatType:Cr=vr.types.length}=mr,wr=Array.isArray(gr)?new FlatBufferCursor(gr,gr.length):gr,Rr=vr.types,kr=0,Dr=0;function Br(gn,bn,xn,$n,Sn,Cn){let{id:Rn,start:Bn,end:Fn,size:Hn}=wr,Gn=Dr,qn=kr;for(;Hn<0;)if(wr.next(),Hn==-1){let Mn=Er[Rn];xn.push(Mn),$n.push(Bn-gn);return}else if(Hn==-3){kr=Rn;return}else if(Hn==-4){Dr=Rn;return}else throw new RangeError(`Unrecognized record size: ${Hn}`);let On=Rr[Rn],wn,_n,Tn=Bn-gn;if(Fn-Bn<=xr&&(_n=Qr(wr.pos-bn,Sn))){let Mn=new Uint16Array(_n.size-_n.skip),Ln=wr.pos-_n.size,jn=Mn.length;for(;wr.pos>Ln;)jn=sn(_n.start,Mn,jn);wn=new TreeBuffer(Mn,Fn-_n.start,vr),Tn=_n.start-gn}else{let Mn=wr.pos-Hn;wr.next();let Ln=[],jn=[],Kn=Rn>=Cr?Rn:-1,Nn=0,An=Fn;for(;wr.pos>Mn;)Kn>=0&&wr.id==Kn&&wr.size>=0?(wr.end<=An-xr&&(qr(Ln,jn,Bn,Nn,wr.end,An,Kn,Gn,qn),Nn=Ln.length,An=wr.end),wr.next()):Cn>2500?Hr(Bn,Mn,Ln,jn):Br(Bn,Mn,Ln,jn,Kn,Cn+1);if(Kn>=0&&Nn>0&&Nn<Ln.length&&qr(Ln,jn,Bn,Nn,Bn,An,Kn,Gn,qn),Ln.reverse(),jn.reverse(),Kn>-1&&Nn>0){let kn=Gr(On,qn);wn=balanceRange(On,Ln,jn,0,Ln.length,0,Fn-Bn,kn,kn)}else wn=zr(On,Ln,jn,Fn-Bn,Gn-Fn,qn)}xn.push(wn),$n.push(Tn)}function Hr(gn,bn,xn,$n){let Sn=[],Cn=0,Rn=-1;for(;wr.pos>bn;){let{id:Bn,start:Fn,end:Hn,size:Gn}=wr;if(Gn>4)wr.next();else{if(Rn>-1&&Fn<Rn)break;Rn<0&&(Rn=Hn-xr),Sn.push(Bn,Fn,Hn),Cn++,wr.next()}}if(Cn){let Bn=new Uint16Array(Cn*4),Fn=Sn[Sn.length-2];for(let Hn=Sn.length-3,Gn=0;Hn>=0;Hn-=3)Bn[Gn++]=Sn[Hn],Bn[Gn++]=Sn[Hn+1]-Fn,Bn[Gn++]=Sn[Hn+2]-Fn,Bn[Gn++]=Gn;xn.push(new TreeBuffer(Bn,Sn[2]-Fn,vr)),$n.push(Fn-gn)}}function Gr(gn,bn){return(xn,$n,Sn)=>{let Cn=0,Rn=xn.length-1,Bn,Fn;if(Rn>=0&&(Bn=xn[Rn])instanceof Tree){if(!Rn&&Bn.type==gn&&Bn.length==Sn)return Bn;(Fn=Bn.prop(NodeProp.lookAhead))&&(Cn=$n[Rn]+Bn.length+Fn)}return zr(gn,xn,$n,Sn,Cn,bn)}}function qr(gn,bn,xn,$n,Sn,Cn,Rn,Bn,Fn){let Hn=[],Gn=[];for(;gn.length>$n;)Hn.push(gn.pop()),Gn.push(bn.pop()+xn-Sn);gn.push(zr(vr.types[Rn],Hn,Gn,Cn-Sn,Bn-Cn,Fn)),bn.push(Sn-xn)}function zr(gn,bn,xn,$n,Sn,Cn,Rn){if(Cn){let Bn=[NodeProp.contextHash,Cn];Rn=Rn?[Bn].concat(Rn):[Bn]}if(Sn>25){let Bn=[NodeProp.lookAhead,Sn];Rn=Rn?[Bn].concat(Rn):[Bn]}return new Tree(gn,bn,xn,$n,Rn)}function Qr(gn,bn){let xn=wr.fork(),$n=0,Sn=0,Cn=0,Rn=xn.end-xr,Bn={size:0,start:0,skip:0};e:for(let Fn=xn.pos-gn;xn.pos>Fn;){let Hn=xn.size;if(xn.id==bn&&Hn>=0){Bn.size=$n,Bn.start=Sn,Bn.skip=Cn,Cn+=4,$n+=4,xn.next();continue}let Gn=xn.pos-Hn;if(Hn<0||Gn<Fn||xn.start<Rn)break;let qn=xn.id>=Cr?4:0,On=xn.start;for(xn.next();xn.pos>Gn;){if(xn.size<0)if(xn.size==-3)qn+=4;else break e;else xn.id>=Cr&&(qn+=4);xn.next()}Sn=On,$n+=Hn,Cn+=qn}return(bn<0||$n==gn)&&(Bn.size=$n,Bn.start=Sn,Bn.skip=Cn),Bn.size>4?Bn:void 0}function sn(gn,bn,xn){let{id:$n,start:Sn,end:Cn,size:Rn}=wr;if(wr.next(),Rn>=0&&$n<Cr){let Bn=xn;if(Rn>4){let Fn=wr.pos-(Rn-4);for(;wr.pos>Fn;)xn=sn(gn,bn,xn)}bn[--xn]=Bn,bn[--xn]=Cn-gn,bn[--xn]=Sn-gn,bn[--xn]=$n}else Rn==-3?kr=$n:Rn==-4&&(Dr=$n);return xn}let hn=[],vn=[];for(;wr.pos>0;)Br(mr.start||0,mr.bufferStart||0,hn,vn,-1,0);let yn=(hr=mr.length)!==null&&hr!==void 0?hr:hn.length?vn[0]+hn[0].length:0;return new Tree(Rr[mr.topID],hn.reverse(),vn.reverse(),yn)}const nodeSizeCache=new WeakMap;function nodeSize(mr,hr){if(!mr.isAnonymous||hr instanceof TreeBuffer||hr.type!=mr)return 1;let gr=nodeSizeCache.get(hr);if(gr==null){gr=1;for(let vr of hr.children){if(vr.type!=mr||!(vr instanceof Tree)){gr=1;break}gr+=nodeSize(mr,vr)}nodeSizeCache.set(hr,gr)}return gr}function balanceRange(mr,hr,gr,vr,xr,Er,Cr,wr,Rr){let kr=0;for(let qr=vr;qr<xr;qr++)kr+=nodeSize(mr,hr[qr]);let Dr=Math.ceil(kr*1.5/8),Br=[],Hr=[];function Gr(qr,zr,Qr,sn,hn){for(let vn=Qr;vn<sn;){let yn=vn,gn=zr[vn],bn=nodeSize(mr,qr[vn]);for(vn++;vn<sn;vn++){let xn=nodeSize(mr,qr[vn]);if(bn+xn>=Dr)break;bn+=xn}if(vn==yn+1){if(bn>Dr){let xn=qr[yn];Gr(xn.children,xn.positions,0,xn.children.length,zr[yn]+hn);continue}Br.push(qr[yn])}else{let xn=zr[vn-1]+qr[vn-1].length-gn;Br.push(balanceRange(mr,qr,zr,yn,vn,gn,xn,null,Rr))}Hr.push(gn+hn-Er)}}return Gr(hr,gr,vr,xr,0),(wr||Rr)(Br,Hr,Cr)}class TreeFragment{constructor(hr,gr,vr,xr,Er=!1,Cr=!1){this.from=hr,this.to=gr,this.tree=vr,this.offset=xr,this.open=(Er?1:0)|(Cr?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(hr,gr=[],vr=!1){let xr=[new TreeFragment(0,hr.length,hr,0,!1,vr)];for(let Er of gr)Er.to>hr.length&&xr.push(Er);return xr}static applyChanges(hr,gr,vr=128){if(!gr.length)return hr;let xr=[],Er=1,Cr=hr.length?hr[0]:null;for(let wr=0,Rr=0,kr=0;;wr++){let Dr=wr<gr.length?gr[wr]:null,Br=Dr?Dr.fromA:1e9;if(Br-Rr>=vr)for(;Cr&&Cr.from<Br;){let Hr=Cr;if(Rr>=Hr.from||Br<=Hr.to||kr){let Gr=Math.max(Hr.from,Rr)-kr,qr=Math.min(Hr.to,Br)-kr;Hr=Gr>=qr?null:new TreeFragment(Gr,qr,Hr.tree,Hr.offset+kr,wr>0,!!Dr)}if(Hr&&xr.push(Hr),Cr.to>Br)break;Cr=Er<hr.length?hr[Er++]:null}if(!Dr)break;Rr=Dr.toA,kr=Dr.toA-Dr.toB}return xr}}class Parser{startParse(hr,gr,vr){return typeof hr=="string"&&(hr=new StringInput$1(hr)),vr=vr?vr.length?vr.map(xr=>new Range$1(xr.from,xr.to)):[new Range$1(0,0)]:[new Range$1(0,hr.length)],this.createParse(hr,gr||[],vr)}parse(hr,gr,vr){let xr=this.startParse(hr,gr,vr);for(;;){let Er=xr.advance();if(Er)return Er}}}let StringInput$1=class{constructor(hr){this.string=hr}get length(){return this.string.length}chunk(hr){return this.string.slice(hr)}get lineChunks(){return!1}read(hr,gr){return this.string.slice(hr,gr)}};new NodeProp({perNode:!0});var define_process_env_default$1={ADMIN_PATH:"/admin",STRAPI_ADMIN_BACKEND_URL:"",STRAPI_TELEMETRY_DISABLED:"false"};let Stack$6=class Uh{constructor(hr,gr,vr,xr,Er,Cr,wr,Rr,kr,Dr=0,Br){this.p=hr,this.stack=gr,this.state=vr,this.reducePos=xr,this.pos=Er,this.score=Cr,this.buffer=wr,this.bufferBase=Rr,this.curContext=kr,this.lookAhead=Dr,this.parent=Br}toString(){return`[${this.stack.filter((hr,gr)=>gr%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(hr,gr,vr=0){let xr=hr.parser.context;return new Uh(hr,[],gr,vr,vr,0,[],0,xr?new StackContext(xr,xr.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(hr,gr){this.stack.push(this.state,gr,this.bufferBase+this.buffer.length),this.state=hr}reduce(hr){var gr;let vr=hr>>19,xr=hr&65535,{parser:Er}=this.p,Cr=this.reducePos<this.pos-25;Cr&&this.setLookAhead(this.pos);let wr=Er.dynamicPrecedence(xr);if(wr&&(this.score+=wr),vr==0){this.pushState(Er.getGoto(this.state,xr,!0),this.reducePos),xr<Er.minRepeatTerm&&this.storeNode(xr,this.reducePos,this.reducePos,Cr?8:4,!0),this.reduceContext(xr,this.reducePos);return}let Rr=this.stack.length-(vr-1)*3-(hr&262144?6:0),kr=Rr?this.stack[Rr-2]:this.p.ranges[0].from,Dr=this.reducePos-kr;Dr>=2e3&&!(!((gr=this.p.parser.nodeSet.types[xr])===null||gr===void 0)&&gr.isAnonymous)&&(kr==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=Dr):this.p.lastBigReductionSize<Dr&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=kr,this.p.lastBigReductionSize=Dr));let Br=Rr?this.stack[Rr-1]:0,Hr=this.bufferBase+this.buffer.length-Br;if(xr<Er.minRepeatTerm||hr&131072){let Gr=Er.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(xr,kr,Gr,Hr+4,!0)}if(hr&262144)this.state=this.stack[Rr];else{let Gr=this.stack[Rr-3];this.state=Er.getGoto(Gr,xr,!0)}for(;this.stack.length>Rr;)this.stack.pop();this.reduceContext(xr,kr)}storeNode(hr,gr,vr,xr=4,Er=!1){if(hr==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let Cr=this,wr=this.buffer.length;if(wr==0&&Cr.parent&&(wr=Cr.bufferBase-Cr.parent.bufferBase,Cr=Cr.parent),wr>0&&Cr.buffer[wr-4]==0&&Cr.buffer[wr-1]>-1){if(gr==vr)return;if(Cr.buffer[wr-2]>=gr){Cr.buffer[wr-2]=vr;return}}}if(!Er||this.pos==vr)this.buffer.push(hr,gr,vr,xr);else{let Cr=this.buffer.length;if(Cr>0&&this.buffer[Cr-4]!=0){let wr=!1;for(let Rr=Cr;Rr>0&&this.buffer[Rr-2]>vr;Rr-=4)if(this.buffer[Rr-1]>=0){wr=!0;break}if(wr)for(;Cr>0&&this.buffer[Cr-2]>vr;)this.buffer[Cr]=this.buffer[Cr-4],this.buffer[Cr+1]=this.buffer[Cr-3],this.buffer[Cr+2]=this.buffer[Cr-2],this.buffer[Cr+3]=this.buffer[Cr-1],Cr-=4,xr>4&&(xr-=4)}this.buffer[Cr]=hr,this.buffer[Cr+1]=gr,this.buffer[Cr+2]=vr,this.buffer[Cr+3]=xr}}shift(hr,gr,vr,xr){if(hr&131072)this.pushState(hr&65535,this.pos);else if(hr&262144)this.pos=xr,this.shiftContext(gr,vr),gr<=this.p.parser.maxNode&&this.buffer.push(gr,vr,xr,4);else{let Er=hr,{parser:Cr}=this.p;(xr>this.pos||gr<=Cr.maxNode)&&(this.pos=xr,Cr.stateFlag(Er,1)||(this.reducePos=xr)),this.pushState(Er,vr),this.shiftContext(gr,vr),gr<=Cr.maxNode&&this.buffer.push(gr,vr,xr,4)}}apply(hr,gr,vr,xr){hr&65536?this.reduce(hr):this.shift(hr,gr,vr,xr)}useNode(hr,gr){let vr=this.p.reused.length-1;(vr<0||this.p.reused[vr]!=hr)&&(this.p.reused.push(hr),vr++);let xr=this.pos;this.reducePos=this.pos=xr+hr.length,this.pushState(gr,xr),this.buffer.push(vr,xr,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,hr,this,this.p.stream.reset(this.pos-hr.length)))}split(){let hr=this,gr=hr.buffer.length;for(;gr>0&&hr.buffer[gr-2]>hr.reducePos;)gr-=4;let vr=hr.buffer.slice(gr),xr=hr.bufferBase+gr;for(;hr&&xr==hr.bufferBase;)hr=hr.parent;return new Uh(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,vr,xr,this.curContext,this.lookAhead,hr)}recoverByDelete(hr,gr){let vr=hr<=this.p.parser.maxNode;vr&&this.storeNode(hr,this.pos,gr,4),this.storeNode(0,this.pos,gr,vr?8:4),this.pos=this.reducePos=gr,this.score-=190}canShift(hr){for(let gr=new SimulatedStack(this);;){let vr=this.p.parser.stateSlot(gr.state,4)||this.p.parser.hasAction(gr.state,hr);if(vr==0)return!1;if(!(vr&65536))return!0;gr.reduce(vr)}}recoverByInsert(hr){if(this.stack.length>=300)return[];let gr=this.p.parser.nextStates(this.state);if(gr.length>8||this.stack.length>=120){let xr=[];for(let Er=0,Cr;Er<gr.length;Er+=2)(Cr=gr[Er+1])!=this.state&&this.p.parser.hasAction(Cr,hr)&&xr.push(gr[Er],Cr);if(this.stack.length<120)for(let Er=0;xr.length<8&&Er<gr.length;Er+=2){let Cr=gr[Er+1];xr.some((wr,Rr)=>Rr&1&&wr==Cr)||xr.push(gr[Er],Cr)}gr=xr}let vr=[];for(let xr=0;xr<gr.length&&vr.length<4;xr+=2){let Er=gr[xr+1];if(Er==this.state)continue;let Cr=this.split();Cr.pushState(Er,this.pos),Cr.storeNode(0,Cr.pos,Cr.pos,4,!0),Cr.shiftContext(gr[xr],this.pos),Cr.reducePos=this.pos,Cr.score-=200,vr.push(Cr)}return vr}forceReduce(){let{parser:hr}=this.p,gr=hr.stateSlot(this.state,5);if(!(gr&65536))return!1;if(!hr.validAction(this.state,gr)){let vr=gr>>19,xr=gr&65535,Er=this.stack.length-vr*3;if(Er<0||hr.getGoto(this.stack[Er],xr,!1)<0){let Cr=this.findForcedReduction();if(Cr==null)return!1;gr=Cr}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(gr),!0}findForcedReduction(){let{parser:hr}=this.p,gr=[],vr=(xr,Er)=>{if(!gr.includes(xr))return gr.push(xr),hr.allActions(xr,Cr=>{if(!(Cr&393216))if(Cr&65536){let wr=(Cr>>19)-Er;if(wr>1){let Rr=Cr&65535,kr=this.stack.length-wr*3;if(kr>=0&&hr.getGoto(this.stack[kr],Rr,!1)>=0)return wr<<19|65536|Rr}}else{let wr=vr(Cr,Er+1);if(wr!=null)return wr}})};return vr(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:hr}=this.p;return hr.data[hr.stateSlot(this.state,1)]==65535&&!hr.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(hr){if(this.state!=hr.state||this.stack.length!=hr.stack.length)return!1;for(let gr=0;gr<this.stack.length;gr+=3)if(this.stack[gr]!=hr.stack[gr])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(hr){return this.p.parser.dialect.flags[hr]}shiftContext(hr,gr){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,hr,this,this.p.stream.reset(gr)))}reduceContext(hr,gr){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,hr,this,this.p.stream.reset(gr)))}emitContext(){let hr=this.buffer.length-1;(hr<0||this.buffer[hr]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let hr=this.buffer.length-1;(hr<0||this.buffer[hr]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(hr){if(hr!=this.curContext.context){let gr=new StackContext(this.curContext.tracker,hr);gr.hash!=this.curContext.hash&&this.emitContext(),this.curContext=gr}}setLookAhead(hr){hr>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=hr)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}};class StackContext{constructor(hr,gr){this.tracker=hr,this.context=gr,this.hash=hr.strict?hr.hash(gr):0}}class SimulatedStack{constructor(hr){this.start=hr,this.state=hr.state,this.stack=hr.stack,this.base=this.stack.length}reduce(hr){let gr=hr&65535,vr=hr>>19;vr==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(vr-1)*3;let xr=this.start.p.parser.getGoto(this.stack[this.base-3],gr,!0);this.state=xr}}class StackBufferCursor{constructor(hr,gr,vr){this.stack=hr,this.pos=gr,this.index=vr,this.buffer=hr.buffer,this.index==0&&this.maybeNext()}static create(hr,gr=hr.bufferBase+hr.buffer.length){return new StackBufferCursor(hr,gr,gr-hr.bufferBase)}maybeNext(){let hr=this.stack.parent;hr!=null&&(this.index=this.stack.bufferBase-hr.bufferBase,this.stack=hr,this.buffer=hr.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new StackBufferCursor(this.stack,this.pos,this.index)}}function decodeArray(mr,hr=Uint16Array){if(typeof mr!="string")return mr;let gr=null;for(let vr=0,xr=0;vr<mr.length;){let Er=0;for(;;){let Cr=mr.charCodeAt(vr++),wr=!1;if(Cr==126){Er=65535;break}Cr>=92&&Cr--,Cr>=34&&Cr--;let Rr=Cr-32;if(Rr>=46&&(Rr-=46,wr=!0),Er+=Rr,wr)break;Er*=46}gr?gr[xr++]=Er:gr=new hr(Er)}return gr}class CachedToken{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const nullToken=new CachedToken;class InputStream{constructor(hr,gr){this.input=hr,this.ranges=gr,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=nullToken,this.rangeIndex=0,this.pos=this.chunkPos=gr[0].from,this.range=gr[0],this.end=gr[gr.length-1].to,this.readNext()}resolveOffset(hr,gr){let vr=this.range,xr=this.rangeIndex,Er=this.pos+hr;for(;Er<vr.from;){if(!xr)return null;let Cr=this.ranges[--xr];Er-=vr.from-Cr.to,vr=Cr}for(;gr<0?Er>vr.to:Er>=vr.to;){if(xr==this.ranges.length-1)return null;let Cr=this.ranges[++xr];Er+=Cr.from-vr.to,vr=Cr}return Er}clipPos(hr){if(hr>=this.range.from&&hr<this.range.to)return hr;for(let gr of this.ranges)if(gr.to>hr)return Math.max(hr,gr.from);return this.end}peek(hr){let gr=this.chunkOff+hr,vr,xr;if(gr>=0&&gr<this.chunk.length)vr=this.pos+hr,xr=this.chunk.charCodeAt(gr);else{let Er=this.resolveOffset(hr,1);if(Er==null)return-1;if(vr=Er,vr>=this.chunk2Pos&&vr<this.chunk2Pos+this.chunk2.length)xr=this.chunk2.charCodeAt(vr-this.chunk2Pos);else{let Cr=this.rangeIndex,wr=this.range;for(;wr.to<=vr;)wr=this.ranges[++Cr];this.chunk2=this.input.chunk(this.chunk2Pos=vr),vr+this.chunk2.length>wr.to&&(this.chunk2=this.chunk2.slice(0,wr.to-vr)),xr=this.chunk2.charCodeAt(0)}}return vr>=this.token.lookAhead&&(this.token.lookAhead=vr+1),xr}acceptToken(hr,gr=0){let vr=gr?this.resolveOffset(gr,-1):this.pos;if(vr==null||vr<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=hr,this.token.end=vr}acceptTokenTo(hr,gr){this.token.value=hr,this.token.end=gr}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:hr,chunkPos:gr}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=hr,this.chunk2Pos=gr,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let hr=this.input.chunk(this.pos),gr=this.pos+hr.length;this.chunk=gr>this.range.to?hr.slice(0,this.range.to-this.pos):hr,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(hr=1){for(this.chunkOff+=hr;this.pos+hr>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();hr-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=hr,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(hr,gr){if(gr?(this.token=gr,gr.start=hr,gr.lookAhead=hr+1,gr.value=gr.extended=-1):this.token=nullToken,this.pos!=hr){if(this.pos=hr,hr==this.end)return this.setDone(),this;for(;hr<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;hr>=this.range.to;)this.range=this.ranges[++this.rangeIndex];hr>=this.chunkPos&&hr<this.chunkPos+this.chunk.length?this.chunkOff=hr-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(hr,gr){if(hr>=this.chunkPos&&gr<=this.chunkPos+this.chunk.length)return this.chunk.slice(hr-this.chunkPos,gr-this.chunkPos);if(hr>=this.chunk2Pos&&gr<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(hr-this.chunk2Pos,gr-this.chunk2Pos);if(hr>=this.range.from&&gr<=this.range.to)return this.input.read(hr,gr);let vr="";for(let xr of this.ranges){if(xr.from>=gr)break;xr.to>hr&&(vr+=this.input.read(Math.max(xr.from,hr),Math.min(xr.to,gr)))}return vr}}class TokenGroup{constructor(hr,gr){this.data=hr,this.id=gr}token(hr,gr){let{parser:vr}=gr.p;readToken(this.data,hr,gr,this.id,vr.data,vr.tokenPrecTable)}}TokenGroup.prototype.contextual=TokenGroup.prototype.fallback=TokenGroup.prototype.extend=!1;TokenGroup.prototype.fallback=TokenGroup.prototype.extend=!1;function readToken(mr,hr,gr,vr,xr,Er){let Cr=0,wr=1<<vr,{dialect:Rr}=gr.p.parser;e:for(;wr&mr[Cr];){let kr=mr[Cr+1];for(let Gr=Cr+3;Gr<kr;Gr+=2)if((mr[Gr+1]&wr)>0){let qr=mr[Gr];if(Rr.allows(qr)&&(hr.token.value==-1||hr.token.value==qr||overrides(qr,hr.token.value,xr,Er))){hr.acceptToken(qr);break}}let Dr=hr.next,Br=0,Hr=mr[Cr+2];if(hr.next<0&&Hr>Br&&mr[kr+Hr*3-3]==65535){Cr=mr[kr+Hr*3-1];continue e}for(;Br<Hr;){let Gr=Br+Hr>>1,qr=kr+Gr+(Gr<<1),zr=mr[qr],Qr=mr[qr+1]||65536;if(Dr<zr)Hr=Gr;else if(Dr>=Qr)Br=Gr+1;else{Cr=mr[qr+2],hr.advance();continue e}}break}}function findOffset(mr,hr,gr){for(let vr=hr,xr;(xr=mr[vr])!=65535;vr++)if(xr==gr)return vr-hr;return-1}function overrides(mr,hr,gr,vr){let xr=findOffset(gr,vr,hr);return xr<0||findOffset(gr,vr,mr)<xr}const verbose=typeof process<"u"&&define_process_env_default$1&&/\bparse\b/.test(define_process_env_default$1.LOG);let stackIDs=null;function cutAt(mr,hr,gr){let vr=mr.cursor(IterMode.IncludeAnonymous);for(vr.moveTo(hr);;)if(!(gr<0?vr.childBefore(hr):vr.childAfter(hr)))for(;;){if((gr<0?vr.to<hr:vr.from>hr)&&!vr.type.isError)return gr<0?Math.max(0,Math.min(vr.to-1,hr-25)):Math.min(mr.length,Math.max(vr.from+1,hr+25));if(gr<0?vr.prevSibling():vr.nextSibling())break;if(!vr.parent())return gr<0?0:mr.length}}class FragmentCursor{constructor(hr,gr){this.fragments=hr,this.nodeSet=gr,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let hr=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(hr){for(this.safeFrom=hr.openStart?cutAt(hr.tree,hr.from+hr.offset,1)-hr.offset:hr.from,this.safeTo=hr.openEnd?cutAt(hr.tree,hr.to+hr.offset,-1)-hr.offset:hr.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(hr.tree),this.start.push(-hr.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(hr){if(hr<this.nextStart)return null;for(;this.fragment&&this.safeTo<=hr;)this.nextFragment();if(!this.fragment)return null;for(;;){let gr=this.trees.length-1;if(gr<0)return this.nextFragment(),null;let vr=this.trees[gr],xr=this.index[gr];if(xr==vr.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let Er=vr.children[xr],Cr=this.start[gr]+vr.positions[xr];if(Cr>hr)return this.nextStart=Cr,null;if(Er instanceof Tree){if(Cr==hr){if(Cr<this.safeFrom)return null;let wr=Cr+Er.length;if(wr<=this.safeTo){let Rr=Er.prop(NodeProp.lookAhead);if(!Rr||wr+Rr<this.fragment.to)return Er}}this.index[gr]++,Cr+Er.length>=Math.max(this.safeFrom,hr)&&(this.trees.push(Er),this.start.push(Cr),this.index.push(0))}else this.index[gr]++,this.nextStart=Cr+Er.length}}}class TokenCache{constructor(hr,gr){this.stream=gr,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=hr.tokenizers.map(vr=>new CachedToken)}getActions(hr){let gr=0,vr=null,{parser:xr}=hr.p,{tokenizers:Er}=xr,Cr=xr.stateSlot(hr.state,3),wr=hr.curContext?hr.curContext.hash:0,Rr=0;for(let kr=0;kr<Er.length;kr++){if(!(1<<kr&Cr))continue;let Dr=Er[kr],Br=this.tokens[kr];if(!(vr&&!Dr.fallback)&&((Dr.contextual||Br.start!=hr.pos||Br.mask!=Cr||Br.context!=wr)&&(this.updateCachedToken(Br,Dr,hr),Br.mask=Cr,Br.context=wr),Br.lookAhead>Br.end+25&&(Rr=Math.max(Br.lookAhead,Rr)),Br.value!=0)){let Hr=gr;if(Br.extended>-1&&(gr=this.addActions(hr,Br.extended,Br.end,gr)),gr=this.addActions(hr,Br.value,Br.end,gr),!Dr.extend&&(vr=Br,gr>Hr))break}}for(;this.actions.length>gr;)this.actions.pop();return Rr&&hr.setLookAhead(Rr),!vr&&hr.pos==this.stream.end&&(vr=new CachedToken,vr.value=hr.p.parser.eofTerm,vr.start=vr.end=hr.pos,gr=this.addActions(hr,vr.value,vr.end,gr)),this.mainToken=vr,this.actions}getMainToken(hr){if(this.mainToken)return this.mainToken;let gr=new CachedToken,{pos:vr,p:xr}=hr;return gr.start=vr,gr.end=Math.min(vr+1,xr.stream.end),gr.value=vr==xr.stream.end?xr.parser.eofTerm:0,gr}updateCachedToken(hr,gr,vr){let xr=this.stream.clipPos(vr.pos);if(gr.token(this.stream.reset(xr,hr),vr),hr.value>-1){let{parser:Er}=vr.p;for(let Cr=0;Cr<Er.specialized.length;Cr++)if(Er.specialized[Cr]==hr.value){let wr=Er.specializers[Cr](this.stream.read(hr.start,hr.end),vr);if(wr>=0&&vr.p.parser.dialect.allows(wr>>1)){wr&1?hr.extended=wr>>1:hr.value=wr>>1;break}}}else hr.value=0,hr.end=this.stream.clipPos(xr+1)}putAction(hr,gr,vr,xr){for(let Er=0;Er<xr;Er+=3)if(this.actions[Er]==hr)return xr;return this.actions[xr++]=hr,this.actions[xr++]=gr,this.actions[xr++]=vr,xr}addActions(hr,gr,vr,xr){let{state:Er}=hr,{parser:Cr}=hr.p,{data:wr}=Cr;for(let Rr=0;Rr<2;Rr++)for(let kr=Cr.stateSlot(Er,Rr?2:1);;kr+=3){if(wr[kr]==65535)if(wr[kr+1]==1)kr=pair(wr,kr+2);else{xr==0&&wr[kr+1]==2&&(xr=this.putAction(pair(wr,kr+2),gr,vr,xr));break}wr[kr]==gr&&(xr=this.putAction(pair(wr,kr+1),gr,vr,xr))}return xr}}class Parse{constructor(hr,gr,vr,xr){this.parser=hr,this.input=gr,this.ranges=xr,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new InputStream(gr,xr),this.tokens=new TokenCache(hr,this.stream),this.topTerm=hr.top[1];let{from:Er}=xr[0];this.stacks=[Stack$6.start(this,hr.top[0],Er)],this.fragments=vr.length&&this.stream.end-Er>hr.bufferLength*4?new FragmentCursor(vr,hr.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let hr=this.stacks,gr=this.minStackPos,vr=this.stacks=[],xr,Er;if(this.bigReductionCount>300&&hr.length==1){let[Cr]=hr;for(;Cr.forceReduce()&&Cr.stack.length&&Cr.stack[Cr.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let Cr=0;Cr<hr.length;Cr++){let wr=hr[Cr];for(;;){if(this.tokens.mainToken=null,wr.pos>gr)vr.push(wr);else{if(this.advanceStack(wr,vr,hr))continue;{xr||(xr=[],Er=[]),xr.push(wr);let Rr=this.tokens.getMainToken(wr);Er.push(Rr.value,Rr.end)}}break}}if(!vr.length){let Cr=xr&&findFinished(xr);if(Cr)return verbose&&console.log("Finish with "+this.stackID(Cr)),this.stackToTree(Cr);if(this.parser.strict)throw verbose&&xr&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+gr);this.recovering||(this.recovering=5)}if(this.recovering&&xr){let Cr=this.stoppedAt!=null&&xr[0].pos>this.stoppedAt?xr[0]:this.runRecovery(xr,Er,vr);if(Cr)return verbose&&console.log("Force-finish "+this.stackID(Cr)),this.stackToTree(Cr.forceAll())}if(this.recovering){let Cr=this.recovering==1?1:this.recovering*3;if(vr.length>Cr)for(vr.sort((wr,Rr)=>Rr.score-wr.score);vr.length>Cr;)vr.pop();vr.some(wr=>wr.reducePos>gr)&&this.recovering--}else if(vr.length>1){e:for(let Cr=0;Cr<vr.length-1;Cr++){let wr=vr[Cr];for(let Rr=Cr+1;Rr<vr.length;Rr++){let kr=vr[Rr];if(wr.sameState(kr)||wr.buffer.length>500&&kr.buffer.length>500)if((wr.score-kr.score||wr.buffer.length-kr.buffer.length)>0)vr.splice(Rr--,1);else{vr.splice(Cr--,1);continue e}}}vr.length>12&&vr.splice(12,vr.length-12)}this.minStackPos=vr[0].pos;for(let Cr=1;Cr<vr.length;Cr++)vr[Cr].pos<this.minStackPos&&(this.minStackPos=vr[Cr].pos);return null}stopAt(hr){if(this.stoppedAt!=null&&this.stoppedAt<hr)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=hr}advanceStack(hr,gr,vr){let xr=hr.pos,{parser:Er}=this,Cr=verbose?this.stackID(hr)+" -> ":"";if(this.stoppedAt!=null&&xr>this.stoppedAt)return hr.forceReduce()?hr:null;if(this.fragments){let kr=hr.curContext&&hr.curContext.tracker.strict,Dr=kr?hr.curContext.hash:0;for(let Br=this.fragments.nodeAt(xr);Br;){let Hr=this.parser.nodeSet.types[Br.type.id]==Br.type?Er.getGoto(hr.state,Br.type.id):-1;if(Hr>-1&&Br.length&&(!kr||(Br.prop(NodeProp.contextHash)||0)==Dr))return hr.useNode(Br,Hr),verbose&&console.log(Cr+this.stackID(hr)+` (via reuse of ${Er.getName(Br.type.id)})`),!0;if(!(Br instanceof Tree)||Br.children.length==0||Br.positions[0]>0)break;let Gr=Br.children[0];if(Gr instanceof Tree&&Br.positions[0]==0)Br=Gr;else break}}let wr=Er.stateSlot(hr.state,4);if(wr>0)return hr.reduce(wr),verbose&&console.log(Cr+this.stackID(hr)+` (via always-reduce ${Er.getName(wr&65535)})`),!0;if(hr.stack.length>=8400)for(;hr.stack.length>6e3&&hr.forceReduce(););let Rr=this.tokens.getActions(hr);for(let kr=0;kr<Rr.length;){let Dr=Rr[kr++],Br=Rr[kr++],Hr=Rr[kr++],Gr=kr==Rr.length||!vr,qr=Gr?hr:hr.split(),zr=this.tokens.mainToken;if(qr.apply(Dr,Br,zr?zr.start:qr.pos,Hr),verbose&&console.log(Cr+this.stackID(qr)+` (via ${Dr&65536?`reduce of ${Er.getName(Dr&65535)}`:"shift"} for ${Er.getName(Br)} @ ${xr}${qr==hr?"":", split"})`),Gr)return!0;qr.pos>xr?gr.push(qr):vr.push(qr)}return!1}advanceFully(hr,gr){let vr=hr.pos;for(;;){if(!this.advanceStack(hr,null,null))return!1;if(hr.pos>vr)return pushStackDedup(hr,gr),!0}}runRecovery(hr,gr,vr){let xr=null,Er=!1;for(let Cr=0;Cr<hr.length;Cr++){let wr=hr[Cr],Rr=gr[Cr<<1],kr=gr[(Cr<<1)+1],Dr=verbose?this.stackID(wr)+" -> ":"";if(wr.deadEnd&&(Er||(Er=!0,wr.restart(),verbose&&console.log(Dr+this.stackID(wr)+" (restarted)"),this.advanceFully(wr,vr))))continue;let Br=wr.split(),Hr=Dr;for(let Gr=0;Br.forceReduce()&&Gr<10&&(verbose&&console.log(Hr+this.stackID(Br)+" (via force-reduce)"),!this.advanceFully(Br,vr));Gr++)verbose&&(Hr=this.stackID(Br)+" -> ");for(let Gr of wr.recoverByInsert(Rr))verbose&&console.log(Dr+this.stackID(Gr)+" (via recover-insert)"),this.advanceFully(Gr,vr);this.stream.end>wr.pos?(kr==wr.pos&&(kr++,Rr=0),wr.recoverByDelete(Rr,kr),verbose&&console.log(Dr+this.stackID(wr)+` (via recover-delete ${this.parser.getName(Rr)})`),pushStackDedup(wr,vr)):(!xr||xr.score<wr.score)&&(xr=wr)}return xr}stackToTree(hr){return hr.close(),Tree.build({buffer:StackBufferCursor.create(hr),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:hr.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(hr){let gr=(stackIDs||(stackIDs=new WeakMap)).get(hr);return gr||stackIDs.set(hr,gr=String.fromCodePoint(this.nextStackID++)),gr+hr}}function pushStackDedup(mr,hr){for(let gr=0;gr<hr.length;gr++){let vr=hr[gr];if(vr.pos==mr.pos&&vr.sameState(mr)){hr[gr].score<mr.score&&(hr[gr]=mr);return}}hr.push(mr)}class Dialect{constructor(hr,gr,vr){this.source=hr,this.flags=gr,this.disabled=vr}allows(hr){return!this.disabled||this.disabled[hr]==0}}class LRParser extends Parser{constructor(hr){if(super(),this.wrappers=[],hr.version!=14)throw new RangeError(`Parser version (${hr.version}) doesn't match runtime version (14)`);let gr=hr.nodeNames.split(" ");this.minRepeatTerm=gr.length;for(let wr=0;wr<hr.repeatNodeCount;wr++)gr.push("");let vr=Object.keys(hr.topRules).map(wr=>hr.topRules[wr][1]),xr=[];for(let wr=0;wr<gr.length;wr++)xr.push([]);function Er(wr,Rr,kr){xr[wr].push([Rr,Rr.deserialize(String(kr))])}if(hr.nodeProps)for(let wr of hr.nodeProps){let Rr=wr[0];typeof Rr=="string"&&(Rr=NodeProp[Rr]);for(let kr=1;kr<wr.length;){let Dr=wr[kr++];if(Dr>=0)Er(Dr,Rr,wr[kr++]);else{let Br=wr[kr+-Dr];for(let Hr=-Dr;Hr>0;Hr--)Er(wr[kr++],Rr,Br);kr++}}}this.nodeSet=new NodeSet(gr.map((wr,Rr)=>NodeType.define({name:Rr>=this.minRepeatTerm?void 0:wr,id:Rr,props:xr[Rr],top:vr.indexOf(Rr)>-1,error:Rr==0,skipped:hr.skippedNodes&&hr.skippedNodes.indexOf(Rr)>-1}))),hr.propSources&&(this.nodeSet=this.nodeSet.extend(...hr.propSources)),this.strict=!1,this.bufferLength=DefaultBufferLength;let Cr=decodeArray(hr.tokenData);this.context=hr.context,this.specializerSpecs=hr.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let wr=0;wr<this.specializerSpecs.length;wr++)this.specialized[wr]=this.specializerSpecs[wr].term;this.specializers=this.specializerSpecs.map(getSpecializer),this.states=decodeArray(hr.states,Uint32Array),this.data=decodeArray(hr.stateData),this.goto=decodeArray(hr.goto),this.maxTerm=hr.maxTerm,this.tokenizers=hr.tokenizers.map(wr=>typeof wr=="number"?new TokenGroup(Cr,wr):wr),this.topRules=hr.topRules,this.dialects=hr.dialects||{},this.dynamicPrecedences=hr.dynamicPrecedences||null,this.tokenPrecTable=hr.tokenPrec,this.termNames=hr.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(hr,gr,vr){let xr=new Parse(this,hr,gr,vr);for(let Er of this.wrappers)xr=Er(xr,hr,gr,vr);return xr}getGoto(hr,gr,vr=!1){let xr=this.goto;if(gr>=xr[0])return-1;for(let Er=xr[gr+1];;){let Cr=xr[Er++],wr=Cr&1,Rr=xr[Er++];if(wr&&vr)return Rr;for(let kr=Er+(Cr>>1);Er<kr;Er++)if(xr[Er]==hr)return Rr;if(wr)return-1}}hasAction(hr,gr){let vr=this.data;for(let xr=0;xr<2;xr++)for(let Er=this.stateSlot(hr,xr?2:1),Cr;;Er+=3){if((Cr=vr[Er])==65535)if(vr[Er+1]==1)Cr=vr[Er=pair(vr,Er+2)];else{if(vr[Er+1]==2)return pair(vr,Er+2);break}if(Cr==gr||Cr==0)return pair(vr,Er+1)}return 0}stateSlot(hr,gr){return this.states[hr*6+gr]}stateFlag(hr,gr){return(this.stateSlot(hr,0)&gr)>0}validAction(hr,gr){return!!this.allActions(hr,vr=>vr==gr?!0:null)}allActions(hr,gr){let vr=this.stateSlot(hr,4),xr=vr?gr(vr):void 0;for(let Er=this.stateSlot(hr,1);xr==null;Er+=3){if(this.data[Er]==65535)if(this.data[Er+1]==1)Er=pair(this.data,Er+2);else break;xr=gr(pair(this.data,Er+1))}return xr}nextStates(hr){let gr=[];for(let vr=this.stateSlot(hr,1);;vr+=3){if(this.data[vr]==65535)if(this.data[vr+1]==1)vr=pair(this.data,vr+2);else break;if(!(this.data[vr+2]&1)){let xr=this.data[vr+1];gr.some((Er,Cr)=>Cr&1&&Er==xr)||gr.push(this.data[vr],xr)}}return gr}configure(hr){let gr=Object.assign(Object.create(LRParser.prototype),this);if(hr.props&&(gr.nodeSet=this.nodeSet.extend(...hr.props)),hr.top){let vr=this.topRules[hr.top];if(!vr)throw new RangeError(`Invalid top rule name ${hr.top}`);gr.top=vr}return hr.tokenizers&&(gr.tokenizers=this.tokenizers.map(vr=>{let xr=hr.tokenizers.find(Er=>Er.from==vr);return xr?xr.to:vr})),hr.specializers&&(gr.specializers=this.specializers.slice(),gr.specializerSpecs=this.specializerSpecs.map((vr,xr)=>{let Er=hr.specializers.find(wr=>wr.from==vr.external);if(!Er)return vr;let Cr=Object.assign(Object.assign({},vr),{external:Er.to});return gr.specializers[xr]=getSpecializer(Cr),Cr})),hr.contextTracker&&(gr.context=hr.contextTracker),hr.dialect&&(gr.dialect=this.parseDialect(hr.dialect)),hr.strict!=null&&(gr.strict=hr.strict),hr.wrap&&(gr.wrappers=gr.wrappers.concat(hr.wrap)),hr.bufferLength!=null&&(gr.bufferLength=hr.bufferLength),gr}hasWrappers(){return this.wrappers.length>0}getName(hr){return this.termNames?this.termNames[hr]:String(hr<=this.maxNode&&this.nodeSet.types[hr].name||hr)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(hr){let gr=this.dynamicPrecedences;return gr==null?0:gr[hr]||0}parseDialect(hr){let gr=Object.keys(this.dialects),vr=gr.map(()=>!1);if(hr)for(let Er of hr.split(" ")){let Cr=gr.indexOf(Er);Cr>=0&&(vr[Cr]=!0)}let xr=null;for(let Er=0;Er<gr.length;Er++)if(!vr[Er])for(let Cr=this.dialects[gr[Er]],wr;(wr=this.data[Cr++])!=65535;)(xr||(xr=new Uint8Array(this.maxTerm+1)))[wr]=1;return new Dialect(hr,vr,xr)}static deserialize(hr){return new LRParser(hr)}}function pair(mr,hr){return mr[hr]|mr[hr+1]<<16}function findFinished(mr){let hr=null;for(let gr of mr){let vr=gr.p.stoppedAt;(gr.pos==gr.p.stream.end||vr!=null&&gr.pos>vr)&&gr.p.parser.stateFlag(gr.state,2)&&(!hr||hr.score<gr.score)&&(hr=gr)}return hr}function getSpecializer(mr){if(mr.external){let hr=mr.extend?1:0;return(gr,vr)=>mr.external(gr,vr)<<1|hr}return mr.get}let nextTagID=0,Tag$1=class Hh{constructor(hr,gr,vr,xr){this.name=hr,this.set=gr,this.base=vr,this.modified=xr,this.id=nextTagID++}toString(){let{name:hr}=this;for(let gr of this.modified)gr.name&&(hr=`${gr.name}(${hr})`);return hr}static define(hr,gr){let vr=typeof hr=="string"?hr:"?";if(hr instanceof Hh&&(gr=hr),gr?.base)throw new Error("Can not derive from a modified tag");let xr=new Hh(vr,[],null,[]);if(xr.set.push(xr),gr)for(let Er of gr.set)xr.set.push(Er);return xr}static defineModifier(hr){let gr=new Modifier(hr);return vr=>vr.modified.indexOf(gr)>-1?vr:Modifier.get(vr.base||vr,vr.modified.concat(gr).sort((xr,Er)=>xr.id-Er.id))}},nextModifierID=0;class Modifier{constructor(hr){this.name=hr,this.instances=[],this.id=nextModifierID++}static get(hr,gr){if(!gr.length)return hr;let vr=gr[0].instances.find(wr=>wr.base==hr&&sameArray$1(gr,wr.modified));if(vr)return vr;let xr=[],Er=new Tag$1(hr.name,xr,hr,gr);for(let wr of gr)wr.instances.push(Er);let Cr=powerSet(gr);for(let wr of hr.set)if(!wr.modified.length)for(let Rr of Cr)xr.push(Modifier.get(wr,Rr));return Er}}function sameArray$1(mr,hr){return mr.length==hr.length&&mr.every((gr,vr)=>gr==hr[vr])}function powerSet(mr){let hr=[[]];for(let gr=0;gr<mr.length;gr++)for(let vr=0,xr=hr.length;vr<xr;vr++)hr.push(hr[vr].concat(mr[gr]));return hr.sort((gr,vr)=>vr.length-gr.length)}function styleTags(mr){let hr=Object.create(null);for(let gr in mr){let vr=mr[gr];Array.isArray(vr)||(vr=[vr]);for(let xr of gr.split(" "))if(xr){let Er=[],Cr=2,wr=xr;for(let Br=0;;){if(wr=="..."&&Br>0&&Br+3==xr.length){Cr=1;break}let Hr=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(wr);if(!Hr)throw new RangeError("Invalid path: "+xr);if(Er.push(Hr[0]=="*"?"":Hr[0][0]=='"'?JSON.parse(Hr[0]):Hr[0]),Br+=Hr[0].length,Br==xr.length)break;let Gr=xr[Br++];if(Br==xr.length&&Gr=="!"){Cr=0;break}if(Gr!="/")throw new RangeError("Invalid path: "+xr);wr=xr.slice(Br)}let Rr=Er.length-1,kr=Er[Rr];if(!kr)throw new RangeError("Invalid path: "+xr);let Dr=new Rule(vr,Cr,Rr>0?Er.slice(0,Rr):null);hr[kr]=Dr.sort(hr[kr])}}return ruleNodeProp.add(hr)}const ruleNodeProp=new NodeProp;class Rule{constructor(hr,gr,vr,xr){this.tags=hr,this.mode=gr,this.context=vr,this.next=xr}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(hr){return!hr||hr.depth<this.depth?(this.next=hr,this):(hr.next=this.sort(hr.next),hr)}get depth(){return this.context?this.context.length:0}}Rule.empty=new Rule([],2,null);function tagHighlighter(mr,hr){let gr=Object.create(null);for(let Er of mr)if(!Array.isArray(Er.tag))gr[Er.tag.id]=Er.class;else for(let Cr of Er.tag)gr[Cr.id]=Er.class;let{scope:vr,all:xr=null}=hr||{};return{style:Er=>{let Cr=xr;for(let wr of Er)for(let Rr of wr.set){let kr=gr[Rr.id];if(kr){Cr=Cr?Cr+" "+kr:kr;break}}return Cr},scope:vr}}function highlightTags(mr,hr){let gr=null;for(let vr of mr){let xr=vr.style(hr);xr&&(gr=gr?gr+" "+xr:xr)}return gr}function highlightTree(mr,hr,gr,vr=0,xr=mr.length){let Er=new HighlightBuilder(vr,Array.isArray(hr)?hr:[hr],gr);Er.highlightRange(mr.cursor(),vr,xr,"",Er.highlighters),Er.flush(xr)}class HighlightBuilder{constructor(hr,gr,vr){this.at=hr,this.highlighters=gr,this.span=vr,this.class=""}startSpan(hr,gr){gr!=this.class&&(this.flush(hr),hr>this.at&&(this.at=hr),this.class=gr)}flush(hr){hr>this.at&&this.class&&this.span(this.at,hr,this.class)}highlightRange(hr,gr,vr,xr,Er){let{type:Cr,from:wr,to:Rr}=hr;if(wr>=vr||Rr<=gr)return;Cr.isTop&&(Er=this.highlighters.filter(Gr=>!Gr.scope||Gr.scope(Cr)));let kr=xr,Dr=getStyleTags(hr)||Rule.empty,Br=highlightTags(Er,Dr.tags);if(Br&&(kr&&(kr+=" "),kr+=Br,Dr.mode==1&&(xr+=(xr?" ":"")+Br)),this.startSpan(Math.max(gr,wr),kr),Dr.opaque)return;let Hr=hr.tree&&hr.tree.prop(NodeProp.mounted);if(Hr&&Hr.overlay){let Gr=hr.node.enter(Hr.overlay[0].from+wr,1),qr=this.highlighters.filter(Qr=>!Qr.scope||Qr.scope(Hr.tree.type)),zr=hr.firstChild();for(let Qr=0,sn=wr;;Qr++){let hn=Qr<Hr.overlay.length?Hr.overlay[Qr]:null,vn=hn?hn.from+wr:Rr,yn=Math.max(gr,sn),gn=Math.min(vr,vn);if(yn<gn&&zr)for(;hr.from<gn&&(this.highlightRange(hr,yn,gn,xr,Er),this.startSpan(Math.min(gn,hr.to),kr),!(hr.to>=vn||!hr.nextSibling())););if(!hn||vn>vr)break;sn=hn.to+wr,sn>gr&&(this.highlightRange(Gr.cursor(),Math.max(gr,hn.from+wr),Math.min(vr,sn),"",qr),this.startSpan(Math.min(vr,sn),kr))}zr&&hr.parent()}else if(hr.firstChild()){Hr&&(xr="");do if(!(hr.to<=gr)){if(hr.from>=vr)break;this.highlightRange(hr,gr,vr,xr,Er),this.startSpan(Math.min(vr,hr.to),kr)}while(hr.nextSibling());hr.parent()}}}function getStyleTags(mr){let hr=mr.type.prop(ruleNodeProp);for(;hr&&hr.context&&!mr.matchContext(hr.context);)hr=hr.next;return hr||null}const t$3=Tag$1.define,comment$1=t$3(),name=t$3(),typeName=t$3(name),propertyName=t$3(name),literal=t$3(),string$1=t$3(literal),number$1=t$3(literal),content=t$3(),heading=t$3(content),keyword=t$3(),operator=t$3(),punctuation=t$3(),bracket=t$3(punctuation),meta=t$3(),tags={comment:comment$1,lineComment:t$3(comment$1),blockComment:t$3(comment$1),docComment:t$3(comment$1),name,variableName:t$3(name),typeName,tagName:t$3(typeName),propertyName,attributeName:t$3(propertyName),className:t$3(name),labelName:t$3(name),namespace:t$3(name),macroName:t$3(name),literal,string:string$1,docString:t$3(string$1),character:t$3(string$1),attributeValue:t$3(string$1),number:number$1,integer:t$3(number$1),float:t$3(number$1),bool:t$3(literal),regexp:t$3(literal),escape:t$3(literal),color:t$3(literal),url:t$3(literal),keyword,self:t$3(keyword),null:t$3(keyword),atom:t$3(keyword),unit:t$3(keyword),modifier:t$3(keyword),operatorKeyword:t$3(keyword),controlKeyword:t$3(keyword),definitionKeyword:t$3(keyword),moduleKeyword:t$3(keyword),operator,derefOperator:t$3(operator),arithmeticOperator:t$3(operator),logicOperator:t$3(operator),bitwiseOperator:t$3(operator),compareOperator:t$3(operator),updateOperator:t$3(operator),definitionOperator:t$3(operator),typeOperator:t$3(operator),controlOperator:t$3(operator),punctuation,separator:t$3(punctuation),bracket,angleBracket:t$3(bracket),squareBracket:t$3(bracket),paren:t$3(bracket),brace:t$3(bracket),content,heading,heading1:t$3(heading),heading2:t$3(heading),heading3:t$3(heading),heading4:t$3(heading),heading5:t$3(heading),heading6:t$3(heading),contentSeparator:t$3(content),list:t$3(content),quote:t$3(content),emphasis:t$3(content),strong:t$3(content),link:t$3(content),monospace:t$3(content),strikethrough:t$3(content),inserted:t$3(),deleted:t$3(),changed:t$3(),invalid:t$3(),meta,documentMeta:t$3(meta),annotation:t$3(meta),processingInstruction:t$3(meta),definition:Tag$1.defineModifier("definition"),constant:Tag$1.defineModifier("constant"),function:Tag$1.defineModifier("function"),standard:Tag$1.defineModifier("standard"),local:Tag$1.defineModifier("local"),special:Tag$1.defineModifier("special")};for(let mr in tags){let hr=tags[mr];hr instanceof Tag$1&&(hr.name=mr)}tagHighlighter([{tag:tags.link,class:"tok-link"},{tag:tags.heading,class:"tok-heading"},{tag:tags.emphasis,class:"tok-emphasis"},{tag:tags.strong,class:"tok-strong"},{tag:tags.keyword,class:"tok-keyword"},{tag:tags.atom,class:"tok-atom"},{tag:tags.bool,class:"tok-bool"},{tag:tags.url,class:"tok-url"},{tag:tags.labelName,class:"tok-labelName"},{tag:tags.inserted,class:"tok-inserted"},{tag:tags.deleted,class:"tok-deleted"},{tag:tags.literal,class:"tok-literal"},{tag:tags.string,class:"tok-string"},{tag:tags.number,class:"tok-number"},{tag:[tags.regexp,tags.escape,tags.special(tags.string)],class:"tok-string2"},{tag:tags.variableName,class:"tok-variableName"},{tag:tags.local(tags.variableName),class:"tok-variableName tok-local"},{tag:tags.definition(tags.variableName),class:"tok-variableName tok-definition"},{tag:tags.special(tags.variableName),class:"tok-variableName2"},{tag:tags.definition(tags.propertyName),class:"tok-propertyName tok-definition"},{tag:tags.typeName,class:"tok-typeName"},{tag:tags.namespace,class:"tok-namespace"},{tag:tags.className,class:"tok-className"},{tag:tags.macroName,class:"tok-macroName"},{tag:tags.propertyName,class:"tok-propertyName"},{tag:tags.operator,class:"tok-operator"},{tag:tags.comment,class:"tok-comment"},{tag:tags.meta,class:"tok-meta"},{tag:tags.invalid,class:"tok-invalid"},{tag:tags.punctuation,class:"tok-punctuation"}]);const jsonHighlighting=styleTags({String:tags.string,Number:tags.number,"True False":tags.bool,PropertyName:tags.propertyName,Null:tags.null,", :":tags.separator,"[ ]":tags.squareBracket,"{ }":tags.brace}),parser=LRParser.deserialize({version:14,states:"$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#ClOOQO'#Cr'#CrQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CtOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59W,59WO!iQPO,59WOVQPO,59QOqQPO'#CmO!nQPO,59`OOQO1G.k1G.kOVQPO'#CnO!vQPO,59aOOQO1G.r1G.rOOQO1G.l1G.lOOQO,59X,59XOOQO-E6k-E6kOOQO,59Y,59YOOQO-E6l-E6l",stateData:"#O~OeOS~OQSORSOSSOTSOWQO_ROgPO~OVXOgUO~O^[O~PVO[^O~O]_OVhX~OVaO~O]bO^iX~O^dO~O]_OVha~O]bO^ia~O",goto:"!kjPPPPPPkPPkqwPPPPk{!RPPP!XP!e!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",nodeNames:"⚠ JsonText True False Null Number String } { Object Property PropertyName : , ] [ Array",maxTerm:25,nodeProps:[["isolate",-2,6,11,""],["openedBy",7,"{",14,"["],["closedBy",8,"}",15,"]"]],propSources:[jsonHighlighting],skippedNodes:[0],repeatNodeCount:2,tokenData:"(|~RaXY!WYZ!W]^!Wpq!Wrs!]|}$u}!O$z!Q!R%T!R![&c![!]&t!}#O&y#P#Q'O#Y#Z'T#b#c'r#h#i(Z#o#p(r#q#r(w~!]Oe~~!`Wpq!]qr!]rs!xs#O!]#O#P!}#P;'S!];'S;=`$o<%lO!]~!}Og~~#QXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#m~#pR!Q![#y!c!i#y#T#Z#y~#|R!Q![$V!c!i$V#T#Z$V~$YR!Q![$c!c!i$c#T#Z$c~$fR!Q![!]!c!i!]#T#Z!]~$rP;=`<%l!]~$zO]~~$}Q!Q!R%T!R![&c~%YRT~!O!P%c!g!h%w#X#Y%w~%fP!Q![%i~%nRT~!Q![%i!g!h%w#X#Y%w~%zR{|&T}!O&T!Q![&Z~&WP!Q![&Z~&`PT~!Q![&Z~&hST~!O!P%c!Q![&c!g!h%w#X#Y%w~&yO[~~'OO_~~'TO^~~'WP#T#U'Z~'^P#`#a'a~'dP#g#h'g~'jP#X#Y'm~'rOR~~'uP#i#j'x~'{P#`#a(O~(RP#`#a(U~(ZOS~~(^P#f#g(a~(dP#i#j(g~(jP#X#Y(m~(rOQ~~(wOW~~(|OV~",tokenizers:[0],topRules:{JsonText:[0,1]},tokenPrec:0});let rangeFrom=[],rangeTo=[];(()=>{let mr="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(hr=>hr?parseInt(hr,36):1);for(let hr=0,gr=0;hr<mr.length;hr++)(hr%2?rangeTo:rangeFrom).push(gr=gr+mr[hr])})();function isExtendingChar(mr){if(mr<768)return!1;for(let hr=0,gr=rangeFrom.length;;){let vr=hr+gr>>1;if(mr<rangeFrom[vr])gr=vr;else if(mr>=rangeTo[vr])hr=vr+1;else return!0;if(hr==gr)return!1}}function isRegionalIndicator(mr){return mr>=127462&&mr<=127487}const ZWJ=8205;function findClusterBreak$1(mr,hr,gr=!0,vr=!0){return(gr?nextClusterBreak:prevClusterBreak)(mr,hr,vr)}function nextClusterBreak(mr,hr,gr){if(hr==mr.length)return hr;hr&&surrogateLow$1(mr.charCodeAt(hr))&&surrogateHigh$1(mr.charCodeAt(hr-1))&&hr--;let vr=codePointAt$1(mr,hr);for(hr+=codePointSize$1(vr);hr<mr.length;){let xr=codePointAt$1(mr,hr);if(vr==ZWJ||xr==ZWJ||gr&&isExtendingChar(xr))hr+=codePointSize$1(xr),vr=xr;else if(isRegionalIndicator(xr)){let Er=0,Cr=hr-2;for(;Cr>=0&&isRegionalIndicator(codePointAt$1(mr,Cr));)Er++,Cr-=2;if(Er%2==0)break;hr+=2}else break}return hr}function prevClusterBreak(mr,hr,gr){for(;hr>0;){let vr=nextClusterBreak(mr,hr-2,gr);if(vr<hr)return vr;hr--}return 0}function codePointAt$1(mr,hr){let gr=mr.charCodeAt(hr);if(!surrogateHigh$1(gr)||hr+1==mr.length)return gr;let vr=mr.charCodeAt(hr+1);return surrogateLow$1(vr)?(gr-55296<<10)+(vr-56320)+65536:gr}function surrogateLow$1(mr){return mr>=56320&&mr<57344}function surrogateHigh$1(mr){return mr>=55296&&mr<56320}function codePointSize$1(mr){return mr<65536?1:2}let Text$1=class Rp{lineAt(hr){if(hr<0||hr>this.length)throw new RangeError(`Invalid position ${hr} in document of length ${this.length}`);return this.lineInner(hr,!1,1,0)}line(hr){if(hr<1||hr>this.lines)throw new RangeError(`Invalid line number ${hr} in ${this.lines}-line document`);return this.lineInner(hr,!0,1,0)}replace(hr,gr,vr){[hr,gr]=clip(this,hr,gr);let xr=[];return this.decompose(0,hr,xr,2),vr.length&&vr.decompose(0,vr.length,xr,3),this.decompose(gr,this.length,xr,1),TextNode.from(xr,this.length-(gr-hr)+vr.length)}append(hr){return this.replace(this.length,this.length,hr)}slice(hr,gr=this.length){[hr,gr]=clip(this,hr,gr);let vr=[];return this.decompose(hr,gr,vr,0),TextNode.from(vr,gr-hr)}eq(hr){if(hr==this)return!0;if(hr.length!=this.length||hr.lines!=this.lines)return!1;let gr=this.scanIdentical(hr,1),vr=this.length-this.scanIdentical(hr,-1),xr=new RawTextCursor(this),Er=new RawTextCursor(hr);for(let Cr=gr,wr=gr;;){if(xr.next(Cr),Er.next(Cr),Cr=0,xr.lineBreak!=Er.lineBreak||xr.done!=Er.done||xr.value!=Er.value)return!1;if(wr+=xr.value.length,xr.done||wr>=vr)return!0}}iter(hr=1){return new RawTextCursor(this,hr)}iterRange(hr,gr=this.length){return new PartialTextCursor(this,hr,gr)}iterLines(hr,gr){let vr;if(hr==null)vr=this.iter();else{gr==null&&(gr=this.lines+1);let xr=this.line(hr).from;vr=this.iterRange(xr,Math.max(xr,gr==this.lines+1?this.length:gr<=1?0:this.line(gr-1).to))}return new LineCursor(vr)}toString(){return this.sliceString(0)}toJSON(){let hr=[];return this.flatten(hr),hr}constructor(){}static of(hr){if(hr.length==0)throw new RangeError("A document must have at least one line");return hr.length==1&&!hr[0]?Rp.empty:hr.length<=32?new TextLeaf(hr):TextNode.from(TextLeaf.split(hr,[]))}};class TextLeaf extends Text$1{constructor(hr,gr=textLength(hr)){super(),this.text=hr,this.length=gr}get lines(){return this.text.length}get children(){return null}lineInner(hr,gr,vr,xr){for(let Er=0;;Er++){let Cr=this.text[Er],wr=xr+Cr.length;if((gr?vr:wr)>=hr)return new Line(xr,wr,vr,Cr);xr=wr+1,vr++}}decompose(hr,gr,vr,xr){let Er=hr<=0&&gr>=this.length?this:new TextLeaf(sliceText(this.text,hr,gr),Math.min(gr,this.length)-Math.max(0,hr));if(xr&1){let Cr=vr.pop(),wr=appendText(Er.text,Cr.text.slice(),0,Er.length);if(wr.length<=32)vr.push(new TextLeaf(wr,Cr.length+Er.length));else{let Rr=wr.length>>1;vr.push(new TextLeaf(wr.slice(0,Rr)),new TextLeaf(wr.slice(Rr)))}}else vr.push(Er)}replace(hr,gr,vr){if(!(vr instanceof TextLeaf))return super.replace(hr,gr,vr);[hr,gr]=clip(this,hr,gr);let xr=appendText(this.text,appendText(vr.text,sliceText(this.text,0,hr)),gr),Er=this.length+vr.length-(gr-hr);return xr.length<=32?new TextLeaf(xr,Er):TextNode.from(TextLeaf.split(xr,[]),Er)}sliceString(hr,gr=this.length,vr=`
`){[hr,gr]=clip(this,hr,gr);let xr="";for(let Er=0,Cr=0;Er<=gr&&Cr<this.text.length;Cr++){let wr=this.text[Cr],Rr=Er+wr.length;Er>hr&&Cr&&(xr+=vr),hr<Rr&&gr>Er&&(xr+=wr.slice(Math.max(0,hr-Er),gr-Er)),Er=Rr+1}return xr}flatten(hr){for(let gr of this.text)hr.push(gr)}scanIdentical(){return 0}static split(hr,gr){let vr=[],xr=-1;for(let Er of hr)vr.push(Er),xr+=Er.length+1,vr.length==32&&(gr.push(new TextLeaf(vr,xr)),vr=[],xr=-1);return xr>-1&&gr.push(new TextLeaf(vr,xr)),gr}}class TextNode extends Text$1{constructor(hr,gr){super(),this.children=hr,this.length=gr,this.lines=0;for(let vr of hr)this.lines+=vr.lines}lineInner(hr,gr,vr,xr){for(let Er=0;;Er++){let Cr=this.children[Er],wr=xr+Cr.length,Rr=vr+Cr.lines-1;if((gr?Rr:wr)>=hr)return Cr.lineInner(hr,gr,vr,xr);xr=wr+1,vr=Rr+1}}decompose(hr,gr,vr,xr){for(let Er=0,Cr=0;Cr<=gr&&Er<this.children.length;Er++){let wr=this.children[Er],Rr=Cr+wr.length;if(hr<=Rr&&gr>=Cr){let kr=xr&((Cr<=hr?1:0)|(Rr>=gr?2:0));Cr>=hr&&Rr<=gr&&!kr?vr.push(wr):wr.decompose(hr-Cr,gr-Cr,vr,kr)}Cr=Rr+1}}replace(hr,gr,vr){if([hr,gr]=clip(this,hr,gr),vr.lines<this.lines)for(let xr=0,Er=0;xr<this.children.length;xr++){let Cr=this.children[xr],wr=Er+Cr.length;if(hr>=Er&&gr<=wr){let Rr=Cr.replace(hr-Er,gr-Er,vr),kr=this.lines-Cr.lines+Rr.lines;if(Rr.lines<kr>>4&&Rr.lines>kr>>6){let Dr=this.children.slice();return Dr[xr]=Rr,new TextNode(Dr,this.length-(gr-hr)+vr.length)}return super.replace(Er,wr,Rr)}Er=wr+1}return super.replace(hr,gr,vr)}sliceString(hr,gr=this.length,vr=`
`){[hr,gr]=clip(this,hr,gr);let xr="";for(let Er=0,Cr=0;Er<this.children.length&&Cr<=gr;Er++){let wr=this.children[Er],Rr=Cr+wr.length;Cr>hr&&Er&&(xr+=vr),hr<Rr&&gr>Cr&&(xr+=wr.sliceString(hr-Cr,gr-Cr,vr)),Cr=Rr+1}return xr}flatten(hr){for(let gr of this.children)gr.flatten(hr)}scanIdentical(hr,gr){if(!(hr instanceof TextNode))return 0;let vr=0,[xr,Er,Cr,wr]=gr>0?[0,0,this.children.length,hr.children.length]:[this.children.length-1,hr.children.length-1,-1,-1];for(;;xr+=gr,Er+=gr){if(xr==Cr||Er==wr)return vr;let Rr=this.children[xr],kr=hr.children[Er];if(Rr!=kr)return vr+Rr.scanIdentical(kr,gr);vr+=Rr.length+1}}static from(hr,gr=hr.reduce((vr,xr)=>vr+xr.length+1,-1)){let vr=0;for(let Gr of hr)vr+=Gr.lines;if(vr<32){let Gr=[];for(let qr of hr)qr.flatten(Gr);return new TextLeaf(Gr,gr)}let xr=Math.max(32,vr>>5),Er=xr<<1,Cr=xr>>1,wr=[],Rr=0,kr=-1,Dr=[];function Br(Gr){let qr;if(Gr.lines>Er&&Gr instanceof TextNode)for(let zr of Gr.children)Br(zr);else Gr.lines>Cr&&(Rr>Cr||!Rr)?(Hr(),wr.push(Gr)):Gr instanceof TextLeaf&&Rr&&(qr=Dr[Dr.length-1])instanceof TextLeaf&&Gr.lines+qr.lines<=32?(Rr+=Gr.lines,kr+=Gr.length+1,Dr[Dr.length-1]=new TextLeaf(qr.text.concat(Gr.text),qr.length+1+Gr.length)):(Rr+Gr.lines>xr&&Hr(),Rr+=Gr.lines,kr+=Gr.length+1,Dr.push(Gr))}function Hr(){Rr!=0&&(wr.push(Dr.length==1?Dr[0]:TextNode.from(Dr,kr)),kr=-1,Rr=Dr.length=0)}for(let Gr of hr)Br(Gr);return Hr(),wr.length==1?wr[0]:new TextNode(wr,gr)}}Text$1.empty=new TextLeaf([""],0);function textLength(mr){let hr=-1;for(let gr of mr)hr+=gr.length+1;return hr}function appendText(mr,hr,gr=0,vr=1e9){for(let xr=0,Er=0,Cr=!0;Er<mr.length&&xr<=vr;Er++){let wr=mr[Er],Rr=xr+wr.length;Rr>=gr&&(Rr>vr&&(wr=wr.slice(0,vr-xr)),xr<gr&&(wr=wr.slice(gr-xr)),Cr?(hr[hr.length-1]+=wr,Cr=!1):hr.push(wr)),xr=Rr+1}return hr}function sliceText(mr,hr,gr){return appendText(mr,[""],hr,gr)}class RawTextCursor{constructor(hr,gr=1){this.dir=gr,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[hr],this.offsets=[gr>0?1:(hr instanceof TextLeaf?hr.text.length:hr.children.length)<<1]}nextInner(hr,gr){for(this.done=this.lineBreak=!1;;){let vr=this.nodes.length-1,xr=this.nodes[vr],Er=this.offsets[vr],Cr=Er>>1,wr=xr instanceof TextLeaf?xr.text.length:xr.children.length;if(Cr==(gr>0?wr:0)){if(vr==0)return this.done=!0,this.value="",this;gr>0&&this.offsets[vr-1]++,this.nodes.pop(),this.offsets.pop()}else if((Er&1)==(gr>0?0:1)){if(this.offsets[vr]+=gr,hr==0)return this.lineBreak=!0,this.value=`
`,this;hr--}else if(xr instanceof TextLeaf){let Rr=xr.text[Cr+(gr<0?-1:0)];if(this.offsets[vr]+=gr,Rr.length>Math.max(0,hr))return this.value=hr==0?Rr:gr>0?Rr.slice(hr):Rr.slice(0,Rr.length-hr),this;hr-=Rr.length}else{let Rr=xr.children[Cr+(gr<0?-1:0)];hr>Rr.length?(hr-=Rr.length,this.offsets[vr]+=gr):(gr<0&&this.offsets[vr]--,this.nodes.push(Rr),this.offsets.push(gr>0?1:(Rr instanceof TextLeaf?Rr.text.length:Rr.children.length)<<1))}}}next(hr=0){return hr<0&&(this.nextInner(-hr,-this.dir),hr=this.value.length),this.nextInner(hr,this.dir)}}class PartialTextCursor{constructor(hr,gr,vr){this.value="",this.done=!1,this.cursor=new RawTextCursor(hr,gr>vr?-1:1),this.pos=gr>vr?hr.length:0,this.from=Math.min(gr,vr),this.to=Math.max(gr,vr)}nextInner(hr,gr){if(gr<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;hr+=Math.max(0,gr<0?this.pos-this.to:this.from-this.pos);let vr=gr<0?this.pos-this.from:this.to-this.pos;hr>vr&&(hr=vr),vr-=hr;let{value:xr}=this.cursor.next(hr);return this.pos+=(xr.length+hr)*gr,this.value=xr.length<=vr?xr:gr<0?xr.slice(xr.length-vr):xr.slice(0,vr),this.done=!this.value,this}next(hr=0){return hr<0?hr=Math.max(hr,this.from-this.pos):hr>0&&(hr=Math.min(hr,this.to-this.pos)),this.nextInner(hr,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class LineCursor{constructor(hr){this.inner=hr,this.afterBreak=!0,this.value="",this.done=!1}next(hr=0){let{done:gr,lineBreak:vr,value:xr}=this.inner.next(hr);return gr&&this.afterBreak?(this.value="",this.afterBreak=!1):gr?(this.done=!0,this.value=""):vr?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=xr,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Text$1.prototype[Symbol.iterator]=function(){return this.iter()},RawTextCursor.prototype[Symbol.iterator]=PartialTextCursor.prototype[Symbol.iterator]=LineCursor.prototype[Symbol.iterator]=function(){return this});class Line{constructor(hr,gr,vr,xr){this.from=hr,this.to=gr,this.number=vr,this.text=xr}get length(){return this.to-this.from}}function clip(mr,hr,gr){return hr=Math.max(0,Math.min(mr.length,hr)),[hr,Math.max(hr,Math.min(mr.length,gr))]}function findClusterBreak(mr,hr,gr=!0,vr=!0){return findClusterBreak$1(mr,hr,gr,vr)}function surrogateLow(mr){return mr>=56320&&mr<57344}function surrogateHigh(mr){return mr>=55296&&mr<56320}function codePointAt(mr,hr){let gr=mr.charCodeAt(hr);if(!surrogateHigh(gr)||hr+1==mr.length)return gr;let vr=mr.charCodeAt(hr+1);return surrogateLow(vr)?(gr-55296<<10)+(vr-56320)+65536:gr}function fromCodePoint(mr){return mr<=65535?String.fromCharCode(mr):(mr-=65536,String.fromCharCode((mr>>10)+55296,(mr&1023)+56320))}function codePointSize(mr){return mr<65536?1:2}const DefaultSplit=/\r\n?|\n/;var MapMode=function(mr){return mr[mr.Simple=0]="Simple",mr[mr.TrackDel=1]="TrackDel",mr[mr.TrackBefore=2]="TrackBefore",mr[mr.TrackAfter=3]="TrackAfter",mr}(MapMode||(MapMode={}));class ChangeDesc{constructor(hr){this.sections=hr}get length(){let hr=0;for(let gr=0;gr<this.sections.length;gr+=2)hr+=this.sections[gr];return hr}get newLength(){let hr=0;for(let gr=0;gr<this.sections.length;gr+=2){let vr=this.sections[gr+1];hr+=vr<0?this.sections[gr]:vr}return hr}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(hr){for(let gr=0,vr=0,xr=0;gr<this.sections.length;){let Er=this.sections[gr++],Cr=this.sections[gr++];Cr<0?(hr(vr,xr,Er),xr+=Er):xr+=Cr,vr+=Er}}iterChangedRanges(hr,gr=!1){iterChanges(this,hr,gr)}get invertedDesc(){let hr=[];for(let gr=0;gr<this.sections.length;){let vr=this.sections[gr++],xr=this.sections[gr++];xr<0?hr.push(vr,xr):hr.push(xr,vr)}return new ChangeDesc(hr)}composeDesc(hr){return this.empty?hr:hr.empty?this:composeSets(this,hr)}mapDesc(hr,gr=!1){return hr.empty?this:mapSet(this,hr,gr)}mapPos(hr,gr=-1,vr=MapMode.Simple){let xr=0,Er=0;for(let Cr=0;Cr<this.sections.length;){let wr=this.sections[Cr++],Rr=this.sections[Cr++],kr=xr+wr;if(Rr<0){if(kr>hr)return Er+(hr-xr);Er+=wr}else{if(vr!=MapMode.Simple&&kr>=hr&&(vr==MapMode.TrackDel&&xr<hr&&kr>hr||vr==MapMode.TrackBefore&&xr<hr||vr==MapMode.TrackAfter&&kr>hr))return null;if(kr>hr||kr==hr&&gr<0&&!wr)return hr==xr||gr<0?Er:Er+Rr;Er+=Rr}xr=kr}if(hr>xr)throw new RangeError(`Position ${hr} is out of range for changeset of length ${xr}`);return Er}touchesRange(hr,gr=hr){for(let vr=0,xr=0;vr<this.sections.length&&xr<=gr;){let Er=this.sections[vr++],Cr=this.sections[vr++],wr=xr+Er;if(Cr>=0&&xr<=gr&&wr>=hr)return xr<hr&&wr>gr?"cover":!0;xr=wr}return!1}toString(){let hr="";for(let gr=0;gr<this.sections.length;){let vr=this.sections[gr++],xr=this.sections[gr++];hr+=(hr?" ":"")+vr+(xr>=0?":"+xr:"")}return hr}toJSON(){return this.sections}static fromJSON(hr){if(!Array.isArray(hr)||hr.length%2||hr.some(gr=>typeof gr!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new ChangeDesc(hr)}static create(hr){return new ChangeDesc(hr)}}class ChangeSet extends ChangeDesc{constructor(hr,gr){super(hr),this.inserted=gr}apply(hr){if(this.length!=hr.length)throw new RangeError("Applying change set to a document with the wrong length");return iterChanges(this,(gr,vr,xr,Er,Cr)=>hr=hr.replace(xr,xr+(vr-gr),Cr),!1),hr}mapDesc(hr,gr=!1){return mapSet(this,hr,gr,!0)}invert(hr){let gr=this.sections.slice(),vr=[];for(let xr=0,Er=0;xr<gr.length;xr+=2){let Cr=gr[xr],wr=gr[xr+1];if(wr>=0){gr[xr]=wr,gr[xr+1]=Cr;let Rr=xr>>1;for(;vr.length<Rr;)vr.push(Text$1.empty);vr.push(Cr?hr.slice(Er,Er+Cr):Text$1.empty)}Er+=Cr}return new ChangeSet(gr,vr)}compose(hr){return this.empty?hr:hr.empty?this:composeSets(this,hr,!0)}map(hr,gr=!1){return hr.empty?this:mapSet(this,hr,gr,!0)}iterChanges(hr,gr=!1){iterChanges(this,hr,gr)}get desc(){return ChangeDesc.create(this.sections)}filter(hr){let gr=[],vr=[],xr=[],Er=new SectionIter(this);e:for(let Cr=0,wr=0;;){let Rr=Cr==hr.length?1e9:hr[Cr++];for(;wr<Rr||wr==Rr&&Er.len==0;){if(Er.done)break e;let Dr=Math.min(Er.len,Rr-wr);addSection(xr,Dr,-1);let Br=Er.ins==-1?-1:Er.off==0?Er.ins:0;addSection(gr,Dr,Br),Br>0&&addInsert(vr,gr,Er.text),Er.forward(Dr),wr+=Dr}let kr=hr[Cr++];for(;wr<kr;){if(Er.done)break e;let Dr=Math.min(Er.len,kr-wr);addSection(gr,Dr,-1),addSection(xr,Dr,Er.ins==-1?-1:Er.off==0?Er.ins:0),Er.forward(Dr),wr+=Dr}}return{changes:new ChangeSet(gr,vr),filtered:ChangeDesc.create(xr)}}toJSON(){let hr=[];for(let gr=0;gr<this.sections.length;gr+=2){let vr=this.sections[gr],xr=this.sections[gr+1];xr<0?hr.push(vr):xr==0?hr.push([vr]):hr.push([vr].concat(this.inserted[gr>>1].toJSON()))}return hr}static of(hr,gr,vr){let xr=[],Er=[],Cr=0,wr=null;function Rr(Dr=!1){if(!Dr&&!xr.length)return;Cr<gr&&addSection(xr,gr-Cr,-1);let Br=new ChangeSet(xr,Er);wr=wr?wr.compose(Br.map(wr)):Br,xr=[],Er=[],Cr=0}function kr(Dr){if(Array.isArray(Dr))for(let Br of Dr)kr(Br);else if(Dr instanceof ChangeSet){if(Dr.length!=gr)throw new RangeError(`Mismatched change set length (got ${Dr.length}, expected ${gr})`);Rr(),wr=wr?wr.compose(Dr.map(wr)):Dr}else{let{from:Br,to:Hr=Br,insert:Gr}=Dr;if(Br>Hr||Br<0||Hr>gr)throw new RangeError(`Invalid change range ${Br} to ${Hr} (in doc of length ${gr})`);let qr=Gr?typeof Gr=="string"?Text$1.of(Gr.split(vr||DefaultSplit)):Gr:Text$1.empty,zr=qr.length;if(Br==Hr&&zr==0)return;Br<Cr&&Rr(),Br>Cr&&addSection(xr,Br-Cr,-1),addSection(xr,Hr-Br,zr),addInsert(Er,xr,qr),Cr=Hr}}return kr(hr),Rr(!wr),wr}static empty(hr){return new ChangeSet(hr?[hr,-1]:[],[])}static fromJSON(hr){if(!Array.isArray(hr))throw new RangeError("Invalid JSON representation of ChangeSet");let gr=[],vr=[];for(let xr=0;xr<hr.length;xr++){let Er=hr[xr];if(typeof Er=="number")gr.push(Er,-1);else{if(!Array.isArray(Er)||typeof Er[0]!="number"||Er.some((Cr,wr)=>wr&&typeof Cr!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(Er.length==1)gr.push(Er[0],0);else{for(;vr.length<xr;)vr.push(Text$1.empty);vr[xr]=Text$1.of(Er.slice(1)),gr.push(Er[0],vr[xr].length)}}}return new ChangeSet(gr,vr)}static createSet(hr,gr){return new ChangeSet(hr,gr)}}function addSection(mr,hr,gr,vr=!1){if(hr==0&&gr<=0)return;let xr=mr.length-2;xr>=0&&gr<=0&&gr==mr[xr+1]?mr[xr]+=hr:xr>=0&&hr==0&&mr[xr]==0?mr[xr+1]+=gr:vr?(mr[xr]+=hr,mr[xr+1]+=gr):mr.push(hr,gr)}function addInsert(mr,hr,gr){if(gr.length==0)return;let vr=hr.length-2>>1;if(vr<mr.length)mr[mr.length-1]=mr[mr.length-1].append(gr);else{for(;mr.length<vr;)mr.push(Text$1.empty);mr.push(gr)}}function iterChanges(mr,hr,gr){let vr=mr.inserted;for(let xr=0,Er=0,Cr=0;Cr<mr.sections.length;){let wr=mr.sections[Cr++],Rr=mr.sections[Cr++];if(Rr<0)xr+=wr,Er+=wr;else{let kr=xr,Dr=Er,Br=Text$1.empty;for(;kr+=wr,Dr+=Rr,Rr&&vr&&(Br=Br.append(vr[Cr-2>>1])),!(gr||Cr==mr.sections.length||mr.sections[Cr+1]<0);)wr=mr.sections[Cr++],Rr=mr.sections[Cr++];hr(xr,kr,Er,Dr,Br),xr=kr,Er=Dr}}}function mapSet(mr,hr,gr,vr=!1){let xr=[],Er=vr?[]:null,Cr=new SectionIter(mr),wr=new SectionIter(hr);for(let Rr=-1;;){if(Cr.done&&wr.len||wr.done&&Cr.len)throw new Error("Mismatched change set lengths");if(Cr.ins==-1&&wr.ins==-1){let kr=Math.min(Cr.len,wr.len);addSection(xr,kr,-1),Cr.forward(kr),wr.forward(kr)}else if(wr.ins>=0&&(Cr.ins<0||Rr==Cr.i||Cr.off==0&&(wr.len<Cr.len||wr.len==Cr.len&&!gr))){let kr=wr.len;for(addSection(xr,wr.ins,-1);kr;){let Dr=Math.min(Cr.len,kr);Cr.ins>=0&&Rr<Cr.i&&Cr.len<=Dr&&(addSection(xr,0,Cr.ins),Er&&addInsert(Er,xr,Cr.text),Rr=Cr.i),Cr.forward(Dr),kr-=Dr}wr.next()}else if(Cr.ins>=0){let kr=0,Dr=Cr.len;for(;Dr;)if(wr.ins==-1){let Br=Math.min(Dr,wr.len);kr+=Br,Dr-=Br,wr.forward(Br)}else if(wr.ins==0&&wr.len<Dr)Dr-=wr.len,wr.next();else break;addSection(xr,kr,Rr<Cr.i?Cr.ins:0),Er&&Rr<Cr.i&&addInsert(Er,xr,Cr.text),Rr=Cr.i,Cr.forward(Cr.len-Dr)}else{if(Cr.done&&wr.done)return Er?ChangeSet.createSet(xr,Er):ChangeDesc.create(xr);throw new Error("Mismatched change set lengths")}}}function composeSets(mr,hr,gr=!1){let vr=[],xr=gr?[]:null,Er=new SectionIter(mr),Cr=new SectionIter(hr);for(let wr=!1;;){if(Er.done&&Cr.done)return xr?ChangeSet.createSet(vr,xr):ChangeDesc.create(vr);if(Er.ins==0)addSection(vr,Er.len,0,wr),Er.next();else if(Cr.len==0&&!Cr.done)addSection(vr,0,Cr.ins,wr),xr&&addInsert(xr,vr,Cr.text),Cr.next();else{if(Er.done||Cr.done)throw new Error("Mismatched change set lengths");{let Rr=Math.min(Er.len2,Cr.len),kr=vr.length;if(Er.ins==-1){let Dr=Cr.ins==-1?-1:Cr.off?0:Cr.ins;addSection(vr,Rr,Dr,wr),xr&&Dr&&addInsert(xr,vr,Cr.text)}else Cr.ins==-1?(addSection(vr,Er.off?0:Er.len,Rr,wr),xr&&addInsert(xr,vr,Er.textBit(Rr))):(addSection(vr,Er.off?0:Er.len,Cr.off?0:Cr.ins,wr),xr&&!Cr.off&&addInsert(xr,vr,Cr.text));wr=(Er.ins>Rr||Cr.ins>=0&&Cr.len>Rr)&&(wr||vr.length>kr),Er.forward2(Rr),Cr.forward(Rr)}}}}class SectionIter{constructor(hr){this.set=hr,this.i=0,this.next()}next(){let{sections:hr}=this.set;this.i<hr.length?(this.len=hr[this.i++],this.ins=hr[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:hr}=this.set,gr=this.i-2>>1;return gr>=hr.length?Text$1.empty:hr[gr]}textBit(hr){let{inserted:gr}=this.set,vr=this.i-2>>1;return vr>=gr.length&&!hr?Text$1.empty:gr[vr].slice(this.off,hr==null?void 0:this.off+hr)}forward(hr){hr==this.len?this.next():(this.len-=hr,this.off+=hr)}forward2(hr){this.ins==-1?this.forward(hr):hr==this.ins?this.next():(this.ins-=hr,this.off+=hr)}}class SelectionRange{constructor(hr,gr,vr){this.from=hr,this.to=gr,this.flags=vr}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let hr=this.flags&7;return hr==7?null:hr}get goalColumn(){let hr=this.flags>>6;return hr==16777215?void 0:hr}map(hr,gr=-1){let vr,xr;return this.empty?vr=xr=hr.mapPos(this.from,gr):(vr=hr.mapPos(this.from,1),xr=hr.mapPos(this.to,-1)),vr==this.from&&xr==this.to?this:new SelectionRange(vr,xr,this.flags)}extend(hr,gr=hr){if(hr<=this.anchor&&gr>=this.anchor)return EditorSelection.range(hr,gr);let vr=Math.abs(hr-this.anchor)>Math.abs(gr-this.anchor)?hr:gr;return EditorSelection.range(this.anchor,vr)}eq(hr,gr=!1){return this.anchor==hr.anchor&&this.head==hr.head&&(!gr||!this.empty||this.assoc==hr.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(hr){if(!hr||typeof hr.anchor!="number"||typeof hr.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return EditorSelection.range(hr.anchor,hr.head)}static create(hr,gr,vr){return new SelectionRange(hr,gr,vr)}}class EditorSelection{constructor(hr,gr){this.ranges=hr,this.mainIndex=gr}map(hr,gr=-1){return hr.empty?this:EditorSelection.create(this.ranges.map(vr=>vr.map(hr,gr)),this.mainIndex)}eq(hr,gr=!1){if(this.ranges.length!=hr.ranges.length||this.mainIndex!=hr.mainIndex)return!1;for(let vr=0;vr<this.ranges.length;vr++)if(!this.ranges[vr].eq(hr.ranges[vr],gr))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new EditorSelection([this.main],0)}addRange(hr,gr=!0){return EditorSelection.create([hr].concat(this.ranges),gr?0:this.mainIndex+1)}replaceRange(hr,gr=this.mainIndex){let vr=this.ranges.slice();return vr[gr]=hr,EditorSelection.create(vr,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(hr=>hr.toJSON()),main:this.mainIndex}}static fromJSON(hr){if(!hr||!Array.isArray(hr.ranges)||typeof hr.main!="number"||hr.main>=hr.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new EditorSelection(hr.ranges.map(gr=>SelectionRange.fromJSON(gr)),hr.main)}static single(hr,gr=hr){return new EditorSelection([EditorSelection.range(hr,gr)],0)}static create(hr,gr=0){if(hr.length==0)throw new RangeError("A selection needs at least one range");for(let vr=0,xr=0;xr<hr.length;xr++){let Er=hr[xr];if(Er.empty?Er.from<=vr:Er.from<vr)return EditorSelection.normalized(hr.slice(),gr);vr=Er.to}return new EditorSelection(hr,gr)}static cursor(hr,gr=0,vr,xr){return SelectionRange.create(hr,hr,(gr==0?0:gr<0?8:16)|(vr==null?7:Math.min(6,vr))|(xr??16777215)<<6)}static range(hr,gr,vr,xr){let Er=(vr??16777215)<<6|(xr==null?7:Math.min(6,xr));return gr<hr?SelectionRange.create(gr,hr,48|Er):SelectionRange.create(hr,gr,(gr>hr?8:0)|Er)}static normalized(hr,gr=0){let vr=hr[gr];hr.sort((xr,Er)=>xr.from-Er.from),gr=hr.indexOf(vr);for(let xr=1;xr<hr.length;xr++){let Er=hr[xr],Cr=hr[xr-1];if(Er.empty?Er.from<=Cr.to:Er.from<Cr.to){let wr=Cr.from,Rr=Math.max(Er.to,Cr.to);xr<=gr&&gr--,hr.splice(--xr,2,Er.anchor>Er.head?EditorSelection.range(Rr,wr):EditorSelection.range(wr,Rr))}}return new EditorSelection(hr,gr)}}function checkSelection(mr,hr){for(let gr of mr.ranges)if(gr.to>hr)throw new RangeError("Selection points outside of document")}let nextID=0;class Facet{constructor(hr,gr,vr,xr,Er){this.combine=hr,this.compareInput=gr,this.compare=vr,this.isStatic=xr,this.id=nextID++,this.default=hr([]),this.extensions=typeof Er=="function"?Er(this):Er}get reader(){return this}static define(hr={}){return new Facet(hr.combine||(gr=>gr),hr.compareInput||((gr,vr)=>gr===vr),hr.compare||(hr.combine?(gr,vr)=>gr===vr:sameArray),!!hr.static,hr.enables)}of(hr){return new FacetProvider([],this,0,hr)}compute(hr,gr){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(hr,this,1,gr)}computeN(hr,gr){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(hr,this,2,gr)}from(hr,gr){return gr||(gr=vr=>vr),this.compute([hr],vr=>gr(vr.field(hr)))}}function sameArray(mr,hr){return mr==hr||mr.length==hr.length&&mr.every((gr,vr)=>gr===hr[vr])}class FacetProvider{constructor(hr,gr,vr,xr){this.dependencies=hr,this.facet=gr,this.type=vr,this.value=xr,this.id=nextID++}dynamicSlot(hr){var gr;let vr=this.value,xr=this.facet.compareInput,Er=this.id,Cr=hr[Er]>>1,wr=this.type==2,Rr=!1,kr=!1,Dr=[];for(let Br of this.dependencies)Br=="doc"?Rr=!0:Br=="selection"?kr=!0:((gr=hr[Br.id])!==null&&gr!==void 0?gr:1)&1||Dr.push(hr[Br.id]);return{create(Br){return Br.values[Cr]=vr(Br),1},update(Br,Hr){if(Rr&&Hr.docChanged||kr&&(Hr.docChanged||Hr.selection)||ensureAll(Br,Dr)){let Gr=vr(Br);if(wr?!compareArray(Gr,Br.values[Cr],xr):!xr(Gr,Br.values[Cr]))return Br.values[Cr]=Gr,1}return 0},reconfigure:(Br,Hr)=>{let Gr,qr=Hr.config.address[Er];if(qr!=null){let zr=getAddr(Hr,qr);if(this.dependencies.every(Qr=>Qr instanceof Facet?Hr.facet(Qr)===Br.facet(Qr):Qr instanceof StateField?Hr.field(Qr,!1)==Br.field(Qr,!1):!0)||(wr?compareArray(Gr=vr(Br),zr,xr):xr(Gr=vr(Br),zr)))return Br.values[Cr]=zr,0}else Gr=vr(Br);return Br.values[Cr]=Gr,1}}}}function compareArray(mr,hr,gr){if(mr.length!=hr.length)return!1;for(let vr=0;vr<mr.length;vr++)if(!gr(mr[vr],hr[vr]))return!1;return!0}function ensureAll(mr,hr){let gr=!1;for(let vr of hr)ensureAddr(mr,vr)&1&&(gr=!0);return gr}function dynamicFacetSlot(mr,hr,gr){let vr=gr.map(Rr=>mr[Rr.id]),xr=gr.map(Rr=>Rr.type),Er=vr.filter(Rr=>!(Rr&1)),Cr=mr[hr.id]>>1;function wr(Rr){let kr=[];for(let Dr=0;Dr<vr.length;Dr++){let Br=getAddr(Rr,vr[Dr]);if(xr[Dr]==2)for(let Hr of Br)kr.push(Hr);else kr.push(Br)}return hr.combine(kr)}return{create(Rr){for(let kr of vr)ensureAddr(Rr,kr);return Rr.values[Cr]=wr(Rr),1},update(Rr,kr){if(!ensureAll(Rr,Er))return 0;let Dr=wr(Rr);return hr.compare(Dr,Rr.values[Cr])?0:(Rr.values[Cr]=Dr,1)},reconfigure(Rr,kr){let Dr=ensureAll(Rr,vr),Br=kr.config.facets[hr.id],Hr=kr.facet(hr);if(Br&&!Dr&&sameArray(gr,Br))return Rr.values[Cr]=Hr,0;let Gr=wr(Rr);return hr.compare(Gr,Hr)?(Rr.values[Cr]=Hr,0):(Rr.values[Cr]=Gr,1)}}}const initField=Facet.define({static:!0});class StateField{constructor(hr,gr,vr,xr,Er){this.id=hr,this.createF=gr,this.updateF=vr,this.compareF=xr,this.spec=Er,this.provides=void 0}static define(hr){let gr=new StateField(nextID++,hr.create,hr.update,hr.compare||((vr,xr)=>vr===xr),hr);return hr.provide&&(gr.provides=hr.provide(gr)),gr}create(hr){let gr=hr.facet(initField).find(vr=>vr.field==this);return(gr?.create||this.createF)(hr)}slot(hr){let gr=hr[this.id]>>1;return{create:vr=>(vr.values[gr]=this.create(vr),1),update:(vr,xr)=>{let Er=vr.values[gr],Cr=this.updateF(Er,xr);return this.compareF(Er,Cr)?0:(vr.values[gr]=Cr,1)},reconfigure:(vr,xr)=>xr.config.address[this.id]!=null?(vr.values[gr]=xr.field(this),0):(vr.values[gr]=this.create(vr),1)}}init(hr){return[this,initField.of({field:this,create:hr})]}get extension(){return this}}const Prec_={lowest:4,low:3,default:2,high:1,highest:0};function prec(mr){return hr=>new PrecExtension(hr,mr)}const Prec={highest:prec(Prec_.highest),high:prec(Prec_.high),default:prec(Prec_.default),low:prec(Prec_.low),lowest:prec(Prec_.lowest)};class PrecExtension{constructor(hr,gr){this.inner=hr,this.prec=gr}}class Compartment{of(hr){return new CompartmentInstance(this,hr)}reconfigure(hr){return Compartment.reconfigure.of({compartment:this,extension:hr})}get(hr){return hr.config.compartments.get(this)}}class CompartmentInstance{constructor(hr,gr){this.compartment=hr,this.inner=gr}}class Configuration{constructor(hr,gr,vr,xr,Er,Cr){for(this.base=hr,this.compartments=gr,this.dynamicSlots=vr,this.address=xr,this.staticValues=Er,this.facets=Cr,this.statusTemplate=[];this.statusTemplate.length<vr.length;)this.statusTemplate.push(0)}staticFacet(hr){let gr=this.address[hr.id];return gr==null?hr.default:this.staticValues[gr>>1]}static resolve(hr,gr,vr){let xr=[],Er=Object.create(null),Cr=new Map;for(let Hr of flatten$3(hr,gr,Cr))Hr instanceof StateField?xr.push(Hr):(Er[Hr.facet.id]||(Er[Hr.facet.id]=[])).push(Hr);let wr=Object.create(null),Rr=[],kr=[];for(let Hr of xr)wr[Hr.id]=kr.length<<1,kr.push(Gr=>Hr.slot(Gr));let Dr=vr?.config.facets;for(let Hr in Er){let Gr=Er[Hr],qr=Gr[0].facet,zr=Dr&&Dr[Hr]||[];if(Gr.every(Qr=>Qr.type==0))if(wr[qr.id]=Rr.length<<1|1,sameArray(zr,Gr))Rr.push(vr.facet(qr));else{let Qr=qr.combine(Gr.map(sn=>sn.value));Rr.push(vr&&qr.compare(Qr,vr.facet(qr))?vr.facet(qr):Qr)}else{for(let Qr of Gr)Qr.type==0?(wr[Qr.id]=Rr.length<<1|1,Rr.push(Qr.value)):(wr[Qr.id]=kr.length<<1,kr.push(sn=>Qr.dynamicSlot(sn)));wr[qr.id]=kr.length<<1,kr.push(Qr=>dynamicFacetSlot(Qr,qr,Gr))}}let Br=kr.map(Hr=>Hr(wr));return new Configuration(hr,Cr,Br,wr,Rr,Er)}}function flatten$3(mr,hr,gr){let vr=[[],[],[],[],[]],xr=new Map;function Er(Cr,wr){let Rr=xr.get(Cr);if(Rr!=null){if(Rr<=wr)return;let kr=vr[Rr].indexOf(Cr);kr>-1&&vr[Rr].splice(kr,1),Cr instanceof CompartmentInstance&&gr.delete(Cr.compartment)}if(xr.set(Cr,wr),Array.isArray(Cr))for(let kr of Cr)Er(kr,wr);else if(Cr instanceof CompartmentInstance){if(gr.has(Cr.compartment))throw new RangeError("Duplicate use of compartment in extensions");let kr=hr.get(Cr.compartment)||Cr.inner;gr.set(Cr.compartment,kr),Er(kr,wr)}else if(Cr instanceof PrecExtension)Er(Cr.inner,Cr.prec);else if(Cr instanceof StateField)vr[wr].push(Cr),Cr.provides&&Er(Cr.provides,wr);else if(Cr instanceof FacetProvider)vr[wr].push(Cr),Cr.facet.extensions&&Er(Cr.facet.extensions,Prec_.default);else{let kr=Cr.extension;if(!kr)throw new Error(`Unrecognized extension value in extension set (${Cr}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);Er(kr,wr)}}return Er(mr,Prec_.default),vr.reduce((Cr,wr)=>Cr.concat(wr))}function ensureAddr(mr,hr){if(hr&1)return 2;let gr=hr>>1,vr=mr.status[gr];if(vr==4)throw new Error("Cyclic dependency between fields and/or facets");if(vr&2)return vr;mr.status[gr]=4;let xr=mr.computeSlot(mr,mr.config.dynamicSlots[gr]);return mr.status[gr]=2|xr}function getAddr(mr,hr){return hr&1?mr.config.staticValues[hr>>1]:mr.values[hr>>1]}const languageData=Facet.define(),allowMultipleSelections=Facet.define({combine:mr=>mr.some(hr=>hr),static:!0}),lineSeparator=Facet.define({combine:mr=>mr.length?mr[0]:void 0,static:!0}),changeFilter=Facet.define(),transactionFilter=Facet.define(),transactionExtender=Facet.define(),readOnly=Facet.define({combine:mr=>mr.length?mr[0]:!1});class Annotation{constructor(hr,gr){this.type=hr,this.value=gr}static define(){return new AnnotationType}}class AnnotationType{of(hr){return new Annotation(this,hr)}}class StateEffectType{constructor(hr){this.map=hr}of(hr){return new StateEffect(this,hr)}}class StateEffect{constructor(hr,gr){this.type=hr,this.value=gr}map(hr){let gr=this.type.map(this.value,hr);return gr===void 0?void 0:gr==this.value?this:new StateEffect(this.type,gr)}is(hr){return this.type==hr}static define(hr={}){return new StateEffectType(hr.map||(gr=>gr))}static mapEffects(hr,gr){if(!hr.length)return hr;let vr=[];for(let xr of hr){let Er=xr.map(gr);Er&&vr.push(Er)}return vr}}StateEffect.reconfigure=StateEffect.define();StateEffect.appendConfig=StateEffect.define();class Transaction{constructor(hr,gr,vr,xr,Er,Cr){this.startState=hr,this.changes=gr,this.selection=vr,this.effects=xr,this.annotations=Er,this.scrollIntoView=Cr,this._doc=null,this._state=null,vr&&checkSelection(vr,gr.newLength),Er.some(wr=>wr.type==Transaction.time)||(this.annotations=Er.concat(Transaction.time.of(Date.now())))}static create(hr,gr,vr,xr,Er,Cr){return new Transaction(hr,gr,vr,xr,Er,Cr)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(hr){for(let gr of this.annotations)if(gr.type==hr)return gr.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(hr){let gr=this.annotation(Transaction.userEvent);return!!(gr&&(gr==hr||gr.length>hr.length&&gr.slice(0,hr.length)==hr&&gr[hr.length]=="."))}}Transaction.time=Annotation.define();Transaction.userEvent=Annotation.define();Transaction.addToHistory=Annotation.define();Transaction.remote=Annotation.define();function joinRanges(mr,hr){let gr=[];for(let vr=0,xr=0;;){let Er,Cr;if(vr<mr.length&&(xr==hr.length||hr[xr]>=mr[vr]))Er=mr[vr++],Cr=mr[vr++];else if(xr<hr.length)Er=hr[xr++],Cr=hr[xr++];else return gr;!gr.length||gr[gr.length-1]<Er?gr.push(Er,Cr):gr[gr.length-1]<Cr&&(gr[gr.length-1]=Cr)}}function mergeTransaction(mr,hr,gr){var vr;let xr,Er,Cr;return gr?(xr=hr.changes,Er=ChangeSet.empty(hr.changes.length),Cr=mr.changes.compose(hr.changes)):(xr=hr.changes.map(mr.changes),Er=mr.changes.mapDesc(hr.changes,!0),Cr=mr.changes.compose(xr)),{changes:Cr,selection:hr.selection?hr.selection.map(Er):(vr=mr.selection)===null||vr===void 0?void 0:vr.map(xr),effects:StateEffect.mapEffects(mr.effects,xr).concat(StateEffect.mapEffects(hr.effects,Er)),annotations:mr.annotations.length?mr.annotations.concat(hr.annotations):hr.annotations,scrollIntoView:mr.scrollIntoView||hr.scrollIntoView}}function resolveTransactionInner(mr,hr,gr){let vr=hr.selection,xr=asArray$1(hr.annotations);return hr.userEvent&&(xr=xr.concat(Transaction.userEvent.of(hr.userEvent))),{changes:hr.changes instanceof ChangeSet?hr.changes:ChangeSet.of(hr.changes||[],gr,mr.facet(lineSeparator)),selection:vr&&(vr instanceof EditorSelection?vr:EditorSelection.single(vr.anchor,vr.head)),effects:asArray$1(hr.effects),annotations:xr,scrollIntoView:!!hr.scrollIntoView}}function resolveTransaction(mr,hr,gr){let vr=resolveTransactionInner(mr,hr.length?hr[0]:{},mr.doc.length);hr.length&&hr[0].filter===!1&&(gr=!1);for(let Er=1;Er<hr.length;Er++){hr[Er].filter===!1&&(gr=!1);let Cr=!!hr[Er].sequential;vr=mergeTransaction(vr,resolveTransactionInner(mr,hr[Er],Cr?vr.changes.newLength:mr.doc.length),Cr)}let xr=Transaction.create(mr,vr.changes,vr.selection,vr.effects,vr.annotations,vr.scrollIntoView);return extendTransaction(gr?filterTransaction(xr):xr)}function filterTransaction(mr){let hr=mr.startState,gr=!0;for(let xr of hr.facet(changeFilter)){let Er=xr(mr);if(Er===!1){gr=!1;break}Array.isArray(Er)&&(gr=gr===!0?Er:joinRanges(gr,Er))}if(gr!==!0){let xr,Er;if(gr===!1)Er=mr.changes.invertedDesc,xr=ChangeSet.empty(hr.doc.length);else{let Cr=mr.changes.filter(gr);xr=Cr.changes,Er=Cr.filtered.mapDesc(Cr.changes).invertedDesc}mr=Transaction.create(hr,xr,mr.selection&&mr.selection.map(Er),StateEffect.mapEffects(mr.effects,Er),mr.annotations,mr.scrollIntoView)}let vr=hr.facet(transactionFilter);for(let xr=vr.length-1;xr>=0;xr--){let Er=vr[xr](mr);Er instanceof Transaction?mr=Er:Array.isArray(Er)&&Er.length==1&&Er[0]instanceof Transaction?mr=Er[0]:mr=resolveTransaction(hr,asArray$1(Er),!1)}return mr}function extendTransaction(mr){let hr=mr.startState,gr=hr.facet(transactionExtender),vr=mr;for(let xr=gr.length-1;xr>=0;xr--){let Er=gr[xr](mr);Er&&Object.keys(Er).length&&(vr=mergeTransaction(vr,resolveTransactionInner(hr,Er,mr.changes.newLength),!0))}return vr==mr?mr:Transaction.create(hr,mr.changes,mr.selection,vr.effects,vr.annotations,vr.scrollIntoView)}const none$2=[];function asArray$1(mr){return mr==null?none$2:Array.isArray(mr)?mr:[mr]}var CharCategory=function(mr){return mr[mr.Word=0]="Word",mr[mr.Space=1]="Space",mr[mr.Other=2]="Other",mr}(CharCategory||(CharCategory={}));const nonASCIISingleCaseWordChar=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let wordChar;try{wordChar=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function hasWordChar(mr){if(wordChar)return wordChar.test(mr);for(let hr=0;hr<mr.length;hr++){let gr=mr[hr];if(/\w/.test(gr)||gr>""&&(gr.toUpperCase()!=gr.toLowerCase()||nonASCIISingleCaseWordChar.test(gr)))return!0}return!1}function makeCategorizer(mr){return hr=>{if(!/\S/.test(hr))return CharCategory.Space;if(hasWordChar(hr))return CharCategory.Word;for(let gr=0;gr<mr.length;gr++)if(hr.indexOf(mr[gr])>-1)return CharCategory.Word;return CharCategory.Other}}class EditorState{constructor(hr,gr,vr,xr,Er,Cr){this.config=hr,this.doc=gr,this.selection=vr,this.values=xr,this.status=hr.statusTemplate.slice(),this.computeSlot=Er,Cr&&(Cr._state=this);for(let wr=0;wr<this.config.dynamicSlots.length;wr++)ensureAddr(this,wr<<1);this.computeSlot=null}field(hr,gr=!0){let vr=this.config.address[hr.id];if(vr==null){if(gr)throw new RangeError("Field is not present in this state");return}return ensureAddr(this,vr),getAddr(this,vr)}update(...hr){return resolveTransaction(this,hr,!0)}applyTransaction(hr){let gr=this.config,{base:vr,compartments:xr}=gr;for(let wr of hr.effects)wr.is(Compartment.reconfigure)?(gr&&(xr=new Map,gr.compartments.forEach((Rr,kr)=>xr.set(kr,Rr)),gr=null),xr.set(wr.value.compartment,wr.value.extension)):wr.is(StateEffect.reconfigure)?(gr=null,vr=wr.value):wr.is(StateEffect.appendConfig)&&(gr=null,vr=asArray$1(vr).concat(wr.value));let Er;gr?Er=hr.startState.values.slice():(gr=Configuration.resolve(vr,xr,this),Er=new EditorState(gr,this.doc,this.selection,gr.dynamicSlots.map(()=>null),(Rr,kr)=>kr.reconfigure(Rr,this),null).values);let Cr=hr.startState.facet(allowMultipleSelections)?hr.newSelection:hr.newSelection.asSingle();new EditorState(gr,hr.newDoc,Cr,Er,(wr,Rr)=>Rr.update(wr,hr),hr)}replaceSelection(hr){return typeof hr=="string"&&(hr=this.toText(hr)),this.changeByRange(gr=>({changes:{from:gr.from,to:gr.to,insert:hr},range:EditorSelection.cursor(gr.from+hr.length)}))}changeByRange(hr){let gr=this.selection,vr=hr(gr.ranges[0]),xr=this.changes(vr.changes),Er=[vr.range],Cr=asArray$1(vr.effects);for(let wr=1;wr<gr.ranges.length;wr++){let Rr=hr(gr.ranges[wr]),kr=this.changes(Rr.changes),Dr=kr.map(xr);for(let Hr=0;Hr<wr;Hr++)Er[Hr]=Er[Hr].map(Dr);let Br=xr.mapDesc(kr,!0);Er.push(Rr.range.map(Br)),xr=xr.compose(Dr),Cr=StateEffect.mapEffects(Cr,Dr).concat(StateEffect.mapEffects(asArray$1(Rr.effects),Br))}return{changes:xr,selection:EditorSelection.create(Er,gr.mainIndex),effects:Cr}}changes(hr=[]){return hr instanceof ChangeSet?hr:ChangeSet.of(hr,this.doc.length,this.facet(EditorState.lineSeparator))}toText(hr){return Text$1.of(hr.split(this.facet(EditorState.lineSeparator)||DefaultSplit))}sliceDoc(hr=0,gr=this.doc.length){return this.doc.sliceString(hr,gr,this.lineBreak)}facet(hr){let gr=this.config.address[hr.id];return gr==null?hr.default:(ensureAddr(this,gr),getAddr(this,gr))}toJSON(hr){let gr={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(hr)for(let vr in hr){let xr=hr[vr];xr instanceof StateField&&this.config.address[xr.id]!=null&&(gr[vr]=xr.spec.toJSON(this.field(hr[vr]),this))}return gr}static fromJSON(hr,gr={},vr){if(!hr||typeof hr.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let xr=[];if(vr){for(let Er in vr)if(Object.prototype.hasOwnProperty.call(hr,Er)){let Cr=vr[Er],wr=hr[Er];xr.push(Cr.init(Rr=>Cr.spec.fromJSON(wr,Rr)))}}return EditorState.create({doc:hr.doc,selection:EditorSelection.fromJSON(hr.selection),extensions:gr.extensions?xr.concat([gr.extensions]):xr})}static create(hr={}){let gr=Configuration.resolve(hr.extensions||[],new Map),vr=hr.doc instanceof Text$1?hr.doc:Text$1.of((hr.doc||"").split(gr.staticFacet(EditorState.lineSeparator)||DefaultSplit)),xr=hr.selection?hr.selection instanceof EditorSelection?hr.selection:EditorSelection.single(hr.selection.anchor,hr.selection.head):EditorSelection.single(0);return checkSelection(xr,vr.length),gr.staticFacet(allowMultipleSelections)||(xr=xr.asSingle()),new EditorState(gr,vr,xr,gr.dynamicSlots.map(()=>null),(Er,Cr)=>Cr.create(Er),null)}get tabSize(){return this.facet(EditorState.tabSize)}get lineBreak(){return this.facet(EditorState.lineSeparator)||`
`}get readOnly(){return this.facet(readOnly)}phrase(hr,...gr){for(let vr of this.facet(EditorState.phrases))if(Object.prototype.hasOwnProperty.call(vr,hr)){hr=vr[hr];break}return gr.length&&(hr=hr.replace(/\$(\$|\d*)/g,(vr,xr)=>{if(xr=="$")return"$";let Er=+(xr||1);return!Er||Er>gr.length?vr:gr[Er-1]})),hr}languageDataAt(hr,gr,vr=-1){let xr=[];for(let Er of this.facet(languageData))for(let Cr of Er(this,gr,vr))Object.prototype.hasOwnProperty.call(Cr,hr)&&xr.push(Cr[hr]);return xr}charCategorizer(hr){return makeCategorizer(this.languageDataAt("wordChars",hr).join(""))}wordAt(hr){let{text:gr,from:vr,length:xr}=this.doc.lineAt(hr),Er=this.charCategorizer(hr),Cr=hr-vr,wr=hr-vr;for(;Cr>0;){let Rr=findClusterBreak(gr,Cr,!1);if(Er(gr.slice(Rr,Cr))!=CharCategory.Word)break;Cr=Rr}for(;wr<xr;){let Rr=findClusterBreak(gr,wr);if(Er(gr.slice(wr,Rr))!=CharCategory.Word)break;wr=Rr}return Cr==wr?null:EditorSelection.range(Cr+vr,wr+vr)}}EditorState.allowMultipleSelections=allowMultipleSelections;EditorState.tabSize=Facet.define({combine:mr=>mr.length?mr[0]:4});EditorState.lineSeparator=lineSeparator;EditorState.readOnly=readOnly;EditorState.phrases=Facet.define({compare(mr,hr){let gr=Object.keys(mr),vr=Object.keys(hr);return gr.length==vr.length&&gr.every(xr=>mr[xr]==hr[xr])}});EditorState.languageData=languageData;EditorState.changeFilter=changeFilter;EditorState.transactionFilter=transactionFilter;EditorState.transactionExtender=transactionExtender;Compartment.reconfigure=StateEffect.define();function combineConfig(mr,hr,gr={}){let vr={};for(let xr of mr)for(let Er of Object.keys(xr)){let Cr=xr[Er],wr=vr[Er];if(wr===void 0)vr[Er]=Cr;else if(!(wr===Cr||Cr===void 0))if(Object.hasOwnProperty.call(gr,Er))vr[Er]=gr[Er](wr,Cr);else throw new Error("Config merge conflict for field "+Er)}for(let xr in hr)vr[xr]===void 0&&(vr[xr]=hr[xr]);return vr}class RangeValue{eq(hr){return this==hr}range(hr,gr=hr){return Range.create(hr,gr,this)}}RangeValue.prototype.startSide=RangeValue.prototype.endSide=0;RangeValue.prototype.point=!1;RangeValue.prototype.mapMode=MapMode.TrackDel;class Range{constructor(hr,gr,vr){this.from=hr,this.to=gr,this.value=vr}static create(hr,gr,vr){return new Range(hr,gr,vr)}}function cmpRange(mr,hr){return mr.from-hr.from||mr.value.startSide-hr.value.startSide}class Chunk{constructor(hr,gr,vr,xr){this.from=hr,this.to=gr,this.value=vr,this.maxPoint=xr}get length(){return this.to[this.to.length-1]}findIndex(hr,gr,vr,xr=0){let Er=vr?this.to:this.from;for(let Cr=xr,wr=Er.length;;){if(Cr==wr)return Cr;let Rr=Cr+wr>>1,kr=Er[Rr]-hr||(vr?this.value[Rr].endSide:this.value[Rr].startSide)-gr;if(Rr==Cr)return kr>=0?Cr:wr;kr>=0?wr=Rr:Cr=Rr+1}}between(hr,gr,vr,xr){for(let Er=this.findIndex(gr,-1e9,!0),Cr=this.findIndex(vr,1e9,!1,Er);Er<Cr;Er++)if(xr(this.from[Er]+hr,this.to[Er]+hr,this.value[Er])===!1)return!1}map(hr,gr){let vr=[],xr=[],Er=[],Cr=-1,wr=-1;for(let Rr=0;Rr<this.value.length;Rr++){let kr=this.value[Rr],Dr=this.from[Rr]+hr,Br=this.to[Rr]+hr,Hr,Gr;if(Dr==Br){let qr=gr.mapPos(Dr,kr.startSide,kr.mapMode);if(qr==null||(Hr=Gr=qr,kr.startSide!=kr.endSide&&(Gr=gr.mapPos(Dr,kr.endSide),Gr<Hr)))continue}else if(Hr=gr.mapPos(Dr,kr.startSide),Gr=gr.mapPos(Br,kr.endSide),Hr>Gr||Hr==Gr&&kr.startSide>0&&kr.endSide<=0)continue;(Gr-Hr||kr.endSide-kr.startSide)<0||(Cr<0&&(Cr=Hr),kr.point&&(wr=Math.max(wr,Gr-Hr)),vr.push(kr),xr.push(Hr-Cr),Er.push(Gr-Cr))}return{mapped:vr.length?new Chunk(xr,Er,vr,wr):null,pos:Cr}}}class RangeSet{constructor(hr,gr,vr,xr){this.chunkPos=hr,this.chunk=gr,this.nextLayer=vr,this.maxPoint=xr}static create(hr,gr,vr,xr){return new RangeSet(hr,gr,vr,xr)}get length(){let hr=this.chunk.length-1;return hr<0?0:Math.max(this.chunkEnd(hr),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let hr=this.nextLayer.size;for(let gr of this.chunk)hr+=gr.value.length;return hr}chunkEnd(hr){return this.chunkPos[hr]+this.chunk[hr].length}update(hr){let{add:gr=[],sort:vr=!1,filterFrom:xr=0,filterTo:Er=this.length}=hr,Cr=hr.filter;if(gr.length==0&&!Cr)return this;if(vr&&(gr=gr.slice().sort(cmpRange)),this.isEmpty)return gr.length?RangeSet.of(gr):this;let wr=new LayerCursor(this,null,-1).goto(0),Rr=0,kr=[],Dr=new RangeSetBuilder;for(;wr.value||Rr<gr.length;)if(Rr<gr.length&&(wr.from-gr[Rr].from||wr.startSide-gr[Rr].value.startSide)>=0){let Br=gr[Rr++];Dr.addInner(Br.from,Br.to,Br.value)||kr.push(Br)}else wr.rangeIndex==1&&wr.chunkIndex<this.chunk.length&&(Rr==gr.length||this.chunkEnd(wr.chunkIndex)<gr[Rr].from)&&(!Cr||xr>this.chunkEnd(wr.chunkIndex)||Er<this.chunkPos[wr.chunkIndex])&&Dr.addChunk(this.chunkPos[wr.chunkIndex],this.chunk[wr.chunkIndex])?wr.nextChunk():((!Cr||xr>wr.to||Er<wr.from||Cr(wr.from,wr.to,wr.value))&&(Dr.addInner(wr.from,wr.to,wr.value)||kr.push(Range.create(wr.from,wr.to,wr.value))),wr.next());return Dr.finishInner(this.nextLayer.isEmpty&&!kr.length?RangeSet.empty:this.nextLayer.update({add:kr,filter:Cr,filterFrom:xr,filterTo:Er}))}map(hr){if(hr.empty||this.isEmpty)return this;let gr=[],vr=[],xr=-1;for(let Cr=0;Cr<this.chunk.length;Cr++){let wr=this.chunkPos[Cr],Rr=this.chunk[Cr],kr=hr.touchesRange(wr,wr+Rr.length);if(kr===!1)xr=Math.max(xr,Rr.maxPoint),gr.push(Rr),vr.push(hr.mapPos(wr));else if(kr===!0){let{mapped:Dr,pos:Br}=Rr.map(wr,hr);Dr&&(xr=Math.max(xr,Dr.maxPoint),gr.push(Dr),vr.push(Br))}}let Er=this.nextLayer.map(hr);return gr.length==0?Er:new RangeSet(vr,gr,Er||RangeSet.empty,xr)}between(hr,gr,vr){if(!this.isEmpty){for(let xr=0;xr<this.chunk.length;xr++){let Er=this.chunkPos[xr],Cr=this.chunk[xr];if(gr>=Er&&hr<=Er+Cr.length&&Cr.between(Er,hr-Er,gr-Er,vr)===!1)return}this.nextLayer.between(hr,gr,vr)}}iter(hr=0){return HeapCursor.from([this]).goto(hr)}get isEmpty(){return this.nextLayer==this}static iter(hr,gr=0){return HeapCursor.from(hr).goto(gr)}static compare(hr,gr,vr,xr,Er=-1){let Cr=hr.filter(Br=>Br.maxPoint>0||!Br.isEmpty&&Br.maxPoint>=Er),wr=gr.filter(Br=>Br.maxPoint>0||!Br.isEmpty&&Br.maxPoint>=Er),Rr=findSharedChunks(Cr,wr,vr),kr=new SpanCursor(Cr,Rr,Er),Dr=new SpanCursor(wr,Rr,Er);vr.iterGaps((Br,Hr,Gr)=>compare(kr,Br,Dr,Hr,Gr,xr)),vr.empty&&vr.length==0&&compare(kr,0,Dr,0,0,xr)}static eq(hr,gr,vr=0,xr){xr==null&&(xr=999999999);let Er=hr.filter(Dr=>!Dr.isEmpty&&gr.indexOf(Dr)<0),Cr=gr.filter(Dr=>!Dr.isEmpty&&hr.indexOf(Dr)<0);if(Er.length!=Cr.length)return!1;if(!Er.length)return!0;let wr=findSharedChunks(Er,Cr),Rr=new SpanCursor(Er,wr,0).goto(vr),kr=new SpanCursor(Cr,wr,0).goto(vr);for(;;){if(Rr.to!=kr.to||!sameValues(Rr.active,kr.active)||Rr.point&&(!kr.point||!Rr.point.eq(kr.point)))return!1;if(Rr.to>xr)return!0;Rr.next(),kr.next()}}static spans(hr,gr,vr,xr,Er=-1){let Cr=new SpanCursor(hr,null,Er).goto(gr),wr=gr,Rr=Cr.openStart;for(;;){let kr=Math.min(Cr.to,vr);if(Cr.point){let Dr=Cr.activeForPoint(Cr.to),Br=Cr.pointFrom<gr?Dr.length+1:Cr.point.startSide<0?Dr.length:Math.min(Dr.length,Rr);xr.point(wr,kr,Cr.point,Dr,Br,Cr.pointRank),Rr=Math.min(Cr.openEnd(kr),Dr.length)}else kr>wr&&(xr.span(wr,kr,Cr.active,Rr),Rr=Cr.openEnd(kr));if(Cr.to>vr)return Rr+(Cr.point&&Cr.to>vr?1:0);wr=Cr.to,Cr.next()}}static of(hr,gr=!1){let vr=new RangeSetBuilder;for(let xr of hr instanceof Range?[hr]:gr?lazySort(hr):hr)vr.add(xr.from,xr.to,xr.value);return vr.finish()}static join(hr){if(!hr.length)return RangeSet.empty;let gr=hr[hr.length-1];for(let vr=hr.length-2;vr>=0;vr--)for(let xr=hr[vr];xr!=RangeSet.empty;xr=xr.nextLayer)gr=new RangeSet(xr.chunkPos,xr.chunk,gr,Math.max(xr.maxPoint,gr.maxPoint));return gr}}RangeSet.empty=new RangeSet([],[],null,-1);function lazySort(mr){if(mr.length>1)for(let hr=mr[0],gr=1;gr<mr.length;gr++){let vr=mr[gr];if(cmpRange(hr,vr)>0)return mr.slice().sort(cmpRange);hr=vr}return mr}RangeSet.empty.nextLayer=RangeSet.empty;class RangeSetBuilder{finishChunk(hr){this.chunks.push(new Chunk(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,hr&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(hr,gr,vr){this.addInner(hr,gr,vr)||(this.nextLayer||(this.nextLayer=new RangeSetBuilder)).add(hr,gr,vr)}addInner(hr,gr,vr){let xr=hr-this.lastTo||vr.startSide-this.last.endSide;if(xr<=0&&(hr-this.lastFrom||vr.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return xr<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=hr),this.from.push(hr-this.chunkStart),this.to.push(gr-this.chunkStart),this.last=vr,this.lastFrom=hr,this.lastTo=gr,this.value.push(vr),vr.point&&(this.maxPoint=Math.max(this.maxPoint,gr-hr)),!0)}addChunk(hr,gr){if((hr-this.lastTo||gr.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,gr.maxPoint),this.chunks.push(gr),this.chunkPos.push(hr);let vr=gr.value.length-1;return this.last=gr.value[vr],this.lastFrom=gr.from[vr]+hr,this.lastTo=gr.to[vr]+hr,!0}finish(){return this.finishInner(RangeSet.empty)}finishInner(hr){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return hr;let gr=RangeSet.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(hr):hr,this.setMaxPoint);return this.from=null,gr}}function findSharedChunks(mr,hr,gr){let vr=new Map;for(let Er of mr)for(let Cr=0;Cr<Er.chunk.length;Cr++)Er.chunk[Cr].maxPoint<=0&&vr.set(Er.chunk[Cr],Er.chunkPos[Cr]);let xr=new Set;for(let Er of hr)for(let Cr=0;Cr<Er.chunk.length;Cr++){let wr=vr.get(Er.chunk[Cr]);wr!=null&&(gr?gr.mapPos(wr):wr)==Er.chunkPos[Cr]&&!gr?.touchesRange(wr,wr+Er.chunk[Cr].length)&&xr.add(Er.chunk[Cr])}return xr}class LayerCursor{constructor(hr,gr,vr,xr=0){this.layer=hr,this.skip=gr,this.minPoint=vr,this.rank=xr}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(hr,gr=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(hr,gr,!1),this}gotoInner(hr,gr,vr){for(;this.chunkIndex<this.layer.chunk.length;){let xr=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(xr)||this.layer.chunkEnd(this.chunkIndex)<hr||xr.maxPoint<this.minPoint))break;this.chunkIndex++,vr=!1}if(this.chunkIndex<this.layer.chunk.length){let xr=this.layer.chunk[this.chunkIndex].findIndex(hr-this.layer.chunkPos[this.chunkIndex],gr,!0);(!vr||this.rangeIndex<xr)&&this.setRangeIndex(xr)}this.next()}forward(hr,gr){(this.to-hr||this.endSide-gr)<0&&this.gotoInner(hr,gr,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let hr=this.layer.chunkPos[this.chunkIndex],gr=this.layer.chunk[this.chunkIndex],vr=hr+gr.from[this.rangeIndex];if(this.from=vr,this.to=hr+gr.to[this.rangeIndex],this.value=gr.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(hr){if(hr==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=hr}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(hr){return this.from-hr.from||this.startSide-hr.startSide||this.rank-hr.rank||this.to-hr.to||this.endSide-hr.endSide}}class HeapCursor{constructor(hr){this.heap=hr}static from(hr,gr=null,vr=-1){let xr=[];for(let Er=0;Er<hr.length;Er++)for(let Cr=hr[Er];!Cr.isEmpty;Cr=Cr.nextLayer)Cr.maxPoint>=vr&&xr.push(new LayerCursor(Cr,gr,vr,Er));return xr.length==1?xr[0]:new HeapCursor(xr)}get startSide(){return this.value?this.value.startSide:0}goto(hr,gr=-1e9){for(let vr of this.heap)vr.goto(hr,gr);for(let vr=this.heap.length>>1;vr>=0;vr--)heapBubble(this.heap,vr);return this.next(),this}forward(hr,gr){for(let vr of this.heap)vr.forward(hr,gr);for(let vr=this.heap.length>>1;vr>=0;vr--)heapBubble(this.heap,vr);(this.to-hr||this.value.endSide-gr)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let hr=this.heap[0];this.from=hr.from,this.to=hr.to,this.value=hr.value,this.rank=hr.rank,hr.value&&hr.next(),heapBubble(this.heap,0)}}}function heapBubble(mr,hr){for(let gr=mr[hr];;){let vr=(hr<<1)+1;if(vr>=mr.length)break;let xr=mr[vr];if(vr+1<mr.length&&xr.compare(mr[vr+1])>=0&&(xr=mr[vr+1],vr++),gr.compare(xr)<0)break;mr[vr]=gr,mr[hr]=xr,hr=vr}}class SpanCursor{constructor(hr,gr,vr){this.minPoint=vr,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=HeapCursor.from(hr,gr,vr)}goto(hr,gr=-1e9){return this.cursor.goto(hr,gr),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=hr,this.endSide=gr,this.openStart=-1,this.next(),this}forward(hr,gr){for(;this.minActive>-1&&(this.activeTo[this.minActive]-hr||this.active[this.minActive].endSide-gr)<0;)this.removeActive(this.minActive);this.cursor.forward(hr,gr)}removeActive(hr){remove(this.active,hr),remove(this.activeTo,hr),remove(this.activeRank,hr),this.minActive=findMinIndex(this.active,this.activeTo)}addActive(hr){let gr=0,{value:vr,to:xr,rank:Er}=this.cursor;for(;gr<this.activeRank.length&&(Er-this.activeRank[gr]||xr-this.activeTo[gr])>0;)gr++;insert(this.active,gr,vr),insert(this.activeTo,gr,xr),insert(this.activeRank,gr,Er),hr&&insert(hr,gr,this.cursor.from),this.minActive=findMinIndex(this.active,this.activeTo)}next(){let hr=this.to,gr=this.point;this.point=null;let vr=this.openStart<0?[]:null;for(;;){let xr=this.minActive;if(xr>-1&&(this.activeTo[xr]-this.cursor.from||this.active[xr].endSide-this.cursor.startSide)<0){if(this.activeTo[xr]>hr){this.to=this.activeTo[xr],this.endSide=this.active[xr].endSide;break}this.removeActive(xr),vr&&remove(vr,xr)}else if(this.cursor.value)if(this.cursor.from>hr){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let Er=this.cursor.value;if(!Er.point)this.addActive(vr),this.cursor.next();else if(gr&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=Er,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=Er.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(vr){this.openStart=0;for(let xr=vr.length-1;xr>=0&&vr[xr]<hr;xr--)this.openStart++}}activeForPoint(hr){if(!this.active.length)return this.active;let gr=[];for(let vr=this.active.length-1;vr>=0&&!(this.activeRank[vr]<this.pointRank);vr--)(this.activeTo[vr]>hr||this.activeTo[vr]==hr&&this.active[vr].endSide>=this.point.endSide)&&gr.push(this.active[vr]);return gr.reverse()}openEnd(hr){let gr=0;for(let vr=this.activeTo.length-1;vr>=0&&this.activeTo[vr]>hr;vr--)gr++;return gr}}function compare(mr,hr,gr,vr,xr,Er){mr.goto(hr),gr.goto(vr);let Cr=vr+xr,wr=vr,Rr=vr-hr;for(;;){let kr=mr.to+Rr-gr.to,Dr=kr||mr.endSide-gr.endSide,Br=Dr<0?mr.to+Rr:gr.to,Hr=Math.min(Br,Cr);if(mr.point||gr.point?mr.point&&gr.point&&(mr.point==gr.point||mr.point.eq(gr.point))&&sameValues(mr.activeForPoint(mr.to),gr.activeForPoint(gr.to))||Er.comparePoint(wr,Hr,mr.point,gr.point):Hr>wr&&!sameValues(mr.active,gr.active)&&Er.compareRange(wr,Hr,mr.active,gr.active),Br>Cr)break;(kr||mr.openEnd!=gr.openEnd)&&Er.boundChange&&Er.boundChange(Br),wr=Br,Dr<=0&&mr.next(),Dr>=0&&gr.next()}}function sameValues(mr,hr){if(mr.length!=hr.length)return!1;for(let gr=0;gr<mr.length;gr++)if(mr[gr]!=hr[gr]&&!mr[gr].eq(hr[gr]))return!1;return!0}function remove(mr,hr){for(let gr=hr,vr=mr.length-1;gr<vr;gr++)mr[gr]=mr[gr+1];mr.pop()}function insert(mr,hr,gr){for(let vr=mr.length-1;vr>=hr;vr--)mr[vr+1]=mr[vr];mr[hr]=gr}function findMinIndex(mr,hr){let gr=-1,vr=1e9;for(let xr=0;xr<hr.length;xr++)(hr[xr]-vr||mr[xr].endSide-mr[gr].endSide)<0&&(gr=xr,vr=hr[xr]);return gr}function countColumn(mr,hr,gr=mr.length){let vr=0;for(let xr=0;xr<gr&&xr<mr.length;)mr.charCodeAt(xr)==9?(vr+=hr-vr%hr,xr++):(vr++,xr=findClusterBreak(mr,xr));return vr}function findColumn(mr,hr,gr,vr){for(let xr=0,Er=0;;){if(Er>=hr)return xr;if(xr==mr.length)break;Er+=mr.charCodeAt(xr)==9?gr-Er%gr:1,xr=findClusterBreak(mr,xr)}return vr===!0?-1:mr.length}const C$3="ͼ",COUNT=typeof Symbol>"u"?"__"+C$3:Symbol.for(C$3),SET=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),top=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class StyleModule{constructor(hr,gr){this.rules=[];let{finish:vr}=gr||{};function xr(Cr){return/^@/.test(Cr)?[Cr]:Cr.split(/,\s*/)}function Er(Cr,wr,Rr,kr){let Dr=[],Br=/^@(\w+)\b/.exec(Cr[0]),Hr=Br&&Br[1]=="keyframes";if(Br&&wr==null)return Rr.push(Cr[0]+";");for(let Gr in wr){let qr=wr[Gr];if(/&/.test(Gr))Er(Gr.split(/,\s*/).map(zr=>Cr.map(Qr=>zr.replace(/&/,Qr))).reduce((zr,Qr)=>zr.concat(Qr)),qr,Rr);else if(qr&&typeof qr=="object"){if(!Br)throw new RangeError("The value of a property ("+Gr+") should be a primitive value.");Er(xr(Gr),qr,Dr,Hr)}else qr!=null&&Dr.push(Gr.replace(/_.*/,"").replace(/[A-Z]/g,zr=>"-"+zr.toLowerCase())+": "+qr+";")}(Dr.length||Hr)&&Rr.push((vr&&!Br&&!kr?Cr.map(vr):Cr).join(", ")+" {"+Dr.join(" ")+"}")}for(let Cr in hr)Er(xr(Cr),hr[Cr],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let hr=top[COUNT]||1;return top[COUNT]=hr+1,C$3+hr.toString(36)}static mount(hr,gr,vr){let xr=hr[SET],Er=vr&&vr.nonce;xr?Er&&xr.setNonce(Er):xr=new StyleSet(hr,Er),xr.mount(Array.isArray(gr)?gr:[gr],hr)}}let adoptedSet=new Map;class StyleSet{constructor(hr,gr){let vr=hr.ownerDocument||hr,xr=vr.defaultView;if(!hr.head&&hr.adoptedStyleSheets&&xr.CSSStyleSheet){let Er=adoptedSet.get(vr);if(Er)return hr[SET]=Er;this.sheet=new xr.CSSStyleSheet,adoptedSet.set(vr,this)}else this.styleTag=vr.createElement("style"),gr&&this.styleTag.setAttribute("nonce",gr);this.modules=[],hr[SET]=this}mount(hr,gr){let vr=this.sheet,xr=0,Er=0;for(let Cr=0;Cr<hr.length;Cr++){let wr=hr[Cr],Rr=this.modules.indexOf(wr);if(Rr<Er&&Rr>-1&&(this.modules.splice(Rr,1),Er--,Rr=-1),Rr==-1){if(this.modules.splice(Er++,0,wr),vr)for(let kr=0;kr<wr.rules.length;kr++)vr.insertRule(wr.rules[kr],xr++)}else{for(;Er<Rr;)xr+=this.modules[Er++].rules.length;xr+=wr.rules.length,Er++}}if(vr)gr.adoptedStyleSheets.indexOf(this.sheet)<0&&(gr.adoptedStyleSheets=[this.sheet,...gr.adoptedStyleSheets]);else{let Cr="";for(let Rr=0;Rr<this.modules.length;Rr++)Cr+=this.modules[Rr].getRules()+`
`;this.styleTag.textContent=Cr;let wr=gr.head||gr;this.styleTag.parentNode!=wr&&wr.insertBefore(this.styleTag,wr.firstChild)}}setNonce(hr){this.styleTag&&this.styleTag.getAttribute("nonce")!=hr&&this.styleTag.setAttribute("nonce",hr)}}var base={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shift={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},mac=typeof navigator<"u"&&/Mac/.test(navigator.platform),ie$5=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var i$4=0;i$4<10;i$4++)base[48+i$4]=base[96+i$4]=String(i$4);for(var i$4=1;i$4<=24;i$4++)base[i$4+111]="F"+i$4;for(var i$4=65;i$4<=90;i$4++)base[i$4]=String.fromCharCode(i$4+32),shift[i$4]=String.fromCharCode(i$4);for(var code in base)shift.hasOwnProperty(code)||(shift[code]=base[code]);function keyName(mr){var hr=mac&&mr.metaKey&&mr.shiftKey&&!mr.ctrlKey&&!mr.altKey||ie$5&&mr.shiftKey&&mr.key&&mr.key.length==1||mr.key=="Unidentified",gr=!hr&&mr.key||(mr.shiftKey?shift:base)[mr.keyCode]||mr.key||"Unidentified";return gr=="Esc"&&(gr="Escape"),gr=="Del"&&(gr="Delete"),gr=="Left"&&(gr="ArrowLeft"),gr=="Up"&&(gr="ArrowUp"),gr=="Right"&&(gr="ArrowRight"),gr=="Down"&&(gr="ArrowDown"),gr}function getSelection(mr){let hr;return mr.nodeType==11?hr=mr.getSelection?mr:mr.ownerDocument:hr=mr,hr.getSelection()}function contains(mr,hr){return hr?mr==hr||mr.contains(hr.nodeType!=1?hr.parentNode:hr):!1}function hasSelection(mr,hr){if(!hr.anchorNode)return!1;try{return contains(mr,hr.anchorNode)}catch{return!1}}function clientRectsFor(mr){return mr.nodeType==3?textRange(mr,0,mr.nodeValue.length).getClientRects():mr.nodeType==1?mr.getClientRects():[]}function isEquivalentPosition(mr,hr,gr,vr){return gr?scanFor(mr,hr,gr,vr,-1)||scanFor(mr,hr,gr,vr,1):!1}function domIndex(mr){for(var hr=0;;hr++)if(mr=mr.previousSibling,!mr)return hr}function isBlockElement(mr){return mr.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(mr.nodeName)}function scanFor(mr,hr,gr,vr,xr){for(;;){if(mr==gr&&hr==vr)return!0;if(hr==(xr<0?0:maxOffset(mr))){if(mr.nodeName=="DIV")return!1;let Er=mr.parentNode;if(!Er||Er.nodeType!=1)return!1;hr=domIndex(mr)+(xr<0?0:1),mr=Er}else if(mr.nodeType==1){if(mr=mr.childNodes[hr+(xr<0?-1:0)],mr.nodeType==1&&mr.contentEditable=="false")return!1;hr=xr<0?maxOffset(mr):0}else return!1}}function maxOffset(mr){return mr.nodeType==3?mr.nodeValue.length:mr.childNodes.length}function flattenRect(mr,hr){let gr=hr?mr.left:mr.right;return{left:gr,right:gr,top:mr.top,bottom:mr.bottom}}function windowRect(mr){let hr=mr.visualViewport;return hr?{left:0,right:hr.width,top:0,bottom:hr.height}:{left:0,right:mr.innerWidth,top:0,bottom:mr.innerHeight}}function getScale(mr,hr){let gr=hr.width/mr.offsetWidth,vr=hr.height/mr.offsetHeight;return(gr>.995&&gr<1.005||!isFinite(gr)||Math.abs(hr.width-mr.offsetWidth)<1)&&(gr=1),(vr>.995&&vr<1.005||!isFinite(vr)||Math.abs(hr.height-mr.offsetHeight)<1)&&(vr=1),{scaleX:gr,scaleY:vr}}function scrollRectIntoView(mr,hr,gr,vr,xr,Er,Cr,wr){let Rr=mr.ownerDocument,kr=Rr.defaultView||window;for(let Dr=mr,Br=!1;Dr&&!Br;)if(Dr.nodeType==1){let Hr,Gr=Dr==Rr.body,qr=1,zr=1;if(Gr)Hr=windowRect(kr);else{if(/^(fixed|sticky)$/.test(getComputedStyle(Dr).position)&&(Br=!0),Dr.scrollHeight<=Dr.clientHeight&&Dr.scrollWidth<=Dr.clientWidth){Dr=Dr.assignedSlot||Dr.parentNode;continue}let hn=Dr.getBoundingClientRect();({scaleX:qr,scaleY:zr}=getScale(Dr,hn)),Hr={left:hn.left,right:hn.left+Dr.clientWidth*qr,top:hn.top,bottom:hn.top+Dr.clientHeight*zr}}let Qr=0,sn=0;if(xr=="nearest")hr.top<Hr.top?(sn=-(Hr.top-hr.top+Cr),gr>0&&hr.bottom>Hr.bottom+sn&&(sn=hr.bottom-Hr.bottom+sn+Cr)):hr.bottom>Hr.bottom&&(sn=hr.bottom-Hr.bottom+Cr,gr<0&&hr.top-sn<Hr.top&&(sn=-(Hr.top+sn-hr.top+Cr)));else{let hn=hr.bottom-hr.top,vn=Hr.bottom-Hr.top;sn=(xr=="center"&&hn<=vn?hr.top+hn/2-vn/2:xr=="start"||xr=="center"&&gr<0?hr.top-Cr:hr.bottom-vn+Cr)-Hr.top}if(vr=="nearest"?hr.left<Hr.left?(Qr=-(Hr.left-hr.left+Er),gr>0&&hr.right>Hr.right+Qr&&(Qr=hr.right-Hr.right+Qr+Er)):hr.right>Hr.right&&(Qr=hr.right-Hr.right+Er,gr<0&&hr.left<Hr.left+Qr&&(Qr=-(Hr.left+Qr-hr.left+Er))):Qr=(vr=="center"?hr.left+(hr.right-hr.left)/2-(Hr.right-Hr.left)/2:vr=="start"==wr?hr.left-Er:hr.right-(Hr.right-Hr.left)+Er)-Hr.left,Qr||sn)if(Gr)kr.scrollBy(Qr,sn);else{let hn=0,vn=0;if(sn){let yn=Dr.scrollTop;Dr.scrollTop+=sn/zr,vn=(Dr.scrollTop-yn)*zr}if(Qr){let yn=Dr.scrollLeft;Dr.scrollLeft+=Qr/qr,hn=(Dr.scrollLeft-yn)*qr}hr={left:hr.left-hn,top:hr.top-vn,right:hr.right-hn,bottom:hr.bottom-vn},hn&&Math.abs(hn-Qr)<1&&(vr="nearest"),vn&&Math.abs(vn-sn)<1&&(xr="nearest")}if(Gr)break;Dr=Dr.assignedSlot||Dr.parentNode}else if(Dr.nodeType==11)Dr=Dr.host;else break}function scrollableParents(mr){let hr=mr.ownerDocument,gr,vr;for(let xr=mr.parentNode;xr&&!(xr==hr.body||gr&&vr);)if(xr.nodeType==1)!vr&&xr.scrollHeight>xr.clientHeight&&(vr=xr),!gr&&xr.scrollWidth>xr.clientWidth&&(gr=xr),xr=xr.assignedSlot||xr.parentNode;else if(xr.nodeType==11)xr=xr.host;else break;return{x:gr,y:vr}}class DOMSelectionState{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(hr){return this.anchorNode==hr.anchorNode&&this.anchorOffset==hr.anchorOffset&&this.focusNode==hr.focusNode&&this.focusOffset==hr.focusOffset}setRange(hr){let{anchorNode:gr,focusNode:vr}=hr;this.set(gr,Math.min(hr.anchorOffset,gr?maxOffset(gr):0),vr,Math.min(hr.focusOffset,vr?maxOffset(vr):0))}set(hr,gr,vr,xr){this.anchorNode=hr,this.anchorOffset=gr,this.focusNode=vr,this.focusOffset=xr}}let preventScrollSupported=null;function focusPreventScroll(mr){if(mr.setActive)return mr.setActive();if(preventScrollSupported)return mr.focus(preventScrollSupported);let hr=[];for(let gr=mr;gr&&(hr.push(gr,gr.scrollTop,gr.scrollLeft),gr!=gr.ownerDocument);gr=gr.parentNode);if(mr.focus(preventScrollSupported==null?{get preventScroll(){return preventScrollSupported={preventScroll:!0},!0}}:void 0),!preventScrollSupported){preventScrollSupported=!1;for(let gr=0;gr<hr.length;){let vr=hr[gr++],xr=hr[gr++],Er=hr[gr++];vr.scrollTop!=xr&&(vr.scrollTop=xr),vr.scrollLeft!=Er&&(vr.scrollLeft=Er)}}}let scratchRange;function textRange(mr,hr,gr=hr){let vr=scratchRange||(scratchRange=document.createRange());return vr.setEnd(mr,gr),vr.setStart(mr,hr),vr}function dispatchKey(mr,hr,gr,vr){let xr={key:hr,code:hr,keyCode:gr,which:gr,cancelable:!0};vr&&({altKey:xr.altKey,ctrlKey:xr.ctrlKey,shiftKey:xr.shiftKey,metaKey:xr.metaKey}=vr);let Er=new KeyboardEvent("keydown",xr);Er.synthetic=!0,mr.dispatchEvent(Er);let Cr=new KeyboardEvent("keyup",xr);return Cr.synthetic=!0,mr.dispatchEvent(Cr),Er.defaultPrevented||Cr.defaultPrevented}function getRoot(mr){for(;mr;){if(mr&&(mr.nodeType==9||mr.nodeType==11&&mr.host))return mr;mr=mr.assignedSlot||mr.parentNode}return null}function clearAttributes(mr){for(;mr.attributes.length;)mr.removeAttributeNode(mr.attributes[0])}function atElementStart(mr,hr){let gr=hr.focusNode,vr=hr.focusOffset;if(!gr||hr.anchorNode!=gr||hr.anchorOffset!=vr)return!1;for(vr=Math.min(vr,maxOffset(gr));;)if(vr){if(gr.nodeType!=1)return!1;let xr=gr.childNodes[vr-1];xr.contentEditable=="false"?vr--:(gr=xr,vr=maxOffset(gr))}else{if(gr==mr)return!0;vr=domIndex(gr),gr=gr.parentNode}}function isScrolledToBottom(mr){return mr.scrollTop>Math.max(1,mr.scrollHeight-mr.clientHeight-4)}function textNodeBefore(mr,hr){for(let gr=mr,vr=hr;;){if(gr.nodeType==3&&vr>0)return{node:gr,offset:vr};if(gr.nodeType==1&&vr>0){if(gr.contentEditable=="false")return null;gr=gr.childNodes[vr-1],vr=maxOffset(gr)}else if(gr.parentNode&&!isBlockElement(gr))vr=domIndex(gr),gr=gr.parentNode;else return null}}function textNodeAfter(mr,hr){for(let gr=mr,vr=hr;;){if(gr.nodeType==3&&vr<gr.nodeValue.length)return{node:gr,offset:vr};if(gr.nodeType==1&&vr<gr.childNodes.length){if(gr.contentEditable=="false")return null;gr=gr.childNodes[vr],vr=0}else if(gr.parentNode&&!isBlockElement(gr))vr=domIndex(gr)+1,gr=gr.parentNode;else return null}}class DOMPos{constructor(hr,gr,vr=!0){this.node=hr,this.offset=gr,this.precise=vr}static before(hr,gr){return new DOMPos(hr.parentNode,domIndex(hr),gr)}static after(hr,gr){return new DOMPos(hr.parentNode,domIndex(hr)+1,gr)}}const noChildren=[];class ContentView{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(hr){let gr=this.posAtStart;for(let vr of this.children){if(vr==hr)return gr;gr+=vr.length+vr.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(hr){return this.posBefore(hr)+hr.length}sync(hr,gr){if(this.flags&2){let vr=this.dom,xr=null,Er;for(let Cr of this.children){if(Cr.flags&7){if(!Cr.dom&&(Er=xr?xr.nextSibling:vr.firstChild)){let wr=ContentView.get(Er);(!wr||!wr.parent&&wr.canReuseDOM(Cr))&&Cr.reuseDOM(Er)}Cr.sync(hr,gr),Cr.flags&=-8}if(Er=xr?xr.nextSibling:vr.firstChild,gr&&!gr.written&&gr.node==vr&&Er!=Cr.dom&&(gr.written=!0),Cr.dom.parentNode==vr)for(;Er&&Er!=Cr.dom;)Er=rm$1(Er);else vr.insertBefore(Cr.dom,Er);xr=Cr.dom}for(Er=xr?xr.nextSibling:vr.firstChild,Er&&gr&&gr.node==vr&&(gr.written=!0);Er;)Er=rm$1(Er)}else if(this.flags&1)for(let vr of this.children)vr.flags&7&&(vr.sync(hr,gr),vr.flags&=-8)}reuseDOM(hr){}localPosFromDOM(hr,gr){let vr;if(hr==this.dom)vr=this.dom.childNodes[gr];else{let xr=maxOffset(hr)==0?0:gr==0?-1:1;for(;;){let Er=hr.parentNode;if(Er==this.dom)break;xr==0&&Er.firstChild!=Er.lastChild&&(hr==Er.firstChild?xr=-1:xr=1),hr=Er}xr<0?vr=hr:vr=hr.nextSibling}if(vr==this.dom.firstChild)return 0;for(;vr&&!ContentView.get(vr);)vr=vr.nextSibling;if(!vr)return this.length;for(let xr=0,Er=0;;xr++){let Cr=this.children[xr];if(Cr.dom==vr)return Er;Er+=Cr.length+Cr.breakAfter}}domBoundsAround(hr,gr,vr=0){let xr=-1,Er=-1,Cr=-1,wr=-1;for(let Rr=0,kr=vr,Dr=vr;Rr<this.children.length;Rr++){let Br=this.children[Rr],Hr=kr+Br.length;if(kr<hr&&Hr>gr)return Br.domBoundsAround(hr,gr,kr);if(Hr>=hr&&xr==-1&&(xr=Rr,Er=kr),kr>gr&&Br.dom.parentNode==this.dom){Cr=Rr,wr=Dr;break}Dr=Hr,kr=Hr+Br.breakAfter}return{from:Er,to:wr<0?vr+this.length:wr,startDOM:(xr?this.children[xr-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:Cr<this.children.length&&Cr>=0?this.children[Cr].dom:null}}markDirty(hr=!1){this.flags|=2,this.markParentsDirty(hr)}markParentsDirty(hr){for(let gr=this.parent;gr;gr=gr.parent){if(hr&&(gr.flags|=2),gr.flags&1)return;gr.flags|=1,hr=!1}}setParent(hr){this.parent!=hr&&(this.parent=hr,this.flags&7&&this.markParentsDirty(!0))}setDOM(hr){this.dom!=hr&&(this.dom&&(this.dom.cmView=null),this.dom=hr,hr.cmView=this)}get rootView(){for(let hr=this;;){let gr=hr.parent;if(!gr)return hr;hr=gr}}replaceChildren(hr,gr,vr=noChildren){this.markDirty();for(let xr=hr;xr<gr;xr++){let Er=this.children[xr];Er.parent==this&&vr.indexOf(Er)<0&&Er.destroy()}vr.length<250?this.children.splice(hr,gr-hr,...vr):this.children=[].concat(this.children.slice(0,hr),vr,this.children.slice(gr));for(let xr=0;xr<vr.length;xr++)vr[xr].setParent(this)}ignoreMutation(hr){return!1}ignoreEvent(hr){return!1}childCursor(hr=this.length){return new ChildCursor(this.children,hr,this.children.length)}childPos(hr,gr=1){return this.childCursor().findPos(hr,gr)}toString(){let hr=this.constructor.name.replace("View","");return hr+(this.children.length?"("+this.children.join()+")":this.length?"["+(hr=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(hr){return hr.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(hr,gr,vr,xr,Er,Cr){return!1}become(hr){return!1}canReuseDOM(hr){return hr.constructor==this.constructor&&!((this.flags|hr.flags)&8)}getSide(){return 0}destroy(){for(let hr of this.children)hr.parent==this&&hr.destroy();this.parent=null}}ContentView.prototype.breakAfter=0;function rm$1(mr){let hr=mr.nextSibling;return mr.parentNode.removeChild(mr),hr}class ChildCursor{constructor(hr,gr,vr){this.children=hr,this.pos=gr,this.i=vr,this.off=0}findPos(hr,gr=1){for(;;){if(hr>this.pos||hr==this.pos&&(gr>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=hr-this.pos,this;let vr=this.children[--this.i];this.pos-=vr.length+vr.breakAfter}}}function replaceRange(mr,hr,gr,vr,xr,Er,Cr,wr,Rr){let{children:kr}=mr,Dr=kr.length?kr[hr]:null,Br=Er.length?Er[Er.length-1]:null,Hr=Br?Br.breakAfter:Cr;if(!(hr==vr&&Dr&&!Cr&&!Hr&&Er.length<2&&Dr.merge(gr,xr,Er.length?Br:null,gr==0,wr,Rr))){if(vr<kr.length){let Gr=kr[vr];Gr&&(xr<Gr.length||Gr.breakAfter&&Br?.breakAfter)?(hr==vr&&(Gr=Gr.split(xr),xr=0),!Hr&&Br&&Gr.merge(0,xr,Br,!0,0,Rr)?Er[Er.length-1]=Gr:((xr||Gr.children.length&&!Gr.children[0].length)&&Gr.merge(0,xr,null,!1,0,Rr),Er.push(Gr))):Gr?.breakAfter&&(Br?Br.breakAfter=1:Cr=1),vr++}for(Dr&&(Dr.breakAfter=Cr,gr>0&&(!Cr&&Er.length&&Dr.merge(gr,Dr.length,Er[0],!1,wr,0)?Dr.breakAfter=Er.shift().breakAfter:(gr<Dr.length||Dr.children.length&&Dr.children[Dr.children.length-1].length==0)&&Dr.merge(gr,Dr.length,null,!1,wr,0),hr++));hr<vr&&Er.length;)if(kr[vr-1].become(Er[Er.length-1]))vr--,Er.pop(),Rr=Er.length?0:wr;else if(kr[hr].become(Er[0]))hr++,Er.shift(),wr=Er.length?0:Rr;else break;!Er.length&&hr&&vr<kr.length&&!kr[hr-1].breakAfter&&kr[vr].merge(0,0,kr[hr-1],!1,wr,Rr)&&hr--,(hr<vr||Er.length)&&mr.replaceChildren(hr,vr,Er)}}function mergeChildrenInto(mr,hr,gr,vr,xr,Er){let Cr=mr.childCursor(),{i:wr,off:Rr}=Cr.findPos(gr,1),{i:kr,off:Dr}=Cr.findPos(hr,-1),Br=hr-gr;for(let Hr of vr)Br+=Hr.length;mr.length+=Br,replaceRange(mr,kr,Dr,wr,Rr,vr,0,xr,Er)}let nav=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},doc=typeof document<"u"?document:{documentElement:{style:{}}};const ie_edge=/Edge\/(\d+)/.exec(nav.userAgent),ie_upto10=/MSIE \d/.test(nav.userAgent),ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(nav.userAgent),ie$4=!!(ie_upto10||ie_11up||ie_edge),gecko=!ie$4&&/gecko\/(\d+)/i.test(nav.userAgent),chrome$1=!ie$4&&/Chrome\/(\d+)/.exec(nav.userAgent),webkit="webkitFontSmoothing"in doc.documentElement.style,safari=!ie$4&&/Apple Computer/.test(nav.vendor),ios=safari&&(/Mobile\/\w+/.test(nav.userAgent)||nav.maxTouchPoints>2);var browser={mac:ios||/Mac/.test(nav.platform),windows:/Win/.test(nav.platform),linux:/Linux|X11/.test(nav.platform),ie:ie$4,ie_version:ie_upto10?doc.documentMode||6:ie_11up?+ie_11up[1]:ie_edge?+ie_edge[1]:0,gecko,gecko_version:gecko?+(/Firefox\/(\d+)/.exec(nav.userAgent)||[0,0])[1]:0,chrome:!!chrome$1,chrome_version:chrome$1?+chrome$1[1]:0,ios,android:/Android\b/.test(nav.userAgent),webkit,safari,webkit_version:webkit?+(/\bAppleWebKit\/(\d+)/.exec(nav.userAgent)||[0,0])[1]:0,tabSize:doc.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const MaxJoinLen=256;class TextView extends ContentView{constructor(hr){super(),this.text=hr}get length(){return this.text.length}createDOM(hr){this.setDOM(hr||document.createTextNode(this.text))}sync(hr,gr){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(gr&&gr.node==this.dom&&(gr.written=!0),this.dom.nodeValue=this.text)}reuseDOM(hr){hr.nodeType==3&&this.createDOM(hr)}merge(hr,gr,vr){return this.flags&8||vr&&(!(vr instanceof TextView)||this.length-(gr-hr)+vr.length>MaxJoinLen||vr.flags&8)?!1:(this.text=this.text.slice(0,hr)+(vr?vr.text:"")+this.text.slice(gr),this.markDirty(),!0)}split(hr){let gr=new TextView(this.text.slice(hr));return this.text=this.text.slice(0,hr),this.markDirty(),gr.flags|=this.flags&8,gr}localPosFromDOM(hr,gr){return hr==this.dom?gr:gr?this.text.length:0}domAtPos(hr){return new DOMPos(this.dom,hr)}domBoundsAround(hr,gr,vr){return{from:vr,to:vr+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(hr,gr){return textCoords(this.dom,hr,gr)}}class MarkView extends ContentView{constructor(hr,gr=[],vr=0){super(),this.mark=hr,this.children=gr,this.length=vr;for(let xr of gr)xr.setParent(this)}setAttrs(hr){if(clearAttributes(hr),this.mark.class&&(hr.className=this.mark.class),this.mark.attrs)for(let gr in this.mark.attrs)hr.setAttribute(gr,this.mark.attrs[gr]);return hr}canReuseDOM(hr){return super.canReuseDOM(hr)&&!((this.flags|hr.flags)&8)}reuseDOM(hr){hr.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(hr),this.flags|=6)}sync(hr,gr){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(hr,gr)}merge(hr,gr,vr,xr,Er,Cr){return vr&&(!(vr instanceof MarkView&&vr.mark.eq(this.mark))||hr&&Er<=0||gr<this.length&&Cr<=0)?!1:(mergeChildrenInto(this,hr,gr,vr?vr.children.slice():[],Er-1,Cr-1),this.markDirty(),!0)}split(hr){let gr=[],vr=0,xr=-1,Er=0;for(let wr of this.children){let Rr=vr+wr.length;Rr>hr&&gr.push(vr<hr?wr.split(hr-vr):wr),xr<0&&vr>=hr&&(xr=Er),vr=Rr,Er++}let Cr=this.length-hr;return this.length=hr,xr>-1&&(this.children.length=xr,this.markDirty()),new MarkView(this.mark,gr,Cr)}domAtPos(hr){return inlineDOMAtPos(this,hr)}coordsAt(hr,gr){return coordsInChildren(this,hr,gr)}}function textCoords(mr,hr,gr){let vr=mr.nodeValue.length;hr>vr&&(hr=vr);let xr=hr,Er=hr,Cr=0;hr==0&&gr<0||hr==vr&&gr>=0?browser.chrome||browser.gecko||(hr?(xr--,Cr=1):Er<vr&&(Er++,Cr=-1)):gr<0?xr--:Er<vr&&Er++;let wr=textRange(mr,xr,Er).getClientRects();if(!wr.length)return null;let Rr=wr[(Cr?Cr<0:gr>=0)?0:wr.length-1];return browser.safari&&!Cr&&Rr.width==0&&(Rr=Array.prototype.find.call(wr,kr=>kr.width)||Rr),Cr?flattenRect(Rr,Cr<0):Rr||null}class WidgetView extends ContentView{static create(hr,gr,vr){return new WidgetView(hr,gr,vr)}constructor(hr,gr,vr){super(),this.widget=hr,this.length=gr,this.side=vr,this.prevWidget=null}split(hr){let gr=WidgetView.create(this.widget,this.length-hr,this.side);return this.length-=hr,gr}sync(hr){(!this.dom||!this.widget.updateDOM(this.dom,hr))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(hr)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(hr,gr,vr,xr,Er,Cr){return vr&&(!(vr instanceof WidgetView)||!this.widget.compare(vr.widget)||hr>0&&Er<=0||gr<this.length&&Cr<=0)?!1:(this.length=hr+(vr?vr.length:0)+(this.length-gr),!0)}become(hr){return hr instanceof WidgetView&&hr.side==this.side&&this.widget.constructor==hr.widget.constructor?(this.widget.compare(hr.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=hr.widget,this.length=hr.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(hr){return this.widget.ignoreEvent(hr)}get overrideDOMText(){if(this.length==0)return Text$1.empty;let hr=this;for(;hr.parent;)hr=hr.parent;let{view:gr}=hr,vr=gr&&gr.state.doc,xr=this.posAtStart;return vr?vr.slice(xr,xr+this.length):Text$1.empty}domAtPos(hr){return(this.length?hr==0:this.side>0)?DOMPos.before(this.dom):DOMPos.after(this.dom,hr==this.length)}domBoundsAround(){return null}coordsAt(hr,gr){let vr=this.widget.coordsAt(this.dom,hr,gr);if(vr)return vr;let xr=this.dom.getClientRects(),Er=null;if(!xr.length)return null;let Cr=this.side?this.side<0:hr>0;for(let wr=Cr?xr.length-1:0;Er=xr[wr],!(hr>0?wr==0:wr==xr.length-1||Er.top<Er.bottom);wr+=Cr?-1:1);return flattenRect(Er,!Cr)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class WidgetBufferView extends ContentView{constructor(hr){super(),this.side=hr}get length(){return 0}merge(){return!1}become(hr){return hr instanceof WidgetBufferView&&hr.side==this.side}split(){return new WidgetBufferView(this.side)}sync(){if(!this.dom){let hr=document.createElement("img");hr.className="cm-widgetBuffer",hr.setAttribute("aria-hidden","true"),this.setDOM(hr)}}getSide(){return this.side}domAtPos(hr){return this.side>0?DOMPos.before(this.dom):DOMPos.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(hr){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Text$1.empty}get isHidden(){return!0}}TextView.prototype.children=WidgetView.prototype.children=WidgetBufferView.prototype.children=noChildren;function inlineDOMAtPos(mr,hr){let gr=mr.dom,{children:vr}=mr,xr=0;for(let Er=0;xr<vr.length;xr++){let Cr=vr[xr],wr=Er+Cr.length;if(!(wr==Er&&Cr.getSide()<=0)){if(hr>Er&&hr<wr&&Cr.dom.parentNode==gr)return Cr.domAtPos(hr-Er);if(hr<=Er)break;Er=wr}}for(let Er=xr;Er>0;Er--){let Cr=vr[Er-1];if(Cr.dom.parentNode==gr)return Cr.domAtPos(Cr.length)}for(let Er=xr;Er<vr.length;Er++){let Cr=vr[Er];if(Cr.dom.parentNode==gr)return Cr.domAtPos(0)}return new DOMPos(gr,0)}function joinInlineInto(mr,hr,gr){let vr,{children:xr}=mr;gr>0&&hr instanceof MarkView&&xr.length&&(vr=xr[xr.length-1])instanceof MarkView&&vr.mark.eq(hr.mark)?joinInlineInto(vr,hr.children[0],gr-1):(xr.push(hr),hr.setParent(mr)),mr.length+=hr.length}function coordsInChildren(mr,hr,gr){let vr=null,xr=-1,Er=null,Cr=-1;function wr(kr,Dr){for(let Br=0,Hr=0;Br<kr.children.length&&Hr<=Dr;Br++){let Gr=kr.children[Br],qr=Hr+Gr.length;qr>=Dr&&(Gr.children.length?wr(Gr,Dr-Hr):(!Er||Er.isHidden&&gr>0)&&(qr>Dr||Hr==qr&&Gr.getSide()>0)?(Er=Gr,Cr=Dr-Hr):(Hr<Dr||Hr==qr&&Gr.getSide()<0&&!Gr.isHidden)&&(vr=Gr,xr=Dr-Hr)),Hr=qr}}wr(mr,hr);let Rr=(gr<0?vr:Er)||vr||Er;return Rr?Rr.coordsAt(Math.max(0,Rr==vr?xr:Cr),gr):fallbackRect(mr)}function fallbackRect(mr){let hr=mr.dom.lastChild;if(!hr)return mr.dom.getBoundingClientRect();let gr=clientRectsFor(hr);return gr[gr.length-1]||null}function combineAttrs(mr,hr){for(let gr in mr)gr=="class"&&hr.class?hr.class+=" "+mr.class:gr=="style"&&hr.style?hr.style+=";"+mr.style:hr[gr]=mr[gr];return hr}const noAttrs$1=Object.create(null);function attrsEq(mr,hr,gr){if(mr==hr)return!0;mr||(mr=noAttrs$1),hr||(hr=noAttrs$1);let vr=Object.keys(mr),xr=Object.keys(hr);if(vr.length-(gr&&vr.indexOf(gr)>-1?1:0)!=xr.length-(gr&&xr.indexOf(gr)>-1?1:0))return!1;for(let Er of vr)if(Er!=gr&&(xr.indexOf(Er)==-1||mr[Er]!==hr[Er]))return!1;return!0}function updateAttrs(mr,hr,gr){let vr=!1;if(hr)for(let xr in hr)gr&&xr in gr||(vr=!0,xr=="style"?mr.style.cssText="":mr.removeAttribute(xr));if(gr)for(let xr in gr)hr&&hr[xr]==gr[xr]||(vr=!0,xr=="style"?mr.style.cssText=gr[xr]:mr.setAttribute(xr,gr[xr]));return vr}function getAttrs(mr){let hr=Object.create(null);for(let gr=0;gr<mr.attributes.length;gr++){let vr=mr.attributes[gr];hr[vr.name]=vr.value}return hr}class WidgetType{eq(hr){return!1}updateDOM(hr,gr){return!1}compare(hr){return this==hr||this.constructor==hr.constructor&&this.eq(hr)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(hr){return!0}coordsAt(hr,gr,vr){return null}get isHidden(){return!1}get editable(){return!1}destroy(hr){}}var BlockType=function(mr){return mr[mr.Text=0]="Text",mr[mr.WidgetBefore=1]="WidgetBefore",mr[mr.WidgetAfter=2]="WidgetAfter",mr[mr.WidgetRange=3]="WidgetRange",mr}(BlockType||(BlockType={}));class Decoration extends RangeValue{constructor(hr,gr,vr,xr){super(),this.startSide=hr,this.endSide=gr,this.widget=vr,this.spec=xr}get heightRelevant(){return!1}static mark(hr){return new MarkDecoration(hr)}static widget(hr){let gr=Math.max(-1e4,Math.min(1e4,hr.side||0)),vr=!!hr.block;return gr+=vr&&!hr.inlineOrder?gr>0?3e8:-4e8:gr>0?1e8:-1e8,new PointDecoration(hr,gr,gr,vr,hr.widget||null,!1)}static replace(hr){let gr=!!hr.block,vr,xr;if(hr.isBlockGap)vr=-5e8,xr=4e8;else{let{start:Er,end:Cr}=getInclusive(hr,gr);vr=(Er?gr?-3e8:-1:5e8)-1,xr=(Cr?gr?2e8:1:-6e8)+1}return new PointDecoration(hr,vr,xr,gr,hr.widget||null,!0)}static line(hr){return new LineDecoration(hr)}static set(hr,gr=!1){return RangeSet.of(hr,gr)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Decoration.none=RangeSet.empty;class MarkDecoration extends Decoration{constructor(hr){let{start:gr,end:vr}=getInclusive(hr);super(gr?-1:5e8,vr?1:-6e8,null,hr),this.tagName=hr.tagName||"span",this.class=hr.class||"",this.attrs=hr.attributes||null}eq(hr){var gr,vr;return this==hr||hr instanceof MarkDecoration&&this.tagName==hr.tagName&&(this.class||((gr=this.attrs)===null||gr===void 0?void 0:gr.class))==(hr.class||((vr=hr.attrs)===null||vr===void 0?void 0:vr.class))&&attrsEq(this.attrs,hr.attrs,"class")}range(hr,gr=hr){if(hr>=gr)throw new RangeError("Mark decorations may not be empty");return super.range(hr,gr)}}MarkDecoration.prototype.point=!1;class LineDecoration extends Decoration{constructor(hr){super(-2e8,-2e8,null,hr)}eq(hr){return hr instanceof LineDecoration&&this.spec.class==hr.spec.class&&attrsEq(this.spec.attributes,hr.spec.attributes)}range(hr,gr=hr){if(gr!=hr)throw new RangeError("Line decoration ranges must be zero-length");return super.range(hr,gr)}}LineDecoration.prototype.mapMode=MapMode.TrackBefore;LineDecoration.prototype.point=!0;class PointDecoration extends Decoration{constructor(hr,gr,vr,xr,Er,Cr){super(gr,vr,Er,hr),this.block=xr,this.isReplace=Cr,this.mapMode=xr?gr<=0?MapMode.TrackBefore:MapMode.TrackAfter:MapMode.TrackDel}get type(){return this.startSide!=this.endSide?BlockType.WidgetRange:this.startSide<=0?BlockType.WidgetBefore:BlockType.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(hr){return hr instanceof PointDecoration&&widgetsEq(this.widget,hr.widget)&&this.block==hr.block&&this.startSide==hr.startSide&&this.endSide==hr.endSide}range(hr,gr=hr){if(this.isReplace&&(hr>gr||hr==gr&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&gr!=hr)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(hr,gr)}}PointDecoration.prototype.point=!0;function getInclusive(mr,hr=!1){let{inclusiveStart:gr,inclusiveEnd:vr}=mr;return gr==null&&(gr=mr.inclusive),vr==null&&(vr=mr.inclusive),{start:gr??hr,end:vr??hr}}function widgetsEq(mr,hr){return mr==hr||!!(mr&&hr&&mr.compare(hr))}function addRange(mr,hr,gr,vr=0){let xr=gr.length-1;xr>=0&&gr[xr]+vr>=mr?gr[xr]=Math.max(gr[xr],hr):gr.push(mr,hr)}class LineView extends ContentView{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(hr,gr,vr,xr,Er,Cr){if(vr){if(!(vr instanceof LineView))return!1;this.dom||vr.transferDOM(this)}return xr&&this.setDeco(vr?vr.attrs:null),mergeChildrenInto(this,hr,gr,vr?vr.children.slice():[],Er,Cr),!0}split(hr){let gr=new LineView;if(gr.breakAfter=this.breakAfter,this.length==0)return gr;let{i:vr,off:xr}=this.childPos(hr);xr&&(gr.append(this.children[vr].split(xr),0),this.children[vr].merge(xr,this.children[vr].length,null,!1,0,0),vr++);for(let Er=vr;Er<this.children.length;Er++)gr.append(this.children[Er],0);for(;vr>0&&this.children[vr-1].length==0;)this.children[--vr].destroy();return this.children.length=vr,this.markDirty(),this.length=hr,gr}transferDOM(hr){this.dom&&(this.markDirty(),hr.setDOM(this.dom),hr.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(hr){attrsEq(this.attrs,hr)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=hr)}append(hr,gr){joinInlineInto(this,hr,gr)}addLineDeco(hr){let gr=hr.spec.attributes,vr=hr.spec.class;gr&&(this.attrs=combineAttrs(gr,this.attrs||{})),vr&&(this.attrs=combineAttrs({class:vr},this.attrs||{}))}domAtPos(hr){return inlineDOMAtPos(this,hr)}reuseDOM(hr){hr.nodeName=="DIV"&&(this.setDOM(hr),this.flags|=6)}sync(hr,gr){var vr;this.dom?this.flags&4&&(clearAttributes(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(updateAttrs(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(hr,gr);let xr=this.dom.lastChild;for(;xr&&ContentView.get(xr)instanceof MarkView;)xr=xr.lastChild;if(!xr||!this.length||xr.nodeName!="BR"&&((vr=ContentView.get(xr))===null||vr===void 0?void 0:vr.isEditable)==!1&&(!browser.ios||!this.children.some(Er=>Er instanceof TextView))){let Er=document.createElement("BR");Er.cmIgnore=!0,this.dom.appendChild(Er)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let hr=0,gr;for(let vr of this.children){if(!(vr instanceof TextView)||/[^ -~]/.test(vr.text))return null;let xr=clientRectsFor(vr.dom);if(xr.length!=1)return null;hr+=xr[0].width,gr=xr[0].height}return hr?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:hr/this.length,textHeight:gr}:null}coordsAt(hr,gr){let vr=coordsInChildren(this,hr,gr);if(!this.children.length&&vr&&this.parent){let{heightOracle:xr}=this.parent.view.viewState,Er=vr.bottom-vr.top;if(Math.abs(Er-xr.lineHeight)<2&&xr.textHeight<Er){let Cr=(Er-xr.textHeight)/2;return{top:vr.top+Cr,bottom:vr.bottom-Cr,left:vr.left,right:vr.left}}}return vr}become(hr){return hr instanceof LineView&&this.children.length==0&&hr.children.length==0&&attrsEq(this.attrs,hr.attrs)&&this.breakAfter==hr.breakAfter}covers(){return!0}static find(hr,gr){for(let vr=0,xr=0;vr<hr.children.length;vr++){let Er=hr.children[vr],Cr=xr+Er.length;if(Cr>=gr){if(Er instanceof LineView)return Er;if(Cr>gr)break}xr=Cr+Er.breakAfter}return null}}class BlockWidgetView extends ContentView{constructor(hr,gr,vr){super(),this.widget=hr,this.length=gr,this.deco=vr,this.breakAfter=0,this.prevWidget=null}merge(hr,gr,vr,xr,Er,Cr){return vr&&(!(vr instanceof BlockWidgetView)||!this.widget.compare(vr.widget)||hr>0&&Er<=0||gr<this.length&&Cr<=0)?!1:(this.length=hr+(vr?vr.length:0)+(this.length-gr),!0)}domAtPos(hr){return hr==0?DOMPos.before(this.dom):DOMPos.after(this.dom,hr==this.length)}split(hr){let gr=this.length-hr;this.length=hr;let vr=new BlockWidgetView(this.widget,gr,this.deco);return vr.breakAfter=this.breakAfter,vr}get children(){return noChildren}sync(hr){(!this.dom||!this.widget.updateDOM(this.dom,hr))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(hr)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Text$1.empty}domBoundsAround(){return null}become(hr){return hr instanceof BlockWidgetView&&hr.widget.constructor==this.widget.constructor?(hr.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=hr.widget,this.length=hr.length,this.deco=hr.deco,this.breakAfter=hr.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(hr){return this.widget.ignoreEvent(hr)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(hr,gr){let vr=this.widget.coordsAt(this.dom,hr,gr);return vr||(this.widget instanceof BlockGapWidget?null:flattenRect(this.dom.getBoundingClientRect(),this.length?hr==0:gr<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(hr){let{startSide:gr,endSide:vr}=this.deco;return gr==vr?!1:hr<0?gr<0:vr>0}}class BlockGapWidget extends WidgetType{constructor(hr){super(),this.height=hr}toDOM(){let hr=document.createElement("div");return hr.className="cm-gap",this.updateDOM(hr),hr}eq(hr){return hr.height==this.height}updateDOM(hr){return hr.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class ContentBuilder{constructor(hr,gr,vr,xr){this.doc=hr,this.pos=gr,this.end=vr,this.disallowBlockEffectsFor=xr,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=hr.iter(),this.skip=gr}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let hr=this.content[this.content.length-1];return!(hr.breakAfter||hr instanceof BlockWidgetView&&hr.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new LineView),this.atCursorPos=!0),this.curLine}flushBuffer(hr=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(wrapMarks(new WidgetBufferView(-1),hr),hr.length),this.pendingBuffer=0)}addBlockWidget(hr){this.flushBuffer(),this.curLine=null,this.content.push(hr)}finish(hr){this.pendingBuffer&&hr<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(hr&&this.content.length&&this.content[this.content.length-1]instanceof BlockWidgetView)&&this.getLine()}buildText(hr,gr,vr){for(;hr>0;){if(this.textOff==this.text.length){let{value:Er,lineBreak:Cr,done:wr}=this.cursor.next(this.skip);if(this.skip=0,wr)throw new Error("Ran out of text content when drawing inline views");if(Cr){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,hr--;continue}else this.text=Er,this.textOff=0}let xr=Math.min(this.text.length-this.textOff,hr,512);this.flushBuffer(gr.slice(gr.length-vr)),this.getLine().append(wrapMarks(new TextView(this.text.slice(this.textOff,this.textOff+xr)),gr),vr),this.atCursorPos=!0,this.textOff+=xr,hr-=xr,vr=0}}span(hr,gr,vr,xr){this.buildText(gr-hr,vr,xr),this.pos=gr,this.openStart<0&&(this.openStart=xr)}point(hr,gr,vr,xr,Er,Cr){if(this.disallowBlockEffectsFor[Cr]&&vr instanceof PointDecoration){if(vr.block)throw new RangeError("Block decorations may not be specified via plugins");if(gr>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let wr=gr-hr;if(vr instanceof PointDecoration)if(vr.block)vr.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new BlockWidgetView(vr.widget||NullWidget.block,wr,vr));else{let Rr=WidgetView.create(vr.widget||NullWidget.inline,wr,wr?0:vr.startSide),kr=this.atCursorPos&&!Rr.isEditable&&Er<=xr.length&&(hr<gr||vr.startSide>0),Dr=!Rr.isEditable&&(hr<gr||Er>xr.length||vr.startSide<=0),Br=this.getLine();this.pendingBuffer==2&&!kr&&!Rr.isEditable&&(this.pendingBuffer=0),this.flushBuffer(xr),kr&&(Br.append(wrapMarks(new WidgetBufferView(1),xr),Er),Er=xr.length+Math.max(0,Er-xr.length)),Br.append(wrapMarks(Rr,xr),Er),this.atCursorPos=Dr,this.pendingBuffer=Dr?hr<gr||Er>xr.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=xr.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(vr);wr&&(this.textOff+wr<=this.text.length?this.textOff+=wr:(this.skip+=wr-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=gr),this.openStart<0&&(this.openStart=Er)}static build(hr,gr,vr,xr,Er){let Cr=new ContentBuilder(hr,gr,vr,Er);return Cr.openEnd=RangeSet.spans(xr,gr,vr,Cr),Cr.openStart<0&&(Cr.openStart=Cr.openEnd),Cr.finish(Cr.openEnd),Cr}}function wrapMarks(mr,hr){for(let gr of hr)mr=new MarkView(gr,[mr],mr.length);return mr}class NullWidget extends WidgetType{constructor(hr){super(),this.tag=hr}eq(hr){return hr.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(hr){return hr.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}NullWidget.inline=new NullWidget("span");NullWidget.block=new NullWidget("div");var Direction=function(mr){return mr[mr.LTR=0]="LTR",mr[mr.RTL=1]="RTL",mr}(Direction||(Direction={}));const LTR=Direction.LTR,RTL=Direction.RTL;function dec(mr){let hr=[];for(let gr=0;gr<mr.length;gr++)hr.push(1<<+mr[gr]);return hr}const LowTypes=dec("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),ArabicTypes=dec("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Brackets=Object.create(null),BracketStack=[];for(let mr of["()","[]","{}"]){let hr=mr.charCodeAt(0),gr=mr.charCodeAt(1);Brackets[hr]=gr,Brackets[gr]=-hr}function charType(mr){return mr<=247?LowTypes[mr]:1424<=mr&&mr<=1524?2:1536<=mr&&mr<=1785?ArabicTypes[mr-1536]:1774<=mr&&mr<=2220?4:8192<=mr&&mr<=8204?256:64336<=mr&&mr<=65023?4:1}const BidiRE=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class BidiSpan{get dir(){return this.level%2?RTL:LTR}constructor(hr,gr,vr){this.from=hr,this.to=gr,this.level=vr}side(hr,gr){return this.dir==gr==hr?this.to:this.from}forward(hr,gr){return hr==(this.dir==gr)}static find(hr,gr,vr,xr){let Er=-1;for(let Cr=0;Cr<hr.length;Cr++){let wr=hr[Cr];if(wr.from<=gr&&wr.to>=gr){if(wr.level==vr)return Cr;(Er<0||(xr!=0?xr<0?wr.from<gr:wr.to>gr:hr[Er].level>wr.level))&&(Er=Cr)}}if(Er<0)throw new RangeError("Index out of range");return Er}}function isolatesEq(mr,hr){if(mr.length!=hr.length)return!1;for(let gr=0;gr<mr.length;gr++){let vr=mr[gr],xr=hr[gr];if(vr.from!=xr.from||vr.to!=xr.to||vr.direction!=xr.direction||!isolatesEq(vr.inner,xr.inner))return!1}return!0}const types=[];function computeCharTypes(mr,hr,gr,vr,xr){for(let Er=0;Er<=vr.length;Er++){let Cr=Er?vr[Er-1].to:hr,wr=Er<vr.length?vr[Er].from:gr,Rr=Er?256:xr;for(let kr=Cr,Dr=Rr,Br=Rr;kr<wr;kr++){let Hr=charType(mr.charCodeAt(kr));Hr==512?Hr=Dr:Hr==8&&Br==4&&(Hr=16),types[kr]=Hr==4?2:Hr,Hr&7&&(Br=Hr),Dr=Hr}for(let kr=Cr,Dr=Rr,Br=Rr;kr<wr;kr++){let Hr=types[kr];if(Hr==128)kr<wr-1&&Dr==types[kr+1]&&Dr&24?Hr=types[kr]=Dr:types[kr]=256;else if(Hr==64){let Gr=kr+1;for(;Gr<wr&&types[Gr]==64;)Gr++;let qr=kr&&Dr==8||Gr<gr&&types[Gr]==8?Br==1?1:8:256;for(let zr=kr;zr<Gr;zr++)types[zr]=qr;kr=Gr-1}else Hr==8&&Br==1&&(types[kr]=1);Dr=Hr,Hr&7&&(Br=Hr)}}}function processBracketPairs(mr,hr,gr,vr,xr){let Er=xr==1?2:1;for(let Cr=0,wr=0,Rr=0;Cr<=vr.length;Cr++){let kr=Cr?vr[Cr-1].to:hr,Dr=Cr<vr.length?vr[Cr].from:gr;for(let Br=kr,Hr,Gr,qr;Br<Dr;Br++)if(Gr=Brackets[Hr=mr.charCodeAt(Br)])if(Gr<0){for(let zr=wr-3;zr>=0;zr-=3)if(BracketStack[zr+1]==-Gr){let Qr=BracketStack[zr+2],sn=Qr&2?xr:Qr&4?Qr&1?Er:xr:0;sn&&(types[Br]=types[BracketStack[zr]]=sn),wr=zr;break}}else{if(BracketStack.length==189)break;BracketStack[wr++]=Br,BracketStack[wr++]=Hr,BracketStack[wr++]=Rr}else if((qr=types[Br])==2||qr==1){let zr=qr==xr;Rr=zr?0:1;for(let Qr=wr-3;Qr>=0;Qr-=3){let sn=BracketStack[Qr+2];if(sn&2)break;if(zr)BracketStack[Qr+2]|=2;else{if(sn&4)break;BracketStack[Qr+2]|=4}}}}}function processNeutrals(mr,hr,gr,vr){for(let xr=0,Er=vr;xr<=gr.length;xr++){let Cr=xr?gr[xr-1].to:mr,wr=xr<gr.length?gr[xr].from:hr;for(let Rr=Cr;Rr<wr;){let kr=types[Rr];if(kr==256){let Dr=Rr+1;for(;;)if(Dr==wr){if(xr==gr.length)break;Dr=gr[xr++].to,wr=xr<gr.length?gr[xr].from:hr}else if(types[Dr]==256)Dr++;else break;let Br=Er==1,Hr=(Dr<hr?types[Dr]:vr)==1,Gr=Br==Hr?Br?1:2:vr;for(let qr=Dr,zr=xr,Qr=zr?gr[zr-1].to:mr;qr>Rr;)qr==Qr&&(qr=gr[--zr].from,Qr=zr?gr[zr-1].to:mr),types[--qr]=Gr;Rr=Dr}else Er=kr,Rr++}}}function emitSpans(mr,hr,gr,vr,xr,Er,Cr){let wr=vr%2?2:1;if(vr%2==xr%2)for(let Rr=hr,kr=0;Rr<gr;){let Dr=!0,Br=!1;if(kr==Er.length||Rr<Er[kr].from){let zr=types[Rr];zr!=wr&&(Dr=!1,Br=zr==16)}let Hr=!Dr&&wr==1?[]:null,Gr=Dr?vr:vr+1,qr=Rr;e:for(;;)if(kr<Er.length&&qr==Er[kr].from){if(Br)break e;let zr=Er[kr];if(!Dr)for(let Qr=zr.to,sn=kr+1;;){if(Qr==gr)break e;if(sn<Er.length&&Er[sn].from==Qr)Qr=Er[sn++].to;else{if(types[Qr]==wr)break e;break}}if(kr++,Hr)Hr.push(zr);else{zr.from>Rr&&Cr.push(new BidiSpan(Rr,zr.from,Gr));let Qr=zr.direction==LTR!=!(Gr%2);computeSectionOrder(mr,Qr?vr+1:vr,xr,zr.inner,zr.from,zr.to,Cr),Rr=zr.to}qr=zr.to}else{if(qr==gr||(Dr?types[qr]!=wr:types[qr]==wr))break;qr++}Hr?emitSpans(mr,Rr,qr,vr+1,xr,Hr,Cr):Rr<qr&&Cr.push(new BidiSpan(Rr,qr,Gr)),Rr=qr}else for(let Rr=gr,kr=Er.length;Rr>hr;){let Dr=!0,Br=!1;if(!kr||Rr>Er[kr-1].to){let zr=types[Rr-1];zr!=wr&&(Dr=!1,Br=zr==16)}let Hr=!Dr&&wr==1?[]:null,Gr=Dr?vr:vr+1,qr=Rr;e:for(;;)if(kr&&qr==Er[kr-1].to){if(Br)break e;let zr=Er[--kr];if(!Dr)for(let Qr=zr.from,sn=kr;;){if(Qr==hr)break e;if(sn&&Er[sn-1].to==Qr)Qr=Er[--sn].from;else{if(types[Qr-1]==wr)break e;break}}if(Hr)Hr.push(zr);else{zr.to<Rr&&Cr.push(new BidiSpan(zr.to,Rr,Gr));let Qr=zr.direction==LTR!=!(Gr%2);computeSectionOrder(mr,Qr?vr+1:vr,xr,zr.inner,zr.from,zr.to,Cr),Rr=zr.from}qr=zr.from}else{if(qr==hr||(Dr?types[qr-1]!=wr:types[qr-1]==wr))break;qr--}Hr?emitSpans(mr,qr,Rr,vr+1,xr,Hr,Cr):qr<Rr&&Cr.push(new BidiSpan(qr,Rr,Gr)),Rr=qr}}function computeSectionOrder(mr,hr,gr,vr,xr,Er,Cr){let wr=hr%2?2:1;computeCharTypes(mr,xr,Er,vr,wr),processBracketPairs(mr,xr,Er,vr,wr),processNeutrals(xr,Er,vr,wr),emitSpans(mr,xr,Er,hr,gr,vr,Cr)}function computeOrder(mr,hr,gr){if(!mr)return[new BidiSpan(0,0,hr==RTL?1:0)];if(hr==LTR&&!gr.length&&!BidiRE.test(mr))return trivialOrder(mr.length);if(gr.length)for(;mr.length>types.length;)types[types.length]=256;let vr=[],xr=hr==LTR?0:1;return computeSectionOrder(mr,xr,xr,gr,0,mr.length,vr),vr}function trivialOrder(mr){return[new BidiSpan(0,mr,0)]}let movedOver="";function moveVisually(mr,hr,gr,vr,xr){var Er;let Cr=vr.head-mr.from,wr=BidiSpan.find(hr,Cr,(Er=vr.bidiLevel)!==null&&Er!==void 0?Er:-1,vr.assoc),Rr=hr[wr],kr=Rr.side(xr,gr);if(Cr==kr){let Hr=wr+=xr?1:-1;if(Hr<0||Hr>=hr.length)return null;Rr=hr[wr=Hr],Cr=Rr.side(!xr,gr),kr=Rr.side(xr,gr)}let Dr=findClusterBreak(mr.text,Cr,Rr.forward(xr,gr));(Dr<Rr.from||Dr>Rr.to)&&(Dr=kr),movedOver=mr.text.slice(Math.min(Cr,Dr),Math.max(Cr,Dr));let Br=wr==(xr?hr.length-1:0)?null:hr[wr+(xr?1:-1)];return Br&&Dr==kr&&Br.level+(xr?0:1)<Rr.level?EditorSelection.cursor(Br.side(!xr,gr)+mr.from,Br.forward(xr,gr)?1:-1,Br.level):EditorSelection.cursor(Dr+mr.from,Rr.forward(xr,gr)?-1:1,Rr.level)}function autoDirection(mr,hr,gr){for(let vr=hr;vr<gr;vr++){let xr=charType(mr.charCodeAt(vr));if(xr==1)return LTR;if(xr==2||xr==4)return RTL}return LTR}const clickAddsSelectionRange=Facet.define(),dragMovesSelection$1=Facet.define(),mouseSelectionStyle=Facet.define(),exceptionSink=Facet.define(),updateListener=Facet.define(),inputHandler$1=Facet.define(),focusChangeEffect=Facet.define(),clipboardInputFilter=Facet.define(),clipboardOutputFilter=Facet.define(),perLineTextDirection=Facet.define({combine:mr=>mr.some(hr=>hr)}),nativeSelectionHidden=Facet.define({combine:mr=>mr.some(hr=>hr)}),scrollHandler=Facet.define();class ScrollTarget{constructor(hr,gr="nearest",vr="nearest",xr=5,Er=5,Cr=!1){this.range=hr,this.y=gr,this.x=vr,this.yMargin=xr,this.xMargin=Er,this.isSnapshot=Cr}map(hr){return hr.empty?this:new ScrollTarget(this.range.map(hr),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(hr){return this.range.to<=hr.doc.length?this:new ScrollTarget(EditorSelection.cursor(hr.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const scrollIntoView$2=StateEffect.define({map:(mr,hr)=>mr.map(hr)}),setEditContextFormatting=StateEffect.define();function logException(mr,hr,gr){let vr=mr.facet(exceptionSink);vr.length?vr[0](hr):window.onerror?window.onerror(String(hr),gr,void 0,void 0,hr):gr?console.error(gr+":",hr):console.error(hr)}const editable=Facet.define({combine:mr=>mr.length?mr[0]:!0});let nextPluginID=0;const viewPlugin=Facet.define();class ViewPlugin{constructor(hr,gr,vr,xr,Er){this.id=hr,this.create=gr,this.domEventHandlers=vr,this.domEventObservers=xr,this.extension=Er(this)}static define(hr,gr){const{eventHandlers:vr,eventObservers:xr,provide:Er,decorations:Cr}=gr||{};return new ViewPlugin(nextPluginID++,hr,vr,xr,wr=>{let Rr=[viewPlugin.of(wr)];return Cr&&Rr.push(decorations.of(kr=>{let Dr=kr.plugin(wr);return Dr?Cr(Dr):Decoration.none})),Er&&Rr.push(Er(wr)),Rr})}static fromClass(hr,gr){return ViewPlugin.define(vr=>new hr(vr),gr)}}class PluginInstance{constructor(hr){this.spec=hr,this.mustUpdate=null,this.value=null}update(hr){if(this.value){if(this.mustUpdate){let gr=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(gr)}catch(vr){if(logException(gr.state,vr,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(hr)}catch(gr){logException(hr.state,gr,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(hr){var gr;if(!((gr=this.value)===null||gr===void 0)&&gr.destroy)try{this.value.destroy()}catch(vr){logException(hr.state,vr,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const editorAttributes=Facet.define(),contentAttributes=Facet.define(),decorations=Facet.define(),outerDecorations=Facet.define(),atomicRanges=Facet.define(),bidiIsolatedRanges=Facet.define();function getIsolatedRanges(mr,hr){let gr=mr.state.facet(bidiIsolatedRanges);if(!gr.length)return gr;let vr=gr.map(Er=>Er instanceof Function?Er(mr):Er),xr=[];return RangeSet.spans(vr,hr.from,hr.to,{point(){},span(Er,Cr,wr,Rr){let kr=Er-hr.from,Dr=Cr-hr.from,Br=xr;for(let Hr=wr.length-1;Hr>=0;Hr--,Rr--){let Gr=wr[Hr].spec.bidiIsolate,qr;if(Gr==null&&(Gr=autoDirection(hr.text,kr,Dr)),Rr>0&&Br.length&&(qr=Br[Br.length-1]).to==kr&&qr.direction==Gr)qr.to=Dr,Br=qr.inner;else{let zr={from:kr,to:Dr,direction:Gr,inner:[]};Br.push(zr),Br=zr.inner}}}}),xr}const scrollMargins=Facet.define();function getScrollMargins(mr){let hr=0,gr=0,vr=0,xr=0;for(let Er of mr.state.facet(scrollMargins)){let Cr=Er(mr);Cr&&(Cr.left!=null&&(hr=Math.max(hr,Cr.left)),Cr.right!=null&&(gr=Math.max(gr,Cr.right)),Cr.top!=null&&(vr=Math.max(vr,Cr.top)),Cr.bottom!=null&&(xr=Math.max(xr,Cr.bottom)))}return{left:hr,right:gr,top:vr,bottom:xr}}const styleModule=Facet.define();class ChangedRange{constructor(hr,gr,vr,xr){this.fromA=hr,this.toA=gr,this.fromB=vr,this.toB=xr}join(hr){return new ChangedRange(Math.min(this.fromA,hr.fromA),Math.max(this.toA,hr.toA),Math.min(this.fromB,hr.fromB),Math.max(this.toB,hr.toB))}addToSet(hr){let gr=hr.length,vr=this;for(;gr>0;gr--){let xr=hr[gr-1];if(!(xr.fromA>vr.toA)){if(xr.toA<vr.fromA)break;vr=vr.join(xr),hr.splice(gr-1,1)}}return hr.splice(gr,0,vr),hr}static extendWithRanges(hr,gr){if(gr.length==0)return hr;let vr=[];for(let xr=0,Er=0,Cr=0,wr=0;;xr++){let Rr=xr==hr.length?null:hr[xr],kr=Cr-wr,Dr=Rr?Rr.fromB:1e9;for(;Er<gr.length&&gr[Er]<Dr;){let Br=gr[Er],Hr=gr[Er+1],Gr=Math.max(wr,Br),qr=Math.min(Dr,Hr);if(Gr<=qr&&new ChangedRange(Gr+kr,qr+kr,Gr,qr).addToSet(vr),Hr>Dr)break;Er+=2}if(!Rr)return vr;new ChangedRange(Rr.fromA,Rr.toA,Rr.fromB,Rr.toB).addToSet(vr),Cr=Rr.toA,wr=Rr.toB}}}class ViewUpdate{constructor(hr,gr,vr){this.view=hr,this.state=gr,this.transactions=vr,this.flags=0,this.startState=hr.state,this.changes=ChangeSet.empty(this.startState.doc.length);for(let Er of vr)this.changes=this.changes.compose(Er.changes);let xr=[];this.changes.iterChangedRanges((Er,Cr,wr,Rr)=>xr.push(new ChangedRange(Er,Cr,wr,Rr))),this.changedRanges=xr}static create(hr,gr,vr){return new ViewUpdate(hr,gr,vr)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(hr=>hr.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class DocView extends ContentView{get length(){return this.view.state.doc.length}constructor(hr){super(),this.view=hr,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Decoration.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(hr.contentDOM),this.children=[new LineView],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new ChangedRange(0,0,0,hr.state.doc.length)],0,null)}update(hr){var gr;let vr=hr.changedRanges;this.minWidth>0&&vr.length&&(vr.every(({fromA:kr,toA:Dr})=>Dr<this.minWidthFrom||kr>this.minWidthTo)?(this.minWidthFrom=hr.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=hr.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(hr);let xr=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((gr=this.domChanged)===null||gr===void 0)&&gr.newSel?xr=this.domChanged.newSel.head:!touchesComposition(hr.changes,this.hasComposition)&&!hr.selectionSet&&(xr=hr.state.selection.main.head));let Er=xr>-1?findCompositionRange(this.view,hr.changes,xr):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:kr,to:Dr}=this.hasComposition;vr=new ChangedRange(kr,Dr,hr.changes.mapPos(kr,-1),hr.changes.mapPos(Dr,1)).addToSet(vr.slice())}this.hasComposition=Er?{from:Er.range.fromB,to:Er.range.toB}:null,(browser.ie||browser.chrome)&&!Er&&hr&&hr.state.doc.lines!=hr.startState.doc.lines&&(this.forceSelection=!0);let Cr=this.decorations,wr=this.updateDeco(),Rr=findChangedDeco(Cr,wr,hr.changes);return vr=ChangedRange.extendWithRanges(vr,Rr),!(this.flags&7)&&vr.length==0?!1:(this.updateInner(vr,hr.startState.doc.length,Er),hr.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(hr,gr,vr){this.view.viewState.mustMeasureContent=!0,this.updateChildren(hr,gr,vr);let{observer:xr}=this.view;xr.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let Cr=browser.chrome||browser.ios?{node:xr.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,Cr),this.flags&=-8,Cr&&(Cr.written||xr.selectionRange.focusNode!=Cr.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(Cr=>Cr.flags&=-9);let Er=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let Cr of this.children)Cr instanceof BlockWidgetView&&Cr.widget instanceof BlockGapWidget&&Er.push(Cr.dom);xr.updateGaps(Er)}updateChildren(hr,gr,vr){let xr=vr?vr.range.addToSet(hr.slice()):hr,Er=this.childCursor(gr);for(let Cr=xr.length-1;;Cr--){let wr=Cr>=0?xr[Cr]:null;if(!wr)break;let{fromA:Rr,toA:kr,fromB:Dr,toB:Br}=wr,Hr,Gr,qr,zr;if(vr&&vr.range.fromB<Br&&vr.range.toB>Dr){let yn=ContentBuilder.build(this.view.state.doc,Dr,vr.range.fromB,this.decorations,this.dynamicDecorationMap),gn=ContentBuilder.build(this.view.state.doc,vr.range.toB,Br,this.decorations,this.dynamicDecorationMap);Gr=yn.breakAtStart,qr=yn.openStart,zr=gn.openEnd;let bn=this.compositionView(vr);gn.breakAtStart?bn.breakAfter=1:gn.content.length&&bn.merge(bn.length,bn.length,gn.content[0],!1,gn.openStart,0)&&(bn.breakAfter=gn.content[0].breakAfter,gn.content.shift()),yn.content.length&&bn.merge(0,0,yn.content[yn.content.length-1],!0,0,yn.openEnd)&&yn.content.pop(),Hr=yn.content.concat(bn).concat(gn.content)}else({content:Hr,breakAtStart:Gr,openStart:qr,openEnd:zr}=ContentBuilder.build(this.view.state.doc,Dr,Br,this.decorations,this.dynamicDecorationMap));let{i:Qr,off:sn}=Er.findPos(kr,1),{i:hn,off:vn}=Er.findPos(Rr,-1);replaceRange(this,hn,vn,Qr,sn,Hr,Gr,qr,zr)}vr&&this.fixCompositionDOM(vr)}updateEditContextFormatting(hr){this.editContextFormatting=this.editContextFormatting.map(hr.changes);for(let gr of hr.transactions)for(let vr of gr.effects)vr.is(setEditContextFormatting)&&(this.editContextFormatting=vr.value)}compositionView(hr){let gr=new TextView(hr.text.nodeValue);gr.flags|=8;for(let{deco:xr}of hr.marks)gr=new MarkView(xr,[gr],gr.length);let vr=new LineView;return vr.append(gr,0),vr}fixCompositionDOM(hr){let gr=(Er,Cr)=>{Cr.flags|=8|(Cr.children.some(Rr=>Rr.flags&7)?1:0),this.markedForComposition.add(Cr);let wr=ContentView.get(Er);wr&&wr!=Cr&&(wr.dom=null),Cr.setDOM(Er)},vr=this.childPos(hr.range.fromB,1),xr=this.children[vr.i];gr(hr.line,xr);for(let Er=hr.marks.length-1;Er>=-1;Er--)vr=xr.childPos(vr.off,1),xr=xr.children[vr.i],gr(Er>=0?hr.marks[Er].node:hr.text,xr)}updateSelection(hr=!1,gr=!1){(hr||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let vr=this.view.root.activeElement,xr=vr==this.dom,Er=!xr&&!(this.view.state.facet(editable)||this.dom.tabIndex>-1)&&hasSelection(this.dom,this.view.observer.selectionRange)&&!(vr&&this.dom.contains(vr));if(!(xr||gr||Er))return;let Cr=this.forceSelection;this.forceSelection=!1;let wr=this.view.state.selection.main,Rr=this.moveToLine(this.domAtPos(wr.anchor)),kr=wr.empty?Rr:this.moveToLine(this.domAtPos(wr.head));if(browser.gecko&&wr.empty&&!this.hasComposition&&betweenUneditable(Rr)){let Br=document.createTextNode("");this.view.observer.ignore(()=>Rr.node.insertBefore(Br,Rr.node.childNodes[Rr.offset]||null)),Rr=kr=new DOMPos(Br,0),Cr=!0}let Dr=this.view.observer.selectionRange;(Cr||!Dr.focusNode||(!isEquivalentPosition(Rr.node,Rr.offset,Dr.anchorNode,Dr.anchorOffset)||!isEquivalentPosition(kr.node,kr.offset,Dr.focusNode,Dr.focusOffset))&&!this.suppressWidgetCursorChange(Dr,wr))&&(this.view.observer.ignore(()=>{browser.android&&browser.chrome&&this.dom.contains(Dr.focusNode)&&inUneditable(Dr.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let Br=getSelection(this.view.root);if(Br)if(wr.empty){if(browser.gecko){let Hr=nextToUneditable(Rr.node,Rr.offset);if(Hr&&Hr!=3){let Gr=(Hr==1?textNodeBefore:textNodeAfter)(Rr.node,Rr.offset);Gr&&(Rr=new DOMPos(Gr.node,Gr.offset))}}Br.collapse(Rr.node,Rr.offset),wr.bidiLevel!=null&&Br.caretBidiLevel!==void 0&&(Br.caretBidiLevel=wr.bidiLevel)}else if(Br.extend){Br.collapse(Rr.node,Rr.offset);try{Br.extend(kr.node,kr.offset)}catch{}}else{let Hr=document.createRange();wr.anchor>wr.head&&([Rr,kr]=[kr,Rr]),Hr.setEnd(kr.node,kr.offset),Hr.setStart(Rr.node,Rr.offset),Br.removeAllRanges(),Br.addRange(Hr)}Er&&this.view.root.activeElement==this.dom&&(this.dom.blur(),vr&&vr.focus())}),this.view.observer.setSelectionRange(Rr,kr)),this.impreciseAnchor=Rr.precise?null:new DOMPos(Dr.anchorNode,Dr.anchorOffset),this.impreciseHead=kr.precise?null:new DOMPos(Dr.focusNode,Dr.focusOffset)}suppressWidgetCursorChange(hr,gr){return this.hasComposition&&gr.empty&&isEquivalentPosition(hr.focusNode,hr.focusOffset,hr.anchorNode,hr.anchorOffset)&&this.posFromDOM(hr.focusNode,hr.focusOffset)==gr.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:hr}=this,gr=hr.state.selection.main,vr=getSelection(hr.root),{anchorNode:xr,anchorOffset:Er}=hr.observer.selectionRange;if(!vr||!gr.empty||!gr.assoc||!vr.modify)return;let Cr=LineView.find(this,gr.head);if(!Cr)return;let wr=Cr.posAtStart;if(gr.head==wr||gr.head==wr+Cr.length)return;let Rr=this.coordsAt(gr.head,-1),kr=this.coordsAt(gr.head,1);if(!Rr||!kr||Rr.bottom>kr.top)return;let Dr=this.domAtPos(gr.head+gr.assoc);vr.collapse(Dr.node,Dr.offset),vr.modify("move",gr.assoc<0?"forward":"backward","lineboundary"),hr.observer.readSelectionRange();let Br=hr.observer.selectionRange;hr.docView.posFromDOM(Br.anchorNode,Br.anchorOffset)!=gr.from&&vr.collapse(xr,Er)}moveToLine(hr){let gr=this.dom,vr;if(hr.node!=gr)return hr;for(let xr=hr.offset;!vr&&xr<gr.childNodes.length;xr++){let Er=ContentView.get(gr.childNodes[xr]);Er instanceof LineView&&(vr=Er.domAtPos(0))}for(let xr=hr.offset-1;!vr&&xr>=0;xr--){let Er=ContentView.get(gr.childNodes[xr]);Er instanceof LineView&&(vr=Er.domAtPos(Er.length))}return vr?new DOMPos(vr.node,vr.offset,!0):hr}nearest(hr){for(let gr=hr;gr;){let vr=ContentView.get(gr);if(vr&&vr.rootView==this)return vr;gr=gr.parentNode}return null}posFromDOM(hr,gr){let vr=this.nearest(hr);if(!vr)throw new RangeError("Trying to find position for a DOM position outside of the document");return vr.localPosFromDOM(hr,gr)+vr.posAtStart}domAtPos(hr){let{i:gr,off:vr}=this.childCursor().findPos(hr,-1);for(;gr<this.children.length-1;){let xr=this.children[gr];if(vr<xr.length||xr instanceof LineView)break;gr++,vr=0}return this.children[gr].domAtPos(vr)}coordsAt(hr,gr){let vr=null,xr=0;for(let Er=this.length,Cr=this.children.length-1;Cr>=0;Cr--){let wr=this.children[Cr],Rr=Er-wr.breakAfter,kr=Rr-wr.length;if(Rr<hr)break;if(kr<=hr&&(kr<hr||wr.covers(-1))&&(Rr>hr||wr.covers(1))&&(!vr||wr instanceof LineView&&!(vr instanceof LineView&&gr>=0)))vr=wr,xr=kr;else if(vr&&kr==hr&&Rr==hr&&wr instanceof BlockWidgetView&&Math.abs(gr)<2){if(wr.deco.startSide<0)break;Cr&&(vr=null)}Er=kr}return vr?vr.coordsAt(hr-xr,gr):null}coordsForChar(hr){let{i:gr,off:vr}=this.childPos(hr,1),xr=this.children[gr];if(!(xr instanceof LineView))return null;for(;xr.children.length;){let{i:wr,off:Rr}=xr.childPos(vr,1);for(;;wr++){if(wr==xr.children.length)return null;if((xr=xr.children[wr]).length)break}vr=Rr}if(!(xr instanceof TextView))return null;let Er=findClusterBreak(xr.text,vr);if(Er==vr)return null;let Cr=textRange(xr.dom,vr,Er).getClientRects();for(let wr=0;wr<Cr.length;wr++){let Rr=Cr[wr];if(wr==Cr.length-1||Rr.top<Rr.bottom&&Rr.left<Rr.right)return Rr}return null}measureVisibleLineHeights(hr){let gr=[],{from:vr,to:xr}=hr,Er=this.view.contentDOM.clientWidth,Cr=Er>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,wr=-1,Rr=this.view.textDirection==Direction.LTR;for(let kr=0,Dr=0;Dr<this.children.length;Dr++){let Br=this.children[Dr],Hr=kr+Br.length;if(Hr>xr)break;if(kr>=vr){let Gr=Br.dom.getBoundingClientRect();if(gr.push(Gr.height),Cr){let qr=Br.dom.lastChild,zr=qr?clientRectsFor(qr):[];if(zr.length){let Qr=zr[zr.length-1],sn=Rr?Qr.right-Gr.left:Gr.right-Qr.left;sn>wr&&(wr=sn,this.minWidth=Er,this.minWidthFrom=kr,this.minWidthTo=Hr)}}}kr=Hr+Br.breakAfter}return gr}textDirectionAt(hr){let{i:gr}=this.childPos(hr,1);return getComputedStyle(this.children[gr].dom).direction=="rtl"?Direction.RTL:Direction.LTR}measureTextSize(){for(let Er of this.children)if(Er instanceof LineView){let Cr=Er.measureTextSize();if(Cr)return Cr}let hr=document.createElement("div"),gr,vr,xr;return hr.className="cm-line",hr.style.width="99999px",hr.style.position="absolute",hr.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(hr);let Er=clientRectsFor(hr.firstChild)[0];gr=hr.getBoundingClientRect().height,vr=Er?Er.width/27:7,xr=Er?Er.height:gr,hr.remove()}),{lineHeight:gr,charWidth:vr,textHeight:xr}}childCursor(hr=this.length){let gr=this.children.length;return gr&&(hr-=this.children[--gr].length),new ChildCursor(this.children,hr,gr)}computeBlockGapDeco(){let hr=[],gr=this.view.viewState;for(let vr=0,xr=0;;xr++){let Er=xr==gr.viewports.length?null:gr.viewports[xr],Cr=Er?Er.from-1:this.length;if(Cr>vr){let wr=(gr.lineBlockAt(Cr).bottom-gr.lineBlockAt(vr).top)/this.view.scaleY;hr.push(Decoration.replace({widget:new BlockGapWidget(wr),block:!0,inclusive:!0,isBlockGap:!0}).range(vr,Cr))}if(!Er)break;vr=Er.to+1}return Decoration.set(hr)}updateDeco(){let hr=1,gr=this.view.state.facet(decorations).map(Er=>(this.dynamicDecorationMap[hr++]=typeof Er=="function")?Er(this.view):Er),vr=!1,xr=this.view.state.facet(outerDecorations).map((Er,Cr)=>{let wr=typeof Er=="function";return wr&&(vr=!0),wr?Er(this.view):Er});for(xr.length&&(this.dynamicDecorationMap[hr++]=vr,gr.push(RangeSet.join(xr))),this.decorations=[this.editContextFormatting,...gr,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];hr<this.decorations.length;)this.dynamicDecorationMap[hr++]=!1;return this.decorations}scrollIntoView(hr){if(hr.isSnapshot){let kr=this.view.viewState.lineBlockAt(hr.range.head);this.view.scrollDOM.scrollTop=kr.top-hr.yMargin,this.view.scrollDOM.scrollLeft=hr.xMargin;return}for(let kr of this.view.state.facet(scrollHandler))try{if(kr(this.view,hr.range,hr))return!0}catch(Dr){logException(this.view.state,Dr,"scroll handler")}let{range:gr}=hr,vr=this.coordsAt(gr.head,gr.empty?gr.assoc:gr.head>gr.anchor?-1:1),xr;if(!vr)return;!gr.empty&&(xr=this.coordsAt(gr.anchor,gr.anchor>gr.head?-1:1))&&(vr={left:Math.min(vr.left,xr.left),top:Math.min(vr.top,xr.top),right:Math.max(vr.right,xr.right),bottom:Math.max(vr.bottom,xr.bottom)});let Er=getScrollMargins(this.view),Cr={left:vr.left-Er.left,top:vr.top-Er.top,right:vr.right+Er.right,bottom:vr.bottom+Er.bottom},{offsetWidth:wr,offsetHeight:Rr}=this.view.scrollDOM;scrollRectIntoView(this.view.scrollDOM,Cr,gr.head<gr.anchor?-1:1,hr.x,hr.y,Math.max(Math.min(hr.xMargin,wr),-wr),Math.max(Math.min(hr.yMargin,Rr),-Rr),this.view.textDirection==Direction.LTR)}}function betweenUneditable(mr){return mr.node.nodeType==1&&mr.node.firstChild&&(mr.offset==0||mr.node.childNodes[mr.offset-1].contentEditable=="false")&&(mr.offset==mr.node.childNodes.length||mr.node.childNodes[mr.offset].contentEditable=="false")}function findCompositionNode(mr,hr){let gr=mr.observer.selectionRange;if(!gr.focusNode)return null;let vr=textNodeBefore(gr.focusNode,gr.focusOffset),xr=textNodeAfter(gr.focusNode,gr.focusOffset),Er=vr||xr;if(xr&&vr&&xr.node!=vr.node){let wr=ContentView.get(xr.node);if(!wr||wr instanceof TextView&&wr.text!=xr.node.nodeValue)Er=xr;else if(mr.docView.lastCompositionAfterCursor){let Rr=ContentView.get(vr.node);!Rr||Rr instanceof TextView&&Rr.text!=vr.node.nodeValue||(Er=xr)}}if(mr.docView.lastCompositionAfterCursor=Er!=vr,!Er)return null;let Cr=hr-Er.offset;return{from:Cr,to:Cr+Er.node.nodeValue.length,node:Er.node}}function findCompositionRange(mr,hr,gr){let vr=findCompositionNode(mr,gr);if(!vr)return null;let{node:xr,from:Er,to:Cr}=vr,wr=xr.nodeValue;if(/[\n\r]/.test(wr)||mr.state.doc.sliceString(vr.from,vr.to)!=wr)return null;let Rr=hr.invertedDesc,kr=new ChangedRange(Rr.mapPos(Er),Rr.mapPos(Cr),Er,Cr),Dr=[];for(let Br=xr.parentNode;;Br=Br.parentNode){let Hr=ContentView.get(Br);if(Hr instanceof MarkView)Dr.push({node:Br,deco:Hr.mark});else{if(Hr instanceof LineView||Br.nodeName=="DIV"&&Br.parentNode==mr.contentDOM)return{range:kr,text:xr,marks:Dr,line:Br};if(Br!=mr.contentDOM)Dr.push({node:Br,deco:new MarkDecoration({inclusive:!0,attributes:getAttrs(Br),tagName:Br.tagName.toLowerCase()})});else return null}}}function nextToUneditable(mr,hr){return mr.nodeType!=1?0:(hr&&mr.childNodes[hr-1].contentEditable=="false"?1:0)|(hr<mr.childNodes.length&&mr.childNodes[hr].contentEditable=="false"?2:0)}let DecorationComparator$1=class{constructor(){this.changes=[]}compareRange(hr,gr){addRange(hr,gr,this.changes)}comparePoint(hr,gr){addRange(hr,gr,this.changes)}boundChange(hr){addRange(hr,hr,this.changes)}};function findChangedDeco(mr,hr,gr){let vr=new DecorationComparator$1;return RangeSet.compare(mr,hr,gr,vr),vr.changes}function inUneditable(mr,hr){for(let gr=mr;gr&&gr!=hr;gr=gr.assignedSlot||gr.parentNode)if(gr.nodeType==1&&gr.contentEditable=="false")return!0;return!1}function touchesComposition(mr,hr){let gr=!1;return hr&&mr.iterChangedRanges((vr,xr)=>{vr<hr.to&&xr>hr.from&&(gr=!0)}),gr}function groupAt(mr,hr,gr=1){let vr=mr.charCategorizer(hr),xr=mr.doc.lineAt(hr),Er=hr-xr.from;if(xr.length==0)return EditorSelection.cursor(hr);Er==0?gr=1:Er==xr.length&&(gr=-1);let Cr=Er,wr=Er;gr<0?Cr=findClusterBreak(xr.text,Er,!1):wr=findClusterBreak(xr.text,Er);let Rr=vr(xr.text.slice(Cr,wr));for(;Cr>0;){let kr=findClusterBreak(xr.text,Cr,!1);if(vr(xr.text.slice(kr,Cr))!=Rr)break;Cr=kr}for(;wr<xr.length;){let kr=findClusterBreak(xr.text,wr);if(vr(xr.text.slice(wr,kr))!=Rr)break;wr=kr}return EditorSelection.range(Cr+xr.from,wr+xr.from)}function getdx(mr,hr){return hr.left>mr?hr.left-mr:Math.max(0,mr-hr.right)}function getdy(mr,hr){return hr.top>mr?hr.top-mr:Math.max(0,mr-hr.bottom)}function yOverlap(mr,hr){return mr.top<hr.bottom-1&&mr.bottom>hr.top+1}function upTop(mr,hr){return hr<mr.top?{top:hr,left:mr.left,right:mr.right,bottom:mr.bottom}:mr}function upBot(mr,hr){return hr>mr.bottom?{top:mr.top,left:mr.left,right:mr.right,bottom:hr}:mr}function domPosAtCoords(mr,hr,gr){let vr,xr,Er,Cr,wr=!1,Rr,kr,Dr,Br;for(let qr=mr.firstChild;qr;qr=qr.nextSibling){let zr=clientRectsFor(qr);for(let Qr=0;Qr<zr.length;Qr++){let sn=zr[Qr];xr&&yOverlap(xr,sn)&&(sn=upTop(upBot(sn,xr.bottom),xr.top));let hn=getdx(hr,sn),vn=getdy(gr,sn);if(hn==0&&vn==0)return qr.nodeType==3?domPosInText(qr,hr,gr):domPosAtCoords(qr,hr,gr);if(!vr||Cr>vn||Cr==vn&&Er>hn){vr=qr,xr=sn,Er=hn,Cr=vn;let yn=vn?gr<sn.top?-1:1:hn?hr<sn.left?-1:1:0;wr=!yn||(yn>0?Qr<zr.length-1:Qr>0)}hn==0?gr>sn.bottom&&(!Dr||Dr.bottom<sn.bottom)?(Rr=qr,Dr=sn):gr<sn.top&&(!Br||Br.top>sn.top)&&(kr=qr,Br=sn):Dr&&yOverlap(Dr,sn)?Dr=upBot(Dr,sn.bottom):Br&&yOverlap(Br,sn)&&(Br=upTop(Br,sn.top))}}if(Dr&&Dr.bottom>=gr?(vr=Rr,xr=Dr):Br&&Br.top<=gr&&(vr=kr,xr=Br),!vr)return{node:mr,offset:0};let Hr=Math.max(xr.left,Math.min(xr.right,hr));if(vr.nodeType==3)return domPosInText(vr,Hr,gr);if(wr&&vr.contentEditable!="false")return domPosAtCoords(vr,Hr,gr);let Gr=Array.prototype.indexOf.call(mr.childNodes,vr)+(hr>=(xr.left+xr.right)/2?1:0);return{node:mr,offset:Gr}}function domPosInText(mr,hr,gr){let vr=mr.nodeValue.length,xr=-1,Er=1e9,Cr=0;for(let wr=0;wr<vr;wr++){let Rr=textRange(mr,wr,wr+1).getClientRects();for(let kr=0;kr<Rr.length;kr++){let Dr=Rr[kr];if(Dr.top==Dr.bottom)continue;Cr||(Cr=hr-Dr.left);let Br=(Dr.top>gr?Dr.top-gr:gr-Dr.bottom)-1;if(Dr.left-1<=hr&&Dr.right+1>=hr&&Br<Er){let Hr=hr>=(Dr.left+Dr.right)/2,Gr=Hr;if((browser.chrome||browser.gecko)&&textRange(mr,wr).getBoundingClientRect().left==Dr.right&&(Gr=!Hr),Br<=0)return{node:mr,offset:wr+(Gr?1:0)};xr=wr+(Gr?1:0),Er=Br}}}return{node:mr,offset:xr>-1?xr:Cr>0?mr.nodeValue.length:0}}function posAtCoords(mr,hr,gr,vr=-1){var xr,Er;let Cr=mr.contentDOM.getBoundingClientRect(),wr=Cr.top+mr.viewState.paddingTop,Rr,{docHeight:kr}=mr.viewState,{x:Dr,y:Br}=hr,Hr=Br-wr;if(Hr<0)return 0;if(Hr>kr)return mr.state.doc.length;for(let yn=mr.viewState.heightOracle.textHeight/2,gn=!1;Rr=mr.elementAtHeight(Hr),Rr.type!=BlockType.Text;)for(;Hr=vr>0?Rr.bottom+yn:Rr.top-yn,!(Hr>=0&&Hr<=kr);){if(gn)return gr?null:0;gn=!0,vr=-vr}Br=wr+Hr;let Gr=Rr.from;if(Gr<mr.viewport.from)return mr.viewport.from==0?0:gr?null:posAtCoordsImprecise(mr,Cr,Rr,Dr,Br);if(Gr>mr.viewport.to)return mr.viewport.to==mr.state.doc.length?mr.state.doc.length:gr?null:posAtCoordsImprecise(mr,Cr,Rr,Dr,Br);let qr=mr.dom.ownerDocument,zr=mr.root.elementFromPoint?mr.root:qr,Qr=zr.elementFromPoint(Dr,Br);Qr&&!mr.contentDOM.contains(Qr)&&(Qr=null),Qr||(Dr=Math.max(Cr.left+1,Math.min(Cr.right-1,Dr)),Qr=zr.elementFromPoint(Dr,Br),Qr&&!mr.contentDOM.contains(Qr)&&(Qr=null));let sn,hn=-1;if(Qr&&((xr=mr.docView.nearest(Qr))===null||xr===void 0?void 0:xr.isEditable)!=!1){if(qr.caretPositionFromPoint){let yn=qr.caretPositionFromPoint(Dr,Br);yn&&({offsetNode:sn,offset:hn}=yn)}else if(qr.caretRangeFromPoint){let yn=qr.caretRangeFromPoint(Dr,Br);yn&&({startContainer:sn,startOffset:hn}=yn,(!mr.contentDOM.contains(sn)||browser.safari&&isSuspiciousSafariCaretResult(sn,hn,Dr)||browser.chrome&&isSuspiciousChromeCaretResult(sn,hn,Dr))&&(sn=void 0))}sn&&(hn=Math.min(maxOffset(sn),hn))}if(!sn||!mr.docView.dom.contains(sn)){let yn=LineView.find(mr.docView,Gr);if(!yn)return Hr>Rr.top+Rr.height/2?Rr.to:Rr.from;({node:sn,offset:hn}=domPosAtCoords(yn.dom,Dr,Br))}let vn=mr.docView.nearest(sn);if(!vn)return null;if(vn.isWidget&&((Er=vn.dom)===null||Er===void 0?void 0:Er.nodeType)==1){let yn=vn.dom.getBoundingClientRect();return hr.y<yn.top||hr.y<=yn.bottom&&hr.x<=(yn.left+yn.right)/2?vn.posAtStart:vn.posAtEnd}else return vn.localPosFromDOM(sn,hn)+vn.posAtStart}function posAtCoordsImprecise(mr,hr,gr,vr,xr){let Er=Math.round((vr-hr.left)*mr.defaultCharacterWidth);if(mr.lineWrapping&&gr.height>mr.defaultLineHeight*1.5){let wr=mr.viewState.heightOracle.textHeight,Rr=Math.floor((xr-gr.top-(mr.defaultLineHeight-wr)*.5)/wr);Er+=Rr*mr.viewState.heightOracle.lineLength}let Cr=mr.state.sliceDoc(gr.from,gr.to);return gr.from+findColumn(Cr,Er,mr.state.tabSize)}function isSuspiciousSafariCaretResult(mr,hr,gr){let vr;if(mr.nodeType!=3||hr!=(vr=mr.nodeValue.length))return!1;for(let xr=mr.nextSibling;xr;xr=xr.nextSibling)if(xr.nodeType!=1||xr.nodeName!="BR")return!1;return textRange(mr,vr-1,vr).getBoundingClientRect().left>gr}function isSuspiciousChromeCaretResult(mr,hr,gr){if(hr!=0)return!1;for(let xr=mr;;){let Er=xr.parentNode;if(!Er||Er.nodeType!=1||Er.firstChild!=xr)return!1;if(Er.classList.contains("cm-line"))break;xr=Er}let vr=mr.nodeType==1?mr.getBoundingClientRect():textRange(mr,0,Math.max(mr.nodeValue.length,1)).getBoundingClientRect();return gr-vr.left>5}function blockAt(mr,hr){let gr=mr.lineBlockAt(hr);if(Array.isArray(gr.type)){for(let vr of gr.type)if(vr.to>hr||vr.to==hr&&(vr.to==gr.to||vr.type==BlockType.Text))return vr}return gr}function moveToLineBoundary(mr,hr,gr,vr){let xr=blockAt(mr,hr.head),Er=!vr||xr.type!=BlockType.Text||!(mr.lineWrapping||xr.widgetLineBreaks)?null:mr.coordsAtPos(hr.assoc<0&&hr.head>xr.from?hr.head-1:hr.head);if(Er){let Cr=mr.dom.getBoundingClientRect(),wr=mr.textDirectionAt(xr.from),Rr=mr.posAtCoords({x:gr==(wr==Direction.LTR)?Cr.right-1:Cr.left+1,y:(Er.top+Er.bottom)/2});if(Rr!=null)return EditorSelection.cursor(Rr,gr?-1:1)}return EditorSelection.cursor(gr?xr.to:xr.from,gr?-1:1)}function moveByChar(mr,hr,gr,vr){let xr=mr.state.doc.lineAt(hr.head),Er=mr.bidiSpans(xr),Cr=mr.textDirectionAt(xr.from);for(let wr=hr,Rr=null;;){let kr=moveVisually(xr,Er,Cr,wr,gr),Dr=movedOver;if(!kr){if(xr.number==(gr?mr.state.doc.lines:1))return wr;Dr=`
`,xr=mr.state.doc.line(xr.number+(gr?1:-1)),Er=mr.bidiSpans(xr),kr=mr.visualLineSide(xr,!gr)}if(Rr){if(!Rr(Dr))return wr}else{if(!vr)return kr;Rr=vr(Dr)}wr=kr}}function byGroup(mr,hr,gr){let vr=mr.state.charCategorizer(hr),xr=vr(gr);return Er=>{let Cr=vr(Er);return xr==CharCategory.Space&&(xr=Cr),xr==Cr}}function moveVertically(mr,hr,gr,vr){let xr=hr.head,Er=gr?1:-1;if(xr==(gr?mr.state.doc.length:0))return EditorSelection.cursor(xr,hr.assoc);let Cr=hr.goalColumn,wr,Rr=mr.contentDOM.getBoundingClientRect(),kr=mr.coordsAtPos(xr,hr.assoc||-1),Dr=mr.documentTop;if(kr)Cr==null&&(Cr=kr.left-Rr.left),wr=Er<0?kr.top:kr.bottom;else{let Gr=mr.viewState.lineBlockAt(xr);Cr==null&&(Cr=Math.min(Rr.right-Rr.left,mr.defaultCharacterWidth*(xr-Gr.from))),wr=(Er<0?Gr.top:Gr.bottom)+Dr}let Br=Rr.left+Cr,Hr=vr??mr.viewState.heightOracle.textHeight>>1;for(let Gr=0;;Gr+=10){let qr=wr+(Hr+Gr)*Er,zr=posAtCoords(mr,{x:Br,y:qr},!1,Er);if(qr<Rr.top||qr>Rr.bottom||(Er<0?zr<xr:zr>xr)){let Qr=mr.docView.coordsForChar(zr),sn=!Qr||qr<Qr.top?-1:1;return EditorSelection.cursor(zr,sn,void 0,Cr)}}}function skipAtomicRanges(mr,hr,gr){for(;;){let vr=0;for(let xr of mr)xr.between(hr-1,hr+1,(Er,Cr,wr)=>{if(hr>Er&&hr<Cr){let Rr=vr||gr||(hr-Er<Cr-hr?-1:1);hr=Rr<0?Er:Cr,vr=Rr}});if(!vr)return hr}}function skipAtoms(mr,hr,gr){let vr=skipAtomicRanges(mr.state.facet(atomicRanges).map(xr=>xr(mr)),gr.from,hr.head>gr.from?-1:1);return vr==gr.from?gr:EditorSelection.cursor(vr,vr<gr.from?1:-1)}const LineBreakPlaceholder="￿";class DOMReader{constructor(hr,gr){this.points=hr,this.text="",this.lineSeparator=gr.facet(EditorState.lineSeparator)}append(hr){this.text+=hr}lineBreak(){this.text+=LineBreakPlaceholder}readRange(hr,gr){if(!hr)return this;let vr=hr.parentNode;for(let xr=hr;;){this.findPointBefore(vr,xr);let Er=this.text.length;this.readNode(xr);let Cr=xr.nextSibling;if(Cr==gr)break;let wr=ContentView.get(xr),Rr=ContentView.get(Cr);(wr&&Rr?wr.breakAfter:(wr?wr.breakAfter:isBlockElement(xr))||isBlockElement(Cr)&&(xr.nodeName!="BR"||xr.cmIgnore)&&this.text.length>Er)&&this.lineBreak(),xr=Cr}return this.findPointBefore(vr,gr),this}readTextNode(hr){let gr=hr.nodeValue;for(let vr of this.points)vr.node==hr&&(vr.pos=this.text.length+Math.min(vr.offset,gr.length));for(let vr=0,xr=this.lineSeparator?null:/\r\n?|\n/g;;){let Er=-1,Cr=1,wr;if(this.lineSeparator?(Er=gr.indexOf(this.lineSeparator,vr),Cr=this.lineSeparator.length):(wr=xr.exec(gr))&&(Er=wr.index,Cr=wr[0].length),this.append(gr.slice(vr,Er<0?gr.length:Er)),Er<0)break;if(this.lineBreak(),Cr>1)for(let Rr of this.points)Rr.node==hr&&Rr.pos>this.text.length&&(Rr.pos-=Cr-1);vr=Er+Cr}}readNode(hr){if(hr.cmIgnore)return;let gr=ContentView.get(hr),vr=gr&&gr.overrideDOMText;if(vr!=null){this.findPointInside(hr,vr.length);for(let xr=vr.iter();!xr.next().done;)xr.lineBreak?this.lineBreak():this.append(xr.value)}else hr.nodeType==3?this.readTextNode(hr):hr.nodeName=="BR"?hr.nextSibling&&this.lineBreak():hr.nodeType==1&&this.readRange(hr.firstChild,null)}findPointBefore(hr,gr){for(let vr of this.points)vr.node==hr&&hr.childNodes[vr.offset]==gr&&(vr.pos=this.text.length)}findPointInside(hr,gr){for(let vr of this.points)(hr.nodeType==3?vr.node==hr:hr.contains(vr.node))&&(vr.pos=this.text.length+(isAtEnd(hr,vr.node,vr.offset)?gr:0))}}function isAtEnd(mr,hr,gr){for(;;){if(!hr||gr<maxOffset(hr))return!1;if(hr==mr)return!0;gr=domIndex(hr)+1,hr=hr.parentNode}}class DOMPoint{constructor(hr,gr){this.node=hr,this.offset=gr,this.pos=-1}}class DOMChange{constructor(hr,gr,vr,xr){this.typeOver=xr,this.bounds=null,this.text="",this.domChanged=gr>-1;let{impreciseHead:Er,impreciseAnchor:Cr}=hr.docView;if(hr.state.readOnly&&gr>-1)this.newSel=null;else if(gr>-1&&(this.bounds=hr.docView.domBoundsAround(gr,vr,0))){let wr=Er||Cr?[]:selectionPoints(hr),Rr=new DOMReader(wr,hr.state);Rr.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=Rr.text,this.newSel=selectionFromPoints(wr,this.bounds.from)}else{let wr=hr.observer.selectionRange,Rr=Er&&Er.node==wr.focusNode&&Er.offset==wr.focusOffset||!contains(hr.contentDOM,wr.focusNode)?hr.state.selection.main.head:hr.docView.posFromDOM(wr.focusNode,wr.focusOffset),kr=Cr&&Cr.node==wr.anchorNode&&Cr.offset==wr.anchorOffset||!contains(hr.contentDOM,wr.anchorNode)?hr.state.selection.main.anchor:hr.docView.posFromDOM(wr.anchorNode,wr.anchorOffset),Dr=hr.viewport;if((browser.ios||browser.chrome)&&hr.state.selection.main.empty&&Rr!=kr&&(Dr.from>0||Dr.to<hr.state.doc.length)){let Br=Math.min(Rr,kr),Hr=Math.max(Rr,kr),Gr=Dr.from-Br,qr=Dr.to-Hr;(Gr==0||Gr==1||Br==0)&&(qr==0||qr==-1||Hr==hr.state.doc.length)&&(Rr=0,kr=hr.state.doc.length)}this.newSel=EditorSelection.single(kr,Rr)}}}function applyDOMChange(mr,hr){let gr,{newSel:vr}=hr,xr=mr.state.selection.main,Er=mr.inputState.lastKeyTime>Date.now()-100?mr.inputState.lastKeyCode:-1;if(hr.bounds){let{from:Cr,to:wr}=hr.bounds,Rr=xr.from,kr=null;(Er===8||browser.android&&hr.text.length<wr-Cr)&&(Rr=xr.to,kr="end");let Dr=findDiff(mr.state.doc.sliceString(Cr,wr,LineBreakPlaceholder),hr.text,Rr-Cr,kr);Dr&&(browser.chrome&&Er==13&&Dr.toB==Dr.from+2&&hr.text.slice(Dr.from,Dr.toB)==LineBreakPlaceholder+LineBreakPlaceholder&&Dr.toB--,gr={from:Cr+Dr.from,to:Cr+Dr.toA,insert:Text$1.of(hr.text.slice(Dr.from,Dr.toB).split(LineBreakPlaceholder))})}else vr&&(!mr.hasFocus&&mr.state.facet(editable)||vr.main.eq(xr))&&(vr=null);if(!gr&&!vr)return!1;if(!gr&&hr.typeOver&&!xr.empty&&vr&&vr.main.empty?gr={from:xr.from,to:xr.to,insert:mr.state.doc.slice(xr.from,xr.to)}:(browser.mac||browser.android)&&gr&&gr.from==gr.to&&gr.from==xr.head-1&&/^\. ?$/.test(gr.insert.toString())&&mr.contentDOM.getAttribute("autocorrect")=="off"?(vr&&gr.insert.length==2&&(vr=EditorSelection.single(vr.main.anchor-1,vr.main.head-1)),gr={from:gr.from,to:gr.to,insert:Text$1.of([gr.insert.toString().replace("."," ")])}):gr&&gr.from>=xr.from&&gr.to<=xr.to&&(gr.from!=xr.from||gr.to!=xr.to)&&xr.to-xr.from-(gr.to-gr.from)<=4?gr={from:xr.from,to:xr.to,insert:mr.state.doc.slice(xr.from,gr.from).append(gr.insert).append(mr.state.doc.slice(gr.to,xr.to))}:browser.chrome&&gr&&gr.from==gr.to&&gr.from==xr.head&&gr.insert.toString()==`
 `&&mr.lineWrapping&&(vr&&(vr=EditorSelection.single(vr.main.anchor-1,vr.main.head-1)),gr={from:xr.from,to:xr.to,insert:Text$1.of([" "])}),gr)return applyDOMChangeInner(mr,gr,vr,Er);if(vr&&!vr.main.eq(xr)){let Cr=!1,wr="select";return mr.inputState.lastSelectionTime>Date.now()-50&&(mr.inputState.lastSelectionOrigin=="select"&&(Cr=!0),wr=mr.inputState.lastSelectionOrigin),mr.dispatch({selection:vr,scrollIntoView:Cr,userEvent:wr}),!0}else return!1}function applyDOMChangeInner(mr,hr,gr,vr=-1){if(browser.ios&&mr.inputState.flushIOSKey(hr))return!0;let xr=mr.state.selection.main;if(browser.android&&(hr.to==xr.to&&(hr.from==xr.from||hr.from==xr.from-1&&mr.state.sliceDoc(hr.from,xr.from)==" ")&&hr.insert.length==1&&hr.insert.lines==2&&dispatchKey(mr.contentDOM,"Enter",13)||(hr.from==xr.from-1&&hr.to==xr.to&&hr.insert.length==0||vr==8&&hr.insert.length<hr.to-hr.from&&hr.to>xr.head)&&dispatchKey(mr.contentDOM,"Backspace",8)||hr.from==xr.from&&hr.to==xr.to+1&&hr.insert.length==0&&dispatchKey(mr.contentDOM,"Delete",46)))return!0;let Er=hr.insert.toString();mr.inputState.composing>=0&&mr.inputState.composing++;let Cr,wr=()=>Cr||(Cr=applyDefaultInsert(mr,hr,gr));return mr.state.facet(inputHandler$1).some(Rr=>Rr(mr,hr.from,hr.to,Er,wr))||mr.dispatch(wr()),!0}function applyDefaultInsert(mr,hr,gr){let vr,xr=mr.state,Er=xr.selection.main;if(hr.from>=Er.from&&hr.to<=Er.to&&hr.to-hr.from>=(Er.to-Er.from)/3&&(!gr||gr.main.empty&&gr.main.from==hr.from+hr.insert.length)&&mr.inputState.composing<0){let wr=Er.from<hr.from?xr.sliceDoc(Er.from,hr.from):"",Rr=Er.to>hr.to?xr.sliceDoc(hr.to,Er.to):"";vr=xr.replaceSelection(mr.state.toText(wr+hr.insert.sliceString(0,void 0,mr.state.lineBreak)+Rr))}else{let wr=xr.changes(hr),Rr=gr&&gr.main.to<=wr.newLength?gr.main:void 0;if(xr.selection.ranges.length>1&&mr.inputState.composing>=0&&hr.to<=Er.to&&hr.to>=Er.to-10){let kr=mr.state.sliceDoc(hr.from,hr.to),Dr,Br=gr&&findCompositionNode(mr,gr.main.head);if(Br){let qr=hr.insert.length-(hr.to-hr.from);Dr={from:Br.from,to:Br.to-qr}}else Dr=mr.state.doc.lineAt(Er.head);let Hr=Er.to-hr.to,Gr=Er.to-Er.from;vr=xr.changeByRange(qr=>{if(qr.from==Er.from&&qr.to==Er.to)return{changes:wr,range:Rr||qr.map(wr)};let zr=qr.to-Hr,Qr=zr-kr.length;if(qr.to-qr.from!=Gr||mr.state.sliceDoc(Qr,zr)!=kr||qr.to>=Dr.from&&qr.from<=Dr.to)return{range:qr};let sn=xr.changes({from:Qr,to:zr,insert:hr.insert}),hn=qr.to-Er.to;return{changes:sn,range:Rr?EditorSelection.range(Math.max(0,Rr.anchor+hn),Math.max(0,Rr.head+hn)):qr.map(sn)}})}else vr={changes:wr,selection:Rr&&xr.selection.replaceRange(Rr)}}let Cr="input.type";return(mr.composing||mr.inputState.compositionPendingChange&&mr.inputState.compositionEndedAt>Date.now()-50)&&(mr.inputState.compositionPendingChange=!1,Cr+=".compose",mr.inputState.compositionFirstChange&&(Cr+=".start",mr.inputState.compositionFirstChange=!1)),xr.update(vr,{userEvent:Cr,scrollIntoView:!0})}function findDiff(mr,hr,gr,vr){let xr=Math.min(mr.length,hr.length),Er=0;for(;Er<xr&&mr.charCodeAt(Er)==hr.charCodeAt(Er);)Er++;if(Er==xr&&mr.length==hr.length)return null;let Cr=mr.length,wr=hr.length;for(;Cr>0&&wr>0&&mr.charCodeAt(Cr-1)==hr.charCodeAt(wr-1);)Cr--,wr--;if(vr=="end"){let Rr=Math.max(0,Er-Math.min(Cr,wr));gr-=Cr+Rr-Er}if(Cr<Er&&mr.length<hr.length){let Rr=gr<=Er&&gr>=Cr?Er-gr:0;Er-=Rr,wr=Er+(wr-Cr),Cr=Er}else if(wr<Er){let Rr=gr<=Er&&gr>=wr?Er-gr:0;Er-=Rr,Cr=Er+(Cr-wr),wr=Er}return{from:Er,toA:Cr,toB:wr}}function selectionPoints(mr){let hr=[];if(mr.root.activeElement!=mr.contentDOM)return hr;let{anchorNode:gr,anchorOffset:vr,focusNode:xr,focusOffset:Er}=mr.observer.selectionRange;return gr&&(hr.push(new DOMPoint(gr,vr)),(xr!=gr||Er!=vr)&&hr.push(new DOMPoint(xr,Er))),hr}function selectionFromPoints(mr,hr){if(mr.length==0)return null;let gr=mr[0].pos,vr=mr.length==2?mr[1].pos:gr;return gr>-1&&vr>-1?EditorSelection.single(gr+hr,vr+hr):null}class InputState{setSelectionOrigin(hr){this.lastSelectionOrigin=hr,this.lastSelectionTime=Date.now()}constructor(hr){this.view=hr,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=hr.hasFocus,browser.safari&&hr.contentDOM.addEventListener("input",()=>null),browser.gecko&&firefoxCopyCutHack(hr.contentDOM.ownerDocument)}handleEvent(hr){!eventBelongsToEditor(this.view,hr)||this.ignoreDuringComposition(hr)||hr.type=="keydown"&&this.keydown(hr)||this.runHandlers(hr.type,hr)}runHandlers(hr,gr){let vr=this.handlers[hr];if(vr){for(let xr of vr.observers)xr(this.view,gr);for(let xr of vr.handlers){if(gr.defaultPrevented)break;if(xr(this.view,gr)){gr.preventDefault();break}}}}ensureHandlers(hr){let gr=computeHandlers(hr),vr=this.handlers,xr=this.view.contentDOM;for(let Er in gr)if(Er!="scroll"){let Cr=!gr[Er].handlers.length,wr=vr[Er];wr&&Cr!=!wr.handlers.length&&(xr.removeEventListener(Er,this.handleEvent),wr=null),wr||xr.addEventListener(Er,this.handleEvent,{passive:Cr})}for(let Er in vr)Er!="scroll"&&!gr[Er]&&xr.removeEventListener(Er,this.handleEvent);this.handlers=gr}keydown(hr){if(this.lastKeyCode=hr.keyCode,this.lastKeyTime=Date.now(),hr.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&hr.keyCode!=27&&modifierCodes.indexOf(hr.keyCode)<0&&(this.tabFocusMode=-1),browser.android&&browser.chrome&&!hr.synthetic&&(hr.keyCode==13||hr.keyCode==8))return this.view.observer.delayAndroidKey(hr.key,hr.keyCode),!0;let gr;return browser.ios&&!hr.synthetic&&!hr.altKey&&!hr.metaKey&&((gr=PendingKeys.find(vr=>vr.keyCode==hr.keyCode))&&!hr.ctrlKey||EmacsyPendingKeys.indexOf(hr.key)>-1&&hr.ctrlKey&&!hr.shiftKey)?(this.pendingIOSKey=gr||hr,setTimeout(()=>this.flushIOSKey(),250),!0):(hr.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(hr){let gr=this.pendingIOSKey;return!gr||gr.key=="Enter"&&hr&&hr.from<hr.to&&/^\S+$/.test(hr.insert.toString())?!1:(this.pendingIOSKey=void 0,dispatchKey(this.view.contentDOM,gr.key,gr.keyCode,gr instanceof KeyboardEvent?gr:void 0))}ignoreDuringComposition(hr){return/^key/.test(hr.type)?this.composing>0?!0:browser.safari&&!browser.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(hr){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=hr}update(hr){this.view.observer.update(hr),this.mouseSelection&&this.mouseSelection.update(hr),this.draggedContent&&hr.docChanged&&(this.draggedContent=this.draggedContent.map(hr.changes)),hr.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function bindHandler(mr,hr){return(gr,vr)=>{try{return hr.call(mr,vr,gr)}catch(xr){logException(gr.state,xr)}}}function computeHandlers(mr){let hr=Object.create(null);function gr(vr){return hr[vr]||(hr[vr]={observers:[],handlers:[]})}for(let vr of mr){let xr=vr.spec;if(xr&&xr.domEventHandlers)for(let Er in xr.domEventHandlers){let Cr=xr.domEventHandlers[Er];Cr&&gr(Er).handlers.push(bindHandler(vr.value,Cr))}if(xr&&xr.domEventObservers)for(let Er in xr.domEventObservers){let Cr=xr.domEventObservers[Er];Cr&&gr(Er).observers.push(bindHandler(vr.value,Cr))}}for(let vr in handlers$1)gr(vr).handlers.push(handlers$1[vr]);for(let vr in observers)gr(vr).observers.push(observers[vr]);return hr}const PendingKeys=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],EmacsyPendingKeys="dthko",modifierCodes=[16,17,18,20,91,92,224,225],dragScrollMargin=6;function dragScrollSpeed(mr){return Math.max(0,mr)*.7+8}function dist(mr,hr){return Math.max(Math.abs(mr.clientX-hr.clientX),Math.abs(mr.clientY-hr.clientY))}class MouseSelection{constructor(hr,gr,vr,xr){this.view=hr,this.startEvent=gr,this.style=vr,this.mustSelect=xr,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=gr,this.scrollParents=scrollableParents(hr.contentDOM),this.atoms=hr.state.facet(atomicRanges).map(Cr=>Cr(hr));let Er=hr.contentDOM.ownerDocument;Er.addEventListener("mousemove",this.move=this.move.bind(this)),Er.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=gr.shiftKey,this.multiple=hr.state.facet(EditorState.allowMultipleSelections)&&addsSelectionRange(hr,gr),this.dragging=isInPrimarySelection(hr,gr)&&getClickType(gr)==1?null:!1}start(hr){this.dragging===!1&&this.select(hr)}move(hr){if(hr.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&dist(this.startEvent,hr)<10)return;this.select(this.lastEvent=hr);let gr=0,vr=0,xr=0,Er=0,Cr=this.view.win.innerWidth,wr=this.view.win.innerHeight;this.scrollParents.x&&({left:xr,right:Cr}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:Er,bottom:wr}=this.scrollParents.y.getBoundingClientRect());let Rr=getScrollMargins(this.view);hr.clientX-Rr.left<=xr+dragScrollMargin?gr=-dragScrollSpeed(xr-hr.clientX):hr.clientX+Rr.right>=Cr-dragScrollMargin&&(gr=dragScrollSpeed(hr.clientX-Cr)),hr.clientY-Rr.top<=Er+dragScrollMargin?vr=-dragScrollSpeed(Er-hr.clientY):hr.clientY+Rr.bottom>=wr-dragScrollMargin&&(vr=dragScrollSpeed(hr.clientY-wr)),this.setScrollSpeed(gr,vr)}up(hr){this.dragging==null&&this.select(this.lastEvent),this.dragging||hr.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let hr=this.view.contentDOM.ownerDocument;hr.removeEventListener("mousemove",this.move),hr.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(hr,gr){this.scrollSpeed={x:hr,y:gr},hr||gr?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:hr,y:gr}=this.scrollSpeed;hr&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=hr,hr=0),gr&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=gr,gr=0),(hr||gr)&&this.view.win.scrollBy(hr,gr),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(hr){let gr=null;for(let vr=0;vr<hr.ranges.length;vr++){let xr=hr.ranges[vr],Er=null;if(xr.empty){let Cr=skipAtomicRanges(this.atoms,xr.from,0);Cr!=xr.from&&(Er=EditorSelection.cursor(Cr,-1))}else{let Cr=skipAtomicRanges(this.atoms,xr.from,-1),wr=skipAtomicRanges(this.atoms,xr.to,1);(Cr!=xr.from||wr!=xr.to)&&(Er=EditorSelection.range(xr.from==xr.anchor?Cr:wr,xr.from==xr.head?Cr:wr))}Er&&(gr||(gr=hr.ranges.slice()),gr[vr]=Er)}return gr?EditorSelection.create(gr,hr.mainIndex):hr}select(hr){let{view:gr}=this,vr=this.skipAtoms(this.style.get(hr,this.extend,this.multiple));(this.mustSelect||!vr.eq(gr.state.selection,this.dragging===!1))&&this.view.dispatch({selection:vr,userEvent:"select.pointer"}),this.mustSelect=!1}update(hr){hr.transactions.some(gr=>gr.isUserEvent("input.type"))?this.destroy():this.style.update(hr)&&setTimeout(()=>this.select(this.lastEvent),20)}}function addsSelectionRange(mr,hr){let gr=mr.state.facet(clickAddsSelectionRange);return gr.length?gr[0](hr):browser.mac?hr.metaKey:hr.ctrlKey}function dragMovesSelection(mr,hr){let gr=mr.state.facet(dragMovesSelection$1);return gr.length?gr[0](hr):browser.mac?!hr.altKey:!hr.ctrlKey}function isInPrimarySelection(mr,hr){let{main:gr}=mr.state.selection;if(gr.empty)return!1;let vr=getSelection(mr.root);if(!vr||vr.rangeCount==0)return!0;let xr=vr.getRangeAt(0).getClientRects();for(let Er=0;Er<xr.length;Er++){let Cr=xr[Er];if(Cr.left<=hr.clientX&&Cr.right>=hr.clientX&&Cr.top<=hr.clientY&&Cr.bottom>=hr.clientY)return!0}return!1}function eventBelongsToEditor(mr,hr){if(!hr.bubbles)return!0;if(hr.defaultPrevented)return!1;for(let gr=hr.target,vr;gr!=mr.contentDOM;gr=gr.parentNode)if(!gr||gr.nodeType==11||(vr=ContentView.get(gr))&&vr.ignoreEvent(hr))return!1;return!0}const handlers$1=Object.create(null),observers=Object.create(null),brokenClipboardAPI=browser.ie&&browser.ie_version<15||browser.ios&&browser.webkit_version<604;function capturePaste(mr){let hr=mr.dom.parentNode;if(!hr)return;let gr=hr.appendChild(document.createElement("textarea"));gr.style.cssText="position: fixed; left: -10000px; top: 10px",gr.focus(),setTimeout(()=>{mr.focus(),gr.remove(),doPaste(mr,gr.value)},50)}function textFilter(mr,hr,gr){for(let vr of mr.facet(hr))gr=vr(gr,mr);return gr}function doPaste(mr,hr){hr=textFilter(mr.state,clipboardInputFilter,hr);let{state:gr}=mr,vr,xr=1,Er=gr.toText(hr),Cr=Er.lines==gr.selection.ranges.length;if(lastLinewiseCopy!=null&&gr.selection.ranges.every(Rr=>Rr.empty)&&lastLinewiseCopy==Er.toString()){let Rr=-1;vr=gr.changeByRange(kr=>{let Dr=gr.doc.lineAt(kr.from);if(Dr.from==Rr)return{range:kr};Rr=Dr.from;let Br=gr.toText((Cr?Er.line(xr++).text:hr)+gr.lineBreak);return{changes:{from:Dr.from,insert:Br},range:EditorSelection.cursor(kr.from+Br.length)}})}else Cr?vr=gr.changeByRange(Rr=>{let kr=Er.line(xr++);return{changes:{from:Rr.from,to:Rr.to,insert:kr.text},range:EditorSelection.cursor(Rr.from+kr.length)}}):vr=gr.replaceSelection(Er);mr.dispatch(vr,{userEvent:"input.paste",scrollIntoView:!0})}observers.scroll=mr=>{mr.inputState.lastScrollTop=mr.scrollDOM.scrollTop,mr.inputState.lastScrollLeft=mr.scrollDOM.scrollLeft};handlers$1.keydown=(mr,hr)=>(mr.inputState.setSelectionOrigin("select"),hr.keyCode==27&&mr.inputState.tabFocusMode!=0&&(mr.inputState.tabFocusMode=Date.now()+2e3),!1);observers.touchstart=(mr,hr)=>{mr.inputState.lastTouchTime=Date.now(),mr.inputState.setSelectionOrigin("select.pointer")};observers.touchmove=mr=>{mr.inputState.setSelectionOrigin("select.pointer")};handlers$1.mousedown=(mr,hr)=>{if(mr.observer.flush(),mr.inputState.lastTouchTime>Date.now()-2e3)return!1;let gr=null;for(let vr of mr.state.facet(mouseSelectionStyle))if(gr=vr(mr,hr),gr)break;if(!gr&&hr.button==0&&(gr=basicMouseSelection(mr,hr)),gr){let vr=!mr.hasFocus;mr.inputState.startMouseSelection(new MouseSelection(mr,hr,gr,vr)),vr&&mr.observer.ignore(()=>{focusPreventScroll(mr.contentDOM);let Er=mr.root.activeElement;Er&&!Er.contains(mr.contentDOM)&&Er.blur()});let xr=mr.inputState.mouseSelection;if(xr)return xr.start(hr),xr.dragging===!1}return!1};function rangeForClick(mr,hr,gr,vr){if(vr==1)return EditorSelection.cursor(hr,gr);if(vr==2)return groupAt(mr.state,hr,gr);{let xr=LineView.find(mr.docView,hr),Er=mr.state.doc.lineAt(xr?xr.posAtEnd:hr),Cr=xr?xr.posAtStart:Er.from,wr=xr?xr.posAtEnd:Er.to;return wr<mr.state.doc.length&&wr==Er.to&&wr++,EditorSelection.range(Cr,wr)}}let inside=(mr,hr,gr)=>hr>=gr.top&&hr<=gr.bottom&&mr>=gr.left&&mr<=gr.right;function findPositionSide(mr,hr,gr,vr){let xr=LineView.find(mr.docView,hr);if(!xr)return 1;let Er=hr-xr.posAtStart;if(Er==0)return 1;if(Er==xr.length)return-1;let Cr=xr.coordsAt(Er,-1);if(Cr&&inside(gr,vr,Cr))return-1;let wr=xr.coordsAt(Er,1);return wr&&inside(gr,vr,wr)?1:Cr&&Cr.bottom>=vr?-1:1}function queryPos(mr,hr){let gr=mr.posAtCoords({x:hr.clientX,y:hr.clientY},!1);return{pos:gr,bias:findPositionSide(mr,gr,hr.clientX,hr.clientY)}}const BadMouseDetail=browser.ie&&browser.ie_version<=11;let lastMouseDown=null,lastMouseDownCount=0,lastMouseDownTime=0;function getClickType(mr){if(!BadMouseDetail)return mr.detail;let hr=lastMouseDown,gr=lastMouseDownTime;return lastMouseDown=mr,lastMouseDownTime=Date.now(),lastMouseDownCount=!hr||gr>Date.now()-400&&Math.abs(hr.clientX-mr.clientX)<2&&Math.abs(hr.clientY-mr.clientY)<2?(lastMouseDownCount+1)%3:1}function basicMouseSelection(mr,hr){let gr=queryPos(mr,hr),vr=getClickType(hr),xr=mr.state.selection;return{update(Er){Er.docChanged&&(gr.pos=Er.changes.mapPos(gr.pos),xr=xr.map(Er.changes))},get(Er,Cr,wr){let Rr=queryPos(mr,Er),kr,Dr=rangeForClick(mr,Rr.pos,Rr.bias,vr);if(gr.pos!=Rr.pos&&!Cr){let Br=rangeForClick(mr,gr.pos,gr.bias,vr),Hr=Math.min(Br.from,Dr.from),Gr=Math.max(Br.to,Dr.to);Dr=Hr<Dr.from?EditorSelection.range(Hr,Gr):EditorSelection.range(Gr,Hr)}return Cr?xr.replaceRange(xr.main.extend(Dr.from,Dr.to)):wr&&vr==1&&xr.ranges.length>1&&(kr=removeRangeAround(xr,Rr.pos))?kr:wr?xr.addRange(Dr):EditorSelection.create([Dr])}}}function removeRangeAround(mr,hr){for(let gr=0;gr<mr.ranges.length;gr++){let{from:vr,to:xr}=mr.ranges[gr];if(vr<=hr&&xr>=hr)return EditorSelection.create(mr.ranges.slice(0,gr).concat(mr.ranges.slice(gr+1)),mr.mainIndex==gr?0:mr.mainIndex-(mr.mainIndex>gr?1:0))}return null}handlers$1.dragstart=(mr,hr)=>{let{selection:{main:gr}}=mr.state;if(hr.target.draggable){let xr=mr.docView.nearest(hr.target);if(xr&&xr.isWidget){let Er=xr.posAtStart,Cr=Er+xr.length;(Er>=gr.to||Cr<=gr.from)&&(gr=EditorSelection.range(Er,Cr))}}let{inputState:vr}=mr;return vr.mouseSelection&&(vr.mouseSelection.dragging=!0),vr.draggedContent=gr,hr.dataTransfer&&(hr.dataTransfer.setData("Text",textFilter(mr.state,clipboardOutputFilter,mr.state.sliceDoc(gr.from,gr.to))),hr.dataTransfer.effectAllowed="copyMove"),!1};handlers$1.dragend=mr=>(mr.inputState.draggedContent=null,!1);function dropText(mr,hr,gr,vr){if(gr=textFilter(mr.state,clipboardInputFilter,gr),!gr)return;let xr=mr.posAtCoords({x:hr.clientX,y:hr.clientY},!1),{draggedContent:Er}=mr.inputState,Cr=vr&&Er&&dragMovesSelection(mr,hr)?{from:Er.from,to:Er.to}:null,wr={from:xr,insert:gr},Rr=mr.state.changes(Cr?[Cr,wr]:wr);mr.focus(),mr.dispatch({changes:Rr,selection:{anchor:Rr.mapPos(xr,-1),head:Rr.mapPos(xr,1)},userEvent:Cr?"move.drop":"input.drop"}),mr.inputState.draggedContent=null}handlers$1.drop=(mr,hr)=>{if(!hr.dataTransfer)return!1;if(mr.state.readOnly)return!0;let gr=hr.dataTransfer.files;if(gr&&gr.length){let vr=Array(gr.length),xr=0,Er=()=>{++xr==gr.length&&dropText(mr,hr,vr.filter(Cr=>Cr!=null).join(mr.state.lineBreak),!1)};for(let Cr=0;Cr<gr.length;Cr++){let wr=new FileReader;wr.onerror=Er,wr.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(wr.result)||(vr[Cr]=wr.result),Er()},wr.readAsText(gr[Cr])}return!0}else{let vr=hr.dataTransfer.getData("Text");if(vr)return dropText(mr,hr,vr,!0),!0}return!1};handlers$1.paste=(mr,hr)=>{if(mr.state.readOnly)return!0;mr.observer.flush();let gr=brokenClipboardAPI?null:hr.clipboardData;return gr?(doPaste(mr,gr.getData("text/plain")||gr.getData("text/uri-list")),!0):(capturePaste(mr),!1)};function captureCopy(mr,hr){let gr=mr.dom.parentNode;if(!gr)return;let vr=gr.appendChild(document.createElement("textarea"));vr.style.cssText="position: fixed; left: -10000px; top: 10px",vr.value=hr,vr.focus(),vr.selectionEnd=hr.length,vr.selectionStart=0,setTimeout(()=>{vr.remove(),mr.focus()},50)}function copiedRange(mr){let hr=[],gr=[],vr=!1;for(let xr of mr.selection.ranges)xr.empty||(hr.push(mr.sliceDoc(xr.from,xr.to)),gr.push(xr));if(!hr.length){let xr=-1;for(let{from:Er}of mr.selection.ranges){let Cr=mr.doc.lineAt(Er);Cr.number>xr&&(hr.push(Cr.text),gr.push({from:Cr.from,to:Math.min(mr.doc.length,Cr.to+1)})),xr=Cr.number}vr=!0}return{text:textFilter(mr,clipboardOutputFilter,hr.join(mr.lineBreak)),ranges:gr,linewise:vr}}let lastLinewiseCopy=null;handlers$1.copy=handlers$1.cut=(mr,hr)=>{let{text:gr,ranges:vr,linewise:xr}=copiedRange(mr.state);if(!gr&&!xr)return!1;lastLinewiseCopy=xr?gr:null,hr.type=="cut"&&!mr.state.readOnly&&mr.dispatch({changes:vr,scrollIntoView:!0,userEvent:"delete.cut"});let Er=brokenClipboardAPI?null:hr.clipboardData;return Er?(Er.clearData(),Er.setData("text/plain",gr),!0):(captureCopy(mr,gr),!1)};const isFocusChange=Annotation.define();function focusChangeTransaction(mr,hr){let gr=[];for(let vr of mr.facet(focusChangeEffect)){let xr=vr(mr,hr);xr&&gr.push(xr)}return gr?mr.update({effects:gr,annotations:isFocusChange.of(!0)}):null}function updateForFocusChange(mr){setTimeout(()=>{let hr=mr.hasFocus;if(hr!=mr.inputState.notifiedFocused){let gr=focusChangeTransaction(mr.state,hr);gr?mr.dispatch(gr):mr.update([])}},10)}observers.focus=mr=>{mr.inputState.lastFocusTime=Date.now(),!mr.scrollDOM.scrollTop&&(mr.inputState.lastScrollTop||mr.inputState.lastScrollLeft)&&(mr.scrollDOM.scrollTop=mr.inputState.lastScrollTop,mr.scrollDOM.scrollLeft=mr.inputState.lastScrollLeft),updateForFocusChange(mr)};observers.blur=mr=>{mr.observer.clearSelectionRange(),updateForFocusChange(mr)};observers.compositionstart=observers.compositionupdate=mr=>{mr.observer.editContext||(mr.inputState.compositionFirstChange==null&&(mr.inputState.compositionFirstChange=!0),mr.inputState.composing<0&&(mr.inputState.composing=0))};observers.compositionend=mr=>{mr.observer.editContext||(mr.inputState.composing=-1,mr.inputState.compositionEndedAt=Date.now(),mr.inputState.compositionPendingKey=!0,mr.inputState.compositionPendingChange=mr.observer.pendingRecords().length>0,mr.inputState.compositionFirstChange=null,browser.chrome&&browser.android?mr.observer.flushSoon():mr.inputState.compositionPendingChange?Promise.resolve().then(()=>mr.observer.flush()):setTimeout(()=>{mr.inputState.composing<0&&mr.docView.hasComposition&&mr.update([])},50))};observers.contextmenu=mr=>{mr.inputState.lastContextMenu=Date.now()};handlers$1.beforeinput=(mr,hr)=>{var gr,vr;if(hr.inputType=="insertReplacementText"&&mr.observer.editContext){let Er=(gr=hr.dataTransfer)===null||gr===void 0?void 0:gr.getData("text/plain"),Cr=hr.getTargetRanges();if(Er&&Cr.length){let wr=Cr[0],Rr=mr.posAtDOM(wr.startContainer,wr.startOffset),kr=mr.posAtDOM(wr.endContainer,wr.endOffset);return applyDOMChangeInner(mr,{from:Rr,to:kr,insert:mr.state.toText(Er)},null),!0}}let xr;if(browser.chrome&&browser.android&&(xr=PendingKeys.find(Er=>Er.inputType==hr.inputType))&&(mr.observer.delayAndroidKey(xr.key,xr.keyCode),xr.key=="Backspace"||xr.key=="Delete")){let Er=((vr=window.visualViewport)===null||vr===void 0?void 0:vr.height)||0;setTimeout(()=>{var Cr;(((Cr=window.visualViewport)===null||Cr===void 0?void 0:Cr.height)||0)>Er+10&&mr.hasFocus&&(mr.contentDOM.blur(),mr.focus())},100)}return browser.ios&&hr.inputType=="deleteContentForward"&&mr.observer.flushSoon(),browser.safari&&hr.inputType=="insertText"&&mr.inputState.composing>=0&&setTimeout(()=>observers.compositionend(mr,hr),20),!1};const appliedFirefoxHack=new Set;function firefoxCopyCutHack(mr){appliedFirefoxHack.has(mr)||(appliedFirefoxHack.add(mr),mr.addEventListener("copy",()=>{}),mr.addEventListener("cut",()=>{}))}const wrappingWhiteSpace=["pre-wrap","normal","pre-line","break-spaces"];let heightChangeFlag=!1;function clearHeightChangeFlag(){heightChangeFlag=!1}class HeightOracle{constructor(hr){this.lineWrapping=hr,this.doc=Text$1.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(hr,gr){let vr=this.doc.lineAt(gr).number-this.doc.lineAt(hr).number+1;return this.lineWrapping&&(vr+=Math.max(0,Math.ceil((gr-hr-vr*this.lineLength*.5)/this.lineLength))),this.lineHeight*vr}heightForLine(hr){return this.lineWrapping?(1+Math.max(0,Math.ceil((hr-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(hr){return this.doc=hr,this}mustRefreshForWrapping(hr){return wrappingWhiteSpace.indexOf(hr)>-1!=this.lineWrapping}mustRefreshForHeights(hr){let gr=!1;for(let vr=0;vr<hr.length;vr++){let xr=hr[vr];xr<0?vr++:this.heightSamples[Math.floor(xr*10)]||(gr=!0,this.heightSamples[Math.floor(xr*10)]=!0)}return gr}refresh(hr,gr,vr,xr,Er,Cr){let wr=wrappingWhiteSpace.indexOf(hr)>-1,Rr=Math.round(gr)!=Math.round(this.lineHeight)||this.lineWrapping!=wr;if(this.lineWrapping=wr,this.lineHeight=gr,this.charWidth=vr,this.textHeight=xr,this.lineLength=Er,Rr){this.heightSamples={};for(let kr=0;kr<Cr.length;kr++){let Dr=Cr[kr];Dr<0?kr++:this.heightSamples[Math.floor(Dr*10)]=!0}}return Rr}}class MeasuredHeights{constructor(hr,gr){this.from=hr,this.heights=gr,this.index=0}get more(){return this.index<this.heights.length}}class BlockInfo{constructor(hr,gr,vr,xr,Er){this.from=hr,this.length=gr,this.top=vr,this.height=xr,this._content=Er}get type(){return typeof this._content=="number"?BlockType.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof PointDecoration?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(hr){let gr=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(hr._content)?hr._content:[hr]);return new BlockInfo(this.from,this.length+hr.length,this.top,this.height+hr.height,gr)}}var QueryType$1=function(mr){return mr[mr.ByPos=0]="ByPos",mr[mr.ByHeight=1]="ByHeight",mr[mr.ByPosNoHeight=2]="ByPosNoHeight",mr}(QueryType$1||(QueryType$1={}));const Epsilon=.001;class HeightMap{constructor(hr,gr,vr=2){this.length=hr,this.height=gr,this.flags=vr}get outdated(){return(this.flags&2)>0}set outdated(hr){this.flags=(hr?2:0)|this.flags&-3}setHeight(hr){this.height!=hr&&(Math.abs(this.height-hr)>Epsilon&&(heightChangeFlag=!0),this.height=hr)}replace(hr,gr,vr){return HeightMap.of(vr)}decomposeLeft(hr,gr){gr.push(this)}decomposeRight(hr,gr){gr.push(this)}applyChanges(hr,gr,vr,xr){let Er=this,Cr=vr.doc;for(let wr=xr.length-1;wr>=0;wr--){let{fromA:Rr,toA:kr,fromB:Dr,toB:Br}=xr[wr],Hr=Er.lineAt(Rr,QueryType$1.ByPosNoHeight,vr.setDoc(gr),0,0),Gr=Hr.to>=kr?Hr:Er.lineAt(kr,QueryType$1.ByPosNoHeight,vr,0,0);for(Br+=Gr.to-kr,kr=Gr.to;wr>0&&Hr.from<=xr[wr-1].toA;)Rr=xr[wr-1].fromA,Dr=xr[wr-1].fromB,wr--,Rr<Hr.from&&(Hr=Er.lineAt(Rr,QueryType$1.ByPosNoHeight,vr,0,0));Dr+=Hr.from-Rr,Rr=Hr.from;let qr=NodeBuilder.build(vr.setDoc(Cr),hr,Dr,Br);Er=replace$2(Er,Er.replace(Rr,kr,qr))}return Er.updateHeight(vr,0)}static empty(){return new HeightMapText(0,0)}static of(hr){if(hr.length==1)return hr[0];let gr=0,vr=hr.length,xr=0,Er=0;for(;;)if(gr==vr)if(xr>Er*2){let wr=hr[gr-1];wr.break?hr.splice(--gr,1,wr.left,null,wr.right):hr.splice(--gr,1,wr.left,wr.right),vr+=1+wr.break,xr-=wr.size}else if(Er>xr*2){let wr=hr[vr];wr.break?hr.splice(vr,1,wr.left,null,wr.right):hr.splice(vr,1,wr.left,wr.right),vr+=2+wr.break,Er-=wr.size}else break;else if(xr<Er){let wr=hr[gr++];wr&&(xr+=wr.size)}else{let wr=hr[--vr];wr&&(Er+=wr.size)}let Cr=0;return hr[gr-1]==null?(Cr=1,gr--):hr[gr]==null&&(Cr=1,vr++),new HeightMapBranch(HeightMap.of(hr.slice(0,gr)),Cr,HeightMap.of(hr.slice(vr)))}}function replace$2(mr,hr){return mr==hr?mr:(mr.constructor!=hr.constructor&&(heightChangeFlag=!0),hr)}HeightMap.prototype.size=1;class HeightMapBlock extends HeightMap{constructor(hr,gr,vr){super(hr,gr),this.deco=vr}blockAt(hr,gr,vr,xr){return new BlockInfo(xr,this.length,vr,this.height,this.deco||0)}lineAt(hr,gr,vr,xr,Er){return this.blockAt(0,vr,xr,Er)}forEachLine(hr,gr,vr,xr,Er,Cr){hr<=Er+this.length&&gr>=Er&&Cr(this.blockAt(0,vr,xr,Er))}updateHeight(hr,gr=0,vr=!1,xr){return xr&&xr.from<=gr&&xr.more&&this.setHeight(xr.heights[xr.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class HeightMapText extends HeightMapBlock{constructor(hr,gr){super(hr,gr,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(hr,gr,vr,xr){return new BlockInfo(xr,this.length,vr,this.height,this.breaks)}replace(hr,gr,vr){let xr=vr[0];return vr.length==1&&(xr instanceof HeightMapText||xr instanceof HeightMapGap&&xr.flags&4)&&Math.abs(this.length-xr.length)<10?(xr instanceof HeightMapGap?xr=new HeightMapText(xr.length,this.height):xr.height=this.height,this.outdated||(xr.outdated=!1),xr):HeightMap.of(vr)}updateHeight(hr,gr=0,vr=!1,xr){return xr&&xr.from<=gr&&xr.more?this.setHeight(xr.heights[xr.index++]):(vr||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,hr.heightForLine(this.length-this.collapsed))+this.breaks*hr.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class HeightMapGap extends HeightMap{constructor(hr){super(hr,0)}heightMetrics(hr,gr){let vr=hr.doc.lineAt(gr).number,xr=hr.doc.lineAt(gr+this.length).number,Er=xr-vr+1,Cr,wr=0;if(hr.lineWrapping){let Rr=Math.min(this.height,hr.lineHeight*Er);Cr=Rr/Er,this.length>Er+1&&(wr=(this.height-Rr)/(this.length-Er-1))}else Cr=this.height/Er;return{firstLine:vr,lastLine:xr,perLine:Cr,perChar:wr}}blockAt(hr,gr,vr,xr){let{firstLine:Er,lastLine:Cr,perLine:wr,perChar:Rr}=this.heightMetrics(gr,xr);if(gr.lineWrapping){let kr=xr+(hr<gr.lineHeight?0:Math.round(Math.max(0,Math.min(1,(hr-vr)/this.height))*this.length)),Dr=gr.doc.lineAt(kr),Br=wr+Dr.length*Rr,Hr=Math.max(vr,hr-Br/2);return new BlockInfo(Dr.from,Dr.length,Hr,Br,0)}else{let kr=Math.max(0,Math.min(Cr-Er,Math.floor((hr-vr)/wr))),{from:Dr,length:Br}=gr.doc.line(Er+kr);return new BlockInfo(Dr,Br,vr+wr*kr,wr,0)}}lineAt(hr,gr,vr,xr,Er){if(gr==QueryType$1.ByHeight)return this.blockAt(hr,vr,xr,Er);if(gr==QueryType$1.ByPosNoHeight){let{from:Gr,to:qr}=vr.doc.lineAt(hr);return new BlockInfo(Gr,qr-Gr,0,0,0)}let{firstLine:Cr,perLine:wr,perChar:Rr}=this.heightMetrics(vr,Er),kr=vr.doc.lineAt(hr),Dr=wr+kr.length*Rr,Br=kr.number-Cr,Hr=xr+wr*Br+Rr*(kr.from-Er-Br);return new BlockInfo(kr.from,kr.length,Math.max(xr,Math.min(Hr,xr+this.height-Dr)),Dr,0)}forEachLine(hr,gr,vr,xr,Er,Cr){hr=Math.max(hr,Er),gr=Math.min(gr,Er+this.length);let{firstLine:wr,perLine:Rr,perChar:kr}=this.heightMetrics(vr,Er);for(let Dr=hr,Br=xr;Dr<=gr;){let Hr=vr.doc.lineAt(Dr);if(Dr==hr){let qr=Hr.number-wr;Br+=Rr*qr+kr*(hr-Er-qr)}let Gr=Rr+kr*Hr.length;Cr(new BlockInfo(Hr.from,Hr.length,Br,Gr,0)),Br+=Gr,Dr=Hr.to+1}}replace(hr,gr,vr){let xr=this.length-gr;if(xr>0){let Er=vr[vr.length-1];Er instanceof HeightMapGap?vr[vr.length-1]=new HeightMapGap(Er.length+xr):vr.push(null,new HeightMapGap(xr-1))}if(hr>0){let Er=vr[0];Er instanceof HeightMapGap?vr[0]=new HeightMapGap(hr+Er.length):vr.unshift(new HeightMapGap(hr-1),null)}return HeightMap.of(vr)}decomposeLeft(hr,gr){gr.push(new HeightMapGap(hr-1),null)}decomposeRight(hr,gr){gr.push(null,new HeightMapGap(this.length-hr-1))}updateHeight(hr,gr=0,vr=!1,xr){let Er=gr+this.length;if(xr&&xr.from<=gr+this.length&&xr.more){let Cr=[],wr=Math.max(gr,xr.from),Rr=-1;for(xr.from>gr&&Cr.push(new HeightMapGap(xr.from-gr-1).updateHeight(hr,gr));wr<=Er&&xr.more;){let Dr=hr.doc.lineAt(wr).length;Cr.length&&Cr.push(null);let Br=xr.heights[xr.index++];Rr==-1?Rr=Br:Math.abs(Br-Rr)>=Epsilon&&(Rr=-2);let Hr=new HeightMapText(Dr,Br);Hr.outdated=!1,Cr.push(Hr),wr+=Dr+1}wr<=Er&&Cr.push(null,new HeightMapGap(Er-wr).updateHeight(hr,wr));let kr=HeightMap.of(Cr);return(Rr<0||Math.abs(kr.height-this.height)>=Epsilon||Math.abs(Rr-this.heightMetrics(hr,gr).perLine)>=Epsilon)&&(heightChangeFlag=!0),replace$2(this,kr)}else(vr||this.outdated)&&(this.setHeight(hr.heightForGap(gr,gr+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class HeightMapBranch extends HeightMap{constructor(hr,gr,vr){super(hr.length+gr+vr.length,hr.height+vr.height,gr|(hr.outdated||vr.outdated?2:0)),this.left=hr,this.right=vr,this.size=hr.size+vr.size}get break(){return this.flags&1}blockAt(hr,gr,vr,xr){let Er=vr+this.left.height;return hr<Er?this.left.blockAt(hr,gr,vr,xr):this.right.blockAt(hr,gr,Er,xr+this.left.length+this.break)}lineAt(hr,gr,vr,xr,Er){let Cr=xr+this.left.height,wr=Er+this.left.length+this.break,Rr=gr==QueryType$1.ByHeight?hr<Cr:hr<wr,kr=Rr?this.left.lineAt(hr,gr,vr,xr,Er):this.right.lineAt(hr,gr,vr,Cr,wr);if(this.break||(Rr?kr.to<wr:kr.from>wr))return kr;let Dr=gr==QueryType$1.ByPosNoHeight?QueryType$1.ByPosNoHeight:QueryType$1.ByPos;return Rr?kr.join(this.right.lineAt(wr,Dr,vr,Cr,wr)):this.left.lineAt(wr,Dr,vr,xr,Er).join(kr)}forEachLine(hr,gr,vr,xr,Er,Cr){let wr=xr+this.left.height,Rr=Er+this.left.length+this.break;if(this.break)hr<Rr&&this.left.forEachLine(hr,gr,vr,xr,Er,Cr),gr>=Rr&&this.right.forEachLine(hr,gr,vr,wr,Rr,Cr);else{let kr=this.lineAt(Rr,QueryType$1.ByPos,vr,xr,Er);hr<kr.from&&this.left.forEachLine(hr,kr.from-1,vr,xr,Er,Cr),kr.to>=hr&&kr.from<=gr&&Cr(kr),gr>kr.to&&this.right.forEachLine(kr.to+1,gr,vr,wr,Rr,Cr)}}replace(hr,gr,vr){let xr=this.left.length+this.break;if(gr<xr)return this.balanced(this.left.replace(hr,gr,vr),this.right);if(hr>this.left.length)return this.balanced(this.left,this.right.replace(hr-xr,gr-xr,vr));let Er=[];hr>0&&this.decomposeLeft(hr,Er);let Cr=Er.length;for(let wr of vr)Er.push(wr);if(hr>0&&mergeGaps(Er,Cr-1),gr<this.length){let wr=Er.length;this.decomposeRight(gr,Er),mergeGaps(Er,wr)}return HeightMap.of(Er)}decomposeLeft(hr,gr){let vr=this.left.length;if(hr<=vr)return this.left.decomposeLeft(hr,gr);gr.push(this.left),this.break&&(vr++,hr>=vr&&gr.push(null)),hr>vr&&this.right.decomposeLeft(hr-vr,gr)}decomposeRight(hr,gr){let vr=this.left.length,xr=vr+this.break;if(hr>=xr)return this.right.decomposeRight(hr-xr,gr);hr<vr&&this.left.decomposeRight(hr,gr),this.break&&hr<xr&&gr.push(null),gr.push(this.right)}balanced(hr,gr){return hr.size>2*gr.size||gr.size>2*hr.size?HeightMap.of(this.break?[hr,null,gr]:[hr,gr]):(this.left=replace$2(this.left,hr),this.right=replace$2(this.right,gr),this.setHeight(hr.height+gr.height),this.outdated=hr.outdated||gr.outdated,this.size=hr.size+gr.size,this.length=hr.length+this.break+gr.length,this)}updateHeight(hr,gr=0,vr=!1,xr){let{left:Er,right:Cr}=this,wr=gr+Er.length+this.break,Rr=null;return xr&&xr.from<=gr+Er.length&&xr.more?Rr=Er=Er.updateHeight(hr,gr,vr,xr):Er.updateHeight(hr,gr,vr),xr&&xr.from<=wr+Cr.length&&xr.more?Rr=Cr=Cr.updateHeight(hr,wr,vr,xr):Cr.updateHeight(hr,wr,vr),Rr?this.balanced(Er,Cr):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function mergeGaps(mr,hr){let gr,vr;mr[hr]==null&&(gr=mr[hr-1])instanceof HeightMapGap&&(vr=mr[hr+1])instanceof HeightMapGap&&mr.splice(hr-1,3,new HeightMapGap(gr.length+1+vr.length))}const relevantWidgetHeight=5;class NodeBuilder{constructor(hr,gr){this.pos=hr,this.oracle=gr,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=hr}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(hr,gr){if(this.lineStart>-1){let vr=Math.min(gr,this.lineEnd),xr=this.nodes[this.nodes.length-1];xr instanceof HeightMapText?xr.length+=vr-this.pos:(vr>this.pos||!this.isCovered)&&this.nodes.push(new HeightMapText(vr-this.pos,-1)),this.writtenTo=vr,gr>vr&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=gr}point(hr,gr,vr){if(hr<gr||vr.heightRelevant){let xr=vr.widget?vr.widget.estimatedHeight:0,Er=vr.widget?vr.widget.lineBreaks:0;xr<0&&(xr=this.oracle.lineHeight);let Cr=gr-hr;vr.block?this.addBlock(new HeightMapBlock(Cr,xr,vr)):(Cr||Er||xr>=relevantWidgetHeight)&&this.addLineDeco(xr,Er,Cr)}else gr>hr&&this.span(hr,gr);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:hr,to:gr}=this.oracle.doc.lineAt(this.pos);this.lineStart=hr,this.lineEnd=gr,this.writtenTo<hr&&((this.writtenTo<hr-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,hr-1)),this.nodes.push(null)),this.pos>hr&&this.nodes.push(new HeightMapText(this.pos-hr,-1)),this.writtenTo=this.pos}blankContent(hr,gr){let vr=new HeightMapGap(gr-hr);return this.oracle.doc.lineAt(hr).to==gr&&(vr.flags|=4),vr}ensureLine(){this.enterLine();let hr=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(hr instanceof HeightMapText)return hr;let gr=new HeightMapText(0,-1);return this.nodes.push(gr),gr}addBlock(hr){this.enterLine();let gr=hr.deco;gr&&gr.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(hr),this.writtenTo=this.pos=this.pos+hr.length,gr&&gr.endSide>0&&(this.covering=hr)}addLineDeco(hr,gr,vr){let xr=this.ensureLine();xr.length+=vr,xr.collapsed+=vr,xr.widgetHeight=Math.max(xr.widgetHeight,hr),xr.breaks+=gr,this.writtenTo=this.pos=this.pos+vr}finish(hr){let gr=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(gr instanceof HeightMapText)&&!this.isCovered?this.nodes.push(new HeightMapText(0,-1)):(this.writtenTo<this.pos||gr==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let vr=hr;for(let xr of this.nodes)xr instanceof HeightMapText&&xr.updateHeight(this.oracle,vr),vr+=xr?xr.length:1;return this.nodes}static build(hr,gr,vr,xr){let Er=new NodeBuilder(vr,hr);return RangeSet.spans(gr,vr,xr,Er,0),Er.finish(vr)}}function heightRelevantDecoChanges(mr,hr,gr){let vr=new DecorationComparator;return RangeSet.compare(mr,hr,gr,vr,0),vr.changes}class DecorationComparator{constructor(){this.changes=[]}compareRange(){}comparePoint(hr,gr,vr,xr){(hr<gr||vr&&vr.heightRelevant||xr&&xr.heightRelevant)&&addRange(hr,gr,this.changes,5)}}function visiblePixelRange(mr,hr){let gr=mr.getBoundingClientRect(),vr=mr.ownerDocument,xr=vr.defaultView||window,Er=Math.max(0,gr.left),Cr=Math.min(xr.innerWidth,gr.right),wr=Math.max(0,gr.top),Rr=Math.min(xr.innerHeight,gr.bottom);for(let kr=mr.parentNode;kr&&kr!=vr.body;)if(kr.nodeType==1){let Dr=kr,Br=window.getComputedStyle(Dr);if((Dr.scrollHeight>Dr.clientHeight||Dr.scrollWidth>Dr.clientWidth)&&Br.overflow!="visible"){let Hr=Dr.getBoundingClientRect();Er=Math.max(Er,Hr.left),Cr=Math.min(Cr,Hr.right),wr=Math.max(wr,Hr.top),Rr=Math.min(kr==mr.parentNode?xr.innerHeight:Rr,Hr.bottom)}kr=Br.position=="absolute"||Br.position=="fixed"?Dr.offsetParent:Dr.parentNode}else if(kr.nodeType==11)kr=kr.host;else break;return{left:Er-gr.left,right:Math.max(Er,Cr)-gr.left,top:wr-(gr.top+hr),bottom:Math.max(wr,Rr)-(gr.top+hr)}}function inWindow(mr){let hr=mr.getBoundingClientRect(),gr=mr.ownerDocument.defaultView||window;return hr.left<gr.innerWidth&&hr.right>0&&hr.top<gr.innerHeight&&hr.bottom>0}function fullPixelRange(mr,hr){let gr=mr.getBoundingClientRect();return{left:0,right:gr.right-gr.left,top:hr,bottom:gr.bottom-(gr.top+hr)}}class LineGap{constructor(hr,gr,vr,xr){this.from=hr,this.to=gr,this.size=vr,this.displaySize=xr}static same(hr,gr){if(hr.length!=gr.length)return!1;for(let vr=0;vr<hr.length;vr++){let xr=hr[vr],Er=gr[vr];if(xr.from!=Er.from||xr.to!=Er.to||xr.size!=Er.size)return!1}return!0}draw(hr,gr){return Decoration.replace({widget:new LineGapWidget(this.displaySize*(gr?hr.scaleY:hr.scaleX),gr)}).range(this.from,this.to)}}class LineGapWidget extends WidgetType{constructor(hr,gr){super(),this.size=hr,this.vertical=gr}eq(hr){return hr.size==this.size&&hr.vertical==this.vertical}toDOM(){let hr=document.createElement("div");return this.vertical?hr.style.height=this.size+"px":(hr.style.width=this.size+"px",hr.style.height="2px",hr.style.display="inline-block"),hr}get estimatedHeight(){return this.vertical?this.size:-1}}class ViewState{constructor(hr){this.state=hr,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=IdScaler,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Direction.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let gr=hr.facet(contentAttributes).some(vr=>typeof vr!="function"&&vr.class=="cm-lineWrapping");this.heightOracle=new HeightOracle(gr),this.stateDeco=hr.facet(decorations).filter(vr=>typeof vr!="function"),this.heightMap=HeightMap.empty().applyChanges(this.stateDeco,Text$1.empty,this.heightOracle.setDoc(hr.doc),[new ChangedRange(0,0,0,hr.doc.length)]);for(let vr=0;vr<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());vr++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Decoration.set(this.lineGaps.map(vr=>vr.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let hr=[this.viewport],{main:gr}=this.state.selection;for(let vr=0;vr<=1;vr++){let xr=vr?gr.head:gr.anchor;if(!hr.some(({from:Er,to:Cr})=>xr>=Er&&xr<=Cr)){let{from:Er,to:Cr}=this.lineBlockAt(xr);hr.push(new Viewport$3(Er,Cr))}}return this.viewports=hr.sort((vr,xr)=>vr.from-xr.from),this.updateScaler()}updateScaler(){let hr=this.scaler;return this.scaler=this.heightMap.height<=7e6?IdScaler:new BigScaler(this.heightOracle,this.heightMap,this.viewports),hr.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,hr=>{this.viewportLines.push(scaleBlock(hr,this.scaler))})}update(hr,gr=null){this.state=hr.state;let vr=this.stateDeco;this.stateDeco=this.state.facet(decorations).filter(Dr=>typeof Dr!="function");let xr=hr.changedRanges,Er=ChangedRange.extendWithRanges(xr,heightRelevantDecoChanges(vr,this.stateDeco,hr?hr.changes:ChangeSet.empty(this.state.doc.length))),Cr=this.heightMap.height,wr=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);clearHeightChangeFlag(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,hr.startState.doc,this.heightOracle.setDoc(this.state.doc),Er),(this.heightMap.height!=Cr||heightChangeFlag)&&(hr.flags|=2),wr?(this.scrollAnchorPos=hr.changes.mapPos(wr.from,-1),this.scrollAnchorHeight=wr.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let Rr=Er.length?this.mapViewport(this.viewport,hr.changes):this.viewport;(gr&&(gr.range.head<Rr.from||gr.range.head>Rr.to)||!this.viewportIsAppropriate(Rr))&&(Rr=this.getViewport(0,gr));let kr=Rr.from!=this.viewport.from||Rr.to!=this.viewport.to;this.viewport=Rr,hr.flags|=this.updateForViewport(),(kr||!hr.changes.empty||hr.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,hr.changes))),hr.flags|=this.computeVisibleRanges(hr.changes),gr&&(this.scrollTarget=gr),!this.mustEnforceCursorAssoc&&hr.selectionSet&&hr.view.lineWrapping&&hr.state.selection.main.empty&&hr.state.selection.main.assoc&&!hr.state.facet(nativeSelectionHidden)&&(this.mustEnforceCursorAssoc=!0)}measure(hr){let gr=hr.contentDOM,vr=window.getComputedStyle(gr),xr=this.heightOracle,Er=vr.whiteSpace;this.defaultTextDirection=vr.direction=="rtl"?Direction.RTL:Direction.LTR;let Cr=this.heightOracle.mustRefreshForWrapping(Er),wr=gr.getBoundingClientRect(),Rr=Cr||this.mustMeasureContent||this.contentDOMHeight!=wr.height;this.contentDOMHeight=wr.height,this.mustMeasureContent=!1;let kr=0,Dr=0;if(wr.width&&wr.height){let{scaleX:yn,scaleY:gn}=getScale(gr,wr);(yn>.005&&Math.abs(this.scaleX-yn)>.005||gn>.005&&Math.abs(this.scaleY-gn)>.005)&&(this.scaleX=yn,this.scaleY=gn,kr|=16,Cr=Rr=!0)}let Br=(parseInt(vr.paddingTop)||0)*this.scaleY,Hr=(parseInt(vr.paddingBottom)||0)*this.scaleY;(this.paddingTop!=Br||this.paddingBottom!=Hr)&&(this.paddingTop=Br,this.paddingBottom=Hr,kr|=18),this.editorWidth!=hr.scrollDOM.clientWidth&&(xr.lineWrapping&&(Rr=!0),this.editorWidth=hr.scrollDOM.clientWidth,kr|=16);let Gr=hr.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=Gr&&(this.scrollAnchorHeight=-1,this.scrollTop=Gr),this.scrolledToBottom=isScrolledToBottom(hr.scrollDOM);let qr=(this.printing?fullPixelRange:visiblePixelRange)(gr,this.paddingTop),zr=qr.top-this.pixelViewport.top,Qr=qr.bottom-this.pixelViewport.bottom;this.pixelViewport=qr;let sn=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(sn!=this.inView&&(this.inView=sn,sn&&(Rr=!0)),!this.inView&&!this.scrollTarget&&!inWindow(hr.dom))return 0;let hn=wr.width;if((this.contentDOMWidth!=hn||this.editorHeight!=hr.scrollDOM.clientHeight)&&(this.contentDOMWidth=wr.width,this.editorHeight=hr.scrollDOM.clientHeight,kr|=16),Rr){let yn=hr.docView.measureVisibleLineHeights(this.viewport);if(xr.mustRefreshForHeights(yn)&&(Cr=!0),Cr||xr.lineWrapping&&Math.abs(hn-this.contentDOMWidth)>xr.charWidth){let{lineHeight:gn,charWidth:bn,textHeight:xn}=hr.docView.measureTextSize();Cr=gn>0&&xr.refresh(Er,gn,bn,xn,hn/bn,yn),Cr&&(hr.docView.minWidth=0,kr|=16)}zr>0&&Qr>0?Dr=Math.max(zr,Qr):zr<0&&Qr<0&&(Dr=Math.min(zr,Qr)),clearHeightChangeFlag();for(let gn of this.viewports){let bn=gn.from==this.viewport.from?yn:hr.docView.measureVisibleLineHeights(gn);this.heightMap=(Cr?HeightMap.empty().applyChanges(this.stateDeco,Text$1.empty,this.heightOracle,[new ChangedRange(0,0,0,hr.state.doc.length)]):this.heightMap).updateHeight(xr,0,Cr,new MeasuredHeights(gn.from,bn))}heightChangeFlag&&(kr|=2)}let vn=!this.viewportIsAppropriate(this.viewport,Dr)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return vn&&(kr&2&&(kr|=this.updateScaler()),this.viewport=this.getViewport(Dr,this.scrollTarget),kr|=this.updateForViewport()),(kr&2||vn)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(Cr?[]:this.lineGaps,hr)),kr|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,hr.docView.enforceCursorAssoc()),kr}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(hr,gr){let vr=.5-Math.max(-.5,Math.min(.5,hr/1e3/2)),xr=this.heightMap,Er=this.heightOracle,{visibleTop:Cr,visibleBottom:wr}=this,Rr=new Viewport$3(xr.lineAt(Cr-vr*1e3,QueryType$1.ByHeight,Er,0,0).from,xr.lineAt(wr+(1-vr)*1e3,QueryType$1.ByHeight,Er,0,0).to);if(gr){let{head:kr}=gr.range;if(kr<Rr.from||kr>Rr.to){let Dr=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),Br=xr.lineAt(kr,QueryType$1.ByPos,Er,0,0),Hr;gr.y=="center"?Hr=(Br.top+Br.bottom)/2-Dr/2:gr.y=="start"||gr.y=="nearest"&&kr<Rr.from?Hr=Br.top:Hr=Br.bottom-Dr,Rr=new Viewport$3(xr.lineAt(Hr-1e3/2,QueryType$1.ByHeight,Er,0,0).from,xr.lineAt(Hr+Dr+1e3/2,QueryType$1.ByHeight,Er,0,0).to)}}return Rr}mapViewport(hr,gr){let vr=gr.mapPos(hr.from,-1),xr=gr.mapPos(hr.to,1);return new Viewport$3(this.heightMap.lineAt(vr,QueryType$1.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(xr,QueryType$1.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:hr,to:gr},vr=0){if(!this.inView)return!0;let{top:xr}=this.heightMap.lineAt(hr,QueryType$1.ByPos,this.heightOracle,0,0),{bottom:Er}=this.heightMap.lineAt(gr,QueryType$1.ByPos,this.heightOracle,0,0),{visibleTop:Cr,visibleBottom:wr}=this;return(hr==0||xr<=Cr-Math.max(10,Math.min(-vr,250)))&&(gr==this.state.doc.length||Er>=wr+Math.max(10,Math.min(vr,250)))&&xr>Cr-2*1e3&&Er<wr+2*1e3}mapLineGaps(hr,gr){if(!hr.length||gr.empty)return hr;let vr=[];for(let xr of hr)gr.touchesRange(xr.from,xr.to)||vr.push(new LineGap(gr.mapPos(xr.from),gr.mapPos(xr.to),xr.size,xr.displaySize));return vr}ensureLineGaps(hr,gr){let vr=this.heightOracle.lineWrapping,xr=vr?1e4:2e3,Er=xr>>1,Cr=xr<<1;if(this.defaultTextDirection!=Direction.LTR&&!vr)return[];let wr=[],Rr=(Dr,Br,Hr,Gr)=>{if(Br-Dr<Er)return;let qr=this.state.selection.main,zr=[qr.from];qr.empty||zr.push(qr.to);for(let sn of zr)if(sn>Dr&&sn<Br){Rr(Dr,sn-10,Hr,Gr),Rr(sn+10,Br,Hr,Gr);return}let Qr=find(hr,sn=>sn.from>=Hr.from&&sn.to<=Hr.to&&Math.abs(sn.from-Dr)<Er&&Math.abs(sn.to-Br)<Er&&!zr.some(hn=>sn.from<hn&&sn.to>hn));if(!Qr){if(Br<Hr.to&&gr&&vr&&gr.visibleRanges.some(vn=>vn.from<=Br&&vn.to>=Br)){let vn=gr.moveToLineBoundary(EditorSelection.cursor(Br),!1,!0).head;vn>Dr&&(Br=vn)}let sn=this.gapSize(Hr,Dr,Br,Gr),hn=vr||sn<2e6?sn:2e6;Qr=new LineGap(Dr,Br,sn,hn)}wr.push(Qr)},kr=Dr=>{if(Dr.length<Cr||Dr.type!=BlockType.Text)return;let Br=lineStructure(Dr.from,Dr.to,this.stateDeco);if(Br.total<Cr)return;let Hr=this.scrollTarget?this.scrollTarget.range.head:null,Gr,qr;if(vr){let zr=xr/this.heightOracle.lineLength*this.heightOracle.lineHeight,Qr,sn;if(Hr!=null){let hn=findFraction(Br,Hr),vn=((this.visibleBottom-this.visibleTop)/2+zr)/Dr.height;Qr=hn-vn,sn=hn+vn}else Qr=(this.visibleTop-Dr.top-zr)/Dr.height,sn=(this.visibleBottom-Dr.top+zr)/Dr.height;Gr=findPosition(Br,Qr),qr=findPosition(Br,sn)}else{let zr=Br.total*this.heightOracle.charWidth,Qr=xr*this.heightOracle.charWidth,sn=0;if(zr>2e6)for(let bn of hr)bn.from>=Dr.from&&bn.from<Dr.to&&bn.size!=bn.displaySize&&bn.from*this.heightOracle.charWidth+sn<this.pixelViewport.left&&(sn=bn.size-bn.displaySize);let hn=this.pixelViewport.left+sn,vn=this.pixelViewport.right+sn,yn,gn;if(Hr!=null){let bn=findFraction(Br,Hr),xn=((vn-hn)/2+Qr)/zr;yn=bn-xn,gn=bn+xn}else yn=(hn-Qr)/zr,gn=(vn+Qr)/zr;Gr=findPosition(Br,yn),qr=findPosition(Br,gn)}Gr>Dr.from&&Rr(Dr.from,Gr,Dr,Br),qr<Dr.to&&Rr(qr,Dr.to,Dr,Br)};for(let Dr of this.viewportLines)Array.isArray(Dr.type)?Dr.type.forEach(kr):kr(Dr);return wr}gapSize(hr,gr,vr,xr){let Er=findFraction(xr,vr)-findFraction(xr,gr);return this.heightOracle.lineWrapping?hr.height*Er:xr.total*this.heightOracle.charWidth*Er}updateLineGaps(hr){LineGap.same(hr,this.lineGaps)||(this.lineGaps=hr,this.lineGapDeco=Decoration.set(hr.map(gr=>gr.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(hr){let gr=this.stateDeco;this.lineGaps.length&&(gr=gr.concat(this.lineGapDeco));let vr=[];RangeSet.spans(gr,this.viewport.from,this.viewport.to,{span(Er,Cr){vr.push({from:Er,to:Cr})},point(){}},20);let xr=0;if(vr.length!=this.visibleRanges.length)xr=12;else for(let Er=0;Er<vr.length&&!(xr&8);Er++){let Cr=this.visibleRanges[Er],wr=vr[Er];(Cr.from!=wr.from||Cr.to!=wr.to)&&(xr|=4,hr&&hr.mapPos(Cr.from,-1)==wr.from&&hr.mapPos(Cr.to,1)==wr.to||(xr|=8))}return this.visibleRanges=vr,xr}lineBlockAt(hr){return hr>=this.viewport.from&&hr<=this.viewport.to&&this.viewportLines.find(gr=>gr.from<=hr&&gr.to>=hr)||scaleBlock(this.heightMap.lineAt(hr,QueryType$1.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(hr){return hr>=this.viewportLines[0].top&&hr<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(gr=>gr.top<=hr&&gr.bottom>=hr)||scaleBlock(this.heightMap.lineAt(this.scaler.fromDOM(hr),QueryType$1.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(hr){let gr=this.lineBlockAtHeight(hr+8);return gr.from>=this.viewport.from||this.viewportLines[0].top-hr>200?gr:this.viewportLines[0]}elementAtHeight(hr){return scaleBlock(this.heightMap.blockAt(this.scaler.fromDOM(hr),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}let Viewport$3=class{constructor(hr,gr){this.from=hr,this.to=gr}};function lineStructure(mr,hr,gr){let vr=[],xr=mr,Er=0;return RangeSet.spans(gr,mr,hr,{span(){},point(Cr,wr){Cr>xr&&(vr.push({from:xr,to:Cr}),Er+=Cr-xr),xr=wr}},20),xr<hr&&(vr.push({from:xr,to:hr}),Er+=hr-xr),{total:Er,ranges:vr}}function findPosition({total:mr,ranges:hr},gr){if(gr<=0)return hr[0].from;if(gr>=1)return hr[hr.length-1].to;let vr=Math.floor(mr*gr);for(let xr=0;;xr++){let{from:Er,to:Cr}=hr[xr],wr=Cr-Er;if(vr<=wr)return Er+vr;vr-=wr}}function findFraction(mr,hr){let gr=0;for(let{from:vr,to:xr}of mr.ranges){if(hr<=xr){gr+=hr-vr;break}gr+=xr-vr}return gr/mr.total}function find(mr,hr){for(let gr of mr)if(hr(gr))return gr}const IdScaler={toDOM(mr){return mr},fromDOM(mr){return mr},scale:1,eq(mr){return mr==this}};class BigScaler{constructor(hr,gr,vr){let xr=0,Er=0,Cr=0;this.viewports=vr.map(({from:wr,to:Rr})=>{let kr=gr.lineAt(wr,QueryType$1.ByPos,hr,0,0).top,Dr=gr.lineAt(Rr,QueryType$1.ByPos,hr,0,0).bottom;return xr+=Dr-kr,{from:wr,to:Rr,top:kr,bottom:Dr,domTop:0,domBottom:0}}),this.scale=(7e6-xr)/(gr.height-xr);for(let wr of this.viewports)wr.domTop=Cr+(wr.top-Er)*this.scale,Cr=wr.domBottom=wr.domTop+(wr.bottom-wr.top),Er=wr.bottom}toDOM(hr){for(let gr=0,vr=0,xr=0;;gr++){let Er=gr<this.viewports.length?this.viewports[gr]:null;if(!Er||hr<Er.top)return xr+(hr-vr)*this.scale;if(hr<=Er.bottom)return Er.domTop+(hr-Er.top);vr=Er.bottom,xr=Er.domBottom}}fromDOM(hr){for(let gr=0,vr=0,xr=0;;gr++){let Er=gr<this.viewports.length?this.viewports[gr]:null;if(!Er||hr<Er.domTop)return vr+(hr-xr)/this.scale;if(hr<=Er.domBottom)return Er.top+(hr-Er.domTop);vr=Er.bottom,xr=Er.domBottom}}eq(hr){return hr instanceof BigScaler?this.scale==hr.scale&&this.viewports.length==hr.viewports.length&&this.viewports.every((gr,vr)=>gr.from==hr.viewports[vr].from&&gr.to==hr.viewports[vr].to):!1}}function scaleBlock(mr,hr){if(hr.scale==1)return mr;let gr=hr.toDOM(mr.top),vr=hr.toDOM(mr.bottom);return new BlockInfo(mr.from,mr.length,gr,vr-gr,Array.isArray(mr._content)?mr._content.map(xr=>scaleBlock(xr,hr)):mr._content)}const theme=Facet.define({combine:mr=>mr.join(" ")}),darkTheme=Facet.define({combine:mr=>mr.indexOf(!0)>-1}),baseThemeID=StyleModule.newName(),baseLightID=StyleModule.newName(),baseDarkID=StyleModule.newName(),lightDarkIDs={"&light":"."+baseLightID,"&dark":"."+baseDarkID};function buildTheme(mr,hr,gr){return new StyleModule(hr,{finish(vr){return/&/.test(vr)?vr.replace(/&\w*/,xr=>{if(xr=="&")return mr;if(!gr||!gr[xr])throw new RangeError(`Unsupported selector: ${xr}`);return gr[xr]}):mr+" "+vr}})}const baseTheme$1$3=buildTheme("."+baseThemeID,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},lightDarkIDs),observeOptions={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},useCharData=browser.ie&&browser.ie_version<=11;class DOMObserver{constructor(hr){this.view=hr,this.active=!1,this.editContext=null,this.selectionRange=new DOMSelectionState,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=hr.contentDOM,this.observer=new MutationObserver(gr=>{for(let vr of gr)this.queue.push(vr);(browser.ie&&browser.ie_version<=11||browser.ios&&hr.composing)&&gr.some(vr=>vr.type=="childList"&&vr.removedNodes.length||vr.type=="characterData"&&vr.oldValue.length>vr.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&hr.constructor.EDIT_CONTEXT!==!1&&!(browser.chrome&&browser.chrome_version<126)&&(this.editContext=new EditContextManager(hr),hr.state.facet(editable)&&(hr.contentDOM.editContext=this.editContext.editContext)),useCharData&&(this.onCharData=gr=>{this.queue.push({target:gr.target,type:"characterData",oldValue:gr.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var gr;((gr=this.view.docView)===null||gr===void 0?void 0:gr.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(hr.scrollDOM)),this.addWindowListeners(this.win=hr.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(gr=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),gr.length>0&&gr[gr.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(gr=>{gr.length>0&&gr[gr.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(hr){this.view.inputState.runHandlers("scroll",hr),this.intersecting&&this.view.measure()}onScroll(hr){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(hr)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(hr){(hr.type=="change"||!hr.type)&&!hr.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(hr){if(this.gapIntersection&&(hr.length!=this.gaps.length||this.gaps.some((gr,vr)=>gr!=hr[vr]))){this.gapIntersection.disconnect();for(let gr of hr)this.gapIntersection.observe(gr);this.gaps=hr}}onSelectionChange(hr){let gr=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:vr}=this,xr=this.selectionRange;if(vr.state.facet(editable)?vr.root.activeElement!=this.dom:!hasSelection(this.dom,xr))return;let Er=xr.anchorNode&&vr.docView.nearest(xr.anchorNode);if(Er&&Er.ignoreEvent(hr)){gr||(this.selectionChanged=!1);return}(browser.ie&&browser.ie_version<=11||browser.android&&browser.chrome)&&!vr.state.selection.main.empty&&xr.focusNode&&isEquivalentPosition(xr.focusNode,xr.focusOffset,xr.anchorNode,xr.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:hr}=this,gr=getSelection(hr.root);if(!gr)return!1;let vr=browser.safari&&hr.root.nodeType==11&&hr.root.activeElement==this.dom&&safariSelectionRangeHack(this.view,gr)||gr;if(!vr||this.selectionRange.eq(vr))return!1;let xr=hasSelection(this.dom,vr);return xr&&!this.selectionChanged&&hr.inputState.lastFocusTime>Date.now()-200&&hr.inputState.lastTouchTime<Date.now()-300&&atElementStart(this.dom,vr)?(this.view.inputState.lastFocusTime=0,hr.docView.updateSelection(),!1):(this.selectionRange.setRange(vr),xr&&(this.selectionChanged=!0),!0)}setSelectionRange(hr,gr){this.selectionRange.set(hr.node,hr.offset,gr.node,gr.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let hr=0,gr=null;for(let vr=this.dom;vr;)if(vr.nodeType==1)!gr&&hr<this.scrollTargets.length&&this.scrollTargets[hr]==vr?hr++:gr||(gr=this.scrollTargets.slice(0,hr)),gr&&gr.push(vr),vr=vr.assignedSlot||vr.parentNode;else if(vr.nodeType==11)vr=vr.host;else break;if(hr<this.scrollTargets.length&&!gr&&(gr=this.scrollTargets.slice(0,hr)),gr){for(let vr of this.scrollTargets)vr.removeEventListener("scroll",this.onScroll);for(let vr of this.scrollTargets=gr)vr.addEventListener("scroll",this.onScroll)}}ignore(hr){if(!this.active)return hr();try{return this.stop(),hr()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,observeOptions),useCharData&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),useCharData&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(hr,gr){var vr;if(!this.delayedAndroidKey){let xr=()=>{let Er=this.delayedAndroidKey;Er&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=Er.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&Er.force&&dispatchKey(this.dom,Er.key,Er.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(xr)}(!this.delayedAndroidKey||hr=="Enter")&&(this.delayedAndroidKey={key:hr,keyCode:gr,force:this.lastChange<Date.now()-50||!!(!((vr=this.delayedAndroidKey)===null||vr===void 0)&&vr.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let hr of this.observer.takeRecords())this.queue.push(hr);return this.queue}processRecords(){let hr=this.pendingRecords();hr.length&&(this.queue=[]);let gr=-1,vr=-1,xr=!1;for(let Er of hr){let Cr=this.readMutation(Er);Cr&&(Cr.typeOver&&(xr=!0),gr==-1?{from:gr,to:vr}=Cr:(gr=Math.min(Cr.from,gr),vr=Math.max(Cr.to,vr)))}return{from:gr,to:vr,typeOver:xr}}readChange(){let{from:hr,to:gr,typeOver:vr}=this.processRecords(),xr=this.selectionChanged&&hasSelection(this.dom,this.selectionRange);if(hr<0&&!xr)return null;hr>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let Er=new DOMChange(this.view,hr,gr,vr);return this.view.docView.domChanged={newSel:Er.newSel?Er.newSel.main:null},Er}flush(hr=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;hr&&this.readSelectionRange();let gr=this.readChange();if(!gr)return this.view.requestMeasure(),!1;let vr=this.view.state,xr=applyDOMChange(this.view,gr);return this.view.state==vr&&(gr.domChanged||gr.newSel&&!gr.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),xr}readMutation(hr){let gr=this.view.docView.nearest(hr.target);if(!gr||gr.ignoreMutation(hr))return null;if(gr.markDirty(hr.type=="attributes"),hr.type=="attributes"&&(gr.flags|=4),hr.type=="childList"){let vr=findChild(gr,hr.previousSibling||hr.target.previousSibling,-1),xr=findChild(gr,hr.nextSibling||hr.target.nextSibling,1);return{from:vr?gr.posAfter(vr):gr.posAtStart,to:xr?gr.posBefore(xr):gr.posAtEnd,typeOver:!1}}else return hr.type=="characterData"?{from:gr.posAtStart,to:gr.posAtEnd,typeOver:hr.target.nodeValue==hr.oldValue}:null}setWindow(hr){hr!=this.win&&(this.removeWindowListeners(this.win),this.win=hr,this.addWindowListeners(this.win))}addWindowListeners(hr){hr.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):hr.addEventListener("beforeprint",this.onPrint),hr.addEventListener("scroll",this.onScroll),hr.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(hr){hr.removeEventListener("scroll",this.onScroll),hr.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):hr.removeEventListener("beforeprint",this.onPrint),hr.document.removeEventListener("selectionchange",this.onSelectionChange)}update(hr){this.editContext&&(this.editContext.update(hr),hr.startState.facet(editable)!=hr.state.facet(editable)&&(hr.view.contentDOM.editContext=hr.state.facet(editable)?this.editContext.editContext:null))}destroy(){var hr,gr,vr;this.stop(),(hr=this.intersection)===null||hr===void 0||hr.disconnect(),(gr=this.gapIntersection)===null||gr===void 0||gr.disconnect(),(vr=this.resizeScroll)===null||vr===void 0||vr.disconnect();for(let xr of this.scrollTargets)xr.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function findChild(mr,hr,gr){for(;hr;){let vr=ContentView.get(hr);if(vr&&vr.parent==mr)return vr;let xr=hr.parentNode;hr=xr!=mr.dom?xr:gr>0?hr.nextSibling:hr.previousSibling}return null}function buildSelectionRangeFromRange(mr,hr){let gr=hr.startContainer,vr=hr.startOffset,xr=hr.endContainer,Er=hr.endOffset,Cr=mr.docView.domAtPos(mr.state.selection.main.anchor);return isEquivalentPosition(Cr.node,Cr.offset,xr,Er)&&([gr,vr,xr,Er]=[xr,Er,gr,vr]),{anchorNode:gr,anchorOffset:vr,focusNode:xr,focusOffset:Er}}function safariSelectionRangeHack(mr,hr){if(hr.getComposedRanges){let xr=hr.getComposedRanges(mr.root)[0];if(xr)return buildSelectionRangeFromRange(mr,xr)}let gr=null;function vr(xr){xr.preventDefault(),xr.stopImmediatePropagation(),gr=xr.getTargetRanges()[0]}return mr.contentDOM.addEventListener("beforeinput",vr,!0),mr.dom.ownerDocument.execCommand("indent"),mr.contentDOM.removeEventListener("beforeinput",vr,!0),gr?buildSelectionRangeFromRange(mr,gr):null}class EditContextManager{constructor(hr){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(hr.state);let gr=this.editContext=new window.EditContext({text:hr.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,hr.state.selection.main.anchor))),selectionEnd:this.toContextPos(hr.state.selection.main.head)});this.handlers.textupdate=vr=>{let xr=hr.state.selection.main,{anchor:Er,head:Cr}=xr,wr=this.toEditorPos(vr.updateRangeStart),Rr=this.toEditorPos(vr.updateRangeEnd);hr.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:vr.updateRangeStart,editorBase:wr,drifted:!1});let kr={from:wr,to:Rr,insert:Text$1.of(vr.text.split(`
`))};if(kr.from==this.from&&Er<this.from?kr.from=Er:kr.to==this.to&&Er>this.to&&(kr.to=Er),kr.from==kr.to&&!kr.insert.length){let Dr=EditorSelection.single(this.toEditorPos(vr.selectionStart),this.toEditorPos(vr.selectionEnd));Dr.main.eq(xr)||hr.dispatch({selection:Dr,userEvent:"select"});return}if((browser.mac||browser.android)&&kr.from==Cr-1&&/^\. ?$/.test(vr.text)&&hr.contentDOM.getAttribute("autocorrect")=="off"&&(kr={from:wr,to:Rr,insert:Text$1.of([vr.text.replace("."," ")])}),this.pendingContextChange=kr,!hr.state.readOnly){let Dr=this.to-this.from+(kr.to-kr.from+kr.insert.length);applyDOMChangeInner(hr,kr,EditorSelection.single(this.toEditorPos(vr.selectionStart,Dr),this.toEditorPos(vr.selectionEnd,Dr)))}this.pendingContextChange&&(this.revertPending(hr.state),this.setSelection(hr.state))},this.handlers.characterboundsupdate=vr=>{let xr=[],Er=null;for(let Cr=this.toEditorPos(vr.rangeStart),wr=this.toEditorPos(vr.rangeEnd);Cr<wr;Cr++){let Rr=hr.coordsForChar(Cr);Er=Rr&&new DOMRect(Rr.left,Rr.top,Rr.right-Rr.left,Rr.bottom-Rr.top)||Er||new DOMRect,xr.push(Er)}gr.updateCharacterBounds(vr.rangeStart,xr)},this.handlers.textformatupdate=vr=>{let xr=[];for(let Er of vr.getTextFormats()){let Cr=Er.underlineStyle,wr=Er.underlineThickness;if(Cr!="None"&&wr!="None"){let Rr=this.toEditorPos(Er.rangeStart),kr=this.toEditorPos(Er.rangeEnd);if(Rr<kr){let Dr=`text-decoration: underline ${Cr=="Dashed"?"dashed ":Cr=="Squiggle"?"wavy ":""}${wr=="Thin"?1:2}px`;xr.push(Decoration.mark({attributes:{style:Dr}}).range(Rr,kr))}}}hr.dispatch({effects:setEditContextFormatting.of(Decoration.set(xr))})},this.handlers.compositionstart=()=>{hr.inputState.composing<0&&(hr.inputState.composing=0,hr.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(hr.inputState.composing=-1,hr.inputState.compositionFirstChange=null,this.composing){let{drifted:vr}=this.composing;this.composing=null,vr&&this.reset(hr.state)}};for(let vr in this.handlers)gr.addEventListener(vr,this.handlers[vr]);this.measureReq={read:vr=>{this.editContext.updateControlBounds(vr.contentDOM.getBoundingClientRect());let xr=getSelection(vr.root);xr&&xr.rangeCount&&this.editContext.updateSelectionBounds(xr.getRangeAt(0).getBoundingClientRect())}}}applyEdits(hr){let gr=0,vr=!1,xr=this.pendingContextChange;return hr.changes.iterChanges((Er,Cr,wr,Rr,kr)=>{if(vr)return;let Dr=kr.length-(Cr-Er);if(xr&&Cr>=xr.to)if(xr.from==Er&&xr.to==Cr&&xr.insert.eq(kr)){xr=this.pendingContextChange=null,gr+=Dr,this.to+=Dr;return}else xr=null,this.revertPending(hr.state);if(Er+=gr,Cr+=gr,Cr<=this.from)this.from+=Dr,this.to+=Dr;else if(Er<this.to){if(Er<this.from||Cr>this.to||this.to-this.from+kr.length>3e4){vr=!0;return}this.editContext.updateText(this.toContextPos(Er),this.toContextPos(Cr),kr.toString()),this.to+=Dr}gr+=Dr}),xr&&!vr&&this.revertPending(hr.state),!vr}update(hr){let gr=this.pendingContextChange;this.composing&&(this.composing.drifted||hr.transactions.some(vr=>!vr.isUserEvent("input.type")&&vr.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=hr.changes.mapPos(this.composing.editorBase)):!this.applyEdits(hr)||!this.rangeIsValid(hr.state)?(this.pendingContextChange=null,this.reset(hr.state)):(hr.docChanged||hr.selectionSet||gr)&&this.setSelection(hr.state),(hr.geometryChanged||hr.docChanged||hr.selectionSet)&&hr.view.requestMeasure(this.measureReq)}resetRange(hr){let{head:gr}=hr.selection.main;this.from=Math.max(0,gr-1e4),this.to=Math.min(hr.doc.length,gr+1e4)}reset(hr){this.resetRange(hr),this.editContext.updateText(0,this.editContext.text.length,hr.doc.sliceString(this.from,this.to)),this.setSelection(hr)}revertPending(hr){let gr=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(gr.from),this.toContextPos(gr.from+gr.insert.length),hr.doc.sliceString(gr.from,gr.to))}setSelection(hr){let{main:gr}=hr.selection,vr=this.toContextPos(Math.max(this.from,Math.min(this.to,gr.anchor))),xr=this.toContextPos(gr.head);(this.editContext.selectionStart!=vr||this.editContext.selectionEnd!=xr)&&this.editContext.updateSelection(vr,xr)}rangeIsValid(hr){let{head:gr}=hr.selection.main;return!(this.from>0&&gr-this.from<500||this.to<hr.doc.length&&this.to-gr<500||this.to-this.from>1e4*3)}toEditorPos(hr,gr=this.to-this.from){hr=Math.min(hr,gr);let vr=this.composing;return vr&&vr.drifted?vr.editorBase+(hr-vr.contextBase):hr+this.from}toContextPos(hr){let gr=this.composing;return gr&&gr.drifted?gr.contextBase+(hr-gr.editorBase):hr-this.from}destroy(){for(let hr in this.handlers)this.editContext.removeEventListener(hr,this.handlers[hr])}}class EditorView{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(hr={}){var gr;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),hr.parent&&hr.parent.appendChild(this.dom);let{dispatch:vr}=hr;this.dispatchTransactions=hr.dispatchTransactions||vr&&(xr=>xr.forEach(Er=>vr(Er,this)))||(xr=>this.update(xr)),this.dispatch=this.dispatch.bind(this),this._root=hr.root||getRoot(hr.parent)||document,this.viewState=new ViewState(hr.state||EditorState.create(hr)),hr.scrollTo&&hr.scrollTo.is(scrollIntoView$2)&&(this.viewState.scrollTarget=hr.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(viewPlugin).map(xr=>new PluginInstance(xr));for(let xr of this.plugins)xr.update(this);this.observer=new DOMObserver(this),this.inputState=new InputState(this),this.inputState.ensureHandlers(this.plugins),this.docView=new DocView(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((gr=document.fonts)===null||gr===void 0)&&gr.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...hr){let gr=hr.length==1&&hr[0]instanceof Transaction?hr:hr.length==1&&Array.isArray(hr[0])?hr[0]:[this.state.update(...hr)];this.dispatchTransactions(gr,this)}update(hr){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let gr=!1,vr=!1,xr,Er=this.state;for(let Hr of hr){if(Hr.startState!=Er)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");Er=Hr.state}if(this.destroyed){this.viewState.state=Er;return}let Cr=this.hasFocus,wr=0,Rr=null;hr.some(Hr=>Hr.annotation(isFocusChange))?(this.inputState.notifiedFocused=Cr,wr=1):Cr!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=Cr,Rr=focusChangeTransaction(Er,Cr),Rr||(wr=1));let kr=this.observer.delayedAndroidKey,Dr=null;if(kr?(this.observer.clearDelayedAndroidKey(),Dr=this.observer.readChange(),(Dr&&!this.state.doc.eq(Er.doc)||!this.state.selection.eq(Er.selection))&&(Dr=null)):this.observer.clear(),Er.facet(EditorState.phrases)!=this.state.facet(EditorState.phrases))return this.setState(Er);xr=ViewUpdate.create(this,Er,hr),xr.flags|=wr;let Br=this.viewState.scrollTarget;try{this.updateState=2;for(let Hr of hr){if(Br&&(Br=Br.map(Hr.changes)),Hr.scrollIntoView){let{main:Gr}=Hr.state.selection;Br=new ScrollTarget(Gr.empty?Gr:EditorSelection.cursor(Gr.head,Gr.head>Gr.anchor?-1:1))}for(let Gr of Hr.effects)Gr.is(scrollIntoView$2)&&(Br=Gr.value.clip(this.state))}this.viewState.update(xr,Br),this.bidiCache=CachedOrder.update(this.bidiCache,xr.changes),xr.empty||(this.updatePlugins(xr),this.inputState.update(xr)),gr=this.docView.update(xr),this.state.facet(styleModule)!=this.styleModules&&this.mountStyles(),vr=this.updateAttrs(),this.showAnnouncements(hr),this.docView.updateSelection(gr,hr.some(Hr=>Hr.isUserEvent("select.pointer")))}finally{this.updateState=0}if(xr.startState.facet(theme)!=xr.state.facet(theme)&&(this.viewState.mustMeasureContent=!0),(gr||vr||Br||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),gr&&this.docViewUpdate(),!xr.empty)for(let Hr of this.state.facet(updateListener))try{Hr(xr)}catch(Gr){logException(this.state,Gr,"update listener")}(Rr||Dr)&&Promise.resolve().then(()=>{Rr&&this.state==Rr.startState&&this.dispatch(Rr),Dr&&!applyDOMChange(this,Dr)&&kr.force&&dispatchKey(this.contentDOM,kr.key,kr.keyCode)})}setState(hr){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=hr;return}this.updateState=2;let gr=this.hasFocus;try{for(let vr of this.plugins)vr.destroy(this);this.viewState=new ViewState(hr),this.plugins=hr.facet(viewPlugin).map(vr=>new PluginInstance(vr)),this.pluginMap.clear();for(let vr of this.plugins)vr.update(this);this.docView.destroy(),this.docView=new DocView(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}gr&&this.focus(),this.requestMeasure()}updatePlugins(hr){let gr=hr.startState.facet(viewPlugin),vr=hr.state.facet(viewPlugin);if(gr!=vr){let xr=[];for(let Er of vr){let Cr=gr.indexOf(Er);if(Cr<0)xr.push(new PluginInstance(Er));else{let wr=this.plugins[Cr];wr.mustUpdate=hr,xr.push(wr)}}for(let Er of this.plugins)Er.mustUpdate!=hr&&Er.destroy(this);this.plugins=xr,this.pluginMap.clear()}else for(let xr of this.plugins)xr.mustUpdate=hr;for(let xr=0;xr<this.plugins.length;xr++)this.plugins[xr].update(this);gr!=vr&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let hr of this.plugins){let gr=hr.value;if(gr&&gr.docViewUpdate)try{gr.docViewUpdate(this)}catch(vr){logException(this.state,vr,"doc view update listener")}}}measure(hr=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,hr&&this.observer.forceFlush();let gr=null,vr=this.scrollDOM,xr=vr.scrollTop*this.scaleY,{scrollAnchorPos:Er,scrollAnchorHeight:Cr}=this.viewState;Math.abs(xr-this.viewState.scrollTop)>1&&(Cr=-1),this.viewState.scrollAnchorHeight=-1;try{for(let wr=0;;wr++){if(Cr<0)if(isScrolledToBottom(vr))Er=-1,Cr=this.viewState.heightMap.height;else{let Gr=this.viewState.scrollAnchorAt(xr);Er=Gr.from,Cr=Gr.top}this.updateState=1;let Rr=this.viewState.measure(this);if(!Rr&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(wr>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let kr=[];Rr&4||([this.measureRequests,kr]=[kr,this.measureRequests]);let Dr=kr.map(Gr=>{try{return Gr.read(this)}catch(qr){return logException(this.state,qr),BadMeasure}}),Br=ViewUpdate.create(this,this.state,[]),Hr=!1;Br.flags|=Rr,gr?gr.flags|=Rr:gr=Br,this.updateState=2,Br.empty||(this.updatePlugins(Br),this.inputState.update(Br),this.updateAttrs(),Hr=this.docView.update(Br),Hr&&this.docViewUpdate());for(let Gr=0;Gr<kr.length;Gr++)if(Dr[Gr]!=BadMeasure)try{let qr=kr[Gr];qr.write&&qr.write(Dr[Gr],this)}catch(qr){logException(this.state,qr)}if(Hr&&this.docView.updateSelection(!0),!Br.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,Cr=-1;continue}else{let qr=(Er<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(Er).top)-Cr;if(qr>1||qr<-1){xr=xr+qr,vr.scrollTop=xr/this.scaleY,Cr=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(gr&&!gr.empty)for(let wr of this.state.facet(updateListener))wr(gr)}get themeClasses(){return baseThemeID+" "+(this.state.facet(darkTheme)?baseDarkID:baseLightID)+" "+this.state.facet(theme)}updateAttrs(){let hr=attrsFromFacet(this,editorAttributes,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),gr={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(editable)?"true":"false",class:"cm-content",style:`${browser.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(gr["aria-readonly"]="true"),attrsFromFacet(this,contentAttributes,gr);let vr=this.observer.ignore(()=>{let xr=updateAttrs(this.contentDOM,this.contentAttrs,gr),Er=updateAttrs(this.dom,this.editorAttrs,hr);return xr||Er});return this.editorAttrs=hr,this.contentAttrs=gr,vr}showAnnouncements(hr){let gr=!0;for(let vr of hr)for(let xr of vr.effects)if(xr.is(EditorView.announce)){gr&&(this.announceDOM.textContent=""),gr=!1;let Er=this.announceDOM.appendChild(document.createElement("div"));Er.textContent=xr.value}}mountStyles(){this.styleModules=this.state.facet(styleModule);let hr=this.state.facet(EditorView.cspNonce);StyleModule.mount(this.root,this.styleModules.concat(baseTheme$1$3).reverse(),hr?{nonce:hr}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(hr){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),hr){if(this.measureRequests.indexOf(hr)>-1)return;if(hr.key!=null){for(let gr=0;gr<this.measureRequests.length;gr++)if(this.measureRequests[gr].key===hr.key){this.measureRequests[gr]=hr;return}}this.measureRequests.push(hr)}}plugin(hr){let gr=this.pluginMap.get(hr);return(gr===void 0||gr&&gr.spec!=hr)&&this.pluginMap.set(hr,gr=this.plugins.find(vr=>vr.spec==hr)||null),gr&&gr.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(hr){return this.readMeasured(),this.viewState.elementAtHeight(hr)}lineBlockAtHeight(hr){return this.readMeasured(),this.viewState.lineBlockAtHeight(hr)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(hr){return this.viewState.lineBlockAt(hr)}get contentHeight(){return this.viewState.contentHeight}moveByChar(hr,gr,vr){return skipAtoms(this,hr,moveByChar(this,hr,gr,vr))}moveByGroup(hr,gr){return skipAtoms(this,hr,moveByChar(this,hr,gr,vr=>byGroup(this,hr.head,vr)))}visualLineSide(hr,gr){let vr=this.bidiSpans(hr),xr=this.textDirectionAt(hr.from),Er=vr[gr?vr.length-1:0];return EditorSelection.cursor(Er.side(gr,xr)+hr.from,Er.forward(!gr,xr)?1:-1)}moveToLineBoundary(hr,gr,vr=!0){return moveToLineBoundary(this,hr,gr,vr)}moveVertically(hr,gr,vr){return skipAtoms(this,hr,moveVertically(this,hr,gr,vr))}domAtPos(hr){return this.docView.domAtPos(hr)}posAtDOM(hr,gr=0){return this.docView.posFromDOM(hr,gr)}posAtCoords(hr,gr=!0){return this.readMeasured(),posAtCoords(this,hr,gr)}coordsAtPos(hr,gr=1){this.readMeasured();let vr=this.docView.coordsAt(hr,gr);if(!vr||vr.left==vr.right)return vr;let xr=this.state.doc.lineAt(hr),Er=this.bidiSpans(xr),Cr=Er[BidiSpan.find(Er,hr-xr.from,-1,gr)];return flattenRect(vr,Cr.dir==Direction.LTR==gr>0)}coordsForChar(hr){return this.readMeasured(),this.docView.coordsForChar(hr)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(hr){return!this.state.facet(perLineTextDirection)||hr<this.viewport.from||hr>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(hr))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(hr){if(hr.length>MaxBidiLine)return trivialOrder(hr.length);let gr=this.textDirectionAt(hr.from),vr;for(let Er of this.bidiCache)if(Er.from==hr.from&&Er.dir==gr&&(Er.fresh||isolatesEq(Er.isolates,vr=getIsolatedRanges(this,hr))))return Er.order;vr||(vr=getIsolatedRanges(this,hr));let xr=computeOrder(hr.text,gr,vr);return this.bidiCache.push(new CachedOrder(hr.from,hr.to,gr,vr,!0,xr)),xr}get hasFocus(){var hr;return(this.dom.ownerDocument.hasFocus()||browser.safari&&((hr=this.inputState)===null||hr===void 0?void 0:hr.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{focusPreventScroll(this.contentDOM),this.docView.updateSelection()})}setRoot(hr){this._root!=hr&&(this._root=hr,this.observer.setWindow((hr.nodeType==9?hr:hr.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let hr of this.plugins)hr.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(hr,gr={}){return scrollIntoView$2.of(new ScrollTarget(typeof hr=="number"?EditorSelection.cursor(hr):hr,gr.y,gr.x,gr.yMargin,gr.xMargin))}scrollSnapshot(){let{scrollTop:hr,scrollLeft:gr}=this.scrollDOM,vr=this.viewState.scrollAnchorAt(hr);return scrollIntoView$2.of(new ScrollTarget(EditorSelection.cursor(vr.from),"start","start",vr.top-hr,gr,!0))}setTabFocusMode(hr){hr==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof hr=="boolean"?this.inputState.tabFocusMode=hr?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+hr)}static domEventHandlers(hr){return ViewPlugin.define(()=>({}),{eventHandlers:hr})}static domEventObservers(hr){return ViewPlugin.define(()=>({}),{eventObservers:hr})}static theme(hr,gr){let vr=StyleModule.newName(),xr=[theme.of(vr),styleModule.of(buildTheme(`.${vr}`,hr))];return gr&&gr.dark&&xr.push(darkTheme.of(!0)),xr}static baseTheme(hr){return Prec.lowest(styleModule.of(buildTheme("."+baseThemeID,hr,lightDarkIDs)))}static findFromDOM(hr){var gr;let vr=hr.querySelector(".cm-content"),xr=vr&&ContentView.get(vr)||ContentView.get(hr);return((gr=xr?.rootView)===null||gr===void 0?void 0:gr.view)||null}}EditorView.styleModule=styleModule;EditorView.inputHandler=inputHandler$1;EditorView.clipboardInputFilter=clipboardInputFilter;EditorView.clipboardOutputFilter=clipboardOutputFilter;EditorView.scrollHandler=scrollHandler;EditorView.focusChangeEffect=focusChangeEffect;EditorView.perLineTextDirection=perLineTextDirection;EditorView.exceptionSink=exceptionSink;EditorView.updateListener=updateListener;EditorView.editable=editable;EditorView.mouseSelectionStyle=mouseSelectionStyle;EditorView.dragMovesSelection=dragMovesSelection$1;EditorView.clickAddsSelectionRange=clickAddsSelectionRange;EditorView.decorations=decorations;EditorView.outerDecorations=outerDecorations;EditorView.atomicRanges=atomicRanges;EditorView.bidiIsolatedRanges=bidiIsolatedRanges;EditorView.scrollMargins=scrollMargins;EditorView.darkTheme=darkTheme;EditorView.cspNonce=Facet.define({combine:mr=>mr.length?mr[0]:""});EditorView.contentAttributes=contentAttributes;EditorView.editorAttributes=editorAttributes;EditorView.lineWrapping=EditorView.contentAttributes.of({class:"cm-lineWrapping"});EditorView.announce=StateEffect.define();const MaxBidiLine=4096,BadMeasure={};class CachedOrder{constructor(hr,gr,vr,xr,Er,Cr){this.from=hr,this.to=gr,this.dir=vr,this.isolates=xr,this.fresh=Er,this.order=Cr}static update(hr,gr){if(gr.empty&&!hr.some(Er=>Er.fresh))return hr;let vr=[],xr=hr.length?hr[hr.length-1].dir:Direction.LTR;for(let Er=Math.max(0,hr.length-10);Er<hr.length;Er++){let Cr=hr[Er];Cr.dir==xr&&!gr.touchesRange(Cr.from,Cr.to)&&vr.push(new CachedOrder(gr.mapPos(Cr.from,1),gr.mapPos(Cr.to,-1),Cr.dir,Cr.isolates,!1,Cr.order))}return vr}}function attrsFromFacet(mr,hr,gr){for(let vr=mr.state.facet(hr),xr=vr.length-1;xr>=0;xr--){let Er=vr[xr],Cr=typeof Er=="function"?Er(mr):Er;Cr&&combineAttrs(Cr,gr)}return gr}const currentPlatform=browser.mac?"mac":browser.windows?"win":browser.linux?"linux":"key";function normalizeKeyName(mr,hr){const gr=mr.split(/-(?!$)/);let vr=gr[gr.length-1];vr=="Space"&&(vr=" ");let xr,Er,Cr,wr;for(let Rr=0;Rr<gr.length-1;++Rr){const kr=gr[Rr];if(/^(cmd|meta|m)$/i.test(kr))wr=!0;else if(/^a(lt)?$/i.test(kr))xr=!0;else if(/^(c|ctrl|control)$/i.test(kr))Er=!0;else if(/^s(hift)?$/i.test(kr))Cr=!0;else if(/^mod$/i.test(kr))hr=="mac"?wr=!0:Er=!0;else throw new Error("Unrecognized modifier name: "+kr)}return xr&&(vr="Alt-"+vr),Er&&(vr="Ctrl-"+vr),wr&&(vr="Meta-"+vr),Cr&&(vr="Shift-"+vr),vr}function modifiers(mr,hr,gr){return hr.altKey&&(mr="Alt-"+mr),hr.ctrlKey&&(mr="Ctrl-"+mr),hr.metaKey&&(mr="Meta-"+mr),gr!==!1&&hr.shiftKey&&(mr="Shift-"+mr),mr}const handleKeyEvents=Prec.default(EditorView.domEventHandlers({keydown(mr,hr){return runHandlers(getKeymap(hr.state),mr,hr,"editor")}})),keymap=Facet.define({enables:handleKeyEvents}),Keymaps=new WeakMap;function getKeymap(mr){let hr=mr.facet(keymap),gr=Keymaps.get(hr);return gr||Keymaps.set(hr,gr=buildKeymap(hr.reduce((vr,xr)=>vr.concat(xr),[]))),gr}function runScopeHandlers(mr,hr,gr){return runHandlers(getKeymap(mr.state),hr,mr,gr)}let storedPrefix=null;const PrefixTimeout=4e3;function buildKeymap(mr,hr=currentPlatform){let gr=Object.create(null),vr=Object.create(null),xr=(Cr,wr)=>{let Rr=vr[Cr];if(Rr==null)vr[Cr]=wr;else if(Rr!=wr)throw new Error("Key binding "+Cr+" is used both as a regular binding and as a multi-stroke prefix")},Er=(Cr,wr,Rr,kr,Dr)=>{var Br,Hr;let Gr=gr[Cr]||(gr[Cr]=Object.create(null)),qr=wr.split(/ (?!$)/).map(sn=>normalizeKeyName(sn,hr));for(let sn=1;sn<qr.length;sn++){let hn=qr.slice(0,sn).join(" ");xr(hn,!0),Gr[hn]||(Gr[hn]={preventDefault:!0,stopPropagation:!1,run:[vn=>{let yn=storedPrefix={view:vn,prefix:hn,scope:Cr};return setTimeout(()=>{storedPrefix==yn&&(storedPrefix=null)},PrefixTimeout),!0}]})}let zr=qr.join(" ");xr(zr,!1);let Qr=Gr[zr]||(Gr[zr]={preventDefault:!1,stopPropagation:!1,run:((Hr=(Br=Gr._any)===null||Br===void 0?void 0:Br.run)===null||Hr===void 0?void 0:Hr.slice())||[]});Rr&&Qr.run.push(Rr),kr&&(Qr.preventDefault=!0),Dr&&(Qr.stopPropagation=!0)};for(let Cr of mr){let wr=Cr.scope?Cr.scope.split(" "):["editor"];if(Cr.any)for(let kr of wr){let Dr=gr[kr]||(gr[kr]=Object.create(null));Dr._any||(Dr._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:Br}=Cr;for(let Hr in Dr)Dr[Hr].run.push(Gr=>Br(Gr,currentKeyEvent))}let Rr=Cr[hr]||Cr.key;if(Rr)for(let kr of wr)Er(kr,Rr,Cr.run,Cr.preventDefault,Cr.stopPropagation),Cr.shift&&Er(kr,"Shift-"+Rr,Cr.shift,Cr.preventDefault,Cr.stopPropagation)}return gr}let currentKeyEvent=null;function runHandlers(mr,hr,gr,vr){currentKeyEvent=hr;let xr=keyName(hr),Er=codePointAt(xr,0),Cr=codePointSize(Er)==xr.length&&xr!=" ",wr="",Rr=!1,kr=!1,Dr=!1;storedPrefix&&storedPrefix.view==gr&&storedPrefix.scope==vr&&(wr=storedPrefix.prefix+" ",modifierCodes.indexOf(hr.keyCode)<0&&(kr=!0,storedPrefix=null));let Br=new Set,Hr=Qr=>{if(Qr){for(let sn of Qr.run)if(!Br.has(sn)&&(Br.add(sn),sn(gr)))return Qr.stopPropagation&&(Dr=!0),!0;Qr.preventDefault&&(Qr.stopPropagation&&(Dr=!0),kr=!0)}return!1},Gr=mr[vr],qr,zr;return Gr&&(Hr(Gr[wr+modifiers(xr,hr,!Cr)])?Rr=!0:Cr&&(hr.altKey||hr.metaKey||hr.ctrlKey)&&!(browser.windows&&hr.ctrlKey&&hr.altKey)&&(qr=base[hr.keyCode])&&qr!=xr?(Hr(Gr[wr+modifiers(qr,hr,!0)])||hr.shiftKey&&(zr=shift[hr.keyCode])!=xr&&zr!=qr&&Hr(Gr[wr+modifiers(zr,hr,!1)]))&&(Rr=!0):Cr&&hr.shiftKey&&Hr(Gr[wr+modifiers(xr,hr,!0)])&&(Rr=!0),!Rr&&Hr(Gr._any)&&(Rr=!0)),kr&&(Rr=!0),Rr&&Dr&&hr.stopPropagation(),currentKeyEvent=null,Rr}class RectangleMarker{constructor(hr,gr,vr,xr,Er){this.className=hr,this.left=gr,this.top=vr,this.width=xr,this.height=Er}draw(){let hr=document.createElement("div");return hr.className=this.className,this.adjust(hr),hr}update(hr,gr){return gr.className!=this.className?!1:(this.adjust(hr),!0)}adjust(hr){hr.style.left=this.left+"px",hr.style.top=this.top+"px",this.width!=null&&(hr.style.width=this.width+"px"),hr.style.height=this.height+"px"}eq(hr){return this.left==hr.left&&this.top==hr.top&&this.width==hr.width&&this.height==hr.height&&this.className==hr.className}static forRange(hr,gr,vr){if(vr.empty){let xr=hr.coordsAtPos(vr.head,vr.assoc||1);if(!xr)return[];let Er=getBase(hr);return[new RectangleMarker(gr,xr.left-Er.left,xr.top-Er.top,null,xr.bottom-xr.top)]}else return rectanglesForRange(hr,gr,vr)}}function getBase(mr){let hr=mr.scrollDOM.getBoundingClientRect();return{left:(mr.textDirection==Direction.LTR?hr.left:hr.right-mr.scrollDOM.clientWidth*mr.scaleX)-mr.scrollDOM.scrollLeft*mr.scaleX,top:hr.top-mr.scrollDOM.scrollTop*mr.scaleY}}function wrappedLine(mr,hr,gr,vr){let xr=mr.coordsAtPos(hr,gr*2);if(!xr)return vr;let Er=mr.dom.getBoundingClientRect(),Cr=(xr.top+xr.bottom)/2,wr=mr.posAtCoords({x:Er.left+1,y:Cr}),Rr=mr.posAtCoords({x:Er.right-1,y:Cr});return wr==null||Rr==null?vr:{from:Math.max(vr.from,Math.min(wr,Rr)),to:Math.min(vr.to,Math.max(wr,Rr))}}function rectanglesForRange(mr,hr,gr){if(gr.to<=mr.viewport.from||gr.from>=mr.viewport.to)return[];let vr=Math.max(gr.from,mr.viewport.from),xr=Math.min(gr.to,mr.viewport.to),Er=mr.textDirection==Direction.LTR,Cr=mr.contentDOM,wr=Cr.getBoundingClientRect(),Rr=getBase(mr),kr=Cr.querySelector(".cm-line"),Dr=kr&&window.getComputedStyle(kr),Br=wr.left+(Dr?parseInt(Dr.paddingLeft)+Math.min(0,parseInt(Dr.textIndent)):0),Hr=wr.right-(Dr?parseInt(Dr.paddingRight):0),Gr=blockAt(mr,vr),qr=blockAt(mr,xr),zr=Gr.type==BlockType.Text?Gr:null,Qr=qr.type==BlockType.Text?qr:null;if(zr&&(mr.lineWrapping||Gr.widgetLineBreaks)&&(zr=wrappedLine(mr,vr,1,zr)),Qr&&(mr.lineWrapping||qr.widgetLineBreaks)&&(Qr=wrappedLine(mr,xr,-1,Qr)),zr&&Qr&&zr.from==Qr.from&&zr.to==Qr.to)return hn(vn(gr.from,gr.to,zr));{let gn=zr?vn(gr.from,null,zr):yn(Gr,!1),bn=Qr?vn(null,gr.to,Qr):yn(qr,!0),xn=[];return(zr||Gr).to<(Qr||qr).from-(zr&&Qr?1:0)||Gr.widgetLineBreaks>1&&gn.bottom+mr.defaultLineHeight/2<bn.top?xn.push(sn(Br,gn.bottom,Hr,bn.top)):gn.bottom<bn.top&&mr.elementAtHeight((gn.bottom+bn.top)/2).type==BlockType.Text&&(gn.bottom=bn.top=(gn.bottom+bn.top)/2),hn(gn).concat(xn).concat(hn(bn))}function sn(gn,bn,xn,$n){return new RectangleMarker(hr,gn-Rr.left,bn-Rr.top,xn-gn,$n-bn)}function hn({top:gn,bottom:bn,horizontal:xn}){let $n=[];for(let Sn=0;Sn<xn.length;Sn+=2)$n.push(sn(xn[Sn],gn,xn[Sn+1],bn));return $n}function vn(gn,bn,xn){let $n=1e9,Sn=-1e9,Cn=[];function Rn(Hn,Gn,qn,On,wn){let _n=mr.coordsAtPos(Hn,Hn==xn.to?-2:2),Tn=mr.coordsAtPos(qn,qn==xn.from?2:-2);!_n||!Tn||($n=Math.min(_n.top,Tn.top,$n),Sn=Math.max(_n.bottom,Tn.bottom,Sn),wn==Direction.LTR?Cn.push(Er&&Gn?Br:_n.left,Er&&On?Hr:Tn.right):Cn.push(!Er&&On?Br:Tn.left,!Er&&Gn?Hr:_n.right))}let Bn=gn??xn.from,Fn=bn??xn.to;for(let Hn of mr.visibleRanges)if(Hn.to>Bn&&Hn.from<Fn)for(let Gn=Math.max(Hn.from,Bn),qn=Math.min(Hn.to,Fn);;){let On=mr.state.doc.lineAt(Gn);for(let wn of mr.bidiSpans(On)){let _n=wn.from+On.from,Tn=wn.to+On.from;if(_n>=qn)break;Tn>Gn&&Rn(Math.max(_n,Gn),gn==null&&_n<=Bn,Math.min(Tn,qn),bn==null&&Tn>=Fn,wn.dir)}if(Gn=On.to+1,Gn>=qn)break}return Cn.length==0&&Rn(Bn,gn==null,Fn,bn==null,mr.textDirection),{top:$n,bottom:Sn,horizontal:Cn}}function yn(gn,bn){let xn=wr.top+(bn?gn.top:gn.bottom);return{top:xn,bottom:xn,horizontal:[]}}}function sameMarker(mr,hr){return mr.constructor==hr.constructor&&mr.eq(hr)}class LayerView{constructor(hr,gr){this.view=hr,this.layer=gr,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=hr.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),gr.above&&this.dom.classList.add("cm-layer-above"),gr.class&&this.dom.classList.add(gr.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(hr.state),hr.requestMeasure(this.measureReq),gr.mount&&gr.mount(this.dom,hr)}update(hr){hr.startState.facet(layerOrder)!=hr.state.facet(layerOrder)&&this.setOrder(hr.state),(this.layer.update(hr,this.dom)||hr.geometryChanged)&&(this.scale(),hr.view.requestMeasure(this.measureReq))}docViewUpdate(hr){this.layer.updateOnDocViewUpdate!==!1&&hr.requestMeasure(this.measureReq)}setOrder(hr){let gr=0,vr=hr.facet(layerOrder);for(;gr<vr.length&&vr[gr]!=this.layer;)gr++;this.dom.style.zIndex=String((this.layer.above?150:-1)-gr)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:hr,scaleY:gr}=this.view;(hr!=this.scaleX||gr!=this.scaleY)&&(this.scaleX=hr,this.scaleY=gr,this.dom.style.transform=`scale(${1/hr}, ${1/gr})`)}draw(hr){if(hr.length!=this.drawn.length||hr.some((gr,vr)=>!sameMarker(gr,this.drawn[vr]))){let gr=this.dom.firstChild,vr=0;for(let xr of hr)xr.update&&gr&&xr.constructor&&this.drawn[vr].constructor&&xr.update(gr,this.drawn[vr])?(gr=gr.nextSibling,vr++):this.dom.insertBefore(xr.draw(),gr);for(;gr;){let xr=gr.nextSibling;gr.remove(),gr=xr}this.drawn=hr}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const layerOrder=Facet.define();function layer(mr){return[ViewPlugin.define(hr=>new LayerView(hr,mr)),layerOrder.of(mr)]}const CanHidePrimary=!(browser.ios&&browser.webkit&&browser.webkit_version<534),selectionConfig=Facet.define({combine(mr){return combineConfig(mr,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(hr,gr)=>Math.min(hr,gr),drawRangeCursor:(hr,gr)=>hr||gr})}});function drawSelection(mr={}){return[selectionConfig.of(mr),cursorLayer,selectionLayer,hideNativeSelection,nativeSelectionHidden.of(!0)]}function configChanged(mr){return mr.startState.facet(selectionConfig)!=mr.state.facet(selectionConfig)}const cursorLayer=layer({above:!0,markers(mr){let{state:hr}=mr,gr=hr.facet(selectionConfig),vr=[];for(let xr of hr.selection.ranges){let Er=xr==hr.selection.main;if(xr.empty?!Er||CanHidePrimary:gr.drawRangeCursor){let Cr=Er?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",wr=xr.empty?xr:EditorSelection.cursor(xr.head,xr.head>xr.anchor?-1:1);for(let Rr of RectangleMarker.forRange(mr,Cr,wr))vr.push(Rr)}}return vr},update(mr,hr){mr.transactions.some(vr=>vr.selection)&&(hr.style.animationName=hr.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let gr=configChanged(mr);return gr&&setBlinkRate(mr.state,hr),mr.docChanged||mr.selectionSet||gr},mount(mr,hr){setBlinkRate(hr.state,mr)},class:"cm-cursorLayer"});function setBlinkRate(mr,hr){hr.style.animationDuration=mr.facet(selectionConfig).cursorBlinkRate+"ms"}const selectionLayer=layer({above:!1,markers(mr){return mr.state.selection.ranges.map(hr=>hr.empty?[]:RectangleMarker.forRange(mr,"cm-selectionBackground",hr)).reduce((hr,gr)=>hr.concat(gr))},update(mr,hr){return mr.docChanged||mr.selectionSet||mr.viewportChanged||configChanged(mr)},class:"cm-selectionLayer"}),themeSpec={".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"}},".cm-content":{"& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}};CanHidePrimary&&(themeSpec[".cm-line"].caretColor=themeSpec[".cm-content"].caretColor="transparent !important");const hideNativeSelection=Prec.highest(EditorView.theme(themeSpec)),setDropCursorPos=StateEffect.define({map(mr,hr){return mr==null?null:hr.mapPos(mr)}}),dropCursorPos=StateField.define({create(){return null},update(mr,hr){return mr!=null&&(mr=hr.changes.mapPos(mr)),hr.effects.reduce((gr,vr)=>vr.is(setDropCursorPos)?vr.value:gr,mr)}}),drawDropCursor=ViewPlugin.fromClass(class{constructor(mr){this.view=mr,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(mr){var hr;let gr=mr.state.field(dropCursorPos);gr==null?this.cursor!=null&&((hr=this.cursor)===null||hr===void 0||hr.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(mr.startState.field(dropCursorPos)!=gr||mr.docChanged||mr.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:mr}=this,hr=mr.state.field(dropCursorPos),gr=hr!=null&&mr.coordsAtPos(hr);if(!gr)return null;let vr=mr.scrollDOM.getBoundingClientRect();return{left:gr.left-vr.left+mr.scrollDOM.scrollLeft*mr.scaleX,top:gr.top-vr.top+mr.scrollDOM.scrollTop*mr.scaleY,height:gr.bottom-gr.top}}drawCursor(mr){if(this.cursor){let{scaleX:hr,scaleY:gr}=this.view;mr?(this.cursor.style.left=mr.left/hr+"px",this.cursor.style.top=mr.top/gr+"px",this.cursor.style.height=mr.height/gr+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(mr){this.view.state.field(dropCursorPos)!=mr&&this.view.dispatch({effects:setDropCursorPos.of(mr)})}},{eventObservers:{dragover(mr){this.setDropPos(this.view.posAtCoords({x:mr.clientX,y:mr.clientY}))},dragleave(mr){(mr.target==this.view.contentDOM||!this.view.contentDOM.contains(mr.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function dropCursor(){return[dropCursorPos,drawDropCursor]}function iterMatches(mr,hr,gr,vr,xr){hr.lastIndex=0;for(let Er=mr.iterRange(gr,vr),Cr=gr,wr;!Er.next().done;Cr+=Er.value.length)if(!Er.lineBreak)for(;wr=hr.exec(Er.value);)xr(Cr+wr.index,wr)}function matchRanges(mr,hr){let gr=mr.visibleRanges;if(gr.length==1&&gr[0].from==mr.viewport.from&&gr[0].to==mr.viewport.to)return gr;let vr=[];for(let{from:xr,to:Er}of gr)xr=Math.max(mr.state.doc.lineAt(xr).from,xr-hr),Er=Math.min(mr.state.doc.lineAt(Er).to,Er+hr),vr.length&&vr[vr.length-1].to>=xr?vr[vr.length-1].to=Er:vr.push({from:xr,to:Er});return vr}class MatchDecorator{constructor(hr){const{regexp:gr,decoration:vr,decorate:xr,boundary:Er,maxLength:Cr=1e3}=hr;if(!gr.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=gr,xr)this.addMatch=(wr,Rr,kr,Dr)=>xr(Dr,kr,kr+wr[0].length,wr,Rr);else if(typeof vr=="function")this.addMatch=(wr,Rr,kr,Dr)=>{let Br=vr(wr,Rr,kr);Br&&Dr(kr,kr+wr[0].length,Br)};else if(vr)this.addMatch=(wr,Rr,kr,Dr)=>Dr(kr,kr+wr[0].length,vr);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=Er,this.maxLength=Cr}createDeco(hr){let gr=new RangeSetBuilder,vr=gr.add.bind(gr);for(let{from:xr,to:Er}of matchRanges(hr,this.maxLength))iterMatches(hr.state.doc,this.regexp,xr,Er,(Cr,wr)=>this.addMatch(wr,hr,Cr,vr));return gr.finish()}updateDeco(hr,gr){let vr=1e9,xr=-1;return hr.docChanged&&hr.changes.iterChanges((Er,Cr,wr,Rr)=>{Rr>=hr.view.viewport.from&&wr<=hr.view.viewport.to&&(vr=Math.min(wr,vr),xr=Math.max(Rr,xr))}),hr.viewportMoved||xr-vr>1e3?this.createDeco(hr.view):xr>-1?this.updateRange(hr.view,gr.map(hr.changes),vr,xr):gr}updateRange(hr,gr,vr,xr){for(let Er of hr.visibleRanges){let Cr=Math.max(Er.from,vr),wr=Math.min(Er.to,xr);if(wr>Cr){let Rr=hr.state.doc.lineAt(Cr),kr=Rr.to<wr?hr.state.doc.lineAt(wr):Rr,Dr=Math.max(Er.from,Rr.from),Br=Math.min(Er.to,kr.to);if(this.boundary){for(;Cr>Rr.from;Cr--)if(this.boundary.test(Rr.text[Cr-1-Rr.from])){Dr=Cr;break}for(;wr<kr.to;wr++)if(this.boundary.test(kr.text[wr-kr.from])){Br=wr;break}}let Hr=[],Gr,qr=(zr,Qr,sn)=>Hr.push(sn.range(zr,Qr));if(Rr==kr)for(this.regexp.lastIndex=Dr-Rr.from;(Gr=this.regexp.exec(Rr.text))&&Gr.index<Br-Rr.from;)this.addMatch(Gr,hr,Gr.index+Rr.from,qr);else iterMatches(hr.state.doc,this.regexp,Dr,Br,(zr,Qr)=>this.addMatch(Qr,hr,zr,qr));gr=gr.update({filterFrom:Dr,filterTo:Br,filter:(zr,Qr)=>zr<Dr||Qr>Br,add:Hr})}}return gr}}const UnicodeRegexpSupport=/x/.unicode!=null?"gu":"g",Specials=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,UnicodeRegexpSupport),Names={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let _supportsTabSize=null;function supportsTabSize(){var mr;if(_supportsTabSize==null&&typeof document<"u"&&document.body){let hr=document.body.style;_supportsTabSize=((mr=hr.tabSize)!==null&&mr!==void 0?mr:hr.MozTabSize)!=null}return _supportsTabSize||!1}const specialCharConfig=Facet.define({combine(mr){let hr=combineConfig(mr,{render:null,specialChars:Specials,addSpecialChars:null});return(hr.replaceTabs=!supportsTabSize())&&(hr.specialChars=new RegExp("	|"+hr.specialChars.source,UnicodeRegexpSupport)),hr.addSpecialChars&&(hr.specialChars=new RegExp(hr.specialChars.source+"|"+hr.addSpecialChars.source,UnicodeRegexpSupport)),hr}});function highlightSpecialChars(mr={}){return[specialCharConfig.of(mr),specialCharPlugin()]}let _plugin=null;function specialCharPlugin(){return _plugin||(_plugin=ViewPlugin.fromClass(class{constructor(mr){this.view=mr,this.decorations=Decoration.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(mr.state.facet(specialCharConfig)),this.decorations=this.decorator.createDeco(mr)}makeDecorator(mr){return new MatchDecorator({regexp:mr.specialChars,decoration:(hr,gr,vr)=>{let{doc:xr}=gr.state,Er=codePointAt(hr[0],0);if(Er==9){let Cr=xr.lineAt(vr),wr=gr.state.tabSize,Rr=countColumn(Cr.text,wr,vr-Cr.from);return Decoration.replace({widget:new TabWidget((wr-Rr%wr)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[Er]||(this.decorationCache[Er]=Decoration.replace({widget:new SpecialCharWidget(mr,Er)}))},boundary:mr.replaceTabs?void 0:/[^]/})}update(mr){let hr=mr.state.facet(specialCharConfig);mr.startState.facet(specialCharConfig)!=hr?(this.decorator=this.makeDecorator(hr),this.decorations=this.decorator.createDeco(mr.view)):this.decorations=this.decorator.updateDeco(mr,this.decorations)}},{decorations:mr=>mr.decorations}))}const DefaultPlaceholder="•";function placeholder$1(mr){return mr>=32?DefaultPlaceholder:mr==10?"␤":String.fromCharCode(9216+mr)}class SpecialCharWidget extends WidgetType{constructor(hr,gr){super(),this.options=hr,this.code=gr}eq(hr){return hr.code==this.code}toDOM(hr){let gr=placeholder$1(this.code),vr=hr.state.phrase("Control character")+" "+(Names[this.code]||"0x"+this.code.toString(16)),xr=this.options.render&&this.options.render(this.code,vr,gr);if(xr)return xr;let Er=document.createElement("span");return Er.textContent=gr,Er.title=vr,Er.setAttribute("aria-label",vr),Er.className="cm-specialChar",Er}ignoreEvent(){return!1}}class TabWidget extends WidgetType{constructor(hr){super(),this.width=hr}eq(hr){return hr.width==this.width}toDOM(){let hr=document.createElement("span");return hr.textContent="	",hr.className="cm-tab",hr.style.width=this.width+"px",hr}ignoreEvent(){return!1}}function highlightActiveLine(){return activeLineHighlighter}const lineDeco=Decoration.line({class:"cm-activeLine"}),activeLineHighlighter=ViewPlugin.fromClass(class{constructor(mr){this.decorations=this.getDeco(mr)}update(mr){(mr.docChanged||mr.selectionSet)&&(this.decorations=this.getDeco(mr.view))}getDeco(mr){let hr=-1,gr=[];for(let vr of mr.state.selection.ranges){let xr=mr.lineBlockAt(vr.head);xr.from>hr&&(gr.push(lineDeco.range(xr.from)),hr=xr.from)}return Decoration.set(gr)}},{decorations:mr=>mr.decorations});let Placeholder$2=class extends WidgetType{constructor(hr){super(),this.content=hr}toDOM(hr){let gr=document.createElement("span");return gr.className="cm-placeholder",gr.style.pointerEvents="none",gr.appendChild(typeof this.content=="string"?document.createTextNode(this.content):typeof this.content=="function"?this.content(hr):this.content.cloneNode(!0)),typeof this.content=="string"?gr.setAttribute("aria-label","placeholder "+this.content):gr.setAttribute("aria-hidden","true"),gr}coordsAt(hr){let gr=hr.firstChild?clientRectsFor(hr.firstChild):[];if(!gr.length)return null;let vr=window.getComputedStyle(hr.parentNode),xr=flattenRect(gr[0],vr.direction!="rtl"),Er=parseInt(vr.lineHeight);return xr.bottom-xr.top>Er*1.5?{left:xr.left,right:xr.right,top:xr.top,bottom:xr.top+Er}:xr}ignoreEvent(){return!1}};function placeholder$2(mr){return ViewPlugin.fromClass(class{constructor(hr){this.view=hr,this.placeholder=mr?Decoration.set([Decoration.widget({widget:new Placeholder$2(mr),side:1}).range(0)]):Decoration.none}get decorations(){return this.view.state.doc.length?Decoration.none:this.placeholder}},{decorations:hr=>hr.decorations})}const MaxOff=2e3;function rectangleFor(mr,hr,gr){let vr=Math.min(hr.line,gr.line),xr=Math.max(hr.line,gr.line),Er=[];if(hr.off>MaxOff||gr.off>MaxOff||hr.col<0||gr.col<0){let Cr=Math.min(hr.off,gr.off),wr=Math.max(hr.off,gr.off);for(let Rr=vr;Rr<=xr;Rr++){let kr=mr.doc.line(Rr);kr.length<=wr&&Er.push(EditorSelection.range(kr.from+Cr,kr.to+wr))}}else{let Cr=Math.min(hr.col,gr.col),wr=Math.max(hr.col,gr.col);for(let Rr=vr;Rr<=xr;Rr++){let kr=mr.doc.line(Rr),Dr=findColumn(kr.text,Cr,mr.tabSize,!0);if(Dr<0)Er.push(EditorSelection.cursor(kr.to));else{let Br=findColumn(kr.text,wr,mr.tabSize);Er.push(EditorSelection.range(kr.from+Dr,kr.from+Br))}}}return Er}function absoluteColumn(mr,hr){let gr=mr.coordsAtPos(mr.viewport.from);return gr?Math.round(Math.abs((gr.left-hr)/mr.defaultCharacterWidth)):-1}function getPos(mr,hr){let gr=mr.posAtCoords({x:hr.clientX,y:hr.clientY},!1),vr=mr.state.doc.lineAt(gr),xr=gr-vr.from,Er=xr>MaxOff?-1:xr==vr.length?absoluteColumn(mr,hr.clientX):countColumn(vr.text,mr.state.tabSize,gr-vr.from);return{line:vr.number,col:Er,off:xr}}function rectangleSelectionStyle(mr,hr){let gr=getPos(mr,hr),vr=mr.state.selection;return gr?{update(xr){if(xr.docChanged){let Er=xr.changes.mapPos(xr.startState.doc.line(gr.line).from),Cr=xr.state.doc.lineAt(Er);gr={line:Cr.number,col:gr.col,off:Math.min(gr.off,Cr.length)},vr=vr.map(xr.changes)}},get(xr,Er,Cr){let wr=getPos(mr,xr);if(!wr)return vr;let Rr=rectangleFor(mr.state,gr,wr);return Rr.length?Cr?EditorSelection.create(Rr.concat(vr.ranges)):EditorSelection.create(Rr):vr}}:null}function rectangularSelection(mr){let hr=gr=>gr.altKey&&gr.button==0;return EditorView.mouseSelectionStyle.of((gr,vr)=>hr(vr)?rectangleSelectionStyle(gr,vr):null)}const keys$7={Alt:[18,mr=>!!mr.altKey],Control:[17,mr=>!!mr.ctrlKey],Shift:[16,mr=>!!mr.shiftKey],Meta:[91,mr=>!!mr.metaKey]},showCrosshair={style:"cursor: crosshair"};function crosshairCursor(mr={}){let[hr,gr]=keys$7[mr.key||"Alt"],vr=ViewPlugin.fromClass(class{constructor(xr){this.view=xr,this.isDown=!1}set(xr){this.isDown!=xr&&(this.isDown=xr,this.view.update([]))}},{eventObservers:{keydown(xr){this.set(xr.keyCode==hr||gr(xr))},keyup(xr){(xr.keyCode==hr||!gr(xr))&&this.set(!1)},mousemove(xr){this.set(gr(xr))}}});return[vr,EditorView.contentAttributes.of(xr=>{var Er;return!((Er=xr.plugin(vr))===null||Er===void 0)&&Er.isDown?showCrosshair:null})]}const Outside="-10000px";class TooltipViewManager{constructor(hr,gr,vr,xr){this.facet=gr,this.createTooltipView=vr,this.removeTooltipView=xr,this.input=hr.state.facet(gr),this.tooltips=this.input.filter(Cr=>Cr);let Er=null;this.tooltipViews=this.tooltips.map(Cr=>Er=vr(Cr,Er))}update(hr,gr){var vr;let xr=hr.state.facet(this.facet),Er=xr.filter(Rr=>Rr);if(xr===this.input){for(let Rr of this.tooltipViews)Rr.update&&Rr.update(hr);return!1}let Cr=[],wr=gr?[]:null;for(let Rr=0;Rr<Er.length;Rr++){let kr=Er[Rr],Dr=-1;if(kr){for(let Br=0;Br<this.tooltips.length;Br++){let Hr=this.tooltips[Br];Hr&&Hr.create==kr.create&&(Dr=Br)}if(Dr<0)Cr[Rr]=this.createTooltipView(kr,Rr?Cr[Rr-1]:null),wr&&(wr[Rr]=!!kr.above);else{let Br=Cr[Rr]=this.tooltipViews[Dr];wr&&(wr[Rr]=gr[Dr]),Br.update&&Br.update(hr)}}}for(let Rr of this.tooltipViews)Cr.indexOf(Rr)<0&&(this.removeTooltipView(Rr),(vr=Rr.destroy)===null||vr===void 0||vr.call(Rr));return gr&&(wr.forEach((Rr,kr)=>gr[kr]=Rr),gr.length=wr.length),this.input=xr,this.tooltips=Er,this.tooltipViews=Cr,!0}}function windowSpace(mr){let{win:hr}=mr;return{top:0,left:0,bottom:hr.innerHeight,right:hr.innerWidth}}const tooltipConfig=Facet.define({combine:mr=>{var hr,gr,vr;return{position:browser.ios?"absolute":((hr=mr.find(xr=>xr.position))===null||hr===void 0?void 0:hr.position)||"fixed",parent:((gr=mr.find(xr=>xr.parent))===null||gr===void 0?void 0:gr.parent)||null,tooltipSpace:((vr=mr.find(xr=>xr.tooltipSpace))===null||vr===void 0?void 0:vr.tooltipSpace)||windowSpace}}}),knownHeight=new WeakMap,tooltipPlugin=ViewPlugin.fromClass(class{constructor(mr){this.view=mr,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let hr=mr.state.facet(tooltipConfig);this.position=hr.position,this.parent=hr.parent,this.classes=mr.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new TooltipViewManager(mr,showTooltip,(gr,vr)=>this.createTooltip(gr,vr),gr=>{this.resizeObserver&&this.resizeObserver.unobserve(gr.dom),gr.dom.remove()}),this.above=this.manager.tooltips.map(gr=>!!gr.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(gr=>{Date.now()>this.lastTransaction-50&&gr.length>0&&gr[gr.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),mr.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let mr of this.manager.tooltipViews)this.intersectionObserver.observe(mr.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(mr){mr.transactions.length&&(this.lastTransaction=Date.now());let hr=this.manager.update(mr,this.above);hr&&this.observeIntersection();let gr=hr||mr.geometryChanged,vr=mr.state.facet(tooltipConfig);if(vr.position!=this.position&&!this.madeAbsolute){this.position=vr.position;for(let xr of this.manager.tooltipViews)xr.dom.style.position=this.position;gr=!0}if(vr.parent!=this.parent){this.parent&&this.container.remove(),this.parent=vr.parent,this.createContainer();for(let xr of this.manager.tooltipViews)this.container.appendChild(xr.dom);gr=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);gr&&this.maybeMeasure()}createTooltip(mr,hr){let gr=mr.create(this.view),vr=hr?hr.dom:null;if(gr.dom.classList.add("cm-tooltip"),mr.arrow&&!gr.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let xr=document.createElement("div");xr.className="cm-tooltip-arrow",gr.dom.appendChild(xr)}return gr.dom.style.position=this.position,gr.dom.style.top=Outside,gr.dom.style.left="0px",this.container.insertBefore(gr.dom,vr),gr.mount&&gr.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(gr.dom),gr}destroy(){var mr,hr,gr;this.view.win.removeEventListener("resize",this.measureSoon);for(let vr of this.manager.tooltipViews)vr.dom.remove(),(mr=vr.destroy)===null||mr===void 0||mr.call(vr);this.parent&&this.container.remove(),(hr=this.resizeObserver)===null||hr===void 0||hr.disconnect(),(gr=this.intersectionObserver)===null||gr===void 0||gr.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let mr=1,hr=1,gr=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:Er}=this.manager.tooltipViews[0];if(browser.gecko)gr=Er.offsetParent!=this.container.ownerDocument.body;else if(Er.style.top==Outside&&Er.style.left=="0px"){let Cr=Er.getBoundingClientRect();gr=Math.abs(Cr.top+1e4)>1||Math.abs(Cr.left)>1}}if(gr||this.position=="absolute")if(this.parent){let Er=this.parent.getBoundingClientRect();Er.width&&Er.height&&(mr=Er.width/this.parent.offsetWidth,hr=Er.height/this.parent.offsetHeight)}else({scaleX:mr,scaleY:hr}=this.view.viewState);let vr=this.view.scrollDOM.getBoundingClientRect(),xr=getScrollMargins(this.view);return{visible:{left:vr.left+xr.left,top:vr.top+xr.top,right:vr.right-xr.right,bottom:vr.bottom-xr.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((Er,Cr)=>{let wr=this.manager.tooltipViews[Cr];return wr.getCoords?wr.getCoords(Er.pos):this.view.coordsAtPos(Er.pos)}),size:this.manager.tooltipViews.map(({dom:Er})=>Er.getBoundingClientRect()),space:this.view.state.facet(tooltipConfig).tooltipSpace(this.view),scaleX:mr,scaleY:hr,makeAbsolute:gr}}writeMeasure(mr){var hr;if(mr.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let wr of this.manager.tooltipViews)wr.dom.style.position="absolute"}let{visible:gr,space:vr,scaleX:xr,scaleY:Er}=mr,Cr=[];for(let wr=0;wr<this.manager.tooltips.length;wr++){let Rr=this.manager.tooltips[wr],kr=this.manager.tooltipViews[wr],{dom:Dr}=kr,Br=mr.pos[wr],Hr=mr.size[wr];if(!Br||Rr.clip!==!1&&(Br.bottom<=Math.max(gr.top,vr.top)||Br.top>=Math.min(gr.bottom,vr.bottom)||Br.right<Math.max(gr.left,vr.left)-.1||Br.left>Math.min(gr.right,vr.right)+.1)){Dr.style.top=Outside;continue}let Gr=Rr.arrow?kr.dom.querySelector(".cm-tooltip-arrow"):null,qr=Gr?7:0,zr=Hr.right-Hr.left,Qr=(hr=knownHeight.get(kr))!==null&&hr!==void 0?hr:Hr.bottom-Hr.top,sn=kr.offset||noOffset,hn=this.view.textDirection==Direction.LTR,vn=Hr.width>vr.right-vr.left?hn?vr.left:vr.right-Hr.width:hn?Math.max(vr.left,Math.min(Br.left-(Gr?14:0)+sn.x,vr.right-zr)):Math.min(Math.max(vr.left,Br.left-zr+(Gr?14:0)-sn.x),vr.right-zr),yn=this.above[wr];!Rr.strictSide&&(yn?Br.top-Qr-qr-sn.y<vr.top:Br.bottom+Qr+qr+sn.y>vr.bottom)&&yn==vr.bottom-Br.bottom>Br.top-vr.top&&(yn=this.above[wr]=!yn);let gn=(yn?Br.top-vr.top:vr.bottom-Br.bottom)-qr;if(gn<Qr&&kr.resize!==!1){if(gn<this.view.defaultLineHeight){Dr.style.top=Outside;continue}knownHeight.set(kr,Qr),Dr.style.height=(Qr=gn)/Er+"px"}else Dr.style.height&&(Dr.style.height="");let bn=yn?Br.top-Qr-qr-sn.y:Br.bottom+qr+sn.y,xn=vn+zr;if(kr.overlap!==!0)for(let $n of Cr)$n.left<xn&&$n.right>vn&&$n.top<bn+Qr&&$n.bottom>bn&&(bn=yn?$n.top-Qr-2-qr:$n.bottom+qr+2);if(this.position=="absolute"?(Dr.style.top=(bn-mr.parent.top)/Er+"px",setLeftStyle(Dr,(vn-mr.parent.left)/xr)):(Dr.style.top=bn/Er+"px",setLeftStyle(Dr,vn/xr)),Gr){let $n=Br.left+(hn?sn.x:-sn.x)-(vn+14-7);Gr.style.left=$n/xr+"px"}kr.overlap!==!0&&Cr.push({left:vn,top:bn,right:xn,bottom:bn+Qr}),Dr.classList.toggle("cm-tooltip-above",yn),Dr.classList.toggle("cm-tooltip-below",!yn),kr.positioned&&kr.positioned(mr.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let mr of this.manager.tooltipViews)mr.dom.style.top=Outside}},{eventObservers:{scroll(){this.maybeMeasure()}}});function setLeftStyle(mr,hr){let gr=parseInt(mr.style.left,10);(isNaN(gr)||Math.abs(hr-gr)>1)&&(mr.style.left=hr+"px")}const baseTheme$4=EditorView.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),noOffset={x:0,y:0},showTooltip=Facet.define({enables:[tooltipPlugin,baseTheme$4]}),showHoverTooltip=Facet.define({combine:mr=>mr.reduce((hr,gr)=>hr.concat(gr),[])});class HoverTooltipHost{static create(hr){return new HoverTooltipHost(hr)}constructor(hr){this.view=hr,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new TooltipViewManager(hr,showHoverTooltip,(gr,vr)=>this.createHostedView(gr,vr),gr=>gr.dom.remove())}createHostedView(hr,gr){let vr=hr.create(this.view);return vr.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(vr.dom,gr?gr.dom.nextSibling:this.dom.firstChild),this.mounted&&vr.mount&&vr.mount(this.view),vr}mount(hr){for(let gr of this.manager.tooltipViews)gr.mount&&gr.mount(hr);this.mounted=!0}positioned(hr){for(let gr of this.manager.tooltipViews)gr.positioned&&gr.positioned(hr)}update(hr){this.manager.update(hr)}destroy(){var hr;for(let gr of this.manager.tooltipViews)(hr=gr.destroy)===null||hr===void 0||hr.call(gr)}passProp(hr){let gr;for(let vr of this.manager.tooltipViews){let xr=vr[hr];if(xr!==void 0){if(gr===void 0)gr=xr;else if(gr!==xr)return}}return gr}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const showHoverTooltipHost=showTooltip.compute([showHoverTooltip],mr=>{let hr=mr.facet(showHoverTooltip);return hr.length===0?null:{pos:Math.min(...hr.map(gr=>gr.pos)),end:Math.max(...hr.map(gr=>{var vr;return(vr=gr.end)!==null&&vr!==void 0?vr:gr.pos})),create:HoverTooltipHost.create,above:hr[0].above,arrow:hr.some(gr=>gr.arrow)}});class HoverPlugin{constructor(hr,gr,vr,xr,Er){this.view=hr,this.source=gr,this.field=vr,this.setHover=xr,this.hoverTime=Er,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:hr.dom,time:0},this.checkHover=this.checkHover.bind(this),hr.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),hr.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let hr=Date.now()-this.lastMove.time;hr<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-hr):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:hr,lastMove:gr}=this,vr=hr.docView.nearest(gr.target);if(!vr)return;let xr,Er=1;if(vr instanceof WidgetView)xr=vr.posAtStart;else{if(xr=hr.posAtCoords(gr),xr==null)return;let wr=hr.coordsAtPos(xr);if(!wr||gr.y<wr.top||gr.y>wr.bottom||gr.x<wr.left-hr.defaultCharacterWidth||gr.x>wr.right+hr.defaultCharacterWidth)return;let Rr=hr.bidiSpans(hr.state.doc.lineAt(xr)).find(Dr=>Dr.from<=xr&&Dr.to>=xr),kr=Rr&&Rr.dir==Direction.RTL?-1:1;Er=gr.x<wr.left?-kr:kr}let Cr=this.source(hr,xr,Er);if(Cr?.then){let wr=this.pending={pos:xr};Cr.then(Rr=>{this.pending==wr&&(this.pending=null,Rr&&!(Array.isArray(Rr)&&!Rr.length)&&hr.dispatch({effects:this.setHover.of(Array.isArray(Rr)?Rr:[Rr])}))},Rr=>logException(hr.state,Rr,"hover tooltip"))}else Cr&&!(Array.isArray(Cr)&&!Cr.length)&&hr.dispatch({effects:this.setHover.of(Array.isArray(Cr)?Cr:[Cr])})}get tooltip(){let hr=this.view.plugin(tooltipPlugin),gr=hr?hr.manager.tooltips.findIndex(vr=>vr.create==HoverTooltipHost.create):-1;return gr>-1?hr.manager.tooltipViews[gr]:null}mousemove(hr){var gr,vr;this.lastMove={x:hr.clientX,y:hr.clientY,target:hr.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:xr,tooltip:Er}=this;if(xr.length&&Er&&!isInTooltip(Er.dom,hr)||this.pending){let{pos:Cr}=xr[0]||this.pending,wr=(vr=(gr=xr[0])===null||gr===void 0?void 0:gr.end)!==null&&vr!==void 0?vr:Cr;(Cr==wr?this.view.posAtCoords(this.lastMove)!=Cr:!isOverRange(this.view,Cr,wr,hr.clientX,hr.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(hr){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:gr}=this;if(gr.length){let{tooltip:vr}=this;vr&&vr.dom.contains(hr.relatedTarget)?this.watchTooltipLeave(vr.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(hr){let gr=vr=>{hr.removeEventListener("mouseleave",gr),this.active.length&&!this.view.dom.contains(vr.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};hr.addEventListener("mouseleave",gr)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const tooltipMargin=4;function isInTooltip(mr,hr){let{left:gr,right:vr,top:xr,bottom:Er}=mr.getBoundingClientRect(),Cr;if(Cr=mr.querySelector(".cm-tooltip-arrow")){let wr=Cr.getBoundingClientRect();xr=Math.min(wr.top,xr),Er=Math.max(wr.bottom,Er)}return hr.clientX>=gr-tooltipMargin&&hr.clientX<=vr+tooltipMargin&&hr.clientY>=xr-tooltipMargin&&hr.clientY<=Er+tooltipMargin}function isOverRange(mr,hr,gr,vr,xr,Er){let Cr=mr.scrollDOM.getBoundingClientRect(),wr=mr.documentTop+mr.documentPadding.top+mr.contentHeight;if(Cr.left>vr||Cr.right<vr||Cr.top>xr||Math.min(Cr.bottom,wr)<xr)return!1;let Rr=mr.posAtCoords({x:vr,y:xr},!1);return Rr>=hr&&Rr<=gr}function hoverTooltip(mr,hr={}){let gr=StateEffect.define(),vr=StateField.define({create(){return[]},update(xr,Er){if(xr.length&&(hr.hideOnChange&&(Er.docChanged||Er.selection)?xr=[]:hr.hideOn&&(xr=xr.filter(Cr=>!hr.hideOn(Er,Cr))),Er.docChanged)){let Cr=[];for(let wr of xr){let Rr=Er.changes.mapPos(wr.pos,-1,MapMode.TrackDel);if(Rr!=null){let kr=Object.assign(Object.create(null),wr);kr.pos=Rr,kr.end!=null&&(kr.end=Er.changes.mapPos(kr.end)),Cr.push(kr)}}xr=Cr}for(let Cr of Er.effects)Cr.is(gr)&&(xr=Cr.value),Cr.is(closeHoverTooltipEffect)&&(xr=[]);return xr},provide:xr=>showHoverTooltip.from(xr)});return{active:vr,extension:[vr,ViewPlugin.define(xr=>new HoverPlugin(xr,mr,vr,gr,hr.hoverTime||300)),showHoverTooltipHost]}}function getTooltip(mr,hr){let gr=mr.plugin(tooltipPlugin);if(!gr)return null;let vr=gr.manager.tooltips.indexOf(hr);return vr<0?null:gr.manager.tooltipViews[vr]}const closeHoverTooltipEffect=StateEffect.define(),panelConfig=Facet.define({combine(mr){let hr,gr;for(let vr of mr)hr=hr||vr.topContainer,gr=gr||vr.bottomContainer;return{topContainer:hr,bottomContainer:gr}}});function getPanel(mr,hr){let gr=mr.plugin(panelPlugin),vr=gr?gr.specs.indexOf(hr):-1;return vr>-1?gr.panels[vr]:null}const panelPlugin=ViewPlugin.fromClass(class{constructor(mr){this.input=mr.state.facet(showPanel),this.specs=this.input.filter(gr=>gr),this.panels=this.specs.map(gr=>gr(mr));let hr=mr.state.facet(panelConfig);this.top=new PanelGroup(mr,!0,hr.topContainer),this.bottom=new PanelGroup(mr,!1,hr.bottomContainer),this.top.sync(this.panels.filter(gr=>gr.top)),this.bottom.sync(this.panels.filter(gr=>!gr.top));for(let gr of this.panels)gr.dom.classList.add("cm-panel"),gr.mount&&gr.mount()}update(mr){let hr=mr.state.facet(panelConfig);this.top.container!=hr.topContainer&&(this.top.sync([]),this.top=new PanelGroup(mr.view,!0,hr.topContainer)),this.bottom.container!=hr.bottomContainer&&(this.bottom.sync([]),this.bottom=new PanelGroup(mr.view,!1,hr.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let gr=mr.state.facet(showPanel);if(gr!=this.input){let vr=gr.filter(Rr=>Rr),xr=[],Er=[],Cr=[],wr=[];for(let Rr of vr){let kr=this.specs.indexOf(Rr),Dr;kr<0?(Dr=Rr(mr.view),wr.push(Dr)):(Dr=this.panels[kr],Dr.update&&Dr.update(mr)),xr.push(Dr),(Dr.top?Er:Cr).push(Dr)}this.specs=vr,this.panels=xr,this.top.sync(Er),this.bottom.sync(Cr);for(let Rr of wr)Rr.dom.classList.add("cm-panel"),Rr.mount&&Rr.mount()}else for(let vr of this.panels)vr.update&&vr.update(mr)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:mr=>EditorView.scrollMargins.of(hr=>{let gr=hr.plugin(mr);return gr&&{top:gr.top.scrollMargin(),bottom:gr.bottom.scrollMargin()}})});class PanelGroup{constructor(hr,gr,vr){this.view=hr,this.top=gr,this.container=vr,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(hr){for(let gr of this.panels)gr.destroy&&hr.indexOf(gr)<0&&gr.destroy();this.panels=hr,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let gr=this.container||this.view.dom;gr.insertBefore(this.dom,this.top?gr.firstChild:null)}let hr=this.dom.firstChild;for(let gr of this.panels)if(gr.dom.parentNode==this.dom){for(;hr!=gr.dom;)hr=rm(hr);hr=hr.nextSibling}else this.dom.insertBefore(gr.dom,hr);for(;hr;)hr=rm(hr)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let hr of this.classes.split(" "))hr&&this.container.classList.remove(hr);for(let hr of(this.classes=this.view.themeClasses).split(" "))hr&&this.container.classList.add(hr)}}}function rm(mr){let hr=mr.nextSibling;return mr.remove(),hr}const showPanel=Facet.define({enables:panelPlugin});class GutterMarker extends RangeValue{compare(hr){return this==hr||this.constructor==hr.constructor&&this.eq(hr)}eq(hr){return!1}destroy(hr){}}GutterMarker.prototype.elementClass="";GutterMarker.prototype.toDOM=void 0;GutterMarker.prototype.mapMode=MapMode.TrackBefore;GutterMarker.prototype.startSide=GutterMarker.prototype.endSide=-1;GutterMarker.prototype.point=!0;const gutterLineClass=Facet.define(),gutterWidgetClass=Facet.define(),defaults$5={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>RangeSet.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},activeGutters=Facet.define();function gutter(mr){return[gutters(),activeGutters.of(Object.assign(Object.assign({},defaults$5),mr))]}const unfixGutters=Facet.define({combine:mr=>mr.some(hr=>hr)});function gutters(mr){return[gutterView]}const gutterView=ViewPlugin.fromClass(class{constructor(mr){this.view=mr,this.prevViewport=mr.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=mr.state.facet(activeGutters).map(hr=>new SingleGutterView(mr,hr));for(let hr of this.gutters)this.dom.appendChild(hr.dom);this.fixed=!mr.state.facet(unfixGutters),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),mr.scrollDOM.insertBefore(this.dom,mr.contentDOM)}update(mr){if(this.updateGutters(mr)){let hr=this.prevViewport,gr=mr.view.viewport,vr=Math.min(hr.to,gr.to)-Math.max(hr.from,gr.from);this.syncGutters(vr<(gr.to-gr.from)*.8)}mr.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(unfixGutters)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=mr.view.viewport}syncGutters(mr){let hr=this.dom.nextSibling;mr&&this.dom.remove();let gr=RangeSet.iter(this.view.state.facet(gutterLineClass),this.view.viewport.from),vr=[],xr=this.gutters.map(Er=>new UpdateContext(Er,this.view.viewport,-this.view.documentPadding.top));for(let Er of this.view.viewportLineBlocks)if(vr.length&&(vr=[]),Array.isArray(Er.type)){let Cr=!0;for(let wr of Er.type)if(wr.type==BlockType.Text&&Cr){advanceCursor(gr,vr,wr.from);for(let Rr of xr)Rr.line(this.view,wr,vr);Cr=!1}else if(wr.widget)for(let Rr of xr)Rr.widget(this.view,wr)}else if(Er.type==BlockType.Text){advanceCursor(gr,vr,Er.from);for(let Cr of xr)Cr.line(this.view,Er,vr)}else if(Er.widget)for(let Cr of xr)Cr.widget(this.view,Er);for(let Er of xr)Er.finish();mr&&this.view.scrollDOM.insertBefore(this.dom,hr)}updateGutters(mr){let hr=mr.startState.facet(activeGutters),gr=mr.state.facet(activeGutters),vr=mr.docChanged||mr.heightChanged||mr.viewportChanged||!RangeSet.eq(mr.startState.facet(gutterLineClass),mr.state.facet(gutterLineClass),mr.view.viewport.from,mr.view.viewport.to);if(hr==gr)for(let xr of this.gutters)xr.update(mr)&&(vr=!0);else{vr=!0;let xr=[];for(let Er of gr){let Cr=hr.indexOf(Er);Cr<0?xr.push(new SingleGutterView(this.view,Er)):(this.gutters[Cr].update(mr),xr.push(this.gutters[Cr]))}for(let Er of this.gutters)Er.dom.remove(),xr.indexOf(Er)<0&&Er.destroy();for(let Er of xr)this.dom.appendChild(Er.dom);this.gutters=xr}return vr}destroy(){for(let mr of this.gutters)mr.destroy();this.dom.remove()}},{provide:mr=>EditorView.scrollMargins.of(hr=>{let gr=hr.plugin(mr);return!gr||gr.gutters.length==0||!gr.fixed?null:hr.textDirection==Direction.LTR?{left:gr.dom.offsetWidth*hr.scaleX}:{right:gr.dom.offsetWidth*hr.scaleX}})});function asArray(mr){return Array.isArray(mr)?mr:[mr]}function advanceCursor(mr,hr,gr){for(;mr.value&&mr.from<=gr;)mr.from==gr&&hr.push(mr.value),mr.next()}class UpdateContext{constructor(hr,gr,vr){this.gutter=hr,this.height=vr,this.i=0,this.cursor=RangeSet.iter(hr.markers,gr.from)}addElement(hr,gr,vr){let{gutter:xr}=this,Er=(gr.top-this.height)/hr.scaleY,Cr=gr.height/hr.scaleY;if(this.i==xr.elements.length){let wr=new GutterElement(hr,Cr,Er,vr);xr.elements.push(wr),xr.dom.appendChild(wr.dom)}else xr.elements[this.i].update(hr,Cr,Er,vr);this.height=gr.bottom,this.i++}line(hr,gr,vr){let xr=[];advanceCursor(this.cursor,xr,gr.from),vr.length&&(xr=xr.concat(vr));let Er=this.gutter.config.lineMarker(hr,gr,xr);Er&&xr.unshift(Er);let Cr=this.gutter;xr.length==0&&!Cr.config.renderEmptyElements||this.addElement(hr,gr,xr)}widget(hr,gr){let vr=this.gutter.config.widgetMarker(hr,gr.widget,gr),xr=vr?[vr]:null;for(let Er of hr.state.facet(gutterWidgetClass)){let Cr=Er(hr,gr.widget,gr);Cr&&(xr||(xr=[])).push(Cr)}xr&&this.addElement(hr,gr,xr)}finish(){let hr=this.gutter;for(;hr.elements.length>this.i;){let gr=hr.elements.pop();hr.dom.removeChild(gr.dom),gr.destroy()}}}class SingleGutterView{constructor(hr,gr){this.view=hr,this.config=gr,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let vr in gr.domEventHandlers)this.dom.addEventListener(vr,xr=>{let Er=xr.target,Cr;if(Er!=this.dom&&this.dom.contains(Er)){for(;Er.parentNode!=this.dom;)Er=Er.parentNode;let Rr=Er.getBoundingClientRect();Cr=(Rr.top+Rr.bottom)/2}else Cr=xr.clientY;let wr=hr.lineBlockAtHeight(Cr-hr.documentTop);gr.domEventHandlers[vr](hr,wr,xr)&&xr.preventDefault()});this.markers=asArray(gr.markers(hr)),gr.initialSpacer&&(this.spacer=new GutterElement(hr,0,0,[gr.initialSpacer(hr)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(hr){let gr=this.markers;if(this.markers=asArray(this.config.markers(hr.view)),this.spacer&&this.config.updateSpacer){let xr=this.config.updateSpacer(this.spacer.markers[0],hr);xr!=this.spacer.markers[0]&&this.spacer.update(hr.view,0,0,[xr])}let vr=hr.view.viewport;return!RangeSet.eq(this.markers,gr,vr.from,vr.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(hr):!1)}destroy(){for(let hr of this.elements)hr.destroy()}}class GutterElement{constructor(hr,gr,vr,xr){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(hr,gr,vr,xr)}update(hr,gr,vr,xr){this.height!=gr&&(this.height=gr,this.dom.style.height=gr+"px"),this.above!=vr&&(this.dom.style.marginTop=(this.above=vr)?vr+"px":""),sameMarkers(this.markers,xr)||this.setMarkers(hr,xr)}setMarkers(hr,gr){let vr="cm-gutterElement",xr=this.dom.firstChild;for(let Er=0,Cr=0;;){let wr=Cr,Rr=Er<gr.length?gr[Er++]:null,kr=!1;if(Rr){let Dr=Rr.elementClass;Dr&&(vr+=" "+Dr);for(let Br=Cr;Br<this.markers.length;Br++)if(this.markers[Br].compare(Rr)){wr=Br,kr=!0;break}}else wr=this.markers.length;for(;Cr<wr;){let Dr=this.markers[Cr++];if(Dr.toDOM){Dr.destroy(xr);let Br=xr.nextSibling;xr.remove(),xr=Br}}if(!Rr)break;Rr.toDOM&&(kr?xr=xr.nextSibling:this.dom.insertBefore(Rr.toDOM(hr),xr)),kr&&Cr++}this.dom.className=vr,this.markers=gr}destroy(){this.setMarkers(null,[])}}function sameMarkers(mr,hr){if(mr.length!=hr.length)return!1;for(let gr=0;gr<mr.length;gr++)if(!mr[gr].compare(hr[gr]))return!1;return!0}const lineNumberMarkers=Facet.define(),lineNumberWidgetMarker=Facet.define(),lineNumberConfig=Facet.define({combine(mr){return combineConfig(mr,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(hr,gr){let vr=Object.assign({},hr);for(let xr in gr){let Er=vr[xr],Cr=gr[xr];vr[xr]=Er?(wr,Rr,kr)=>Er(wr,Rr,kr)||Cr(wr,Rr,kr):Cr}return vr}})}});class NumberMarker extends GutterMarker{constructor(hr){super(),this.number=hr}eq(hr){return this.number==hr.number}toDOM(){return document.createTextNode(this.number)}}function formatNumber(mr,hr){return mr.state.facet(lineNumberConfig).formatNumber(hr,mr.state)}const lineNumberGutter=activeGutters.compute([lineNumberConfig],mr=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(hr){return hr.state.facet(lineNumberMarkers)},lineMarker(hr,gr,vr){return vr.some(xr=>xr.toDOM)?null:new NumberMarker(formatNumber(hr,hr.state.doc.lineAt(gr.from).number))},widgetMarker:(hr,gr,vr)=>{for(let xr of hr.state.facet(lineNumberWidgetMarker)){let Er=xr(hr,gr,vr);if(Er)return Er}return null},lineMarkerChange:hr=>hr.startState.facet(lineNumberConfig)!=hr.state.facet(lineNumberConfig),initialSpacer(hr){return new NumberMarker(formatNumber(hr,maxLineNumber(hr.state.doc.lines)))},updateSpacer(hr,gr){let vr=formatNumber(gr.view,maxLineNumber(gr.view.state.doc.lines));return vr==hr.number?hr:new NumberMarker(vr)},domEventHandlers:mr.facet(lineNumberConfig).domEventHandlers}));function lineNumbers(mr={}){return[lineNumberConfig.of(mr),gutters(),lineNumberGutter]}function maxLineNumber(mr){let hr=9;for(;hr<mr;)hr=hr*10+9;return hr}const activeLineGutterMarker=new class extends GutterMarker{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},activeLineGutterHighlighter=gutterLineClass.compute(["selection"],mr=>{let hr=[],gr=-1;for(let vr of mr.selection.ranges){let xr=mr.doc.lineAt(vr.head).from;xr>gr&&(gr=xr,hr.push(activeLineGutterMarker.range(xr)))}return RangeSet.of(hr)});function highlightActiveLineGutter(){return activeLineGutterHighlighter}var _a$2;const languageDataProp=new NodeProp;function defineLanguageFacet(mr){return Facet.define({combine:mr?hr=>hr.concat(mr):void 0})}const sublanguageProp=new NodeProp;class Language{constructor(hr,gr,vr=[],xr=""){this.data=hr,this.name=xr,EditorState.prototype.hasOwnProperty("tree")||Object.defineProperty(EditorState.prototype,"tree",{get(){return syntaxTree(this)}}),this.parser=gr,this.extension=[language.of(this),EditorState.languageData.of((Er,Cr,wr)=>{let Rr=topNodeAt(Er,Cr,wr),kr=Rr.type.prop(languageDataProp);if(!kr)return[];let Dr=Er.facet(kr),Br=Rr.type.prop(sublanguageProp);if(Br){let Hr=Rr.resolve(Cr-Rr.from,wr);for(let Gr of Br)if(Gr.test(Hr,Er)){let qr=Er.facet(Gr.facet);return Gr.type=="replace"?qr:qr.concat(Dr)}}return Dr})].concat(vr)}isActiveAt(hr,gr,vr=-1){return topNodeAt(hr,gr,vr).type.prop(languageDataProp)==this.data}findRegions(hr){let gr=hr.facet(language);if(gr?.data==this.data)return[{from:0,to:hr.doc.length}];if(!gr||!gr.allowsNesting)return[];let vr=[],xr=(Er,Cr)=>{if(Er.prop(languageDataProp)==this.data){vr.push({from:Cr,to:Cr+Er.length});return}let wr=Er.prop(NodeProp.mounted);if(wr){if(wr.tree.prop(languageDataProp)==this.data){if(wr.overlay)for(let Rr of wr.overlay)vr.push({from:Rr.from+Cr,to:Rr.to+Cr});else vr.push({from:Cr,to:Cr+Er.length});return}else if(wr.overlay){let Rr=vr.length;if(xr(wr.tree,wr.overlay[0].from+Cr),vr.length>Rr)return}}for(let Rr=0;Rr<Er.children.length;Rr++){let kr=Er.children[Rr];kr instanceof Tree&&xr(kr,Er.positions[Rr]+Cr)}};return xr(syntaxTree(hr),0),vr}get allowsNesting(){return!0}}Language.setState=StateEffect.define();function topNodeAt(mr,hr,gr){let vr=mr.facet(language),xr=syntaxTree(mr).topNode;if(!vr||vr.allowsNesting)for(let Er=xr;Er;Er=Er.enter(hr,gr,IterMode.ExcludeBuffers))Er.type.isTop&&(xr=Er);return xr}class LRLanguage extends Language{constructor(hr,gr,vr){super(hr,gr,[],vr),this.parser=gr}static define(hr){let gr=defineLanguageFacet(hr.languageData);return new LRLanguage(gr,hr.parser.configure({props:[languageDataProp.add(vr=>vr.isTop?gr:void 0)]}),hr.name)}configure(hr,gr){return new LRLanguage(this.data,this.parser.configure(hr),gr||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function syntaxTree(mr){let hr=mr.field(Language.state,!1);return hr?hr.tree:Tree.empty}class DocInput{constructor(hr){this.doc=hr,this.cursorPos=0,this.string="",this.cursor=hr.iter()}get length(){return this.doc.length}syncTo(hr){return this.string=this.cursor.next(hr-this.cursorPos).value,this.cursorPos=hr+this.string.length,this.cursorPos-this.string.length}chunk(hr){return this.syncTo(hr),this.string}get lineChunks(){return!0}read(hr,gr){let vr=this.cursorPos-this.string.length;return hr<vr||gr>=this.cursorPos?this.doc.sliceString(hr,gr):this.string.slice(hr-vr,gr-vr)}}let currentContext=null;class ParseContext{constructor(hr,gr,vr=[],xr,Er,Cr,wr,Rr){this.parser=hr,this.state=gr,this.fragments=vr,this.tree=xr,this.treeLen=Er,this.viewport=Cr,this.skipped=wr,this.scheduleOn=Rr,this.parse=null,this.tempSkipped=[]}static create(hr,gr,vr){return new ParseContext(hr,gr,[],Tree.empty,0,vr,[],null)}startParse(){return this.parser.startParse(new DocInput(this.state.doc),this.fragments)}work(hr,gr){return gr!=null&&gr>=this.state.doc.length&&(gr=void 0),this.tree!=Tree.empty&&this.isDone(gr??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var vr;if(typeof hr=="number"){let xr=Date.now()+hr;hr=()=>Date.now()>xr}for(this.parse||(this.parse=this.startParse()),gr!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>gr)&&gr<this.state.doc.length&&this.parse.stopAt(gr);;){let xr=this.parse.advance();if(xr)if(this.fragments=this.withoutTempSkipped(TreeFragment.addTree(xr,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(vr=this.parse.stoppedAt)!==null&&vr!==void 0?vr:this.state.doc.length,this.tree=xr,this.parse=null,this.treeLen<(gr??this.state.doc.length))this.parse=this.startParse();else return!0;if(hr())return!1}})}takeTree(){let hr,gr;this.parse&&(hr=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>hr)&&this.parse.stopAt(hr),this.withContext(()=>{for(;!(gr=this.parse.advance()););}),this.treeLen=hr,this.tree=gr,this.fragments=this.withoutTempSkipped(TreeFragment.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(hr){let gr=currentContext;currentContext=this;try{return hr()}finally{currentContext=gr}}withoutTempSkipped(hr){for(let gr;gr=this.tempSkipped.pop();)hr=cutFragments(hr,gr.from,gr.to);return hr}changes(hr,gr){let{fragments:vr,tree:xr,treeLen:Er,viewport:Cr,skipped:wr}=this;if(this.takeTree(),!hr.empty){let Rr=[];if(hr.iterChangedRanges((kr,Dr,Br,Hr)=>Rr.push({fromA:kr,toA:Dr,fromB:Br,toB:Hr})),vr=TreeFragment.applyChanges(vr,Rr),xr=Tree.empty,Er=0,Cr={from:hr.mapPos(Cr.from,-1),to:hr.mapPos(Cr.to,1)},this.skipped.length){wr=[];for(let kr of this.skipped){let Dr=hr.mapPos(kr.from,1),Br=hr.mapPos(kr.to,-1);Dr<Br&&wr.push({from:Dr,to:Br})}}}return new ParseContext(this.parser,gr,vr,xr,Er,Cr,wr,this.scheduleOn)}updateViewport(hr){if(this.viewport.from==hr.from&&this.viewport.to==hr.to)return!1;this.viewport=hr;let gr=this.skipped.length;for(let vr=0;vr<this.skipped.length;vr++){let{from:xr,to:Er}=this.skipped[vr];xr<hr.to&&Er>hr.from&&(this.fragments=cutFragments(this.fragments,xr,Er),this.skipped.splice(vr--,1))}return this.skipped.length>=gr?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(hr,gr){this.skipped.push({from:hr,to:gr})}static getSkippingParser(hr){return new class extends Parser{createParse(gr,vr,xr){let Er=xr[0].from,Cr=xr[xr.length-1].to;return{parsedPos:Er,advance(){let Rr=currentContext;if(Rr){for(let kr of xr)Rr.tempSkipped.push(kr);hr&&(Rr.scheduleOn=Rr.scheduleOn?Promise.all([Rr.scheduleOn,hr]):hr)}return this.parsedPos=Cr,new Tree(NodeType.none,[],[],Cr-Er)},stoppedAt:null,stopAt(){}}}}}isDone(hr){hr=Math.min(hr,this.state.doc.length);let gr=this.fragments;return this.treeLen>=hr&&gr.length&&gr[0].from==0&&gr[0].to>=hr}static get(){return currentContext}}function cutFragments(mr,hr,gr){return TreeFragment.applyChanges(mr,[{fromA:hr,toA:gr,fromB:hr,toB:gr}])}class LanguageState{constructor(hr){this.context=hr,this.tree=hr.tree}apply(hr){if(!hr.docChanged&&this.tree==this.context.tree)return this;let gr=this.context.changes(hr.changes,hr.state),vr=this.context.treeLen==hr.startState.doc.length?void 0:Math.max(hr.changes.mapPos(this.context.treeLen),gr.viewport.to);return gr.work(20,vr)||gr.takeTree(),new LanguageState(gr)}static init(hr){let gr=Math.min(3e3,hr.doc.length),vr=ParseContext.create(hr.facet(language).parser,hr,{from:0,to:gr});return vr.work(20,gr)||vr.takeTree(),new LanguageState(vr)}}Language.state=StateField.define({create:LanguageState.init,update(mr,hr){for(let gr of hr.effects)if(gr.is(Language.setState))return gr.value;return hr.startState.facet(language)!=hr.state.facet(language)?LanguageState.init(hr.state):mr.apply(hr)}});let requestIdle=mr=>{let hr=setTimeout(()=>mr(),500);return()=>clearTimeout(hr)};typeof requestIdleCallback<"u"&&(requestIdle=mr=>{let hr=-1,gr=setTimeout(()=>{hr=requestIdleCallback(mr,{timeout:400})},100);return()=>hr<0?clearTimeout(gr):cancelIdleCallback(hr)});const isInputPending=typeof navigator<"u"&&(!((_a$2=navigator.scheduling)===null||_a$2===void 0)&&_a$2.isInputPending)?()=>navigator.scheduling.isInputPending():null,parseWorker=ViewPlugin.fromClass(class{constructor(hr){this.view=hr,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(hr){let gr=this.view.state.field(Language.state).context;(gr.updateViewport(hr.view.viewport)||this.view.viewport.to>gr.treeLen)&&this.scheduleWork(),(hr.docChanged||hr.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(gr)}scheduleWork(){if(this.working)return;let{state:hr}=this.view,gr=hr.field(Language.state);(gr.tree!=gr.context.tree||!gr.context.isDone(hr.doc.length))&&(this.working=requestIdle(this.work))}work(hr){this.working=null;let gr=Date.now();if(this.chunkEnd<gr&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=gr+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:vr,viewport:{to:xr}}=this.view,Er=vr.field(Language.state);if(Er.tree==Er.context.tree&&Er.context.isDone(xr+1e5))return;let Cr=Date.now()+Math.min(this.chunkBudget,100,hr&&!isInputPending?Math.max(25,hr.timeRemaining()-5):1e9),wr=Er.context.treeLen<xr&&vr.doc.length>xr+1e3,Rr=Er.context.work(()=>isInputPending&&isInputPending()||Date.now()>Cr,xr+(wr?0:1e5));this.chunkBudget-=Date.now()-gr,(Rr||this.chunkBudget<=0)&&(Er.context.takeTree(),this.view.dispatch({effects:Language.setState.of(new LanguageState(Er.context))})),this.chunkBudget>0&&!(Rr&&!wr)&&this.scheduleWork(),this.checkAsyncSchedule(Er.context)}checkAsyncSchedule(hr){hr.scheduleOn&&(this.workScheduled++,hr.scheduleOn.then(()=>this.scheduleWork()).catch(gr=>logException(this.view.state,gr)).then(()=>this.workScheduled--),hr.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),language=Facet.define({combine(mr){return mr.length?mr[0]:null},enables:mr=>[Language.state,parseWorker,EditorView.contentAttributes.compute([mr],hr=>{let gr=hr.facet(mr);return gr&&gr.name?{"data-language":gr.name}:{}})]});class LanguageSupport{constructor(hr,gr=[]){this.language=hr,this.support=gr,this.extension=[hr,gr]}}const indentService=Facet.define(),indentUnit=Facet.define({combine:mr=>{if(!mr.length)return"  ";let hr=mr[0];if(!hr||/\S/.test(hr)||Array.from(hr).some(gr=>gr!=hr[0]))throw new Error("Invalid indent unit: "+JSON.stringify(mr[0]));return hr}});function getIndentUnit(mr){let hr=mr.facet(indentUnit);return hr.charCodeAt(0)==9?mr.tabSize*hr.length:hr.length}function indentString(mr,hr){let gr="",vr=mr.tabSize,xr=mr.facet(indentUnit)[0];if(xr=="	"){for(;hr>=vr;)gr+="	",hr-=vr;xr=" "}for(let Er=0;Er<hr;Er++)gr+=xr;return gr}function getIndentation(mr,hr){mr instanceof EditorState&&(mr=new IndentContext(mr));for(let vr of mr.state.facet(indentService)){let xr=vr(mr,hr);if(xr!==void 0)return xr}let gr=syntaxTree(mr.state);return gr.length>=hr?syntaxIndentation(mr,gr,hr):null}class IndentContext{constructor(hr,gr={}){this.state=hr,this.options=gr,this.unit=getIndentUnit(hr)}lineAt(hr,gr=1){let vr=this.state.doc.lineAt(hr),{simulateBreak:xr,simulateDoubleBreak:Er}=this.options;return xr!=null&&xr>=vr.from&&xr<=vr.to?Er&&xr==hr?{text:"",from:hr}:(gr<0?xr<hr:xr<=hr)?{text:vr.text.slice(xr-vr.from),from:xr}:{text:vr.text.slice(0,xr-vr.from),from:vr.from}:vr}textAfterPos(hr,gr=1){if(this.options.simulateDoubleBreak&&hr==this.options.simulateBreak)return"";let{text:vr,from:xr}=this.lineAt(hr,gr);return vr.slice(hr-xr,Math.min(vr.length,hr+100-xr))}column(hr,gr=1){let{text:vr,from:xr}=this.lineAt(hr,gr),Er=this.countColumn(vr,hr-xr),Cr=this.options.overrideIndentation?this.options.overrideIndentation(xr):-1;return Cr>-1&&(Er+=Cr-this.countColumn(vr,vr.search(/\S|$/))),Er}countColumn(hr,gr=hr.length){return countColumn(hr,this.state.tabSize,gr)}lineIndent(hr,gr=1){let{text:vr,from:xr}=this.lineAt(hr,gr),Er=this.options.overrideIndentation;if(Er){let Cr=Er(xr);if(Cr>-1)return Cr}return this.countColumn(vr,vr.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const indentNodeProp=new NodeProp;function syntaxIndentation(mr,hr,gr){let vr=hr.resolveStack(gr),xr=hr.resolveInner(gr,-1).resolve(gr,0).enterUnfinishedNodesBefore(gr);if(xr!=vr.node){let Er=[];for(let Cr=xr;Cr&&!(Cr.from==vr.node.from&&Cr.type==vr.node.type);Cr=Cr.parent)Er.push(Cr);for(let Cr=Er.length-1;Cr>=0;Cr--)vr={node:Er[Cr],next:vr}}return indentFor(vr,mr,gr)}function indentFor(mr,hr,gr){for(let vr=mr;vr;vr=vr.next){let xr=indentStrategy(vr.node);if(xr)return xr(TreeIndentContext.create(hr,gr,vr))}return 0}function ignoreClosed(mr){return mr.pos==mr.options.simulateBreak&&mr.options.simulateDoubleBreak}function indentStrategy(mr){let hr=mr.type.prop(indentNodeProp);if(hr)return hr;let gr=mr.firstChild,vr;if(gr&&(vr=gr.type.prop(NodeProp.closedBy))){let xr=mr.lastChild,Er=xr&&vr.indexOf(xr.name)>-1;return Cr=>delimitedStrategy(Cr,!0,1,void 0,Er&&!ignoreClosed(Cr)?xr.from:void 0)}return mr.parent==null?topIndent:null}function topIndent(){return 0}class TreeIndentContext extends IndentContext{constructor(hr,gr,vr){super(hr.state,hr.options),this.base=hr,this.pos=gr,this.context=vr}get node(){return this.context.node}static create(hr,gr,vr){return new TreeIndentContext(hr,gr,vr)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(hr){let gr=this.state.doc.lineAt(hr.from);for(;;){let vr=hr.resolve(gr.from);for(;vr.parent&&vr.parent.from==vr.from;)vr=vr.parent;if(isParent(vr,hr))break;gr=this.state.doc.lineAt(vr.from)}return this.lineIndent(gr.from)}continue(){return indentFor(this.context.next,this.base,this.pos)}}function isParent(mr,hr){for(let gr=hr;gr;gr=gr.parent)if(mr==gr)return!0;return!1}function bracketedAligned(mr){let hr=mr.node,gr=hr.childAfter(hr.from),vr=hr.lastChild;if(!gr)return null;let xr=mr.options.simulateBreak,Er=mr.state.doc.lineAt(gr.from),Cr=xr==null||xr<=Er.from?Er.to:Math.min(Er.to,xr);for(let wr=gr.to;;){let Rr=hr.childAfter(wr);if(!Rr||Rr==vr)return null;if(!Rr.type.isSkipped){if(Rr.from>=Cr)return null;let kr=/^ */.exec(Er.text.slice(gr.to-Er.from))[0].length;return{from:gr.from,to:gr.to+kr}}wr=Rr.to}}function delimitedStrategy(mr,hr,gr,vr,xr){let Er=mr.textAfter,Cr=Er.match(/^\s*/)[0].length,wr=xr==mr.pos+Cr,Rr=bracketedAligned(mr);return Rr?wr?mr.column(Rr.from):mr.column(Rr.to):mr.baseIndent+(wr?0:mr.unit*gr)}function continuedIndent({except:mr,units:hr=1}={}){return gr=>{let vr=mr&&mr.test(gr.textAfter);return gr.baseIndent+(vr?0:hr*gr.unit)}}const DontIndentBeyond=200;function indentOnInput(){return EditorState.transactionFilter.of(mr=>{if(!mr.docChanged||!mr.isUserEvent("input.type")&&!mr.isUserEvent("input.complete"))return mr;let hr=mr.startState.languageDataAt("indentOnInput",mr.startState.selection.main.head);if(!hr.length)return mr;let gr=mr.newDoc,{head:vr}=mr.newSelection.main,xr=gr.lineAt(vr);if(vr>xr.from+DontIndentBeyond)return mr;let Er=gr.sliceString(xr.from,vr);if(!hr.some(kr=>kr.test(Er)))return mr;let{state:Cr}=mr,wr=-1,Rr=[];for(let{head:kr}of Cr.selection.ranges){let Dr=Cr.doc.lineAt(kr);if(Dr.from==wr)continue;wr=Dr.from;let Br=getIndentation(Cr,Dr.from);if(Br==null)continue;let Hr=/^\s*/.exec(Dr.text)[0],Gr=indentString(Cr,Br);Hr!=Gr&&Rr.push({from:Dr.from,to:Dr.from+Hr.length,insert:Gr})}return Rr.length?[mr,{changes:Rr,sequential:!0}]:mr})}const foldService=Facet.define(),foldNodeProp=new NodeProp;function foldInside(mr){let hr=mr.firstChild,gr=mr.lastChild;return hr&&hr.to<gr.from?{from:hr.to,to:gr.type.isError?mr.to:gr.from}:null}function syntaxFolding(mr,hr,gr){let vr=syntaxTree(mr);if(vr.length<gr)return null;let xr=vr.resolveStack(gr,1),Er=null;for(let Cr=xr;Cr;Cr=Cr.next){let wr=Cr.node;if(wr.to<=gr||wr.from>gr)continue;if(Er&&wr.from<hr)break;let Rr=wr.type.prop(foldNodeProp);if(Rr&&(wr.to<vr.length-50||vr.length==mr.doc.length||!isUnfinished(wr))){let kr=Rr(wr,mr);kr&&kr.from<=gr&&kr.from>=hr&&kr.to>gr&&(Er=kr)}}return Er}function isUnfinished(mr){let hr=mr.lastChild;return hr&&hr.to==mr.to&&hr.type.isError}function foldable(mr,hr,gr){for(let vr of mr.facet(foldService)){let xr=vr(mr,hr,gr);if(xr)return xr}return syntaxFolding(mr,hr,gr)}function mapRange(mr,hr){let gr=hr.mapPos(mr.from,1),vr=hr.mapPos(mr.to,-1);return gr>=vr?void 0:{from:gr,to:vr}}const foldEffect=StateEffect.define({map:mapRange}),unfoldEffect=StateEffect.define({map:mapRange});function selectedLines(mr){let hr=[];for(let{head:gr}of mr.state.selection.ranges)hr.some(vr=>vr.from<=gr&&vr.to>=gr)||hr.push(mr.lineBlockAt(gr));return hr}const foldState=StateField.define({create(){return Decoration.none},update(mr,hr){mr=mr.map(hr.changes);for(let gr of hr.effects)if(gr.is(foldEffect)&&!foldExists(mr,gr.value.from,gr.value.to)){let{preparePlaceholder:vr}=hr.state.facet(foldConfig),xr=vr?Decoration.replace({widget:new PreparedFoldWidget(vr(hr.state,gr.value))}):foldWidget;mr=mr.update({add:[xr.range(gr.value.from,gr.value.to)]})}else gr.is(unfoldEffect)&&(mr=mr.update({filter:(vr,xr)=>gr.value.from!=vr||gr.value.to!=xr,filterFrom:gr.value.from,filterTo:gr.value.to}));if(hr.selection){let gr=!1,{head:vr}=hr.selection.main;mr.between(vr,vr,(xr,Er)=>{xr<vr&&Er>vr&&(gr=!0)}),gr&&(mr=mr.update({filterFrom:vr,filterTo:vr,filter:(xr,Er)=>Er<=vr||xr>=vr}))}return mr},provide:mr=>EditorView.decorations.from(mr),toJSON(mr,hr){let gr=[];return mr.between(0,hr.doc.length,(vr,xr)=>{gr.push(vr,xr)}),gr},fromJSON(mr){if(!Array.isArray(mr)||mr.length%2)throw new RangeError("Invalid JSON for fold state");let hr=[];for(let gr=0;gr<mr.length;){let vr=mr[gr++],xr=mr[gr++];if(typeof vr!="number"||typeof xr!="number")throw new RangeError("Invalid JSON for fold state");hr.push(foldWidget.range(vr,xr))}return Decoration.set(hr,!0)}});function findFold(mr,hr,gr){var vr;let xr=null;return(vr=mr.field(foldState,!1))===null||vr===void 0||vr.between(hr,gr,(Er,Cr)=>{(!xr||xr.from>Er)&&(xr={from:Er,to:Cr})}),xr}function foldExists(mr,hr,gr){let vr=!1;return mr.between(hr,hr,(xr,Er)=>{xr==hr&&Er==gr&&(vr=!0)}),vr}function maybeEnable(mr,hr){return mr.field(foldState,!1)?hr:hr.concat(StateEffect.appendConfig.of(codeFolding()))}const foldCode=mr=>{for(let hr of selectedLines(mr)){let gr=foldable(mr.state,hr.from,hr.to);if(gr)return mr.dispatch({effects:maybeEnable(mr.state,[foldEffect.of(gr),announceFold(mr,gr)])}),!0}return!1},unfoldCode=mr=>{if(!mr.state.field(foldState,!1))return!1;let hr=[];for(let gr of selectedLines(mr)){let vr=findFold(mr.state,gr.from,gr.to);vr&&hr.push(unfoldEffect.of(vr),announceFold(mr,vr,!1))}return hr.length&&mr.dispatch({effects:hr}),hr.length>0};function announceFold(mr,hr,gr=!0){let vr=mr.state.doc.lineAt(hr.from).number,xr=mr.state.doc.lineAt(hr.to).number;return EditorView.announce.of(`${mr.state.phrase(gr?"Folded lines":"Unfolded lines")} ${vr} ${mr.state.phrase("to")} ${xr}.`)}const foldAll=mr=>{let{state:hr}=mr,gr=[];for(let vr=0;vr<hr.doc.length;){let xr=mr.lineBlockAt(vr),Er=foldable(hr,xr.from,xr.to);Er&&gr.push(foldEffect.of(Er)),vr=(Er?mr.lineBlockAt(Er.to):xr).to+1}return gr.length&&mr.dispatch({effects:maybeEnable(mr.state,gr)}),!!gr.length},unfoldAll=mr=>{let hr=mr.state.field(foldState,!1);if(!hr||!hr.size)return!1;let gr=[];return hr.between(0,mr.state.doc.length,(vr,xr)=>{gr.push(unfoldEffect.of({from:vr,to:xr}))}),mr.dispatch({effects:gr}),!0},foldKeymap=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:foldCode},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:unfoldCode},{key:"Ctrl-Alt-[",run:foldAll},{key:"Ctrl-Alt-]",run:unfoldAll}],defaultConfig={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},foldConfig=Facet.define({combine(mr){return combineConfig(mr,defaultConfig)}});function codeFolding(mr){return[foldState,baseTheme$1$2]}function widgetToDOM(mr,hr){let{state:gr}=mr,vr=gr.facet(foldConfig),xr=Cr=>{let wr=mr.lineBlockAt(mr.posAtDOM(Cr.target)),Rr=findFold(mr.state,wr.from,wr.to);Rr&&mr.dispatch({effects:unfoldEffect.of(Rr)}),Cr.preventDefault()};if(vr.placeholderDOM)return vr.placeholderDOM(mr,xr,hr);let Er=document.createElement("span");return Er.textContent=vr.placeholderText,Er.setAttribute("aria-label",gr.phrase("folded code")),Er.title=gr.phrase("unfold"),Er.className="cm-foldPlaceholder",Er.onclick=xr,Er}const foldWidget=Decoration.replace({widget:new class extends WidgetType{toDOM(mr){return widgetToDOM(mr,null)}}});class PreparedFoldWidget extends WidgetType{constructor(hr){super(),this.value=hr}eq(hr){return this.value==hr.value}toDOM(hr){return widgetToDOM(hr,this.value)}}const foldGutterDefaults={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class FoldMarker extends GutterMarker{constructor(hr,gr){super(),this.config=hr,this.open=gr}eq(hr){return this.config==hr.config&&this.open==hr.open}toDOM(hr){if(this.config.markerDOM)return this.config.markerDOM(this.open);let gr=document.createElement("span");return gr.textContent=this.open?this.config.openText:this.config.closedText,gr.title=hr.state.phrase(this.open?"Fold line":"Unfold line"),gr}}function foldGutter(mr={}){let hr=Object.assign(Object.assign({},foldGutterDefaults),mr),gr=new FoldMarker(hr,!0),vr=new FoldMarker(hr,!1),xr=ViewPlugin.fromClass(class{constructor(Cr){this.from=Cr.viewport.from,this.markers=this.buildMarkers(Cr)}update(Cr){(Cr.docChanged||Cr.viewportChanged||Cr.startState.facet(language)!=Cr.state.facet(language)||Cr.startState.field(foldState,!1)!=Cr.state.field(foldState,!1)||syntaxTree(Cr.startState)!=syntaxTree(Cr.state)||hr.foldingChanged(Cr))&&(this.markers=this.buildMarkers(Cr.view))}buildMarkers(Cr){let wr=new RangeSetBuilder;for(let Rr of Cr.viewportLineBlocks){let kr=findFold(Cr.state,Rr.from,Rr.to)?vr:foldable(Cr.state,Rr.from,Rr.to)?gr:null;kr&&wr.add(Rr.from,Rr.from,kr)}return wr.finish()}}),{domEventHandlers:Er}=hr;return[xr,gutter({class:"cm-foldGutter",markers(Cr){var wr;return((wr=Cr.plugin(xr))===null||wr===void 0?void 0:wr.markers)||RangeSet.empty},initialSpacer(){return new FoldMarker(hr,!1)},domEventHandlers:Object.assign(Object.assign({},Er),{click:(Cr,wr,Rr)=>{if(Er.click&&Er.click(Cr,wr,Rr))return!0;let kr=findFold(Cr.state,wr.from,wr.to);if(kr)return Cr.dispatch({effects:unfoldEffect.of(kr)}),!0;let Dr=foldable(Cr.state,wr.from,wr.to);return Dr?(Cr.dispatch({effects:foldEffect.of(Dr)}),!0):!1}})}),codeFolding()]}const baseTheme$1$2=EditorView.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class HighlightStyle{constructor(hr,gr){this.specs=hr;let vr;function xr(wr){let Rr=StyleModule.newName();return(vr||(vr=Object.create(null)))["."+Rr]=wr,Rr}const Er=typeof gr.all=="string"?gr.all:gr.all?xr(gr.all):void 0,Cr=gr.scope;this.scope=Cr instanceof Language?wr=>wr.prop(languageDataProp)==Cr.data:Cr?wr=>wr==Cr:void 0,this.style=tagHighlighter(hr.map(wr=>({tag:wr.tag,class:wr.class||xr(Object.assign({},wr,{tag:null}))})),{all:Er}).style,this.module=vr?new StyleModule(vr):null,this.themeType=gr.themeType}static define(hr,gr){return new HighlightStyle(hr,gr||{})}}const highlighterFacet=Facet.define(),fallbackHighlighter=Facet.define({combine(mr){return mr.length?[mr[0]]:null}});function getHighlighters(mr){let hr=mr.facet(highlighterFacet);return hr.length?hr:mr.facet(fallbackHighlighter)}function syntaxHighlighting(mr,hr){let gr=[treeHighlighter],vr;return mr instanceof HighlightStyle&&(mr.module&&gr.push(EditorView.styleModule.of(mr.module)),vr=mr.themeType),hr?.fallback?gr.push(fallbackHighlighter.of(mr)):vr?gr.push(highlighterFacet.computeN([EditorView.darkTheme],xr=>xr.facet(EditorView.darkTheme)==(vr=="dark")?[mr]:[])):gr.push(highlighterFacet.of(mr)),gr}class TreeHighlighter{constructor(hr){this.markCache=Object.create(null),this.tree=syntaxTree(hr.state),this.decorations=this.buildDeco(hr,getHighlighters(hr.state)),this.decoratedTo=hr.viewport.to}update(hr){let gr=syntaxTree(hr.state),vr=getHighlighters(hr.state),xr=vr!=getHighlighters(hr.startState),{viewport:Er}=hr.view,Cr=hr.changes.mapPos(this.decoratedTo,1);gr.length<Er.to&&!xr&&gr.type==this.tree.type&&Cr>=Er.to?(this.decorations=this.decorations.map(hr.changes),this.decoratedTo=Cr):(gr!=this.tree||hr.viewportChanged||xr)&&(this.tree=gr,this.decorations=this.buildDeco(hr.view,vr),this.decoratedTo=Er.to)}buildDeco(hr,gr){if(!gr||!this.tree.length)return Decoration.none;let vr=new RangeSetBuilder;for(let{from:xr,to:Er}of hr.visibleRanges)highlightTree(this.tree,gr,(Cr,wr,Rr)=>{vr.add(Cr,wr,this.markCache[Rr]||(this.markCache[Rr]=Decoration.mark({class:Rr})))},xr,Er);return vr.finish()}}const treeHighlighter=Prec.high(ViewPlugin.fromClass(TreeHighlighter,{decorations:mr=>mr.decorations})),defaultHighlightStyle=HighlightStyle.define([{tag:tags.meta,color:"#404740"},{tag:tags.link,textDecoration:"underline"},{tag:tags.heading,textDecoration:"underline",fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.strong,fontWeight:"bold"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.keyword,color:"#708"},{tag:[tags.atom,tags.bool,tags.url,tags.contentSeparator,tags.labelName],color:"#219"},{tag:[tags.literal,tags.inserted],color:"#164"},{tag:[tags.string,tags.deleted],color:"#a11"},{tag:[tags.regexp,tags.escape,tags.special(tags.string)],color:"#e40"},{tag:tags.definition(tags.variableName),color:"#00f"},{tag:tags.local(tags.variableName),color:"#30a"},{tag:[tags.typeName,tags.namespace],color:"#085"},{tag:tags.className,color:"#167"},{tag:[tags.special(tags.variableName),tags.macroName],color:"#256"},{tag:tags.definition(tags.propertyName),color:"#00c"},{tag:tags.comment,color:"#940"},{tag:tags.invalid,color:"#f00"}]),baseTheme$3=EditorView.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),DefaultScanDist=1e4,DefaultBrackets="()[]{}",bracketMatchingConfig=Facet.define({combine(mr){return combineConfig(mr,{afterCursor:!0,brackets:DefaultBrackets,maxScanDistance:DefaultScanDist,renderMatch:defaultRenderMatch})}}),matchingMark=Decoration.mark({class:"cm-matchingBracket"}),nonmatchingMark=Decoration.mark({class:"cm-nonmatchingBracket"});function defaultRenderMatch(mr){let hr=[],gr=mr.matched?matchingMark:nonmatchingMark;return hr.push(gr.range(mr.start.from,mr.start.to)),mr.end&&hr.push(gr.range(mr.end.from,mr.end.to)),hr}const bracketMatchingState=StateField.define({create(){return Decoration.none},update(mr,hr){if(!hr.docChanged&&!hr.selection)return mr;let gr=[],vr=hr.state.facet(bracketMatchingConfig);for(let xr of hr.state.selection.ranges){if(!xr.empty)continue;let Er=matchBrackets(hr.state,xr.head,-1,vr)||xr.head>0&&matchBrackets(hr.state,xr.head-1,1,vr)||vr.afterCursor&&(matchBrackets(hr.state,xr.head,1,vr)||xr.head<hr.state.doc.length&&matchBrackets(hr.state,xr.head+1,-1,vr));Er&&(gr=gr.concat(vr.renderMatch(Er,hr.state)))}return Decoration.set(gr,!0)},provide:mr=>EditorView.decorations.from(mr)}),bracketMatchingUnique=[bracketMatchingState,baseTheme$3];function bracketMatching(mr={}){return[bracketMatchingConfig.of(mr),bracketMatchingUnique]}const bracketMatchingHandle=new NodeProp;function matchingNodes(mr,hr,gr){let vr=mr.prop(hr<0?NodeProp.openedBy:NodeProp.closedBy);if(vr)return vr;if(mr.name.length==1){let xr=gr.indexOf(mr.name);if(xr>-1&&xr%2==(hr<0?1:0))return[gr[xr+hr]]}return null}function findHandle(mr){let hr=mr.type.prop(bracketMatchingHandle);return hr?hr(mr.node):mr}function matchBrackets(mr,hr,gr,vr={}){let xr=vr.maxScanDistance||DefaultScanDist,Er=vr.brackets||DefaultBrackets,Cr=syntaxTree(mr),wr=Cr.resolveInner(hr,gr);for(let Rr=wr;Rr;Rr=Rr.parent){let kr=matchingNodes(Rr.type,gr,Er);if(kr&&Rr.from<Rr.to){let Dr=findHandle(Rr);if(Dr&&(gr>0?hr>=Dr.from&&hr<Dr.to:hr>Dr.from&&hr<=Dr.to))return matchMarkedBrackets(mr,hr,gr,Rr,Dr,kr,Er)}}return matchPlainBrackets(mr,hr,gr,Cr,wr.type,xr,Er)}function matchMarkedBrackets(mr,hr,gr,vr,xr,Er,Cr){let wr=vr.parent,Rr={from:xr.from,to:xr.to},kr=0,Dr=wr?.cursor();if(Dr&&(gr<0?Dr.childBefore(vr.from):Dr.childAfter(vr.to)))do if(gr<0?Dr.to<=vr.from:Dr.from>=vr.to){if(kr==0&&Er.indexOf(Dr.type.name)>-1&&Dr.from<Dr.to){let Br=findHandle(Dr);return{start:Rr,end:Br?{from:Br.from,to:Br.to}:void 0,matched:!0}}else if(matchingNodes(Dr.type,gr,Cr))kr++;else if(matchingNodes(Dr.type,-gr,Cr)){if(kr==0){let Br=findHandle(Dr);return{start:Rr,end:Br&&Br.from<Br.to?{from:Br.from,to:Br.to}:void 0,matched:!1}}kr--}}while(gr<0?Dr.prevSibling():Dr.nextSibling());return{start:Rr,matched:!1}}function matchPlainBrackets(mr,hr,gr,vr,xr,Er,Cr){let wr=gr<0?mr.sliceDoc(hr-1,hr):mr.sliceDoc(hr,hr+1),Rr=Cr.indexOf(wr);if(Rr<0||Rr%2==0!=gr>0)return null;let kr={from:gr<0?hr-1:hr,to:gr>0?hr+1:hr},Dr=mr.doc.iterRange(hr,gr>0?mr.doc.length:0),Br=0;for(let Hr=0;!Dr.next().done&&Hr<=Er;){let Gr=Dr.value;gr<0&&(Hr+=Gr.length);let qr=hr+Hr*gr;for(let zr=gr>0?0:Gr.length-1,Qr=gr>0?Gr.length:-1;zr!=Qr;zr+=gr){let sn=Cr.indexOf(Gr[zr]);if(!(sn<0||vr.resolveInner(qr+zr,1).type!=xr))if(sn%2==0==gr>0)Br++;else{if(Br==1)return{start:kr,end:{from:qr+zr,to:qr+zr+1},matched:sn>>1==Rr>>1};Br--}}gr>0&&(Hr+=Gr.length)}return Dr.done?{start:kr,matched:!1}:null}const noTokens=Object.create(null),typeArray=[NodeType.none],warned=[],byTag=Object.create(null),defaultTable=Object.create(null);for(let[mr,hr]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])defaultTable[mr]=createTokenType(noTokens,hr);function warnForPart(mr,hr){warned.indexOf(mr)>-1||(warned.push(mr),console.warn(hr))}function createTokenType(mr,hr){let gr=[];for(let wr of hr.split(" ")){let Rr=[];for(let kr of wr.split(".")){let Dr=mr[kr]||tags[kr];Dr?typeof Dr=="function"?Rr.length?Rr=Rr.map(Dr):warnForPart(kr,`Modifier ${kr} used at start of tag`):Rr.length?warnForPart(kr,`Tag ${kr} used as modifier`):Rr=Array.isArray(Dr)?Dr:[Dr]:warnForPart(kr,`Unknown highlighting tag ${kr}`)}for(let kr of Rr)gr.push(kr)}if(!gr.length)return 0;let vr=hr.replace(/ /g,"_"),xr=vr+" "+gr.map(wr=>wr.id),Er=byTag[xr];if(Er)return Er.id;let Cr=byTag[xr]=NodeType.define({id:typeArray.length,name:vr,props:[styleTags({[vr]:gr})]});return typeArray.push(Cr),Cr.id}Direction.RTL,Direction.LTR;const jsonParseLinter=()=>mr=>{try{JSON.parse(mr.state.doc.toString())}catch(hr){if(!(hr instanceof SyntaxError))throw hr;const gr=getErrorPosition(hr,mr.state.doc);return[{from:gr,message:hr.message,severity:"error",to:gr}]}return[]};function getErrorPosition(mr,hr){let gr;return(gr=mr.message.match(/at position (\d+)/))?Math.min(+gr[1],hr.length):(gr=mr.message.match(/at line (\d+) column (\d+)/))?Math.min(hr.line(+gr[1]).from+ +gr[2]-1,hr.length):0}const jsonLanguage=LRLanguage.define({name:"json",parser:parser.configure({props:[indentNodeProp.add({Object:continuedIndent({except:/^\s*\}/}),Array:continuedIndent({except:/^\s*\]/})}),foldNodeProp.add({"Object Array":foldInside})]}),languageData:{closeBrackets:{brackets:["[","{",'"']},indentOnInput:/^\s*[\}\]]$/}});function json(){return new LanguageSupport(jsonLanguage)}function _objectWithoutPropertiesLoose$2(mr,hr){if(mr==null)return{};var gr={};for(var vr in mr)if({}.hasOwnProperty.call(mr,vr)){if(hr.includes(vr))continue;gr[vr]=mr[vr]}return gr}const toggleComment=mr=>{let{state:hr}=mr,gr=hr.doc.lineAt(hr.selection.main.from),vr=getConfig(mr.state,gr.from);return vr.line?toggleLineComment(mr):vr.block?toggleBlockCommentByLine(mr):!1};function command(mr,hr){return({state:gr,dispatch:vr})=>{if(gr.readOnly)return!1;let xr=mr(hr,gr);return xr?(vr(gr.update(xr)),!0):!1}}const toggleLineComment=command(changeLineComment,0),toggleBlockComment=command(changeBlockComment,0),toggleBlockCommentByLine=command((mr,hr)=>changeBlockComment(mr,hr,selectedLineRanges(hr)),0);function getConfig(mr,hr){let gr=mr.languageDataAt("commentTokens",hr);return gr.length?gr[0]:{}}const SearchMargin=50;function findBlockComment(mr,{open:hr,close:gr},vr,xr){let Er=mr.sliceDoc(vr-SearchMargin,vr),Cr=mr.sliceDoc(xr,xr+SearchMargin),wr=/\s*$/.exec(Er)[0].length,Rr=/^\s*/.exec(Cr)[0].length,kr=Er.length-wr;if(Er.slice(kr-hr.length,kr)==hr&&Cr.slice(Rr,Rr+gr.length)==gr)return{open:{pos:vr-wr,margin:wr&&1},close:{pos:xr+Rr,margin:Rr&&1}};let Dr,Br;xr-vr<=2*SearchMargin?Dr=Br=mr.sliceDoc(vr,xr):(Dr=mr.sliceDoc(vr,vr+SearchMargin),Br=mr.sliceDoc(xr-SearchMargin,xr));let Hr=/^\s*/.exec(Dr)[0].length,Gr=/\s*$/.exec(Br)[0].length,qr=Br.length-Gr-gr.length;return Dr.slice(Hr,Hr+hr.length)==hr&&Br.slice(qr,qr+gr.length)==gr?{open:{pos:vr+Hr+hr.length,margin:/\s/.test(Dr.charAt(Hr+hr.length))?1:0},close:{pos:xr-Gr-gr.length,margin:/\s/.test(Br.charAt(qr-1))?1:0}}:null}function selectedLineRanges(mr){let hr=[];for(let gr of mr.selection.ranges){let vr=mr.doc.lineAt(gr.from),xr=gr.to<=vr.to?vr:mr.doc.lineAt(gr.to);xr.from>vr.from&&xr.from==gr.to&&(xr=gr.to==vr.to+1?vr:mr.doc.lineAt(gr.to-1));let Er=hr.length-1;Er>=0&&hr[Er].to>vr.from?hr[Er].to=xr.to:hr.push({from:vr.from+/^\s*/.exec(vr.text)[0].length,to:xr.to})}return hr}function changeBlockComment(mr,hr,gr=hr.selection.ranges){let vr=gr.map(Er=>getConfig(hr,Er.from).block);if(!vr.every(Er=>Er))return null;let xr=gr.map((Er,Cr)=>findBlockComment(hr,vr[Cr],Er.from,Er.to));if(mr!=2&&!xr.every(Er=>Er))return{changes:hr.changes(gr.map((Er,Cr)=>xr[Cr]?[]:[{from:Er.from,insert:vr[Cr].open+" "},{from:Er.to,insert:" "+vr[Cr].close}]))};if(mr!=1&&xr.some(Er=>Er)){let Er=[];for(let Cr=0,wr;Cr<xr.length;Cr++)if(wr=xr[Cr]){let Rr=vr[Cr],{open:kr,close:Dr}=wr;Er.push({from:kr.pos-Rr.open.length,to:kr.pos+kr.margin},{from:Dr.pos-Dr.margin,to:Dr.pos+Rr.close.length})}return{changes:Er}}return null}function changeLineComment(mr,hr,gr=hr.selection.ranges){let vr=[],xr=-1;for(let{from:Er,to:Cr}of gr){let wr=vr.length,Rr=1e9,kr=getConfig(hr,Er).line;if(kr){for(let Dr=Er;Dr<=Cr;){let Br=hr.doc.lineAt(Dr);if(Br.from>xr&&(Er==Cr||Cr>Br.from)){xr=Br.from;let Hr=/^\s*/.exec(Br.text)[0].length,Gr=Hr==Br.length,qr=Br.text.slice(Hr,Hr+kr.length)==kr?Hr:-1;Hr<Br.text.length&&Hr<Rr&&(Rr=Hr),vr.push({line:Br,comment:qr,token:kr,indent:Hr,empty:Gr,single:!1})}Dr=Br.to+1}if(Rr<1e9)for(let Dr=wr;Dr<vr.length;Dr++)vr[Dr].indent<vr[Dr].line.text.length&&(vr[Dr].indent=Rr);vr.length==wr+1&&(vr[wr].single=!0)}}if(mr!=2&&vr.some(Er=>Er.comment<0&&(!Er.empty||Er.single))){let Er=[];for(let{line:wr,token:Rr,indent:kr,empty:Dr,single:Br}of vr)(Br||!Dr)&&Er.push({from:wr.from+kr,insert:Rr+" "});let Cr=hr.changes(Er);return{changes:Cr,selection:hr.selection.map(Cr,1)}}else if(mr!=1&&vr.some(Er=>Er.comment>=0)){let Er=[];for(let{line:Cr,comment:wr,token:Rr}of vr)if(wr>=0){let kr=Cr.from+wr,Dr=kr+Rr.length;Cr.text[Dr-Cr.from]==" "&&Dr++,Er.push({from:kr,to:Dr})}return{changes:Er}}return null}const fromHistory=Annotation.define(),isolateHistory=Annotation.define(),invertedEffects=Facet.define(),historyConfig=Facet.define({combine(mr){return combineConfig(mr,{minDepth:100,newGroupDelay:500,joinToEvent:(hr,gr)=>gr},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(hr,gr)=>(vr,xr)=>hr(vr,xr)||gr(vr,xr)})}}),historyField_=StateField.define({create(){return HistoryState.empty},update(mr,hr){let gr=hr.state.facet(historyConfig),vr=hr.annotation(fromHistory);if(vr){let Rr=HistEvent.fromTransaction(hr,vr.selection),kr=vr.side,Dr=kr==0?mr.undone:mr.done;return Rr?Dr=updateBranch(Dr,Dr.length,gr.minDepth,Rr):Dr=addSelection(Dr,hr.startState.selection),new HistoryState(kr==0?vr.rest:Dr,kr==0?Dr:vr.rest)}let xr=hr.annotation(isolateHistory);if((xr=="full"||xr=="before")&&(mr=mr.isolate()),hr.annotation(Transaction.addToHistory)===!1)return hr.changes.empty?mr:mr.addMapping(hr.changes.desc);let Er=HistEvent.fromTransaction(hr),Cr=hr.annotation(Transaction.time),wr=hr.annotation(Transaction.userEvent);return Er?mr=mr.addChanges(Er,Cr,wr,gr,hr):hr.selection&&(mr=mr.addSelection(hr.startState.selection,Cr,wr,gr.newGroupDelay)),(xr=="full"||xr=="after")&&(mr=mr.isolate()),mr},toJSON(mr){return{done:mr.done.map(hr=>hr.toJSON()),undone:mr.undone.map(hr=>hr.toJSON())}},fromJSON(mr){return new HistoryState(mr.done.map(HistEvent.fromJSON),mr.undone.map(HistEvent.fromJSON))}});function history(mr={}){return[historyField_,historyConfig.of(mr),EditorView.domEventHandlers({beforeinput(hr,gr){let vr=hr.inputType=="historyUndo"?undo:hr.inputType=="historyRedo"?redo:null;return vr?(hr.preventDefault(),vr(gr)):!1}})]}function cmd(mr,hr){return function({state:gr,dispatch:vr}){if(!hr&&gr.readOnly)return!1;let xr=gr.field(historyField_,!1);if(!xr)return!1;let Er=xr.pop(mr,gr,hr);return Er?(vr(Er),!0):!1}}const undo=cmd(0,!1),redo=cmd(1,!1),undoSelection=cmd(0,!0),redoSelection=cmd(1,!0);class HistEvent{constructor(hr,gr,vr,xr,Er){this.changes=hr,this.effects=gr,this.mapped=vr,this.startSelection=xr,this.selectionsAfter=Er}setSelAfter(hr){return new HistEvent(this.changes,this.effects,this.mapped,this.startSelection,hr)}toJSON(){var hr,gr,vr;return{changes:(hr=this.changes)===null||hr===void 0?void 0:hr.toJSON(),mapped:(gr=this.mapped)===null||gr===void 0?void 0:gr.toJSON(),startSelection:(vr=this.startSelection)===null||vr===void 0?void 0:vr.toJSON(),selectionsAfter:this.selectionsAfter.map(xr=>xr.toJSON())}}static fromJSON(hr){return new HistEvent(hr.changes&&ChangeSet.fromJSON(hr.changes),[],hr.mapped&&ChangeDesc.fromJSON(hr.mapped),hr.startSelection&&EditorSelection.fromJSON(hr.startSelection),hr.selectionsAfter.map(EditorSelection.fromJSON))}static fromTransaction(hr,gr){let vr=none$1;for(let xr of hr.startState.facet(invertedEffects)){let Er=xr(hr);Er.length&&(vr=vr.concat(Er))}return!vr.length&&hr.changes.empty?null:new HistEvent(hr.changes.invert(hr.startState.doc),vr,void 0,gr||hr.startState.selection,none$1)}static selection(hr){return new HistEvent(void 0,none$1,void 0,void 0,hr)}}function updateBranch(mr,hr,gr,vr){let xr=hr+1>gr+20?hr-gr-1:0,Er=mr.slice(xr,hr);return Er.push(vr),Er}function isAdjacent(mr,hr){let gr=[],vr=!1;return mr.iterChangedRanges((xr,Er)=>gr.push(xr,Er)),hr.iterChangedRanges((xr,Er,Cr,wr)=>{for(let Rr=0;Rr<gr.length;){let kr=gr[Rr++],Dr=gr[Rr++];wr>=kr&&Cr<=Dr&&(vr=!0)}}),vr}function eqSelectionShape(mr,hr){return mr.ranges.length==hr.ranges.length&&mr.ranges.filter((gr,vr)=>gr.empty!=hr.ranges[vr].empty).length===0}function conc(mr,hr){return mr.length?hr.length?mr.concat(hr):mr:hr}const none$1=[],MaxSelectionsPerEvent=200;function addSelection(mr,hr){if(mr.length){let gr=mr[mr.length-1],vr=gr.selectionsAfter.slice(Math.max(0,gr.selectionsAfter.length-MaxSelectionsPerEvent));return vr.length&&vr[vr.length-1].eq(hr)?mr:(vr.push(hr),updateBranch(mr,mr.length-1,1e9,gr.setSelAfter(vr)))}else return[HistEvent.selection([hr])]}function popSelection(mr){let hr=mr[mr.length-1],gr=mr.slice();return gr[mr.length-1]=hr.setSelAfter(hr.selectionsAfter.slice(0,hr.selectionsAfter.length-1)),gr}function addMappingToBranch(mr,hr){if(!mr.length)return mr;let gr=mr.length,vr=none$1;for(;gr;){let xr=mapEvent(mr[gr-1],hr,vr);if(xr.changes&&!xr.changes.empty||xr.effects.length){let Er=mr.slice(0,gr);return Er[gr-1]=xr,Er}else hr=xr.mapped,gr--,vr=xr.selectionsAfter}return vr.length?[HistEvent.selection(vr)]:none$1}function mapEvent(mr,hr,gr){let vr=conc(mr.selectionsAfter.length?mr.selectionsAfter.map(wr=>wr.map(hr)):none$1,gr);if(!mr.changes)return HistEvent.selection(vr);let xr=mr.changes.map(hr),Er=hr.mapDesc(mr.changes,!0),Cr=mr.mapped?mr.mapped.composeDesc(Er):Er;return new HistEvent(xr,StateEffect.mapEffects(mr.effects,hr),Cr,mr.startSelection.map(Er),vr)}const joinableUserEvent=/^(input\.type|delete)($|\.)/;class HistoryState{constructor(hr,gr,vr=0,xr=void 0){this.done=hr,this.undone=gr,this.prevTime=vr,this.prevUserEvent=xr}isolate(){return this.prevTime?new HistoryState(this.done,this.undone):this}addChanges(hr,gr,vr,xr,Er){let Cr=this.done,wr=Cr[Cr.length-1];return wr&&wr.changes&&!wr.changes.empty&&hr.changes&&(!vr||joinableUserEvent.test(vr))&&(!wr.selectionsAfter.length&&gr-this.prevTime<xr.newGroupDelay&&xr.joinToEvent(Er,isAdjacent(wr.changes,hr.changes))||vr=="input.type.compose")?Cr=updateBranch(Cr,Cr.length-1,xr.minDepth,new HistEvent(hr.changes.compose(wr.changes),conc(StateEffect.mapEffects(hr.effects,wr.changes),wr.effects),wr.mapped,wr.startSelection,none$1)):Cr=updateBranch(Cr,Cr.length,xr.minDepth,hr),new HistoryState(Cr,none$1,gr,vr)}addSelection(hr,gr,vr,xr){let Er=this.done.length?this.done[this.done.length-1].selectionsAfter:none$1;return Er.length>0&&gr-this.prevTime<xr&&vr==this.prevUserEvent&&vr&&/^select($|\.)/.test(vr)&&eqSelectionShape(Er[Er.length-1],hr)?this:new HistoryState(addSelection(this.done,hr),this.undone,gr,vr)}addMapping(hr){return new HistoryState(addMappingToBranch(this.done,hr),addMappingToBranch(this.undone,hr),this.prevTime,this.prevUserEvent)}pop(hr,gr,vr){let xr=hr==0?this.done:this.undone;if(xr.length==0)return null;let Er=xr[xr.length-1],Cr=Er.selectionsAfter[0]||gr.selection;if(vr&&Er.selectionsAfter.length)return gr.update({selection:Er.selectionsAfter[Er.selectionsAfter.length-1],annotations:fromHistory.of({side:hr,rest:popSelection(xr),selection:Cr}),userEvent:hr==0?"select.undo":"select.redo",scrollIntoView:!0});if(Er.changes){let wr=xr.length==1?none$1:xr.slice(0,xr.length-1);return Er.mapped&&(wr=addMappingToBranch(wr,Er.mapped)),gr.update({changes:Er.changes,selection:Er.startSelection,effects:Er.effects,annotations:fromHistory.of({side:hr,rest:wr,selection:Cr}),filter:!1,userEvent:hr==0?"undo":"redo",scrollIntoView:!0})}else return null}}HistoryState.empty=new HistoryState(none$1,none$1);const historyKeymap=[{key:"Mod-z",run:undo,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:redo,preventDefault:!0},{linux:"Ctrl-Shift-z",run:redo,preventDefault:!0},{key:"Mod-u",run:undoSelection,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:redoSelection,preventDefault:!0}];function updateSel(mr,hr){return EditorSelection.create(mr.ranges.map(hr),mr.mainIndex)}function setSel(mr,hr){return mr.update({selection:hr,scrollIntoView:!0,userEvent:"select"})}function moveSel({state:mr,dispatch:hr},gr){let vr=updateSel(mr.selection,gr);return vr.eq(mr.selection,!0)?!1:(hr(setSel(mr,vr)),!0)}function rangeEnd(mr,hr){return EditorSelection.cursor(hr?mr.to:mr.from)}function cursorByChar(mr,hr){return moveSel(mr,gr=>gr.empty?mr.moveByChar(gr,hr):rangeEnd(gr,hr))}function ltrAtCursor(mr){return mr.textDirectionAt(mr.state.selection.main.head)==Direction.LTR}const cursorCharLeft=mr=>cursorByChar(mr,!ltrAtCursor(mr)),cursorCharRight=mr=>cursorByChar(mr,ltrAtCursor(mr));function cursorByGroup(mr,hr){return moveSel(mr,gr=>gr.empty?mr.moveByGroup(gr,hr):rangeEnd(gr,hr))}const cursorGroupLeft=mr=>cursorByGroup(mr,!ltrAtCursor(mr)),cursorGroupRight=mr=>cursorByGroup(mr,ltrAtCursor(mr));function interestingNode(mr,hr,gr){if(hr.type.prop(gr))return!0;let vr=hr.to-hr.from;return vr&&(vr>2||/[^\s,.;:]/.test(mr.sliceDoc(hr.from,hr.to)))||hr.firstChild}function moveBySyntax(mr,hr,gr){let vr=syntaxTree(mr).resolveInner(hr.head),xr=gr?NodeProp.closedBy:NodeProp.openedBy;for(let Rr=hr.head;;){let kr=gr?vr.childAfter(Rr):vr.childBefore(Rr);if(!kr)break;interestingNode(mr,kr,xr)?vr=kr:Rr=gr?kr.to:kr.from}let Er=vr.type.prop(xr),Cr,wr;return Er&&(Cr=gr?matchBrackets(mr,vr.from,1):matchBrackets(mr,vr.to,-1))&&Cr.matched?wr=gr?Cr.end.to:Cr.end.from:wr=gr?vr.to:vr.from,EditorSelection.cursor(wr,gr?-1:1)}const cursorSyntaxLeft=mr=>moveSel(mr,hr=>moveBySyntax(mr.state,hr,!ltrAtCursor(mr))),cursorSyntaxRight=mr=>moveSel(mr,hr=>moveBySyntax(mr.state,hr,ltrAtCursor(mr)));function cursorByLine(mr,hr){return moveSel(mr,gr=>{if(!gr.empty)return rangeEnd(gr,hr);let vr=mr.moveVertically(gr,hr);return vr.head!=gr.head?vr:mr.moveToLineBoundary(gr,hr)})}const cursorLineUp=mr=>cursorByLine(mr,!1),cursorLineDown=mr=>cursorByLine(mr,!0);function pageInfo(mr){let hr=mr.scrollDOM.clientHeight<mr.scrollDOM.scrollHeight-2,gr=0,vr=0,xr;if(hr){for(let Er of mr.state.facet(EditorView.scrollMargins)){let Cr=Er(mr);Cr?.top&&(gr=Math.max(Cr?.top,gr)),Cr?.bottom&&(vr=Math.max(Cr?.bottom,vr))}xr=mr.scrollDOM.clientHeight-gr-vr}else xr=(mr.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:gr,marginBottom:vr,selfScroll:hr,height:Math.max(mr.defaultLineHeight,xr-5)}}function cursorByPage(mr,hr){let gr=pageInfo(mr),{state:vr}=mr,xr=updateSel(vr.selection,Cr=>Cr.empty?mr.moveVertically(Cr,hr,gr.height):rangeEnd(Cr,hr));if(xr.eq(vr.selection))return!1;let Er;if(gr.selfScroll){let Cr=mr.coordsAtPos(vr.selection.main.head),wr=mr.scrollDOM.getBoundingClientRect(),Rr=wr.top+gr.marginTop,kr=wr.bottom-gr.marginBottom;Cr&&Cr.top>Rr&&Cr.bottom<kr&&(Er=EditorView.scrollIntoView(xr.main.head,{y:"start",yMargin:Cr.top-Rr}))}return mr.dispatch(setSel(vr,xr),{effects:Er}),!0}const cursorPageUp=mr=>cursorByPage(mr,!1),cursorPageDown=mr=>cursorByPage(mr,!0);function moveByLineBoundary(mr,hr,gr){let vr=mr.lineBlockAt(hr.head),xr=mr.moveToLineBoundary(hr,gr);if(xr.head==hr.head&&xr.head!=(gr?vr.to:vr.from)&&(xr=mr.moveToLineBoundary(hr,gr,!1)),!gr&&xr.head==vr.from&&vr.length){let Er=/^\s*/.exec(mr.state.sliceDoc(vr.from,Math.min(vr.from+100,vr.to)))[0].length;Er&&hr.head!=vr.from+Er&&(xr=EditorSelection.cursor(vr.from+Er))}return xr}const cursorLineBoundaryForward=mr=>moveSel(mr,hr=>moveByLineBoundary(mr,hr,!0)),cursorLineBoundaryBackward=mr=>moveSel(mr,hr=>moveByLineBoundary(mr,hr,!1)),cursorLineBoundaryLeft=mr=>moveSel(mr,hr=>moveByLineBoundary(mr,hr,!ltrAtCursor(mr))),cursorLineBoundaryRight=mr=>moveSel(mr,hr=>moveByLineBoundary(mr,hr,ltrAtCursor(mr))),cursorLineStart=mr=>moveSel(mr,hr=>EditorSelection.cursor(mr.lineBlockAt(hr.head).from,1)),cursorLineEnd=mr=>moveSel(mr,hr=>EditorSelection.cursor(mr.lineBlockAt(hr.head).to,-1));function toMatchingBracket(mr,hr,gr){let vr=!1,xr=updateSel(mr.selection,Er=>{let Cr=matchBrackets(mr,Er.head,-1)||matchBrackets(mr,Er.head,1)||Er.head>0&&matchBrackets(mr,Er.head-1,1)||Er.head<mr.doc.length&&matchBrackets(mr,Er.head+1,-1);if(!Cr||!Cr.end)return Er;vr=!0;let wr=Cr.start.from==Er.head?Cr.end.to:Cr.end.from;return EditorSelection.cursor(wr)});return vr?(hr(setSel(mr,xr)),!0):!1}const cursorMatchingBracket=({state:mr,dispatch:hr})=>toMatchingBracket(mr,hr);function extendSel(mr,hr){let gr=updateSel(mr.state.selection,vr=>{let xr=hr(vr);return EditorSelection.range(vr.anchor,xr.head,xr.goalColumn,xr.bidiLevel||void 0)});return gr.eq(mr.state.selection)?!1:(mr.dispatch(setSel(mr.state,gr)),!0)}function selectByChar(mr,hr){return extendSel(mr,gr=>mr.moveByChar(gr,hr))}const selectCharLeft=mr=>selectByChar(mr,!ltrAtCursor(mr)),selectCharRight=mr=>selectByChar(mr,ltrAtCursor(mr));function selectByGroup(mr,hr){return extendSel(mr,gr=>mr.moveByGroup(gr,hr))}const selectGroupLeft=mr=>selectByGroup(mr,!ltrAtCursor(mr)),selectGroupRight=mr=>selectByGroup(mr,ltrAtCursor(mr)),selectSyntaxLeft=mr=>extendSel(mr,hr=>moveBySyntax(mr.state,hr,!ltrAtCursor(mr))),selectSyntaxRight=mr=>extendSel(mr,hr=>moveBySyntax(mr.state,hr,ltrAtCursor(mr)));function selectByLine(mr,hr){return extendSel(mr,gr=>mr.moveVertically(gr,hr))}const selectLineUp=mr=>selectByLine(mr,!1),selectLineDown=mr=>selectByLine(mr,!0);function selectByPage(mr,hr){return extendSel(mr,gr=>mr.moveVertically(gr,hr,pageInfo(mr).height))}const selectPageUp=mr=>selectByPage(mr,!1),selectPageDown=mr=>selectByPage(mr,!0),selectLineBoundaryForward=mr=>extendSel(mr,hr=>moveByLineBoundary(mr,hr,!0)),selectLineBoundaryBackward=mr=>extendSel(mr,hr=>moveByLineBoundary(mr,hr,!1)),selectLineBoundaryLeft=mr=>extendSel(mr,hr=>moveByLineBoundary(mr,hr,!ltrAtCursor(mr))),selectLineBoundaryRight=mr=>extendSel(mr,hr=>moveByLineBoundary(mr,hr,ltrAtCursor(mr))),selectLineStart=mr=>extendSel(mr,hr=>EditorSelection.cursor(mr.lineBlockAt(hr.head).from)),selectLineEnd=mr=>extendSel(mr,hr=>EditorSelection.cursor(mr.lineBlockAt(hr.head).to)),cursorDocStart=({state:mr,dispatch:hr})=>(hr(setSel(mr,{anchor:0})),!0),cursorDocEnd=({state:mr,dispatch:hr})=>(hr(setSel(mr,{anchor:mr.doc.length})),!0),selectDocStart=({state:mr,dispatch:hr})=>(hr(setSel(mr,{anchor:mr.selection.main.anchor,head:0})),!0),selectDocEnd=({state:mr,dispatch:hr})=>(hr(setSel(mr,{anchor:mr.selection.main.anchor,head:mr.doc.length})),!0),selectAll=({state:mr,dispatch:hr})=>(hr(mr.update({selection:{anchor:0,head:mr.doc.length},userEvent:"select"})),!0),selectLine=({state:mr,dispatch:hr})=>{let gr=selectedLineBlocks(mr).map(({from:vr,to:xr})=>EditorSelection.range(vr,Math.min(xr+1,mr.doc.length)));return hr(mr.update({selection:EditorSelection.create(gr),userEvent:"select"})),!0},selectParentSyntax=({state:mr,dispatch:hr})=>{let gr=updateSel(mr.selection,vr=>{let xr=syntaxTree(mr),Er=xr.resolveStack(vr.from,1);if(vr.empty){let Cr=xr.resolveStack(vr.from,-1);Cr.node.from>=Er.node.from&&Cr.node.to<=Er.node.to&&(Er=Cr)}for(let Cr=Er;Cr;Cr=Cr.next){let{node:wr}=Cr;if((wr.from<vr.from&&wr.to>=vr.to||wr.to>vr.to&&wr.from<=vr.from)&&Cr.next)return EditorSelection.range(wr.to,wr.from)}return vr});return gr.eq(mr.selection)?!1:(hr(setSel(mr,gr)),!0)},simplifySelection=({state:mr,dispatch:hr})=>{let gr=mr.selection,vr=null;return gr.ranges.length>1?vr=EditorSelection.create([gr.main]):gr.main.empty||(vr=EditorSelection.create([EditorSelection.cursor(gr.main.head)])),vr?(hr(setSel(mr,vr)),!0):!1};function deleteBy(mr,hr){if(mr.state.readOnly)return!1;let gr="delete.selection",{state:vr}=mr,xr=vr.changeByRange(Er=>{let{from:Cr,to:wr}=Er;if(Cr==wr){let Rr=hr(Er);Rr<Cr?(gr="delete.backward",Rr=skipAtomic(mr,Rr,!1)):Rr>Cr&&(gr="delete.forward",Rr=skipAtomic(mr,Rr,!0)),Cr=Math.min(Cr,Rr),wr=Math.max(wr,Rr)}else Cr=skipAtomic(mr,Cr,!1),wr=skipAtomic(mr,wr,!0);return Cr==wr?{range:Er}:{changes:{from:Cr,to:wr},range:EditorSelection.cursor(Cr,Cr<Er.head?-1:1)}});return xr.changes.empty?!1:(mr.dispatch(vr.update(xr,{scrollIntoView:!0,userEvent:gr,effects:gr=="delete.selection"?EditorView.announce.of(vr.phrase("Selection deleted")):void 0})),!0)}function skipAtomic(mr,hr,gr){if(mr instanceof EditorView)for(let vr of mr.state.facet(EditorView.atomicRanges).map(xr=>xr(mr)))vr.between(hr,hr,(xr,Er)=>{xr<hr&&Er>hr&&(hr=gr?Er:xr)});return hr}const deleteByChar=(mr,hr,gr)=>deleteBy(mr,vr=>{let xr=vr.from,{state:Er}=mr,Cr=Er.doc.lineAt(xr),wr,Rr;if(gr&&!hr&&xr>Cr.from&&xr<Cr.from+200&&!/[^ \t]/.test(wr=Cr.text.slice(0,xr-Cr.from))){if(wr[wr.length-1]=="	")return xr-1;let kr=countColumn(wr,Er.tabSize),Dr=kr%getIndentUnit(Er)||getIndentUnit(Er);for(let Br=0;Br<Dr&&wr[wr.length-1-Br]==" ";Br++)xr--;Rr=xr}else Rr=findClusterBreak(Cr.text,xr-Cr.from,hr,hr)+Cr.from,Rr==xr&&Cr.number!=(hr?Er.doc.lines:1)?Rr+=hr?1:-1:!hr&&/[\ufe00-\ufe0f]/.test(Cr.text.slice(Rr-Cr.from,xr-Cr.from))&&(Rr=findClusterBreak(Cr.text,Rr-Cr.from,!1,!1)+Cr.from);return Rr}),deleteCharBackward=mr=>deleteByChar(mr,!1,!0),deleteCharForward=mr=>deleteByChar(mr,!0,!1),deleteByGroup=(mr,hr)=>deleteBy(mr,gr=>{let vr=gr.head,{state:xr}=mr,Er=xr.doc.lineAt(vr),Cr=xr.charCategorizer(vr);for(let wr=null;;){if(vr==(hr?Er.to:Er.from)){vr==gr.head&&Er.number!=(hr?xr.doc.lines:1)&&(vr+=hr?1:-1);break}let Rr=findClusterBreak(Er.text,vr-Er.from,hr)+Er.from,kr=Er.text.slice(Math.min(vr,Rr)-Er.from,Math.max(vr,Rr)-Er.from),Dr=Cr(kr);if(wr!=null&&Dr!=wr)break;(kr!=" "||vr!=gr.head)&&(wr=Dr),vr=Rr}return vr}),deleteGroupBackward=mr=>deleteByGroup(mr,!1),deleteGroupForward=mr=>deleteByGroup(mr,!0),deleteToLineEnd=mr=>deleteBy(mr,hr=>{let gr=mr.lineBlockAt(hr.head).to;return hr.head<gr?gr:Math.min(mr.state.doc.length,hr.head+1)}),deleteLineBoundaryBackward=mr=>deleteBy(mr,hr=>{let gr=mr.moveToLineBoundary(hr,!1).head;return hr.head>gr?gr:Math.max(0,hr.head-1)}),deleteLineBoundaryForward=mr=>deleteBy(mr,hr=>{let gr=mr.moveToLineBoundary(hr,!0).head;return hr.head<gr?gr:Math.min(mr.state.doc.length,hr.head+1)}),splitLine=({state:mr,dispatch:hr})=>{if(mr.readOnly)return!1;let gr=mr.changeByRange(vr=>({changes:{from:vr.from,to:vr.to,insert:Text$1.of(["",""])},range:EditorSelection.cursor(vr.from)}));return hr(mr.update(gr,{scrollIntoView:!0,userEvent:"input"})),!0},transposeChars=({state:mr,dispatch:hr})=>{if(mr.readOnly)return!1;let gr=mr.changeByRange(vr=>{if(!vr.empty||vr.from==0||vr.from==mr.doc.length)return{range:vr};let xr=vr.from,Er=mr.doc.lineAt(xr),Cr=xr==Er.from?xr-1:findClusterBreak(Er.text,xr-Er.from,!1)+Er.from,wr=xr==Er.to?xr+1:findClusterBreak(Er.text,xr-Er.from,!0)+Er.from;return{changes:{from:Cr,to:wr,insert:mr.doc.slice(xr,wr).append(mr.doc.slice(Cr,xr))},range:EditorSelection.cursor(wr)}});return gr.changes.empty?!1:(hr(mr.update(gr,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function selectedLineBlocks(mr){let hr=[],gr=-1;for(let vr of mr.selection.ranges){let xr=mr.doc.lineAt(vr.from),Er=mr.doc.lineAt(vr.to);if(!vr.empty&&vr.to==Er.from&&(Er=mr.doc.lineAt(vr.to-1)),gr>=xr.number){let Cr=hr[hr.length-1];Cr.to=Er.to,Cr.ranges.push(vr)}else hr.push({from:xr.from,to:Er.to,ranges:[vr]});gr=Er.number+1}return hr}function moveLine(mr,hr,gr){if(mr.readOnly)return!1;let vr=[],xr=[];for(let Er of selectedLineBlocks(mr)){if(gr?Er.to==mr.doc.length:Er.from==0)continue;let Cr=mr.doc.lineAt(gr?Er.to+1:Er.from-1),wr=Cr.length+1;if(gr){vr.push({from:Er.to,to:Cr.to},{from:Er.from,insert:Cr.text+mr.lineBreak});for(let Rr of Er.ranges)xr.push(EditorSelection.range(Math.min(mr.doc.length,Rr.anchor+wr),Math.min(mr.doc.length,Rr.head+wr)))}else{vr.push({from:Cr.from,to:Er.from},{from:Er.to,insert:mr.lineBreak+Cr.text});for(let Rr of Er.ranges)xr.push(EditorSelection.range(Rr.anchor-wr,Rr.head-wr))}}return vr.length?(hr(mr.update({changes:vr,scrollIntoView:!0,selection:EditorSelection.create(xr,mr.selection.mainIndex),userEvent:"move.line"})),!0):!1}const moveLineUp=({state:mr,dispatch:hr})=>moveLine(mr,hr,!1),moveLineDown=({state:mr,dispatch:hr})=>moveLine(mr,hr,!0);function copyLine(mr,hr,gr){if(mr.readOnly)return!1;let vr=[];for(let xr of selectedLineBlocks(mr))gr?vr.push({from:xr.from,insert:mr.doc.slice(xr.from,xr.to)+mr.lineBreak}):vr.push({from:xr.to,insert:mr.lineBreak+mr.doc.slice(xr.from,xr.to)});return hr(mr.update({changes:vr,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const copyLineUp=({state:mr,dispatch:hr})=>copyLine(mr,hr,!1),copyLineDown=({state:mr,dispatch:hr})=>copyLine(mr,hr,!0),deleteLine=mr=>{if(mr.state.readOnly)return!1;let{state:hr}=mr,gr=hr.changes(selectedLineBlocks(hr).map(({from:xr,to:Er})=>(xr>0?xr--:Er<hr.doc.length&&Er++,{from:xr,to:Er}))),vr=updateSel(hr.selection,xr=>{let Er;if(mr.lineWrapping){let Cr=mr.lineBlockAt(xr.head),wr=mr.coordsAtPos(xr.head,xr.assoc||1);wr&&(Er=Cr.bottom+mr.documentTop-wr.bottom+mr.defaultLineHeight/2)}return mr.moveVertically(xr,!0,Er)}).map(gr);return mr.dispatch({changes:gr,selection:vr,scrollIntoView:!0,userEvent:"delete.line"}),!0};function isBetweenBrackets(mr,hr){if(/\(\)|\[\]|\{\}/.test(mr.sliceDoc(hr-1,hr+1)))return{from:hr,to:hr};let gr=syntaxTree(mr).resolveInner(hr),vr=gr.childBefore(hr),xr=gr.childAfter(hr),Er;return vr&&xr&&vr.to<=hr&&xr.from>=hr&&(Er=vr.type.prop(NodeProp.closedBy))&&Er.indexOf(xr.name)>-1&&mr.doc.lineAt(vr.to).from==mr.doc.lineAt(xr.from).from&&!/\S/.test(mr.sliceDoc(vr.to,xr.from))?{from:vr.to,to:xr.from}:null}const insertNewlineAndIndent=newlineAndIndent(!1),insertBlankLine=newlineAndIndent(!0);function newlineAndIndent(mr){return({state:hr,dispatch:gr})=>{if(hr.readOnly)return!1;let vr=hr.changeByRange(xr=>{let{from:Er,to:Cr}=xr,wr=hr.doc.lineAt(Er),Rr=!mr&&Er==Cr&&isBetweenBrackets(hr,Er);mr&&(Er=Cr=(Cr<=wr.to?wr:hr.doc.lineAt(Cr)).to);let kr=new IndentContext(hr,{simulateBreak:Er,simulateDoubleBreak:!!Rr}),Dr=getIndentation(kr,Er);for(Dr==null&&(Dr=countColumn(/^\s*/.exec(hr.doc.lineAt(Er).text)[0],hr.tabSize));Cr<wr.to&&/\s/.test(wr.text[Cr-wr.from]);)Cr++;Rr?{from:Er,to:Cr}=Rr:Er>wr.from&&Er<wr.from+100&&!/\S/.test(wr.text.slice(0,Er))&&(Er=wr.from);let Br=["",indentString(hr,Dr)];return Rr&&Br.push(indentString(hr,kr.lineIndent(wr.from,-1))),{changes:{from:Er,to:Cr,insert:Text$1.of(Br)},range:EditorSelection.cursor(Er+1+Br[1].length)}});return gr(hr.update(vr,{scrollIntoView:!0,userEvent:"input"})),!0}}function changeBySelectedLine(mr,hr){let gr=-1;return mr.changeByRange(vr=>{let xr=[];for(let Cr=vr.from;Cr<=vr.to;){let wr=mr.doc.lineAt(Cr);wr.number>gr&&(vr.empty||vr.to>wr.from)&&(hr(wr,xr,vr),gr=wr.number),Cr=wr.to+1}let Er=mr.changes(xr);return{changes:xr,range:EditorSelection.range(Er.mapPos(vr.anchor,1),Er.mapPos(vr.head,1))}})}const indentSelection=({state:mr,dispatch:hr})=>{if(mr.readOnly)return!1;let gr=Object.create(null),vr=new IndentContext(mr,{overrideIndentation:Er=>{let Cr=gr[Er];return Cr??-1}}),xr=changeBySelectedLine(mr,(Er,Cr,wr)=>{let Rr=getIndentation(vr,Er.from);if(Rr==null)return;/\S/.test(Er.text)||(Rr=0);let kr=/^\s*/.exec(Er.text)[0],Dr=indentString(mr,Rr);(kr!=Dr||wr.from<Er.from+kr.length)&&(gr[Er.from]=Rr,Cr.push({from:Er.from,to:Er.from+kr.length,insert:Dr}))});return xr.changes.empty||hr(mr.update(xr,{userEvent:"indent"})),!0},indentMore=({state:mr,dispatch:hr})=>mr.readOnly?!1:(hr(mr.update(changeBySelectedLine(mr,(gr,vr)=>{vr.push({from:gr.from,insert:mr.facet(indentUnit)})}),{userEvent:"input.indent"})),!0),indentLess=({state:mr,dispatch:hr})=>mr.readOnly?!1:(hr(mr.update(changeBySelectedLine(mr,(gr,vr)=>{let xr=/^\s*/.exec(gr.text)[0];if(!xr)return;let Er=countColumn(xr,mr.tabSize),Cr=0,wr=indentString(mr,Math.max(0,Er-getIndentUnit(mr)));for(;Cr<xr.length&&Cr<wr.length&&xr.charCodeAt(Cr)==wr.charCodeAt(Cr);)Cr++;vr.push({from:gr.from+Cr,to:gr.from+xr.length,insert:wr.slice(Cr)})}),{userEvent:"delete.dedent"})),!0),toggleTabFocusMode=mr=>(mr.setTabFocusMode(),!0),emacsStyleKeymap=[{key:"Ctrl-b",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Ctrl-f",run:cursorCharRight,shift:selectCharRight},{key:"Ctrl-p",run:cursorLineUp,shift:selectLineUp},{key:"Ctrl-n",run:cursorLineDown,shift:selectLineDown},{key:"Ctrl-a",run:cursorLineStart,shift:selectLineStart},{key:"Ctrl-e",run:cursorLineEnd,shift:selectLineEnd},{key:"Ctrl-d",run:deleteCharForward},{key:"Ctrl-h",run:deleteCharBackward},{key:"Ctrl-k",run:deleteToLineEnd},{key:"Ctrl-Alt-h",run:deleteGroupBackward},{key:"Ctrl-o",run:splitLine},{key:"Ctrl-t",run:transposeChars},{key:"Ctrl-v",run:cursorPageDown}],standardKeymap=[{key:"ArrowLeft",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:cursorGroupLeft,shift:selectGroupLeft,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:cursorLineBoundaryLeft,shift:selectLineBoundaryLeft,preventDefault:!0},{key:"ArrowRight",run:cursorCharRight,shift:selectCharRight,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:cursorGroupRight,shift:selectGroupRight,preventDefault:!0},{mac:"Cmd-ArrowRight",run:cursorLineBoundaryRight,shift:selectLineBoundaryRight,preventDefault:!0},{key:"ArrowUp",run:cursorLineUp,shift:selectLineUp,preventDefault:!0},{mac:"Cmd-ArrowUp",run:cursorDocStart,shift:selectDocStart},{mac:"Ctrl-ArrowUp",run:cursorPageUp,shift:selectPageUp},{key:"ArrowDown",run:cursorLineDown,shift:selectLineDown,preventDefault:!0},{mac:"Cmd-ArrowDown",run:cursorDocEnd,shift:selectDocEnd},{mac:"Ctrl-ArrowDown",run:cursorPageDown,shift:selectPageDown},{key:"PageUp",run:cursorPageUp,shift:selectPageUp},{key:"PageDown",run:cursorPageDown,shift:selectPageDown},{key:"Home",run:cursorLineBoundaryBackward,shift:selectLineBoundaryBackward,preventDefault:!0},{key:"Mod-Home",run:cursorDocStart,shift:selectDocStart},{key:"End",run:cursorLineBoundaryForward,shift:selectLineBoundaryForward,preventDefault:!0},{key:"Mod-End",run:cursorDocEnd,shift:selectDocEnd},{key:"Enter",run:insertNewlineAndIndent,shift:insertNewlineAndIndent},{key:"Mod-a",run:selectAll},{key:"Backspace",run:deleteCharBackward,shift:deleteCharBackward},{key:"Delete",run:deleteCharForward},{key:"Mod-Backspace",mac:"Alt-Backspace",run:deleteGroupBackward},{key:"Mod-Delete",mac:"Alt-Delete",run:deleteGroupForward},{mac:"Mod-Backspace",run:deleteLineBoundaryBackward},{mac:"Mod-Delete",run:deleteLineBoundaryForward}].concat(emacsStyleKeymap.map(mr=>({mac:mr.key,run:mr.run,shift:mr.shift}))),defaultKeymap=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:cursorSyntaxLeft,shift:selectSyntaxLeft},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:cursorSyntaxRight,shift:selectSyntaxRight},{key:"Alt-ArrowUp",run:moveLineUp},{key:"Shift-Alt-ArrowUp",run:copyLineUp},{key:"Alt-ArrowDown",run:moveLineDown},{key:"Shift-Alt-ArrowDown",run:copyLineDown},{key:"Escape",run:simplifySelection},{key:"Mod-Enter",run:insertBlankLine},{key:"Alt-l",mac:"Ctrl-l",run:selectLine},{key:"Mod-i",run:selectParentSyntax,preventDefault:!0},{key:"Mod-[",run:indentLess},{key:"Mod-]",run:indentMore},{key:"Mod-Alt-\\",run:indentSelection},{key:"Shift-Mod-k",run:deleteLine},{key:"Shift-Mod-\\",run:cursorMatchingBracket},{key:"Mod-/",run:toggleComment},{key:"Alt-A",run:toggleBlockComment},{key:"Ctrl-m",mac:"Shift-Alt-m",run:toggleTabFocusMode}].concat(standardKeymap),indentWithTab={key:"Tab",run:indentMore,shift:indentLess};function crelt(){var mr=arguments[0];typeof mr=="string"&&(mr=document.createElement(mr));var hr=1,gr=arguments[1];if(gr&&typeof gr=="object"&&gr.nodeType==null&&!Array.isArray(gr)){for(var vr in gr)if(Object.prototype.hasOwnProperty.call(gr,vr)){var xr=gr[vr];typeof xr=="string"?mr.setAttribute(vr,xr):xr!=null&&(mr[vr]=xr)}hr++}for(;hr<arguments.length;hr++)add$1(mr,arguments[hr]);return mr}function add$1(mr,hr){if(typeof hr=="string")mr.appendChild(document.createTextNode(hr));else if(hr!=null)if(hr.nodeType!=null)mr.appendChild(hr);else if(Array.isArray(hr))for(var gr=0;gr<hr.length;gr++)add$1(mr,hr[gr]);else throw new RangeError("Unsupported child node: "+hr)}const basicNormalize=typeof String.prototype.normalize=="function"?mr=>mr.normalize("NFKD"):mr=>mr;class SearchCursor{constructor(hr,gr,vr=0,xr=hr.length,Er,Cr){this.test=Cr,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=hr.iterRange(vr,xr),this.bufferStart=vr,this.normalize=Er?wr=>Er(basicNormalize(wr)):basicNormalize,this.query=this.normalize(gr)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return codePointAt(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let hr=this.peek();if(hr<0)return this.done=!0,this;let gr=fromCodePoint(hr),vr=this.bufferStart+this.bufferPos;this.bufferPos+=codePointSize(hr);let xr=this.normalize(gr);if(xr.length)for(let Er=0,Cr=vr;;Er++){let wr=xr.charCodeAt(Er),Rr=this.match(wr,Cr,this.bufferPos+this.bufferStart);if(Er==xr.length-1){if(Rr)return this.value=Rr,this;break}Cr==vr&&Er<gr.length&&gr.charCodeAt(Er)==wr&&Cr++}}}match(hr,gr,vr){let xr=null;for(let Er=0;Er<this.matches.length;Er+=2){let Cr=this.matches[Er],wr=!1;this.query.charCodeAt(Cr)==hr&&(Cr==this.query.length-1?xr={from:this.matches[Er+1],to:vr}:(this.matches[Er]++,wr=!0)),wr||(this.matches.splice(Er,2),Er-=2)}return this.query.charCodeAt(0)==hr&&(this.query.length==1?xr={from:gr,to:vr}:this.matches.push(1,gr)),xr&&this.test&&!this.test(xr.from,xr.to,this.buffer,this.bufferStart)&&(xr=null),xr}}typeof Symbol<"u"&&(SearchCursor.prototype[Symbol.iterator]=function(){return this});const empty={from:-1,to:-1,match:/.*/.exec("")},baseFlags="gm"+(/x/.unicode==null?"":"u");class RegExpCursor{constructor(hr,gr,vr,xr=0,Er=hr.length){if(this.text=hr,this.to=Er,this.curLine="",this.done=!1,this.value=empty,/\\[sWDnr]|\n|\r|\[\^/.test(gr))return new MultilineRegExpCursor(hr,gr,vr,xr,Er);this.re=new RegExp(gr,baseFlags+(vr?.ignoreCase?"i":"")),this.test=vr?.test,this.iter=hr.iter();let Cr=hr.lineAt(xr);this.curLineStart=Cr.from,this.matchPos=toCharEnd(hr,xr),this.getLine(this.curLineStart)}getLine(hr){this.iter.next(hr),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let hr=this.matchPos-this.curLineStart;;){this.re.lastIndex=hr;let gr=this.matchPos<=this.to&&this.re.exec(this.curLine);if(gr){let vr=this.curLineStart+gr.index,xr=vr+gr[0].length;if(this.matchPos=toCharEnd(this.text,xr+(vr==xr?1:0)),vr==this.curLineStart+this.curLine.length&&this.nextLine(),(vr<xr||vr>this.value.to)&&(!this.test||this.test(vr,xr,gr)))return this.value={from:vr,to:xr,match:gr},this;hr=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),hr=0;else return this.done=!0,this}}}const flattened=new WeakMap;class FlattenedDoc{constructor(hr,gr){this.from=hr,this.text=gr}get to(){return this.from+this.text.length}static get(hr,gr,vr){let xr=flattened.get(hr);if(!xr||xr.from>=vr||xr.to<=gr){let wr=new FlattenedDoc(gr,hr.sliceString(gr,vr));return flattened.set(hr,wr),wr}if(xr.from==gr&&xr.to==vr)return xr;let{text:Er,from:Cr}=xr;return Cr>gr&&(Er=hr.sliceString(gr,Cr)+Er,Cr=gr),xr.to<vr&&(Er+=hr.sliceString(xr.to,vr)),flattened.set(hr,new FlattenedDoc(Cr,Er)),new FlattenedDoc(gr,Er.slice(gr-Cr,vr-Cr))}}class MultilineRegExpCursor{constructor(hr,gr,vr,xr,Er){this.text=hr,this.to=Er,this.done=!1,this.value=empty,this.matchPos=toCharEnd(hr,xr),this.re=new RegExp(gr,baseFlags+(vr?.ignoreCase?"i":"")),this.test=vr?.test,this.flat=FlattenedDoc.get(hr,xr,this.chunkEnd(xr+5e3))}chunkEnd(hr){return hr>=this.to?this.to:this.text.lineAt(hr).to}next(){for(;;){let hr=this.re.lastIndex=this.matchPos-this.flat.from,gr=this.re.exec(this.flat.text);if(gr&&!gr[0]&&gr.index==hr&&(this.re.lastIndex=hr+1,gr=this.re.exec(this.flat.text)),gr){let vr=this.flat.from+gr.index,xr=vr+gr[0].length;if((this.flat.to>=this.to||gr.index+gr[0].length<=this.flat.text.length-10)&&(!this.test||this.test(vr,xr,gr)))return this.value={from:vr,to:xr,match:gr},this.matchPos=toCharEnd(this.text,xr+(vr==xr?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=FlattenedDoc.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(RegExpCursor.prototype[Symbol.iterator]=MultilineRegExpCursor.prototype[Symbol.iterator]=function(){return this});function validRegExp(mr){try{return new RegExp(mr,baseFlags),!0}catch{return!1}}function toCharEnd(mr,hr){if(hr>=mr.length)return hr;let gr=mr.lineAt(hr),vr;for(;hr<gr.to&&(vr=gr.text.charCodeAt(hr-gr.from))>=56320&&vr<57344;)hr++;return hr}function createLineDialog(mr){let hr=String(mr.state.doc.lineAt(mr.state.selection.main.head).number),gr=crelt("input",{class:"cm-textfield",name:"line",value:hr}),vr=crelt("form",{class:"cm-gotoLine",onkeydown:Er=>{Er.keyCode==27?(Er.preventDefault(),mr.dispatch({effects:dialogEffect.of(!1)}),mr.focus()):Er.keyCode==13&&(Er.preventDefault(),xr())},onsubmit:Er=>{Er.preventDefault(),xr()}},crelt("label",mr.state.phrase("Go to line"),": ",gr)," ",crelt("button",{class:"cm-button",type:"submit"},mr.state.phrase("go")));function xr(){let Er=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(gr.value);if(!Er)return;let{state:Cr}=mr,wr=Cr.doc.lineAt(Cr.selection.main.head),[,Rr,kr,Dr,Br]=Er,Hr=Dr?+Dr.slice(1):0,Gr=kr?+kr:wr.number;if(kr&&Br){let Qr=Gr/100;Rr&&(Qr=Qr*(Rr=="-"?-1:1)+wr.number/Cr.doc.lines),Gr=Math.round(Cr.doc.lines*Qr)}else kr&&Rr&&(Gr=Gr*(Rr=="-"?-1:1)+wr.number);let qr=Cr.doc.line(Math.max(1,Math.min(Cr.doc.lines,Gr))),zr=EditorSelection.cursor(qr.from+Math.max(0,Math.min(Hr,qr.length)));mr.dispatch({effects:[dialogEffect.of(!1),EditorView.scrollIntoView(zr.from,{y:"center"})],selection:zr}),mr.focus()}return{dom:vr}}const dialogEffect=StateEffect.define(),dialogField=StateField.define({create(){return!0},update(mr,hr){for(let gr of hr.effects)gr.is(dialogEffect)&&(mr=gr.value);return mr},provide:mr=>showPanel.from(mr,hr=>hr?createLineDialog:null)}),gotoLine=mr=>{let hr=getPanel(mr,createLineDialog);if(!hr){let gr=[dialogEffect.of(!0)];mr.state.field(dialogField,!1)==null&&gr.push(StateEffect.appendConfig.of([dialogField,baseTheme$1$1])),mr.dispatch({effects:gr}),hr=getPanel(mr,createLineDialog)}return hr&&hr.dom.querySelector("input").select(),!0},baseTheme$1$1=EditorView.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),defaultHighlightOptions={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},highlightConfig=Facet.define({combine(mr){return combineConfig(mr,defaultHighlightOptions,{highlightWordAroundCursor:(hr,gr)=>hr||gr,minSelectionLength:Math.min,maxMatches:Math.min})}});function highlightSelectionMatches(mr){return[defaultTheme$1,matchHighlighter]}const matchDeco=Decoration.mark({class:"cm-selectionMatch"}),mainMatchDeco=Decoration.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function insideWordBoundaries(mr,hr,gr,vr){return(gr==0||mr(hr.sliceDoc(gr-1,gr))!=CharCategory.Word)&&(vr==hr.doc.length||mr(hr.sliceDoc(vr,vr+1))!=CharCategory.Word)}function insideWord(mr,hr,gr,vr){return mr(hr.sliceDoc(gr,gr+1))==CharCategory.Word&&mr(hr.sliceDoc(vr-1,vr))==CharCategory.Word}const matchHighlighter=ViewPlugin.fromClass(class{constructor(mr){this.decorations=this.getDeco(mr)}update(mr){(mr.selectionSet||mr.docChanged||mr.viewportChanged)&&(this.decorations=this.getDeco(mr.view))}getDeco(mr){let hr=mr.state.facet(highlightConfig),{state:gr}=mr,vr=gr.selection;if(vr.ranges.length>1)return Decoration.none;let xr=vr.main,Er,Cr=null;if(xr.empty){if(!hr.highlightWordAroundCursor)return Decoration.none;let Rr=gr.wordAt(xr.head);if(!Rr)return Decoration.none;Cr=gr.charCategorizer(xr.head),Er=gr.sliceDoc(Rr.from,Rr.to)}else{let Rr=xr.to-xr.from;if(Rr<hr.minSelectionLength||Rr>200)return Decoration.none;if(hr.wholeWords){if(Er=gr.sliceDoc(xr.from,xr.to),Cr=gr.charCategorizer(xr.head),!(insideWordBoundaries(Cr,gr,xr.from,xr.to)&&insideWord(Cr,gr,xr.from,xr.to)))return Decoration.none}else if(Er=gr.sliceDoc(xr.from,xr.to),!Er)return Decoration.none}let wr=[];for(let Rr of mr.visibleRanges){let kr=new SearchCursor(gr.doc,Er,Rr.from,Rr.to);for(;!kr.next().done;){let{from:Dr,to:Br}=kr.value;if((!Cr||insideWordBoundaries(Cr,gr,Dr,Br))&&(xr.empty&&Dr<=xr.from&&Br>=xr.to?wr.push(mainMatchDeco.range(Dr,Br)):(Dr>=xr.to||Br<=xr.from)&&wr.push(matchDeco.range(Dr,Br)),wr.length>hr.maxMatches))return Decoration.none}}return Decoration.set(wr)}},{decorations:mr=>mr.decorations}),defaultTheme$1=EditorView.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),selectWord=({state:mr,dispatch:hr})=>{let{selection:gr}=mr,vr=EditorSelection.create(gr.ranges.map(xr=>mr.wordAt(xr.head)||EditorSelection.cursor(xr.head)),gr.mainIndex);return vr.eq(gr)?!1:(hr(mr.update({selection:vr})),!0)};function findNextOccurrence(mr,hr){let{main:gr,ranges:vr}=mr.selection,xr=mr.wordAt(gr.head),Er=xr&&xr.from==gr.from&&xr.to==gr.to;for(let Cr=!1,wr=new SearchCursor(mr.doc,hr,vr[vr.length-1].to);;)if(wr.next(),wr.done){if(Cr)return null;wr=new SearchCursor(mr.doc,hr,0,Math.max(0,vr[vr.length-1].from-1)),Cr=!0}else{if(Cr&&vr.some(Rr=>Rr.from==wr.value.from))continue;if(Er){let Rr=mr.wordAt(wr.value.from);if(!Rr||Rr.from!=wr.value.from||Rr.to!=wr.value.to)continue}return wr.value}}const selectNextOccurrence=({state:mr,dispatch:hr})=>{let{ranges:gr}=mr.selection;if(gr.some(Er=>Er.from===Er.to))return selectWord({state:mr,dispatch:hr});let vr=mr.sliceDoc(gr[0].from,gr[0].to);if(mr.selection.ranges.some(Er=>mr.sliceDoc(Er.from,Er.to)!=vr))return!1;let xr=findNextOccurrence(mr,vr);return xr?(hr(mr.update({selection:mr.selection.addRange(EditorSelection.range(xr.from,xr.to),!1),effects:EditorView.scrollIntoView(xr.to)})),!0):!1},searchConfigFacet=Facet.define({combine(mr){return combineConfig(mr,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:hr=>new SearchPanel(hr),scrollToMatch:hr=>EditorView.scrollIntoView(hr)})}});class SearchQuery{constructor(hr){this.search=hr.search,this.caseSensitive=!!hr.caseSensitive,this.literal=!!hr.literal,this.regexp=!!hr.regexp,this.replace=hr.replace||"",this.valid=!!this.search&&(!this.regexp||validRegExp(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!hr.wholeWord}unquote(hr){return this.literal?hr:hr.replace(/\\([nrt\\])/g,(gr,vr)=>vr=="n"?`
`:vr=="r"?"\r":vr=="t"?"	":"\\")}eq(hr){return this.search==hr.search&&this.replace==hr.replace&&this.caseSensitive==hr.caseSensitive&&this.regexp==hr.regexp&&this.wholeWord==hr.wholeWord}create(){return this.regexp?new RegExpQuery(this):new StringQuery(this)}getCursor(hr,gr=0,vr){let xr=hr.doc?hr:EditorState.create({doc:hr});return vr==null&&(vr=xr.doc.length),this.regexp?regexpCursor(this,xr,gr,vr):stringCursor(this,xr,gr,vr)}}class QueryType{constructor(hr){this.spec=hr}}function stringCursor(mr,hr,gr,vr){return new SearchCursor(hr.doc,mr.unquoted,gr,vr,mr.caseSensitive?void 0:xr=>xr.toLowerCase(),mr.wholeWord?stringWordTest(hr.doc,hr.charCategorizer(hr.selection.main.head)):void 0)}function stringWordTest(mr,hr){return(gr,vr,xr,Er)=>((Er>gr||Er+xr.length<vr)&&(Er=Math.max(0,gr-2),xr=mr.sliceString(Er,Math.min(mr.length,vr+2))),(hr(charBefore(xr,gr-Er))!=CharCategory.Word||hr(charAfter(xr,gr-Er))!=CharCategory.Word)&&(hr(charAfter(xr,vr-Er))!=CharCategory.Word||hr(charBefore(xr,vr-Er))!=CharCategory.Word))}class StringQuery extends QueryType{constructor(hr){super(hr)}nextMatch(hr,gr,vr){let xr=stringCursor(this.spec,hr,vr,hr.doc.length).nextOverlapping();if(xr.done){let Er=Math.min(hr.doc.length,gr+this.spec.unquoted.length);xr=stringCursor(this.spec,hr,0,Er).nextOverlapping()}return xr.done||xr.value.from==gr&&xr.value.to==vr?null:xr.value}prevMatchInRange(hr,gr,vr){for(let xr=vr;;){let Er=Math.max(gr,xr-1e4-this.spec.unquoted.length),Cr=stringCursor(this.spec,hr,Er,xr),wr=null;for(;!Cr.nextOverlapping().done;)wr=Cr.value;if(wr)return wr;if(Er==gr)return null;xr-=1e4}}prevMatch(hr,gr,vr){let xr=this.prevMatchInRange(hr,0,gr);return xr||(xr=this.prevMatchInRange(hr,Math.max(0,vr-this.spec.unquoted.length),hr.doc.length)),xr&&(xr.from!=gr||xr.to!=vr)?xr:null}getReplacement(hr){return this.spec.unquote(this.spec.replace)}matchAll(hr,gr){let vr=stringCursor(this.spec,hr,0,hr.doc.length),xr=[];for(;!vr.next().done;){if(xr.length>=gr)return null;xr.push(vr.value)}return xr}highlight(hr,gr,vr,xr){let Er=stringCursor(this.spec,hr,Math.max(0,gr-this.spec.unquoted.length),Math.min(vr+this.spec.unquoted.length,hr.doc.length));for(;!Er.next().done;)xr(Er.value.from,Er.value.to)}}function regexpCursor(mr,hr,gr,vr){return new RegExpCursor(hr.doc,mr.search,{ignoreCase:!mr.caseSensitive,test:mr.wholeWord?regexpWordTest(hr.charCategorizer(hr.selection.main.head)):void 0},gr,vr)}function charBefore(mr,hr){return mr.slice(findClusterBreak(mr,hr,!1),hr)}function charAfter(mr,hr){return mr.slice(hr,findClusterBreak(mr,hr))}function regexpWordTest(mr){return(hr,gr,vr)=>!vr[0].length||(mr(charBefore(vr.input,vr.index))!=CharCategory.Word||mr(charAfter(vr.input,vr.index))!=CharCategory.Word)&&(mr(charAfter(vr.input,vr.index+vr[0].length))!=CharCategory.Word||mr(charBefore(vr.input,vr.index+vr[0].length))!=CharCategory.Word)}class RegExpQuery extends QueryType{nextMatch(hr,gr,vr){let xr=regexpCursor(this.spec,hr,vr,hr.doc.length).next();return xr.done&&(xr=regexpCursor(this.spec,hr,0,gr).next()),xr.done?null:xr.value}prevMatchInRange(hr,gr,vr){for(let xr=1;;xr++){let Er=Math.max(gr,vr-xr*1e4),Cr=regexpCursor(this.spec,hr,Er,vr),wr=null;for(;!Cr.next().done;)wr=Cr.value;if(wr&&(Er==gr||wr.from>Er+10))return wr;if(Er==gr)return null}}prevMatch(hr,gr,vr){return this.prevMatchInRange(hr,0,gr)||this.prevMatchInRange(hr,vr,hr.doc.length)}getReplacement(hr){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,(gr,vr)=>vr=="$"?"$":vr=="&"?hr.match[0]:vr!="0"&&+vr<hr.match.length?hr.match[vr]:gr)}matchAll(hr,gr){let vr=regexpCursor(this.spec,hr,0,hr.doc.length),xr=[];for(;!vr.next().done;){if(xr.length>=gr)return null;xr.push(vr.value)}return xr}highlight(hr,gr,vr,xr){let Er=regexpCursor(this.spec,hr,Math.max(0,gr-250),Math.min(vr+250,hr.doc.length));for(;!Er.next().done;)xr(Er.value.from,Er.value.to)}}const setSearchQuery=StateEffect.define(),togglePanel$1=StateEffect.define(),searchState=StateField.define({create(mr){return new SearchState(defaultQuery(mr).create(),null)},update(mr,hr){for(let gr of hr.effects)gr.is(setSearchQuery)?mr=new SearchState(gr.value.create(),mr.panel):gr.is(togglePanel$1)&&(mr=new SearchState(mr.query,gr.value?createSearchPanel:null));return mr},provide:mr=>showPanel.from(mr,hr=>hr.panel)});class SearchState{constructor(hr,gr){this.query=hr,this.panel=gr}}const matchMark=Decoration.mark({class:"cm-searchMatch"}),selectedMatchMark=Decoration.mark({class:"cm-searchMatch cm-searchMatch-selected"}),searchHighlighter=ViewPlugin.fromClass(class{constructor(mr){this.view=mr,this.decorations=this.highlight(mr.state.field(searchState))}update(mr){let hr=mr.state.field(searchState);(hr!=mr.startState.field(searchState)||mr.docChanged||mr.selectionSet||mr.viewportChanged)&&(this.decorations=this.highlight(hr))}highlight({query:mr,panel:hr}){if(!hr||!mr.spec.valid)return Decoration.none;let{view:gr}=this,vr=new RangeSetBuilder;for(let xr=0,Er=gr.visibleRanges,Cr=Er.length;xr<Cr;xr++){let{from:wr,to:Rr}=Er[xr];for(;xr<Cr-1&&Rr>Er[xr+1].from-2*250;)Rr=Er[++xr].to;mr.highlight(gr.state,wr,Rr,(kr,Dr)=>{let Br=gr.state.selection.ranges.some(Hr=>Hr.from==kr&&Hr.to==Dr);vr.add(kr,Dr,Br?selectedMatchMark:matchMark)})}return vr.finish()}},{decorations:mr=>mr.decorations});function searchCommand(mr){return hr=>{let gr=hr.state.field(searchState,!1);return gr&&gr.query.spec.valid?mr(hr,gr):openSearchPanel(hr)}}const findNext=searchCommand((mr,{query:hr})=>{let{to:gr}=mr.state.selection.main,vr=hr.nextMatch(mr.state,gr,gr);if(!vr)return!1;let xr=EditorSelection.single(vr.from,vr.to),Er=mr.state.facet(searchConfigFacet);return mr.dispatch({selection:xr,effects:[announceMatch(mr,vr),Er.scrollToMatch(xr.main,mr)],userEvent:"select.search"}),selectSearchInput(mr),!0}),findPrevious=searchCommand((mr,{query:hr})=>{let{state:gr}=mr,{from:vr}=gr.selection.main,xr=hr.prevMatch(gr,vr,vr);if(!xr)return!1;let Er=EditorSelection.single(xr.from,xr.to),Cr=mr.state.facet(searchConfigFacet);return mr.dispatch({selection:Er,effects:[announceMatch(mr,xr),Cr.scrollToMatch(Er.main,mr)],userEvent:"select.search"}),selectSearchInput(mr),!0}),selectMatches=searchCommand((mr,{query:hr})=>{let gr=hr.matchAll(mr.state,1e3);return!gr||!gr.length?!1:(mr.dispatch({selection:EditorSelection.create(gr.map(vr=>EditorSelection.range(vr.from,vr.to))),userEvent:"select.search.matches"}),!0)}),selectSelectionMatches=({state:mr,dispatch:hr})=>{let gr=mr.selection;if(gr.ranges.length>1||gr.main.empty)return!1;let{from:vr,to:xr}=gr.main,Er=[],Cr=0;for(let wr=new SearchCursor(mr.doc,mr.sliceDoc(vr,xr));!wr.next().done;){if(Er.length>1e3)return!1;wr.value.from==vr&&(Cr=Er.length),Er.push(EditorSelection.range(wr.value.from,wr.value.to))}return hr(mr.update({selection:EditorSelection.create(Er,Cr),userEvent:"select.search.matches"})),!0},replaceNext=searchCommand((mr,{query:hr})=>{let{state:gr}=mr,{from:vr,to:xr}=gr.selection.main;if(gr.readOnly)return!1;let Er=hr.nextMatch(gr,vr,vr);if(!Er)return!1;let Cr=Er,wr=[],Rr,kr,Dr=[];if(Cr.from==vr&&Cr.to==xr&&(kr=gr.toText(hr.getReplacement(Cr)),wr.push({from:Cr.from,to:Cr.to,insert:kr}),Cr=hr.nextMatch(gr,Cr.from,Cr.to),Dr.push(EditorView.announce.of(gr.phrase("replaced match on line $",gr.doc.lineAt(vr).number)+"."))),Cr){let Br=wr.length==0||wr[0].from>=Er.to?0:Er.to-Er.from-kr.length;Rr=EditorSelection.single(Cr.from-Br,Cr.to-Br),Dr.push(announceMatch(mr,Cr)),Dr.push(gr.facet(searchConfigFacet).scrollToMatch(Rr.main,mr))}return mr.dispatch({changes:wr,selection:Rr,effects:Dr,userEvent:"input.replace"}),!0}),replaceAll=searchCommand((mr,{query:hr})=>{if(mr.state.readOnly)return!1;let gr=hr.matchAll(mr.state,1e9).map(xr=>{let{from:Er,to:Cr}=xr;return{from:Er,to:Cr,insert:hr.getReplacement(xr)}});if(!gr.length)return!1;let vr=mr.state.phrase("replaced $ matches",gr.length)+".";return mr.dispatch({changes:gr,effects:EditorView.announce.of(vr),userEvent:"input.replace.all"}),!0});function createSearchPanel(mr){return mr.state.facet(searchConfigFacet).createPanel(mr)}function defaultQuery(mr,hr){var gr,vr,xr,Er,Cr;let wr=mr.selection.main,Rr=wr.empty||wr.to>wr.from+100?"":mr.sliceDoc(wr.from,wr.to);if(hr&&!Rr)return hr;let kr=mr.facet(searchConfigFacet);return new SearchQuery({search:((gr=hr?.literal)!==null&&gr!==void 0?gr:kr.literal)?Rr:Rr.replace(/\n/g,"\\n"),caseSensitive:(vr=hr?.caseSensitive)!==null&&vr!==void 0?vr:kr.caseSensitive,literal:(xr=hr?.literal)!==null&&xr!==void 0?xr:kr.literal,regexp:(Er=hr?.regexp)!==null&&Er!==void 0?Er:kr.regexp,wholeWord:(Cr=hr?.wholeWord)!==null&&Cr!==void 0?Cr:kr.wholeWord})}function getSearchInput(mr){let hr=getPanel(mr,createSearchPanel);return hr&&hr.dom.querySelector("[main-field]")}function selectSearchInput(mr){let hr=getSearchInput(mr);hr&&hr==mr.root.activeElement&&hr.select()}const openSearchPanel=mr=>{let hr=mr.state.field(searchState,!1);if(hr&&hr.panel){let gr=getSearchInput(mr);if(gr&&gr!=mr.root.activeElement){let vr=defaultQuery(mr.state,hr.query.spec);vr.valid&&mr.dispatch({effects:setSearchQuery.of(vr)}),gr.focus(),gr.select()}}else mr.dispatch({effects:[togglePanel$1.of(!0),hr?setSearchQuery.of(defaultQuery(mr.state,hr.query.spec)):StateEffect.appendConfig.of(searchExtensions)]});return!0},closeSearchPanel=mr=>{let hr=mr.state.field(searchState,!1);if(!hr||!hr.panel)return!1;let gr=getPanel(mr,createSearchPanel);return gr&&gr.dom.contains(mr.root.activeElement)&&mr.focus(),mr.dispatch({effects:togglePanel$1.of(!1)}),!0},searchKeymap=[{key:"Mod-f",run:openSearchPanel,scope:"editor search-panel"},{key:"F3",run:findNext,shift:findPrevious,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:findNext,shift:findPrevious,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:closeSearchPanel,scope:"editor search-panel"},{key:"Mod-Shift-l",run:selectSelectionMatches},{key:"Mod-Alt-g",run:gotoLine},{key:"Mod-d",run:selectNextOccurrence,preventDefault:!0}];class SearchPanel{constructor(hr){this.view=hr;let gr=this.query=hr.state.field(searchState).query.spec;this.commit=this.commit.bind(this),this.searchField=crelt("input",{value:gr.search,placeholder:phrase(hr,"Find"),"aria-label":phrase(hr,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=crelt("input",{value:gr.replace,placeholder:phrase(hr,"Replace"),"aria-label":phrase(hr,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=crelt("input",{type:"checkbox",name:"case",form:"",checked:gr.caseSensitive,onchange:this.commit}),this.reField=crelt("input",{type:"checkbox",name:"re",form:"",checked:gr.regexp,onchange:this.commit}),this.wordField=crelt("input",{type:"checkbox",name:"word",form:"",checked:gr.wholeWord,onchange:this.commit});function vr(xr,Er,Cr){return crelt("button",{class:"cm-button",name:xr,onclick:Er,type:"button"},Cr)}this.dom=crelt("div",{onkeydown:xr=>this.keydown(xr),class:"cm-search"},[this.searchField,vr("next",()=>findNext(hr),[phrase(hr,"next")]),vr("prev",()=>findPrevious(hr),[phrase(hr,"previous")]),vr("select",()=>selectMatches(hr),[phrase(hr,"all")]),crelt("label",null,[this.caseField,phrase(hr,"match case")]),crelt("label",null,[this.reField,phrase(hr,"regexp")]),crelt("label",null,[this.wordField,phrase(hr,"by word")]),...hr.state.readOnly?[]:[crelt("br"),this.replaceField,vr("replace",()=>replaceNext(hr),[phrase(hr,"replace")]),vr("replaceAll",()=>replaceAll(hr),[phrase(hr,"replace all")])],crelt("button",{name:"close",onclick:()=>closeSearchPanel(hr),"aria-label":phrase(hr,"close"),type:"button"},["×"])])}commit(){let hr=new SearchQuery({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});hr.eq(this.query)||(this.query=hr,this.view.dispatch({effects:setSearchQuery.of(hr)}))}keydown(hr){runScopeHandlers(this.view,hr,"search-panel")?hr.preventDefault():hr.keyCode==13&&hr.target==this.searchField?(hr.preventDefault(),(hr.shiftKey?findPrevious:findNext)(this.view)):hr.keyCode==13&&hr.target==this.replaceField&&(hr.preventDefault(),replaceNext(this.view))}update(hr){for(let gr of hr.transactions)for(let vr of gr.effects)vr.is(setSearchQuery)&&!vr.value.eq(this.query)&&this.setQuery(vr.value)}setQuery(hr){this.query=hr,this.searchField.value=hr.search,this.replaceField.value=hr.replace,this.caseField.checked=hr.caseSensitive,this.reField.checked=hr.regexp,this.wordField.checked=hr.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(searchConfigFacet).top}}function phrase(mr,hr){return mr.state.phrase(hr)}const AnnounceMargin=30,Break=/[\s\.,:;?!]/;function announceMatch(mr,{from:hr,to:gr}){let vr=mr.state.doc.lineAt(hr),xr=mr.state.doc.lineAt(gr).to,Er=Math.max(vr.from,hr-AnnounceMargin),Cr=Math.min(xr,gr+AnnounceMargin),wr=mr.state.sliceDoc(Er,Cr);if(Er!=vr.from){for(let Rr=0;Rr<AnnounceMargin;Rr++)if(!Break.test(wr[Rr+1])&&Break.test(wr[Rr])){wr=wr.slice(Rr);break}}if(Cr!=xr){for(let Rr=wr.length-1;Rr>wr.length-AnnounceMargin;Rr--)if(!Break.test(wr[Rr-1])&&Break.test(wr[Rr])){wr=wr.slice(0,Rr);break}}return EditorView.announce.of(`${mr.state.phrase("current match")}. ${wr} ${mr.state.phrase("on line")} ${vr.number}.`)}const baseTheme$2=EditorView.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),searchExtensions=[searchState,Prec.low(searchHighlighter),baseTheme$2];class CompletionContext{constructor(hr,gr,vr,xr){this.state=hr,this.pos=gr,this.explicit=vr,this.view=xr,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(hr){let gr=syntaxTree(this.state).resolveInner(this.pos,-1);for(;gr&&hr.indexOf(gr.name)<0;)gr=gr.parent;return gr?{from:gr.from,to:this.pos,text:this.state.sliceDoc(gr.from,this.pos),type:gr.type}:null}matchBefore(hr){let gr=this.state.doc.lineAt(this.pos),vr=Math.max(gr.from,this.pos-250),xr=gr.text.slice(vr-gr.from,this.pos-gr.from),Er=xr.search(ensureAnchor(hr,!1));return Er<0?null:{from:vr+Er,to:this.pos,text:xr.slice(Er)}}get aborted(){return this.abortListeners==null}addEventListener(hr,gr,vr){hr=="abort"&&this.abortListeners&&(this.abortListeners.push(gr),vr&&vr.onDocChange&&(this.abortOnDocChange=!0))}}function toSet(mr){let hr=Object.keys(mr).join(""),gr=/\w/.test(hr);return gr&&(hr=hr.replace(/\w/g,"")),`[${gr?"\\w":""}${hr.replace(/[^\w\s]/g,"\\$&")}]`}function prefixMatch(mr){let hr=Object.create(null),gr=Object.create(null);for(let{label:xr}of mr){hr[xr[0]]=!0;for(let Er=1;Er<xr.length;Er++)gr[xr[Er]]=!0}let vr=toSet(hr)+toSet(gr)+"*$";return[new RegExp("^"+vr),new RegExp(vr)]}function completeFromList(mr){let hr=mr.map(xr=>typeof xr=="string"?{label:xr}:xr),[gr,vr]=hr.every(xr=>/^\w+$/.test(xr.label))?[/\w*$/,/\w+$/]:prefixMatch(hr);return xr=>{let Er=xr.matchBefore(vr);return Er||xr.explicit?{from:Er?Er.from:xr.pos,options:hr,validFor:gr}:null}}let Option$3=class{constructor(hr,gr,vr,xr){this.completion=hr,this.source=gr,this.match=vr,this.score=xr}};function cur(mr){return mr.selection.main.from}function ensureAnchor(mr,hr){var gr;let{source:vr}=mr,xr=hr&&vr[0]!="^",Er=vr[vr.length-1]!="$";return!xr&&!Er?mr:new RegExp(`${xr?"^":""}(?:${vr})${Er?"$":""}`,(gr=mr.flags)!==null&&gr!==void 0?gr:mr.ignoreCase?"i":"")}const pickedCompletion=Annotation.define();function insertCompletionText(mr,hr,gr,vr){let{main:xr}=mr.selection,Er=gr-xr.from,Cr=vr-xr.from;return Object.assign(Object.assign({},mr.changeByRange(wr=>{if(wr!=xr&&gr!=vr&&mr.sliceDoc(wr.from+Er,wr.from+Cr)!=mr.sliceDoc(gr,vr))return{range:wr};let Rr=mr.toText(hr);return{changes:{from:wr.from+Er,to:vr==xr.from?wr.to:wr.from+Cr,insert:Rr},range:EditorSelection.cursor(wr.from+Er+Rr.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}const SourceCache=new WeakMap;function asSource(mr){if(!Array.isArray(mr))return mr;let hr=SourceCache.get(mr);return hr||SourceCache.set(mr,hr=completeFromList(mr)),hr}const startCompletionEffect=StateEffect.define(),closeCompletionEffect=StateEffect.define();class FuzzyMatcher{constructor(hr){this.pattern=hr,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let gr=0;gr<hr.length;){let vr=codePointAt(hr,gr),xr=codePointSize(vr);this.chars.push(vr);let Er=hr.slice(gr,gr+xr),Cr=Er.toUpperCase();this.folded.push(codePointAt(Cr==Er?Er.toLowerCase():Cr,0)),gr+=xr}this.astral=hr.length!=this.chars.length}ret(hr,gr){return this.score=hr,this.matched=gr,this}match(hr){if(this.pattern.length==0)return this.ret(-100,[]);if(hr.length<this.pattern.length)return null;let{chars:gr,folded:vr,any:xr,precise:Er,byWord:Cr}=this;if(gr.length==1){let hn=codePointAt(hr,0),vn=codePointSize(hn),yn=vn==hr.length?0:-100;if(hn!=gr[0])if(hn==vr[0])yn+=-200;else return null;return this.ret(yn,[0,vn])}let wr=hr.indexOf(this.pattern);if(wr==0)return this.ret(hr.length==this.pattern.length?0:-100,[0,this.pattern.length]);let Rr=gr.length,kr=0;if(wr<0){for(let hn=0,vn=Math.min(hr.length,200);hn<vn&&kr<Rr;){let yn=codePointAt(hr,hn);(yn==gr[kr]||yn==vr[kr])&&(xr[kr++]=hn),hn+=codePointSize(yn)}if(kr<Rr)return null}let Dr=0,Br=0,Hr=!1,Gr=0,qr=-1,zr=-1,Qr=/[a-z]/.test(hr),sn=!0;for(let hn=0,vn=Math.min(hr.length,200),yn=0;hn<vn&&Br<Rr;){let gn=codePointAt(hr,hn);wr<0&&(Dr<Rr&&gn==gr[Dr]&&(Er[Dr++]=hn),Gr<Rr&&(gn==gr[Gr]||gn==vr[Gr]?(Gr==0&&(qr=hn),zr=hn+1,Gr++):Gr=0));let bn,xn=gn<255?gn>=48&&gn<=57||gn>=97&&gn<=122?2:gn>=65&&gn<=90?1:0:(bn=fromCodePoint(gn))!=bn.toLowerCase()?1:bn!=bn.toUpperCase()?2:0;(!hn||xn==1&&Qr||yn==0&&xn!=0)&&(gr[Br]==gn||vr[Br]==gn&&(Hr=!0)?Cr[Br++]=hn:Cr.length&&(sn=!1)),yn=xn,hn+=codePointSize(gn)}return Br==Rr&&Cr[0]==0&&sn?this.result(-100+(Hr?-200:0),Cr,hr):Gr==Rr&&qr==0?this.ret(-200-hr.length+(zr==hr.length?0:-100),[0,zr]):wr>-1?this.ret(-700-hr.length,[wr,wr+this.pattern.length]):Gr==Rr?this.ret(-900-hr.length,[qr,zr]):Br==Rr?this.result(-100+(Hr?-200:0)+-700+(sn?0:-1100),Cr,hr):gr.length==2?null:this.result((xr[0]?-700:0)+-200+-1100,xr,hr)}result(hr,gr,vr){let xr=[],Er=0;for(let Cr of gr){let wr=Cr+(this.astral?codePointSize(codePointAt(vr,Cr)):1);Er&&xr[Er-1]==Cr?xr[Er-1]=wr:(xr[Er++]=Cr,xr[Er++]=wr)}return this.ret(hr-vr.length,xr)}}class StrictMatcher{constructor(hr){this.pattern=hr,this.matched=[],this.score=0,this.folded=hr.toLowerCase()}match(hr){if(hr.length<this.pattern.length)return null;let gr=hr.slice(0,this.pattern.length),vr=gr==this.pattern?0:gr.toLowerCase()==this.folded?-200:null;return vr==null?null:(this.matched=[0,gr.length],this.score=vr+(hr.length==this.pattern.length?0:-100),this)}}const completionConfig=Facet.define({combine(mr){return combineConfig(mr,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:defaultPositionInfo,filterStrict:!1,compareCompletions:(hr,gr)=>hr.label.localeCompare(gr.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(hr,gr)=>hr&&gr,closeOnBlur:(hr,gr)=>hr&&gr,icons:(hr,gr)=>hr&&gr,tooltipClass:(hr,gr)=>vr=>joinClass(hr(vr),gr(vr)),optionClass:(hr,gr)=>vr=>joinClass(hr(vr),gr(vr)),addToOptions:(hr,gr)=>hr.concat(gr),filterStrict:(hr,gr)=>hr||gr})}});function joinClass(mr,hr){return mr?hr?mr+" "+hr:mr:hr}function defaultPositionInfo(mr,hr,gr,vr,xr,Er){let Cr=mr.textDirection==Direction.RTL,wr=Cr,Rr=!1,kr="top",Dr,Br,Hr=hr.left-xr.left,Gr=xr.right-hr.right,qr=vr.right-vr.left,zr=vr.bottom-vr.top;if(wr&&Hr<Math.min(qr,Gr)?wr=!1:!wr&&Gr<Math.min(qr,Hr)&&(wr=!0),qr<=(wr?Hr:Gr))Dr=Math.max(xr.top,Math.min(gr.top,xr.bottom-zr))-hr.top,Br=Math.min(400,wr?Hr:Gr);else{Rr=!0,Br=Math.min(400,(Cr?hr.right:xr.right-hr.left)-30);let hn=xr.bottom-hr.bottom;hn>=zr||hn>hr.top?Dr=gr.bottom-hr.top:(kr="bottom",Dr=hr.bottom-gr.top)}let Qr=(hr.bottom-hr.top)/Er.offsetHeight,sn=(hr.right-hr.left)/Er.offsetWidth;return{style:`${kr}: ${Dr/Qr}px; max-width: ${Br/sn}px`,class:"cm-completionInfo-"+(Rr?Cr?"left-narrow":"right-narrow":wr?"left":"right")}}function optionContent(mr){let hr=mr.addToOptions.slice();return mr.icons&&hr.push({render(gr){let vr=document.createElement("div");return vr.classList.add("cm-completionIcon"),gr.type&&vr.classList.add(...gr.type.split(/\s+/g).map(xr=>"cm-completionIcon-"+xr)),vr.setAttribute("aria-hidden","true"),vr},position:20}),hr.push({render(gr,vr,xr,Er){let Cr=document.createElement("span");Cr.className="cm-completionLabel";let wr=gr.displayLabel||gr.label,Rr=0;for(let kr=0;kr<Er.length;){let Dr=Er[kr++],Br=Er[kr++];Dr>Rr&&Cr.appendChild(document.createTextNode(wr.slice(Rr,Dr)));let Hr=Cr.appendChild(document.createElement("span"));Hr.appendChild(document.createTextNode(wr.slice(Dr,Br))),Hr.className="cm-completionMatchedText",Rr=Br}return Rr<wr.length&&Cr.appendChild(document.createTextNode(wr.slice(Rr))),Cr},position:50},{render(gr){if(!gr.detail)return null;let vr=document.createElement("span");return vr.className="cm-completionDetail",vr.textContent=gr.detail,vr},position:80}),hr.sort((gr,vr)=>gr.position-vr.position).map(gr=>gr.render)}function rangeAroundSelected(mr,hr,gr){if(mr<=gr)return{from:0,to:mr};if(hr<0&&(hr=0),hr<=mr>>1){let xr=Math.floor(hr/gr);return{from:xr*gr,to:(xr+1)*gr}}let vr=Math.floor((mr-hr)/gr);return{from:mr-(vr+1)*gr,to:mr-vr*gr}}class CompletionTooltip{constructor(hr,gr,vr){this.view=hr,this.stateField=gr,this.applyCompletion=vr,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:Rr=>this.placeInfo(Rr),key:this},this.space=null,this.currentClass="";let xr=hr.state.field(gr),{options:Er,selected:Cr}=xr.open,wr=hr.state.facet(completionConfig);this.optionContent=optionContent(wr),this.optionClass=wr.optionClass,this.tooltipClass=wr.tooltipClass,this.range=rangeAroundSelected(Er.length,Cr,wr.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(hr.state),this.dom.addEventListener("mousedown",Rr=>{let{options:kr}=hr.state.field(gr).open;for(let Dr=Rr.target,Br;Dr&&Dr!=this.dom;Dr=Dr.parentNode)if(Dr.nodeName=="LI"&&(Br=/-(\d+)$/.exec(Dr.id))&&+Br[1]<kr.length){this.applyCompletion(hr,kr[+Br[1]]),Rr.preventDefault();return}}),this.dom.addEventListener("focusout",Rr=>{let kr=hr.state.field(this.stateField,!1);kr&&kr.tooltip&&hr.state.facet(completionConfig).closeOnBlur&&Rr.relatedTarget!=hr.contentDOM&&hr.dispatch({effects:closeCompletionEffect.of(null)})}),this.showOptions(Er,xr.id)}mount(){this.updateSel()}showOptions(hr,gr){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(hr,gr,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(hr){var gr;let vr=hr.state.field(this.stateField),xr=hr.startState.field(this.stateField);if(this.updateTooltipClass(hr.state),vr!=xr){let{options:Er,selected:Cr,disabled:wr}=vr.open;(!xr.open||xr.open.options!=Er)&&(this.range=rangeAroundSelected(Er.length,Cr,hr.state.facet(completionConfig).maxRenderedOptions),this.showOptions(Er,vr.id)),this.updateSel(),wr!=((gr=xr.open)===null||gr===void 0?void 0:gr.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!wr)}}updateTooltipClass(hr){let gr=this.tooltipClass(hr);if(gr!=this.currentClass){for(let vr of this.currentClass.split(" "))vr&&this.dom.classList.remove(vr);for(let vr of gr.split(" "))vr&&this.dom.classList.add(vr);this.currentClass=gr}}positioned(hr){this.space=hr,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let hr=this.view.state.field(this.stateField),gr=hr.open;if((gr.selected>-1&&gr.selected<this.range.from||gr.selected>=this.range.to)&&(this.range=rangeAroundSelected(gr.options.length,gr.selected,this.view.state.facet(completionConfig).maxRenderedOptions),this.showOptions(gr.options,hr.id)),this.updateSelectedOption(gr.selected)){this.destroyInfo();let{completion:vr}=gr.options[gr.selected],{info:xr}=vr;if(!xr)return;let Er=typeof xr=="string"?document.createTextNode(xr):xr(vr);if(!Er)return;"then"in Er?Er.then(Cr=>{Cr&&this.view.state.field(this.stateField,!1)==hr&&this.addInfoPane(Cr,vr)}).catch(Cr=>logException(this.view.state,Cr,"completion info")):this.addInfoPane(Er,vr)}}addInfoPane(hr,gr){this.destroyInfo();let vr=this.info=document.createElement("div");if(vr.className="cm-tooltip cm-completionInfo",hr.nodeType!=null)vr.appendChild(hr),this.infoDestroy=null;else{let{dom:xr,destroy:Er}=hr;vr.appendChild(xr),this.infoDestroy=Er||null}this.dom.appendChild(vr),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(hr){let gr=null;for(let vr=this.list.firstChild,xr=this.range.from;vr;vr=vr.nextSibling,xr++)vr.nodeName!="LI"||!vr.id?xr--:xr==hr?vr.hasAttribute("aria-selected")||(vr.setAttribute("aria-selected","true"),gr=vr):vr.hasAttribute("aria-selected")&&vr.removeAttribute("aria-selected");return gr&&scrollIntoView$1(this.list,gr),gr}measureInfo(){let hr=this.dom.querySelector("[aria-selected]");if(!hr||!this.info)return null;let gr=this.dom.getBoundingClientRect(),vr=this.info.getBoundingClientRect(),xr=hr.getBoundingClientRect(),Er=this.space;if(!Er){let Cr=this.dom.ownerDocument.defaultView||window;Er={left:0,top:0,right:Cr.innerWidth,bottom:Cr.innerHeight}}return xr.top>Math.min(Er.bottom,gr.bottom)-10||xr.bottom<Math.max(Er.top,gr.top)+10?null:this.view.state.facet(completionConfig).positionInfo(this.view,gr,xr,vr,Er,this.dom)}placeInfo(hr){this.info&&(hr?(hr.style&&(this.info.style.cssText=hr.style),this.info.className="cm-tooltip cm-completionInfo "+(hr.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(hr,gr,vr){const xr=document.createElement("ul");xr.id=gr,xr.setAttribute("role","listbox"),xr.setAttribute("aria-expanded","true"),xr.setAttribute("aria-label",this.view.state.phrase("Completions"));let Er=null;for(let Cr=vr.from;Cr<vr.to;Cr++){let{completion:wr,match:Rr}=hr[Cr],{section:kr}=wr;if(kr){let Hr=typeof kr=="string"?kr:kr.name;if(Hr!=Er&&(Cr>vr.from||vr.from==0))if(Er=Hr,typeof kr!="string"&&kr.header)xr.appendChild(kr.header(kr));else{let Gr=xr.appendChild(document.createElement("completion-section"));Gr.textContent=Hr}}const Dr=xr.appendChild(document.createElement("li"));Dr.id=gr+"-"+Cr,Dr.setAttribute("role","option");let Br=this.optionClass(wr);Br&&(Dr.className=Br);for(let Hr of this.optionContent){let Gr=Hr(wr,this.view.state,this.view,Rr);Gr&&Dr.appendChild(Gr)}}return vr.from&&xr.classList.add("cm-completionListIncompleteTop"),vr.to<hr.length&&xr.classList.add("cm-completionListIncompleteBottom"),xr}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function completionTooltip(mr,hr){return gr=>new CompletionTooltip(gr,mr,hr)}function scrollIntoView$1(mr,hr){let gr=mr.getBoundingClientRect(),vr=hr.getBoundingClientRect(),xr=gr.height/mr.offsetHeight;vr.top<gr.top?mr.scrollTop-=(gr.top-vr.top)/xr:vr.bottom>gr.bottom&&(mr.scrollTop+=(vr.bottom-gr.bottom)/xr)}function score(mr){return(mr.boost||0)*100+(mr.apply?10:0)+(mr.info?5:0)+(mr.type?1:0)}function sortOptions$1(mr,hr){let gr=[],vr=null,xr=kr=>{gr.push(kr);let{section:Dr}=kr.completion;if(Dr){vr||(vr=[]);let Br=typeof Dr=="string"?Dr:Dr.name;vr.some(Hr=>Hr.name==Br)||vr.push(typeof Dr=="string"?{name:Br}:Dr)}},Er=hr.facet(completionConfig);for(let kr of mr)if(kr.hasResult()){let Dr=kr.result.getMatch;if(kr.result.filter===!1)for(let Br of kr.result.options)xr(new Option$3(Br,kr.source,Dr?Dr(Br):[],1e9-gr.length));else{let Br=hr.sliceDoc(kr.from,kr.to),Hr,Gr=Er.filterStrict?new StrictMatcher(Br):new FuzzyMatcher(Br);for(let qr of kr.result.options)if(Hr=Gr.match(qr.label)){let zr=qr.displayLabel?Dr?Dr(qr,Hr.matched):[]:Hr.matched;xr(new Option$3(qr,kr.source,zr,Hr.score+(qr.boost||0)))}}}if(vr){let kr=Object.create(null),Dr=0,Br=(Hr,Gr)=>{var qr,zr;return((qr=Hr.rank)!==null&&qr!==void 0?qr:1e9)-((zr=Gr.rank)!==null&&zr!==void 0?zr:1e9)||(Hr.name<Gr.name?-1:1)};for(let Hr of vr.sort(Br))Dr-=1e5,kr[Hr.name]=Dr;for(let Hr of gr){let{section:Gr}=Hr.completion;Gr&&(Hr.score+=kr[typeof Gr=="string"?Gr:Gr.name])}}let Cr=[],wr=null,Rr=Er.compareCompletions;for(let kr of gr.sort((Dr,Br)=>Br.score-Dr.score||Rr(Dr.completion,Br.completion))){let Dr=kr.completion;!wr||wr.label!=Dr.label||wr.detail!=Dr.detail||wr.type!=null&&Dr.type!=null&&wr.type!=Dr.type||wr.apply!=Dr.apply||wr.boost!=Dr.boost?Cr.push(kr):score(kr.completion)>score(wr)&&(Cr[Cr.length-1]=kr),wr=kr.completion}return Cr}class CompletionDialog{constructor(hr,gr,vr,xr,Er,Cr){this.options=hr,this.attrs=gr,this.tooltip=vr,this.timestamp=xr,this.selected=Er,this.disabled=Cr}setSelected(hr,gr){return hr==this.selected||hr>=this.options.length?this:new CompletionDialog(this.options,makeAttrs(gr,hr),this.tooltip,this.timestamp,hr,this.disabled)}static build(hr,gr,vr,xr,Er,Cr){if(xr&&!Cr&&hr.some(kr=>kr.isPending))return xr.setDisabled();let wr=sortOptions$1(hr,gr);if(!wr.length)return xr&&hr.some(kr=>kr.isPending)?xr.setDisabled():null;let Rr=gr.facet(completionConfig).selectOnOpen?0:-1;if(xr&&xr.selected!=Rr&&xr.selected!=-1){let kr=xr.options[xr.selected].completion;for(let Dr=0;Dr<wr.length;Dr++)if(wr[Dr].completion==kr){Rr=Dr;break}}return new CompletionDialog(wr,makeAttrs(vr,Rr),{pos:hr.reduce((kr,Dr)=>Dr.hasResult()?Math.min(kr,Dr.from):kr,1e8),create:createTooltip,above:Er.aboveCursor},xr?xr.timestamp:Date.now(),Rr,!1)}map(hr){return new CompletionDialog(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:hr.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new CompletionDialog(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class CompletionState{constructor(hr,gr,vr){this.active=hr,this.id=gr,this.open=vr}static start(){return new CompletionState(none,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(hr){let{state:gr}=hr,vr=gr.facet(completionConfig),Er=(vr.override||gr.languageDataAt("autocomplete",cur(gr)).map(asSource)).map(Rr=>(this.active.find(Dr=>Dr.source==Rr)||new ActiveSource(Rr,this.active.some(Dr=>Dr.state!=0)?1:0)).update(hr,vr));Er.length==this.active.length&&Er.every((Rr,kr)=>Rr==this.active[kr])&&(Er=this.active);let Cr=this.open,wr=hr.effects.some(Rr=>Rr.is(setActiveEffect));Cr&&hr.docChanged&&(Cr=Cr.map(hr.changes)),hr.selection||Er.some(Rr=>Rr.hasResult()&&hr.changes.touchesRange(Rr.from,Rr.to))||!sameResults(Er,this.active)||wr?Cr=CompletionDialog.build(Er,gr,this.id,Cr,vr,wr):Cr&&Cr.disabled&&!Er.some(Rr=>Rr.isPending)&&(Cr=null),!Cr&&Er.every(Rr=>!Rr.isPending)&&Er.some(Rr=>Rr.hasResult())&&(Er=Er.map(Rr=>Rr.hasResult()?new ActiveSource(Rr.source,0):Rr));for(let Rr of hr.effects)Rr.is(setSelectedEffect)&&(Cr=Cr&&Cr.setSelected(Rr.value,this.id));return Er==this.active&&Cr==this.open?this:new CompletionState(Er,this.id,Cr)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?baseAttrs:noAttrs}}function sameResults(mr,hr){if(mr==hr)return!0;for(let gr=0,vr=0;;){for(;gr<mr.length&&!mr[gr].hasResult();)gr++;for(;vr<hr.length&&!hr[vr].hasResult();)vr++;let xr=gr==mr.length,Er=vr==hr.length;if(xr||Er)return xr==Er;if(mr[gr++].result!=hr[vr++].result)return!1}}const baseAttrs={"aria-autocomplete":"list"},noAttrs={};function makeAttrs(mr,hr){let gr={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":mr};return hr>-1&&(gr["aria-activedescendant"]=mr+"-"+hr),gr}const none=[];function getUpdateType(mr,hr){if(mr.isUserEvent("input.complete")){let vr=mr.annotation(pickedCompletion);if(vr&&hr.activateOnCompletion(vr))return 12}let gr=mr.isUserEvent("input.type");return gr&&hr.activateOnTyping?5:gr?1:mr.isUserEvent("delete.backward")?2:mr.selection?8:mr.docChanged?16:0}class ActiveSource{constructor(hr,gr,vr=!1){this.source=hr,this.state=gr,this.explicit=vr}hasResult(){return!1}get isPending(){return this.state==1}update(hr,gr){let vr=getUpdateType(hr,gr),xr=this;(vr&8||vr&16&&this.touches(hr))&&(xr=new ActiveSource(xr.source,0)),vr&4&&xr.state==0&&(xr=new ActiveSource(this.source,1)),xr=xr.updateFor(hr,vr);for(let Er of hr.effects)if(Er.is(startCompletionEffect))xr=new ActiveSource(xr.source,1,Er.value);else if(Er.is(closeCompletionEffect))xr=new ActiveSource(xr.source,0);else if(Er.is(setActiveEffect))for(let Cr of Er.value)Cr.source==xr.source&&(xr=Cr);return xr}updateFor(hr,gr){return this.map(hr.changes)}map(hr){return this}touches(hr){return hr.changes.touchesRange(cur(hr.state))}}class ActiveResult extends ActiveSource{constructor(hr,gr,vr,xr,Er,Cr){super(hr,3,gr),this.limit=vr,this.result=xr,this.from=Er,this.to=Cr}hasResult(){return!0}updateFor(hr,gr){var vr;if(!(gr&3))return this.map(hr.changes);let xr=this.result;xr.map&&!hr.changes.empty&&(xr=xr.map(xr,hr.changes));let Er=hr.changes.mapPos(this.from),Cr=hr.changes.mapPos(this.to,1),wr=cur(hr.state);if(wr>Cr||!xr||gr&2&&(cur(hr.startState)==this.from||wr<this.limit))return new ActiveSource(this.source,gr&4?1:0);let Rr=hr.changes.mapPos(this.limit);return checkValid(xr.validFor,hr.state,Er,Cr)?new ActiveResult(this.source,this.explicit,Rr,xr,Er,Cr):xr.update&&(xr=xr.update(xr,Er,Cr,new CompletionContext(hr.state,wr,!1)))?new ActiveResult(this.source,this.explicit,Rr,xr,xr.from,(vr=xr.to)!==null&&vr!==void 0?vr:cur(hr.state)):new ActiveSource(this.source,1,this.explicit)}map(hr){return hr.empty?this:(this.result.map?this.result.map(this.result,hr):this.result)?new ActiveResult(this.source,this.explicit,hr.mapPos(this.limit),this.result,hr.mapPos(this.from),hr.mapPos(this.to,1)):new ActiveSource(this.source,0)}touches(hr){return hr.changes.touchesRange(this.from,this.to)}}function checkValid(mr,hr,gr,vr){if(!mr)return!1;let xr=hr.sliceDoc(gr,vr);return typeof mr=="function"?mr(xr,gr,vr,hr):ensureAnchor(mr,!0).test(xr)}const setActiveEffect=StateEffect.define({map(mr,hr){return mr.map(gr=>gr.map(hr))}}),setSelectedEffect=StateEffect.define(),completionState=StateField.define({create(){return CompletionState.start()},update(mr,hr){return mr.update(hr)},provide:mr=>[showTooltip.from(mr,hr=>hr.tooltip),EditorView.contentAttributes.from(mr,hr=>hr.attrs)]});function applyCompletion(mr,hr){const gr=hr.completion.apply||hr.completion.label;let vr=mr.state.field(completionState).active.find(xr=>xr.source==hr.source);return vr instanceof ActiveResult?(typeof gr=="string"?mr.dispatch(Object.assign(Object.assign({},insertCompletionText(mr.state,gr,vr.from,vr.to)),{annotations:pickedCompletion.of(hr.completion)})):gr(mr,hr.completion,vr.from,vr.to),!0):!1}const createTooltip=completionTooltip(completionState,applyCompletion);function moveCompletionSelection(mr,hr="option"){return gr=>{let vr=gr.state.field(completionState,!1);if(!vr||!vr.open||vr.open.disabled||Date.now()-vr.open.timestamp<gr.state.facet(completionConfig).interactionDelay)return!1;let xr=1,Er;hr=="page"&&(Er=getTooltip(gr,vr.open.tooltip))&&(xr=Math.max(2,Math.floor(Er.dom.offsetHeight/Er.dom.querySelector("li").offsetHeight)-1));let{length:Cr}=vr.open.options,wr=vr.open.selected>-1?vr.open.selected+xr*(mr?1:-1):mr?0:Cr-1;return wr<0?wr=hr=="page"?0:Cr-1:wr>=Cr&&(wr=hr=="page"?Cr-1:0),gr.dispatch({effects:setSelectedEffect.of(wr)}),!0}}const acceptCompletion=mr=>{let hr=mr.state.field(completionState,!1);return mr.state.readOnly||!hr||!hr.open||hr.open.selected<0||hr.open.disabled||Date.now()-hr.open.timestamp<mr.state.facet(completionConfig).interactionDelay?!1:applyCompletion(mr,hr.open.options[hr.open.selected])},startCompletion=mr=>mr.state.field(completionState,!1)?(mr.dispatch({effects:startCompletionEffect.of(!0)}),!0):!1,closeCompletion=mr=>{let hr=mr.state.field(completionState,!1);return!hr||!hr.active.some(gr=>gr.state!=0)?!1:(mr.dispatch({effects:closeCompletionEffect.of(null)}),!0)};class RunningQuery{constructor(hr,gr){this.active=hr,this.context=gr,this.time=Date.now(),this.updates=[],this.done=void 0}}const MaxUpdateCount=50,MinAbortTime=1e3,completionPlugin=ViewPlugin.fromClass(class{constructor(mr){this.view=mr,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let hr of mr.state.field(completionState).active)hr.isPending&&this.startQuery(hr)}update(mr){let hr=mr.state.field(completionState),gr=mr.state.facet(completionConfig);if(!mr.selectionSet&&!mr.docChanged&&mr.startState.field(completionState)==hr)return;let vr=mr.transactions.some(Er=>{let Cr=getUpdateType(Er,gr);return Cr&8||(Er.selection||Er.docChanged)&&!(Cr&3)});for(let Er=0;Er<this.running.length;Er++){let Cr=this.running[Er];if(vr||Cr.context.abortOnDocChange&&mr.docChanged||Cr.updates.length+mr.transactions.length>MaxUpdateCount&&Date.now()-Cr.time>MinAbortTime){for(let wr of Cr.context.abortListeners)try{wr()}catch(Rr){logException(this.view.state,Rr)}Cr.context.abortListeners=null,this.running.splice(Er--,1)}else Cr.updates.push(...mr.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),mr.transactions.some(Er=>Er.effects.some(Cr=>Cr.is(startCompletionEffect)))&&(this.pendingStart=!0);let xr=this.pendingStart?50:gr.activateOnTypingDelay;if(this.debounceUpdate=hr.active.some(Er=>Er.isPending&&!this.running.some(Cr=>Cr.active.source==Er.source))?setTimeout(()=>this.startUpdate(),xr):-1,this.composing!=0)for(let Er of mr.transactions)Er.isUserEvent("input.type")?this.composing=2:this.composing==2&&Er.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:mr}=this.view,hr=mr.field(completionState);for(let gr of hr.active)gr.isPending&&!this.running.some(vr=>vr.active.source==gr.source)&&this.startQuery(gr);this.running.length&&hr.open&&hr.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(completionConfig).updateSyncTime))}startQuery(mr){let{state:hr}=this.view,gr=cur(hr),vr=new CompletionContext(hr,gr,mr.explicit,this.view),xr=new RunningQuery(mr,vr);this.running.push(xr),Promise.resolve(mr.source(vr)).then(Er=>{xr.context.aborted||(xr.done=Er||null,this.scheduleAccept())},Er=>{this.view.dispatch({effects:closeCompletionEffect.of(null)}),logException(this.view.state,Er)})}scheduleAccept(){this.running.every(mr=>mr.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(completionConfig).updateSyncTime))}accept(){var mr;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let hr=[],gr=this.view.state.facet(completionConfig),vr=this.view.state.field(completionState);for(let xr=0;xr<this.running.length;xr++){let Er=this.running[xr];if(Er.done===void 0)continue;if(this.running.splice(xr--,1),Er.done){let wr=cur(Er.updates.length?Er.updates[0].startState:this.view.state),Rr=Math.min(wr,Er.done.from+(Er.active.explicit?0:1)),kr=new ActiveResult(Er.active.source,Er.active.explicit,Rr,Er.done,Er.done.from,(mr=Er.done.to)!==null&&mr!==void 0?mr:wr);for(let Dr of Er.updates)kr=kr.update(Dr,gr);if(kr.hasResult()){hr.push(kr);continue}}let Cr=vr.active.find(wr=>wr.source==Er.active.source);if(Cr&&Cr.isPending)if(Er.done==null){let wr=new ActiveSource(Er.active.source,0);for(let Rr of Er.updates)wr=wr.update(Rr,gr);wr.isPending||hr.push(wr)}else this.startQuery(Cr)}(hr.length||vr.open&&vr.open.disabled)&&this.view.dispatch({effects:setActiveEffect.of(hr)})}},{eventHandlers:{blur(mr){let hr=this.view.state.field(completionState,!1);if(hr&&hr.tooltip&&this.view.state.facet(completionConfig).closeOnBlur){let gr=hr.open&&getTooltip(this.view,hr.open.tooltip);(!gr||!gr.dom.contains(mr.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:closeCompletionEffect.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:startCompletionEffect.of(!1)}),20),this.composing=0}}}),windows=typeof navigator=="object"&&/Win/.test(navigator.platform),commitCharacters=Prec.highest(EditorView.domEventHandlers({keydown(mr,hr){let gr=hr.state.field(completionState,!1);if(!gr||!gr.open||gr.open.disabled||gr.open.selected<0||mr.key.length>1||mr.ctrlKey&&!(windows&&mr.altKey)||mr.metaKey)return!1;let vr=gr.open.options[gr.open.selected],xr=gr.active.find(Cr=>Cr.source==vr.source),Er=vr.completion.commitCharacters||xr.result.commitCharacters;return Er&&Er.indexOf(mr.key)>-1&&applyCompletion(hr,vr),!1}})),baseTheme$1=EditorView.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),defaults$4={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},closeBracketEffect=StateEffect.define({map(mr,hr){let gr=hr.mapPos(mr,-1,MapMode.TrackAfter);return gr??void 0}}),closedBracket=new class extends RangeValue{};closedBracket.startSide=1;closedBracket.endSide=-1;const bracketState=StateField.define({create(){return RangeSet.empty},update(mr,hr){if(mr=mr.map(hr.changes),hr.selection){let gr=hr.state.doc.lineAt(hr.selection.main.head);mr=mr.update({filter:vr=>vr>=gr.from&&vr<=gr.to})}for(let gr of hr.effects)gr.is(closeBracketEffect)&&(mr=mr.update({add:[closedBracket.range(gr.value,gr.value+1)]}));return mr}});function closeBrackets(){return[inputHandler,bracketState]}const definedClosing="()[]{}<>";function closing(mr){for(let hr=0;hr<definedClosing.length;hr+=2)if(definedClosing.charCodeAt(hr)==mr)return definedClosing.charAt(hr+1);return fromCodePoint(mr<128?mr:mr+1)}function config(mr,hr){return mr.languageDataAt("closeBrackets",hr)[0]||defaults$4}const android=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),inputHandler=EditorView.inputHandler.of((mr,hr,gr,vr)=>{if((android?mr.composing:mr.compositionStarted)||mr.state.readOnly)return!1;let xr=mr.state.selection.main;if(vr.length>2||vr.length==2&&codePointSize(codePointAt(vr,0))==1||hr!=xr.from||gr!=xr.to)return!1;let Er=insertBracket(mr.state,vr);return Er?(mr.dispatch(Er),!0):!1}),deleteBracketPair=({state:mr,dispatch:hr})=>{if(mr.readOnly)return!1;let vr=config(mr,mr.selection.main.head).brackets||defaults$4.brackets,xr=null,Er=mr.changeByRange(Cr=>{if(Cr.empty){let wr=prevChar(mr.doc,Cr.head);for(let Rr of vr)if(Rr==wr&&nextChar(mr.doc,Cr.head)==closing(codePointAt(Rr,0)))return{changes:{from:Cr.head-Rr.length,to:Cr.head+Rr.length},range:EditorSelection.cursor(Cr.head-Rr.length)}}return{range:xr=Cr}});return xr||hr(mr.update(Er,{scrollIntoView:!0,userEvent:"delete.backward"})),!xr},closeBracketsKeymap=[{key:"Backspace",run:deleteBracketPair}];function insertBracket(mr,hr){let gr=config(mr,mr.selection.main.head),vr=gr.brackets||defaults$4.brackets;for(let xr of vr){let Er=closing(codePointAt(xr,0));if(hr==xr)return Er==xr?handleSame(mr,xr,vr.indexOf(xr+xr+xr)>-1,gr):handleOpen(mr,xr,Er,gr.before||defaults$4.before);if(hr==Er&&closedBracketAt(mr,mr.selection.main.from))return handleClose(mr,xr,Er)}return null}function closedBracketAt(mr,hr){let gr=!1;return mr.field(bracketState).between(0,mr.doc.length,vr=>{vr==hr&&(gr=!0)}),gr}function nextChar(mr,hr){let gr=mr.sliceString(hr,hr+2);return gr.slice(0,codePointSize(codePointAt(gr,0)))}function prevChar(mr,hr){let gr=mr.sliceString(hr-2,hr);return codePointSize(codePointAt(gr,0))==gr.length?gr:gr.slice(1)}function handleOpen(mr,hr,gr,vr){let xr=null,Er=mr.changeByRange(Cr=>{if(!Cr.empty)return{changes:[{insert:hr,from:Cr.from},{insert:gr,from:Cr.to}],effects:closeBracketEffect.of(Cr.to+hr.length),range:EditorSelection.range(Cr.anchor+hr.length,Cr.head+hr.length)};let wr=nextChar(mr.doc,Cr.head);return!wr||/\s/.test(wr)||vr.indexOf(wr)>-1?{changes:{insert:hr+gr,from:Cr.head},effects:closeBracketEffect.of(Cr.head+hr.length),range:EditorSelection.cursor(Cr.head+hr.length)}:{range:xr=Cr}});return xr?null:mr.update(Er,{scrollIntoView:!0,userEvent:"input.type"})}function handleClose(mr,hr,gr){let vr=null,xr=mr.changeByRange(Er=>Er.empty&&nextChar(mr.doc,Er.head)==gr?{changes:{from:Er.head,to:Er.head+gr.length,insert:gr},range:EditorSelection.cursor(Er.head+gr.length)}:vr={range:Er});return vr?null:mr.update(xr,{scrollIntoView:!0,userEvent:"input.type"})}function handleSame(mr,hr,gr,vr){let xr=vr.stringPrefixes||defaults$4.stringPrefixes,Er=null,Cr=mr.changeByRange(wr=>{if(!wr.empty)return{changes:[{insert:hr,from:wr.from},{insert:hr,from:wr.to}],effects:closeBracketEffect.of(wr.to+hr.length),range:EditorSelection.range(wr.anchor+hr.length,wr.head+hr.length)};let Rr=wr.head,kr=nextChar(mr.doc,Rr),Dr;if(kr==hr){if(nodeStart(mr,Rr))return{changes:{insert:hr+hr,from:Rr},effects:closeBracketEffect.of(Rr+hr.length),range:EditorSelection.cursor(Rr+hr.length)};if(closedBracketAt(mr,Rr)){let Hr=gr&&mr.sliceDoc(Rr,Rr+hr.length*3)==hr+hr+hr?hr+hr+hr:hr;return{changes:{from:Rr,to:Rr+Hr.length,insert:Hr},range:EditorSelection.cursor(Rr+Hr.length)}}}else{if(gr&&mr.sliceDoc(Rr-2*hr.length,Rr)==hr+hr&&(Dr=canStartStringAt(mr,Rr-2*hr.length,xr))>-1&&nodeStart(mr,Dr))return{changes:{insert:hr+hr+hr+hr,from:Rr},effects:closeBracketEffect.of(Rr+hr.length),range:EditorSelection.cursor(Rr+hr.length)};if(mr.charCategorizer(Rr)(kr)!=CharCategory.Word&&canStartStringAt(mr,Rr,xr)>-1&&!probablyInString(mr,Rr,hr,xr))return{changes:{insert:hr+hr,from:Rr},effects:closeBracketEffect.of(Rr+hr.length),range:EditorSelection.cursor(Rr+hr.length)}}return{range:Er=wr}});return Er?null:mr.update(Cr,{scrollIntoView:!0,userEvent:"input.type"})}function nodeStart(mr,hr){let gr=syntaxTree(mr).resolveInner(hr+1);return gr.parent&&gr.from==hr}function probablyInString(mr,hr,gr,vr){let xr=syntaxTree(mr).resolveInner(hr,-1),Er=vr.reduce((Cr,wr)=>Math.max(Cr,wr.length),0);for(let Cr=0;Cr<5;Cr++){let wr=mr.sliceDoc(xr.from,Math.min(xr.to,xr.from+gr.length+Er)),Rr=wr.indexOf(gr);if(!Rr||Rr>-1&&vr.indexOf(wr.slice(0,Rr))>-1){let Dr=xr.firstChild;for(;Dr&&Dr.from==xr.from&&Dr.to-Dr.from>gr.length+Rr;){if(mr.sliceDoc(Dr.to-gr.length,Dr.to)==gr)return!1;Dr=Dr.firstChild}return!0}let kr=xr.to==hr&&xr.parent;if(!kr)break;xr=kr}return!1}function canStartStringAt(mr,hr,gr){let vr=mr.charCategorizer(hr);if(vr(mr.sliceDoc(hr-1,hr))!=CharCategory.Word)return hr;for(let xr of gr){let Er=hr-xr.length;if(mr.sliceDoc(Er,hr)==xr&&vr(mr.sliceDoc(Er-1,Er))!=CharCategory.Word)return Er}return-1}function autocompletion(mr={}){return[commitCharacters,completionState,completionConfig.of(mr),completionPlugin,completionKeymapExt,baseTheme$1]}const completionKeymap=[{key:"Ctrl-Space",run:startCompletion},{mac:"Alt-`",run:startCompletion},{key:"Escape",run:closeCompletion},{key:"ArrowDown",run:moveCompletionSelection(!0)},{key:"ArrowUp",run:moveCompletionSelection(!1)},{key:"PageDown",run:moveCompletionSelection(!0,"page")},{key:"PageUp",run:moveCompletionSelection(!1,"page")},{key:"Enter",run:acceptCompletion}],completionKeymapExt=Prec.highest(keymap.computeN([completionConfig],mr=>mr.facet(completionConfig).defaultKeymap?[completionKeymap]:[]));class SelectedDiagnostic{constructor(hr,gr,vr){this.from=hr,this.to=gr,this.diagnostic=vr}}class LintState{constructor(hr,gr,vr){this.diagnostics=hr,this.panel=gr,this.selected=vr}static init(hr,gr,vr){let xr=hr,Er=vr.facet(lintConfig).markerFilter;Er&&(xr=Er(xr,vr));let Cr=hr.slice().sort((Br,Hr)=>Br.from-Hr.from||Br.to-Hr.to),wr=new RangeSetBuilder,Rr=[],kr=0;for(let Br=0;;){let Hr=Br==Cr.length?null:Cr[Br];if(!Hr&&!Rr.length)break;let Gr,qr;for(Rr.length?(Gr=kr,qr=Rr.reduce((Qr,sn)=>Math.min(Qr,sn.to),Hr&&Hr.from>Gr?Hr.from:1e8)):(Gr=Hr.from,qr=Hr.to,Rr.push(Hr),Br++);Br<Cr.length;){let Qr=Cr[Br];if(Qr.from==Gr&&(Qr.to>Qr.from||Qr.to==Gr))Rr.push(Qr),Br++,qr=Math.min(Qr.to,qr);else{qr=Math.min(Qr.from,qr);break}}let zr=maxSeverity(Rr);if(Rr.some(Qr=>Qr.from==Qr.to||Qr.from==Qr.to-1&&vr.doc.lineAt(Qr.from).to==Qr.from))wr.add(Gr,Gr,Decoration.widget({widget:new DiagnosticWidget(zr),diagnostics:Rr.slice()}));else{let Qr=Rr.reduce((sn,hn)=>hn.markClass?sn+" "+hn.markClass:sn,"");wr.add(Gr,qr,Decoration.mark({class:"cm-lintRange cm-lintRange-"+zr+Qr,diagnostics:Rr.slice(),inclusiveEnd:Rr.some(sn=>sn.to>qr)}))}kr=qr;for(let Qr=0;Qr<Rr.length;Qr++)Rr[Qr].to<=kr&&Rr.splice(Qr--,1)}let Dr=wr.finish();return new LintState(Dr,gr,findDiagnostic(Dr))}}function findDiagnostic(mr,hr=null,gr=0){let vr=null;return mr.between(gr,1e9,(xr,Er,{spec:Cr})=>{if(!(hr&&Cr.diagnostics.indexOf(hr)<0))if(!vr)vr=new SelectedDiagnostic(xr,Er,hr||Cr.diagnostics[0]);else{if(Cr.diagnostics.indexOf(vr.diagnostic)<0)return!1;vr=new SelectedDiagnostic(vr.from,Er,vr.diagnostic)}}),vr}function hideTooltip(mr,hr){let gr=hr.pos,vr=hr.end||gr,xr=mr.state.facet(lintConfig).hideOn(mr,gr,vr);if(xr!=null)return xr;let Er=mr.startState.doc.lineAt(hr.pos);return!!(mr.effects.some(Cr=>Cr.is(setDiagnosticsEffect))||mr.changes.touchesRange(Er.from,Math.max(Er.to,vr)))}function maybeEnableLint(mr,hr){return mr.field(lintState,!1)?hr:hr.concat(StateEffect.appendConfig.of(lintExtensions))}const setDiagnosticsEffect=StateEffect.define(),togglePanel=StateEffect.define(),movePanelSelection=StateEffect.define(),lintState=StateField.define({create(){return new LintState(Decoration.none,null,null)},update(mr,hr){if(hr.docChanged&&mr.diagnostics.size){let gr=mr.diagnostics.map(hr.changes),vr=null,xr=mr.panel;if(mr.selected){let Er=hr.changes.mapPos(mr.selected.from,1);vr=findDiagnostic(gr,mr.selected.diagnostic,Er)||findDiagnostic(gr,null,Er)}!gr.size&&xr&&hr.state.facet(lintConfig).autoPanel&&(xr=null),mr=new LintState(gr,xr,vr)}for(let gr of hr.effects)if(gr.is(setDiagnosticsEffect)){let vr=hr.state.facet(lintConfig).autoPanel?gr.value.length?LintPanel.open:null:mr.panel;mr=LintState.init(gr.value,vr,hr.state)}else gr.is(togglePanel)?mr=new LintState(mr.diagnostics,gr.value?LintPanel.open:null,mr.selected):gr.is(movePanelSelection)&&(mr=new LintState(mr.diagnostics,mr.panel,gr.value));return mr},provide:mr=>[showPanel.from(mr,hr=>hr.panel),EditorView.decorations.from(mr,hr=>hr.diagnostics)]}),activeMark=Decoration.mark({class:"cm-lintRange cm-lintRange-active"});function lintTooltip(mr,hr,gr){let{diagnostics:vr}=mr.state.field(lintState),xr,Er=-1,Cr=-1;vr.between(hr-(gr<0?1:0),hr+(gr>0?1:0),(Rr,kr,{spec:Dr})=>{if(hr>=Rr&&hr<=kr&&(Rr==kr||(hr>Rr||gr>0)&&(hr<kr||gr<0)))return xr=Dr.diagnostics,Er=Rr,Cr=kr,!1});let wr=mr.state.facet(lintConfig).tooltipFilter;return xr&&wr&&(xr=wr(xr,mr.state)),xr?{pos:Er,end:Cr,above:mr.state.doc.lineAt(Er).to<Cr,create(){return{dom:diagnosticsTooltip(mr,xr)}}}:null}function diagnosticsTooltip(mr,hr){return crelt("ul",{class:"cm-tooltip-lint"},hr.map(gr=>renderDiagnostic(mr,gr,!1)))}const openLintPanel=mr=>{let hr=mr.state.field(lintState,!1);(!hr||!hr.panel)&&mr.dispatch({effects:maybeEnableLint(mr.state,[togglePanel.of(!0)])});let gr=getPanel(mr,LintPanel.open);return gr&&gr.dom.querySelector(".cm-panel-lint ul").focus(),!0},closeLintPanel=mr=>{let hr=mr.state.field(lintState,!1);return!hr||!hr.panel?!1:(mr.dispatch({effects:togglePanel.of(!1)}),!0)},nextDiagnostic=mr=>{let hr=mr.state.field(lintState,!1);if(!hr)return!1;let gr=mr.state.selection.main,vr=hr.diagnostics.iter(gr.to+1);return!vr.value&&(vr=hr.diagnostics.iter(0),!vr.value||vr.from==gr.from&&vr.to==gr.to)?!1:(mr.dispatch({selection:{anchor:vr.from,head:vr.to},scrollIntoView:!0}),!0)},lintKeymap=[{key:"Mod-Shift-m",run:openLintPanel,preventDefault:!0},{key:"F8",run:nextDiagnostic}],lintConfig=Facet.define({combine(mr){return Object.assign({sources:mr.map(hr=>hr.source).filter(hr=>hr!=null)},combineConfig(mr.map(hr=>hr.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(hr,gr)=>hr?gr?vr=>hr(vr)||gr(vr):hr:gr}))}});function assignKeys(mr){let hr=[];if(mr)e:for(let{name:gr}of mr){for(let vr=0;vr<gr.length;vr++){let xr=gr[vr];if(/[a-zA-Z]/.test(xr)&&!hr.some(Er=>Er.toLowerCase()==xr.toLowerCase())){hr.push(xr);continue e}}hr.push("")}return hr}function renderDiagnostic(mr,hr,gr){var vr;let xr=gr?assignKeys(hr.actions):[];return crelt("li",{class:"cm-diagnostic cm-diagnostic-"+hr.severity},crelt("span",{class:"cm-diagnosticText"},hr.renderMessage?hr.renderMessage(mr):hr.message),(vr=hr.actions)===null||vr===void 0?void 0:vr.map((Er,Cr)=>{let wr=!1,Rr=Hr=>{if(Hr.preventDefault(),wr)return;wr=!0;let Gr=findDiagnostic(mr.state.field(lintState).diagnostics,hr);Gr&&Er.apply(mr,Gr.from,Gr.to)},{name:kr}=Er,Dr=xr[Cr]?kr.indexOf(xr[Cr]):-1,Br=Dr<0?kr:[kr.slice(0,Dr),crelt("u",kr.slice(Dr,Dr+1)),kr.slice(Dr+1)];return crelt("button",{type:"button",class:"cm-diagnosticAction",onclick:Rr,onmousedown:Rr,"aria-label":` Action: ${kr}${Dr<0?"":` (access key "${xr[Cr]})"`}.`},Br)}),hr.source&&crelt("div",{class:"cm-diagnosticSource"},hr.source))}class DiagnosticWidget extends WidgetType{constructor(hr){super(),this.sev=hr}eq(hr){return hr.sev==this.sev}toDOM(){return crelt("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class PanelItem{constructor(hr,gr){this.diagnostic=gr,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=renderDiagnostic(hr,gr,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class LintPanel{constructor(hr){this.view=hr,this.items=[];let gr=xr=>{if(xr.keyCode==27)closeLintPanel(this.view),this.view.focus();else if(xr.keyCode==38||xr.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(xr.keyCode==40||xr.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(xr.keyCode==36)this.moveSelection(0);else if(xr.keyCode==35)this.moveSelection(this.items.length-1);else if(xr.keyCode==13)this.view.focus();else if(xr.keyCode>=65&&xr.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:Er}=this.items[this.selectedIndex],Cr=assignKeys(Er.actions);for(let wr=0;wr<Cr.length;wr++)if(Cr[wr].toUpperCase().charCodeAt(0)==xr.keyCode){let Rr=findDiagnostic(this.view.state.field(lintState).diagnostics,Er);Rr&&Er.actions[wr].apply(hr,Rr.from,Rr.to)}}else return;xr.preventDefault()},vr=xr=>{for(let Er=0;Er<this.items.length;Er++)this.items[Er].dom.contains(xr.target)&&this.moveSelection(Er)};this.list=crelt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:gr,onclick:vr}),this.dom=crelt("div",{class:"cm-panel-lint"},this.list,crelt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>closeLintPanel(this.view)},"×")),this.update()}get selectedIndex(){let hr=this.view.state.field(lintState).selected;if(!hr)return-1;for(let gr=0;gr<this.items.length;gr++)if(this.items[gr].diagnostic==hr.diagnostic)return gr;return-1}update(){let{diagnostics:hr,selected:gr}=this.view.state.field(lintState),vr=0,xr=!1,Er=null,Cr=new Set;for(hr.between(0,this.view.state.doc.length,(wr,Rr,{spec:kr})=>{for(let Dr of kr.diagnostics){if(Cr.has(Dr))continue;Cr.add(Dr);let Br=-1,Hr;for(let Gr=vr;Gr<this.items.length;Gr++)if(this.items[Gr].diagnostic==Dr){Br=Gr;break}Br<0?(Hr=new PanelItem(this.view,Dr),this.items.splice(vr,0,Hr),xr=!0):(Hr=this.items[Br],Br>vr&&(this.items.splice(vr,Br-vr),xr=!0)),gr&&Hr.diagnostic==gr.diagnostic?Hr.dom.hasAttribute("aria-selected")||(Hr.dom.setAttribute("aria-selected","true"),Er=Hr):Hr.dom.hasAttribute("aria-selected")&&Hr.dom.removeAttribute("aria-selected"),vr++}});vr<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)xr=!0,this.items.pop();this.items.length==0&&(this.items.push(new PanelItem(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),xr=!0),Er?(this.list.setAttribute("aria-activedescendant",Er.id),this.view.requestMeasure({key:this,read:()=>({sel:Er.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:wr,panel:Rr})=>{let kr=Rr.height/this.list.offsetHeight;wr.top<Rr.top?this.list.scrollTop-=(Rr.top-wr.top)/kr:wr.bottom>Rr.bottom&&(this.list.scrollTop+=(wr.bottom-Rr.bottom)/kr)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),xr&&this.sync()}sync(){let hr=this.list.firstChild;function gr(){let vr=hr;hr=vr.nextSibling,vr.remove()}for(let vr of this.items)if(vr.dom.parentNode==this.list){for(;hr!=vr.dom;)gr();hr=vr.dom.nextSibling}else this.list.insertBefore(vr.dom,hr);for(;hr;)gr()}moveSelection(hr){if(this.selectedIndex<0)return;let gr=this.view.state.field(lintState),vr=findDiagnostic(gr.diagnostics,this.items[hr].diagnostic);vr&&this.view.dispatch({selection:{anchor:vr.from,head:vr.to},scrollIntoView:!0,effects:movePanelSelection.of(vr)})}static open(hr){return new LintPanel(hr)}}function svg(mr,hr='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${hr}>${encodeURIComponent(mr)}</svg>')`}function underline(mr){return svg(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${mr}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const baseTheme=EditorView.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:underline("#d11")},".cm-lintRange-warning":{backgroundImage:underline("orange")},".cm-lintRange-info":{backgroundImage:underline("#999")},".cm-lintRange-hint":{backgroundImage:underline("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function severityWeight(mr){return mr=="error"?4:mr=="warning"?3:mr=="info"?2:1}function maxSeverity(mr){let hr="hint",gr=1;for(let vr of mr){let xr=severityWeight(vr.severity);xr>gr&&(gr=xr,hr=vr.severity)}return hr}const lintExtensions=[lintState,EditorView.decorations.compute([lintState],mr=>{let{selected:hr,panel:gr}=mr.field(lintState);return!hr||!gr||hr.from==hr.to?Decoration.none:Decoration.set([activeMark.range(hr.from,hr.to)])}),hoverTooltip(lintTooltip,{hideOn:hideTooltip}),baseTheme];var basicSetup=function(hr){hr===void 0&&(hr={});var{crosshairCursor:gr=!1}=hr,vr=[];hr.closeBracketsKeymap!==!1&&(vr=vr.concat(closeBracketsKeymap)),hr.defaultKeymap!==!1&&(vr=vr.concat(defaultKeymap)),hr.searchKeymap!==!1&&(vr=vr.concat(searchKeymap)),hr.historyKeymap!==!1&&(vr=vr.concat(historyKeymap)),hr.foldKeymap!==!1&&(vr=vr.concat(foldKeymap)),hr.completionKeymap!==!1&&(vr=vr.concat(completionKeymap)),hr.lintKeymap!==!1&&(vr=vr.concat(lintKeymap));var xr=[];return hr.lineNumbers!==!1&&xr.push(lineNumbers()),hr.highlightActiveLineGutter!==!1&&xr.push(highlightActiveLineGutter()),hr.highlightSpecialChars!==!1&&xr.push(highlightSpecialChars()),hr.history!==!1&&xr.push(history()),hr.foldGutter!==!1&&xr.push(foldGutter()),hr.drawSelection!==!1&&xr.push(drawSelection()),hr.dropCursor!==!1&&xr.push(dropCursor()),hr.allowMultipleSelections!==!1&&xr.push(EditorState.allowMultipleSelections.of(!0)),hr.indentOnInput!==!1&&xr.push(indentOnInput()),hr.syntaxHighlighting!==!1&&xr.push(syntaxHighlighting(defaultHighlightStyle,{fallback:!0})),hr.bracketMatching!==!1&&xr.push(bracketMatching()),hr.closeBrackets!==!1&&xr.push(closeBrackets()),hr.autocompletion!==!1&&xr.push(autocompletion()),hr.rectangularSelection!==!1&&xr.push(rectangularSelection()),gr!==!1&&xr.push(crosshairCursor()),hr.highlightActiveLine!==!1&&xr.push(highlightActiveLine()),hr.highlightSelectionMatches!==!1&&xr.push(highlightSelectionMatches()),hr.tabSize&&typeof hr.tabSize=="number"&&xr.push(indentUnit.of(" ".repeat(hr.tabSize))),xr.concat([keymap.of(vr.flat())]).filter(Boolean)};const chalky="#e5c07b",coral="#e06c75",cyan="#56b6c2",invalid="#ffffff",ivory="#abb2bf",stone="#7d8799",malibu="#61afef",sage="#98c379",whiskey="#d19a66",violet="#c678dd",darkBackground="#21252b",highlightBackground="#2c313a",background="#282c34",tooltipBackground="#353a42",selection="#3E4451",cursor$1="#528bff",oneDarkTheme=EditorView.theme({"&":{color:ivory,backgroundColor:background},".cm-content":{caretColor:cursor$1},".cm-cursor, .cm-dropCursor":{borderLeftColor:cursor$1},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:selection},".cm-panels":{backgroundColor:darkBackground,color:ivory},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:background,color:stone,border:"none"},".cm-activeLineGutter":{backgroundColor:highlightBackground},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:tooltipBackground},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:tooltipBackground,borderBottomColor:tooltipBackground},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:highlightBackground,color:ivory}}},{dark:!0}),oneDarkHighlightStyle=HighlightStyle.define([{tag:tags.keyword,color:violet},{tag:[tags.name,tags.deleted,tags.character,tags.propertyName,tags.macroName],color:coral},{tag:[tags.function(tags.variableName),tags.labelName],color:malibu},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:whiskey},{tag:[tags.definition(tags.name),tags.separator],color:ivory},{tag:[tags.typeName,tags.className,tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:chalky},{tag:[tags.operator,tags.operatorKeyword,tags.url,tags.escape,tags.regexp,tags.link,tags.special(tags.string)],color:cyan},{tag:[tags.meta,tags.comment],color:stone},{tag:tags.strong,fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.link,color:stone,textDecoration:"underline"},{tag:tags.heading,fontWeight:"bold",color:coral},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:whiskey},{tag:[tags.processingInstruction,tags.string,tags.inserted],color:sage},{tag:tags.invalid,color:invalid}]),oneDark=[oneDarkTheme,syntaxHighlighting(oneDarkHighlightStyle)];var defaultLightThemeOption=EditorView.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),getDefaultExtensions=function(hr){hr===void 0&&(hr={});var{indentWithTab:gr=!0,editable:vr=!0,readOnly:xr=!1,theme:Er="light",placeholder:Cr="",basicSetup:wr=!0}=hr,Rr=[];switch(gr&&Rr.unshift(keymap.of([indentWithTab])),wr&&(typeof wr=="boolean"?Rr.unshift(basicSetup()):Rr.unshift(basicSetup(wr))),Cr&&Rr.unshift(placeholder$2(Cr)),Er){case"light":Rr.push(defaultLightThemeOption);break;case"dark":Rr.push(oneDark);break;case"none":break;default:Rr.push(Er);break}return vr===!1&&Rr.push(EditorView.editable.of(!1)),xr&&Rr.push(EditorState.readOnly.of(!0)),[...Rr]},getStatistics=mr=>({line:mr.state.doc.lineAt(mr.state.selection.main.from),lineCount:mr.state.doc.lines,lineBreak:mr.state.lineBreak,length:mr.state.doc.length,readOnly:mr.state.readOnly,tabSize:mr.state.tabSize,selection:mr.state.selection,selectionAsSingle:mr.state.selection.asSingle().main,ranges:mr.state.selection.ranges,selectionCode:mr.state.sliceDoc(mr.state.selection.main.from,mr.state.selection.main.to),selections:mr.state.selection.ranges.map(hr=>mr.state.sliceDoc(hr.from,hr.to)),selectedText:mr.state.selection.ranges.some(hr=>!hr.empty)}),External=Annotation.define(),emptyExtensions=[];function useCodeMirror(mr){var{value:hr,selection:gr,onChange:vr,onStatistics:xr,onCreateEditor:Er,onUpdate:Cr,extensions:wr=emptyExtensions,autoFocus:Rr,theme:kr="light",height:Dr=null,minHeight:Br=null,maxHeight:Hr=null,width:Gr=null,minWidth:qr=null,maxWidth:zr=null,placeholder:Qr="",editable:sn=!0,readOnly:hn=!1,indentWithTab:vn=!0,basicSetup:yn=!0,root:gn,initialState:bn}=mr,[xn,$n]=reactExports.useState(),[Sn,Cn]=reactExports.useState(),[Rn,Bn]=reactExports.useState(),Fn=EditorView.theme({"&":{height:Dr,minHeight:Br,maxHeight:Hr,width:Gr,minWidth:qr,maxWidth:zr},"& .cm-scroller":{height:"100% !important"}}),Hn=EditorView.updateListener.of(On=>{if(On.docChanged&&typeof vr=="function"&&!On.transactions.some(Tn=>Tn.annotation(External))){var wn=On.state.doc,_n=wn.toString();vr(_n,On)}xr&&xr(getStatistics(On))}),Gn=getDefaultExtensions({theme:kr,editable:sn,readOnly:hn,placeholder:Qr,indentWithTab:vn,basicSetup:yn}),qn=[Hn,Fn,...Gn];return Cr&&typeof Cr=="function"&&qn.push(EditorView.updateListener.of(Cr)),qn=qn.concat(wr),reactExports.useEffect(()=>{if(xn&&!Rn){var On={doc:hr,selection:gr,extensions:qn},wn=bn?EditorState.fromJSON(bn.json,On,bn.fields):EditorState.create(On);if(Bn(wn),!Sn){var _n=new EditorView({state:wn,parent:xn,root:gn});Cn(_n),Er&&Er(_n,wn)}}return()=>{Sn&&(Bn(void 0),Cn(void 0))}},[xn,Rn]),reactExports.useEffect(()=>$n(mr.container),[mr.container]),reactExports.useEffect(()=>()=>{Sn&&(Sn.destroy(),Cn(void 0))},[Sn]),reactExports.useEffect(()=>{Rr&&Sn&&Sn.focus()},[Rr,Sn]),reactExports.useEffect(()=>{Sn&&Sn.dispatch({effects:StateEffect.reconfigure.of(qn)})},[kr,wr,Dr,Br,Hr,Gr,qr,zr,Qr,sn,hn,vn,yn,vr,Cr]),reactExports.useEffect(()=>{if(hr!==void 0){var On=Sn?Sn.state.doc.toString():"";Sn&&hr!==On&&Sn.dispatch({changes:{from:0,to:On.length,insert:hr||""},annotations:[External.of(!0)]})}},[hr,Sn]),{state:Rn,setState:Bn,view:Sn,setView:Cn,container:xn,setContainer:$n}}var _excluded$7=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],ReactCodeMirror=reactExports.forwardRef((mr,hr)=>{var{className:gr,value:vr="",selection:xr,extensions:Er=[],onChange:Cr,onStatistics:wr,onCreateEditor:Rr,onUpdate:kr,autoFocus:Dr,theme:Br="light",height:Hr,minHeight:Gr,maxHeight:qr,width:zr,minWidth:Qr,maxWidth:sn,basicSetup:hn,placeholder:vn,indentWithTab:yn,editable:gn,readOnly:bn,root:xn,initialState:$n}=mr,Sn=_objectWithoutPropertiesLoose$2(mr,_excluded$7),Cn=reactExports.useRef(null),{state:Rn,view:Bn,container:Fn}=useCodeMirror({container:Cn.current,root:xn,value:vr,autoFocus:Dr,theme:Br,height:Hr,minHeight:Gr,maxHeight:qr,width:zr,minWidth:Qr,maxWidth:sn,basicSetup:hn,placeholder:vn,indentWithTab:yn,editable:gn,readOnly:bn,selection:xr,onChange:Cr,onStatistics:wr,onCreateEditor:Rr,onUpdate:kr,extensions:Er,initialState:$n});if(reactExports.useImperativeHandle(hr,()=>({editor:Cn.current,state:Rn,view:Bn}),[Cn,Fn,Rn,Bn]),typeof vr!="string")throw new Error("value must be typeof string but got "+typeof vr);var Hn=typeof Br=="string"?"cm-theme-"+Br:"cm-theme";return jsxRuntimeExports.jsx("div",_extends$7({ref:Cn,className:""+Hn+(gr?" "+gr:"")},Sn))});ReactCodeMirror.displayName="CodeMirror";function $6c2e24571c90391f$export$3e6543de14f8614f(mr,hr){return reactExports.useReducer((gr,vr)=>{const xr=hr[gr][vr];return xr??gr},mr)}const $57acba87d6e25586$var$SCROLL_AREA_NAME="ScrollArea",[$57acba87d6e25586$var$createScrollAreaContext,$57acba87d6e25586$export$488468afe3a6f2b1]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($57acba87d6e25586$var$SCROLL_AREA_NAME),[$57acba87d6e25586$var$ScrollAreaProvider,$57acba87d6e25586$var$useScrollAreaContext]=$57acba87d6e25586$var$createScrollAreaContext($57acba87d6e25586$var$SCROLL_AREA_NAME),$57acba87d6e25586$export$ccf8d8d7bbf3c2cc=reactExports.forwardRef((mr,hr)=>{const{__scopeScrollArea:gr,type:vr="hover",dir:xr,scrollHideDelay:Er=600,...Cr}=mr,[wr,Rr]=reactExports.useState(null),[kr,Dr]=reactExports.useState(null),[Br,Hr]=reactExports.useState(null),[Gr,qr]=reactExports.useState(null),[zr,Qr]=reactExports.useState(null),[sn,hn]=reactExports.useState(0),[vn,yn]=reactExports.useState(0),[gn,bn]=reactExports.useState(!1),[xn,$n]=reactExports.useState(!1),Sn=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(hr,Rn=>Rr(Rn)),Cn=$f631663db3294ace$export$b39126d51d94e6f3(xr);return reactExports.createElement($57acba87d6e25586$var$ScrollAreaProvider,{scope:gr,type:vr,dir:Cn,scrollHideDelay:Er,scrollArea:wr,viewport:kr,onViewportChange:Dr,content:Br,onContentChange:Hr,scrollbarX:Gr,onScrollbarXChange:qr,scrollbarXEnabled:gn,onScrollbarXEnabledChange:bn,scrollbarY:zr,onScrollbarYChange:Qr,scrollbarYEnabled:xn,onScrollbarYEnabledChange:$n,onCornerWidthChange:hn,onCornerHeightChange:yn},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$7({dir:Cn},Cr,{ref:Sn,style:{position:"relative","--radix-scroll-area-corner-width":sn+"px","--radix-scroll-area-corner-height":vn+"px",...mr.style}})))}),$57acba87d6e25586$var$VIEWPORT_NAME="ScrollAreaViewport",$57acba87d6e25586$export$a21cbf9f11fca853=reactExports.forwardRef((mr,hr)=>{const{__scopeScrollArea:gr,children:vr,...xr}=mr,Er=$57acba87d6e25586$var$useScrollAreaContext($57acba87d6e25586$var$VIEWPORT_NAME,gr),Cr=reactExports.useRef(null),wr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(hr,Cr,Er.onViewportChange);return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"}}),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$7({"data-radix-scroll-area-viewport":""},xr,{ref:wr,style:{overflowX:Er.scrollbarXEnabled?"scroll":"hidden",overflowY:Er.scrollbarYEnabled?"scroll":"hidden",...mr.style}}),reactExports.createElement("div",{ref:Er.onContentChange,style:{minWidth:"100%",display:"table"}},vr)))}),$57acba87d6e25586$var$SCROLLBAR_NAME="ScrollAreaScrollbar",$57acba87d6e25586$export$2fabd85d0eba3c57=reactExports.forwardRef((mr,hr)=>{const{forceMount:gr,...vr}=mr,xr=$57acba87d6e25586$var$useScrollAreaContext($57acba87d6e25586$var$SCROLLBAR_NAME,mr.__scopeScrollArea),{onScrollbarXEnabledChange:Er,onScrollbarYEnabledChange:Cr}=xr,wr=mr.orientation==="horizontal";return reactExports.useEffect(()=>(wr?Er(!0):Cr(!0),()=>{wr?Er(!1):Cr(!1)}),[wr,Er,Cr]),xr.type==="hover"?reactExports.createElement($57acba87d6e25586$var$ScrollAreaScrollbarHover,_extends$7({},vr,{ref:hr,forceMount:gr})):xr.type==="scroll"?reactExports.createElement($57acba87d6e25586$var$ScrollAreaScrollbarScroll,_extends$7({},vr,{ref:hr,forceMount:gr})):xr.type==="auto"?reactExports.createElement($57acba87d6e25586$var$ScrollAreaScrollbarAuto,_extends$7({},vr,{ref:hr,forceMount:gr})):xr.type==="always"?reactExports.createElement($57acba87d6e25586$var$ScrollAreaScrollbarVisible,_extends$7({},vr,{ref:hr})):null}),$57acba87d6e25586$var$ScrollAreaScrollbarHover=reactExports.forwardRef((mr,hr)=>{const{forceMount:gr,...vr}=mr,xr=$57acba87d6e25586$var$useScrollAreaContext($57acba87d6e25586$var$SCROLLBAR_NAME,mr.__scopeScrollArea),[Er,Cr]=reactExports.useState(!1);return reactExports.useEffect(()=>{const wr=xr.scrollArea;let Rr=0;if(wr){const kr=()=>{window.clearTimeout(Rr),Cr(!0)},Dr=()=>{Rr=window.setTimeout(()=>Cr(!1),xr.scrollHideDelay)};return wr.addEventListener("pointerenter",kr),wr.addEventListener("pointerleave",Dr),()=>{window.clearTimeout(Rr),wr.removeEventListener("pointerenter",kr),wr.removeEventListener("pointerleave",Dr)}}},[xr.scrollArea,xr.scrollHideDelay]),reactExports.createElement($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:gr||Er},reactExports.createElement($57acba87d6e25586$var$ScrollAreaScrollbarAuto,_extends$7({"data-state":Er?"visible":"hidden"},vr,{ref:hr})))}),$57acba87d6e25586$var$ScrollAreaScrollbarScroll=reactExports.forwardRef((mr,hr)=>{const{forceMount:gr,...vr}=mr,xr=$57acba87d6e25586$var$useScrollAreaContext($57acba87d6e25586$var$SCROLLBAR_NAME,mr.__scopeScrollArea),Er=mr.orientation==="horizontal",Cr=$57acba87d6e25586$var$useDebounceCallback(()=>Rr("SCROLL_END"),100),[wr,Rr]=$6c2e24571c90391f$export$3e6543de14f8614f("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return reactExports.useEffect(()=>{if(wr==="idle"){const kr=window.setTimeout(()=>Rr("HIDE"),xr.scrollHideDelay);return()=>window.clearTimeout(kr)}},[wr,xr.scrollHideDelay,Rr]),reactExports.useEffect(()=>{const kr=xr.viewport,Dr=Er?"scrollLeft":"scrollTop";if(kr){let Br=kr[Dr];const Hr=()=>{const Gr=kr[Dr];Br!==Gr&&(Rr("SCROLL"),Cr()),Br=Gr};return kr.addEventListener("scroll",Hr),()=>kr.removeEventListener("scroll",Hr)}},[xr.viewport,Er,Rr,Cr]),reactExports.createElement($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:gr||wr!=="hidden"},reactExports.createElement($57acba87d6e25586$var$ScrollAreaScrollbarVisible,_extends$7({"data-state":wr==="hidden"?"hidden":"visible"},vr,{ref:hr,onPointerEnter:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onPointerEnter,()=>Rr("POINTER_ENTER")),onPointerLeave:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onPointerLeave,()=>Rr("POINTER_LEAVE"))})))}),$57acba87d6e25586$var$ScrollAreaScrollbarAuto=reactExports.forwardRef((mr,hr)=>{const gr=$57acba87d6e25586$var$useScrollAreaContext($57acba87d6e25586$var$SCROLLBAR_NAME,mr.__scopeScrollArea),{forceMount:vr,...xr}=mr,[Er,Cr]=reactExports.useState(!1),wr=mr.orientation==="horizontal",Rr=$57acba87d6e25586$var$useDebounceCallback(()=>{if(gr.viewport){const kr=gr.viewport.offsetWidth<gr.viewport.scrollWidth,Dr=gr.viewport.offsetHeight<gr.viewport.scrollHeight;Cr(wr?kr:Dr)}},10);return $57acba87d6e25586$var$useResizeObserver(gr.viewport,Rr),$57acba87d6e25586$var$useResizeObserver(gr.content,Rr),reactExports.createElement($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:vr||Er},reactExports.createElement($57acba87d6e25586$var$ScrollAreaScrollbarVisible,_extends$7({"data-state":Er?"visible":"hidden"},xr,{ref:hr})))}),$57acba87d6e25586$var$ScrollAreaScrollbarVisible=reactExports.forwardRef((mr,hr)=>{const{orientation:gr="vertical",...vr}=mr,xr=$57acba87d6e25586$var$useScrollAreaContext($57acba87d6e25586$var$SCROLLBAR_NAME,mr.__scopeScrollArea),Er=reactExports.useRef(null),Cr=reactExports.useRef(0),[wr,Rr]=reactExports.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),kr=$57acba87d6e25586$var$getThumbRatio(wr.viewport,wr.content),Dr={...vr,sizes:wr,onSizesChange:Rr,hasThumb:kr>0&&kr<1,onThumbChange:Hr=>Er.current=Hr,onThumbPointerUp:()=>Cr.current=0,onThumbPointerDown:Hr=>Cr.current=Hr};function Br(Hr,Gr){return $57acba87d6e25586$var$getScrollPositionFromPointer(Hr,Cr.current,wr,Gr)}return gr==="horizontal"?reactExports.createElement($57acba87d6e25586$var$ScrollAreaScrollbarX,_extends$7({},Dr,{ref:hr,onThumbPositionChange:()=>{if(xr.viewport&&Er.current){const Hr=xr.viewport.scrollLeft,Gr=$57acba87d6e25586$var$getThumbOffsetFromScroll(Hr,wr,xr.dir);Er.current.style.transform=`translate3d(${Gr}px, 0, 0)`}},onWheelScroll:Hr=>{xr.viewport&&(xr.viewport.scrollLeft=Hr)},onDragScroll:Hr=>{xr.viewport&&(xr.viewport.scrollLeft=Br(Hr,xr.dir))}})):gr==="vertical"?reactExports.createElement($57acba87d6e25586$var$ScrollAreaScrollbarY,_extends$7({},Dr,{ref:hr,onThumbPositionChange:()=>{if(xr.viewport&&Er.current){const Hr=xr.viewport.scrollTop,Gr=$57acba87d6e25586$var$getThumbOffsetFromScroll(Hr,wr);Er.current.style.transform=`translate3d(0, ${Gr}px, 0)`}},onWheelScroll:Hr=>{xr.viewport&&(xr.viewport.scrollTop=Hr)},onDragScroll:Hr=>{xr.viewport&&(xr.viewport.scrollTop=Br(Hr))}})):null}),$57acba87d6e25586$var$ScrollAreaScrollbarX=reactExports.forwardRef((mr,hr)=>{const{sizes:gr,onSizesChange:vr,...xr}=mr,Er=$57acba87d6e25586$var$useScrollAreaContext($57acba87d6e25586$var$SCROLLBAR_NAME,mr.__scopeScrollArea),[Cr,wr]=reactExports.useState(),Rr=reactExports.useRef(null),kr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(hr,Rr,Er.onScrollbarXChange);return reactExports.useEffect(()=>{Rr.current&&wr(getComputedStyle(Rr.current))},[Rr]),reactExports.createElement($57acba87d6e25586$var$ScrollAreaScrollbarImpl,_extends$7({"data-orientation":"horizontal"},xr,{ref:kr,sizes:gr,style:{bottom:0,left:Er.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:Er.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":$57acba87d6e25586$var$getThumbSize(gr)+"px",...mr.style},onThumbPointerDown:Dr=>mr.onThumbPointerDown(Dr.x),onDragScroll:Dr=>mr.onDragScroll(Dr.x),onWheelScroll:(Dr,Br)=>{if(Er.viewport){const Hr=Er.viewport.scrollLeft+Dr.deltaX;mr.onWheelScroll(Hr),$57acba87d6e25586$var$isScrollingWithinScrollbarBounds(Hr,Br)&&Dr.preventDefault()}},onResize:()=>{Rr.current&&Er.viewport&&Cr&&vr({content:Er.viewport.scrollWidth,viewport:Er.viewport.offsetWidth,scrollbar:{size:Rr.current.clientWidth,paddingStart:$57acba87d6e25586$var$toInt(Cr.paddingLeft),paddingEnd:$57acba87d6e25586$var$toInt(Cr.paddingRight)}})}}))}),$57acba87d6e25586$var$ScrollAreaScrollbarY=reactExports.forwardRef((mr,hr)=>{const{sizes:gr,onSizesChange:vr,...xr}=mr,Er=$57acba87d6e25586$var$useScrollAreaContext($57acba87d6e25586$var$SCROLLBAR_NAME,mr.__scopeScrollArea),[Cr,wr]=reactExports.useState(),Rr=reactExports.useRef(null),kr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(hr,Rr,Er.onScrollbarYChange);return reactExports.useEffect(()=>{Rr.current&&wr(getComputedStyle(Rr.current))},[Rr]),reactExports.createElement($57acba87d6e25586$var$ScrollAreaScrollbarImpl,_extends$7({"data-orientation":"vertical"},xr,{ref:kr,sizes:gr,style:{top:0,right:Er.dir==="ltr"?0:void 0,left:Er.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":$57acba87d6e25586$var$getThumbSize(gr)+"px",...mr.style},onThumbPointerDown:Dr=>mr.onThumbPointerDown(Dr.y),onDragScroll:Dr=>mr.onDragScroll(Dr.y),onWheelScroll:(Dr,Br)=>{if(Er.viewport){const Hr=Er.viewport.scrollTop+Dr.deltaY;mr.onWheelScroll(Hr),$57acba87d6e25586$var$isScrollingWithinScrollbarBounds(Hr,Br)&&Dr.preventDefault()}},onResize:()=>{Rr.current&&Er.viewport&&Cr&&vr({content:Er.viewport.scrollHeight,viewport:Er.viewport.offsetHeight,scrollbar:{size:Rr.current.clientHeight,paddingStart:$57acba87d6e25586$var$toInt(Cr.paddingTop),paddingEnd:$57acba87d6e25586$var$toInt(Cr.paddingBottom)}})}}))}),[$57acba87d6e25586$var$ScrollbarProvider,$57acba87d6e25586$var$useScrollbarContext]=$57acba87d6e25586$var$createScrollAreaContext($57acba87d6e25586$var$SCROLLBAR_NAME),$57acba87d6e25586$var$ScrollAreaScrollbarImpl=reactExports.forwardRef((mr,hr)=>{const{__scopeScrollArea:gr,sizes:vr,hasThumb:xr,onThumbChange:Er,onThumbPointerUp:Cr,onThumbPointerDown:wr,onThumbPositionChange:Rr,onDragScroll:kr,onWheelScroll:Dr,onResize:Br,...Hr}=mr,Gr=$57acba87d6e25586$var$useScrollAreaContext($57acba87d6e25586$var$SCROLLBAR_NAME,gr),[qr,zr]=reactExports.useState(null),Qr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(hr,Sn=>zr(Sn)),sn=reactExports.useRef(null),hn=reactExports.useRef(""),vn=Gr.viewport,yn=vr.content-vr.viewport,gn=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a$1(Dr),bn=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a$1(Rr),xn=$57acba87d6e25586$var$useDebounceCallback(Br,10);function $n(Sn){if(sn.current){const Cn=Sn.clientX-sn.current.left,Rn=Sn.clientY-sn.current.top;kr({x:Cn,y:Rn})}}return reactExports.useEffect(()=>{const Sn=Cn=>{const Rn=Cn.target;qr?.contains(Rn)&&gn(Cn,yn)};return document.addEventListener("wheel",Sn,{passive:!1}),()=>document.removeEventListener("wheel",Sn,{passive:!1})},[vn,qr,yn,gn]),reactExports.useEffect(bn,[vr,bn]),$57acba87d6e25586$var$useResizeObserver(qr,xn),$57acba87d6e25586$var$useResizeObserver(Gr.content,xn),reactExports.createElement($57acba87d6e25586$var$ScrollbarProvider,{scope:gr,scrollbar:qr,hasThumb:xr,onThumbChange:$b1b2314f5f9a1d84$export$25bec8c6f54ee79a$1(Er),onThumbPointerUp:$b1b2314f5f9a1d84$export$25bec8c6f54ee79a$1(Cr),onThumbPositionChange:bn,onThumbPointerDown:$b1b2314f5f9a1d84$export$25bec8c6f54ee79a$1(wr)},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$7({},Hr,{ref:Qr,style:{position:"absolute",...Hr.style},onPointerDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onPointerDown,Sn=>{Sn.button===0&&(Sn.target.setPointerCapture(Sn.pointerId),sn.current=qr.getBoundingClientRect(),hn.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",Gr.viewport&&(Gr.viewport.style.scrollBehavior="auto"),$n(Sn))}),onPointerMove:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onPointerMove,$n),onPointerUp:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onPointerUp,Sn=>{const Cn=Sn.target;Cn.hasPointerCapture(Sn.pointerId)&&Cn.releasePointerCapture(Sn.pointerId),document.body.style.webkitUserSelect=hn.current,Gr.viewport&&(Gr.viewport.style.scrollBehavior=""),sn.current=null})})))}),$57acba87d6e25586$var$THUMB_NAME="ScrollAreaThumb",$57acba87d6e25586$export$9fba1154677d7cd2=reactExports.forwardRef((mr,hr)=>{const{forceMount:gr,...vr}=mr,xr=$57acba87d6e25586$var$useScrollbarContext($57acba87d6e25586$var$THUMB_NAME,mr.__scopeScrollArea);return reactExports.createElement($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:gr||xr.hasThumb},reactExports.createElement($57acba87d6e25586$var$ScrollAreaThumbImpl,_extends$7({ref:hr},vr)))}),$57acba87d6e25586$var$ScrollAreaThumbImpl=reactExports.forwardRef((mr,hr)=>{const{__scopeScrollArea:gr,style:vr,...xr}=mr,Er=$57acba87d6e25586$var$useScrollAreaContext($57acba87d6e25586$var$THUMB_NAME,gr),Cr=$57acba87d6e25586$var$useScrollbarContext($57acba87d6e25586$var$THUMB_NAME,gr),{onThumbPositionChange:wr}=Cr,Rr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(hr,Br=>Cr.onThumbChange(Br)),kr=reactExports.useRef(),Dr=$57acba87d6e25586$var$useDebounceCallback(()=>{kr.current&&(kr.current(),kr.current=void 0)},100);return reactExports.useEffect(()=>{const Br=Er.viewport;if(Br){const Hr=()=>{if(Dr(),!kr.current){const Gr=$57acba87d6e25586$var$addUnlinkedScrollListener(Br,wr);kr.current=Gr,wr()}};return wr(),Br.addEventListener("scroll",Hr),()=>Br.removeEventListener("scroll",Hr)}},[Er.viewport,Dr,wr]),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$7({"data-state":Cr.hasThumb?"visible":"hidden"},xr,{ref:Rr,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...vr},onPointerDownCapture:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onPointerDownCapture,Br=>{const Gr=Br.target.getBoundingClientRect(),qr=Br.clientX-Gr.left,zr=Br.clientY-Gr.top;Cr.onThumbPointerDown({x:qr,y:zr})}),onPointerUp:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onPointerUp,Cr.onThumbPointerUp)}))});function $57acba87d6e25586$var$toInt(mr){return mr?parseInt(mr,10):0}function $57acba87d6e25586$var$getThumbRatio(mr,hr){const gr=mr/hr;return isNaN(gr)?0:gr}function $57acba87d6e25586$var$getThumbSize(mr){const hr=$57acba87d6e25586$var$getThumbRatio(mr.viewport,mr.content),gr=mr.scrollbar.paddingStart+mr.scrollbar.paddingEnd,vr=(mr.scrollbar.size-gr)*hr;return Math.max(vr,18)}function $57acba87d6e25586$var$getScrollPositionFromPointer(mr,hr,gr,vr="ltr"){const xr=$57acba87d6e25586$var$getThumbSize(gr),Er=xr/2,Cr=hr||Er,wr=xr-Cr,Rr=gr.scrollbar.paddingStart+Cr,kr=gr.scrollbar.size-gr.scrollbar.paddingEnd-wr,Dr=gr.content-gr.viewport,Br=vr==="ltr"?[0,Dr]:[Dr*-1,0];return $57acba87d6e25586$var$linearScale([Rr,kr],Br)(mr)}function $57acba87d6e25586$var$getThumbOffsetFromScroll(mr,hr,gr="ltr"){const vr=$57acba87d6e25586$var$getThumbSize(hr),xr=hr.scrollbar.paddingStart+hr.scrollbar.paddingEnd,Er=hr.scrollbar.size-xr,Cr=hr.content-hr.viewport,wr=Er-vr,Rr=gr==="ltr"?[0,Cr]:[Cr*-1,0],kr=$ae6933e535247d3d$export$7d15b64cf5a3a4c4(mr,Rr);return $57acba87d6e25586$var$linearScale([0,Cr],[0,wr])(kr)}function $57acba87d6e25586$var$linearScale(mr,hr){return gr=>{if(mr[0]===mr[1]||hr[0]===hr[1])return hr[0];const vr=(hr[1]-hr[0])/(mr[1]-mr[0]);return hr[0]+vr*(gr-mr[0])}}function $57acba87d6e25586$var$isScrollingWithinScrollbarBounds(mr,hr){return mr>0&&mr<hr}const $57acba87d6e25586$var$addUnlinkedScrollListener=(mr,hr=()=>{})=>{let gr={left:mr.scrollLeft,top:mr.scrollTop},vr=0;return function xr(){const Er={left:mr.scrollLeft,top:mr.scrollTop},Cr=gr.left!==Er.left,wr=gr.top!==Er.top;(Cr||wr)&&hr(),gr=Er,vr=window.requestAnimationFrame(xr)}(),()=>window.cancelAnimationFrame(vr)};function $57acba87d6e25586$var$useDebounceCallback(mr,hr){const gr=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a$1(mr),vr=reactExports.useRef(0);return reactExports.useEffect(()=>()=>window.clearTimeout(vr.current),[]),reactExports.useCallback(()=>{window.clearTimeout(vr.current),vr.current=window.setTimeout(gr,hr)},[gr,hr])}function $57acba87d6e25586$var$useResizeObserver(mr,hr){const gr=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a$1(hr);$9f79659886946c16$export$e5c5a5f917a5871c(()=>{let vr=0;if(mr){const xr=new ResizeObserver(()=>{cancelAnimationFrame(vr),vr=window.requestAnimationFrame(gr)});return xr.observe(mr),()=>{window.cancelAnimationFrame(vr),xr.unobserve(mr)}}},[mr,gr])}const $57acba87d6e25586$export$be92b6f5f03c0fe9=$57acba87d6e25586$export$ccf8d8d7bbf3c2cc,$57acba87d6e25586$export$d5c6c08dc2d3ca7=$57acba87d6e25586$export$a21cbf9f11fca853,$57acba87d6e25586$export$9a4e88b92edfce6b=$57acba87d6e25586$export$2fabd85d0eba3c57,$57acba87d6e25586$export$6521433ed15a34db=$57acba87d6e25586$export$9fba1154677d7cd2;let $488c6ddbf4ef74c2$var$formatterCache=new Map,$488c6ddbf4ef74c2$var$supportsSignDisplay=!1;try{$488c6ddbf4ef74c2$var$supportsSignDisplay=new Intl.NumberFormat("de-DE",{signDisplay:"exceptZero"}).resolvedOptions().signDisplay==="exceptZero"}catch{}let $488c6ddbf4ef74c2$var$supportsUnit=!1;try{$488c6ddbf4ef74c2$var$supportsUnit=new Intl.NumberFormat("de-DE",{style:"unit",unit:"degree"}).resolvedOptions().style==="unit"}catch{}const $488c6ddbf4ef74c2$var$UNITS={degree:{narrow:{default:"°","ja-JP":" 度","zh-TW":"度","sl-SI":" °"}}};class $488c6ddbf4ef74c2$export$cc77c4ff7e8673c5{format(hr){let gr="";if(!$488c6ddbf4ef74c2$var$supportsSignDisplay&&this.options.signDisplay!=null?gr=$488c6ddbf4ef74c2$export$711b50b3c525e0f2(this.numberFormatter,this.options.signDisplay,hr):gr=this.numberFormatter.format(hr),this.options.style==="unit"&&!$488c6ddbf4ef74c2$var$supportsUnit){var vr;let{unit:xr,unitDisplay:Er="short",locale:Cr}=this.resolvedOptions();if(!xr)return gr;let wr=(vr=$488c6ddbf4ef74c2$var$UNITS[xr])===null||vr===void 0?void 0:vr[Er];gr+=wr[Cr]||wr.default}return gr}formatToParts(hr){return this.numberFormatter.formatToParts(hr)}formatRange(hr,gr){if(typeof this.numberFormatter.formatRange=="function")return this.numberFormatter.formatRange(hr,gr);if(gr<hr)throw new RangeError("End date must be >= start date");return`${this.format(hr)} – ${this.format(gr)}`}formatRangeToParts(hr,gr){if(typeof this.numberFormatter.formatRangeToParts=="function")return this.numberFormatter.formatRangeToParts(hr,gr);if(gr<hr)throw new RangeError("End date must be >= start date");let vr=this.numberFormatter.formatToParts(hr),xr=this.numberFormatter.formatToParts(gr);return[...vr.map(Er=>({...Er,source:"startRange"})),{type:"literal",value:" – ",source:"shared"},...xr.map(Er=>({...Er,source:"endRange"}))]}resolvedOptions(){let hr=this.numberFormatter.resolvedOptions();return!$488c6ddbf4ef74c2$var$supportsSignDisplay&&this.options.signDisplay!=null&&(hr={...hr,signDisplay:this.options.signDisplay}),!$488c6ddbf4ef74c2$var$supportsUnit&&this.options.style==="unit"&&(hr={...hr,style:"unit",unit:this.options.unit,unitDisplay:this.options.unitDisplay}),hr}constructor(hr,gr={}){this.numberFormatter=$488c6ddbf4ef74c2$var$getCachedNumberFormatter(hr,gr),this.options=gr}}function $488c6ddbf4ef74c2$var$getCachedNumberFormatter(mr,hr={}){let{numberingSystem:gr}=hr;if(gr&&mr.includes("-nu-")&&(mr.includes("-u-")||(mr+="-u-"),mr+=`-nu-${gr}`),hr.style==="unit"&&!$488c6ddbf4ef74c2$var$supportsUnit){var vr;let{unit:Cr,unitDisplay:wr="short"}=hr;if(!Cr)throw new Error('unit option must be provided with style: "unit"');if(!(!((vr=$488c6ddbf4ef74c2$var$UNITS[Cr])===null||vr===void 0)&&vr[wr]))throw new Error(`Unsupported unit ${Cr} with unitDisplay = ${wr}`);hr={...hr,style:"decimal"}}let xr=mr+(hr?Object.entries(hr).sort((Cr,wr)=>Cr[0]<wr[0]?-1:1).join():"");if($488c6ddbf4ef74c2$var$formatterCache.has(xr))return $488c6ddbf4ef74c2$var$formatterCache.get(xr);let Er=new Intl.NumberFormat(mr,hr);return $488c6ddbf4ef74c2$var$formatterCache.set(xr,Er),Er}function $488c6ddbf4ef74c2$export$711b50b3c525e0f2(mr,hr,gr){if(hr==="auto")return mr.format(gr);if(hr==="never")return mr.format(Math.abs(gr));{let vr=!1;if(hr==="always"?vr=gr>0||Object.is(gr,0):hr==="exceptZero"&&(Object.is(gr,-0)||Object.is(gr,0)?gr=Math.abs(gr):vr=gr>0),vr){let xr=mr.format(-gr),Er=mr.format(gr),Cr=xr.replace(Er,"").replace(/\u200e|\u061C/,"");return[...Cr].length!==1&&console.warn("@react-aria/i18n polyfill for NumberFormat signDisplay: Unsupported case"),xr.replace(Er,"!!!").replace(Cr,"+").replace("!!!",Er)}else return mr.format(gr)}}const $6c7bd7858deea686$var$CURRENCY_SIGN_REGEX=new RegExp("^.*\\(.*\\).*$"),$6c7bd7858deea686$var$NUMBERING_SYSTEMS=["latn","arab","hanidec"];class $6c7bd7858deea686$export$cd11ab140839f11d{parse(hr){return $6c7bd7858deea686$var$getNumberParserImpl(this.locale,this.options,hr).parse(hr)}isValidPartialNumber(hr,gr,vr){return $6c7bd7858deea686$var$getNumberParserImpl(this.locale,this.options,hr).isValidPartialNumber(hr,gr,vr)}getNumberingSystem(hr){return $6c7bd7858deea686$var$getNumberParserImpl(this.locale,this.options,hr).options.numberingSystem}constructor(hr,gr={}){this.locale=hr,this.options=gr}}const $6c7bd7858deea686$var$numberParserCache=new Map;function $6c7bd7858deea686$var$getNumberParserImpl(mr,hr,gr){let vr=$6c7bd7858deea686$var$getCachedNumberParser(mr,hr);if(!mr.includes("-nu-")&&!vr.isValidPartialNumber(gr)){for(let xr of $6c7bd7858deea686$var$NUMBERING_SYSTEMS)if(xr!==vr.options.numberingSystem){let Er=$6c7bd7858deea686$var$getCachedNumberParser(mr+(mr.includes("-u-")?"-nu-":"-u-nu-")+xr,hr);if(Er.isValidPartialNumber(gr))return Er}}return vr}function $6c7bd7858deea686$var$getCachedNumberParser(mr,hr){let gr=mr+(hr?Object.entries(hr).sort((xr,Er)=>xr[0]<Er[0]?-1:1).join():""),vr=$6c7bd7858deea686$var$numberParserCache.get(gr);return vr||(vr=new $6c7bd7858deea686$var$NumberParserImpl(mr,hr),$6c7bd7858deea686$var$numberParserCache.set(gr,vr)),vr}class $6c7bd7858deea686$var$NumberParserImpl{parse(hr){let gr=this.sanitize(hr);if(this.symbols.group&&(gr=$6c7bd7858deea686$var$replaceAll(gr,this.symbols.group,"")),this.symbols.decimal&&(gr=gr.replace(this.symbols.decimal,".")),this.symbols.minusSign&&(gr=gr.replace(this.symbols.minusSign,"-")),gr=gr.replace(this.symbols.numeral,this.symbols.index),this.options.style==="percent"){let Cr=gr.indexOf("-");gr=gr.replace("-","");let wr=gr.indexOf(".");wr===-1&&(wr=gr.length),gr=gr.replace(".",""),wr-2===0?gr=`0.${gr}`:wr-2===-1?gr=`0.0${gr}`:wr-2===-2?gr="0.00":gr=`${gr.slice(0,wr-2)}.${gr.slice(wr-2)}`,Cr>-1&&(gr=`-${gr}`)}let vr=gr?+gr:NaN;if(isNaN(vr))return NaN;if(this.options.style==="percent"){var xr,Er;let Cr={...this.options,style:"decimal",minimumFractionDigits:Math.min(((xr=this.options.minimumFractionDigits)!==null&&xr!==void 0?xr:0)+2,20),maximumFractionDigits:Math.min(((Er=this.options.maximumFractionDigits)!==null&&Er!==void 0?Er:0)+2,20)};return new $6c7bd7858deea686$export$cd11ab140839f11d(this.locale,Cr).parse(new $488c6ddbf4ef74c2$export$cc77c4ff7e8673c5(this.locale,Cr).format(vr))}return this.options.currencySign==="accounting"&&$6c7bd7858deea686$var$CURRENCY_SIGN_REGEX.test(hr)&&(vr=-1*vr),vr}sanitize(hr){return hr=hr.replace(this.symbols.literals,""),this.symbols.minusSign&&(hr=hr.replace("-",this.symbols.minusSign)),this.options.numberingSystem==="arab"&&(this.symbols.decimal&&(hr=hr.replace(",",this.symbols.decimal),hr=hr.replace("،",this.symbols.decimal)),this.symbols.group&&(hr=$6c7bd7858deea686$var$replaceAll(hr,".",this.symbols.group))),this.options.locale==="fr-FR"&&(hr=$6c7bd7858deea686$var$replaceAll(hr,"."," ")),hr}isValidPartialNumber(hr,gr=-1/0,vr=1/0){return hr=this.sanitize(hr),this.symbols.minusSign&&hr.startsWith(this.symbols.minusSign)&&gr<0?hr=hr.slice(this.symbols.minusSign.length):this.symbols.plusSign&&hr.startsWith(this.symbols.plusSign)&&vr>0&&(hr=hr.slice(this.symbols.plusSign.length)),this.symbols.group&&hr.startsWith(this.symbols.group)||this.symbols.decimal&&hr.indexOf(this.symbols.decimal)>-1&&this.options.maximumFractionDigits===0?!1:(this.symbols.group&&(hr=$6c7bd7858deea686$var$replaceAll(hr,this.symbols.group,"")),hr=hr.replace(this.symbols.numeral,""),this.symbols.decimal&&(hr=hr.replace(this.symbols.decimal,"")),hr.length===0)}constructor(hr,gr={}){this.locale=hr,this.formatter=new Intl.NumberFormat(hr,gr),this.options=this.formatter.resolvedOptions(),this.symbols=$6c7bd7858deea686$var$getSymbols(hr,this.formatter,this.options,gr);var vr,xr;this.options.style==="percent"&&(((vr=this.options.minimumFractionDigits)!==null&&vr!==void 0?vr:0)>18||((xr=this.options.maximumFractionDigits)!==null&&xr!==void 0?xr:0)>18)&&console.warn("NumberParser cannot handle percentages with greater than 18 decimal places, please reduce the number in your options.")}}const $6c7bd7858deea686$var$nonLiteralParts=new Set(["decimal","fraction","integer","minusSign","plusSign","group"]),$6c7bd7858deea686$var$pluralNumbers=[0,4,2,1,11,20,3,7,100,21,.1,1.1];function $6c7bd7858deea686$var$getSymbols(mr,hr,gr,vr){var xr,Er,Cr,wr;let Rr=new Intl.NumberFormat(mr,{...gr,minimumSignificantDigits:1,maximumSignificantDigits:21}),kr=Rr.formatToParts(-10000.111),Dr=Rr.formatToParts(10000.111),Br=$6c7bd7858deea686$var$pluralNumbers.map(Cn=>Rr.formatToParts(Cn));var Hr;let Gr=(Hr=(xr=kr.find(Cn=>Cn.type==="minusSign"))===null||xr===void 0?void 0:xr.value)!==null&&Hr!==void 0?Hr:"-",qr=(Er=Dr.find(Cn=>Cn.type==="plusSign"))===null||Er===void 0?void 0:Er.value;!qr&&(vr?.signDisplay==="exceptZero"||vr?.signDisplay==="always")&&(qr="+");let Qr=(Cr=new Intl.NumberFormat(mr,{...gr,minimumFractionDigits:2,maximumFractionDigits:2}).formatToParts(.001).find(Cn=>Cn.type==="decimal"))===null||Cr===void 0?void 0:Cr.value,sn=(wr=kr.find(Cn=>Cn.type==="group"))===null||wr===void 0?void 0:wr.value,hn=kr.filter(Cn=>!$6c7bd7858deea686$var$nonLiteralParts.has(Cn.type)).map(Cn=>$6c7bd7858deea686$var$escapeRegex(Cn.value)),vn=Br.flatMap(Cn=>Cn.filter(Rn=>!$6c7bd7858deea686$var$nonLiteralParts.has(Rn.type)).map(Rn=>$6c7bd7858deea686$var$escapeRegex(Rn.value))),yn=[...new Set([...hn,...vn])].sort((Cn,Rn)=>Rn.length-Cn.length),gn=yn.length===0?new RegExp("[\\p{White_Space}]","gu"):new RegExp(`${yn.join("|")}|[\\p{White_Space}]`,"gu"),bn=[...new Intl.NumberFormat(gr.locale,{useGrouping:!1}).format(9876543210)].reverse(),xn=new Map(bn.map((Cn,Rn)=>[Cn,Rn])),$n=new RegExp(`[${bn.join("")}]`,"g");return{minusSign:Gr,plusSign:qr,decimal:Qr,group:sn,literals:gn,numeral:$n,index:Cn=>String(xn.get(Cn))}}function $6c7bd7858deea686$var$replaceAll(mr,hr,gr){return mr.replaceAll?mr.replaceAll(hr,gr):mr.split(hr).join(gr)}function $6c7bd7858deea686$var$escapeRegex(mr){return mr.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var effectCar=createSidecarMedium(),nothing=function(){},RemoveScroll=reactExports.forwardRef(function(mr,hr){var gr=reactExports.useRef(null),vr=reactExports.useState({onScrollCapture:nothing,onWheelCapture:nothing,onTouchMoveCapture:nothing}),xr=vr[0],Er=vr[1],Cr=mr.forwardProps,wr=mr.children,Rr=mr.className,kr=mr.removeScrollBar,Dr=mr.enabled,Br=mr.shards,Hr=mr.sideCar,Gr=mr.noIsolation,qr=mr.inert,zr=mr.allowPinchZoom,Qr=mr.as,sn=Qr===void 0?"div":Qr,hn=__rest(mr,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),vn=Hr,yn=useMergeRefs([gr,hr]),gn=__assign(__assign({},hn),xr);return reactExports.createElement(reactExports.Fragment,null,Dr&&reactExports.createElement(vn,{sideCar:effectCar,removeScrollBar:kr,shards:Br,noIsolation:Gr,inert:qr,setCallbacks:Er,allowPinchZoom:!!zr,lockRef:gr}),Cr?reactExports.cloneElement(reactExports.Children.only(wr),__assign(__assign({},gn),{ref:yn})):reactExports.createElement(sn,__assign({},gn,{className:Rr,ref:yn}),wr))});RemoveScroll.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};RemoveScroll.classNames={fullWidth:fullWidthClassName,zeroRight:zeroRightClassName};var passiveSupported=!1;if(typeof window<"u")try{var options$1=Object.defineProperty({},"passive",{get:function(){return passiveSupported=!0,!0}});window.addEventListener("test",options$1,options$1),window.removeEventListener("test",options$1,options$1)}catch{passiveSupported=!1}var nonPassive=passiveSupported?{passive:!1}:!1,alwaysContainsScroll=function(mr){return mr.tagName==="TEXTAREA"},elementCanBeScrolled=function(mr,hr){var gr=window.getComputedStyle(mr);return gr[hr]!=="hidden"&&!(gr.overflowY===gr.overflowX&&!alwaysContainsScroll(mr)&&gr[hr]==="visible")},elementCouldBeVScrolled=function(mr){return elementCanBeScrolled(mr,"overflowY")},elementCouldBeHScrolled=function(mr){return elementCanBeScrolled(mr,"overflowX")},locationCouldBeScrolled=function(mr,hr){var gr=hr;do{typeof ShadowRoot<"u"&&gr instanceof ShadowRoot&&(gr=gr.host);var vr=elementCouldBeScrolled(mr,gr);if(vr){var xr=getScrollVariables(mr,gr),Er=xr[1],Cr=xr[2];if(Er>Cr)return!0}gr=gr.parentNode}while(gr&&gr!==document.body);return!1},getVScrollVariables=function(mr){var hr=mr.scrollTop,gr=mr.scrollHeight,vr=mr.clientHeight;return[hr,gr,vr]},getHScrollVariables=function(mr){var hr=mr.scrollLeft,gr=mr.scrollWidth,vr=mr.clientWidth;return[hr,gr,vr]},elementCouldBeScrolled=function(mr,hr){return mr==="v"?elementCouldBeVScrolled(hr):elementCouldBeHScrolled(hr)},getScrollVariables=function(mr,hr){return mr==="v"?getVScrollVariables(hr):getHScrollVariables(hr)},getDirectionFactor=function(mr,hr){return mr==="h"&&hr==="rtl"?-1:1},handleScroll=function(mr,hr,gr,vr,xr){var Er=getDirectionFactor(mr,window.getComputedStyle(hr).direction),Cr=Er*vr,wr=gr.target,Rr=hr.contains(wr),kr=!1,Dr=Cr>0,Br=0,Hr=0;do{var Gr=getScrollVariables(mr,wr),qr=Gr[0],zr=Gr[1],Qr=Gr[2],sn=zr-Qr-Er*qr;(qr||sn)&&elementCouldBeScrolled(mr,wr)&&(Br+=sn,Hr+=qr),wr=wr.parentNode}while(!Rr&&wr!==document.body||Rr&&(hr.contains(wr)||hr===wr));return(Dr&&(Br===0||!xr)||!Dr&&(Hr===0||!xr))&&(kr=!0),kr},getTouchXY=function(mr){return"changedTouches"in mr?[mr.changedTouches[0].clientX,mr.changedTouches[0].clientY]:[0,0]},getDeltaXY=function(mr){return[mr.deltaX,mr.deltaY]},extractRef=function(mr){return mr&&"current"in mr?mr.current:mr},deltaCompare=function(mr,hr){return mr[0]===hr[0]&&mr[1]===hr[1]},generateStyle=function(mr){return`
  .block-interactivity-`.concat(mr,` {pointer-events: none;}
  .allow-interactivity-`).concat(mr,` {pointer-events: all;}
`)},idCounter=0,lockStack=[];function RemoveScrollSideCar(mr){var hr=reactExports.useRef([]),gr=reactExports.useRef([0,0]),vr=reactExports.useRef(),xr=reactExports.useState(idCounter++)[0],Er=reactExports.useState(function(){return styleSingleton()})[0],Cr=reactExports.useRef(mr);reactExports.useEffect(function(){Cr.current=mr},[mr]),reactExports.useEffect(function(){if(mr.inert){document.body.classList.add("block-interactivity-".concat(xr));var zr=__spreadArray$4([mr.lockRef.current],(mr.shards||[]).map(extractRef),!0).filter(Boolean);return zr.forEach(function(Qr){return Qr.classList.add("allow-interactivity-".concat(xr))}),function(){document.body.classList.remove("block-interactivity-".concat(xr)),zr.forEach(function(Qr){return Qr.classList.remove("allow-interactivity-".concat(xr))})}}},[mr.inert,mr.lockRef.current,mr.shards]);var wr=reactExports.useCallback(function(zr,Qr){if("touches"in zr&&zr.touches.length===2)return!Cr.current.allowPinchZoom;var sn=getTouchXY(zr),hn=gr.current,vn="deltaX"in zr?zr.deltaX:hn[0]-sn[0],yn="deltaY"in zr?zr.deltaY:hn[1]-sn[1],gn,bn=zr.target,xn=Math.abs(vn)>Math.abs(yn)?"h":"v";if("touches"in zr&&xn==="h"&&bn.type==="range")return!1;var $n=locationCouldBeScrolled(xn,bn);if(!$n)return!0;if($n?gn=xn:(gn=xn==="v"?"h":"v",$n=locationCouldBeScrolled(xn,bn)),!$n)return!1;if(!vr.current&&"changedTouches"in zr&&(vn||yn)&&(vr.current=gn),!gn)return!0;var Sn=vr.current||gn;return handleScroll(Sn,Qr,zr,Sn==="h"?vn:yn,!0)},[]),Rr=reactExports.useCallback(function(zr){var Qr=zr;if(!(!lockStack.length||lockStack[lockStack.length-1]!==Er)){var sn="deltaY"in Qr?getDeltaXY(Qr):getTouchXY(Qr),hn=hr.current.filter(function(gn){return gn.name===Qr.type&&gn.target===Qr.target&&deltaCompare(gn.delta,sn)})[0];if(hn&&hn.should){Qr.cancelable&&Qr.preventDefault();return}if(!hn){var vn=(Cr.current.shards||[]).map(extractRef).filter(Boolean).filter(function(gn){return gn.contains(Qr.target)}),yn=vn.length>0?wr(Qr,vn[0]):!Cr.current.noIsolation;yn&&Qr.cancelable&&Qr.preventDefault()}}},[]),kr=reactExports.useCallback(function(zr,Qr,sn,hn){var vn={name:zr,delta:Qr,target:sn,should:hn};hr.current.push(vn),setTimeout(function(){hr.current=hr.current.filter(function(yn){return yn!==vn})},1)},[]),Dr=reactExports.useCallback(function(zr){gr.current=getTouchXY(zr),vr.current=void 0},[]),Br=reactExports.useCallback(function(zr){kr(zr.type,getDeltaXY(zr),zr.target,wr(zr,mr.lockRef.current))},[]),Hr=reactExports.useCallback(function(zr){kr(zr.type,getTouchXY(zr),zr.target,wr(zr,mr.lockRef.current))},[]);reactExports.useEffect(function(){return lockStack.push(Er),mr.setCallbacks({onScrollCapture:Br,onWheelCapture:Br,onTouchMoveCapture:Hr}),document.addEventListener("wheel",Rr,nonPassive),document.addEventListener("touchmove",Rr,nonPassive),document.addEventListener("touchstart",Dr,nonPassive),function(){lockStack=lockStack.filter(function(zr){return zr!==Er}),document.removeEventListener("wheel",Rr,nonPassive),document.removeEventListener("touchmove",Rr,nonPassive),document.removeEventListener("touchstart",Dr,nonPassive)}},[]);var Gr=mr.removeScrollBar,qr=mr.inert;return reactExports.createElement(reactExports.Fragment,null,qr?reactExports.createElement(Er,{styles:generateStyle(xr)}):null,Gr?reactExports.createElement(RemoveScrollBar,{gapMode:"margin"}):null)}const SideCar=exportSidecar(effectCar,RemoveScrollSideCar);var ReactRemoveScroll=reactExports.forwardRef(function(mr,hr){return reactExports.createElement(RemoveScroll,__assign({},mr,{ref:hr,sideCar:SideCar}))});ReactRemoveScroll.classNames=RemoveScroll.classNames;const $cb5cc270b50c6fcd$var$POPOVER_NAME="Popover",[$cb5cc270b50c6fcd$var$createPopoverContext,$cb5cc270b50c6fcd$export$c8393c9e73286932]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($cb5cc270b50c6fcd$var$POPOVER_NAME,[$cf1ac5d9fe0e8206$export$722aac194ae923]),$cb5cc270b50c6fcd$var$usePopperScope=$cf1ac5d9fe0e8206$export$722aac194ae923(),[$cb5cc270b50c6fcd$var$PopoverProvider,$cb5cc270b50c6fcd$var$usePopoverContext]=$cb5cc270b50c6fcd$var$createPopoverContext($cb5cc270b50c6fcd$var$POPOVER_NAME),$cb5cc270b50c6fcd$export$5b6b19405a83ff9d=mr=>{const{__scopePopover:hr,children:gr,open:vr,defaultOpen:xr,onOpenChange:Er,modal:Cr=!1}=mr,wr=$cb5cc270b50c6fcd$var$usePopperScope(hr),Rr=reactExports.useRef(null),[kr,Dr]=reactExports.useState(!1),[Br=!1,Hr]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:vr,defaultProp:xr,onChange:Er});return reactExports.createElement($cf1ac5d9fe0e8206$export$be92b6f5f03c0fe9,wr,reactExports.createElement($cb5cc270b50c6fcd$var$PopoverProvider,{scope:hr,contentId:$1746a345f3d73bb7$export$f680877a34711e37(),triggerRef:Rr,open:Br,onOpenChange:Hr,onOpenToggle:reactExports.useCallback(()=>Hr(Gr=>!Gr),[Hr]),hasCustomAnchor:kr,onCustomAnchorAdd:reactExports.useCallback(()=>Dr(!0),[]),onCustomAnchorRemove:reactExports.useCallback(()=>Dr(!1),[]),modal:Cr},gr))},$cb5cc270b50c6fcd$var$TRIGGER_NAME="PopoverTrigger",$cb5cc270b50c6fcd$export$7dacb05d26466c3=reactExports.forwardRef((mr,hr)=>{const{__scopePopover:gr,...vr}=mr,xr=$cb5cc270b50c6fcd$var$usePopoverContext($cb5cc270b50c6fcd$var$TRIGGER_NAME,gr),Er=$cb5cc270b50c6fcd$var$usePopperScope(gr),Cr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(hr,xr.triggerRef),wr=reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.button,_extends$7({type:"button","aria-haspopup":"dialog","aria-expanded":xr.open,"aria-controls":xr.contentId,"data-state":$cb5cc270b50c6fcd$var$getState(xr.open)},vr,{ref:Cr,onClick:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onClick,xr.onOpenToggle)}));return xr.hasCustomAnchor?wr:reactExports.createElement($cf1ac5d9fe0e8206$export$b688253958b8dfe7,_extends$7({asChild:!0},Er),wr)}),$cb5cc270b50c6fcd$var$PORTAL_NAME="PopoverPortal",[$cb5cc270b50c6fcd$var$PortalProvider,$cb5cc270b50c6fcd$var$usePortalContext]=$cb5cc270b50c6fcd$var$createPopoverContext($cb5cc270b50c6fcd$var$PORTAL_NAME,{forceMount:void 0}),$cb5cc270b50c6fcd$export$dd679ffb4362d2d4=mr=>{const{__scopePopover:hr,forceMount:gr,children:vr,container:xr}=mr,Er=$cb5cc270b50c6fcd$var$usePopoverContext($cb5cc270b50c6fcd$var$PORTAL_NAME,hr);return reactExports.createElement($cb5cc270b50c6fcd$var$PortalProvider,{scope:hr,forceMount:gr},reactExports.createElement($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:gr||Er.open},reactExports.createElement($f1701beae083dbae$export$602eac185826482c,{asChild:!0,container:xr},vr)))},$cb5cc270b50c6fcd$var$CONTENT_NAME="PopoverContent",$cb5cc270b50c6fcd$export$d7e1f420b25549ff=reactExports.forwardRef((mr,hr)=>{const gr=$cb5cc270b50c6fcd$var$usePortalContext($cb5cc270b50c6fcd$var$CONTENT_NAME,mr.__scopePopover),{forceMount:vr=gr.forceMount,...xr}=mr,Er=$cb5cc270b50c6fcd$var$usePopoverContext($cb5cc270b50c6fcd$var$CONTENT_NAME,mr.__scopePopover);return reactExports.createElement($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:vr||Er.open},Er.modal?reactExports.createElement($cb5cc270b50c6fcd$var$PopoverContentModal,_extends$7({},xr,{ref:hr})):reactExports.createElement($cb5cc270b50c6fcd$var$PopoverContentNonModal,_extends$7({},xr,{ref:hr})))}),$cb5cc270b50c6fcd$var$PopoverContentModal=reactExports.forwardRef((mr,hr)=>{const gr=$cb5cc270b50c6fcd$var$usePopoverContext($cb5cc270b50c6fcd$var$CONTENT_NAME,mr.__scopePopover),vr=reactExports.useRef(null),xr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(hr,vr),Er=reactExports.useRef(!1);return reactExports.useEffect(()=>{const Cr=vr.current;if(Cr)return hideOthers(Cr)},[]),reactExports.createElement(ReactRemoveScroll,{as:$5e63c961fc1ce211$export$8c6ed5c666ac1360,allowPinchZoom:!0},reactExports.createElement($cb5cc270b50c6fcd$var$PopoverContentImpl,_extends$7({},mr,{ref:xr,trapFocus:gr.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onCloseAutoFocus,Cr=>{var wr;Cr.preventDefault(),Er.current||(wr=gr.triggerRef.current)===null||wr===void 0||wr.focus()}),onPointerDownOutside:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onPointerDownOutside,Cr=>{const wr=Cr.detail.originalEvent,Rr=wr.button===0&&wr.ctrlKey===!0,kr=wr.button===2||Rr;Er.current=kr},{checkForDefaultPrevented:!1}),onFocusOutside:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onFocusOutside,Cr=>Cr.preventDefault(),{checkForDefaultPrevented:!1})})))}),$cb5cc270b50c6fcd$var$PopoverContentNonModal=reactExports.forwardRef((mr,hr)=>{const gr=$cb5cc270b50c6fcd$var$usePopoverContext($cb5cc270b50c6fcd$var$CONTENT_NAME,mr.__scopePopover),vr=reactExports.useRef(!1),xr=reactExports.useRef(!1);return reactExports.createElement($cb5cc270b50c6fcd$var$PopoverContentImpl,_extends$7({},mr,{ref:hr,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:Er=>{var Cr;if((Cr=mr.onCloseAutoFocus)===null||Cr===void 0||Cr.call(mr,Er),!Er.defaultPrevented){var wr;vr.current||(wr=gr.triggerRef.current)===null||wr===void 0||wr.focus(),Er.preventDefault()}vr.current=!1,xr.current=!1},onInteractOutside:Er=>{var Cr,wr;(Cr=mr.onInteractOutside)===null||Cr===void 0||Cr.call(mr,Er),Er.defaultPrevented||(vr.current=!0,Er.detail.originalEvent.type==="pointerdown"&&(xr.current=!0));const Rr=Er.target;((wr=gr.triggerRef.current)===null||wr===void 0?void 0:wr.contains(Rr))&&Er.preventDefault(),Er.detail.originalEvent.type==="focusin"&&xr.current&&Er.preventDefault()}}))}),$cb5cc270b50c6fcd$var$PopoverContentImpl=reactExports.forwardRef((mr,hr)=>{const{__scopePopover:gr,trapFocus:vr,onOpenAutoFocus:xr,onCloseAutoFocus:Er,disableOutsidePointerEvents:Cr,onEscapeKeyDown:wr,onPointerDownOutside:Rr,onFocusOutside:kr,onInteractOutside:Dr,...Br}=mr,Hr=$cb5cc270b50c6fcd$var$usePopoverContext($cb5cc270b50c6fcd$var$CONTENT_NAME,gr),Gr=$cb5cc270b50c6fcd$var$usePopperScope(gr);return $3db38b7d1fb3fe6a$export$b7ece24a22aeda8c$1(),reactExports.createElement($d3863c46a17e8a28$export$20e40289641fbbb6,{asChild:!0,loop:!0,trapped:vr,onMountAutoFocus:xr,onUnmountAutoFocus:Er},reactExports.createElement($5cb92bef7577960e$export$177fb62ff3ec1f22,{asChild:!0,disableOutsidePointerEvents:Cr,onInteractOutside:Dr,onEscapeKeyDown:wr,onPointerDownOutside:Rr,onFocusOutside:kr,onDismiss:()=>Hr.onOpenChange(!1)},reactExports.createElement($cf1ac5d9fe0e8206$export$7c6e2c02157bb7d2,_extends$7({"data-state":$cb5cc270b50c6fcd$var$getState(Hr.open),role:"dialog",id:Hr.contentId},Gr,Br,{ref:hr,style:{...Br.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}}))))});function $cb5cc270b50c6fcd$var$getState(mr){return mr?"open":"closed"}const $cb5cc270b50c6fcd$export$be92b6f5f03c0fe9=$cb5cc270b50c6fcd$export$5b6b19405a83ff9d,$cb5cc270b50c6fcd$export$41fb9f06171c75f4=$cb5cc270b50c6fcd$export$7dacb05d26466c3,$cb5cc270b50c6fcd$export$602eac185826482c=$cb5cc270b50c6fcd$export$dd679ffb4362d2d4,$cb5cc270b50c6fcd$export$7c6e2c02157bb7d2=$cb5cc270b50c6fcd$export$d7e1f420b25549ff,$67824d98245208a0$var$PROGRESS_NAME="Progress",$67824d98245208a0$var$DEFAULT_MAX=100,[$67824d98245208a0$var$createProgressContext,$67824d98245208a0$export$388eb2d8f6d3261f]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($67824d98245208a0$var$PROGRESS_NAME),[$67824d98245208a0$var$ProgressProvider,$67824d98245208a0$var$useProgressContext]=$67824d98245208a0$var$createProgressContext($67824d98245208a0$var$PROGRESS_NAME),$67824d98245208a0$export$b25a304ec7d746bb=reactExports.forwardRef((mr,hr)=>{const{__scopeProgress:gr,value:vr,max:xr,getValueLabel:Er=$67824d98245208a0$var$defaultGetValueLabel,...Cr}=mr,wr=$67824d98245208a0$var$isValidMaxNumber(xr)?xr:$67824d98245208a0$var$DEFAULT_MAX,Rr=$67824d98245208a0$var$isValidValueNumber(vr,wr)?vr:null,kr=$67824d98245208a0$var$isNumber(Rr)?Er(Rr,wr):void 0;return reactExports.createElement($67824d98245208a0$var$ProgressProvider,{scope:gr,value:Rr,max:wr},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$7({"aria-valuemax":wr,"aria-valuemin":0,"aria-valuenow":$67824d98245208a0$var$isNumber(Rr)?Rr:void 0,"aria-valuetext":kr,role:"progressbar","data-state":$67824d98245208a0$var$getProgressState(Rr,wr),"data-value":Rr??void 0,"data-max":wr},Cr,{ref:hr})))});$67824d98245208a0$export$b25a304ec7d746bb.propTypes={max(mr,hr,gr){const vr=mr[hr],xr=String(vr);return vr&&!$67824d98245208a0$var$isValidMaxNumber(vr)?new Error($67824d98245208a0$var$getInvalidMaxError(xr,gr)):null},value(mr,hr,gr){const vr=mr[hr],xr=String(vr),Er=$67824d98245208a0$var$isValidMaxNumber(mr.max)?mr.max:$67824d98245208a0$var$DEFAULT_MAX;return vr!=null&&!$67824d98245208a0$var$isValidValueNumber(vr,Er)?new Error($67824d98245208a0$var$getInvalidValueError(xr,gr)):null}};const $67824d98245208a0$var$INDICATOR_NAME="ProgressIndicator",$67824d98245208a0$export$2b776f7e7ee60dbd=reactExports.forwardRef((mr,hr)=>{var gr;const{__scopeProgress:vr,...xr}=mr,Er=$67824d98245208a0$var$useProgressContext($67824d98245208a0$var$INDICATOR_NAME,vr);return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$7({"data-state":$67824d98245208a0$var$getProgressState(Er.value,Er.max),"data-value":(gr=Er.value)!==null&&gr!==void 0?gr:void 0,"data-max":Er.max},xr,{ref:hr}))});function $67824d98245208a0$var$defaultGetValueLabel(mr,hr){return`${Math.round(mr/hr*100)}%`}function $67824d98245208a0$var$getProgressState(mr,hr){return mr==null?"indeterminate":mr===hr?"complete":"loading"}function $67824d98245208a0$var$isNumber(mr){return typeof mr=="number"}function $67824d98245208a0$var$isValidMaxNumber(mr){return $67824d98245208a0$var$isNumber(mr)&&!isNaN(mr)&&mr>0}function $67824d98245208a0$var$isValidValueNumber(mr,hr){return $67824d98245208a0$var$isNumber(mr)&&!isNaN(mr)&&mr<=hr&&mr>=0}function $67824d98245208a0$var$getInvalidMaxError(mr,hr){return`Invalid prop \`max\` of value \`${mr}\` supplied to \`${hr}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${$67824d98245208a0$var$DEFAULT_MAX}\`.`}function $67824d98245208a0$var$getInvalidValueError(mr,hr){return`Invalid prop \`value\` of value \`${mr}\` supplied to \`${hr}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${$67824d98245208a0$var$DEFAULT_MAX} if no \`max\` prop is set)
  - \`null\` if the progress is indeterminate.

Defaulting to \`null\`.`}const $67824d98245208a0$export$be92b6f5f03c0fe9=$67824d98245208a0$export$b25a304ec7d746bb,$67824d98245208a0$export$adb584737d712b70=$67824d98245208a0$export$2b776f7e7ee60dbd,$ce77a8961b41be9e$var$RADIO_NAME="Radio",[$ce77a8961b41be9e$var$createRadioContext,$ce77a8961b41be9e$export$67d2296460f1b002]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($ce77a8961b41be9e$var$RADIO_NAME),[$ce77a8961b41be9e$var$RadioProvider,$ce77a8961b41be9e$var$useRadioContext]=$ce77a8961b41be9e$var$createRadioContext($ce77a8961b41be9e$var$RADIO_NAME),$ce77a8961b41be9e$export$d7b12c4107be0d61=reactExports.forwardRef((mr,hr)=>{const{__scopeRadio:gr,name:vr,checked:xr=!1,required:Er,disabled:Cr,value:wr="on",onCheck:Rr,...kr}=mr,[Dr,Br]=reactExports.useState(null),Hr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(hr,zr=>Br(zr)),Gr=reactExports.useRef(!1),qr=Dr?!!Dr.closest("form"):!0;return reactExports.createElement($ce77a8961b41be9e$var$RadioProvider,{scope:gr,checked:xr,disabled:Cr},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.button,_extends$7({type:"button",role:"radio","aria-checked":xr,"data-state":$ce77a8961b41be9e$var$getState(xr),"data-disabled":Cr?"":void 0,disabled:Cr,value:wr},kr,{ref:Hr,onClick:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onClick,zr=>{xr||Rr?.(),qr&&(Gr.current=zr.isPropagationStopped(),Gr.current||zr.stopPropagation())})})),qr&&reactExports.createElement($ce77a8961b41be9e$var$BubbleInput,{control:Dr,bubbles:!Gr.current,name:vr,value:wr,checked:xr,required:Er,disabled:Cr,style:{transform:"translateX(-100%)"}}))}),$ce77a8961b41be9e$var$INDICATOR_NAME="RadioIndicator",$ce77a8961b41be9e$export$d35a9ffa9a04f9e7=reactExports.forwardRef((mr,hr)=>{const{__scopeRadio:gr,forceMount:vr,...xr}=mr,Er=$ce77a8961b41be9e$var$useRadioContext($ce77a8961b41be9e$var$INDICATOR_NAME,gr);return reactExports.createElement($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:vr||Er.checked},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.span,_extends$7({"data-state":$ce77a8961b41be9e$var$getState(Er.checked),"data-disabled":Er.disabled?"":void 0},xr,{ref:hr})))}),$ce77a8961b41be9e$var$BubbleInput=mr=>{const{control:hr,checked:gr,bubbles:vr=!0,...xr}=mr,Er=reactExports.useRef(null),Cr=$010c2913dbd2fe3d$export$5cae361ad82dce8b(gr),wr=$db6c3485150b8e66$export$1ab7ae714698c4b8(hr);return reactExports.useEffect(()=>{const Rr=Er.current,kr=window.HTMLInputElement.prototype,Br=Object.getOwnPropertyDescriptor(kr,"checked").set;if(Cr!==gr&&Br){const Hr=new Event("click",{bubbles:vr});Br.call(Rr,gr),Rr.dispatchEvent(Hr)}},[Cr,gr,vr]),reactExports.createElement("input",_extends$7({type:"radio","aria-hidden":!0,defaultChecked:gr},xr,{tabIndex:-1,ref:Er,style:{...mr.style,...wr,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function $ce77a8961b41be9e$var$getState(mr){return mr?"checked":"unchecked"}const $f99a8c78507165f7$var$ARROW_KEYS=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],$f99a8c78507165f7$var$RADIO_GROUP_NAME="RadioGroup",[$f99a8c78507165f7$var$createRadioGroupContext,$f99a8c78507165f7$export$c547093f11b76da2]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($f99a8c78507165f7$var$RADIO_GROUP_NAME,[$d7bdfb9eb0fdf311$export$c7109489551a4f4,$ce77a8961b41be9e$export$67d2296460f1b002]),$f99a8c78507165f7$var$useRovingFocusGroupScope=$d7bdfb9eb0fdf311$export$c7109489551a4f4(),$f99a8c78507165f7$var$useRadioScope=$ce77a8961b41be9e$export$67d2296460f1b002(),[$f99a8c78507165f7$var$RadioGroupProvider,$f99a8c78507165f7$var$useRadioGroupContext]=$f99a8c78507165f7$var$createRadioGroupContext($f99a8c78507165f7$var$RADIO_GROUP_NAME),$f99a8c78507165f7$export$a98f0dcb43a68a25=reactExports.forwardRef((mr,hr)=>{const{__scopeRadioGroup:gr,name:vr,defaultValue:xr,value:Er,required:Cr=!1,disabled:wr=!1,orientation:Rr,dir:kr,loop:Dr=!0,onValueChange:Br,...Hr}=mr,Gr=$f99a8c78507165f7$var$useRovingFocusGroupScope(gr),qr=$f631663db3294ace$export$b39126d51d94e6f3(kr),[zr,Qr]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:Er,defaultProp:xr,onChange:Br});return reactExports.createElement($f99a8c78507165f7$var$RadioGroupProvider,{scope:gr,name:vr,required:Cr,disabled:wr,value:zr,onValueChange:Qr},reactExports.createElement($d7bdfb9eb0fdf311$export$be92b6f5f03c0fe9,_extends$7({asChild:!0},Gr,{orientation:Rr,dir:qr,loop:Dr}),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$7({role:"radiogroup","aria-required":Cr,"aria-orientation":Rr,"data-disabled":wr?"":void 0,dir:qr},Hr,{ref:hr}))))}),$f99a8c78507165f7$var$ITEM_NAME="RadioGroupItem",$f99a8c78507165f7$export$9f866c100ef519e4=reactExports.forwardRef((mr,hr)=>{const{__scopeRadioGroup:gr,disabled:vr,...xr}=mr,Er=$f99a8c78507165f7$var$useRadioGroupContext($f99a8c78507165f7$var$ITEM_NAME,gr),Cr=Er.disabled||vr,wr=$f99a8c78507165f7$var$useRovingFocusGroupScope(gr),Rr=$f99a8c78507165f7$var$useRadioScope(gr),kr=reactExports.useRef(null),Dr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(hr,kr),Br=Er.value===xr.value,Hr=reactExports.useRef(!1);return reactExports.useEffect(()=>{const Gr=zr=>{$f99a8c78507165f7$var$ARROW_KEYS.includes(zr.key)&&(Hr.current=!0)},qr=()=>Hr.current=!1;return document.addEventListener("keydown",Gr),document.addEventListener("keyup",qr),()=>{document.removeEventListener("keydown",Gr),document.removeEventListener("keyup",qr)}},[]),reactExports.createElement($d7bdfb9eb0fdf311$export$6d08773d2e66f8f2,_extends$7({asChild:!0},wr,{focusable:!Cr,active:Br}),reactExports.createElement($ce77a8961b41be9e$export$d7b12c4107be0d61,_extends$7({disabled:Cr,required:Er.required,checked:Br},Rr,xr,{name:Er.name,ref:Dr,onCheck:()=>Er.onValueChange(xr.value),onKeyDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Gr=>{Gr.key==="Enter"&&Gr.preventDefault()}),onFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(xr.onFocus,()=>{var Gr;Hr.current&&((Gr=kr.current)===null||Gr===void 0||Gr.click())})})))}),$f99a8c78507165f7$export$5fb54c671a65c88=reactExports.forwardRef((mr,hr)=>{const{__scopeRadioGroup:gr,...vr}=mr,xr=$f99a8c78507165f7$var$useRadioScope(gr);return reactExports.createElement($ce77a8961b41be9e$export$d35a9ffa9a04f9e7,_extends$7({},xr,vr,{ref:hr}))}),$f99a8c78507165f7$export$be92b6f5f03c0fe9=$f99a8c78507165f7$export$a98f0dcb43a68a25,$f99a8c78507165f7$export$6d08773d2e66f8f2=$f99a8c78507165f7$export$9f866c100ef519e4,$f99a8c78507165f7$export$adb584737d712b70=$f99a8c78507165f7$export$5fb54c671a65c88,$6be4966fd9bbc698$var$SWITCH_NAME="Switch",[$6be4966fd9bbc698$var$createSwitchContext,$6be4966fd9bbc698$export$cf7f5f17f69cbd43]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($6be4966fd9bbc698$var$SWITCH_NAME),[$6be4966fd9bbc698$var$SwitchProvider,$6be4966fd9bbc698$var$useSwitchContext]=$6be4966fd9bbc698$var$createSwitchContext($6be4966fd9bbc698$var$SWITCH_NAME),$6be4966fd9bbc698$export$b5d5cf8927ab7262=reactExports.forwardRef((mr,hr)=>{const{__scopeSwitch:gr,name:vr,checked:xr,defaultChecked:Er,required:Cr,disabled:wr,value:Rr="on",onCheckedChange:kr,...Dr}=mr,[Br,Hr]=reactExports.useState(null),Gr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(hr,hn=>Hr(hn)),qr=reactExports.useRef(!1),zr=Br?!!Br.closest("form"):!0,[Qr=!1,sn]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:xr,defaultProp:Er,onChange:kr});return reactExports.createElement($6be4966fd9bbc698$var$SwitchProvider,{scope:gr,checked:Qr,disabled:wr},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.button,_extends$7({type:"button",role:"switch","aria-checked":Qr,"aria-required":Cr,"data-state":$6be4966fd9bbc698$var$getState(Qr),"data-disabled":wr?"":void 0,disabled:wr,value:Rr},Dr,{ref:Gr,onClick:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onClick,hn=>{sn(vn=>!vn),zr&&(qr.current=hn.isPropagationStopped(),qr.current||hn.stopPropagation())})})),zr&&reactExports.createElement($6be4966fd9bbc698$var$BubbleInput,{control:Br,bubbles:!qr.current,name:vr,value:Rr,checked:Qr,required:Cr,disabled:wr,style:{transform:"translateX(-100%)"}}))}),$6be4966fd9bbc698$var$THUMB_NAME="SwitchThumb",$6be4966fd9bbc698$export$4d07bf653ea69106=reactExports.forwardRef((mr,hr)=>{const{__scopeSwitch:gr,...vr}=mr,xr=$6be4966fd9bbc698$var$useSwitchContext($6be4966fd9bbc698$var$THUMB_NAME,gr);return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.span,_extends$7({"data-state":$6be4966fd9bbc698$var$getState(xr.checked),"data-disabled":xr.disabled?"":void 0},vr,{ref:hr}))}),$6be4966fd9bbc698$var$BubbleInput=mr=>{const{control:hr,checked:gr,bubbles:vr=!0,...xr}=mr,Er=reactExports.useRef(null),Cr=$010c2913dbd2fe3d$export$5cae361ad82dce8b(gr),wr=$db6c3485150b8e66$export$1ab7ae714698c4b8(hr);return reactExports.useEffect(()=>{const Rr=Er.current,kr=window.HTMLInputElement.prototype,Br=Object.getOwnPropertyDescriptor(kr,"checked").set;if(Cr!==gr&&Br){const Hr=new Event("click",{bubbles:vr});Br.call(Rr,gr),Rr.dispatchEvent(Hr)}},[Cr,gr,vr]),reactExports.createElement("input",_extends$7({type:"checkbox","aria-hidden":!0,defaultChecked:gr},xr,{tabIndex:-1,ref:Er,style:{...mr.style,...wr,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function $6be4966fd9bbc698$var$getState(mr){return mr?"checked":"unchecked"}const $6be4966fd9bbc698$export$be92b6f5f03c0fe9=$6be4966fd9bbc698$export$b5d5cf8927ab7262,$6be4966fd9bbc698$export$6521433ed15a34db=$6be4966fd9bbc698$export$4d07bf653ea69106,$69cb30bb0017df05$var$TABS_NAME="Tabs",[$69cb30bb0017df05$var$createTabsContext,$69cb30bb0017df05$export$355f5bd209d7b13a]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($69cb30bb0017df05$var$TABS_NAME,[$d7bdfb9eb0fdf311$export$c7109489551a4f4]),$69cb30bb0017df05$var$useRovingFocusGroupScope=$d7bdfb9eb0fdf311$export$c7109489551a4f4(),[$69cb30bb0017df05$var$TabsProvider,$69cb30bb0017df05$var$useTabsContext]=$69cb30bb0017df05$var$createTabsContext($69cb30bb0017df05$var$TABS_NAME),$69cb30bb0017df05$export$b2539bed5023c21c=reactExports.forwardRef((mr,hr)=>{const{__scopeTabs:gr,value:vr,onValueChange:xr,defaultValue:Er,orientation:Cr="horizontal",dir:wr,activationMode:Rr="automatic",...kr}=mr,Dr=$f631663db3294ace$export$b39126d51d94e6f3(wr),[Br,Hr]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:vr,onChange:xr,defaultProp:Er});return reactExports.createElement($69cb30bb0017df05$var$TabsProvider,{scope:gr,baseId:$1746a345f3d73bb7$export$f680877a34711e37(),value:Br,onValueChange:Hr,orientation:Cr,dir:Dr,activationMode:Rr},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$7({dir:Dr,"data-orientation":Cr},kr,{ref:hr})))}),$69cb30bb0017df05$var$TAB_LIST_NAME="TabsList",$69cb30bb0017df05$export$9712d22edc0d78c1=reactExports.forwardRef((mr,hr)=>{const{__scopeTabs:gr,loop:vr=!0,...xr}=mr,Er=$69cb30bb0017df05$var$useTabsContext($69cb30bb0017df05$var$TAB_LIST_NAME,gr),Cr=$69cb30bb0017df05$var$useRovingFocusGroupScope(gr);return reactExports.createElement($d7bdfb9eb0fdf311$export$be92b6f5f03c0fe9,_extends$7({asChild:!0},Cr,{orientation:Er.orientation,dir:Er.dir,loop:vr}),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$7({role:"tablist","aria-orientation":Er.orientation},xr,{ref:hr})))}),$69cb30bb0017df05$var$TRIGGER_NAME="TabsTrigger",$69cb30bb0017df05$export$8114b9fdfdf9f3ba=reactExports.forwardRef((mr,hr)=>{const{__scopeTabs:gr,value:vr,disabled:xr=!1,...Er}=mr,Cr=$69cb30bb0017df05$var$useTabsContext($69cb30bb0017df05$var$TRIGGER_NAME,gr),wr=$69cb30bb0017df05$var$useRovingFocusGroupScope(gr),Rr=$69cb30bb0017df05$var$makeTriggerId(Cr.baseId,vr),kr=$69cb30bb0017df05$var$makeContentId(Cr.baseId,vr),Dr=vr===Cr.value;return reactExports.createElement($d7bdfb9eb0fdf311$export$6d08773d2e66f8f2,_extends$7({asChild:!0},wr,{focusable:!xr,active:Dr}),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.button,_extends$7({type:"button",role:"tab","aria-selected":Dr,"aria-controls":kr,"data-state":Dr?"active":"inactive","data-disabled":xr?"":void 0,disabled:xr,id:Rr},Er,{ref:hr,onMouseDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onMouseDown,Br=>{!xr&&Br.button===0&&Br.ctrlKey===!1?Cr.onValueChange(vr):Br.preventDefault()}),onKeyDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onKeyDown,Br=>{[" ","Enter"].includes(Br.key)&&Cr.onValueChange(vr)}),onFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(mr.onFocus,()=>{const Br=Cr.activationMode!=="manual";!Dr&&!xr&&Br&&Cr.onValueChange(vr)})})))}),$69cb30bb0017df05$var$CONTENT_NAME="TabsContent",$69cb30bb0017df05$export$bd905d70e8fd2ebb=reactExports.forwardRef((mr,hr)=>{const{__scopeTabs:gr,value:vr,forceMount:xr,children:Er,...Cr}=mr,wr=$69cb30bb0017df05$var$useTabsContext($69cb30bb0017df05$var$CONTENT_NAME,gr),Rr=$69cb30bb0017df05$var$makeTriggerId(wr.baseId,vr),kr=$69cb30bb0017df05$var$makeContentId(wr.baseId,vr),Dr=vr===wr.value,Br=reactExports.useRef(Dr);return reactExports.useEffect(()=>{const Hr=requestAnimationFrame(()=>Br.current=!1);return()=>cancelAnimationFrame(Hr)},[]),reactExports.createElement($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:xr||Dr},({present:Hr})=>reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$7({"data-state":Dr?"active":"inactive","data-orientation":wr.orientation,role:"tabpanel","aria-labelledby":Rr,hidden:!Hr,id:kr,tabIndex:0},Cr,{ref:hr,style:{...mr.style,animationDuration:Br.current?"0s":void 0}}),Hr&&Er))});function $69cb30bb0017df05$var$makeTriggerId(mr,hr){return`${mr}-trigger-${hr}`}function $69cb30bb0017df05$var$makeContentId(mr,hr){return`${mr}-content-${hr}`}const $69cb30bb0017df05$export$be92b6f5f03c0fe9=$69cb30bb0017df05$export$b2539bed5023c21c,$69cb30bb0017df05$export$54c2e3dc7acea9f5=$69cb30bb0017df05$export$9712d22edc0d78c1,$69cb30bb0017df05$export$41fb9f06171c75f4=$69cb30bb0017df05$export$8114b9fdfdf9f3ba,$69cb30bb0017df05$export$7c6e2c02157bb7d2=$69cb30bb0017df05$export$bd905d70e8fd2ebb,createContext$1=(mr,hr)=>{const gr=reactExports.createContext(hr),vr=Er=>{const{children:Cr,...wr}=Er,Rr=reactExports.useMemo(()=>wr,Object.values(wr));return jsxRuntimeExports.jsx(gr.Provider,{value:Rr,children:Cr})};function xr(Er){const Cr=reactExports.useContext(gr);if(Cr)return Cr;if(hr!==void 0)return hr;throw new Error(`\`${Er}\` must be used within \`${mr}\``)}return vr.displayName=`${mr}Provider`,[vr,xr]};function isKeyOf(mr,hr){return typeof mr=="string"?!1:hr in mr}function extractStyleFromTheme(mr,hr,gr){return mr&&hr&&isKeyOf(mr,hr)?mr[hr]:gr}const mappedCSSProps={padding:["padding-block-start","padding-inline-end","padding-block-end","padding-inline-start"],paddingTop:"padding-block-start",paddingRight:"padding-inline-end",paddingBottom:"padding-block-end",paddingLeft:"padding-inline-start",margin:["margin-block-start","margin-inline-end","margin-block-end","margin-inline-start"],marginLeft:"margin-inline-start",marginRight:"margin-inline-end",marginTop:"margin-block-start",marginBottom:"margin-block-end",borderRadius:"border-radius",borderStyle:"border-style",borderWidth:"border-width",borderColor:"border-color",fontSize:"font-size",fontWeight:"font-weight",lineHeight:"line-height",zIndex:"z-index",boxShadow:"box-shadow",pointerEvents:"pointer-events",textAlign:"text-align",textTransform:"text-transform",textDecoration:"text-decoration",flexGrow:"flex-grow",flexShrink:"flex-shrink",flexBasis:"flex-basis",minWidth:"min-width",maxWidth:"max-width",minHeight:"min-height",maxHeight:"max-height",flexDirection:"flex-direction",flexWrap:"flex-wrap",justifyContent:"justify-content",alignItems:"align-items"},fillCssValues=mr=>{const[hr,gr,vr,xr]=mr,Er=gr??hr;return[hr,Er,vr??hr,xr??Er]};function getThemeSection(mr,hr){switch(mr){case"gap":case"padding":case"margin":case"paddingTop":case"paddingLeft":case"paddingRight":case"paddingBottom":case"marginTop":case"marginLeft":case"marginRight":case"marginBottom":case"left":case"right":case"top":case"bottom":case"width":case"maxWidth":case"minWidth":case"height":case"maxHeight":case"minHeight":case"borderRadius":case"borderWidth":return hr.spaces;case"color":case"background":case"borderColor":return hr.colors;case"fontSize":return hr.fontSizes;case"fontWeight":return hr.fontWeights;case"lineHeight":return hr.lineHeights;case"zIndex":return hr.zIndices;case"boxShadow":return hr.shadows;default:return null}}const handleResponsiveValues=(mr,hr)=>{const gr=Object.entries(mr).reduce((vr,xr)=>{const[Er,Cr]=xr,wr=getThemeSection(Er,hr),Rr=Object.prototype.hasOwnProperty.call(mappedCSSProps,Er)?mappedCSSProps[Er]:Er;return Rr&&(Cr||Cr===0)&&(typeof Cr=="object"&&!Array.isArray(Cr)?Object.entries(Cr).forEach(([kr,Dr])=>{vr[kr]={...vr[kr],...convertCssPropertiesToCssValues(Rr,Dr,wr)}}):vr.initial={...vr.initial,...convertCssPropertiesToCssValues(Rr,Cr,wr)}),vr},{initial:{},small:{},medium:{},large:{}});return Object.entries(gr).reduce((vr,[xr,Er])=>{if(Er&&Object.keys(Er).length>0){const Cr=Object.entries(Er).reduce((wr,[Rr,kr])=>(wr.push(`${Rr}: ${kr};`),wr),[]).join(`
`);xr==="initial"?vr.push(Cr):vr.push(`${hr.breakpoints[xr]}{ ${Cr} }`)}return vr},[]).join(`
`)},convertCssPropertiesToCssValues=(mr,hr,gr)=>{if(Array.isArray(mr)&&Array.isArray(hr)){const vr=fillCssValues(hr);return mr.reduce((xr,Er,Cr)=>(xr[Er]=extractStyleFromTheme(gr,vr[Cr],vr[Cr]),xr),{})}else return Array.isArray(mr)&&!Array.isArray(hr)?mr.reduce((vr,xr)=>(vr[xr]=extractStyleFromTheme(gr,hr,hr),vr),{}):!Array.isArray(mr)&&!Array.isArray(hr)?{[mr]:extractStyleFromTheme(gr,hr,hr)}:(console.warn("You've passed an array of values to a property that does not support it. Please check the property and value you're passing."),{})},forwardRef=reactExports.forwardRef,Box=forwardRef((mr,hr)=>{const{background:gr,basis:vr,borderColor:xr,color:Er,flex:Cr,fontSize:wr,grow:Rr,hasRadius:kr,padding:Dr,paddingBottom:Br,paddingLeft:Hr,paddingRight:Gr,paddingTop:qr,margin:zr,marginLeft:Qr,marginBottom:sn,marginRight:hn,marginTop:vn,shadow:yn,shrink:gn,lineHeight:bn,fontWeight:xn,width:$n,minWidth:Sn,maxWidth:Cn,height:Rn,minHeight:Bn,maxHeight:Fn,top:Hn,left:Gn,bottom:qn,right:On,borderRadius:wn,borderStyle:_n,borderWidth:Tn,tag:Mn,pointerEvents:Ln,display:jn,position:Kn,zIndex:Nn,overflow:An,cursor:kn,transition:Dn,transform:Vn,animation:zn,textAlign:Xn,textTransform:Zn,...Pi}=mr,Ya=Mn||"div",Bi={$background:gr,$basis:vr,$borderColor:xr,$color:Er,$flex:Cr,$fontSize:wr,$grow:Rr,$hasRadius:kr,$padding:Dr,$paddingBottom:Br,$paddingLeft:Hr,$paddingRight:Gr,$paddingTop:qr,$margin:zr,$marginLeft:Qr,$marginBottom:sn,$marginRight:hn,$marginTop:vn,$shadow:yn,$shrink:gn,$lineHeight:bn,$fontWeight:xn,$width:$n,$minWidth:Sn,$maxWidth:Cn,$height:Rn,$minHeight:Bn,$maxHeight:Fn,$top:Hn,$left:Gn,$bottom:qn,$right:On,$borderRadius:wn,$borderStyle:_n,$borderWidth:Tn,$pointerEvents:Ln,$display:jn,$position:Kn,$zIndex:Nn,$overflow:An,$cursor:kn,$transition:Dn,$transform:Vn,$animation:zn,$textAlign:Xn,$textTransform:Zn};return jsxRuntimeExports.jsx(StyledBox$1,{as:Ya,ref:hr,...Bi,...Pi})}),StyledBox$1=dt$3.div`
  ${({theme:mr,...hr})=>handleResponsiveValues({padding:hr.$padding,paddingTop:hr.$paddingTop,paddingBottom:hr.$paddingBottom,paddingLeft:hr.$paddingLeft,paddingRight:hr.$paddingRight,margin:hr.$margin,marginTop:hr.$marginTop,marginBottom:hr.$marginBottom,marginLeft:hr.$marginLeft,marginRight:hr.$marginRight,top:hr.$top,left:hr.$left,bottom:hr.$bottom,right:hr.$right,width:hr.$width,minWidth:hr.$minWidth,maxWidth:hr.$maxWidth,height:hr.$height,minHeight:hr.$minHeight,maxHeight:hr.$maxHeight,color:hr.$color,background:hr.$background,fontSize:hr.$fontSize,fontWeight:hr.$fontWeight,lineHeight:hr.$lineHeight,borderRadius:hr.$hasRadius?mr.borderRadius:hr.$borderRadius,borderStyle:hr.$borderColor&&!hr.$borderStyle?"solid":hr.$borderStyle,borderWidth:hr.$borderColor&&!hr.$borderWidth?"1px":hr.$borderWidth,borderColor:hr.$borderColor,zIndex:hr.$zIndex,boxShadow:hr.$shadow,display:hr.$display,pointerEvents:hr.$pointerEvents,cursor:hr.$cursor,textAlign:hr.$textAlign,textTransform:hr.$textTransform,transition:hr.$transition,transform:hr.$transform,animation:hr.$animation,position:hr.$position,overflow:hr.$overflow,flex:hr.$flex,flexShrink:hr.$shrink,flexGrow:hr.$grow,flexBasis:hr.$basis},mr)};
`,Flex=forwardRef((mr,hr)=>{const{className:gr,alignItems:vr,direction:xr,inline:Er,gap:Cr,justifyContent:wr,wrap:Rr,...kr}=mr,Dr={$alignItems:vr,$direction:xr,$gap:Cr,$justifyContent:wr,$wrap:Rr,$inline:Er};return jsxRuntimeExports.jsx(StyledFlex,{className:gr,ref:hr,...Dr,...kr})}),StyledFlex=dt$3(Box)`
  ${({theme:mr,$display:hr="flex",$alignItems:gr="center",$direction:vr="row",...xr})=>handleResponsiveValues({gap:xr.$gap,alignItems:gr,justifyContent:xr.$justifyContent,flexWrap:xr.$wrap,flexDirection:vr,display:xr.$inline?"inline-flex":hr},mr)};
`,ALPHA$1="alpha",BETA="beta",DELTA="delta",EPSILON="epsilon",OMEGA="omega",PI="pi",SIGMA="sigma",ellipsis=lt$4`
  display: block;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
`,variant=({$variant:mr=OMEGA,theme:hr})=>{switch(mr){case ALPHA$1:return`
        font-weight: ${hr.fontWeights.bold};
        font-size: ${hr.fontSizes[5]};
        line-height: ${hr.lineHeights[2]};
      `;case BETA:return`
        font-weight: ${hr.fontWeights.bold};
        font-size: ${hr.fontSizes[4]};
        line-height: ${hr.lineHeights[1]};
      `;case DELTA:return`
        font-weight: ${hr.fontWeights.semiBold};
        font-size: ${hr.fontSizes[3]};
        line-height: ${hr.lineHeights[2]};
      `;case EPSILON:return`
        font-size: ${hr.fontSizes[3]};
        line-height: ${hr.lineHeights[6]};
      `;case OMEGA:return`
        font-size: ${hr.fontSizes[2]};
        line-height: ${hr.lineHeights[4]};
      `;case PI:return`
        font-size: ${hr.fontSizes[1]};
        line-height: ${hr.lineHeights[3]};
      `;case SIGMA:return`
        font-weight: ${hr.fontWeights.bold};
        font-size: ${hr.fontSizes[0]};
        line-height: ${hr.lineHeights[5]};
        text-transform: uppercase;
      `;default:return`
        font-size: ${hr.fontSizes[2]};
      `}},Typography=forwardRef((mr,hr)=>{const{ellipsis:gr,textColor:vr="currentcolor",textDecoration:xr,textTransform:Er,variant:Cr,lineHeight:wr,fontWeight:Rr,fontSize:kr,...Dr}=mr,Br={$ellipsis:gr,$textColor:vr,$textDecoration:xr,$textTransform:Er,$variant:Cr,$lineHeight:wr,$fontWeight:Rr,$fontSize:kr};return jsxRuntimeExports.jsx(StyledTypography,{ref:hr,tag:"span",...Br,...Dr})}),StyledTypography=dt$3(Box)`
  ${variant}
  ${({$ellipsis:mr})=>mr?ellipsis:""}

  ${({theme:mr,...hr})=>handleResponsiveValues({color:hr.$textColor,textDecoration:hr.$textDecoration,textTransform:hr.$textTransform,lineHeight:hr.$lineHeight,fontWeight:hr.$fontWeight,fontSize:hr.$fontSize},mr)}
`,[AccordionProvider,useAccordion]=createContext$1("Accordion"),Root$8=reactExports.forwardRef(({children:mr,size:hr="S",...gr},vr)=>jsxRuntimeExports.jsx(AccordionRoot,{ref:vr,$size:hr,collapsible:!0,...gr,type:"single",children:jsxRuntimeExports.jsx(AccordionProvider,{size:hr,children:mr})})),AccordionRoot=dt$3($1bf158f521e1b1b4$export$be92b6f5f03c0fe9)`
  background-color: ${mr=>mr.theme.colors.neutral0};

  ${mr=>mr.$size==="S"?lt$4`
        border-radius: ${hr=>hr.theme.borderRadius};
        border: solid 1px ${hr=>hr.theme.colors.neutral200};
      `:lt$4``}
`,Item$5=reactExports.forwardRef((mr,hr)=>{const{size:gr}=useAccordion("Item");return jsxRuntimeExports.jsx(AccordionItem,{$size:gr,"data-size":gr,ref:hr,...mr})}),AccordionItem=dt$3($1bf158f521e1b1b4$export$6d08773d2e66f8f2)`
  overflow: hidden;
  margin: 1px 0;

  &:first-child {
    border-top-left-radius: 0.3rem;
    border-top-right-radius: 0.3rem;
    margin-top: 0;
  }

  &:last-child {
    border-bottom-left-radius: 0.3rem;
    border-bottom-right-radius: 0.3rem;
    margin-bottom: 0;
  }

  &[data-size='S'] {
    & + & {
      border-top: solid 1px ${mr=>mr.theme.colors.neutral200};
    }
  }

  &[data-state='open'] {
    box-shadow: 0 0 0 1px ${mr=>mr.theme.colors.primary600};
  }

  &:not([data-disabled]):hover {
    box-shadow: 0 0 0 1px ${mr=>mr.theme.colors.primary600};
  }

  /* This applies our desired focus effect correctly. */
  &:focus-within {
    position: relative;
    z-index: 1;
    box-shadow: 0 0 0 1px ${mr=>mr.theme.colors.primary600};
  }

  @media (prefers-reduced-motion: no-preference) {
    transition: box-shadow ${mr=>mr.theme.motion.timings[120]}
      ${mr=>mr.theme.motion.easings.easeOutQuad};
  }
`,Trigger$7=reactExports.forwardRef(({caretPosition:mr="left",description:hr,icon:gr,iconProps:vr,children:xr,...Er},Cr)=>{const{size:wr}=useAccordion("Trigger");return jsxRuntimeExports.jsxs(AccordionTrigger,{$caretPosition:mr,$size:wr,ref:Cr,...Er,children:[mr==="left"?jsxRuntimeExports.jsx(TriggerIcon,{$size:wr,children:jsxRuntimeExports.jsx(ForwardRef$4L,{width:wr==="S"?"1.2rem":"1.6rem",height:wr==="S"?"1.2rem":"1.6rem"})}):null,jsxRuntimeExports.jsxs(Flex,{tag:"span",gap:2,children:[gr&&wr==="S"?jsxRuntimeExports.jsx(IconBox$4,{children:jsxRuntimeExports.jsx(gr,{...vr})}):null,jsxRuntimeExports.jsxs(Flex,{alignItems:"flex-start",direction:"column",tag:"span",ref:Cr,children:[jsxRuntimeExports.jsx(Typography,{fontWeight:wr==="S"?"bold":void 0,ellipsis:!0,variant:wr==="M"?"delta":void 0,textAlign:"left",children:xr}),hr&&wr==="M"?jsxRuntimeExports.jsx(Typography,{textAlign:"left",children:hr}):null]})]}),mr==="right"?jsxRuntimeExports.jsx(TriggerIcon,{$size:wr,children:jsxRuntimeExports.jsx(ForwardRef$4L,{width:wr==="S"?"1.2rem":"1.6rem",height:wr==="S"?"1.2rem":"1.6rem"})}):null]})}),IconBox$4=dt$3(Box)`
  color: ${mr=>mr.theme.colors.neutral500};
  display: flex;

  @media (prefers-reduced-motion: no-preference) {
    transition: ${mr=>mr.theme.transitions.color};
  }
`,TriggerIcon=dt$3(Flex).attrs(mr=>({...mr,tag:"span"}))`
  background-color: ${mr=>mr.theme.colors.neutral200};
  width: ${mr=>mr.$size==="S"?"2.4rem":"3.2rem"};
  height: ${mr=>mr.$size==="S"?"2.4rem":"3.2rem"};
  flex: ${mr=>mr.$size==="S"?"0 0 2.4rem":"0 0 3.2rem"};
  border-radius: 50%;
  justify-content: center;

  @media (prefers-reduced-motion: no-preference) {
    transition:
      transform ${mr=>mr.theme.motion.timings[200]} ${mr=>mr.theme.motion.easings.authenticMotion},
      ${mr=>mr.theme.transitions.backgroundColor};
  }
`,AccordionTrigger=dt$3($1bf158f521e1b1b4$export$41fb9f06171c75f4)`
  display: flex;
  align-items: center;
  justify-content: ${mr=>mr.$caretPosition==="left"?"flex-start":"space-between"};
  width: 100%;
  gap: ${mr=>mr.theme.spaces[4]};
  padding-inline: ${mr=>mr.$size==="S"?mr.theme.spaces[4]:mr.theme.spaces[6]};
  padding-block: ${mr=>mr.$size==="S"?mr.theme.spaces[3]:mr.theme.spaces[6]};
  cursor: pointer;
  color: ${mr=>mr.theme.colors.neutral800};

  &[data-disabled] {
    cursor: default;
    color: ${mr=>mr.theme.colors.neutral600};
  }

  &[data-state='open'] > ${TriggerIcon} {
    transform: rotate(180deg);
  }

  /* we remove the default focus because the entire item should have the focus style and the default would be hidden. */
  &:focus-visible {
    outline: none;
  }

  @media (prefers-reduced-motion: no-preference) {
    transition: ${mr=>mr.theme.transitions.color};
  }
`,Actions=reactExports.forwardRef((mr,hr)=>{const{size:gr}=useAccordion("Trigger");return jsxRuntimeExports.jsx(ActionWrapper,{$size:gr,...mr,ref:hr})}),ActionWrapper=dt$3(Flex).attrs(mr=>({...mr,tag:"span"}))`
  padding-inline: ${mr=>mr.$size==="S"?mr.theme.spaces[2]:mr.theme.spaces[6]};
  padding-block: ${mr=>mr.$size==="S"?mr.theme.spaces[2]:mr.theme.spaces[6]};

  // Remove default IconButton styles so there are no backgrounds or borders.
  & > button {
    border: none;
    background: none;
    color: ${mr=>mr.theme.colors.neutral600};

    @media (prefers-reduced-motion: no-preference) {
      transition: ${mr=>mr.theme.transitions.color};
    }
  }
`,Header$2=reactExports.forwardRef(({variant:mr="primary",...hr},gr)=>jsxRuntimeExports.jsx(AccordionHeader,{$variant:mr,ref:gr,...hr})),AccordionHeader=dt$3($1bf158f521e1b1b4$export$8b251419efc915eb)`
  display: flex;
  align-items: center;
  background-color: ${mr=>mr.$variant==="primary"?mr.theme.colors.neutral0:mr.theme.colors.neutral100};

  &[data-disabled] {
    background-color: ${mr=>mr.theme.colors.neutral150};
  }

  &:not([data-disabled]) {
    &:hover,
    &[data-state='open'] {
      background-color: ${mr=>mr.theme.colors.primary100};

      & > ${AccordionTrigger} {
        color: ${mr=>mr.theme.colors.primary600};

        & ${IconBox$4} {
          color: ${mr=>mr.theme.colors.primary600};
        }

        & ${TriggerIcon} {
          background-color: ${mr=>mr.theme.colors.primary200};
        }
      }

      & > ${ActionWrapper} > button {
        color: ${mr=>mr.theme.colors.primary600};
      }
    }
  }

  @media (prefers-reduced-motion: no-preference) {
    transition: ${mr=>mr.theme.transitions.backgroundColor};
  }
`,Content$7=reactExports.forwardRef((mr,hr)=>jsxRuntimeExports.jsx(AccordionContent,{ref:hr,...mr})),slideDown=mt$3`
  from {
    height: 0;
  }
  to {
    height: var(--radix-accordion-content-height);
  }
`,slideUp=mt$3`
  from {
    height: var(--radix-accordion-content-height);
  }
  to {
    height: 0;
  }
`,AccordionContent=dt$3($1bf158f521e1b1b4$export$7c6e2c02157bb7d2)`
  overflow: hidden;

  @media (prefers-reduced-motion: no-preference) {
    &[data-state='open'] {
      animation: ${slideDown} ${mr=>mr.theme.motion.timings[320]}
        ${mr=>mr.theme.motion.easings.authenticMotion};
    }

    &[data-state='closed'] {
      animation: ${slideUp} ${mr=>mr.theme.motion.timings[320]}
        ${mr=>mr.theme.motion.easings.authenticMotion};
    }
  }
`,Accordion=Object.freeze(Object.defineProperty({__proto__:null,Actions,Content:Content$7,Header:Header$2,Item:Item$5,Root:Root$8,Trigger:Trigger$7},Symbol.toStringTag,{value:"Module"})),focus=lt$4`
  position: relative;
  outline: none;

  &:after {
    transition-property: all;
    transition-duration: 0.2s;
    border-radius: 8px;
    content: '';
    position: absolute;
    top: -4px;
    bottom: -4px;
    left: -4px;
    right: -4px;
    border: 2px solid transparent;
  }

  &:focus-visible {
    outline: none;

    &:after {
      border-radius: 8px;
      content: '';
      position: absolute;
      top: -5px;
      bottom: -5px;
      left: -5px;
      right: -5px;
      border: 2px solid ${mr=>mr.theme.colors.primary600};
    }
  }
`,VisuallyHidden=({tag:mr,...hr})=>{const gr=mr||"span";return jsxRuntimeExports.jsx(Span,{...hr,as:gr})},Span=dt$3.span`
  border: 0;
  clip: rect(0 0 0 0);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  width: 1px;
`,AccessibleIcon=({children:mr,label:hr})=>{const gr=reactExports.Children.only(mr);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[reactExports.cloneElement(gr,{"aria-hidden":"true",focusable:"false"}),jsxRuntimeExports.jsx(VisuallyHidden,{children:hr})]})};AccessibleIcon.displayName="AccessibleIcon";const handleBackgroundColor=mr=>{switch(mr){case"danger":return"danger100";case"success":return"success100";case"warning":return"warning100";default:return"primary100"}},handleBorderColor=mr=>handleBackgroundColor(mr).replace("100","200"),handleIconColor=({theme:mr,$variant:hr})=>hr==="danger"?mr.colors.danger700:hr==="success"?mr.colors.success700:hr==="warning"?mr.colors.warning700:mr.colors.primary700,CloseButton=dt$3(Box)`
  ${focus};
`,AlertIconWrapper=dt$3(Flex)`
  svg {
    height: 100%;
    width: 100%;

    path {
      fill: ${handleIconColor};
    }
  }
`,AlertIcon=({variant:mr,...hr})=>mr==="success"?jsxRuntimeExports.jsx(ForwardRef$4v,{...hr}):mr==="danger"||mr==="warning"?jsxRuntimeExports.jsx(ForwardRef$3$1,{...hr}):jsxRuntimeExports.jsx(ForwardRef$2x,{...hr}),ActionBox=dt$3(Box)`
  & a > span {
    color: ${handleIconColor};
  }

  svg path {
    fill: ${handleIconColor};
  }
`,Alert=({title:mr,children:hr,variant:gr="default",onClose:vr,closeLabel:xr,titleAs:Er="p",action:Cr,...wr})=>jsxRuntimeExports.jsxs(Flex,{alignItems:"flex-start",background:handleBackgroundColor(gr),borderColor:handleBorderColor(gr),shadow:"filterShadow",gap:3,hasRadius:!0,padding:5,paddingRight:6,...wr,children:[jsxRuntimeExports.jsx(AlertIconWrapper,{height:"2rem",shrink:0,$variant:gr,width:"2rem",children:jsxRuntimeExports.jsx(AlertIcon,{"aria-hidden":!0,variant:gr})}),jsxRuntimeExports.jsxs(Flex,{alignItems:"start",gap:Cr?2:1,wrap:"wrap",role:gr==="danger"?"alert":"status",width:"100%",children:[mr&&jsxRuntimeExports.jsx(Typography,{fontWeight:"bold",textColor:"neutral800",tag:Er,children:mr}),jsxRuntimeExports.jsx(Typography,{tag:"p",textColor:"neutral800",children:hr}),Cr&&jsxRuntimeExports.jsx(ActionBox,{$variant:gr,children:Cr})]}),jsxRuntimeExports.jsx(CloseButton,{tag:"button",background:"transparent",borderColor:void 0,height:"1.6rem",width:"1.6rem",marginTop:1,onClick:vr,color:"neutral700",children:jsxRuntimeExports.jsx(AccessibleIcon,{label:xr,children:jsxRuntimeExports.jsx(ForwardRef$3$,{})})})]});function $b1b2314f5f9a1d84$export$25bec8c6f54ee79a(mr){const hr=reactExports.useRef(mr);return reactExports.useEffect(()=>{hr.current=mr}),reactExports.useMemo(()=>(...gr)=>{var vr;return(vr=hr.current)===null||vr===void 0?void 0:vr.call(hr,...gr)},[])}function useControllableState$1({prop:mr,defaultProp:hr,onChange:gr=()=>{}}){const[vr,xr]=useUncontrolledState$1({defaultProp:hr,onChange:gr}),Er=mr!==void 0,Cr=Er?mr:vr,wr=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(gr),Rr=reactExports.useCallback(kr=>{if(Er){const Br=typeof kr=="function"?kr(mr):kr;Br!==mr&&wr(Br)}else xr(kr)},[Er,mr,xr,wr]);return[Cr,Rr]}function useUncontrolledState$1({defaultProp:mr,onChange:hr}){const gr=reactExports.useState(mr),[vr]=gr,xr=reactExports.useRef(vr),Er=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(hr);return reactExports.useEffect(()=>{xr.current!==vr&&(Er(vr),xr.current=vr)},[vr,xr,Er]),gr}const EASINGS={easeInSine:"cubic-bezier(0.47, 0, 0.745, 0.715)",easeOutSine:"cubic-bezier(0.39, 0.575, 0.565, 1)",easeInOutSine:"cubic-bezier(0.39, 0.575, 0.565, 1)",easeInQuad:"cubic-bezier(0.55, 0.085, 0.68, 0.53)",easeOutQuad:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",easeInOutQuad:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",easeInCubic:"cubic-bezier(0.55, 0.055, 0.675, 0.19)",easeOutCubic:"cubic-bezier(0.215, 0.61, 0.355, 1)",easeInOutCubic:"cubic-bezier(0.215, 0.61, 0.355, 1)",easeInQuart:"cubic-bezier(0.895, 0.03, 0.685, 0.22)",easeOutQuart:"cubic-bezier(0.165, 0.84, 0.44, 1)",easeInOutQuart:"cubic-bezier(0.165, 0.84, 0.44, 1)",easeInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",easeOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",easeInOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",easeInExpo:"cubic-bezier(0.95, 0.05, 0.795, 0.035)",easeOutExpo:"cubic-bezier(0.19, 1, 0.22, 1)",easeInOutExpo:"cubic-bezier(0.19, 1, 0.22, 1)",easeInCirc:"cubic-bezier(0.6, 0.04, 0.98, 0.335)",easeOutCirc:"cubic-bezier(0.075, 0.82, 0.165, 1)",easeInOutCirc:"cubic-bezier(0.075, 0.82, 0.165, 1)",easeInBack:"cubic-bezier(0.6, -0.28, 0.735, 0.045)",easeOutBack:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",easeInOutBack:"cubic-bezier(0.68, -0.55, 0.265, 1.55)",easeInOutFast:"cubic-bezier(1,0,0,1)",authenticMotion:"cubic-bezier(.4,0,.2,1)"},TIMINGS={320:"320ms",200:"200ms",120:"120ms"},TRANSITIONS={color:`color ${TIMINGS[120]} ${EASINGS.easeOutQuad}`,backgroundColor:`background-color ${TIMINGS[120]} ${EASINGS.easeOutQuad}`},ANIMATIONS={overlayFadeIn:mt$3`
    from {
      opacity: 0;
    }
    to {
      opacity: 0.2;
    }
  `,modalPopIn:mt$3`
    from {
      transform:translate(-50%, -50%)  scale(0.8);
      opacity: 0;
    }
    to {
      transform: translate(-50%, -50%) scale(1);
      opacity: 1;
    }
  `,modalPopOut:mt$3`
    from {
      transform: translate(-50%, -50%) scale(1);
      opacity: 1;
    }
    to {
      transform:translate(-50%, -50%)  scale(0.8);
      opacity: 0;
    }
  `,popIn:mt$3`
    from {
      transform: scale(0.8);
      opacity: 0;
    }
    to {
      transform: scale(1);
      opacity: 1;
    }
  `,popOut:mt$3`
    from {
      transform: scale(1);
      opacity: 1;
    }
    to {
      transform: scale(0.8);
      opacity: 0;
    }
  `,slideDownIn:mt$3`
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  `,slideDownOut:mt$3`
    from {
      opacity: 1;
      transform: translateY(0);
    }
    to {
      opacity: 0;
      transform: translateY(-10px);
    }
  `,slideUpIn:mt$3`
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  `,slideUpOut:mt$3`
    from {
      opacity: 1;
      transform: translateY(0);
    }
    to {
      opacity: 0;
      transform: translateY(10px);
    }
  `,fadeIn:mt$3`
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  `,fadeOut:mt$3`
    from {
      opacity: 1;
    }
    to {
      opacity: 0;
    }
  `},SIZE=32,PREVIEW_SCALE=2,Item$4=reactExports.forwardRef(({onLoadingStatusChange:mr,delayMs:hr=600,src:gr,alt:vr,fallback:xr,preview:Er=!1,...Cr},wr)=>{const[Rr,kr]=useControllableState$1({onChange:mr}),[Dr,Br]=reactExports.useState(!1),Hr=Er&&Rr==="loaded",Gr=qr=>{Hr&&Br(qr)};return jsxRuntimeExports.jsxs($a093c7e1ec25a057$export$be92b6f5f03c0fe9,{onOpenChange:Gr,children:[jsxRuntimeExports.jsx($a093c7e1ec25a057$export$41fb9f06171c75f4,{asChild:!0,children:jsxRuntimeExports.jsxs(AvatarRoot,{ref:wr,...Cr,children:[Hr?jsxRuntimeExports.jsx(AvatarOverlay,{width:"100%",height:"100%",position:"absolute",background:"neutral0",zIndex:"overlay",style:{opacity:Dr?.4:0}}):null,jsxRuntimeExports.jsx(AvatarImage,{src:gr,alt:vr,onLoadingStatusChange:kr}),jsxRuntimeExports.jsx($cddcb0b647441e34$export$fb8d7f40caaeea67,{delayMs:hr,children:jsxRuntimeExports.jsx(Typography,{fontWeight:"bold",textTransform:"uppercase",children:xr})})]})}),Hr?jsxRuntimeExports.jsx($a093c7e1ec25a057$export$602eac185826482c,{children:jsxRuntimeExports.jsx(PreviewContent,{side:"top",sideOffset:4,children:jsxRuntimeExports.jsx(PreviewImg,{src:gr,alt:vr})})}):null]})}),avatarStyles=lt$4`
  display: inline-flex;
  align-items: center;
  justify-content: center;
  vertical-align: middle;
  overflow: hidden;
  user-select: none;
  overflow: hidden;
  border-radius: 50%;
`,imgStyles=lt$4`
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: inherit;
`,AvatarRoot=dt$3($cddcb0b647441e34$export$be92b6f5f03c0fe9)`
  position: relative;
  z-index: 0;
  ${avatarStyles}
  width: ${SIZE/10}rem;
  height: ${SIZE/10}rem;
  /* TODO: we should get the user email & hash it to turn it into a hex-value so different emails can consistently get a different background */
  background-color: ${mr=>mr.theme.colors.primary600};
  color: ${mr=>mr.theme.colors.neutral0};
`,AvatarOverlay=dt$3(Box)`
  @media (prefers-reduced-motion: no-preference) {
    transition: opacity ${mr=>mr.theme.motion.timings[200]}
      ${mr=>mr.theme.motion.easings.authenticMotion};
  }
`,AvatarImage=dt$3($cddcb0b647441e34$export$3e431a229df88919)`
  ${imgStyles}
`,PreviewContent=dt$3($a093c7e1ec25a057$export$7c6e2c02157bb7d2)`
  ${avatarStyles}
  width: ${SIZE*PREVIEW_SCALE/10}rem;
  height: ${SIZE*PREVIEW_SCALE/10}rem;

  @media (prefers-reduced-motion: no-preference) {
    animation: ${ANIMATIONS.fadeIn} ${mr=>mr.theme.motion.timings[200]}
      ${mr=>mr.theme.motion.easings.authenticMotion};
  }
`,PreviewImg=dt$3.img`
  ${imgStyles}
`,Group$2=reactExports.forwardRef((mr,hr)=>jsxRuntimeExports.jsx(GroupFlex,{...mr,ref:hr,tag:"div"})),GroupFlex=dt$3(Flex)`
  & > ${AvatarRoot} + ${AvatarRoot} {
    margin-left: -${SIZE/10/2}rem;
  }
`,Avatar=Object.freeze(Object.defineProperty({__proto__:null,Group:Group$2,Item:Item$4},Symbol.toStringTag,{value:"Module"})),Badge=({active:mr=!1,size:hr="M",textColor:gr="neutral600",backgroundColor:vr="neutral150",children:xr,minWidth:Er=5,...Cr})=>{const wr=hr==="S"?1:2;return jsxRuntimeExports.jsx(Base,{inline:!0,alignItems:"center",justifyContent:"center",minWidth:Er,paddingLeft:wr,paddingRight:wr,background:mr?"primary200":vr,$size:hr,...Cr,children:jsxRuntimeExports.jsx(Typography,{variant:"sigma",textColor:mr?"primary600":gr,lineHeight:"1rem",children:xr})})},Base=dt$3(Flex)`
  border-radius: ${({theme:mr,$size:hr})=>hr==="S"?"2px":mr.borderRadius};
  ${({$size:mr,theme:hr})=>mr==="S"?lt$4`
        padding-block: 0.3rem;
        padding-inline ${hr.spaces[1]}
      `:lt$4`
      padding-block: 0.7rem;
      padding-inline ${hr.spaces[2]}
    `};
`,BaseLinkImpl=forwardRef(({href:mr,disabled:hr=!1,isExternal:gr=!1,...vr},xr)=>jsxRuntimeExports.jsx(BaseLink,{tag:"a",ref:xr,target:gr?"_blank":void 0,rel:gr?"noreferrer noopener":void 0,href:mr,tabIndex:hr?-1:void 0,"aria-disabled":hr,pointerEvents:hr?"none":void 0,cursor:hr?void 0:"pointer",...vr})),BaseLink=dt$3(Box)`
  text-decoration: none;

  &:visited {
    color: inherit;
  }
`,Divider$1=()=>jsxRuntimeExports.jsx(Box,{"aria-hidden":!0,paddingLeft:1,paddingRight:1,children:jsxRuntimeExports.jsx(Typography,{variant:"pi",textColor:"neutral500",children:"/"})});Divider$1.displayName="Divider";const AlignedList=dt$3(Flex)`
  // CrumbLinks do have padding-x, because they need to have a
  // interaction effect, which mis-aligns the breadcrumbs on the left.
  // This normalizes the behavior by moving the first item to left by
  // the same amount it has inner padding
  & > *:first-child {
    margin-left: ${({theme:mr})=>`calc(-1*${mr.spaces[2]})`};
  }
`,Breadcrumbs$1=reactExports.forwardRef(({label:mr,children:hr,...gr},vr)=>{const xr=reactExports.Children.toArray(hr);return jsxRuntimeExports.jsx(Box,{"aria-label":mr,tag:"nav",...gr,ref:vr,children:jsxRuntimeExports.jsx(AlignedList,{tag:"ol",children:reactExports.Children.map(xr,(Er,Cr)=>{const wr=xr.length>1&&Cr+1<xr.length;return jsxRuntimeExports.jsxs(Flex,{inline:!0,tag:"li",children:[Er,wr&&jsxRuntimeExports.jsx(Divider$1,{})]})})})})});Breadcrumbs$1.displayName="Breadcrumbs";const Crumb=reactExports.forwardRef(({children:mr,isCurrent:hr=!1,...gr},vr)=>jsxRuntimeExports.jsx(Box,{paddingLeft:2,paddingRight:2,paddingTop:1,paddingBottom:1,ref:vr,children:jsxRuntimeExports.jsx(Typography,{variant:"pi",textColor:"neutral800",fontWeight:hr?"bold":"regular","aria-current":hr,...gr,children:mr})}));Crumb.displayName="Crumb";const StyledLink=dt$3(BaseLinkImpl)`
  border-radius: ${({theme:mr})=>mr.borderRadius};
  color: ${({theme:mr})=>mr.colors.neutral600};
  font-size: ${({theme:mr})=>mr.fontSizes[1]};
  line-height: ${({theme:mr})=>mr.lineHeights[4]};
  padding: ${({theme:mr})=>`${mr.spaces[1]} ${mr.spaces[2]}`};
  text-decoration: none;

  :hover,
  :focus {
    background-color: ${({theme:mr})=>mr.colors.neutral200};
    color: ${({theme:mr})=>mr.colors.neutral700};
  }
`,CrumbLink=reactExports.forwardRef(({children:mr,...hr},gr)=>jsxRuntimeExports.jsx(StyledLink,{ref:gr,...hr,children:mr}));CrumbLink.displayName="CrumbLink";const stripReactIdOfColon=mr=>mr.replaceAll(":","");function setRef$1(mr,hr){typeof mr=="function"?mr(hr):mr!=null&&(mr.current=hr)}function composeRefs(...mr){return hr=>mr.forEach(gr=>setRef$1(gr,hr))}function useComposedRefs(...mr){return reactExports.useCallback(composeRefs(...mr),mr)}const isSSR=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),useIsomorphicLayoutEffect$3=isSSR()?reactExports.useEffect:reactExports.useLayoutEffect,useReactId=React$2.useId||(()=>{});let count=0;const useId=mr=>{const[hr,gr]=reactExports.useState(useReactId());return useIsomorphicLayoutEffect$3(()=>{mr||gr(vr=>vr??String(count++))},[mr]),mr?.toString()??(hr||"")},useIntersection=(mr,hr,{selectorToWatch:gr,skipWhen:vr=!1})=>{const xr=useCallbackRef(hr);reactExports.useEffect(()=>{if(vr||!mr.current)return;const Er={root:mr.current,rootMargin:"0px"},Cr=kr=>{kr.forEach(Dr=>{Dr.isIntersecting&&mr.current&&mr.current.scrollHeight>mr.current.clientHeight&&xr(Dr)})},wr=new IntersectionObserver(Cr,Er),Rr=mr.current.querySelector(gr);return Rr&&wr.observe(Rr),()=>{wr.disconnect()}},[vr,xr,gr,mr])},SUCCESS_LIGHT="success-light",DANGER_LIGHT="danger-light",DEFAULT="default",TERTIARY="tertiary",SECONDARY="secondary",DANGER="danger",SUCCESS="success",GHOST="ghost",LIGHT_VARIANTS=[SUCCESS_LIGHT,DANGER_LIGHT],VARIANTS=[DEFAULT,TERTIARY,SECONDARY,DANGER,SUCCESS,GHOST,...LIGHT_VARIANTS],BUTTON_SIZES=["S","M","L"],getVariantColorName=mr=>mr===SUCCESS_LIGHT||mr===DANGER_LIGHT?`${mr.substring(0,mr.lastIndexOf("-"))}`:mr===TERTIARY?"neutral":mr===DEFAULT||mr===SECONDARY||VARIANTS.every(hr=>hr!==mr)?"primary":`${mr}`,getDisabledStyle=({theme:mr})=>lt$4`
    border: 1px solid ${mr.colors.neutral200};
    background: ${mr.colors.neutral150};
    color: ${mr.colors.neutral600};
    cursor: default;
  `,getHoverStyle=({theme:mr,$variant:hr})=>[...LIGHT_VARIANTS,SECONDARY].includes(hr)?lt$4`
      background-color: ${mr.colors.neutral0};
    `:hr===TERTIARY?lt$4`
      background-color: ${mr.colors.neutral100};
    `:hr===GHOST?lt$4`
      background-color: ${mr.colors.neutral100};
    `:hr===DEFAULT?lt$4`
      border: 1px solid ${mr.colors.buttonPrimary500};
      background: ${mr.colors.buttonPrimary500};
    `:lt$4`
    border: 1px solid ${mr.colors[`${getVariantColorName(hr)}500`]};
    background: ${mr.colors[`${getVariantColorName(hr)}500`]};
  `,getActiveStyle=({theme:mr,$variant:hr})=>[...LIGHT_VARIANTS,SECONDARY].includes(hr)?lt$4`
      background-color: ${mr.colors.neutral0};
      border: 1px solid ${mr.colors[`${getVariantColorName(hr)}600`]};
      color: ${mr.colors[`${getVariantColorName(hr)}600`]};
    `:hr===TERTIARY||hr===GHOST?lt$4`
      background-color: ${mr.colors.neutral150};
    `:lt$4`
    border: 1px solid ${mr.colors[`${getVariantColorName(hr)}600`]};
    background: ${mr.colors[`${getVariantColorName(hr)}600`]};
  `,getVariantStyle=({theme:mr,$variant:hr})=>{switch(hr){case DANGER_LIGHT:case SUCCESS_LIGHT:case SECONDARY:return lt$4`
        border: 1px solid ${mr.colors[`${getVariantColorName(hr)}200`]};
        background: ${mr.colors[`${getVariantColorName(hr)}100`]};
        color: ${mr.colors[`${getVariantColorName(hr)}700`]};
      `;case TERTIARY:return lt$4`
        border: 1px solid ${mr.colors.neutral200};
        background: ${mr.colors.neutral0};
        color: ${mr.colors.neutral800};
      `;case GHOST:return lt$4`
        border: 1px solid transparent;
        background: transparent;
        color: ${mr.colors.neutral800};

        svg {
          fill: ${mr.colors.neutral500};
        }
      `;case SUCCESS:case DANGER:return lt$4`
        border: 1px solid ${mr.colors[`${getVariantColorName(hr)}600`]};
        background: ${mr.colors[`${getVariantColorName(hr)}600`]};
        color: ${mr.colors.neutral0};
      `;default:return lt$4`
        border: 1px solid ${mr.colors.buttonPrimary600};
        background: ${mr.colors.buttonPrimary600};
        color: ${mr.colors.buttonNeutral0};
      `}},Button=forwardRef(({variant:mr=DEFAULT,startIcon:hr,endIcon:gr,disabled:vr=!1,children:xr,onClick:Er,size:Cr=BUTTON_SIZES[0],loading:wr=!1,fullWidth:Rr=!1,...kr},Dr)=>{const Br=vr||wr,Hr=Gr=>{!Br&&Er&&Er(Gr)};return jsxRuntimeExports.jsxs(ButtonWrapper,{ref:Dr,"aria-disabled":Br,disabled:Br,$size:Cr,$variant:mr,tag:"button",onClick:Hr,hasRadius:!0,gap:2,inline:!0,alignItems:"center",justifyContent:"center",width:Rr?"100%":void 0,paddingLeft:4,paddingRight:4,cursor:"pointer",...kr,children:[(hr||wr)&&jsxRuntimeExports.jsx(Flex,{tag:"span","aria-hidden":!0,children:wr?jsxRuntimeExports.jsx(LoaderAnimated,{}):hr}),jsxRuntimeExports.jsx(Typography,{variant:Cr==="S"?"pi":void 0,fontWeight:"bold",children:xr}),gr&&jsxRuntimeExports.jsx(Flex,{tag:"span","aria-hidden":!0,children:gr})]})}),rotation$2=mt$3`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(359deg);
  }
`,LoaderAnimated=dt$3(ForwardRef$2f)`
  animation: ${rotation$2} 2s infinite linear;
  will-change: transform;
`,ButtonWrapper=dt$3(Flex)`
  height: ${({theme:mr,$size:hr})=>mr.sizes.button[hr]};
  text-decoration: none;
  ${getVariantStyle}

  &:hover {
    ${getHoverStyle}
  }

  &:active {
    ${getActiveStyle}
  }

  &[aria-disabled='true'] {
    ${getDisabledStyle}
  }

  @media (prefers-reduced-motion: no-preference) {
    transition:
      ${mr=>mr.theme.transitions.backgroundColor},
      ${mr=>mr.theme.transitions.color},
      border-color ${mr=>mr.theme.motion.timings[200]} ${mr=>mr.theme.motion.easings.easeOutQuad};
  }
`,TooltipImpl=reactExports.forwardRef(({children:mr,description:hr,label:gr,defaultOpen:vr,open:xr,onOpenChange:Er,delayDuration:Cr=500,disableHoverableContent:wr,...Rr},kr)=>jsxRuntimeExports.jsxs($a093c7e1ec25a057$export$be92b6f5f03c0fe9,{defaultOpen:vr,open:xr,onOpenChange:Er,delayDuration:Cr,disableHoverableContent:wr,children:[jsxRuntimeExports.jsx($a093c7e1ec25a057$export$41fb9f06171c75f4,{asChild:!0,children:mr}),jsxRuntimeExports.jsx($a093c7e1ec25a057$export$602eac185826482c,{children:jsxRuntimeExports.jsx(TooltipContent,{ref:kr,sideOffset:8,...Rr,children:jsxRuntimeExports.jsx(Typography,{variant:"pi",fontWeight:"bold",children:gr||hr})})})]})),TooltipContent=dt$3($a093c7e1ec25a057$export$7c6e2c02157bb7d2)`
  background-color: ${mr=>mr.theme.colors.neutral900};
  color: ${mr=>mr.theme.colors.neutral0};
  padding-inline: ${mr=>mr.theme.spaces[2]};
  padding-block: ${mr=>mr.theme.spaces[2]};
  border-radius: ${mr=>mr.theme.borderRadius};
  z-index: ${mr=>mr.theme.zIndices.tooltip};
  will-change: opacity;
  transform-origin: var(--radix-tooltip-content-transform-origin);

  @media (prefers-reduced-motion: no-preference) {
    animation: ${ANIMATIONS.fadeIn} ${mr=>mr.theme.motion.timings[200]}
      ${mr=>mr.theme.motion.easings.authenticMotion};
  }
`,IconButton=forwardRef(({label:mr,background:hr,children:gr,disabled:vr=!1,onClick:xr,size:Er="S",variant:Cr="tertiary",withTooltip:wr=!0,...Rr},kr)=>{const Dr=Hr=>{!vr&&xr&&xr(Hr)},Br=jsxRuntimeExports.jsx(IconButtonWrapper,{"aria-disabled":vr,background:vr?"neutral150":hr,tag:"button",display:"inline-flex",justifyContent:"center",hasRadius:!0,cursor:"pointer",...Rr,ref:kr,$size:Er,onClick:Dr,$variant:Cr,children:jsxRuntimeExports.jsx(AccessibleIcon,{label:mr,children:gr})});return wr?jsxRuntimeExports.jsx(TooltipImpl,{label:mr,children:Br}):Br}),IconButtonWrapper=dt$3(Flex)`
  text-decoration: none;

  ${mr=>{switch(mr.$size){case"S":return lt$4`
          padding-block: 0.7rem;
          padding-inline: 0.7rem;
        `;case"M":return lt$4`
          padding-block: 0.9rem;
          padding-inline: 0.9rem;
        `;case"L":return lt$4`
          padding-block: 1.1rem;
          padding-inline: 1.1rem;
        `}}}
  ${getVariantStyle}
  ${mr=>mr.$variant==="tertiary"?lt$4`
          color: ${mr.theme.colors.neutral500};
        `:""}

  &:hover {
    ${getHoverStyle}
    ${mr=>mr.$variant==="tertiary"?lt$4`
            color: ${mr.theme.colors.neutral600};
          `:""}
  }

  &:active {
    ${getActiveStyle}
  }

  &[aria-disabled='true'] {
    ${getDisabledStyle}
  }

  @media (prefers-reduced-motion: no-preference) {
    transition:
      ${mr=>mr.theme.transitions.backgroundColor},
      ${mr=>mr.theme.transitions.color},
      border-color ${mr=>mr.theme.motion.timings[200]} ${mr=>mr.theme.motion.easings.easeOutQuad};
  }
`,IconButtonGroup=dt$3(Flex)`
  & ${IconButtonWrapper}:first-child {
    border-radius: ${({theme:mr})=>`${mr.borderRadius} 0 0 ${mr.borderRadius}`};
  }

  & ${IconButtonWrapper}:last-child {
    border-radius: ${({theme:mr})=>`0 ${mr.borderRadius} ${mr.borderRadius} 0`};
  }

  & ${IconButtonWrapper} {
    border-radius: 0;

    & + ${IconButtonWrapper} {
      border-left: none;
    }
  }
`,Link=forwardRef(({children:mr,href:hr,disabled:gr=!1,startIcon:vr,endIcon:xr,isExternal:Er=!1,...Cr},wr)=>jsxRuntimeExports.jsxs(LinkWrapper$1,{ref:wr,href:hr,disabled:gr,isExternal:Er,...Cr,children:[vr,jsxRuntimeExports.jsx(Typography,{textColor:gr?"neutral600":"primary600",children:mr}),xr,hr&&!xr&&Er&&jsxRuntimeExports.jsx(ForwardRef$3z,{})]})),LinkWrapper$1=dt$3(BaseLinkImpl)`
  display: inline-flex;
  align-items: center;
  text-decoration: none;
  gap: ${({theme:mr})=>mr.spaces[2]};
  pointer-events: ${({disabled:mr})=>mr?"none":void 0};

  svg {
    font-size: 1rem;

    path {
      fill: ${({disabled:mr,theme:hr})=>mr?hr.colors.neutral600:hr.colors.primary600};
    }
  }

  &:hover {
    & > span {
      color: ${({theme:mr})=>mr.colors.primary500};
    }

    svg path {
      fill: ${({theme:mr})=>mr.colors.primary500};
    }
  }

  &:active {
    color: ${({theme:mr})=>mr.colors.primary700};
  }

  ${focus};
`,MenuRoot=$d08ef79370b62062$export$be92b6f5f03c0fe9,MenuTrigger=reactExports.forwardRef(({label:mr,endIcon:hr=jsxRuntimeExports.jsx(ForwardRef$4L,{width:"1.2rem",height:"1.2rem","aria-hidden":!0}),tag:gr=Button,icon:vr,...xr},Er)=>{const Cr={...xr,ref:Er,type:"button"};return jsxRuntimeExports.jsx($d08ef79370b62062$export$41fb9f06171c75f4,{asChild:!0,disabled:Cr.disabled,children:gr===IconButton?jsxRuntimeExports.jsx(IconButton,{label:mr,variant:"tertiary",...Cr,children:vr}):jsxRuntimeExports.jsx(Button,{endIcon:hr,variant:"ghost",...Cr})})}),MenuContent=reactExports.forwardRef(({children:mr,intersectionId:hr,popoverPlacement:gr="bottom-start",...vr},xr)=>{const[Er,Cr]=gr.split("-");return jsxRuntimeExports.jsx($d08ef79370b62062$export$602eac185826482c,{children:jsxRuntimeExports.jsx(DropdownMenuContent,{align:Cr,side:Er,loop:!0,asChild:!0,children:jsxRuntimeExports.jsxs(Viewport$2,{ref:xr,direction:"column",borderColor:"neutral150",hasRadius:!0,background:"neutral0",shadow:"filterShadow",maxHeight:"15rem",padding:1,marginTop:1,marginBottom:1,alignItems:"flex-start",position:"relative",overflow:"auto",...vr,children:[mr,jsxRuntimeExports.jsx(Box,{id:hr,width:"100%",height:"1px"})]})})})}),Viewport$2=dt$3(Flex)`
  scrollbar-width: none;
  -ms-overflow-style: none;
  -webkit-overflow-scrolling: touch;

  &::-webkit-scrollbar {
    display: none;
  }
`,DropdownMenuContent=dt$3($d08ef79370b62062$export$7c6e2c02157bb7d2)`
  @media (prefers-reduced-motion: no-preference) {
    animation-duration: ${mr=>mr.theme.motion.timings[200]};

    &[data-state='open'] {
      animation-timing-function: ${mr=>mr.theme.motion.easings.authenticMotion};

      &[data-side='top'] {
        animation-name: ${ANIMATIONS.slideUpIn};
      }

      &[data-side='bottom'] {
        animation-name: ${ANIMATIONS.slideDownIn};
      }
    }
  }
`,MenuItem$1=({onSelect:mr,disabled:hr=!1,isLink:gr,...vr})=>jsxRuntimeExports.jsx($d08ef79370b62062$export$6d08773d2e66f8f2,{asChild:!0,onSelect:mr,disabled:hr,children:gr||vr.isExternal?jsxRuntimeExports.jsx(OptionLink,{color:"neutral800",...vr,isExternal:vr.isExternal??!1,children:jsxRuntimeExports.jsx(Typography,{children:vr.children})}):jsxRuntimeExports.jsx(OptionButton,{cursor:"pointer",color:"neutral800",background:"transparent",borderStyle:"none",...vr,children:jsxRuntimeExports.jsx(Typography,{children:vr.children})})}),getOptionStyle=({theme:mr})=>lt$4`
  text-align: left;
  width: 100%;
  border-radius: ${mr.borderRadius};
  padding: ${mr.spaces[2]} ${mr.spaces[4]};

  &[aria-disabled='true'] {
    cursor: not-allowed;
    color: ${mr.colors.neutral500};
  }

  &[data-highlighted] {
    background-color: ${mr.colors.primary100};
  }

  &:focus-visible {
    outline: none;

    &:after {
      content: none;
    }
  }
`,OptionButton=dt$3(Flex)`
  ${getOptionStyle}
`,OptionLink=dt$3(Link)`
  /* We include this here again because typically when people use OptionLink they provide an as prop which cancels the Box props */
  color: ${({theme:mr,color:hr})=>extractStyleFromTheme(mr.colors,hr,void 0)};
  text-decoration: none;

  &:hover {
    color: unset;
  }

  /* TODO: do we need this? */
  svg > path,
  &:focus-visible svg > path {
    fill: currentColor;
  }

  ${getOptionStyle}
`,MenuLabel=reactExports.forwardRef((mr,hr)=>jsxRuntimeExports.jsx($d08ef79370b62062$export$b04be29aa201d4f5,{asChild:!0,children:jsxRuntimeExports.jsx(StyledLabel,{ref:hr,variant:"sigma",textColor:"neutral600",...mr})})),StyledLabel=dt$3(Typography)`
  padding: ${({theme:mr})=>mr.spaces[2]} ${({theme:mr})=>mr.spaces[4]};
`,MenuSubRoot=$d08ef79370b62062$export$d7a01e11500dfb6f,MenuSubTrigger=reactExports.forwardRef(({disabled:mr=!1,...hr},gr)=>jsxRuntimeExports.jsx($d08ef79370b62062$export$2ea8a7a591ac5eac,{asChild:!0,disabled:mr,children:jsxRuntimeExports.jsxs(SubmenuTrigger,{ref:gr,color:"neutral800",tag:"button",type:"button",background:"transparent",borderStyle:"none",gap:5,...hr,children:[jsxRuntimeExports.jsx(Typography,{children:hr.children}),jsxRuntimeExports.jsx(ForwardRef$4p,{fill:"neutral500",height:"1.2rem",width:"1.2rem"})]})})),SubmenuTrigger=dt$3(OptionButton)`
  &[data-state='open'] {
    background-color: ${({theme:mr})=>mr.colors.primary100};
  }
`,MenuSubContent=reactExports.forwardRef((mr,hr)=>jsxRuntimeExports.jsx($d08ef79370b62062$export$602eac185826482c,{children:jsxRuntimeExports.jsx($d08ef79370b62062$export$6d4de93b380beddf,{sideOffset:8,asChild:!0,children:jsxRuntimeExports.jsx(Viewport$2,{ref:hr,direction:"column",borderStyle:"solid",borderWidth:"1px",borderColor:"neutral150",hasRadius:!0,background:"neutral0",shadow:"filterShadow",maxHeight:"15rem",padding:1,alignItems:"flex-start",overflow:"auto",...mr})})})),Root$7=MenuRoot,Trigger$6=MenuTrigger,Content$6=MenuContent,Item$3=MenuItem$1,Label$1=MenuLabel,SubRoot=MenuSubRoot,SubTrigger=MenuSubTrigger,SubContent=MenuSubContent,Menu$2=Object.freeze(Object.defineProperty({__proto__:null,Content:Content$6,Item:Item$3,Label:Label$1,Root:Root$7,SubContent,SubRoot,SubTrigger,Trigger:Trigger$6},Symbol.toStringTag,{value:"Module"})),SimpleMenu=reactExports.forwardRef(({children:mr,onOpen:hr,onClose:gr,popoverPlacement:vr,onReachEnd:xr,...Er},Cr)=>{const wr=reactExports.useRef(null),Rr=useComposedRefs(Cr,wr),kr=reactExports.useRef(null),[Dr,Br]=reactExports.useState(!1),Hr=Qr=>{xr&&xr(Qr)},Gr=Qr=>{Qr&&typeof hr=="function"?hr():!Qr&&typeof gr=="function"&&gr(),Br(Qr)},qr=useId(),zr=`intersection-${stripReactIdOfColon(qr)}`;return useIntersection(kr,Hr,{selectorToWatch:`#${zr}`,skipWhen:!Dr}),jsxRuntimeExports.jsxs(Root$7,{onOpenChange:Gr,children:[jsxRuntimeExports.jsx(Trigger$6,{ref:Rr,...Er,children:Er.label}),jsxRuntimeExports.jsx(Content$6,{ref:kr,intersectionId:zr,popoverPlacement:vr,children:mr})]})}),MenuItem$2=Item$3,StyledButton=dt$3(SimpleMenu)`
  padding: ${({theme:mr})=>`${mr.spaces[1]} ${mr.spaces[2]}`};
  height: unset;

  :hover,
  :focus {
    background-color: ${({theme:mr})=>mr.colors.neutral200};
  }
`,CrumbSimpleMenu=reactExports.forwardRef(({children:mr,...hr},gr)=>jsxRuntimeExports.jsx(StyledButton,{ref:gr,endIcon:null,size:"S",...hr,children:mr}));CrumbSimpleMenu.displayName="CrumbSimpleMenu";const CardContext=reactExports.createContext({id:""}),useCard=()=>reactExports.useContext(CardContext),Card$1=reactExports.forwardRef(({id:mr,...hr},gr)=>{const vr=useId(mr),xr=reactExports.useMemo(()=>({id:vr}),[vr]);return jsxRuntimeExports.jsx(CardContext.Provider,{value:xr,children:jsxRuntimeExports.jsx(Box,{ref:gr,id:mr,tabIndex:0,hasRadius:!0,background:"neutral0",borderStyle:"solid",borderWidth:"1px",borderColor:"neutral150",shadow:"tableShadow",tag:"article","aria-labelledby":`${vr}-title`,...hr})})}),CardActionImpl=reactExports.forwardRef(({position:mr,...hr},gr)=>jsxRuntimeExports.jsx(CardAction,{ref:gr,$position:mr,...hr,direction:"row",gap:2})),CardAction=dt$3(Flex)`
  position: absolute;
  top: ${({theme:mr})=>mr.spaces[3]};
  right: ${({$position:mr,theme:hr})=>{if(mr==="end")return hr.spaces[3]}};
  left: ${({$position:mr,theme:hr})=>{if(mr==="start")return hr.spaces[3]}};
`,CardAsset$2=({size:mr="M",children:hr,...gr})=>jsxRuntimeExports.jsx(CardAssetWrapper,{$size:mr,children:hr||jsxRuntimeExports.jsx(CardAssetImg,{...gr,"aria-hidden":!0})}),CardAssetImg=dt$3.img`
  // inline flows is based on typography and displays an extra white space below the image
  // switch to block is required in order to make the img stick the bottom of the container
  // addition infos: https://stackoverflow.com/questions/5804256/image-inside-div-has-extra-space-below-the-image
  margin: 0;
  padding: 0;
  max-height: 100%;
  max-width: 100%;
  object-fit: contain;
`,CardAssetWrapper=dt$3.div`
  display: flex;
  justify-content: center;
  height: ${({$size:mr})=>mr==="S"?"8.8rem":"16.4rem"};
  width: 100%;
  background: repeating-conic-gradient(${({theme:mr})=>mr.colors.neutral100} 0% 25%, transparent 0% 50%) 50% / 20px
    20px;
  border-top-left-radius: ${({theme:mr})=>mr.borderRadius};
  border-top-right-radius: ${({theme:mr})=>mr.borderRadius};
`,CardBadgeWrapper=dt$3.div`
  margin-left: auto;
  flex-shrink: 0;
`,BadgePosition=dt$3(Badge)`
  margin-left: ${({theme:mr})=>mr.spaces[1]};
`,CardBadge=mr=>jsxRuntimeExports.jsx(CardBadgeWrapper,{children:jsxRuntimeExports.jsx(BadgePosition,{...mr})}),CardBody=mr=>jsxRuntimeExports.jsx(Box,{paddingLeft:3,paddingRight:3,paddingTop:2,paddingBottom:2,children:jsxRuntimeExports.jsx(Flex,{...mr,alignItems:"flex-start"})}),CheckIcon=({fill:mr,...hr})=>{const{colors:gr}=nt$2();return jsxRuntimeExports.jsx(Box,{tag:"svg",viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",fill:mr?gr[mr]:void 0,...hr,children:jsxRuntimeExports.jsx("path",{d:"M29.0613 10.0613L13.0613 26.0613C12.9219 26.2011 12.7563 26.3121 12.574 26.3878C12.3917 26.4635 12.1962 26.5024 11.9988 26.5024C11.8013 26.5024 11.6059 26.4635 11.4235 26.3878C11.2412 26.3121 11.0756 26.2011 10.9363 26.0613L3.93626 19.0613C3.79673 18.9217 3.68605 18.7561 3.61053 18.5738C3.53502 18.3915 3.49615 18.1961 3.49615 17.9988C3.49615 17.8014 3.53502 17.606 3.61053 17.4237C3.68605 17.2414 3.79673 17.0758 3.93626 16.9363C4.07579 16.7967 4.24143 16.686 4.42374 16.6105C4.60604 16.535 4.80143 16.4962 4.99876 16.4962C5.19608 16.4962 5.39147 16.535 5.57378 16.6105C5.75608 16.686 5.92173 16.7967 6.06126 16.9363L12 22.875L26.9388 7.93876C27.2205 7.65697 27.6027 7.49866 28.0013 7.49866C28.3998 7.49866 28.782 7.65697 29.0638 7.93876C29.3455 8.22055 29.5039 8.60274 29.5039 9.00126C29.5039 9.39977 29.3455 9.78197 29.0638 10.0638L29.0613 10.0613Z"})})},CheckboxEl=reactExports.forwardRef(({defaultChecked:mr,checked:hr,onCheckedChange:gr,...vr},xr)=>{const Er=reactExports.useRef(null),[Cr,wr]=useControllableState$1({defaultProp:mr,prop:hr,onChange:gr}),Rr=useComposedRefs(Er,xr);return jsxRuntimeExports.jsx(CheckboxRoot,{ref:Rr,checked:Cr,onCheckedChange:wr,...vr,children:jsxRuntimeExports.jsxs(CheckboxIndicator,{style:{display:"inline-flex",pointerEvents:"auto"},forceMount:!0,children:[Cr===!0?jsxRuntimeExports.jsx(CheckIcon,{width:"1.6rem",fill:"neutral0"}):null,Cr==="indeterminate"?jsxRuntimeExports.jsx(ForwardRef$1Z,{fill:"neutral0"}):null]})})}),CheckboxRoot=dt$3($e698a72e93240346$export$be92b6f5f03c0fe9)`
  background: ${mr=>mr.theme.colors.neutral0};
  width: 2rem;
  height: 2rem;
  border-radius: ${mr=>mr.theme.borderRadius};
  border: 1px solid ${mr=>mr.theme.colors.neutral300};
  position: relative;
  z-index: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  // this ensures the checkbox is always a square even in flex-containers.
  flex: 0 0 2rem;

  &[data-state='checked'],
  &[data-state='indeterminate'] {
    border: 1px solid ${mr=>mr.theme.colors.primary600};
    background-color: ${mr=>mr.theme.colors.primary600};
  }

  &[data-disabled] {
    background-color: ${mr=>mr.theme.colors.neutral200};
  }

  /* increase target size for touch devices https://www.w3.org/WAI/WCAG21/Understanding/target-size.html */
  &::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 100%;
    height: 100%;
    z-index: -1;
    min-width: 44px;
    min-height: 44px;
  }
`,CheckboxIndicator=dt$3($e698a72e93240346$export$adb584737d712b70)`
  width: 100%;
  height: 100%;
  cursor: pointer;
`,CheckboxImpl=reactExports.forwardRef(({children:mr,...hr},gr)=>{const vr=useId(hr.id);return mr?jsxRuntimeExports.jsxs(Flex,{gap:2,children:[jsxRuntimeExports.jsx(CheckboxEl,{id:vr,...hr}),jsxRuntimeExports.jsx(Typography,{tag:"label",textColor:"neutral800",htmlFor:vr,children:mr})]}):jsxRuntimeExports.jsx(CheckboxEl,{ref:gr,...hr})}),CardCheckbox=reactExports.forwardRef((mr,hr)=>{const{id:gr}=useCard();return jsxRuntimeExports.jsx(CardActionImpl,{position:"start",children:jsxRuntimeExports.jsx(CheckboxImpl,{"aria-labelledby":`${gr}-title`,...mr,ref:hr})})}),BreakBox=dt$3(Box)`
  word-break: break-all;
`,CardContent=({children:mr,...hr})=>jsxRuntimeExports.jsx(BreakBox,{...hr,children:mr}),CardHeaderWrapper=dt$3(Flex)`
  border-bottom: 1px solid ${({theme:mr})=>mr.colors.neutral150};
`,CardHeader=mr=>jsxRuntimeExports.jsx(CardHeaderWrapper,{position:"relative",justifyContent:"center",...mr}),CardTimer=({children:mr,...hr})=>jsxRuntimeExports.jsx(Box,{tag:"time",background:"neutral800",bottom:1,right:1,color:"neutral0",hasRadius:!0,position:"absolute",padding:1,...hr,children:jsxRuntimeExports.jsx(Typography,{variant:"pi",textColor:"neutral0",children:mr})}),CardTitle=mr=>{const{id:hr}=useCard();return jsxRuntimeExports.jsx(Typography,{variant:"pi",id:`${hr}-title`,textColor:"neutral800",fontWeight:"bold",tag:"div",...mr})},CardSubtitle=mr=>jsxRuntimeExports.jsx(Typography,{variant:"pi",...mr,textColor:"neutral600",tag:"div"}),KeyboardKeys={DOWN:"ArrowDown",UP:"ArrowUp",RIGHT:"ArrowRight",LEFT:"ArrowLeft",ESCAPE:"Escape",ENTER:"Enter",SPACE:" ",TAB:"Tab",END:"End",HOME:"Home",DELETE:"Delete",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",BACKSPACE:"Backspace",CLEAR:"Clear"},CarouselGrid=dt$3(Box)`
  grid-template-columns: auto 1fr auto;
  grid-template-areas: 'startAction slides endAction';
`,CarouselSlides=dt$3(Flex)`
  grid-area: slides;
`,CarouselAction=dt$3(Box)`
  grid-area: ${({$area:mr})=>mr};

  &:focus svg path,
  &:hover svg path {
    fill: ${({theme:mr})=>mr.colors.neutral900};
  }
`,Carousel=reactExports.forwardRef(({actions:mr,children:hr,label:gr,nextLabel:vr,onNext:xr,onPrevious:Er,previousLabel:Cr,secondaryLabel:wr,selectedSlide:Rr,...kr},Dr)=>{const Br=reactExports.useRef(null),Hr=reactExports.useRef(null),Gr=reactExports.Children.map(hr,(zr,Qr)=>reactExports.cloneElement(zr,{selected:Qr===Rr})),qr=zr=>{switch(zr.key){case KeyboardKeys.RIGHT:{zr.preventDefault(),Hr?.current&&Hr.current.focus(),xr&&xr();break}case KeyboardKeys.LEFT:{zr.preventDefault(),Br?.current&&Br.current.focus(),Er&&Er();break}}};return jsxRuntimeExports.jsx(Box,{ref:Dr,...kr,onKeyDown:qr,children:jsxRuntimeExports.jsxs(Box,{padding:2,borderColor:"neutral200",hasRadius:!0,background:"neutral100",children:[jsxRuntimeExports.jsxs(CarouselGrid,{tag:"section","aria-roledescription":"carousel","aria-label":gr,display:"grid",position:"relative",children:[Gr&&Gr.length>1&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(CarouselAction,{tag:"button",onClick:Er,$area:"startAction",ref:Br,type:"button",children:jsxRuntimeExports.jsx(AccessibleIcon,{label:Cr,children:jsxRuntimeExports.jsx(ForwardRef$4r,{width:"1.6rem",height:"1.6rem",fill:"neutral600"})})}),jsxRuntimeExports.jsx(CarouselAction,{tag:"button",onClick:xr,$area:"endAction",ref:Hr,type:"button",children:jsxRuntimeExports.jsx(AccessibleIcon,{label:vr,children:jsxRuntimeExports.jsx(ForwardRef$4p,{width:"1.6rem",height:"1.6rem",fill:"neutral600"})})})]}),jsxRuntimeExports.jsx(CarouselSlides,{"aria-live":"polite",paddingLeft:2,paddingRight:2,width:"100%",overflow:"hidden",children:Gr}),mr]}),wr&&jsxRuntimeExports.jsx(Box,{paddingTop:2,paddingLeft:4,paddingRight:4,children:jsxRuntimeExports.jsx(TooltipImpl,{label:wr,children:jsxRuntimeExports.jsx(Flex,{justifyContent:"center",children:jsxRuntimeExports.jsx(Typography,{variant:"pi",textColor:"neutral600",ellipsis:!0,children:wr})})})})]})})}),sizes={accordions:{S:"4.8rem",M:"8.8rem"},button:{S:"3.2rem",M:"3.6rem",L:"4rem"}},commonTheme={sizes,zIndices:{navigation:100,overlay:300,modal:310,dialog:320,popover:500,notification:700,tooltip:1e3},spaces:["0px","4px","8px","12px","16px","20px","24px","32px","40px","48px","56px","64px"],borderRadius:"4px",breakpoints:{initial:"@media(min-width: 0px)",small:"@media(min-width: 520px)",medium:"@media(min-width: 768px)",large:"@media(min-width: 1080px)"},fontSizes:["1.1rem","1.2rem","1.4rem","1.6rem","1.8rem","3.2rem"],lineHeights:[1.14,1.22,1.25,1.33,1.43,1.45,1.5],fontWeights:{regular:400,semiBold:500,bold:600},transitions:TRANSITIONS,motion:{easings:EASINGS,timings:TIMINGS}},lightColorTokenObject={color:{alternative100:"#f6ecfc",alternative200:"#e0c1f4",alternative500:"#ac73e6",alternative600:"#9736e8",alternative700:"#8312d1",buttonNeutral0:"#ffffff",buttonPrimary500:"#7b79ff",buttonPrimary600:"#4945ff",danger100:"#fcecea",danger200:"#f5c0b8",danger500:"#ee5e52",danger600:"#d02b20",danger700:"#b72b1a",neutral0:"#ffffff",neutral100:"#f6f6f9",neutral1000:"#181826",neutral150:"#eaeaef",neutral200:"#dcdce4",neutral300:"#c0c0cf",neutral400:"#a5a5ba",neutral500:"#8e8ea9",neutral600:"#666687",neutral700:"#4a4a6a",neutral800:"#32324d",neutral900:"#212134",primary100:"#f0f0ff",primary200:"#d9d8ff",primary500:"#7b79ff",primary600:"#4945ff",primary700:"#271fe0",secondary100:"#eaf5ff",secondary200:"#b8e1ff",secondary500:"#66b7f1",secondary600:"#0c75af",secondary700:"#006096",success100:"#eafbe7",success200:"#c6f0c2",success500:"#5cb176",success600:"#328048",success700:"#2f6846",warning100:"#fdf4dc",warning200:"#fae7b9",warning500:"#f29d41",warning600:"#d9822f",warning700:"#be5d01"}},lightShadowTokenObject={shadow:{filterShadow:"0px 1px 4px rgba(33, 33, 52, 0.1)",focus:"inset 2px 0px 0px rgb(39, 31, 224), inset 0px 2px 0px rgb(39, 31, 224), inset -2px 0px 0px rgb(39, 31, 224), inset 0px -2px 0px rgb(39, 31, 224)",focusShadow:"0px 0px 6px rgba(76, 191, 255, 0.75)",popupShadow:"0px 2px 15px rgba(33, 33, 52, 0.1)",tableShadow:"0px 1px 4px rgba(33, 33, 52, 0.1)"}},lightTheme={colors:lightColorTokenObject.color,shadows:lightShadowTokenObject.shadow,...commonTheme};var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},lodash={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */lodash.exports;(function(mr,hr){(function(){var gr,vr="4.17.21",xr=200,Er="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",Cr="Expected a function",wr="Invalid `variable` option passed into `_.template`",Rr="__lodash_hash_undefined__",kr=500,Dr="__lodash_placeholder__",Br=1,Hr=2,Gr=4,qr=1,zr=2,Qr=1,sn=2,hn=4,vn=8,yn=16,gn=32,bn=64,xn=128,$n=256,Sn=512,Cn=30,Rn="...",Bn=800,Fn=16,Hn=1,Gn=2,qn=3,On=1/0,wn=9007199254740991,_n=17976931348623157e292,Tn=NaN,Mn=4294967295,Ln=Mn-1,jn=Mn>>>1,Kn=[["ary",xn],["bind",Qr],["bindKey",sn],["curry",vn],["curryRight",yn],["flip",Sn],["partial",gn],["partialRight",bn],["rearg",$n]],Nn="[object Arguments]",An="[object Array]",kn="[object AsyncFunction]",Dn="[object Boolean]",Vn="[object Date]",zn="[object DOMException]",Xn="[object Error]",Zn="[object Function]",Pi="[object GeneratorFunction]",Ya="[object Map]",Bi="[object Number]",zi="[object Null]",Xi="[object Object]",Ji="[object Promise]",ns="[object Proxy]",ps="[object RegExp]",ls="[object Set]",Li="[object String]",es="[object Symbol]",os="[object Undefined]",ds="[object WeakMap]",Is="[object WeakSet]",ws="[object ArrayBuffer]",Ns="[object DataView]",go="[object Float32Array]",vo="[object Float64Array]",ho="[object Int8Array]",al="[object Int16Array]",ro="[object Int32Array]",ts="[object Uint8Array]",Wi="[object Uint8ClampedArray]",Gi="[object Uint16Array]",fs="[object Uint32Array]",bo=/\b__p \+= '';/g,Bs=/\b(__p \+=) '' \+/g,oo=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Al=/&(?:amp|lt|gt|quot|#39);/g,Cl=/[&<>"']/g,wl=RegExp(Al.source),Go=RegExp(Cl.source),bl=/<%-([\s\S]+?)%>/g,dl=/<%([\s\S]+?)%>/g,Hl=/<%=([\s\S]+?)%>/g,Oo=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ac=/^\w*$/,sc=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Vl=/[\\^$.*+?()[\]{}|]/g,vc=RegExp(Vl.source),Rl=/^\s+/,Ko=/\s/,Wl=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,bc=/\{\n\/\* \[wrapped with (.+)\] \*/,bd=/,? & /,yd=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,xd=/[()=,{}\[\]\/\s]/,Ed=/\\(\\)?/g,$d=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Cu=/\w*$/,_d=/^[-+]0x[0-9a-f]+$/i,Sd=/^0b[01]+$/i,Ad=/^\[object .+?Constructor\]$/,Cd=/^0o[0-7]+$/i,Rd=/^(?:0|[1-9]\d*)$/,Id=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ic=/($^)/,Md=/['\n\r\u2028\u2029\\]/g,Mc="\\ud800-\\udfff",kc="\\u0300-\\u036f",kd="\\ufe20-\\ufe2f",Pd="\\u20d0-\\u20ff",wu=kc+kd+Pd,Ru="\\u2700-\\u27bf",Iu="a-z\\xdf-\\xf6\\xf8-\\xff",Dd="\\xac\\xb1\\xd7\\xf7",Pc="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Mu="\\u2000-\\u206f",ku=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Pu="A-Z\\xc0-\\xd6\\xd8-\\xde",oc="\\ufe0e\\ufe0f",Du=Dd+Pc+Mu+ku,Jc="['’]",Ld="["+Mc+"]",Dc="["+Du+"]",Lc="["+wu+"]",Lu="\\d+",Ou="["+Ru+"]",eu="["+Iu+"]",Fu="[^"+Mc+Du+Lu+Ru+Iu+Pu+"]",tu="\\ud83c[\\udffb-\\udfff]",ru="(?:"+Lc+"|"+tu+")",Nu="[^"+Mc+"]",Oc="(?:\\ud83c[\\udde6-\\uddff]){2}",Fc="[\\ud800-\\udbff][\\udc00-\\udfff]",lc="["+Pu+"]",Nc="\\u200d",ju="(?:"+eu+"|"+Fu+")",Od="(?:"+lc+"|"+Fu+")",Gl="(?:"+Jc+"(?:d|ll|m|re|s|t|ve))?",Bu="(?:"+Jc+"(?:D|LL|M|RE|S|T|VE))?",nu=ru+"?",Uu="["+oc+"]?",jc="(?:"+Nc+"(?:"+[Nu,Oc,Fc].join("|")+")"+Uu+nu+")*",iu="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Fd="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",au=Uu+nu+jc,Hu="(?:"+[Ou,Oc,Fc].join("|")+")"+au,su="(?:"+[Nu+Lc+"?",Lc,Oc,Fc,Ld].join("|")+")",Nd=RegExp(Jc,"g"),jd=RegExp(Lc,"g"),ou=RegExp(tu+"(?="+tu+")|"+su+au,"g"),Pn=RegExp([lc+"?"+eu+"+"+Gl+"(?="+[Dc,lc,"$"].join("|")+")",Od+"+"+Bu+"(?="+[Dc,lc+ju,"$"].join("|")+")",lc+"?"+ju+"+"+Gl,lc+"+"+Bu,Fd,iu,Lu,Hu].join("|"),"g"),Wn=RegExp("["+Nc+Mc+wu+oc+"]"),Jn=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ai=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ii=-1,_i={};_i[go]=_i[vo]=_i[ho]=_i[al]=_i[ro]=_i[ts]=_i[Wi]=_i[Gi]=_i[fs]=!0,_i[Nn]=_i[An]=_i[ws]=_i[Dn]=_i[Ns]=_i[Vn]=_i[Xn]=_i[Zn]=_i[Ya]=_i[Bi]=_i[Xi]=_i[ps]=_i[ls]=_i[Li]=_i[ds]=!1;var Mi={};Mi[Nn]=Mi[An]=Mi[ws]=Mi[Ns]=Mi[Dn]=Mi[Vn]=Mi[go]=Mi[vo]=Mi[ho]=Mi[al]=Mi[ro]=Mi[Ya]=Mi[Bi]=Mi[Xi]=Mi[ps]=Mi[ls]=Mi[Li]=Mi[es]=Mi[ts]=Mi[Wi]=Mi[Gi]=Mi[fs]=!0,Mi[Xn]=Mi[Zn]=Mi[ds]=!1;var Fi={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},$i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Hi={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Ni={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Za=parseFloat,Xa=parseInt,za=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,hs=typeof self=="object"&&self&&self.Object===Object&&self,rs=za||hs||Function("return this")(),cs=hr&&!hr.nodeType&&hr,Os=cs&&!0&&mr&&!mr.nodeType&&mr,Ss=Os&&Os.exports===cs,Ts=Ss&&za.process,$s=function(){try{var Vi=Os&&Os.require&&Os.require("util").types;return Vi||Ts&&Ts.binding&&Ts.binding("util")}catch{}}(),bs=$s&&$s.isArrayBuffer,Ds=$s&&$s.isDate,Ms=$s&&$s.isMap,no=$s&&$s.isRegExp,Js=$s&&$s.isSet,io=$s&&$s.isTypedArray;function Ks(Vi,Qa,Qi){switch(Qi.length){case 0:return Vi.call(Qa);case 1:return Vi.call(Qa,Qi[0]);case 2:return Vi.call(Qa,Qi[0],Qi[1]);case 3:return Vi.call(Qa,Qi[0],Qi[1],Qi[2])}return Vi.apply(Qa,Qi)}function fo(Vi,Qa,Qi,Es){for(var js=-1,_o=Vi==null?0:Vi.length;++js<_o;){var Bo=Vi[js];Qa(Es,Bo,Qi(Bo),Vi)}return Es}function po(Vi,Qa){for(var Qi=-1,Es=Vi==null?0:Vi.length;++Qi<Es&&Qa(Vi[Qi],Qi,Vi)!==!1;);return Vi}function wo(Vi,Qa){for(var Qi=Vi==null?0:Vi.length;Qi--&&Qa(Vi[Qi],Qi,Vi)!==!1;);return Vi}function ko(Vi,Qa){for(var Qi=-1,Es=Vi==null?0:Vi.length;++Qi<Es;)if(!Qa(Vi[Qi],Qi,Vi))return!1;return!0}function Eo(Vi,Qa){for(var Qi=-1,Es=Vi==null?0:Vi.length,js=0,_o=[];++Qi<Es;){var Bo=Vi[Qi];Qa(Bo,Qi,Vi)&&(_o[js++]=Bo)}return _o}function Ro(Vi,Qa){var Qi=Vi==null?0:Vi.length;return!!Qi&&ys(Vi,Qa,0)>-1}function Io(Vi,Qa,Qi){for(var Es=-1,js=Vi==null?0:Vi.length;++Es<js;)if(Qi(Qa,Vi[Es]))return!0;return!1}function qs(Vi,Qa){for(var Qi=-1,Es=Vi==null?0:Vi.length,js=Array(Es);++Qi<Es;)js[Qi]=Qa(Vi[Qi],Qi,Vi);return js}function Mo(Vi,Qa){for(var Qi=-1,Es=Qa.length,js=Vi.length;++Qi<Es;)Vi[js+Qi]=Qa[Qi];return Vi}function sl(Vi,Qa,Qi,Es){var js=-1,_o=Vi==null?0:Vi.length;for(Es&&_o&&(Qi=Vi[++js]);++js<_o;)Qi=Qa(Qi,Vi[js],js,Vi);return Qi}function hl(Vi,Qa,Qi,Es){var js=Vi==null?0:Vi.length;for(Es&&js&&(Qi=Vi[--js]);js--;)Qi=Qa(Qi,Vi[js],js,Vi);return Qi}function Po(Vi,Qa){for(var Qi=-1,Es=Vi==null?0:Vi.length;++Qi<Es;)if(Qa(Vi[Qi],Qi,Vi))return!0;return!1}var Yo=_s("length");function Il(Vi){return Vi.split("")}function Ps(Vi){return Vi.match(yd)||[]}function As(Vi,Qa,Qi){var Es;return Qi(Vi,function(js,_o,Bo){if(Qa(js,_o,Bo))return Es=_o,!1}),Es}function vs(Vi,Qa,Qi,Es){for(var js=Vi.length,_o=Qi+(Es?1:-1);Es?_o--:++_o<js;)if(Qa(Vi[_o],_o,Vi))return _o;return-1}function ys(Vi,Qa,Qi){return Qa===Qa?Ud(Vi,Qa,Qi):vs(Vi,Ls,Qi)}function xs(Vi,Qa,Qi,Es){for(var js=Qi-1,_o=Vi.length;++js<_o;)if(Es(Vi[js],Qa))return js;return-1}function Ls(Vi){return Vi!==Vi}function Fs(Vi,Qa){var Qi=Vi==null?0:Vi.length;return Qi?So(Vi,Qa)/Qi:Tn}function _s(Vi){return function(Qa){return Qa==null?gr:Qa[Vi]}}function ms(Vi){return function(Qa){return Vi==null?gr:Vi[Qa]}}function Us(Vi,Qa,Qi,Es,js){return js(Vi,function(_o,Bo,To){Qi=Es?(Es=!1,_o):Qa(Qi,_o,Bo,To)}),Qi}function zs(Vi,Qa){var Qi=Vi.length;for(Vi.sort(Qa);Qi--;)Vi[Qi]=Vi[Qi].value;return Vi}function So(Vi,Qa){for(var Qi,Es=-1,js=Vi.length;++Es<js;){var _o=Qa(Vi[Es]);_o!==gr&&(Qi=Qi===gr?_o:Qi+_o)}return Qi}function yo(Vi,Qa){for(var Qi=-1,Es=Array(Vi);++Qi<Vi;)Es[Qi]=Qa(Qi);return Es}function Vo(Vi,Qa){return qs(Qa,function(Qi){return[Qi,Vi[Qi]]})}function Xo(Vi){return Vi&&Vi.slice(0,lu(Vi)+1).replace(Rl,"")}function Rs(Vi){return function(Qa){return Vi(Qa)}}function Fo(Vi,Qa){return qs(Qa,function(Qi){return Vi[Qi]})}function xo(Vi,Qa){return Vi.has(Qa)}function Ao(Vi,Qa){for(var Qi=-1,Es=Vi.length;++Qi<Es&&ys(Qa,Vi[Qi],0)>-1;);return Qi}function Do(Vi,Qa){for(var Qi=Vi.length;Qi--&&ys(Qa,Vi[Qi],0)>-1;);return Qi}function $o(Vi,Qa){for(var Qi=Vi.length,Es=0;Qi--;)Vi[Qi]===Qa&&++Es;return Es}var Ol=ms(Fi),cc=ms($i);function Bc(Vi){return"\\"+Ni[Vi]}function ql(Vi,Qa){return Vi==null?gr:Vi[Qa]}function yl(Vi){return Wn.test(Vi)}function Bd(Vi){return Jn.test(Vi)}function Jo(Vi){for(var Qa,Qi=[];!(Qa=Vi.next()).done;)Qi.push(Qa.value);return Qi}function Uc(Vi){var Qa=-1,Qi=Array(Vi.size);return Vi.forEach(function(Es,js){Qi[++Qa]=[js,Es]}),Qi}function Vu(Vi,Qa){return function(Qi){return Vi(Qa(Qi))}}function ao(Vi,Qa){for(var Qi=-1,Es=Vi.length,js=0,_o=[];++Qi<Es;){var Bo=Vi[Qi];(Bo===Qa||Bo===Dr)&&(Vi[Qi]=Dr,_o[js++]=Qi)}return _o}function Hc(Vi){var Qa=-1,Qi=Array(Vi.size);return Vi.forEach(function(Es){Qi[++Qa]=Es}),Qi}function Fl(Vi){var Qa=-1,Qi=Array(Vi.size);return Vi.forEach(function(Es){Qi[++Qa]=[Es,Es]}),Qi}function Ud(Vi,Qa,Qi){for(var Es=Qi-1,js=Vi.length;++Es<js;)if(Vi[Es]===Qa)return Es;return-1}function Hd(Vi,Qa,Qi){for(var Es=Qi+1;Es--;)if(Vi[Es]===Qa)return Es;return Es}function uc(Vi){return yl(Vi)?Wd(Vi):Yo(Vi)}function el(Vi){return yl(Vi)?Gd(Vi):Il(Vi)}function lu(Vi){for(var Qa=Vi.length;Qa--&&Ko.test(Vi.charAt(Qa)););return Qa}var Vd=ms(Hi);function Wd(Vi){for(var Qa=ou.lastIndex=0;ou.test(Vi);)++Qa;return Qa}function Gd(Vi){return Vi.match(ou)||[]}function Nl(Vi){return Vi.match(Pn)||[]}var qd=function Vi(Qa){Qa=Qa==null?rs:Kl.defaults(rs.Object(),Qa,Kl.pick(rs,ai));var Qi=Qa.Array,Es=Qa.Date,js=Qa.Error,_o=Qa.Function,Bo=Qa.Math,To=Qa.Object,yc=Qa.RegExp,cu=Qa.String,tl=Qa.TypeError,Vc=Qi.prototype,uu=_o.prototype,dc=To.prototype,Wc=Qa["__core-js_shared__"],xc=uu.toString,Zi=dc.hasOwnProperty,Hs=0,Ys=function(){var Jr=/[^.]+$/.exec(Wc&&Wc.keys&&Wc.keys.IE_PROTO||"");return Jr?"Symbol(src)_1."+Jr:""}(),so=dc.toString,co=xc.call(To),Qs=rs._,No=yc("^"+xc.call(Zi).replace(Vl,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),fl=Ss?Qa.Buffer:gr,xl=Qa.Symbol,zl=Qa.Uint8Array,Ml=fl?fl.allocUnsafe:gr,Yl=Vu(To.getPrototypeOf,To),du=To.create,Ec=dc.propertyIsEnumerable,kl=Vc.splice,Vh=xl?xl.isConcatSpreadable:gr,hu=xl?xl.iterator:gr,$c=xl?xl.toStringTag:gr,Wu=function(){try{var Jr=Cc(To,"defineProperty");return Jr({},"",{}),Jr}catch{}}(),kp=Qa.clearTimeout!==rs.clearTimeout&&Qa.clearTimeout,Pp=Es&&Es.now!==rs.Date.now&&Es.now,Dp=Qa.setTimeout!==rs.setTimeout&&Qa.setTimeout,Gu=Bo.ceil,qu=Bo.floor,Kd=To.getOwnPropertySymbols,Lp=fl?fl.isBuffer:gr,Wh=Qa.isFinite,Op=Vc.join,Fp=Vu(To.keys,To),Wo=Bo.max,Qo=Bo.min,Np=Es.now,jp=Qa.parseInt,Gh=Bo.random,Bp=Vc.reverse,zd=Cc(Qa,"DataView"),fu=Cc(Qa,"Map"),Yd=Cc(Qa,"Promise"),Gc=Cc(Qa,"Set"),pu=Cc(Qa,"WeakMap"),mu=Cc(To,"create"),Ku=pu&&new pu,qc={},Up=wc(zd),Hp=wc(fu),Vp=wc(Yd),Wp=wc(Gc),Gp=wc(pu),zu=xl?xl.prototype:gr,gu=zu?zu.valueOf:gr,qh=zu?zu.toString:gr;function Yn(Jr){if(jo(Jr)&&!Xs(Jr)&&!(Jr instanceof uo)){if(Jr instanceof El)return Jr;if(Zi.call(Jr,"__wrapped__"))return zf(Jr)}return new El(Jr)}var Kc=function(){function Jr(){}return function(mn){if(!Lo(mn))return{};if(du)return du(mn);Jr.prototype=mn;var En=new Jr;return Jr.prototype=gr,En}}();function Yu(){}function El(Jr,mn){this.__wrapped__=Jr,this.__actions__=[],this.__chain__=!!mn,this.__index__=0,this.__values__=gr}Yn.templateSettings={escape:bl,evaluate:dl,interpolate:Hl,variable:"",imports:{_:Yn}},Yn.prototype=Yu.prototype,Yn.prototype.constructor=Yn,El.prototype=Kc(Yu.prototype),El.prototype.constructor=El;function uo(Jr){this.__wrapped__=Jr,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Mn,this.__views__=[]}function qp(){var Jr=new uo(this.__wrapped__);return Jr.__actions__=ol(this.__actions__),Jr.__dir__=this.__dir__,Jr.__filtered__=this.__filtered__,Jr.__iteratees__=ol(this.__iteratees__),Jr.__takeCount__=this.__takeCount__,Jr.__views__=ol(this.__views__),Jr}function Kp(){if(this.__filtered__){var Jr=new uo(this);Jr.__dir__=-1,Jr.__filtered__=!0}else Jr=this.clone(),Jr.__dir__*=-1;return Jr}function zp(){var Jr=this.__wrapped__.value(),mn=this.__dir__,En=Xs(Jr),In=mn<0,Un=En?Jr.length:0,Qn=og(0,Un,this.__views__),Ci=Qn.start,Oi=Qn.end,Ki=Oi-Ci,as=In?Oi:Ci-1,ss=this.__iteratees__,us=ss.length,gs=0,ks=Qo(Ki,this.__takeCount__);if(!En||!In&&Un==Ki&&ks==Ki)return vf(Jr,this.__actions__);var Ws=[];e:for(;Ki--&&gs<ks;){as+=mn;for(var eo=-1,Gs=Jr[as];++eo<us;){var lo=ss[eo],mo=lo.iteratee,gl=lo.type,il=mo(Gs);if(gl==Gn)Gs=il;else if(!il){if(gl==Hn)continue e;break e}}Ws[gs++]=Gs}return Ws}uo.prototype=Kc(Yu.prototype),uo.prototype.constructor=uo;function _c(Jr){var mn=-1,En=Jr==null?0:Jr.length;for(this.clear();++mn<En;){var In=Jr[mn];this.set(In[0],In[1])}}function Yp(){this.__data__=mu?mu(null):{},this.size=0}function Xp(Jr){var mn=this.has(Jr)&&delete this.__data__[Jr];return this.size-=mn?1:0,mn}function Qp(Jr){var mn=this.__data__;if(mu){var En=mn[Jr];return En===Rr?gr:En}return Zi.call(mn,Jr)?mn[Jr]:gr}function Zp(Jr){var mn=this.__data__;return mu?mn[Jr]!==gr:Zi.call(mn,Jr)}function Jp(Jr,mn){var En=this.__data__;return this.size+=this.has(Jr)?0:1,En[Jr]=mu&&mn===gr?Rr:mn,this}_c.prototype.clear=Yp,_c.prototype.delete=Xp,_c.prototype.get=Qp,_c.prototype.has=Zp,_c.prototype.set=Jp;function Xl(Jr){var mn=-1,En=Jr==null?0:Jr.length;for(this.clear();++mn<En;){var In=Jr[mn];this.set(In[0],In[1])}}function em(){this.__data__=[],this.size=0}function tm(Jr){var mn=this.__data__,En=Xu(mn,Jr);if(En<0)return!1;var In=mn.length-1;return En==In?mn.pop():kl.call(mn,En,1),--this.size,!0}function nm(Jr){var mn=this.__data__,En=Xu(mn,Jr);return En<0?gr:mn[En][1]}function im(Jr){return Xu(this.__data__,Jr)>-1}function am(Jr,mn){var En=this.__data__,In=Xu(En,Jr);return In<0?(++this.size,En.push([Jr,mn])):En[In][1]=mn,this}Xl.prototype.clear=em,Xl.prototype.delete=tm,Xl.prototype.get=nm,Xl.prototype.has=im,Xl.prototype.set=am;function Ql(Jr){var mn=-1,En=Jr==null?0:Jr.length;for(this.clear();++mn<En;){var In=Jr[mn];this.set(In[0],In[1])}}function sm(){this.size=0,this.__data__={hash:new _c,map:new(fu||Xl),string:new _c}}function om(Jr){var mn=ld(this,Jr).delete(Jr);return this.size-=mn?1:0,mn}function lm(Jr){return ld(this,Jr).get(Jr)}function cm(Jr){return ld(this,Jr).has(Jr)}function um(Jr,mn){var En=ld(this,Jr),In=En.size;return En.set(Jr,mn),this.size+=En.size==In?0:1,this}Ql.prototype.clear=sm,Ql.prototype.delete=om,Ql.prototype.get=lm,Ql.prototype.has=cm,Ql.prototype.set=um;function Sc(Jr){var mn=-1,En=Jr==null?0:Jr.length;for(this.__data__=new Ql;++mn<En;)this.add(Jr[mn])}function dm(Jr){return this.__data__.set(Jr,Rr),this}function hm(Jr){return this.__data__.has(Jr)}Sc.prototype.add=Sc.prototype.push=dm,Sc.prototype.has=hm;function Pl(Jr){var mn=this.__data__=new Xl(Jr);this.size=mn.size}function fm(){this.__data__=new Xl,this.size=0}function pm(Jr){var mn=this.__data__,En=mn.delete(Jr);return this.size=mn.size,En}function mm(Jr){return this.__data__.get(Jr)}function gm(Jr){return this.__data__.has(Jr)}function vm(Jr,mn){var En=this.__data__;if(En instanceof Xl){var In=En.__data__;if(!fu||In.length<xr-1)return In.push([Jr,mn]),this.size=++En.size,this;En=this.__data__=new Ql(In)}return En.set(Jr,mn),this.size=En.size,this}Pl.prototype.clear=fm,Pl.prototype.delete=pm,Pl.prototype.get=mm,Pl.prototype.has=gm,Pl.prototype.set=vm;function Kh(Jr,mn){var En=Xs(Jr),In=!En&&Rc(Jr),Un=!En&&!In&&gc(Jr),Qn=!En&&!In&&!Un&&Qc(Jr),Ci=En||In||Un||Qn,Oi=Ci?yo(Jr.length,cu):[],Ki=Oi.length;for(var as in Jr)(mn||Zi.call(Jr,as))&&!(Ci&&(as=="length"||Un&&(as=="offset"||as=="parent")||Qn&&(as=="buffer"||as=="byteLength"||as=="byteOffset")||tc(as,Ki)))&&Oi.push(as);return Oi}function zh(Jr){var mn=Jr.length;return mn?Jr[sh(0,mn-1)]:gr}function bm(Jr,mn){return cd(ol(Jr),Tc(mn,0,Jr.length))}function ym(Jr){return cd(ol(Jr))}function Xd(Jr,mn,En){(En!==gr&&!Dl(Jr[mn],En)||En===gr&&!(mn in Jr))&&Zl(Jr,mn,En)}function vu(Jr,mn,En){var In=Jr[mn];(!(Zi.call(Jr,mn)&&Dl(In,En))||En===gr&&!(mn in Jr))&&Zl(Jr,mn,En)}function Xu(Jr,mn){for(var En=Jr.length;En--;)if(Dl(Jr[En][0],mn))return En;return-1}function xm(Jr,mn,En,In){return hc(Jr,function(Un,Qn,Ci){mn(In,Un,En(Un),Ci)}),In}function Yh(Jr,mn){return Jr&&Bl(mn,qo(mn),Jr)}function Em(Jr,mn){return Jr&&Bl(mn,cl(mn),Jr)}function Zl(Jr,mn,En){mn=="__proto__"&&Wu?Wu(Jr,mn,{configurable:!0,enumerable:!0,value:En,writable:!0}):Jr[mn]=En}function Qd(Jr,mn){for(var En=-1,In=mn.length,Un=Qi(In),Qn=Jr==null;++En<In;)Un[En]=Qn?gr:kh(Jr,mn[En]);return Un}function Tc(Jr,mn,En){return Jr===Jr&&(En!==gr&&(Jr=Jr<=En?Jr:En),mn!==gr&&(Jr=Jr>=mn?Jr:mn)),Jr}function $l(Jr,mn,En,In,Un,Qn){var Ci,Oi=mn&Br,Ki=mn&Hr,as=mn&Gr;if(En&&(Ci=Un?En(Jr,In,Un,Qn):En(Jr)),Ci!==gr)return Ci;if(!Lo(Jr))return Jr;var ss=Xs(Jr);if(ss){if(Ci=cg(Jr),!Oi)return ol(Jr,Ci)}else{var us=Zo(Jr),gs=us==Zn||us==Pi;if(gc(Jr))return xf(Jr,Oi);if(us==Xi||us==Nn||gs&&!Un){if(Ci=Ki||gs?{}:jf(Jr),!Oi)return Ki?Zm(Jr,Em(Ci,Jr)):Qm(Jr,Yh(Ci,Jr))}else{if(!Mi[us])return Un?Jr:{};Ci=ug(Jr,us,Oi)}}Qn||(Qn=new Pl);var ks=Qn.get(Jr);if(ks)return ks;Qn.set(Jr,Ci),pp(Jr)?Jr.forEach(function(Gs){Ci.add($l(Gs,mn,En,Gs,Jr,Qn))}):hp(Jr)&&Jr.forEach(function(Gs,lo){Ci.set(lo,$l(Gs,mn,En,lo,Jr,Qn))});var Ws=as?Ki?vh:gh:Ki?cl:qo,eo=ss?gr:Ws(Jr);return po(eo||Jr,function(Gs,lo){eo&&(lo=Gs,Gs=Jr[lo]),vu(Ci,lo,$l(Gs,mn,En,lo,Jr,Qn))}),Ci}function $m(Jr){var mn=qo(Jr);return function(En){return Xh(En,Jr,mn)}}function Xh(Jr,mn,En){var In=En.length;if(Jr==null)return!In;for(Jr=To(Jr);In--;){var Un=En[In],Qn=mn[Un],Ci=Jr[Un];if(Ci===gr&&!(Un in Jr)||!Qn(Ci))return!1}return!0}function Qh(Jr,mn,En){if(typeof Jr!="function")throw new tl(Cr);return Su(function(){Jr.apply(gr,En)},mn)}function bu(Jr,mn,En,In){var Un=-1,Qn=Ro,Ci=!0,Oi=Jr.length,Ki=[],as=mn.length;if(!Oi)return Ki;En&&(mn=qs(mn,Rs(En))),In?(Qn=Io,Ci=!1):mn.length>=xr&&(Qn=xo,Ci=!1,mn=new Sc(mn));e:for(;++Un<Oi;){var ss=Jr[Un],us=En==null?ss:En(ss);if(ss=In||ss!==0?ss:0,Ci&&us===us){for(var gs=as;gs--;)if(mn[gs]===us)continue e;Ki.push(ss)}else Qn(mn,us,In)||Ki.push(ss)}return Ki}var hc=Tf(jl),Zh=Tf(Jd,!0);function _m(Jr,mn){var En=!0;return hc(Jr,function(In,Un,Qn){return En=!!mn(In,Un,Qn),En}),En}function Qu(Jr,mn,En){for(var In=-1,Un=Jr.length;++In<Un;){var Qn=Jr[In],Ci=mn(Qn);if(Ci!=null&&(Oi===gr?Ci===Ci&&!ml(Ci):En(Ci,Oi)))var Oi=Ci,Ki=Qn}return Ki}function Sm(Jr,mn,En,In){var Un=Jr.length;for(En=Zs(En),En<0&&(En=-En>Un?0:Un+En),In=In===gr||In>Un?Un:Zs(In),In<0&&(In+=Un),In=En>In?0:gp(In);En<In;)Jr[En++]=mn;return Jr}function Jh(Jr,mn){var En=[];return hc(Jr,function(In,Un,Qn){mn(In,Un,Qn)&&En.push(In)}),En}function zo(Jr,mn,En,In,Un){var Qn=-1,Ci=Jr.length;for(En||(En=hg),Un||(Un=[]);++Qn<Ci;){var Oi=Jr[Qn];mn>0&&En(Oi)?mn>1?zo(Oi,mn-1,En,In,Un):Mo(Un,Oi):In||(Un[Un.length]=Oi)}return Un}var Zd=Af(),ef=Af(!0);function jl(Jr,mn){return Jr&&Zd(Jr,mn,qo)}function Jd(Jr,mn){return Jr&&ef(Jr,mn,qo)}function Zu(Jr,mn){return Eo(mn,function(En){return rc(Jr[En])})}function Ac(Jr,mn){mn=pc(mn,Jr);for(var En=0,In=mn.length;Jr!=null&&En<In;)Jr=Jr[Ul(mn[En++])];return En&&En==In?Jr:gr}function tf(Jr,mn,En){var In=mn(Jr);return Xs(Jr)?In:Mo(In,En(Jr))}function rl(Jr){return Jr==null?Jr===gr?os:zi:$c&&$c in To(Jr)?sg(Jr):yg(Jr)}function eh(Jr,mn){return Jr>mn}function Tm(Jr,mn){return Jr!=null&&Zi.call(Jr,mn)}function Am(Jr,mn){return Jr!=null&&mn in To(Jr)}function Cm(Jr,mn,En){return Jr>=Qo(mn,En)&&Jr<Wo(mn,En)}function th(Jr,mn,En){for(var In=En?Io:Ro,Un=Jr[0].length,Qn=Jr.length,Ci=Qn,Oi=Qi(Qn),Ki=1/0,as=[];Ci--;){var ss=Jr[Ci];Ci&&mn&&(ss=qs(ss,Rs(mn))),Ki=Qo(ss.length,Ki),Oi[Ci]=!En&&(mn||Un>=120&&ss.length>=120)?new Sc(Ci&&ss):gr}ss=Jr[0];var us=-1,gs=Oi[0];e:for(;++us<Un&&as.length<Ki;){var ks=ss[us],Ws=mn?mn(ks):ks;if(ks=En||ks!==0?ks:0,!(gs?xo(gs,Ws):In(as,Ws,En))){for(Ci=Qn;--Ci;){var eo=Oi[Ci];if(!(eo?xo(eo,Ws):In(Jr[Ci],Ws,En)))continue e}gs&&gs.push(Ws),as.push(ks)}}return as}function wm(Jr,mn,En,In){return jl(Jr,function(Un,Qn,Ci){mn(In,En(Un),Qn,Ci)}),In}function yu(Jr,mn,En){mn=pc(mn,Jr),Jr=Vf(Jr,mn);var In=Jr==null?Jr:Jr[Ul(Sl(mn))];return In==null?gr:Ks(In,Jr,En)}function rf(Jr){return jo(Jr)&&rl(Jr)==Nn}function Rm(Jr){return jo(Jr)&&rl(Jr)==ws}function Im(Jr){return jo(Jr)&&rl(Jr)==Vn}function xu(Jr,mn,En,In,Un){return Jr===mn?!0:Jr==null||mn==null||!jo(Jr)&&!jo(mn)?Jr!==Jr&&mn!==mn:Mm(Jr,mn,En,In,xu,Un)}function Mm(Jr,mn,En,In,Un,Qn){var Ci=Xs(Jr),Oi=Xs(mn),Ki=Ci?An:Zo(Jr),as=Oi?An:Zo(mn);Ki=Ki==Nn?Xi:Ki,as=as==Nn?Xi:as;var ss=Ki==Xi,us=as==Xi,gs=Ki==as;if(gs&&gc(Jr)){if(!gc(mn))return!1;Ci=!0,ss=!1}if(gs&&!ss)return Qn||(Qn=new Pl),Ci||Qc(Jr)?Of(Jr,mn,En,In,Un,Qn):ig(Jr,mn,Ki,En,In,Un,Qn);if(!(En&qr)){var ks=ss&&Zi.call(Jr,"__wrapped__"),Ws=us&&Zi.call(mn,"__wrapped__");if(ks||Ws){var eo=ks?Jr.value():Jr,Gs=Ws?mn.value():mn;return Qn||(Qn=new Pl),Un(eo,Gs,En,In,Qn)}}return gs?(Qn||(Qn=new Pl),ag(Jr,mn,En,In,Un,Qn)):!1}function km(Jr){return jo(Jr)&&Zo(Jr)==Ya}function rh(Jr,mn,En,In){var Un=En.length,Qn=Un,Ci=!In;if(Jr==null)return!Qn;for(Jr=To(Jr);Un--;){var Oi=En[Un];if(Ci&&Oi[2]?Oi[1]!==Jr[Oi[0]]:!(Oi[0]in Jr))return!1}for(;++Un<Qn;){Oi=En[Un];var Ki=Oi[0],as=Jr[Ki],ss=Oi[1];if(Ci&&Oi[2]){if(as===gr&&!(Ki in Jr))return!1}else{var us=new Pl;if(In)var gs=In(as,ss,Ki,Jr,mn,us);if(!(gs===gr?xu(ss,as,qr|zr,In,us):gs))return!1}}return!0}function nf(Jr){if(!Lo(Jr)||pg(Jr))return!1;var mn=rc(Jr)?No:Ad;return mn.test(wc(Jr))}function Pm(Jr){return jo(Jr)&&rl(Jr)==ps}function Dm(Jr){return jo(Jr)&&Zo(Jr)==ls}function Lm(Jr){return jo(Jr)&&md(Jr.length)&&!!_i[rl(Jr)]}function af(Jr){return typeof Jr=="function"?Jr:Jr==null?ul:typeof Jr=="object"?Xs(Jr)?lf(Jr[0],Jr[1]):of(Jr):Cp(Jr)}function nh(Jr){if(!_u(Jr))return Fp(Jr);var mn=[];for(var En in To(Jr))Zi.call(Jr,En)&&En!="constructor"&&mn.push(En);return mn}function Om(Jr){if(!Lo(Jr))return bg(Jr);var mn=_u(Jr),En=[];for(var In in Jr)In=="constructor"&&(mn||!Zi.call(Jr,In))||En.push(In);return En}function ih(Jr,mn){return Jr<mn}function sf(Jr,mn){var En=-1,In=ll(Jr)?Qi(Jr.length):[];return hc(Jr,function(Un,Qn,Ci){In[++En]=mn(Un,Qn,Ci)}),In}function of(Jr){var mn=yh(Jr);return mn.length==1&&mn[0][2]?Uf(mn[0][0],mn[0][1]):function(En){return En===Jr||rh(En,Jr,mn)}}function lf(Jr,mn){return Eh(Jr)&&Bf(mn)?Uf(Ul(Jr),mn):function(En){var In=kh(En,Jr);return In===gr&&In===mn?Ph(En,Jr):xu(mn,In,qr|zr)}}function Ju(Jr,mn,En,In,Un){Jr!==mn&&Zd(mn,function(Qn,Ci){if(Un||(Un=new Pl),Lo(Qn))Fm(Jr,mn,Ci,En,Ju,In,Un);else{var Oi=In?In(_h(Jr,Ci),Qn,Ci+"",Jr,mn,Un):gr;Oi===gr&&(Oi=Qn),Xd(Jr,Ci,Oi)}},cl)}function Fm(Jr,mn,En,In,Un,Qn,Ci){var Oi=_h(Jr,En),Ki=_h(mn,En),as=Ci.get(Ki);if(as){Xd(Jr,En,as);return}var ss=Qn?Qn(Oi,Ki,En+"",Jr,mn,Ci):gr,us=ss===gr;if(us){var gs=Xs(Ki),ks=!gs&&gc(Ki),Ws=!gs&&!ks&&Qc(Ki);ss=Ki,gs||ks||Ws?Xs(Oi)?ss=Oi:Uo(Oi)?ss=ol(Oi):ks?(us=!1,ss=xf(Ki,!0)):Ws?(us=!1,ss=Ef(Ki,!0)):ss=[]:Tu(Ki)||Rc(Ki)?(ss=Oi,Rc(Oi)?ss=vp(Oi):(!Lo(Oi)||rc(Oi))&&(ss=jf(Ki))):us=!1}us&&(Ci.set(Ki,ss),Un(ss,Ki,In,Qn,Ci),Ci.delete(Ki)),Xd(Jr,En,ss)}function cf(Jr,mn){var En=Jr.length;if(En)return mn+=mn<0?En:0,tc(mn,En)?Jr[mn]:gr}function uf(Jr,mn,En){mn.length?mn=qs(mn,function(Qn){return Xs(Qn)?function(Ci){return Ac(Ci,Qn.length===1?Qn[0]:Qn)}:Qn}):mn=[ul];var In=-1;mn=qs(mn,Rs(Vs()));var Un=sf(Jr,function(Qn,Ci,Oi){var Ki=qs(mn,function(as){return as(Qn)});return{criteria:Ki,index:++In,value:Qn}});return zs(Un,function(Qn,Ci){return Xm(Qn,Ci,En)})}function Nm(Jr,mn){return df(Jr,mn,function(En,In){return Ph(Jr,In)})}function df(Jr,mn,En){for(var In=-1,Un=mn.length,Qn={};++In<Un;){var Ci=mn[In],Oi=Ac(Jr,Ci);En(Oi,Ci)&&Eu(Qn,pc(Ci,Jr),Oi)}return Qn}function jm(Jr){return function(mn){return Ac(mn,Jr)}}function ah(Jr,mn,En,In){var Un=In?xs:ys,Qn=-1,Ci=mn.length,Oi=Jr;for(Jr===mn&&(mn=ol(mn)),En&&(Oi=qs(Jr,Rs(En)));++Qn<Ci;)for(var Ki=0,as=mn[Qn],ss=En?En(as):as;(Ki=Un(Oi,ss,Ki,In))>-1;)Oi!==Jr&&kl.call(Oi,Ki,1),kl.call(Jr,Ki,1);return Jr}function hf(Jr,mn){for(var En=Jr?mn.length:0,In=En-1;En--;){var Un=mn[En];if(En==In||Un!==Qn){var Qn=Un;tc(Un)?kl.call(Jr,Un,1):ch(Jr,Un)}}return Jr}function sh(Jr,mn){return Jr+qu(Gh()*(mn-Jr+1))}function Bm(Jr,mn,En,In){for(var Un=-1,Qn=Wo(Gu((mn-Jr)/(En||1)),0),Ci=Qi(Qn);Qn--;)Ci[In?Qn:++Un]=Jr,Jr+=En;return Ci}function oh(Jr,mn){var En="";if(!Jr||mn<1||mn>wn)return En;do mn%2&&(En+=Jr),mn=qu(mn/2),mn&&(Jr+=Jr);while(mn);return En}function to(Jr,mn){return Sh(Hf(Jr,mn,ul),Jr+"")}function Um(Jr){return zh(Zc(Jr))}function Hm(Jr,mn){var En=Zc(Jr);return cd(En,Tc(mn,0,En.length))}function Eu(Jr,mn,En,In){if(!Lo(Jr))return Jr;mn=pc(mn,Jr);for(var Un=-1,Qn=mn.length,Ci=Qn-1,Oi=Jr;Oi!=null&&++Un<Qn;){var Ki=Ul(mn[Un]),as=En;if(Ki==="__proto__"||Ki==="constructor"||Ki==="prototype")return Jr;if(Un!=Ci){var ss=Oi[Ki];as=In?In(ss,Ki,Oi):gr,as===gr&&(as=Lo(ss)?ss:tc(mn[Un+1])?[]:{})}vu(Oi,Ki,as),Oi=Oi[Ki]}return Jr}var ff=Ku?function(Jr,mn){return Ku.set(Jr,mn),Jr}:ul,Vm=Wu?function(Jr,mn){return Wu(Jr,"toString",{configurable:!0,enumerable:!1,value:Lh(mn),writable:!0})}:ul;function Wm(Jr){return cd(Zc(Jr))}function _l(Jr,mn,En){var In=-1,Un=Jr.length;mn<0&&(mn=-mn>Un?0:Un+mn),En=En>Un?Un:En,En<0&&(En+=Un),Un=mn>En?0:En-mn>>>0,mn>>>=0;for(var Qn=Qi(Un);++In<Un;)Qn[In]=Jr[In+mn];return Qn}function Gm(Jr,mn){var En;return hc(Jr,function(In,Un,Qn){return En=mn(In,Un,Qn),!En}),!!En}function ed(Jr,mn,En){var In=0,Un=Jr==null?In:Jr.length;if(typeof mn=="number"&&mn===mn&&Un<=jn){for(;In<Un;){var Qn=In+Un>>>1,Ci=Jr[Qn];Ci!==null&&!ml(Ci)&&(En?Ci<=mn:Ci<mn)?In=Qn+1:Un=Qn}return Un}return lh(Jr,mn,ul,En)}function lh(Jr,mn,En,In){var Un=0,Qn=Jr==null?0:Jr.length;if(Qn===0)return 0;mn=En(mn);for(var Ci=mn!==mn,Oi=mn===null,Ki=ml(mn),as=mn===gr;Un<Qn;){var ss=qu((Un+Qn)/2),us=En(Jr[ss]),gs=us!==gr,ks=us===null,Ws=us===us,eo=ml(us);if(Ci)var Gs=In||Ws;else as?Gs=Ws&&(In||gs):Oi?Gs=Ws&&gs&&(In||!ks):Ki?Gs=Ws&&gs&&!ks&&(In||!eo):ks||eo?Gs=!1:Gs=In?us<=mn:us<mn;Gs?Un=ss+1:Qn=ss}return Qo(Qn,Ln)}function pf(Jr,mn){for(var En=-1,In=Jr.length,Un=0,Qn=[];++En<In;){var Ci=Jr[En],Oi=mn?mn(Ci):Ci;if(!En||!Dl(Oi,Ki)){var Ki=Oi;Qn[Un++]=Ci===0?0:Ci}}return Qn}function mf(Jr){return typeof Jr=="number"?Jr:ml(Jr)?Tn:+Jr}function pl(Jr){if(typeof Jr=="string")return Jr;if(Xs(Jr))return qs(Jr,pl)+"";if(ml(Jr))return qh?qh.call(Jr):"";var mn=Jr+"";return mn=="0"&&1/Jr==-On?"-0":mn}function fc(Jr,mn,En){var In=-1,Un=Ro,Qn=Jr.length,Ci=!0,Oi=[],Ki=Oi;if(En)Ci=!1,Un=Io;else if(Qn>=xr){var as=mn?null:rg(Jr);if(as)return Hc(as);Ci=!1,Un=xo,Ki=new Sc}else Ki=mn?[]:Oi;e:for(;++In<Qn;){var ss=Jr[In],us=mn?mn(ss):ss;if(ss=En||ss!==0?ss:0,Ci&&us===us){for(var gs=Ki.length;gs--;)if(Ki[gs]===us)continue e;mn&&Ki.push(us),Oi.push(ss)}else Un(Ki,us,En)||(Ki!==Oi&&Ki.push(us),Oi.push(ss))}return Oi}function ch(Jr,mn){return mn=pc(mn,Jr),Jr=Vf(Jr,mn),Jr==null||delete Jr[Ul(Sl(mn))]}function gf(Jr,mn,En,In){return Eu(Jr,mn,En(Ac(Jr,mn)),In)}function td(Jr,mn,En,In){for(var Un=Jr.length,Qn=In?Un:-1;(In?Qn--:++Qn<Un)&&mn(Jr[Qn],Qn,Jr););return En?_l(Jr,In?0:Qn,In?Qn+1:Un):_l(Jr,In?Qn+1:0,In?Un:Qn)}function vf(Jr,mn){var En=Jr;return En instanceof uo&&(En=En.value()),sl(mn,function(In,Un){return Un.func.apply(Un.thisArg,Mo([In],Un.args))},En)}function uh(Jr,mn,En){var In=Jr.length;if(In<2)return In?fc(Jr[0]):[];for(var Un=-1,Qn=Qi(In);++Un<In;)for(var Ci=Jr[Un],Oi=-1;++Oi<In;)Oi!=Un&&(Qn[Un]=bu(Qn[Un]||Ci,Jr[Oi],mn,En));return fc(zo(Qn,1),mn,En)}function bf(Jr,mn,En){for(var In=-1,Un=Jr.length,Qn=mn.length,Ci={};++In<Un;){var Oi=In<Qn?mn[In]:gr;En(Ci,Jr[In],Oi)}return Ci}function dh(Jr){return Uo(Jr)?Jr:[]}function hh(Jr){return typeof Jr=="function"?Jr:ul}function pc(Jr,mn){return Xs(Jr)?Jr:Eh(Jr,mn)?[Jr]:Kf(Co(Jr))}var qm=to;function mc(Jr,mn,En){var In=Jr.length;return En=En===gr?In:En,!mn&&En>=In?Jr:_l(Jr,mn,En)}var yf=kp||function(Jr){return rs.clearTimeout(Jr)};function xf(Jr,mn){if(mn)return Jr.slice();var En=Jr.length,In=Ml?Ml(En):new Jr.constructor(En);return Jr.copy(In),In}function fh(Jr){var mn=new Jr.constructor(Jr.byteLength);return new zl(mn).set(new zl(Jr)),mn}function Km(Jr,mn){var En=mn?fh(Jr.buffer):Jr.buffer;return new Jr.constructor(En,Jr.byteOffset,Jr.byteLength)}function zm(Jr){var mn=new Jr.constructor(Jr.source,Cu.exec(Jr));return mn.lastIndex=Jr.lastIndex,mn}function Ym(Jr){return gu?To(gu.call(Jr)):{}}function Ef(Jr,mn){var En=mn?fh(Jr.buffer):Jr.buffer;return new Jr.constructor(En,Jr.byteOffset,Jr.length)}function $f(Jr,mn){if(Jr!==mn){var En=Jr!==gr,In=Jr===null,Un=Jr===Jr,Qn=ml(Jr),Ci=mn!==gr,Oi=mn===null,Ki=mn===mn,as=ml(mn);if(!Oi&&!as&&!Qn&&Jr>mn||Qn&&Ci&&Ki&&!Oi&&!as||In&&Ci&&Ki||!En&&Ki||!Un)return 1;if(!In&&!Qn&&!as&&Jr<mn||as&&En&&Un&&!In&&!Qn||Oi&&En&&Un||!Ci&&Un||!Ki)return-1}return 0}function Xm(Jr,mn,En){for(var In=-1,Un=Jr.criteria,Qn=mn.criteria,Ci=Un.length,Oi=En.length;++In<Ci;){var Ki=$f(Un[In],Qn[In]);if(Ki){if(In>=Oi)return Ki;var as=En[In];return Ki*(as=="desc"?-1:1)}}return Jr.index-mn.index}function _f(Jr,mn,En,In){for(var Un=-1,Qn=Jr.length,Ci=En.length,Oi=-1,Ki=mn.length,as=Wo(Qn-Ci,0),ss=Qi(Ki+as),us=!In;++Oi<Ki;)ss[Oi]=mn[Oi];for(;++Un<Ci;)(us||Un<Qn)&&(ss[En[Un]]=Jr[Un]);for(;as--;)ss[Oi++]=Jr[Un++];return ss}function Sf(Jr,mn,En,In){for(var Un=-1,Qn=Jr.length,Ci=-1,Oi=En.length,Ki=-1,as=mn.length,ss=Wo(Qn-Oi,0),us=Qi(ss+as),gs=!In;++Un<ss;)us[Un]=Jr[Un];for(var ks=Un;++Ki<as;)us[ks+Ki]=mn[Ki];for(;++Ci<Oi;)(gs||Un<Qn)&&(us[ks+En[Ci]]=Jr[Un++]);return us}function ol(Jr,mn){var En=-1,In=Jr.length;for(mn||(mn=Qi(In));++En<In;)mn[En]=Jr[En];return mn}function Bl(Jr,mn,En,In){var Un=!En;En||(En={});for(var Qn=-1,Ci=mn.length;++Qn<Ci;){var Oi=mn[Qn],Ki=In?In(En[Oi],Jr[Oi],Oi,En,Jr):gr;Ki===gr&&(Ki=Jr[Oi]),Un?Zl(En,Oi,Ki):vu(En,Oi,Ki)}return En}function Qm(Jr,mn){return Bl(Jr,xh(Jr),mn)}function Zm(Jr,mn){return Bl(Jr,Ff(Jr),mn)}function rd(Jr,mn){return function(En,In){var Un=Xs(En)?fo:xm,Qn=mn?mn():{};return Un(En,Jr,Vs(In,2),Qn)}}function zc(Jr){return to(function(mn,En){var In=-1,Un=En.length,Qn=Un>1?En[Un-1]:gr,Ci=Un>2?En[2]:gr;for(Qn=Jr.length>3&&typeof Qn=="function"?(Un--,Qn):gr,Ci&&nl(En[0],En[1],Ci)&&(Qn=Un<3?gr:Qn,Un=1),mn=To(mn);++In<Un;){var Oi=En[In];Oi&&Jr(mn,Oi,In,Qn)}return mn})}function Tf(Jr,mn){return function(En,In){if(En==null)return En;if(!ll(En))return Jr(En,In);for(var Un=En.length,Qn=mn?Un:-1,Ci=To(En);(mn?Qn--:++Qn<Un)&&In(Ci[Qn],Qn,Ci)!==!1;);return En}}function Af(Jr){return function(mn,En,In){for(var Un=-1,Qn=To(mn),Ci=In(mn),Oi=Ci.length;Oi--;){var Ki=Ci[Jr?Oi:++Un];if(En(Qn[Ki],Ki,Qn)===!1)break}return mn}}function Jm(Jr,mn,En){var In=mn&Qr,Un=$u(Jr);function Qn(){var Ci=this&&this!==rs&&this instanceof Qn?Un:Jr;return Ci.apply(In?En:this,arguments)}return Qn}function Cf(Jr){return function(mn){mn=Co(mn);var En=yl(mn)?el(mn):gr,In=En?En[0]:mn.charAt(0),Un=En?mc(En,1).join(""):mn.slice(1);return In[Jr]()+Un}}function Yc(Jr){return function(mn){return sl(Tp(Sp(mn).replace(Nd,"")),Jr,"")}}function $u(Jr){return function(){var mn=arguments;switch(mn.length){case 0:return new Jr;case 1:return new Jr(mn[0]);case 2:return new Jr(mn[0],mn[1]);case 3:return new Jr(mn[0],mn[1],mn[2]);case 4:return new Jr(mn[0],mn[1],mn[2],mn[3]);case 5:return new Jr(mn[0],mn[1],mn[2],mn[3],mn[4]);case 6:return new Jr(mn[0],mn[1],mn[2],mn[3],mn[4],mn[5]);case 7:return new Jr(mn[0],mn[1],mn[2],mn[3],mn[4],mn[5],mn[6])}var En=Kc(Jr.prototype),In=Jr.apply(En,mn);return Lo(In)?In:En}}function eg(Jr,mn,En){var In=$u(Jr);function Un(){for(var Qn=arguments.length,Ci=Qi(Qn),Oi=Qn,Ki=Xc(Un);Oi--;)Ci[Oi]=arguments[Oi];var as=Qn<3&&Ci[0]!==Ki&&Ci[Qn-1]!==Ki?[]:ao(Ci,Ki);if(Qn-=as.length,Qn<En)return kf(Jr,mn,nd,Un.placeholder,gr,Ci,as,gr,gr,En-Qn);var ss=this&&this!==rs&&this instanceof Un?In:Jr;return Ks(ss,this,Ci)}return Un}function wf(Jr){return function(mn,En,In){var Un=To(mn);if(!ll(mn)){var Qn=Vs(En,3);mn=qo(mn),En=function(Oi){return Qn(Un[Oi],Oi,Un)}}var Ci=Jr(mn,En,In);return Ci>-1?Un[Qn?mn[Ci]:Ci]:gr}}function Rf(Jr){return ec(function(mn){var En=mn.length,In=En,Un=El.prototype.thru;for(Jr&&mn.reverse();In--;){var Qn=mn[In];if(typeof Qn!="function")throw new tl(Cr);if(Un&&!Ci&&od(Qn)=="wrapper")var Ci=new El([],!0)}for(In=Ci?In:En;++In<En;){Qn=mn[In];var Oi=od(Qn),Ki=Oi=="wrapper"?bh(Qn):gr;Ki&&$h(Ki[0])&&Ki[1]==(xn|vn|gn|$n)&&!Ki[4].length&&Ki[9]==1?Ci=Ci[od(Ki[0])].apply(Ci,Ki[3]):Ci=Qn.length==1&&$h(Qn)?Ci[Oi]():Ci.thru(Qn)}return function(){var as=arguments,ss=as[0];if(Ci&&as.length==1&&Xs(ss))return Ci.plant(ss).value();for(var us=0,gs=En?mn[us].apply(this,as):ss;++us<En;)gs=mn[us].call(this,gs);return gs}})}function nd(Jr,mn,En,In,Un,Qn,Ci,Oi,Ki,as){var ss=mn&xn,us=mn&Qr,gs=mn&sn,ks=mn&(vn|yn),Ws=mn&Sn,eo=gs?gr:$u(Jr);function Gs(){for(var lo=arguments.length,mo=Qi(lo),gl=lo;gl--;)mo[gl]=arguments[gl];if(ks)var il=Xc(Gs),vl=$o(mo,il);if(In&&(mo=_f(mo,In,Un,ks)),Qn&&(mo=Sf(mo,Qn,Ci,ks)),lo-=vl,ks&&lo<as){var Ho=ao(mo,il);return kf(Jr,mn,nd,Gs.placeholder,En,mo,Ho,Oi,Ki,as-lo)}var Ll=us?En:this,ic=gs?Ll[Jr]:Jr;return lo=mo.length,Oi?mo=xg(mo,Oi):Ws&&lo>1&&mo.reverse(),ss&&Ki<lo&&(mo.length=Ki),this&&this!==rs&&this instanceof Gs&&(ic=eo||$u(ic)),ic.apply(Ll,mo)}return Gs}function If(Jr,mn){return function(En,In){return wm(En,Jr,mn(In),{})}}function id(Jr,mn){return function(En,In){var Un;if(En===gr&&In===gr)return mn;if(En!==gr&&(Un=En),In!==gr){if(Un===gr)return In;typeof En=="string"||typeof In=="string"?(En=pl(En),In=pl(In)):(En=mf(En),In=mf(In)),Un=Jr(En,In)}return Un}}function ph(Jr){return ec(function(mn){return mn=qs(mn,Rs(Vs())),to(function(En){var In=this;return Jr(mn,function(Un){return Ks(Un,In,En)})})})}function ad(Jr,mn){mn=mn===gr?" ":pl(mn);var En=mn.length;if(En<2)return En?oh(mn,Jr):mn;var In=oh(mn,Gu(Jr/uc(mn)));return yl(mn)?mc(el(In),0,Jr).join(""):In.slice(0,Jr)}function tg(Jr,mn,En,In){var Un=mn&Qr,Qn=$u(Jr);function Ci(){for(var Oi=-1,Ki=arguments.length,as=-1,ss=In.length,us=Qi(ss+Ki),gs=this&&this!==rs&&this instanceof Ci?Qn:Jr;++as<ss;)us[as]=In[as];for(;Ki--;)us[as++]=arguments[++Oi];return Ks(gs,Un?En:this,us)}return Ci}function Mf(Jr){return function(mn,En,In){return In&&typeof In!="number"&&nl(mn,En,In)&&(En=In=gr),mn=nc(mn),En===gr?(En=mn,mn=0):En=nc(En),In=In===gr?mn<En?1:-1:nc(In),Bm(mn,En,In,Jr)}}function sd(Jr){return function(mn,En){return typeof mn=="string"&&typeof En=="string"||(mn=Tl(mn),En=Tl(En)),Jr(mn,En)}}function kf(Jr,mn,En,In,Un,Qn,Ci,Oi,Ki,as){var ss=mn&vn,us=ss?Ci:gr,gs=ss?gr:Ci,ks=ss?Qn:gr,Ws=ss?gr:Qn;mn|=ss?gn:bn,mn&=~(ss?bn:gn),mn&hn||(mn&=~(Qr|sn));var eo=[Jr,mn,Un,ks,us,Ws,gs,Oi,Ki,as],Gs=En.apply(gr,eo);return $h(Jr)&&Wf(Gs,eo),Gs.placeholder=In,Gf(Gs,Jr,mn)}function mh(Jr){var mn=Bo[Jr];return function(En,In){if(En=Tl(En),In=In==null?0:Qo(Zs(In),292),In&&Wh(En)){var Un=(Co(En)+"e").split("e"),Qn=mn(Un[0]+"e"+(+Un[1]+In));return Un=(Co(Qn)+"e").split("e"),+(Un[0]+"e"+(+Un[1]-In))}return mn(En)}}var rg=Gc&&1/Hc(new Gc([,-0]))[1]==On?function(Jr){return new Gc(Jr)}:Nh;function Pf(Jr){return function(mn){var En=Zo(mn);return En==Ya?Uc(mn):En==ls?Fl(mn):Vo(mn,Jr(mn))}}function Jl(Jr,mn,En,In,Un,Qn,Ci,Oi){var Ki=mn&sn;if(!Ki&&typeof Jr!="function")throw new tl(Cr);var as=In?In.length:0;if(as||(mn&=~(gn|bn),In=Un=gr),Ci=Ci===gr?Ci:Wo(Zs(Ci),0),Oi=Oi===gr?Oi:Zs(Oi),as-=Un?Un.length:0,mn&bn){var ss=In,us=Un;In=Un=gr}var gs=Ki?gr:bh(Jr),ks=[Jr,mn,En,In,Un,ss,us,Qn,Ci,Oi];if(gs&&vg(ks,gs),Jr=ks[0],mn=ks[1],En=ks[2],In=ks[3],Un=ks[4],Oi=ks[9]=ks[9]===gr?Ki?0:Jr.length:Wo(ks[9]-as,0),!Oi&&mn&(vn|yn)&&(mn&=~(vn|yn)),!mn||mn==Qr)var Ws=Jm(Jr,mn,En);else mn==vn||mn==yn?Ws=eg(Jr,mn,Oi):(mn==gn||mn==(Qr|gn))&&!Un.length?Ws=tg(Jr,mn,En,In):Ws=nd.apply(gr,ks);var eo=gs?ff:Wf;return Gf(eo(Ws,ks),Jr,mn)}function Df(Jr,mn,En,In){return Jr===gr||Dl(Jr,dc[En])&&!Zi.call(In,En)?mn:Jr}function Lf(Jr,mn,En,In,Un,Qn){return Lo(Jr)&&Lo(mn)&&(Qn.set(mn,Jr),Ju(Jr,mn,gr,Lf,Qn),Qn.delete(mn)),Jr}function ng(Jr){return Tu(Jr)?gr:Jr}function Of(Jr,mn,En,In,Un,Qn){var Ci=En&qr,Oi=Jr.length,Ki=mn.length;if(Oi!=Ki&&!(Ci&&Ki>Oi))return!1;var as=Qn.get(Jr),ss=Qn.get(mn);if(as&&ss)return as==mn&&ss==Jr;var us=-1,gs=!0,ks=En&zr?new Sc:gr;for(Qn.set(Jr,mn),Qn.set(mn,Jr);++us<Oi;){var Ws=Jr[us],eo=mn[us];if(In)var Gs=Ci?In(eo,Ws,us,mn,Jr,Qn):In(Ws,eo,us,Jr,mn,Qn);if(Gs!==gr){if(Gs)continue;gs=!1;break}if(ks){if(!Po(mn,function(lo,mo){if(!xo(ks,mo)&&(Ws===lo||Un(Ws,lo,En,In,Qn)))return ks.push(mo)})){gs=!1;break}}else if(!(Ws===eo||Un(Ws,eo,En,In,Qn))){gs=!1;break}}return Qn.delete(Jr),Qn.delete(mn),gs}function ig(Jr,mn,En,In,Un,Qn,Ci){switch(En){case Ns:if(Jr.byteLength!=mn.byteLength||Jr.byteOffset!=mn.byteOffset)return!1;Jr=Jr.buffer,mn=mn.buffer;case ws:return!(Jr.byteLength!=mn.byteLength||!Qn(new zl(Jr),new zl(mn)));case Dn:case Vn:case Bi:return Dl(+Jr,+mn);case Xn:return Jr.name==mn.name&&Jr.message==mn.message;case ps:case Li:return Jr==mn+"";case Ya:var Oi=Uc;case ls:var Ki=In&qr;if(Oi||(Oi=Hc),Jr.size!=mn.size&&!Ki)return!1;var as=Ci.get(Jr);if(as)return as==mn;In|=zr,Ci.set(Jr,mn);var ss=Of(Oi(Jr),Oi(mn),In,Un,Qn,Ci);return Ci.delete(Jr),ss;case es:if(gu)return gu.call(Jr)==gu.call(mn)}return!1}function ag(Jr,mn,En,In,Un,Qn){var Ci=En&qr,Oi=gh(Jr),Ki=Oi.length,as=gh(mn),ss=as.length;if(Ki!=ss&&!Ci)return!1;for(var us=Ki;us--;){var gs=Oi[us];if(!(Ci?gs in mn:Zi.call(mn,gs)))return!1}var ks=Qn.get(Jr),Ws=Qn.get(mn);if(ks&&Ws)return ks==mn&&Ws==Jr;var eo=!0;Qn.set(Jr,mn),Qn.set(mn,Jr);for(var Gs=Ci;++us<Ki;){gs=Oi[us];var lo=Jr[gs],mo=mn[gs];if(In)var gl=Ci?In(mo,lo,gs,mn,Jr,Qn):In(lo,mo,gs,Jr,mn,Qn);if(!(gl===gr?lo===mo||Un(lo,mo,En,In,Qn):gl)){eo=!1;break}Gs||(Gs=gs=="constructor")}if(eo&&!Gs){var il=Jr.constructor,vl=mn.constructor;il!=vl&&"constructor"in Jr&&"constructor"in mn&&!(typeof il=="function"&&il instanceof il&&typeof vl=="function"&&vl instanceof vl)&&(eo=!1)}return Qn.delete(Jr),Qn.delete(mn),eo}function ec(Jr){return Sh(Hf(Jr,gr,Qf),Jr+"")}function gh(Jr){return tf(Jr,qo,xh)}function vh(Jr){return tf(Jr,cl,Ff)}var bh=Ku?function(Jr){return Ku.get(Jr)}:Nh;function od(Jr){for(var mn=Jr.name+"",En=qc[mn],In=Zi.call(qc,mn)?En.length:0;In--;){var Un=En[In],Qn=Un.func;if(Qn==null||Qn==Jr)return Un.name}return mn}function Xc(Jr){var mn=Zi.call(Yn,"placeholder")?Yn:Jr;return mn.placeholder}function Vs(){var Jr=Yn.iteratee||Oh;return Jr=Jr===Oh?af:Jr,arguments.length?Jr(arguments[0],arguments[1]):Jr}function ld(Jr,mn){var En=Jr.__data__;return fg(mn)?En[typeof mn=="string"?"string":"hash"]:En.map}function yh(Jr){for(var mn=qo(Jr),En=mn.length;En--;){var In=mn[En],Un=Jr[In];mn[En]=[In,Un,Bf(Un)]}return mn}function Cc(Jr,mn){var En=ql(Jr,mn);return nf(En)?En:gr}function sg(Jr){var mn=Zi.call(Jr,$c),En=Jr[$c];try{Jr[$c]=gr;var In=!0}catch{}var Un=so.call(Jr);return In&&(mn?Jr[$c]=En:delete Jr[$c]),Un}var xh=Kd?function(Jr){return Jr==null?[]:(Jr=To(Jr),Eo(Kd(Jr),function(mn){return Ec.call(Jr,mn)}))}:jh,Ff=Kd?function(Jr){for(var mn=[];Jr;)Mo(mn,xh(Jr)),Jr=Yl(Jr);return mn}:jh,Zo=rl;(zd&&Zo(new zd(new ArrayBuffer(1)))!=Ns||fu&&Zo(new fu)!=Ya||Yd&&Zo(Yd.resolve())!=Ji||Gc&&Zo(new Gc)!=ls||pu&&Zo(new pu)!=ds)&&(Zo=function(Jr){var mn=rl(Jr),En=mn==Xi?Jr.constructor:gr,In=En?wc(En):"";if(In)switch(In){case Up:return Ns;case Hp:return Ya;case Vp:return Ji;case Wp:return ls;case Gp:return ds}return mn});function og(Jr,mn,En){for(var In=-1,Un=En.length;++In<Un;){var Qn=En[In],Ci=Qn.size;switch(Qn.type){case"drop":Jr+=Ci;break;case"dropRight":mn-=Ci;break;case"take":mn=Qo(mn,Jr+Ci);break;case"takeRight":Jr=Wo(Jr,mn-Ci);break}}return{start:Jr,end:mn}}function lg(Jr){var mn=Jr.match(bc);return mn?mn[1].split(bd):[]}function Nf(Jr,mn,En){mn=pc(mn,Jr);for(var In=-1,Un=mn.length,Qn=!1;++In<Un;){var Ci=Ul(mn[In]);if(!(Qn=Jr!=null&&En(Jr,Ci)))break;Jr=Jr[Ci]}return Qn||++In!=Un?Qn:(Un=Jr==null?0:Jr.length,!!Un&&md(Un)&&tc(Ci,Un)&&(Xs(Jr)||Rc(Jr)))}function cg(Jr){var mn=Jr.length,En=new Jr.constructor(mn);return mn&&typeof Jr[0]=="string"&&Zi.call(Jr,"index")&&(En.index=Jr.index,En.input=Jr.input),En}function jf(Jr){return typeof Jr.constructor=="function"&&!_u(Jr)?Kc(Yl(Jr)):{}}function ug(Jr,mn,En){var In=Jr.constructor;switch(mn){case ws:return fh(Jr);case Dn:case Vn:return new In(+Jr);case Ns:return Km(Jr,En);case go:case vo:case ho:case al:case ro:case ts:case Wi:case Gi:case fs:return Ef(Jr,En);case Ya:return new In;case Bi:case Li:return new In(Jr);case ps:return zm(Jr);case ls:return new In;case es:return Ym(Jr)}}function dg(Jr,mn){var En=mn.length;if(!En)return Jr;var In=En-1;return mn[In]=(En>1?"& ":"")+mn[In],mn=mn.join(En>2?", ":" "),Jr.replace(Wl,`{
/* [wrapped with `+mn+`] */
`)}function hg(Jr){return Xs(Jr)||Rc(Jr)||!!(Vh&&Jr&&Jr[Vh])}function tc(Jr,mn){var En=typeof Jr;return mn=mn??wn,!!mn&&(En=="number"||En!="symbol"&&Rd.test(Jr))&&Jr>-1&&Jr%1==0&&Jr<mn}function nl(Jr,mn,En){if(!Lo(En))return!1;var In=typeof mn;return(In=="number"?ll(En)&&tc(mn,En.length):In=="string"&&mn in En)?Dl(En[mn],Jr):!1}function Eh(Jr,mn){if(Xs(Jr))return!1;var En=typeof Jr;return En=="number"||En=="symbol"||En=="boolean"||Jr==null||ml(Jr)?!0:ac.test(Jr)||!Oo.test(Jr)||mn!=null&&Jr in To(mn)}function fg(Jr){var mn=typeof Jr;return mn=="string"||mn=="number"||mn=="symbol"||mn=="boolean"?Jr!=="__proto__":Jr===null}function $h(Jr){var mn=od(Jr),En=Yn[mn];if(typeof En!="function"||!(mn in uo.prototype))return!1;if(Jr===En)return!0;var In=bh(En);return!!In&&Jr===In[0]}function pg(Jr){return!!Ys&&Ys in Jr}var mg=Wc?rc:Bh;function _u(Jr){var mn=Jr&&Jr.constructor,En=typeof mn=="function"&&mn.prototype||dc;return Jr===En}function Bf(Jr){return Jr===Jr&&!Lo(Jr)}function Uf(Jr,mn){return function(En){return En==null?!1:En[Jr]===mn&&(mn!==gr||Jr in To(En))}}function gg(Jr){var mn=fd(Jr,function(In){return En.size===kr&&En.clear(),In}),En=mn.cache;return mn}function vg(Jr,mn){var En=Jr[1],In=mn[1],Un=En|In,Qn=Un<(Qr|sn|xn),Ci=In==xn&&En==vn||In==xn&&En==$n&&Jr[7].length<=mn[8]||In==(xn|$n)&&mn[7].length<=mn[8]&&En==vn;if(!(Qn||Ci))return Jr;In&Qr&&(Jr[2]=mn[2],Un|=En&Qr?0:hn);var Oi=mn[3];if(Oi){var Ki=Jr[3];Jr[3]=Ki?_f(Ki,Oi,mn[4]):Oi,Jr[4]=Ki?ao(Jr[3],Dr):mn[4]}return Oi=mn[5],Oi&&(Ki=Jr[5],Jr[5]=Ki?Sf(Ki,Oi,mn[6]):Oi,Jr[6]=Ki?ao(Jr[5],Dr):mn[6]),Oi=mn[7],Oi&&(Jr[7]=Oi),In&xn&&(Jr[8]=Jr[8]==null?mn[8]:Qo(Jr[8],mn[8])),Jr[9]==null&&(Jr[9]=mn[9]),Jr[0]=mn[0],Jr[1]=Un,Jr}function bg(Jr){var mn=[];if(Jr!=null)for(var En in To(Jr))mn.push(En);return mn}function yg(Jr){return so.call(Jr)}function Hf(Jr,mn,En){return mn=Wo(mn===gr?Jr.length-1:mn,0),function(){for(var In=arguments,Un=-1,Qn=Wo(In.length-mn,0),Ci=Qi(Qn);++Un<Qn;)Ci[Un]=In[mn+Un];Un=-1;for(var Oi=Qi(mn+1);++Un<mn;)Oi[Un]=In[Un];return Oi[mn]=En(Ci),Ks(Jr,this,Oi)}}function Vf(Jr,mn){return mn.length<2?Jr:Ac(Jr,_l(mn,0,-1))}function xg(Jr,mn){for(var En=Jr.length,In=Qo(mn.length,En),Un=ol(Jr);In--;){var Qn=mn[In];Jr[In]=tc(Qn,En)?Un[Qn]:gr}return Jr}function _h(Jr,mn){if(!(mn==="constructor"&&typeof Jr[mn]=="function")&&mn!="__proto__")return Jr[mn]}var Wf=qf(ff),Su=Dp||function(Jr,mn){return rs.setTimeout(Jr,mn)},Sh=qf(Vm);function Gf(Jr,mn,En){var In=mn+"";return Sh(Jr,dg(In,Eg(lg(In),En)))}function qf(Jr){var mn=0,En=0;return function(){var In=Np(),Un=Fn-(In-En);if(En=In,Un>0){if(++mn>=Bn)return arguments[0]}else mn=0;return Jr.apply(gr,arguments)}}function cd(Jr,mn){var En=-1,In=Jr.length,Un=In-1;for(mn=mn===gr?In:mn;++En<mn;){var Qn=sh(En,Un),Ci=Jr[Qn];Jr[Qn]=Jr[En],Jr[En]=Ci}return Jr.length=mn,Jr}var Kf=gg(function(Jr){var mn=[];return Jr.charCodeAt(0)===46&&mn.push(""),Jr.replace(sc,function(En,In,Un,Qn){mn.push(Un?Qn.replace(Ed,"$1"):In||En)}),mn});function Ul(Jr){if(typeof Jr=="string"||ml(Jr))return Jr;var mn=Jr+"";return mn=="0"&&1/Jr==-On?"-0":mn}function wc(Jr){if(Jr!=null){try{return xc.call(Jr)}catch{}try{return Jr+""}catch{}}return""}function Eg(Jr,mn){return po(Kn,function(En){var In="_."+En[0];mn&En[1]&&!Ro(Jr,In)&&Jr.push(In)}),Jr.sort()}function zf(Jr){if(Jr instanceof uo)return Jr.clone();var mn=new El(Jr.__wrapped__,Jr.__chain__);return mn.__actions__=ol(Jr.__actions__),mn.__index__=Jr.__index__,mn.__values__=Jr.__values__,mn}function $g(Jr,mn,En){(En?nl(Jr,mn,En):mn===gr)?mn=1:mn=Wo(Zs(mn),0);var In=Jr==null?0:Jr.length;if(!In||mn<1)return[];for(var Un=0,Qn=0,Ci=Qi(Gu(In/mn));Un<In;)Ci[Qn++]=_l(Jr,Un,Un+=mn);return Ci}function _g(Jr){for(var mn=-1,En=Jr==null?0:Jr.length,In=0,Un=[];++mn<En;){var Qn=Jr[mn];Qn&&(Un[In++]=Qn)}return Un}function Sg(){var Jr=arguments.length;if(!Jr)return[];for(var mn=Qi(Jr-1),En=arguments[0],In=Jr;In--;)mn[In-1]=arguments[In];return Mo(Xs(En)?ol(En):[En],zo(mn,1))}var Tg=to(function(Jr,mn){return Uo(Jr)?bu(Jr,zo(mn,1,Uo,!0)):[]}),Ag=to(function(Jr,mn){var En=Sl(mn);return Uo(En)&&(En=gr),Uo(Jr)?bu(Jr,zo(mn,1,Uo,!0),Vs(En,2)):[]}),Cg=to(function(Jr,mn){var En=Sl(mn);return Uo(En)&&(En=gr),Uo(Jr)?bu(Jr,zo(mn,1,Uo,!0),gr,En):[]});function wg(Jr,mn,En){var In=Jr==null?0:Jr.length;return In?(mn=En||mn===gr?1:Zs(mn),_l(Jr,mn<0?0:mn,In)):[]}function Rg(Jr,mn,En){var In=Jr==null?0:Jr.length;return In?(mn=En||mn===gr?1:Zs(mn),mn=In-mn,_l(Jr,0,mn<0?0:mn)):[]}function Ig(Jr,mn){return Jr&&Jr.length?td(Jr,Vs(mn,3),!0,!0):[]}function Mg(Jr,mn){return Jr&&Jr.length?td(Jr,Vs(mn,3),!0):[]}function kg(Jr,mn,En,In){var Un=Jr==null?0:Jr.length;return Un?(En&&typeof En!="number"&&nl(Jr,mn,En)&&(En=0,In=Un),Sm(Jr,mn,En,In)):[]}function Yf(Jr,mn,En){var In=Jr==null?0:Jr.length;if(!In)return-1;var Un=En==null?0:Zs(En);return Un<0&&(Un=Wo(In+Un,0)),vs(Jr,Vs(mn,3),Un)}function Xf(Jr,mn,En){var In=Jr==null?0:Jr.length;if(!In)return-1;var Un=In-1;return En!==gr&&(Un=Zs(En),Un=En<0?Wo(In+Un,0):Qo(Un,In-1)),vs(Jr,Vs(mn,3),Un,!0)}function Qf(Jr){var mn=Jr==null?0:Jr.length;return mn?zo(Jr,1):[]}function Pg(Jr){var mn=Jr==null?0:Jr.length;return mn?zo(Jr,On):[]}function Dg(Jr,mn){var En=Jr==null?0:Jr.length;return En?(mn=mn===gr?1:Zs(mn),zo(Jr,mn)):[]}function Lg(Jr){for(var mn=-1,En=Jr==null?0:Jr.length,In={};++mn<En;){var Un=Jr[mn];In[Un[0]]=Un[1]}return In}function Zf(Jr){return Jr&&Jr.length?Jr[0]:gr}function Og(Jr,mn,En){var In=Jr==null?0:Jr.length;if(!In)return-1;var Un=En==null?0:Zs(En);return Un<0&&(Un=Wo(In+Un,0)),ys(Jr,mn,Un)}function Fg(Jr){var mn=Jr==null?0:Jr.length;return mn?_l(Jr,0,-1):[]}var Ng=to(function(Jr){var mn=qs(Jr,dh);return mn.length&&mn[0]===Jr[0]?th(mn):[]}),jg=to(function(Jr){var mn=Sl(Jr),En=qs(Jr,dh);return mn===Sl(En)?mn=gr:En.pop(),En.length&&En[0]===Jr[0]?th(En,Vs(mn,2)):[]}),Bg=to(function(Jr){var mn=Sl(Jr),En=qs(Jr,dh);return mn=typeof mn=="function"?mn:gr,mn&&En.pop(),En.length&&En[0]===Jr[0]?th(En,gr,mn):[]});function Ug(Jr,mn){return Jr==null?"":Op.call(Jr,mn)}function Sl(Jr){var mn=Jr==null?0:Jr.length;return mn?Jr[mn-1]:gr}function Hg(Jr,mn,En){var In=Jr==null?0:Jr.length;if(!In)return-1;var Un=In;return En!==gr&&(Un=Zs(En),Un=Un<0?Wo(In+Un,0):Qo(Un,In-1)),mn===mn?Hd(Jr,mn,Un):vs(Jr,Ls,Un,!0)}function Vg(Jr,mn){return Jr&&Jr.length?cf(Jr,Zs(mn)):gr}var Wg=to(Jf);function Jf(Jr,mn){return Jr&&Jr.length&&mn&&mn.length?ah(Jr,mn):Jr}function Gg(Jr,mn,En){return Jr&&Jr.length&&mn&&mn.length?ah(Jr,mn,Vs(En,2)):Jr}function qg(Jr,mn,En){return Jr&&Jr.length&&mn&&mn.length?ah(Jr,mn,gr,En):Jr}var Kg=ec(function(Jr,mn){var En=Jr==null?0:Jr.length,In=Qd(Jr,mn);return hf(Jr,qs(mn,function(Un){return tc(Un,En)?+Un:Un}).sort($f)),In});function zg(Jr,mn){var En=[];if(!(Jr&&Jr.length))return En;var In=-1,Un=[],Qn=Jr.length;for(mn=Vs(mn,3);++In<Qn;){var Ci=Jr[In];mn(Ci,In,Jr)&&(En.push(Ci),Un.push(In))}return hf(Jr,Un),En}function Ah(Jr){return Jr==null?Jr:Bp.call(Jr)}function Yg(Jr,mn,En){var In=Jr==null?0:Jr.length;return In?(En&&typeof En!="number"&&nl(Jr,mn,En)?(mn=0,En=In):(mn=mn==null?0:Zs(mn),En=En===gr?In:Zs(En)),_l(Jr,mn,En)):[]}function Xg(Jr,mn){return ed(Jr,mn)}function Qg(Jr,mn,En){return lh(Jr,mn,Vs(En,2))}function Zg(Jr,mn){var En=Jr==null?0:Jr.length;if(En){var In=ed(Jr,mn);if(In<En&&Dl(Jr[In],mn))return In}return-1}function Jg(Jr,mn){return ed(Jr,mn,!0)}function e0(Jr,mn,En){return lh(Jr,mn,Vs(En,2),!0)}function t0(Jr,mn){var En=Jr==null?0:Jr.length;if(En){var In=ed(Jr,mn,!0)-1;if(Dl(Jr[In],mn))return In}return-1}function r0(Jr){return Jr&&Jr.length?pf(Jr):[]}function n0(Jr,mn){return Jr&&Jr.length?pf(Jr,Vs(mn,2)):[]}function i0(Jr){var mn=Jr==null?0:Jr.length;return mn?_l(Jr,1,mn):[]}function a0(Jr,mn,En){return Jr&&Jr.length?(mn=En||mn===gr?1:Zs(mn),_l(Jr,0,mn<0?0:mn)):[]}function s0(Jr,mn,En){var In=Jr==null?0:Jr.length;return In?(mn=En||mn===gr?1:Zs(mn),mn=In-mn,_l(Jr,mn<0?0:mn,In)):[]}function o0(Jr,mn){return Jr&&Jr.length?td(Jr,Vs(mn,3),!1,!0):[]}function l0(Jr,mn){return Jr&&Jr.length?td(Jr,Vs(mn,3)):[]}var c0=to(function(Jr){return fc(zo(Jr,1,Uo,!0))}),u0=to(function(Jr){var mn=Sl(Jr);return Uo(mn)&&(mn=gr),fc(zo(Jr,1,Uo,!0),Vs(mn,2))}),d0=to(function(Jr){var mn=Sl(Jr);return mn=typeof mn=="function"?mn:gr,fc(zo(Jr,1,Uo,!0),gr,mn)});function h0(Jr){return Jr&&Jr.length?fc(Jr):[]}function f0(Jr,mn){return Jr&&Jr.length?fc(Jr,Vs(mn,2)):[]}function p0(Jr,mn){return mn=typeof mn=="function"?mn:gr,Jr&&Jr.length?fc(Jr,gr,mn):[]}function Ch(Jr){if(!(Jr&&Jr.length))return[];var mn=0;return Jr=Eo(Jr,function(En){if(Uo(En))return mn=Wo(En.length,mn),!0}),yo(mn,function(En){return qs(Jr,_s(En))})}function ep(Jr,mn){if(!(Jr&&Jr.length))return[];var En=Ch(Jr);return mn==null?En:qs(En,function(In){return Ks(mn,gr,In)})}var m0=to(function(Jr,mn){return Uo(Jr)?bu(Jr,mn):[]}),g0=to(function(Jr){return uh(Eo(Jr,Uo))}),v0=to(function(Jr){var mn=Sl(Jr);return Uo(mn)&&(mn=gr),uh(Eo(Jr,Uo),Vs(mn,2))}),b0=to(function(Jr){var mn=Sl(Jr);return mn=typeof mn=="function"?mn:gr,uh(Eo(Jr,Uo),gr,mn)}),y0=to(Ch);function x0(Jr,mn){return bf(Jr||[],mn||[],vu)}function E0(Jr,mn){return bf(Jr||[],mn||[],Eu)}var $0=to(function(Jr){var mn=Jr.length,En=mn>1?Jr[mn-1]:gr;return En=typeof En=="function"?(Jr.pop(),En):gr,ep(Jr,En)});function tp(Jr){var mn=Yn(Jr);return mn.__chain__=!0,mn}function _0(Jr,mn){return mn(Jr),Jr}function ud(Jr,mn){return mn(Jr)}var S0=ec(function(Jr){var mn=Jr.length,En=mn?Jr[0]:0,In=this.__wrapped__,Un=function(Qn){return Qd(Qn,Jr)};return mn>1||this.__actions__.length||!(In instanceof uo)||!tc(En)?this.thru(Un):(In=In.slice(En,+En+(mn?1:0)),In.__actions__.push({func:ud,args:[Un],thisArg:gr}),new El(In,this.__chain__).thru(function(Qn){return mn&&!Qn.length&&Qn.push(gr),Qn}))});function T0(){return tp(this)}function A0(){return new El(this.value(),this.__chain__)}function C0(){this.__values__===gr&&(this.__values__=mp(this.value()));var Jr=this.__index__>=this.__values__.length,mn=Jr?gr:this.__values__[this.__index__++];return{done:Jr,value:mn}}function w0(){return this}function R0(Jr){for(var mn,En=this;En instanceof Yu;){var In=zf(En);In.__index__=0,In.__values__=gr,mn?Un.__wrapped__=In:mn=In;var Un=In;En=En.__wrapped__}return Un.__wrapped__=Jr,mn}function I0(){var Jr=this.__wrapped__;if(Jr instanceof uo){var mn=Jr;return this.__actions__.length&&(mn=new uo(this)),mn=mn.reverse(),mn.__actions__.push({func:ud,args:[Ah],thisArg:gr}),new El(mn,this.__chain__)}return this.thru(Ah)}function M0(){return vf(this.__wrapped__,this.__actions__)}var k0=rd(function(Jr,mn,En){Zi.call(Jr,En)?++Jr[En]:Zl(Jr,En,1)});function P0(Jr,mn,En){var In=Xs(Jr)?ko:_m;return En&&nl(Jr,mn,En)&&(mn=gr),In(Jr,Vs(mn,3))}function D0(Jr,mn){var En=Xs(Jr)?Eo:Jh;return En(Jr,Vs(mn,3))}var L0=wf(Yf),O0=wf(Xf);function F0(Jr,mn){return zo(dd(Jr,mn),1)}function N0(Jr,mn){return zo(dd(Jr,mn),On)}function j0(Jr,mn,En){return En=En===gr?1:Zs(En),zo(dd(Jr,mn),En)}function rp(Jr,mn){var En=Xs(Jr)?po:hc;return En(Jr,Vs(mn,3))}function np(Jr,mn){var En=Xs(Jr)?wo:Zh;return En(Jr,Vs(mn,3))}var B0=rd(function(Jr,mn,En){Zi.call(Jr,En)?Jr[En].push(mn):Zl(Jr,En,[mn])});function U0(Jr,mn,En,In){Jr=ll(Jr)?Jr:Zc(Jr),En=En&&!In?Zs(En):0;var Un=Jr.length;return En<0&&(En=Wo(Un+En,0)),gd(Jr)?En<=Un&&Jr.indexOf(mn,En)>-1:!!Un&&ys(Jr,mn,En)>-1}var H0=to(function(Jr,mn,En){var In=-1,Un=typeof mn=="function",Qn=ll(Jr)?Qi(Jr.length):[];return hc(Jr,function(Ci){Qn[++In]=Un?Ks(mn,Ci,En):yu(Ci,mn,En)}),Qn}),V0=rd(function(Jr,mn,En){Zl(Jr,En,mn)});function dd(Jr,mn){var En=Xs(Jr)?qs:sf;return En(Jr,Vs(mn,3))}function W0(Jr,mn,En,In){return Jr==null?[]:(Xs(mn)||(mn=mn==null?[]:[mn]),En=In?gr:En,Xs(En)||(En=En==null?[]:[En]),uf(Jr,mn,En))}var G0=rd(function(Jr,mn,En){Jr[En?0:1].push(mn)},function(){return[[],[]]});function q0(Jr,mn,En){var In=Xs(Jr)?sl:Us,Un=arguments.length<3;return In(Jr,Vs(mn,4),En,Un,hc)}function K0(Jr,mn,En){var In=Xs(Jr)?hl:Us,Un=arguments.length<3;return In(Jr,Vs(mn,4),En,Un,Zh)}function z0(Jr,mn){var En=Xs(Jr)?Eo:Jh;return En(Jr,pd(Vs(mn,3)))}function Y0(Jr){var mn=Xs(Jr)?zh:Um;return mn(Jr)}function X0(Jr,mn,En){(En?nl(Jr,mn,En):mn===gr)?mn=1:mn=Zs(mn);var In=Xs(Jr)?bm:Hm;return In(Jr,mn)}function Q0(Jr){var mn=Xs(Jr)?ym:Wm;return mn(Jr)}function Z0(Jr){if(Jr==null)return 0;if(ll(Jr))return gd(Jr)?uc(Jr):Jr.length;var mn=Zo(Jr);return mn==Ya||mn==ls?Jr.size:nh(Jr).length}function J0(Jr,mn,En){var In=Xs(Jr)?Po:Gm;return En&&nl(Jr,mn,En)&&(mn=gr),In(Jr,Vs(mn,3))}var ev=to(function(Jr,mn){if(Jr==null)return[];var En=mn.length;return En>1&&nl(Jr,mn[0],mn[1])?mn=[]:En>2&&nl(mn[0],mn[1],mn[2])&&(mn=[mn[0]]),uf(Jr,zo(mn,1),[])}),hd=Pp||function(){return rs.Date.now()};function tv(Jr,mn){if(typeof mn!="function")throw new tl(Cr);return Jr=Zs(Jr),function(){if(--Jr<1)return mn.apply(this,arguments)}}function ip(Jr,mn,En){return mn=En?gr:mn,mn=Jr&&mn==null?Jr.length:mn,Jl(Jr,xn,gr,gr,gr,gr,mn)}function ap(Jr,mn){var En;if(typeof mn!="function")throw new tl(Cr);return Jr=Zs(Jr),function(){return--Jr>0&&(En=mn.apply(this,arguments)),Jr<=1&&(mn=gr),En}}var wh=to(function(Jr,mn,En){var In=Qr;if(En.length){var Un=ao(En,Xc(wh));In|=gn}return Jl(Jr,In,mn,En,Un)}),sp=to(function(Jr,mn,En){var In=Qr|sn;if(En.length){var Un=ao(En,Xc(sp));In|=gn}return Jl(mn,In,Jr,En,Un)});function op(Jr,mn,En){mn=En?gr:mn;var In=Jl(Jr,vn,gr,gr,gr,gr,gr,mn);return In.placeholder=op.placeholder,In}function lp(Jr,mn,En){mn=En?gr:mn;var In=Jl(Jr,yn,gr,gr,gr,gr,gr,mn);return In.placeholder=lp.placeholder,In}function cp(Jr,mn,En){var In,Un,Qn,Ci,Oi,Ki,as=0,ss=!1,us=!1,gs=!0;if(typeof Jr!="function")throw new tl(Cr);mn=Tl(mn)||0,Lo(En)&&(ss=!!En.leading,us="maxWait"in En,Qn=us?Wo(Tl(En.maxWait)||0,mn):Qn,gs="trailing"in En?!!En.trailing:gs);function ks(Ho){var Ll=In,ic=Un;return In=Un=gr,as=Ho,Ci=Jr.apply(ic,Ll),Ci}function Ws(Ho){return as=Ho,Oi=Su(lo,mn),ss?ks(Ho):Ci}function eo(Ho){var Ll=Ho-Ki,ic=Ho-as,wp=mn-Ll;return us?Qo(wp,Qn-ic):wp}function Gs(Ho){var Ll=Ho-Ki,ic=Ho-as;return Ki===gr||Ll>=mn||Ll<0||us&&ic>=Qn}function lo(){var Ho=hd();if(Gs(Ho))return mo(Ho);Oi=Su(lo,eo(Ho))}function mo(Ho){return Oi=gr,gs&&In?ks(Ho):(In=Un=gr,Ci)}function gl(){Oi!==gr&&yf(Oi),as=0,In=Ki=Un=Oi=gr}function il(){return Oi===gr?Ci:mo(hd())}function vl(){var Ho=hd(),Ll=Gs(Ho);if(In=arguments,Un=this,Ki=Ho,Ll){if(Oi===gr)return Ws(Ki);if(us)return yf(Oi),Oi=Su(lo,mn),ks(Ki)}return Oi===gr&&(Oi=Su(lo,mn)),Ci}return vl.cancel=gl,vl.flush=il,vl}var rv=to(function(Jr,mn){return Qh(Jr,1,mn)}),nv=to(function(Jr,mn,En){return Qh(Jr,Tl(mn)||0,En)});function iv(Jr){return Jl(Jr,Sn)}function fd(Jr,mn){if(typeof Jr!="function"||mn!=null&&typeof mn!="function")throw new tl(Cr);var En=function(){var In=arguments,Un=mn?mn.apply(this,In):In[0],Qn=En.cache;if(Qn.has(Un))return Qn.get(Un);var Ci=Jr.apply(this,In);return En.cache=Qn.set(Un,Ci)||Qn,Ci};return En.cache=new(fd.Cache||Ql),En}fd.Cache=Ql;function pd(Jr){if(typeof Jr!="function")throw new tl(Cr);return function(){var mn=arguments;switch(mn.length){case 0:return!Jr.call(this);case 1:return!Jr.call(this,mn[0]);case 2:return!Jr.call(this,mn[0],mn[1]);case 3:return!Jr.call(this,mn[0],mn[1],mn[2])}return!Jr.apply(this,mn)}}function av(Jr){return ap(2,Jr)}var sv=qm(function(Jr,mn){mn=mn.length==1&&Xs(mn[0])?qs(mn[0],Rs(Vs())):qs(zo(mn,1),Rs(Vs()));var En=mn.length;return to(function(In){for(var Un=-1,Qn=Qo(In.length,En);++Un<Qn;)In[Un]=mn[Un].call(this,In[Un]);return Ks(Jr,this,In)})}),Rh=to(function(Jr,mn){var En=ao(mn,Xc(Rh));return Jl(Jr,gn,gr,mn,En)}),up=to(function(Jr,mn){var En=ao(mn,Xc(up));return Jl(Jr,bn,gr,mn,En)}),ov=ec(function(Jr,mn){return Jl(Jr,$n,gr,gr,gr,mn)});function lv(Jr,mn){if(typeof Jr!="function")throw new tl(Cr);return mn=mn===gr?mn:Zs(mn),to(Jr,mn)}function cv(Jr,mn){if(typeof Jr!="function")throw new tl(Cr);return mn=mn==null?0:Wo(Zs(mn),0),to(function(En){var In=En[mn],Un=mc(En,0,mn);return In&&Mo(Un,In),Ks(Jr,this,Un)})}function uv(Jr,mn,En){var In=!0,Un=!0;if(typeof Jr!="function")throw new tl(Cr);return Lo(En)&&(In="leading"in En?!!En.leading:In,Un="trailing"in En?!!En.trailing:Un),cp(Jr,mn,{leading:In,maxWait:mn,trailing:Un})}function dv(Jr){return ip(Jr,1)}function hv(Jr,mn){return Rh(hh(mn),Jr)}function fv(){if(!arguments.length)return[];var Jr=arguments[0];return Xs(Jr)?Jr:[Jr]}function pv(Jr){return $l(Jr,Gr)}function mv(Jr,mn){return mn=typeof mn=="function"?mn:gr,$l(Jr,Gr,mn)}function gv(Jr){return $l(Jr,Br|Gr)}function vv(Jr,mn){return mn=typeof mn=="function"?mn:gr,$l(Jr,Br|Gr,mn)}function bv(Jr,mn){return mn==null||Xh(Jr,mn,qo(mn))}function Dl(Jr,mn){return Jr===mn||Jr!==Jr&&mn!==mn}var yv=sd(eh),xv=sd(function(Jr,mn){return Jr>=mn}),Rc=rf(function(){return arguments}())?rf:function(Jr){return jo(Jr)&&Zi.call(Jr,"callee")&&!Ec.call(Jr,"callee")},Xs=Qi.isArray,Ev=bs?Rs(bs):Rm;function ll(Jr){return Jr!=null&&md(Jr.length)&&!rc(Jr)}function Uo(Jr){return jo(Jr)&&ll(Jr)}function $v(Jr){return Jr===!0||Jr===!1||jo(Jr)&&rl(Jr)==Dn}var gc=Lp||Bh,_v=Ds?Rs(Ds):Im;function Sv(Jr){return jo(Jr)&&Jr.nodeType===1&&!Tu(Jr)}function Tv(Jr){if(Jr==null)return!0;if(ll(Jr)&&(Xs(Jr)||typeof Jr=="string"||typeof Jr.splice=="function"||gc(Jr)||Qc(Jr)||Rc(Jr)))return!Jr.length;var mn=Zo(Jr);if(mn==Ya||mn==ls)return!Jr.size;if(_u(Jr))return!nh(Jr).length;for(var En in Jr)if(Zi.call(Jr,En))return!1;return!0}function Av(Jr,mn){return xu(Jr,mn)}function Cv(Jr,mn,En){En=typeof En=="function"?En:gr;var In=En?En(Jr,mn):gr;return In===gr?xu(Jr,mn,gr,En):!!In}function Ih(Jr){if(!jo(Jr))return!1;var mn=rl(Jr);return mn==Xn||mn==zn||typeof Jr.message=="string"&&typeof Jr.name=="string"&&!Tu(Jr)}function wv(Jr){return typeof Jr=="number"&&Wh(Jr)}function rc(Jr){if(!Lo(Jr))return!1;var mn=rl(Jr);return mn==Zn||mn==Pi||mn==kn||mn==ns}function dp(Jr){return typeof Jr=="number"&&Jr==Zs(Jr)}function md(Jr){return typeof Jr=="number"&&Jr>-1&&Jr%1==0&&Jr<=wn}function Lo(Jr){var mn=typeof Jr;return Jr!=null&&(mn=="object"||mn=="function")}function jo(Jr){return Jr!=null&&typeof Jr=="object"}var hp=Ms?Rs(Ms):km;function Rv(Jr,mn){return Jr===mn||rh(Jr,mn,yh(mn))}function Iv(Jr,mn,En){return En=typeof En=="function"?En:gr,rh(Jr,mn,yh(mn),En)}function Mv(Jr){return fp(Jr)&&Jr!=+Jr}function kv(Jr){if(mg(Jr))throw new js(Er);return nf(Jr)}function Pv(Jr){return Jr===null}function Dv(Jr){return Jr==null}function fp(Jr){return typeof Jr=="number"||jo(Jr)&&rl(Jr)==Bi}function Tu(Jr){if(!jo(Jr)||rl(Jr)!=Xi)return!1;var mn=Yl(Jr);if(mn===null)return!0;var En=Zi.call(mn,"constructor")&&mn.constructor;return typeof En=="function"&&En instanceof En&&xc.call(En)==co}var Mh=no?Rs(no):Pm;function Lv(Jr){return dp(Jr)&&Jr>=-wn&&Jr<=wn}var pp=Js?Rs(Js):Dm;function gd(Jr){return typeof Jr=="string"||!Xs(Jr)&&jo(Jr)&&rl(Jr)==Li}function ml(Jr){return typeof Jr=="symbol"||jo(Jr)&&rl(Jr)==es}var Qc=io?Rs(io):Lm;function Ov(Jr){return Jr===gr}function Fv(Jr){return jo(Jr)&&Zo(Jr)==ds}function Nv(Jr){return jo(Jr)&&rl(Jr)==Is}var jv=sd(ih),Bv=sd(function(Jr,mn){return Jr<=mn});function mp(Jr){if(!Jr)return[];if(ll(Jr))return gd(Jr)?el(Jr):ol(Jr);if(hu&&Jr[hu])return Jo(Jr[hu]());var mn=Zo(Jr),En=mn==Ya?Uc:mn==ls?Hc:Zc;return En(Jr)}function nc(Jr){if(!Jr)return Jr===0?Jr:0;if(Jr=Tl(Jr),Jr===On||Jr===-On){var mn=Jr<0?-1:1;return mn*_n}return Jr===Jr?Jr:0}function Zs(Jr){var mn=nc(Jr),En=mn%1;return mn===mn?En?mn-En:mn:0}function gp(Jr){return Jr?Tc(Zs(Jr),0,Mn):0}function Tl(Jr){if(typeof Jr=="number")return Jr;if(ml(Jr))return Tn;if(Lo(Jr)){var mn=typeof Jr.valueOf=="function"?Jr.valueOf():Jr;Jr=Lo(mn)?mn+"":mn}if(typeof Jr!="string")return Jr===0?Jr:+Jr;Jr=Xo(Jr);var En=Sd.test(Jr);return En||Cd.test(Jr)?Xa(Jr.slice(2),En?2:8):_d.test(Jr)?Tn:+Jr}function vp(Jr){return Bl(Jr,cl(Jr))}function Uv(Jr){return Jr?Tc(Zs(Jr),-wn,wn):Jr===0?Jr:0}function Co(Jr){return Jr==null?"":pl(Jr)}var Hv=zc(function(Jr,mn){if(_u(mn)||ll(mn)){Bl(mn,qo(mn),Jr);return}for(var En in mn)Zi.call(mn,En)&&vu(Jr,En,mn[En])}),bp=zc(function(Jr,mn){Bl(mn,cl(mn),Jr)}),vd=zc(function(Jr,mn,En,In){Bl(mn,cl(mn),Jr,In)}),Vv=zc(function(Jr,mn,En,In){Bl(mn,qo(mn),Jr,In)}),Wv=ec(Qd);function Gv(Jr,mn){var En=Kc(Jr);return mn==null?En:Yh(En,mn)}var qv=to(function(Jr,mn){Jr=To(Jr);var En=-1,In=mn.length,Un=In>2?mn[2]:gr;for(Un&&nl(mn[0],mn[1],Un)&&(In=1);++En<In;)for(var Qn=mn[En],Ci=cl(Qn),Oi=-1,Ki=Ci.length;++Oi<Ki;){var as=Ci[Oi],ss=Jr[as];(ss===gr||Dl(ss,dc[as])&&!Zi.call(Jr,as))&&(Jr[as]=Qn[as])}return Jr}),Kv=to(function(Jr){return Jr.push(gr,Lf),Ks(yp,gr,Jr)});function zv(Jr,mn){return As(Jr,Vs(mn,3),jl)}function Yv(Jr,mn){return As(Jr,Vs(mn,3),Jd)}function Xv(Jr,mn){return Jr==null?Jr:Zd(Jr,Vs(mn,3),cl)}function Qv(Jr,mn){return Jr==null?Jr:ef(Jr,Vs(mn,3),cl)}function Zv(Jr,mn){return Jr&&jl(Jr,Vs(mn,3))}function Jv(Jr,mn){return Jr&&Jd(Jr,Vs(mn,3))}function eb(Jr){return Jr==null?[]:Zu(Jr,qo(Jr))}function tb(Jr){return Jr==null?[]:Zu(Jr,cl(Jr))}function kh(Jr,mn,En){var In=Jr==null?gr:Ac(Jr,mn);return In===gr?En:In}function rb(Jr,mn){return Jr!=null&&Nf(Jr,mn,Tm)}function Ph(Jr,mn){return Jr!=null&&Nf(Jr,mn,Am)}var nb=If(function(Jr,mn,En){mn!=null&&typeof mn.toString!="function"&&(mn=so.call(mn)),Jr[mn]=En},Lh(ul)),ib=If(function(Jr,mn,En){mn!=null&&typeof mn.toString!="function"&&(mn=so.call(mn)),Zi.call(Jr,mn)?Jr[mn].push(En):Jr[mn]=[En]},Vs),ab=to(yu);function qo(Jr){return ll(Jr)?Kh(Jr):nh(Jr)}function cl(Jr){return ll(Jr)?Kh(Jr,!0):Om(Jr)}function sb(Jr,mn){var En={};return mn=Vs(mn,3),jl(Jr,function(In,Un,Qn){Zl(En,mn(In,Un,Qn),In)}),En}function ob(Jr,mn){var En={};return mn=Vs(mn,3),jl(Jr,function(In,Un,Qn){Zl(En,Un,mn(In,Un,Qn))}),En}var lb=zc(function(Jr,mn,En){Ju(Jr,mn,En)}),yp=zc(function(Jr,mn,En,In){Ju(Jr,mn,En,In)}),cb=ec(function(Jr,mn){var En={};if(Jr==null)return En;var In=!1;mn=qs(mn,function(Qn){return Qn=pc(Qn,Jr),In||(In=Qn.length>1),Qn}),Bl(Jr,vh(Jr),En),In&&(En=$l(En,Br|Hr|Gr,ng));for(var Un=mn.length;Un--;)ch(En,mn[Un]);return En});function ub(Jr,mn){return xp(Jr,pd(Vs(mn)))}var db=ec(function(Jr,mn){return Jr==null?{}:Nm(Jr,mn)});function xp(Jr,mn){if(Jr==null)return{};var En=qs(vh(Jr),function(In){return[In]});return mn=Vs(mn),df(Jr,En,function(In,Un){return mn(In,Un[0])})}function hb(Jr,mn,En){mn=pc(mn,Jr);var In=-1,Un=mn.length;for(Un||(Un=1,Jr=gr);++In<Un;){var Qn=Jr==null?gr:Jr[Ul(mn[In])];Qn===gr&&(In=Un,Qn=En),Jr=rc(Qn)?Qn.call(Jr):Qn}return Jr}function fb(Jr,mn,En){return Jr==null?Jr:Eu(Jr,mn,En)}function pb(Jr,mn,En,In){return In=typeof In=="function"?In:gr,Jr==null?Jr:Eu(Jr,mn,En,In)}var Ep=Pf(qo),$p=Pf(cl);function mb(Jr,mn,En){var In=Xs(Jr),Un=In||gc(Jr)||Qc(Jr);if(mn=Vs(mn,4),En==null){var Qn=Jr&&Jr.constructor;Un?En=In?new Qn:[]:Lo(Jr)?En=rc(Qn)?Kc(Yl(Jr)):{}:En={}}return(Un?po:jl)(Jr,function(Ci,Oi,Ki){return mn(En,Ci,Oi,Ki)}),En}function gb(Jr,mn){return Jr==null?!0:ch(Jr,mn)}function vb(Jr,mn,En){return Jr==null?Jr:gf(Jr,mn,hh(En))}function bb(Jr,mn,En,In){return In=typeof In=="function"?In:gr,Jr==null?Jr:gf(Jr,mn,hh(En),In)}function Zc(Jr){return Jr==null?[]:Fo(Jr,qo(Jr))}function yb(Jr){return Jr==null?[]:Fo(Jr,cl(Jr))}function xb(Jr,mn,En){return En===gr&&(En=mn,mn=gr),En!==gr&&(En=Tl(En),En=En===En?En:0),mn!==gr&&(mn=Tl(mn),mn=mn===mn?mn:0),Tc(Tl(Jr),mn,En)}function Eb(Jr,mn,En){return mn=nc(mn),En===gr?(En=mn,mn=0):En=nc(En),Jr=Tl(Jr),Cm(Jr,mn,En)}function $b(Jr,mn,En){if(En&&typeof En!="boolean"&&nl(Jr,mn,En)&&(mn=En=gr),En===gr&&(typeof mn=="boolean"?(En=mn,mn=gr):typeof Jr=="boolean"&&(En=Jr,Jr=gr)),Jr===gr&&mn===gr?(Jr=0,mn=1):(Jr=nc(Jr),mn===gr?(mn=Jr,Jr=0):mn=nc(mn)),Jr>mn){var In=Jr;Jr=mn,mn=In}if(En||Jr%1||mn%1){var Un=Gh();return Qo(Jr+Un*(mn-Jr+Za("1e-"+((Un+"").length-1))),mn)}return sh(Jr,mn)}var _b=Yc(function(Jr,mn,En){return mn=mn.toLowerCase(),Jr+(En?_p(mn):mn)});function _p(Jr){return Dh(Co(Jr).toLowerCase())}function Sp(Jr){return Jr=Co(Jr),Jr&&Jr.replace(Id,Ol).replace(jd,"")}function Sb(Jr,mn,En){Jr=Co(Jr),mn=pl(mn);var In=Jr.length;En=En===gr?In:Tc(Zs(En),0,In);var Un=En;return En-=mn.length,En>=0&&Jr.slice(En,Un)==mn}function Tb(Jr){return Jr=Co(Jr),Jr&&Go.test(Jr)?Jr.replace(Cl,cc):Jr}function Ab(Jr){return Jr=Co(Jr),Jr&&vc.test(Jr)?Jr.replace(Vl,"\\$&"):Jr}var Cb=Yc(function(Jr,mn,En){return Jr+(En?"-":"")+mn.toLowerCase()}),wb=Yc(function(Jr,mn,En){return Jr+(En?" ":"")+mn.toLowerCase()}),Rb=Cf("toLowerCase");function Ib(Jr,mn,En){Jr=Co(Jr),mn=Zs(mn);var In=mn?uc(Jr):0;if(!mn||In>=mn)return Jr;var Un=(mn-In)/2;return ad(qu(Un),En)+Jr+ad(Gu(Un),En)}function Mb(Jr,mn,En){Jr=Co(Jr),mn=Zs(mn);var In=mn?uc(Jr):0;return mn&&In<mn?Jr+ad(mn-In,En):Jr}function kb(Jr,mn,En){Jr=Co(Jr),mn=Zs(mn);var In=mn?uc(Jr):0;return mn&&In<mn?ad(mn-In,En)+Jr:Jr}function Pb(Jr,mn,En){return En||mn==null?mn=0:mn&&(mn=+mn),jp(Co(Jr).replace(Rl,""),mn||0)}function Db(Jr,mn,En){return(En?nl(Jr,mn,En):mn===gr)?mn=1:mn=Zs(mn),oh(Co(Jr),mn)}function Lb(){var Jr=arguments,mn=Co(Jr[0]);return Jr.length<3?mn:mn.replace(Jr[1],Jr[2])}var Ob=Yc(function(Jr,mn,En){return Jr+(En?"_":"")+mn.toLowerCase()});function Fb(Jr,mn,En){return En&&typeof En!="number"&&nl(Jr,mn,En)&&(mn=En=gr),En=En===gr?Mn:En>>>0,En?(Jr=Co(Jr),Jr&&(typeof mn=="string"||mn!=null&&!Mh(mn))&&(mn=pl(mn),!mn&&yl(Jr))?mc(el(Jr),0,En):Jr.split(mn,En)):[]}var Nb=Yc(function(Jr,mn,En){return Jr+(En?" ":"")+Dh(mn)});function jb(Jr,mn,En){return Jr=Co(Jr),En=En==null?0:Tc(Zs(En),0,Jr.length),mn=pl(mn),Jr.slice(En,En+mn.length)==mn}function Bb(Jr,mn,En){var In=Yn.templateSettings;En&&nl(Jr,mn,En)&&(mn=gr),Jr=Co(Jr),mn=vd({},mn,In,Df);var Un=vd({},mn.imports,In.imports,Df),Qn=qo(Un),Ci=Fo(Un,Qn),Oi,Ki,as=0,ss=mn.interpolate||Ic,us="__p += '",gs=yc((mn.escape||Ic).source+"|"+ss.source+"|"+(ss===Hl?$d:Ic).source+"|"+(mn.evaluate||Ic).source+"|$","g"),ks="//# sourceURL="+(Zi.call(mn,"sourceURL")?(mn.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ii+"]")+`
`;Jr.replace(gs,function(Gs,lo,mo,gl,il,vl){return mo||(mo=gl),us+=Jr.slice(as,vl).replace(Md,Bc),lo&&(Oi=!0,us+=`' +
__e(`+lo+`) +
'`),il&&(Ki=!0,us+=`';
`+il+`;
__p += '`),mo&&(us+=`' +
((__t = (`+mo+`)) == null ? '' : __t) +
'`),as=vl+Gs.length,Gs}),us+=`';
`;var Ws=Zi.call(mn,"variable")&&mn.variable;if(!Ws)us=`with (obj) {
`+us+`
}
`;else if(xd.test(Ws))throw new js(wr);us=(Ki?us.replace(bo,""):us).replace(Bs,"$1").replace(oo,"$1;"),us="function("+(Ws||"obj")+`) {
`+(Ws?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Oi?", __e = _.escape":"")+(Ki?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+us+`return __p
}`;var eo=Ap(function(){return _o(Qn,ks+"return "+us).apply(gr,Ci)});if(eo.source=us,Ih(eo))throw eo;return eo}function Ub(Jr){return Co(Jr).toLowerCase()}function Hb(Jr){return Co(Jr).toUpperCase()}function Vb(Jr,mn,En){if(Jr=Co(Jr),Jr&&(En||mn===gr))return Xo(Jr);if(!Jr||!(mn=pl(mn)))return Jr;var In=el(Jr),Un=el(mn),Qn=Ao(In,Un),Ci=Do(In,Un)+1;return mc(In,Qn,Ci).join("")}function Wb(Jr,mn,En){if(Jr=Co(Jr),Jr&&(En||mn===gr))return Jr.slice(0,lu(Jr)+1);if(!Jr||!(mn=pl(mn)))return Jr;var In=el(Jr),Un=Do(In,el(mn))+1;return mc(In,0,Un).join("")}function Gb(Jr,mn,En){if(Jr=Co(Jr),Jr&&(En||mn===gr))return Jr.replace(Rl,"");if(!Jr||!(mn=pl(mn)))return Jr;var In=el(Jr),Un=Ao(In,el(mn));return mc(In,Un).join("")}function qb(Jr,mn){var En=Cn,In=Rn;if(Lo(mn)){var Un="separator"in mn?mn.separator:Un;En="length"in mn?Zs(mn.length):En,In="omission"in mn?pl(mn.omission):In}Jr=Co(Jr);var Qn=Jr.length;if(yl(Jr)){var Ci=el(Jr);Qn=Ci.length}if(En>=Qn)return Jr;var Oi=En-uc(In);if(Oi<1)return In;var Ki=Ci?mc(Ci,0,Oi).join(""):Jr.slice(0,Oi);if(Un===gr)return Ki+In;if(Ci&&(Oi+=Ki.length-Oi),Mh(Un)){if(Jr.slice(Oi).search(Un)){var as,ss=Ki;for(Un.global||(Un=yc(Un.source,Co(Cu.exec(Un))+"g")),Un.lastIndex=0;as=Un.exec(ss);)var us=as.index;Ki=Ki.slice(0,us===gr?Oi:us)}}else if(Jr.indexOf(pl(Un),Oi)!=Oi){var gs=Ki.lastIndexOf(Un);gs>-1&&(Ki=Ki.slice(0,gs))}return Ki+In}function Kb(Jr){return Jr=Co(Jr),Jr&&wl.test(Jr)?Jr.replace(Al,Vd):Jr}var zb=Yc(function(Jr,mn,En){return Jr+(En?" ":"")+mn.toUpperCase()}),Dh=Cf("toUpperCase");function Tp(Jr,mn,En){return Jr=Co(Jr),mn=En?gr:mn,mn===gr?Bd(Jr)?Nl(Jr):Ps(Jr):Jr.match(mn)||[]}var Ap=to(function(Jr,mn){try{return Ks(Jr,gr,mn)}catch(En){return Ih(En)?En:new js(En)}}),Yb=ec(function(Jr,mn){return po(mn,function(En){En=Ul(En),Zl(Jr,En,wh(Jr[En],Jr))}),Jr});function Xb(Jr){var mn=Jr==null?0:Jr.length,En=Vs();return Jr=mn?qs(Jr,function(In){if(typeof In[1]!="function")throw new tl(Cr);return[En(In[0]),In[1]]}):[],to(function(In){for(var Un=-1;++Un<mn;){var Qn=Jr[Un];if(Ks(Qn[0],this,In))return Ks(Qn[1],this,In)}})}function Qb(Jr){return $m($l(Jr,Br))}function Lh(Jr){return function(){return Jr}}function Zb(Jr,mn){return Jr==null||Jr!==Jr?mn:Jr}var Jb=Rf(),e1=Rf(!0);function ul(Jr){return Jr}function Oh(Jr){return af(typeof Jr=="function"?Jr:$l(Jr,Br))}function t1(Jr){return of($l(Jr,Br))}function r1(Jr,mn){return lf(Jr,$l(mn,Br))}var n1=to(function(Jr,mn){return function(En){return yu(En,Jr,mn)}}),i1=to(function(Jr,mn){return function(En){return yu(Jr,En,mn)}});function Fh(Jr,mn,En){var In=qo(mn),Un=Zu(mn,In);En==null&&!(Lo(mn)&&(Un.length||!In.length))&&(En=mn,mn=Jr,Jr=this,Un=Zu(mn,qo(mn)));var Qn=!(Lo(En)&&"chain"in En)||!!En.chain,Ci=rc(Jr);return po(Un,function(Oi){var Ki=mn[Oi];Jr[Oi]=Ki,Ci&&(Jr.prototype[Oi]=function(){var as=this.__chain__;if(Qn||as){var ss=Jr(this.__wrapped__),us=ss.__actions__=ol(this.__actions__);return us.push({func:Ki,args:arguments,thisArg:Jr}),ss.__chain__=as,ss}return Ki.apply(Jr,Mo([this.value()],arguments))})}),Jr}function a1(){return rs._===this&&(rs._=Qs),this}function Nh(){}function s1(Jr){return Jr=Zs(Jr),to(function(mn){return cf(mn,Jr)})}var o1=ph(qs),l1=ph(ko),c1=ph(Po);function Cp(Jr){return Eh(Jr)?_s(Ul(Jr)):jm(Jr)}function u1(Jr){return function(mn){return Jr==null?gr:Ac(Jr,mn)}}var d1=Mf(),h1=Mf(!0);function jh(){return[]}function Bh(){return!1}function f1(){return{}}function p1(){return""}function m1(){return!0}function g1(Jr,mn){if(Jr=Zs(Jr),Jr<1||Jr>wn)return[];var En=Mn,In=Qo(Jr,Mn);mn=Vs(mn),Jr-=Mn;for(var Un=yo(In,mn);++En<Jr;)mn(En);return Un}function v1(Jr){return Xs(Jr)?qs(Jr,Ul):ml(Jr)?[Jr]:ol(Kf(Co(Jr)))}function b1(Jr){var mn=++Hs;return Co(Jr)+mn}var y1=id(function(Jr,mn){return Jr+mn},0),x1=mh("ceil"),E1=id(function(Jr,mn){return Jr/mn},1),$1=mh("floor");function _1(Jr){return Jr&&Jr.length?Qu(Jr,ul,eh):gr}function S1(Jr,mn){return Jr&&Jr.length?Qu(Jr,Vs(mn,2),eh):gr}function T1(Jr){return Fs(Jr,ul)}function A1(Jr,mn){return Fs(Jr,Vs(mn,2))}function C1(Jr){return Jr&&Jr.length?Qu(Jr,ul,ih):gr}function w1(Jr,mn){return Jr&&Jr.length?Qu(Jr,Vs(mn,2),ih):gr}var R1=id(function(Jr,mn){return Jr*mn},1),I1=mh("round"),M1=id(function(Jr,mn){return Jr-mn},0);function k1(Jr){return Jr&&Jr.length?So(Jr,ul):0}function P1(Jr,mn){return Jr&&Jr.length?So(Jr,Vs(mn,2)):0}return Yn.after=tv,Yn.ary=ip,Yn.assign=Hv,Yn.assignIn=bp,Yn.assignInWith=vd,Yn.assignWith=Vv,Yn.at=Wv,Yn.before=ap,Yn.bind=wh,Yn.bindAll=Yb,Yn.bindKey=sp,Yn.castArray=fv,Yn.chain=tp,Yn.chunk=$g,Yn.compact=_g,Yn.concat=Sg,Yn.cond=Xb,Yn.conforms=Qb,Yn.constant=Lh,Yn.countBy=k0,Yn.create=Gv,Yn.curry=op,Yn.curryRight=lp,Yn.debounce=cp,Yn.defaults=qv,Yn.defaultsDeep=Kv,Yn.defer=rv,Yn.delay=nv,Yn.difference=Tg,Yn.differenceBy=Ag,Yn.differenceWith=Cg,Yn.drop=wg,Yn.dropRight=Rg,Yn.dropRightWhile=Ig,Yn.dropWhile=Mg,Yn.fill=kg,Yn.filter=D0,Yn.flatMap=F0,Yn.flatMapDeep=N0,Yn.flatMapDepth=j0,Yn.flatten=Qf,Yn.flattenDeep=Pg,Yn.flattenDepth=Dg,Yn.flip=iv,Yn.flow=Jb,Yn.flowRight=e1,Yn.fromPairs=Lg,Yn.functions=eb,Yn.functionsIn=tb,Yn.groupBy=B0,Yn.initial=Fg,Yn.intersection=Ng,Yn.intersectionBy=jg,Yn.intersectionWith=Bg,Yn.invert=nb,Yn.invertBy=ib,Yn.invokeMap=H0,Yn.iteratee=Oh,Yn.keyBy=V0,Yn.keys=qo,Yn.keysIn=cl,Yn.map=dd,Yn.mapKeys=sb,Yn.mapValues=ob,Yn.matches=t1,Yn.matchesProperty=r1,Yn.memoize=fd,Yn.merge=lb,Yn.mergeWith=yp,Yn.method=n1,Yn.methodOf=i1,Yn.mixin=Fh,Yn.negate=pd,Yn.nthArg=s1,Yn.omit=cb,Yn.omitBy=ub,Yn.once=av,Yn.orderBy=W0,Yn.over=o1,Yn.overArgs=sv,Yn.overEvery=l1,Yn.overSome=c1,Yn.partial=Rh,Yn.partialRight=up,Yn.partition=G0,Yn.pick=db,Yn.pickBy=xp,Yn.property=Cp,Yn.propertyOf=u1,Yn.pull=Wg,Yn.pullAll=Jf,Yn.pullAllBy=Gg,Yn.pullAllWith=qg,Yn.pullAt=Kg,Yn.range=d1,Yn.rangeRight=h1,Yn.rearg=ov,Yn.reject=z0,Yn.remove=zg,Yn.rest=lv,Yn.reverse=Ah,Yn.sampleSize=X0,Yn.set=fb,Yn.setWith=pb,Yn.shuffle=Q0,Yn.slice=Yg,Yn.sortBy=ev,Yn.sortedUniq=r0,Yn.sortedUniqBy=n0,Yn.split=Fb,Yn.spread=cv,Yn.tail=i0,Yn.take=a0,Yn.takeRight=s0,Yn.takeRightWhile=o0,Yn.takeWhile=l0,Yn.tap=_0,Yn.throttle=uv,Yn.thru=ud,Yn.toArray=mp,Yn.toPairs=Ep,Yn.toPairsIn=$p,Yn.toPath=v1,Yn.toPlainObject=vp,Yn.transform=mb,Yn.unary=dv,Yn.union=c0,Yn.unionBy=u0,Yn.unionWith=d0,Yn.uniq=h0,Yn.uniqBy=f0,Yn.uniqWith=p0,Yn.unset=gb,Yn.unzip=Ch,Yn.unzipWith=ep,Yn.update=vb,Yn.updateWith=bb,Yn.values=Zc,Yn.valuesIn=yb,Yn.without=m0,Yn.words=Tp,Yn.wrap=hv,Yn.xor=g0,Yn.xorBy=v0,Yn.xorWith=b0,Yn.zip=y0,Yn.zipObject=x0,Yn.zipObjectDeep=E0,Yn.zipWith=$0,Yn.entries=Ep,Yn.entriesIn=$p,Yn.extend=bp,Yn.extendWith=vd,Fh(Yn,Yn),Yn.add=y1,Yn.attempt=Ap,Yn.camelCase=_b,Yn.capitalize=_p,Yn.ceil=x1,Yn.clamp=xb,Yn.clone=pv,Yn.cloneDeep=gv,Yn.cloneDeepWith=vv,Yn.cloneWith=mv,Yn.conformsTo=bv,Yn.deburr=Sp,Yn.defaultTo=Zb,Yn.divide=E1,Yn.endsWith=Sb,Yn.eq=Dl,Yn.escape=Tb,Yn.escapeRegExp=Ab,Yn.every=P0,Yn.find=L0,Yn.findIndex=Yf,Yn.findKey=zv,Yn.findLast=O0,Yn.findLastIndex=Xf,Yn.findLastKey=Yv,Yn.floor=$1,Yn.forEach=rp,Yn.forEachRight=np,Yn.forIn=Xv,Yn.forInRight=Qv,Yn.forOwn=Zv,Yn.forOwnRight=Jv,Yn.get=kh,Yn.gt=yv,Yn.gte=xv,Yn.has=rb,Yn.hasIn=Ph,Yn.head=Zf,Yn.identity=ul,Yn.includes=U0,Yn.indexOf=Og,Yn.inRange=Eb,Yn.invoke=ab,Yn.isArguments=Rc,Yn.isArray=Xs,Yn.isArrayBuffer=Ev,Yn.isArrayLike=ll,Yn.isArrayLikeObject=Uo,Yn.isBoolean=$v,Yn.isBuffer=gc,Yn.isDate=_v,Yn.isElement=Sv,Yn.isEmpty=Tv,Yn.isEqual=Av,Yn.isEqualWith=Cv,Yn.isError=Ih,Yn.isFinite=wv,Yn.isFunction=rc,Yn.isInteger=dp,Yn.isLength=md,Yn.isMap=hp,Yn.isMatch=Rv,Yn.isMatchWith=Iv,Yn.isNaN=Mv,Yn.isNative=kv,Yn.isNil=Dv,Yn.isNull=Pv,Yn.isNumber=fp,Yn.isObject=Lo,Yn.isObjectLike=jo,Yn.isPlainObject=Tu,Yn.isRegExp=Mh,Yn.isSafeInteger=Lv,Yn.isSet=pp,Yn.isString=gd,Yn.isSymbol=ml,Yn.isTypedArray=Qc,Yn.isUndefined=Ov,Yn.isWeakMap=Fv,Yn.isWeakSet=Nv,Yn.join=Ug,Yn.kebabCase=Cb,Yn.last=Sl,Yn.lastIndexOf=Hg,Yn.lowerCase=wb,Yn.lowerFirst=Rb,Yn.lt=jv,Yn.lte=Bv,Yn.max=_1,Yn.maxBy=S1,Yn.mean=T1,Yn.meanBy=A1,Yn.min=C1,Yn.minBy=w1,Yn.stubArray=jh,Yn.stubFalse=Bh,Yn.stubObject=f1,Yn.stubString=p1,Yn.stubTrue=m1,Yn.multiply=R1,Yn.nth=Vg,Yn.noConflict=a1,Yn.noop=Nh,Yn.now=hd,Yn.pad=Ib,Yn.padEnd=Mb,Yn.padStart=kb,Yn.parseInt=Pb,Yn.random=$b,Yn.reduce=q0,Yn.reduceRight=K0,Yn.repeat=Db,Yn.replace=Lb,Yn.result=hb,Yn.round=I1,Yn.runInContext=Vi,Yn.sample=Y0,Yn.size=Z0,Yn.snakeCase=Ob,Yn.some=J0,Yn.sortedIndex=Xg,Yn.sortedIndexBy=Qg,Yn.sortedIndexOf=Zg,Yn.sortedLastIndex=Jg,Yn.sortedLastIndexBy=e0,Yn.sortedLastIndexOf=t0,Yn.startCase=Nb,Yn.startsWith=jb,Yn.subtract=M1,Yn.sum=k1,Yn.sumBy=P1,Yn.template=Bb,Yn.times=g1,Yn.toFinite=nc,Yn.toInteger=Zs,Yn.toLength=gp,Yn.toLower=Ub,Yn.toNumber=Tl,Yn.toSafeInteger=Uv,Yn.toString=Co,Yn.toUpper=Hb,Yn.trim=Vb,Yn.trimEnd=Wb,Yn.trimStart=Gb,Yn.truncate=qb,Yn.unescape=Kb,Yn.uniqueId=b1,Yn.upperCase=zb,Yn.upperFirst=Dh,Yn.each=rp,Yn.eachRight=np,Yn.first=Zf,Fh(Yn,function(){var Jr={};return jl(Yn,function(mn,En){Zi.call(Yn.prototype,En)||(Jr[En]=mn)}),Jr}(),{chain:!1}),Yn.VERSION=vr,po(["bind","bindKey","curry","curryRight","partial","partialRight"],function(Jr){Yn[Jr].placeholder=Yn}),po(["drop","take"],function(Jr,mn){uo.prototype[Jr]=function(En){En=En===gr?1:Wo(Zs(En),0);var In=this.__filtered__&&!mn?new uo(this):this.clone();return In.__filtered__?In.__takeCount__=Qo(En,In.__takeCount__):In.__views__.push({size:Qo(En,Mn),type:Jr+(In.__dir__<0?"Right":"")}),In},uo.prototype[Jr+"Right"]=function(En){return this.reverse()[Jr](En).reverse()}}),po(["filter","map","takeWhile"],function(Jr,mn){var En=mn+1,In=En==Hn||En==qn;uo.prototype[Jr]=function(Un){var Qn=this.clone();return Qn.__iteratees__.push({iteratee:Vs(Un,3),type:En}),Qn.__filtered__=Qn.__filtered__||In,Qn}}),po(["head","last"],function(Jr,mn){var En="take"+(mn?"Right":"");uo.prototype[Jr]=function(){return this[En](1).value()[0]}}),po(["initial","tail"],function(Jr,mn){var En="drop"+(mn?"":"Right");uo.prototype[Jr]=function(){return this.__filtered__?new uo(this):this[En](1)}}),uo.prototype.compact=function(){return this.filter(ul)},uo.prototype.find=function(Jr){return this.filter(Jr).head()},uo.prototype.findLast=function(Jr){return this.reverse().find(Jr)},uo.prototype.invokeMap=to(function(Jr,mn){return typeof Jr=="function"?new uo(this):this.map(function(En){return yu(En,Jr,mn)})}),uo.prototype.reject=function(Jr){return this.filter(pd(Vs(Jr)))},uo.prototype.slice=function(Jr,mn){Jr=Zs(Jr);var En=this;return En.__filtered__&&(Jr>0||mn<0)?new uo(En):(Jr<0?En=En.takeRight(-Jr):Jr&&(En=En.drop(Jr)),mn!==gr&&(mn=Zs(mn),En=mn<0?En.dropRight(-mn):En.take(mn-Jr)),En)},uo.prototype.takeRightWhile=function(Jr){return this.reverse().takeWhile(Jr).reverse()},uo.prototype.toArray=function(){return this.take(Mn)},jl(uo.prototype,function(Jr,mn){var En=/^(?:filter|find|map|reject)|While$/.test(mn),In=/^(?:head|last)$/.test(mn),Un=Yn[In?"take"+(mn=="last"?"Right":""):mn],Qn=In||/^find/.test(mn);Un&&(Yn.prototype[mn]=function(){var Ci=this.__wrapped__,Oi=In?[1]:arguments,Ki=Ci instanceof uo,as=Oi[0],ss=Ki||Xs(Ci),us=function(lo){var mo=Un.apply(Yn,Mo([lo],Oi));return In&&gs?mo[0]:mo};ss&&En&&typeof as=="function"&&as.length!=1&&(Ki=ss=!1);var gs=this.__chain__,ks=!!this.__actions__.length,Ws=Qn&&!gs,eo=Ki&&!ks;if(!Qn&&ss){Ci=eo?Ci:new uo(this);var Gs=Jr.apply(Ci,Oi);return Gs.__actions__.push({func:ud,args:[us],thisArg:gr}),new El(Gs,gs)}return Ws&&eo?Jr.apply(this,Oi):(Gs=this.thru(us),Ws?In?Gs.value()[0]:Gs.value():Gs)})}),po(["pop","push","shift","sort","splice","unshift"],function(Jr){var mn=Vc[Jr],En=/^(?:push|sort|unshift)$/.test(Jr)?"tap":"thru",In=/^(?:pop|shift)$/.test(Jr);Yn.prototype[Jr]=function(){var Un=arguments;if(In&&!this.__chain__){var Qn=this.value();return mn.apply(Xs(Qn)?Qn:[],Un)}return this[En](function(Ci){return mn.apply(Xs(Ci)?Ci:[],Un)})}}),jl(uo.prototype,function(Jr,mn){var En=Yn[mn];if(En){var In=En.name+"";Zi.call(qc,In)||(qc[In]=[]),qc[In].push({name:mn,func:En})}}),qc[nd(gr,sn).name]=[{name:"wrapper",func:gr}],uo.prototype.clone=qp,uo.prototype.reverse=Kp,uo.prototype.value=zp,Yn.prototype.at=S0,Yn.prototype.chain=T0,Yn.prototype.commit=A0,Yn.prototype.next=C0,Yn.prototype.plant=R0,Yn.prototype.reverse=I0,Yn.prototype.toJSON=Yn.prototype.valueOf=Yn.prototype.value=M0,Yn.prototype.first=Yn.prototype.head,hu&&(Yn.prototype[hu]=w0),Yn},Kl=qd();Os?((Os.exports=Kl)._=Kl,cs._=Kl):rs._=Kl}).call(commonjsGlobal)})(lodash,lodash.exports);lodash.exports;const inputFocusStyle=(mr="&")=>({theme:hr,$hasError:gr=!1})=>lt$4`
    outline: none;
    box-shadow: none;
    transition-property: border-color, box-shadow, fill;
    transition-duration: 0.2s;

    ${mr}:focus-within {
      border: 1px solid ${gr?hr.colors.danger600:hr.colors.primary600};
      box-shadow: ${gr?hr.colors.danger600:hr.colors.primary600} 0px 0px 0px 2px;
    }
  `,[FieldProvider,useField$1]=createContext$1("Field",{}),Root$6=reactExports.forwardRef(({children:mr,name:hr,error:gr=!1,hint:vr,id:xr,required:Er=!1,...Cr},wr)=>{const Rr=useId(xr),[kr,Dr]=reactExports.useState();return jsxRuntimeExports.jsx(FieldProvider,{name:hr,id:Rr,error:gr,hint:vr,required:Er,labelNode:kr,setLabelNode:Dr,children:jsxRuntimeExports.jsx(Flex,{direction:"column",alignItems:"stretch",gap:1,ref:wr,...Cr,children:mr})})}),Label=reactExports.forwardRef(({children:mr,action:hr,...gr},vr)=>{const{id:xr,required:Er,setLabelNode:Cr}=useField$1("Label"),wr=useComposedRefs(vr,Cr);return mr?jsxRuntimeExports.jsxs(TypographyLabel,{ref:wr,variant:"pi",textColor:"neutral800",fontWeight:"bold",...gr,id:`${xr}-label`,htmlFor:xr,tag:"label",ellipsis:!0,children:[mr,Er&&jsxRuntimeExports.jsx(Typography,{"aria-hidden":!0,lineHeight:"1em",textColor:"danger600",children:"*"}),hr&&jsxRuntimeExports.jsx(LabelAction,{marginLeft:1,children:hr})]}):null}),TypographyLabel=dt$3(Typography)`
  display: flex;
`,LabelAction=dt$3(Flex)`
  line-height: 0;
  color: ${({theme:mr})=>mr.colors.neutral500};
`,Input$2=reactExports.forwardRef(({endAction:mr,startAction:hr,disabled:gr=!1,onChange:vr,hasError:xr,required:Er,className:Cr,size:wr="M",...Rr},kr)=>{const{id:Dr,error:Br,hint:Hr,name:Gr,required:qr}=useField$1("Input");let zr;Br?zr=`${Dr}-error`:Hr&&(zr=`${Dr}-hint`);const Qr=!!Br,sn=reactExports.useRef(null),hn=reactExports.useRef(null),vn=useComposedRefs(hn,kr),yn=gn=>{!gr&&vr&&vr(gn)};return reactExports.useLayoutEffect(()=>{if(sn.current&&hn.current){const gn=sn.current.offsetWidth,bn=hn.current;if(bn){const xn=gn+8+16;bn.style.paddingRight=`${xn}px`}}},[mr]),jsxRuntimeExports.jsxs(InputWrapper,{gap:2,justifyContent:"space-between",$hasError:Qr||xr,$disabled:gr,$size:wr,$hasLeftAction:!!hr,$hasRightAction:!!mr,className:Cr,children:[hr,jsxRuntimeExports.jsx(InputElement,{id:Dr,name:Gr,ref:vn,$size:wr,"aria-describedby":zr,"aria-invalid":Qr||xr,"aria-disabled":gr,disabled:gr,"data-disabled":gr?"":void 0,onChange:yn,"aria-required":qr||Er,$hasLeftAction:!!hr,$hasRightAction:!!mr,...Rr}),mr&&jsxRuntimeExports.jsx(EndAction,{ref:sn,children:mr})]})}),InputElement=dt$3.input`
  border: none;
  border-radius: ${({theme:mr})=>mr.borderRadius};
  cursor: ${mr=>mr["aria-disabled"]?"not-allowed":void 0};

  color: ${({theme:mr})=>mr.colors.neutral800};
  font-weight: 400;
  font-size: ${mr=>mr.theme.fontSizes[2]};
  line-height: 2.2rem;
  display: block;
  width: 100%;
  background: inherit;

  ::placeholder {
    color: ${({theme:mr})=>mr.colors.neutral500};
    opacity: 1;
  }

  &[aria-disabled='true'] {
    color: inherit;
  }

  //focus managed by InputWrapper
  &:focus {
    outline: none;
    box-shadow: none;
  }

  ${mr=>{switch(mr.$size){case"S":return lt$4`
          padding-inline-start: ${mr.$hasLeftAction?0:mr.theme.spaces[4]};
          padding-inline-end: ${mr.$hasRightAction?0:mr.theme.spaces[4]};
          padding-block: ${mr.theme.spaces[1]};
        `;default:return lt$4`
          padding-inline-start: ${mr.$hasLeftAction?0:mr.theme.spaces[4]};
          padding-inline-end: ${mr.$hasRightAction?0:mr.theme.spaces[4]};
          padding-block: ${mr.theme.spaces[2]};
        `}}}
`,EndAction=dt$3(Flex)`
  position: absolute;
  right: ${({theme:mr})=>mr.spaces[4]};
  top: 50%;
  transform: translateY(-50%);
`,InputWrapper=dt$3(Flex)`
  border: 1px solid ${({theme:mr,$hasError:hr})=>hr?mr.colors.danger600:mr.colors.neutral200};
  border-radius: ${({theme:mr})=>mr.borderRadius};
  background: ${({theme:mr})=>mr.colors.neutral0};
  padding-inline-start: ${({$hasLeftAction:mr,theme:hr})=>mr?hr.spaces[4]:0};
  position: relative;

  ${inputFocusStyle()}
  ${({theme:mr,$disabled:hr})=>hr?lt$4`
          color: ${mr.colors.neutral600};
          background: ${mr.colors.neutral150};
        `:void 0};
`,Hint=()=>{const{id:mr,hint:hr,error:gr}=useField$1("Hint");return!hr||gr?null:jsxRuntimeExports.jsx(Typography,{variant:"pi",tag:"p",id:`${mr}-hint`,textColor:"neutral600",children:hr})},Error$1$1=()=>{const{id:mr,error:hr}=useField$1("Error");return!hr||typeof hr!="string"?null:jsxRuntimeExports.jsx(Typography,{variant:"pi",tag:"p",id:`${mr}-error`,textColor:"danger600","data-strapi-field-error":!0,children:hr})},Action$1=reactExports.forwardRef(({label:mr,children:hr,...gr},vr)=>jsxRuntimeExports.jsx(FieldActionWrapper,{justifyContent:"unset",background:"transparent",borderStyle:"none",...gr,type:"button",tag:"button",ref:vr,children:jsxRuntimeExports.jsx(AccessibleIcon,{label:mr,children:hr})})),FieldActionWrapper=dt$3(Flex)`
  font-size: 1.6rem;
  padding: 0;
`,Field=Object.freeze(Object.defineProperty({__proto__:null,Action:Action$1,Error:Error$1$1,Hint,Input:Input$2,Label,Root:Root$6,useField:useField$1},Symbol.toStringTag,{value:"Module"})),CarouselInput=reactExports.forwardRef(({actions:mr,children:hr,error:gr,hint:vr,label:xr,labelAction:Er,nextLabel:Cr,onNext:wr,onPrevious:Rr,previousLabel:kr,required:Dr,secondaryLabel:Br,selectedSlide:Hr,id:Gr,...qr},zr)=>{const Qr=useId(Gr);return jsxRuntimeExports.jsx(Root$6,{hint:vr,error:gr,id:Qr,required:Dr,children:jsxRuntimeExports.jsxs(Flex,{direction:"column",alignItems:"stretch",gap:1,children:[xr&&jsxRuntimeExports.jsx(Label,{action:Er,children:xr}),jsxRuntimeExports.jsx(Carousel,{ref:zr,actions:mr,label:xr,nextLabel:Cr,onNext:wr,onPrevious:Rr,previousLabel:kr,secondaryLabel:Br,selectedSlide:Hr,id:Qr,...qr,children:hr}),jsxRuntimeExports.jsx(Hint,{}),jsxRuntimeExports.jsx(Error$1$1,{})]})})}),CarouselActions=({horizontal:mr=!0,...hr})=>jsxRuntimeExports.jsx(Flex,{justifyContent:"center",direction:mr?"row":"column",alignItems:mr?"center":"stretch",position:"absolute",width:"100%",bottom:1,gap:1,...hr});dt$3(Box)`
  ${ellipsis}
`;const CarouselSlide=({label:mr,children:hr,selected:gr=!1,...vr})=>jsxRuntimeExports.jsx(Flex,{alignItems:"center",display:gr?"flex":"none",role:"group","aria-roledescription":"slide","aria-label":mr,justifyContent:"center",height:"124px",width:"100%",...vr,children:hr}),loaderSvg="data:image/svg+xml,%3csvg%20width='63'%20height='63'%20viewBox='0%200%2063%2063'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M42.5563%2011.9816C39.484%2010.3071%2035.8575%209.29097%2032.3354%209.13521C28.6443%208.92888%2024.8295%209.72318%2021.3336%2011.4129C20.9123%2011.5901%2020.5376%2011.8101%2020.1722%2012.0249L20.0108%2012.1179C19.8774%2012.1951%2019.7441%2012.2724%2019.608%2012.3536C19.3253%2012.5146%2019.0492%2012.6744%2018.7544%2012.8792C18.5463%2013.0329%2018.3395%2013.1759%2018.1301%2013.323C17.5658%2013.7208%2016.9868%2014.1317%2016.4983%2014.5979C14.8476%2015.9524%2013.5571%2017.6075%2012.6071%2018.9214C10.4365%2022.1566%209.08622%2025.9567%208.80702%2029.6143L8.7764%2030.1588C8.73328%2030.9196%208.68476%2031.7057%208.75353%2032.4555C8.76648%2032.6084%208.7661%2032.7638%208.77506%2032.914C8.78895%2033.229%208.80152%2033.5373%208.846%2033.8672L9.07396%2035.4221C9.09756%2035.5764%209.1198%2035.7413%209.1633%2035.9263L9.65919%2037.9272L10.138%2039.2823C10.2729%2039.6673%2010.4158%2040.0751%2010.6%2040.43C12.0292%2043.637%2014.1425%2046.4578%2016.7063%2048.585C19.0508%2050.5296%2021.824%2052.0023%2024.7491%2052.8452L26.2371%2053.2376C26.3781%2053.2693%2026.4926%2053.2889%2026.6031%2053.3058L26.7775%2053.3311C27.0052%2053.3636%2027.2195%2053.3986%2027.4445%2053.435C27.8598%2053.5076%2028.2672%2053.5748%2028.7079%2053.6183L30.5641%2053.7229C30.9516%2053.7249%2031.3352%2053.7068%2031.7081%2053.6874C31.9039%2053.681%2032.0984%2053.6681%2032.3288%2053.662C34.5253%2053.4772%2036.5106%2053.0634%2038.0516%2052.4652C38.1769%2052.4171%2038.3008%2052.3796%2038.4234%2052.3355C38.6727%2052.2499%2038.9259%2052.167%2039.1432%2052.0599L40.8591%2051.2626L42.5702%2050.266C42.9009%2050.0682%2043.0205%2049.6414%2042.8282%2049.2984C42.632%2048.9526%2042.2034%2048.8308%2041.8634%2049.0166L40.1792%2049.9218L38.4995%2050.6224C38.3169%2050.6953%2038.121%2050.7534%2037.9224%2050.8155C37.7838%2050.8489%2037.6518%2050.8983%2037.5012%2050.9408C36.0711%2051.435%2034.2445%2051.7425%2032.244%2051.8346C32.0442%2051.8383%2031.8471%2051.8379%2031.654%2051.8403C31.3051%2051.8414%2030.9602%2051.8451%2030.6392%2051.8305L28.9177%2051.6725C28.5476%2051.619%2028.1695%2051.5427%2027.7848%2051.4678C27.5639%2051.4167%2027.3376%2051.3737%2027.1299%2051.3374L26.9529%2051.2987C26.8704%2051.2834%2026.7772%2051.2667%2026.7333%2051.2543L25.3466%2050.8322C22.7651%2049.9789%2020.33%2048.5729%2018.2942%2046.7557C16.1056%2044.7951%2014.3339%2042.2335%2013.1742%2039.3582C12.0276%2036.6013%2011.5988%2033.2792%2011.9716%2030.0076C12.3145%2027.0213%2013.3948%2024.1635%2015.1858%2021.5083C15.3034%2021.3339%2015.421%2021.1596%2015.5212%2021.0196C16.4309%2019.8688%2017.5408%2018.5589%2018.9483%2017.496C19.3367%2017.1525%2019.7862%2016.856%2020.2611%2016.5478C20.4878%2016.4009%2020.7079%2016.2553%2020.8907%2016.1306C21.0974%2016.0048%2021.3188%2015.8831%2021.5348%2015.7694C21.6761%2015.6975%2021.8162%2015.619%2021.9388%2015.5576L22.1002%2015.4646C22.4002%2015.3037%2022.6749%2015.1546%2022.9908%2015.039L24.1186%2014.5715C24.3399%2014.4844%2024.5718%2014.4159%2024.7997%2014.3447C24.953%2014.2982%2025.0982%2014.2635%2025.2635%2014.2078C25.786%2014.0182%2026.3283%2013.9112%2026.9105%2013.7965C27.117%2013.7571%2027.3302%2013.7163%2027.5608%2013.6585C27.7553%2013.611%2027.9737%2013.5969%2028.2082%2013.5762C28.364%2013.5603%2028.5172%2013.5483%2028.6318%2013.5333C28.7876%2013.5173%2028.9342%2013.5066%2029.0927%2013.4867C29.3285%2013.4555%2029.5456%2013.4347%2029.7494%2013.4337C30.0237%2013.44%2030.2994%2013.4357%2030.5777%2013.4274C31.0811%2013.421%2031.5579%2013.4197%2032.0318%2013.4914C34.9664%2013.7352%2037.7144%2014.6085%2040.2052%2016.0868C42.3489%2017.3655%2044.2716%2019.1525%2045.7607%2021.264C47.0255%2023.0628%2047.9756%2025.0528%2048.4928%2027.0393C48.572%2027.3176%2048.6299%2027.5931%2048.6839%2027.8659C48.7154%2028.0428%2048.7563%2028.2145%2048.7892%2028.3636C48.8037%2028.4541%2048.8208%2028.5406%2048.8445%2028.6258C48.8749%2028.7443%2048.8986%2028.864%2048.9116%2028.9651L48.9793%2029.6047C48.9922%2029.7748%2049.0132%2029.9331%2049.0301%2030.0887C49.0668%2030.3268%2049.0889%2030.5608%2049.0964%2030.7561L49.1083%2031.9001C49.1312%2032.3307%2049.089%2032.7116%2049.0522%2033.0673C49.0384%2033.2598%2049.0126%2033.4443%2049.0123%2033.5824C48.9961%2033.6926%2048.9918%2033.7935%2048.9836%2033.8917C48.9753%2034.0072%2048.9724%2034.1148%2048.9414%2034.2554L48.5449%2036.3059C48.3134%2037.8623%2049.3793%2039.3365%2050.9488%2039.5822C52.0417%2039.7601%2053.1536%2039.2819%2053.7711%2038.3664C54.0063%2038.0176%2054.1604%2037.6257%2054.2227%2037.2064L54.5217%2035.2574C54.5514%2035.0756%2054.572%2034.83%2054.5846%2034.5791L54.6028%2034.2338C54.6098%2034.0598%2054.6223%2033.8779%2054.6347%2033.6788C54.6734%2033.1052%2054.7163%2032.4479%2054.6619%2031.8058L54.5867%2030.4289C54.5622%2030.0952%2054.5097%2029.76%2054.4559%2029.4181C54.431%2029.2572%2054.4048%2029.0896%2054.3826%2028.9074L54.2687%2028.104C54.2332%2027.9244%2054.1804%2027.7273%2054.1329%2027.5396L54.0643%2027.2454C54.0195%2027.071%2053.9773%2026.8927%2053.9338%2026.7076C53.8455%2026.3309%2053.7479%2025.9422%2053.613%2025.5571C52.84%2023.0292%2051.5383%2020.5194%2049.8338%2018.2799C47.8544%2015.682%2045.3333%2013.5087%2042.5563%2011.9816Z'%20fill='%234945FF'/%3e%3c/svg%3e",Loader=reactExports.forwardRef(({children:mr,small:hr=!1,...gr},vr)=>jsxRuntimeExports.jsxs("div",{role:"alert","aria-live":"assertive",ref:vr,...gr,children:[jsxRuntimeExports.jsx(VisuallyHidden,{children:mr}),jsxRuntimeExports.jsx(LoaderImg,{src:loaderSvg,"aria-hidden":!0,$small:hr})]})),rotation$1=mt$3`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(359deg);
  }
`,LoaderImg=dt$3.img`
  animation: ${rotation$1} 1s infinite linear;
  will-change: transform;
  ${({$small:mr,theme:hr})=>mr&&`width: ${hr.spaces[6]}; height: ${hr.spaces[6]};`}
`,Combobox=reactExports.forwardRef(({allowCustomValue:mr,autocomplete:hr,children:gr,className:vr,clearLabel:xr="clear",creatable:Er=!1,createMessage:Cr=Mn=>`Create "${Mn}"`,defaultFilterValue:wr,defaultTextValue:Rr,defaultOpen:kr=!1,open:Dr,onOpenChange:Br,disabled:Hr=!1,hasError:Gr,id:qr,filterValue:zr,hasMoreItems:Qr=!1,isPrintableCharacter:sn,loading:hn=!1,loadingMessage:vn="Loading content...",name:yn,noOptionsMessage:gn=()=>"No results found",onChange:bn,onClear:xn,onCreateOption:$n,onFilterValueChange:Sn,onInputChange:Cn,onTextValueChange:Rn,onLoadMore:Bn,placeholder:Fn="Select or enter a value",required:Hn=!1,size:Gn="M",startIcon:qn,textValue:On,value:wn,..._n},Tn)=>{const[Mn,Ln]=useControllableState$1({prop:Dr,defaultProp:kr,onChange:Br}),[jn,Kn]=useControllableState$1({prop:On,defaultProp:mr&&!Rr?wn:Rr,onChange:Rn}),[Nn,An]=useControllableState$1({prop:zr,defaultProp:wr,onChange:Sn}),kn=reactExports.useRef(null),Dn=reactExports.useRef(null),Vn=useComposedRefs(Dn,Tn),zn=reactExports.useRef(null),Xn=Ns=>{xn&&!Hr&&(Kn(""),An(""),xn(Ns),Dn.current.focus())},Zn=Ns=>{Ln(Ns)},Pi=Ns=>{Kn(Ns)},Ya=Ns=>{An(Ns)},Bi=Ns=>{Cn&&Cn(Ns)},zi=Ns=>{bn&&bn(Ns)},Xi=Ns=>{Bn&&Qr&&!hn&&Bn(Ns)},Ji=()=>{$n&&jn&&$n(jn)},ns=useId(),ps=`intersection-${stripReactIdOfColon(ns)}`;useIntersection(kn,Xi,{selectorToWatch:`#${ps}`,skipWhen:!Mn});const{error:ls,...Li}=useField$1("Combobox"),es=!!ls||Gr,os=Li.id??qr,ds=Li.name??yn,Is=Li.required||Hn;let ws;return ls?ws=`${os}-error`:Li.hint&&(ws=`${os}-hint`),jsxRuntimeExports.jsxs(Combobox$1$1.Root,{autocomplete:hr||(Er?"list":"both"),onOpenChange:Zn,open:Mn,onTextValueChange:Pi,textValue:jn,allowCustomValue:Er||mr,disabled:Hr,required:Is,value:wn,onValueChange:zi,filterValue:Nn,onFilterValueChange:Ya,isPrintableCharacter:sn,children:[jsxRuntimeExports.jsxs(Trigger$5,{$hasError:es,$size:Gn,className:vr,children:[jsxRuntimeExports.jsxs(Flex,{flex:"1",tag:"span",gap:3,children:[qn?jsxRuntimeExports.jsx(Flex,{flex:"0 0 1.6rem",tag:"span","aria-hidden":!0,children:qn}):null,jsxRuntimeExports.jsx(TextInput$1,{placeholder:Fn,id:os,"aria-invalid":!!ls,onChange:Bi,ref:Vn,name:ds,"aria-describedby":ws,..._n})]}),jsxRuntimeExports.jsxs(Flex,{tag:"span",gap:3,children:[jn&&xn?jsxRuntimeExports.jsx(IconBox$3,{tag:"button",hasRadius:!0,background:"transparent",type:"button",padding:0,color:"neutral600",borderStyle:"none",onClick:Xn,"aria-disabled":Hr,"aria-label":xr,title:xr,ref:zn,children:jsxRuntimeExports.jsx(ForwardRef$3$,{})}):null,jsxRuntimeExports.jsx(DownIcon$1,{children:jsxRuntimeExports.jsx(ForwardRef$4L,{fill:"neutral500"})})]})]}),jsxRuntimeExports.jsx(Combobox$1$1.Portal,{children:jsxRuntimeExports.jsx(Content$5,{sideOffset:4,children:jsxRuntimeExports.jsxs(Viewport$1,{ref:kn,children:[gr,Er?jsxRuntimeExports.jsx(Combobox$1$1.CreateItem,{onPointerUp:Ji,onClick:Ji,asChild:!0,children:jsxRuntimeExports.jsx(OptionBox,{children:jsxRuntimeExports.jsx(Typography,{children:Cr(jn??"")})})}):null,!Er&&!hn?jsxRuntimeExports.jsx(Combobox$1$1.NoValueFound,{asChild:!0,children:jsxRuntimeExports.jsx(OptionBox,{$hasHover:!1,children:jsxRuntimeExports.jsx(Typography,{children:gn(jn??"")})})}):null,hn?jsxRuntimeExports.jsx(Flex,{justifyContent:"center",alignItems:"center",paddingTop:2,paddingBottom:2,children:jsxRuntimeExports.jsx(Loader,{small:!0,children:vn})}):null,jsxRuntimeExports.jsx(Box,{id:ps,width:"100%",height:"1px"})]})})})]})}),IconBox$3=dt$3(Box)`
  padding: 0;
`,Trigger$5=dt$3(Combobox$1$1.Trigger)`
  position: relative;
  border: 1px solid ${({theme:mr,$hasError:hr})=>hr?mr.colors.danger600:mr.colors.neutral200};
  border-radius: ${({theme:mr})=>mr.borderRadius};
  background: ${({theme:mr})=>mr.colors.neutral0};
  overflow: hidden;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: ${({theme:mr})=>mr.spaces[4]};

  ${mr=>{switch(mr.$size){case"S":return lt$4`
          padding-inline-start: ${({theme:hr})=>hr.spaces[4]};
          padding-inline-end: ${({theme:hr})=>hr.spaces[3]};
          padding-block: ${({theme:hr})=>hr.spaces[1]};
        `;default:return lt$4`
          padding-inline-start: ${({theme:hr})=>hr.spaces[4]};
          padding-inline-end: ${({theme:hr})=>hr.spaces[3]};
          padding-block: ${({theme:hr})=>hr.spaces[2]};
        `}}}

  &[data-disabled] {
    color: ${({theme:mr})=>mr.colors.neutral600};
    background: ${({theme:mr})=>mr.colors.neutral150};
    cursor: not-allowed;
  }

  /* Required to ensure the below inputFocusStyles are adhered too */
  &:focus-visible {
    outline: none;
  }

  ${({theme:mr,$hasError:hr})=>inputFocusStyle()({theme:mr,$hasError:hr})};
`,TextInput$1=dt$3(Combobox$1$1.TextInput)`
  width: 100%;
  font-size: 1.4rem;
  line-height: 2.2rem;
  color: ${({theme:mr})=>mr.colors.neutral800};
  padding: 0;
  border: none;
  background-color: transparent;

  &:focus-visible {
    outline: none;
  }

  &[aria-disabled='true'] {
    cursor: inherit;
  }
`,DownIcon$1=dt$3(Combobox$1$1.Icon)`
  border: none;
  background: transparent;
  padding: 0;
  color: ${({theme:mr})=>mr.colors.neutral600};
  display: flex;

  &[aria-disabled='true'] {
    cursor: inherit;
  }
`,Content$5=dt$3(Combobox$1$1.Content)`
  background: ${({theme:mr})=>mr.colors.neutral0};
  box-shadow: ${({theme:mr})=>mr.shadows.filterShadow};
  border: 1px solid ${({theme:mr})=>mr.colors.neutral150};
  border-radius: ${({theme:mr})=>mr.borderRadius};
  width: var(--radix-combobox-trigger-width);
  /* This is from the design-system figma file. */
  max-height: 15rem;
  z-index: ${({theme:mr})=>mr.zIndices.popover};

  @media (prefers-reduced-motion: no-preference) {
    animation-duration: ${mr=>mr.theme.motion.timings[200]};

    /* The select can't animate out yet, watch https://github.com/radix-ui/primitives/issues/1893, or take a look and solve it yourself. */
    &[data-state='open'] {
      animation-timing-function: ${mr=>mr.theme.motion.easings.authenticMotion};

      &[data-side='top'] {
        animation-name: ${ANIMATIONS.slideUpIn};
      }

      &[data-side='bottom'] {
        animation-name: ${ANIMATIONS.slideDownIn};
      }
    }
  }
`,Viewport$1=dt$3(Combobox$1$1.Viewport)`
  padding: ${({theme:mr})=>mr.spaces[1]};
`,Option$2=reactExports.forwardRef(({children:mr,value:hr,disabled:gr,textValue:vr,...xr},Er)=>jsxRuntimeExports.jsx(Combobox$1$1.ComboboxItem,{asChild:!0,value:hr,disabled:gr,textValue:vr,children:jsxRuntimeExports.jsx(OptionBox,{ref:Er,...xr,children:jsxRuntimeExports.jsx(Combobox$1$1.ItemText,{asChild:!0,children:jsxRuntimeExports.jsx(Typography,{children:mr})})})})),OptionBox=dt$3.div`
  width: 100%;
  border: none;
  text-align: left;
  outline-offset: -3px;
  padding: ${({theme:mr})=>mr.spaces[2]} ${({theme:mr})=>mr.spaces[4]};
  background-color: ${({theme:mr})=>mr.colors.neutral0};
  border-radius: ${({theme:mr})=>mr.borderRadius};
  user-select: none;

  &[data-state='checked'] {
    background-color: ${({theme:mr})=>mr.colors.primary100};
    color: ${({theme:mr})=>mr.colors.primary600};
    font-weight: bold;
  }

  &:hover,
  &[data-highlighted] {
    outline: none;
    background-color: ${({theme:mr,$hasHover:hr=!0})=>hr?mr.colors.primary100:mr.colors.neutral0};
  }

  &[data-highlighted] {
    color: ${({theme:mr})=>mr.colors.primary600};
    font-weight: bold;
  }
`,Root$5=$905f4ae918aab1aa$export$be92b6f5f03c0fe9,Trigger$4=reactExports.forwardRef((mr,hr)=>jsxRuntimeExports.jsx($905f4ae918aab1aa$export$41fb9f06171c75f4,{...mr,asChild:!0,ref:hr})),Content$4=reactExports.forwardRef((mr,hr)=>jsxRuntimeExports.jsxs($905f4ae918aab1aa$export$602eac185826482c,{children:[jsxRuntimeExports.jsx(Overlay$1,{}),jsxRuntimeExports.jsx(ContentImpl$1,{ref:hr,...mr})]})),Overlay$1=dt$3($905f4ae918aab1aa$export$c6fdb837b070b4ff)`
  background-color: ${mr=>mr.theme.colors.neutral800};
  position: fixed;
  inset: 0;
  z-index: ${mr=>mr.theme.zIndices.overlay};
  opacity: 0.2;

  @media (prefers-reduced-motion: no-preference) {
    animation: ${ANIMATIONS.overlayFadeIn} ${mr=>mr.theme.motion.timings[200]}
      ${mr=>mr.theme.motion.easings.authenticMotion};
  }
`,ContentImpl$1=dt$3($905f4ae918aab1aa$export$7c6e2c02157bb7d2)`
  max-width: 42rem;
  height: min-content;
  width: 100%;
  overflow: hidden;
  margin: 0 auto;
  display: flex;
  flex-direction: column;

  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);

  border-radius: ${mr=>mr.theme.borderRadius};
  background-color: ${mr=>mr.theme.colors.neutral0};
  box-shadow: ${mr=>mr.theme.shadows.popupShadow};
  z-index: ${mr=>mr.theme.zIndices.modal};

  @media (prefers-reduced-motion: no-preference) {
    &[data-state='open'] {
      animation-duration: ${mr=>mr.theme.motion.timings[200]};
      animation-timing-function: ${mr=>mr.theme.motion.easings.authenticMotion};
      animation-name: ${ANIMATIONS.modalPopIn};
    }

    &[data-state='closed'] {
      animation-duration: ${mr=>mr.theme.motion.timings[120]};
      animation-timing-function: ${mr=>mr.theme.motion.easings.easeOutQuad};
      animation-name: ${ANIMATIONS.modalPopOut};
    }
  }
`,Header$1=reactExports.forwardRef(({children:mr,...hr},gr)=>jsxRuntimeExports.jsx($905f4ae918aab1aa$export$f99233281efd08a0,{asChild:!0,children:jsxRuntimeExports.jsx(Title$1,{tag:"h2",variant:"beta",ref:gr,padding:6,fontWeight:"bold",...hr,children:mr})})),Title$1=dt$3(Typography)`
  display: flex;
  justify-content: center;
  border-bottom: solid 1px ${mr=>mr.theme.colors.neutral150};
`,Body$1=reactExports.forwardRef(({children:mr,icon:hr,...gr},vr)=>jsxRuntimeExports.jsx(Flex,{ref:vr,gap:2,direction:"column",paddingTop:8,paddingBottom:8,paddingLeft:6,paddingRight:6,...gr,children:typeof mr=="string"?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[hr?reactExports.cloneElement(hr,{width:24,height:24}):null,jsxRuntimeExports.jsx(Description$1,{children:mr})]}):mr})),Description$1=reactExports.forwardRef((mr,hr)=>jsxRuntimeExports.jsx($905f4ae918aab1aa$export$393edc798c47379d,{asChild:!0,children:jsxRuntimeExports.jsx(Typography,{ref:hr,variant:"omega",...mr,tag:"p"})})),Footer$1=reactExports.forwardRef((mr,hr)=>jsxRuntimeExports.jsx(Foot$1,{ref:hr,gap:2,padding:4,justifyContent:"space-between",...mr,tag:"footer"})),Foot$1=dt$3(Flex)`
  border-top: solid 1px ${mr=>mr.theme.colors.neutral150};
  flex: 1;
`,Cancel=reactExports.forwardRef((mr,hr)=>jsxRuntimeExports.jsx($905f4ae918aab1aa$export$848c9b7ead0df967,{...mr,asChild:!0,ref:hr})),Action=reactExports.forwardRef((mr,hr)=>jsxRuntimeExports.jsx($905f4ae918aab1aa$export$e19cd5f9376f8cee,{...mr,asChild:!0,ref:hr})),Dialog=Object.freeze(Object.defineProperty({__proto__:null,Action,Body:Body$1,Cancel,Content:Content$4,Description:Description$1,Footer:Footer$1,Header:Header$1,Root:Root$5,Trigger:Trigger$4},Symbol.toStringTag,{value:"Module"}));let $3db38b7d1fb3fe6a$var$count=0;function $3db38b7d1fb3fe6a$export$b7ece24a22aeda8c(){reactExports.useEffect(()=>{var mr,hr;const gr=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(mr=gr[0])!==null&&mr!==void 0?mr:$3db38b7d1fb3fe6a$var$createFocusGuard()),document.body.insertAdjacentElement("beforeend",(hr=gr[1])!==null&&hr!==void 0?hr:$3db38b7d1fb3fe6a$var$createFocusGuard()),$3db38b7d1fb3fe6a$var$count++,()=>{$3db38b7d1fb3fe6a$var$count===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(vr=>vr.remove()),$3db38b7d1fb3fe6a$var$count--}},[])}function $3db38b7d1fb3fe6a$var$createFocusGuard(){const mr=document.createElement("span");return mr.setAttribute("data-radix-focus-guard",""),mr.tabIndex=0,mr.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",mr}function useDateFormatter(mr,hr){const gr=reactExports.useRef(null);return hr&&gr.current&&isEqual$4(hr,gr.current)&&(hr=gr.current),gr.current=hr??null,reactExports.useMemo(()=>new $fb18d541ea1ad717$export$ad991b66133851cf(mr,hr),[mr,hr])}function isEqual$4(mr,hr){if(mr===hr)return!0;const gr=Object.keys(mr),vr=Object.keys(hr);if(gr.length!==vr.length)return!1;for(const xr of gr)if(hr[xr]!==mr[xr])return!1;return!0}const LiveRegionIds={Log:"live-region-log",Status:"live-region-status",Alert:"live-region-alert"},notifyLog=mr=>{const hr=document.querySelector(`#${LiveRegionIds.Log}`);hr&&(hr.innerText=mr)},notifyStatus=mr=>{const hr=document.querySelector(`#${LiveRegionIds.Status}`);hr&&(hr.innerText=mr)},notifyAlert=mr=>{const hr=document.querySelector(`#${LiveRegionIds.Alert}`);hr&&(hr.innerText=mr)},useNotifyAT=()=>(reactExports.useEffect(()=>()=>{notifyLog(""),notifyAlert(""),notifyStatus("")},[]),{notifyLog,notifyAlert,notifyStatus});ft$4`
${lt$4`
  *,
  *::before,
  *::after {
    box-sizing: border-box;
  }

  * {
    margin: 0;
  }

  html {
    /* Sets 1rem === 10px */
    font-size: 62.5%;
  }

  body {
    height: 100%;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans',
      'Helvetica Neue', sans-serif;
    color: ${({theme:mr})=>mr.colors.neutral800};
    line-height: 1.5;
    -webkit-font-smoothing: antialiased;
  }

  img,
  picture,
  video,
  canvas {
    display: block;
    max-width: 100%;
  }

  input,
  button,
  textarea,
  select {
    padding: 0;
    font: inherit;
  }

  button {
    border: unset;
    background: unset;
    padding: unset;
    margin: unset;
  }

  p,
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    overflow-wrap: break-word;
    font: unset;
  }

  #root {
    isolation: isolate;
  }

  ol,
  ul {
    list-style: none;
    padding: unset;
    margin: unset;
  }

  table {
    border-collapse: collapse;
    border-spacing: 0;
  }

  *:focus-visible {
    outline: 2px solid ${({theme:mr})=>mr.colors.primary600};
    outline-offset: 2px;
  }

  /* Focusing the button with a mouse, touch, or stylus will show a subtle drop shadow. */
  *:focus:not(:focus-visible) {
    outline: none;
  }

  .lock-body-scroll {
    height: 100vh;
    overflow-y: hidden;
  }
`}
`;const DEFAULT_LOCALE="en-EN",getDefaultLocale=()=>typeof navigator>"u"?DEFAULT_LOCALE:navigator.language?navigator.language:DEFAULT_LOCALE,[Provider$2,useDesignSystem]=createContext$1("StrapiDesignSystem",{locale:getDefaultLocale()}),DismissibleLayer=$5cb92bef7577960e$export$be92b6f5f03c0fe9,Portal$1=reactExports.forwardRef(({container:mr=globalThis?.document?.body,...hr},gr)=>mr?reactDomExports.createPortal(jsxRuntimeExports.jsx(Box,{ref:gr,...hr}),mr):null);Portal$1.displayName="Portal";const SelectTrigger=reactExports.forwardRef(({onClear:mr,clearLabel:hr="Clear",startIcon:gr,disabled:vr,hasError:xr,children:Er,id:Cr,size:wr="M",withTags:Rr,...kr},Dr)=>{const Br=reactExports.useRef(null),Hr=zr=>{mr&&!vr&&(mr(zr),Br.current.focus())},{labelNode:Gr}=useField$1("SelectTrigger"),qr=useComposedRefs(Br,Dr);return jsxRuntimeExports.jsx(Select$1$1.Trigger,{asChild:!0,children:jsxRuntimeExports.jsxs(StyledTrigger,{"aria-disabled":vr,$hasError:xr,ref:qr,alignItems:"center",justifyContent:"space-between",position:"relative",overflow:"hidden",hasRadius:!0,background:vr?"neutral150":"neutral0",gap:4,cursor:"default","aria-labelledby":Gr?`${Cr}-label`:void 0,$size:wr,$withTags:Rr,...kr,children:[jsxRuntimeExports.jsxs(Flex,{flex:"1",tag:"span",gap:3,children:[gr&&jsxRuntimeExports.jsx(Flex,{tag:"span","aria-hidden":!0,children:gr}),Er]}),jsxRuntimeExports.jsxs(Flex,{tag:"span",gap:3,children:[mr?jsxRuntimeExports.jsx(IconBox$2,{tag:"button",hasRadius:!0,background:"transparent",role:"button",tabIndex:0,onClick:Hr,"aria-disabled":vr,"aria-label":hr,title:hr,cursor:"pointer",children:jsxRuntimeExports.jsx(ForwardRef$3$,{})}):null,jsxRuntimeExports.jsx(DownIcon,{children:jsxRuntimeExports.jsx(ForwardRef$4L,{})})]})]})})}),IconBox$2=dt$3(Box)`
  border: none;
  display: flex;

  svg {
    height: 1.1rem;
    width: 1.1rem;
  }

  svg path {
    fill: ${({theme:mr})=>mr.colors.neutral500};
  }
`,StyledTrigger=dt$3(Flex)`
  border: 1px solid ${({theme:mr,$hasError:hr})=>hr?mr.colors.danger600:mr.colors.neutral200};
  ${mr=>{switch(mr.$size){case"S":return lt$4`
          padding-block: ${mr.theme.spaces[1]};
          padding-inline-start: ${mr.$withTags?mr.theme.spaces[1]:mr.theme.spaces[4]};
          padding-inline-end: ${mr.theme.spaces[3]};
        `;default:return lt$4`
          padding-block: ${mr.$withTags?"0.3rem":mr.theme.spaces[2]};
          padding-inline-start: ${mr.$withTags?mr.theme.spaces[1]:mr.theme.spaces[4]};
          padding-inline-end: ${mr.theme.spaces[3]};
        `}}}
  cursor: pointer;

  &[aria-disabled='true'] {
    color: ${mr=>mr.theme.colors.neutral500};
  }

  /* Required to ensure the below inputFocusStyles are adhered too */
  &:focus-visible {
    outline: none;
  }

  ${({theme:mr,$hasError:hr})=>inputFocusStyle()({theme:mr,$hasError:hr})};
`,DownIcon=dt$3(Select$1$1.Icon)`
  display: flex;
  & > svg {
    fill: ${({theme:mr})=>mr.colors.neutral500};
  }
`,SelectValue=reactExports.forwardRef(({children:mr,placeholder:hr,...gr},vr)=>jsxRuntimeExports.jsx(ValueType,{ref:vr,ellipsis:!0,...gr,children:jsxRuntimeExports.jsx(StyledValue,{placeholder:hr,children:mr})})),ValueType=dt$3(Typography)`
  flex: 1;
  font-size: 1.4rem;
  line-height: 2.2rem;
`,StyledValue=dt$3(Select$1$1.Value)`
  display: flex;
  gap: ${({theme:mr})=>mr.spaces[1]};
  flex-wrap: wrap;
`,SelectContent=dt$3(Select$1$1.Content)`
  background: ${({theme:mr})=>mr.colors.neutral0};
  box-shadow: ${({theme:mr})=>mr.shadows.filterShadow};
  border: 1px solid ${({theme:mr})=>mr.colors.neutral150};
  border-radius: ${({theme:mr})=>mr.borderRadius};
  min-width: var(--radix-select-trigger-width);
  max-height: 15.6rem;
  z-index: ${({theme:mr})=>mr.zIndices.popover};

  @media (prefers-reduced-motion: no-preference) {
    animation-duration: ${mr=>mr.theme.motion.timings[200]};

    /* The select can't animate out yet, watch https://github.com/radix-ui/primitives/issues/1893, or take a look and solve it yourself. */
    &[data-state='open'] {
      animation-timing-function: ${mr=>mr.theme.motion.easings.authenticMotion};

      &[data-side='top'] {
        animation-name: ${ANIMATIONS.slideUpIn};
      }

      &[data-side='bottom'] {
        animation-name: ${ANIMATIONS.slideDownIn};
      }
    }
  }
`,SelectViewport=dt$3(Select$1$1.Viewport)`
  padding: ${({theme:mr})=>mr.spaces[1]};
`,SelectItem=reactExports.forwardRef((mr,hr)=>jsxRuntimeExports.jsx(StyledSelectItem,{ref:hr,...mr})),itemStyles=lt$4`
  width: 100%;
  border: none;
  text-align: left;
  outline-offset: -3px;
  border-radius: ${mr=>mr.theme.borderRadius};
  padding: ${mr=>`${mr.theme.spaces[2]} ${mr.theme.spaces[4]}`};
  padding-left: ${({theme:mr})=>mr.spaces[4]};
  background-color: ${({theme:mr})=>mr.colors.neutral0};
  display: flex;
  align-items: center;
  gap: ${({theme:mr})=>mr.spaces[2]};
  white-space: nowrap;
  user-select: none;
  color: ${({theme:mr})=>mr.colors.neutral800};

  &:focus-visible {
    outline: none;
    background-color: ${({theme:mr})=>mr.colors.primary100};
    cursor: pointer;
  }
`,StyledSelectItem=dt$3(Select$1$1.Item)`
  ${itemStyles}

  &:hover {
    background-color: ${({theme:mr})=>mr.colors.primary100};
  }

  &[data-state='checked'] {
    font-weight: bold;
    background-color: ${({theme:mr})=>mr.colors.primary100};
    color: ${({theme:mr})=>mr.colors.primary600};
    font-weight: bold;
  }
`,Root$4=Select$1$1.Root,Trigger$3=SelectTrigger,Value=SelectValue,Portal=Select$1$1.Portal,Content$3=SelectContent,Viewport=SelectViewport,Item$2=SelectItem,ItemIndicator=Select$1$1.ItemIndicator,ItemText=Select$1$1.ItemText,Group$1$1=Select$1$1.Group,SingleSelect=reactExports.forwardRef(({children:mr,clearLabel:hr="Clear",customizeContent:gr,disabled:vr,hasError:xr,id:Er,name:Cr,onChange:wr,onClear:Rr,onCloseAutoFocus:kr,onReachEnd:Dr,placeholder:Br,required:Hr,size:Gr,startIcon:qr,value:zr,...Qr},sn)=>{const[hn,vn]=reactExports.useState(),[yn,gn]=reactExports.useState(!1),bn=Mn=>{gn(Mn)},xn=Mn=>{Rr&&Rr(Mn),wr||vn("")},$n=Mn=>{wr?wr(typeof zr=="number"?Number(Mn):Mn):vn(Mn)},Sn=reactExports.useRef(null),Cn=useId(),Rn=`intersection-${stripReactIdOfColon(Cn)}`;useIntersection(Sn,Mn=>{Dr&&Dr(Mn)},{selectorToWatch:`#${Rn}`,skipWhen:!yn});const{error:Fn,required:Hn,...Gn}=useField$1("SingleSelect"),qn=!!Fn||xr,On=Gn.id??Er,wn=Gn.name??Cr;let _n;Fn?_n=`${On}-error`:Gn.hint&&(_n=`${On}-hint`);const Tn=(typeof zr<"u"&&zr!==null?zr.toString():hn)??"";return jsxRuntimeExports.jsxs(Root$4,{onOpenChange:bn,disabled:vr,required:Hn??Hr,onValueChange:$n,value:Tn,...Qr,children:[jsxRuntimeExports.jsx(Trigger$3,{ref:sn,id:On,name:wn,startIcon:qr,hasError:qn,disabled:vr,clearLabel:hr,onClear:Tn&&Rr?xn:void 0,"aria-label":Qr["aria-label"],"aria-describedby":_n??Qr["aria-describedby"],size:Gr,children:jsxRuntimeExports.jsx(Value,{placeholder:Br,textColor:Tn?"neutral800":"neutral600",children:Tn&&gr?gr(Tn):void 0})}),jsxRuntimeExports.jsx(Portal,{children:jsxRuntimeExports.jsx(Content$3,{position:"popper",sideOffset:4,onCloseAutoFocus:kr,children:jsxRuntimeExports.jsxs(Viewport,{ref:Sn,children:[mr,jsxRuntimeExports.jsx(Box,{id:Rn,width:"100%",height:"1px"})]})})})]})}),SingleSelectOption=reactExports.forwardRef(({value:mr,startIcon:hr,children:gr,...vr},xr)=>jsxRuntimeExports.jsxs(Item$2,{ref:xr,value:mr.toString(),...vr,children:[hr&&jsxRuntimeExports.jsx(Flex,{tag:"span","aria-hidden":!0,children:hr}),jsxRuntimeExports.jsx(Typography,{lineHeight:"20px",width:"100%",children:jsxRuntimeExports.jsx(ItemText,{children:gr})})]})),DEFAULT_PAST_RANGE=200,DEFAULT_FUTURE_RANGE=15,[DatePickerProvider,useDatePickerContext]=createContext$1("DatePicker"),DatePicker$1=reactExports.forwardRef(({calendarLabel:mr,className:hr,initialDate:gr,locale:vr,maxDate:xr,minDate:Er,monthSelectLabel:Cr="Month",onChange:wr,value:Rr,yearSelectLabel:kr="Year",hasError:Dr,id:Br,name:Hr,disabled:Gr=!1,required:qr=!1,onClear:zr,clearLabel:Qr="Clear",size:sn="M",...hn},vn)=>{const yn=$14e0f24ef4ac5c92$export$aa8b41735afcabd2(),gn=useDesignSystem("DatePicker"),bn=vr??gn.locale,xn=useDateFormatter(bn,{day:"2-digit",month:"2-digit",year:"numeric"}),[$n,Sn]=reactExports.useState(!1),[Cn,Rn]=reactExports.useState(null),[Bn,Fn]=reactExports.useState(null),[Hn,Gn]=reactExports.useState(null),[qn,On]=reactExports.useState(),[wn,_n]=useControllableState$1({defaultProp:gr?convertUTCDateToCalendarDate(gr):void 0,prop:Rr?convertUTCDateToCalendarDate(Rr):void 0,onChange(Bi){wr&&wr(Bi?.toDate(yn))}}),[Tn,Mn]=reactExports.useMemo(()=>{const Bi=gr?convertUTCDateToCalendarDate(gr):$14e0f24ef4ac5c92$export$d0bdf45af03a6ea3("UTC"),zi=Er?convertUTCDateToCalendarDate(Er):Bi.set({day:1,month:1,year:Bi.year-DEFAULT_PAST_RANGE});let Xi=xr?convertUTCDateToCalendarDate(xr):Bi.set({day:31,month:12,year:Bi.year+DEFAULT_FUTURE_RANGE});return Xi.compare(zi)<0&&(Xi=zi.set({day:31,month:12,year:zi.year+DEFAULT_FUTURE_RANGE})),[zi,Xi]},[Er,xr,gr]),[Ln,jn]=reactExports.useState(makeInitialCalendarDate({currentValue:wn,minDate:Tn,maxDate:Mn})),Kn=useId(),Nn=reactExports.useRef(null),An=Bi=>{zr&&!Gr&&(On(""),_n(void 0),zr(Bi),Bn?.focus())},kn=reactExports.useCallback(Bi=>{Bi&&wn&&jn(wn),Sn(Bi)},[wn]);useIsomorphicLayoutEffect$3(()=>{if(Rr){const Bi=convertUTCDateToCalendarDate(Rr);On(xn.format(Bi.toDate(yn))),jn(Bi)}else On("")},[Rr,xn,yn]),useIsomorphicLayoutEffect$3(()=>{if(gr&&qn===void 0){const Bi=convertUTCDateToCalendarDate(gr);On(xn.format(Bi.toDate(yn)))}},[gr,qn,xn,yn]);const{error:Dn,...Vn}=useField$1("Combobox"),zn=!!Dn||Dr,Xn=Vn.id??Br,Zn=Vn.name??Hr,Pi=Vn.required||qr;let Ya;return Dn?Ya=`${Xn}-error`:Vn.hint&&(Ya=`${Xn}-hint`),jsxRuntimeExports.jsxs(DatePickerProvider,{calendarDate:Ln,content:Hn,contentId:Kn,disabled:Gr,locale:bn,minDate:Tn,maxDate:Mn,open:$n,onCalendarDateChange:jn,onContentChange:Gn,onOpenChange:kn,onTextInputChange:Fn,onTextValueChange:On,onTriggerChange:Rn,onValueChange:_n,required:Pi,textInput:Bn,textValue:qn,timeZone:yn,trigger:Cn,value:wn,children:[jsxRuntimeExports.jsxs(DatePickerTrigger,{className:hr,hasError:zn,size:sn,children:[jsxRuntimeExports.jsx(ForwardRef$4P,{fill:"neutral500","aria-hidden":!0}),jsxRuntimeExports.jsx(DatePickerTextInput,{ref:vn,"aria-describedby":Ya,id:Xn,name:Zn,...hn}),qn&&zr?jsxRuntimeExports.jsx(IconBox$1,{tag:"button",hasRadius:!0,background:"transparent",type:"button",onClick:An,"aria-disabled":Gr,"aria-label":Qr,title:Qr,ref:Nn,children:jsxRuntimeExports.jsx(ForwardRef$3$,{})}):null]}),jsxRuntimeExports.jsx(Portal$1,{children:jsxRuntimeExports.jsx(DatePickerContent,{label:mr,children:jsxRuntimeExports.jsx(DatePickerCalendar,{monthSelectLabel:Cr,yearSelectLabel:kr})})})]})}),isPrintableCharacter=mr=>!!mr.match(/^[^a-zA-Z]*$/),makeInitialCalendarDate=({currentValue:mr,minDate:hr,maxDate:gr})=>{const vr=$14e0f24ef4ac5c92$export$d0bdf45af03a6ea3("UTC");return mr||($14e0f24ef4ac5c92$export$5c333a116e949cdd(hr,vr)===hr&&$14e0f24ef4ac5c92$export$a75f2bff57811055(gr,vr)===gr?vr:$14e0f24ef4ac5c92$export$5c333a116e949cdd(hr,vr)===vr?hr:$14e0f24ef4ac5c92$export$a75f2bff57811055(gr,vr)===vr?gr:vr)},DATE_PICKER_TRIGGER_NAME="DatePickerTrigger",DatePickerTrigger=reactExports.forwardRef(({hasError:mr,size:hr,...gr},vr)=>{const xr=useDatePickerContext(DATE_PICKER_TRIGGER_NAME),Er=useComposedRefs(vr,wr=>xr.onTriggerChange(wr)),Cr=()=>{xr.disabled||xr.onOpenChange(!0)};return jsxRuntimeExports.jsx($d3863c46a17e8a28$export$20e40289641fbbb6,{asChild:!0,trapped:xr.open,onMountAutoFocus:wr=>{wr.preventDefault()},onUnmountAutoFocus:wr=>{document.getSelection()?.empty(),wr.preventDefault()},children:jsxRuntimeExports.jsx(TriggerElement,{ref:Er,$hasError:mr,$size:hr,...gr,hasRadius:!0,gap:3,overflow:"hidden",background:xr.disabled?"neutral150":"neutral0",onClick:composeEventHandlers(gr.onClick,()=>{xr.textInput?.focus()}),onPointerDown:composeEventHandlers(gr.onPointerDown,wr=>{const Rr=wr.target;Rr.hasPointerCapture(wr.pointerId)&&Rr.releasePointerCapture(wr.pointerId),(Rr.closest("button")??Rr.closest("div"))===wr.currentTarget&&wr.button===0&&wr.ctrlKey===!1&&(Cr(),xr.textInput?.focus())})})})}),TriggerElement=dt$3(Flex)`
  border: 1px solid ${({theme:mr,$hasError:hr})=>hr?mr.colors.danger600:mr.colors.neutral200};
  ${mr=>{switch(mr.$size){case"S":return lt$4`
          padding-block: ${mr.theme.spaces[1]};
          padding-inline: ${mr.theme.spaces[3]};
        `;default:return lt$4`
          padding-block: ${mr.theme.spaces[2]};
          padding-inline: ${mr.theme.spaces[3]};
        `}}}

  & > svg {
    flex: 1 0 auto;
  }

  &[data-disabled] {
    color: ${({theme:mr})=>mr.colors.neutral600};
    background: ${({theme:mr})=>mr.colors.neutral150};
    cursor: not-allowed;
  }

  /* Required to ensure the below inputFocusStyles are adhered too */
  &:focus-visible {
    outline: none;
  }

  ${({theme:mr,$hasError:hr})=>inputFocusStyle()({theme:mr,$hasError:hr})};
`,IconBox$1=dt$3(Box)`
  border: none;
  color: ${({theme:mr})=>mr.colors.neutral600};
  padding: 0;
  cursor: pointer;
`,DATE_PICKER_TEXT_INPUT_NAME="DatePickerTextInput",DatePickerTextInput=reactExports.forwardRef(({placeholder:mr,...hr},gr)=>{const vr=useDatePickerContext(DATE_PICKER_TEXT_INPUT_NAME),{onTextValueChange:xr,textValue:Er,onTextInputChange:Cr,onOpenChange:wr,disabled:Rr,locale:kr}=vr,Dr=useComposedRefs(gr,sn=>Cr(sn)),Br=()=>{Rr||wr(!0)},Hr=useDateFormatter(kr,{year:"numeric",month:"2-digit",day:"2-digit"}),[Gr,qr,zr]=reactExports.useMemo(()=>{const sn=Hr.formatToParts(new Date),hn=sn.filter(gn=>gn.type==="year"||gn.type==="month"||gn.type==="day"),vn=hn.map(gn=>{switch(gn.type){case"day":return"DD";case"month":return"MM";case"year":return"YYYY";default:return""}}),yn=sn.find(gn=>gn.type==="literal")?.value??"";return[vn,yn,hn]},[Hr]),Qr=Gr.map(sn=>`\\d{${sn.length}}`).join(`\\${qr}`);return jsxRuntimeExports.jsx(Input$1$1,{role:"combobox",type:"text",inputMode:"numeric",ref:Dr,"aria-autocomplete":"none","aria-controls":vr.contentId,"aria-disabled":vr.disabled,"aria-expanded":vr.open,"aria-required":vr.required,"aria-haspopup":"dialog","data-state":vr.open?"open":"closed",disabled:Rr,"data-disabled":Rr?"":void 0,pattern:Qr,placeholder:mr??Gr.join(qr),...hr,value:Er??"",onBlur:composeEventHandlers(hr.onBlur,()=>{if(!vr.textValue){vr.onValueChange(void 0);return}vr.onTextValueChange(Hr.format(vr.calendarDate.toDate(vr.timeZone))),vr.onValueChange(vr.calendarDate)}),onChange:composeEventHandlers(hr.onChange,sn=>{if(isPrintableCharacter(sn.target.value)){const hn=sn.target.value.split(qr),[vn,yn,gn]=zr.map((Fn,Hn)=>{const Gn=hn[Hn];return{...Fn,value:Gn}}).sort((Fn,Hn)=>Fn.type==="year"?1:Hn.type==="year"?-1:Fn.type==="month"?1:Hn.type==="month"?-1:0).map(Fn=>Fn.value),bn=vr.calendarDate.year;let xn=vr.calendarDate.year;if(gn){const Fn=gn.length===1?`0${gn}`:gn;xn=gn.length<3?Number(`${bn}`.slice(0,4-Fn.length)+Fn):Number(Fn)}gn&&gn.length<3&&xn>vr.maxDate.year&&(xn-=100);const $n=vr.calendarDate.set({year:xn}),Sn=$n.calendar.getMonthsInYear($n),Cn=$n.set({month:yn&&Number(yn)<=Sn?Number(yn):void 0}),Rn=Cn.calendar.getDaysInMonth(Cn),Bn=Cn.set({day:vn&&Number(vn)<=Rn?Number(vn):void 0});vr.onCalendarDateChange(constrainValue(Bn,vr.minDate,vr.maxDate)),vr.onTextValueChange(sn.target.value)}}),onKeyDown:composeEventHandlers(hr.onKeyDown,sn=>{if(!vr.open&&(isPrintableCharacter(sn.key)||["ArrowDown","Backspace"].includes(sn.key)))Br();else if(["Tab"].includes(sn.key)&&vr.open)sn.preventDefault();else if(["Escape"].includes(sn.key))vr.open?vr.onOpenChange(!1):(vr.onValueChange(void 0),vr.onTextValueChange("")),sn.preventDefault();else if(vr.open&&["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(sn.key))switch(sn.preventDefault(),sn.key){case"ArrowDown":{const hn=vr.calendarDate.add({weeks:1});if(vr.maxDate&&hn.compare(vr.maxDate)>0)return;vr.onCalendarDateChange(hn);return}case"ArrowRight":{const hn=vr.calendarDate.add({days:1});if(vr.maxDate&&hn.compare(vr.maxDate)>0)return;vr.onCalendarDateChange(hn);return}case"ArrowUp":{const hn=vr.calendarDate.subtract({weeks:1});if(vr.minDate&&hn.compare(vr.minDate)<0)return;vr.onCalendarDateChange(hn);return}case"ArrowLeft":{const hn=vr.calendarDate.subtract({days:1});if(vr.minDate&&hn.compare(vr.minDate)<0)return;vr.onCalendarDateChange(hn)}}else vr.open&&["Enter"].includes(sn.key)&&(sn.preventDefault(),xr(Hr.format(vr.calendarDate.toDate(vr.timeZone))),vr.onValueChange(vr.calendarDate),vr.onOpenChange(!1))})})});function constrainValue(mr,hr,gr){return hr&&(mr=$14e0f24ef4ac5c92$export$a75f2bff57811055(mr,hr)),gr&&(mr=$14e0f24ef4ac5c92$export$5c333a116e949cdd(mr,gr)),mr}const Input$1$1=dt$3.input`
  width: 100%;
  font-size: 1.4rem;
  line-height: 2.2rem;
  color: ${({theme:mr})=>mr.colors.neutral800};
  border: none;
  background-color: transparent;

  &:focus-visible {
    outline: none;
  }

  &[aria-disabled='true'] {
    cursor: inherit;
  }
`,CONTENT_NAME="DatePickerContent",DatePickerContent=reactExports.forwardRef((mr,hr)=>{const[gr,vr]=reactExports.useState(),xr=useDatePickerContext(CONTENT_NAME);if(useIsomorphicLayoutEffect$3(()=>{vr(new DocumentFragment)},[]),!xr.open){const Er=gr;return Er?reactDomExports.createPortal(jsxRuntimeExports.jsx("div",{children:mr.children}),Er):null}return jsxRuntimeExports.jsx(DatePickerContentImpl,{...mr,ref:hr})}),CONTENT_IMPL_NAME="DatePickerContent",DatePickerContentImpl=reactExports.forwardRef((mr,hr)=>{const{label:gr="Choose date",...vr}=mr,{onOpenChange:xr,...Er}=useDatePickerContext(CONTENT_IMPL_NAME),{x:Cr,y:wr,refs:Rr,strategy:kr,placement:Dr}=useFloating({strategy:"fixed",placement:"bottom-start",middleware:[offset({mainAxis:4}),shift$1(),flip()],elements:{reference:Er.trigger},whileElementsMounted:autoUpdate});reactExports.useEffect(()=>{const Hr=()=>{xr(!1)};return window.addEventListener("blur",Hr),window.addEventListener("resize",Hr),()=>{window.removeEventListener("blur",Hr),window.removeEventListener("resize",Hr)}},[xr]);const Br=useComposedRefs(hr,Hr=>Er.onContentChange(Hr),Rr.setFloating);return $3db38b7d1fb3fe6a$export$b7ece24a22aeda8c(),jsxRuntimeExports.jsx(ReactRemoveScroll$1,{allowPinchZoom:!0,children:jsxRuntimeExports.jsx(DismissibleLayer,{asChild:!0,onFocusOutside:Hr=>{Hr.preventDefault()},onDismiss:()=>{xr(!1)},children:jsxRuntimeExports.jsx(ContentElement,{ref:Br,"data-state":Er.open?"open":"closed","data-side":Dr.includes("top")?"top":"bottom",onContextMenu:Hr=>Hr.preventDefault(),id:Er.contentId,role:"dialog","aria-modal":"true","aria-label":gr,style:{left:Cr,top:wr,position:kr},hasRadius:!0,background:"neutral0",padding:1,...vr})})})}),ContentElement=dt$3(Box)`
  box-shadow: ${({theme:mr})=>mr.shadows.filterShadow};
  z-index: ${({theme:mr})=>mr.zIndices.popover};
  border: 1px solid ${({theme:mr})=>mr.colors.neutral150};

  @media (prefers-reduced-motion: no-preference) {
    animation-duration: ${mr=>mr.theme.motion.timings[200]};

    &[data-state='open'] {
      animation-timing-function: ${mr=>mr.theme.motion.easings.authenticMotion};

      &[data-side='top'] {
        animation-name: ${ANIMATIONS.slideUpIn};
      }

      &[data-side='bottom'] {
        animation-name: ${ANIMATIONS.slideDownIn};
      }
    }
  }
`,DATE_PICKER_CALENDAR_NAME="DatePickerCalendar",DatePickerCalendar=reactExports.forwardRef(({monthSelectLabel:mr,yearSelectLabel:hr,...gr},vr)=>{const{locale:xr,timeZone:Er,minDate:Cr,maxDate:wr,calendarDate:Rr,onCalendarDateChange:kr}=useDatePickerContext(DATE_PICKER_CALENDAR_NAME),Dr=$14e0f24ef4ac5c92$export$a5a3b454ada2268e(Rr),Br=reactExports.useMemo(()=>{const vn=Cr.year,yn=wr.year;return[...Array(yn-vn+1).keys()].map(gn=>(vn+gn).toString())},[Cr,wr]),Hr=useDateFormatter(xr,{month:"long"}),Gr=reactExports.useMemo(()=>[...Array(Rr.calendar.getMonthsInYear(Rr)).keys()].map(vn=>Hr.format(Rr.set({month:vn+1}).toDate(Er))),[Rr,Hr,Er]),qr=useDateFormatter(xr,{weekday:"short"}),zr=reactExports.useMemo(()=>{const vn=$14e0f24ef4ac5c92$export$42c81a444fbfb5d4($14e0f24ef4ac5c92$export$d0bdf45af03a6ea3(Er),xr);return[...new Array(7).keys()].map(yn=>{const bn=vn.add({days:yn}).toDate(Er);return qr.format(bn)})},[Er,xr,qr]),Qr=vn=>{if(typeof vn=="number")return;const yn=Rr.set({month:Gr.indexOf(vn)+1});kr(yn)},sn=vn=>{if(typeof vn=="number")return;const yn=Rr.set({year:parseInt(vn,10)});kr(yn)},hn=makeGetDatesInWeek(Dr,xr);return jsxRuntimeExports.jsxs(Flex,{ref:vr,direction:"column",alignItems:"stretch",padding:4,...gr,children:[jsxRuntimeExports.jsxs(ToolbarFlex,{justifyContent:"flex-start",paddingBottom:4,paddingLeft:2,paddingRight:2,gap:2,children:[jsxRuntimeExports.jsx(Root$6,{children:jsxRuntimeExports.jsx(SingleSelect,{"aria-label":mr,value:Gr[Rr.month-1],onChange:Qr,children:Gr.map(vn=>jsxRuntimeExports.jsx(SingleSelectOption,{value:vn,children:vn},vn))})}),jsxRuntimeExports.jsx(Root$6,{children:jsxRuntimeExports.jsx(SingleSelect,{value:Rr.year.toString(),"aria-label":hr,onChange:sn,children:Br.map(vn=>jsxRuntimeExports.jsx(SingleSelectOption,{value:vn,children:vn},vn))})})]}),jsxRuntimeExports.jsxs("table",{role:"grid",children:[jsxRuntimeExports.jsx("thead",{"aria-hidden":!0,children:jsxRuntimeExports.jsx("tr",{"aria-rowindex":0,children:zr.map((vn,yn)=>jsxRuntimeExports.jsx(DatePickerHeaderCell,{"aria-colindex":yn,children:vn},vn))})}),jsxRuntimeExports.jsx("tbody",{children:[...new Array(6).keys()].map(vn=>jsxRuntimeExports.jsx("tr",{"aria-rowindex":vn+2,children:hn(vn).map((yn,gn)=>yn?jsxRuntimeExports.jsx(DatePickerCalendarCell,{"aria-colindex":gn+1,date:yn,startDate:Dr,disabled:Cr.compare(yn)>0||yn.compare(wr)>0},yn.toString()):jsxRuntimeExports.jsx(Cell$1,{"aria-colindex":gn+1},gn+1))},vn))})]})]})}),makeGetDatesInWeek=(mr,hr)=>gr=>{let vr=mr.add({weeks:gr});const xr=[];vr=$14e0f24ef4ac5c92$export$42c81a444fbfb5d4(vr,hr);const Er=$14e0f24ef4ac5c92$export$2061056d06d7cdf7(vr,hr);for(let Cr=0;Cr<Er;Cr++)xr.push(null);for(;xr.length<7;){xr.push(vr);const Cr=vr.add({days:1});if($14e0f24ef4ac5c92$export$ea39ec197993aef0(vr,Cr))break;vr=Cr}for(;xr.length<7;)xr.push(null);return xr},ToolbarFlex=dt$3(Flex)`
  div[role='combobox'] {
    border: 1px solid transparent;
    background: transparent;
    font-weight: ${mr=>mr.theme.fontWeights.bold};

    svg {
      fill: ${({theme:mr})=>mr.colors.neutral500};
    }

    &:hover {
      background-color: ${({theme:mr})=>mr.colors.neutral100};
    }
  }
`,DatePickerHeaderCell=reactExports.forwardRef(({children:mr,...hr},gr)=>jsxRuntimeExports.jsx(Th$1,{tag:"th",role:"gridcell",ref:gr,...hr,height:"2.4rem",width:"3.2rem",children:jsxRuntimeExports.jsx(Typography,{variant:"pi",fontWeight:"bold",color:"neutral800",children:mr.slice(0,2)})})),Th$1=dt$3(Box)`
  border-radius: ${({theme:mr})=>mr.borderRadius};
  text-transform: capitalize;
`,DATE_PICKER_CALEDNAR_CELL_NAME="DatePickerCalendarCell",DatePickerCalendarCell=reactExports.forwardRef(({date:mr,startDate:hr,disabled:gr,...vr},xr)=>{const{timeZone:Er,locale:Cr,calendarDate:wr,onValueChange:Rr,onOpenChange:kr,onTextValueChange:Dr,onCalendarDateChange:Br}=useDatePickerContext(DATE_PICKER_CALEDNAR_CELL_NAME),Hr=$14e0f24ef4ac5c92$export$ea39ec197993aef0(wr,mr),Gr=useDateFormatter(Cr,{weekday:"long",day:"numeric",month:"long",year:"numeric"}),qr=reactExports.useMemo(()=>Gr.format(mr.toDate(Er)),[Gr,mr,Er]),zr=useDateFormatter(Cr,{day:"numeric",calendar:mr.calendar.identifier}),Qr=reactExports.useMemo(()=>zr.formatToParts(mr.toDate(Er)).find(gn=>gn.type==="day").value,[zr,mr,Er]),sn=useDateFormatter(Cr,{day:"2-digit",month:"2-digit",year:"numeric"}),hn=$14e0f24ef4ac5c92$export$a2258d9c4118825c(hr),vn=mr.compare(hr)<0||mr.compare(hn)>0;let yn="neutral900";return Hr?yn="primary600":vn&&(yn="neutral600"),jsxRuntimeExports.jsx(Cell$1,{tag:"td",role:"gridcell",ref:xr,"aria-selected":Hr,...vr,hasRadius:!0,"aria-label":qr,tabIndex:Hr?0:-1,background:Hr?"primary100":"neutral0",cursor:"pointer",onPointerDown:composeEventHandlers(vr.onPointerDown,gn=>{gn.preventDefault(),Br(mr),Rr(mr),Dr(sn.format(mr.toDate(Er))),kr(!1)}),"aria-disabled":gr,children:jsxRuntimeExports.jsx(Typography,{variant:"pi",textColor:yn,children:Qr})})}),Cell$1=dt$3(Box)`
  text-align: center;
  padding: 0.7rem;
  // Trick to prevent the outline from overflowing because of the general outline-offset
  outline-offset: -2px !important;
  &[aria-disabled='true'] {
    pointer-events: none;
    opacity: 0.5;
  }

  &[aria-disabled='false'] {
    &:hover {
      background: ${({theme:mr})=>mr.colors.primary100};
      color: ${({theme:mr})=>mr.colors.primary600};
    }
  }
`,convertUTCDateToCalendarDate=mr=>{const hr=mr.toISOString(),gr=$fae977aafc393c5c$export$5adfdab05168c219(hr,"UTC");return $11d87f3f76e88657$export$93522d1a439f3617(gr)},isNotAlphabeticalCharacter=mr=>!!mr.match(/^[^a-zA-Z]*$/),TimePicker$1=reactExports.forwardRef(({step:mr=15,value:hr,defaultValue:gr,onChange:vr,...xr},Er)=>{const Cr=useDesignSystem("TimePicker"),[wr,Rr]=reactExports.useState(""),[kr,Dr]=useControllableState$1({prop:hr,defaultProp:gr,onChange:vr}),Br=useDateFormatter(Cr.locale,{hour:"2-digit",minute:"2-digit",hour12:!1}),Hr=reactExports.useMemo(()=>{const hn=Br.formatToParts(new Date),{value:vn}=hn.find(yn=>yn.type==="literal");return vn},[Br]),Gr=reactExports.useMemo(()=>{const hn=60/mr;return[...Array(24).keys()].flatMap(vn=>[...Array(hn).keys()].map(yn=>Br.format(new Date(0,0,0,vn,yn*mr))))},[mr,Br]),qr=hn=>{(!hn||isNotAlphabeticalCharacter(hn))&&Rr(hn)},zr=hn=>{const[vn,yn]=hn.split(Hr);if(!vn&&!yn)return;const gn=Number(vn??"0"),bn=Number(yn??"0");if(!(gn>23||bn>59))return Br.format(new Date(0,0,0,gn,bn))},Qr=hn=>{const vn=zr(hn.target.value);vn?(Rr(vn),Dr(vn)):Rr(kr)},sn=hn=>{if(typeof hn<"u"){const vn=zr(hn);Dr(vn)}else Dr(hn)};return reactExports.useEffect(()=>{const hn=typeof hr>"u"?"":hr;isNotAlphabeticalCharacter(hn)&&Rr(hn)},[hr,Rr]),jsxRuntimeExports.jsx(Combobox,{...xr,ref:Er,value:kr,onChange:sn,isPrintableCharacter:isNotAlphabeticalCharacter,allowCustomValue:!0,placeholder:`--${Hr}--`,autocomplete:"none",startIcon:jsxRuntimeExports.jsx(ForwardRef$4l,{fill:"neutral500"}),inputMode:"numeric",pattern:`\\d{2}\\${Hr}\\d{2}`,textValue:wr,onTextValueChange:qr,onBlur:Qr,children:Gr.map(hn=>jsxRuntimeExports.jsx(Option$2,{value:hn,children:hn},hn))})}),DatePicker=dt$3(DatePicker$1)`
  flex: 1 1 70%;
  min-width: 120px;
`,TimePicker=dt$3(TimePicker$1)`
  flex: 1 1 30%;
  min-width: 140px;
`,DateTimePicker=reactExports.forwardRef(({clearLabel:mr="clear",dateLabel:hr="Choose date",timeLabel:gr="Choose time",disabled:vr=!1,hasError:xr,onChange:Er,onClear:Cr,required:wr=!1,step:Rr,value:kr,initialDate:Dr,size:Br,...Hr},Gr)=>{const qr=reactExports.useRef(null),[zr,Qr]=useControllableState$1({defaultProp:Dr?convertUTCDateToCalendarDateTime(Dr,!1):void 0,prop:kr?convertUTCDateToCalendarDateTime(kr,!1):kr??void 0,onChange(Fn){Er&&Er(Fn?.toDate($14e0f24ef4ac5c92$export$aa8b41735afcabd2()))}}),sn=useDesignSystem("DateTimePicker"),hn=useDateFormatter(sn.locale,{hour:"2-digit",minute:"2-digit",hour12:!1}),vn=zr?hn.format(zr.toDate($14e0f24ef4ac5c92$export$aa8b41735afcabd2())):"",yn=Fn=>{let Hn=Fn?convertUTCDateToCalendarDateTime(Fn):void 0;if(!(Hn&&zr&&Hn.compare(zr)===0)){if(vn&&Hn){const[Gn,qn]=vn.split(":");Hn=Hn.set({hour:parseInt(Gn,10),minute:parseInt(qn,10)})}Qr(Hn)}},gn=Fn=>{if(!Fn)return;const[Hn,Gn]=Fn.split(":"),qn=zr?zr.set({hour:parseInt(Hn,10),minute:parseInt(Gn,10)}):convertUTCDateToCalendarDateTime(new Date).set({hour:parseInt(Hn,10),minute:parseInt(Gn,10)});Qr(qn)},bn=Fn=>{Qr(void 0),Cr&&Cr(Fn)},xn=()=>{const Fn=zr?zr.set({hour:0,minute:0}):convertUTCDateToCalendarDateTime(new Date);Qr(Fn)},$n=useComposedRefs(qr,Gr),{error:Sn,id:Cn,labelNode:Rn}=useField$1("DateTimePicker"),Bn=!!Sn||xr;return jsxRuntimeExports.jsxs(Flex,{"aria-labelledby":Rn?`${Cn}-label`:void 0,role:"group",flex:"1",gap:1,children:[jsxRuntimeExports.jsx(Root$6,{children:jsxRuntimeExports.jsx(DatePicker,{...Hr,size:Br,value:zr?.toDate("UTC"),onChange:yn,required:wr,onClear:Cr?bn:void 0,clearLabel:`${mr} date`,disabled:vr,ref:$n,"aria-label":hr})}),jsxRuntimeExports.jsx(Root$6,{children:jsxRuntimeExports.jsx(TimePicker,{size:Br,hasError:Bn,value:vn,onChange:gn,onClear:Cr&&vn!==void 0&&vn!=="00:00"?xn:void 0,clearLabel:`${mr} time`,required:wr,disabled:vr,step:Rr,"aria-label":gr})})]})}),convertUTCDateToCalendarDateTime=(mr,hr=!0)=>{const gr=mr.toISOString();let vr=$fae977aafc393c5c$export$8e384432362ed0f0(gr);return hr&&(vr=vr.set({hour:0,minute:0})),$11d87f3f76e88657$export$b21e0b124e224484(vr)},Divider=reactExports.forwardRef((mr,hr)=>jsxRuntimeExports.jsx(DividerImpl,{ref:hr,background:"neutral150",...mr,"data-orientation":"horizontal",role:"separator",tag:"div"})),DividerImpl=dt$3(Box)`
  height: 1px;
  border: none;
  /* If contained in a Flex parent we want to prevent the Divider to shink */
  flex-shrink: 0;
`,EmptyStateIconWrapper=dt$3(Box)`
  svg {
    height: 8.8rem;
  }
`,EmptyStateLayout=reactExports.forwardRef(({icon:mr,content:hr,action:gr,hasRadius:vr=!0,shadow:xr="tableShadow"},Er)=>jsxRuntimeExports.jsxs(Flex,{ref:Er,alignItems:"center",direction:"column",padding:11,background:"neutral0",hasRadius:vr,shadow:xr,children:[mr?jsxRuntimeExports.jsx(EmptyStateIconWrapper,{paddingBottom:6,"aria-hidden":!0,children:mr}):null,jsxRuntimeExports.jsx(Box,{paddingBottom:4,children:jsxRuntimeExports.jsx(Typography,{variant:"delta",tag:"p",textAlign:"center",textColor:"neutral600",children:hr})}),gr]})),addMarks=StateEffect.define(),filterMarks=StateEffect.define(),lineHighlightMark=Decoration.mark({attributes:{style:"background-color: yellow; color: black"}}),markField=StateField.define({create(){return Decoration.none},update(mr,hr){return mr=mr.map(hr.changes),hr.effects.forEach(gr=>{gr.is(addMarks)?mr=mr.update({add:gr.value,sort:!0}):gr.is(filterMarks)&&(mr=mr.update({filter:gr.value}))}),mr},provide:mr=>EditorView.decorations.from(mr)}),JSONInput=reactExports.forwardRef(({hasError:mr,required:hr,id:gr,value:vr="",disabled:xr=!1,onChange:Er=()=>null,...Cr},wr)=>{const Rr=reactExports.useRef(),kr=reactExports.useRef(),Dr=reactExports.useRef(),{error:Br,...Hr}=useField$1("JsonInput"),Gr=!!Br||mr,qr=Hr.id??gr,zr=Hr.required||hr;let Qr;Br?Qr=`${qr}-error`:Hr.hint&&(Qr=`${qr}-hint`);const sn=Sn=>{const Cn=kr.current?.doc;if(Cn){const{text:Rn,to:Bn}=Cn.line(Sn),Fn=Bn-Rn.trimStart().length;Bn>Fn&&Dr.current?.dispatch({effects:addMarks.of([lineHighlightMark.range(Fn,Bn)])})}},hn=()=>{const Sn=kr.current?.doc;if(Sn){const Cn=Sn.length||0;Dr.current?.dispatch({effects:filterMarks.of((Rn,Bn)=>Bn<=0||Rn>=Cn)})}},vn=({state:Sn,view:Cn})=>{Dr.current=Cn,kr.current=Sn,hn();const Bn=jsonParseLinter()(Cn);Bn.length&&sn(Sn.doc.lineAt(Bn[0].from).number)},yn=(Sn,Cn)=>{vn(Cn),Er(Sn)},gn=(Sn,Cn)=>{Dr.current=Sn,kr.current=Cn,vn({view:Sn,state:Cn})},{setContainer:bn,view:xn}=useCodeMirror({value:vr,onCreateEditor:gn,container:Rr.current,editable:!xr,extensions:[json(),markField],onChange:yn,theme:"dark",basicSetup:{lineNumbers:!0,bracketMatching:!0,closeBrackets:!0,indentOnInput:!0,syntaxHighlighting:!0,highlightSelectionMatches:!0,tabSize:2}}),$n=useComposedRefs(Rr,bn);return reactExports.useImperativeHandle(wr,()=>({...xn?.dom,focus(){xn&&xn.focus()},scrollIntoView(Sn){xn&&xn.dom.scrollIntoView(Sn)}}),[xn]),jsxRuntimeExports.jsx(JSONInputContainer,{ref:$n,$hasError:Gr,alignItems:"stretch",fontSize:2,hasRadius:!0,"aria-required":zr,id:qr,"aria-describedby":Qr,...Cr})}),JSONInputContainer=dt$3(Flex)`
  line-height: ${({theme:mr})=>mr.lineHeights[2]};

  .cm-editor {
    /** 
     * Hard coded since the color is the same between themes,
     * theme.colors.neutral800 changes between themes 
     */
    background-color: #32324d;
    width: 100%;
    outline: none;
  }

  .cm-scroller {
    border: 1px solid ${({theme:mr,$hasError:hr})=>hr?mr.colors.danger600:mr.colors.neutral200};
    /* inputFocusStyle will receive hasError prop */
    ${inputFocusStyle()}
  }

  .cm-editor,
  .cm-scroller {
    border-radius: ${({theme:mr})=>mr.borderRadius};
  }

  .cm-gutters,
  .cm-activeLineGutter {
    /** 
     * Hard coded since the color is the same between themes,
     * theme.colors.neutral700 changes between themes 
     */
    background-color: #4a4a6a;
  }
`,LinkButton=forwardRef(({disabled:mr,...hr},gr)=>jsxRuntimeExports.jsx(Button,{ref:gr,tag:BaseLinkImpl,tabIndex:mr?-1:void 0,disabled:mr,...hr})),MainWrapper=dt$3(Box)`
  // To prevent global outline on focus visible to force an outline when Main is focused
  &:focus-visible {
    outline: none;
  }
`,Main=({labelledBy:mr="main-content-title",...hr})=>jsxRuntimeExports.jsx(MainWrapper,{"aria-labelledby":mr,tag:"main",id:"main-content",tabIndex:-1,...hr});dt$3(Box)`
  text-decoration: none;

  &:focus {
    left: ${({theme:mr})=>mr.spaces[3]};
    top: ${({theme:mr})=>mr.spaces[3]};
  }
`;const setOpacity=(mr,hr)=>`${mr}${Math.floor(hr*255).toString(16).padStart(2,"0")}`,ScrollAreaImpl$1=reactExports.forwardRef(({children:mr,viewportRef:hr,...gr},vr)=>jsxRuntimeExports.jsxs(ScrollAreaRoot,{ref:vr,...gr,children:[jsxRuntimeExports.jsx(ScrollAreaViewport,{ref:hr,children:mr}),jsxRuntimeExports.jsx(Scrollbar,{orientation:"vertical",children:jsxRuntimeExports.jsx(Thumb,{})}),jsxRuntimeExports.jsx(Scrollbar,{orientation:"horizontal",children:jsxRuntimeExports.jsx(Thumb,{})})]})),ScrollAreaRoot=dt$3($57acba87d6e25586$export$be92b6f5f03c0fe9)`
  width: 100%;
  height: 100%;
  overflow: hidden;
  display: flex;
`,ScrollAreaViewport=dt$3($57acba87d6e25586$export$d5c6c08dc2d3ca7)`
  min-width: 100%;
  padding-inline: 4px;
`,Scrollbar=dt$3($57acba87d6e25586$export$9a4e88b92edfce6b)`
  display: flex;
  /* ensures no selection */
  user-select: none;
  /* disable browser handling of all panning and zooming gestures on touch devices */
  touch-action: none;

  &[data-orientation='vertical'] {
    width: 0.4rem;
  }

  &[data-orientation='horizontal'] {
    flex-direction: column;
    height: 0.4rem;
  }
`,Thumb=dt$3($57acba87d6e25586$export$6521433ed15a34db)`
  position: relative;
  flex: 1;
  background-color: ${mr=>mr.theme.colors.neutral150};
  border-radius: var(--scrollbar-size);

  /* increase target size for touch devices https://www.w3.org/WAI/WCAG21/Understanding/target-size.html */
  &::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 100%;
    height: 100%;
    min-width: 44px;
    min-height: 44px;
  }
`,Root$3=$5d3850c4d0b4e6c7$export$be92b6f5f03c0fe9,Trigger$2=reactExports.forwardRef((mr,hr)=>jsxRuntimeExports.jsx($5d3850c4d0b4e6c7$export$41fb9f06171c75f4,{...mr,asChild:!0,ref:hr})),Content$2=reactExports.forwardRef((mr,hr)=>jsxRuntimeExports.jsx($5d3850c4d0b4e6c7$export$602eac185826482c,{children:jsxRuntimeExports.jsx(Overlay,{children:jsxRuntimeExports.jsx(ContentImpl,{ref:hr,...mr})})})),Overlay=dt$3($5d3850c4d0b4e6c7$export$c6fdb837b070b4ff)`
  background: ${mr=>setOpacity(mr.theme.colors.neutral800,.2)};
  position: fixed;
  inset: 0;
  z-index: ${mr=>mr.theme.zIndices.overlay};

  @media (prefers-reduced-motion: no-preference) {
    animation: ${ANIMATIONS.overlayFadeIn} ${mr=>mr.theme.motion.timings[200]}
      ${mr=>mr.theme.motion.easings.authenticMotion};
  }
`,ContentImpl=dt$3($5d3850c4d0b4e6c7$export$7c6e2c02157bb7d2)`
  max-width: 83rem;
  max-height: 90vh;
  height: auto;
  width: 60%;
  overflow: hidden;
  margin: 0 auto;
  display: flex;
  flex-direction: column;

  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);

  border-radius: ${mr=>mr.theme.borderRadius};
  background-color: ${mr=>mr.theme.colors.neutral0};
  box-shadow: ${mr=>mr.theme.shadows.popupShadow};
  z-index: ${mr=>mr.theme.zIndices.modal};

  @media (prefers-reduced-motion: no-preference) {
    &[data-state='open'] {
      animation-duration: ${mr=>mr.theme.motion.timings[200]};
      animation-timing-function: ${mr=>mr.theme.motion.easings.authenticMotion};
      animation-name: ${ANIMATIONS.modalPopIn};
    }

    &[data-state='closed'] {
      animation-duration: ${mr=>mr.theme.motion.timings[120]};
      animation-timing-function: ${mr=>mr.theme.motion.easings.easeOutQuad};
      animation-name: ${ANIMATIONS.modalPopOut};
    }
  }
`,Close=reactExports.forwardRef((mr,hr)=>jsxRuntimeExports.jsx($5d3850c4d0b4e6c7$export$f39c2d165cd861fe,{...mr,asChild:!0,ref:hr})),Header$3=reactExports.forwardRef(({children:mr,closeLabel:hr="Close modal",...gr},vr)=>jsxRuntimeExports.jsxs(Head$1,{ref:vr,padding:4,paddingLeft:5,paddingRight:5,background:"neutral100",justifyContent:"space-between",...gr,tag:"header",children:[mr,jsxRuntimeExports.jsx(Close,{children:jsxRuntimeExports.jsx(IconButton,{withTooltip:!1,label:hr,children:jsxRuntimeExports.jsx(ForwardRef$3$,{})})})]})),Head$1=dt$3(Flex)`
  border-bottom: solid 1px ${mr=>mr.theme.colors.neutral150};
`,Title$2=reactExports.forwardRef((mr,hr)=>jsxRuntimeExports.jsx($5d3850c4d0b4e6c7$export$f99233281efd08a0,{asChild:!0,children:jsxRuntimeExports.jsx(Typography,{tag:"h2",variant:"omega",fontWeight:"bold",ref:hr,...mr})})),Body$2=reactExports.forwardRef(({children:mr,...hr},gr)=>jsxRuntimeExports.jsx(BodyScroll,{ref:gr,...hr,children:mr})),BodyScroll=dt$3(ScrollAreaImpl$1)`
  padding-inline: ${mr=>mr.theme.spaces[8]};

  & > div {
    padding-block: ${mr=>mr.theme.spaces[8]};

    & > div {
      // the scroll area component applies a display: table to the child, which we don't want.
      display: block !important;
    }
  }
`,Footer=reactExports.forwardRef((mr,hr)=>jsxRuntimeExports.jsx(Foot,{ref:hr,padding:4,paddingLeft:5,paddingRight:5,background:"neutral100",justifyContent:"space-between",...mr,tag:"footer"})),Foot=dt$3(Flex)`
  border-top: solid 1px ${mr=>mr.theme.colors.neutral150};
  flex: 1;
`,Modal$1=Object.freeze(Object.defineProperty({__proto__:null,Body:Body$2,Close,Content:Content$2,Footer,Header:Header$3,Root:Root$3,Title:Title$2,Trigger:Trigger$2},Symbol.toStringTag,{value:"Module"})),INITIAL_VALUE="",NumberInput=reactExports.forwardRef(({startAction:mr,locale:hr,onValueChange:gr,value:vr,step:xr=1,disabled:Er=!1,...Cr},wr)=>{const Rr=useDesignSystem("NumberInput"),kr=hr||Rr.locale,Dr=reactExports.useRef(new $6c7bd7858deea686$export$cd11ab140839f11d(kr,{style:"decimal"})),Br=reactExports.useRef(new $488c6ddbf4ef74c2$export$cc77c4ff7e8673c5(kr,{maximumFractionDigits:20})),[Hr,Gr]=useControllableState$2({prop(bn){const xn=String(vr);return isNaN(Number(xn))||xn!==bn&&bn!==""?bn:Br.current.format(Number(vr))},defaultProp:INITIAL_VALUE,onChange(bn){const xn=Dr.current.parse(bn??"");gr(isNaN(xn)?void 0:xn)}}),qr=bn=>{Gr(String(bn))},zr=({target:{value:bn}})=>{Dr.current.isValidPartialNumber(bn)&&qr(bn)},sn=(bn=>{const xn=bn.toString();return xn.includes(".")?xn.split(".")[1].length:0})(xr),hn=()=>{if(!Hr){qr(xr);return}const bn=Dr.current.parse(Hr),xn=isNaN(bn)?xr:bn+xr,$n=parseFloat(xn.toFixed(sn));qr(Br.current.format($n))},vn=()=>{if(!Hr){qr(-xr);return}const bn=Dr.current.parse(Hr),xn=isNaN(bn)?-xr:bn-xr,$n=parseFloat(xn.toFixed(sn));qr(Br.current.format($n))},yn=bn=>{if(!Er)switch(bn.key){case KeyboardKeys.DOWN:{bn.preventDefault(),vn();break}case KeyboardKeys.UP:{bn.preventDefault(),hn();break}}},gn=()=>{if(Hr){const bn=Dr.current.parse(Hr),xn=isNaN(bn)?"":Br.current.format(bn);qr(xn)}};return jsxRuntimeExports.jsx(Input$2,{ref:wr,startAction:mr,disabled:Er,type:"text",inputMode:"decimal",onChange:zr,onKeyDown:yn,onBlur:gn,value:Hr,endAction:jsxRuntimeExports.jsxs(Flex,{direction:"column",children:[jsxRuntimeExports.jsx(ArrowButton,{disabled:Er,"aria-hidden":!0,$reverse:!0,onClick:hn,tabIndex:-1,type:"button","data-testid":"ArrowUp",children:jsxRuntimeExports.jsx(ForwardRef$4L,{fill:"neutral500"})}),jsxRuntimeExports.jsx(ArrowButton,{disabled:Er,"aria-hidden":!0,onClick:vn,tabIndex:-1,type:"button","data-testid":"ArrowDown",children:jsxRuntimeExports.jsx(ForwardRef$4L,{fill:"neutral500"})})]}),...Cr})}),ArrowButton=dt$3.button`
  display: flex;
  justify-content: center;
  align-items: center;
  transform: translateY(${({$reverse:mr})=>mr?"-2px":"2px"});
  cursor: ${({disabled:mr})=>mr?"not-allowed":void 0};
  height: 1.1rem;

  svg {
    width: 1.2rem;
    transform: ${({$reverse:mr})=>mr?"rotateX(180deg)":void 0};
  }
`;function useControllableState$2({prop:mr,defaultProp:hr,onChange:gr=()=>{}}){const[vr,xr]=useUncontrolledState$1({defaultProp:hr,onChange:gr}),Er=mr!==void 0,Cr=mr instanceof Function?mr(vr):mr,wr=Er?Cr:vr,Rr=useCallbackRef(gr),kr=reactExports.useCallback(Dr=>{if(Er){const Hr=typeof Dr=="function"?Dr(Cr):Dr;Hr!==Cr&&(Rr(Hr),xr(Dr))}else xr(Dr)},[Er,Cr,xr,Rr]);return[wr,kr]}const PaginationContext$1=reactExports.createContext({activePage:1,pageCount:1}),usePagination$2=()=>reactExports.useContext(PaginationContext$1),Pagination$2=({children:mr,label:hr="Pagination",activePage:gr,pageCount:vr})=>{const xr=reactExports.useMemo(()=>({activePage:gr,pageCount:vr}),[gr,vr]);return jsxRuntimeExports.jsx(PaginationContext$1.Provider,{value:xr,children:jsxRuntimeExports.jsx(Box,{"aria-label":hr,tag:"nav",children:jsxRuntimeExports.jsx(Flex,{tag:"ol",gap:1,children:reactExports.Children.map(mr,(Er,Cr)=>jsxRuntimeExports.jsx("li",{children:Er},Cr))})})})},PreviousLink$1=forwardRef(({children:mr,...hr},gr)=>{const{activePage:vr}=usePagination$2(),xr=vr===1;return jsxRuntimeExports.jsxs(ActionLinkWrapper$1,{ref:gr,"aria-disabled":xr,tabIndex:xr?-1:void 0,...hr,children:[jsxRuntimeExports.jsx(VisuallyHidden,{children:mr}),jsxRuntimeExports.jsx(ForwardRef$4r,{"aria-hidden":!0})]})}),NextLink$1=forwardRef(({children:mr,...hr},gr)=>{const{activePage:vr,pageCount:xr}=usePagination$2(),Er=vr===xr;return jsxRuntimeExports.jsxs(ActionLinkWrapper$1,{ref:gr,"aria-disabled":Er,tabIndex:Er?-1:void 0,...hr,children:[jsxRuntimeExports.jsx(VisuallyHidden,{children:mr}),jsxRuntimeExports.jsx(ForwardRef$4p,{"aria-hidden":!0})]})}),LinkWrapper=dt$3(BaseLinkImpl)`
  padding: ${({theme:mr})=>mr.spaces[3]};
  border-radius: ${({theme:mr})=>mr.borderRadius};
  box-shadow: ${({$active:mr,theme:hr})=>mr?hr.shadows.filterShadow:void 0};
  text-decoration: none;
  display: flex;

  ${focus}
`,ActionLinkWrapper$1=dt$3(LinkWrapper)`
  font-size: 1.1rem;

  svg path {
    fill: ${mr=>mr["aria-disabled"]?mr.theme.colors.neutral300:mr.theme.colors.neutral600};
  }

  &:focus,
  &:hover {
    svg path {
      fill: ${mr=>mr["aria-disabled"]?mr.theme.colors.neutral300:mr.theme.colors.neutral700};
    }
  }

  ${mr=>mr["aria-disabled"]?`
  pointer-events: none;
    `:void 0}
`,PageLink$1=forwardRef(({number:mr,children:hr,...gr},vr)=>{const{activePage:xr}=usePagination$2(),Er=xr===mr;return jsxRuntimeExports.jsxs(PageLinkWrapper$1,{ref:vr,...gr,"aria-current":Er,$active:Er,children:[jsxRuntimeExports.jsx(VisuallyHidden,{children:hr}),jsxRuntimeExports.jsx(Typography,{"aria-hidden":!0,fontWeight:Er?"bold":void 0,lineHeight:"revert",variant:"pi",children:mr})]})}),PageLinkWrapper$1=dt$3(LinkWrapper)`
  color: ${({theme:mr,$active:hr})=>hr?mr.colors.primary700:mr.colors.neutral800};
  background: ${({theme:mr,$active:hr})=>hr?mr.colors.neutral0:void 0};

  &:hover {
    box-shadow: ${({theme:mr})=>mr.shadows.filterShadow};
  }
`,Dots$1=({children:mr,...hr})=>jsxRuntimeExports.jsxs(Box,{...hr,children:[jsxRuntimeExports.jsx(VisuallyHidden,{children:mr}),jsxRuntimeExports.jsx(Typography,{"aria-hidden":!0,lineHeight:"revert",textColor:"neutral800",variant:"pi",children:"…"})]}),Root$2$1=$cb5cc270b50c6fcd$export$be92b6f5f03c0fe9,Trigger$1$1=reactExports.forwardRef((mr,hr)=>jsxRuntimeExports.jsx($cb5cc270b50c6fcd$export$41fb9f06171c75f4,{...mr,asChild:!0,ref:hr})),Content$1=reactExports.forwardRef((mr,hr)=>jsxRuntimeExports.jsx($cb5cc270b50c6fcd$export$602eac185826482c,{children:jsxRuntimeExports.jsx(PopoverContent,{sideOffset:4,side:"bottom",align:"start",...mr,ref:hr})})),PopoverContent=dt$3($cb5cc270b50c6fcd$export$7c6e2c02157bb7d2)`
  box-shadow: ${({theme:mr})=>mr.shadows.filterShadow};
  z-index: ${({theme:mr})=>mr.zIndices.popover};
  background-color: ${mr=>mr.theme.colors.neutral0};
  border: 1px solid ${({theme:mr})=>mr.colors.neutral150};
  border-radius: ${({theme:mr})=>mr.borderRadius};

  @media (prefers-reduced-motion: no-preference) {
    animation-duration: ${mr=>mr.theme.motion.timings[200]};

    &[data-state='open'] {
      animation-timing-function: ${mr=>mr.theme.motion.easings.authenticMotion};

      &[data-side='top'] {
        animation-name: ${ANIMATIONS.slideUpIn};
      }

      &[data-side='bottom'] {
        animation-name: ${ANIMATIONS.slideDownIn};
      }
    }

    &[data-state='closed'] {
      animation-timing-function: ${mr=>mr.theme.motion.easings.easeOutQuad};

      &[data-side='top'] {
        animation-name: ${ANIMATIONS.slideUpOut};
      }

      &[data-side='bottom'] {
        animation-name: ${ANIMATIONS.slideDownOut};
      }
    }
  }
`,ScrollAreaImpl=reactExports.forwardRef(({children:mr,intersectionId:hr,onReachEnd:gr,...vr},xr)=>{const Er=reactExports.useRef(null),Cr=useComposedRefs(Er,xr),wr=useId();return useIntersection(Er,gr??(()=>{}),{selectorToWatch:`#${stripReactIdOfColon(wr)}`,skipWhen:!hr||!gr}),jsxRuntimeExports.jsxs(PopoverScrollArea,{ref:Cr,...vr,children:[mr,hr&&gr&&jsxRuntimeExports.jsx(Box,{id:stripReactIdOfColon(wr),width:"100%",height:"1px"})]})}),PopoverScrollArea=dt$3(ScrollAreaImpl$1)`
  height: 20rem;
`,Popover=Object.freeze(Object.defineProperty({__proto__:null,Content:Content$1,Root:Root$2$1,ScrollArea:ScrollAreaImpl,Trigger:Trigger$1$1},Symbol.toStringTag,{value:"Module"})),ProgressBar=reactExports.forwardRef(({size:mr="M",value:hr,...gr},vr)=>jsxRuntimeExports.jsx(ProgressRoot,{ref:vr,$size:mr,...gr,children:jsxRuntimeExports.jsx(ProgressIndicator,{style:{transform:`translate3D(-${100-(hr??0)}%, 0, 0)`}})})),ProgressRoot=dt$3($67824d98245208a0$export$be92b6f5f03c0fe9)`
  position: relative;
  overflow: hidden;
  width: ${mr=>mr.$size==="S"?"7.8rem":"10.2rem"};
  height: ${mr=>mr.$size==="S"?"0.4rem":"0.8rem"};
  background-color: ${mr=>mr.theme.colors.neutral600};
  border-radius: ${mr=>mr.theme.borderRadius};

  /* Fix overflow clipping in Safari */
  /* https://gist.github.com/domske/b66047671c780a238b51c51ffde8d3a0 */
  transform: translateZ(0);
`,ProgressIndicator=dt$3($67824d98245208a0$export$adb584737d712b70)`
  background-color: ${({theme:mr})=>mr.colors.neutral0};
  border-radius: ${({theme:mr})=>mr.borderRadius};
  width: 100%;
  height: 100%;

  @media (prefers-reduced-motion: no-preference) {
    transition: transform ${mr=>mr.theme.motion.timings[320]}
      ${mr=>mr.theme.motion.easings.authenticMotion};
  }
`;reactExports.forwardRef((mr,hr)=>jsxRuntimeExports.jsx(RadioGroupRoot,{ref:hr,...mr}));const RadioGroupRoot=dt$3($f99a8c78507165f7$export$be92b6f5f03c0fe9)`
  display: flex;
  flex-direction: column;
  gap: ${mr=>mr.theme.spaces[3]};
`;reactExports.forwardRef(({children:mr,id:hr,...gr},vr)=>{const xr=useId(hr);return jsxRuntimeExports.jsxs(Flex,{gap:2,children:[jsxRuntimeExports.jsx(RadioGroupItem,{id:xr,ref:vr,...gr,children:jsxRuntimeExports.jsx(RadioGroupIndicator,{})}),jsxRuntimeExports.jsx(Typography,{tag:"label",htmlFor:xr,children:mr})]})});const RadioGroupItem=dt$3($f99a8c78507165f7$export$6d08773d2e66f8f2)`
  background: ${mr=>mr.theme.colors.neutral0};
  width: 2rem;
  height: 2rem;
  flex: 0 0 2rem;
  border-radius: 50%;
  border: 1px solid ${mr=>mr.theme.colors.neutral300};
  position: relative;
  z-index: 0;

  @media (prefers-reduced-motion: no-preference) {
    transition: border-color ${mr=>mr.theme.motion.timings[120]}
      ${mr=>mr.theme.motion.easings.easeOutQuad};
  }

  &[data-state='checked'] {
    border: 1px solid ${mr=>mr.theme.colors.primary600};
  }

  &[data-disabled] {
    background-color: ${mr=>mr.theme.colors.neutral200};
  }

  /* increase target size for touch devices https://www.w3.org/WAI/WCAG21/Understanding/target-size.html */
  &::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 100%;
    height: 100%;
    min-width: 44px;
    min-height: 44px;
  }
`,RadioGroupIndicator=dt$3($f99a8c78507165f7$export$adb584737d712b70)`
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
  position: relative;

  &[data-state='checked'] {
    @media (prefers-reduced-motion: no-preference) {
      animation: ${ANIMATIONS.popIn} ${mr=>mr.theme.motion.timings[200]};
    }
  }

  &::after {
    content: '';
    display: block;
    width: 1rem;
    height: 1rem;
    border-radius: 50%;
    background: ${mr=>mr.theme.colors.primary600};
  }
`,focusFocusable=mr=>{const hr=mr.querySelector('[tabindex="0"]');hr&&hr.focus()},RawTableContext=reactExports.createContext({rowIndex:0,colIndex:0,setTableValues(){throw new Error("setTableValues must be initialized via the RawTableContext.Provider")}}),useTable$1=()=>reactExports.useContext(RawTableContext),RawTable=reactExports.forwardRef(({colCount:mr,rowCount:hr,jumpStep:gr=3,initialCol:vr=0,initialRow:xr=0,...Er},Cr)=>{const wr=reactExports.useRef(null),Rr=reactExports.useRef(!1),kr=useComposedRefs(wr,Cr),[Dr,Br]=reactExports.useState(xr),[Hr,Gr]=reactExports.useState(vr),qr=reactExports.useCallback(({colIndex:sn,rowIndex:hn})=>{Gr(sn),Br(hn)},[]);reactExports.useEffect(()=>{Rr.current&&focusFocusable(wr.current),Rr.current||(Rr.current=!0)},[Hr,Dr]);const zr=sn=>{switch(sn.key){case KeyboardKeys.RIGHT:{sn.preventDefault(),Gr(hn=>hn<mr-1?hn+1:hn);break}case KeyboardKeys.LEFT:{sn.preventDefault(),Gr(hn=>hn>0?hn-1:hn);break}case KeyboardKeys.UP:{sn.preventDefault(),Br(hn=>hn>0?hn-1:hn);break}case KeyboardKeys.DOWN:{sn.preventDefault(),Br(hn=>hn<hr-1?hn+1:hn);break}case KeyboardKeys.HOME:{sn.preventDefault(),sn.ctrlKey&&Br(0),Gr(0);break}case KeyboardKeys.END:{sn.preventDefault(),sn.ctrlKey&&Br(hr-1),Gr(mr-1);break}case KeyboardKeys.PAGE_DOWN:{sn.preventDefault(),Br(hn=>hn+gr<hr?hn+gr:hr-1);break}case KeyboardKeys.PAGE_UP:{sn.preventDefault(),Br(hn=>hn-gr>0?hn-gr:0);break}}},Qr=reactExports.useMemo(()=>({rowIndex:Dr,colIndex:Hr,setTableValues:qr}),[Hr,Dr,qr]);return jsxRuntimeExports.jsx(RawTableContext.Provider,{value:Qr,children:jsxRuntimeExports.jsx("table",{role:"grid",ref:kr,"aria-rowcount":hr,"aria-colcount":mr,onKeyDown:zr,...Er})})}),getFocusableNodes=(mr,hr)=>[...mr.querySelectorAll('a, button, input, textarea, select, details, [tabindex]:not([tabindex="-1"])')].filter(xr=>xr.hasAttribute("disabled")?!1:hr?!0:xr.getAttribute("tabindex")!=="-1"),getFocusableNodesWithKeyboardNav=mr=>mr.filter(hr=>hr.tagName==="INPUT"?hr.type!=="checkbox"&&hr.type!=="radio":!1),RawTd=reactExports.forwardRef(({coords:mr={col:0,row:0},tag:hr="td",...gr},vr)=>{const xr=reactExports.useRef(null),Er=useComposedRefs(vr,xr),{rowIndex:Cr,colIndex:wr,setTableValues:Rr}=useTable$1(),[kr,Dr]=reactExports.useState(!1),Br=qr=>{const zr=getFocusableNodes(xr.current,!0);if(zr.length===0||zr.length===1&&getFocusableNodesWithKeyboardNav(zr).length===0)return;if(zr.length>1&&!zr.find(sn=>sn.tagName!=="BUTTON")){qr.preventDefault();const sn=zr.findIndex(hn=>hn===document.activeElement);if(qr.key===KeyboardKeys.RIGHT){const hn=zr[sn+1];hn&&(qr.stopPropagation(),hn.focus())}else if(qr.key===KeyboardKeys.LEFT){const hn=zr[sn-1];hn&&(qr.stopPropagation(),hn.focus())}return}const Qr=qr.key===KeyboardKeys.ENTER;if(Qr&&!kr)Dr(!0);else if((qr.key===KeyboardKeys.ESCAPE||Qr)&&kr){if(Qr&&document.activeElement?.tagName==="A")return;Dr(!1),xr.current.focus()}else kr&&qr.stopPropagation()},Hr=Cr===mr.row-1&&wr===mr.col-1;useIsomorphicLayoutEffect$3(()=>{const qr=getFocusableNodes(xr.current,!0);qr.length===0||qr.length===1&&getFocusableNodesWithKeyboardNav(qr).length!==0||qr.length>1&&qr.find(zr=>zr.tagName!=="BUTTON")?(xr.current.setAttribute("tabIndex",!kr&&Hr?"0":"-1"),qr.forEach((zr,Qr)=>{zr.setAttribute("tabIndex",kr?"0":"-1"),kr&&Qr===0&&zr.focus()})):qr.forEach(zr=>{zr.setAttribute("tabIndex",Hr?"0":"-1")})},[kr,Hr]);const Gr=reactExports.useCallback(()=>{const qr=getFocusableNodes(xr.current,!0);qr.length>=1&&(getFocusableNodesWithKeyboardNav(qr).length!==0||!qr.find(zr=>zr.tagName!=="BUTTON"))&&Dr(!0),Rr({rowIndex:mr.row-1,colIndex:mr.col-1})},[mr,Rr]);return useIsomorphicLayoutEffect$3(()=>{const qr=xr.current;return getFocusableNodes(qr,!0).forEach(Qr=>{Qr.addEventListener("focus",Gr)}),()=>{getFocusableNodes(qr,!0).forEach(sn=>{sn.removeEventListener("focus",Gr)})}},[Gr]),jsxRuntimeExports.jsx(Box,{role:"gridcell",tag:hr,ref:Er,onKeyDown:Br,...gr})}),RawTh=mr=>jsxRuntimeExports.jsx(RawTd,{...mr,tag:"th"}),RawThead=({children:mr,...hr})=>{const gr=reactExports.Children.toArray(mr).map(vr=>reactExports.isValidElement(vr)?reactExports.cloneElement(vr,{"aria-rowindex":1}):vr);return jsxRuntimeExports.jsx("thead",{...hr,children:gr})},RawTbody=({children:mr,...hr})=>{const gr=reactExports.Children.toArray(mr).map((vr,xr)=>reactExports.isValidElement(vr)?reactExports.cloneElement(vr,{"aria-rowindex":xr+2}):vr);return jsxRuntimeExports.jsx("tbody",{...hr,children:gr})},RawTr=({children:mr,...hr})=>{const gr=reactExports.Children.toArray(mr).map((vr,xr)=>reactExports.isValidElement(vr)?reactExports.cloneElement(vr,{"aria-colindex":xr+1,coords:{col:xr+1,row:hr["aria-rowindex"]}}):vr);return jsxRuntimeExports.jsx(Box,{tag:"tr",...hr,children:gr})},CloseIcon=dt$3(ForwardRef$3$)`
  font-size: 0.5rem;
  path {
    fill: ${({theme:mr})=>mr.colors.neutral400};
  }
`,SearchIcon=dt$3(ForwardRef$V$1)`
  font-size: 0.8rem;
  path {
    fill: ${({theme:mr})=>mr.colors.neutral800};
  }
`,SearchbarWrapper=dt$3.div`
  border-radius: ${({theme:mr})=>mr.borderRadius};
  box-shadow: ${({theme:mr})=>mr.shadows.filterShadow};

  &:focus-within {
    ${SearchIcon} {
      fill: ${({theme:mr})=>mr.colors.primary600};
    }
  }
`,SearchbarInput=dt$3(Input$2)`
  border: 1px solid transparent;

  &:hover {
    button {
      cursor: pointer;
    }
  }

  ${inputFocusStyle()}
`,Searchbar=reactExports.forwardRef(({name:mr,children:hr,value:gr="",onClear:vr,clearLabel:xr,...Er},Cr)=>{const wr=reactExports.useRef(null),Rr=gr.length>0,kr=Br=>{vr(Br),wr.current.focus()},Dr=composeRefs(Cr,wr);return jsxRuntimeExports.jsx(SearchbarWrapper,{children:jsxRuntimeExports.jsxs(Root$6,{name:mr,children:[jsxRuntimeExports.jsx(VisuallyHidden,{children:jsxRuntimeExports.jsx(Label,{children:hr})}),jsxRuntimeExports.jsx(SearchbarInput,{ref:Dr,value:gr,startAction:jsxRuntimeExports.jsx(SearchIcon,{"aria-hidden":!0}),endAction:Rr?jsxRuntimeExports.jsx(Action$1,{label:xr,onClick:kr,onMouseDown:Br=>{Br.preventDefault()},children:jsxRuntimeExports.jsx(CloseIcon,{})}):void 0,...Er})]})})}),SearchForm=mr=>jsxRuntimeExports.jsx("form",{...mr,role:"search"}),ButtonBox$1=dt$3(Box)`
  display: inline-flex;
  border: none;

  & > svg {
    height: 1.2rem;
    width: 1.2rem;
  }

  & > svg path {
    fill: ${({theme:mr,...hr})=>hr["aria-disabled"]?mr.colors.neutral600:mr.colors.primary600};
  }

  &:hover {
    cursor: ${({$iconAction:mr})=>mr?"pointer":"initial"};
  }
`,Tag=({children:mr,icon:hr,label:gr,disabled:vr=!1,onClick:xr,...Er})=>{const Cr=wr=>{vr||!xr||xr(wr)};return jsxRuntimeExports.jsxs(Flex,{inline:!0,background:vr?"neutral200":"primary100",color:vr?"neutral700":"primary600",paddingLeft:3,paddingRight:1,borderColor:vr?"neutral300":"primary200",hasRadius:!0,height:"3.2rem",...Er,children:[jsxRuntimeExports.jsx(TagText,{$disabled:vr,variant:"pi",fontWeight:"bold",children:mr}),jsxRuntimeExports.jsx(ButtonBox$1,{tag:"button",disabled:vr,"aria-disabled":vr,"aria-label":gr,padding:2,onClick:Cr,$iconAction:!!xr,children:hr})]})},TagText=dt$3(Typography)`
  color: inherit;
  border-right: 1px solid ${({theme:mr,$disabled:hr})=>hr?mr.colors.neutral300:mr.colors.primary200};
  padding-right: ${({theme:mr})=>mr.spaces[2]};
`;reactExports.forwardRef(({children:mr,clearLabel:hr="Clear",customizeContent:gr,disabled:vr,hasError:xr,id:Er,name:Cr,onChange:wr,onClear:Rr,onCloseAutoFocus:kr,onReachEnd:Dr,placeholder:Br,required:Hr,size:Gr,startIcon:qr,value:zr,withTags:Qr,...sn},hn)=>{const vn=reactExports.useRef(null),[yn,gn]=reactExports.useState(),[bn,xn]=reactExports.useState(!1),$n=jn=>{wr?wr(jn):gn(jn)},Sn=jn=>()=>{const Kn=Array.isArray(zr)?zr.filter(Nn=>Nn!==jn):(yn??[]).filter(Nn=>Nn!==jn);wr?wr(Kn):gn(Kn)},Cn=jn=>{xn(jn)},Rn=useId(),Bn=`intersection-${stripReactIdOfColon(Rn)}`;useIntersection(vn,jn=>{Dr&&Dr(jn)},{selectorToWatch:`#${Bn}`,skipWhen:!bn});const Hn=typeof zr<"u"&&zr!==null?zr:yn,Gn=jn=>jn&&typeof jn=="object"&&jn.value?jsxRuntimeExports.jsx(Tag,{tabIndex:-1,disabled:vr,icon:jsxRuntimeExports.jsx(ForwardRef$3$,{width:`${14/16}rem`,height:`${14/16}rem`}),onClick:Sn(jn.value),children:jn.textValue},jn.value):null,{error:qn,...On}=useField$1("MultiSelect"),wn=!!qn||xr,_n=On.id??Er,Tn=On.name??Cr,Mn=On.required??Hr;let Ln;return qn?Ln=`${_n}-error`:On.hint&&(Ln=`${_n}-hint`),jsxRuntimeExports.jsxs(Root$4,{onOpenChange:Cn,disabled:vr,required:Mn,onValueChange:$n,value:Hn,...sn,multi:!0,children:[jsxRuntimeExports.jsx(Trigger$3,{ref:hn,id:_n,name:Tn,"aria-label":sn["aria-label"],"aria-describedby":Ln??sn["aria-describedby"],startIcon:qr,hasError:wn,disabled:vr,clearLabel:hr,onClear:Hn?.length?Rr:void 0,withTags:!!(Qr&&(Hn?.length??!1)),size:Gr,children:jsxRuntimeExports.jsx(Value,{placeholder:Br,textColor:Hn?.length?"neutral800":"neutral600",children:Hn?.length?Qr?Gn:gr?gr(Hn):void 0:void 0})}),jsxRuntimeExports.jsx(Portal,{children:jsxRuntimeExports.jsx(Content$3,{position:"popper",sideOffset:4,onCloseAutoFocus:kr,children:jsxRuntimeExports.jsxs(Viewport,{ref:vn,children:[mr,jsxRuntimeExports.jsx(Box,{id:Bn,width:"100%",height:"1px"})]})})})]})});const MultiSelectOption=reactExports.forwardRef(({value:mr,children:hr,startIcon:gr,...vr},xr)=>jsxRuntimeExports.jsxs(Item$2,{ref:xr,value:mr.toString(),...vr,children:[gr&&jsxRuntimeExports.jsx(Box,{tag:"span","aria-hidden":!0,children:gr}),jsxRuntimeExports.jsx(ItemIndicator,{children:({isSelected:Er,isIntermediate:Cr})=>jsxRuntimeExports.jsx(CheckboxImpl,{checked:Cr?"indeterminate":Er})}),jsxRuntimeExports.jsx(Typography,{children:jsxRuntimeExports.jsx(ItemText,{children:hr})})]}));reactExports.forwardRef(({children:mr,label:hr,startIcon:gr,values:vr=[],...xr},Er)=>jsxRuntimeExports.jsxs(Group$1$1,{ref:Er,children:[jsxRuntimeExports.jsxs(Item$2,{value:vr,...xr,children:[gr&&jsxRuntimeExports.jsx(Box,{tag:"span","aria-hidden":!0,children:gr}),jsxRuntimeExports.jsx(ItemIndicator,{children:({isSelected:Cr,isIntermediate:wr})=>jsxRuntimeExports.jsx(CheckboxImpl,{checked:wr?"indeterminate":Cr})}),jsxRuntimeExports.jsx(Typography,{children:hr})]}),mr]}));dt$3(MultiSelectOption)`
  padding-left: ${({theme:mr})=>mr.spaces[7]};
`;const getPadding=mr=>mr==="XS"?{paddingX:"0.6rem",paddingY:"0.2rem"}:mr==="S"?{paddingX:2,paddingY:1}:{paddingX:5,paddingY:4},Status$1=({variant:mr="primary",size:hr="M",children:gr,...vr})=>{const xr=`${mr}100`,Er=`${mr}200`,Cr=`${mr}600`,{paddingX:wr,paddingY:Rr}=getPadding(hr);return jsxRuntimeExports.jsx(Box,{borderColor:Er,color:Cr,background:xr,hasRadius:!0,paddingTop:Rr,paddingBottom:Rr,paddingLeft:wr,paddingRight:wr,...vr,children:gr})},SUBNAV_WIDTH="23.2rem";reactExports.forwardRef(({...mr},hr)=>jsxRuntimeExports.jsx(SubNavWrapper,{ref:hr,...mr,tag:"nav"}));const SubNavWrapper=dt$3(Box)`
  width: ${SUBNAV_WIDTH};
  background: ${({theme:mr})=>mr.colors.neutral100};
  position: sticky;
  top: 0;
  height: 100vh;
  overflow-y: auto;
  border-right: 1px solid ${({theme:mr})=>mr.colors.neutral200};
  z-index: 1;
`;dt$3(Divider)`
  width: 2.4rem;
  background-color: ${({theme:mr})=>mr.colors.neutral200};
`;forwardRef(({active:mr,children:hr,icon:gr=null,withBullet:vr=!1,isSubSectionChild:xr=!1,...Er},Cr)=>jsxRuntimeExports.jsxs(SubNavLinkWrapper,{background:"neutral100",paddingLeft:xr?9:7,paddingBottom:2,paddingTop:2,ref:Cr,...Er,children:[jsxRuntimeExports.jsxs(Flex,{children:[gr?jsxRuntimeExports.jsx(IconWrapper$1,{children:gr}):jsxRuntimeExports.jsx(CustomBullet,{$active:mr}),jsxRuntimeExports.jsx(Typography,{paddingLeft:2,children:hr})]}),vr&&jsxRuntimeExports.jsx(Flex,{paddingRight:4,children:jsxRuntimeExports.jsx(CustomBullet,{$active:!0})})]}));const CustomBullet=dt$3.span`
  width: 0.4rem;
  height: 0.4rem;
  background-color: ${({theme:mr,$active:hr})=>hr?mr.colors.primary600:mr.colors.neutral600};
  border-radius: 50%;
`,SubNavLinkWrapper=dt$3(BaseLinkImpl)`
  display: flex;
  align-items: center;
  justify-content: space-between;
  text-decoration: none;
  color: ${({theme:mr})=>mr.colors.neutral800};
  svg > * {
    fill: ${({theme:mr})=>mr.colors.neutral600};
  }

  &.active {
    ${({theme:mr})=>lt$4`
        background-color: ${mr.colors.primary100};
        border-right: 2px solid ${mr.colors.primary600};
        color: ${mr.colors.primary700};
        font-weight: 500;
      `}

    ${CustomBullet} {
      background-color: ${({theme:mr})=>mr.colors.primary600};
    }
  }

  &:focus-visible {
    outline-offset: -2px;
  }
`,IconWrapper$1=dt$3.div`
  svg {
    height: 1.6rem;
    width: 1.6rem;
  }
`;dt$3.button`
  border: none;
  padding: 0;
  background: transparent;
  display: flex;
  align-items: center;
`;dt$3(Box)`
  & > svg {
    height: 0.4rem;
    fill: ${({theme:mr})=>mr.colors.neutral500};
  }
`;reactExports.forwardRef(({visibleLabels:mr,onLabel:hr="On",offLabel:gr="Off",onCheckedChange:vr,checked:xr,defaultChecked:Er,disabled:Cr,...wr},Rr)=>{const[kr,Dr]=useControllableState$1({prop:xr,defaultProp:Er}),Br=Hr=>{Dr(Hr)};return jsxRuntimeExports.jsxs(Flex,{gap:3,children:[jsxRuntimeExports.jsx(SwitchRoot,{ref:Rr,onCheckedChange:composeEventHandlers(vr,Br),checked:kr,disabled:Cr,...wr,children:jsxRuntimeExports.jsx(SwitchThumb,{})}),mr?jsxRuntimeExports.jsx(LabelTypography,{"aria-hidden":!0,"data-disabled":Cr,"data-state":kr?"checked":"unchecked",children:kr?hr:gr}):null]})});const SwitchRoot=dt$3($6be4966fd9bbc698$export$be92b6f5f03c0fe9)`
  width: 4rem;
  height: 2.4rem;
  border-radius: 1.2rem;
  background-color: ${({theme:mr})=>mr.colors.danger500};

  &[data-state='checked'] {
    background-color: ${({theme:mr})=>mr.colors.success500};
  }

  &[data-disabled] {
    background-color: ${({theme:mr})=>mr.colors.neutral300};
  }

  @media (prefers-reduced-motion: no-preference) {
    transition: ${mr=>mr.theme.transitions.backgroundColor};
  }
`,SwitchThumb=dt$3($6be4966fd9bbc698$export$6521433ed15a34db)`
  display: block;
  height: 1.6rem;
  width: 1.6rem;
  border-radius: 50%;
  background-color: ${({theme:mr})=>mr.colors.neutral0};
  transform: translateX(4px);

  &[data-state='checked'] {
    transform: translateX(20px);
  }

  @media (prefers-reduced-motion: no-preference) {
    transition: transform ${mr=>mr.theme.motion.timings[120]}
      ${mr=>mr.theme.motion.easings.authenticMotion};
  }
`,LabelTypography=dt$3(Typography)`
  color: ${mr=>mr.theme.colors.danger600};

  &[data-state='checked'] {
    color: ${mr=>mr.theme.colors.success600};
  }

  &[data-disabled='true'] {
    color: ${({theme:mr})=>mr.colors.neutral500};
  }
`,[TabsProvider,useTabs]=createContext$1("Tabs"),Root$1$1=reactExports.forwardRef(({disabled:mr=!1,variant:hr="regular",hasError:gr,...vr},xr)=>jsxRuntimeExports.jsx(TabsProvider,{disabled:mr,hasError:gr,variant:hr,children:jsxRuntimeExports.jsx(TabsRoot$1,{ref:xr,...vr})})),TabsRoot$1=dt$3($69cb30bb0017df05$export$be92b6f5f03c0fe9)`
  width: 100%;
  position: relative;
`,List$1=reactExports.forwardRef((mr,hr)=>{const{variant:gr}=useTabs("List");return jsxRuntimeExports.jsx(TabsList,{ref:hr,...mr,$variant:gr})}),TabsList=dt$3($69cb30bb0017df05$export$54c2e3dc7acea9f5)`
  display: flex;
  align-items: ${mr=>mr.$variant==="regular"?"flex-end":"unset"};
  position: relative;
  z-index: 0;
`,Trigger$8=reactExports.forwardRef(({children:mr,disabled:hr,...gr},vr)=>{const{disabled:xr,variant:Er,hasError:Cr}=useTabs("Trigger"),wr=xr===!0||xr===gr.value||hr,Rr=Cr===gr.value;return jsxRuntimeExports.jsxs(TabsTrigger,{ref:vr,...gr,$hasError:Rr,$variant:Er,disabled:wr,children:[jsxRuntimeExports.jsx(TriggerTypography,{fontWeight:"bold",variant:Er==="simple"?"sigma":void 0,children:mr}),Er==="simple"?jsxRuntimeExports.jsx(TabBar,{}):null]})}),TabBar=dt$3.span`
  display: block;
  width: 100%;
  background-color: currentColor;
  position: absolute;
  bottom: 0;
  left: 0;
  opacity: 0;
  height: 0.2rem;
`,TriggerTypography=dt$3(Typography)``,TabsTrigger=dt$3($69cb30bb0017df05$export$41fb9f06171c75f4)`
  position: relative;
  color: ${mr=>mr.$hasError?mr.theme.colors.danger600:mr.theme.colors.neutral600};
  cursor: pointer;
  z-index: 0;

  ${mr=>mr.$variant==="simple"?lt$4`
        padding-block: ${hr=>hr.theme.spaces[4]};
        padding-inline: ${hr=>hr.theme.spaces[4]};

        & > ${TriggerTypography} {
          line-height: 1.2rem;
        }

        &[data-state='active'] {
          color: ${mr.$hasError?mr.theme.colors.danger600:mr.theme.colors.primary700};

          & > ${TabBar} {
            opacity: 1;
          }
        }
      `:lt$4`
        padding-block: ${hr=>hr.theme.spaces[3]};
        padding-inline: ${hr=>hr.theme.spaces[3]};
        flex: 1;
        background-color: ${hr=>hr.theme.colors.neutral100};
        border-bottom: solid 1px ${hr=>hr.theme.colors.neutral150};

        &:not([data-state='active']) + &:not([data-state='active']) {
          border-left: solid 1px ${hr=>hr.theme.colors.neutral150};
        }

        &[data-state='active'] {
          padding-block: ${hr=>hr.theme.spaces[4]};
          padding-inline: ${hr=>hr.theme.spaces[4]};
          color: ${mr.$hasError?mr.theme.colors.danger600:mr.theme.colors.primary700};
          border-top-right-radius: ${hr=>hr.theme.borderRadius};
          border-top-left-radius: ${hr=>hr.theme.borderRadius};
          background-color: ${hr=>hr.theme.colors.neutral0};
          border-bottom: solid 1px ${hr=>hr.theme.colors.neutral0};
          box-shadow: ${mr.theme.shadows.tableShadow};
          z-index: 1;
        }
      `}

  &[data-disabled] {
    cursor: not-allowed;
    color: ${mr=>mr.theme.colors.neutral400};
  }
`,Content$8=reactExports.forwardRef((mr,hr)=>{const{variant:gr}=useTabs("Content");return jsxRuntimeExports.jsx(TabsContent,{$variant:gr,ref:hr,...mr})}),TabsContent=dt$3($69cb30bb0017df05$export$7c6e2c02157bb7d2)`
  ${mr=>mr.$variant==="simple"?lt$4``:lt$4`
        position: relative;
        z-index: 1;
        background-color: ${hr=>hr.theme.colors.neutral0};
      `}
`,Tabs=Object.freeze(Object.defineProperty({__proto__:null,Content:Content$8,List:List$1,Root:Root$1$1,Trigger:Trigger$8},Symbol.toStringTag,{value:"Module"})),TableContainer=dt$3(Box)`
  overflow: hidden;
  border: 1px solid ${({theme:mr})=>mr.colors.neutral150};
`,TableWrapper=dt$3(RawTable)`
  width: 100%;
  white-space: nowrap;
`,TableBox=dt$3(Box)`
  &:before {
    // TODO: make sure to add a token for this weird stuff
    background: linear-gradient(90deg, #c0c0cf 0%, rgba(0, 0, 0, 0) 100%);
    opacity: 0.2;
    position: absolute;
    height: 100%;
    content: ${({$overflowing:mr})=>mr==="both"||mr==="left"?"''":void 0};
    box-shadow: ${({theme:mr})=>mr.shadows.tableShadow};
    width: ${({theme:mr})=>mr.spaces[2]};
    left: 0;
  }

  &:after {
    // TODO: make sure to add a token for this weird stuff
    background: linear-gradient(270deg, #c0c0cf 0%, rgba(0, 0, 0, 0) 100%);
    opacity: 0.2;
    position: absolute;
    height: 100%;
    content: ${({$overflowing:mr})=>mr==="both"||mr==="right"?"''":void 0};
    box-shadow: ${({theme:mr})=>mr.shadows.tableShadow};
    width: ${({theme:mr})=>mr.spaces[2]};
    right: 0;
    top: 0;
  }
`,ScrollContainer=dt$3(Box)`
  overflow-x: auto;
`,Table$1=reactExports.forwardRef(({footer:mr,...hr},gr)=>{const vr=reactExports.useRef(null),[xr,Er]=reactExports.useState(),Cr=wr=>{const Rr=wr.target.scrollWidth-wr.target.clientWidth;if(wr.target.scrollLeft===0){Er("right");return}if(wr.target.scrollLeft===Rr){Er("left");return}wr.target.scrollLeft>0&&Er("both")};return reactExports.useEffect(()=>{vr.current.scrollWidth>vr.current.clientWidth&&Er("right")},[]),jsxRuntimeExports.jsxs(TableContainer,{shadow:"tableShadow",hasRadius:!0,background:"neutral0",children:[jsxRuntimeExports.jsx(TableBox,{$overflowing:xr,position:"relative",children:jsxRuntimeExports.jsx(ScrollContainer,{ref:vr,onScroll:Cr,paddingLeft:6,paddingRight:6,children:jsxRuntimeExports.jsx(TableWrapper,{ref:gr,...hr})})}),mr]})}),TbodyWrapper=dt$3(RawTbody)`
  & tr:last-of-type {
    border-bottom: none;
  }
`,Tbody=({children:mr,...hr})=>jsxRuntimeExports.jsx(TbodyWrapper,{...hr,children:mr}),TheadWrapper=dt$3(RawThead)`
  border-bottom: 1px solid ${({theme:mr})=>mr.colors.neutral150};
`,Thead=({children:mr,...hr})=>jsxRuntimeExports.jsx(TheadWrapper,{...hr,children:mr}),TrWrapper=dt$3(RawTr)`
  border-bottom: 1px solid ${({theme:mr})=>mr.colors.neutral150};

  & td,
  & th {
    padding: ${({theme:mr})=>mr.spaces[4]};
  }

  & td:first-of-type,
  & th:first-of-type {
    padding: 0 ${({theme:mr})=>mr.spaces[1]};
  }

  // Resetting padding values and fixing a height
  th {
    padding-top: 0;
    padding-bottom: 0;
    height: 5.6rem;
  }
`,Tr=mr=>jsxRuntimeExports.jsx(TrWrapper,{...mr}),CellWrapper=dt$3(RawTd)`
  vertical-align: middle;
  text-align: left;
  outline-offset: -4px;

  /**
  * Hack to make sure the checkbox looks aligned
  */
  input {
    vertical-align: sub;
  }
`,Th=reactExports.forwardRef(({children:mr,action:hr,...gr},vr)=>jsxRuntimeExports.jsx(CellWrapper,{color:"neutral600",as:RawTh,ref:vr,...gr,children:jsxRuntimeExports.jsxs(Flex,{children:[mr,hr]})})),Td=reactExports.forwardRef(({children:mr,...hr},gr)=>jsxRuntimeExports.jsx(CellWrapper,{color:"neutral800",ref:gr,...hr,children:mr}));dt$3(Box)`
  height: 2.4rem;
  width: 2.4rem;
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-items: center;

  svg {
    height: 1rem;
    width: 1rem;
  }

  svg path {
    fill: ${({theme:mr})=>mr.colors.primary600};
  }
`;dt$3(Box)`
  border-radius: 0 0 ${({theme:mr})=>mr.borderRadius} ${({theme:mr})=>mr.borderRadius};
  display: block;
  width: 100%;
  border: none;
`;const TextButton=forwardRef(({children:mr,startIcon:hr,endIcon:gr,disabled:vr=!1,loading:xr=!1,...Er},Cr)=>{const wr=vr||xr;return jsxRuntimeExports.jsxs(TextButtonWrapper,{ref:Cr,disabled:wr,"aria-disabled":wr,tag:"button",type:"button",gap:2,...Er,children:[xr?jsxRuntimeExports.jsx(LoadingWrapper,{"aria-hidden":!0,children:jsxRuntimeExports.jsx(ForwardRef$2f,{})}):hr,jsxRuntimeExports.jsx(Typography,{variant:"pi",children:mr}),gr]})}),rotation$3=mt$3`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(359deg);
  }
`,LoadingWrapper=dt$3.span`
  display: flex;
  animation: ${rotation$3} 2s infinite linear;
  will-change: transform;
`,TextButtonWrapper=dt$3(Flex)`
  border: none;
  background-color: transparent;
  color: ${mr=>mr.theme.colors.primary600};
  cursor: pointer;

  &[aria-disabled='true'] {
    pointer-events: none;
    color: ${mr=>mr.theme.colors.neutral600};
  }

  ${focus}
`,TextInput=reactExports.forwardRef((mr,hr)=>jsxRuntimeExports.jsx(Input$2,{ref:hr,...mr}));TextInput.displayName="TextInput";const Textarea=reactExports.forwardRef(({disabled:mr,hasError:hr,id:gr,name:vr,required:xr,...Er},Cr)=>{const{error:wr,...Rr}=useField$1("Textarea"),kr=!!wr||hr,Dr=Rr.id??gr,Br=Rr.name??vr,Hr=Rr.required||xr;let Gr;return wr?Gr=`${Dr}-error`:Rr.hint&&(Gr=`${Dr}-hint`),jsxRuntimeExports.jsx(Wrapper$1$1,{borderColor:kr?"danger600":"neutral200",$hasError:kr,hasRadius:!0,children:jsxRuntimeExports.jsx(TextareaElement,{"aria-invalid":kr,"aria-required":Hr,tag:"textarea",background:mr?"neutral150":"neutral0",color:mr?"neutral600":"neutral800",disabled:mr,fontSize:2,hasRadius:!0,ref:Cr,lineHeight:4,padding:4,width:"100%",height:"100%",id:Dr,name:Br,"aria-describedby":Gr,...Er})})}),Wrapper$1$1=dt$3(Box)`
  height: 10.5rem;
  ${inputFocusStyle()}
`,TextareaElement=dt$3(Box)`
  border: none;
  resize: none;

  ::placeholder {
    color: ${({theme:mr})=>mr.colors.neutral500};
    font-size: ${({theme:mr})=>mr.fontSizes[2]};
    color: ${({theme:mr})=>mr.colors.neutral500};
    opacity: 1;
  }

  &:focus-within {
    outline: none;
  }
`,Toggle=reactExports.forwardRef(({offLabel:mr,onLabel:hr,disabled:gr,hasError:vr,required:xr,id:Er,name:Cr,checked:wr,onChange:Rr,...kr},Dr)=>{const[Br=!1,Hr]=useControllableState$1({prop:wr}),Gr=Br!==null&&!Br,{error:qr,...zr}=useField$1("Toggle"),Qr=!!qr||vr,sn=zr.id??Er,hn=zr.name??Cr,vn=zr.required||xr;let yn;return qr?yn=`${sn}-error`:zr.hint&&(yn=`${sn}-hint`),jsxRuntimeExports.jsxs(ToggleWrapper,{position:"relative",hasRadius:!0,padding:1,background:gr?"neutral150":"neutral100",borderStyle:"solid",borderWidth:"1px",borderColor:"neutral200",wrap:"wrap",cursor:gr?"not-allowed":"pointer",$hasError:Qr,children:[jsxRuntimeExports.jsx(ToggleOption,{hasRadius:!0,flex:"1 1 50%",paddingTop:2,paddingBottom:2,paddingLeft:3,paddingRight:3,justifyContent:"center",background:gr&&Gr?"neutral200":Gr?"neutral0":"transparent",borderColor:gr&&Gr?"neutral300":Gr?"neutral200":gr?"neutral150":"neutral100",children:jsxRuntimeExports.jsx(Typography,{variant:"pi",fontWeight:"bold",textTransform:"uppercase",textColor:gr?"neutral700":Gr?"danger700":"neutral600",children:mr})}),jsxRuntimeExports.jsx(ToggleOption,{hasRadius:!0,flex:"1 1 50%",paddingLeft:3,paddingRight:3,justifyContent:"center",background:gr&&Br?"neutral200":Br?"neutral0":"transparent",borderColor:gr&&Br?"neutral300":Br?"neutral200":gr?"neutral150":"neutral100",children:jsxRuntimeExports.jsx(Typography,{variant:"pi",fontWeight:"bold",textTransform:"uppercase",textColor:gr?"neutral700":Br?"primary600":"neutral600",children:hr})}),jsxRuntimeExports.jsx(Input$3,{...kr,id:sn,name:hn,ref:Dr,onChange:gn=>{Hr(gn.currentTarget.checked),Rr?.(gn)},type:"checkbox","aria-required":vn,disabled:gr,"aria-disabled":gr,checked:!!Br,"aria-describedby":yn})]})}),ToggleWrapper=dt$3(Flex)`
  ${inputFocusStyle()}
`,ToggleOption=dt$3(Flex)`
  padding-block: 0.6rem;
`,Input$3=dt$3.input`
  height: 100%;
  left: 0;
  opacity: 0;
  position: absolute;
  top: 0;
  z-index: 0;
  width: 100%;
`,Root$9=forwardRef((mr,hr)=>{const{gap:gr=0,gridCols:vr=12,...xr}=mr;return jsxRuntimeExports.jsx(Wrapper$2,{ref:hr,$gap:gr,$gridCols:vr,...xr})}),Wrapper$2=dt$3(Box)`
  display: grid;
  grid-template-columns: repeat(${({$gridCols:mr})=>mr}, 1fr);
  ${({theme:mr,$gap:hr})=>handleResponsiveValues({gap:hr},mr)}
`,ItemImpl=forwardRef(({col:mr,s:hr,xs:gr,m:vr,...xr},Er)=>jsxRuntimeExports.jsx(Item,{ref:Er,$col:mr,$s:hr,$xs:gr,$m:vr,...xr})),Item=dt$3(Flex)`
  grid-column: span ${({$xs:mr})=>mr??12};
  max-width: 100%;

  ${({theme:mr})=>mr.breakpoints.small} {
    grid-column: span ${({$s:mr,$xs:hr})=>mr??hr??12};
  }

  ${({theme:mr})=>mr.breakpoints.medium} {
    grid-column: span ${({$m:mr,$s:hr,$xs:gr})=>mr??hr??gr??12};
  }

  ${({theme:mr})=>mr.breakpoints.large} {
    grid-column: span ${({$col:mr,$m:hr,$s:gr,$xs:vr})=>mr??hr??gr??vr??12};
  }
`,Grid=Object.freeze(Object.defineProperty({__proto__:null,Item:ItemImpl,Root:Root$9},Symbol.toStringTag,{value:"Module"})),FocusTrap=({onEscape:mr,restoreFocus:hr=!0,skipAutoFocus:gr=!1,...vr})=>{const xr=reactExports.useRef(null);reactExports.useEffect(()=>{let Cr=null;return hr&&(Cr=document.activeElement),()=>{Cr&&Cr.focus()}},[hr]),reactExports.useEffect(()=>{if(!xr.current||gr)return;const Cr=getFocusableNodes(xr.current);Cr.length>0?Cr[0].focus():console.warn("[FocusTrap]: it seems there are no focusable elements in the focus trap tree. Make sure there s at least one.")},[gr]);const Er=Cr=>{if(Cr.key===KeyboardKeys.ESCAPE&&mr){mr();return}if(Cr.key!==KeyboardKeys.TAB)return;const wr=getFocusableNodes(xr.current);if(wr.length>0){const Rr=wr[0],kr=wr[wr.length-1];Cr.shiftKey?Rr===document.activeElement&&(Cr.preventDefault(),kr.focus()):kr===document.activeElement&&(Cr.preventDefault(),Rr.focus())}};return jsxRuntimeExports.jsx("div",{ref:xr,onKeyDown:Er,...vr})},KeyboardNavigable=({tagName:mr,attributeName:hr="",...gr})=>{const vr=()=>{const Cr=document.activeElement;return Cr?mr?Cr.tagName.toLowerCase()===mr:Cr.hasAttribute(hr):!1},xr=Cr=>mr?Cr.querySelectorAll(mr):Cr.querySelectorAll(`[${hr}]`),Er=Cr=>{switch(Cr.key){case KeyboardKeys.RIGHT:case KeyboardKeys.DOWN:{if(vr()){Cr.preventDefault();const wr=document.activeElement,Rr=[...xr(Cr.currentTarget)],kr=Rr.findIndex(Br=>Br===wr),Dr=kr+1<Rr.length?kr+1:0;Rr[Dr].focus()}break}case KeyboardKeys.LEFT:case KeyboardKeys.UP:{if(vr()){Cr.preventDefault();const wr=document.activeElement,Rr=[...xr(Cr.currentTarget)],kr=Rr.findIndex(Br=>Br===wr),Dr=kr-1>-1?kr-1:Rr.length-1;Rr[Dr].focus()}break}case KeyboardKeys.HOME:{vr()&&(Cr.preventDefault(),xr(Cr.currentTarget).item(0).focus());break}case KeyboardKeys.END:{if(vr()){Cr.preventDefault();const wr=xr(Cr.currentTarget);wr.item(wr.length-1).focus()}break}}};return jsxRuntimeExports.jsx(Box,{onKeyDown:Er,...gr})};var freeGlobal$3=typeof commonjsGlobal$1=="object"&&commonjsGlobal$1&&commonjsGlobal$1.Object===Object&&commonjsGlobal$1,_freeGlobal=freeGlobal$3,freeGlobal$2=_freeGlobal,freeSelf$2=typeof self=="object"&&self&&self.Object===Object&&self,root$f=freeGlobal$2||freeSelf$2||Function("return this")(),_root=root$f,root$e=_root,Symbol$9=root$e.Symbol,_Symbol=Symbol$9,Symbol$8=_Symbol,objectProto$w=Object.prototype,hasOwnProperty$r=objectProto$w.hasOwnProperty,nativeObjectToString$3=objectProto$w.toString,symToStringTag$3=Symbol$8?Symbol$8.toStringTag:void 0;function getRawTag$2(mr){var hr=hasOwnProperty$r.call(mr,symToStringTag$3),gr=mr[symToStringTag$3];try{mr[symToStringTag$3]=void 0;var vr=!0}catch{}var xr=nativeObjectToString$3.call(mr);return vr&&(hr?mr[symToStringTag$3]=gr:delete mr[symToStringTag$3]),xr}var _getRawTag=getRawTag$2,objectProto$v=Object.prototype,nativeObjectToString$2=objectProto$v.toString;function objectToString$4(mr){return nativeObjectToString$2.call(mr)}var _objectToString=objectToString$4,Symbol$7=_Symbol,getRawTag$1=_getRawTag,objectToString$3=_objectToString,nullTag$1="[object Null]",undefinedTag$1="[object Undefined]",symToStringTag$2=Symbol$7?Symbol$7.toStringTag:void 0;function baseGetTag$8(mr){return mr==null?mr===void 0?undefinedTag$1:nullTag$1:symToStringTag$2&&symToStringTag$2 in Object(mr)?getRawTag$1(mr):objectToString$3(mr)}var _baseGetTag=baseGetTag$8;function isObject$l(mr){var hr=typeof mr;return mr!=null&&(hr=="object"||hr=="function")}var isObject_1=isObject$l,baseGetTag$7=_baseGetTag,isObject$k=isObject_1,asyncTag$1="[object AsyncFunction]",funcTag$5="[object Function]",genTag$3="[object GeneratorFunction]",proxyTag$1="[object Proxy]";function isFunction$8(mr){if(!isObject$k(mr))return!1;var hr=baseGetTag$7(mr);return hr==funcTag$5||hr==genTag$3||hr==asyncTag$1||hr==proxyTag$1}var isFunction_1=isFunction$8;function listCacheClear$2(){this.__data__=[],this.size=0}var _listCacheClear=listCacheClear$2;function eq$6(mr,hr){return mr===hr||mr!==mr&&hr!==hr}var eq_1=eq$6,eq$5=eq_1;function assocIndexOf$5(mr,hr){for(var gr=mr.length;gr--;)if(eq$5(mr[gr][0],hr))return gr;return-1}var _assocIndexOf=assocIndexOf$5,assocIndexOf$4=_assocIndexOf,arrayProto$1=Array.prototype,splice$1=arrayProto$1.splice;function listCacheDelete$2(mr){var hr=this.__data__,gr=assocIndexOf$4(hr,mr);if(gr<0)return!1;var vr=hr.length-1;return gr==vr?hr.pop():splice$1.call(hr,gr,1),--this.size,!0}var _listCacheDelete=listCacheDelete$2,assocIndexOf$3=_assocIndexOf;function listCacheGet$2(mr){var hr=this.__data__,gr=assocIndexOf$3(hr,mr);return gr<0?void 0:hr[gr][1]}var _listCacheGet=listCacheGet$2,assocIndexOf$2=_assocIndexOf;function listCacheHas$2(mr){return assocIndexOf$2(this.__data__,mr)>-1}var _listCacheHas=listCacheHas$2,assocIndexOf$1=_assocIndexOf;function listCacheSet$2(mr,hr){var gr=this.__data__,vr=assocIndexOf$1(gr,mr);return vr<0?(++this.size,gr.push([mr,hr])):gr[vr][1]=hr,this}var _listCacheSet=listCacheSet$2,listCacheClear$1=_listCacheClear,listCacheDelete$1=_listCacheDelete,listCacheGet$1=_listCacheGet,listCacheHas$1=_listCacheHas,listCacheSet$1=_listCacheSet;function ListCache$5(mr){var hr=-1,gr=mr==null?0:mr.length;for(this.clear();++hr<gr;){var vr=mr[hr];this.set(vr[0],vr[1])}}ListCache$5.prototype.clear=listCacheClear$1;ListCache$5.prototype.delete=listCacheDelete$1;ListCache$5.prototype.get=listCacheGet$1;ListCache$5.prototype.has=listCacheHas$1;ListCache$5.prototype.set=listCacheSet$1;var _ListCache=ListCache$5,ListCache$4=_ListCache;function stackClear$2(){this.__data__=new ListCache$4,this.size=0}var _stackClear=stackClear$2;function stackDelete$2(mr){var hr=this.__data__,gr=hr.delete(mr);return this.size=hr.size,gr}var _stackDelete=stackDelete$2;function stackGet$2(mr){return this.__data__.get(mr)}var _stackGet=stackGet$2;function stackHas$2(mr){return this.__data__.has(mr)}var _stackHas=stackHas$2,root$d=_root,coreJsData$2=root$d["__core-js_shared__"],_coreJsData=coreJsData$2,coreJsData$1=_coreJsData,maskSrcKey$1=function(){var mr=/[^.]+$/.exec(coreJsData$1&&coreJsData$1.keys&&coreJsData$1.keys.IE_PROTO||"");return mr?"Symbol(src)_1."+mr:""}();function isMasked$2(mr){return!!maskSrcKey$1&&maskSrcKey$1 in mr}var _isMasked=isMasked$2,funcProto$5=Function.prototype,funcToString$5=funcProto$5.toString;function toSource$3(mr){if(mr!=null){try{return funcToString$5.call(mr)}catch{}try{return mr+""}catch{}}return""}var _toSource=toSource$3,isFunction$7=isFunction_1,isMasked$1=_isMasked,isObject$j=isObject_1,toSource$2=_toSource,reRegExpChar$1=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor$1=/^\[object .+?Constructor\]$/,funcProto$4=Function.prototype,objectProto$u=Object.prototype,funcToString$4=funcProto$4.toString,hasOwnProperty$q=objectProto$u.hasOwnProperty,reIsNative$1=RegExp("^"+funcToString$4.call(hasOwnProperty$q).replace(reRegExpChar$1,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative$2(mr){if(!isObject$j(mr)||isMasked$1(mr))return!1;var hr=isFunction$7(mr)?reIsNative$1:reIsHostCtor$1;return hr.test(toSource$2(mr))}var _baseIsNative=baseIsNative$2;function getValue$2(mr,hr){return mr?.[hr]}var _getValue=getValue$2,baseIsNative$1=_baseIsNative,getValue$1=_getValue;function getNative$8(mr,hr){var gr=getValue$1(mr,hr);return baseIsNative$1(gr)?gr:void 0}var _getNative=getNative$8,getNative$7=_getNative,root$c=_root,Map$5=getNative$7(root$c,"Map"),_Map=Map$5,getNative$6=_getNative,nativeCreate$5=getNative$6(Object,"create"),_nativeCreate=nativeCreate$5,nativeCreate$4=_nativeCreate;function hashClear$2(){this.__data__=nativeCreate$4?nativeCreate$4(null):{},this.size=0}var _hashClear=hashClear$2;function hashDelete$2(mr){var hr=this.has(mr)&&delete this.__data__[mr];return this.size-=hr?1:0,hr}var _hashDelete=hashDelete$2,nativeCreate$3=_nativeCreate,HASH_UNDEFINED$4="__lodash_hash_undefined__",objectProto$t=Object.prototype,hasOwnProperty$p=objectProto$t.hasOwnProperty;function hashGet$2(mr){var hr=this.__data__;if(nativeCreate$3){var gr=hr[mr];return gr===HASH_UNDEFINED$4?void 0:gr}return hasOwnProperty$p.call(hr,mr)?hr[mr]:void 0}var _hashGet=hashGet$2,nativeCreate$2=_nativeCreate,objectProto$s=Object.prototype,hasOwnProperty$o=objectProto$s.hasOwnProperty;function hashHas$2(mr){var hr=this.__data__;return nativeCreate$2?hr[mr]!==void 0:hasOwnProperty$o.call(hr,mr)}var _hashHas=hashHas$2,nativeCreate$1=_nativeCreate,HASH_UNDEFINED$3="__lodash_hash_undefined__";function hashSet$2(mr,hr){var gr=this.__data__;return this.size+=this.has(mr)?0:1,gr[mr]=nativeCreate$1&&hr===void 0?HASH_UNDEFINED$3:hr,this}var _hashSet=hashSet$2,hashClear$1=_hashClear,hashDelete$1=_hashDelete,hashGet$1=_hashGet,hashHas$1=_hashHas,hashSet$1=_hashSet;function Hash$2(mr){var hr=-1,gr=mr==null?0:mr.length;for(this.clear();++hr<gr;){var vr=mr[hr];this.set(vr[0],vr[1])}}Hash$2.prototype.clear=hashClear$1;Hash$2.prototype.delete=hashDelete$1;Hash$2.prototype.get=hashGet$1;Hash$2.prototype.has=hashHas$1;Hash$2.prototype.set=hashSet$1;var _Hash=Hash$2,Hash$1=_Hash,ListCache$3=_ListCache,Map$4=_Map;function mapCacheClear$2(){this.size=0,this.__data__={hash:new Hash$1,map:new(Map$4||ListCache$3),string:new Hash$1}}var _mapCacheClear=mapCacheClear$2;function isKeyable$2(mr){var hr=typeof mr;return hr=="string"||hr=="number"||hr=="symbol"||hr=="boolean"?mr!=="__proto__":mr===null}var _isKeyable=isKeyable$2,isKeyable$1=_isKeyable;function getMapData$5(mr,hr){var gr=mr.__data__;return isKeyable$1(hr)?gr[typeof hr=="string"?"string":"hash"]:gr.map}var _getMapData=getMapData$5,getMapData$4=_getMapData;function mapCacheDelete$2(mr){var hr=getMapData$4(this,mr).delete(mr);return this.size-=hr?1:0,hr}var _mapCacheDelete=mapCacheDelete$2,getMapData$3=_getMapData;function mapCacheGet$2(mr){return getMapData$3(this,mr).get(mr)}var _mapCacheGet=mapCacheGet$2,getMapData$2=_getMapData;function mapCacheHas$2(mr){return getMapData$2(this,mr).has(mr)}var _mapCacheHas=mapCacheHas$2,getMapData$1=_getMapData;function mapCacheSet$2(mr,hr){var gr=getMapData$1(this,mr),vr=gr.size;return gr.set(mr,hr),this.size+=gr.size==vr?0:1,this}var _mapCacheSet=mapCacheSet$2,mapCacheClear$1=_mapCacheClear,mapCacheDelete$1=_mapCacheDelete,mapCacheGet$1=_mapCacheGet,mapCacheHas$1=_mapCacheHas,mapCacheSet$1=_mapCacheSet;function MapCache$4(mr){var hr=-1,gr=mr==null?0:mr.length;for(this.clear();++hr<gr;){var vr=mr[hr];this.set(vr[0],vr[1])}}MapCache$4.prototype.clear=mapCacheClear$1;MapCache$4.prototype.delete=mapCacheDelete$1;MapCache$4.prototype.get=mapCacheGet$1;MapCache$4.prototype.has=mapCacheHas$1;MapCache$4.prototype.set=mapCacheSet$1;var _MapCache=MapCache$4,ListCache$2=_ListCache,Map$3=_Map,MapCache$3=_MapCache,LARGE_ARRAY_SIZE$1=200;function stackSet$2(mr,hr){var gr=this.__data__;if(gr instanceof ListCache$2){var vr=gr.__data__;if(!Map$3||vr.length<LARGE_ARRAY_SIZE$1-1)return vr.push([mr,hr]),this.size=++gr.size,this;gr=this.__data__=new MapCache$3(vr)}return gr.set(mr,hr),this.size=gr.size,this}var _stackSet=stackSet$2,ListCache$1=_ListCache,stackClear$1=_stackClear,stackDelete$1=_stackDelete,stackGet$1=_stackGet,stackHas$1=_stackHas,stackSet$1=_stackSet;function Stack$5(mr){var hr=this.__data__=new ListCache$1(mr);this.size=hr.size}Stack$5.prototype.clear=stackClear$1;Stack$5.prototype.delete=stackDelete$1;Stack$5.prototype.get=stackGet$1;Stack$5.prototype.has=stackHas$1;Stack$5.prototype.set=stackSet$1;var _Stack=Stack$5,getNative$5=_getNative,defineProperty$3=function(){try{var mr=getNative$5(Object,"defineProperty");return mr({},"",{}),mr}catch{}}(),_defineProperty$3=defineProperty$3,defineProperty$2=_defineProperty$3;function baseAssignValue$5(mr,hr,gr){hr=="__proto__"&&defineProperty$2?defineProperty$2(mr,hr,{configurable:!0,enumerable:!0,value:gr,writable:!0}):mr[hr]=gr}var _baseAssignValue=baseAssignValue$5,baseAssignValue$4=_baseAssignValue,eq$4=eq_1;function assignMergeValue$2(mr,hr,gr){(gr!==void 0&&!eq$4(mr[hr],gr)||gr===void 0&&!(hr in mr))&&baseAssignValue$4(mr,hr,gr)}var _assignMergeValue=assignMergeValue$2;function createBaseFor$1(mr){return function(hr,gr,vr){for(var xr=-1,Er=Object(hr),Cr=vr(hr),wr=Cr.length;wr--;){var Rr=Cr[mr?wr:++xr];if(gr(Er[Rr],Rr,Er)===!1)break}return hr}}var _createBaseFor=createBaseFor$1,createBaseFor=_createBaseFor,baseFor$2=createBaseFor(),_baseFor=baseFor$2,_cloneBuffer={exports:{}};_cloneBuffer.exports;(function(mr,hr){var gr=_root,vr=hr&&!hr.nodeType&&hr,xr=vr&&!0&&mr&&!mr.nodeType&&mr,Er=xr&&xr.exports===vr,Cr=Er?gr.Buffer:void 0,wr=Cr?Cr.allocUnsafe:void 0;function Rr(kr,Dr){if(Dr)return kr.slice();var Br=kr.length,Hr=wr?wr(Br):new kr.constructor(Br);return kr.copy(Hr),Hr}mr.exports=Rr})(_cloneBuffer,_cloneBuffer.exports);var _cloneBufferExports=_cloneBuffer.exports,root$b=_root,Uint8Array$4=root$b.Uint8Array,_Uint8Array=Uint8Array$4,Uint8Array$3=_Uint8Array;function cloneArrayBuffer$4(mr){var hr=new mr.constructor(mr.byteLength);return new Uint8Array$3(hr).set(new Uint8Array$3(mr)),hr}var _cloneArrayBuffer=cloneArrayBuffer$4,cloneArrayBuffer$3=_cloneArrayBuffer;function cloneTypedArray$3(mr,hr){var gr=hr?cloneArrayBuffer$3(mr.buffer):mr.buffer;return new mr.constructor(gr,mr.byteOffset,mr.length)}var _cloneTypedArray=cloneTypedArray$3;function copyArray$5(mr,hr){var gr=-1,vr=mr.length;for(hr||(hr=Array(vr));++gr<vr;)hr[gr]=mr[gr];return hr}var _copyArray=copyArray$5,isObject$i=isObject_1,objectCreate$1=Object.create,baseCreate$3=function(){function mr(){}return function(hr){if(!isObject$i(hr))return{};if(objectCreate$1)return objectCreate$1(hr);mr.prototype=hr;var gr=new mr;return mr.prototype=void 0,gr}}(),_baseCreate=baseCreate$3;function overArg$3(mr,hr){return function(gr){return mr(hr(gr))}}var _overArg=overArg$3,overArg$2=_overArg,getPrototype$4=overArg$2(Object.getPrototypeOf,Object),_getPrototype=getPrototype$4,objectProto$r=Object.prototype;function isPrototype$5(mr){var hr=mr&&mr.constructor,gr=typeof hr=="function"&&hr.prototype||objectProto$r;return mr===gr}var _isPrototype=isPrototype$5,baseCreate$2=_baseCreate,getPrototype$3=_getPrototype,isPrototype$4=_isPrototype;function initCloneObject$3(mr){return typeof mr.constructor=="function"&&!isPrototype$4(mr)?baseCreate$2(getPrototype$3(mr)):{}}var _initCloneObject=initCloneObject$3;function isObjectLike$d(mr){return mr!=null&&typeof mr=="object"}var isObjectLike_1=isObjectLike$d,baseGetTag$6=_baseGetTag,isObjectLike$c=isObjectLike_1,argsTag$6="[object Arguments]";function baseIsArguments$2(mr){return isObjectLike$c(mr)&&baseGetTag$6(mr)==argsTag$6}var _baseIsArguments=baseIsArguments$2,baseIsArguments$1=_baseIsArguments,isObjectLike$b=isObjectLike_1,objectProto$q=Object.prototype,hasOwnProperty$n=objectProto$q.hasOwnProperty,propertyIsEnumerable$3=objectProto$q.propertyIsEnumerable,isArguments$6=baseIsArguments$1(function(){return arguments}())?baseIsArguments$1:function(mr){return isObjectLike$b(mr)&&hasOwnProperty$n.call(mr,"callee")&&!propertyIsEnumerable$3.call(mr,"callee")},isArguments_1=isArguments$6,isArray$l=Array.isArray,isArray_1=isArray$l,MAX_SAFE_INTEGER$4=9007199254740991;function isLength$4(mr){return typeof mr=="number"&&mr>-1&&mr%1==0&&mr<=MAX_SAFE_INTEGER$4}var isLength_1=isLength$4,isFunction$6=isFunction_1,isLength$3=isLength_1;function isArrayLike$6(mr){return mr!=null&&isLength$3(mr.length)&&!isFunction$6(mr)}var isArrayLike_1=isArrayLike$6,isArrayLike$5=isArrayLike_1,isObjectLike$a=isObjectLike_1;function isArrayLikeObject$1(mr){return isObjectLike$a(mr)&&isArrayLike$5(mr)}var isArrayLikeObject_1=isArrayLikeObject$1,isBuffer$8={exports:{}};function stubFalse$1(){return!1}var stubFalse_1=stubFalse$1;isBuffer$8.exports;(function(mr,hr){var gr=_root,vr=stubFalse_1,xr=hr&&!hr.nodeType&&hr,Er=xr&&!0&&mr&&!mr.nodeType&&mr,Cr=Er&&Er.exports===xr,wr=Cr?gr.Buffer:void 0,Rr=wr?wr.isBuffer:void 0,kr=Rr||vr;mr.exports=kr})(isBuffer$8,isBuffer$8.exports);var isBufferExports=isBuffer$8.exports,baseGetTag$5=_baseGetTag,getPrototype$2=_getPrototype,isObjectLike$9=isObjectLike_1,objectTag$8="[object Object]",funcProto$3=Function.prototype,objectProto$p=Object.prototype,funcToString$3=funcProto$3.toString,hasOwnProperty$m=objectProto$p.hasOwnProperty,objectCtorString$1=funcToString$3.call(Object);function isPlainObject$9(mr){if(!isObjectLike$9(mr)||baseGetTag$5(mr)!=objectTag$8)return!1;var hr=getPrototype$2(mr);if(hr===null)return!0;var gr=hasOwnProperty$m.call(hr,"constructor")&&hr.constructor;return typeof gr=="function"&&gr instanceof gr&&funcToString$3.call(gr)==objectCtorString$1}var isPlainObject_1=isPlainObject$9,baseGetTag$4=_baseGetTag,isLength$2=isLength_1,isObjectLike$8=isObjectLike_1,argsTag$5="[object Arguments]",arrayTag$4="[object Array]",boolTag$6="[object Boolean]",dateTag$6="[object Date]",errorTag$5="[object Error]",funcTag$4="[object Function]",mapTag$b="[object Map]",numberTag$6="[object Number]",objectTag$7="[object Object]",regexpTag$6="[object RegExp]",setTag$b="[object Set]",stringTag$6="[object String]",weakMapTag$6="[object WeakMap]",arrayBufferTag$6="[object ArrayBuffer]",dataViewTag$8="[object DataView]",float32Tag$5="[object Float32Array]",float64Tag$5="[object Float64Array]",int8Tag$5="[object Int8Array]",int16Tag$5="[object Int16Array]",int32Tag$5="[object Int32Array]",uint8Tag$5="[object Uint8Array]",uint8ClampedTag$5="[object Uint8ClampedArray]",uint16Tag$5="[object Uint16Array]",uint32Tag$5="[object Uint32Array]",typedArrayTags$1={};typedArrayTags$1[float32Tag$5]=typedArrayTags$1[float64Tag$5]=typedArrayTags$1[int8Tag$5]=typedArrayTags$1[int16Tag$5]=typedArrayTags$1[int32Tag$5]=typedArrayTags$1[uint8Tag$5]=typedArrayTags$1[uint8ClampedTag$5]=typedArrayTags$1[uint16Tag$5]=typedArrayTags$1[uint32Tag$5]=!0;typedArrayTags$1[argsTag$5]=typedArrayTags$1[arrayTag$4]=typedArrayTags$1[arrayBufferTag$6]=typedArrayTags$1[boolTag$6]=typedArrayTags$1[dataViewTag$8]=typedArrayTags$1[dateTag$6]=typedArrayTags$1[errorTag$5]=typedArrayTags$1[funcTag$4]=typedArrayTags$1[mapTag$b]=typedArrayTags$1[numberTag$6]=typedArrayTags$1[objectTag$7]=typedArrayTags$1[regexpTag$6]=typedArrayTags$1[setTag$b]=typedArrayTags$1[stringTag$6]=typedArrayTags$1[weakMapTag$6]=!1;function baseIsTypedArray$2(mr){return isObjectLike$8(mr)&&isLength$2(mr.length)&&!!typedArrayTags$1[baseGetTag$4(mr)]}var _baseIsTypedArray=baseIsTypedArray$2;function baseUnary$4(mr){return function(hr){return mr(hr)}}var _baseUnary=baseUnary$4,_nodeUtil={exports:{}};_nodeUtil.exports;(function(mr,hr){var gr=_freeGlobal,vr=hr&&!hr.nodeType&&hr,xr=vr&&!0&&mr&&!mr.nodeType&&mr,Er=xr&&xr.exports===vr,Cr=Er&&gr.process,wr=function(){try{var Rr=xr&&xr.require&&xr.require("util").types;return Rr||Cr&&Cr.binding&&Cr.binding("util")}catch{}}();mr.exports=wr})(_nodeUtil,_nodeUtil.exports);var _nodeUtilExports=_nodeUtil.exports,baseIsTypedArray$1=_baseIsTypedArray,baseUnary$3=_baseUnary,nodeUtil$3=_nodeUtilExports,nodeIsTypedArray$1=nodeUtil$3&&nodeUtil$3.isTypedArray,isTypedArray$6=nodeIsTypedArray$1?baseUnary$3(nodeIsTypedArray$1):baseIsTypedArray$1,isTypedArray_1=isTypedArray$6;function safeGet$2(mr,hr){if(!(hr==="constructor"&&typeof mr[hr]=="function")&&hr!="__proto__")return mr[hr]}var _safeGet=safeGet$2,baseAssignValue$3=_baseAssignValue,eq$3=eq_1,objectProto$o=Object.prototype,hasOwnProperty$l=objectProto$o.hasOwnProperty;function assignValue$4(mr,hr,gr){var vr=mr[hr];(!(hasOwnProperty$l.call(mr,hr)&&eq$3(vr,gr))||gr===void 0&&!(hr in mr))&&baseAssignValue$3(mr,hr,gr)}var _assignValue=assignValue$4,assignValue$3=_assignValue,baseAssignValue$2=_baseAssignValue;function copyObject$7(mr,hr,gr,vr){var xr=!gr;gr||(gr={});for(var Er=-1,Cr=hr.length;++Er<Cr;){var wr=hr[Er],Rr=vr?vr(gr[wr],mr[wr],wr,gr,mr):void 0;Rr===void 0&&(Rr=mr[wr]),xr?baseAssignValue$2(gr,wr,Rr):assignValue$3(gr,wr,Rr)}return gr}var _copyObject=copyObject$7;function baseTimes$2(mr,hr){for(var gr=-1,vr=Array(mr);++gr<mr;)vr[gr]=hr(gr);return vr}var _baseTimes=baseTimes$2,MAX_SAFE_INTEGER$3=9007199254740991,reIsUint$1=/^(?:0|[1-9]\d*)$/;function isIndex$6(mr,hr){var gr=typeof mr;return hr=hr??MAX_SAFE_INTEGER$3,!!hr&&(gr=="number"||gr!="symbol"&&reIsUint$1.test(mr))&&mr>-1&&mr%1==0&&mr<hr}var _isIndex=isIndex$6,baseTimes$1=_baseTimes,isArguments$5=isArguments_1,isArray$k=isArray_1,isBuffer$7=isBufferExports,isIndex$5=_isIndex,isTypedArray$5=isTypedArray_1,objectProto$n=Object.prototype,hasOwnProperty$k=objectProto$n.hasOwnProperty;function arrayLikeKeys$3(mr,hr){var gr=isArray$k(mr),vr=!gr&&isArguments$5(mr),xr=!gr&&!vr&&isBuffer$7(mr),Er=!gr&&!vr&&!xr&&isTypedArray$5(mr),Cr=gr||vr||xr||Er,wr=Cr?baseTimes$1(mr.length,String):[],Rr=wr.length;for(var kr in mr)(hr||hasOwnProperty$k.call(mr,kr))&&!(Cr&&(kr=="length"||xr&&(kr=="offset"||kr=="parent")||Er&&(kr=="buffer"||kr=="byteLength"||kr=="byteOffset")||isIndex$5(kr,Rr)))&&wr.push(kr);return wr}var _arrayLikeKeys=arrayLikeKeys$3;function nativeKeysIn$2(mr){var hr=[];if(mr!=null)for(var gr in Object(mr))hr.push(gr);return hr}var _nativeKeysIn=nativeKeysIn$2,isObject$h=isObject_1,isPrototype$3=_isPrototype,nativeKeysIn$1=_nativeKeysIn,objectProto$m=Object.prototype,hasOwnProperty$j=objectProto$m.hasOwnProperty;function baseKeysIn$2(mr){if(!isObject$h(mr))return nativeKeysIn$1(mr);var hr=isPrototype$3(mr),gr=[];for(var vr in mr)vr=="constructor"&&(hr||!hasOwnProperty$j.call(mr,vr))||gr.push(vr);return gr}var _baseKeysIn=baseKeysIn$2,arrayLikeKeys$2=_arrayLikeKeys,baseKeysIn$1=_baseKeysIn,isArrayLike$4=isArrayLike_1;function keysIn$6(mr){return isArrayLike$4(mr)?arrayLikeKeys$2(mr,!0):baseKeysIn$1(mr)}var keysIn_1=keysIn$6,copyObject$6=_copyObject,keysIn$5=keysIn_1;function toPlainObject$1(mr){return copyObject$6(mr,keysIn$5(mr))}var toPlainObject_1=toPlainObject$1,assignMergeValue$1=_assignMergeValue,cloneBuffer$2=_cloneBufferExports,cloneTypedArray$2=_cloneTypedArray,copyArray$4=_copyArray,initCloneObject$2=_initCloneObject,isArguments$4=isArguments_1,isArray$j=isArray_1,isArrayLikeObject=isArrayLikeObject_1,isBuffer$6=isBufferExports,isFunction$5=isFunction_1,isObject$g=isObject_1,isPlainObject$8=isPlainObject_1,isTypedArray$4=isTypedArray_1,safeGet$1=_safeGet,toPlainObject=toPlainObject_1;function baseMergeDeep$1(mr,hr,gr,vr,xr,Er,Cr){var wr=safeGet$1(mr,gr),Rr=safeGet$1(hr,gr),kr=Cr.get(Rr);if(kr){assignMergeValue$1(mr,gr,kr);return}var Dr=Er?Er(wr,Rr,gr+"",mr,hr,Cr):void 0,Br=Dr===void 0;if(Br){var Hr=isArray$j(Rr),Gr=!Hr&&isBuffer$6(Rr),qr=!Hr&&!Gr&&isTypedArray$4(Rr);Dr=Rr,Hr||Gr||qr?isArray$j(wr)?Dr=wr:isArrayLikeObject(wr)?Dr=copyArray$4(wr):Gr?(Br=!1,Dr=cloneBuffer$2(Rr,!0)):qr?(Br=!1,Dr=cloneTypedArray$2(Rr,!0)):Dr=[]:isPlainObject$8(Rr)||isArguments$4(Rr)?(Dr=wr,isArguments$4(wr)?Dr=toPlainObject(wr):(!isObject$g(wr)||isFunction$5(wr))&&(Dr=initCloneObject$2(Rr))):Br=!1}Br&&(Cr.set(Rr,Dr),xr(Dr,Rr,vr,Er,Cr),Cr.delete(Rr)),assignMergeValue$1(mr,gr,Dr)}var _baseMergeDeep=baseMergeDeep$1,Stack$4=_Stack,assignMergeValue=_assignMergeValue,baseFor$1=_baseFor,baseMergeDeep=_baseMergeDeep,isObject$f=isObject_1,keysIn$4=keysIn_1,safeGet=_safeGet;function baseMerge$3(mr,hr,gr,vr,xr){mr!==hr&&baseFor$1(hr,function(Er,Cr){if(xr||(xr=new Stack$4),isObject$f(Er))baseMergeDeep(mr,hr,Cr,gr,baseMerge$3,vr,xr);else{var wr=vr?vr(safeGet(mr,Cr),Er,Cr+"",mr,hr,xr):void 0;wr===void 0&&(wr=Er),assignMergeValue(mr,Cr,wr)}},keysIn$4)}var _baseMerge=baseMerge$3;function identity$4(mr){return mr}var identity_1=identity$4;function apply$4(mr,hr,gr){switch(gr.length){case 0:return mr.call(hr);case 1:return mr.call(hr,gr[0]);case 2:return mr.call(hr,gr[0],gr[1]);case 3:return mr.call(hr,gr[0],gr[1],gr[2])}return mr.apply(hr,gr)}var _apply=apply$4,apply$3=_apply,nativeMax$4=Math.max;function overRest$2(mr,hr,gr){return hr=nativeMax$4(hr===void 0?mr.length-1:hr,0),function(){for(var vr=arguments,xr=-1,Er=nativeMax$4(vr.length-hr,0),Cr=Array(Er);++xr<Er;)Cr[xr]=vr[hr+xr];xr=-1;for(var wr=Array(hr+1);++xr<hr;)wr[xr]=vr[xr];return wr[hr]=gr(Cr),apply$3(mr,this,wr)}}var _overRest=overRest$2;function constant$1(mr){return function(){return mr}}var constant_1=constant$1,constant=constant_1,defineProperty$1=_defineProperty$3,identity$3=identity_1,baseSetToString$1=defineProperty$1?function(mr,hr){return defineProperty$1(mr,"toString",{configurable:!0,enumerable:!1,value:constant(hr),writable:!0})}:identity$3,_baseSetToString=baseSetToString$1,HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut$2(mr){var hr=0,gr=0;return function(){var vr=nativeNow(),xr=HOT_SPAN-(vr-gr);if(gr=vr,xr>0){if(++hr>=HOT_COUNT)return arguments[0]}else hr=0;return mr.apply(void 0,arguments)}}var _shortOut=shortOut$2,baseSetToString=_baseSetToString,shortOut$1=_shortOut,setToString$3=shortOut$1(baseSetToString),_setToString=setToString$3,identity$2=identity_1,overRest$1=_overRest,setToString$2=_setToString;function baseRest$2(mr,hr){return setToString$2(overRest$1(mr,hr,identity$2),mr+"")}var _baseRest=baseRest$2,eq$2=eq_1,isArrayLike$3=isArrayLike_1,isIndex$4=_isIndex,isObject$e=isObject_1;function isIterateeCall$1(mr,hr,gr){if(!isObject$e(gr))return!1;var vr=typeof hr;return(vr=="number"?isArrayLike$3(gr)&&isIndex$4(hr,gr.length):vr=="string"&&hr in gr)?eq$2(gr[hr],mr):!1}var _isIterateeCall=isIterateeCall$1,baseRest$1=_baseRest,isIterateeCall=_isIterateeCall;function createAssigner$2(mr){return baseRest$1(function(hr,gr){var vr=-1,xr=gr.length,Er=xr>1?gr[xr-1]:void 0,Cr=xr>2?gr[2]:void 0;for(Er=mr.length>3&&typeof Er=="function"?(xr--,Er):void 0,Cr&&isIterateeCall(gr[0],gr[1],Cr)&&(Er=xr<3?void 0:Er,xr=1),hr=Object(hr);++vr<xr;){var wr=gr[vr];wr&&mr(hr,wr,vr,Er)}return hr})}var _createAssigner=createAssigner$2,baseMerge$2=_baseMerge,createAssigner$1=_createAssigner;createAssigner$1(function(mr,hr,gr){baseMerge$2(mr,hr,gr)});var baseGetTag$3=_baseGetTag,isObjectLike$7=isObjectLike_1,symbolTag$7="[object Symbol]";function isSymbol$8(mr){return typeof mr=="symbol"||isObjectLike$7(mr)&&baseGetTag$3(mr)==symbolTag$7}var isSymbol_1=isSymbol$8,isArray$i=isArray_1,isSymbol$7=isSymbol_1,reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey$3(mr,hr){if(isArray$i(mr))return!1;var gr=typeof mr;return gr=="number"||gr=="symbol"||gr=="boolean"||mr==null||isSymbol$7(mr)?!0:reIsPlainProp.test(mr)||!reIsDeepProp.test(mr)||hr!=null&&mr in Object(hr)}var _isKey=isKey$3,MapCache$2=_MapCache,FUNC_ERROR_TEXT$4="Expected a function";function memoize$3(mr,hr){if(typeof mr!="function"||hr!=null&&typeof hr!="function")throw new TypeError(FUNC_ERROR_TEXT$4);var gr=function(){var vr=arguments,xr=hr?hr.apply(this,vr):vr[0],Er=gr.cache;if(Er.has(xr))return Er.get(xr);var Cr=mr.apply(this,vr);return gr.cache=Er.set(xr,Cr)||Er,Cr};return gr.cache=new(memoize$3.Cache||MapCache$2),gr}memoize$3.Cache=MapCache$2;var memoize_1=memoize$3,memoize$2=memoize_1,MAX_MEMOIZE_SIZE$1=500;function memoizeCapped$2(mr){var hr=memoize$2(mr,function(vr){return gr.size===MAX_MEMOIZE_SIZE$1&&gr.clear(),vr}),gr=hr.cache;return hr}var _memoizeCapped=memoizeCapped$2,memoizeCapped$1=_memoizeCapped,rePropName$2=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar$2=/\\(\\)?/g,stringToPath$4=memoizeCapped$1(function(mr){var hr=[];return mr.charCodeAt(0)===46&&hr.push(""),mr.replace(rePropName$2,function(gr,vr,xr,Er){hr.push(xr?Er.replace(reEscapeChar$2,"$1"):vr||gr)}),hr}),_stringToPath=stringToPath$4;function arrayMap$4(mr,hr){for(var gr=-1,vr=mr==null?0:mr.length,xr=Array(vr);++gr<vr;)xr[gr]=hr(mr[gr],gr,mr);return xr}var _arrayMap=arrayMap$4,Symbol$6=_Symbol,arrayMap$3=_arrayMap,isArray$h=isArray_1,isSymbol$6=isSymbol_1,INFINITY$5=1/0,symbolProto$5=Symbol$6?Symbol$6.prototype:void 0,symbolToString$3=symbolProto$5?symbolProto$5.toString:void 0;function baseToString$3(mr){if(typeof mr=="string")return mr;if(isArray$h(mr))return arrayMap$3(mr,baseToString$3)+"";if(isSymbol$6(mr))return symbolToString$3?symbolToString$3.call(mr):"";var hr=mr+"";return hr=="0"&&1/mr==-INFINITY$5?"-0":hr}var _baseToString=baseToString$3,baseToString$2=_baseToString;function toString$a(mr){return mr==null?"":baseToString$2(mr)}var toString_1=toString$a;const toString$b=getDefaultExportFromCjs$1(toString_1);var isArray$g=isArray_1,isKey$2=_isKey,stringToPath$3=_stringToPath,toString$9=toString_1;function castPath$6(mr,hr){return isArray$g(mr)?mr:isKey$2(mr,hr)?[mr]:stringToPath$3(toString$9(mr))}var _castPath=castPath$6,isSymbol$5=isSymbol_1,INFINITY$4=1/0;function toKey$8(mr){if(typeof mr=="string"||isSymbol$5(mr))return mr;var hr=mr+"";return hr=="0"&&1/mr==-INFINITY$4?"-0":hr}var _toKey=toKey$8,castPath$5=_castPath,toKey$7=_toKey;function baseGet$4(mr,hr){hr=castPath$5(hr,mr);for(var gr=0,vr=hr.length;mr!=null&&gr<vr;)mr=mr[toKey$7(hr[gr++])];return gr&&gr==vr?mr:void 0}var _baseGet=baseGet$4,assignValue$2=_assignValue,castPath$4=_castPath,isIndex$3=_isIndex,isObject$d=isObject_1,toKey$6=_toKey;function baseSet$1(mr,hr,gr,vr){if(!isObject$d(mr))return mr;hr=castPath$4(hr,mr);for(var xr=-1,Er=hr.length,Cr=Er-1,wr=mr;wr!=null&&++xr<Er;){var Rr=toKey$6(hr[xr]),kr=gr;if(Rr==="__proto__"||Rr==="constructor"||Rr==="prototype")return mr;if(xr!=Cr){var Dr=wr[Rr];kr=vr?vr(Dr,Rr,wr):void 0,kr===void 0&&(kr=isObject$d(Dr)?Dr:isIndex$3(hr[xr+1])?[]:{})}assignValue$2(wr,Rr,kr),wr=wr[Rr]}return mr}var _baseSet=baseSet$1,baseGet$3=_baseGet,baseSet=_baseSet,castPath$3=_castPath;function basePickBy$1(mr,hr,gr){for(var vr=-1,xr=hr.length,Er={};++vr<xr;){var Cr=hr[vr],wr=baseGet$3(mr,Cr);gr(wr,Cr)&&baseSet(Er,castPath$3(Cr,mr),wr)}return Er}var _basePickBy=basePickBy$1;function baseHasIn$1(mr,hr){return mr!=null&&hr in Object(mr)}var _baseHasIn=baseHasIn$1,castPath$2=_castPath,isArguments$3=isArguments_1,isArray$f=isArray_1,isIndex$2=_isIndex,isLength$1=isLength_1,toKey$5=_toKey;function hasPath$2(mr,hr,gr){hr=castPath$2(hr,mr);for(var vr=-1,xr=hr.length,Er=!1;++vr<xr;){var Cr=toKey$5(hr[vr]);if(!(Er=mr!=null&&gr(mr,Cr)))break;mr=mr[Cr]}return Er||++vr!=xr?Er:(xr=mr==null?0:mr.length,!!xr&&isLength$1(xr)&&isIndex$2(Cr,xr)&&(isArray$f(mr)||isArguments$3(mr)))}var _hasPath=hasPath$2,baseHasIn=_baseHasIn,hasPath$1=_hasPath;function hasIn$2(mr,hr){return mr!=null&&hasPath$1(mr,hr,baseHasIn)}var hasIn_1=hasIn$2,basePickBy=_basePickBy,hasIn$1=hasIn_1;function basePick$1(mr,hr){return basePickBy(mr,hr,function(gr,vr){return hasIn$1(mr,vr)})}var _basePick=basePick$1;function arrayPush$4(mr,hr){for(var gr=-1,vr=hr.length,xr=mr.length;++gr<vr;)mr[xr+gr]=hr[gr];return mr}var _arrayPush=arrayPush$4,Symbol$5=_Symbol,isArguments$2=isArguments_1,isArray$e=isArray_1,spreadableSymbol=Symbol$5?Symbol$5.isConcatSpreadable:void 0;function isFlattenable$1(mr){return isArray$e(mr)||isArguments$2(mr)||!!(spreadableSymbol&&mr&&mr[spreadableSymbol])}var _isFlattenable=isFlattenable$1,arrayPush$3=_arrayPush,isFlattenable=_isFlattenable;function baseFlatten$1(mr,hr,gr,vr,xr){var Er=-1,Cr=mr.length;for(gr||(gr=isFlattenable),xr||(xr=[]);++Er<Cr;){var wr=mr[Er];hr>0&&gr(wr)?hr>1?baseFlatten$1(wr,hr-1,gr,vr,xr):arrayPush$3(xr,wr):vr||(xr[xr.length]=wr)}return xr}var _baseFlatten=baseFlatten$1,baseFlatten=_baseFlatten;function flatten$2(mr){var hr=mr==null?0:mr.length;return hr?baseFlatten(mr,1):[]}var flatten_1=flatten$2,flatten$1=flatten_1,overRest=_overRest,setToString$1=_setToString;function flatRest$3(mr){return setToString$1(overRest(mr,void 0,flatten$1),mr+"")}var _flatRest=flatRest$3,basePick=_basePick,flatRest$2=_flatRest;flatRest$2(function(mr,hr){return mr==null?{}:basePick(mr,hr)});var reactIs$1={exports:{}},reactIs_production_min$1={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b$3=typeof Symbol=="function"&&Symbol.for,c$4=b$3?Symbol.for("react.element"):60103,d$4=b$3?Symbol.for("react.portal"):60106,e$2=b$3?Symbol.for("react.fragment"):60107,f$3=b$3?Symbol.for("react.strict_mode"):60108,g$3=b$3?Symbol.for("react.profiler"):60114,h$5=b$3?Symbol.for("react.provider"):60109,k$3=b$3?Symbol.for("react.context"):60110,l$3=b$3?Symbol.for("react.async_mode"):60111,m$3=b$3?Symbol.for("react.concurrent_mode"):60111,n$3=b$3?Symbol.for("react.forward_ref"):60112,p$4=b$3?Symbol.for("react.suspense"):60113,q$5=b$3?Symbol.for("react.suspense_list"):60120,r$1=b$3?Symbol.for("react.memo"):60115,t$2=b$3?Symbol.for("react.lazy"):60116,v$4=b$3?Symbol.for("react.block"):60121,w$4=b$3?Symbol.for("react.fundamental"):60117,x$2=b$3?Symbol.for("react.responder"):60118,y$3=b$3?Symbol.for("react.scope"):60119;function z$3(mr){if(typeof mr=="object"&&mr!==null){var hr=mr.$$typeof;switch(hr){case c$4:switch(mr=mr.type,mr){case l$3:case m$3:case e$2:case g$3:case f$3:case p$4:return mr;default:switch(mr=mr&&mr.$$typeof,mr){case k$3:case n$3:case t$2:case r$1:case h$5:return mr;default:return hr}}case d$4:return hr}}}function A$4(mr){return z$3(mr)===m$3}reactIs_production_min$1.AsyncMode=l$3;reactIs_production_min$1.ConcurrentMode=m$3;reactIs_production_min$1.ContextConsumer=k$3;reactIs_production_min$1.ContextProvider=h$5;reactIs_production_min$1.Element=c$4;reactIs_production_min$1.ForwardRef=n$3;reactIs_production_min$1.Fragment=e$2;reactIs_production_min$1.Lazy=t$2;reactIs_production_min$1.Memo=r$1;reactIs_production_min$1.Portal=d$4;reactIs_production_min$1.Profiler=g$3;reactIs_production_min$1.StrictMode=f$3;reactIs_production_min$1.Suspense=p$4;reactIs_production_min$1.isAsyncMode=function(mr){return A$4(mr)||z$3(mr)===l$3};reactIs_production_min$1.isConcurrentMode=A$4;reactIs_production_min$1.isContextConsumer=function(mr){return z$3(mr)===k$3};reactIs_production_min$1.isContextProvider=function(mr){return z$3(mr)===h$5};reactIs_production_min$1.isElement=function(mr){return typeof mr=="object"&&mr!==null&&mr.$$typeof===c$4};reactIs_production_min$1.isForwardRef=function(mr){return z$3(mr)===n$3};reactIs_production_min$1.isFragment=function(mr){return z$3(mr)===e$2};reactIs_production_min$1.isLazy=function(mr){return z$3(mr)===t$2};reactIs_production_min$1.isMemo=function(mr){return z$3(mr)===r$1};reactIs_production_min$1.isPortal=function(mr){return z$3(mr)===d$4};reactIs_production_min$1.isProfiler=function(mr){return z$3(mr)===g$3};reactIs_production_min$1.isStrictMode=function(mr){return z$3(mr)===f$3};reactIs_production_min$1.isSuspense=function(mr){return z$3(mr)===p$4};reactIs_production_min$1.isValidElementType=function(mr){return typeof mr=="string"||typeof mr=="function"||mr===e$2||mr===m$3||mr===g$3||mr===f$3||mr===p$4||mr===q$5||typeof mr=="object"&&mr!==null&&(mr.$$typeof===t$2||mr.$$typeof===r$1||mr.$$typeof===h$5||mr.$$typeof===k$3||mr.$$typeof===n$3||mr.$$typeof===w$4||mr.$$typeof===x$2||mr.$$typeof===y$3||mr.$$typeof===v$4)};reactIs_production_min$1.typeOf=z$3;reactIs$1.exports=reactIs_production_min$1;var reactIsExports=reactIs$1.exports,reactIs=reactIsExports,FORWARD_REF_STATICS={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},MEMO_STATICS={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},TYPE_STATICS={};TYPE_STATICS[reactIs.ForwardRef]=FORWARD_REF_STATICS;TYPE_STATICS[reactIs.Memo]=MEMO_STATICS;function invariant$3(mr,hr,gr){if(gr===void 0&&(gr=Error),!mr)throw new gr(hr)}var defaultErrorHandler$2=function(mr){},defaultWarnHandler$2=function(mr){},DEFAULT_INTL_CONFIG$2={formats:{},messages:{},timeZone:void 0,defaultLocale:"en",defaultFormats:{},fallbackOnEmptyString:!0,onError:defaultErrorHandler$2,onWarn:defaultWarnHandler$2};function invariantIntlContext$2(mr){invariant$3(mr,"[React Intl] Could not find required `intl` object. <IntlProvider> needs to exist in the component ancestry.")}__assign(__assign({},DEFAULT_INTL_CONFIG$2),{textComponent:reactExports.Fragment});var IntlContext$2=typeof window<"u"&&!window.__REACT_INTL_BYPASS_GLOBAL_CONTEXT__?window.__REACT_INTL_CONTEXT__||(window.__REACT_INTL_CONTEXT__=reactExports.createContext(null)):reactExports.createContext(null);IntlContext$2.Consumer;IntlContext$2.Provider;var Context$2=IntlContext$2;function useIntl$2(){var mr=reactExports.useContext(Context$2);return invariantIntlContext$2(mr),mr}var DisplayName$2;(function(mr){mr.formatDate="FormattedDate",mr.formatTime="FormattedTime",mr.formatNumber="FormattedNumber",mr.formatList="FormattedList",mr.formatDisplayName="FormattedDisplayName"})(DisplayName$2||(DisplayName$2={}));var DisplayNameParts$2;(function(mr){mr.formatDate="FormattedDateParts",mr.formatTime="FormattedTimeParts",mr.formatNumber="FormattedNumberParts",mr.formatList="FormattedListParts"})(DisplayNameParts$2||(DisplayNameParts$2={}));function createFormattedDateTimePartsComponent$2(mr){var hr=function(gr){var vr=useIntl$2(),xr=gr.value,Er=gr.children,Cr=__rest(gr,["value","children"]),wr=typeof xr=="string"?new Date(xr||0):xr,Rr=mr==="formatDate"?vr.formatDateToParts(wr,Cr):vr.formatTimeToParts(wr,Cr);return Er(Rr)};return hr.displayName=DisplayNameParts$2[mr],hr}function createFormattedComponent$2(mr){var hr=function(gr){var vr=useIntl$2(),xr=gr.value,Er=gr.children,Cr=__rest(gr,["value","children"]),wr=vr[mr](xr,Cr);if(typeof Er=="function")return Er(wr);var Rr=vr.textComponent||reactExports.Fragment;return reactExports.createElement(Rr,null,wr)};return hr.displayName=DisplayName$2[mr],hr}createFormattedComponent$2("formatDate");createFormattedComponent$2("formatTime");createFormattedComponent$2("formatNumber");createFormattedComponent$2("formatList");createFormattedComponent$2("formatDisplayName");createFormattedDateTimePartsComponent$2("formatDate");createFormattedDateTimePartsComponent$2("formatTime");const SvgBlocksField=(mr,hr)=>jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",width:16,height:16,ref:hr,...mr,children:[jsxRuntimeExports.jsx("rect",{width:31,height:23,x:.5,y:4.5,fill:"#EAF5FF",stroke:"#B8E1FF",rx:2.5}),jsxRuntimeExports.jsx("path",{fill:"#0C75AF",d:"M14.75 11.75a1 1 0 1 1-2 0 1 1 0 0 1 2 0m3.5 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2M13.75 15a1 1 0 1 0 0 2 1 1 0 0 0 0-2m4.5 0a1 1 0 1 0 0 2 1 1 0 0 0 0-2m-4.5 4.25a1 1 0 1 0 0 2 1 1 0 0 0 0-2m4.5 0a1 1 0 1 0 0 2 1 1 0 0 0 0-2"})]}),ForwardRef$12=reactExports.forwardRef(SvgBlocksField),ForwardRef$13=ForwardRef$12,SvgBooleanField=(mr,hr)=>jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",width:16,height:16,ref:hr,...mr,children:[jsxRuntimeExports.jsx("rect",{width:31,height:23,x:.5,y:4.5,fill:"#EAFBE7",stroke:"#C6F0C2",rx:2.5}),jsxRuntimeExports.jsx("path",{fill:"#328048",d:"M19 11.5h-6a4.5 4.5 0 1 0 0 9h6a4.5 4.5 0 1 0 0-9m0 7a2.5 2.5 0 1 1 0-5 2.5 2.5 0 0 1 0 5"})]}),ForwardRef$10=reactExports.forwardRef(SvgBooleanField),ForwardRef$11=ForwardRef$10,SvgCodeSquare=(mr,hr)=>jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",width:16,height:16,ref:hr,...mr,children:[jsxRuntimeExports.jsx("path",{fill:"#D9822F",d:"M0 4a4 4 0 0 1 4-4h24a4 4 0 0 1 4 4v24a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4z"}),jsxRuntimeExports.jsx("path",{fill:"#fff",fillRule:"evenodd",d:"M17.143 18.659v2.912l6.856-3.878v-2.815L17.143 11v2.906l4.16 2.38zm-2.287 0-4.16-2.374 4.16-2.38V11L8 14.877v2.816l6.856 3.878z",clipRule:"evenodd"})]});reactExports.forwardRef(SvgCodeSquare);const SvgCollectionType=(mr,hr)=>jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",width:16,height:16,ref:hr,...mr,children:[jsxRuntimeExports.jsx("rect",{width:31,height:23,x:.5,y:4.5,fill:"#4945FF",stroke:"#4945FF",rx:2.5}),jsxRuntimeExports.jsx("path",{fill:"#fff",d:"M14.328 14.54v-.083c-.04-.937-.75-1.559-1.787-1.559-1.535 0-2.725 1.57-2.725 3.65 0 1.302.71 2.104 1.846 2.104.961 0 1.787-.545 2.063-1.37h1.752c-.37 1.78-1.922 2.935-3.967 2.935-2.121 0-3.504-1.395-3.504-3.545 0-3.123 1.951-5.344 4.646-5.344 1.94 0 3.41 1.283 3.41 2.96 0 .087 0 .163-.011.251zM20.053 20H18.27l1.489-6.943h-2.532l.311-1.512h6.844l-.31 1.512H21.54z"})]});reactExports.forwardRef(SvgCollectionType);const SvgComponentField=(mr,hr)=>jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",width:16,height:16,ref:hr,...mr,children:[jsxRuntimeExports.jsx("rect",{width:31,height:23,x:.5,y:4.5,fill:"#F6F6F9",stroke:"#DCDCE4",rx:2.5}),jsxRuntimeExports.jsx("path",{fill:"#666687",d:"M20.5 17.5c-.358 0-.71.085-1.029.25l-1.337-1.04q.11-.326.116-.67l.647-.214a2.25 2.25 0 1 0-.637-1.37l-.486.162A2.25 2.25 0 0 0 16 13.75c-.062 0-.117 0-.176.008l-.278-.625A2.25 2.25 0 1 0 14 13.75c.063 0 .117 0 .176-.008l.278.625a2.24 2.24 0 0 0-.537 2.482l-1.33 1.182a2.25 2.25 0 1 0 .996 1.12l1.33-1.182a2.25 2.25 0 0 0 2.3-.075l1.224.954A2.25 2.25 0 1 0 20.5 17.5m0-4a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5m-7.25-2a.75.75 0 1 1 1.5 0 .75.75 0 0 1-1.5 0m-1.75 9.25a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5M15.25 16a.75.75 0 1 1 1.5 0 .75.75 0 0 1-1.5 0m5.25 4.5a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5"})]}),ForwardRef$W=reactExports.forwardRef(SvgComponentField),ForwardRef$X=ForwardRef$W,SvgDateField=(mr,hr)=>jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",width:16,height:16,ref:hr,...mr,children:[jsxRuntimeExports.jsx("rect",{width:31,height:23,x:.5,y:4.5,fill:"#FDF4DC",stroke:"#FAE7B9",rx:2.5}),jsxRuntimeExports.jsx("path",{fill:"#D9822F",d:"M21 10h-1.5v-.5a.5.5 0 0 0-1 0v.5h-5v-.5a.5.5 0 0 0-1 0v.5H11a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V11a1 1 0 0 0-1-1m0 3H11v-2h1.5v.5a.5.5 0 0 0 1 0V11h5v.5a.5.5 0 0 0 1 0V11H21z"})]}),ForwardRef$U=reactExports.forwardRef(SvgDateField),ForwardRef$V=ForwardRef$U,SvgDiscord=(mr,hr)=>jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",width:16,height:16,ref:hr,...mr,children:jsxRuntimeExports.jsx("path",{fill:"#5865F2",d:"M27.107 5.911a26.5 26.5 0 0 0-6.602-2.031 18 18 0 0 0-.845 1.72 24.6 24.6 0 0 0-7.327 0 18 18 0 0 0-.846-1.72A26.7 26.7 0 0 0 4.88 5.916C.702 12.098-.43 18.126.136 24.068a26.6 26.6 0 0 0 8.097 4.065 19.6 19.6 0 0 0 1.734-2.796c-.947-.354-1.86-.79-2.73-1.304.228-.166.452-.337.669-.504a19.02 19.02 0 0 0 16.188 0q.33.271.67.504c-.872.515-1.788.952-2.736 1.306a19.4 19.4 0 0 0 1.734 2.794 26.5 26.5 0 0 0 8.102-4.062c.665-6.892-1.135-12.864-4.757-18.16M10.684 20.414c-1.578 0-2.882-1.433-2.882-3.194 0-1.762 1.259-3.207 2.877-3.207 1.619 0 2.912 1.445 2.885 3.207s-1.271 3.194-2.88 3.194m10.632 0c-1.581 0-2.88-1.433-2.88-3.194 0-1.762 1.259-3.207 2.88-3.207s2.904 1.445 2.877 3.207-1.269 3.194-2.877 3.194"})});reactExports.forwardRef(SvgDiscord);const SvgDiscourse=(mr,hr)=>jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",width:16,height:16,ref:hr,...mr,children:[jsxRuntimeExports.jsx("path",{fill:"#231F20",d:"M15.659.302C7.158.302 0 7.194 0 15.698v15.943l15.656-.015c8.501 0 15.396-7.158 15.396-15.66 0-8.5-6.901-15.664-15.393-15.664"}),jsxRuntimeExports.jsx("path",{fill:"#FFF9AE",d:"M15.81 6.261a9.546 9.546 0 0 0-8.39 14.09l-1.726 5.554 6.2-1.4A9.541 9.541 0 1 0 15.82 6.26z"}),jsxRuntimeExports.jsx("path",{fill:"#00AEEF",d:"M23.381 9.999a9.54 9.54 0 0 1-11.487 14.49l-6.2 1.419 6.312-.746A9.54 9.54 0 0 0 23.381 10"}),jsxRuntimeExports.jsx("path",{fill:"#00A94F",d:"M21.624 8.239a9.54 9.54 0 0 1-9.91 15.61l-6.02 2.059 6.2-1.404a9.54 9.54 0 0 0 9.73-16.265"}),jsxRuntimeExports.jsx("path",{fill:"#F15D22",d:"M7.991 20.562A9.542 9.542 0 0 1 23.387 9.994 9.543 9.543 0 0 0 7.42 20.35l-1.726 5.555z"}),jsxRuntimeExports.jsx("path",{fill:"#E31B23",d:"M7.42 20.35A9.543 9.543 0 0 1 21.624 8.238 9.543 9.543 0 0 0 6.832 20.202l-1.135 5.706z"})]});reactExports.forwardRef(SvgDiscourse);const SvgDynamicZoneField=(mr,hr)=>jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",width:16,height:16,ref:hr,...mr,children:[jsxRuntimeExports.jsx("rect",{width:31,height:23,x:.5,y:4.5,fill:"#F6F6F9",stroke:"#DCDCE4",rx:2.5}),jsxRuntimeExports.jsx("path",{fill:"#666687",d:"M23.75 16a3.75 3.75 0 0 1-6.402 2.652l-.03-.033-3.742-4.225a2.25 2.25 0 1 0 0 3.212l.193-.218a.75.75 0 1 1 1.125.994l-.21.237-.03.033a3.75 3.75 0 1 1 0-5.304l.03.033 3.742 4.225a2.25 2.25 0 1 0 0-3.212l-.193.218a.751.751 0 1 1-1.125-.995l.21-.236.03-.033A3.75 3.75 0 0 1 23.75 16"})]}),ForwardRef$O=reactExports.forwardRef(SvgDynamicZoneField),ForwardRef$P=ForwardRef$O,SvgEmailField=(mr,hr)=>jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",width:16,height:16,ref:hr,...mr,children:[jsxRuntimeExports.jsx("rect",{width:31,height:23,x:.5,y:4.5,fill:"#FCECEA",stroke:"#F5C0B8",rx:2.5}),jsxRuntimeExports.jsx("path",{fill:"#D02B20",d:"M16 9.25a6.75 6.75 0 0 0 0 13.5c1.392 0 2.856-.42 3.915-1.125a.75.75 0 1 0-.83-1.25c-.813.54-1.994.875-3.085.875A5.25 5.25 0 1 1 21.25 16c0 .58-.104 1.067-.293 1.372-.165.265-.375.378-.707.378s-.542-.113-.707-.378c-.187-.305-.293-.791-.293-1.372v-2.5a.75.75 0 0 0-1.468-.216 3.25 3.25 0 1 0 .554 4.973c.433.637 1.09.993 1.914.993 1.542 0 2.5-1.245 2.5-3.25A6.76 6.76 0 0 0 16 9.25m0 8.5a1.75 1.75 0 1 1 0-3.5 1.75 1.75 0 0 1 0 3.5"})]}),ForwardRef$M=reactExports.forwardRef(SvgEmailField),ForwardRef$N=ForwardRef$M,SvgEmptyData=(mr,hr)=>jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 217 121",ref:hr,...mr,children:[jsxRuntimeExports.jsxs("g",{clipPath:"url(#EmptyData_svg__a)",children:[jsxRuntimeExports.jsx("path",{stroke:"#EEEEFA",strokeDasharray:"3.93 4.91",strokeLinecap:"round",strokeWidth:.982,d:"M1.158 99.652h215.018M1.158 80.015h215.018M1.158 59.397h215.018M1.158 38.779h215.018M1.158 20.124h215.018"}),jsxRuntimeExports.jsx("path",{fill:"#D9D8FF",fillOpacity:.8,fillRule:"evenodd",d:"M182.63 25.086c4.112 0 7.446 3.279 7.446 7.323s-3.334 7.324-7.446 7.324h-42.545c4.112 0 7.445 3.279 7.445 7.323s-3.333 7.324-7.445 7.324h23.4c4.112 0 7.445 3.278 7.445 7.323 0 4.044-3.333 7.323-7.445 7.323h-10.821c-5.185 0-9.388 3.28-9.388 7.324q0 2.847 3.162 5.314c1.968 1.536 4.676 1.736 6.861 2.943 2.27 1.255 3.804 3.646 3.804 6.39 0 4.044-3.333 7.323-7.445 7.323H61.376c-4.112 0-7.446-3.279-7.446-7.323s3.334-7.324 7.446-7.324H19.894c-4.112 0-7.445-3.279-7.445-7.323s3.333-7.324 7.445-7.324H62.44c4.112 0 7.445-3.278 7.445-7.323s-3.334-7.324-7.446-7.324H35.85c-4.112 0-7.446-3.278-7.446-7.323 0-4.044 3.334-7.323 7.446-7.323h42.545c-4.112 0-7.445-3.28-7.445-7.324s3.333-7.323 7.445-7.323zm0 29.294c4.112 0 7.446 3.278 7.446 7.323 0 4.044-3.334 7.323-7.446 7.323s-7.445-3.278-7.445-7.323 3.333-7.324 7.445-7.324",clipRule:"evenodd"}),jsxRuntimeExports.jsx("rect",{width:27,height:79.036,x:109.403,y:33.133,fill:"#fff",stroke:"#7B79FF",strokeWidth:2.455,rx:4.173}),jsxRuntimeExports.jsx("rect",{width:27,height:102.6,x:74.058,y:9.57,fill:"#fff",stroke:"#7B79FF",strokeWidth:2.455,rx:4.173}),jsxRuntimeExports.jsx("rect",{width:27,height:58.418,x:39.203,y:53.26,fill:"#fff",stroke:"#7B79FF",strokeWidth:2.455,rx:4.173}),jsxRuntimeExports.jsx("rect",{width:27,height:55.473,x:144.748,y:56.697,fill:"#fff",stroke:"#7B79FF",strokeWidth:2.455,rx:4.173}),jsxRuntimeExports.jsx("rect",{width:21.6,height:53.018,x:41.903,y:55.961,fill:"#EEEEFA",rx:1.964}),jsxRuntimeExports.jsx("rect",{width:21.6,height:73.636,x:112.103,y:35.833,fill:"#EEEEFA",rx:1.964})]}),jsxRuntimeExports.jsx("defs",{children:jsxRuntimeExports.jsx("clipPath",{id:"EmptyData_svg__a",children:jsxRuntimeExports.jsx("path",{fill:"#fff",d:"M.667.797h216v120h-216z"})})})]});reactExports.forwardRef(SvgEmptyData);const SvgEmptyDocuments=(mr,hr)=>jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 217 121",ref:hr,...mr,children:[jsxRuntimeExports.jsxs("g",{clipPath:"url(#EmptyDocuments_svg__a)",opacity:.84,children:[jsxRuntimeExports.jsx("path",{fill:"#D9D8FF",fillOpacity:.8,fillRule:"evenodd",d:"M189.917 20.442a7.583 7.583 0 0 1 0 15.167h-43.334a7.584 7.584 0 1 1 0 15.167h23.834a7.583 7.583 0 0 1 0 15.166h-11.022c-5.281 0-9.562 3.396-9.562 7.584q0 2.934 3.19 5.479c2.017 1.608 4.824 1.818 7.065 3.097a7.584 7.584 0 0 1-3.755 14.174H66.417a7.583 7.583 0 1 1 0-15.167h-42.25a7.583 7.583 0 0 1 0-15.167H67.5a7.583 7.583 0 0 0 0-15.166H40.417a7.583 7.583 0 0 1 0-15.167H83.75a7.583 7.583 0 0 1 0-15.167zm0 30.334a7.583 7.583 0 0 1 0 15.166 7.584 7.584 0 0 1 0-15.166",clipRule:"evenodd"}),jsxRuntimeExports.jsx("path",{fill:"#fff",fillRule:"evenodd",d:"m133.228 20.443 10.077 73.496.905 7.373a4.33 4.33 0 0 1-3.773 4.829l-63.44 7.79a4.334 4.334 0 0 1-4.83-3.773l-9.766-79.547a2.167 2.167 0 0 1 1.886-2.414l.023-.003 5.263-.59zm-59.4 6.683 4.97-.557z",clipRule:"evenodd"}),jsxRuntimeExports.jsx("path",{stroke:"#7B79FF",strokeWidth:2.5,d:"m73.829 27.126 4.97-.557m54.429-6.126 10.077 73.496.905 7.373a4.33 4.33 0 0 1-3.773 4.829l-63.44 7.79a4.334 4.334 0 0 1-4.83-3.773l-9.766-79.547a2.167 2.167 0 0 1 1.886-2.414l.023-.003 5.263-.59z"}),jsxRuntimeExports.jsx("path",{fill:"#F0F0FF",fillRule:"evenodd",d:"m130.485 25.068 9.121 66.607.821 6.683c.264 2.152-1.246 4.109-3.373 4.37l-56.812 6.976c-2.128.261-4.066-1.272-4.33-3.425l-8.83-71.908a2.166 2.166 0 0 1 1.887-2.414l7.028-.863",clipRule:"evenodd"}),jsxRuntimeExports.jsx("path",{fill:"#fff",fillRule:"evenodd",stroke:"#7B79FF",strokeWidth:2.5,d:"M135.998 6.63H86.645a2.97 2.97 0 0 0-2.107.872 2.97 2.97 0 0 0-.873 2.107v82.333c0 .823.334 1.568.873 2.107a2.97 2.97 0 0 0 2.106.872h63.917a2.97 2.97 0 0 0 2.107-.872 2.97 2.97 0 0 0 .872-2.107V24.164a2.98 2.98 0 0 0-.873-2.108L138.104 7.502a2.98 2.98 0 0 0-2.106-.872Z",clipRule:"evenodd"}),jsxRuntimeExports.jsx("path",{stroke:"#7B79FF",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M136.478 7.879v12.563a3.25 3.25 0 0 0 3.25 3.25h8.595M95.311 78.942h28.167m-28.167-55.25h28.167zm0 13h46.583zm0 14.084h46.583zm0 14.083h46.583z"})]}),jsxRuntimeExports.jsx("defs",{children:jsxRuntimeExports.jsx("clipPath",{id:"EmptyDocuments_svg__a",children:jsxRuntimeExports.jsx("path",{fill:"#fff",d:"M.667.797h216v120h-216z"})})})]}),ForwardRef$I=reactExports.forwardRef(SvgEmptyDocuments),ForwardRef$J=ForwardRef$I,SvgEmptyPermissions=(mr,hr)=>jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 193 121",ref:hr,...mr,children:jsxRuntimeExports.jsxs("g",{opacity:.88,children:[jsxRuntimeExports.jsx("path",{fill:"#DBDBFA",fillRule:"evenodd",d:"M160.947 53.823a4 4 0 0 0-.15-.281c-3.5-5.96-7.289-11.263-11.52-15.858h18.096c4.445 0 8.048 3.613 8.048 8.07 0 4.456-3.603 8.069-8.048 8.069zm-8.493 16.139c-11.562 11.57-31.953 19.597-55.21 19.597-31.435 0-54.384-16.705-55.701-35.736H29.409c-4.445 0-8.048 3.613-8.048 8.07 0 4.456 3.603 8.069 8.048 8.069h11.697c5.604 0 10.148 3.612 10.148 8.069q0 3.786-4.98 6.963c-.942.601-2.034.876-3.123 1.15-.33.083-.658.166-.983.257a8.07 8.07 0 0 0-5.86 7.768c0 4.457 3.602 8.07 8.047 8.07h95.425c4.445 0 8.048-3.613 8.048-8.07 0-4.456-3.603-8.069-8.048-8.069h44.839c4.444 0 8.048-3.613 8.048-8.07 0-4.456-3.604-8.068-8.048-8.068zM68.723 21.546H8.715c-4.445 0-8.048 3.613-8.048 8.07 0 4.456 3.603 8.068 8.048 8.068h37.314c4.606-6.843 12.5-12.477 22.694-16.138M.667 61.892c0-4.456 3.603-8.069 8.048-8.069 4.444 0 8.047 3.613 8.047 8.07 0 4.456-3.603 8.069-8.047 8.069S.667 66.349.667 61.892",clipRule:"evenodd"}),jsxRuntimeExports.jsx("path",{stroke:"#7B79FF",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"m158.091 49.212 1.446 2.131"}),jsxRuntimeExports.jsx("path",{fill:"#fff",d:"M154.862 59.69c-45.683-57.683-95.639-25.812-117.374.01-1.404 1.668-1.426 4.117-.15 5.882 47.31 65.454 96.71 29.044 117.704-.133 1.24-1.722 1.138-4.094-.18-5.758"}),jsxRuntimeExports.jsx("path",{fill:"#7B79FF",fillRule:"evenodd",d:"M113.536 28.091c-9.141-2.486-18.085-2.558-26.571-.94-21.301 4.058-39.458 18.707-50.43 31.742-1.794 2.132-1.798 5.217-.206 7.42C48.246 82.798 60.36 92.962 72.218 98.41q1.186.544 2.367 1.027l1.206-2.209a57 57 0 0 1-2.53-1.09c-11.366-5.222-23.168-15.052-34.905-31.291-.961-1.33-.92-3.143.092-4.345 10.764-12.787 28.453-26.985 48.985-30.897 7.905-1.506 16.271-1.495 24.869.745zm-28.277 71.966c7.097 1.397 13.98 1.155 20.536-.279 20.46-4.474 37.826-20.593 48.237-35.062.899-1.25.84-3.007-.146-4.252-10.728-13.547-21.653-22.062-32.351-26.854l1.201-2.2c11.026 4.98 22.21 13.738 33.11 27.502 1.649 2.083 1.795 5.069.215 7.265-10.584 14.708-28.416 31.382-49.732 36.044-7.115 1.556-14.607 1.77-22.323.131z",clipRule:"evenodd"}),jsxRuntimeExports.jsx("path",{stroke:"#7B79FF",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M127.159 22.08c13.23 6.32 21.864 14.378 27.624 21.78M34.068 48.642C53.002 23.337 89.197 8.3 117.953 18.635"}),jsxRuntimeExports.jsx("ellipse",{cx:94.98,cy:66.505,fill:"#F0F0FF",rx:18.395,ry:18.444}),jsxRuntimeExports.jsx("path",{fill:"#7B79FF",fillRule:"evenodd",d:"M104.76 44.362a24 24 0 0 0-9.776-2.067c-13.334 0-24.144 10.838-24.144 24.208 0 8.428 4.296 15.85 10.813 20.186l1.203-2.204c-5.741-3.903-9.516-10.498-9.516-17.982 0-11.995 9.696-21.708 21.644-21.708 3.045 0 5.944.631 8.574 1.77zM91.95 87.999q1.488.211 3.034.212c11.947 0 21.643-9.713 21.643-21.708a21.66 21.66 0 0 0-5.222-14.142l1.272-2.33a24.16 24.16 0 0 1 6.45 16.472c0 13.37-10.809 24.207-24.143 24.207-1.47 0-2.908-.131-4.305-.383z",clipRule:"evenodd"}),jsxRuntimeExports.jsx("path",{fill:"#fff",stroke:"#7B79FF",strokeWidth:2.5,d:"M116.729 54.977c0 4.406-3.562 7.972-7.948 7.972s-7.948-3.566-7.948-7.972 3.562-7.972 7.948-7.972 7.948 3.566 7.948 7.972Z"}),jsxRuntimeExports.jsx("path",{fill:"#fff",d:"M110.472 33.635c1.275-2.324 4.078-3.019 6.296-1.56 2.264 1.49 3.053 4.654 1.751 7.027l-31.287 57.05c-1.275 2.324-4.079 3.018-6.296 1.559-2.265-1.49-3.053-4.653-1.751-7.027z"}),jsxRuntimeExports.jsx("rect",{width:3.668,height:134.376,fill:"#7B79FF",rx:1.834,transform:"matrix(.82817 .56048 -.47918 .87772 127.181 .797)"})]})}),ForwardRef$G=reactExports.forwardRef(SvgEmptyPermissions),ForwardRef$H=ForwardRef$G,SvgEmptyPictures=(mr,hr)=>jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 217 121",ref:hr,...mr,children:[jsxRuntimeExports.jsx("g",{clipPath:"url(#EmptyPictures_svg__a)",children:jsxRuntimeExports.jsxs("g",{clipPath:"url(#EmptyPictures_svg__b)",opacity:.88,children:[jsxRuntimeExports.jsx("path",{fill:"#D9D8FF",fillOpacity:.8,fillRule:"evenodd",d:"M119.667 28.797a7 7 0 1 1 0 14h64a7 7 0 1 1 0 14h22a7 7 0 1 1 0 14h-19a7 7 0 1 0 0 14h6a7 7 0 1 1 0 14h-52a7 7 0 0 1-1.5-.161 7 7 0 0 1-1.5.16h-91a7 7 0 0 1 0-14h-39a7 7 0 1 1 0-14h40a7 7 0 0 0 0-14h-25a7 7 0 1 1 0-14h40a7 7 0 1 1 0-14zm90 56a7 7 0 1 1 0 14 7 7 0 0 1 0-14",clipRule:"evenodd"}),jsxRuntimeExports.jsx("path",{fill:"#fff",fillRule:"evenodd",d:"m74.497 103.07-8.622 1.422a4 4 0 0 1-4.518-3.404L50.224 21.866a4 4 0 0 1 3.404-4.518l78.231-10.994a4 4 0 0 1 4.518 3.404c.474 3.377 2.408 16.468 2.571 17.63",clipRule:"evenodd"}),jsxRuntimeExports.jsx("path",{fill:"#F0F0FF",fillRule:"evenodd",d:"m72.472 99.51-3.696.525a3.62 3.62 0 0 1-4.096-3.085l-9.996-71.925a3.646 3.646 0 0 1 3.097-4.107L128.82 10.82a3.62 3.62 0 0 1 4.096 3.085l.859 6.18 9.206 66.599c.306 2.212-1.22 4.257-3.408 4.566l-.07.01z",clipRule:"evenodd"}),jsxRuntimeExports.jsx("path",{stroke:"#7B79FF",strokeLinecap:"round",strokeWidth:2.5,d:"m69.945 103.92-4.07.572a4 4 0 0 1-4.518-3.405L50.223 21.866a4 4 0 0 1 3.405-4.518l78.231-10.994a4 4 0 0 1 4.518 3.404l.956 6.808M138.167 21.177l.5 3.12"}),jsxRuntimeExports.jsx("path",{fill:"#fff",fillRule:"evenodd",stroke:"#7B79FF",strokeWidth:2.5,d:"m165.078 31.096-78.567-8.258a2.74 2.74 0 0 0-2.018.598 2.74 2.74 0 0 0-1.005 1.85l-8.362 79.561a2.748 2.748 0 0 0 2.447 3.023l78.568 8.258a2.74 2.74 0 0 0 2.018-.598 2.74 2.74 0 0 0 1.004-1.85l8.362-79.562a2.74 2.74 0 0 0-.597-2.018 2.74 2.74 0 0 0-1.85-1.004Z",clipRule:"evenodd"}),jsxRuntimeExports.jsx("path",{fill:"#fff",fillRule:"evenodd",d:"m93.657 31.382 62.655 6.585a3 3 0 0 1 2.67 3.297l-5.54 52.71a3 3 0 0 1-3.298 2.67L87.49 90.059a3 3 0 0 1-2.67-3.297l5.54-52.71a3 3 0 0 1 3.297-2.67",clipRule:"evenodd"}),jsxRuntimeExports.jsx("path",{fill:"#F0F0FF",fillRule:"evenodd",d:"m93.407 74.676 9.798-6.609a4 4 0 0 1 5.167.595l7.174 7.722a1 1 0 0 0 1.362.097l15.34-12.43a4 4 0 0 1 5.877.936l9.981 15.438 1.433 2.392-.686 8.124a1 1 0 0 1-1.107.91l-56.963-6.329a1 1 0 0 1-.885-1.085l.755-8.199z",clipRule:"evenodd"}),jsxRuntimeExports.jsx("path",{stroke:"#7B79FF",strokeWidth:2.5,d:"m156.181 39.21-62.655-6.585c-.48-.05-.936.099-1.284.38a1.75 1.75 0 0 0-.64 1.178l-5.54 52.71c-.05.48.1.936.381 1.284s.697.588 1.177.639l62.655 6.585c.481.05.936-.099 1.284-.38s.589-.697.639-1.177l5.54-52.71a1.74 1.74 0 0 0-.38-1.284 1.74 1.74 0 0 0-1.177-.64Z",clipRule:"evenodd"}),jsxRuntimeExports.jsx("path",{fill:"#F0F0FF",stroke:"#7B79FF",strokeWidth:2.5,d:"M105.071 56.714a6 6 0 1 0 1.254-11.936 6 6 0 0 0-1.254 11.936Z"}),jsxRuntimeExports.jsx("path",{stroke:"#7B79FF",strokeLinecap:"round",strokeWidth:2.5,d:"m91.396 76.222 11.809-8.155a4 4 0 0 1 5.167.594l7.174 7.723a1 1 0 0 0 1.362.096l15.34-12.43a4 4 0 0 1 5.877.936l11.064 17.556"})]})}),jsxRuntimeExports.jsxs("defs",{children:[jsxRuntimeExports.jsx("clipPath",{id:"EmptyPictures_svg__a",children:jsxRuntimeExports.jsx("path",{fill:"#fff",d:"M.667.797h216v120h-216z"})}),jsxRuntimeExports.jsx("clipPath",{id:"EmptyPictures_svg__b",children:jsxRuntimeExports.jsx("path",{fill:"#fff",d:"M.667.797h216v120h-216z"})})]})]});reactExports.forwardRef(SvgEmptyPictures);const SvgEnumerationField=(mr,hr)=>jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",width:16,height:16,ref:hr,...mr,children:[jsxRuntimeExports.jsx("rect",{width:31,height:23,x:.5,y:4.5,fill:"#F6ECFC",stroke:"#E0C1F4",rx:2.5}),jsxRuntimeExports.jsx("path",{fill:"#9736E8",d:"M12.75 12a.75.75 0 0 1 .75-.75h8a.75.75 0 1 1 0 1.5h-8a.75.75 0 0 1-.75-.75m8.75 3.25h-8a.75.75 0 1 0 0 1.5h8a.75.75 0 1 0 0-1.5m0 4h-8a.75.75 0 1 0 0 1.5h8a.75.75 0 1 0 0-1.5M10.75 15a1 1 0 1 0 0 2 1 1 0 0 0 0-2m0-4a1 1 0 1 0 0 2 1 1 0 0 0 0-2m0 8a1 1 0 1 0 0 2 1 1 0 0 0 0-2"})]}),ForwardRef$C=reactExports.forwardRef(SvgEnumerationField),ForwardRef$D=ForwardRef$C,SvgFacebook=(mr,hr)=>jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",width:16,height:16,ref:hr,...mr,children:[jsxRuntimeExports.jsx("path",{fill:"#1977F3",d:"M32 16c0-8.836-7.164-16-16-16S0 7.164 0 16c0 7.985 5.85 14.605 13.5 15.807v-11.18H9.437V16H13.5v-3.526c0-4.01 2.39-6.226 6.044-6.226 1.75 0 3.582.313 3.582.313V10.5h-2.018c-1.987 0-2.608 1.233-2.608 2.5V16h4.437l-.709 4.626H18.5v11.18C26.15 30.607 32 23.989 32 16"}),jsxRuntimeExports.jsx("path",{fill:"#FEFEFE",d:"M22.228 20.626 22.937 16H18.5v-3.002c0-1.264.619-2.5 2.608-2.5h2.018V6.562s-1.832-.313-3.582-.313c-3.654 0-6.044 2.214-6.044 6.226V16H9.437v4.626H13.5v11.18Q14.724 32 16 32c.85 0 1.685-.068 2.5-.194v-11.18z"})]});reactExports.forwardRef(SvgFacebook);const SvgFeatherSquare=(mr,hr)=>jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",width:16,height:16,ref:hr,...mr,children:[jsxRuntimeExports.jsx("path",{fill:"#9736E8",d:"M0 4a4 4 0 0 1 4-4h24a4 4 0 0 1 4 4v24a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4z"}),jsxRuntimeExports.jsx("path",{fill:"#fff",d:"M18.037 11.774a28.6 28.6 0 0 0-2.948 2.706c-1.995 2.109-3.55 4.093-4.761 6.06-.289.469-.574.945-.855 1.418a9 9 0 0 0-.463 1.536c-.074.37.275.68.577.395.312-.299.587-.64.851-.985.467-.608.906-1.237 1.342-1.867 3.37.242 7.27-2.048 8.933-4.857a.2.2 0 0 0 .017-.167.18.18 0 0 0-.114-.118c-.809-.27-1.798-.44-2.207-.462-.017 0-.034-.014-.037-.035a.04.04 0 0 1 .024-.043c1.113-.58 1.924-.647 2.877-.505.07.01.134-.046.16-.114.095-.217.356-.87.537-1.404a.2.2 0 0 0-.087-.239c-.71-.384-1.656-.643-2.035-.682-.017 0-.03-.018-.034-.036a.04.04 0 0 1 .024-.043c1.1-.483 1.485-.497 2.364-.302.087.018.17-.05.19-.142.433-1.714.574-3.197.608-3.68a.2.2 0 0 0-.057-.157.18.18 0 0 0-.148-.05c-2.444.356-4.403.865-6.093 1.55-.057.022-.11.072-.11.136.144.551-.242 1.209-.845 1.703a.04.04 0 0 1-.044.018.05.05 0 0 1-.027-.043c.004-.046.158-.665.067-1.116-.013-.064-.033-.125-.084-.16a.17.17 0 0 0-.17-.014c-7.924 3.811-5.922 10.098-5.922 10.098q.015.004.03.007c.895-1.86 1.904-3.232 3.49-5.035 1.178-1.337 2.331-2.425 3.525-3.325.75-.565 2.448-1.738 3.51-2.144a.3.3 0 0 1 .105-.021c.097 0 .177.064.2.16a.26.26 0 0 1-.046.228z"})]});reactExports.forwardRef(SvgFeatherSquare);const SvgGitHub=(mr,hr)=>jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",width:16,height:16,ref:hr,...mr,children:jsxRuntimeExports.jsx("path",{fill:"#24292F",fillRule:"evenodd",d:"M15.952 0C7.132 0 0 7.184 0 16.07c0 7.105 4.57 13.118 10.908 15.247.792.16 1.083-.346 1.083-.772 0-.372-.027-1.65-.027-2.98-4.437.958-5.361-1.916-5.361-1.916-.713-1.862-1.77-2.34-1.77-2.34-1.452-.985.106-.985.106-.985 1.61.106 2.456 1.65 2.456 1.65 1.426 2.447 3.724 1.755 4.648 1.33.132-1.038.555-1.757 1.004-2.156-3.54-.372-7.263-1.756-7.263-7.929 0-1.756.634-3.193 1.637-4.31-.158-.399-.713-2.049.16-4.257 0 0 1.346-.426 4.383 1.65 1.3-.352 2.641-.531 3.988-.533 1.347 0 2.72.187 3.988.532 3.038-2.075 4.385-1.65 4.385-1.65.871 2.21.316 3.859.158 4.258 1.03 1.117 1.637 2.554 1.637 4.31 0 6.173-3.723 7.53-7.289 7.93.581.505 1.083 1.463 1.083 2.98 0 2.154-.026 3.884-.026 4.416 0 .426.29.932 1.082.772 6.34-2.13 10.908-8.142 10.908-15.246C31.904 7.184 24.748 0 15.952 0",clipRule:"evenodd"})});reactExports.forwardRef(SvgGitHub);const SvgGlassesSquare=(mr,hr)=>jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",width:16,height:16,ref:hr,...mr,children:[jsxRuntimeExports.jsx("path",{fill:"#AC73E6",d:"M0 4a4 4 0 0 1 4-4h24a4 4 0 0 1 4 4v24a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4z"}),jsxRuntimeExports.jsx("path",{fill:"#fff",fillRule:"evenodd",d:"M15.027 13.839c-3.19-.836-6.305-1.064-10.18-.608-1.215.152-1.063 1.975.076 2.203.304.836.456 2.355.912 3.267.987 2.279 5.622 1.975 7.369.835 1.14-.683 1.443-2.279 1.9-3.494.227-.684 1.595-.684 1.822 0 .38 1.215.76 2.81 1.9 3.494 1.747 1.14 6.381 1.444 7.369-.835.456-.912.607-2.431.911-3.267 1.14-.228 1.216-2.051.076-2.203-3.874-.456-6.989-.228-10.18.608-.455.075-1.519.075-1.975 0",clipRule:"evenodd"})]});reactExports.forwardRef(SvgGlassesSquare);const SvgInformationSquare=(mr,hr)=>jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",width:16,height:16,ref:hr,...mr,children:[jsxRuntimeExports.jsx("path",{fill:"#4945FF",d:"M0 4a4 4 0 0 1 4-4h24a4 4 0 0 1 4 4v24a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4z"}),jsxRuntimeExports.jsx("path",{fill:"#fff",d:"M15.733 8c.343 0 .678.108.963.31s.507.49.639.826c.13.337.165.707.098 1.064a1.9 1.9 0 0 1-.474.942 1.7 1.7 0 0 1-.887.504 1.64 1.64 0 0 1-1.002-.105 1.76 1.76 0 0 1-.778-.678A1.9 1.9 0 0 1 14 9.841a1.9 1.9 0 0 1 .508-1.302c.325-.345.766-.539 1.225-.539M20 24h-8v-2.265h2.933v-6.23H12.8v-2.266h4.267v8.496H20z"})]});reactExports.forwardRef(SvgInformationSquare);const SvgJsonField=(mr,hr)=>jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",width:16,height:16,ref:hr,...mr,children:[jsxRuntimeExports.jsx("rect",{width:31,height:23,x:.5,y:4.5,fill:"#EAF5FF",stroke:"#B8E1FF",rx:2.5}),jsxRuntimeExports.jsx("path",{fill:"#0C75AF",d:"M11.425 15.468a2.2 2.2 0 0 1-.36.532q.22.24.36.532c.325.67.325 1.457.325 2.218 0 1.621.115 2 1.25 2a.75.75 0 1 1 0 1.5c-1.196 0-2.012-.431-2.425-1.282-.325-.67-.325-1.457-.325-2.218 0-1.621-.115-2-1.25-2a.75.75 0 1 1 0-1.5c1.135 0 1.25-.379 1.25-2 0-.76 0-1.547.325-2.218.413-.85 1.229-1.282 2.425-1.282a.75.75 0 1 1 0 1.5c-1.135 0-1.25.379-1.25 2 0 .76 0 1.547-.325 2.218M23 15.25c-1.135 0-1.25-.379-1.25-2 0-.76 0-1.547-.325-2.218-.413-.85-1.229-1.282-2.425-1.282a.75.75 0 1 0 0 1.5c1.135 0 1.25.379 1.25 2 0 .76 0 1.547.325 2.218q.142.292.363.532a2.2 2.2 0 0 0-.36.532c-.328.67-.328 1.457-.328 2.218 0 1.621-.115 2-1.25 2a.75.75 0 1 0 0 1.5c1.196 0 2.012-.431 2.425-1.282.325-.67.325-1.457.325-2.218 0-1.621.115-2 1.25-2a.75.75 0 1 0 0-1.5"})]}),ForwardRef$q=reactExports.forwardRef(SvgJsonField),ForwardRef$r=ForwardRef$q,SvgMarkdownField=(mr,hr)=>jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",width:16,height:16,ref:hr,...mr,children:[jsxRuntimeExports.jsx("rect",{width:31,height:23,x:.5,y:4.5,fill:"#EAF5FF",stroke:"#B8E1FF",rx:2.5}),jsxRuntimeExports.jsx("path",{fill:"#0C75AF",d:"M9.75 12a.75.75 0 0 1 .75-.75h11a.75.75 0 1 1 0 1.5h-11a.75.75 0 0 1-.75-.75m.75 3.25h8a.75.75 0 1 0 0-1.5h-8a.75.75 0 1 0 0 1.5m11 1h-11a.75.75 0 1 0 0 1.5h11a.75.75 0 1 0 0-1.5m-3 2.5h-8a.75.75 0 1 0 0 1.5h8a.75.75 0 1 0 0-1.5"})]});reactExports.forwardRef(SvgMarkdownField);const SvgMediaField=(mr,hr)=>jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",width:16,height:16,ref:hr,...mr,children:[jsxRuntimeExports.jsx("rect",{width:31,height:23,x:.5,y:4.5,fill:"#F6ECFC",stroke:"#E0C1F4",rx:2.5}),jsxRuntimeExports.jsx("path",{fill:"#9736E8",d:"M21.5 10.5h-11a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1m-3.75 3a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5m-7.25 7v-1.75l3.25-3.25 5 5zm11 0h-1.336l-2.25-2.25 1.25-1.25 2.336 2.336z"})]}),ForwardRef$m=reactExports.forwardRef(SvgMediaField),ForwardRef$n=ForwardRef$m,SvgMedium=(mr,hr)=>jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",width:16,height:16,ref:hr,...mr,children:jsxRuntimeExports.jsx("path",{fill:"#32324D",d:"M18.05 16.007c0 5.019-4.04 9.087-9.025 9.087-4.984 0-9.025-4.07-9.025-9.087C0 10.99 4.04 6.92 9.025 6.92s9.025 4.069 9.025 9.087M27.95 16.007c0 4.724-2.02 8.555-4.512 8.555s-4.513-3.831-4.513-8.555 2.02-8.555 4.513-8.555 4.512 3.83 4.512 8.555M32 16.007c0 4.231-.71 7.664-1.587 7.664s-1.587-3.432-1.587-7.664.71-7.664 1.587-7.664c.876 0 1.587 3.432 1.587 7.664"})}),ForwardRef$k=reactExports.forwardRef(SvgMedium),ForwardRef$l=ForwardRef$k,SvgNumberField=(mr,hr)=>jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",width:16,height:16,ref:hr,...mr,children:[jsxRuntimeExports.jsx("rect",{width:31,height:23,x:.5,y:4.5,fill:"#FCECEA",stroke:"#F5C0B8",rx:2.5}),jsxRuntimeExports.jsx("path",{fill:"#D02B20",d:"M8.68 20v-6.22h-.096l-1.902 1.322V13.64l2.004-1.392h1.616V20zm3.733 0v-1.09l2.498-2.466c1.09-1.058 1.385-1.45 1.385-1.992v-.017c0-.66-.45-1.122-1.192-1.122-.757 0-1.278.505-1.278 1.24v.028h-1.499l-.005-.022c0-1.488 1.16-2.508 2.857-2.508 1.595 0 2.713.913 2.713 2.25v.016c0 .881-.457 1.612-1.87 2.917l-1.434 1.337v.124h3.416V20zm9.974.172c-1.75 0-2.906-.94-3.013-2.326l-.005-.07h1.552l.005.06c.07.601.623 1.03 1.461 1.03.827 0 1.37-.461 1.37-1.116v-.011c0-.741-.553-1.15-1.493-1.15h-.887v-1.154h.865c.817 0 1.343-.43 1.343-1.059v-.01c0-.645-.446-1.042-1.209-1.042-.762 0-1.273.413-1.337 1.058l-.005.048H19.54l.005-.064c.113-1.386 1.203-2.288 2.83-2.288 1.665 0 2.74.838 2.74 2.073v.01c0 .967-.71 1.596-1.617 1.784v.032c1.155.107 1.907.773 1.907 1.826v.011c0 1.407-1.209 2.358-3.019 2.358"})]}),ForwardRef$i=reactExports.forwardRef(SvgNumberField),ForwardRef$j=ForwardRef$i,SvgPasswordField=(mr,hr)=>jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",width:16,height:16,ref:hr,...mr,children:[jsxRuntimeExports.jsx("rect",{width:31,height:23,x:.5,y:4.5,fill:"#FDF4DC",stroke:"#FAE7B9",rx:2.5}),jsxRuntimeExports.jsx("path",{fill:"#D9822F",d:"M21 13h-2v-1.5a3 3 0 0 0-6 0V13h-2a1 1 0 0 0-1 1v7a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1v-7a1 1 0 0 0-1-1m-5 5.25a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5M18 13h-4v-1.5a2 2 0 0 1 4 0z"})]}),ForwardRef$g=reactExports.forwardRef(SvgPasswordField),ForwardRef$h=ForwardRef$g,SvgPlaySquare=(mr,hr)=>jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",width:16,height:16,ref:hr,...mr,children:[jsxRuntimeExports.jsx("path",{fill:"#66B7F1",d:"M0 4a4 4 0 0 1 4-4h24a4 4 0 0 1 4 4v24a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4z"}),jsxRuntimeExports.jsx("path",{fill:"#fff",fillRule:"evenodd",d:"M12 10.921a.5.5 0 0 1 .773-.419l8.582 5.579a.5.5 0 0 1 0 .838l-8.582 5.579a.5.5 0 0 1-.773-.42z",clipRule:"evenodd"})]});reactExports.forwardRef(SvgPlaySquare);const SvgReddit=(mr,hr)=>jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",width:16,height:16,ref:hr,...mr,children:[jsxRuntimeExports.jsx("path",{fill:"#FF4500",d:"M16 0C7.164 0 0 7.164 0 16a15.95 15.95 0 0 0 4.686 11.314L1.64 30.36c-.605.605-.177 1.639.678 1.639H16c8.836 0 16-7.164 16-16S24.836 0 16 0"}),jsxRuntimeExports.jsx("path",{fill:"#fff",d:"M19.255 7.545a2.668 2.668 0 0 0 5.261-.614 2.666 2.666 0 0 0-5.277-.54 4.307 4.307 0 0 0-3.84 4.277v.013c-2.345.099-4.487.767-6.187 1.82a3.736 3.736 0 1 0-3.869 6.34c.124 4.338 4.85 7.826 10.664 7.826s10.547-3.492 10.664-7.833a3.737 3.737 0 0 0-1.602-7.111c-.857 0-1.645.288-2.275.773-1.715-1.061-3.88-1.729-6.25-1.817v-.01a3.16 3.16 0 0 1 2.71-3.121zM9.062 17.829c.063-1.355.963-2.395 2.01-2.395 1.045 0 1.845 1.098 1.783 2.454-.063 1.354-.844 1.847-1.891 1.847S9 19.184 9.062 17.829m11.883-2.395c1.047 0 1.947 1.04 2.009 2.395s-.855 1.906-1.902 1.906-1.828-.491-1.89-1.848c-.063-1.355.735-2.453 1.783-2.453m-1.245 5.53c.196.02.321.224.245.406a4.268 4.268 0 0 1-7.875 0 .296.296 0 0 1 .245-.406c1.15-.116 2.394-.18 3.692-.18 1.3 0 2.542.064 3.693.18"})]});reactExports.forwardRef(SvgReddit);const SvgRelationField=(mr,hr)=>jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",width:16,height:16,ref:hr,...mr,children:[jsxRuntimeExports.jsx("rect",{width:31,height:23,x:.5,y:4.5,fill:"#F0F0FF",stroke:"#D9D8FF",rx:2.5}),jsxRuntimeExports.jsx("path",{fill:"#4945FF",d:"M16.523 19.72a.75.75 0 0 1 0 1.063l-.371.371a3.751 3.751 0 1 1-5.305-5.305l1.507-1.507a3.75 3.75 0 0 1 5.146-.155.753.753 0 0 1-1 1.126 2.25 2.25 0 0 0-3.086.091l-1.506 1.505a2.25 2.25 0 0 0 3.183 3.183l.37-.371a.747.747 0 0 1 1.062 0m4.63-8.874a3.755 3.755 0 0 0-5.305 0l-.371.37a.751.751 0 1 0 1.062 1.063l.372-.37a2.25 2.25 0 1 1 3.182 3.182l-1.507 1.507a2.25 2.25 0 0 1-3.086.09.755.755 0 0 0-1.211.315.75.75 0 0 0 .211.81 3.75 3.75 0 0 0 5.144-.152l1.507-1.507a3.756 3.756 0 0 0 .002-5.307z"})]}),ForwardRef$a=reactExports.forwardRef(SvgRelationField),ForwardRef$b=ForwardRef$a,SvgSingleType=(mr,hr)=>jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",width:16,height:16,ref:hr,...mr,children:[jsxRuntimeExports.jsx("rect",{width:31,height:23,x:.5,y:4.5,fill:"#0C75AF",stroke:"#0C75AF",rx:2.5}),jsxRuntimeExports.jsx("path",{fill:"#fff",d:"M8.523 17.586h1.711c.123.727.844 1.195 1.758 1.195.95 0 1.606-.445 1.606-1.107 0-.492-.352-.797-1.266-1.084l-.879-.276c-1.248-.386-1.963-1.218-1.963-2.308 0-1.547 1.418-2.678 3.328-2.678 1.858 0 3.164 1.078 3.217 2.62h-1.67c-.105-.71-.744-1.184-1.617-1.184-.826 0-1.459.433-1.459 1.03 0 .47.34.815 1.137 1.067l.867.27c1.436.451 2.086 1.154 2.086 2.297 0 1.675-1.418 2.789-3.516 2.789-1.922 0-3.234-.99-3.34-2.631M20.107 20h-1.78l1.487-6.943h-2.53l.31-1.512h6.843l-.31 1.512h-2.531z"})]});reactExports.forwardRef(SvgSingleType);const SvgStrapi=(mr,hr)=>jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",width:16,height:16,ref:hr,...mr,children:[jsxRuntimeExports.jsx("path",{fill:"#4945FF",d:"M0 11.093c0-5.23 0-7.844 1.625-9.468C3.249 0 5.864 0 11.093 0h9.814c5.23 0 7.844 0 9.468 1.625C32 3.249 32 5.864 32 11.093v9.814c0 5.23 0 7.844-1.625 9.468C28.751 32 26.136 32 20.907 32h-9.814c-5.23 0-7.844 0-9.468-1.625C0 28.751 0 26.136 0 20.907z"}),jsxRuntimeExports.jsx("path",{fill:"#fff",fillRule:"evenodd",d:"M22.08 9.707H11.307V15.2H16.8v5.493h5.493V9.92a.213.213 0 0 0-.213-.213",clipRule:"evenodd"}),jsxRuntimeExports.jsx("path",{fill:"#fff",d:"M16.8 15.2h-.213v.213h.213z"}),jsxRuntimeExports.jsx("path",{fill:"#9593FF",d:"M11.307 15.2h5.28c.117 0 .213.096.213.213v5.28h-5.28a.213.213 0 0 1-.213-.213zM16.8 20.693h5.493l-5.31 5.312a.107.107 0 0 1-.183-.076zM11.307 15.2H6.07a.107.107 0 0 1-.076-.182l5.312-5.311z"})]});reactExports.forwardRef(SvgStrapi);const SvgTextField=(mr,hr)=>jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",width:16,height:16,ref:hr,...mr,children:[jsxRuntimeExports.jsx("rect",{width:31,height:23,x:.5,y:4.5,fill:"#EAFBE7",stroke:"#C6F0C2",rx:2.5}),jsxRuntimeExports.jsx("path",{fill:"#328048",d:"M13.679 11.18a.75.75 0 0 0-1.358 0l-4 8.5a.75.75 0 0 0 1.357.64l.974-2.07h4.695l.974 2.07a.75.75 0 1 0 1.358-.64zm-2.32 5.57 1.64-3.489 1.643 3.489zm9.14-3c-.865 0-1.547.241-2.027.717a.749.749 0 1 0 1.056 1.063c.188-.187.516-.283.972-.283.584 0 1.074.323 1.21.757a3 3 0 0 0-1.21-.254c-1.516 0-2.75 1.121-2.75 2.5s1.234 2.5 2.75 2.5c.479.001.95-.114 1.375-.336A.75.75 0 0 0 23.25 20v-3.75c0-1.379-1.234-2.5-2.75-2.5m0 5.5c-.687 0-1.25-.449-1.25-1s.563-1 1.25-1 1.25.449 1.25 1-.562 1-1.25 1"})]}),ForwardRef$4=reactExports.forwardRef(SvgTextField),ForwardRef$5=ForwardRef$4,SvgUidField=(mr,hr)=>jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",width:16,height:16,ref:hr,...mr,children:[jsxRuntimeExports.jsx("rect",{width:31,height:23,x:.5,y:4.5,fill:"#F0F0FF",stroke:"#D9D8FF",rx:2.5}),jsxRuntimeExports.jsx("path",{fill:"#4945FF",d:"M18 9a5.005 5.005 0 0 0-4.756 6.549l-3.598 3.597a.5.5 0 0 0-.146.354V22a.5.5 0 0 0 .5.5h2.5a.5.5 0 0 0 .5-.5v-1h1a.5.5 0 0 0 .5-.5v-1h1a.5.5 0 0 0 .354-.146l.597-.598A5 5 0 1 0 18 9m1.25 4.75a1 1 0 1 1 0-2 1 1 0 0 1 0 2"})]}),ForwardRef$2=reactExports.forwardRef(SvgUidField),ForwardRef$3=ForwardRef$2,SvgX=(mr,hr)=>jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",width:16,height:16,ref:hr,...mr,children:jsxRuntimeExports.jsxs("g",{fillRule:"evenodd",clipRule:"evenodd",children:[jsxRuntimeExports.jsx("path",{fill:"#FAFAFA",d:"M6.566 6.533c.064.092 1.557 2.264 3.317 4.828l3.617 5.268c.23.334.418.614.418.622s-.086.114-.19.234-.4.462-.654.76l-3.258 3.787c-1.153 1.34-1.32 1.534-2.197 2.556-.47.546-.919 1.068-1 1.16s-.146.177-.146.189c0 .014.295.021.83.021h.83l.911-1.062 1.1-1.279a888 888 0 0 0 2.243-2.61c.043-.048.377-.437.744-.864s.676-.787.689-.8l.431-.502a9 9 0 0 1 .424-.478c.009 0 1.164 1.672 2.567 3.717l2.608 3.797.055.08h2.846c2.34.001 2.843-.004 2.834-.027-.01-.025-1.373-2.013-4.87-7.103-2.517-3.665-2.852-4.157-2.843-4.182.01-.024.353-.425 2.607-3.049l1.779-2.07c.062-.07.388-.45.724-.84l1.96-2.283c.027-.035-.02-.038-.814-.038h-.842l-.375.437a1174 1174 0 0 1-2.23 2.594c-.084.096-.506.586-.938 1.09a129 129 0 0 1-1.004 1.167c-.186.22-.374.44-1.239 1.442-.38.44-.399.459-.43.418-.02-.023-1.132-1.64-2.473-3.594L12.16 6.366H6.45zm2.228 1.165 1.186 1.7c1.196 1.71 5.895 8.436 8.917 12.763a421 421 0 0 0 1.783 2.54c.02.022.301.026 1.314.022l1.287-.005-3.37-4.823-5.963-8.534-2.593-3.712-1.3-.005-1.3-.006z"}),jsxRuntimeExports.jsx("path",{fill:"#040404",d:"M0 16v16l16.005-.005 16.006-.006.005-15.994L32.022 0H0zm.01.01c0 8.8.003 12.4.006 8s.003-11.6 0-16-.005-.8-.005 8m6.556-9.477c.064.092 1.557 2.264 3.317 4.828l3.617 5.268c.23.334.418.614.418.622s-.086.114-.19.234-.399.462-.654.76l-2.014 2.34-1.244 1.447c-1.153 1.34-1.32 1.534-2.197 2.556-.469.546-.918 1.068-1 1.16-.08.092-.146.177-.146.189 0 .014.295.021.83.021h.83l.911-1.062c.502-.585.996-1.16 1.1-1.279a888 888 0 0 0 2.243-2.61c.043-.048.377-.437.744-.864l.689-.8.431-.502a9 9 0 0 1 .424-.478c.009 0 1.164 1.672 2.567 3.717l2.608 3.797.056.08h2.845c2.34.001 2.843-.004 2.834-.027-.01-.025-1.373-2.013-4.87-7.103-2.517-3.665-2.852-4.157-2.842-4.182.009-.024.352-.425 2.606-3.049l1.78-2.07.723-.84 1.96-2.283c.027-.035-.02-.038-.814-.038h-.842l-.375.437a1129 1129 0 0 1-2.23 2.594c-.084.096-.506.586-.938 1.09a129 129 0 0 1-1.004 1.167c-.186.22-.374.44-1.239 1.442-.38.44-.399.459-.43.418-.02-.023-1.132-1.64-2.473-3.594L12.16 6.366H6.45zm2.228 1.165 1.186 1.7 8.918 12.763a416 416 0 0 0 1.782 2.54c.02.022.301.026 1.314.022l1.287-.005-3.37-4.823-5.963-8.534-2.593-3.712-1.3-.005-1.3-.006z"})]})}),ForwardRef=reactExports.forwardRef(SvgX),ForwardRef$1=ForwardRef;var type=TypeError,hasMap=typeof Map=="function"&&Map.prototype,mapSizeDescriptor=Object.getOwnPropertyDescriptor&&hasMap?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,mapSize=hasMap&&mapSizeDescriptor&&typeof mapSizeDescriptor.get=="function"?mapSizeDescriptor.get:null,mapForEach=hasMap&&Map.prototype.forEach,hasSet=typeof Set=="function"&&Set.prototype,setSizeDescriptor=Object.getOwnPropertyDescriptor&&hasSet?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,setSize=hasSet&&setSizeDescriptor&&typeof setSizeDescriptor.get=="function"?setSizeDescriptor.get:null,setForEach=hasSet&&Set.prototype.forEach,hasWeakMap=typeof WeakMap=="function"&&WeakMap.prototype,weakMapHas=hasWeakMap?WeakMap.prototype.has:null,hasWeakSet=typeof WeakSet=="function"&&WeakSet.prototype,weakSetHas=hasWeakSet?WeakSet.prototype.has:null,hasWeakRef=typeof WeakRef=="function"&&WeakRef.prototype,weakRefDeref=hasWeakRef?WeakRef.prototype.deref:null,booleanValueOf=Boolean.prototype.valueOf,objectToString$2=Object.prototype.toString,functionToString=Function.prototype.toString,$match=String.prototype.match,$slice=String.prototype.slice,$replace$1=String.prototype.replace,$toUpperCase=String.prototype.toUpperCase,$toLowerCase=String.prototype.toLowerCase,$test=RegExp.prototype.test,$concat$1=Array.prototype.concat,$join=Array.prototype.join,$arrSlice=Array.prototype.slice,$floor=Math.floor,bigIntValueOf=typeof BigInt=="function"?BigInt.prototype.valueOf:null,gOPS=Object.getOwnPropertySymbols,symToString=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,hasShammedSymbols=typeof Symbol=="function"&&typeof Symbol.iterator=="object",toStringTag=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===hasShammedSymbols||!0)?Symbol.toStringTag:null,isEnumerable=Object.prototype.propertyIsEnumerable,gPO=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(mr){return mr.__proto__}:null);function addNumericSeparator(mr,hr){if(mr===1/0||mr===-1/0||mr!==mr||mr&&mr>-1e3&&mr<1e3||$test.call(/e/,hr))return hr;var gr=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof mr=="number"){var vr=mr<0?-$floor(-mr):$floor(mr);if(vr!==mr){var xr=String(vr),Er=$slice.call(hr,xr.length+1);return $replace$1.call(xr,gr,"$&_")+"."+$replace$1.call($replace$1.call(Er,/([0-9]{3})/g,"$&_"),/_$/,"")}}return $replace$1.call(hr,gr,"$&_")}var utilInspect=require$$2,inspectCustom=utilInspect.custom,inspectSymbol=isSymbol$4(inspectCustom)?inspectCustom:null,quotes={__proto__:null,double:'"',single:"'"},quoteREs={__proto__:null,double:/(["\\])/g,single:/(['\\])/g},objectInspect=function mr(hr,gr,vr,xr){var Er=gr||{};if(has$5(Er,"quoteStyle")&&!has$5(quotes,Er.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(has$5(Er,"maxStringLength")&&(typeof Er.maxStringLength=="number"?Er.maxStringLength<0&&Er.maxStringLength!==1/0:Er.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var Cr=has$5(Er,"customInspect")?Er.customInspect:!0;if(typeof Cr!="boolean"&&Cr!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(has$5(Er,"indent")&&Er.indent!==null&&Er.indent!=="	"&&!(parseInt(Er.indent,10)===Er.indent&&Er.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(has$5(Er,"numericSeparator")&&typeof Er.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var wr=Er.numericSeparator;if(typeof hr>"u")return"undefined";if(hr===null)return"null";if(typeof hr=="boolean")return hr?"true":"false";if(typeof hr=="string")return inspectString(hr,Er);if(typeof hr=="number"){if(hr===0)return 1/0/hr>0?"0":"-0";var Rr=String(hr);return wr?addNumericSeparator(hr,Rr):Rr}if(typeof hr=="bigint"){var kr=String(hr)+"n";return wr?addNumericSeparator(hr,kr):kr}var Dr=typeof Er.depth>"u"?5:Er.depth;if(typeof vr>"u"&&(vr=0),vr>=Dr&&Dr>0&&typeof hr=="object")return isArray$d(hr)?"[Array]":"[Object]";var Br=getIndent(Er,vr);if(typeof xr>"u")xr=[];else if(indexOf(xr,hr)>=0)return"[Circular]";function Hr(Fn,Hn,Gn){if(Hn&&(xr=$arrSlice.call(xr),xr.push(Hn)),Gn){var qn={depth:Er.depth};return has$5(Er,"quoteStyle")&&(qn.quoteStyle=Er.quoteStyle),mr(Fn,qn,vr+1,xr)}return mr(Fn,Er,vr+1,xr)}if(typeof hr=="function"&&!isRegExp$2(hr)){var Gr=nameOf(hr),qr=arrObjKeys(hr,Hr);return"[Function"+(Gr?": "+Gr:" (anonymous)")+"]"+(qr.length>0?" { "+$join.call(qr,", ")+" }":"")}if(isSymbol$4(hr)){var zr=hasShammedSymbols?$replace$1.call(String(hr),/^(Symbol\(.*\))_[^)]*$/,"$1"):symToString.call(hr);return typeof hr=="object"&&!hasShammedSymbols?markBoxed(zr):zr}if(isElement(hr)){for(var Qr="<"+$toLowerCase.call(String(hr.nodeName)),sn=hr.attributes||[],hn=0;hn<sn.length;hn++)Qr+=" "+sn[hn].name+"="+wrapQuotes(quote(sn[hn].value),"double",Er);return Qr+=">",hr.childNodes&&hr.childNodes.length&&(Qr+="..."),Qr+="</"+$toLowerCase.call(String(hr.nodeName))+">",Qr}if(isArray$d(hr)){if(hr.length===0)return"[]";var vn=arrObjKeys(hr,Hr);return Br&&!singleLineValues(vn)?"["+indentedJoin(vn,Br)+"]":"[ "+$join.call(vn,", ")+" ]"}if(isError$1(hr)){var yn=arrObjKeys(hr,Hr);return!("cause"in Error.prototype)&&"cause"in hr&&!isEnumerable.call(hr,"cause")?"{ ["+String(hr)+"] "+$join.call($concat$1.call("[cause]: "+Hr(hr.cause),yn),", ")+" }":yn.length===0?"["+String(hr)+"]":"{ ["+String(hr)+"] "+$join.call(yn,", ")+" }"}if(typeof hr=="object"&&Cr){if(inspectSymbol&&typeof hr[inspectSymbol]=="function"&&utilInspect)return utilInspect(hr,{depth:Dr-vr});if(Cr!=="symbol"&&typeof hr.inspect=="function")return hr.inspect()}if(isMap$3(hr)){var gn=[];return mapForEach&&mapForEach.call(hr,function(Fn,Hn){gn.push(Hr(Hn,hr,!0)+" => "+Hr(Fn,hr))}),collectionOf("Map",mapSize.call(hr),gn,Br)}if(isSet$3(hr)){var bn=[];return setForEach&&setForEach.call(hr,function(Fn){bn.push(Hr(Fn,hr))}),collectionOf("Set",setSize.call(hr),bn,Br)}if(isWeakMap$1(hr))return weakCollectionOf("WeakMap");if(isWeakSet(hr))return weakCollectionOf("WeakSet");if(isWeakRef(hr))return weakCollectionOf("WeakRef");if(isNumber$2(hr))return markBoxed(Hr(Number(hr)));if(isBigInt(hr))return markBoxed(Hr(bigIntValueOf.call(hr)));if(isBoolean$1(hr))return markBoxed(booleanValueOf.call(hr));if(isString$2(hr))return markBoxed(Hr(String(hr)));if(typeof window<"u"&&hr===window)return"{ [object Window] }";if(typeof globalThis<"u"&&hr===globalThis||typeof commonjsGlobal$1<"u"&&hr===commonjsGlobal$1)return"{ [object globalThis] }";if(!isDate$2(hr)&&!isRegExp$2(hr)){var xn=arrObjKeys(hr,Hr),$n=gPO?gPO(hr)===Object.prototype:hr instanceof Object||hr.constructor===Object,Sn=hr instanceof Object?"":"null prototype",Cn=!$n&&toStringTag&&Object(hr)===hr&&toStringTag in hr?$slice.call(toStr$1(hr),8,-1):Sn?"Object":"",Rn=$n||typeof hr.constructor!="function"?"":hr.constructor.name?hr.constructor.name+" ":"",Bn=Rn+(Cn||Sn?"["+$join.call($concat$1.call([],Cn||[],Sn||[]),": ")+"] ":"");return xn.length===0?Bn+"{}":Br?Bn+"{"+indentedJoin(xn,Br)+"}":Bn+"{ "+$join.call(xn,", ")+" }"}return String(hr)};function wrapQuotes(mr,hr,gr){var vr=gr.quoteStyle||hr,xr=quotes[vr];return xr+mr+xr}function quote(mr){return $replace$1.call(String(mr),/"/g,"&quot;")}function isArray$d(mr){return toStr$1(mr)==="[object Array]"&&(!toStringTag||!(typeof mr=="object"&&toStringTag in mr))}function isDate$2(mr){return toStr$1(mr)==="[object Date]"&&(!toStringTag||!(typeof mr=="object"&&toStringTag in mr))}function isRegExp$2(mr){return toStr$1(mr)==="[object RegExp]"&&(!toStringTag||!(typeof mr=="object"&&toStringTag in mr))}function isError$1(mr){return toStr$1(mr)==="[object Error]"&&(!toStringTag||!(typeof mr=="object"&&toStringTag in mr))}function isString$2(mr){return toStr$1(mr)==="[object String]"&&(!toStringTag||!(typeof mr=="object"&&toStringTag in mr))}function isNumber$2(mr){return toStr$1(mr)==="[object Number]"&&(!toStringTag||!(typeof mr=="object"&&toStringTag in mr))}function isBoolean$1(mr){return toStr$1(mr)==="[object Boolean]"&&(!toStringTag||!(typeof mr=="object"&&toStringTag in mr))}function isSymbol$4(mr){if(hasShammedSymbols)return mr&&typeof mr=="object"&&mr instanceof Symbol;if(typeof mr=="symbol")return!0;if(!mr||typeof mr!="object"||!symToString)return!1;try{return symToString.call(mr),!0}catch{}return!1}function isBigInt(mr){if(!mr||typeof mr!="object"||!bigIntValueOf)return!1;try{return bigIntValueOf.call(mr),!0}catch{}return!1}var hasOwn$2=Object.prototype.hasOwnProperty||function(mr){return mr in this};function has$5(mr,hr){return hasOwn$2.call(mr,hr)}function toStr$1(mr){return objectToString$2.call(mr)}function nameOf(mr){if(mr.name)return mr.name;var hr=$match.call(functionToString.call(mr),/^function\s*([\w$]+)/);return hr?hr[1]:null}function indexOf(mr,hr){if(mr.indexOf)return mr.indexOf(hr);for(var gr=0,vr=mr.length;gr<vr;gr++)if(mr[gr]===hr)return gr;return-1}function isMap$3(mr){if(!mapSize||!mr||typeof mr!="object")return!1;try{mapSize.call(mr);try{setSize.call(mr)}catch{return!0}return mr instanceof Map}catch{}return!1}function isWeakMap$1(mr){if(!weakMapHas||!mr||typeof mr!="object")return!1;try{weakMapHas.call(mr,weakMapHas);try{weakSetHas.call(mr,weakSetHas)}catch{return!0}return mr instanceof WeakMap}catch{}return!1}function isWeakRef(mr){if(!weakRefDeref||!mr||typeof mr!="object")return!1;try{return weakRefDeref.call(mr),!0}catch{}return!1}function isSet$3(mr){if(!setSize||!mr||typeof mr!="object")return!1;try{setSize.call(mr);try{mapSize.call(mr)}catch{return!0}return mr instanceof Set}catch{}return!1}function isWeakSet(mr){if(!weakSetHas||!mr||typeof mr!="object")return!1;try{weakSetHas.call(mr,weakSetHas);try{weakMapHas.call(mr,weakMapHas)}catch{return!0}return mr instanceof WeakSet}catch{}return!1}function isElement(mr){return!mr||typeof mr!="object"?!1:typeof HTMLElement<"u"&&mr instanceof HTMLElement?!0:typeof mr.nodeName=="string"&&typeof mr.getAttribute=="function"}function inspectString(mr,hr){if(mr.length>hr.maxStringLength){var gr=mr.length-hr.maxStringLength,vr="... "+gr+" more character"+(gr>1?"s":"");return inspectString($slice.call(mr,0,hr.maxStringLength),hr)+vr}var xr=quoteREs[hr.quoteStyle||"single"];xr.lastIndex=0;var Er=$replace$1.call($replace$1.call(mr,xr,"\\$1"),/[\x00-\x1f]/g,lowbyte);return wrapQuotes(Er,"single",hr)}function lowbyte(mr){var hr=mr.charCodeAt(0),gr={8:"b",9:"t",10:"n",12:"f",13:"r"}[hr];return gr?"\\"+gr:"\\x"+(hr<16?"0":"")+$toUpperCase.call(hr.toString(16))}function markBoxed(mr){return"Object("+mr+")"}function weakCollectionOf(mr){return mr+" { ? }"}function collectionOf(mr,hr,gr,vr){var xr=vr?indentedJoin(gr,vr):$join.call(gr,", ");return mr+" ("+hr+") {"+xr+"}"}function singleLineValues(mr){for(var hr=0;hr<mr.length;hr++)if(indexOf(mr[hr],`
`)>=0)return!1;return!0}function getIndent(mr,hr){var gr;if(mr.indent==="	")gr="	";else if(typeof mr.indent=="number"&&mr.indent>0)gr=$join.call(Array(mr.indent+1)," ");else return null;return{base:gr,prev:$join.call(Array(hr+1),gr)}}function indentedJoin(mr,hr){if(mr.length===0)return"";var gr=`
`+hr.prev+hr.base;return gr+$join.call(mr,","+gr)+`
`+hr.prev}function arrObjKeys(mr,hr){var gr=isArray$d(mr),vr=[];if(gr){vr.length=mr.length;for(var xr=0;xr<mr.length;xr++)vr[xr]=has$5(mr,xr)?hr(mr[xr],mr):""}var Er=typeof gOPS=="function"?gOPS(mr):[],Cr;if(hasShammedSymbols){Cr={};for(var wr=0;wr<Er.length;wr++)Cr["$"+Er[wr]]=Er[wr]}for(var Rr in mr)has$5(mr,Rr)&&(gr&&String(Number(Rr))===Rr&&Rr<mr.length||hasShammedSymbols&&Cr["$"+Rr]instanceof Symbol||($test.call(/[^\w$]/,Rr)?vr.push(hr(Rr,mr)+": "+hr(mr[Rr],mr)):vr.push(Rr+": "+hr(mr[Rr],mr))));if(typeof gOPS=="function")for(var kr=0;kr<Er.length;kr++)isEnumerable.call(mr,Er[kr])&&vr.push("["+hr(Er[kr])+"]: "+hr(mr[Er[kr]],mr));return vr}var inspect$3=objectInspect,$TypeError$5=type,listGetNode=function(mr,hr,gr){for(var vr=mr,xr;(xr=vr.next)!=null;vr=xr)if(xr.key===hr)return vr.next=xr.next,gr||(xr.next=mr.next,mr.next=xr),xr},listGet=function(mr,hr){if(mr){var gr=listGetNode(mr,hr);return gr&&gr.value}},listSet=function(mr,hr,gr){var vr=listGetNode(mr,hr);vr?vr.value=gr:mr.next={key:hr,next:mr.next,value:gr}},listHas=function(mr,hr){return mr?!!listGetNode(mr,hr):!1},listDelete=function(mr,hr){if(mr)return listGetNode(mr,hr,!0)},sideChannelList=function(){var hr,gr={assert:function(vr){if(!gr.has(vr))throw new $TypeError$5("Side channel does not contain "+inspect$3(vr))},delete:function(vr){var xr=hr&&hr.next,Er=listDelete(hr,vr);return Er&&xr&&xr===Er&&(hr=void 0),!!Er},get:function(vr){return listGet(hr,vr)},has:function(vr){return listHas(hr,vr)},set:function(vr,xr){hr||(hr={next:void 0}),listSet(hr,vr,xr)}};return gr},esObjectAtoms=Object,esErrors=Error,_eval=EvalError,range=RangeError,ref=ReferenceError,syntax=SyntaxError,uri=URIError,abs$2=Math.abs,floor$1=Math.floor,max$2=Math.max,min$1=Math.min,pow$1=Math.pow,round$1=Math.round,_isNaN=Number.isNaN||function(hr){return hr!==hr},$isNaN=_isNaN,sign$1=function(hr){return $isNaN(hr)||hr===0?hr:hr<0?-1:1},gOPD=Object.getOwnPropertyDescriptor,$gOPD$1=gOPD;if($gOPD$1)try{$gOPD$1([],"length")}catch{$gOPD$1=null}var gopd=$gOPD$1,$defineProperty$1=Object.defineProperty||!1;if($defineProperty$1)try{$defineProperty$1({},"a",{value:1})}catch{$defineProperty$1=!1}var esDefineProperty=$defineProperty$1,shams,hasRequiredShams;function requireShams(){return hasRequiredShams||(hasRequiredShams=1,shams=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var hr={},gr=Symbol("test"),vr=Object(gr);if(typeof gr=="string"||Object.prototype.toString.call(gr)!=="[object Symbol]"||Object.prototype.toString.call(vr)!=="[object Symbol]")return!1;var xr=42;hr[gr]=xr;for(var Er in hr)return!1;if(typeof Object.keys=="function"&&Object.keys(hr).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(hr).length!==0)return!1;var Cr=Object.getOwnPropertySymbols(hr);if(Cr.length!==1||Cr[0]!==gr||!Object.prototype.propertyIsEnumerable.call(hr,gr))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var wr=Object.getOwnPropertyDescriptor(hr,gr);if(wr.value!==xr||wr.enumerable!==!0)return!1}return!0}),shams}var hasSymbols$1,hasRequiredHasSymbols;function requireHasSymbols(){if(hasRequiredHasSymbols)return hasSymbols$1;hasRequiredHasSymbols=1;var mr=typeof Symbol<"u"&&Symbol,hr=requireShams();return hasSymbols$1=function(){return typeof mr!="function"||typeof Symbol!="function"||typeof mr("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:hr()},hasSymbols$1}var Reflect_getPrototypeOf,hasRequiredReflect_getPrototypeOf;function requireReflect_getPrototypeOf(){return hasRequiredReflect_getPrototypeOf||(hasRequiredReflect_getPrototypeOf=1,Reflect_getPrototypeOf=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),Reflect_getPrototypeOf}var Object_getPrototypeOf,hasRequiredObject_getPrototypeOf;function requireObject_getPrototypeOf(){if(hasRequiredObject_getPrototypeOf)return Object_getPrototypeOf;hasRequiredObject_getPrototypeOf=1;var mr=esObjectAtoms;return Object_getPrototypeOf=mr.getPrototypeOf||null,Object_getPrototypeOf}var ERROR_MESSAGE="Function.prototype.bind called on incompatible ",toStr=Object.prototype.toString,max$1=Math.max,funcType="[object Function]",concatty=function(hr,gr){for(var vr=[],xr=0;xr<hr.length;xr+=1)vr[xr]=hr[xr];for(var Er=0;Er<gr.length;Er+=1)vr[Er+hr.length]=gr[Er];return vr},slicy=function(hr,gr){for(var vr=[],xr=gr,Er=0;xr<hr.length;xr+=1,Er+=1)vr[Er]=hr[xr];return vr},joiny=function(mr,hr){for(var gr="",vr=0;vr<mr.length;vr+=1)gr+=mr[vr],vr+1<mr.length&&(gr+=hr);return gr},implementation$1=function(hr){var gr=this;if(typeof gr!="function"||toStr.apply(gr)!==funcType)throw new TypeError(ERROR_MESSAGE+gr);for(var vr=slicy(arguments,1),xr,Er=function(){if(this instanceof xr){var Dr=gr.apply(this,concatty(vr,arguments));return Object(Dr)===Dr?Dr:this}return gr.apply(hr,concatty(vr,arguments))},Cr=max$1(0,gr.length-vr.length),wr=[],Rr=0;Rr<Cr;Rr++)wr[Rr]="$"+Rr;if(xr=Function("binder","return function ("+joiny(wr,",")+"){ return binder.apply(this,arguments); }")(Er),gr.prototype){var kr=function(){};kr.prototype=gr.prototype,xr.prototype=new kr,kr.prototype=null}return xr},implementation=implementation$1,functionBind=Function.prototype.bind||implementation,functionCall=Function.prototype.call,functionApply,hasRequiredFunctionApply;function requireFunctionApply(){return hasRequiredFunctionApply||(hasRequiredFunctionApply=1,functionApply=Function.prototype.apply),functionApply}var reflectApply=typeof Reflect<"u"&&Reflect&&Reflect.apply,bind$3=functionBind,$apply$1=requireFunctionApply(),$call$2=functionCall,$reflectApply=reflectApply,actualApply=$reflectApply||bind$3.call($call$2,$apply$1),bind$2=functionBind,$TypeError$4=type,$call$1=functionCall,$actualApply=actualApply,callBindApplyHelpers=function(hr){if(hr.length<1||typeof hr[0]!="function")throw new $TypeError$4("a function is required");return $actualApply(bind$2,$call$1,hr)},get$2,hasRequiredGet;function requireGet(){if(hasRequiredGet)return get$2;hasRequiredGet=1;var mr=callBindApplyHelpers,hr=gopd,gr;try{gr=[].__proto__===Array.prototype}catch(Cr){if(!Cr||typeof Cr!="object"||!("code"in Cr)||Cr.code!=="ERR_PROTO_ACCESS")throw Cr}var vr=!!gr&&hr&&hr(Object.prototype,"__proto__"),xr=Object,Er=xr.getPrototypeOf;return get$2=vr&&typeof vr.get=="function"?mr([vr.get]):typeof Er=="function"?function(wr){return Er(wr==null?wr:xr(wr))}:!1,get$2}var getProto$1,hasRequiredGetProto;function requireGetProto(){if(hasRequiredGetProto)return getProto$1;hasRequiredGetProto=1;var mr=requireReflect_getPrototypeOf(),hr=requireObject_getPrototypeOf(),gr=requireGet();return getProto$1=mr?function(xr){return mr(xr)}:hr?function(xr){if(!xr||typeof xr!="object"&&typeof xr!="function")throw new TypeError("getProto: not an object");return hr(xr)}:gr?function(xr){return gr(xr)}:null,getProto$1}var hasown,hasRequiredHasown;function requireHasown(){if(hasRequiredHasown)return hasown;hasRequiredHasown=1;var mr=Function.prototype.call,hr=Object.prototype.hasOwnProperty,gr=functionBind;return hasown=gr.call(mr,hr),hasown}var undefined$1,$Object=esObjectAtoms,$Error=esErrors,$EvalError=_eval,$RangeError=range,$ReferenceError=ref,$SyntaxError=syntax,$TypeError$3=type,$URIError=uri,abs$1=abs$2,floor=floor$1,max=max$2,min=min$1,pow=pow$1,round=round$1,sign=sign$1,$Function=Function,getEvalledConstructor=function(mr){try{return $Function('"use strict"; return ('+mr+").constructor;")()}catch{}},$gOPD=gopd,$defineProperty=esDefineProperty,throwTypeError=function(){throw new $TypeError$3},ThrowTypeError=$gOPD?function(){try{return arguments.callee,throwTypeError}catch{try{return $gOPD(arguments,"callee").get}catch{return throwTypeError}}}():throwTypeError,hasSymbols=requireHasSymbols()(),getProto=requireGetProto(),$ObjectGPO=requireObject_getPrototypeOf(),$ReflectGPO=requireReflect_getPrototypeOf(),$apply=requireFunctionApply(),$call=functionCall,needsEval={},TypedArray=typeof Uint8Array>"u"||!getProto?undefined$1:getProto(Uint8Array),INTRINSICS={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?undefined$1:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?undefined$1:ArrayBuffer,"%ArrayIteratorPrototype%":hasSymbols&&getProto?getProto([][Symbol.iterator]()):undefined$1,"%AsyncFromSyncIteratorPrototype%":undefined$1,"%AsyncFunction%":needsEval,"%AsyncGenerator%":needsEval,"%AsyncGeneratorFunction%":needsEval,"%AsyncIteratorPrototype%":needsEval,"%Atomics%":typeof Atomics>"u"?undefined$1:Atomics,"%BigInt%":typeof BigInt>"u"?undefined$1:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?undefined$1:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?undefined$1:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?undefined$1:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":$Error,"%eval%":eval,"%EvalError%":$EvalError,"%Float32Array%":typeof Float32Array>"u"?undefined$1:Float32Array,"%Float64Array%":typeof Float64Array>"u"?undefined$1:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?undefined$1:FinalizationRegistry,"%Function%":$Function,"%GeneratorFunction%":needsEval,"%Int8Array%":typeof Int8Array>"u"?undefined$1:Int8Array,"%Int16Array%":typeof Int16Array>"u"?undefined$1:Int16Array,"%Int32Array%":typeof Int32Array>"u"?undefined$1:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":hasSymbols&&getProto?getProto(getProto([][Symbol.iterator]())):undefined$1,"%JSON%":typeof JSON=="object"?JSON:undefined$1,"%Map%":typeof Map>"u"?undefined$1:Map,"%MapIteratorPrototype%":typeof Map>"u"||!hasSymbols||!getProto?undefined$1:getProto(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":$Object,"%Object.getOwnPropertyDescriptor%":$gOPD,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?undefined$1:Promise,"%Proxy%":typeof Proxy>"u"?undefined$1:Proxy,"%RangeError%":$RangeError,"%ReferenceError%":$ReferenceError,"%Reflect%":typeof Reflect>"u"?undefined$1:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?undefined$1:Set,"%SetIteratorPrototype%":typeof Set>"u"||!hasSymbols||!getProto?undefined$1:getProto(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?undefined$1:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":hasSymbols&&getProto?getProto(""[Symbol.iterator]()):undefined$1,"%Symbol%":hasSymbols?Symbol:undefined$1,"%SyntaxError%":$SyntaxError,"%ThrowTypeError%":ThrowTypeError,"%TypedArray%":TypedArray,"%TypeError%":$TypeError$3,"%Uint8Array%":typeof Uint8Array>"u"?undefined$1:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?undefined$1:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?undefined$1:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?undefined$1:Uint32Array,"%URIError%":$URIError,"%WeakMap%":typeof WeakMap>"u"?undefined$1:WeakMap,"%WeakRef%":typeof WeakRef>"u"?undefined$1:WeakRef,"%WeakSet%":typeof WeakSet>"u"?undefined$1:WeakSet,"%Function.prototype.call%":$call,"%Function.prototype.apply%":$apply,"%Object.defineProperty%":$defineProperty,"%Object.getPrototypeOf%":$ObjectGPO,"%Math.abs%":abs$1,"%Math.floor%":floor,"%Math.max%":max,"%Math.min%":min,"%Math.pow%":pow,"%Math.round%":round,"%Math.sign%":sign,"%Reflect.getPrototypeOf%":$ReflectGPO};if(getProto)try{null.error}catch(mr){var errorProto=getProto(getProto(mr));INTRINSICS["%Error.prototype%"]=errorProto}var doEval=function mr(hr){var gr;if(hr==="%AsyncFunction%")gr=getEvalledConstructor("async function () {}");else if(hr==="%GeneratorFunction%")gr=getEvalledConstructor("function* () {}");else if(hr==="%AsyncGeneratorFunction%")gr=getEvalledConstructor("async function* () {}");else if(hr==="%AsyncGenerator%"){var vr=mr("%AsyncGeneratorFunction%");vr&&(gr=vr.prototype)}else if(hr==="%AsyncIteratorPrototype%"){var xr=mr("%AsyncGenerator%");xr&&getProto&&(gr=getProto(xr.prototype))}return INTRINSICS[hr]=gr,gr},LEGACY_ALIASES={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},bind$1=functionBind,hasOwn$1=requireHasown(),$concat=bind$1.call($call,Array.prototype.concat),$spliceApply=bind$1.call($apply,Array.prototype.splice),$replace=bind$1.call($call,String.prototype.replace),$strSlice=bind$1.call($call,String.prototype.slice),$exec=bind$1.call($call,RegExp.prototype.exec),rePropName$1=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,reEscapeChar$1=/\\(\\)?/g,stringToPath$2=function(hr){var gr=$strSlice(hr,0,1),vr=$strSlice(hr,-1);if(gr==="%"&&vr!=="%")throw new $SyntaxError("invalid intrinsic syntax, expected closing `%`");if(vr==="%"&&gr!=="%")throw new $SyntaxError("invalid intrinsic syntax, expected opening `%`");var xr=[];return $replace(hr,rePropName$1,function(Er,Cr,wr,Rr){xr[xr.length]=wr?$replace(Rr,reEscapeChar$1,"$1"):Cr||Er}),xr},getBaseIntrinsic=function(hr,gr){var vr=hr,xr;if(hasOwn$1(LEGACY_ALIASES,vr)&&(xr=LEGACY_ALIASES[vr],vr="%"+xr[0]+"%"),hasOwn$1(INTRINSICS,vr)){var Er=INTRINSICS[vr];if(Er===needsEval&&(Er=doEval(vr)),typeof Er>"u"&&!gr)throw new $TypeError$3("intrinsic "+hr+" exists, but is not available. Please file an issue!");return{alias:xr,name:vr,value:Er}}throw new $SyntaxError("intrinsic "+hr+" does not exist!")},getIntrinsic=function(hr,gr){if(typeof hr!="string"||hr.length===0)throw new $TypeError$3("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof gr!="boolean")throw new $TypeError$3('"allowMissing" argument must be a boolean');if($exec(/^%?[^%]*%?$/,hr)===null)throw new $SyntaxError("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var vr=stringToPath$2(hr),xr=vr.length>0?vr[0]:"",Er=getBaseIntrinsic("%"+xr+"%",gr),Cr=Er.name,wr=Er.value,Rr=!1,kr=Er.alias;kr&&(xr=kr[0],$spliceApply(vr,$concat([0,1],kr)));for(var Dr=1,Br=!0;Dr<vr.length;Dr+=1){var Hr=vr[Dr],Gr=$strSlice(Hr,0,1),qr=$strSlice(Hr,-1);if((Gr==='"'||Gr==="'"||Gr==="`"||qr==='"'||qr==="'"||qr==="`")&&Gr!==qr)throw new $SyntaxError("property names with quotes must have matching quotes");if((Hr==="constructor"||!Br)&&(Rr=!0),xr+="."+Hr,Cr="%"+xr+"%",hasOwn$1(INTRINSICS,Cr))wr=INTRINSICS[Cr];else if(wr!=null){if(!(Hr in wr)){if(!gr)throw new $TypeError$3("base intrinsic for "+hr+" exists, but the property is not available.");return}if($gOPD&&Dr+1>=vr.length){var zr=$gOPD(wr,Hr);Br=!!zr,Br&&"get"in zr&&!("originalValue"in zr.get)?wr=zr.get:wr=wr[Hr]}else Br=hasOwn$1(wr,Hr),wr=wr[Hr];Br&&!Rr&&(INTRINSICS[Cr]=wr)}}return wr},GetIntrinsic$2=getIntrinsic,callBindBasic=callBindApplyHelpers,$indexOf=callBindBasic([GetIntrinsic$2("%String.prototype.indexOf%")]),callBound$2=function(hr,gr){var vr=GetIntrinsic$2(hr,!!gr);return typeof vr=="function"&&$indexOf(hr,".prototype.")>-1?callBindBasic([vr]):vr},GetIntrinsic$1=getIntrinsic,callBound$1=callBound$2,inspect$2=objectInspect,$TypeError$2=type,$Map=GetIntrinsic$1("%Map%",!0),$mapGet=callBound$1("Map.prototype.get",!0),$mapSet=callBound$1("Map.prototype.set",!0),$mapHas=callBound$1("Map.prototype.has",!0),$mapDelete=callBound$1("Map.prototype.delete",!0),$mapSize=callBound$1("Map.prototype.size",!0),sideChannelMap=!!$Map&&function(){var hr,gr={assert:function(vr){if(!gr.has(vr))throw new $TypeError$2("Side channel does not contain "+inspect$2(vr))},delete:function(vr){if(hr){var xr=$mapDelete(hr,vr);return $mapSize(hr)===0&&(hr=void 0),xr}return!1},get:function(vr){if(hr)return $mapGet(hr,vr)},has:function(vr){return hr?$mapHas(hr,vr):!1},set:function(vr,xr){hr||(hr=new $Map),$mapSet(hr,vr,xr)}};return gr},GetIntrinsic=getIntrinsic,callBound=callBound$2,inspect$1=objectInspect,getSideChannelMap$1=sideChannelMap,$TypeError$1=type,$WeakMap=GetIntrinsic("%WeakMap%",!0),$weakMapGet=callBound("WeakMap.prototype.get",!0),$weakMapSet=callBound("WeakMap.prototype.set",!0),$weakMapHas=callBound("WeakMap.prototype.has",!0),$weakMapDelete=callBound("WeakMap.prototype.delete",!0),sideChannelWeakmap=$WeakMap?function(){var hr,gr,vr={assert:function(xr){if(!vr.has(xr))throw new $TypeError$1("Side channel does not contain "+inspect$1(xr))},delete:function(xr){if($WeakMap&&xr&&(typeof xr=="object"||typeof xr=="function")){if(hr)return $weakMapDelete(hr,xr)}else if(getSideChannelMap$1&&gr)return gr.delete(xr);return!1},get:function(xr){return $WeakMap&&xr&&(typeof xr=="object"||typeof xr=="function")&&hr?$weakMapGet(hr,xr):gr&&gr.get(xr)},has:function(xr){return $WeakMap&&xr&&(typeof xr=="object"||typeof xr=="function")&&hr?$weakMapHas(hr,xr):!!gr&&gr.has(xr)},set:function(xr,Er){$WeakMap&&xr&&(typeof xr=="object"||typeof xr=="function")?(hr||(hr=new $WeakMap),$weakMapSet(hr,xr,Er)):getSideChannelMap$1&&(gr||(gr=getSideChannelMap$1()),gr.set(xr,Er))}};return vr}:getSideChannelMap$1,$TypeError=type,inspect=objectInspect,getSideChannelList=sideChannelList,getSideChannelMap=sideChannelMap,getSideChannelWeakMap=sideChannelWeakmap,makeChannel=getSideChannelWeakMap||getSideChannelMap||getSideChannelList,sideChannel=function(){var hr,gr={assert:function(vr){if(!gr.has(vr))throw new $TypeError("Side channel does not contain "+inspect(vr))},delete:function(vr){return!!hr&&hr.delete(vr)},get:function(vr){return hr&&hr.get(vr)},has:function(vr){return!!hr&&hr.has(vr)},set:function(vr,xr){hr||(hr=makeChannel()),hr.set(vr,xr)}};return gr},replace$1=String.prototype.replace,percentTwenties=/%20/g,Format={RFC1738:"RFC1738",RFC3986:"RFC3986"},formats$3={default:Format.RFC3986,formatters:{RFC1738:function(mr){return replace$1.call(mr,percentTwenties,"+")},RFC3986:function(mr){return String(mr)}},RFC1738:Format.RFC1738,RFC3986:Format.RFC3986},formats$2=formats$3,has$4=Object.prototype.hasOwnProperty,isArray$c=Array.isArray,hexTable=function(){for(var mr=[],hr=0;hr<256;++hr)mr.push("%"+((hr<16?"0":"")+hr.toString(16)).toUpperCase());return mr}(),compactQueue=function(hr){for(;hr.length>1;){var gr=hr.pop(),vr=gr.obj[gr.prop];if(isArray$c(vr)){for(var xr=[],Er=0;Er<vr.length;++Er)typeof vr[Er]<"u"&&xr.push(vr[Er]);gr.obj[gr.prop]=xr}}},arrayToObject$1=function(hr,gr){for(var vr=gr&&gr.plainObjects?Object.create(null):{},xr=0;xr<hr.length;++xr)typeof hr[xr]<"u"&&(vr[xr]=hr[xr]);return vr},merge$1=function mr(hr,gr,vr){if(!gr)return hr;if(typeof gr!="object"){if(isArray$c(hr))hr.push(gr);else if(hr&&typeof hr=="object")(vr&&(vr.plainObjects||vr.allowPrototypes)||!has$4.call(Object.prototype,gr))&&(hr[gr]=!0);else return[hr,gr];return hr}if(!hr||typeof hr!="object")return[hr].concat(gr);var xr=hr;return isArray$c(hr)&&!isArray$c(gr)&&(xr=arrayToObject$1(hr,vr)),isArray$c(hr)&&isArray$c(gr)?(gr.forEach(function(Er,Cr){if(has$4.call(hr,Cr)){var wr=hr[Cr];wr&&typeof wr=="object"&&Er&&typeof Er=="object"?hr[Cr]=mr(wr,Er,vr):hr.push(Er)}else hr[Cr]=Er}),hr):Object.keys(gr).reduce(function(Er,Cr){var wr=gr[Cr];return has$4.call(Er,Cr)?Er[Cr]=mr(Er[Cr],wr,vr):Er[Cr]=wr,Er},xr)},assign$2=function(hr,gr){return Object.keys(gr).reduce(function(vr,xr){return vr[xr]=gr[xr],vr},hr)},decode=function(mr,hr,gr){var vr=mr.replace(/\+/g," ");if(gr==="iso-8859-1")return vr.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(vr)}catch{return vr}},encode$2=function(hr,gr,vr,xr,Er){if(hr.length===0)return hr;var Cr=hr;if(typeof hr=="symbol"?Cr=Symbol.prototype.toString.call(hr):typeof hr!="string"&&(Cr=String(hr)),vr==="iso-8859-1")return escape(Cr).replace(/%u[0-9a-f]{4}/gi,function(Dr){return"%26%23"+parseInt(Dr.slice(2),16)+"%3B"});for(var wr="",Rr=0;Rr<Cr.length;++Rr){var kr=Cr.charCodeAt(Rr);if(kr===45||kr===46||kr===95||kr===126||kr>=48&&kr<=57||kr>=65&&kr<=90||kr>=97&&kr<=122||Er===formats$2.RFC1738&&(kr===40||kr===41)){wr+=Cr.charAt(Rr);continue}if(kr<128){wr=wr+hexTable[kr];continue}if(kr<2048){wr=wr+(hexTable[192|kr>>6]+hexTable[128|kr&63]);continue}if(kr<55296||kr>=57344){wr=wr+(hexTable[224|kr>>12]+hexTable[128|kr>>6&63]+hexTable[128|kr&63]);continue}Rr+=1,kr=65536+((kr&1023)<<10|Cr.charCodeAt(Rr)&1023),wr+=hexTable[240|kr>>18]+hexTable[128|kr>>12&63]+hexTable[128|kr>>6&63]+hexTable[128|kr&63]}return wr},compact=function(hr){for(var gr=[{obj:{o:hr},prop:"o"}],vr=[],xr=0;xr<gr.length;++xr)for(var Er=gr[xr],Cr=Er.obj[Er.prop],wr=Object.keys(Cr),Rr=0;Rr<wr.length;++Rr){var kr=wr[Rr],Dr=Cr[kr];typeof Dr=="object"&&Dr!==null&&vr.indexOf(Dr)===-1&&(gr.push({obj:Cr,prop:kr}),vr.push(Dr))}return compactQueue(gr),hr},isRegExp$1=function(hr){return Object.prototype.toString.call(hr)==="[object RegExp]"},isBuffer$5=function(hr){return!hr||typeof hr!="object"?!1:!!(hr.constructor&&hr.constructor.isBuffer&&hr.constructor.isBuffer(hr))},combine$1=function(hr,gr){return[].concat(hr,gr)},maybeMap=function(hr,gr){if(isArray$c(hr)){for(var vr=[],xr=0;xr<hr.length;xr+=1)vr.push(gr(hr[xr]));return vr}return gr(hr)},utils$4={arrayToObject:arrayToObject$1,assign:assign$2,combine:combine$1,compact,decode,encode:encode$2,isBuffer:isBuffer$5,isRegExp:isRegExp$1,maybeMap,merge:merge$1},getSideChannel=sideChannel,utils$3=utils$4,formats$1=formats$3,has$3=Object.prototype.hasOwnProperty,arrayPrefixGenerators={brackets:function(hr){return hr+"[]"},comma:"comma",indices:function(hr,gr){return hr+"["+gr+"]"},repeat:function(hr){return hr}},isArray$b=Array.isArray,push$2=Array.prototype.push,pushToArray=function(mr,hr){push$2.apply(mr,isArray$b(hr)?hr:[hr])},toISO=Date.prototype.toISOString,defaultFormat=formats$1.default,defaults$3={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:utils$3.encode,encodeValuesOnly:!1,format:defaultFormat,formatter:formats$1.formatters[defaultFormat],indices:!1,serializeDate:function(hr){return toISO.call(hr)},skipNulls:!1,strictNullHandling:!1},isNonNullishPrimitive=function(hr){return typeof hr=="string"||typeof hr=="number"||typeof hr=="boolean"||typeof hr=="symbol"||typeof hr=="bigint"},sentinel={},stringify$2=function mr(hr,gr,vr,xr,Er,Cr,wr,Rr,kr,Dr,Br,Hr,Gr,qr,zr,Qr){for(var sn=hr,hn=Qr,vn=0,yn=!1;(hn=hn.get(sentinel))!==void 0&&!yn;){var gn=hn.get(hr);if(vn+=1,typeof gn<"u"){if(gn===vn)throw new RangeError("Cyclic object value");yn=!0}typeof hn.get(sentinel)>"u"&&(vn=0)}if(typeof Rr=="function"?sn=Rr(gr,sn):sn instanceof Date?sn=Br(sn):vr==="comma"&&isArray$b(sn)&&(sn=utils$3.maybeMap(sn,function(qn){return qn instanceof Date?Br(qn):qn})),sn===null){if(Er)return wr&&!qr?wr(gr,defaults$3.encoder,zr,"key",Hr):gr;sn=""}if(isNonNullishPrimitive(sn)||utils$3.isBuffer(sn)){if(wr){var bn=qr?gr:wr(gr,defaults$3.encoder,zr,"key",Hr);return[Gr(bn)+"="+Gr(wr(sn,defaults$3.encoder,zr,"value",Hr))]}return[Gr(gr)+"="+Gr(String(sn))]}var xn=[];if(typeof sn>"u")return xn;var $n;if(vr==="comma"&&isArray$b(sn))qr&&wr&&(sn=utils$3.maybeMap(sn,wr)),$n=[{value:sn.length>0?sn.join(",")||null:void 0}];else if(isArray$b(Rr))$n=Rr;else{var Sn=Object.keys(sn);$n=kr?Sn.sort(kr):Sn}for(var Cn=xr&&isArray$b(sn)&&sn.length===1?gr+"[]":gr,Rn=0;Rn<$n.length;++Rn){var Bn=$n[Rn],Fn=typeof Bn=="object"&&typeof Bn.value<"u"?Bn.value:sn[Bn];if(!(Cr&&Fn===null)){var Hn=isArray$b(sn)?typeof vr=="function"?vr(Cn,Bn):Cn:Cn+(Dr?"."+Bn:"["+Bn+"]");Qr.set(hr,vn);var Gn=getSideChannel();Gn.set(sentinel,Qr),pushToArray(xn,mr(Fn,Hn,vr,xr,Er,Cr,vr==="comma"&&qr&&isArray$b(sn)?null:wr,Rr,kr,Dr,Br,Hr,Gr,qr,zr,Gn))}}return xn},normalizeStringifyOptions=function(hr){if(!hr)return defaults$3;if(hr.encoder!==null&&typeof hr.encoder<"u"&&typeof hr.encoder!="function")throw new TypeError("Encoder has to be a function.");var gr=hr.charset||defaults$3.charset;if(typeof hr.charset<"u"&&hr.charset!=="utf-8"&&hr.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var vr=formats$1.default;if(typeof hr.format<"u"){if(!has$3.call(formats$1.formatters,hr.format))throw new TypeError("Unknown format option provided.");vr=hr.format}var xr=formats$1.formatters[vr],Er=defaults$3.filter;return(typeof hr.filter=="function"||isArray$b(hr.filter))&&(Er=hr.filter),{addQueryPrefix:typeof hr.addQueryPrefix=="boolean"?hr.addQueryPrefix:defaults$3.addQueryPrefix,allowDots:typeof hr.allowDots>"u"?defaults$3.allowDots:!!hr.allowDots,charset:gr,charsetSentinel:typeof hr.charsetSentinel=="boolean"?hr.charsetSentinel:defaults$3.charsetSentinel,delimiter:typeof hr.delimiter>"u"?defaults$3.delimiter:hr.delimiter,encode:typeof hr.encode=="boolean"?hr.encode:defaults$3.encode,encoder:typeof hr.encoder=="function"?hr.encoder:defaults$3.encoder,encodeValuesOnly:typeof hr.encodeValuesOnly=="boolean"?hr.encodeValuesOnly:defaults$3.encodeValuesOnly,filter:Er,format:vr,formatter:xr,serializeDate:typeof hr.serializeDate=="function"?hr.serializeDate:defaults$3.serializeDate,skipNulls:typeof hr.skipNulls=="boolean"?hr.skipNulls:defaults$3.skipNulls,sort:typeof hr.sort=="function"?hr.sort:null,strictNullHandling:typeof hr.strictNullHandling=="boolean"?hr.strictNullHandling:defaults$3.strictNullHandling}},stringify_1=function(mr,hr){var gr=mr,vr=normalizeStringifyOptions(hr),xr,Er;typeof vr.filter=="function"?(Er=vr.filter,gr=Er("",gr)):isArray$b(vr.filter)&&(Er=vr.filter,xr=Er);var Cr=[];if(typeof gr!="object"||gr===null)return"";var wr;hr&&hr.arrayFormat in arrayPrefixGenerators?wr=hr.arrayFormat:hr&&"indices"in hr?wr=hr.indices?"indices":"repeat":wr="indices";var Rr=arrayPrefixGenerators[wr];if(hr&&"commaRoundTrip"in hr&&typeof hr.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var kr=Rr==="comma"&&hr&&hr.commaRoundTrip;xr||(xr=Object.keys(gr)),vr.sort&&xr.sort(vr.sort);for(var Dr=getSideChannel(),Br=0;Br<xr.length;++Br){var Hr=xr[Br];vr.skipNulls&&gr[Hr]===null||pushToArray(Cr,stringify$2(gr[Hr],Hr,Rr,kr,vr.strictNullHandling,vr.skipNulls,vr.encode?vr.encoder:null,vr.filter,vr.sort,vr.allowDots,vr.serializeDate,vr.format,vr.formatter,vr.encodeValuesOnly,vr.charset,Dr))}var Gr=Cr.join(vr.delimiter),qr=vr.addQueryPrefix===!0?"?":"";return vr.charsetSentinel&&(vr.charset==="iso-8859-1"?qr+="utf8=%26%2310003%3B&":qr+="utf8=%E2%9C%93&"),Gr.length>0?qr+Gr:""},utils$2=utils$4,has$2=Object.prototype.hasOwnProperty,isArray$a=Array.isArray,defaults$2={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:utils$2.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},interpretNumericEntities=function(mr){return mr.replace(/&#(\d+);/g,function(hr,gr){return String.fromCharCode(parseInt(gr,10))})},parseArrayValue=function(mr,hr){return mr&&typeof mr=="string"&&hr.comma&&mr.indexOf(",")>-1?mr.split(","):mr},isoSentinel="utf8=%26%2310003%3B",charsetSentinel="utf8=%E2%9C%93",parseValues=function(hr,gr){var vr={},xr=gr.ignoreQueryPrefix?hr.replace(/^\?/,""):hr,Er=gr.parameterLimit===1/0?void 0:gr.parameterLimit,Cr=xr.split(gr.delimiter,Er),wr=-1,Rr,kr=gr.charset;if(gr.charsetSentinel)for(Rr=0;Rr<Cr.length;++Rr)Cr[Rr].indexOf("utf8=")===0&&(Cr[Rr]===charsetSentinel?kr="utf-8":Cr[Rr]===isoSentinel&&(kr="iso-8859-1"),wr=Rr,Rr=Cr.length);for(Rr=0;Rr<Cr.length;++Rr)if(Rr!==wr){var Dr=Cr[Rr],Br=Dr.indexOf("]="),Hr=Br===-1?Dr.indexOf("="):Br+1,Gr,qr;Hr===-1?(Gr=gr.decoder(Dr,defaults$2.decoder,kr,"key"),qr=gr.strictNullHandling?null:""):(Gr=gr.decoder(Dr.slice(0,Hr),defaults$2.decoder,kr,"key"),qr=utils$2.maybeMap(parseArrayValue(Dr.slice(Hr+1),gr),function(zr){return gr.decoder(zr,defaults$2.decoder,kr,"value")})),qr&&gr.interpretNumericEntities&&kr==="iso-8859-1"&&(qr=interpretNumericEntities(qr)),Dr.indexOf("[]=")>-1&&(qr=isArray$a(qr)?[qr]:qr),has$2.call(vr,Gr)?vr[Gr]=utils$2.combine(vr[Gr],qr):vr[Gr]=qr}return vr},parseObject=function(mr,hr,gr,vr){for(var xr=vr?hr:parseArrayValue(hr,gr),Er=mr.length-1;Er>=0;--Er){var Cr,wr=mr[Er];if(wr==="[]"&&gr.parseArrays)Cr=[].concat(xr);else{Cr=gr.plainObjects?Object.create(null):{};var Rr=wr.charAt(0)==="["&&wr.charAt(wr.length-1)==="]"?wr.slice(1,-1):wr,kr=parseInt(Rr,10);!gr.parseArrays&&Rr===""?Cr={0:xr}:!isNaN(kr)&&wr!==Rr&&String(kr)===Rr&&kr>=0&&gr.parseArrays&&kr<=gr.arrayLimit?(Cr=[],Cr[kr]=xr):Rr!=="__proto__"&&(Cr[Rr]=xr)}xr=Cr}return xr},parseKeys=function(hr,gr,vr,xr){if(hr){var Er=vr.allowDots?hr.replace(/\.([^.[]+)/g,"[$1]"):hr,Cr=/(\[[^[\]]*])/,wr=/(\[[^[\]]*])/g,Rr=vr.depth>0&&Cr.exec(Er),kr=Rr?Er.slice(0,Rr.index):Er,Dr=[];if(kr){if(!vr.plainObjects&&has$2.call(Object.prototype,kr)&&!vr.allowPrototypes)return;Dr.push(kr)}for(var Br=0;vr.depth>0&&(Rr=wr.exec(Er))!==null&&Br<vr.depth;){if(Br+=1,!vr.plainObjects&&has$2.call(Object.prototype,Rr[1].slice(1,-1))&&!vr.allowPrototypes)return;Dr.push(Rr[1])}return Rr&&Dr.push("["+Er.slice(Rr.index)+"]"),parseObject(Dr,gr,vr,xr)}},normalizeParseOptions=function(hr){if(!hr)return defaults$2;if(hr.decoder!==null&&hr.decoder!==void 0&&typeof hr.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof hr.charset<"u"&&hr.charset!=="utf-8"&&hr.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var gr=typeof hr.charset>"u"?defaults$2.charset:hr.charset;return{allowDots:typeof hr.allowDots>"u"?defaults$2.allowDots:!!hr.allowDots,allowPrototypes:typeof hr.allowPrototypes=="boolean"?hr.allowPrototypes:defaults$2.allowPrototypes,allowSparse:typeof hr.allowSparse=="boolean"?hr.allowSparse:defaults$2.allowSparse,arrayLimit:typeof hr.arrayLimit=="number"?hr.arrayLimit:defaults$2.arrayLimit,charset:gr,charsetSentinel:typeof hr.charsetSentinel=="boolean"?hr.charsetSentinel:defaults$2.charsetSentinel,comma:typeof hr.comma=="boolean"?hr.comma:defaults$2.comma,decoder:typeof hr.decoder=="function"?hr.decoder:defaults$2.decoder,delimiter:typeof hr.delimiter=="string"||utils$2.isRegExp(hr.delimiter)?hr.delimiter:defaults$2.delimiter,depth:typeof hr.depth=="number"||hr.depth===!1?+hr.depth:defaults$2.depth,ignoreQueryPrefix:hr.ignoreQueryPrefix===!0,interpretNumericEntities:typeof hr.interpretNumericEntities=="boolean"?hr.interpretNumericEntities:defaults$2.interpretNumericEntities,parameterLimit:typeof hr.parameterLimit=="number"?hr.parameterLimit:defaults$2.parameterLimit,parseArrays:hr.parseArrays!==!1,plainObjects:typeof hr.plainObjects=="boolean"?hr.plainObjects:defaults$2.plainObjects,strictNullHandling:typeof hr.strictNullHandling=="boolean"?hr.strictNullHandling:defaults$2.strictNullHandling}},parse$3=function(mr,hr){var gr=normalizeParseOptions(hr);if(mr===""||mr===null||typeof mr>"u")return gr.plainObjects?Object.create(null):{};for(var vr=typeof mr=="string"?parseValues(mr,gr):mr,xr=gr.plainObjects?Object.create(null):{},Er=Object.keys(vr),Cr=0;Cr<Er.length;++Cr){var wr=Er[Cr],Rr=parseKeys(wr,vr[wr],gr,typeof mr=="string");xr=utils$2.merge(xr,Rr,gr)}return gr.allowSparse===!0?xr:utils$2.compact(xr)},stringify$1=stringify_1,parse$2=parse$3,formats=formats$3,lib$1={formats,parse:parse$2,stringify:stringify$1};const qs__default=getDefaultExportFromCjs$1(lib$1);function baseSlice$2(mr,hr,gr){var vr=-1,xr=mr.length;hr<0&&(hr=-hr>xr?0:xr+hr),gr=gr>xr?xr:gr,gr<0&&(gr+=xr),xr=hr>gr?0:gr-hr>>>0,hr>>>=0;for(var Er=Array(xr);++vr<xr;)Er[vr]=mr[vr+hr];return Er}var _baseSlice=baseSlice$2,baseSlice$1=_baseSlice;function castSlice$1(mr,hr,gr){var vr=mr.length;return gr=gr===void 0?vr:gr,!hr&&gr>=vr?mr:baseSlice$1(mr,hr,gr)}var _castSlice=castSlice$1;function baseFindIndex$1(mr,hr,gr,vr){for(var xr=mr.length,Er=gr+(vr?1:-1);vr?Er--:++Er<xr;)if(hr(mr[Er],Er,mr))return Er;return-1}var _baseFindIndex=baseFindIndex$1;function baseIsNaN$1(mr){return mr!==mr}var _baseIsNaN=baseIsNaN$1;function strictIndexOf$1(mr,hr,gr){for(var vr=gr-1,xr=mr.length;++vr<xr;)if(mr[vr]===hr)return vr;return-1}var _strictIndexOf=strictIndexOf$1,baseFindIndex=_baseFindIndex,baseIsNaN=_baseIsNaN,strictIndexOf=_strictIndexOf;function baseIndexOf$1(mr,hr,gr){return hr===hr?strictIndexOf(mr,hr,gr):baseFindIndex(mr,baseIsNaN,gr)}var _baseIndexOf=baseIndexOf$1;function asciiToArray$1(mr){return mr.split("")}var _asciiToArray=asciiToArray$1,rsAstralRange$2="\\ud800-\\udfff",rsComboMarksRange$4="\\u0300-\\u036f",reComboHalfMarksRange$3="\\ufe20-\\ufe2f",rsComboSymbolsRange$4="\\u20d0-\\u20ff",rsComboRange$3=rsComboMarksRange$4+reComboHalfMarksRange$3+rsComboSymbolsRange$4,rsVarRange$2="\\ufe0e\\ufe0f",rsZWJ$2="\\u200d",reHasUnicode=RegExp("["+rsZWJ$2+rsAstralRange$2+rsComboRange$3+rsVarRange$2+"]");function hasUnicode$2(mr){return reHasUnicode.test(mr)}var _hasUnicode=hasUnicode$2,rsAstralRange$1="\\ud800-\\udfff",rsComboMarksRange$3="\\u0300-\\u036f",reComboHalfMarksRange$2="\\ufe20-\\ufe2f",rsComboSymbolsRange$3="\\u20d0-\\u20ff",rsComboRange$2=rsComboMarksRange$3+reComboHalfMarksRange$2+rsComboSymbolsRange$3,rsVarRange$1="\\ufe0e\\ufe0f",rsAstral="["+rsAstralRange$1+"]",rsCombo$3="["+rsComboRange$2+"]",rsFitz$1="\\ud83c[\\udffb-\\udfff]",rsModifier$1="(?:"+rsCombo$3+"|"+rsFitz$1+")",rsNonAstral$1="[^"+rsAstralRange$1+"]",rsRegional$1="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair$1="[\\ud800-\\udbff][\\udc00-\\udfff]",rsZWJ$1="\\u200d",reOptMod$1=rsModifier$1+"?",rsOptVar$1="["+rsVarRange$1+"]?",rsOptJoin$1="(?:"+rsZWJ$1+"(?:"+[rsNonAstral$1,rsRegional$1,rsSurrPair$1].join("|")+")"+rsOptVar$1+reOptMod$1+")*",rsSeq$1=rsOptVar$1+reOptMod$1+rsOptJoin$1,rsSymbol="(?:"+[rsNonAstral$1+rsCombo$3+"?",rsCombo$3,rsRegional$1,rsSurrPair$1,rsAstral].join("|")+")",reUnicode=RegExp(rsFitz$1+"(?="+rsFitz$1+")|"+rsSymbol+rsSeq$1,"g");function unicodeToArray$1(mr){return mr.match(reUnicode)||[]}var _unicodeToArray=unicodeToArray$1,asciiToArray=_asciiToArray,hasUnicode$1=_hasUnicode,unicodeToArray=_unicodeToArray;function stringToArray$1(mr){return hasUnicode$1(mr)?unicodeToArray(mr):asciiToArray(mr)}var _stringToArray=stringToArray$1,reWhitespace=/\s/;function trimmedEndIndex$1(mr){for(var hr=mr.length;hr--&&reWhitespace.test(mr.charAt(hr)););return hr}var _trimmedEndIndex=trimmedEndIndex$1;function n$2(mr){for(var hr=arguments.length,gr=Array(hr>1?hr-1:0),vr=1;vr<hr;vr++)gr[vr-1]=arguments[vr];throw Error("[Immer] minified error nr: "+mr+(gr.length?" "+gr.map(function(xr){return"'"+xr+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function r(mr){return!!mr&&!!mr[Q$5]}function t$1(mr){var hr;return!!mr&&(function(gr){if(!gr||typeof gr!="object")return!1;var vr=Object.getPrototypeOf(gr);if(vr===null)return!0;var xr=Object.hasOwnProperty.call(vr,"constructor")&&vr.constructor;return xr===Object||typeof xr=="function"&&Function.toString.call(xr)===Z$3}(mr)||Array.isArray(mr)||!!mr[L$1]||!!(!((hr=mr.constructor)===null||hr===void 0)&&hr[L$1])||s(mr)||v$3(mr))}function e$1(mr){return r(mr)||n$2(23,mr),mr[Q$5].t}function i$3(mr,hr,gr){gr===void 0&&(gr=!1),o$1(mr)===0?(gr?Object.keys:nn)(mr).forEach(function(vr){gr&&typeof vr=="symbol"||hr(vr,mr[vr],mr)}):mr.forEach(function(vr,xr){return hr(xr,vr,mr)})}function o$1(mr){var hr=mr[Q$5];return hr?hr.i>3?hr.i-4:hr.i:Array.isArray(mr)?1:s(mr)?2:v$3(mr)?3:0}function u$3(mr,hr){return o$1(mr)===2?mr.has(hr):Object.prototype.hasOwnProperty.call(mr,hr)}function a$2(mr,hr){return o$1(mr)===2?mr.get(hr):mr[hr]}function f$2(mr,hr,gr){var vr=o$1(mr);vr===2?mr.set(hr,gr):vr===3?mr.add(gr):mr[hr]=gr}function c$3(mr,hr){return mr===hr?mr!==0||1/mr==1/hr:mr!=mr&&hr!=hr}function s(mr){return X$5&&mr instanceof Map}function v$3(mr){return q$4&&mr instanceof Set}function p$3(mr){return mr.o||mr.t}function l$2(mr){if(Array.isArray(mr))return Array.prototype.slice.call(mr);var hr=rn(mr);delete hr[Q$5];for(var gr=nn(hr),vr=0;vr<gr.length;vr++){var xr=gr[vr],Er=hr[xr];Er.writable===!1&&(Er.writable=!0,Er.configurable=!0),(Er.get||Er.set)&&(hr[xr]={configurable:!0,writable:!0,enumerable:Er.enumerable,value:mr[xr]})}return Object.create(Object.getPrototypeOf(mr),hr)}function d$3(mr,hr){return hr===void 0&&(hr=!1),y$2(mr)||r(mr)||!t$1(mr)||(o$1(mr)>1&&(mr.set=mr.add=mr.clear=mr.delete=h$4),Object.freeze(mr),hr&&i$3(mr,function(gr,vr){return d$3(vr,!0)},!0)),mr}function h$4(){n$2(2)}function y$2(mr){return mr==null||typeof mr!="object"||Object.isFrozen(mr)}function b$2(mr){var hr=tn[mr];return hr||n$2(18,mr),hr}function m$2(mr,hr){tn[mr]||(tn[mr]=hr)}function _$2(){return U$4}function j$3(mr,hr){hr&&(b$2("Patches"),mr.u=[],mr.s=[],mr.v=hr)}function g$2(mr){O$2(mr),mr.p.forEach(S$2),mr.p=null}function O$2(mr){mr===U$4&&(U$4=mr.l)}function w$3(mr){return U$4={p:[],l:U$4,h:mr,m:!0,_:0}}function S$2(mr){var hr=mr[Q$5];hr.i===0||hr.i===1?hr.j():hr.g=!0}function P$1(mr,hr){hr._=hr.p.length;var gr=hr.p[0],vr=mr!==void 0&&mr!==gr;return hr.h.O||b$2("ES5").S(hr,mr,vr),vr?(gr[Q$5].P&&(g$2(hr),n$2(4)),t$1(mr)&&(mr=M$3(hr,mr),hr.l||x$1(hr,mr)),hr.u&&b$2("Patches").M(gr[Q$5].t,mr,hr.u,hr.s)):mr=M$3(hr,gr,[]),g$2(hr),hr.u&&hr.v(hr.u,hr.s),mr!==H$4?mr:void 0}function M$3(mr,hr,gr){if(y$2(hr))return hr;var vr=hr[Q$5];if(!vr)return i$3(hr,function(wr,Rr){return A$3(mr,vr,hr,wr,Rr,gr)},!0),hr;if(vr.A!==mr)return hr;if(!vr.P)return x$1(mr,vr.t,!0),vr.t;if(!vr.I){vr.I=!0,vr.A._--;var xr=vr.i===4||vr.i===5?vr.o=l$2(vr.k):vr.o,Er=xr,Cr=!1;vr.i===3&&(Er=new Set(xr),xr.clear(),Cr=!0),i$3(Er,function(wr,Rr){return A$3(mr,vr,xr,wr,Rr,gr,Cr)}),x$1(mr,xr,!1),gr&&mr.u&&b$2("Patches").N(vr,gr,mr.u,mr.s)}return vr.o}function A$3(mr,hr,gr,vr,xr,Er,Cr){if(r(xr)){var wr=M$3(mr,xr,Er&&hr&&hr.i!==3&&!u$3(hr.R,vr)?Er.concat(vr):void 0);if(f$2(gr,vr,wr),!r(wr))return;mr.m=!1}else Cr&&gr.add(xr);if(t$1(xr)&&!y$2(xr)){if(!mr.h.D&&mr._<1)return;M$3(mr,xr),hr&&hr.A.l||x$1(mr,xr)}}function x$1(mr,hr,gr){gr===void 0&&(gr=!1),!mr.l&&mr.h.D&&mr.m&&d$3(hr,gr)}function z$2(mr,hr){var gr=mr[Q$5];return(gr?p$3(gr):mr)[hr]}function I$3(mr,hr){if(hr in mr)for(var gr=Object.getPrototypeOf(mr);gr;){var vr=Object.getOwnPropertyDescriptor(gr,hr);if(vr)return vr;gr=Object.getPrototypeOf(gr)}}function k$2(mr){mr.P||(mr.P=!0,mr.l&&k$2(mr.l))}function E$5(mr){mr.o||(mr.o=l$2(mr.t))}function N$1(mr,hr,gr){var vr=s(hr)?b$2("MapSet").F(hr,gr):v$3(hr)?b$2("MapSet").T(hr,gr):mr.O?function(xr,Er){var Cr=Array.isArray(xr),wr={i:Cr?1:0,A:Er?Er.A:_$2(),P:!1,I:!1,R:{},l:Er,t:xr,k:null,o:null,j:null,C:!1},Rr=wr,kr=en;Cr&&(Rr=[wr],kr=on);var Dr=Proxy.revocable(Rr,kr),Br=Dr.revoke,Hr=Dr.proxy;return wr.k=Hr,wr.j=Br,Hr}(hr,gr):b$2("ES5").J(hr,gr);return(gr?gr.A:_$2()).p.push(vr),vr}function R$3(mr){return r(mr)||n$2(22,mr),function hr(gr){if(!t$1(gr))return gr;var vr,xr=gr[Q$5],Er=o$1(gr);if(xr){if(!xr.P&&(xr.i<4||!b$2("ES5").K(xr)))return xr.t;xr.I=!0,vr=D$3(gr,Er),xr.I=!1}else vr=D$3(gr,Er);return i$3(vr,function(Cr,wr){xr&&a$2(xr.t,Cr)===wr||f$2(vr,Cr,hr(wr))}),Er===3?new Set(vr):vr}(mr)}function D$3(mr,hr){switch(hr){case 2:return new Map(mr);case 3:return Array.from(mr)}return l$2(mr)}function F$3(){function mr(Er,Cr){var wr=xr[Er];return wr?wr.enumerable=Cr:xr[Er]=wr={configurable:!0,enumerable:Cr,get:function(){var Rr=this[Q$5];return en.get(Rr,Er)},set:function(Rr){var kr=this[Q$5];en.set(kr,Er,Rr)}},wr}function hr(Er){for(var Cr=Er.length-1;Cr>=0;Cr--){var wr=Er[Cr][Q$5];if(!wr.P)switch(wr.i){case 5:vr(wr)&&k$2(wr);break;case 4:gr(wr)&&k$2(wr)}}}function gr(Er){for(var Cr=Er.t,wr=Er.k,Rr=nn(wr),kr=Rr.length-1;kr>=0;kr--){var Dr=Rr[kr];if(Dr!==Q$5){var Br=Cr[Dr];if(Br===void 0&&!u$3(Cr,Dr))return!0;var Hr=wr[Dr],Gr=Hr&&Hr[Q$5];if(Gr?Gr.t!==Br:!c$3(Hr,Br))return!0}}var qr=!!Cr[Q$5];return Rr.length!==nn(Cr).length+(qr?0:1)}function vr(Er){var Cr=Er.k;if(Cr.length!==Er.t.length)return!0;var wr=Object.getOwnPropertyDescriptor(Cr,Cr.length-1);if(wr&&!wr.get)return!0;for(var Rr=0;Rr<Cr.length;Rr++)if(!Cr.hasOwnProperty(Rr))return!0;return!1}var xr={};m$2("ES5",{J:function(Er,Cr){var wr=Array.isArray(Er),Rr=function(Dr,Br){if(Dr){for(var Hr=Array(Br.length),Gr=0;Gr<Br.length;Gr++)Object.defineProperty(Hr,""+Gr,mr(Gr,!0));return Hr}var qr=rn(Br);delete qr[Q$5];for(var zr=nn(qr),Qr=0;Qr<zr.length;Qr++){var sn=zr[Qr];qr[sn]=mr(sn,Dr||!!qr[sn].enumerable)}return Object.create(Object.getPrototypeOf(Br),qr)}(wr,Er),kr={i:wr?5:4,A:Cr?Cr.A:_$2(),P:!1,I:!1,R:{},l:Cr,t:Er,k:Rr,o:null,g:!1,C:!1};return Object.defineProperty(Rr,Q$5,{value:kr,writable:!0}),Rr},S:function(Er,Cr,wr){wr?r(Cr)&&Cr[Q$5].A===Er&&hr(Er.p):(Er.u&&function Rr(kr){if(kr&&typeof kr=="object"){var Dr=kr[Q$5];if(Dr){var Br=Dr.t,Hr=Dr.k,Gr=Dr.R,qr=Dr.i;if(qr===4)i$3(Hr,function(vn){vn!==Q$5&&(Br[vn]!==void 0||u$3(Br,vn)?Gr[vn]||Rr(Hr[vn]):(Gr[vn]=!0,k$2(Dr)))}),i$3(Br,function(vn){Hr[vn]!==void 0||u$3(Hr,vn)||(Gr[vn]=!1,k$2(Dr))});else if(qr===5){if(vr(Dr)&&(k$2(Dr),Gr.length=!0),Hr.length<Br.length)for(var zr=Hr.length;zr<Br.length;zr++)Gr[zr]=!1;else for(var Qr=Br.length;Qr<Hr.length;Qr++)Gr[Qr]=!0;for(var sn=Math.min(Hr.length,Br.length),hn=0;hn<sn;hn++)Hr.hasOwnProperty(hn)||(Gr[hn]=!0),Gr[hn]===void 0&&Rr(Hr[hn])}}}}(Er.p[0]),hr(Er.p))},K:function(Er){return Er.i===4?gr(Er):vr(Er)}})}function T$2(){function mr(vr){if(!t$1(vr))return vr;if(Array.isArray(vr))return vr.map(mr);if(s(vr))return new Map(Array.from(vr.entries()).map(function(Cr){return[Cr[0],mr(Cr[1])]}));if(v$3(vr))return new Set(Array.from(vr).map(mr));var xr=Object.create(Object.getPrototypeOf(vr));for(var Er in vr)xr[Er]=mr(vr[Er]);return u$3(vr,L$1)&&(xr[L$1]=vr[L$1]),xr}function hr(vr){return r(vr)?mr(vr):vr}var gr="add";m$2("Patches",{$:function(vr,xr){return xr.forEach(function(Er){for(var Cr=Er.path,wr=Er.op,Rr=vr,kr=0;kr<Cr.length-1;kr++){var Dr=o$1(Rr),Br=Cr[kr];typeof Br!="string"&&typeof Br!="number"&&(Br=""+Br),Dr!==0&&Dr!==1||Br!=="__proto__"&&Br!=="constructor"||n$2(24),typeof Rr=="function"&&Br==="prototype"&&n$2(24),typeof(Rr=a$2(Rr,Br))!="object"&&n$2(15,Cr.join("/"))}var Hr=o$1(Rr),Gr=mr(Er.value),qr=Cr[Cr.length-1];switch(wr){case"replace":switch(Hr){case 2:return Rr.set(qr,Gr);case 3:n$2(16);default:return Rr[qr]=Gr}case gr:switch(Hr){case 1:return qr==="-"?Rr.push(Gr):Rr.splice(qr,0,Gr);case 2:return Rr.set(qr,Gr);case 3:return Rr.add(Gr);default:return Rr[qr]=Gr}case"remove":switch(Hr){case 1:return Rr.splice(qr,1);case 2:return Rr.delete(qr);case 3:return Rr.delete(Er.value);default:return delete Rr[qr]}default:n$2(17,wr)}}),vr},N:function(vr,xr,Er,Cr){switch(vr.i){case 0:case 4:case 2:return function(wr,Rr,kr,Dr){var Br=wr.t,Hr=wr.o;i$3(wr.R,function(Gr,qr){var zr=a$2(Br,Gr),Qr=a$2(Hr,Gr),sn=qr?u$3(Br,Gr)?"replace":gr:"remove";if(zr!==Qr||sn!=="replace"){var hn=Rr.concat(Gr);kr.push(sn==="remove"?{op:sn,path:hn}:{op:sn,path:hn,value:Qr}),Dr.push(sn===gr?{op:"remove",path:hn}:sn==="remove"?{op:gr,path:hn,value:hr(zr)}:{op:"replace",path:hn,value:hr(zr)})}})}(vr,xr,Er,Cr);case 5:case 1:return function(wr,Rr,kr,Dr){var Br=wr.t,Hr=wr.R,Gr=wr.o;if(Gr.length<Br.length){var qr=[Gr,Br];Br=qr[0],Gr=qr[1];var zr=[Dr,kr];kr=zr[0],Dr=zr[1]}for(var Qr=0;Qr<Br.length;Qr++)if(Hr[Qr]&&Gr[Qr]!==Br[Qr]){var sn=Rr.concat([Qr]);kr.push({op:"replace",path:sn,value:hr(Gr[Qr])}),Dr.push({op:"replace",path:sn,value:hr(Br[Qr])})}for(var hn=Br.length;hn<Gr.length;hn++){var vn=Rr.concat([hn]);kr.push({op:gr,path:vn,value:hr(Gr[hn])})}Br.length<Gr.length&&Dr.push({op:"replace",path:Rr.concat(["length"]),value:Br.length})}(vr,xr,Er,Cr);case 3:return function(wr,Rr,kr,Dr){var Br=wr.t,Hr=wr.o,Gr=0;Br.forEach(function(qr){if(!Hr.has(qr)){var zr=Rr.concat([Gr]);kr.push({op:"remove",path:zr,value:qr}),Dr.unshift({op:gr,path:zr,value:qr})}Gr++}),Gr=0,Hr.forEach(function(qr){if(!Br.has(qr)){var zr=Rr.concat([Gr]);kr.push({op:gr,path:zr,value:qr}),Dr.unshift({op:"remove",path:zr,value:qr})}Gr++})}(vr,xr,Er,Cr)}},M:function(vr,xr,Er,Cr){Er.push({op:"replace",path:[],value:xr===H$4?void 0:xr}),Cr.push({op:"replace",path:[],value:vr})}})}var G$3,U$4,W$3=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",X$5=typeof Map<"u",q$4=typeof Set<"u",B$5=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",H$4=W$3?Symbol.for("immer-nothing"):((G$3={})["immer-nothing"]=!0,G$3),L$1=W$3?Symbol.for("immer-draftable"):"__$immer_draftable",Q$5=W$3?Symbol.for("immer-state"):"__$immer_state",Z$3=""+Object.prototype.constructor,nn=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(mr){return Object.getOwnPropertyNames(mr).concat(Object.getOwnPropertySymbols(mr))}:Object.getOwnPropertyNames,rn=Object.getOwnPropertyDescriptors||function(mr){var hr={};return nn(mr).forEach(function(gr){hr[gr]=Object.getOwnPropertyDescriptor(mr,gr)}),hr},tn={},en={get:function(mr,hr){if(hr===Q$5)return mr;var gr=p$3(mr);if(!u$3(gr,hr))return function(xr,Er,Cr){var wr,Rr=I$3(Er,Cr);return Rr?"value"in Rr?Rr.value:(wr=Rr.get)===null||wr===void 0?void 0:wr.call(xr.k):void 0}(mr,gr,hr);var vr=gr[hr];return mr.I||!t$1(vr)?vr:vr===z$2(mr.t,hr)?(E$5(mr),mr.o[hr]=N$1(mr.A.h,vr,mr)):vr},has:function(mr,hr){return hr in p$3(mr)},ownKeys:function(mr){return Reflect.ownKeys(p$3(mr))},set:function(mr,hr,gr){var vr=I$3(p$3(mr),hr);if(vr?.set)return vr.set.call(mr.k,gr),!0;if(!mr.P){var xr=z$2(p$3(mr),hr),Er=xr?.[Q$5];if(Er&&Er.t===gr)return mr.o[hr]=gr,mr.R[hr]=!1,!0;if(c$3(gr,xr)&&(gr!==void 0||u$3(mr.t,hr)))return!0;E$5(mr),k$2(mr)}return mr.o[hr]===gr&&(gr!==void 0||hr in mr.o)||Number.isNaN(gr)&&Number.isNaN(mr.o[hr])||(mr.o[hr]=gr,mr.R[hr]=!0),!0},deleteProperty:function(mr,hr){return z$2(mr.t,hr)!==void 0||hr in mr.t?(mr.R[hr]=!1,E$5(mr),k$2(mr)):delete mr.R[hr],mr.o&&delete mr.o[hr],!0},getOwnPropertyDescriptor:function(mr,hr){var gr=p$3(mr),vr=Reflect.getOwnPropertyDescriptor(gr,hr);return vr&&{writable:!0,configurable:mr.i!==1||hr!=="length",enumerable:vr.enumerable,value:gr[hr]}},defineProperty:function(){n$2(11)},getPrototypeOf:function(mr){return Object.getPrototypeOf(mr.t)},setPrototypeOf:function(){n$2(12)}},on={};i$3(en,function(mr,hr){on[mr]=function(){return arguments[0]=arguments[0][0],hr.apply(this,arguments)}}),on.deleteProperty=function(mr,hr){return on.set.call(this,mr,hr,void 0)},on.set=function(mr,hr,gr){return en.set.call(this,mr[0],hr,gr,mr[0])};var un=function(){function mr(gr){var vr=this;this.O=B$5,this.D=!0,this.produce=function(xr,Er,Cr){if(typeof xr=="function"&&typeof Er!="function"){var wr=Er;Er=xr;var Rr=vr;return function(zr){var Qr=this;zr===void 0&&(zr=wr);for(var sn=arguments.length,hn=Array(sn>1?sn-1:0),vn=1;vn<sn;vn++)hn[vn-1]=arguments[vn];return Rr.produce(zr,function(yn){var gn;return(gn=Er).call.apply(gn,[Qr,yn].concat(hn))})}}var kr;if(typeof Er!="function"&&n$2(6),Cr!==void 0&&typeof Cr!="function"&&n$2(7),t$1(xr)){var Dr=w$3(vr),Br=N$1(vr,xr,void 0),Hr=!0;try{kr=Er(Br),Hr=!1}finally{Hr?g$2(Dr):O$2(Dr)}return typeof Promise<"u"&&kr instanceof Promise?kr.then(function(zr){return j$3(Dr,Cr),P$1(zr,Dr)},function(zr){throw g$2(Dr),zr}):(j$3(Dr,Cr),P$1(kr,Dr))}if(!xr||typeof xr!="object"){if((kr=Er(xr))===void 0&&(kr=xr),kr===H$4&&(kr=void 0),vr.D&&d$3(kr,!0),Cr){var Gr=[],qr=[];b$2("Patches").M(xr,kr,Gr,qr),Cr(Gr,qr)}return kr}n$2(21,xr)},this.produceWithPatches=function(xr,Er){if(typeof xr=="function")return function(kr){for(var Dr=arguments.length,Br=Array(Dr>1?Dr-1:0),Hr=1;Hr<Dr;Hr++)Br[Hr-1]=arguments[Hr];return vr.produceWithPatches(kr,function(Gr){return xr.apply(void 0,[Gr].concat(Br))})};var Cr,wr,Rr=vr.produce(xr,Er,function(kr,Dr){Cr=kr,wr=Dr});return typeof Promise<"u"&&Rr instanceof Promise?Rr.then(function(kr){return[kr,Cr,wr]}):[Rr,Cr,wr]},typeof gr?.useProxies=="boolean"&&this.setUseProxies(gr.useProxies),typeof gr?.autoFreeze=="boolean"&&this.setAutoFreeze(gr.autoFreeze)}var hr=mr.prototype;return hr.createDraft=function(gr){t$1(gr)||n$2(8),r(gr)&&(gr=R$3(gr));var vr=w$3(this),xr=N$1(this,gr,void 0);return xr[Q$5].C=!0,O$2(vr),xr},hr.finishDraft=function(gr,vr){var xr=gr&&gr[Q$5],Er=xr.A;return j$3(Er,vr),P$1(void 0,Er)},hr.setAutoFreeze=function(gr){this.D=gr},hr.setUseProxies=function(gr){gr&&!B$5&&n$2(20),this.O=gr},hr.applyPatches=function(gr,vr){var xr;for(xr=vr.length-1;xr>=0;xr--){var Er=vr[xr];if(Er.path.length===0&&Er.op==="replace"){gr=Er.value;break}}xr>-1&&(vr=vr.slice(xr+1));var Cr=b$2("Patches").$;return r(gr)?Cr(gr,vr):this.produce(gr,function(wr){return Cr(wr,vr)})},mr}(),an=new un,fn=an.produce,cn=an.produceWithPatches.bind(an);an.setAutoFreeze.bind(an);an.setUseProxies.bind(an);var pn=an.applyPatches.bind(an),ln=an.createDraft.bind(an),dn=an.finishDraft.bind(an);function _typeof$1(mr){"@babel/helpers - typeof";return _typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(hr){return typeof hr}:function(hr){return hr&&typeof Symbol=="function"&&hr.constructor===Symbol&&hr!==Symbol.prototype?"symbol":typeof hr},_typeof$1(mr)}function toPrimitive(mr,hr){if(_typeof$1(mr)!="object"||!mr)return mr;var gr=mr[Symbol.toPrimitive];if(gr!==void 0){var vr=gr.call(mr,hr||"default");if(_typeof$1(vr)!="object")return vr;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hr==="string"?String:Number)(mr)}function toPropertyKey(mr){var hr=toPrimitive(mr,"string");return _typeof$1(hr)=="symbol"?hr:hr+""}function _defineProperty$2(mr,hr,gr){return(hr=toPropertyKey(hr))in mr?Object.defineProperty(mr,hr,{value:gr,enumerable:!0,configurable:!0,writable:!0}):mr[hr]=gr,mr}function ownKeys$2(mr,hr){var gr=Object.keys(mr);if(Object.getOwnPropertySymbols){var vr=Object.getOwnPropertySymbols(mr);hr&&(vr=vr.filter(function(xr){return Object.getOwnPropertyDescriptor(mr,xr).enumerable})),gr.push.apply(gr,vr)}return gr}function _objectSpread2$2(mr){for(var hr=1;hr<arguments.length;hr++){var gr=arguments[hr]!=null?arguments[hr]:{};hr%2?ownKeys$2(Object(gr),!0).forEach(function(vr){_defineProperty$2(mr,vr,gr[vr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(mr,Object.getOwnPropertyDescriptors(gr)):ownKeys$2(Object(gr)).forEach(function(vr){Object.defineProperty(mr,vr,Object.getOwnPropertyDescriptor(gr,vr))})}return mr}function formatProdErrorMessage(mr){return"Minified Redux error #"+mr+"; visit https://redux.js.org/Errors?code="+mr+" for the full message or use the non-minified dev environment for full errors. "}var randomString=function(){return Math.random().toString(36).substring(7).split("").join(".")},ActionTypes={INIT:"@@redux/INIT"+randomString(),REPLACE:"@@redux/REPLACE"+randomString(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+randomString()}};function assertReducerShape(mr){Object.keys(mr).forEach(function(hr){var gr=mr[hr],vr=gr(void 0,{type:ActionTypes.INIT});if(typeof vr>"u")throw new Error(formatProdErrorMessage(12));if(typeof gr(void 0,{type:ActionTypes.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(formatProdErrorMessage(13))})}function combineReducers(mr){for(var hr=Object.keys(mr),gr={},vr=0;vr<hr.length;vr++){var xr=hr[vr];typeof mr[xr]=="function"&&(gr[xr]=mr[xr])}var Er=Object.keys(gr),Cr;try{assertReducerShape(gr)}catch(wr){Cr=wr}return function(Rr,kr){if(Rr===void 0&&(Rr={}),Cr)throw Cr;for(var Dr=!1,Br={},Hr=0;Hr<Er.length;Hr++){var Gr=Er[Hr],qr=gr[Gr],zr=Rr[Gr],Qr=qr(zr,kr);if(typeof Qr>"u")throw kr&&kr.type,new Error(formatProdErrorMessage(14));Br[Gr]=Qr,Dr=Dr||Qr!==zr}return Dr=Dr||Er.length!==Object.keys(Rr).length,Dr?Br:Rr}}var NOT_FOUND="NOT_FOUND";function createSingletonCache(mr){var hr;return{get:function(vr){return hr&&mr(hr.key,vr)?hr.value:NOT_FOUND},put:function(vr,xr){hr={key:vr,value:xr}},getEntries:function(){return hr?[hr]:[]},clear:function(){hr=void 0}}}function createLruCache(mr,hr){var gr=[];function vr(wr){var Rr=gr.findIndex(function(Dr){return hr(wr,Dr.key)});if(Rr>-1){var kr=gr[Rr];return Rr>0&&(gr.splice(Rr,1),gr.unshift(kr)),kr.value}return NOT_FOUND}function xr(wr,Rr){vr(wr)===NOT_FOUND&&(gr.unshift({key:wr,value:Rr}),gr.length>mr&&gr.pop())}function Er(){return gr}function Cr(){gr=[]}return{get:vr,put:xr,getEntries:Er,clear:Cr}}var defaultEqualityCheck=function(hr,gr){return hr===gr};function createCacheKeyComparator(mr){return function(gr,vr){if(gr===null||vr===null||gr.length!==vr.length)return!1;for(var xr=gr.length,Er=0;Er<xr;Er++)if(!mr(gr[Er],vr[Er]))return!1;return!0}}function defaultMemoize(mr,hr){var gr=typeof hr=="object"?hr:{equalityCheck:hr},vr=gr.equalityCheck,xr=vr===void 0?defaultEqualityCheck:vr,Er=gr.maxSize,Cr=Er===void 0?1:Er,wr=gr.resultEqualityCheck,Rr=createCacheKeyComparator(xr),kr=Cr===1?createSingletonCache(Rr):createLruCache(Cr,Rr);function Dr(){var Br=kr.get(arguments);if(Br===NOT_FOUND){if(Br=mr.apply(null,arguments),wr){var Hr=kr.getEntries(),Gr=Hr.find(function(qr){return wr(qr.value,Br)});Gr&&(Br=Gr.value)}kr.put(arguments,Br)}return Br}return Dr.clearCache=function(){return kr.clear()},Dr}function getDependencies(mr){var hr=Array.isArray(mr[0])?mr[0]:mr;if(!hr.every(function(vr){return typeof vr=="function"})){var gr=hr.map(function(vr){return typeof vr=="function"?"function "+(vr.name||"unnamed")+"()":typeof vr}).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+gr+"]")}return hr}function createSelectorCreator(mr){for(var hr=arguments.length,gr=new Array(hr>1?hr-1:0),vr=1;vr<hr;vr++)gr[vr-1]=arguments[vr];var xr=function(){for(var Cr=arguments.length,wr=new Array(Cr),Rr=0;Rr<Cr;Rr++)wr[Rr]=arguments[Rr];var kr=0,Dr,Br={memoizeOptions:void 0},Hr=wr.pop();if(typeof Hr=="object"&&(Br=Hr,Hr=wr.pop()),typeof Hr!="function")throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof Hr+"]");var Gr=Br,qr=Gr.memoizeOptions,zr=qr===void 0?gr:qr,Qr=Array.isArray(zr)?zr:[zr],sn=getDependencies(wr),hn=mr.apply(void 0,[function(){return kr++,Hr.apply(null,arguments)}].concat(Qr)),vn=mr(function(){for(var gn=[],bn=sn.length,xn=0;xn<bn;xn++)gn.push(sn[xn].apply(null,arguments));return Dr=hn.apply(null,gn),Dr});return Object.assign(vn,{resultFunc:Hr,memoizedResultFunc:hn,dependencies:sn,lastResult:function(){return Dr},recomputations:function(){return kr},resetRecomputations:function(){return kr=0}}),vn};return xr}var createSelector=createSelectorCreator(defaultMemoize),__extends$1=function(){var mr=function(hr,gr){return mr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(vr,xr){vr.__proto__=xr}||function(vr,xr){for(var Er in xr)Object.prototype.hasOwnProperty.call(xr,Er)&&(vr[Er]=xr[Er])},mr(hr,gr)};return function(hr,gr){if(typeof gr!="function"&&gr!==null)throw new TypeError("Class extends value "+String(gr)+" is not a constructor or null");mr(hr,gr);function vr(){this.constructor=hr}hr.prototype=gr===null?Object.create(gr):(vr.prototype=gr.prototype,new vr)}}(),__generator$2=function(mr,hr){var gr={label:0,sent:function(){if(Er[0]&1)throw Er[1];return Er[1]},trys:[],ops:[]},vr,xr,Er,Cr;return Cr={next:wr(0),throw:wr(1),return:wr(2)},typeof Symbol=="function"&&(Cr[Symbol.iterator]=function(){return this}),Cr;function wr(kr){return function(Dr){return Rr([kr,Dr])}}function Rr(kr){if(vr)throw new TypeError("Generator is already executing.");for(;gr;)try{if(vr=1,xr&&(Er=kr[0]&2?xr.return:kr[0]?xr.throw||((Er=xr.return)&&Er.call(xr),0):xr.next)&&!(Er=Er.call(xr,kr[1])).done)return Er;switch(xr=0,Er&&(kr=[kr[0]&2,Er.value]),kr[0]){case 0:case 1:Er=kr;break;case 4:return gr.label++,{value:kr[1],done:!1};case 5:gr.label++,xr=kr[1],kr=[0];continue;case 7:kr=gr.ops.pop(),gr.trys.pop();continue;default:if(Er=gr.trys,!(Er=Er.length>0&&Er[Er.length-1])&&(kr[0]===6||kr[0]===2)){gr=0;continue}if(kr[0]===3&&(!Er||kr[1]>Er[0]&&kr[1]<Er[3])){gr.label=kr[1];break}if(kr[0]===6&&gr.label<Er[1]){gr.label=Er[1],Er=kr;break}if(Er&&gr.label<Er[2]){gr.label=Er[2],gr.ops.push(kr);break}Er[2]&&gr.ops.pop(),gr.trys.pop();continue}kr=hr.call(mr,gr)}catch(Dr){kr=[6,Dr],xr=0}finally{vr=Er=0}if(kr[0]&5)throw kr[1];return{value:kr[0]?kr[1]:void 0,done:!0}}},__spreadArray$3=function(mr,hr){for(var gr=0,vr=hr.length,xr=mr.length;gr<vr;gr++,xr++)mr[xr]=hr[gr];return mr},__defProp$3=Object.defineProperty,__defProps$3=Object.defineProperties,__getOwnPropDescs$3=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$3=Object.getOwnPropertySymbols,__hasOwnProp$3=Object.prototype.hasOwnProperty,__propIsEnum$3=Object.prototype.propertyIsEnumerable,__defNormalProp$3=function(mr,hr,gr){return hr in mr?__defProp$3(mr,hr,{enumerable:!0,configurable:!0,writable:!0,value:gr}):mr[hr]=gr},__spreadValues$3=function(mr,hr){for(var gr in hr||(hr={}))__hasOwnProp$3.call(hr,gr)&&__defNormalProp$3(mr,gr,hr[gr]);if(__getOwnPropSymbols$3)for(var vr=0,xr=__getOwnPropSymbols$3(hr);vr<xr.length;vr++){var gr=xr[vr];__propIsEnum$3.call(hr,gr)&&__defNormalProp$3(mr,gr,hr[gr])}return mr},__spreadProps$3=function(mr,hr){return __defProps$3(mr,__getOwnPropDescs$3(hr))},__async$2=function(mr,hr,gr){return new Promise(function(vr,xr){var Er=function(Rr){try{wr(gr.next(Rr))}catch(kr){xr(kr)}},Cr=function(Rr){try{wr(gr.throw(Rr))}catch(kr){xr(kr)}},wr=function(Rr){return Rr.done?vr(Rr.value):Promise.resolve(Rr.value).then(Er,Cr)};wr((gr=gr.apply(mr,hr)).next())})};function isPlainObject$7(mr){if(typeof mr!="object"||mr===null)return!1;var hr=Object.getPrototypeOf(mr);if(hr===null)return!0;for(var gr=hr;Object.getPrototypeOf(gr)!==null;)gr=Object.getPrototypeOf(gr);return hr===gr}var hasMatchFunction=function(mr){return mr&&typeof mr.match=="function"};function createAction$1(mr,hr){function gr(){for(var vr=[],xr=0;xr<arguments.length;xr++)vr[xr]=arguments[xr];if(hr){var Er=hr.apply(void 0,vr);if(!Er)throw new Error("prepareAction did not return an object");return __spreadValues$3(__spreadValues$3({type:mr,payload:Er.payload},"meta"in Er&&{meta:Er.meta}),"error"in Er&&{error:Er.error})}return{type:mr,payload:vr[0]}}return gr.toString=function(){return""+mr},gr.type=mr,gr.match=function(vr){return vr.type===mr},gr}(function(mr){__extends$1(hr,mr);function hr(){for(var gr=[],vr=0;vr<arguments.length;vr++)gr[vr]=arguments[vr];var xr=mr.apply(this,gr)||this;return Object.setPrototypeOf(xr,hr.prototype),xr}return Object.defineProperty(hr,Symbol.species,{get:function(){return hr},enumerable:!1,configurable:!0}),hr.prototype.concat=function(){for(var gr=[],vr=0;vr<arguments.length;vr++)gr[vr]=arguments[vr];return mr.prototype.concat.apply(this,gr)},hr.prototype.prepend=function(){for(var gr=[],vr=0;vr<arguments.length;vr++)gr[vr]=arguments[vr];return gr.length===1&&Array.isArray(gr[0])?new(hr.bind.apply(hr,__spreadArray$3([void 0],gr[0].concat(this)))):new(hr.bind.apply(hr,__spreadArray$3([void 0],gr.concat(this))))},hr})(Array);(function(mr){__extends$1(hr,mr);function hr(){for(var gr=[],vr=0;vr<arguments.length;vr++)gr[vr]=arguments[vr];var xr=mr.apply(this,gr)||this;return Object.setPrototypeOf(xr,hr.prototype),xr}return Object.defineProperty(hr,Symbol.species,{get:function(){return hr},enumerable:!1,configurable:!0}),hr.prototype.concat=function(){for(var gr=[],vr=0;vr<arguments.length;vr++)gr[vr]=arguments[vr];return mr.prototype.concat.apply(this,gr)},hr.prototype.prepend=function(){for(var gr=[],vr=0;vr<arguments.length;vr++)gr[vr]=arguments[vr];return gr.length===1&&Array.isArray(gr[0])?new(hr.bind.apply(hr,__spreadArray$3([void 0],gr[0].concat(this)))):new(hr.bind.apply(hr,__spreadArray$3([void 0],gr.concat(this))))},hr})(Array);function freezeDraftable$1(mr){return t$1(mr)?fn(mr,function(){}):mr}function executeReducerBuilderCallback$1(mr){var hr={},gr=[],vr,xr={addCase:function(Er,Cr){var wr=typeof Er=="string"?Er:Er.type;if(!wr)throw new Error("`builder.addCase` cannot be called with an empty action type");if(wr in hr)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return hr[wr]=Cr,xr},addMatcher:function(Er,Cr){return gr.push({matcher:Er,reducer:Cr}),xr},addDefaultCase:function(Er){return vr=Er,xr}};return mr(xr),[hr,gr,vr]}function isStateFunction$1(mr){return typeof mr=="function"}function createReducer$1(mr,hr,gr,vr){gr===void 0&&(gr=[]);var xr=typeof hr=="function"?executeReducerBuilderCallback$1(hr):[hr,gr,vr],Er=xr[0],Cr=xr[1],wr=xr[2],Rr;if(isStateFunction$1(mr))Rr=function(){return freezeDraftable$1(mr())};else{var kr=freezeDraftable$1(mr);Rr=function(){return kr}}function Dr(Br,Hr){Br===void 0&&(Br=Rr());var Gr=__spreadArray$3([Er[Hr.type]],Cr.filter(function(qr){var zr=qr.matcher;return zr(Hr)}).map(function(qr){var zr=qr.reducer;return zr}));return Gr.filter(function(qr){return!!qr}).length===0&&(Gr=[wr]),Gr.reduce(function(qr,zr){if(zr)if(r(qr)){var Qr=qr,sn=zr(Qr,Hr);return sn===void 0?qr:sn}else{if(t$1(qr))return fn(qr,function(hn){return zr(hn,Hr)});var sn=zr(qr,Hr);if(sn===void 0){if(qr===null)return qr;throw Error("A case reducer on a non-draftable value must not return undefined")}return sn}return qr},Br)}return Dr.getInitialState=Rr,Dr}function getType2$1(mr,hr){return mr+"/"+hr}function createSlice$1(mr){var hr=mr.name;if(!hr)throw new Error("`name` is a required option for createSlice");typeof process<"u";var gr=typeof mr.initialState=="function"?mr.initialState:freezeDraftable$1(mr.initialState),vr=mr.reducers||{},xr=Object.keys(vr),Er={},Cr={},wr={};xr.forEach(function(Dr){var Br=vr[Dr],Hr=getType2$1(hr,Dr),Gr,qr;"reducer"in Br?(Gr=Br.reducer,qr=Br.prepare):Gr=Br,Er[Dr]=Gr,Cr[Hr]=Gr,wr[Dr]=qr?createAction$1(Hr,qr):createAction$1(Hr)});function Rr(){var Dr=typeof mr.extraReducers=="function"?executeReducerBuilderCallback$1(mr.extraReducers):[mr.extraReducers],Br=Dr[0],Hr=Br===void 0?{}:Br,Gr=Dr[1],qr=Gr===void 0?[]:Gr,zr=Dr[2],Qr=zr===void 0?void 0:zr,sn=__spreadValues$3(__spreadValues$3({},Hr),Cr);return createReducer$1(gr,function(hn){for(var vn in sn)hn.addCase(vn,sn[vn]);for(var yn=0,gn=qr;yn<gn.length;yn++){var bn=gn[yn];hn.addMatcher(bn.matcher,bn.reducer)}Qr&&hn.addDefaultCase(Qr)})}var kr;return{name:hr,reducer:function(Dr,Br){return kr||(kr=Rr()),kr(Dr,Br)},actions:wr,caseReducers:Er,getInitialState:function(){return kr||(kr=Rr()),kr.getInitialState()}}}var urlAlphabet$1="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",nanoid$1=function(mr){mr===void 0&&(mr=21);for(var hr="",gr=mr;gr--;)hr+=urlAlphabet$1[Math.random()*64|0];return hr},commonProperties$1=["name","message","stack","code"],RejectWithValue$1=function(){function mr(hr,gr){this.payload=hr,this.meta=gr}return mr}(),FulfillWithMeta$1=function(){function mr(hr,gr){this.payload=hr,this.meta=gr}return mr}(),miniSerializeError$1=function(mr){if(typeof mr=="object"&&mr!==null){for(var hr={},gr=0,vr=commonProperties$1;gr<vr.length;gr++){var xr=vr[gr];typeof mr[xr]=="string"&&(hr[xr]=mr[xr])}return hr}return{message:String(mr)}},createAsyncThunk=function(){function mr(hr,gr,vr){var xr=createAction$1(hr+"/fulfilled",function(kr,Dr,Br,Hr){return{payload:kr,meta:__spreadProps$3(__spreadValues$3({},Hr||{}),{arg:Br,requestId:Dr,requestStatus:"fulfilled"})}}),Er=createAction$1(hr+"/pending",function(kr,Dr,Br){return{payload:void 0,meta:__spreadProps$3(__spreadValues$3({},Br||{}),{arg:Dr,requestId:kr,requestStatus:"pending"})}}),Cr=createAction$1(hr+"/rejected",function(kr,Dr,Br,Hr,Gr){return{payload:Hr,error:(vr&&vr.serializeError||miniSerializeError$1)(kr||"Rejected"),meta:__spreadProps$3(__spreadValues$3({},Gr||{}),{arg:Br,requestId:Dr,rejectedWithValue:!!Hr,requestStatus:"rejected",aborted:kr?.name==="AbortError",condition:kr?.name==="ConditionError"})}}),wr=typeof AbortController<"u"?AbortController:function(){function kr(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return kr.prototype.abort=function(){},kr}();function Rr(kr){return function(Dr,Br,Hr){var Gr=vr?.idGenerator?vr.idGenerator(kr):nanoid$1(),qr=new wr,zr;function Qr(hn){zr=hn,qr.abort()}var sn=function(){return __async$2(this,null,function(){var hn,vn,yn,gn,bn,xn,$n;return __generator$2(this,function(Sn){switch(Sn.label){case 0:return Sn.trys.push([0,4,,5]),gn=(hn=vr?.condition)==null?void 0:hn.call(vr,kr,{getState:Br,extra:Hr}),isThenable$2(gn)?[4,gn]:[3,2];case 1:gn=Sn.sent(),Sn.label=2;case 2:if(gn===!1||qr.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return bn=new Promise(function(Cn,Rn){return qr.signal.addEventListener("abort",function(){return Rn({name:"AbortError",message:zr||"Aborted"})})}),Dr(Er(Gr,kr,(vn=vr?.getPendingMeta)==null?void 0:vn.call(vr,{requestId:Gr,arg:kr},{getState:Br,extra:Hr}))),[4,Promise.race([bn,Promise.resolve(gr(kr,{dispatch:Dr,getState:Br,extra:Hr,requestId:Gr,signal:qr.signal,abort:Qr,rejectWithValue:function(Cn,Rn){return new RejectWithValue$1(Cn,Rn)},fulfillWithValue:function(Cn,Rn){return new FulfillWithMeta$1(Cn,Rn)}})).then(function(Cn){if(Cn instanceof RejectWithValue$1)throw Cn;return Cn instanceof FulfillWithMeta$1?xr(Cn.payload,Gr,kr,Cn.meta):xr(Cn,Gr,kr)})])];case 3:return yn=Sn.sent(),[3,5];case 4:return xn=Sn.sent(),yn=xn instanceof RejectWithValue$1?Cr(null,Gr,kr,xn.payload,xn.meta):Cr(xn,Gr,kr),[3,5];case 5:return $n=vr&&!vr.dispatchConditionRejection&&Cr.match(yn)&&yn.meta.condition,$n||Dr(yn),[2,yn]}})})}();return Object.assign(sn,{abort:Qr,requestId:Gr,arg:kr,unwrap:function(){return sn.then(unwrapResult$1)}})}}return Object.assign(Rr,{pending:Er,rejected:Cr,fulfilled:xr,typePrefix:hr})}return mr.withTypes=function(){return mr},mr}();function unwrapResult$1(mr){if(mr.meta&&mr.meta.rejectedWithValue)throw mr.payload;if(mr.error)throw mr.error;return mr.payload}function isThenable$2(mr){return mr!==null&&typeof mr=="object"&&typeof mr.then=="function"}var matches=function(mr,hr){return hasMatchFunction(mr)?mr.match(hr):mr(hr)};function isAnyOf(){for(var mr=[],hr=0;hr<arguments.length;hr++)mr[hr]=arguments[hr];return function(gr){return mr.some(function(vr){return matches(vr,gr)})}}function isAllOf(){for(var mr=[],hr=0;hr<arguments.length;hr++)mr[hr]=arguments[hr];return function(gr){return mr.every(function(vr){return matches(vr,gr)})}}function hasExpectedRequestMetadata(mr,hr){if(!mr||!mr.meta)return!1;var gr=typeof mr.meta.requestId=="string",vr=hr.indexOf(mr.meta.requestStatus)>-1;return gr&&vr}function isAsyncThunkArray(mr){return typeof mr[0]=="function"&&"pending"in mr[0]&&"fulfilled"in mr[0]&&"rejected"in mr[0]}function isPending(){for(var mr=[],hr=0;hr<arguments.length;hr++)mr[hr]=arguments[hr];return mr.length===0?function(gr){return hasExpectedRequestMetadata(gr,["pending"])}:isAsyncThunkArray(mr)?function(gr){var vr=mr.map(function(Er){return Er.pending}),xr=isAnyOf.apply(void 0,vr);return xr(gr)}:isPending()(mr[0])}function isRejected(){for(var mr=[],hr=0;hr<arguments.length;hr++)mr[hr]=arguments[hr];return mr.length===0?function(gr){return hasExpectedRequestMetadata(gr,["rejected"])}:isAsyncThunkArray(mr)?function(gr){var vr=mr.map(function(Er){return Er.rejected}),xr=isAnyOf.apply(void 0,vr);return xr(gr)}:isRejected()(mr[0])}function isRejectedWithValue(){for(var mr=[],hr=0;hr<arguments.length;hr++)mr[hr]=arguments[hr];var gr=function(vr){return vr&&vr.meta&&vr.meta.rejectedWithValue};return mr.length===0?function(vr){var xr=isAllOf(isRejected.apply(void 0,mr),gr);return xr(vr)}:isAsyncThunkArray(mr)?function(vr){var xr=isAllOf(isRejected.apply(void 0,mr),gr);return xr(vr)}:isRejectedWithValue()(mr[0])}function isFulfilled(){for(var mr=[],hr=0;hr<arguments.length;hr++)mr[hr]=arguments[hr];return mr.length===0?function(gr){return hasExpectedRequestMetadata(gr,["fulfilled"])}:isAsyncThunkArray(mr)?function(gr){var vr=mr.map(function(Er){return Er.fulfilled}),xr=isAnyOf.apply(void 0,vr);return xr(gr)}:isFulfilled()(mr[0])}function isAsyncThunkAction(){for(var mr=[],hr=0;hr<arguments.length;hr++)mr[hr]=arguments[hr];return mr.length===0?function(gr){return hasExpectedRequestMetadata(gr,["pending","fulfilled","rejected"])}:isAsyncThunkArray(mr)?function(gr){for(var vr=[],xr=0,Er=mr;xr<Er.length;xr++){var Cr=Er[xr];vr.push(Cr.pending,Cr.rejected,Cr.fulfilled)}var wr=isAnyOf.apply(void 0,vr);return wr(gr)}:isAsyncThunkAction()(mr[0])}var alm$1="listenerMiddleware";createAction$1(alm$1+"/add");createAction$1(alm$1+"/removeAll");createAction$1(alm$1+"/remove");var SHOULD_AUTOBATCH="RTK_autoBatch",prepareAutoBatched=function(){return function(mr){var hr;return{payload:mr,meta:(hr={},hr[SHOULD_AUTOBATCH]=!0,hr)}}},promise$2;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);F$3();var __generator$1=function(mr,hr){var gr={label:0,sent:function(){if(Er[0]&1)throw Er[1];return Er[1]},trys:[],ops:[]},vr,xr,Er,Cr;return Cr={next:wr(0),throw:wr(1),return:wr(2)},typeof Symbol=="function"&&(Cr[Symbol.iterator]=function(){return this}),Cr;function wr(kr){return function(Dr){return Rr([kr,Dr])}}function Rr(kr){if(vr)throw new TypeError("Generator is already executing.");for(;gr;)try{if(vr=1,xr&&(Er=kr[0]&2?xr.return:kr[0]?xr.throw||((Er=xr.return)&&Er.call(xr),0):xr.next)&&!(Er=Er.call(xr,kr[1])).done)return Er;switch(xr=0,Er&&(kr=[kr[0]&2,Er.value]),kr[0]){case 0:case 1:Er=kr;break;case 4:return gr.label++,{value:kr[1],done:!1};case 5:gr.label++,xr=kr[1],kr=[0];continue;case 7:kr=gr.ops.pop(),gr.trys.pop();continue;default:if(Er=gr.trys,!(Er=Er.length>0&&Er[Er.length-1])&&(kr[0]===6||kr[0]===2)){gr=0;continue}if(kr[0]===3&&(!Er||kr[1]>Er[0]&&kr[1]<Er[3])){gr.label=kr[1];break}if(kr[0]===6&&gr.label<Er[1]){gr.label=Er[1],Er=kr;break}if(Er&&gr.label<Er[2]){gr.label=Er[2],gr.ops.push(kr);break}Er[2]&&gr.ops.pop(),gr.trys.pop();continue}kr=hr.call(mr,gr)}catch(Dr){kr=[6,Dr],xr=0}finally{vr=Er=0}if(kr[0]&5)throw kr[1];return{value:kr[0]?kr[1]:void 0,done:!0}}},__spreadArray$2=function(mr,hr){for(var gr=0,vr=hr.length,xr=mr.length;gr<vr;gr++,xr++)mr[xr]=hr[gr];return mr},__defProp$2=Object.defineProperty,__defProps$2=Object.defineProperties,__getOwnPropDescs$2=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$2=Object.getOwnPropertySymbols,__hasOwnProp$2=Object.prototype.hasOwnProperty,__propIsEnum$2=Object.prototype.propertyIsEnumerable,__defNormalProp$2=function(mr,hr,gr){return hr in mr?__defProp$2(mr,hr,{enumerable:!0,configurable:!0,writable:!0,value:gr}):mr[hr]=gr},__spreadValues$2=function(mr,hr){for(var gr in hr||(hr={}))__hasOwnProp$2.call(hr,gr)&&__defNormalProp$2(mr,gr,hr[gr]);if(__getOwnPropSymbols$2)for(var vr=0,xr=__getOwnPropSymbols$2(hr);vr<xr.length;vr++){var gr=xr[vr];__propIsEnum$2.call(hr,gr)&&__defNormalProp$2(mr,gr,hr[gr])}return mr},__spreadProps$2=function(mr,hr){return __defProps$2(mr,__getOwnPropDescs$2(hr))},__async$1=function(mr,hr,gr){return new Promise(function(vr,xr){var Er=function(Rr){try{wr(gr.next(Rr))}catch(kr){xr(kr)}},Cr=function(Rr){try{wr(gr.throw(Rr))}catch(kr){xr(kr)}},wr=function(Rr){return Rr.done?vr(Rr.value):Promise.resolve(Rr.value).then(Er,Cr)};wr((gr=gr.apply(mr,hr)).next())})},QueryStatus;(function(mr){mr.uninitialized="uninitialized",mr.pending="pending",mr.fulfilled="fulfilled",mr.rejected="rejected"})(QueryStatus||(QueryStatus={}));function getRequestStatusFlags(mr){return{status:mr,isUninitialized:mr===QueryStatus.uninitialized,isLoading:mr===QueryStatus.pending,isSuccess:mr===QueryStatus.fulfilled,isError:mr===QueryStatus.rejected}}var flatten=function(mr){return[].concat.apply([],mr)};function isOnline(){return typeof navigator>"u"||navigator.onLine===void 0?!0:navigator.onLine}function isDocumentVisible(){return typeof document>"u"?!0:document.visibilityState!=="hidden"}var isPlainObject$6=isPlainObject$7;function copyWithStructuralSharing(mr,hr){if(mr===hr||!(isPlainObject$6(mr)&&isPlainObject$6(hr)||Array.isArray(mr)&&Array.isArray(hr)))return hr;for(var gr=Object.keys(hr),vr=Object.keys(mr),xr=gr.length===vr.length,Er=Array.isArray(hr)?[]:{},Cr=0,wr=gr;Cr<wr.length;Cr++){var Rr=wr[Cr];Er[Rr]=copyWithStructuralSharing(mr[Rr],hr[Rr]),xr&&(xr=mr[Rr]===Er[Rr])}return xr?mr:Er}var HandledError=function(){function mr(hr,gr){gr===void 0&&(gr=void 0),this.value=hr,this.meta=gr}return mr}(),onFocus=createAction$1("__rtkq/focused"),onFocusLost=createAction$1("__rtkq/unfocused"),onOnline=createAction$1("__rtkq/online"),onOffline=createAction$1("__rtkq/offline"),DefinitionType$1;(function(mr){mr.query="query",mr.mutation="mutation"})(DefinitionType$1||(DefinitionType$1={}));function isQueryDefinition$1(mr){return mr.type===DefinitionType$1.query}function isMutationDefinition$1(mr){return mr.type===DefinitionType$1.mutation}function calculateProvidedBy(mr,hr,gr,vr,xr,Er){return isFunction$4(mr)?mr(hr,gr,vr,xr).map(expandTagDescription).map(Er):Array.isArray(mr)?mr.map(expandTagDescription).map(Er):[]}function isFunction$4(mr){return typeof mr=="function"}function expandTagDescription(mr){return typeof mr=="string"?{type:mr}:mr}function isNotNullish(mr){return mr!=null}var forceQueryFnSymbol=Symbol("forceQueryFn"),isUpsertQuery=function(mr){return typeof mr[forceQueryFnSymbol]=="function"};function buildInitiate(mr){var hr=mr.serializeQueryArgs,gr=mr.queryThunk,vr=mr.mutationThunk,xr=mr.api,Er=mr.context,Cr=new Map,wr=new Map,Rr=xr.internalActions,kr=Rr.unsubscribeQueryResult,Dr=Rr.removeMutationResult,Br=Rr.updateSubscriptionOptions;return{buildInitiateQuery:hn,buildInitiateMutation:vn,getRunningQueryThunk:qr,getRunningMutationThunk:zr,getRunningQueriesThunk:Qr,getRunningMutationsThunk:sn,getRunningOperationPromises:Gr,removalWarning:Hr};function Hr(){throw new Error(`This method had to be removed due to a conceptual bug in RTK.
       Please see https://github.com/reduxjs/redux-toolkit/pull/2481 for details.
       See https://redux-toolkit.js.org/rtk-query/usage/server-side-rendering for new guidance on SSR.`)}function Gr(){typeof process<"u";var yn=function(gn){return Array.from(gn.values()).flatMap(function(bn){return bn?Object.values(bn):[]})};return __spreadArray$2(__spreadArray$2([],yn(Cr)),yn(wr)).filter(isNotNullish)}function qr(yn,gn){return function(bn){var xn,$n=Er.endpointDefinitions[yn],Sn=hr({queryArgs:gn,endpointDefinition:$n,endpointName:yn});return(xn=Cr.get(bn))==null?void 0:xn[Sn]}}function zr(yn,gn){return function(bn){var xn;return(xn=wr.get(bn))==null?void 0:xn[gn]}}function Qr(){return function(yn){return Object.values(Cr.get(yn)||{}).filter(isNotNullish)}}function sn(){return function(yn){return Object.values(wr.get(yn)||{}).filter(isNotNullish)}}function hn(yn,gn){var bn=function(xn,$n){var Sn=$n===void 0?{}:$n,Cn=Sn.subscribe,Rn=Cn===void 0?!0:Cn,Bn=Sn.forceRefetch,Fn=Sn.subscriptionOptions,Hn=forceQueryFnSymbol,Gn=Sn[Hn];return function(qn,On){var wn,_n,Tn=hr({queryArgs:xn,endpointDefinition:gn,endpointName:yn}),Mn=gr((wn={type:"query",subscribe:Rn,forceRefetch:Bn,subscriptionOptions:Fn,endpointName:yn,originalArgs:xn,queryCacheKey:Tn},wn[forceQueryFnSymbol]=Gn,wn)),Ln=xr.endpoints[yn].select(xn),jn=qn(Mn),Kn=Ln(On()),Nn=jn.requestId,An=jn.abort,kn=Kn.requestId!==Nn,Dn=(_n=Cr.get(qn))==null?void 0:_n[Tn],Vn=function(){return Ln(On())},zn=Object.assign(Gn?jn.then(Vn):kn&&!Dn?Promise.resolve(Kn):Promise.all([Dn,jn]).then(Vn),{arg:xn,requestId:Nn,subscriptionOptions:Fn,queryCacheKey:Tn,abort:An,unwrap:function(){return __async$1(this,null,function(){var Zn;return __generator$1(this,function(Pi){switch(Pi.label){case 0:return[4,zn];case 1:if(Zn=Pi.sent(),Zn.isError)throw Zn.error;return[2,Zn.data]}})})},refetch:function(){return qn(bn(xn,{subscribe:!1,forceRefetch:!0}))},unsubscribe:function(){Rn&&qn(kr({queryCacheKey:Tn,requestId:Nn}))},updateSubscriptionOptions:function(Zn){zn.subscriptionOptions=Zn,qn(Br({endpointName:yn,requestId:Nn,queryCacheKey:Tn,options:Zn}))}});if(!Dn&&!kn&&!Gn){var Xn=Cr.get(qn)||{};Xn[Tn]=zn,Cr.set(qn,Xn),zn.then(function(){delete Xn[Tn],Object.keys(Xn).length||Cr.delete(qn)})}return zn}};return bn}function vn(yn){return function(gn,bn){var xn=bn===void 0?{}:bn,$n=xn.track,Sn=$n===void 0?!0:$n,Cn=xn.fixedCacheKey;return function(Rn,Bn){var Fn=vr({type:"mutation",endpointName:yn,originalArgs:gn,track:Sn,fixedCacheKey:Cn}),Hn=Rn(Fn),Gn=Hn.requestId,qn=Hn.abort,On=Hn.unwrap,wn=Hn.unwrap().then(function(Ln){return{data:Ln}}).catch(function(Ln){return{error:Ln}}),_n=function(){Rn(Dr({requestId:Gn,fixedCacheKey:Cn}))},Tn=Object.assign(wn,{arg:Hn.arg,requestId:Gn,abort:qn,unwrap:On,unsubscribe:_n,reset:_n}),Mn=wr.get(Rn)||{};return wr.set(Rn,Mn),Mn[Gn]=Tn,Tn.then(function(){delete Mn[Gn],Object.keys(Mn).length||wr.delete(Rn)}),Cn&&(Mn[Cn]=Tn,Tn.then(function(){Mn[Cn]===Tn&&(delete Mn[Cn],Object.keys(Mn).length||wr.delete(Rn))})),Tn}}}}function defaultTransformResponse(mr){return mr}function buildThunks(mr){var hr=this,gr=mr.reducerPath,vr=mr.baseQuery,xr=mr.context.endpointDefinitions,Er=mr.serializeQueryArgs,Cr=mr.api,wr=mr.assertTagType,Rr=function(yn,gn,bn,xn){return function($n,Sn){var Cn=xr[yn],Rn=Er({queryArgs:gn,endpointDefinition:Cn,endpointName:yn});if($n(Cr.internalActions.queryResultPatched({queryCacheKey:Rn,patches:bn})),!!xn){var Bn=Cr.endpoints[yn].select(gn)(Sn()),Fn=calculateProvidedBy(Cn.providesTags,Bn.data,void 0,gn,{},wr);$n(Cr.internalActions.updateProvidedBy({queryCacheKey:Rn,providedTags:Fn}))}}},kr=function(yn,gn,bn,xn){return xn===void 0&&(xn=!0),function($n,Sn){var Cn,Rn,Bn=Cr.endpoints[yn],Fn=Bn.select(gn)(Sn()),Hn={patches:[],inversePatches:[],undo:function(){return $n(Cr.util.patchQueryData(yn,gn,Hn.inversePatches,xn))}};if(Fn.status===QueryStatus.uninitialized)return Hn;var Gn;if("data"in Fn)if(t$1(Fn.data)){var qn=cn(Fn.data,bn),On=qn[0],wn=qn[1],_n=qn[2];(Cn=Hn.patches).push.apply(Cn,wn),(Rn=Hn.inversePatches).push.apply(Rn,_n),Gn=On}else Gn=bn(Fn.data),Hn.patches.push({op:"replace",path:[],value:Gn}),Hn.inversePatches.push({op:"replace",path:[],value:Fn.data});return $n(Cr.util.patchQueryData(yn,gn,Hn.patches,xn)),Hn}},Dr=function(yn,gn,bn){return function(xn){var $n;return xn(Cr.endpoints[yn].initiate(gn,($n={subscribe:!1,forceRefetch:!0},$n[forceQueryFnSymbol]=function(){return{data:bn}},$n)))}},Br=function(yn,gn){return __async$1(hr,[yn,gn],function(bn,xn){var $n,Sn,Cn,Rn,Bn,Fn,Hn,Gn,qn,On,wn,_n,Tn,Mn,Ln,jn,Kn,Nn,An=xn.signal,kn=xn.abort,Dn=xn.rejectWithValue,Vn=xn.fulfillWithValue,zn=xn.dispatch,Xn=xn.getState,Zn=xn.extra;return __generator$1(this,function(Pi){switch(Pi.label){case 0:$n=xr[bn.endpointName],Pi.label=1;case 1:return Pi.trys.push([1,8,,13]),Sn=defaultTransformResponse,Cn=void 0,Rn={signal:An,abort:kn,dispatch:zn,getState:Xn,extra:Zn,endpoint:bn.endpointName,type:bn.type,forced:bn.type==="query"?Hr(bn,Xn()):void 0},Bn=bn.type==="query"?bn[forceQueryFnSymbol]:void 0,Bn?(Cn=Bn(),[3,6]):[3,2];case 2:return $n.query?[4,vr($n.query(bn.originalArgs),Rn,$n.extraOptions)]:[3,4];case 3:return Cn=Pi.sent(),$n.transformResponse&&(Sn=$n.transformResponse),[3,6];case 4:return[4,$n.queryFn(bn.originalArgs,Rn,$n.extraOptions,function(Ya){return vr(Ya,Rn,$n.extraOptions)})];case 5:Cn=Pi.sent(),Pi.label=6;case 6:if(typeof process<"u",Cn.error)throw new HandledError(Cn.error,Cn.meta);return wn=Vn,[4,Sn(Cn.data,Cn.meta,bn.originalArgs)];case 7:return[2,wn.apply(void 0,[Pi.sent(),(Kn={fulfilledTimeStamp:Date.now(),baseQueryMeta:Cn.meta},Kn[SHOULD_AUTOBATCH]=!0,Kn)])];case 8:if(_n=Pi.sent(),Tn=_n,!(Tn instanceof HandledError))return[3,12];Mn=defaultTransformResponse,$n.query&&$n.transformErrorResponse&&(Mn=$n.transformErrorResponse),Pi.label=9;case 9:return Pi.trys.push([9,11,,12]),Ln=Dn,[4,Mn(Tn.value,Tn.meta,bn.originalArgs)];case 10:return[2,Ln.apply(void 0,[Pi.sent(),(Nn={baseQueryMeta:Tn.meta},Nn[SHOULD_AUTOBATCH]=!0,Nn)])];case 11:return jn=Pi.sent(),Tn=jn,[3,12];case 12:throw typeof process<"u",console.error(Tn),Tn;case 13:return[2]}})})};function Hr(yn,gn){var bn,xn,$n,Sn,Cn=(xn=(bn=gn[gr])==null?void 0:bn.queries)==null?void 0:xn[yn.queryCacheKey],Rn=($n=gn[gr])==null?void 0:$n.config.refetchOnMountOrArgChange,Bn=Cn?.fulfilledTimeStamp,Fn=(Sn=yn.forceRefetch)!=null?Sn:yn.subscribe&&Rn;return Fn?Fn===!0||(Number(new Date)-Number(Bn))/1e3>=Fn:!1}var Gr=createAsyncThunk(gr+"/executeQuery",Br,{getPendingMeta:function(){var yn;return yn={startedTimeStamp:Date.now()},yn[SHOULD_AUTOBATCH]=!0,yn},condition:function(yn,gn){var bn=gn.getState,xn,$n,Sn,Cn=bn(),Rn=($n=(xn=Cn[gr])==null?void 0:xn.queries)==null?void 0:$n[yn.queryCacheKey],Bn=Rn?.fulfilledTimeStamp,Fn=yn.originalArgs,Hn=Rn?.originalArgs,Gn=xr[yn.endpointName];return isUpsertQuery(yn)?!0:Rn?.status==="pending"?!1:Hr(yn,Cn)||isQueryDefinition$1(Gn)&&((Sn=Gn?.forceRefetch)!=null&&Sn.call(Gn,{currentArg:Fn,previousArg:Hn,endpointState:Rn,state:Cn}))?!0:!Bn},dispatchConditionRejection:!0}),qr=createAsyncThunk(gr+"/executeMutation",Br,{getPendingMeta:function(){var yn;return yn={startedTimeStamp:Date.now()},yn[SHOULD_AUTOBATCH]=!0,yn}}),zr=function(yn){return"force"in yn},Qr=function(yn){return"ifOlderThan"in yn},sn=function(yn,gn,bn){return function(xn,$n){var Sn=zr(bn)&&bn.force,Cn=Qr(bn)&&bn.ifOlderThan,Rn=function(Gn){return Gn===void 0&&(Gn=!0),Cr.endpoints[yn].initiate(gn,{forceRefetch:Gn})},Bn=Cr.endpoints[yn].select(gn)($n());if(Sn)xn(Rn());else if(Cn){var Fn=Bn?.fulfilledTimeStamp;if(!Fn){xn(Rn());return}var Hn=(Number(new Date)-Number(new Date(Fn)))/1e3>=Cn;Hn&&xn(Rn())}else xn(Rn(!1))}};function hn(yn){return function(gn){var bn,xn;return((xn=(bn=gn?.meta)==null?void 0:bn.arg)==null?void 0:xn.endpointName)===yn}}function vn(yn,gn){return{matchPending:isAllOf(isPending(yn),hn(gn)),matchFulfilled:isAllOf(isFulfilled(yn),hn(gn)),matchRejected:isAllOf(isRejected(yn),hn(gn))}}return{queryThunk:Gr,mutationThunk:qr,prefetch:sn,updateQueryData:kr,upsertQueryData:Dr,patchQueryData:Rr,buildMatchThunkActions:vn}}function calculateProvidedByThunk(mr,hr,gr,vr){return calculateProvidedBy(gr[mr.meta.arg.endpointName][hr],isFulfilled(mr)?mr.payload:void 0,isRejectedWithValue(mr)?mr.payload:void 0,mr.meta.arg.originalArgs,"baseQueryMeta"in mr.meta?mr.meta.baseQueryMeta:void 0,vr)}function updateQuerySubstateIfExists(mr,hr,gr){var vr=mr[hr];vr&&gr(vr)}function getMutationCacheKey(mr){var hr;return(hr="arg"in mr?mr.arg.fixedCacheKey:mr.fixedCacheKey)!=null?hr:mr.requestId}function updateMutationSubstateIfExists(mr,hr,gr){var vr=mr[getMutationCacheKey(hr)];vr&&gr(vr)}var initialState$1={};function buildSlice(mr){var hr=mr.reducerPath,gr=mr.queryThunk,vr=mr.mutationThunk,xr=mr.context,Er=xr.endpointDefinitions,Cr=xr.apiUid,wr=xr.extractRehydrationInfo,Rr=xr.hasRehydrationInfo,kr=mr.assertTagType,Dr=mr.config,Br=createAction$1(hr+"/resetApiState"),Hr=createSlice$1({name:hr+"/queries",initialState:initialState$1,reducers:{removeQueryResult:{reducer:function(gn,bn){var xn=bn.payload.queryCacheKey;delete gn[xn]},prepare:prepareAutoBatched()},queryResultPatched:{reducer:function(gn,bn){var xn=bn.payload,$n=xn.queryCacheKey,Sn=xn.patches;updateQuerySubstateIfExists(gn,$n,function(Cn){Cn.data=pn(Cn.data,Sn.concat())})},prepare:prepareAutoBatched()}},extraReducers:function(gn){gn.addCase(gr.pending,function(bn,xn){var $n=xn.meta,Sn=xn.meta.arg,Cn,Rn,Bn=isUpsertQuery(Sn);(Sn.subscribe||Bn)&&((Rn=bn[Cn=Sn.queryCacheKey])!=null||(bn[Cn]={status:QueryStatus.uninitialized,endpointName:Sn.endpointName})),updateQuerySubstateIfExists(bn,Sn.queryCacheKey,function(Fn){Fn.status=QueryStatus.pending,Fn.requestId=Bn&&Fn.requestId?Fn.requestId:$n.requestId,Sn.originalArgs!==void 0&&(Fn.originalArgs=Sn.originalArgs),Fn.startedTimeStamp=$n.startedTimeStamp})}).addCase(gr.fulfilled,function(bn,xn){var $n=xn.meta,Sn=xn.payload;updateQuerySubstateIfExists(bn,$n.arg.queryCacheKey,function(Cn){var Rn;if(!(Cn.requestId!==$n.requestId&&!isUpsertQuery($n.arg))){var Bn=Er[$n.arg.endpointName].merge;if(Cn.status=QueryStatus.fulfilled,Bn)if(Cn.data!==void 0){var Fn=$n.fulfilledTimeStamp,Hn=$n.arg,Gn=$n.baseQueryMeta,qn=$n.requestId,On=fn(Cn.data,function(wn){return Bn(wn,Sn,{arg:Hn.originalArgs,baseQueryMeta:Gn,fulfilledTimeStamp:Fn,requestId:qn})});Cn.data=On}else Cn.data=Sn;else Cn.data=(Rn=Er[$n.arg.endpointName].structuralSharing)==null||Rn?copyWithStructuralSharing(r(Cn.data)?e$1(Cn.data):Cn.data,Sn):Sn;delete Cn.error,Cn.fulfilledTimeStamp=$n.fulfilledTimeStamp}})}).addCase(gr.rejected,function(bn,xn){var $n=xn.meta,Sn=$n.condition,Cn=$n.arg,Rn=$n.requestId,Bn=xn.error,Fn=xn.payload;updateQuerySubstateIfExists(bn,Cn.queryCacheKey,function(Hn){if(!Sn){if(Hn.requestId!==Rn)return;Hn.status=QueryStatus.rejected,Hn.error=Fn??Bn}})}).addMatcher(Rr,function(bn,xn){for(var $n=wr(xn).queries,Sn=0,Cn=Object.entries($n);Sn<Cn.length;Sn++){var Rn=Cn[Sn],Bn=Rn[0],Fn=Rn[1];(Fn?.status===QueryStatus.fulfilled||Fn?.status===QueryStatus.rejected)&&(bn[Bn]=Fn)}})}}),Gr=createSlice$1({name:hr+"/mutations",initialState:initialState$1,reducers:{removeMutationResult:{reducer:function(gn,bn){var xn=bn.payload,$n=getMutationCacheKey(xn);$n in gn&&delete gn[$n]},prepare:prepareAutoBatched()}},extraReducers:function(gn){gn.addCase(vr.pending,function(bn,xn){var $n=xn.meta,Sn=xn.meta,Cn=Sn.requestId,Rn=Sn.arg,Bn=Sn.startedTimeStamp;Rn.track&&(bn[getMutationCacheKey($n)]={requestId:Cn,status:QueryStatus.pending,endpointName:Rn.endpointName,startedTimeStamp:Bn})}).addCase(vr.fulfilled,function(bn,xn){var $n=xn.payload,Sn=xn.meta;Sn.arg.track&&updateMutationSubstateIfExists(bn,Sn,function(Cn){Cn.requestId===Sn.requestId&&(Cn.status=QueryStatus.fulfilled,Cn.data=$n,Cn.fulfilledTimeStamp=Sn.fulfilledTimeStamp)})}).addCase(vr.rejected,function(bn,xn){var $n=xn.payload,Sn=xn.error,Cn=xn.meta;Cn.arg.track&&updateMutationSubstateIfExists(bn,Cn,function(Rn){Rn.requestId===Cn.requestId&&(Rn.status=QueryStatus.rejected,Rn.error=$n??Sn)})}).addMatcher(Rr,function(bn,xn){for(var $n=wr(xn).mutations,Sn=0,Cn=Object.entries($n);Sn<Cn.length;Sn++){var Rn=Cn[Sn],Bn=Rn[0],Fn=Rn[1];(Fn?.status===QueryStatus.fulfilled||Fn?.status===QueryStatus.rejected)&&Bn!==Fn?.requestId&&(bn[Bn]=Fn)}})}}),qr=createSlice$1({name:hr+"/invalidation",initialState:initialState$1,reducers:{updateProvidedBy:{reducer:function(gn,bn){for(var xn,$n,Sn,Cn,Rn=bn.payload,Bn=Rn.queryCacheKey,Fn=Rn.providedTags,Hn=0,Gn=Object.values(gn);Hn<Gn.length;Hn++)for(var qn=Gn[Hn],On=0,wn=Object.values(qn);On<wn.length;On++){var _n=wn[On],Tn=_n.indexOf(Bn);Tn!==-1&&_n.splice(Tn,1)}for(var Mn=0,Ln=Fn;Mn<Ln.length;Mn++){var jn=Ln[Mn],Kn=jn.type,Nn=jn.id,An=(Cn=($n=(xn=gn[Kn])!=null?xn:gn[Kn]={})[Sn=Nn||"__internal_without_id"])!=null?Cn:$n[Sn]=[],kn=An.includes(Bn);kn||An.push(Bn)}},prepare:prepareAutoBatched()}},extraReducers:function(gn){gn.addCase(Hr.actions.removeQueryResult,function(bn,xn){for(var $n=xn.payload.queryCacheKey,Sn=0,Cn=Object.values(bn);Sn<Cn.length;Sn++)for(var Rn=Cn[Sn],Bn=0,Fn=Object.values(Rn);Bn<Fn.length;Bn++){var Hn=Fn[Bn],Gn=Hn.indexOf($n);Gn!==-1&&Hn.splice(Gn,1)}}).addMatcher(Rr,function(bn,xn){for(var $n,Sn,Cn,Rn,Bn=wr(xn).provided,Fn=0,Hn=Object.entries(Bn);Fn<Hn.length;Fn++)for(var Gn=Hn[Fn],qn=Gn[0],On=Gn[1],wn=0,_n=Object.entries(On);wn<_n.length;wn++)for(var Tn=_n[wn],Mn=Tn[0],Ln=Tn[1],jn=(Rn=(Sn=($n=bn[qn])!=null?$n:bn[qn]={})[Cn=Mn||"__internal_without_id"])!=null?Rn:Sn[Cn]=[],Kn=0,Nn=Ln;Kn<Nn.length;Kn++){var An=Nn[Kn],kn=jn.includes(An);kn||jn.push(An)}}).addMatcher(isAnyOf(isFulfilled(gr),isRejectedWithValue(gr)),function(bn,xn){var $n=calculateProvidedByThunk(xn,"providesTags",Er,kr),Sn=xn.meta.arg.queryCacheKey;qr.caseReducers.updateProvidedBy(bn,qr.actions.updateProvidedBy({queryCacheKey:Sn,providedTags:$n}))})}}),zr=createSlice$1({name:hr+"/subscriptions",initialState:initialState$1,reducers:{updateSubscriptionOptions:function(gn,bn){},unsubscribeQueryResult:function(gn,bn){},internal_probeSubscription:function(gn,bn){}}}),Qr=createSlice$1({name:hr+"/internalSubscriptions",initialState:initialState$1,reducers:{subscriptionsUpdated:{reducer:function(gn,bn){return pn(gn,bn.payload)},prepare:prepareAutoBatched()}}}),sn=createSlice$1({name:hr+"/config",initialState:__spreadValues$2({online:isOnline(),focused:isDocumentVisible(),middlewareRegistered:!1},Dr),reducers:{middlewareRegistered:function(gn,bn){var xn=bn.payload;gn.middlewareRegistered=gn.middlewareRegistered==="conflict"||Cr!==xn?"conflict":!0}},extraReducers:function(gn){gn.addCase(onOnline,function(bn){bn.online=!0}).addCase(onOffline,function(bn){bn.online=!1}).addCase(onFocus,function(bn){bn.focused=!0}).addCase(onFocusLost,function(bn){bn.focused=!1}).addMatcher(Rr,function(bn){return __spreadValues$2({},bn)})}}),hn=combineReducers({queries:Hr.reducer,mutations:Gr.reducer,provided:qr.reducer,subscriptions:Qr.reducer,config:sn.reducer}),vn=function(gn,bn){return hn(Br.match(bn)?void 0:gn,bn)},yn=__spreadProps$2(__spreadValues$2(__spreadValues$2(__spreadValues$2(__spreadValues$2(__spreadValues$2(__spreadValues$2({},sn.actions),Hr.actions),zr.actions),Qr.actions),Gr.actions),qr.actions),{unsubscribeMutationResult:Gr.actions.removeMutationResult,resetApiState:Br});return{reducer:vn,actions:yn}}var skipToken=Symbol.for("RTKQ/skipToken"),initialSubState={status:QueryStatus.uninitialized},defaultQuerySubState=fn(initialSubState,function(){}),defaultMutationSubState=fn(initialSubState,function(){});function buildSelectors(mr){var hr=mr.serializeQueryArgs,gr=mr.reducerPath,vr=function(Dr){return defaultQuerySubState},xr=function(Dr){return defaultMutationSubState};return{buildQuerySelector:wr,buildMutationSelector:Rr,selectInvalidatedBy:kr};function Er(Dr){return __spreadValues$2(__spreadValues$2({},Dr),getRequestStatusFlags(Dr.status))}function Cr(Dr){var Br=Dr[gr];return Br}function wr(Dr,Br){return function(Hr){var Gr=hr({queryArgs:Hr,endpointDefinition:Br,endpointName:Dr}),qr=function(Qr){var sn,hn,vn;return(vn=(hn=(sn=Cr(Qr))==null?void 0:sn.queries)==null?void 0:hn[Gr])!=null?vn:defaultQuerySubState},zr=Hr===skipToken?vr:qr;return createSelector(zr,Er)}}function Rr(){return function(Dr){var Br,Hr;typeof Dr=="object"?Hr=(Br=getMutationCacheKey(Dr))!=null?Br:skipToken:Hr=Dr;var Gr=function(zr){var Qr,sn,hn;return(hn=(sn=(Qr=Cr(zr))==null?void 0:Qr.mutations)==null?void 0:sn[Hr])!=null?hn:defaultMutationSubState},qr=Hr===skipToken?xr:Gr;return createSelector(qr,Er)}}function kr(Dr,Br){for(var Hr,Gr=Dr[gr],qr=new Set,zr=0,Qr=Br.map(expandTagDescription);zr<Qr.length;zr++){var sn=Qr[zr],hn=Gr.provided[sn.type];if(hn)for(var vn=(Hr=sn.id!==void 0?hn[sn.id]:flatten(Object.values(hn)))!=null?Hr:[],yn=0,gn=vn;yn<gn.length;yn++){var bn=gn[yn];qr.add(bn)}}return flatten(Array.from(qr.values()).map(function(xn){var $n=Gr.queries[xn];return $n?[{queryCacheKey:xn,endpointName:$n.endpointName,originalArgs:$n.originalArgs}]:[]}))}}var cache$1=WeakMap?new WeakMap:void 0,defaultSerializeQueryArgs$1=function(mr){var hr=mr.endpointName,gr=mr.queryArgs,vr="",xr=cache$1?.get(gr);if(typeof xr=="string")vr=xr;else{var Er=JSON.stringify(gr,function(Cr,wr){return isPlainObject$7(wr)?Object.keys(wr).sort().reduce(function(Rr,kr){return Rr[kr]=wr[kr],Rr},{}):wr});isPlainObject$7(gr)&&cache$1?.set(gr,Er),vr=Er}return hr+"("+vr+")"};function buildCreateApi(){for(var mr=[],hr=0;hr<arguments.length;hr++)mr[hr]=arguments[hr];return function(vr){var xr=defaultMemoize(function(Dr){var Br,Hr;return(Hr=vr.extractRehydrationInfo)==null?void 0:Hr.call(vr,Dr,{reducerPath:(Br=vr.reducerPath)!=null?Br:"api"})}),Er=__spreadProps$2(__spreadValues$2({reducerPath:"api",keepUnusedDataFor:60,refetchOnMountOrArgChange:!1,refetchOnFocus:!1,refetchOnReconnect:!1},vr),{extractRehydrationInfo:xr,serializeQueryArgs:function(Dr){var Br=defaultSerializeQueryArgs$1;if("serializeQueryArgs"in Dr.endpointDefinition){var Hr=Dr.endpointDefinition.serializeQueryArgs;Br=function(Gr){var qr=Hr(Gr);return typeof qr=="string"?qr:defaultSerializeQueryArgs$1(__spreadProps$2(__spreadValues$2({},Gr),{queryArgs:qr}))}}else vr.serializeQueryArgs&&(Br=vr.serializeQueryArgs);return Br(Dr)},tagTypes:__spreadArray$2([],vr.tagTypes||[])}),Cr={endpointDefinitions:{},batch:function(Dr){Dr()},apiUid:nanoid$1(),extractRehydrationInfo:xr,hasRehydrationInfo:defaultMemoize(function(Dr){return xr(Dr)!=null})},wr={injectEndpoints:kr,enhanceEndpoints:function(Dr){var Br=Dr.addTagTypes,Hr=Dr.endpoints;if(Br)for(var Gr=0,qr=Br;Gr<qr.length;Gr++){var zr=qr[Gr];Er.tagTypes.includes(zr)||Er.tagTypes.push(zr)}if(Hr)for(var Qr=0,sn=Object.entries(Hr);Qr<sn.length;Qr++){var hn=sn[Qr],vn=hn[0],yn=hn[1];typeof yn=="function"?yn(Cr.endpointDefinitions[vn]):Object.assign(Cr.endpointDefinitions[vn]||{},yn)}return wr}},Rr=mr.map(function(Dr){return Dr.init(wr,Er,Cr)});function kr(Dr){for(var Br=Dr.endpoints({query:function(yn){return __spreadProps$2(__spreadValues$2({},yn),{type:DefinitionType$1.query})},mutation:function(yn){return __spreadProps$2(__spreadValues$2({},yn),{type:DefinitionType$1.mutation})}}),Hr=0,Gr=Object.entries(Br);Hr<Gr.length;Hr++){var qr=Gr[Hr],zr=qr[0],Qr=qr[1];if(!Dr.overrideExisting&&zr in Cr.endpointDefinitions){typeof process<"u";continue}Cr.endpointDefinitions[zr]=Qr;for(var sn=0,hn=Rr;sn<hn.length;sn++){var vn=hn[sn];vn.injectEndpoint(zr,Qr)}}return wr}return wr.injectEndpoints({endpoints:vr.endpoints})}}function isObjectEmpty(mr){for(var hr in mr)return!1;return!0}var THIRTY_TWO_BIT_MAX_TIMER_SECONDS=2147483647/1e3-1,buildCacheCollectionHandler=function(mr){var hr=mr.reducerPath,gr=mr.api,vr=mr.context,xr=mr.internalState,Er=gr.internalActions,Cr=Er.removeQueryResult,wr=Er.unsubscribeQueryResult;function Rr(Hr){var Gr=xr.currentSubscriptions[Hr];return!!Gr&&!isObjectEmpty(Gr)}var kr={},Dr=function(Hr,Gr,qr){var zr;if(wr.match(Hr)){var Qr=Gr.getState()[hr],sn=Hr.payload.queryCacheKey;Br(sn,(zr=Qr.queries[sn])==null?void 0:zr.endpointName,Gr,Qr.config)}if(gr.util.resetApiState.match(Hr))for(var hn=0,vn=Object.entries(kr);hn<vn.length;hn++){var yn=vn[hn],gn=yn[0],bn=yn[1];bn&&clearTimeout(bn),delete kr[gn]}if(vr.hasRehydrationInfo(Hr))for(var Qr=Gr.getState()[hr],xn=vr.extractRehydrationInfo(Hr).queries,$n=0,Sn=Object.entries(xn);$n<Sn.length;$n++){var Cn=Sn[$n],sn=Cn[0],Rn=Cn[1];Br(sn,Rn?.endpointName,Gr,Qr.config)}};function Br(Hr,Gr,qr,zr){var Qr,sn=vr.endpointDefinitions[Gr],hn=(Qr=sn?.keepUnusedDataFor)!=null?Qr:zr.keepUnusedDataFor;if(hn!==1/0){var vn=Math.max(0,Math.min(hn,THIRTY_TWO_BIT_MAX_TIMER_SECONDS));if(!Rr(Hr)){var yn=kr[Hr];yn&&clearTimeout(yn),kr[Hr]=setTimeout(function(){Rr(Hr)||qr.dispatch(Cr({queryCacheKey:Hr})),delete kr[Hr]},vn*1e3)}}}return Dr},buildInvalidationByTagsHandler=function(mr){var hr=mr.reducerPath,gr=mr.context,vr=mr.context.endpointDefinitions,xr=mr.mutationThunk,Er=mr.api,Cr=mr.assertTagType,wr=mr.refetchQuery,Rr=Er.internalActions.removeQueryResult,kr=isAnyOf(isFulfilled(xr),isRejectedWithValue(xr)),Dr=function(Hr,Gr){kr(Hr)&&Br(calculateProvidedByThunk(Hr,"invalidatesTags",vr,Cr),Gr),Er.util.invalidateTags.match(Hr)&&Br(calculateProvidedBy(Hr.payload,void 0,void 0,void 0,void 0,Cr),Gr)};function Br(Hr,Gr){var qr=Gr.getState(),zr=qr[hr],Qr=Er.util.selectInvalidatedBy(qr,Hr);gr.batch(function(){for(var sn,hn=Array.from(Qr.values()),vn=0,yn=hn;vn<yn.length;vn++){var gn=yn[vn].queryCacheKey,bn=zr.queries[gn],xn=(sn=zr.subscriptions[gn])!=null?sn:{};bn&&(Object.keys(xn).length===0?Gr.dispatch(Rr({queryCacheKey:gn})):bn.status!==QueryStatus.uninitialized&&Gr.dispatch(wr(bn,gn)))}})}return Dr},buildPollingHandler=function(mr){var hr=mr.reducerPath,gr=mr.queryThunk,vr=mr.api,xr=mr.refetchQuery,Er=mr.internalState,Cr={},wr=function(Gr,qr){(vr.internalActions.updateSubscriptionOptions.match(Gr)||vr.internalActions.unsubscribeQueryResult.match(Gr))&&kr(Gr.payload,qr),(gr.pending.match(Gr)||gr.rejected.match(Gr)&&Gr.meta.condition)&&kr(Gr.meta.arg,qr),(gr.fulfilled.match(Gr)||gr.rejected.match(Gr)&&!Gr.meta.condition)&&Rr(Gr.meta.arg,qr),vr.util.resetApiState.match(Gr)&&Br()};function Rr(Gr,qr){var zr=Gr.queryCacheKey,Qr=qr.getState()[hr],sn=Qr.queries[zr],hn=Er.currentSubscriptions[zr];if(!(!sn||sn.status===QueryStatus.uninitialized)){var vn=Hr(hn);if(Number.isFinite(vn)){var yn=Cr[zr];yn?.timeout&&(clearTimeout(yn.timeout),yn.timeout=void 0);var gn=Date.now()+vn,bn=Cr[zr]={nextPollTimestamp:gn,pollingInterval:vn,timeout:setTimeout(function(){bn.timeout=void 0,qr.dispatch(xr(sn,zr))},vn)}}}}function kr(Gr,qr){var zr=Gr.queryCacheKey,Qr=qr.getState()[hr],sn=Qr.queries[zr],hn=Er.currentSubscriptions[zr];if(!(!sn||sn.status===QueryStatus.uninitialized)){var vn=Hr(hn);if(!Number.isFinite(vn)){Dr(zr);return}var yn=Cr[zr],gn=Date.now()+vn;(!yn||gn<yn.nextPollTimestamp)&&Rr({queryCacheKey:zr},qr)}}function Dr(Gr){var qr=Cr[Gr];qr?.timeout&&clearTimeout(qr.timeout),delete Cr[Gr]}function Br(){for(var Gr=0,qr=Object.keys(Cr);Gr<qr.length;Gr++){var zr=qr[Gr];Dr(zr)}}function Hr(Gr){Gr===void 0&&(Gr={});var qr=Number.POSITIVE_INFINITY;for(var zr in Gr)Gr[zr].pollingInterval&&(qr=Math.min(Gr[zr].pollingInterval,qr));return qr}return wr},buildWindowEventHandler=function(mr){var hr=mr.reducerPath,gr=mr.context,vr=mr.api,xr=mr.refetchQuery,Er=mr.internalState,Cr=vr.internalActions.removeQueryResult,wr=function(kr,Dr){onFocus.match(kr)&&Rr(Dr,"refetchOnFocus"),onOnline.match(kr)&&Rr(Dr,"refetchOnReconnect")};function Rr(kr,Dr){var Br=kr.getState()[hr],Hr=Br.queries,Gr=Er.currentSubscriptions;gr.batch(function(){for(var qr=0,zr=Object.keys(Gr);qr<zr.length;qr++){var Qr=zr[qr],sn=Hr[Qr],hn=Gr[Qr];if(!(!hn||!sn)){var vn=Object.values(hn).some(function(yn){return yn[Dr]===!0})||Object.values(hn).every(function(yn){return yn[Dr]===void 0})&&Br.config[Dr];vn&&(Object.keys(hn).length===0?kr.dispatch(Cr({queryCacheKey:Qr})):sn.status!==QueryStatus.uninitialized&&kr.dispatch(xr(sn,Qr)))}}})}return wr},neverResolvedError=new Error("Promise never resolved before cacheEntryRemoved."),buildCacheLifecycleHandler=function(mr){var hr=mr.api,gr=mr.reducerPath,vr=mr.context,xr=mr.queryThunk,Er=mr.mutationThunk;mr.internalState;var Cr=isAsyncThunkAction(xr),wr=isAsyncThunkAction(Er),Rr=isFulfilled(xr,Er),kr={},Dr=function(Gr,qr,zr){var Qr=Br(Gr);if(xr.pending.match(Gr)){var sn=zr[gr].queries[Qr],hn=qr.getState()[gr].queries[Qr];!sn&&hn&&Hr(Gr.meta.arg.endpointName,Gr.meta.arg.originalArgs,Qr,qr,Gr.meta.requestId)}else if(Er.pending.match(Gr)){var hn=qr.getState()[gr].mutations[Qr];hn&&Hr(Gr.meta.arg.endpointName,Gr.meta.arg.originalArgs,Qr,qr,Gr.meta.requestId)}else if(Rr(Gr)){var vn=kr[Qr];vn?.valueResolved&&(vn.valueResolved({data:Gr.payload,meta:Gr.meta.baseQueryMeta}),delete vn.valueResolved)}else if(hr.internalActions.removeQueryResult.match(Gr)||hr.internalActions.removeMutationResult.match(Gr)){var vn=kr[Qr];vn&&(delete kr[Qr],vn.cacheEntryRemoved())}else if(hr.util.resetApiState.match(Gr))for(var yn=0,gn=Object.entries(kr);yn<gn.length;yn++){var bn=gn[yn],xn=bn[0],vn=bn[1];delete kr[xn],vn.cacheEntryRemoved()}};function Br(Gr){return Cr(Gr)?Gr.meta.arg.queryCacheKey:wr(Gr)?Gr.meta.requestId:hr.internalActions.removeQueryResult.match(Gr)?Gr.payload.queryCacheKey:hr.internalActions.removeMutationResult.match(Gr)?getMutationCacheKey(Gr.payload):""}function Hr(Gr,qr,zr,Qr,sn){var hn=vr.endpointDefinitions[Gr],vn=hn?.onCacheEntryAdded;if(vn){var yn={},gn=new Promise(function(Rn){yn.cacheEntryRemoved=Rn}),bn=Promise.race([new Promise(function(Rn){yn.valueResolved=Rn}),gn.then(function(){throw neverResolvedError})]);bn.catch(function(){}),kr[zr]=yn;var xn=hr.endpoints[Gr].select(hn.type===DefinitionType$1.query?qr:zr),$n=Qr.dispatch(function(Rn,Bn,Fn){return Fn}),Sn=__spreadProps$2(__spreadValues$2({},Qr),{getCacheEntry:function(){return xn(Qr.getState())},requestId:sn,extra:$n,updateCachedData:hn.type===DefinitionType$1.query?function(Rn){return Qr.dispatch(hr.util.updateQueryData(Gr,qr,Rn))}:void 0,cacheDataLoaded:bn,cacheEntryRemoved:gn}),Cn=vn(qr,Sn);Promise.resolve(Cn).catch(function(Rn){if(Rn!==neverResolvedError)throw Rn})}}return Dr},buildQueryLifecycleHandler=function(mr){var hr=mr.api,gr=mr.context,vr=mr.queryThunk,xr=mr.mutationThunk,Er=isPending(vr,xr),Cr=isRejected(vr,xr),wr=isFulfilled(vr,xr),Rr={},kr=function(Dr,Br){var Hr,Gr,qr;if(Er(Dr)){var zr=Dr.meta,Qr=zr.requestId,sn=zr.arg,hn=sn.endpointName,vn=sn.originalArgs,yn=gr.endpointDefinitions[hn],gn=yn?.onQueryStarted;if(gn){var bn={},xn=new Promise(function(Gn,qn){bn.resolve=Gn,bn.reject=qn});xn.catch(function(){}),Rr[Qr]=bn;var $n=hr.endpoints[hn].select(yn.type===DefinitionType$1.query?vn:Qr),Sn=Br.dispatch(function(Gn,qn,On){return On}),Cn=__spreadProps$2(__spreadValues$2({},Br),{getCacheEntry:function(){return $n(Br.getState())},requestId:Qr,extra:Sn,updateCachedData:yn.type===DefinitionType$1.query?function(Gn){return Br.dispatch(hr.util.updateQueryData(hn,vn,Gn))}:void 0,queryFulfilled:xn});gn(vn,Cn)}}else if(wr(Dr)){var Rn=Dr.meta,Qr=Rn.requestId,Bn=Rn.baseQueryMeta;(Hr=Rr[Qr])==null||Hr.resolve({data:Dr.payload,meta:Bn}),delete Rr[Qr]}else if(Cr(Dr)){var Fn=Dr.meta,Qr=Fn.requestId,Hn=Fn.rejectedWithValue,Bn=Fn.baseQueryMeta;(qr=Rr[Qr])==null||qr.reject({error:(Gr=Dr.payload)!=null?Gr:Dr.error,isUnhandledError:!Hn,meta:Bn}),delete Rr[Qr]}};return kr},buildDevCheckHandler=function(mr){var hr=mr.api,gr=mr.context.apiUid,vr=mr.reducerPath;return function(xr,Er){var Cr,wr;hr.util.resetApiState.match(xr)&&Er.dispatch(hr.internalActions.middlewareRegistered(gr)),typeof process<"u"}},promise$1,queueMicrotaskShim=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis):function(mr){return(promise$1||(promise$1=Promise.resolve())).then(mr).catch(function(hr){return setTimeout(function(){throw hr},0)})},buildBatchedActionsHandler=function(mr){var hr=mr.api,gr=mr.queryThunk,vr=mr.internalState,xr=hr.reducerPath+"/subscriptions",Er=null,Cr=!1,wr=hr.internalActions,Rr=wr.updateSubscriptionOptions,kr=wr.unsubscribeQueryResult,Dr=function(Br,Hr){var Gr,qr,zr,Qr,sn,hn,vn,yn,gn;if(Rr.match(Hr)){var bn=Hr.payload,xn=bn.queryCacheKey,$n=bn.requestId,Sn=bn.options;return(Gr=Br?.[xn])!=null&&Gr[$n]&&(Br[xn][$n]=Sn),!0}if(kr.match(Hr)){var Cn=Hr.payload,xn=Cn.queryCacheKey,$n=Cn.requestId;return Br[xn]&&delete Br[xn][$n],!0}if(hr.internalActions.removeQueryResult.match(Hr))return delete Br[Hr.payload.queryCacheKey],!0;if(gr.pending.match(Hr)){var Rn=Hr.meta,Bn=Rn.arg,$n=Rn.requestId;if(Bn.subscribe){var Fn=(zr=Br[qr=Bn.queryCacheKey])!=null?zr:Br[qr]={};return Fn[$n]=(sn=(Qr=Bn.subscriptionOptions)!=null?Qr:Fn[$n])!=null?sn:{},!0}}if(gr.rejected.match(Hr)){var Hn=Hr.meta,Gn=Hn.condition,Bn=Hn.arg,$n=Hn.requestId;if(Gn&&Bn.subscribe){var Fn=(vn=Br[hn=Bn.queryCacheKey])!=null?vn:Br[hn]={};return Fn[$n]=(gn=(yn=Bn.subscriptionOptions)!=null?yn:Fn[$n])!=null?gn:{},!0}}return!1};return function(Br,Hr){var Gr,qr;if(Er||(Er=JSON.parse(JSON.stringify(vr.currentSubscriptions))),hr.util.resetApiState.match(Br))return Er=vr.currentSubscriptions={},[!0,!1];if(hr.internalActions.internal_probeSubscription.match(Br)){var zr=Br.payload,Qr=zr.queryCacheKey,sn=zr.requestId,hn=!!((Gr=vr.currentSubscriptions[Qr])!=null&&Gr[sn]);return[!1,hn]}var vn=Dr(vr.currentSubscriptions,Br);if(vn){Cr||(queueMicrotaskShim(function(){var xn=JSON.parse(JSON.stringify(vr.currentSubscriptions)),$n=cn(Er,function(){return xn}),Sn=$n[1];Hr.next(hr.internalActions.subscriptionsUpdated(Sn)),Er=xn,Cr=!1}),Cr=!0);var yn=!!((qr=Br.type)!=null&&qr.startsWith(xr)),gn=gr.rejected.match(Br)&&Br.meta.condition&&!!Br.meta.arg.subscribe,bn=!yn&&!gn;return[bn,!1]}return[!0,!1]}};function buildMiddleware(mr){var hr=mr.reducerPath,gr=mr.queryThunk,vr=mr.api,xr=mr.context,Er=xr.apiUid,Cr={invalidateTags:createAction$1(hr+"/invalidateTags")},wr=function(Br){return!!Br&&typeof Br.type=="string"&&Br.type.startsWith(hr+"/")},Rr=[buildDevCheckHandler,buildCacheCollectionHandler,buildInvalidationByTagsHandler,buildPollingHandler,buildCacheLifecycleHandler,buildQueryLifecycleHandler],kr=function(Br){var Hr=!1,Gr={currentSubscriptions:{}},qr=__spreadProps$2(__spreadValues$2({},mr),{internalState:Gr,refetchQuery:Dr}),zr=Rr.map(function(hn){return hn(qr)}),Qr=buildBatchedActionsHandler(qr),sn=buildWindowEventHandler(qr);return function(hn){return function(vn){Hr||(Hr=!0,Br.dispatch(vr.internalActions.middlewareRegistered(Er)));var yn=__spreadProps$2(__spreadValues$2({},Br),{next:hn}),gn=Br.getState(),bn=Qr(vn,yn,gn),xn=bn[0],$n=bn[1],Sn;if(xn?Sn=hn(vn):Sn=$n,Br.getState()[hr]&&(sn(vn,yn,gn),wr(vn)||xr.hasRehydrationInfo(vn)))for(var Cn=0,Rn=zr;Cn<Rn.length;Cn++){var Bn=Rn[Cn];Bn(vn,yn,gn)}return Sn}}};return{middleware:kr,actions:Cr};function Dr(Br,Hr,Gr){return Gr===void 0&&(Gr={}),gr(__spreadValues$2({type:"query",endpointName:Br.endpointName,originalArgs:Br.originalArgs,subscribe:!1,forceRefetch:!0,queryCacheKey:Hr},Gr))}}function safeAssign$1(mr){for(var hr=[],gr=1;gr<arguments.length;gr++)hr[gr-1]=arguments[gr];Object.assign.apply(Object,__spreadArray$2([mr],hr))}var coreModuleName=Symbol(),coreModule=function(){return{name:coreModuleName,init:function(mr,hr,gr){var vr=hr.baseQuery,xr=hr.tagTypes,Er=hr.reducerPath,Cr=hr.serializeQueryArgs,wr=hr.keepUnusedDataFor,Rr=hr.refetchOnMountOrArgChange,kr=hr.refetchOnFocus,Dr=hr.refetchOnReconnect;T$2();var Br=function(jn){return typeof process<"u",jn};Object.assign(mr,{reducerPath:Er,endpoints:{},internalActions:{onOnline,onOffline,onFocus,onFocusLost},util:{}});var Hr=buildThunks({baseQuery:vr,reducerPath:Er,context:gr,api:mr,serializeQueryArgs:Cr,assertTagType:Br}),Gr=Hr.queryThunk,qr=Hr.mutationThunk,zr=Hr.patchQueryData,Qr=Hr.updateQueryData,sn=Hr.upsertQueryData,hn=Hr.prefetch,vn=Hr.buildMatchThunkActions,yn=buildSlice({context:gr,queryThunk:Gr,mutationThunk:qr,reducerPath:Er,assertTagType:Br,config:{refetchOnFocus:kr,refetchOnReconnect:Dr,refetchOnMountOrArgChange:Rr,keepUnusedDataFor:wr,reducerPath:Er}}),gn=yn.reducer,bn=yn.actions;safeAssign$1(mr.util,{patchQueryData:zr,updateQueryData:Qr,upsertQueryData:sn,prefetch:hn,resetApiState:bn.resetApiState}),safeAssign$1(mr.internalActions,bn);var xn=buildMiddleware({reducerPath:Er,context:gr,queryThunk:Gr,mutationThunk:qr,api:mr,assertTagType:Br}),$n=xn.middleware,Sn=xn.actions;safeAssign$1(mr.util,Sn),safeAssign$1(mr,{reducer:gn,middleware:$n});var Cn=buildSelectors({serializeQueryArgs:Cr,reducerPath:Er}),Rn=Cn.buildQuerySelector,Bn=Cn.buildMutationSelector,Fn=Cn.selectInvalidatedBy;safeAssign$1(mr.util,{selectInvalidatedBy:Fn});var Hn=buildInitiate({queryThunk:Gr,mutationThunk:qr,api:mr,serializeQueryArgs:Cr,context:gr}),Gn=Hn.buildInitiateQuery,qn=Hn.buildInitiateMutation,On=Hn.getRunningMutationThunk,wn=Hn.getRunningMutationsThunk,_n=Hn.getRunningQueriesThunk,Tn=Hn.getRunningQueryThunk,Mn=Hn.getRunningOperationPromises,Ln=Hn.removalWarning;return safeAssign$1(mr.util,{getRunningOperationPromises:Mn,getRunningOperationPromise:Ln,getRunningMutationThunk:On,getRunningMutationsThunk:wn,getRunningQueryThunk:Tn,getRunningQueriesThunk:_n}),{name:coreModuleName,injectEndpoint:function(jn,Kn){var Nn,An,kn=mr;(An=(Nn=kn.endpoints)[jn])!=null||(Nn[jn]={}),isQueryDefinition$1(Kn)?safeAssign$1(kn.endpoints[jn],{name:jn,select:Rn(jn,Kn),initiate:Gn(jn,Kn)},vn(Gr,jn)):isMutationDefinition$1(Kn)&&safeAssign$1(kn.endpoints[jn],{name:jn,select:Bn(),initiate:qn(jn)},vn(qr,jn))}}}}},shim$2={exports:{}},useSyncExternalStoreShim_production={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var React$1=reactExports;function is$2(mr,hr){return mr===hr&&(mr!==0||1/mr===1/hr)||mr!==mr&&hr!==hr}var objectIs$1=typeof Object.is=="function"?Object.is:is$2,useState=React$1.useState,useEffect$1=React$1.useEffect,useLayoutEffect=React$1.useLayoutEffect,useDebugValue$1=React$1.useDebugValue;function useSyncExternalStore$2(mr,hr){var gr=hr(),vr=useState({inst:{value:gr,getSnapshot:hr}}),xr=vr[0].inst,Er=vr[1];return useLayoutEffect(function(){xr.value=gr,xr.getSnapshot=hr,checkIfSnapshotChanged(xr)&&Er({inst:xr})},[mr,gr,hr]),useEffect$1(function(){return checkIfSnapshotChanged(xr)&&Er({inst:xr}),mr(function(){checkIfSnapshotChanged(xr)&&Er({inst:xr})})},[mr]),useDebugValue$1(gr),gr}function checkIfSnapshotChanged(mr){var hr=mr.getSnapshot;mr=mr.value;try{var gr=hr();return!objectIs$1(mr,gr)}catch{return!0}}function useSyncExternalStore$1(mr,hr){return hr()}var shim$1=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?useSyncExternalStore$1:useSyncExternalStore$2;useSyncExternalStoreShim_production.useSyncExternalStore=React$1.useSyncExternalStore!==void 0?React$1.useSyncExternalStore:shim$1;shim$2.exports=useSyncExternalStoreShim_production;var shimExports=shim$2.exports,withSelector={exports:{}},withSelector_production={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var React=reactExports,shim=shimExports;function is$1(mr,hr){return mr===hr&&(mr!==0||1/mr===1/hr)||mr!==mr&&hr!==hr}var objectIs=typeof Object.is=="function"?Object.is:is$1,useSyncExternalStore=shim.useSyncExternalStore,useRef=React.useRef,useEffect=React.useEffect,useMemo=React.useMemo,useDebugValue=React.useDebugValue;withSelector_production.useSyncExternalStoreWithSelector=function(mr,hr,gr,vr,xr){var Er=useRef(null);if(Er.current===null){var Cr={hasValue:!1,value:null};Er.current=Cr}else Cr=Er.current;Er=useMemo(function(){function Rr(Gr){if(!kr){if(kr=!0,Dr=Gr,Gr=vr(Gr),xr!==void 0&&Cr.hasValue){var qr=Cr.value;if(xr(qr,Gr))return Br=qr}return Br=Gr}if(qr=Br,objectIs(Dr,Gr))return qr;var zr=vr(Gr);return xr!==void 0&&xr(qr,zr)?(Dr=Gr,qr):(Dr=Gr,Br=zr)}var kr=!1,Dr,Br,Hr=gr===void 0?null:gr;return[function(){return Rr(hr())},Hr===null?void 0:function(){return Rr(Hr())}]},[hr,gr,vr,xr]);var wr=useSyncExternalStore(mr,Er[0],Er[1]);return useEffect(function(){Cr.hasValue=!0,Cr.value=wr},[wr]),useDebugValue(wr),wr};withSelector.exports=withSelector_production;var withSelectorExports=withSelector.exports;const ContextKey=Symbol.for("react-redux-context"),gT=typeof globalThis<"u"?globalThis:{};function getContext(){var mr;if(!reactExports.createContext)return{};const hr=(mr=gT[ContextKey])!=null?mr:gT[ContextKey]=new Map;let gr=hr.get(reactExports.createContext);return gr||(gr=reactExports.createContext(null),hr.set(reactExports.createContext,gr)),gr}const ReactReduxContext=getContext();function createReduxContextHook(mr=ReactReduxContext){return function(){return reactExports.useContext(mr)}}const useReduxContext=createReduxContextHook(),notInitialized=()=>{throw new Error("uSES not initialized!")};let useSyncExternalStoreWithSelector=notInitialized;const initializeUseSelector=mr=>{useSyncExternalStoreWithSelector=mr},refEquality=(mr,hr)=>mr===hr;function createSelectorHook(mr=ReactReduxContext){const hr=mr===ReactReduxContext?useReduxContext:createReduxContextHook(mr);return function(vr,xr={}){const{equalityFn:Er=refEquality,stabilityCheck:Cr=void 0,noopCheck:wr=void 0}=typeof xr=="function"?{equalityFn:xr}:xr,{store:Rr,subscription:kr,getServerState:Dr,stabilityCheck:Br,noopCheck:Hr}=hr();reactExports.useRef(!0);const Gr=reactExports.useCallback({[vr.name](zr){return vr(zr)}}[vr.name],[vr,Br,Cr]),qr=useSyncExternalStoreWithSelector(kr.addNestedSub,Rr.getState,Dr||Rr.getState,Gr,Er);return reactExports.useDebugValue(qr),qr}}const useSelector=createSelectorHook();var reactIs_production_min={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b$1=Symbol.for("react.element"),c$2=Symbol.for("react.portal"),d$2=Symbol.for("react.fragment"),e=Symbol.for("react.strict_mode"),f$1=Symbol.for("react.profiler"),g$1=Symbol.for("react.provider"),h$3=Symbol.for("react.context"),k$1=Symbol.for("react.server_context"),l$1=Symbol.for("react.forward_ref"),m$1=Symbol.for("react.suspense"),n$1=Symbol.for("react.suspense_list"),p$2=Symbol.for("react.memo"),q$3=Symbol.for("react.lazy"),t=Symbol.for("react.offscreen"),u$2;u$2=Symbol.for("react.module.reference");function v$2(mr){if(typeof mr=="object"&&mr!==null){var hr=mr.$$typeof;switch(hr){case b$1:switch(mr=mr.type,mr){case d$2:case f$1:case e:case m$1:case n$1:return mr;default:switch(mr=mr&&mr.$$typeof,mr){case k$1:case h$3:case l$1:case q$3:case p$2:case g$1:return mr;default:return hr}}case c$2:return hr}}}reactIs_production_min.ContextConsumer=h$3;reactIs_production_min.ContextProvider=g$1;reactIs_production_min.Element=b$1;reactIs_production_min.ForwardRef=l$1;reactIs_production_min.Fragment=d$2;reactIs_production_min.Lazy=q$3;reactIs_production_min.Memo=p$2;reactIs_production_min.Portal=c$2;reactIs_production_min.Profiler=f$1;reactIs_production_min.StrictMode=e;reactIs_production_min.Suspense=m$1;reactIs_production_min.SuspenseList=n$1;reactIs_production_min.isAsyncMode=function(){return!1};reactIs_production_min.isConcurrentMode=function(){return!1};reactIs_production_min.isContextConsumer=function(mr){return v$2(mr)===h$3};reactIs_production_min.isContextProvider=function(mr){return v$2(mr)===g$1};reactIs_production_min.isElement=function(mr){return typeof mr=="object"&&mr!==null&&mr.$$typeof===b$1};reactIs_production_min.isForwardRef=function(mr){return v$2(mr)===l$1};reactIs_production_min.isFragment=function(mr){return v$2(mr)===d$2};reactIs_production_min.isLazy=function(mr){return v$2(mr)===q$3};reactIs_production_min.isMemo=function(mr){return v$2(mr)===p$2};reactIs_production_min.isPortal=function(mr){return v$2(mr)===c$2};reactIs_production_min.isProfiler=function(mr){return v$2(mr)===f$1};reactIs_production_min.isStrictMode=function(mr){return v$2(mr)===e};reactIs_production_min.isSuspense=function(mr){return v$2(mr)===m$1};reactIs_production_min.isSuspenseList=function(mr){return v$2(mr)===n$1};reactIs_production_min.isValidElementType=function(mr){return typeof mr=="string"||typeof mr=="function"||mr===d$2||mr===f$1||mr===e||mr===m$1||mr===n$1||mr===t||typeof mr=="object"&&mr!==null&&(mr.$$typeof===q$3||mr.$$typeof===p$2||mr.$$typeof===g$1||mr.$$typeof===h$3||mr.$$typeof===l$1||mr.$$typeof===u$2||mr.getModuleId!==void 0)};reactIs_production_min.typeOf=v$2;function is(mr,hr){return mr===hr?mr!==0||hr!==0||1/mr===1/hr:mr!==mr&&hr!==hr}function shallowEqual$1(mr,hr){if(is(mr,hr))return!0;if(typeof mr!="object"||mr===null||typeof hr!="object"||hr===null)return!1;const gr=Object.keys(mr),vr=Object.keys(hr);if(gr.length!==vr.length)return!1;for(let xr=0;xr<gr.length;xr++)if(!Object.prototype.hasOwnProperty.call(hr,gr[xr])||!is(mr[gr[xr]],hr[gr[xr]]))return!1;return!0}function createStoreHook(mr=ReactReduxContext){const hr=mr===ReactReduxContext?useReduxContext:createReduxContextHook(mr);return function(){const{store:vr}=hr();return vr}}const useStore=createStoreHook();function createDispatchHook(mr=ReactReduxContext){const hr=mr===ReactReduxContext?useStore:createStoreHook(mr);return function(){return hr().dispatch}}const useDispatch=createDispatchHook();initializeUseSelector(withSelectorExports.useSyncExternalStoreWithSelector);var __spreadArray$1=function(mr,hr){for(var gr=0,vr=hr.length,xr=mr.length;gr<vr;gr++,xr++)mr[xr]=hr[gr];return mr},__defProp$1=Object.defineProperty,__defProps$1=Object.defineProperties,__getOwnPropDescs$1=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$1=Object.getOwnPropertySymbols,__hasOwnProp$1=Object.prototype.hasOwnProperty,__propIsEnum$1=Object.prototype.propertyIsEnumerable,__defNormalProp$1=function(mr,hr,gr){return hr in mr?__defProp$1(mr,hr,{enumerable:!0,configurable:!0,writable:!0,value:gr}):mr[hr]=gr},__spreadValues$1=function(mr,hr){for(var gr in hr||(hr={}))__hasOwnProp$1.call(hr,gr)&&__defNormalProp$1(mr,gr,hr[gr]);if(__getOwnPropSymbols$1)for(var vr=0,xr=__getOwnPropSymbols$1(hr);vr<xr.length;vr++){var gr=xr[vr];__propIsEnum$1.call(hr,gr)&&__defNormalProp$1(mr,gr,hr[gr])}return mr},__spreadProps$1=function(mr,hr){return __defProps$1(mr,__getOwnPropDescs$1(hr))};function useStableQueryArgs(mr,hr,gr,vr){var xr=reactExports.useMemo(function(){return{queryArgs:mr,serialized:typeof mr=="object"?hr({queryArgs:mr,endpointDefinition:gr,endpointName:vr}):mr}},[mr,hr,gr,vr]),Er=reactExports.useRef(xr);return reactExports.useEffect(function(){Er.current.serialized!==xr.serialized&&(Er.current=xr)},[xr]),Er.current.serialized===xr.serialized?Er.current.queryArgs:mr}var UNINITIALIZED_VALUE=Symbol();function useShallowStableValue(mr){var hr=reactExports.useRef(mr);return reactExports.useEffect(function(){shallowEqual$1(hr.current,mr)||(hr.current=mr)},[mr]),shallowEqual$1(hr.current,mr)?hr.current:mr}var cache=WeakMap?new WeakMap:void 0,defaultSerializeQueryArgs=function(mr){var hr=mr.endpointName,gr=mr.queryArgs,vr="",xr=cache?.get(gr);if(typeof xr=="string")vr=xr;else{var Er=JSON.stringify(gr,function(Cr,wr){return isPlainObject$7(wr)?Object.keys(wr).sort().reduce(function(Rr,kr){return Rr[kr]=wr[kr],Rr},{}):wr});isPlainObject$7(gr)&&cache?.set(gr,Er),vr=Er}return hr+"("+vr+")"},useIsomorphicLayoutEffect$2=typeof window<"u"&&window.document&&window.document.createElement?reactExports.useLayoutEffect:reactExports.useEffect,defaultMutationStateSelector=function(mr){return mr},noPendingQueryStateSelector=function(mr){return mr.isUninitialized?__spreadProps$1(__spreadValues$1({},mr),{isUninitialized:!1,isFetching:!0,isLoading:mr.data===void 0,status:QueryStatus.pending}):mr};function buildHooks(mr){var hr=mr.api,gr=mr.moduleOptions,vr=gr.batch,xr=gr.useDispatch,Er=gr.useSelector,Cr=gr.useStore,wr=gr.unstable__sideEffectsInRender,Rr=mr.serializeQueryArgs,kr=mr.context,Dr=wr?function(zr){return zr()}:reactExports.useEffect;return{buildQueryHooks:Gr,buildMutationHook:qr,usePrefetch:Hr};function Br(zr,Qr,sn){if(Qr?.endpointName&&zr.isUninitialized){var hn=Qr.endpointName,vn=kr.endpointDefinitions[hn];Rr({queryArgs:Qr.originalArgs,endpointDefinition:vn,endpointName:hn})===Rr({queryArgs:sn,endpointDefinition:vn,endpointName:hn})&&(Qr=void 0)}var yn=zr.isSuccess?zr.data:Qr?.data;yn===void 0&&(yn=zr.data);var gn=yn!==void 0,bn=zr.isLoading,xn=!gn&&bn,$n=zr.isSuccess||bn&&gn;return __spreadProps$1(__spreadValues$1({},zr),{data:yn,currentData:zr.data,isFetching:bn,isLoading:xn,isSuccess:$n})}function Hr(zr,Qr){var sn=xr(),hn=useShallowStableValue(Qr);return reactExports.useCallback(function(vn,yn){return sn(hr.util.prefetch(zr,vn,__spreadValues$1(__spreadValues$1({},hn),yn)))},[zr,sn,hn])}function Gr(zr){var Qr=function(vn,yn){var gn=yn===void 0?{}:yn,bn=gn.refetchOnReconnect,xn=gn.refetchOnFocus,$n=gn.refetchOnMountOrArgChange,Sn=gn.skip,Cn=Sn===void 0?!1:Sn,Rn=gn.pollingInterval,Bn=Rn===void 0?0:Rn,Fn=hr.endpoints[zr].initiate,Hn=xr(),Gn=useStableQueryArgs(Cn?skipToken:vn,defaultSerializeQueryArgs,kr.endpointDefinitions[zr],zr),qn=useShallowStableValue({refetchOnReconnect:bn,refetchOnFocus:xn,pollingInterval:Bn}),On=reactExports.useRef(!1),wn=reactExports.useRef(),_n=wn.current||{},Tn=_n.queryCacheKey,Mn=_n.requestId,Ln=!1;if(Tn&&Mn){var jn=Hn(hr.internalActions.internal_probeSubscription({queryCacheKey:Tn,requestId:Mn}));Ln=!!jn}var Kn=!Ln&&On.current;return Dr(function(){On.current=Ln}),Dr(function(){Kn&&(wn.current=void 0)},[Kn]),Dr(function(){var Nn,An=wn.current;if(typeof process<"u",Gn===skipToken){An?.unsubscribe(),wn.current=void 0;return}var kn=(Nn=wn.current)==null?void 0:Nn.subscriptionOptions;if(!An||An.arg!==Gn){An?.unsubscribe();var Dn=Hn(Fn(Gn,{subscriptionOptions:qn,forceRefetch:$n}));wn.current=Dn}else qn!==kn&&An.updateSubscriptionOptions(qn)},[Hn,Fn,$n,Gn,qn,Kn]),reactExports.useEffect(function(){return function(){var Nn;(Nn=wn.current)==null||Nn.unsubscribe(),wn.current=void 0}},[]),reactExports.useMemo(function(){return{refetch:function(){var Nn;if(!wn.current)throw new Error("Cannot refetch a query that has not been started yet.");return(Nn=wn.current)==null?void 0:Nn.refetch()}}},[])},sn=function(vn){var yn=vn===void 0?{}:vn,gn=yn.refetchOnReconnect,bn=yn.refetchOnFocus,xn=yn.pollingInterval,$n=xn===void 0?0:xn,Sn=hr.endpoints[zr].initiate,Cn=xr(),Rn=reactExports.useState(UNINITIALIZED_VALUE),Bn=Rn[0],Fn=Rn[1],Hn=reactExports.useRef(),Gn=useShallowStableValue({refetchOnReconnect:gn,refetchOnFocus:bn,pollingInterval:$n});Dr(function(){var wn,_n,Tn=(wn=Hn.current)==null?void 0:wn.subscriptionOptions;Gn!==Tn&&((_n=Hn.current)==null||_n.updateSubscriptionOptions(Gn))},[Gn]);var qn=reactExports.useRef(Gn);Dr(function(){qn.current=Gn},[Gn]);var On=reactExports.useCallback(function(wn,_n){_n===void 0&&(_n=!1);var Tn;return vr(function(){var Mn;(Mn=Hn.current)==null||Mn.unsubscribe(),Hn.current=Tn=Cn(Sn(wn,{subscriptionOptions:qn.current,forceRefetch:!_n})),Fn(wn)}),Tn},[Cn,Sn]);return reactExports.useEffect(function(){return function(){var wn;(wn=Hn?.current)==null||wn.unsubscribe()}},[]),reactExports.useEffect(function(){Bn!==UNINITIALIZED_VALUE&&!Hn.current&&On(Bn,!0)},[Bn,On]),reactExports.useMemo(function(){return[On,Bn]},[On,Bn])},hn=function(vn,yn){var gn=yn===void 0?{}:yn,bn=gn.skip,xn=bn===void 0?!1:bn,$n=gn.selectFromResult,Sn=hr.endpoints[zr].select,Cn=useStableQueryArgs(xn?skipToken:vn,Rr,kr.endpointDefinitions[zr],zr),Rn=reactExports.useRef(),Bn=reactExports.useMemo(function(){return createSelector([Sn(Cn),function(On,wn){return wn},function(On){return Cn}],Br)},[Sn,Cn]),Fn=reactExports.useMemo(function(){return $n?createSelector([Bn],$n):Bn},[Bn,$n]),Hn=Er(function(On){return Fn(On,Rn.current)},shallowEqual$1),Gn=Cr(),qn=Bn(Gn.getState(),Rn.current);return useIsomorphicLayoutEffect$2(function(){Rn.current=qn},[qn]),Hn};return{useQueryState:hn,useQuerySubscription:Qr,useLazyQuerySubscription:sn,useLazyQuery:function(vn){var yn=sn(vn),gn=yn[0],bn=yn[1],xn=hn(bn,__spreadProps$1(__spreadValues$1({},vn),{skip:bn===UNINITIALIZED_VALUE})),$n=reactExports.useMemo(function(){return{lastArg:bn}},[bn]);return reactExports.useMemo(function(){return[gn,xn,$n]},[gn,xn,$n])},useQuery:function(vn,yn){var gn=Qr(vn,yn),bn=hn(vn,__spreadValues$1({selectFromResult:vn===skipToken||yn?.skip?void 0:noPendingQueryStateSelector},yn)),xn=bn.data,$n=bn.status,Sn=bn.isLoading,Cn=bn.isSuccess,Rn=bn.isError,Bn=bn.error;return reactExports.useDebugValue({data:xn,status:$n,isLoading:Sn,isSuccess:Cn,isError:Rn,error:Bn}),reactExports.useMemo(function(){return __spreadValues$1(__spreadValues$1({},bn),gn)},[bn,gn])}}}function qr(zr){return function(Qr){var sn=Qr===void 0?{}:Qr,hn=sn.selectFromResult,vn=hn===void 0?defaultMutationStateSelector:hn,yn=sn.fixedCacheKey,gn=hr.endpoints[zr],bn=gn.select,xn=gn.initiate,$n=xr(),Sn=reactExports.useState(),Cn=Sn[0],Rn=Sn[1];reactExports.useEffect(function(){return function(){Cn?.arg.fixedCacheKey||Cn?.reset()}},[Cn]);var Bn=reactExports.useCallback(function(An){var kn=$n(xn(An,{fixedCacheKey:yn}));return Rn(kn),kn},[$n,xn,yn]),Fn=(Cn||{}).requestId,Hn=reactExports.useMemo(function(){return createSelector([bn({fixedCacheKey:yn,requestId:Cn?.requestId})],vn)},[bn,Cn,vn,yn]),Gn=Er(Hn,shallowEqual$1),qn=yn==null?Cn?.arg.originalArgs:void 0,On=reactExports.useCallback(function(){vr(function(){Cn&&Rn(void 0),yn&&$n(hr.internalActions.removeMutationResult({requestId:Fn,fixedCacheKey:yn}))})},[$n,yn,Cn,Fn]),wn=Gn.endpointName,_n=Gn.data,Tn=Gn.status,Mn=Gn.isLoading,Ln=Gn.isSuccess,jn=Gn.isError,Kn=Gn.error;reactExports.useDebugValue({endpointName:wn,data:_n,status:Tn,isLoading:Mn,isSuccess:Ln,isError:jn,error:Kn});var Nn=reactExports.useMemo(function(){return __spreadProps$1(__spreadValues$1({},Gn),{originalArgs:qn,reset:On})},[Gn,qn,On]);return reactExports.useMemo(function(){return[Bn,Nn]},[Bn,Nn])}}}var DefinitionType;(function(mr){mr.query="query",mr.mutation="mutation"})(DefinitionType||(DefinitionType={}));function isQueryDefinition(mr){return mr.type===DefinitionType.query}function isMutationDefinition(mr){return mr.type===DefinitionType.mutation}function capitalize$2(mr){return mr.replace(mr[0],mr[0].toUpperCase())}function safeAssign(mr){for(var hr=[],gr=1;gr<arguments.length;gr++)hr[gr-1]=arguments[gr];Object.assign.apply(Object,__spreadArray$1([mr],hr))}var reactHooksModuleName=Symbol(),reactHooksModule=function(mr){var hr={},gr=hr.batch,vr=gr===void 0?reactDomExports.unstable_batchedUpdates:gr,xr=hr.useDispatch,Er=xr===void 0?useDispatch:xr,Cr=hr.useSelector,wr=Cr===void 0?useSelector:Cr,Rr=hr.useStore,kr=Rr===void 0?useStore:Rr,Dr=hr.unstable__sideEffectsInRender,Br=Dr===void 0?!1:Dr;return{name:reactHooksModuleName,init:function(Hr,Gr,qr){var zr=Gr.serializeQueryArgs,Qr=Hr,sn=buildHooks({api:Hr,moduleOptions:{batch:vr,useDispatch:Er,useSelector:wr,useStore:kr,unstable__sideEffectsInRender:Br},serializeQueryArgs:zr,context:qr}),hn=sn.buildQueryHooks,vn=sn.buildMutationHook,yn=sn.usePrefetch;return safeAssign(Qr,{usePrefetch:yn}),safeAssign(qr,{batch:vr}),{injectEndpoint:function(gn,bn){if(isQueryDefinition(bn)){var xn=hn(gn),$n=xn.useQuery,Sn=xn.useLazyQuery,Cn=xn.useLazyQuerySubscription,Rn=xn.useQueryState,Bn=xn.useQuerySubscription;safeAssign(Qr.endpoints[gn],{useQuery:$n,useLazyQuery:Sn,useLazyQuerySubscription:Cn,useQueryState:Rn,useQuerySubscription:Bn}),Hr["use"+capitalize$2(gn)+"Query"]=$n,Hr["useLazy"+capitalize$2(gn)+"Query"]=Sn}else if(isMutationDefinition(bn)){var Fn=vn(gn);safeAssign(Qr.endpoints[gn],{useMutation:Fn}),Hr["use"+capitalize$2(gn)+"Mutation"]=Fn}}}}}},createApi=buildCreateApi(coreModule(),reactHooksModule()),_mapping={};(function(mr){mr.aliasToReal={each:"forEach",eachRight:"forEachRight",entries:"toPairs",entriesIn:"toPairsIn",extend:"assignIn",extendAll:"assignInAll",extendAllWith:"assignInAllWith",extendWith:"assignInWith",first:"head",conforms:"conformsTo",matches:"isMatch",property:"get",__:"placeholder",F:"stubFalse",T:"stubTrue",all:"every",allPass:"overEvery",always:"constant",any:"some",anyPass:"overSome",apply:"spread",assoc:"set",assocPath:"set",complement:"negate",compose:"flowRight",contains:"includes",dissoc:"unset",dissocPath:"unset",dropLast:"dropRight",dropLastWhile:"dropRightWhile",equals:"isEqual",identical:"eq",indexBy:"keyBy",init:"initial",invertObj:"invert",juxt:"over",omitAll:"omit",nAry:"ary",path:"get",pathEq:"matchesProperty",pathOr:"getOr",paths:"at",pickAll:"pick",pipe:"flow",pluck:"map",prop:"get",propEq:"matchesProperty",propOr:"getOr",props:"at",symmetricDifference:"xor",symmetricDifferenceBy:"xorBy",symmetricDifferenceWith:"xorWith",takeLast:"takeRight",takeLastWhile:"takeRightWhile",unapply:"rest",unnest:"flatten",useWith:"overArgs",where:"conformsTo",whereEq:"isMatch",zipObj:"zipObject"},mr.aryMethod={1:["assignAll","assignInAll","attempt","castArray","ceil","create","curry","curryRight","defaultsAll","defaultsDeepAll","floor","flow","flowRight","fromPairs","invert","iteratee","memoize","method","mergeAll","methodOf","mixin","nthArg","over","overEvery","overSome","rest","reverse","round","runInContext","spread","template","trim","trimEnd","trimStart","uniqueId","words","zipAll"],2:["add","after","ary","assign","assignAllWith","assignIn","assignInAllWith","at","before","bind","bindAll","bindKey","chunk","cloneDeepWith","cloneWith","concat","conformsTo","countBy","curryN","curryRightN","debounce","defaults","defaultsDeep","defaultTo","delay","difference","divide","drop","dropRight","dropRightWhile","dropWhile","endsWith","eq","every","filter","find","findIndex","findKey","findLast","findLastIndex","findLastKey","flatMap","flatMapDeep","flattenDepth","forEach","forEachRight","forIn","forInRight","forOwn","forOwnRight","get","groupBy","gt","gte","has","hasIn","includes","indexOf","intersection","invertBy","invoke","invokeMap","isEqual","isMatch","join","keyBy","lastIndexOf","lt","lte","map","mapKeys","mapValues","matchesProperty","maxBy","meanBy","merge","mergeAllWith","minBy","multiply","nth","omit","omitBy","overArgs","pad","padEnd","padStart","parseInt","partial","partialRight","partition","pick","pickBy","propertyOf","pull","pullAll","pullAt","random","range","rangeRight","rearg","reject","remove","repeat","restFrom","result","sampleSize","some","sortBy","sortedIndex","sortedIndexOf","sortedLastIndex","sortedLastIndexOf","sortedUniqBy","split","spreadFrom","startsWith","subtract","sumBy","take","takeRight","takeRightWhile","takeWhile","tap","throttle","thru","times","trimChars","trimCharsEnd","trimCharsStart","truncate","union","uniqBy","uniqWith","unset","unzipWith","without","wrap","xor","zip","zipObject","zipObjectDeep"],3:["assignInWith","assignWith","clamp","differenceBy","differenceWith","findFrom","findIndexFrom","findLastFrom","findLastIndexFrom","getOr","includesFrom","indexOfFrom","inRange","intersectionBy","intersectionWith","invokeArgs","invokeArgsMap","isEqualWith","isMatchWith","flatMapDepth","lastIndexOfFrom","mergeWith","orderBy","padChars","padCharsEnd","padCharsStart","pullAllBy","pullAllWith","rangeStep","rangeStepRight","reduce","reduceRight","replace","set","slice","sortedIndexBy","sortedLastIndexBy","transform","unionBy","unionWith","update","xorBy","xorWith","zipWith"],4:["fill","setWith","updateWith"]},mr.aryRearg={2:[1,0],3:[2,0,1],4:[3,2,0,1]},mr.iterateeAry={dropRightWhile:1,dropWhile:1,every:1,filter:1,find:1,findFrom:1,findIndex:1,findIndexFrom:1,findKey:1,findLast:1,findLastFrom:1,findLastIndex:1,findLastIndexFrom:1,findLastKey:1,flatMap:1,flatMapDeep:1,flatMapDepth:1,forEach:1,forEachRight:1,forIn:1,forInRight:1,forOwn:1,forOwnRight:1,map:1,mapKeys:1,mapValues:1,partition:1,reduce:2,reduceRight:2,reject:1,remove:1,some:1,takeRightWhile:1,takeWhile:1,times:1,transform:2},mr.iterateeRearg={mapKeys:[1],reduceRight:[1,0]},mr.methodRearg={assignInAllWith:[1,0],assignInWith:[1,2,0],assignAllWith:[1,0],assignWith:[1,2,0],differenceBy:[1,2,0],differenceWith:[1,2,0],getOr:[2,1,0],intersectionBy:[1,2,0],intersectionWith:[1,2,0],isEqualWith:[1,2,0],isMatchWith:[2,1,0],mergeAllWith:[1,0],mergeWith:[1,2,0],padChars:[2,1,0],padCharsEnd:[2,1,0],padCharsStart:[2,1,0],pullAllBy:[2,1,0],pullAllWith:[2,1,0],rangeStep:[1,2,0],rangeStepRight:[1,2,0],setWith:[3,1,2,0],sortedIndexBy:[2,1,0],sortedLastIndexBy:[2,1,0],unionBy:[1,2,0],unionWith:[1,2,0],updateWith:[3,1,2,0],xorBy:[1,2,0],xorWith:[1,2,0],zipWith:[1,2,0]},mr.methodSpread={assignAll:{start:0},assignAllWith:{start:0},assignInAll:{start:0},assignInAllWith:{start:0},defaultsAll:{start:0},defaultsDeepAll:{start:0},invokeArgs:{start:2},invokeArgsMap:{start:2},mergeAll:{start:0},mergeAllWith:{start:0},partial:{start:1},partialRight:{start:1},without:{start:1},zipAll:{start:0}},mr.mutate={array:{fill:!0,pull:!0,pullAll:!0,pullAllBy:!0,pullAllWith:!0,pullAt:!0,remove:!0,reverse:!0},object:{assign:!0,assignAll:!0,assignAllWith:!0,assignIn:!0,assignInAll:!0,assignInAllWith:!0,assignInWith:!0,assignWith:!0,defaults:!0,defaultsAll:!0,defaultsDeep:!0,defaultsDeepAll:!0,merge:!0,mergeAll:!0,mergeAllWith:!0,mergeWith:!0},set:{set:!0,setWith:!0,unset:!0,update:!0,updateWith:!0}},mr.realToAlias=function(){var hr=Object.prototype.hasOwnProperty,gr=mr.aliasToReal,vr={};for(var xr in gr){var Er=gr[xr];hr.call(vr,Er)?vr[Er].push(xr):vr[Er]=[xr]}return vr}(),mr.remap={assignAll:"assign",assignAllWith:"assignWith",assignInAll:"assignIn",assignInAllWith:"assignInWith",curryN:"curry",curryRightN:"curryRight",defaultsAll:"defaults",defaultsDeepAll:"defaultsDeep",findFrom:"find",findIndexFrom:"findIndex",findLastFrom:"findLast",findLastIndexFrom:"findLastIndex",getOr:"get",includesFrom:"includes",indexOfFrom:"indexOf",invokeArgs:"invoke",invokeArgsMap:"invokeMap",lastIndexOfFrom:"lastIndexOf",mergeAll:"merge",mergeAllWith:"mergeWith",padChars:"pad",padCharsEnd:"padEnd",padCharsStart:"padStart",propertyOf:"get",rangeStep:"range",rangeStepRight:"rangeRight",restFrom:"rest",spreadFrom:"spread",trimChars:"trim",trimCharsEnd:"trimEnd",trimCharsStart:"trimStart",zipAll:"zip"},mr.skipFixed={castArray:!0,flow:!0,flowRight:!0,iteratee:!0,mixin:!0,rearg:!0,runInContext:!0},mr.skipRearg={add:!0,assign:!0,assignIn:!0,bind:!0,bindKey:!0,concat:!0,difference:!0,divide:!0,eq:!0,gt:!0,gte:!0,isEqual:!0,lt:!0,lte:!0,matchesProperty:!0,merge:!0,multiply:!0,overArgs:!0,partial:!0,partialRight:!0,propertyOf:!0,random:!0,range:!0,rangeRight:!0,subtract:!0,zip:!0,zipObject:!0,zipObjectDeep:!0}})(_mapping);var placeholder,hasRequiredPlaceholder;function requirePlaceholder(){return hasRequiredPlaceholder||(hasRequiredPlaceholder=1,placeholder={}),placeholder}var mapping=_mapping,fallbackHolder=requirePlaceholder(),push$1=Array.prototype.push;function baseArity(mr,hr){return hr==2?function(gr,vr){return mr.apply(void 0,arguments)}:function(gr){return mr.apply(void 0,arguments)}}function baseAry(mr,hr){return hr==2?function(gr,vr){return mr(gr,vr)}:function(gr){return mr(gr)}}function cloneArray(mr){for(var hr=mr?mr.length:0,gr=Array(hr);hr--;)gr[hr]=mr[hr];return gr}function createCloner(mr){return function(hr){return mr({},hr)}}function flatSpread(mr,hr){return function(){for(var gr=arguments.length,vr=gr-1,xr=Array(gr);gr--;)xr[gr]=arguments[gr];var Er=xr[hr],Cr=xr.slice(0,hr);return Er&&push$1.apply(Cr,Er),hr!=vr&&push$1.apply(Cr,xr.slice(hr+1)),mr.apply(this,Cr)}}function wrapImmutable(mr,hr){return function(){var gr=arguments.length;if(gr){for(var vr=Array(gr);gr--;)vr[gr]=arguments[gr];var xr=vr[0]=hr.apply(void 0,vr);return mr.apply(void 0,vr),xr}}}function baseConvert$1(mr,hr,gr,vr){var xr=typeof hr=="function",Er=hr===Object(hr);if(Er&&(vr=gr,gr=hr,hr=void 0),gr==null)throw new TypeError;vr||(vr={});var Cr={cap:"cap"in vr?vr.cap:!0,curry:"curry"in vr?vr.curry:!0,fixed:"fixed"in vr?vr.fixed:!0,immutable:"immutable"in vr?vr.immutable:!0,rearg:"rearg"in vr?vr.rearg:!0},wr=xr?gr:fallbackHolder,Rr="curry"in vr&&vr.curry,kr="fixed"in vr&&vr.fixed,Dr="rearg"in vr&&vr.rearg,Br=xr?gr.runInContext():void 0,Hr=xr?gr:{ary:mr.ary,assign:mr.assign,clone:mr.clone,curry:mr.curry,forEach:mr.forEach,isArray:mr.isArray,isError:mr.isError,isFunction:mr.isFunction,isWeakMap:mr.isWeakMap,iteratee:mr.iteratee,keys:mr.keys,rearg:mr.rearg,toInteger:mr.toInteger,toPath:mr.toPath},Gr=Hr.ary,qr=Hr.assign,zr=Hr.clone,Qr=Hr.curry,sn=Hr.forEach,hn=Hr.isArray,vn=Hr.isError,yn=Hr.isFunction,gn=Hr.isWeakMap,bn=Hr.keys,xn=Hr.rearg,$n=Hr.toInteger,Sn=Hr.toPath,Cn=bn(mapping.aryMethod),Rn={castArray:function(Nn){return function(){var An=arguments[0];return hn(An)?Nn(cloneArray(An)):Nn.apply(void 0,arguments)}},iteratee:function(Nn){return function(){var An=arguments[0],kn=arguments[1],Dn=Nn(An,kn),Vn=Dn.length;return Cr.cap&&typeof kn=="number"?(kn=kn>2?kn-2:1,Vn&&Vn<=kn?Dn:baseAry(Dn,kn)):Dn}},mixin:function(Nn){return function(An){var kn=this;if(!yn(kn))return Nn(kn,Object(An));var Dn=[];return sn(bn(An),function(Vn){yn(An[Vn])&&Dn.push([Vn,kn.prototype[Vn]])}),Nn(kn,Object(An)),sn(Dn,function(Vn){var zn=Vn[1];yn(zn)?kn.prototype[Vn[0]]=zn:delete kn.prototype[Vn[0]]}),kn}},nthArg:function(Nn){return function(An){var kn=An<0?1:$n(An)+1;return Qr(Nn(An),kn)}},rearg:function(Nn){return function(An,kn){var Dn=kn?kn.length:0;return Qr(Nn(An,kn),Dn)}},runInContext:function(Nn){return function(An){return baseConvert$1(mr,Nn(An),vr)}}};function Bn(Nn,An){if(Cr.cap){var kn=mapping.iterateeRearg[Nn];if(kn)return Tn(An,kn);var Dn=!xr&&mapping.iterateeAry[Nn];if(Dn)return _n(An,Dn)}return An}function Fn(Nn,An,kn){return Rr||Cr.curry&&kn>1?Qr(An,kn):An}function Hn(Nn,An,kn){if(Cr.fixed&&(kr||!mapping.skipFixed[Nn])){var Dn=mapping.methodSpread[Nn],Vn=Dn&&Dn.start;return Vn===void 0?Gr(An,kn):flatSpread(An,Vn)}return An}function Gn(Nn,An,kn){return Cr.rearg&&kn>1&&(Dr||!mapping.skipRearg[Nn])?xn(An,mapping.methodRearg[Nn]||mapping.aryRearg[kn]):An}function qn(Nn,An){An=Sn(An);for(var kn=-1,Dn=An.length,Vn=Dn-1,zn=zr(Object(Nn)),Xn=zn;Xn!=null&&++kn<Dn;){var Zn=An[kn],Pi=Xn[Zn];Pi!=null&&!(yn(Pi)||vn(Pi)||gn(Pi))&&(Xn[Zn]=zr(kn==Vn?Pi:Object(Pi))),Xn=Xn[Zn]}return zn}function On(Nn){return jn.runInContext.convert(Nn)(void 0)}function wn(Nn,An){var kn=mapping.aliasToReal[Nn]||Nn,Dn=mapping.remap[kn]||kn,Vn=vr;return function(zn){var Xn=xr?Br:Hr,Zn=xr?Br[Dn]:An,Pi=qr(qr({},Vn),zn);return baseConvert$1(Xn,kn,Zn,Pi)}}function _n(Nn,An){return Mn(Nn,function(kn){return typeof kn=="function"?baseAry(kn,An):kn})}function Tn(Nn,An){return Mn(Nn,function(kn){var Dn=An.length;return baseArity(xn(baseAry(kn,Dn),An),Dn)})}function Mn(Nn,An){return function(){var kn=arguments.length;if(!kn)return Nn();for(var Dn=Array(kn);kn--;)Dn[kn]=arguments[kn];var Vn=Cr.rearg?0:kn-1;return Dn[Vn]=An(Dn[Vn]),Nn.apply(void 0,Dn)}}function Ln(Nn,An,kn){var Dn,Vn=mapping.aliasToReal[Nn]||Nn,zn=An,Xn=Rn[Vn];return Xn?zn=Xn(An):Cr.immutable&&(mapping.mutate.array[Vn]?zn=wrapImmutable(An,cloneArray):mapping.mutate.object[Vn]?zn=wrapImmutable(An,createCloner(An)):mapping.mutate.set[Vn]&&(zn=wrapImmutable(An,qn))),sn(Cn,function(Zn){return sn(mapping.aryMethod[Zn],function(Pi){if(Vn==Pi){var Ya=mapping.methodSpread[Vn],Bi=Ya&&Ya.afterRearg;return Dn=Bi?Hn(Vn,Gn(Vn,zn,Zn),Zn):Gn(Vn,Hn(Vn,zn,Zn),Zn),Dn=Bn(Vn,Dn),Dn=Fn(Vn,Dn,Zn),!1}}),!Dn}),Dn||(Dn=zn),Dn==An&&(Dn=Rr?Qr(Dn,1):function(){return An.apply(this,arguments)}),Dn.convert=wn(Vn,An),Dn.placeholder=An.placeholder=kn,Dn}if(!Er)return Ln(hr,gr,wr);var jn=gr,Kn=[];return sn(Cn,function(Nn){sn(mapping.aryMethod[Nn],function(An){var kn=jn[mapping.remap[An]||An];kn&&Kn.push([An,Ln(An,kn,jn)])})}),sn(bn(jn),function(Nn){var An=jn[Nn];if(typeof An=="function"){for(var kn=Kn.length;kn--;)if(Kn[kn][0]==Nn)return;An.convert=wn(Nn,An),Kn.push([Nn,An])}}),sn(Kn,function(Nn){jn[Nn[0]]=Nn[1]}),jn.convert=On,jn.placeholder=jn,sn(bn(jn),function(Nn){sn(mapping.realToAlias[Nn]||[],function(An){jn[An]=jn[Nn]})}),jn}var _baseConvert=baseConvert$1,getNative$4=_getNative,root$a=_root,WeakMap$3=getNative$4(root$a,"WeakMap"),_WeakMap=WeakMap$3,_metaMap,hasRequired_metaMap;function require_metaMap(){if(hasRequired_metaMap)return _metaMap;hasRequired_metaMap=1;var mr=_WeakMap,hr=mr&&new mr;return _metaMap=hr,_metaMap}var identity$1=identity_1,metaMap=require_metaMap(),baseSetData$2=metaMap?function(mr,hr){return metaMap.set(mr,hr),mr}:identity$1,_baseSetData=baseSetData$2,baseCreate$1=_baseCreate,isObject$c=isObject_1;function createCtor$4(mr){return function(){var hr=arguments;switch(hr.length){case 0:return new mr;case 1:return new mr(hr[0]);case 2:return new mr(hr[0],hr[1]);case 3:return new mr(hr[0],hr[1],hr[2]);case 4:return new mr(hr[0],hr[1],hr[2],hr[3]);case 5:return new mr(hr[0],hr[1],hr[2],hr[3],hr[4]);case 6:return new mr(hr[0],hr[1],hr[2],hr[3],hr[4],hr[5]);case 7:return new mr(hr[0],hr[1],hr[2],hr[3],hr[4],hr[5],hr[6])}var gr=baseCreate$1(mr.prototype),vr=mr.apply(gr,hr);return isObject$c(vr)?vr:gr}}var _createCtor=createCtor$4,createCtor$3=_createCtor,root$9=_root,WRAP_BIND_FLAG$6=1;function createBind$1(mr,hr,gr){var vr=hr&WRAP_BIND_FLAG$6,xr=createCtor$3(mr);function Er(){var Cr=this&&this!==root$9&&this instanceof Er?xr:mr;return Cr.apply(vr?gr:this,arguments)}return Er}var _createBind=createBind$1,nativeMax$3=Math.max;function composeArgs$2(mr,hr,gr,vr){for(var xr=-1,Er=mr.length,Cr=gr.length,wr=-1,Rr=hr.length,kr=nativeMax$3(Er-Cr,0),Dr=Array(Rr+kr),Br=!vr;++wr<Rr;)Dr[wr]=hr[wr];for(;++xr<Cr;)(Br||xr<Er)&&(Dr[gr[xr]]=mr[xr]);for(;kr--;)Dr[wr++]=mr[xr++];return Dr}var _composeArgs=composeArgs$2,nativeMax$2=Math.max;function composeArgsRight$2(mr,hr,gr,vr){for(var xr=-1,Er=mr.length,Cr=-1,wr=gr.length,Rr=-1,kr=hr.length,Dr=nativeMax$2(Er-wr,0),Br=Array(Dr+kr),Hr=!vr;++xr<Dr;)Br[xr]=mr[xr];for(var Gr=xr;++Rr<kr;)Br[Gr+Rr]=hr[Rr];for(;++Cr<wr;)(Hr||xr<Er)&&(Br[Gr+gr[Cr]]=mr[xr++]);return Br}var _composeArgsRight=composeArgsRight$2;function countHolders$1(mr,hr){for(var gr=mr.length,vr=0;gr--;)mr[gr]===hr&&++vr;return vr}var _countHolders=countHolders$1,_baseLodash,hasRequired_baseLodash;function require_baseLodash(){if(hasRequired_baseLodash)return _baseLodash;hasRequired_baseLodash=1;function mr(){}return _baseLodash=mr,_baseLodash}var _LazyWrapper,hasRequired_LazyWrapper;function require_LazyWrapper(){if(hasRequired_LazyWrapper)return _LazyWrapper;hasRequired_LazyWrapper=1;var mr=_baseCreate,hr=require_baseLodash(),gr=4294967295;function vr(xr){this.__wrapped__=xr,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=gr,this.__views__=[]}return vr.prototype=mr(hr.prototype),vr.prototype.constructor=vr,_LazyWrapper=vr,_LazyWrapper}function noop$4(){}var noop_1=noop$4,_getData,hasRequired_getData;function require_getData(){if(hasRequired_getData)return _getData;hasRequired_getData=1;var mr=require_metaMap(),hr=noop_1,gr=mr?function(vr){return mr.get(vr)}:hr;return _getData=gr,_getData}var _realNames,hasRequired_realNames;function require_realNames(){if(hasRequired_realNames)return _realNames;hasRequired_realNames=1;var mr={};return _realNames=mr,_realNames}var _getFuncName,hasRequired_getFuncName;function require_getFuncName(){if(hasRequired_getFuncName)return _getFuncName;hasRequired_getFuncName=1;var mr=require_realNames(),hr=Object.prototype,gr=hr.hasOwnProperty;function vr(xr){for(var Er=xr.name+"",Cr=mr[Er],wr=gr.call(mr,Er)?Cr.length:0;wr--;){var Rr=Cr[wr],kr=Rr.func;if(kr==null||kr==xr)return Rr.name}return Er}return _getFuncName=vr,_getFuncName}var _LodashWrapper,hasRequired_LodashWrapper;function require_LodashWrapper(){if(hasRequired_LodashWrapper)return _LodashWrapper;hasRequired_LodashWrapper=1;var mr=_baseCreate,hr=require_baseLodash();function gr(vr,xr){this.__wrapped__=vr,this.__actions__=[],this.__chain__=!!xr,this.__index__=0,this.__values__=void 0}return gr.prototype=mr(hr.prototype),gr.prototype.constructor=gr,_LodashWrapper=gr,_LodashWrapper}var _wrapperClone,hasRequired_wrapperClone;function require_wrapperClone(){if(hasRequired_wrapperClone)return _wrapperClone;hasRequired_wrapperClone=1;var mr=require_LazyWrapper(),hr=require_LodashWrapper(),gr=_copyArray;function vr(xr){if(xr instanceof mr)return xr.clone();var Er=new hr(xr.__wrapped__,xr.__chain__);return Er.__actions__=gr(xr.__actions__),Er.__index__=xr.__index__,Er.__values__=xr.__values__,Er}return _wrapperClone=vr,_wrapperClone}var wrapperLodash,hasRequiredWrapperLodash;function requireWrapperLodash(){if(hasRequiredWrapperLodash)return wrapperLodash;hasRequiredWrapperLodash=1;var mr=require_LazyWrapper(),hr=require_LodashWrapper(),gr=require_baseLodash(),vr=isArray_1,xr=isObjectLike_1,Er=require_wrapperClone(),Cr=Object.prototype,wr=Cr.hasOwnProperty;function Rr(kr){if(xr(kr)&&!vr(kr)&&!(kr instanceof mr)){if(kr instanceof hr)return kr;if(wr.call(kr,"__wrapped__"))return Er(kr)}return new hr(kr)}return Rr.prototype=gr.prototype,Rr.prototype.constructor=Rr,wrapperLodash=Rr,wrapperLodash}var _isLaziable,hasRequired_isLaziable;function require_isLaziable(){if(hasRequired_isLaziable)return _isLaziable;hasRequired_isLaziable=1;var mr=require_LazyWrapper(),hr=require_getData(),gr=require_getFuncName(),vr=requireWrapperLodash();function xr(Er){var Cr=gr(Er),wr=vr[Cr];if(typeof wr!="function"||!(Cr in mr.prototype))return!1;if(Er===wr)return!0;var Rr=hr(wr);return!!Rr&&Er===Rr[0]}return _isLaziable=xr,_isLaziable}var baseSetData$1=_baseSetData,shortOut=_shortOut,setData$3=shortOut(baseSetData$1),_setData=setData$3,reWrapDetails=/\{\n\/\* \[wrapped with (.+)\] \*/,reSplitDetails=/,? & /;function getWrapDetails$1(mr){var hr=mr.match(reWrapDetails);return hr?hr[1].split(reSplitDetails):[]}var _getWrapDetails=getWrapDetails$1,reWrapComment=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function insertWrapDetails$1(mr,hr){var gr=hr.length;if(!gr)return mr;var vr=gr-1;return hr[vr]=(gr>1?"& ":"")+hr[vr],hr=hr.join(gr>2?", ":" "),mr.replace(reWrapComment,`{
/* [wrapped with `+hr+`] */
`)}var _insertWrapDetails=insertWrapDetails$1;function arrayEach$3(mr,hr){for(var gr=-1,vr=mr==null?0:mr.length;++gr<vr&&hr(mr[gr],gr,mr)!==!1;);return mr}var _arrayEach=arrayEach$3,baseIndexOf=_baseIndexOf;function arrayIncludes$1(mr,hr){var gr=mr==null?0:mr.length;return!!gr&&baseIndexOf(mr,hr,0)>-1}var _arrayIncludes=arrayIncludes$1,arrayEach$2=_arrayEach,arrayIncludes=_arrayIncludes,WRAP_BIND_FLAG$5=1,WRAP_BIND_KEY_FLAG$4=2,WRAP_CURRY_FLAG$5=8,WRAP_CURRY_RIGHT_FLAG$2=16,WRAP_PARTIAL_FLAG$2=32,WRAP_PARTIAL_RIGHT_FLAG$2=64,WRAP_ARY_FLAG$3=128,WRAP_REARG_FLAG$2=256,WRAP_FLIP_FLAG$1=512,wrapFlags=[["ary",WRAP_ARY_FLAG$3],["bind",WRAP_BIND_FLAG$5],["bindKey",WRAP_BIND_KEY_FLAG$4],["curry",WRAP_CURRY_FLAG$5],["curryRight",WRAP_CURRY_RIGHT_FLAG$2],["flip",WRAP_FLIP_FLAG$1],["partial",WRAP_PARTIAL_FLAG$2],["partialRight",WRAP_PARTIAL_RIGHT_FLAG$2],["rearg",WRAP_REARG_FLAG$2]];function updateWrapDetails$1(mr,hr){return arrayEach$2(wrapFlags,function(gr){var vr="_."+gr[0];hr&gr[1]&&!arrayIncludes(mr,vr)&&mr.push(vr)}),mr.sort()}var _updateWrapDetails=updateWrapDetails$1,getWrapDetails=_getWrapDetails,insertWrapDetails=_insertWrapDetails,setToString=_setToString,updateWrapDetails=_updateWrapDetails;function setWrapToString$2(mr,hr,gr){var vr=hr+"";return setToString(mr,insertWrapDetails(vr,updateWrapDetails(getWrapDetails(vr),gr)))}var _setWrapToString=setWrapToString$2,isLaziable=require_isLaziable(),setData$2=_setData,setWrapToString$1=_setWrapToString,WRAP_BIND_FLAG$4=1,WRAP_BIND_KEY_FLAG$3=2,WRAP_CURRY_BOUND_FLAG$1=4,WRAP_CURRY_FLAG$4=8,WRAP_PARTIAL_FLAG$1=32,WRAP_PARTIAL_RIGHT_FLAG$1=64;function createRecurry$2(mr,hr,gr,vr,xr,Er,Cr,wr,Rr,kr){var Dr=hr&WRAP_CURRY_FLAG$4,Br=Dr?Cr:void 0,Hr=Dr?void 0:Cr,Gr=Dr?Er:void 0,qr=Dr?void 0:Er;hr|=Dr?WRAP_PARTIAL_FLAG$1:WRAP_PARTIAL_RIGHT_FLAG$1,hr&=~(Dr?WRAP_PARTIAL_RIGHT_FLAG$1:WRAP_PARTIAL_FLAG$1),hr&WRAP_CURRY_BOUND_FLAG$1||(hr&=~(WRAP_BIND_FLAG$4|WRAP_BIND_KEY_FLAG$3));var zr=[mr,hr,xr,Gr,Br,qr,Hr,wr,Rr,kr],Qr=gr.apply(void 0,zr);return isLaziable(mr)&&setData$2(Qr,zr),Qr.placeholder=vr,setWrapToString$1(Qr,mr,hr)}var _createRecurry=createRecurry$2;function getHolder$2(mr){var hr=mr;return hr.placeholder}var _getHolder=getHolder$2,copyArray$3=_copyArray,isIndex$1=_isIndex,nativeMin$2=Math.min;function reorder$1(mr,hr){for(var gr=mr.length,vr=nativeMin$2(hr.length,gr),xr=copyArray$3(mr);vr--;){var Er=hr[vr];mr[vr]=isIndex$1(Er,gr)?xr[Er]:void 0}return mr}var _reorder=reorder$1,PLACEHOLDER$1="__lodash_placeholder__";function replaceHolders$3(mr,hr){for(var gr=-1,vr=mr.length,xr=0,Er=[];++gr<vr;){var Cr=mr[gr];(Cr===hr||Cr===PLACEHOLDER$1)&&(mr[gr]=PLACEHOLDER$1,Er[xr++]=gr)}return Er}var _replaceHolders=replaceHolders$3,composeArgs$1=_composeArgs,composeArgsRight$1=_composeArgsRight,countHolders=_countHolders,createCtor$2=_createCtor,createRecurry$1=_createRecurry,getHolder$1=_getHolder,reorder=_reorder,replaceHolders$2=_replaceHolders,root$8=_root,WRAP_BIND_FLAG$3=1,WRAP_BIND_KEY_FLAG$2=2,WRAP_CURRY_FLAG$3=8,WRAP_CURRY_RIGHT_FLAG$1=16,WRAP_ARY_FLAG$2=128,WRAP_FLIP_FLAG=512;function createHybrid$2(mr,hr,gr,vr,xr,Er,Cr,wr,Rr,kr){var Dr=hr&WRAP_ARY_FLAG$2,Br=hr&WRAP_BIND_FLAG$3,Hr=hr&WRAP_BIND_KEY_FLAG$2,Gr=hr&(WRAP_CURRY_FLAG$3|WRAP_CURRY_RIGHT_FLAG$1),qr=hr&WRAP_FLIP_FLAG,zr=Hr?void 0:createCtor$2(mr);function Qr(){for(var sn=arguments.length,hn=Array(sn),vn=sn;vn--;)hn[vn]=arguments[vn];if(Gr)var yn=getHolder$1(Qr),gn=countHolders(hn,yn);if(vr&&(hn=composeArgs$1(hn,vr,xr,Gr)),Er&&(hn=composeArgsRight$1(hn,Er,Cr,Gr)),sn-=gn,Gr&&sn<kr){var bn=replaceHolders$2(hn,yn);return createRecurry$1(mr,hr,createHybrid$2,Qr.placeholder,gr,hn,bn,wr,Rr,kr-sn)}var xn=Br?gr:this,$n=Hr?xn[mr]:mr;return sn=hn.length,wr?hn=reorder(hn,wr):qr&&sn>1&&hn.reverse(),Dr&&Rr<sn&&(hn.length=Rr),this&&this!==root$8&&this instanceof Qr&&($n=zr||createCtor$2($n)),$n.apply(xn,hn)}return Qr}var _createHybrid=createHybrid$2,apply$2=_apply,createCtor$1=_createCtor,createHybrid$1=_createHybrid,createRecurry=_createRecurry,getHolder=_getHolder,replaceHolders$1=_replaceHolders,root$7=_root;function createCurry$1(mr,hr,gr){var vr=createCtor$1(mr);function xr(){for(var Er=arguments.length,Cr=Array(Er),wr=Er,Rr=getHolder(xr);wr--;)Cr[wr]=arguments[wr];var kr=Er<3&&Cr[0]!==Rr&&Cr[Er-1]!==Rr?[]:replaceHolders$1(Cr,Rr);if(Er-=kr.length,Er<gr)return createRecurry(mr,hr,createHybrid$1,xr.placeholder,void 0,Cr,kr,void 0,void 0,gr-Er);var Dr=this&&this!==root$7&&this instanceof xr?vr:mr;return apply$2(Dr,this,Cr)}return xr}var _createCurry=createCurry$1,apply$1=_apply,createCtor=_createCtor,root$6=_root,WRAP_BIND_FLAG$2=1;function createPartial$1(mr,hr,gr,vr){var xr=hr&WRAP_BIND_FLAG$2,Er=createCtor(mr);function Cr(){for(var wr=-1,Rr=arguments.length,kr=-1,Dr=vr.length,Br=Array(Dr+Rr),Hr=this&&this!==root$6&&this instanceof Cr?Er:mr;++kr<Dr;)Br[kr]=vr[kr];for(;Rr--;)Br[kr++]=arguments[++wr];return apply$1(Hr,xr?gr:this,Br)}return Cr}var _createPartial=createPartial$1,composeArgs=_composeArgs,composeArgsRight=_composeArgsRight,replaceHolders=_replaceHolders,PLACEHOLDER="__lodash_placeholder__",WRAP_BIND_FLAG$1=1,WRAP_BIND_KEY_FLAG$1=2,WRAP_CURRY_BOUND_FLAG=4,WRAP_CURRY_FLAG$2=8,WRAP_ARY_FLAG$1=128,WRAP_REARG_FLAG$1=256,nativeMin$1=Math.min;function mergeData$1(mr,hr){var gr=mr[1],vr=hr[1],xr=gr|vr,Er=xr<(WRAP_BIND_FLAG$1|WRAP_BIND_KEY_FLAG$1|WRAP_ARY_FLAG$1),Cr=vr==WRAP_ARY_FLAG$1&&gr==WRAP_CURRY_FLAG$2||vr==WRAP_ARY_FLAG$1&&gr==WRAP_REARG_FLAG$1&&mr[7].length<=hr[8]||vr==(WRAP_ARY_FLAG$1|WRAP_REARG_FLAG$1)&&hr[7].length<=hr[8]&&gr==WRAP_CURRY_FLAG$2;if(!(Er||Cr))return mr;vr&WRAP_BIND_FLAG$1&&(mr[2]=hr[2],xr|=gr&WRAP_BIND_FLAG$1?0:WRAP_CURRY_BOUND_FLAG);var wr=hr[3];if(wr){var Rr=mr[3];mr[3]=Rr?composeArgs(Rr,wr,hr[4]):wr,mr[4]=Rr?replaceHolders(mr[3],PLACEHOLDER):hr[4]}return wr=hr[5],wr&&(Rr=mr[5],mr[5]=Rr?composeArgsRight(Rr,wr,hr[6]):wr,mr[6]=Rr?replaceHolders(mr[5],PLACEHOLDER):hr[6]),wr=hr[7],wr&&(mr[7]=wr),vr&WRAP_ARY_FLAG$1&&(mr[8]=mr[8]==null?hr[8]:nativeMin$1(mr[8],hr[8])),mr[9]==null&&(mr[9]=hr[9]),mr[0]=hr[0],mr[1]=xr,mr}var _mergeData=mergeData$1,trimmedEndIndex=_trimmedEndIndex,reTrimStart=/^\s+/;function baseTrim$1(mr){return mr&&mr.slice(0,trimmedEndIndex(mr)+1).replace(reTrimStart,"")}var _baseTrim=baseTrim$1,baseTrim=_baseTrim,isObject$b=isObject_1,isSymbol$3=isSymbol_1,NAN=NaN,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber$2(mr){if(typeof mr=="number")return mr;if(isSymbol$3(mr))return NAN;if(isObject$b(mr)){var hr=typeof mr.valueOf=="function"?mr.valueOf():mr;mr=isObject$b(hr)?hr+"":hr}if(typeof mr!="string")return mr===0?mr:+mr;mr=baseTrim(mr);var gr=reIsBinary.test(mr);return gr||reIsOctal.test(mr)?freeParseInt(mr.slice(2),gr?2:8):reIsBadHex.test(mr)?NAN:+mr}var toNumber_1=toNumber$2,toNumber$1=toNumber_1,INFINITY$3=1/0,MAX_INTEGER=17976931348623157e292;function toFinite$1(mr){if(!mr)return mr===0?mr:0;if(mr=toNumber$1(mr),mr===INFINITY$3||mr===-INFINITY$3){var hr=mr<0?-1:1;return hr*MAX_INTEGER}return mr===mr?mr:0}var toFinite_1=toFinite$1,toFinite=toFinite_1;function toInteger$3(mr){var hr=toFinite(mr),gr=hr%1;return hr===hr?gr?hr-gr:hr:0}var toInteger_1=toInteger$3,baseSetData=_baseSetData,createBind=_createBind,createCurry=_createCurry,createHybrid=_createHybrid,createPartial=_createPartial,getData$1=require_getData(),mergeData=_mergeData,setData$1=_setData,setWrapToString=_setWrapToString,toInteger$2=toInteger_1,FUNC_ERROR_TEXT$3="Expected a function",WRAP_BIND_FLAG=1,WRAP_BIND_KEY_FLAG=2,WRAP_CURRY_FLAG$1=8,WRAP_CURRY_RIGHT_FLAG=16,WRAP_PARTIAL_FLAG=32,WRAP_PARTIAL_RIGHT_FLAG=64,nativeMax$1=Math.max;function createWrap$3(mr,hr,gr,vr,xr,Er,Cr,wr){var Rr=hr&WRAP_BIND_KEY_FLAG;if(!Rr&&typeof mr!="function")throw new TypeError(FUNC_ERROR_TEXT$3);var kr=vr?vr.length:0;if(kr||(hr&=~(WRAP_PARTIAL_FLAG|WRAP_PARTIAL_RIGHT_FLAG),vr=xr=void 0),Cr=Cr===void 0?Cr:nativeMax$1(toInteger$2(Cr),0),wr=wr===void 0?wr:toInteger$2(wr),kr-=xr?xr.length:0,hr&WRAP_PARTIAL_RIGHT_FLAG){var Dr=vr,Br=xr;vr=xr=void 0}var Hr=Rr?void 0:getData$1(mr),Gr=[mr,hr,gr,vr,xr,Dr,Br,Er,Cr,wr];if(Hr&&mergeData(Gr,Hr),mr=Gr[0],hr=Gr[1],gr=Gr[2],vr=Gr[3],xr=Gr[4],wr=Gr[9]=Gr[9]===void 0?Rr?0:mr.length:nativeMax$1(Gr[9]-kr,0),!wr&&hr&(WRAP_CURRY_FLAG$1|WRAP_CURRY_RIGHT_FLAG)&&(hr&=~(WRAP_CURRY_FLAG$1|WRAP_CURRY_RIGHT_FLAG)),!hr||hr==WRAP_BIND_FLAG)var qr=createBind(mr,hr,gr);else hr==WRAP_CURRY_FLAG$1||hr==WRAP_CURRY_RIGHT_FLAG?qr=createCurry(mr,hr,wr):(hr==WRAP_PARTIAL_FLAG||hr==(WRAP_BIND_FLAG|WRAP_PARTIAL_FLAG))&&!xr.length?qr=createPartial(mr,hr,gr,vr):qr=createHybrid.apply(void 0,Gr);var zr=Hr?baseSetData:setData$1;return setWrapToString(zr(qr,Gr),mr,hr)}var _createWrap=createWrap$3,createWrap$2=_createWrap,WRAP_ARY_FLAG=128;function ary(mr,hr,gr){return hr=gr?void 0:hr,hr=mr&&hr==null?mr.length:hr,createWrap$2(mr,WRAP_ARY_FLAG,void 0,void 0,void 0,void 0,hr)}var ary_1=ary,overArg$1=_overArg,nativeKeys$2=overArg$1(Object.keys,Object),_nativeKeys=nativeKeys$2,isPrototype$2=_isPrototype,nativeKeys$1=_nativeKeys,objectProto$l=Object.prototype,hasOwnProperty$i=objectProto$l.hasOwnProperty;function baseKeys$3(mr){if(!isPrototype$2(mr))return nativeKeys$1(mr);var hr=[];for(var gr in Object(mr))hasOwnProperty$i.call(mr,gr)&&gr!="constructor"&&hr.push(gr);return hr}var _baseKeys=baseKeys$3,arrayLikeKeys$1=_arrayLikeKeys,baseKeys$2=_baseKeys,isArrayLike$2=isArrayLike_1;function keys$6(mr){return isArrayLike$2(mr)?arrayLikeKeys$1(mr):baseKeys$2(mr)}var keys_1=keys$6,copyObject$5=_copyObject,keys$5=keys_1;function baseAssign$2(mr,hr){return mr&&copyObject$5(hr,keys$5(hr),mr)}var _baseAssign=baseAssign$2,copyObject$4=_copyObject,keysIn$3=keysIn_1;function baseAssignIn$2(mr,hr){return mr&&copyObject$4(hr,keysIn$3(hr),mr)}var _baseAssignIn=baseAssignIn$2;function arrayFilter$2(mr,hr){for(var gr=-1,vr=mr==null?0:mr.length,xr=0,Er=[];++gr<vr;){var Cr=mr[gr];hr(Cr,gr,mr)&&(Er[xr++]=Cr)}return Er}var _arrayFilter=arrayFilter$2;function stubArray$3(){return[]}var stubArray_1=stubArray$3,arrayFilter$1=_arrayFilter,stubArray$2=stubArray_1,objectProto$k=Object.prototype,propertyIsEnumerable$2=objectProto$k.propertyIsEnumerable,nativeGetSymbols$3=Object.getOwnPropertySymbols,getSymbols$4=nativeGetSymbols$3?function(mr){return mr==null?[]:(mr=Object(mr),arrayFilter$1(nativeGetSymbols$3(mr),function(hr){return propertyIsEnumerable$2.call(mr,hr)}))}:stubArray$2,_getSymbols=getSymbols$4,copyObject$3=_copyObject,getSymbols$3=_getSymbols;function copySymbols$2(mr,hr){return copyObject$3(mr,getSymbols$3(mr),hr)}var _copySymbols=copySymbols$2,arrayPush$2=_arrayPush,getPrototype$1=_getPrototype,getSymbols$2=_getSymbols,stubArray$1=stubArray_1,nativeGetSymbols$2=Object.getOwnPropertySymbols,getSymbolsIn$3=nativeGetSymbols$2?function(mr){for(var hr=[];mr;)arrayPush$2(hr,getSymbols$2(mr)),mr=getPrototype$1(mr);return hr}:stubArray$1,_getSymbolsIn=getSymbolsIn$3,copyObject$2=_copyObject,getSymbolsIn$2=_getSymbolsIn;function copySymbolsIn$2(mr,hr){return copyObject$2(mr,getSymbolsIn$2(mr),hr)}var _copySymbolsIn=copySymbolsIn$2,arrayPush$1=_arrayPush,isArray$9=isArray_1;function baseGetAllKeys$3(mr,hr,gr){var vr=hr(mr);return isArray$9(mr)?vr:arrayPush$1(vr,gr(mr))}var _baseGetAllKeys=baseGetAllKeys$3,baseGetAllKeys$2=_baseGetAllKeys,getSymbols$1=_getSymbols,keys$4=keys_1;function getAllKeys$3(mr){return baseGetAllKeys$2(mr,keys$4,getSymbols$1)}var _getAllKeys=getAllKeys$3,baseGetAllKeys$1=_baseGetAllKeys,getSymbolsIn$1=_getSymbolsIn,keysIn$2=keysIn_1;function getAllKeysIn$3(mr){return baseGetAllKeys$1(mr,keysIn$2,getSymbolsIn$1)}var _getAllKeysIn=getAllKeysIn$3,getNative$3=_getNative,root$5=_root,DataView$3=getNative$3(root$5,"DataView"),_DataView=DataView$3,getNative$2=_getNative,root$4=_root,Promise$3=getNative$2(root$4,"Promise"),_Promise=Promise$3,getNative$1=_getNative,root$3=_root,Set$3=getNative$1(root$3,"Set"),_Set=Set$3,DataView$2=_DataView,Map$2=_Map,Promise$2=_Promise,Set$2=_Set,WeakMap$2=_WeakMap,baseGetTag$2=_baseGetTag,toSource$1=_toSource,mapTag$a="[object Map]",objectTag$6="[object Object]",promiseTag$1="[object Promise]",setTag$a="[object Set]",weakMapTag$5="[object WeakMap]",dataViewTag$7="[object DataView]",dataViewCtorString$1=toSource$1(DataView$2),mapCtorString$1=toSource$1(Map$2),promiseCtorString$1=toSource$1(Promise$2),setCtorString$1=toSource$1(Set$2),weakMapCtorString$1=toSource$1(WeakMap$2),getTag$7=baseGetTag$2;(DataView$2&&getTag$7(new DataView$2(new ArrayBuffer(1)))!=dataViewTag$7||Map$2&&getTag$7(new Map$2)!=mapTag$a||Promise$2&&getTag$7(Promise$2.resolve())!=promiseTag$1||Set$2&&getTag$7(new Set$2)!=setTag$a||WeakMap$2&&getTag$7(new WeakMap$2)!=weakMapTag$5)&&(getTag$7=function(mr){var hr=baseGetTag$2(mr),gr=hr==objectTag$6?mr.constructor:void 0,vr=gr?toSource$1(gr):"";if(vr)switch(vr){case dataViewCtorString$1:return dataViewTag$7;case mapCtorString$1:return mapTag$a;case promiseCtorString$1:return promiseTag$1;case setCtorString$1:return setTag$a;case weakMapCtorString$1:return weakMapTag$5}return hr});var _getTag=getTag$7,objectProto$j=Object.prototype,hasOwnProperty$h=objectProto$j.hasOwnProperty;function initCloneArray$2(mr){var hr=mr.length,gr=new mr.constructor(hr);return hr&&typeof mr[0]=="string"&&hasOwnProperty$h.call(mr,"index")&&(gr.index=mr.index,gr.input=mr.input),gr}var _initCloneArray=initCloneArray$2,cloneArrayBuffer$2=_cloneArrayBuffer;function cloneDataView$2(mr,hr){var gr=hr?cloneArrayBuffer$2(mr.buffer):mr.buffer;return new mr.constructor(gr,mr.byteOffset,mr.byteLength)}var _cloneDataView=cloneDataView$2,reFlags$1=/\w*$/;function cloneRegExp$2(mr){var hr=new mr.constructor(mr.source,reFlags$1.exec(mr));return hr.lastIndex=mr.lastIndex,hr}var _cloneRegExp=cloneRegExp$2,Symbol$4=_Symbol,symbolProto$4=Symbol$4?Symbol$4.prototype:void 0,symbolValueOf$2=symbolProto$4?symbolProto$4.valueOf:void 0;function cloneSymbol$2(mr){return symbolValueOf$2?Object(symbolValueOf$2.call(mr)):{}}var _cloneSymbol=cloneSymbol$2,cloneArrayBuffer$1=_cloneArrayBuffer,cloneDataView$1=_cloneDataView,cloneRegExp$1=_cloneRegExp,cloneSymbol$1=_cloneSymbol,cloneTypedArray$1=_cloneTypedArray,boolTag$5="[object Boolean]",dateTag$5="[object Date]",mapTag$9="[object Map]",numberTag$5="[object Number]",regexpTag$5="[object RegExp]",setTag$9="[object Set]",stringTag$5="[object String]",symbolTag$6="[object Symbol]",arrayBufferTag$5="[object ArrayBuffer]",dataViewTag$6="[object DataView]",float32Tag$4="[object Float32Array]",float64Tag$4="[object Float64Array]",int8Tag$4="[object Int8Array]",int16Tag$4="[object Int16Array]",int32Tag$4="[object Int32Array]",uint8Tag$4="[object Uint8Array]",uint8ClampedTag$4="[object Uint8ClampedArray]",uint16Tag$4="[object Uint16Array]",uint32Tag$4="[object Uint32Array]";function initCloneByTag$2(mr,hr,gr){var vr=mr.constructor;switch(hr){case arrayBufferTag$5:return cloneArrayBuffer$1(mr);case boolTag$5:case dateTag$5:return new vr(+mr);case dataViewTag$6:return cloneDataView$1(mr,gr);case float32Tag$4:case float64Tag$4:case int8Tag$4:case int16Tag$4:case int32Tag$4:case uint8Tag$4:case uint8ClampedTag$4:case uint16Tag$4:case uint32Tag$4:return cloneTypedArray$1(mr,gr);case mapTag$9:return new vr;case numberTag$5:case stringTag$5:return new vr(mr);case regexpTag$5:return cloneRegExp$1(mr);case setTag$9:return new vr;case symbolTag$6:return cloneSymbol$1(mr)}}var _initCloneByTag=initCloneByTag$2,getTag$6=_getTag,isObjectLike$6=isObjectLike_1,mapTag$8="[object Map]";function baseIsMap$2(mr){return isObjectLike$6(mr)&&getTag$6(mr)==mapTag$8}var _baseIsMap=baseIsMap$2,baseIsMap$1=_baseIsMap,baseUnary$2=_baseUnary,nodeUtil$2=_nodeUtilExports,nodeIsMap$1=nodeUtil$2&&nodeUtil$2.isMap,isMap$2=nodeIsMap$1?baseUnary$2(nodeIsMap$1):baseIsMap$1,isMap_1=isMap$2,getTag$5=_getTag,isObjectLike$5=isObjectLike_1,setTag$8="[object Set]";function baseIsSet$2(mr){return isObjectLike$5(mr)&&getTag$5(mr)==setTag$8}var _baseIsSet=baseIsSet$2,baseIsSet$1=_baseIsSet,baseUnary$1=_baseUnary,nodeUtil$1=_nodeUtilExports,nodeIsSet$1=nodeUtil$1&&nodeUtil$1.isSet,isSet$2=nodeIsSet$1?baseUnary$1(nodeIsSet$1):baseIsSet$1,isSet_1=isSet$2,Stack$3=_Stack,arrayEach$1=_arrayEach,assignValue$1=_assignValue,baseAssign$1=_baseAssign,baseAssignIn$1=_baseAssignIn,cloneBuffer$1=_cloneBufferExports,copyArray$2=_copyArray,copySymbols$1=_copySymbols,copySymbolsIn$1=_copySymbolsIn,getAllKeys$2=_getAllKeys,getAllKeysIn$2=_getAllKeysIn,getTag$4=_getTag,initCloneArray$1=_initCloneArray,initCloneByTag$1=_initCloneByTag,initCloneObject$1=_initCloneObject,isArray$8=isArray_1,isBuffer$4=isBufferExports,isMap$1=isMap_1,isObject$a=isObject_1,isSet$1=isSet_1,keys$3=keys_1,keysIn$1=keysIn_1,CLONE_DEEP_FLAG$3=1,CLONE_FLAT_FLAG$2=2,CLONE_SYMBOLS_FLAG$4=4,argsTag$4="[object Arguments]",arrayTag$3="[object Array]",boolTag$4="[object Boolean]",dateTag$4="[object Date]",errorTag$4="[object Error]",funcTag$3="[object Function]",genTag$2="[object GeneratorFunction]",mapTag$7="[object Map]",numberTag$4="[object Number]",objectTag$5="[object Object]",regexpTag$4="[object RegExp]",setTag$7="[object Set]",stringTag$4="[object String]",symbolTag$5="[object Symbol]",weakMapTag$4="[object WeakMap]",arrayBufferTag$4="[object ArrayBuffer]",dataViewTag$5="[object DataView]",float32Tag$3="[object Float32Array]",float64Tag$3="[object Float64Array]",int8Tag$3="[object Int8Array]",int16Tag$3="[object Int16Array]",int32Tag$3="[object Int32Array]",uint8Tag$3="[object Uint8Array]",uint8ClampedTag$3="[object Uint8ClampedArray]",uint16Tag$3="[object Uint16Array]",uint32Tag$3="[object Uint32Array]",cloneableTags$1={};cloneableTags$1[argsTag$4]=cloneableTags$1[arrayTag$3]=cloneableTags$1[arrayBufferTag$4]=cloneableTags$1[dataViewTag$5]=cloneableTags$1[boolTag$4]=cloneableTags$1[dateTag$4]=cloneableTags$1[float32Tag$3]=cloneableTags$1[float64Tag$3]=cloneableTags$1[int8Tag$3]=cloneableTags$1[int16Tag$3]=cloneableTags$1[int32Tag$3]=cloneableTags$1[mapTag$7]=cloneableTags$1[numberTag$4]=cloneableTags$1[objectTag$5]=cloneableTags$1[regexpTag$4]=cloneableTags$1[setTag$7]=cloneableTags$1[stringTag$4]=cloneableTags$1[symbolTag$5]=cloneableTags$1[uint8Tag$3]=cloneableTags$1[uint8ClampedTag$3]=cloneableTags$1[uint16Tag$3]=cloneableTags$1[uint32Tag$3]=!0;cloneableTags$1[errorTag$4]=cloneableTags$1[funcTag$3]=cloneableTags$1[weakMapTag$4]=!1;function baseClone$5(mr,hr,gr,vr,xr,Er){var Cr,wr=hr&CLONE_DEEP_FLAG$3,Rr=hr&CLONE_FLAT_FLAG$2,kr=hr&CLONE_SYMBOLS_FLAG$4;if(gr&&(Cr=xr?gr(mr,vr,xr,Er):gr(mr)),Cr!==void 0)return Cr;if(!isObject$a(mr))return mr;var Dr=isArray$8(mr);if(Dr){if(Cr=initCloneArray$1(mr),!wr)return copyArray$2(mr,Cr)}else{var Br=getTag$4(mr),Hr=Br==funcTag$3||Br==genTag$2;if(isBuffer$4(mr))return cloneBuffer$1(mr,wr);if(Br==objectTag$5||Br==argsTag$4||Hr&&!xr){if(Cr=Rr||Hr?{}:initCloneObject$1(mr),!wr)return Rr?copySymbolsIn$1(mr,baseAssignIn$1(Cr,mr)):copySymbols$1(mr,baseAssign$1(Cr,mr))}else{if(!cloneableTags$1[Br])return xr?mr:{};Cr=initCloneByTag$1(mr,Br,wr)}}Er||(Er=new Stack$3);var Gr=Er.get(mr);if(Gr)return Gr;Er.set(mr,Cr),isSet$1(mr)?mr.forEach(function(Qr){Cr.add(baseClone$5(Qr,hr,gr,Qr,mr,Er))}):isMap$1(mr)&&mr.forEach(function(Qr,sn){Cr.set(sn,baseClone$5(Qr,hr,gr,sn,mr,Er))});var qr=kr?Rr?getAllKeysIn$2:getAllKeys$2:Rr?keysIn$1:keys$3,zr=Dr?void 0:qr(mr);return arrayEach$1(zr||mr,function(Qr,sn){zr&&(sn=Qr,Qr=mr[sn]),assignValue$1(Cr,sn,baseClone$5(Qr,hr,gr,sn,mr,Er))}),Cr}var _baseClone=baseClone$5,baseClone$4=_baseClone,CLONE_SYMBOLS_FLAG$3=4;function clone$2(mr){return baseClone$4(mr,CLONE_SYMBOLS_FLAG$3)}var clone_1=clone$2;const clone$3=getDefaultExportFromCjs$1(clone_1);var createWrap$1=_createWrap,WRAP_CURRY_FLAG=8;function curry(mr,hr,gr){hr=gr?void 0:hr;var vr=createWrap$1(mr,WRAP_CURRY_FLAG,void 0,void 0,void 0,void 0,void 0,hr);return vr.placeholder=curry.placeholder,vr}curry.placeholder={};var curry_1=curry,baseGetTag$1=_baseGetTag,isObjectLike$4=isObjectLike_1,isPlainObject$5=isPlainObject_1,domExcTag="[object DOMException]",errorTag$3="[object Error]";function isError(mr){if(!isObjectLike$4(mr))return!1;var hr=baseGetTag$1(mr);return hr==errorTag$3||hr==domExcTag||typeof mr.message=="string"&&typeof mr.name=="string"&&!isPlainObject$5(mr)}var isError_1=isError,getTag$3=_getTag,isObjectLike$3=isObjectLike_1,weakMapTag$3="[object WeakMap]";function isWeakMap(mr){return isObjectLike$3(mr)&&getTag$3(mr)==weakMapTag$3}var isWeakMap_1=isWeakMap,HASH_UNDEFINED$2="__lodash_hash_undefined__";function setCacheAdd$1(mr){return this.__data__.set(mr,HASH_UNDEFINED$2),this}var _setCacheAdd=setCacheAdd$1;function setCacheHas$1(mr){return this.__data__.has(mr)}var _setCacheHas=setCacheHas$1,MapCache$1=_MapCache,setCacheAdd=_setCacheAdd,setCacheHas=_setCacheHas;function SetCache$1(mr){var hr=-1,gr=mr==null?0:mr.length;for(this.__data__=new MapCache$1;++hr<gr;)this.add(mr[hr])}SetCache$1.prototype.add=SetCache$1.prototype.push=setCacheAdd;SetCache$1.prototype.has=setCacheHas;var _SetCache=SetCache$1;function arraySome$1(mr,hr){for(var gr=-1,vr=mr==null?0:mr.length;++gr<vr;)if(hr(mr[gr],gr,mr))return!0;return!1}var _arraySome=arraySome$1;function cacheHas$1(mr,hr){return mr.has(hr)}var _cacheHas=cacheHas$1,SetCache=_SetCache,arraySome=_arraySome,cacheHas=_cacheHas,COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function equalArrays$2(mr,hr,gr,vr,xr,Er){var Cr=gr&COMPARE_PARTIAL_FLAG$5,wr=mr.length,Rr=hr.length;if(wr!=Rr&&!(Cr&&Rr>wr))return!1;var kr=Er.get(mr),Dr=Er.get(hr);if(kr&&Dr)return kr==hr&&Dr==mr;var Br=-1,Hr=!0,Gr=gr&COMPARE_UNORDERED_FLAG$3?new SetCache:void 0;for(Er.set(mr,hr),Er.set(hr,mr);++Br<wr;){var qr=mr[Br],zr=hr[Br];if(vr)var Qr=Cr?vr(zr,qr,Br,hr,mr,Er):vr(qr,zr,Br,mr,hr,Er);if(Qr!==void 0){if(Qr)continue;Hr=!1;break}if(Gr){if(!arraySome(hr,function(sn,hn){if(!cacheHas(Gr,hn)&&(qr===sn||xr(qr,sn,gr,vr,Er)))return Gr.push(hn)})){Hr=!1;break}}else if(!(qr===zr||xr(qr,zr,gr,vr,Er))){Hr=!1;break}}return Er.delete(mr),Er.delete(hr),Hr}var _equalArrays=equalArrays$2;function mapToArray$1(mr){var hr=-1,gr=Array(mr.size);return mr.forEach(function(vr,xr){gr[++hr]=[xr,vr]}),gr}var _mapToArray=mapToArray$1;function setToArray$1(mr){var hr=-1,gr=Array(mr.size);return mr.forEach(function(vr){gr[++hr]=vr}),gr}var _setToArray=setToArray$1,Symbol$3=_Symbol,Uint8Array$2=_Uint8Array,eq$1=eq_1,equalArrays$1=_equalArrays,mapToArray=_mapToArray,setToArray=_setToArray,COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2,boolTag$3="[object Boolean]",dateTag$3="[object Date]",errorTag$2="[object Error]",mapTag$6="[object Map]",numberTag$3="[object Number]",regexpTag$3="[object RegExp]",setTag$6="[object Set]",stringTag$3="[object String]",symbolTag$4="[object Symbol]",arrayBufferTag$3="[object ArrayBuffer]",dataViewTag$4="[object DataView]",symbolProto$3=Symbol$3?Symbol$3.prototype:void 0,symbolValueOf$1=symbolProto$3?symbolProto$3.valueOf:void 0;function equalByTag$1(mr,hr,gr,vr,xr,Er,Cr){switch(gr){case dataViewTag$4:if(mr.byteLength!=hr.byteLength||mr.byteOffset!=hr.byteOffset)return!1;mr=mr.buffer,hr=hr.buffer;case arrayBufferTag$3:return!(mr.byteLength!=hr.byteLength||!Er(new Uint8Array$2(mr),new Uint8Array$2(hr)));case boolTag$3:case dateTag$3:case numberTag$3:return eq$1(+mr,+hr);case errorTag$2:return mr.name==hr.name&&mr.message==hr.message;case regexpTag$3:case stringTag$3:return mr==hr+"";case mapTag$6:var wr=mapToArray;case setTag$6:var Rr=vr&COMPARE_PARTIAL_FLAG$4;if(wr||(wr=setToArray),mr.size!=hr.size&&!Rr)return!1;var kr=Cr.get(mr);if(kr)return kr==hr;vr|=COMPARE_UNORDERED_FLAG$2,Cr.set(mr,hr);var Dr=equalArrays$1(wr(mr),wr(hr),vr,xr,Er,Cr);return Cr.delete(mr),Dr;case symbolTag$4:if(symbolValueOf$1)return symbolValueOf$1.call(mr)==symbolValueOf$1.call(hr)}return!1}var _equalByTag=equalByTag$1,getAllKeys$1=_getAllKeys,COMPARE_PARTIAL_FLAG$3=1,objectProto$i=Object.prototype,hasOwnProperty$g=objectProto$i.hasOwnProperty;function equalObjects$1(mr,hr,gr,vr,xr,Er){var Cr=gr&COMPARE_PARTIAL_FLAG$3,wr=getAllKeys$1(mr),Rr=wr.length,kr=getAllKeys$1(hr),Dr=kr.length;if(Rr!=Dr&&!Cr)return!1;for(var Br=Rr;Br--;){var Hr=wr[Br];if(!(Cr?Hr in hr:hasOwnProperty$g.call(hr,Hr)))return!1}var Gr=Er.get(mr),qr=Er.get(hr);if(Gr&&qr)return Gr==hr&&qr==mr;var zr=!0;Er.set(mr,hr),Er.set(hr,mr);for(var Qr=Cr;++Br<Rr;){Hr=wr[Br];var sn=mr[Hr],hn=hr[Hr];if(vr)var vn=Cr?vr(hn,sn,Hr,hr,mr,Er):vr(sn,hn,Hr,mr,hr,Er);if(!(vn===void 0?sn===hn||xr(sn,hn,gr,vr,Er):vn)){zr=!1;break}Qr||(Qr=Hr=="constructor")}if(zr&&!Qr){var yn=mr.constructor,gn=hr.constructor;yn!=gn&&"constructor"in mr&&"constructor"in hr&&!(typeof yn=="function"&&yn instanceof yn&&typeof gn=="function"&&gn instanceof gn)&&(zr=!1)}return Er.delete(mr),Er.delete(hr),zr}var _equalObjects=equalObjects$1,Stack$2=_Stack,equalArrays=_equalArrays,equalByTag=_equalByTag,equalObjects=_equalObjects,getTag$2=_getTag,isArray$7=isArray_1,isBuffer$3=isBufferExports,isTypedArray$3=isTypedArray_1,COMPARE_PARTIAL_FLAG$2=1,argsTag$3="[object Arguments]",arrayTag$2="[object Array]",objectTag$4="[object Object]",objectProto$h=Object.prototype,hasOwnProperty$f=objectProto$h.hasOwnProperty;function baseIsEqualDeep$1(mr,hr,gr,vr,xr,Er){var Cr=isArray$7(mr),wr=isArray$7(hr),Rr=Cr?arrayTag$2:getTag$2(mr),kr=wr?arrayTag$2:getTag$2(hr);Rr=Rr==argsTag$3?objectTag$4:Rr,kr=kr==argsTag$3?objectTag$4:kr;var Dr=Rr==objectTag$4,Br=kr==objectTag$4,Hr=Rr==kr;if(Hr&&isBuffer$3(mr)){if(!isBuffer$3(hr))return!1;Cr=!0,Dr=!1}if(Hr&&!Dr)return Er||(Er=new Stack$2),Cr||isTypedArray$3(mr)?equalArrays(mr,hr,gr,vr,xr,Er):equalByTag(mr,hr,Rr,gr,vr,xr,Er);if(!(gr&COMPARE_PARTIAL_FLAG$2)){var Gr=Dr&&hasOwnProperty$f.call(mr,"__wrapped__"),qr=Br&&hasOwnProperty$f.call(hr,"__wrapped__");if(Gr||qr){var zr=Gr?mr.value():mr,Qr=qr?hr.value():hr;return Er||(Er=new Stack$2),xr(zr,Qr,gr,vr,Er)}}return Hr?(Er||(Er=new Stack$2),equalObjects(mr,hr,gr,vr,xr,Er)):!1}var _baseIsEqualDeep=baseIsEqualDeep$1,baseIsEqualDeep=_baseIsEqualDeep,isObjectLike$2=isObjectLike_1;function baseIsEqual$3(mr,hr,gr,vr,xr){return mr===hr?!0:mr==null||hr==null||!isObjectLike$2(mr)&&!isObjectLike$2(hr)?mr!==mr&&hr!==hr:baseIsEqualDeep(mr,hr,gr,vr,baseIsEqual$3,xr)}var _baseIsEqual=baseIsEqual$3,Stack$1=_Stack,baseIsEqual$2=_baseIsEqual,COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;function baseIsMatch$1(mr,hr,gr,vr){var xr=gr.length,Er=xr,Cr=!vr;if(mr==null)return!Er;for(mr=Object(mr);xr--;){var wr=gr[xr];if(Cr&&wr[2]?wr[1]!==mr[wr[0]]:!(wr[0]in mr))return!1}for(;++xr<Er;){wr=gr[xr];var Rr=wr[0],kr=mr[Rr],Dr=wr[1];if(Cr&&wr[2]){if(kr===void 0&&!(Rr in mr))return!1}else{var Br=new Stack$1;if(vr)var Hr=vr(kr,Dr,Rr,mr,hr,Br);if(!(Hr===void 0?baseIsEqual$2(Dr,kr,COMPARE_PARTIAL_FLAG$1|COMPARE_UNORDERED_FLAG$1,vr,Br):Hr))return!1}}return!0}var _baseIsMatch=baseIsMatch$1,isObject$9=isObject_1;function isStrictComparable$2(mr){return mr===mr&&!isObject$9(mr)}var _isStrictComparable=isStrictComparable$2,isStrictComparable$1=_isStrictComparable,keys$2=keys_1;function getMatchData$1(mr){for(var hr=keys$2(mr),gr=hr.length;gr--;){var vr=hr[gr],xr=mr[vr];hr[gr]=[vr,xr,isStrictComparable$1(xr)]}return hr}var _getMatchData=getMatchData$1;function matchesStrictComparable$2(mr,hr){return function(gr){return gr==null?!1:gr[mr]===hr&&(hr!==void 0||mr in Object(gr))}}var _matchesStrictComparable=matchesStrictComparable$2,baseIsMatch=_baseIsMatch,getMatchData=_getMatchData,matchesStrictComparable$1=_matchesStrictComparable;function baseMatches$1(mr){var hr=getMatchData(mr);return hr.length==1&&hr[0][2]?matchesStrictComparable$1(hr[0][0],hr[0][1]):function(gr){return gr===mr||baseIsMatch(gr,mr,hr)}}var _baseMatches=baseMatches$1,baseGet$2=_baseGet;function get$1(mr,hr,gr){var vr=mr==null?void 0:baseGet$2(mr,hr);return vr===void 0?gr:vr}var get_1=get$1,baseIsEqual$1=_baseIsEqual,get=get_1,hasIn=hasIn_1,isKey$1=_isKey,isStrictComparable=_isStrictComparable,matchesStrictComparable=_matchesStrictComparable,toKey$4=_toKey,COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty$1(mr,hr){return isKey$1(mr)&&isStrictComparable(hr)?matchesStrictComparable(toKey$4(mr),hr):function(gr){var vr=get(gr,mr);return vr===void 0&&vr===hr?hasIn(gr,mr):baseIsEqual$1(hr,vr,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}var _baseMatchesProperty=baseMatchesProperty$1;function baseProperty$1(mr){return function(hr){return hr?.[mr]}}var _baseProperty=baseProperty$1,baseGet$1=_baseGet;function basePropertyDeep$1(mr){return function(hr){return baseGet$1(hr,mr)}}var _basePropertyDeep=basePropertyDeep$1,baseProperty=_baseProperty,basePropertyDeep=_basePropertyDeep,isKey=_isKey,toKey$3=_toKey;function property$1(mr){return isKey(mr)?baseProperty(toKey$3(mr)):basePropertyDeep(mr)}var property_1=property$1,baseMatches=_baseMatches,baseMatchesProperty=_baseMatchesProperty,identity=identity_1,isArray$6=isArray_1,property=property_1;function baseIteratee$2(mr){return typeof mr=="function"?mr:mr==null?identity:typeof mr=="object"?isArray$6(mr)?baseMatchesProperty(mr[0],mr[1]):baseMatches(mr):property(mr)}var _baseIteratee=baseIteratee$2,baseClone$3=_baseClone,baseIteratee$1=_baseIteratee,CLONE_DEEP_FLAG$2=1;function iteratee(mr){return baseIteratee$1(typeof mr=="function"?mr:baseClone$3(mr,CLONE_DEEP_FLAG$2))}var iteratee_1=iteratee,createWrap=_createWrap,flatRest$1=_flatRest,WRAP_REARG_FLAG=256,rearg=flatRest$1(function(mr,hr){return createWrap(mr,WRAP_REARG_FLAG,void 0,void 0,void 0,hr)}),rearg_1=rearg,arrayMap$2=_arrayMap,copyArray$1=_copyArray,isArray$5=isArray_1,isSymbol$2=isSymbol_1,stringToPath$1=_stringToPath,toKey$2=_toKey,toString$8=toString_1;function toPath$1(mr){return isArray$5(mr)?arrayMap$2(mr,toKey$2):isSymbol$2(mr)?[mr]:copyArray$1(stringToPath$1(toString$8(mr)))}var toPath_1=toPath$1;const toPath$2=getDefaultExportFromCjs$1(toPath_1);var _util={ary:ary_1,assign:_baseAssign,clone:clone_1,curry:curry_1,forEach:_arrayEach,isArray:isArray_1,isError:isError_1,isFunction:isFunction_1,isWeakMap:isWeakMap_1,iteratee:iteratee_1,keys:_baseKeys,rearg:rearg_1,toInteger:toInteger_1,toPath:toPath_1},baseConvert=_baseConvert,util=_util;function convert$2(mr,hr,gr){return baseConvert(util,mr,hr,gr)}var convert_1=convert$2,_createFlow,hasRequired_createFlow;function require_createFlow(){if(hasRequired_createFlow)return _createFlow;hasRequired_createFlow=1;var mr=require_LodashWrapper(),hr=_flatRest,gr=require_getData(),vr=require_getFuncName(),xr=isArray_1,Er=require_isLaziable(),Cr="Expected a function",wr=8,Rr=32,kr=128,Dr=256;function Br(Hr){return hr(function(Gr){var qr=Gr.length,zr=qr,Qr=mr.prototype.thru;for(Hr&&Gr.reverse();zr--;){var sn=Gr[zr];if(typeof sn!="function")throw new TypeError(Cr);if(Qr&&!hn&&vr(sn)=="wrapper")var hn=new mr([],!0)}for(zr=hn?zr:qr;++zr<qr;){sn=Gr[zr];var vn=vr(sn),yn=vn=="wrapper"?gr(sn):void 0;yn&&Er(yn[0])&&yn[1]==(kr|wr|Rr|Dr)&&!yn[4].length&&yn[9]==1?hn=hn[vr(yn[0])].apply(hn,yn[3]):hn=sn.length==1&&Er(sn)?hn[vn]():hn.thru(sn)}return function(){var gn=arguments,bn=gn[0];if(hn&&gn.length==1&&xr(bn))return hn.plant(bn).value();for(var xn=0,$n=qr?Gr[xn].apply(this,gn):bn;++xn<qr;)$n=Gr[xn].call(this,$n);return $n}})}return _createFlow=Br,_createFlow}var flow_1,hasRequiredFlow;function requireFlow(){if(hasRequiredFlow)return flow_1;hasRequiredFlow=1;var mr=require_createFlow(),hr=mr();return flow_1=hr,flow_1}var convert$1=convert_1,func$1=convert$1("flow",requireFlow());func$1.placeholder=requirePlaceholder();var flow=func$1,pipe=flow;const pipe$1=getDefaultExportFromCjs$1(pipe),STORAGE_KEYS={TOKEN:"jwtToken",USER:"userInfo"};let FetchError$1=class Ip extends Error{name;message;response;code;status;constructor(hr,gr){super(hr),this.name="FetchError",this.message=hr,this.response=gr,this.code=gr?.data?.error?.status,this.status=gr?.data?.error?.status,Error.captureStackTrace&&Error.captureStackTrace(this,Ip)}};const isFetchError=mr=>mr instanceof FetchError$1,getToken=()=>JSON.parse(localStorage.getItem(STORAGE_KEYS.TOKEN)??sessionStorage.getItem(STORAGE_KEYS.TOKEN)??'""'),getFetchClient=(mr={})=>{const hr=window.strapi.backendURL,gr={Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${getToken()}`},vr=Hr=>Hr instanceof FormData,xr=Hr=>Hr.charAt(0)!=="/"?`/${Hr}`:Hr,Er=Hr=>new RegExp("^(?:[a-z+]+:)?//","i").test(Hr),Cr=Hr=>Er(Hr)?Hr:xr(Hr),wr=async(Hr,Gr)=>{try{const qr=await Hr.json();if(!Hr.ok&&qr.error&&!Gr?.(Hr.status))throw new FetchError$1(qr.error.message,{data:qr});if(!Hr.ok&&!Gr?.(Hr.status))throw new FetchError$1("Unknown Server Error");return{data:qr}}catch(qr){if(qr instanceof SyntaxError&&Hr.ok)return{data:[],status:Hr.status};throw qr}},Rr=Hr=>Gr=>{if(Hr){if(typeof Hr=="string")return`${Gr}?${Hr}`;const qr=qs__default.stringify(Hr,{encode:!1});return`${Gr}?${qr}`}return Gr},kr=Hr=>`${hr}${Hr}`,Dr=Hr=>pipe$1(Cr,kr,Rr(Hr?.params));return{get:async(Hr,Gr)=>{const qr=new Headers({...gr,...Gr?.headers}),zr=Dr(Gr),Qr=await fetch(zr(Hr),{signal:Gr?.signal??mr.signal,method:"GET",headers:qr});return wr(Qr,Gr?.validateStatus)},post:async(Hr,Gr,qr)=>{const zr=new Headers({...gr,...qr?.headers}),Qr=Dr(qr);vr(Gr)&&zr.delete("Content-Type");const sn=await fetch(Qr(Hr),{signal:qr?.signal??mr.signal,method:"POST",headers:zr,body:vr(Gr)?Gr:JSON.stringify(Gr)});return wr(sn,qr?.validateStatus)},put:async(Hr,Gr,qr)=>{const zr=new Headers({...gr,...qr?.headers}),Qr=Dr(qr);vr(Gr)&&zr.delete("Content-Type");const sn=await fetch(Qr(Hr),{signal:qr?.signal??mr.signal,method:"PUT",headers:zr,body:vr(Gr)?Gr:JSON.stringify(Gr)});return wr(sn,qr?.validateStatus)},del:async(Hr,Gr)=>{const qr=new Headers({...gr,...Gr?.headers}),zr=Dr(Gr),Qr=await fetch(zr(Hr),{signal:Gr?.signal??mr.signal,method:"DELETE",headers:qr});return wr(Qr,Gr?.validateStatus)}}},fetchBaseQuery=()=>async(mr,{signal:hr})=>{try{const{get:gr,post:vr,del:xr,put:Er}=getFetchClient();if(typeof mr=="string")return{data:(await gr(mr,{signal:hr})).data};{const{url:Cr,method:wr="GET",data:Rr,config:kr}=mr;return wr==="POST"?{data:(await vr(Cr,Rr,{...kr,signal:hr})).data}:wr==="DELETE"?{data:(await xr(Cr,{...kr,signal:hr})).data}:wr==="PUT"?{data:(await Er(Cr,Rr,{...kr,signal:hr})).data}:{data:(await gr(Cr,{...kr,signal:hr})).data}}}catch(gr){if(isFetchError(gr))return typeof gr.response?.data=="object"&&gr.response?.data!==null&&"error"in gr.response?.data?{data:void 0,error:gr.response?.data.error}:{data:void 0,error:{name:"UnknownError",message:gr.message,details:gr.response,status:gr.status}};const vr=gr;return{data:void 0,error:{name:vr.name,message:vr.message,stack:vr.stack}}}},adminApi=createApi({reducerPath:"adminApi",baseQuery:fetchBaseQuery(),tagTypes:[],endpoints:()=>({})}),prefixFileUrlWithBackendUrl$1=mr=>mr&&mr.startsWith("/")?`${window.strapi.backendURL}${mr}`:mr;adminApi.enhanceEndpoints({addTagTypes:["ProjectSettings","LicenseLimits"]}).injectEndpoints({endpoints:mr=>({init:mr.query({query:()=>({url:"/admin/init",method:"GET"}),transformResponse(hr){return hr.data}}),information:mr.query({query:()=>({url:"/admin/information",method:"GET"}),transformResponse(hr){return hr.data}}),telemetryProperties:mr.query({query:()=>({url:"/admin/telemetry-properties",method:"GET",config:{validateStatus:hr=>hr<500}}),transformResponse(hr){return hr.data}}),projectSettings:mr.query({query:()=>({url:"/admin/project-settings",method:"GET"}),providesTags:["ProjectSettings"],transformResponse(hr){return{authLogo:hr.authLogo?{name:hr.authLogo.name,url:prefixFileUrlWithBackendUrl$1(hr.authLogo.url)}:void 0,menuLogo:hr.menuLogo?{name:hr.menuLogo.name,url:prefixFileUrlWithBackendUrl$1(hr.menuLogo.url)}:void 0}}}),updateProjectSettings:mr.mutation({query:hr=>({url:"/admin/project-settings",method:"POST",data:hr,config:{headers:{"Content-Type":"multipart/form-data"}}}),invalidatesTags:["ProjectSettings"]}),getPlugins:mr.query({query:()=>({url:"/admin/plugins",method:"GET"})}),getLicenseLimits:mr.query({query:()=>({url:"/admin/license-limit-information",method:"GET"}),providesTags:["LicenseLimits"]})}),overrideExisting:!1});var baseIsEqual=_baseIsEqual;function isEqual$2(mr,hr){return baseIsEqual(mr,hr)}var isEqual_1=isEqual$2;const isEqual$3=getDefaultExportFromCjs$1(isEqual_1);function bind(mr,hr){return function(){return mr.apply(hr,arguments)}}const{toString:toString$7}=Object.prototype,{getPrototypeOf}=Object,kindOf=(mr=>hr=>{const gr=toString$7.call(hr);return mr[gr]||(mr[gr]=gr.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=mr=>(mr=mr.toLowerCase(),hr=>kindOf(hr)===mr),typeOfTest=mr=>hr=>typeof hr===mr,{isArray:isArray$4}=Array,isUndefined$1=typeOfTest("undefined");function isBuffer$2(mr){return mr!==null&&!isUndefined$1(mr)&&mr.constructor!==null&&!isUndefined$1(mr.constructor)&&isFunction$3(mr.constructor.isBuffer)&&mr.constructor.isBuffer(mr)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(mr){let hr;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?hr=ArrayBuffer.isView(mr):hr=mr&&mr.buffer&&isArrayBuffer(mr.buffer),hr}const isString$1=typeOfTest("string"),isFunction$3=typeOfTest("function"),isNumber$1=typeOfTest("number"),isObject$8=mr=>mr!==null&&typeof mr=="object",isBoolean=mr=>mr===!0||mr===!1,isPlainObject$4=mr=>{if(kindOf(mr)!=="object")return!1;const hr=getPrototypeOf(mr);return(hr===null||hr===Object.prototype||Object.getPrototypeOf(hr)===null)&&!(Symbol.toStringTag in mr)&&!(Symbol.iterator in mr)},isDate$1=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=mr=>isObject$8(mr)&&isFunction$3(mr.pipe),isFormData=mr=>{let hr;return mr&&(typeof FormData=="function"&&mr instanceof FormData||isFunction$3(mr.append)&&((hr=kindOf(mr))==="formdata"||hr==="object"&&isFunction$3(mr.toString)&&mr.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),[isReadableStream,isRequest,isResponse,isHeaders]=["ReadableStream","Request","Response","Headers"].map(kindOfTest),trim$2=mr=>mr.trim?mr.trim():mr.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach$2(mr,hr,{allOwnKeys:gr=!1}={}){if(mr===null||typeof mr>"u")return;let vr,xr;if(typeof mr!="object"&&(mr=[mr]),isArray$4(mr))for(vr=0,xr=mr.length;vr<xr;vr++)hr.call(null,mr[vr],vr,mr);else{const Er=gr?Object.getOwnPropertyNames(mr):Object.keys(mr),Cr=Er.length;let wr;for(vr=0;vr<Cr;vr++)wr=Er[vr],hr.call(null,mr[wr],wr,mr)}}function findKey(mr,hr){hr=hr.toLowerCase();const gr=Object.keys(mr);let vr=gr.length,xr;for(;vr-- >0;)if(xr=gr[vr],hr===xr.toLowerCase())return xr;return null}const _global=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,isContextDefined=mr=>!isUndefined$1(mr)&&mr!==_global;function merge(){const{caseless:mr}=isContextDefined(this)&&this||{},hr={},gr=(vr,xr)=>{const Er=mr&&findKey(hr,xr)||xr;isPlainObject$4(hr[Er])&&isPlainObject$4(vr)?hr[Er]=merge(hr[Er],vr):isPlainObject$4(vr)?hr[Er]=merge({},vr):isArray$4(vr)?hr[Er]=vr.slice():hr[Er]=vr};for(let vr=0,xr=arguments.length;vr<xr;vr++)arguments[vr]&&forEach$2(arguments[vr],gr);return hr}const extend=(mr,hr,gr,{allOwnKeys:vr}={})=>(forEach$2(hr,(xr,Er)=>{gr&&isFunction$3(xr)?mr[Er]=bind(xr,gr):mr[Er]=xr},{allOwnKeys:vr}),mr),stripBOM=mr=>(mr.charCodeAt(0)===65279&&(mr=mr.slice(1)),mr),inherits=(mr,hr,gr,vr)=>{mr.prototype=Object.create(hr.prototype,vr),mr.prototype.constructor=mr,Object.defineProperty(mr,"super",{value:hr.prototype}),gr&&Object.assign(mr.prototype,gr)},toFlatObject=(mr,hr,gr,vr)=>{let xr,Er,Cr;const wr={};if(hr=hr||{},mr==null)return hr;do{for(xr=Object.getOwnPropertyNames(mr),Er=xr.length;Er-- >0;)Cr=xr[Er],(!vr||vr(Cr,mr,hr))&&!wr[Cr]&&(hr[Cr]=mr[Cr],wr[Cr]=!0);mr=gr!==!1&&getPrototypeOf(mr)}while(mr&&(!gr||gr(mr,hr))&&mr!==Object.prototype);return hr},endsWith=(mr,hr,gr)=>{mr=String(mr),(gr===void 0||gr>mr.length)&&(gr=mr.length),gr-=hr.length;const vr=mr.indexOf(hr,gr);return vr!==-1&&vr===gr},toArray$2=mr=>{if(!mr)return null;if(isArray$4(mr))return mr;let hr=mr.length;if(!isNumber$1(hr))return null;const gr=new Array(hr);for(;hr-- >0;)gr[hr]=mr[hr];return gr},isTypedArray$2=(mr=>hr=>mr&&hr instanceof mr)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(mr,hr)=>{const vr=(mr&&mr[Symbol.iterator]).call(mr);let xr;for(;(xr=vr.next())&&!xr.done;){const Er=xr.value;hr.call(mr,Er[0],Er[1])}},matchAll=(mr,hr)=>{let gr;const vr=[];for(;(gr=mr.exec(hr))!==null;)vr.push(gr);return vr},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=mr=>mr.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(gr,vr,xr){return vr.toUpperCase()+xr}),hasOwnProperty$e=(({hasOwnProperty:mr})=>(hr,gr)=>mr.call(hr,gr))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(mr,hr)=>{const gr=Object.getOwnPropertyDescriptors(mr),vr={};forEach$2(gr,(xr,Er)=>{let Cr;(Cr=hr(xr,Er,mr))!==!1&&(vr[Er]=Cr||xr)}),Object.defineProperties(mr,vr)},freezeMethods=mr=>{reduceDescriptors(mr,(hr,gr)=>{if(isFunction$3(mr)&&["arguments","caller","callee"].indexOf(gr)!==-1)return!1;const vr=mr[gr];if(isFunction$3(vr)){if(hr.enumerable=!1,"writable"in hr){hr.writable=!1;return}hr.set||(hr.set=()=>{throw Error("Can not rewrite read-only method '"+gr+"'")})}})},toObjectSet=(mr,hr)=>{const gr={},vr=xr=>{xr.forEach(Er=>{gr[Er]=!0})};return isArray$4(mr)?vr(mr):vr(String(mr).split(hr)),gr},noop$3=()=>{},toFiniteNumber=(mr,hr)=>mr!=null&&Number.isFinite(mr=+mr)?mr:hr,ALPHA="abcdefghijklmnopqrstuvwxyz",DIGIT="0123456789",ALPHABET={DIGIT,ALPHA,ALPHA_DIGIT:ALPHA+ALPHA.toUpperCase()+DIGIT},generateString=(mr=16,hr=ALPHABET.ALPHA_DIGIT)=>{let gr="";const{length:vr}=hr;for(;mr--;)gr+=hr[Math.random()*vr|0];return gr};function isSpecCompliantForm(mr){return!!(mr&&isFunction$3(mr.append)&&mr[Symbol.toStringTag]==="FormData"&&mr[Symbol.iterator])}const toJSONObject=mr=>{const hr=new Array(10),gr=(vr,xr)=>{if(isObject$8(vr)){if(hr.indexOf(vr)>=0)return;if(!("toJSON"in vr)){hr[xr]=vr;const Er=isArray$4(vr)?[]:{};return forEach$2(vr,(Cr,wr)=>{const Rr=gr(Cr,xr+1);!isUndefined$1(Rr)&&(Er[wr]=Rr)}),hr[xr]=void 0,Er}}return vr};return gr(mr,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable$1=mr=>mr&&(isObject$8(mr)||isFunction$3(mr))&&isFunction$3(mr.then)&&isFunction$3(mr.catch),_setImmediate=((mr,hr)=>mr?setImmediate:hr?((gr,vr)=>(_global.addEventListener("message",({source:xr,data:Er})=>{xr===_global&&Er===gr&&vr.length&&vr.shift()()},!1),xr=>{vr.push(xr),_global.postMessage(gr,"*")}))(`axios@${Math.random()}`,[]):gr=>setTimeout(gr))(typeof setImmediate=="function",isFunction$3(_global.postMessage)),asap=typeof queueMicrotask<"u"?queueMicrotask.bind(_global):typeof process<"u"&&process.nextTick||_setImmediate,utils$1={isArray:isArray$4,isArrayBuffer,isBuffer:isBuffer$2,isFormData,isArrayBufferView,isString:isString$1,isNumber:isNumber$1,isBoolean,isObject:isObject$8,isPlainObject:isPlainObject$4,isReadableStream,isRequest,isResponse,isHeaders,isUndefined:isUndefined$1,isDate:isDate$1,isFile,isBlob,isRegExp,isFunction:isFunction$3,isStream,isURLSearchParams,isTypedArray:isTypedArray$2,isFileList,forEach:forEach$2,merge,extend,trim:trim$2,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray:toArray$2,forEachEntry,matchAll,isHTMLForm,hasOwnProperty:hasOwnProperty$e,hasOwnProp:hasOwnProperty$e,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop:noop$3,toFiniteNumber,findKey,global:_global,isContextDefined,ALPHABET,generateString,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable:isThenable$1,setImmediate:_setImmediate,asap};function AxiosError(mr,hr,gr,vr,xr){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=mr,this.name="AxiosError",hr&&(this.code=hr),gr&&(this.config=gr),vr&&(this.request=vr),xr&&(this.response=xr)}utils$1.inherits(AxiosError,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$1.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const prototype$1=AxiosError.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(mr=>{descriptors[mr]={value:mr}});Object.defineProperties(AxiosError,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError.from=(mr,hr,gr,vr,xr,Er)=>{const Cr=Object.create(prototype$1);return utils$1.toFlatObject(mr,Cr,function(Rr){return Rr!==Error.prototype},wr=>wr!=="isAxiosError"),AxiosError.call(Cr,mr.message,hr,gr,vr,xr),Cr.cause=mr,Cr.name=mr.name,Er&&Object.assign(Cr,Er),Cr};const httpAdapter=null;function isVisitable(mr){return utils$1.isPlainObject(mr)||utils$1.isArray(mr)}function removeBrackets(mr){return utils$1.endsWith(mr,"[]")?mr.slice(0,-2):mr}function renderKey(mr,hr,gr){return mr?mr.concat(hr).map(function(xr,Er){return xr=removeBrackets(xr),!gr&&Er?"["+xr+"]":xr}).join(gr?".":""):hr}function isFlatArray(mr){return utils$1.isArray(mr)&&!mr.some(isVisitable)}const predicates=utils$1.toFlatObject(utils$1,{},null,function(hr){return/^is[A-Z]/.test(hr)});function toFormData(mr,hr,gr){if(!utils$1.isObject(mr))throw new TypeError("target must be an object");hr=hr||new FormData,gr=utils$1.toFlatObject(gr,{metaTokens:!0,dots:!1,indexes:!1},!1,function(zr,Qr){return!utils$1.isUndefined(Qr[zr])});const vr=gr.metaTokens,xr=gr.visitor||Dr,Er=gr.dots,Cr=gr.indexes,Rr=(gr.Blob||typeof Blob<"u"&&Blob)&&utils$1.isSpecCompliantForm(hr);if(!utils$1.isFunction(xr))throw new TypeError("visitor must be a function");function kr(qr){if(qr===null)return"";if(utils$1.isDate(qr))return qr.toISOString();if(!Rr&&utils$1.isBlob(qr))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils$1.isArrayBuffer(qr)||utils$1.isTypedArray(qr)?Rr&&typeof Blob=="function"?new Blob([qr]):Buffer.from(qr):qr}function Dr(qr,zr,Qr){let sn=qr;if(qr&&!Qr&&typeof qr=="object"){if(utils$1.endsWith(zr,"{}"))zr=vr?zr:zr.slice(0,-2),qr=JSON.stringify(qr);else if(utils$1.isArray(qr)&&isFlatArray(qr)||(utils$1.isFileList(qr)||utils$1.endsWith(zr,"[]"))&&(sn=utils$1.toArray(qr)))return zr=removeBrackets(zr),sn.forEach(function(vn,yn){!(utils$1.isUndefined(vn)||vn===null)&&hr.append(Cr===!0?renderKey([zr],yn,Er):Cr===null?zr:zr+"[]",kr(vn))}),!1}return isVisitable(qr)?!0:(hr.append(renderKey(Qr,zr,Er),kr(qr)),!1)}const Br=[],Hr=Object.assign(predicates,{defaultVisitor:Dr,convertValue:kr,isVisitable});function Gr(qr,zr){if(!utils$1.isUndefined(qr)){if(Br.indexOf(qr)!==-1)throw Error("Circular reference detected in "+zr.join("."));Br.push(qr),utils$1.forEach(qr,function(sn,hn){(!(utils$1.isUndefined(sn)||sn===null)&&xr.call(hr,sn,utils$1.isString(hn)?hn.trim():hn,zr,Hr))===!0&&Gr(sn,zr?zr.concat(hn):[hn])}),Br.pop()}}if(!utils$1.isObject(mr))throw new TypeError("data must be an object");return Gr(mr),hr}function encode$1(mr){const hr={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(mr).replace(/[!'()~]|%20|%00/g,function(vr){return hr[vr]})}function AxiosURLSearchParams(mr,hr){this._pairs=[],mr&&toFormData(mr,this,hr)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(hr,gr){this._pairs.push([hr,gr])};prototype.toString=function(hr){const gr=hr?function(vr){return hr.call(this,vr,encode$1)}:encode$1;return this._pairs.map(function(xr){return gr(xr[0])+"="+gr(xr[1])},"").join("&")};function encode(mr){return encodeURIComponent(mr).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(mr,hr,gr){if(!hr)return mr;const vr=gr&&gr.encode||encode,xr=gr&&gr.serialize;let Er;if(xr?Er=xr(hr,gr):Er=utils$1.isURLSearchParams(hr)?hr.toString():new AxiosURLSearchParams(hr,gr).toString(vr),Er){const Cr=mr.indexOf("#");Cr!==-1&&(mr=mr.slice(0,Cr)),mr+=(mr.indexOf("?")===-1?"?":"&")+Er}return mr}class InterceptorManager{constructor(){this.handlers=[]}use(hr,gr,vr){return this.handlers.push({fulfilled:hr,rejected:gr,synchronous:vr?vr.synchronous:!1,runWhen:vr?vr.runWhen:null}),this.handlers.length-1}eject(hr){this.handlers[hr]&&(this.handlers[hr]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(hr){utils$1.forEach(this.handlers,function(vr){vr!==null&&hr(vr)})}}const transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$1={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv=typeof window<"u"&&typeof document<"u",hasStandardBrowserEnv=(mr=>hasBrowserEnv&&["ReactNative","NativeScript","NS"].indexOf(mr)<0)(typeof navigator<"u"&&navigator.product),hasStandardBrowserWebWorkerEnv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",origin=hasBrowserEnv&&window.location.href||"http://localhost",utils=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv,hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv,origin},Symbol.toStringTag,{value:"Module"})),platform={...utils,...platform$1};function toURLEncodedForm(mr,hr){return toFormData(mr,new platform.classes.URLSearchParams,Object.assign({visitor:function(gr,vr,xr,Er){return platform.isNode&&utils$1.isBuffer(gr)?(this.append(vr,gr.toString("base64")),!1):Er.defaultVisitor.apply(this,arguments)}},hr))}function parsePropPath(mr){return utils$1.matchAll(/\w+|\[(\w*)]/g,mr).map(hr=>hr[0]==="[]"?"":hr[1]||hr[0])}function arrayToObject(mr){const hr={},gr=Object.keys(mr);let vr;const xr=gr.length;let Er;for(vr=0;vr<xr;vr++)Er=gr[vr],hr[Er]=mr[Er];return hr}function formDataToJSON(mr){function hr(gr,vr,xr,Er){let Cr=gr[Er++];if(Cr==="__proto__")return!0;const wr=Number.isFinite(+Cr),Rr=Er>=gr.length;return Cr=!Cr&&utils$1.isArray(xr)?xr.length:Cr,Rr?(utils$1.hasOwnProp(xr,Cr)?xr[Cr]=[xr[Cr],vr]:xr[Cr]=vr,!wr):((!xr[Cr]||!utils$1.isObject(xr[Cr]))&&(xr[Cr]=[]),hr(gr,vr,xr[Cr],Er)&&utils$1.isArray(xr[Cr])&&(xr[Cr]=arrayToObject(xr[Cr])),!wr)}if(utils$1.isFormData(mr)&&utils$1.isFunction(mr.entries)){const gr={};return utils$1.forEachEntry(mr,(vr,xr)=>{hr(parsePropPath(vr),xr,gr,0)}),gr}return null}function stringifySafely(mr,hr,gr){if(utils$1.isString(mr))try{return(hr||JSON.parse)(mr),utils$1.trim(mr)}catch(vr){if(vr.name!=="SyntaxError")throw vr}return(0,JSON.stringify)(mr)}const defaults$1={transitional:transitionalDefaults,adapter:["xhr","http","fetch"],transformRequest:[function(hr,gr){const vr=gr.getContentType()||"",xr=vr.indexOf("application/json")>-1,Er=utils$1.isObject(hr);if(Er&&utils$1.isHTMLForm(hr)&&(hr=new FormData(hr)),utils$1.isFormData(hr))return xr?JSON.stringify(formDataToJSON(hr)):hr;if(utils$1.isArrayBuffer(hr)||utils$1.isBuffer(hr)||utils$1.isStream(hr)||utils$1.isFile(hr)||utils$1.isBlob(hr)||utils$1.isReadableStream(hr))return hr;if(utils$1.isArrayBufferView(hr))return hr.buffer;if(utils$1.isURLSearchParams(hr))return gr.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),hr.toString();let wr;if(Er){if(vr.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(hr,this.formSerializer).toString();if((wr=utils$1.isFileList(hr))||vr.indexOf("multipart/form-data")>-1){const Rr=this.env&&this.env.FormData;return toFormData(wr?{"files[]":hr}:hr,Rr&&new Rr,this.formSerializer)}}return Er||xr?(gr.setContentType("application/json",!1),stringifySafely(hr)):hr}],transformResponse:[function(hr){const gr=this.transitional||defaults$1.transitional,vr=gr&&gr.forcedJSONParsing,xr=this.responseType==="json";if(utils$1.isResponse(hr)||utils$1.isReadableStream(hr))return hr;if(hr&&utils$1.isString(hr)&&(vr&&!this.responseType||xr)){const Cr=!(gr&&gr.silentJSONParsing)&&xr;try{return JSON.parse(hr)}catch(wr){if(Cr)throw wr.name==="SyntaxError"?AxiosError.from(wr,AxiosError.ERR_BAD_RESPONSE,this,null,this.response):wr}}return hr}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function(hr){return hr>=200&&hr<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$1.forEach(["delete","get","head","post","put","patch"],mr=>{defaults$1.headers[mr]={}});const ignoreDuplicateOf=utils$1.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=mr=>{const hr={};let gr,vr,xr;return mr&&mr.split(`
`).forEach(function(Cr){xr=Cr.indexOf(":"),gr=Cr.substring(0,xr).trim().toLowerCase(),vr=Cr.substring(xr+1).trim(),!(!gr||hr[gr]&&ignoreDuplicateOf[gr])&&(gr==="set-cookie"?hr[gr]?hr[gr].push(vr):hr[gr]=[vr]:hr[gr]=hr[gr]?hr[gr]+", "+vr:vr)}),hr},$internals=Symbol("internals");function normalizeHeader(mr){return mr&&String(mr).trim().toLowerCase()}function normalizeValue(mr){return mr===!1||mr==null?mr:utils$1.isArray(mr)?mr.map(normalizeValue):String(mr)}function parseTokens(mr){const hr=Object.create(null),gr=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let vr;for(;vr=gr.exec(mr);)hr[vr[1]]=vr[2];return hr}const isValidHeaderName=mr=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(mr.trim());function matchHeaderValue(mr,hr,gr,vr,xr){if(utils$1.isFunction(vr))return vr.call(this,hr,gr);if(xr&&(hr=gr),!!utils$1.isString(hr)){if(utils$1.isString(vr))return hr.indexOf(vr)!==-1;if(utils$1.isRegExp(vr))return vr.test(hr)}}function formatHeader(mr){return mr.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(hr,gr,vr)=>gr.toUpperCase()+vr)}function buildAccessors(mr,hr){const gr=utils$1.toCamelCase(" "+hr);["get","set","has"].forEach(vr=>{Object.defineProperty(mr,vr+gr,{value:function(xr,Er,Cr){return this[vr].call(this,hr,xr,Er,Cr)},configurable:!0})})}class AxiosHeaders{constructor(hr){hr&&this.set(hr)}set(hr,gr,vr){const xr=this;function Er(wr,Rr,kr){const Dr=normalizeHeader(Rr);if(!Dr)throw new Error("header name must be a non-empty string");const Br=utils$1.findKey(xr,Dr);(!Br||xr[Br]===void 0||kr===!0||kr===void 0&&xr[Br]!==!1)&&(xr[Br||Rr]=normalizeValue(wr))}const Cr=(wr,Rr)=>utils$1.forEach(wr,(kr,Dr)=>Er(kr,Dr,Rr));if(utils$1.isPlainObject(hr)||hr instanceof this.constructor)Cr(hr,gr);else if(utils$1.isString(hr)&&(hr=hr.trim())&&!isValidHeaderName(hr))Cr(parseHeaders(hr),gr);else if(utils$1.isHeaders(hr))for(const[wr,Rr]of hr.entries())Er(Rr,wr,vr);else hr!=null&&Er(gr,hr,vr);return this}get(hr,gr){if(hr=normalizeHeader(hr),hr){const vr=utils$1.findKey(this,hr);if(vr){const xr=this[vr];if(!gr)return xr;if(gr===!0)return parseTokens(xr);if(utils$1.isFunction(gr))return gr.call(this,xr,vr);if(utils$1.isRegExp(gr))return gr.exec(xr);throw new TypeError("parser must be boolean|regexp|function")}}}has(hr,gr){if(hr=normalizeHeader(hr),hr){const vr=utils$1.findKey(this,hr);return!!(vr&&this[vr]!==void 0&&(!gr||matchHeaderValue(this,this[vr],vr,gr)))}return!1}delete(hr,gr){const vr=this;let xr=!1;function Er(Cr){if(Cr=normalizeHeader(Cr),Cr){const wr=utils$1.findKey(vr,Cr);wr&&(!gr||matchHeaderValue(vr,vr[wr],wr,gr))&&(delete vr[wr],xr=!0)}}return utils$1.isArray(hr)?hr.forEach(Er):Er(hr),xr}clear(hr){const gr=Object.keys(this);let vr=gr.length,xr=!1;for(;vr--;){const Er=gr[vr];(!hr||matchHeaderValue(this,this[Er],Er,hr,!0))&&(delete this[Er],xr=!0)}return xr}normalize(hr){const gr=this,vr={};return utils$1.forEach(this,(xr,Er)=>{const Cr=utils$1.findKey(vr,Er);if(Cr){gr[Cr]=normalizeValue(xr),delete gr[Er];return}const wr=hr?formatHeader(Er):String(Er).trim();wr!==Er&&delete gr[Er],gr[wr]=normalizeValue(xr),vr[wr]=!0}),this}concat(...hr){return this.constructor.concat(this,...hr)}toJSON(hr){const gr=Object.create(null);return utils$1.forEach(this,(vr,xr)=>{vr!=null&&vr!==!1&&(gr[xr]=hr&&utils$1.isArray(vr)?vr.join(", "):vr)}),gr}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([hr,gr])=>hr+": "+gr).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(hr){return hr instanceof this?hr:new this(hr)}static concat(hr,...gr){const vr=new this(hr);return gr.forEach(xr=>vr.set(xr)),vr}static accessor(hr){const vr=(this[$internals]=this[$internals]={accessors:{}}).accessors,xr=this.prototype;function Er(Cr){const wr=normalizeHeader(Cr);vr[wr]||(buildAccessors(xr,Cr),vr[wr]=!0)}return utils$1.isArray(hr)?hr.forEach(Er):Er(hr),this}}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$1.reduceDescriptors(AxiosHeaders.prototype,({value:mr},hr)=>{let gr=hr[0].toUpperCase()+hr.slice(1);return{get:()=>mr,set(vr){this[gr]=vr}}});utils$1.freezeMethods(AxiosHeaders);function transformData(mr,hr){const gr=this||defaults$1,vr=hr||gr,xr=AxiosHeaders.from(vr.headers);let Er=vr.data;return utils$1.forEach(mr,function(wr){Er=wr.call(gr,Er,xr.normalize(),hr?hr.status:void 0)}),xr.normalize(),Er}function isCancel(mr){return!!(mr&&mr.__CANCEL__)}function CanceledError(mr,hr,gr){AxiosError.call(this,mr??"canceled",AxiosError.ERR_CANCELED,hr,gr),this.name="CanceledError"}utils$1.inherits(CanceledError,AxiosError,{__CANCEL__:!0});function settle(mr,hr,gr){const vr=gr.config.validateStatus;!gr.status||!vr||vr(gr.status)?mr(gr):hr(new AxiosError("Request failed with status code "+gr.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(gr.status/100)-4],gr.config,gr.request,gr))}function parseProtocol(mr){const hr=/^([-+\w]{1,25})(:?\/\/|:)/.exec(mr);return hr&&hr[1]||""}function speedometer(mr,hr){mr=mr||10;const gr=new Array(mr),vr=new Array(mr);let xr=0,Er=0,Cr;return hr=hr!==void 0?hr:1e3,function(Rr){const kr=Date.now(),Dr=vr[Er];Cr||(Cr=kr),gr[xr]=Rr,vr[xr]=kr;let Br=Er,Hr=0;for(;Br!==xr;)Hr+=gr[Br++],Br=Br%mr;if(xr=(xr+1)%mr,xr===Er&&(Er=(Er+1)%mr),kr-Cr<hr)return;const Gr=Dr&&kr-Dr;return Gr?Math.round(Hr*1e3/Gr):void 0}}function throttle$2(mr,hr){let gr=0,vr=1e3/hr,xr,Er;const Cr=(kr,Dr=Date.now())=>{gr=Dr,xr=null,Er&&(clearTimeout(Er),Er=null),mr.apply(null,kr)};return[(...kr)=>{const Dr=Date.now(),Br=Dr-gr;Br>=vr?Cr(kr,Dr):(xr=kr,Er||(Er=setTimeout(()=>{Er=null,Cr(xr)},vr-Br)))},()=>xr&&Cr(xr)]}const progressEventReducer=(mr,hr,gr=3)=>{let vr=0;const xr=speedometer(50,250);return throttle$2(Er=>{const Cr=Er.loaded,wr=Er.lengthComputable?Er.total:void 0,Rr=Cr-vr,kr=xr(Rr),Dr=Cr<=wr;vr=Cr;const Br={loaded:Cr,total:wr,progress:wr?Cr/wr:void 0,bytes:Rr,rate:kr||void 0,estimated:kr&&wr&&Dr?(wr-Cr)/kr:void 0,event:Er,lengthComputable:wr!=null,[hr?"download":"upload"]:!0};mr(Br)},gr)},progressEventDecorator=(mr,hr)=>{const gr=mr!=null;return[vr=>hr[0]({lengthComputable:gr,total:mr,loaded:vr}),hr[1]]},asyncDecorator=mr=>(...hr)=>utils$1.asap(()=>mr(...hr)),isURLSameOrigin=platform.hasStandardBrowserEnv?function(){const hr=/(msie|trident)/i.test(navigator.userAgent),gr=document.createElement("a");let vr;function xr(Er){let Cr=Er;return hr&&(gr.setAttribute("href",Cr),Cr=gr.href),gr.setAttribute("href",Cr),{href:gr.href,protocol:gr.protocol?gr.protocol.replace(/:$/,""):"",host:gr.host,search:gr.search?gr.search.replace(/^\?/,""):"",hash:gr.hash?gr.hash.replace(/^#/,""):"",hostname:gr.hostname,port:gr.port,pathname:gr.pathname.charAt(0)==="/"?gr.pathname:"/"+gr.pathname}}return vr=xr(window.location.href),function(Cr){const wr=utils$1.isString(Cr)?xr(Cr):Cr;return wr.protocol===vr.protocol&&wr.host===vr.host}}():function(){return function(){return!0}}(),cookies=platform.hasStandardBrowserEnv?{write(mr,hr,gr,vr,xr,Er){const Cr=[mr+"="+encodeURIComponent(hr)];utils$1.isNumber(gr)&&Cr.push("expires="+new Date(gr).toGMTString()),utils$1.isString(vr)&&Cr.push("path="+vr),utils$1.isString(xr)&&Cr.push("domain="+xr),Er===!0&&Cr.push("secure"),document.cookie=Cr.join("; ")},read(mr){const hr=document.cookie.match(new RegExp("(^|;\\s*)("+mr+")=([^;]*)"));return hr?decodeURIComponent(hr[3]):null},remove(mr){this.write(mr,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL(mr){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(mr)}function combineURLs(mr,hr){return hr?mr.replace(/\/?\/$/,"")+"/"+hr.replace(/^\/+/,""):mr}function buildFullPath(mr,hr){return mr&&!isAbsoluteURL(hr)?combineURLs(mr,hr):hr}const headersToObject=mr=>mr instanceof AxiosHeaders?{...mr}:mr;function mergeConfig$1(mr,hr){hr=hr||{};const gr={};function vr(kr,Dr,Br){return utils$1.isPlainObject(kr)&&utils$1.isPlainObject(Dr)?utils$1.merge.call({caseless:Br},kr,Dr):utils$1.isPlainObject(Dr)?utils$1.merge({},Dr):utils$1.isArray(Dr)?Dr.slice():Dr}function xr(kr,Dr,Br){if(utils$1.isUndefined(Dr)){if(!utils$1.isUndefined(kr))return vr(void 0,kr,Br)}else return vr(kr,Dr,Br)}function Er(kr,Dr){if(!utils$1.isUndefined(Dr))return vr(void 0,Dr)}function Cr(kr,Dr){if(utils$1.isUndefined(Dr)){if(!utils$1.isUndefined(kr))return vr(void 0,kr)}else return vr(void 0,Dr)}function wr(kr,Dr,Br){if(Br in hr)return vr(kr,Dr);if(Br in mr)return vr(void 0,kr)}const Rr={url:Er,method:Er,data:Er,baseURL:Cr,transformRequest:Cr,transformResponse:Cr,paramsSerializer:Cr,timeout:Cr,timeoutMessage:Cr,withCredentials:Cr,withXSRFToken:Cr,adapter:Cr,responseType:Cr,xsrfCookieName:Cr,xsrfHeaderName:Cr,onUploadProgress:Cr,onDownloadProgress:Cr,decompress:Cr,maxContentLength:Cr,maxBodyLength:Cr,beforeRedirect:Cr,transport:Cr,httpAgent:Cr,httpsAgent:Cr,cancelToken:Cr,socketPath:Cr,responseEncoding:Cr,validateStatus:wr,headers:(kr,Dr)=>xr(headersToObject(kr),headersToObject(Dr),!0)};return utils$1.forEach(Object.keys(Object.assign({},mr,hr)),function(Dr){const Br=Rr[Dr]||xr,Hr=Br(mr[Dr],hr[Dr],Dr);utils$1.isUndefined(Hr)&&Br!==wr||(gr[Dr]=Hr)}),gr}const resolveConfig=mr=>{const hr=mergeConfig$1({},mr);let{data:gr,withXSRFToken:vr,xsrfHeaderName:xr,xsrfCookieName:Er,headers:Cr,auth:wr}=hr;hr.headers=Cr=AxiosHeaders.from(Cr),hr.url=buildURL(buildFullPath(hr.baseURL,hr.url),mr.params,mr.paramsSerializer),wr&&Cr.set("Authorization","Basic "+btoa((wr.username||"")+":"+(wr.password?unescape(encodeURIComponent(wr.password)):"")));let Rr;if(utils$1.isFormData(gr)){if(platform.hasStandardBrowserEnv||platform.hasStandardBrowserWebWorkerEnv)Cr.setContentType(void 0);else if((Rr=Cr.getContentType())!==!1){const[kr,...Dr]=Rr?Rr.split(";").map(Br=>Br.trim()).filter(Boolean):[];Cr.setContentType([kr||"multipart/form-data",...Dr].join("; "))}}if(platform.hasStandardBrowserEnv&&(vr&&utils$1.isFunction(vr)&&(vr=vr(hr)),vr||vr!==!1&&isURLSameOrigin(hr.url))){const kr=xr&&Er&&cookies.read(Er);kr&&Cr.set(xr,kr)}return hr},isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(mr){return new Promise(function(gr,vr){const xr=resolveConfig(mr);let Er=xr.data;const Cr=AxiosHeaders.from(xr.headers).normalize();let{responseType:wr,onUploadProgress:Rr,onDownloadProgress:kr}=xr,Dr,Br,Hr,Gr,qr;function zr(){Gr&&Gr(),qr&&qr(),xr.cancelToken&&xr.cancelToken.unsubscribe(Dr),xr.signal&&xr.signal.removeEventListener("abort",Dr)}let Qr=new XMLHttpRequest;Qr.open(xr.method.toUpperCase(),xr.url,!0),Qr.timeout=xr.timeout;function sn(){if(!Qr)return;const vn=AxiosHeaders.from("getAllResponseHeaders"in Qr&&Qr.getAllResponseHeaders()),gn={data:!wr||wr==="text"||wr==="json"?Qr.responseText:Qr.response,status:Qr.status,statusText:Qr.statusText,headers:vn,config:mr,request:Qr};settle(function(xn){gr(xn),zr()},function(xn){vr(xn),zr()},gn),Qr=null}"onloadend"in Qr?Qr.onloadend=sn:Qr.onreadystatechange=function(){!Qr||Qr.readyState!==4||Qr.status===0&&!(Qr.responseURL&&Qr.responseURL.indexOf("file:")===0)||setTimeout(sn)},Qr.onabort=function(){Qr&&(vr(new AxiosError("Request aborted",AxiosError.ECONNABORTED,mr,Qr)),Qr=null)},Qr.onerror=function(){vr(new AxiosError("Network Error",AxiosError.ERR_NETWORK,mr,Qr)),Qr=null},Qr.ontimeout=function(){let yn=xr.timeout?"timeout of "+xr.timeout+"ms exceeded":"timeout exceeded";const gn=xr.transitional||transitionalDefaults;xr.timeoutErrorMessage&&(yn=xr.timeoutErrorMessage),vr(new AxiosError(yn,gn.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,mr,Qr)),Qr=null},Er===void 0&&Cr.setContentType(null),"setRequestHeader"in Qr&&utils$1.forEach(Cr.toJSON(),function(yn,gn){Qr.setRequestHeader(gn,yn)}),utils$1.isUndefined(xr.withCredentials)||(Qr.withCredentials=!!xr.withCredentials),wr&&wr!=="json"&&(Qr.responseType=xr.responseType),kr&&([Hr,qr]=progressEventReducer(kr,!0),Qr.addEventListener("progress",Hr)),Rr&&Qr.upload&&([Br,Gr]=progressEventReducer(Rr),Qr.upload.addEventListener("progress",Br),Qr.upload.addEventListener("loadend",Gr)),(xr.cancelToken||xr.signal)&&(Dr=vn=>{Qr&&(vr(!vn||vn.type?new CanceledError(null,mr,Qr):vn),Qr.abort(),Qr=null)},xr.cancelToken&&xr.cancelToken.subscribe(Dr),xr.signal&&(xr.signal.aborted?Dr():xr.signal.addEventListener("abort",Dr)));const hn=parseProtocol(xr.url);if(hn&&platform.protocols.indexOf(hn)===-1){vr(new AxiosError("Unsupported protocol "+hn+":",AxiosError.ERR_BAD_REQUEST,mr));return}Qr.send(Er||null)})},composeSignals=(mr,hr)=>{let gr=new AbortController,vr;const xr=function(Rr){if(!vr){vr=!0,Cr();const kr=Rr instanceof Error?Rr:this.reason;gr.abort(kr instanceof AxiosError?kr:new CanceledError(kr instanceof Error?kr.message:kr))}};let Er=hr&&setTimeout(()=>{xr(new AxiosError(`timeout ${hr} of ms exceeded`,AxiosError.ETIMEDOUT))},hr);const Cr=()=>{mr&&(Er&&clearTimeout(Er),Er=null,mr.forEach(Rr=>{Rr&&(Rr.removeEventListener?Rr.removeEventListener("abort",xr):Rr.unsubscribe(xr))}),mr=null)};mr.forEach(Rr=>Rr&&Rr.addEventListener&&Rr.addEventListener("abort",xr));const{signal:wr}=gr;return wr.unsubscribe=Cr,[wr,()=>{Er&&clearTimeout(Er),Er=null}]},streamChunk=function*(mr,hr){let gr=mr.byteLength;if(gr<hr){yield mr;return}let vr=0,xr;for(;vr<gr;)xr=vr+hr,yield mr.slice(vr,xr),vr=xr},readBytes=async function*(mr,hr,gr){for await(const vr of mr)yield*streamChunk(ArrayBuffer.isView(vr)?vr:await gr(String(vr)),hr)},trackStream=(mr,hr,gr,vr,xr)=>{const Er=readBytes(mr,hr,xr);let Cr=0,wr,Rr=kr=>{wr||(wr=!0,vr&&vr(kr))};return new ReadableStream({async pull(kr){try{const{done:Dr,value:Br}=await Er.next();if(Dr){Rr(),kr.close();return}let Hr=Br.byteLength;if(gr){let Gr=Cr+=Hr;gr(Gr)}kr.enqueue(new Uint8Array(Br))}catch(Dr){throw Rr(Dr),Dr}},cancel(kr){return Rr(kr),Er.return()}},{highWaterMark:2})},isFetchSupported=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",isReadableStreamSupported=isFetchSupported&&typeof ReadableStream=="function",encodeText=isFetchSupported&&(typeof TextEncoder=="function"?(mr=>hr=>mr.encode(hr))(new TextEncoder):async mr=>new Uint8Array(await new Response(mr).arrayBuffer())),test=(mr,...hr)=>{try{return!!mr(...hr)}catch{return!1}},supportsRequestStream=isReadableStreamSupported&&test(()=>{let mr=!1;const hr=new Request(platform.origin,{body:new ReadableStream,method:"POST",get duplex(){return mr=!0,"half"}}).headers.has("Content-Type");return mr&&!hr}),DEFAULT_CHUNK_SIZE=64*1024,supportsResponseStream=isReadableStreamSupported&&test(()=>utils$1.isReadableStream(new Response("").body)),resolvers={stream:supportsResponseStream&&(mr=>mr.body)};isFetchSupported&&(mr=>{["text","arrayBuffer","blob","formData","stream"].forEach(hr=>{!resolvers[hr]&&(resolvers[hr]=utils$1.isFunction(mr[hr])?gr=>gr[hr]():(gr,vr)=>{throw new AxiosError(`Response type '${hr}' is not supported`,AxiosError.ERR_NOT_SUPPORT,vr)})})})(new Response);const getBodyLength=async mr=>{if(mr==null)return 0;if(utils$1.isBlob(mr))return mr.size;if(utils$1.isSpecCompliantForm(mr))return(await new Request(mr).arrayBuffer()).byteLength;if(utils$1.isArrayBufferView(mr)||utils$1.isArrayBuffer(mr))return mr.byteLength;if(utils$1.isURLSearchParams(mr)&&(mr=mr+""),utils$1.isString(mr))return(await encodeText(mr)).byteLength},resolveBodyLength=async(mr,hr)=>{const gr=utils$1.toFiniteNumber(mr.getContentLength());return gr??getBodyLength(hr)},fetchAdapter=isFetchSupported&&(async mr=>{let{url:hr,method:gr,data:vr,signal:xr,cancelToken:Er,timeout:Cr,onDownloadProgress:wr,onUploadProgress:Rr,responseType:kr,headers:Dr,withCredentials:Br="same-origin",fetchOptions:Hr}=resolveConfig(mr);kr=kr?(kr+"").toLowerCase():"text";let[Gr,qr]=xr||Er||Cr?composeSignals([xr,Er],Cr):[],zr,Qr;const sn=()=>{!zr&&setTimeout(()=>{Gr&&Gr.unsubscribe()}),zr=!0};let hn;try{if(Rr&&supportsRequestStream&&gr!=="get"&&gr!=="head"&&(hn=await resolveBodyLength(Dr,vr))!==0){let bn=new Request(hr,{method:"POST",body:vr,duplex:"half"}),xn;if(utils$1.isFormData(vr)&&(xn=bn.headers.get("content-type"))&&Dr.setContentType(xn),bn.body){const[$n,Sn]=progressEventDecorator(hn,progressEventReducer(asyncDecorator(Rr)));vr=trackStream(bn.body,DEFAULT_CHUNK_SIZE,$n,Sn,encodeText)}}utils$1.isString(Br)||(Br=Br?"include":"omit"),Qr=new Request(hr,{...Hr,signal:Gr,method:gr.toUpperCase(),headers:Dr.normalize().toJSON(),body:vr,duplex:"half",credentials:Br});let vn=await fetch(Qr);const yn=supportsResponseStream&&(kr==="stream"||kr==="response");if(supportsResponseStream&&(wr||yn)){const bn={};["status","statusText","headers"].forEach(Cn=>{bn[Cn]=vn[Cn]});const xn=utils$1.toFiniteNumber(vn.headers.get("content-length")),[$n,Sn]=wr&&progressEventDecorator(xn,progressEventReducer(asyncDecorator(wr),!0))||[];vn=new Response(trackStream(vn.body,DEFAULT_CHUNK_SIZE,$n,()=>{Sn&&Sn(),yn&&sn()},encodeText),bn)}kr=kr||"text";let gn=await resolvers[utils$1.findKey(resolvers,kr)||"text"](vn,mr);return!yn&&sn(),qr&&qr(),await new Promise((bn,xn)=>{settle(bn,xn,{data:gn,headers:AxiosHeaders.from(vn.headers),status:vn.status,statusText:vn.statusText,config:mr,request:Qr})})}catch(vn){throw sn(),vn&&vn.name==="TypeError"&&/fetch/i.test(vn.message)?Object.assign(new AxiosError("Network Error",AxiosError.ERR_NETWORK,mr,Qr),{cause:vn.cause||vn}):AxiosError.from(vn,vn&&vn.code,mr,Qr)}}),knownAdapters={http:httpAdapter,xhr:xhrAdapter,fetch:fetchAdapter};utils$1.forEach(knownAdapters,(mr,hr)=>{if(mr){try{Object.defineProperty(mr,"name",{value:hr})}catch{}Object.defineProperty(mr,"adapterName",{value:hr})}});const renderReason=mr=>`- ${mr}`,isResolvedHandle=mr=>utils$1.isFunction(mr)||mr===null||mr===!1,adapters={getAdapter:mr=>{mr=utils$1.isArray(mr)?mr:[mr];const{length:hr}=mr;let gr,vr;const xr={};for(let Er=0;Er<hr;Er++){gr=mr[Er];let Cr;if(vr=gr,!isResolvedHandle(gr)&&(vr=knownAdapters[(Cr=String(gr)).toLowerCase()],vr===void 0))throw new AxiosError(`Unknown adapter '${Cr}'`);if(vr)break;xr[Cr||"#"+Er]=vr}if(!vr){const Er=Object.entries(xr).map(([wr,Rr])=>`adapter ${wr} `+(Rr===!1?"is not supported by the environment":"is not available in the build"));let Cr=hr?Er.length>1?`since :
`+Er.map(renderReason).join(`
`):" "+renderReason(Er[0]):"as no adapter specified";throw new AxiosError("There is no suitable adapter to dispatch the request "+Cr,"ERR_NOT_SUPPORT")}return vr},adapters:knownAdapters};function throwIfCancellationRequested(mr){if(mr.cancelToken&&mr.cancelToken.throwIfRequested(),mr.signal&&mr.signal.aborted)throw new CanceledError(null,mr)}function dispatchRequest(mr){return throwIfCancellationRequested(mr),mr.headers=AxiosHeaders.from(mr.headers),mr.data=transformData.call(mr,mr.transformRequest),["post","put","patch"].indexOf(mr.method)!==-1&&mr.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(mr.adapter||defaults$1.adapter)(mr).then(function(vr){return throwIfCancellationRequested(mr),vr.data=transformData.call(mr,mr.transformResponse,vr),vr.headers=AxiosHeaders.from(vr.headers),vr},function(vr){return isCancel(vr)||(throwIfCancellationRequested(mr),vr&&vr.response&&(vr.response.data=transformData.call(mr,mr.transformResponse,vr.response),vr.response.headers=AxiosHeaders.from(vr.response.headers))),Promise.reject(vr)})}const VERSION="1.7.4",validators$1={};["object","boolean","number","function","string","symbol"].forEach((mr,hr)=>{validators$1[mr]=function(vr){return typeof vr===mr||"a"+(hr<1?"n ":" ")+mr}});const deprecatedWarnings={};validators$1.transitional=function(hr,gr,vr){function xr(Er,Cr){return"[Axios v"+VERSION+"] Transitional option '"+Er+"'"+Cr+(vr?". "+vr:"")}return(Er,Cr,wr)=>{if(hr===!1)throw new AxiosError(xr(Cr," has been removed"+(gr?" in "+gr:"")),AxiosError.ERR_DEPRECATED);return gr&&!deprecatedWarnings[Cr]&&(deprecatedWarnings[Cr]=!0,console.warn(xr(Cr," has been deprecated since v"+gr+" and will be removed in the near future"))),hr?hr(Er,Cr,wr):!0}};function assertOptions(mr,hr,gr){if(typeof mr!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);const vr=Object.keys(mr);let xr=vr.length;for(;xr-- >0;){const Er=vr[xr],Cr=hr[Er];if(Cr){const wr=mr[Er],Rr=wr===void 0||Cr(wr,Er,mr);if(Rr!==!0)throw new AxiosError("option "+Er+" must be "+Rr,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(gr!==!0)throw new AxiosError("Unknown option "+Er,AxiosError.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;class Axios{constructor(hr){this.defaults=hr,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}async request(hr,gr){try{return await this._request(hr,gr)}catch(vr){if(vr instanceof Error){let xr;Error.captureStackTrace?Error.captureStackTrace(xr={}):xr=new Error;const Er=xr.stack?xr.stack.replace(/^.+\n/,""):"";try{vr.stack?Er&&!String(vr.stack).endsWith(Er.replace(/^.+\n.+\n/,""))&&(vr.stack+=`
`+Er):vr.stack=Er}catch{}}throw vr}}_request(hr,gr){typeof hr=="string"?(gr=gr||{},gr.url=hr):gr=hr||{},gr=mergeConfig$1(this.defaults,gr);const{transitional:vr,paramsSerializer:xr,headers:Er}=gr;vr!==void 0&&validator.assertOptions(vr,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),xr!=null&&(utils$1.isFunction(xr)?gr.paramsSerializer={serialize:xr}:validator.assertOptions(xr,{encode:validators.function,serialize:validators.function},!0)),gr.method=(gr.method||this.defaults.method||"get").toLowerCase();let Cr=Er&&utils$1.merge(Er.common,Er[gr.method]);Er&&utils$1.forEach(["delete","get","head","post","put","patch","common"],qr=>{delete Er[qr]}),gr.headers=AxiosHeaders.concat(Cr,Er);const wr=[];let Rr=!0;this.interceptors.request.forEach(function(zr){typeof zr.runWhen=="function"&&zr.runWhen(gr)===!1||(Rr=Rr&&zr.synchronous,wr.unshift(zr.fulfilled,zr.rejected))});const kr=[];this.interceptors.response.forEach(function(zr){kr.push(zr.fulfilled,zr.rejected)});let Dr,Br=0,Hr;if(!Rr){const qr=[dispatchRequest.bind(this),void 0];for(qr.unshift.apply(qr,wr),qr.push.apply(qr,kr),Hr=qr.length,Dr=Promise.resolve(gr);Br<Hr;)Dr=Dr.then(qr[Br++],qr[Br++]);return Dr}Hr=wr.length;let Gr=gr;for(Br=0;Br<Hr;){const qr=wr[Br++],zr=wr[Br++];try{Gr=qr(Gr)}catch(Qr){zr.call(this,Qr);break}}try{Dr=dispatchRequest.call(this,Gr)}catch(qr){return Promise.reject(qr)}for(Br=0,Hr=kr.length;Br<Hr;)Dr=Dr.then(kr[Br++],kr[Br++]);return Dr}getUri(hr){hr=mergeConfig$1(this.defaults,hr);const gr=buildFullPath(hr.baseURL,hr.url);return buildURL(gr,hr.params,hr.paramsSerializer)}}utils$1.forEach(["delete","get","head","options"],function(hr){Axios.prototype[hr]=function(gr,vr){return this.request(mergeConfig$1(vr||{},{method:hr,url:gr,data:(vr||{}).data}))}});utils$1.forEach(["post","put","patch"],function(hr){function gr(vr){return function(Er,Cr,wr){return this.request(mergeConfig$1(wr||{},{method:hr,headers:vr?{"Content-Type":"multipart/form-data"}:{},url:Er,data:Cr}))}}Axios.prototype[hr]=gr(),Axios.prototype[hr+"Form"]=gr(!0)});class CancelToken{constructor(hr){if(typeof hr!="function")throw new TypeError("executor must be a function.");let gr;this.promise=new Promise(function(Er){gr=Er});const vr=this;this.promise.then(xr=>{if(!vr._listeners)return;let Er=vr._listeners.length;for(;Er-- >0;)vr._listeners[Er](xr);vr._listeners=null}),this.promise.then=xr=>{let Er;const Cr=new Promise(wr=>{vr.subscribe(wr),Er=wr}).then(xr);return Cr.cancel=function(){vr.unsubscribe(Er)},Cr},hr(function(Er,Cr,wr){vr.reason||(vr.reason=new CanceledError(Er,Cr,wr),gr(vr.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(hr){if(this.reason){hr(this.reason);return}this._listeners?this._listeners.push(hr):this._listeners=[hr]}unsubscribe(hr){if(!this._listeners)return;const gr=this._listeners.indexOf(hr);gr!==-1&&this._listeners.splice(gr,1)}static source(){let hr;return{token:new CancelToken(function(xr){hr=xr}),cancel:hr}}}function spread(mr){return function(gr){return mr.apply(null,gr)}}function isAxiosError(mr){return utils$1.isObject(mr)&&mr.isAxiosError===!0}const HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode).forEach(([mr,hr])=>{HttpStatusCode[hr]=mr});function createInstance(mr){const hr=new Axios(mr),gr=bind(Axios.prototype.request,hr);return utils$1.extend(gr,Axios.prototype,hr,{allOwnKeys:!0}),utils$1.extend(gr,hr,null,{allOwnKeys:!0}),gr.create=function(xr){return createInstance(mergeConfig$1(mr,xr))},gr}const axios=createInstance(defaults$1);axios.Axios=Axios;axios.CanceledError=CanceledError;axios.CancelToken=CancelToken;axios.isCancel=isCancel;axios.VERSION=VERSION;axios.toFormData=toFormData;axios.AxiosError=AxiosError;axios.Cancel=axios.CanceledError;axios.all=function(hr){return Promise.all(hr)};axios.spread=spread;axios.isAxiosError=isAxiosError;axios.mergeConfig=mergeConfig$1;axios.AxiosHeaders=AxiosHeaders;axios.formToJSON=mr=>formDataToJSON(utils$1.isHTMLForm(mr)?new FormData(mr):mr);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode;axios.default=axios;var scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(mr){function hr(wn,_n){var Tn=wn.length;wn.push(_n);e:for(;0<Tn;){var Mn=Tn-1>>>1,Ln=wn[Mn];if(0<xr(Ln,_n))wn[Mn]=_n,wn[Tn]=Ln,Tn=Mn;else break e}}function gr(wn){return wn.length===0?null:wn[0]}function vr(wn){if(wn.length===0)return null;var _n=wn[0],Tn=wn.pop();if(Tn!==_n){wn[0]=Tn;e:for(var Mn=0,Ln=wn.length,jn=Ln>>>1;Mn<jn;){var Kn=2*(Mn+1)-1,Nn=wn[Kn],An=Kn+1,kn=wn[An];if(0>xr(Nn,Tn))An<Ln&&0>xr(kn,Nn)?(wn[Mn]=kn,wn[An]=Tn,Mn=An):(wn[Mn]=Nn,wn[Kn]=Tn,Mn=Kn);else if(An<Ln&&0>xr(kn,Tn))wn[Mn]=kn,wn[An]=Tn,Mn=An;else break e}}return _n}function xr(wn,_n){var Tn=wn.sortIndex-_n.sortIndex;return Tn!==0?Tn:wn.id-_n.id}if(typeof performance=="object"&&typeof performance.now=="function"){var Er=performance;mr.unstable_now=function(){return Er.now()}}else{var Cr=Date,wr=Cr.now();mr.unstable_now=function(){return Cr.now()-wr}}var Rr=[],kr=[],Dr=1,Br=null,Hr=3,Gr=!1,qr=!1,zr=!1,Qr=typeof setTimeout=="function"?setTimeout:null,sn=typeof clearTimeout=="function"?clearTimeout:null,hn=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function vn(wn){for(var _n=gr(kr);_n!==null;){if(_n.callback===null)vr(kr);else if(_n.startTime<=wn)vr(kr),_n.sortIndex=_n.expirationTime,hr(Rr,_n);else break;_n=gr(kr)}}function yn(wn){if(zr=!1,vn(wn),!qr)if(gr(Rr)!==null)qr=!0,qn(gn);else{var _n=gr(kr);_n!==null&&On(yn,_n.startTime-wn)}}function gn(wn,_n){qr=!1,zr&&(zr=!1,sn($n),$n=-1),Gr=!0;var Tn=Hr;try{for(vn(_n),Br=gr(Rr);Br!==null&&(!(Br.expirationTime>_n)||wn&&!Rn());){var Mn=Br.callback;if(typeof Mn=="function"){Br.callback=null,Hr=Br.priorityLevel;var Ln=Mn(Br.expirationTime<=_n);_n=mr.unstable_now(),typeof Ln=="function"?Br.callback=Ln:Br===gr(Rr)&&vr(Rr),vn(_n)}else vr(Rr);Br=gr(Rr)}if(Br!==null)var jn=!0;else{var Kn=gr(kr);Kn!==null&&On(yn,Kn.startTime-_n),jn=!1}return jn}finally{Br=null,Hr=Tn,Gr=!1}}var bn=!1,xn=null,$n=-1,Sn=5,Cn=-1;function Rn(){return!(mr.unstable_now()-Cn<Sn)}function Bn(){if(xn!==null){var wn=mr.unstable_now();Cn=wn;var _n=!0;try{_n=xn(!0,wn)}finally{_n?Fn():(bn=!1,xn=null)}}else bn=!1}var Fn;if(typeof hn=="function")Fn=function(){hn(Bn)};else if(typeof MessageChannel<"u"){var Hn=new MessageChannel,Gn=Hn.port2;Hn.port1.onmessage=Bn,Fn=function(){Gn.postMessage(null)}}else Fn=function(){Qr(Bn,0)};function qn(wn){xn=wn,bn||(bn=!0,Fn())}function On(wn,_n){$n=Qr(function(){wn(mr.unstable_now())},_n)}mr.unstable_IdlePriority=5,mr.unstable_ImmediatePriority=1,mr.unstable_LowPriority=4,mr.unstable_NormalPriority=3,mr.unstable_Profiling=null,mr.unstable_UserBlockingPriority=2,mr.unstable_cancelCallback=function(wn){wn.callback=null},mr.unstable_continueExecution=function(){qr||Gr||(qr=!0,qn(gn))},mr.unstable_forceFrameRate=function(wn){0>wn||125<wn?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Sn=0<wn?Math.floor(1e3/wn):5},mr.unstable_getCurrentPriorityLevel=function(){return Hr},mr.unstable_getFirstCallbackNode=function(){return gr(Rr)},mr.unstable_next=function(wn){switch(Hr){case 1:case 2:case 3:var _n=3;break;default:_n=Hr}var Tn=Hr;Hr=_n;try{return wn()}finally{Hr=Tn}},mr.unstable_pauseExecution=function(){},mr.unstable_requestPaint=function(){},mr.unstable_runWithPriority=function(wn,_n){switch(wn){case 1:case 2:case 3:case 4:case 5:break;default:wn=3}var Tn=Hr;Hr=wn;try{return _n()}finally{Hr=Tn}},mr.unstable_scheduleCallback=function(wn,_n,Tn){var Mn=mr.unstable_now();switch(typeof Tn=="object"&&Tn!==null?(Tn=Tn.delay,Tn=typeof Tn=="number"&&0<Tn?Mn+Tn:Mn):Tn=Mn,wn){case 1:var Ln=-1;break;case 2:Ln=250;break;case 5:Ln=1073741823;break;case 4:Ln=1e4;break;default:Ln=5e3}return Ln=Tn+Ln,wn={id:Dr++,callback:_n,priorityLevel:wn,startTime:Tn,expirationTime:Ln,sortIndex:-1},Tn>Mn?(wn.sortIndex=Tn,hr(kr,wn),gr(Rr)===null&&wn===gr(kr)&&(zr?(sn($n),$n=-1):zr=!0,On(yn,Tn-Mn))):(wn.sortIndex=Ln,hr(Rr,wn),qr||Gr||(qr=!0,qn(gn))),wn},mr.unstable_shouldYield=Rn,mr.unstable_wrapCallback=function(wn){var _n=Hr;return function(){var Tn=Hr;Hr=_n;try{return wn.apply(this,arguments)}finally{Hr=Tn}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;const d$1=Symbol(),f=Symbol(),v$1=typeof window>"u"||/ServerSideRendering/.test(window.navigator&&window.navigator.userAgent)?reactExports.useEffect:reactExports.useLayoutEffect,a$1=schedulerExports.unstable_runWithPriority?mr=>schedulerExports.unstable_runWithPriority(schedulerExports.unstable_NormalPriority,mr):mr=>mr();function E$4(mr){const hr=reactExports.createContext({[d$1]:{v:{current:mr},n:{current:-1},l:new Set,u:vr=>vr()}});var gr;return hr[f]=hr.Provider,hr.Provider=(gr=hr.Provider,({value:vr,children:xr})=>{const Er=reactExports.useRef(vr),Cr=reactExports.useRef(0),[wr,Rr]=reactExports.useState(null);wr&&(wr(vr),Rr(null));const kr=reactExports.useRef();if(!kr.current){const Dr=new Set,Br=(Hr,Gr)=>{reactDomExports.unstable_batchedUpdates(()=>{Cr.current+=1;const qr={n:Cr.current};Gr!=null&&Gr.suspense&&(qr.n*=-1,qr.p=new Promise(zr=>{Rr(()=>Qr=>{qr.v=Qr,delete qr.p,zr(Qr)})})),Dr.forEach(zr=>zr(qr)),Hr()})};kr.current={[d$1]:{v:Er,n:Cr,l:Dr,u:Br}}}return v$1(()=>{Er.current=vr,Cr.current+=1,a$1(()=>{kr.current[d$1].l.forEach(Dr=>{Dr({n:Cr.current,v:vr})})})},[vr]),reactExports.createElement(gr,{value:kr.current},xr)}),delete hr.Consumer,hr}function h$2(mr,hr){const gr=reactExports.useContext(mr)[d$1],{v:{current:vr},n:{current:xr},l:Er}=gr,Cr=hr(vr),[wr,Rr]=reactExports.useReducer((kr,Dr)=>{if(!Dr)return[vr,Cr];if("p"in Dr)throw Dr.p;if(Dr.n===xr)return Object.is(kr[1],Cr)?kr:[vr,Cr];try{if("v"in Dr){if(Object.is(kr[0],Dr.v))return kr;const Br=hr(Dr.v);return Object.is(kr[1],Br)?kr:[Dr.v,Br]}}catch{}return[...kr]},[vr,Cr]);return Object.is(wr[1],Cr)||Rr(),v$1(()=>(Er.add(Rr),()=>{Er.delete(Rr)}),[Er]),wr[1]}var baseMerge$1=_baseMerge,isObject$7=isObject_1;function customDefaultsMerge$1(mr,hr,gr,vr,xr,Er){return isObject$7(mr)&&isObject$7(hr)&&(Er.set(hr,mr),baseMerge$1(mr,hr,void 0,customDefaultsMerge$1,Er),Er.delete(hr)),mr}var _customDefaultsMerge=customDefaultsMerge$1,baseMerge=_baseMerge,createAssigner=_createAssigner,mergeWith$1=createAssigner(function(mr,hr,gr,vr){baseMerge(mr,hr,gr,vr)}),mergeWith_1=mergeWith$1,apply=_apply,baseRest=_baseRest,customDefaultsMerge=_customDefaultsMerge,mergeWith=mergeWith_1;baseRest(function(mr){return mr.push(void 0,customDefaultsMerge),apply(mergeWith,void 0,mr)});function createContext(mr,hr){const gr=E$4(hr),vr=Er=>{const{children:Cr,...wr}=Er,Rr=reactExports.useMemo(()=>wr,Object.values(wr));return jsxRuntimeExports.jsx(gr.Provider,{value:Rr,children:Cr})},xr=(Er,Cr)=>h$2(gr,wr=>{if(wr)return Cr(wr);throw new Error(`\`${Er}\` must be used within \`${mr}\``)});return vr.displayName=mr+"Provider",[vr,xr]}const[StrapiAppProvider,useStrapiApp]=createContext("StrapiApp"),useQueryParams=mr=>{const{search:hr}=useLocation(),gr=useNavigate(),vr=reactExports.useMemo(()=>{const Er=hr.startsWith("?")?hr.slice(1):hr;return!hr&&mr?mr:{...mr,...lib$1.parse(Er)}},[hr,mr]),xr=reactExports.useCallback((Er,Cr="push",wr=!1)=>{let Rr={...vr};Cr==="remove"?Object.keys(Er).forEach(kr=>{Object.prototype.hasOwnProperty.call(Rr,kr)&&delete Rr[kr]}):Rr={...vr,...Er},gr({search:lib$1.stringify(Rr,{encode:!1})},{replace:wr})},[gr,vr]);return[{query:vr,rawQuery:hr},xr]},STORAGE_KEYS$1={TOKEN:"jwtToken",USER:"userInfo"},THEME_LOCAL_STORAGE_KEY="STRAPI_THEME",LANGUAGE_LOCAL_STORAGE_KEY="strapi-admin-language",adminSlice=createSlice$1({name:"admin",initialState:()=>({language:{locale:"en",localeNames:{en:"English"}},permissions:{},theme:{availableThemes:[],currentTheme:localStorage.getItem(THEME_LOCAL_STORAGE_KEY)||"system"},token:null}),reducers:{setAppTheme(mr,hr){mr.theme.currentTheme=hr.payload,window.localStorage.setItem(THEME_LOCAL_STORAGE_KEY,hr.payload)},setAvailableThemes(mr,hr){mr.theme.availableThemes=hr.payload},setLocale(mr,hr){mr.language.locale=hr.payload,window.localStorage.setItem(LANGUAGE_LOCAL_STORAGE_KEY,hr.payload),document.documentElement.setAttribute("lang",hr.payload)},setToken(mr,hr){mr.token=hr.payload},login(mr,hr){const{token:gr,persist:vr}=hr.payload;vr?window.localStorage.setItem(STORAGE_KEYS$1.TOKEN,JSON.stringify(gr)):window.sessionStorage.setItem(STORAGE_KEYS$1.TOKEN,JSON.stringify(gr)),mr.token=gr},logout(mr){mr.token=null,window.localStorage.removeItem(STORAGE_KEYS$1.TOKEN),window.localStorage.removeItem(STORAGE_KEYS$1.USER),window.sessionStorage.removeItem(STORAGE_KEYS$1.TOKEN),window.sessionStorage.removeItem(STORAGE_KEYS$1.USER)}}}),reducer$1$1=adminSlice.reducer,authService=adminApi.enhanceEndpoints({addTagTypes:["User","Me","ProvidersOptions"]}).injectEndpoints({endpoints:mr=>({getMe:mr.query({query:()=>({method:"GET",url:"/admin/users/me"}),transformResponse(hr){return hr.data},providesTags:hr=>hr?["Me",{type:"User",id:hr.id}]:["Me"]}),getMyPermissions:mr.query({query:()=>({method:"GET",url:"/admin/users/me/permissions"}),transformResponse(hr){return hr.data}}),updateMe:mr.mutation({query:hr=>({method:"PUT",url:"/admin/users/me",data:hr}),transformResponse(hr){return hr.data},invalidatesTags:["Me"]}),checkPermissions:mr.query({query:hr=>({method:"POST",url:"/admin/permissions/check",data:hr})}),login:mr.mutation({query:hr=>({method:"POST",url:"/admin/login",data:hr}),transformResponse(hr){return hr.data},invalidatesTags:["Me"]}),logout:mr.mutation({query:()=>({method:"POST",url:"/admin/logout"})}),resetPassword:mr.mutation({query:hr=>({method:"POST",url:"/admin/reset-password",data:hr}),transformResponse(hr){return hr.data}}),renewToken:mr.mutation({query:hr=>({method:"POST",url:"/admin/renew-token",data:hr}),transformResponse(hr){return hr.data}}),getRegistrationInfo:mr.query({query:hr=>({url:"/admin/registration-info",method:"GET",config:{params:{registrationToken:hr}}}),transformResponse(hr){return hr.data}}),registerAdmin:mr.mutation({query:hr=>({method:"POST",url:"/admin/register-admin",data:hr}),transformResponse(hr){return hr.data}}),registerUser:mr.mutation({query:hr=>({method:"POST",url:"/admin/register",data:hr}),transformResponse(hr){return hr.data}}),forgotPassword:mr.mutation({query:hr=>({url:"/admin/forgot-password",method:"POST",data:hr})}),isSSOLocked:mr.query({query:()=>({url:"/admin/providers/isSSOLocked",method:"GET"}),transformResponse(hr){return hr.data}}),getProviders:mr.query({query:()=>({url:"/admin/providers",method:"GET"})}),getProviderOptions:mr.query({query:()=>({url:"/admin/providers/options",method:"GET"}),transformResponse(hr){return hr.data},providesTags:["ProvidersOptions"]}),updateProviderOptions:mr.mutation({query:hr=>({url:"/admin/providers/options",method:"PUT",data:hr}),transformResponse(hr){return hr.data},invalidatesTags:["ProvidersOptions"]})}),overrideExisting:!1}),{useCheckPermissionsQuery,useLazyCheckPermissionsQuery,useGetMeQuery,useLoginMutation,useRenewTokenMutation,useLogoutMutation,useUpdateMeMutation,useResetPasswordMutation,useRegisterAdminMutation,useRegisterUserMutation,useGetRegistrationInfoQuery,useForgotPasswordMutation,useGetMyPermissionsQuery,useIsSSOLockedQuery,useGetProvidersQuery,useGetProviderOptionsQuery,useUpdateProviderOptionsMutation}=authService,[Provider$1,useAuth]=createContext("Auth"),NotificationsContext=reactExports.createContext({toggleNotification:()=>{}});/**
 * @preserve
 * @description Returns an object to interact with the notification
 * system. The callbacks are wrapped in `useCallback` for a stable
 * identity.
 *
 * @example
 * ```tsx
 * import { useNotification } from '@strapi/strapi/admin';
 *
 * const MyComponent = () => {
 *  const { toggleNotification } = useNotification();
 *
 *  return <button onClick={() => toggleNotification({ message: 'Hello world!' })}>Click me</button>;
 */const useNotification=()=>reactExports.useContext(NotificationsContext);function getPrefixedId$1(mr,hr){const gr=`apiError.${mr}`;return typeof hr=="function"?hr(gr):gr}function normalizeError$1(mr,{name:hr,intlMessagePrefixCallback:gr}){const{message:vr}=mr,xr={id:getPrefixedId$1(vr,gr),defaultMessage:vr,name:mr.name??hr,values:{}};return"path"in mr&&(xr.values={path:mr.path.join(".")}),xr}const validateErrorIsYupValidationError$1=mr=>typeof mr.details=="object"&&mr.details!==null&&"errors"in mr.details;function normalizeAPIError$1(mr,hr){const gr=mr.response?.data?.error;return gr?validateErrorIsYupValidationError$1(gr)?{name:gr.name,message:gr?.message||null,errors:gr.details.errors.map(vr=>normalizeError$1(vr,{name:gr.name,intlMessagePrefixCallback:hr}))}:normalizeError$1(gr,{intlMessagePrefixCallback:hr}):null}function getIn$2(mr,hr,gr,vr=0){const xr=toPath$2(hr);for(;mr&&vr<xr.length;)mr=mr[xr[vr++]];return vr!==xr.length&&!mr||mr===void 0?gr:mr}const isObject$6=mr=>mr!==null&&typeof mr=="object"&&!Array.isArray(mr),isInteger$1=mr=>String(Math.floor(Number(mr)))===mr;function setIn$1(mr,hr,gr){const vr=clone$3(mr);let xr=vr,Er=0;const Cr=toPath$2(hr);for(;Er<Cr.length-1;Er++){const wr=Cr[Er],Rr=getIn$2(mr,Cr.slice(0,Er+1));if(Rr&&(isObject$6(Rr)||Array.isArray(Rr)))xr=xr[wr]=clone$3(Rr);else{const kr=Cr[Er+1];xr=xr[wr]=isInteger$1(kr)&&Number(kr)>=0?[]:{}}}return(Er===0?mr:xr)[Cr[Er]]===gr?mr:(gr===void 0?delete xr[Cr[Er]]:xr[Cr[Er]]=gr,Er===0&&gr===void 0&&delete vr[Cr[Er]],vr)}function useAPIErrorHandler(mr){const{formatMessage:hr}=useIntl$2(),gr=reactExports.useCallback(vr=>{try{const xr=formatAPIError(vr,{intlMessagePrefixCallback:mr,formatMessage:hr});return xr||formatFetchError(vr,{intlMessagePrefixCallback:mr,formatMessage:hr})}catch{throw new Error("formatAPIError: Unknown error:",vr)}},[hr,mr]);return{_unstableFormatValidationErrors:reactExports.useCallback(vr=>{if(typeof vr.details=="object"&&vr.details!==null){if("errors"in vr.details&&Array.isArray(vr.details.errors))return vr.details.errors.reduce((Er,Cr)=>{const{path:wr,message:Rr}=Cr;return setIn$1(Er,wr.join("."),Rr)},{});{const xr=vr.details;return Object.keys(xr).reduce((Er,Cr)=>{const wr=xr[Cr];return{...Er,[Cr]:wr.join(", ")}},{})}}else return{}},[]),_unstableFormatAPIError:reactExports.useCallback(vr=>{const xr={response:{data:{error:vr}}};return vr.message?gr(xr):"Unknown error occured."},[gr]),formatAPIError:gr}}function formatFetchError(mr,{intlMessagePrefixCallback:hr,formatMessage:gr}){const{code:vr,message:xr}=mr;return gr({id:getPrefixedId$1(xr,hr),defaultMessage:xr},{code:vr})}function formatAPIError(mr,{formatMessage:hr,intlMessagePrefixCallback:gr}){if(!hr)throw new Error("The formatMessage callback is a mandatory argument.");const vr=normalizeAPIError$1(mr,gr);return vr?"message"in vr&&vr.message!==null?vr.message:"errors"in vr?vr.errors.map(({id:xr,defaultMessage:Er,values:Cr})=>hr({id:xr,defaultMessage:Er},Cr)).join(`
`):hr(vr):null}const PageMain=({children:mr,...hr})=>jsxRuntimeExports.jsx(Main,{...hr,children:mr}),Loading$1=({children:mr="Loading content."})=>jsxRuntimeExports.jsx(PageMain,{height:"100vh","aria-busy":!0,children:jsxRuntimeExports.jsx(Flex,{alignItems:"center",height:"100%",justifyContent:"center",children:jsxRuntimeExports.jsx(Loader,{children:mr})})}),Error$1=mr=>{const{formatMessage:hr}=useIntl$2();return jsxRuntimeExports.jsx(PageMain,{height:"100%",children:jsxRuntimeExports.jsx(Flex,{alignItems:"center",height:"100%",justifyContent:"center",children:jsxRuntimeExports.jsx(EmptyStateLayout,{icon:jsxRuntimeExports.jsx(ForwardRef$3$1,{width:"16rem"}),content:hr({id:"anErrorOccurred",defaultMessage:"Woops! Something went wrong. Please, try again."}),...mr})})})},NoPermissions=mr=>{const{formatMessage:hr}=useIntl$2();return jsxRuntimeExports.jsx(PageMain,{height:"100%",children:jsxRuntimeExports.jsx(Flex,{alignItems:"center",height:"100%",justifyContent:"center",children:jsxRuntimeExports.jsx(Box,{minWidth:"50%",children:jsxRuntimeExports.jsx(EmptyStateLayout,{icon:jsxRuntimeExports.jsx(ForwardRef$H,{width:"16rem"}),content:hr({id:"app.components.EmptyStateLayout.content-permissions",defaultMessage:"You don't have the permissions to access that content"}),...mr})})})})},NoData=mr=>{const{formatMessage:hr}=useIntl$2();return jsxRuntimeExports.jsx(PageMain,{height:"100%",background:"neutral100",children:jsxRuntimeExports.jsx(Flex,{alignItems:"center",height:"100%",width:"100%",justifyContent:"center",children:jsxRuntimeExports.jsx(Box,{minWidth:"50%",children:jsxRuntimeExports.jsx(EmptyStateLayout,{icon:jsxRuntimeExports.jsx(ForwardRef$J,{width:"16rem"}),action:mr.action,content:hr({id:"app.components.EmptyStateLayout.content-document",defaultMessage:"No content found"}),...mr})})})})},Protect=({permissions:mr=[],children:hr})=>{const gr=useAuth("Protect",Hr=>Hr.permissions),{toggleNotification:vr}=useNotification(),{_unstableFormatAPIError:xr}=useAPIErrorHandler(),Er=gr.filter(Hr=>mr.findIndex(Gr=>Gr.action===Hr.action&&Gr.subject===Hr.subject)>=0),Cr=Er.some(Hr=>Array.isArray(Hr.conditions)&&Hr.conditions.length>0),{isLoading:wr,error:Rr,data:kr}=useCheckPermissionsQuery({permissions:Er.map(Hr=>({action:Hr.action,subject:Hr.subject}))},{skip:!Cr});if(reactExports.useEffect(()=>{Rr&&vr({type:"danger",message:xr(Rr)})},[Rr,xr,vr]),wr)return jsxRuntimeExports.jsx(Loading$1,{});if(Rr)return jsxRuntimeExports.jsx(Error$1,{});const{data:Dr}=kr||{};return(Cr&&Dr?!Dr.includes(!1):Er.length>0)?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:typeof hr=="function"?hr({permissions:Er}):hr}):jsxRuntimeExports.jsx(NoPermissions,{})},Title=({children:mr})=>(reactExports.useEffect(()=>{document.title=`${mr} | Strapi`},[mr]),null),Page={Error:Error$1,Loading:Loading$1,NoPermissions,Protect,NoData,Main:PageMain,Title},once$1=mr=>{if(typeof mr!="function")throw new TypeError("once requires a function parameter");return(...gr)=>{}},capitalise$1=mr=>mr.charAt(0).toUpperCase()+mr.slice(1),usePrev=mr=>{const hr=reactExports.useRef();return reactExports.useEffect(()=>{hr.current=mr},[mr]),hr.current},useRBAC=(mr=[],hr,gr)=>{const vr=useAuth("useRBAC",sn=>sn.isLoading),[xr,Er]=reactExports.useState(!0),[Cr,wr]=reactExports.useState(),[Rr,kr]=reactExports.useState(),Dr=reactExports.useMemo(()=>once$1(console.warn),[]),Br=reactExports.useMemo(()=>Array.isArray(mr)?mr:(Dr("useRBAC: The first argument should be an array of permissions, not an object. This will be deprecated in the future."),Object.values(mr).flat()),[mr,Dr]),Hr=reactExports.useMemo(()=>Br.reduce((sn,hn)=>({...sn,[getActionName(hn)]:!1}),{}),[Br]),Gr=useAuth("useRBAC",sn=>sn.checkUserHasPermissions),qr=usePrev(Br),zr=usePrev(gr);return reactExports.useEffect(()=>{(!isEqual$3(qr,Br)||zr!==gr)&&(Er(!0),kr(void 0),wr(void 0),Gr(Br,hr,gr).then(sn=>{sn&&kr(sn.reduce((hn,vn)=>({...hn,[getActionName(vn)]:!0}),{}))}).catch(sn=>{wr(sn)}).finally(()=>{Er(!1)}))},[Br,Gr,hr,mr,qr,zr,gr]),{allowedActions:Object.entries({...Hr,...Rr}).reduce((sn,[hn,vn])=>(sn[`can${capitalise$1(hn)}`]=vn,sn),{}),permissions:Br,isLoading:xr||vr,error:Cr}},getActionName=mr=>{const[hr=""]=mr.action.split(".").slice(-1);return hr.split("-").map(capitalise$1).join("")},[AppInfoProvider,useAppInfo]=createContext("AppInfo",{}),TrackingContext=reactExports.createContext({uuid:!1}),useTracking=()=>{const{uuid:mr,telemetryProperties:hr}=reactExports.useContext(TrackingContext),gr=useAppInfo("useTracking",xr=>xr.userId);return{trackUsage:reactExports.useCallback(async(xr,Er)=>{try{if(mr&&!window.strapi.telemetryDisabled)return await axios.post("https://analytics.strapi.io/api/v2/track",{event:xr,userId:gr,eventProperties:{...Er},userProperties:{},groupProperties:{...hr,projectId:mr,projectType:window.strapi.projectType}},{headers:{"Content-Type":"application/json","X-Strapi-Event":xr}})}catch{}return null},[hr,gr,mr])}};$c512c27ab02ef895$export$fd42f52fd3ae1109("ConfigurationContext");createContext("GuidedTour");ft$4`
  body {
    background: ${({theme:mr})=>mr.colors.neutral100};
  }
`;function _setPrototypeOf(mr,hr){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(gr,vr){return gr.__proto__=vr,gr},_setPrototypeOf(mr,hr)}function _inheritsLoose(mr,hr){mr.prototype=Object.create(hr.prototype),mr.prototype.constructor=mr,_setPrototypeOf(mr,hr)}var Subscribable=function(){function mr(){this.listeners=[]}var hr=mr.prototype;return hr.subscribe=function(vr){var xr=this,Er=vr||function(){};return this.listeners.push(Er),this.onSubscribe(),function(){xr.listeners=xr.listeners.filter(function(Cr){return Cr!==Er}),xr.onUnsubscribe()}},hr.hasListeners=function(){return this.listeners.length>0},hr.onSubscribe=function(){},hr.onUnsubscribe=function(){},mr}(),isServer$1=typeof window>"u";function noop$2(){}function functionalUpdate(mr,hr){return typeof mr=="function"?mr(hr):mr}function isValidTimeout(mr){return typeof mr=="number"&&mr>=0&&mr!==1/0}function ensureQueryKeyArray(mr){return Array.isArray(mr)?mr:[mr]}function timeUntilStale(mr,hr){return Math.max(mr+(hr||0)-Date.now(),0)}function parseQueryArgs(mr,hr,gr){return isQueryKey(mr)?typeof hr=="function"?_extends$7({},gr,{queryKey:mr,queryFn:hr}):_extends$7({},hr,{queryKey:mr}):mr}function parseMutationArgs(mr,hr,gr){return isQueryKey(mr)?typeof hr=="function"?_extends$7({},gr,{mutationKey:mr,mutationFn:hr}):_extends$7({},hr,{mutationKey:mr}):typeof mr=="function"?_extends$7({},hr,{mutationFn:mr}):_extends$7({},mr)}function parseFilterArgs(mr,hr,gr){return isQueryKey(mr)?[_extends$7({},hr,{queryKey:mr}),gr]:[mr||{},hr]}function mapQueryStatusFilter(mr,hr){if(mr===!0&&hr===!0||mr==null&&hr==null)return"all";if(mr===!1&&hr===!1)return"none";var gr=mr??!hr;return gr?"active":"inactive"}function matchQuery(mr,hr){var gr=mr.active,vr=mr.exact,xr=mr.fetching,Er=mr.inactive,Cr=mr.predicate,wr=mr.queryKey,Rr=mr.stale;if(isQueryKey(wr)){if(vr){if(hr.queryHash!==hashQueryKeyByOptions(wr,hr.options))return!1}else if(!partialMatchKey(hr.queryKey,wr))return!1}var kr=mapQueryStatusFilter(gr,Er);if(kr==="none")return!1;if(kr!=="all"){var Dr=hr.isActive();if(kr==="active"&&!Dr||kr==="inactive"&&Dr)return!1}return!(typeof Rr=="boolean"&&hr.isStale()!==Rr||typeof xr=="boolean"&&hr.isFetching()!==xr||Cr&&!Cr(hr))}function matchMutation(mr,hr){var gr=mr.exact,vr=mr.fetching,xr=mr.predicate,Er=mr.mutationKey;if(isQueryKey(Er)){if(!hr.options.mutationKey)return!1;if(gr){if(hashQueryKey(hr.options.mutationKey)!==hashQueryKey(Er))return!1}else if(!partialMatchKey(hr.options.mutationKey,Er))return!1}return!(typeof vr=="boolean"&&hr.state.status==="loading"!==vr||xr&&!xr(hr))}function hashQueryKeyByOptions(mr,hr){var gr=hr?.queryKeyHashFn||hashQueryKey;return gr(mr)}function hashQueryKey(mr){var hr=ensureQueryKeyArray(mr);return stableValueHash(hr)}function stableValueHash(mr){return JSON.stringify(mr,function(hr,gr){return isPlainObject$3(gr)?Object.keys(gr).sort().reduce(function(vr,xr){return vr[xr]=gr[xr],vr},{}):gr})}function partialMatchKey(mr,hr){return partialDeepEqual(ensureQueryKeyArray(mr),ensureQueryKeyArray(hr))}function partialDeepEqual(mr,hr){return mr===hr?!0:typeof mr!=typeof hr?!1:mr&&hr&&typeof mr=="object"&&typeof hr=="object"?!Object.keys(hr).some(function(gr){return!partialDeepEqual(mr[gr],hr[gr])}):!1}function replaceEqualDeep(mr,hr){if(mr===hr)return mr;var gr=Array.isArray(mr)&&Array.isArray(hr);if(gr||isPlainObject$3(mr)&&isPlainObject$3(hr)){for(var vr=gr?mr.length:Object.keys(mr).length,xr=gr?hr:Object.keys(hr),Er=xr.length,Cr=gr?[]:{},wr=0,Rr=0;Rr<Er;Rr++){var kr=gr?Rr:xr[Rr];Cr[kr]=replaceEqualDeep(mr[kr],hr[kr]),Cr[kr]===mr[kr]&&wr++}return vr===Er&&wr===vr?mr:Cr}return hr}function shallowEqualObjects(mr,hr){if(mr&&!hr||hr&&!mr)return!1;for(var gr in mr)if(mr[gr]!==hr[gr])return!1;return!0}function isPlainObject$3(mr){if(!hasObjectPrototype(mr))return!1;var hr=mr.constructor;if(typeof hr>"u")return!0;var gr=hr.prototype;return!(!hasObjectPrototype(gr)||!gr.hasOwnProperty("isPrototypeOf"))}function hasObjectPrototype(mr){return Object.prototype.toString.call(mr)==="[object Object]"}function isQueryKey(mr){return typeof mr=="string"||Array.isArray(mr)}function sleep(mr){return new Promise(function(hr){setTimeout(hr,mr)})}function scheduleMicrotask(mr){Promise.resolve().then(mr).catch(function(hr){return setTimeout(function(){throw hr})})}function getAbortController(){if(typeof AbortController=="function")return new AbortController}var FocusManager=function(mr){_inheritsLoose(hr,mr);function hr(){var vr;return vr=mr.call(this)||this,vr.setup=function(xr){var Er;if(!isServer$1&&((Er=window)!=null&&Er.addEventListener)){var Cr=function(){return xr()};return window.addEventListener("visibilitychange",Cr,!1),window.addEventListener("focus",Cr,!1),function(){window.removeEventListener("visibilitychange",Cr),window.removeEventListener("focus",Cr)}}},vr}var gr=hr.prototype;return gr.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},gr.onUnsubscribe=function(){if(!this.hasListeners()){var xr;(xr=this.cleanup)==null||xr.call(this),this.cleanup=void 0}},gr.setEventListener=function(xr){var Er,Cr=this;this.setup=xr,(Er=this.cleanup)==null||Er.call(this),this.cleanup=xr(function(wr){typeof wr=="boolean"?Cr.setFocused(wr):Cr.onFocus()})},gr.setFocused=function(xr){this.focused=xr,xr&&this.onFocus()},gr.onFocus=function(){this.listeners.forEach(function(xr){xr()})},gr.isFocused=function(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)},hr}(Subscribable),focusManager=new FocusManager,OnlineManager=function(mr){_inheritsLoose(hr,mr);function hr(){var vr;return vr=mr.call(this)||this,vr.setup=function(xr){var Er;if(!isServer$1&&((Er=window)!=null&&Er.addEventListener)){var Cr=function(){return xr()};return window.addEventListener("online",Cr,!1),window.addEventListener("offline",Cr,!1),function(){window.removeEventListener("online",Cr),window.removeEventListener("offline",Cr)}}},vr}var gr=hr.prototype;return gr.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},gr.onUnsubscribe=function(){if(!this.hasListeners()){var xr;(xr=this.cleanup)==null||xr.call(this),this.cleanup=void 0}},gr.setEventListener=function(xr){var Er,Cr=this;this.setup=xr,(Er=this.cleanup)==null||Er.call(this),this.cleanup=xr(function(wr){typeof wr=="boolean"?Cr.setOnline(wr):Cr.onOnline()})},gr.setOnline=function(xr){this.online=xr,xr&&this.onOnline()},gr.onOnline=function(){this.listeners.forEach(function(xr){xr()})},gr.isOnline=function(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine},hr}(Subscribable),onlineManager=new OnlineManager;function defaultRetryDelay(mr){return Math.min(1e3*Math.pow(2,mr),3e4)}function isCancelable(mr){return typeof mr?.cancel=="function"}var CancelledError=function(hr){this.revert=hr?.revert,this.silent=hr?.silent};function isCancelledError(mr){return mr instanceof CancelledError}var Retryer=function(hr){var gr=this,vr=!1,xr,Er,Cr,wr;this.abort=hr.abort,this.cancel=function(Hr){return xr?.(Hr)},this.cancelRetry=function(){vr=!0},this.continueRetry=function(){vr=!1},this.continue=function(){return Er?.()},this.failureCount=0,this.isPaused=!1,this.isResolved=!1,this.isTransportCancelable=!1,this.promise=new Promise(function(Hr,Gr){Cr=Hr,wr=Gr});var Rr=function(Gr){gr.isResolved||(gr.isResolved=!0,hr.onSuccess==null||hr.onSuccess(Gr),Er?.(),Cr(Gr))},kr=function(Gr){gr.isResolved||(gr.isResolved=!0,hr.onError==null||hr.onError(Gr),Er?.(),wr(Gr))},Dr=function(){return new Promise(function(Gr){Er=Gr,gr.isPaused=!0,hr.onPause==null||hr.onPause()}).then(function(){Er=void 0,gr.isPaused=!1,hr.onContinue==null||hr.onContinue()})},Br=function Hr(){if(!gr.isResolved){var Gr;try{Gr=hr.fn()}catch(qr){Gr=Promise.reject(qr)}xr=function(zr){if(!gr.isResolved&&(kr(new CancelledError(zr)),gr.abort==null||gr.abort(),isCancelable(Gr)))try{Gr.cancel()}catch{}},gr.isTransportCancelable=isCancelable(Gr),Promise.resolve(Gr).then(Rr).catch(function(qr){var zr,Qr;if(!gr.isResolved){var sn=(zr=hr.retry)!=null?zr:3,hn=(Qr=hr.retryDelay)!=null?Qr:defaultRetryDelay,vn=typeof hn=="function"?hn(gr.failureCount,qr):hn,yn=sn===!0||typeof sn=="number"&&gr.failureCount<sn||typeof sn=="function"&&sn(gr.failureCount,qr);if(vr||!yn){kr(qr);return}gr.failureCount++,hr.onFail==null||hr.onFail(gr.failureCount,qr),sleep(vn).then(function(){if(!focusManager.isFocused()||!onlineManager.isOnline())return Dr()}).then(function(){vr?kr(qr):Hr()})}})}};Br()},NotifyManager=function(){function mr(){this.queue=[],this.transactions=0,this.notifyFn=function(gr){gr()},this.batchNotifyFn=function(gr){gr()}}var hr=mr.prototype;return hr.batch=function(vr){var xr;this.transactions++;try{xr=vr()}finally{this.transactions--,this.transactions||this.flush()}return xr},hr.schedule=function(vr){var xr=this;this.transactions?this.queue.push(vr):scheduleMicrotask(function(){xr.notifyFn(vr)})},hr.batchCalls=function(vr){var xr=this;return function(){for(var Er=arguments.length,Cr=new Array(Er),wr=0;wr<Er;wr++)Cr[wr]=arguments[wr];xr.schedule(function(){vr.apply(void 0,Cr)})}},hr.flush=function(){var vr=this,xr=this.queue;this.queue=[],xr.length&&scheduleMicrotask(function(){vr.batchNotifyFn(function(){xr.forEach(function(Er){vr.notifyFn(Er)})})})},hr.setNotifyFunction=function(vr){this.notifyFn=vr},hr.setBatchNotifyFunction=function(vr){this.batchNotifyFn=vr},mr}(),notifyManager=new NotifyManager,logger$2=console;function getLogger(){return logger$2}function setLogger(mr){logger$2=mr}var Query=function(){function mr(gr){this.abortSignalConsumed=!1,this.hadObservers=!1,this.defaultOptions=gr.defaultOptions,this.setOptions(gr.options),this.observers=[],this.cache=gr.cache,this.queryKey=gr.queryKey,this.queryHash=gr.queryHash,this.initialState=gr.state||this.getDefaultState(this.options),this.state=this.initialState,this.meta=gr.meta,this.scheduleGc()}var hr=mr.prototype;return hr.setOptions=function(vr){var xr;this.options=_extends$7({},this.defaultOptions,vr),this.meta=vr?.meta,this.cacheTime=Math.max(this.cacheTime||0,(xr=this.options.cacheTime)!=null?xr:5*60*1e3)},hr.setDefaultOptions=function(vr){this.defaultOptions=vr},hr.scheduleGc=function(){var vr=this;this.clearGcTimeout(),isValidTimeout(this.cacheTime)&&(this.gcTimeout=setTimeout(function(){vr.optionalRemove()},this.cacheTime))},hr.clearGcTimeout=function(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)},hr.optionalRemove=function(){this.observers.length||(this.state.isFetching?this.hadObservers&&this.scheduleGc():this.cache.remove(this))},hr.setData=function(vr,xr){var Er,Cr,wr=this.state.data,Rr=functionalUpdate(vr,wr);return(Er=(Cr=this.options).isDataEqual)!=null&&Er.call(Cr,wr,Rr)?Rr=wr:this.options.structuralSharing!==!1&&(Rr=replaceEqualDeep(wr,Rr)),this.dispatch({data:Rr,type:"success",dataUpdatedAt:xr?.updatedAt}),Rr},hr.setState=function(vr,xr){this.dispatch({type:"setState",state:vr,setStateOptions:xr})},hr.cancel=function(vr){var xr,Er=this.promise;return(xr=this.retryer)==null||xr.cancel(vr),Er?Er.then(noop$2).catch(noop$2):Promise.resolve()},hr.destroy=function(){this.clearGcTimeout(),this.cancel({silent:!0})},hr.reset=function(){this.destroy(),this.setState(this.initialState)},hr.isActive=function(){return this.observers.some(function(vr){return vr.options.enabled!==!1})},hr.isFetching=function(){return this.state.isFetching},hr.isStale=function(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(function(vr){return vr.getCurrentResult().isStale})},hr.isStaleByTime=function(vr){return vr===void 0&&(vr=0),this.state.isInvalidated||!this.state.dataUpdatedAt||!timeUntilStale(this.state.dataUpdatedAt,vr)},hr.onFocus=function(){var vr,xr=this.observers.find(function(Er){return Er.shouldFetchOnWindowFocus()});xr&&xr.refetch(),(vr=this.retryer)==null||vr.continue()},hr.onOnline=function(){var vr,xr=this.observers.find(function(Er){return Er.shouldFetchOnReconnect()});xr&&xr.refetch(),(vr=this.retryer)==null||vr.continue()},hr.addObserver=function(vr){this.observers.indexOf(vr)===-1&&(this.observers.push(vr),this.hadObservers=!0,this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:vr}))},hr.removeObserver=function(vr){this.observers.indexOf(vr)!==-1&&(this.observers=this.observers.filter(function(xr){return xr!==vr}),this.observers.length||(this.retryer&&(this.retryer.isTransportCancelable||this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.cacheTime?this.scheduleGc():this.cache.remove(this)),this.cache.notify({type:"observerRemoved",query:this,observer:vr}))},hr.getObserversCount=function(){return this.observers.length},hr.invalidate=function(){this.state.isInvalidated||this.dispatch({type:"invalidate"})},hr.fetch=function(vr,xr){var Er=this,Cr,wr,Rr;if(this.state.isFetching){if(this.state.dataUpdatedAt&&xr?.cancelRefetch)this.cancel({silent:!0});else if(this.promise){var kr;return(kr=this.retryer)==null||kr.continueRetry(),this.promise}}if(vr&&this.setOptions(vr),!this.options.queryFn){var Dr=this.observers.find(function(hn){return hn.options.queryFn});Dr&&this.setOptions(Dr.options)}var Br=ensureQueryKeyArray(this.queryKey),Hr=getAbortController(),Gr={queryKey:Br,pageParam:void 0,meta:this.meta};Object.defineProperty(Gr,"signal",{enumerable:!0,get:function(){if(Hr)return Er.abortSignalConsumed=!0,Hr.signal}});var qr=function(){return Er.options.queryFn?(Er.abortSignalConsumed=!1,Er.options.queryFn(Gr)):Promise.reject("Missing queryFn")},zr={fetchOptions:xr,options:this.options,queryKey:Br,state:this.state,fetchFn:qr,meta:this.meta};if((Cr=this.options.behavior)!=null&&Cr.onFetch){var Qr;(Qr=this.options.behavior)==null||Qr.onFetch(zr)}if(this.revertState=this.state,!this.state.isFetching||this.state.fetchMeta!==((wr=zr.fetchOptions)==null?void 0:wr.meta)){var sn;this.dispatch({type:"fetch",meta:(sn=zr.fetchOptions)==null?void 0:sn.meta})}return this.retryer=new Retryer({fn:zr.fetchFn,abort:Hr==null||(Rr=Hr.abort)==null?void 0:Rr.bind(Hr),onSuccess:function(vn){Er.setData(vn),Er.cache.config.onSuccess==null||Er.cache.config.onSuccess(vn,Er),Er.cacheTime===0&&Er.optionalRemove()},onError:function(vn){isCancelledError(vn)&&vn.silent||Er.dispatch({type:"error",error:vn}),isCancelledError(vn)||(Er.cache.config.onError==null||Er.cache.config.onError(vn,Er),getLogger().error(vn)),Er.cacheTime===0&&Er.optionalRemove()},onFail:function(){Er.dispatch({type:"failed"})},onPause:function(){Er.dispatch({type:"pause"})},onContinue:function(){Er.dispatch({type:"continue"})},retry:zr.options.retry,retryDelay:zr.options.retryDelay}),this.promise=this.retryer.promise,this.promise},hr.dispatch=function(vr){var xr=this;this.state=this.reducer(this.state,vr),notifyManager.batch(function(){xr.observers.forEach(function(Er){Er.onQueryUpdate(vr)}),xr.cache.notify({query:xr,type:"queryUpdated",action:vr})})},hr.getDefaultState=function(vr){var xr=typeof vr.initialData=="function"?vr.initialData():vr.initialData,Er=typeof vr.initialData<"u",Cr=Er?typeof vr.initialDataUpdatedAt=="function"?vr.initialDataUpdatedAt():vr.initialDataUpdatedAt:0,wr=typeof xr<"u";return{data:xr,dataUpdateCount:0,dataUpdatedAt:wr?Cr??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchMeta:null,isFetching:!1,isInvalidated:!1,isPaused:!1,status:wr?"success":"idle"}},hr.reducer=function(vr,xr){var Er,Cr;switch(xr.type){case"failed":return _extends$7({},vr,{fetchFailureCount:vr.fetchFailureCount+1});case"pause":return _extends$7({},vr,{isPaused:!0});case"continue":return _extends$7({},vr,{isPaused:!1});case"fetch":return _extends$7({},vr,{fetchFailureCount:0,fetchMeta:(Er=xr.meta)!=null?Er:null,isFetching:!0,isPaused:!1},!vr.dataUpdatedAt&&{error:null,status:"loading"});case"success":return _extends$7({},vr,{data:xr.data,dataUpdateCount:vr.dataUpdateCount+1,dataUpdatedAt:(Cr=xr.dataUpdatedAt)!=null?Cr:Date.now(),error:null,fetchFailureCount:0,isFetching:!1,isInvalidated:!1,isPaused:!1,status:"success"});case"error":var wr=xr.error;return isCancelledError(wr)&&wr.revert&&this.revertState?_extends$7({},this.revertState):_extends$7({},vr,{error:wr,errorUpdateCount:vr.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:vr.fetchFailureCount+1,isFetching:!1,isPaused:!1,status:"error"});case"invalidate":return _extends$7({},vr,{isInvalidated:!0});case"setState":return _extends$7({},vr,xr.state);default:return vr}},mr}(),QueryCache=function(mr){_inheritsLoose(hr,mr);function hr(vr){var xr;return xr=mr.call(this)||this,xr.config=vr||{},xr.queries=[],xr.queriesMap={},xr}var gr=hr.prototype;return gr.build=function(xr,Er,Cr){var wr,Rr=Er.queryKey,kr=(wr=Er.queryHash)!=null?wr:hashQueryKeyByOptions(Rr,Er),Dr=this.get(kr);return Dr||(Dr=new Query({cache:this,queryKey:Rr,queryHash:kr,options:xr.defaultQueryOptions(Er),state:Cr,defaultOptions:xr.getQueryDefaults(Rr),meta:Er.meta}),this.add(Dr)),Dr},gr.add=function(xr){this.queriesMap[xr.queryHash]||(this.queriesMap[xr.queryHash]=xr,this.queries.push(xr),this.notify({type:"queryAdded",query:xr}))},gr.remove=function(xr){var Er=this.queriesMap[xr.queryHash];Er&&(xr.destroy(),this.queries=this.queries.filter(function(Cr){return Cr!==xr}),Er===xr&&delete this.queriesMap[xr.queryHash],this.notify({type:"queryRemoved",query:xr}))},gr.clear=function(){var xr=this;notifyManager.batch(function(){xr.queries.forEach(function(Er){xr.remove(Er)})})},gr.get=function(xr){return this.queriesMap[xr]},gr.getAll=function(){return this.queries},gr.find=function(xr,Er){var Cr=parseFilterArgs(xr,Er),wr=Cr[0];return typeof wr.exact>"u"&&(wr.exact=!0),this.queries.find(function(Rr){return matchQuery(wr,Rr)})},gr.findAll=function(xr,Er){var Cr=parseFilterArgs(xr,Er),wr=Cr[0];return Object.keys(wr).length>0?this.queries.filter(function(Rr){return matchQuery(wr,Rr)}):this.queries},gr.notify=function(xr){var Er=this;notifyManager.batch(function(){Er.listeners.forEach(function(Cr){Cr(xr)})})},gr.onFocus=function(){var xr=this;notifyManager.batch(function(){xr.queries.forEach(function(Er){Er.onFocus()})})},gr.onOnline=function(){var xr=this;notifyManager.batch(function(){xr.queries.forEach(function(Er){Er.onOnline()})})},hr}(Subscribable),Mutation=function(){function mr(gr){this.options=_extends$7({},gr.defaultOptions,gr.options),this.mutationId=gr.mutationId,this.mutationCache=gr.mutationCache,this.observers=[],this.state=gr.state||getDefaultState(),this.meta=gr.meta}var hr=mr.prototype;return hr.setState=function(vr){this.dispatch({type:"setState",state:vr})},hr.addObserver=function(vr){this.observers.indexOf(vr)===-1&&this.observers.push(vr)},hr.removeObserver=function(vr){this.observers=this.observers.filter(function(xr){return xr!==vr})},hr.cancel=function(){return this.retryer?(this.retryer.cancel(),this.retryer.promise.then(noop$2).catch(noop$2)):Promise.resolve()},hr.continue=function(){return this.retryer?(this.retryer.continue(),this.retryer.promise):this.execute()},hr.execute=function(){var vr=this,xr,Er=this.state.status==="loading",Cr=Promise.resolve();return Er||(this.dispatch({type:"loading",variables:this.options.variables}),Cr=Cr.then(function(){vr.mutationCache.config.onMutate==null||vr.mutationCache.config.onMutate(vr.state.variables,vr)}).then(function(){return vr.options.onMutate==null?void 0:vr.options.onMutate(vr.state.variables)}).then(function(wr){wr!==vr.state.context&&vr.dispatch({type:"loading",context:wr,variables:vr.state.variables})})),Cr.then(function(){return vr.executeMutation()}).then(function(wr){xr=wr,vr.mutationCache.config.onSuccess==null||vr.mutationCache.config.onSuccess(xr,vr.state.variables,vr.state.context,vr)}).then(function(){return vr.options.onSuccess==null?void 0:vr.options.onSuccess(xr,vr.state.variables,vr.state.context)}).then(function(){return vr.options.onSettled==null?void 0:vr.options.onSettled(xr,null,vr.state.variables,vr.state.context)}).then(function(){return vr.dispatch({type:"success",data:xr}),xr}).catch(function(wr){return vr.mutationCache.config.onError==null||vr.mutationCache.config.onError(wr,vr.state.variables,vr.state.context,vr),getLogger().error(wr),Promise.resolve().then(function(){return vr.options.onError==null?void 0:vr.options.onError(wr,vr.state.variables,vr.state.context)}).then(function(){return vr.options.onSettled==null?void 0:vr.options.onSettled(void 0,wr,vr.state.variables,vr.state.context)}).then(function(){throw vr.dispatch({type:"error",error:wr}),wr})})},hr.executeMutation=function(){var vr=this,xr;return this.retryer=new Retryer({fn:function(){return vr.options.mutationFn?vr.options.mutationFn(vr.state.variables):Promise.reject("No mutationFn found")},onFail:function(){vr.dispatch({type:"failed"})},onPause:function(){vr.dispatch({type:"pause"})},onContinue:function(){vr.dispatch({type:"continue"})},retry:(xr=this.options.retry)!=null?xr:0,retryDelay:this.options.retryDelay}),this.retryer.promise},hr.dispatch=function(vr){var xr=this;this.state=reducer$2(this.state,vr),notifyManager.batch(function(){xr.observers.forEach(function(Er){Er.onMutationUpdate(vr)}),xr.mutationCache.notify(xr)})},mr}();function getDefaultState(){return{context:void 0,data:void 0,error:null,failureCount:0,isPaused:!1,status:"idle",variables:void 0}}function reducer$2(mr,hr){switch(hr.type){case"failed":return _extends$7({},mr,{failureCount:mr.failureCount+1});case"pause":return _extends$7({},mr,{isPaused:!0});case"continue":return _extends$7({},mr,{isPaused:!1});case"loading":return _extends$7({},mr,{context:hr.context,data:void 0,error:null,isPaused:!1,status:"loading",variables:hr.variables});case"success":return _extends$7({},mr,{data:hr.data,error:null,status:"success",isPaused:!1});case"error":return _extends$7({},mr,{data:void 0,error:hr.error,failureCount:mr.failureCount+1,isPaused:!1,status:"error"});case"setState":return _extends$7({},mr,hr.state);default:return mr}}var MutationCache=function(mr){_inheritsLoose(hr,mr);function hr(vr){var xr;return xr=mr.call(this)||this,xr.config=vr||{},xr.mutations=[],xr.mutationId=0,xr}var gr=hr.prototype;return gr.build=function(xr,Er,Cr){var wr=new Mutation({mutationCache:this,mutationId:++this.mutationId,options:xr.defaultMutationOptions(Er),state:Cr,defaultOptions:Er.mutationKey?xr.getMutationDefaults(Er.mutationKey):void 0,meta:Er.meta});return this.add(wr),wr},gr.add=function(xr){this.mutations.push(xr),this.notify(xr)},gr.remove=function(xr){this.mutations=this.mutations.filter(function(Er){return Er!==xr}),xr.cancel(),this.notify(xr)},gr.clear=function(){var xr=this;notifyManager.batch(function(){xr.mutations.forEach(function(Er){xr.remove(Er)})})},gr.getAll=function(){return this.mutations},gr.find=function(xr){return typeof xr.exact>"u"&&(xr.exact=!0),this.mutations.find(function(Er){return matchMutation(xr,Er)})},gr.findAll=function(xr){return this.mutations.filter(function(Er){return matchMutation(xr,Er)})},gr.notify=function(xr){var Er=this;notifyManager.batch(function(){Er.listeners.forEach(function(Cr){Cr(xr)})})},gr.onFocus=function(){this.resumePausedMutations()},gr.onOnline=function(){this.resumePausedMutations()},gr.resumePausedMutations=function(){var xr=this.mutations.filter(function(Er){return Er.state.isPaused});return notifyManager.batch(function(){return xr.reduce(function(Er,Cr){return Er.then(function(){return Cr.continue().catch(noop$2)})},Promise.resolve())})},hr}(Subscribable);function infiniteQueryBehavior(){return{onFetch:function(hr){hr.fetchFn=function(){var gr,vr,xr,Er,Cr,wr,Rr=(gr=hr.fetchOptions)==null||(vr=gr.meta)==null?void 0:vr.refetchPage,kr=(xr=hr.fetchOptions)==null||(Er=xr.meta)==null?void 0:Er.fetchMore,Dr=kr?.pageParam,Br=kr?.direction==="forward",Hr=kr?.direction==="backward",Gr=((Cr=hr.state.data)==null?void 0:Cr.pages)||[],qr=((wr=hr.state.data)==null?void 0:wr.pageParams)||[],zr=getAbortController(),Qr=zr?.signal,sn=qr,hn=!1,vn=hr.options.queryFn||function(){return Promise.reject("Missing queryFn")},yn=function(Hn,Gn,qn,On){return sn=On?[Gn].concat(sn):[].concat(sn,[Gn]),On?[qn].concat(Hn):[].concat(Hn,[qn])},gn=function(Hn,Gn,qn,On){if(hn)return Promise.reject("Cancelled");if(typeof qn>"u"&&!Gn&&Hn.length)return Promise.resolve(Hn);var wn={queryKey:hr.queryKey,signal:Qr,pageParam:qn,meta:hr.meta},_n=vn(wn),Tn=Promise.resolve(_n).then(function(Ln){return yn(Hn,qn,Ln,On)});if(isCancelable(_n)){var Mn=Tn;Mn.cancel=_n.cancel}return Tn},bn;if(!Gr.length)bn=gn([]);else if(Br){var xn=typeof Dr<"u",$n=xn?Dr:getNextPageParam(hr.options,Gr);bn=gn(Gr,xn,$n)}else if(Hr){var Sn=typeof Dr<"u",Cn=Sn?Dr:getPreviousPageParam(hr.options,Gr);bn=gn(Gr,Sn,Cn,!0)}else(function(){sn=[];var Fn=typeof hr.options.getNextPageParam>"u",Hn=Rr&&Gr[0]?Rr(Gr[0],0,Gr):!0;bn=Hn?gn([],Fn,qr[0]):Promise.resolve(yn([],qr[0],Gr[0]));for(var Gn=function(wn){bn=bn.then(function(_n){var Tn=Rr&&Gr[wn]?Rr(Gr[wn],wn,Gr):!0;if(Tn){var Mn=Fn?qr[wn]:getNextPageParam(hr.options,_n);return gn(_n,Fn,Mn)}return Promise.resolve(yn(_n,qr[wn],Gr[wn]))})},qn=1;qn<Gr.length;qn++)Gn(qn)})();var Rn=bn.then(function(Fn){return{pages:Fn,pageParams:sn}}),Bn=Rn;return Bn.cancel=function(){hn=!0,zr?.abort(),isCancelable(bn)&&bn.cancel()},Rn}}}}function getNextPageParam(mr,hr){return mr.getNextPageParam==null?void 0:mr.getNextPageParam(hr[hr.length-1],hr)}function getPreviousPageParam(mr,hr){return mr.getPreviousPageParam==null?void 0:mr.getPreviousPageParam(hr[0],hr)}var QueryClient=function(){function mr(gr){gr===void 0&&(gr={}),this.queryCache=gr.queryCache||new QueryCache,this.mutationCache=gr.mutationCache||new MutationCache,this.defaultOptions=gr.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[]}var hr=mr.prototype;return hr.mount=function(){var vr=this;this.unsubscribeFocus=focusManager.subscribe(function(){focusManager.isFocused()&&onlineManager.isOnline()&&(vr.mutationCache.onFocus(),vr.queryCache.onFocus())}),this.unsubscribeOnline=onlineManager.subscribe(function(){focusManager.isFocused()&&onlineManager.isOnline()&&(vr.mutationCache.onOnline(),vr.queryCache.onOnline())})},hr.unmount=function(){var vr,xr;(vr=this.unsubscribeFocus)==null||vr.call(this),(xr=this.unsubscribeOnline)==null||xr.call(this)},hr.isFetching=function(vr,xr){var Er=parseFilterArgs(vr,xr),Cr=Er[0];return Cr.fetching=!0,this.queryCache.findAll(Cr).length},hr.isMutating=function(vr){return this.mutationCache.findAll(_extends$7({},vr,{fetching:!0})).length},hr.getQueryData=function(vr,xr){var Er;return(Er=this.queryCache.find(vr,xr))==null?void 0:Er.state.data},hr.getQueriesData=function(vr){return this.getQueryCache().findAll(vr).map(function(xr){var Er=xr.queryKey,Cr=xr.state,wr=Cr.data;return[Er,wr]})},hr.setQueryData=function(vr,xr,Er){var Cr=parseQueryArgs(vr),wr=this.defaultQueryOptions(Cr);return this.queryCache.build(this,wr).setData(xr,Er)},hr.setQueriesData=function(vr,xr,Er){var Cr=this;return notifyManager.batch(function(){return Cr.getQueryCache().findAll(vr).map(function(wr){var Rr=wr.queryKey;return[Rr,Cr.setQueryData(Rr,xr,Er)]})})},hr.getQueryState=function(vr,xr){var Er;return(Er=this.queryCache.find(vr,xr))==null?void 0:Er.state},hr.removeQueries=function(vr,xr){var Er=parseFilterArgs(vr,xr),Cr=Er[0],wr=this.queryCache;notifyManager.batch(function(){wr.findAll(Cr).forEach(function(Rr){wr.remove(Rr)})})},hr.resetQueries=function(vr,xr,Er){var Cr=this,wr=parseFilterArgs(vr,xr,Er),Rr=wr[0],kr=wr[1],Dr=this.queryCache,Br=_extends$7({},Rr,{active:!0});return notifyManager.batch(function(){return Dr.findAll(Rr).forEach(function(Hr){Hr.reset()}),Cr.refetchQueries(Br,kr)})},hr.cancelQueries=function(vr,xr,Er){var Cr=this,wr=parseFilterArgs(vr,xr,Er),Rr=wr[0],kr=wr[1],Dr=kr===void 0?{}:kr;typeof Dr.revert>"u"&&(Dr.revert=!0);var Br=notifyManager.batch(function(){return Cr.queryCache.findAll(Rr).map(function(Hr){return Hr.cancel(Dr)})});return Promise.all(Br).then(noop$2).catch(noop$2)},hr.invalidateQueries=function(vr,xr,Er){var Cr,wr,Rr,kr=this,Dr=parseFilterArgs(vr,xr,Er),Br=Dr[0],Hr=Dr[1],Gr=_extends$7({},Br,{active:(Cr=(wr=Br.refetchActive)!=null?wr:Br.active)!=null?Cr:!0,inactive:(Rr=Br.refetchInactive)!=null?Rr:!1});return notifyManager.batch(function(){return kr.queryCache.findAll(Br).forEach(function(qr){qr.invalidate()}),kr.refetchQueries(Gr,Hr)})},hr.refetchQueries=function(vr,xr,Er){var Cr=this,wr=parseFilterArgs(vr,xr,Er),Rr=wr[0],kr=wr[1],Dr=notifyManager.batch(function(){return Cr.queryCache.findAll(Rr).map(function(Hr){return Hr.fetch(void 0,_extends$7({},kr,{meta:{refetchPage:Rr?.refetchPage}}))})}),Br=Promise.all(Dr).then(noop$2);return kr?.throwOnError||(Br=Br.catch(noop$2)),Br},hr.fetchQuery=function(vr,xr,Er){var Cr=parseQueryArgs(vr,xr,Er),wr=this.defaultQueryOptions(Cr);typeof wr.retry>"u"&&(wr.retry=!1);var Rr=this.queryCache.build(this,wr);return Rr.isStaleByTime(wr.staleTime)?Rr.fetch(wr):Promise.resolve(Rr.state.data)},hr.prefetchQuery=function(vr,xr,Er){return this.fetchQuery(vr,xr,Er).then(noop$2).catch(noop$2)},hr.fetchInfiniteQuery=function(vr,xr,Er){var Cr=parseQueryArgs(vr,xr,Er);return Cr.behavior=infiniteQueryBehavior(),this.fetchQuery(Cr)},hr.prefetchInfiniteQuery=function(vr,xr,Er){return this.fetchInfiniteQuery(vr,xr,Er).then(noop$2).catch(noop$2)},hr.cancelMutations=function(){var vr=this,xr=notifyManager.batch(function(){return vr.mutationCache.getAll().map(function(Er){return Er.cancel()})});return Promise.all(xr).then(noop$2).catch(noop$2)},hr.resumePausedMutations=function(){return this.getMutationCache().resumePausedMutations()},hr.executeMutation=function(vr){return this.mutationCache.build(this,vr).execute()},hr.getQueryCache=function(){return this.queryCache},hr.getMutationCache=function(){return this.mutationCache},hr.getDefaultOptions=function(){return this.defaultOptions},hr.setDefaultOptions=function(vr){this.defaultOptions=vr},hr.setQueryDefaults=function(vr,xr){var Er=this.queryDefaults.find(function(Cr){return hashQueryKey(vr)===hashQueryKey(Cr.queryKey)});Er?Er.defaultOptions=xr:this.queryDefaults.push({queryKey:vr,defaultOptions:xr})},hr.getQueryDefaults=function(vr){var xr;return vr?(xr=this.queryDefaults.find(function(Er){return partialMatchKey(vr,Er.queryKey)}))==null?void 0:xr.defaultOptions:void 0},hr.setMutationDefaults=function(vr,xr){var Er=this.mutationDefaults.find(function(Cr){return hashQueryKey(vr)===hashQueryKey(Cr.mutationKey)});Er?Er.defaultOptions=xr:this.mutationDefaults.push({mutationKey:vr,defaultOptions:xr})},hr.getMutationDefaults=function(vr){var xr;return vr?(xr=this.mutationDefaults.find(function(Er){return partialMatchKey(vr,Er.mutationKey)}))==null?void 0:xr.defaultOptions:void 0},hr.defaultQueryOptions=function(vr){if(vr?._defaulted)return vr;var xr=_extends$7({},this.defaultOptions.queries,this.getQueryDefaults(vr?.queryKey),vr,{_defaulted:!0});return!xr.queryHash&&xr.queryKey&&(xr.queryHash=hashQueryKeyByOptions(xr.queryKey,xr)),xr},hr.defaultQueryObserverOptions=function(vr){return this.defaultQueryOptions(vr)},hr.defaultMutationOptions=function(vr){return vr?._defaulted?vr:_extends$7({},this.defaultOptions.mutations,this.getMutationDefaults(vr?.mutationKey),vr,{_defaulted:!0})},hr.clear=function(){this.queryCache.clear(),this.mutationCache.clear()},mr}(),QueryObserver=function(mr){_inheritsLoose(hr,mr);function hr(vr,xr){var Er;return Er=mr.call(this)||this,Er.client=vr,Er.options=xr,Er.trackedProps=[],Er.selectError=null,Er.bindMethods(),Er.setOptions(xr),Er}var gr=hr.prototype;return gr.bindMethods=function(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)},gr.onSubscribe=function(){this.listeners.length===1&&(this.currentQuery.addObserver(this),shouldFetchOnMount(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())},gr.onUnsubscribe=function(){this.listeners.length||this.destroy()},gr.shouldFetchOnReconnect=function(){return shouldFetchOn(this.currentQuery,this.options,this.options.refetchOnReconnect)},gr.shouldFetchOnWindowFocus=function(){return shouldFetchOn(this.currentQuery,this.options,this.options.refetchOnWindowFocus)},gr.destroy=function(){this.listeners=[],this.clearTimers(),this.currentQuery.removeObserver(this)},gr.setOptions=function(xr,Er){var Cr=this.options,wr=this.currentQuery;if(this.options=this.client.defaultQueryObserverOptions(xr),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=Cr.queryKey),this.updateQuery();var Rr=this.hasListeners();Rr&&shouldFetchOptionally(this.currentQuery,wr,this.options,Cr)&&this.executeFetch(),this.updateResult(Er),Rr&&(this.currentQuery!==wr||this.options.enabled!==Cr.enabled||this.options.staleTime!==Cr.staleTime)&&this.updateStaleTimeout();var kr=this.computeRefetchInterval();Rr&&(this.currentQuery!==wr||this.options.enabled!==Cr.enabled||kr!==this.currentRefetchInterval)&&this.updateRefetchInterval(kr)},gr.getOptimisticResult=function(xr){var Er=this.client.defaultQueryObserverOptions(xr),Cr=this.client.getQueryCache().build(this.client,Er);return this.createResult(Cr,Er)},gr.getCurrentResult=function(){return this.currentResult},gr.trackResult=function(xr,Er){var Cr=this,wr={},Rr=function(Dr){Cr.trackedProps.includes(Dr)||Cr.trackedProps.push(Dr)};return Object.keys(xr).forEach(function(kr){Object.defineProperty(wr,kr,{configurable:!1,enumerable:!0,get:function(){return Rr(kr),xr[kr]}})}),(Er.useErrorBoundary||Er.suspense)&&Rr("error"),wr},gr.getNextResult=function(xr){var Er=this;return new Promise(function(Cr,wr){var Rr=Er.subscribe(function(kr){kr.isFetching||(Rr(),kr.isError&&xr?.throwOnError?wr(kr.error):Cr(kr))})})},gr.getCurrentQuery=function(){return this.currentQuery},gr.remove=function(){this.client.getQueryCache().remove(this.currentQuery)},gr.refetch=function(xr){return this.fetch(_extends$7({},xr,{meta:{refetchPage:xr?.refetchPage}}))},gr.fetchOptimistic=function(xr){var Er=this,Cr=this.client.defaultQueryObserverOptions(xr),wr=this.client.getQueryCache().build(this.client,Cr);return wr.fetch().then(function(){return Er.createResult(wr,Cr)})},gr.fetch=function(xr){var Er=this;return this.executeFetch(xr).then(function(){return Er.updateResult(),Er.currentResult})},gr.executeFetch=function(xr){this.updateQuery();var Er=this.currentQuery.fetch(this.options,xr);return xr?.throwOnError||(Er=Er.catch(noop$2)),Er},gr.updateStaleTimeout=function(){var xr=this;if(this.clearStaleTimeout(),!(isServer$1||this.currentResult.isStale||!isValidTimeout(this.options.staleTime))){var Er=timeUntilStale(this.currentResult.dataUpdatedAt,this.options.staleTime),Cr=Er+1;this.staleTimeoutId=setTimeout(function(){xr.currentResult.isStale||xr.updateResult()},Cr)}},gr.computeRefetchInterval=function(){var xr;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(xr=this.options.refetchInterval)!=null?xr:!1},gr.updateRefetchInterval=function(xr){var Er=this;this.clearRefetchInterval(),this.currentRefetchInterval=xr,!(isServer$1||this.options.enabled===!1||!isValidTimeout(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(function(){(Er.options.refetchIntervalInBackground||focusManager.isFocused())&&Er.executeFetch()},this.currentRefetchInterval))},gr.updateTimers=function(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())},gr.clearTimers=function(){this.clearStaleTimeout(),this.clearRefetchInterval()},gr.clearStaleTimeout=function(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)},gr.clearRefetchInterval=function(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)},gr.createResult=function(xr,Er){var Cr=this.currentQuery,wr=this.options,Rr=this.currentResult,kr=this.currentResultState,Dr=this.currentResultOptions,Br=xr!==Cr,Hr=Br?xr.state:this.currentQueryInitialState,Gr=Br?this.currentResult:this.previousQueryResult,qr=xr.state,zr=qr.dataUpdatedAt,Qr=qr.error,sn=qr.errorUpdatedAt,hn=qr.isFetching,vn=qr.status,yn=!1,gn=!1,bn;if(Er.optimisticResults){var xn=this.hasListeners(),$n=!xn&&shouldFetchOnMount(xr,Er),Sn=xn&&shouldFetchOptionally(xr,Cr,Er,wr);($n||Sn)&&(hn=!0,zr||(vn="loading"))}if(Er.keepPreviousData&&!qr.dataUpdateCount&&Gr?.isSuccess&&vn!=="error")bn=Gr.data,zr=Gr.dataUpdatedAt,vn=Gr.status,yn=!0;else if(Er.select&&typeof qr.data<"u")if(Rr&&qr.data===kr?.data&&Er.select===this.selectFn)bn=this.selectResult;else try{this.selectFn=Er.select,bn=Er.select(qr.data),Er.structuralSharing!==!1&&(bn=replaceEqualDeep(Rr?.data,bn)),this.selectResult=bn,this.selectError=null}catch(Bn){getLogger().error(Bn),this.selectError=Bn}else bn=qr.data;if(typeof Er.placeholderData<"u"&&typeof bn>"u"&&(vn==="loading"||vn==="idle")){var Cn;if(Rr?.isPlaceholderData&&Er.placeholderData===Dr?.placeholderData)Cn=Rr.data;else if(Cn=typeof Er.placeholderData=="function"?Er.placeholderData():Er.placeholderData,Er.select&&typeof Cn<"u")try{Cn=Er.select(Cn),Er.structuralSharing!==!1&&(Cn=replaceEqualDeep(Rr?.data,Cn)),this.selectError=null}catch(Bn){getLogger().error(Bn),this.selectError=Bn}typeof Cn<"u"&&(vn="success",bn=Cn,gn=!0)}this.selectError&&(Qr=this.selectError,bn=this.selectResult,sn=Date.now(),vn="error");var Rn={status:vn,isLoading:vn==="loading",isSuccess:vn==="success",isError:vn==="error",isIdle:vn==="idle",data:bn,dataUpdatedAt:zr,error:Qr,errorUpdatedAt:sn,failureCount:qr.fetchFailureCount,errorUpdateCount:qr.errorUpdateCount,isFetched:qr.dataUpdateCount>0||qr.errorUpdateCount>0,isFetchedAfterMount:qr.dataUpdateCount>Hr.dataUpdateCount||qr.errorUpdateCount>Hr.errorUpdateCount,isFetching:hn,isRefetching:hn&&vn!=="loading",isLoadingError:vn==="error"&&qr.dataUpdatedAt===0,isPlaceholderData:gn,isPreviousData:yn,isRefetchError:vn==="error"&&qr.dataUpdatedAt!==0,isStale:isStale(xr,Er),refetch:this.refetch,remove:this.remove};return Rn},gr.shouldNotifyListeners=function(xr,Er){if(!Er)return!0;var Cr=this.options,wr=Cr.notifyOnChangeProps,Rr=Cr.notifyOnChangePropsExclusions;if(!wr&&!Rr||wr==="tracked"&&!this.trackedProps.length)return!0;var kr=wr==="tracked"?this.trackedProps:wr;return Object.keys(xr).some(function(Dr){var Br=Dr,Hr=xr[Br]!==Er[Br],Gr=kr?.some(function(zr){return zr===Dr}),qr=Rr?.some(function(zr){return zr===Dr});return Hr&&!qr&&(!kr||Gr)})},gr.updateResult=function(xr){var Er=this.currentResult;if(this.currentResult=this.createResult(this.currentQuery,this.options),this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,!shallowEqualObjects(this.currentResult,Er)){var Cr={cache:!0};xr?.listeners!==!1&&this.shouldNotifyListeners(this.currentResult,Er)&&(Cr.listeners=!0),this.notify(_extends$7({},Cr,xr))}},gr.updateQuery=function(){var xr=this.client.getQueryCache().build(this.client,this.options);if(xr!==this.currentQuery){var Er=this.currentQuery;this.currentQuery=xr,this.currentQueryInitialState=xr.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(Er?.removeObserver(this),xr.addObserver(this))}},gr.onQueryUpdate=function(xr){var Er={};xr.type==="success"?Er.onSuccess=!0:xr.type==="error"&&!isCancelledError(xr.error)&&(Er.onError=!0),this.updateResult(Er),this.hasListeners()&&this.updateTimers()},gr.notify=function(xr){var Er=this;notifyManager.batch(function(){xr.onSuccess?(Er.options.onSuccess==null||Er.options.onSuccess(Er.currentResult.data),Er.options.onSettled==null||Er.options.onSettled(Er.currentResult.data,null)):xr.onError&&(Er.options.onError==null||Er.options.onError(Er.currentResult.error),Er.options.onSettled==null||Er.options.onSettled(void 0,Er.currentResult.error)),xr.listeners&&Er.listeners.forEach(function(Cr){Cr(Er.currentResult)}),xr.cache&&Er.client.getQueryCache().notify({query:Er.currentQuery,type:"observerResultsUpdated"})})},hr}(Subscribable);function shouldLoadOnMount(mr,hr){return hr.enabled!==!1&&!mr.state.dataUpdatedAt&&!(mr.state.status==="error"&&hr.retryOnMount===!1)}function shouldFetchOnMount(mr,hr){return shouldLoadOnMount(mr,hr)||mr.state.dataUpdatedAt>0&&shouldFetchOn(mr,hr,hr.refetchOnMount)}function shouldFetchOn(mr,hr,gr){if(hr.enabled!==!1){var vr=typeof gr=="function"?gr(mr):gr;return vr==="always"||vr!==!1&&isStale(mr,hr)}return!1}function shouldFetchOptionally(mr,hr,gr,vr){return gr.enabled!==!1&&(mr!==hr||vr.enabled===!1)&&(!gr.suspense||mr.state.status!=="error")&&isStale(mr,gr)}function isStale(mr,hr){return mr.isStaleByTime(hr.staleTime)}var MutationObserver$1=function(mr){_inheritsLoose(hr,mr);function hr(vr,xr){var Er;return Er=mr.call(this)||this,Er.client=vr,Er.setOptions(xr),Er.bindMethods(),Er.updateResult(),Er}var gr=hr.prototype;return gr.bindMethods=function(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)},gr.setOptions=function(xr){this.options=this.client.defaultMutationOptions(xr)},gr.onUnsubscribe=function(){if(!this.listeners.length){var xr;(xr=this.currentMutation)==null||xr.removeObserver(this)}},gr.onMutationUpdate=function(xr){this.updateResult();var Er={listeners:!0};xr.type==="success"?Er.onSuccess=!0:xr.type==="error"&&(Er.onError=!0),this.notify(Er)},gr.getCurrentResult=function(){return this.currentResult},gr.reset=function(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})},gr.mutate=function(xr,Er){return this.mutateOptions=Er,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,_extends$7({},this.options,{variables:typeof xr<"u"?xr:this.options.variables})),this.currentMutation.addObserver(this),this.currentMutation.execute()},gr.updateResult=function(){var xr=this.currentMutation?this.currentMutation.state:getDefaultState(),Er=_extends$7({},xr,{isLoading:xr.status==="loading",isSuccess:xr.status==="success",isError:xr.status==="error",isIdle:xr.status==="idle",mutate:this.mutate,reset:this.reset});this.currentResult=Er},gr.notify=function(xr){var Er=this;notifyManager.batch(function(){Er.mutateOptions&&(xr.onSuccess?(Er.mutateOptions.onSuccess==null||Er.mutateOptions.onSuccess(Er.currentResult.data,Er.currentResult.variables,Er.currentResult.context),Er.mutateOptions.onSettled==null||Er.mutateOptions.onSettled(Er.currentResult.data,null,Er.currentResult.variables,Er.currentResult.context)):xr.onError&&(Er.mutateOptions.onError==null||Er.mutateOptions.onError(Er.currentResult.error,Er.currentResult.variables,Er.currentResult.context),Er.mutateOptions.onSettled==null||Er.mutateOptions.onSettled(void 0,Er.currentResult.error,Er.currentResult.variables,Er.currentResult.context))),xr.listeners&&Er.listeners.forEach(function(Cr){Cr(Er.currentResult)})})},hr}(Subscribable),unstable_batchedUpdates=ReactDOM.unstable_batchedUpdates;notifyManager.setBatchNotifyFunction(unstable_batchedUpdates);var logger$1=console;setLogger(logger$1);var defaultContext=$jFibJ$react.createContext(void 0),QueryClientSharingContext=$jFibJ$react.createContext(!1);function getQueryClientContext(mr){return mr&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=defaultContext),window.ReactQueryClientContext):defaultContext}var useQueryClient=function(){var hr=$jFibJ$react.useContext(getQueryClientContext($jFibJ$react.useContext(QueryClientSharingContext)));if(!hr)throw new Error("No QueryClient set, use QueryClientProvider to set one");return hr};function createValue(){var mr=!1;return{clearReset:function(){mr=!1},reset:function(){mr=!0},isReset:function(){return mr}}}var QueryErrorResetBoundaryContext=$jFibJ$react.createContext(createValue()),useQueryErrorResetBoundary=function(){return $jFibJ$react.useContext(QueryErrorResetBoundaryContext)};function shouldThrowError(mr,hr,gr){return typeof hr=="function"?hr.apply(void 0,gr):typeof hr=="boolean"?hr:!!mr}function useMutation(mr,hr,gr){var vr=$jFibJ$react.useRef(!1),xr=$jFibJ$react.useState(0),Er=xr[1],Cr=parseMutationArgs(mr,hr,gr),wr=useQueryClient(),Rr=$jFibJ$react.useRef();Rr.current?Rr.current.setOptions(Cr):Rr.current=new MutationObserver$1(wr,Cr);var kr=Rr.current.getCurrentResult();$jFibJ$react.useEffect(function(){vr.current=!0;var Br=Rr.current.subscribe(notifyManager.batchCalls(function(){vr.current&&Er(function(Hr){return Hr+1})}));return function(){vr.current=!1,Br()}},[]);var Dr=$jFibJ$react.useCallback(function(Br,Hr){Rr.current.mutate(Br,Hr).catch(noop$2)},[]);if(kr.error&&shouldThrowError(void 0,Rr.current.options.useErrorBoundary,[kr.error]))throw kr.error;return _extends$7({},kr,{mutate:Dr,mutateAsync:kr.mutate})}function useBaseQuery(mr,hr){var gr=$jFibJ$react.useRef(!1),vr=$jFibJ$react.useState(0),xr=vr[1],Er=useQueryClient(),Cr=useQueryErrorResetBoundary(),wr=Er.defaultQueryObserverOptions(mr);wr.optimisticResults=!0,wr.onError&&(wr.onError=notifyManager.batchCalls(wr.onError)),wr.onSuccess&&(wr.onSuccess=notifyManager.batchCalls(wr.onSuccess)),wr.onSettled&&(wr.onSettled=notifyManager.batchCalls(wr.onSettled)),wr.suspense&&(typeof wr.staleTime!="number"&&(wr.staleTime=1e3),wr.cacheTime===0&&(wr.cacheTime=1)),(wr.suspense||wr.useErrorBoundary)&&(Cr.isReset()||(wr.retryOnMount=!1));var Rr=$jFibJ$react.useState(function(){return new hr(Er,wr)}),kr=Rr[0],Dr=kr.getOptimisticResult(wr);if($jFibJ$react.useEffect(function(){gr.current=!0,Cr.clearReset();var Br=kr.subscribe(notifyManager.batchCalls(function(){gr.current&&xr(function(Hr){return Hr+1})}));return kr.updateResult(),function(){gr.current=!1,Br()}},[Cr,kr]),$jFibJ$react.useEffect(function(){kr.setOptions(wr,{listeners:!1})},[wr,kr]),wr.suspense&&Dr.isLoading)throw kr.fetchOptimistic(wr).then(function(Br){var Hr=Br.data;wr.onSuccess==null||wr.onSuccess(Hr),wr.onSettled==null||wr.onSettled(Hr,null)}).catch(function(Br){Cr.clearReset(),wr.onError==null||wr.onError(Br),wr.onSettled==null||wr.onSettled(void 0,Br)});if(Dr.isError&&!Cr.isReset()&&!Dr.isFetching&&shouldThrowError(wr.suspense,wr.useErrorBoundary,[Dr.error,kr.getCurrentQuery()]))throw Dr.error;return wr.notifyOnChangeProps==="tracked"&&(Dr=kr.trackResult(Dr,wr)),Dr}function useQuery(mr,hr,gr){var vr=parseQueryArgs(mr,hr,gr);return useBaseQuery(vr,QueryObserver)}var castSlice=_castSlice,hasUnicode=_hasUnicode,stringToArray=_stringToArray,toString$6=toString_1;function createCaseFirst$1(mr){return function(hr){hr=toString$6(hr);var gr=hasUnicode(hr)?stringToArray(hr):void 0,vr=gr?gr[0]:hr.charAt(0),xr=gr?castSlice(gr,1).join(""):hr.slice(1);return vr[mr]()+xr}}var _createCaseFirst=createCaseFirst$1,createCaseFirst=_createCaseFirst,upperFirst$1=createCaseFirst("toUpperCase"),upperFirst_1=upperFirst$1,toString$5=toString_1,upperFirst=upperFirst_1;function capitalize$1(mr){return upperFirst(toString$5(mr).toLowerCase())}var capitalize_1=capitalize$1;function arrayReduce$1(mr,hr,gr,vr){var xr=-1,Er=mr==null?0:mr.length;for(vr&&Er&&(gr=mr[++xr]);++xr<Er;)gr=hr(gr,mr[xr],xr,mr);return gr}var _arrayReduce=arrayReduce$1;function basePropertyOf$2(mr){return function(hr){return mr?.[hr]}}var _basePropertyOf=basePropertyOf$2,basePropertyOf$1=_basePropertyOf,deburredLetters$1={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},deburrLetter$2=basePropertyOf$1(deburredLetters$1),_deburrLetter=deburrLetter$2,deburrLetter$1=_deburrLetter,toString$4=toString_1,reLatin$1=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,rsComboMarksRange$2="\\u0300-\\u036f",reComboHalfMarksRange$1="\\ufe20-\\ufe2f",rsComboSymbolsRange$2="\\u20d0-\\u20ff",rsComboRange$1=rsComboMarksRange$2+reComboHalfMarksRange$1+rsComboSymbolsRange$2,rsCombo$2="["+rsComboRange$1+"]",reComboMark$1=RegExp(rsCombo$2,"g");function deburr$3(mr){return mr=toString$4(mr),mr&&mr.replace(reLatin$1,deburrLetter$1).replace(reComboMark$1,"")}var deburr_1=deburr$3,reAsciiWord=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function asciiWords$1(mr){return mr.match(reAsciiWord)||[]}var _asciiWords=asciiWords$1,reHasUnicodeWord=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function hasUnicodeWord$1(mr){return reHasUnicodeWord.test(mr)}var _hasUnicodeWord=hasUnicodeWord$1,rsAstralRange="\\ud800-\\udfff",rsComboMarksRange$1="\\u0300-\\u036f",reComboHalfMarksRange="\\ufe20-\\ufe2f",rsComboSymbolsRange$1="\\u20d0-\\u20ff",rsComboRange=rsComboMarksRange$1+reComboHalfMarksRange+rsComboSymbolsRange$1,rsDingbatRange="\\u2700-\\u27bf",rsLowerRange="a-z\\xdf-\\xf6\\xf8-\\xff",rsMathOpRange="\\xac\\xb1\\xd7\\xf7",rsNonCharRange="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",rsPunctuationRange="\\u2000-\\u206f",rsSpaceRange=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",rsUpperRange="A-Z\\xc0-\\xd6\\xd8-\\xde",rsVarRange="\\ufe0e\\ufe0f",rsBreakRange=rsMathOpRange+rsNonCharRange+rsPunctuationRange+rsSpaceRange,rsApos$1="['’]",rsBreak="["+rsBreakRange+"]",rsCombo$1="["+rsComboRange+"]",rsDigits="\\d+",rsDingbat="["+rsDingbatRange+"]",rsLower="["+rsLowerRange+"]",rsMisc="[^"+rsAstralRange+rsBreakRange+rsDigits+rsDingbatRange+rsLowerRange+rsUpperRange+"]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsModifier="(?:"+rsCombo$1+"|"+rsFitz+")",rsNonAstral="[^"+rsAstralRange+"]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsUpper="["+rsUpperRange+"]",rsZWJ="\\u200d",rsMiscLower="(?:"+rsLower+"|"+rsMisc+")",rsMiscUpper="(?:"+rsUpper+"|"+rsMisc+")",rsOptContrLower="(?:"+rsApos$1+"(?:d|ll|m|re|s|t|ve))?",rsOptContrUpper="(?:"+rsApos$1+"(?:D|LL|M|RE|S|T|VE))?",reOptMod=rsModifier+"?",rsOptVar="["+rsVarRange+"]?",rsOptJoin="(?:"+rsZWJ+"(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")"+rsOptVar+reOptMod+")*",rsOrdLower="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",rsOrdUpper="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",rsSeq=rsOptVar+reOptMod+rsOptJoin,rsEmoji="(?:"+[rsDingbat,rsRegional,rsSurrPair].join("|")+")"+rsSeq,reUnicodeWord=RegExp([rsUpper+"?"+rsLower+"+"+rsOptContrLower+"(?="+[rsBreak,rsUpper,"$"].join("|")+")",rsMiscUpper+"+"+rsOptContrUpper+"(?="+[rsBreak,rsUpper+rsMiscLower,"$"].join("|")+")",rsUpper+"?"+rsMiscLower+"+"+rsOptContrLower,rsUpper+"+"+rsOptContrUpper,rsOrdUpper,rsOrdLower,rsDigits,rsEmoji].join("|"),"g");function unicodeWords$1(mr){return mr.match(reUnicodeWord)||[]}var _unicodeWords=unicodeWords$1,asciiWords=_asciiWords,hasUnicodeWord=_hasUnicodeWord,toString$3=toString_1,unicodeWords=_unicodeWords;function words$1(mr,hr,gr){return mr=toString$3(mr),hr=gr?void 0:hr,hr===void 0?hasUnicodeWord(mr)?unicodeWords(mr):asciiWords(mr):mr.match(hr)||[]}var words_1=words$1,arrayReduce=_arrayReduce,deburr$2=deburr_1,words=words_1,rsApos="['’]",reApos=RegExp(rsApos,"g");function createCompounder$2(mr){return function(hr){return arrayReduce(words(deburr$2(hr).replace(reApos,"")),mr,"")}}var _createCompounder=createCompounder$2,capitalize=capitalize_1,createCompounder$1=_createCompounder,camelCase$1=createCompounder$1(function(mr,hr,gr){return hr=hr.toLowerCase(),mr+(gr?capitalize(hr):hr)}),camelCase_1=camelCase$1;const camelCase$2=getDefaultExportFromCjs$1(camelCase_1);var map;try{map=Map}catch{}var set;try{set=Set}catch{}function baseClone$2(mr,hr,gr){if(!mr||typeof mr!="object"||typeof mr=="function")return mr;if(mr.nodeType&&"cloneNode"in mr)return mr.cloneNode(!0);if(mr instanceof Date)return new Date(mr.getTime());if(mr instanceof RegExp)return new RegExp(mr);if(Array.isArray(mr))return mr.map(clone$1);if(map&&mr instanceof map)return new Map(Array.from(mr.entries()));if(set&&mr instanceof set)return new Set(Array.from(mr.values()));if(mr instanceof Object){hr.push(mr);var vr=Object.create(mr);gr.push(vr);for(var xr in mr){var Er=hr.findIndex(function(Cr){return Cr===mr[xr]});vr[xr]=Er>-1?gr[Er]:baseClone$2(mr[xr],hr,gr)}return vr}return mr}function clone$1(mr){return baseClone$2(mr,[],[])}const toString$2=Object.prototype.toString,errorToString=Error.prototype.toString,regExpToString=RegExp.prototype.toString,symbolToString$2=typeof Symbol<"u"?Symbol.prototype.toString:()=>"",SYMBOL_REGEXP=/^Symbol\((.*)\)(.*)$/;function printNumber(mr){return mr!=+mr?"NaN":mr===0&&1/mr<0?"-0":""+mr}function printSimpleValue(mr,hr=!1){if(mr==null||mr===!0||mr===!1)return""+mr;const gr=typeof mr;if(gr==="number")return printNumber(mr);if(gr==="string")return hr?`"${mr}"`:mr;if(gr==="function")return"[Function "+(mr.name||"anonymous")+"]";if(gr==="symbol")return symbolToString$2.call(mr).replace(SYMBOL_REGEXP,"Symbol($1)");const vr=toString$2.call(mr).slice(8,-1);return vr==="Date"?isNaN(mr.getTime())?""+mr:mr.toISOString(mr):vr==="Error"||mr instanceof Error?"["+errorToString.call(mr)+"]":vr==="RegExp"?regExpToString.call(mr):null}function printValue(mr,hr){let gr=printSimpleValue(mr,hr);return gr!==null?gr:JSON.stringify(mr,function(vr,xr){let Er=printSimpleValue(this[vr],hr);return Er!==null?Er:xr},2)}let mixed={default:"${path} is invalid",required:"${path} is a required field",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path:mr,type:hr,value:gr,originalValue:vr})=>{let xr=vr!=null&&vr!==gr,Er=`${mr} must be a \`${hr}\` type, but the final value was: \`${printValue(gr,!0)}\``+(xr?` (cast from the value \`${printValue(vr,!0)}\`).`:".");return gr===null&&(Er+='\n If "null" is intended as an empty value be sure to mark the schema as `.nullable()`'),Er},defined:"${path} must be defined"},string={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},number={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},date={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},boolean={isValue:"${path} field must be ${value}"},object={noUnknown:"${path} field has unspecified keys: ${unknown}"},array={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must be have ${length} items"};Object.assign(Object.create(null),{mixed,string,number,date,object,array,boolean});var objectProto$g=Object.prototype,hasOwnProperty$d=objectProto$g.hasOwnProperty;function baseHas$1(mr,hr){return mr!=null&&hasOwnProperty$d.call(mr,hr)}var _baseHas=baseHas$1,baseHas=_baseHas,hasPath=_hasPath;function has(mr,hr){return mr!=null&&hasPath(mr,hr,baseHas)}var has_1=has;const has$1=getDefaultExportFromCjs$1(has_1),isSchema=mr=>mr&&mr.__isYupSchema__;class Condition{constructor(hr,gr){if(this.refs=hr,this.refs=hr,typeof gr=="function"){this.fn=gr;return}if(!has$1(gr,"is"))throw new TypeError("`is:` is required for `when()` conditions");if(!gr.then&&!gr.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:vr,then:xr,otherwise:Er}=gr,Cr=typeof vr=="function"?vr:(...wr)=>wr.every(Rr=>Rr===vr);this.fn=function(...wr){let Rr=wr.pop(),kr=wr.pop(),Dr=Cr(...wr)?xr:Er;if(Dr)return typeof Dr=="function"?Dr(kr):kr.concat(Dr.resolve(Rr))}}resolve(hr,gr){let vr=this.refs.map(Er=>Er.getValue(gr?.value,gr?.parent,gr?.context)),xr=this.fn.apply(hr,vr.concat(hr,gr));if(xr===void 0||xr===hr)return hr;if(!isSchema(xr))throw new TypeError("conditions must return a schema object");return xr.resolve(gr)}}function toArray$1(mr){return mr==null?[]:[].concat(mr)}function _extends$6(){return _extends$6=Object.assign||function(mr){for(var hr=1;hr<arguments.length;hr++){var gr=arguments[hr];for(var vr in gr)Object.prototype.hasOwnProperty.call(gr,vr)&&(mr[vr]=gr[vr])}return mr},_extends$6.apply(this,arguments)}let strReg=/\$\{\s*(\w+)\s*\}/g;class ValidationError extends Error{static formatError(hr,gr){const vr=gr.label||gr.path||"this";return vr!==gr.path&&(gr=_extends$6({},gr,{path:vr})),typeof hr=="string"?hr.replace(strReg,(xr,Er)=>printValue(gr[Er])):typeof hr=="function"?hr(gr):hr}static isError(hr){return hr&&hr.name==="ValidationError"}constructor(hr,gr,vr,xr){super(),this.name="ValidationError",this.value=gr,this.path=vr,this.type=xr,this.errors=[],this.inner=[],toArray$1(hr).forEach(Er=>{ValidationError.isError(Er)?(this.errors.push(...Er.errors),this.inner=this.inner.concat(Er.inner.length?Er.inner:Er)):this.errors.push(Er)}),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0],Error.captureStackTrace&&Error.captureStackTrace(this,ValidationError)}}const once=mr=>{let hr=!1;return(...gr)=>{hr||(hr=!0,mr(...gr))}};function runTests(mr,hr){let{endEarly:gr,tests:vr,args:xr,value:Er,errors:Cr,sort:wr,path:Rr}=mr,kr=once(hr),Dr=vr.length;const Br=[];if(Cr=Cr||[],!Dr)return Cr.length?kr(new ValidationError(Cr,Er,Rr)):kr(null,Er);for(let Hr=0;Hr<vr.length;Hr++){const Gr=vr[Hr];Gr(xr,function(zr){if(zr){if(!ValidationError.isError(zr))return kr(zr,Er);if(gr)return zr.value=Er,kr(zr,Er);Br.push(zr)}if(--Dr<=0){if(Br.length&&(wr&&Br.sort(wr),Cr.length&&Br.push(...Cr),Cr=Br),Cr.length){kr(new ValidationError(Cr,Er,Rr),Er);return}kr(null,Er)}})}}var baseFor=_baseFor,keys$1=keys_1;function baseForOwn$1(mr,hr){return mr&&baseFor(mr,hr,keys$1)}var _baseForOwn=baseForOwn$1,mapValues_1,hasRequiredMapValues;function requireMapValues(){if(hasRequiredMapValues)return mapValues_1;hasRequiredMapValues=1;var mr=_baseAssignValue,hr=_baseForOwn,gr=_baseIteratee;function vr(xr,Er){var Cr={};return Er=gr(Er),hr(xr,function(wr,Rr,kr){mr(Cr,Rr,Er(wr,Rr,kr))}),Cr}return mapValues_1=vr,mapValues_1}var mapValuesExports=requireMapValues();const mapValues=getDefaultExportFromCjs$1(mapValuesExports);function Cache(mr){this._maxSize=mr,this.clear()}Cache.prototype.clear=function(){this._size=0,this._values=Object.create(null)};Cache.prototype.get=function(mr){return this._values[mr]};Cache.prototype.set=function(mr,hr){return this._size>=this._maxSize&&this.clear(),mr in this._values||this._size++,this._values[mr]=hr};var SPLIT_REGEX=/[^.^\]^[]+|(?=\[\]|\.\.)/g,DIGIT_REGEX=/^\d+$/,LEAD_DIGIT_REGEX=/^\d/,SPEC_CHAR_REGEX=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,CLEAN_QUOTES_REGEX=/^\s*(['"]?)(.*?)(\1)\s*$/,MAX_CACHE_SIZE=512,pathCache=new Cache(MAX_CACHE_SIZE),setCache=new Cache(MAX_CACHE_SIZE),getCache=new Cache(MAX_CACHE_SIZE),propertyExpr={Cache,split,normalizePath,setter:function(mr){var hr=normalizePath(mr);return setCache.get(mr)||setCache.set(mr,function(vr,xr){for(var Er=0,Cr=hr.length,wr=vr;Er<Cr-1;){var Rr=hr[Er];if(Rr==="__proto__"||Rr==="constructor"||Rr==="prototype")return vr;wr=wr[hr[Er++]]}wr[hr[Er]]=xr})},getter:function(mr,hr){var gr=normalizePath(mr);return getCache.get(mr)||getCache.set(mr,function(xr){for(var Er=0,Cr=gr.length;Er<Cr;)if(xr!=null||!hr)xr=xr[gr[Er++]];else return;return xr})},join:function(mr){return mr.reduce(function(hr,gr){return hr+(isQuoted(gr)||DIGIT_REGEX.test(gr)?"["+gr+"]":(hr?".":"")+gr)},"")},forEach:function(mr,hr,gr){forEach$1(Array.isArray(mr)?mr:split(mr),hr,gr)}};function normalizePath(mr){return pathCache.get(mr)||pathCache.set(mr,split(mr).map(function(hr){return hr.replace(CLEAN_QUOTES_REGEX,"$2")}))}function split(mr){return mr.match(SPLIT_REGEX)||[""]}function forEach$1(mr,hr,gr){var vr=mr.length,xr,Er,Cr,wr;for(Er=0;Er<vr;Er++)xr=mr[Er],xr&&(shouldBeQuoted(xr)&&(xr='"'+xr+'"'),wr=isQuoted(xr),Cr=!wr&&/^\d+$/.test(xr),hr.call(gr,xr,wr,Cr,Er,mr))}function isQuoted(mr){return typeof mr=="string"&&mr&&["'",'"'].indexOf(mr.charAt(0))!==-1}function hasLeadingNumber(mr){return mr.match(LEAD_DIGIT_REGEX)&&!mr.match(DIGIT_REGEX)}function hasSpecialChars(mr){return SPEC_CHAR_REGEX.test(mr)}function shouldBeQuoted(mr){return!isQuoted(mr)&&(hasLeadingNumber(mr)||hasSpecialChars(mr))}const prefixes={context:"$",value:"."};function create$7(mr,hr){return new Reference(mr,hr)}class Reference{constructor(hr,gr={}){if(typeof hr!="string")throw new TypeError("ref must be a string, got: "+hr);if(this.key=hr.trim(),hr==="")throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===prefixes.context,this.isValue=this.key[0]===prefixes.value,this.isSibling=!this.isContext&&!this.isValue;let vr=this.isContext?prefixes.context:this.isValue?prefixes.value:"";this.path=this.key.slice(vr.length),this.getter=this.path&&propertyExpr.getter(this.path,!0),this.map=gr.map}getValue(hr,gr,vr){let xr=this.isContext?vr:this.isValue?hr:gr;return this.getter&&(xr=this.getter(xr||{})),this.map&&(xr=this.map(xr)),xr}cast(hr,gr){return this.getValue(hr,gr?.parent,gr?.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(hr){return hr&&hr.__isYupRef}}Reference.prototype.__isYupRef=!0;function _extends$5(){return _extends$5=Object.assign||function(mr){for(var hr=1;hr<arguments.length;hr++){var gr=arguments[hr];for(var vr in gr)Object.prototype.hasOwnProperty.call(gr,vr)&&(mr[vr]=gr[vr])}return mr},_extends$5.apply(this,arguments)}function _objectWithoutPropertiesLoose$1(mr,hr){if(mr==null)return{};var gr={},vr=Object.keys(mr),xr,Er;for(Er=0;Er<vr.length;Er++)xr=vr[Er],!(hr.indexOf(xr)>=0)&&(gr[xr]=mr[xr]);return gr}function createValidation(mr){function hr(gr,vr){let{value:xr,path:Er="",label:Cr,options:wr,originalValue:Rr,sync:kr}=gr,Dr=_objectWithoutPropertiesLoose$1(gr,["value","path","label","options","originalValue","sync"]);const{name:Br,test:Hr,params:Gr,message:qr}=mr;let{parent:zr,context:Qr}=wr;function sn(bn){return Reference.isRef(bn)?bn.getValue(xr,zr,Qr):bn}function hn(bn={}){const xn=mapValues(_extends$5({value:xr,originalValue:Rr,label:Cr,path:bn.path||Er},Gr,bn.params),sn),$n=new ValidationError(ValidationError.formatError(bn.message||qr,xn),xr,xn.path,bn.type||Br);return $n.params=xn,$n}let vn=_extends$5({path:Er,parent:zr,type:Br,createError:hn,resolve:sn,options:wr,originalValue:Rr},Dr);if(!kr){try{Promise.resolve(Hr.call(vn,xr,vn)).then(bn=>{ValidationError.isError(bn)?vr(bn):bn?vr(null,bn):vr(hn())})}catch(bn){vr(bn)}return}let yn;try{var gn;if(yn=Hr.call(vn,xr,vn),typeof((gn=yn)==null?void 0:gn.then)=="function")throw new Error(`Validation test of type: "${vn.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`)}catch(bn){vr(bn);return}ValidationError.isError(yn)?vr(yn):yn?vr(null,yn):vr(hn())}return hr.OPTIONS=mr,hr}let trim$1=mr=>mr.substr(0,mr.length-1).substr(1);function getIn$1(mr,hr,gr,vr=gr){let xr,Er,Cr;return hr?(propertyExpr.forEach(hr,(wr,Rr,kr)=>{let Dr=Rr?trim$1(wr):wr;if(mr=mr.resolve({context:vr,parent:xr,value:gr}),mr.innerType){let Br=kr?parseInt(Dr,10):0;if(gr&&Br>=gr.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${wr}, in the path: ${hr}. because there is no value at that index. `);xr=gr,gr=gr&&gr[Br],mr=mr.innerType}if(!kr){if(!mr.fields||!mr.fields[Dr])throw new Error(`The schema does not contain the path: ${hr}. (failed at: ${Cr} which is a type: "${mr._type}")`);xr=gr,gr=gr&&gr[Dr],mr=mr.fields[Dr]}Er=Dr,Cr=Rr?"["+wr+"]":"."+wr}),{schema:mr,parent:xr,parentPath:Er}):{parent:xr,parentPath:hr,schema:mr}}class ReferenceSet{constructor(){this.list=new Set,this.refs=new Map}get size(){return this.list.size+this.refs.size}describe(){const hr=[];for(const gr of this.list)hr.push(gr);for(const[,gr]of this.refs)hr.push(gr.describe());return hr}toArray(){return Array.from(this.list).concat(Array.from(this.refs.values()))}add(hr){Reference.isRef(hr)?this.refs.set(hr.key,hr):this.list.add(hr)}delete(hr){Reference.isRef(hr)?this.refs.delete(hr.key):this.list.delete(hr)}has(hr,gr){if(this.list.has(hr))return!0;let vr,xr=this.refs.values();for(;vr=xr.next(),!vr.done;)if(gr(vr.value)===hr)return!0;return!1}clone(){const hr=new ReferenceSet;return hr.list=new Set(this.list),hr.refs=new Map(this.refs),hr}merge(hr,gr){const vr=this.clone();return hr.list.forEach(xr=>vr.add(xr)),hr.refs.forEach(xr=>vr.add(xr)),gr.list.forEach(xr=>vr.delete(xr)),gr.refs.forEach(xr=>vr.delete(xr)),vr}}function _extends$4(){return _extends$4=Object.assign||function(mr){for(var hr=1;hr<arguments.length;hr++){var gr=arguments[hr];for(var vr in gr)Object.prototype.hasOwnProperty.call(gr,vr)&&(mr[vr]=gr[vr])}return mr},_extends$4.apply(this,arguments)}class BaseSchema{constructor(hr){this.deps=[],this.conditions=[],this._whitelist=new ReferenceSet,this._blacklist=new ReferenceSet,this.exclusiveTests=Object.create(null),this.tests=[],this.transforms=[],this.withMutation(()=>{this.typeError(mixed.notType)}),this.type=hr?.type||"mixed",this.spec=_extends$4({strip:!1,strict:!1,abortEarly:!0,recursive:!0,nullable:!1,presence:"optional"},hr?.spec)}get _type(){return this.type}_typeCheck(hr){return!0}clone(hr){if(this._mutate)return hr&&Object.assign(this.spec,hr),this;const gr=Object.create(Object.getPrototypeOf(this));return gr.type=this.type,gr._typeError=this._typeError,gr._whitelistError=this._whitelistError,gr._blacklistError=this._blacklistError,gr._whitelist=this._whitelist.clone(),gr._blacklist=this._blacklist.clone(),gr.exclusiveTests=_extends$4({},this.exclusiveTests),gr.deps=[...this.deps],gr.conditions=[...this.conditions],gr.tests=[...this.tests],gr.transforms=[...this.transforms],gr.spec=clone$1(_extends$4({},this.spec,hr)),gr}label(hr){var gr=this.clone();return gr.spec.label=hr,gr}meta(...hr){if(hr.length===0)return this.spec.meta;let gr=this.clone();return gr.spec.meta=Object.assign(gr.spec.meta||{},hr[0]),gr}withMutation(hr){let gr=this._mutate;this._mutate=!0;let vr=hr(this);return this._mutate=gr,vr}concat(hr){if(!hr||hr===this)return this;if(hr.type!==this.type&&this.type!=="mixed")throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${hr.type}`);let gr=this,vr=hr.clone();const xr=_extends$4({},gr.spec,vr.spec);return vr.spec=xr,vr._typeError||(vr._typeError=gr._typeError),vr._whitelistError||(vr._whitelistError=gr._whitelistError),vr._blacklistError||(vr._blacklistError=gr._blacklistError),vr._whitelist=gr._whitelist.merge(hr._whitelist,hr._blacklist),vr._blacklist=gr._blacklist.merge(hr._blacklist,hr._whitelist),vr.tests=gr.tests,vr.exclusiveTests=gr.exclusiveTests,vr.withMutation(Er=>{hr.tests.forEach(Cr=>{Er.test(Cr.OPTIONS)})}),vr}isType(hr){return this.spec.nullable&&hr===null?!0:this._typeCheck(hr)}resolve(hr){let gr=this;if(gr.conditions.length){let vr=gr.conditions;gr=gr.clone(),gr.conditions=[],gr=vr.reduce((xr,Er)=>Er.resolve(xr,hr),gr),gr=gr.resolve(hr)}return gr}cast(hr,gr={}){let vr=this.resolve(_extends$4({value:hr},gr)),xr=vr._cast(hr,gr);if(hr!==void 0&&gr.assert!==!1&&vr.isType(xr)!==!0){let Er=printValue(hr),Cr=printValue(xr);throw new TypeError(`The value of ${gr.path||"field"} could not be cast to a value that satisfies the schema type: "${vr._type}". 

attempted value: ${Er} 
`+(Cr!==Er?`result of cast: ${Cr}`:""))}return xr}_cast(hr,gr){let vr=hr===void 0?hr:this.transforms.reduce((xr,Er)=>Er.call(this,xr,hr,this),hr);return vr===void 0&&(vr=this.getDefault()),vr}_validate(hr,gr={},vr){let{sync:xr,path:Er,from:Cr=[],originalValue:wr=hr,strict:Rr=this.spec.strict,abortEarly:kr=this.spec.abortEarly}=gr,Dr=hr;Rr||(Dr=this._cast(Dr,_extends$4({assert:!1},gr)));let Br={value:Dr,path:Er,options:gr,originalValue:wr,schema:this,label:this.spec.label,sync:xr,from:Cr},Hr=[];this._typeError&&Hr.push(this._typeError),this._whitelistError&&Hr.push(this._whitelistError),this._blacklistError&&Hr.push(this._blacklistError),runTests({args:Br,value:Dr,path:Er,sync:xr,tests:Hr,endEarly:kr},Gr=>{if(Gr)return void vr(Gr,Dr);runTests({tests:this.tests,args:Br,path:Er,sync:xr,value:Dr,endEarly:kr},vr)})}validate(hr,gr,vr){let xr=this.resolve(_extends$4({},gr,{value:hr}));return typeof vr=="function"?xr._validate(hr,gr,vr):new Promise((Er,Cr)=>xr._validate(hr,gr,(wr,Rr)=>{wr?Cr(wr):Er(Rr)}))}validateSync(hr,gr){let vr=this.resolve(_extends$4({},gr,{value:hr})),xr;return vr._validate(hr,_extends$4({},gr,{sync:!0}),(Er,Cr)=>{if(Er)throw Er;xr=Cr}),xr}isValid(hr,gr){return this.validate(hr,gr).then(()=>!0,vr=>{if(ValidationError.isError(vr))return!1;throw vr})}isValidSync(hr,gr){try{return this.validateSync(hr,gr),!0}catch(vr){if(ValidationError.isError(vr))return!1;throw vr}}_getDefault(){let hr=this.spec.default;return hr==null?hr:typeof hr=="function"?hr.call(this):clone$1(hr)}getDefault(hr){return this.resolve(hr||{})._getDefault()}default(hr){return arguments.length===0?this._getDefault():this.clone({default:hr})}strict(hr=!0){var gr=this.clone();return gr.spec.strict=hr,gr}_isPresent(hr){return hr!=null}defined(hr=mixed.defined){return this.test({message:hr,name:"defined",exclusive:!0,test(gr){return gr!==void 0}})}required(hr=mixed.required){return this.clone({presence:"required"}).withMutation(gr=>gr.test({message:hr,name:"required",exclusive:!0,test(vr){return this.schema._isPresent(vr)}}))}notRequired(){var hr=this.clone({presence:"optional"});return hr.tests=hr.tests.filter(gr=>gr.OPTIONS.name!=="required"),hr}nullable(hr=!0){var gr=this.clone({nullable:hr!==!1});return gr}transform(hr){var gr=this.clone();return gr.transforms.push(hr),gr}test(...hr){let gr;if(hr.length===1?typeof hr[0]=="function"?gr={test:hr[0]}:gr=hr[0]:hr.length===2?gr={name:hr[0],test:hr[1]}:gr={name:hr[0],message:hr[1],test:hr[2]},gr.message===void 0&&(gr.message=mixed.default),typeof gr.test!="function")throw new TypeError("`test` is a required parameters");let vr=this.clone(),xr=createValidation(gr),Er=gr.exclusive||gr.name&&vr.exclusiveTests[gr.name]===!0;if(gr.exclusive&&!gr.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return gr.name&&(vr.exclusiveTests[gr.name]=!!gr.exclusive),vr.tests=vr.tests.filter(Cr=>!(Cr.OPTIONS.name===gr.name&&(Er||Cr.OPTIONS.test===xr.OPTIONS.test))),vr.tests.push(xr),vr}when(hr,gr){!Array.isArray(hr)&&typeof hr!="string"&&(gr=hr,hr=".");let vr=this.clone(),xr=toArray$1(hr).map(Er=>new Reference(Er));return xr.forEach(Er=>{Er.isSibling&&vr.deps.push(Er.key)}),vr.conditions.push(new Condition(xr,gr)),vr}typeError(hr){var gr=this.clone();return gr._typeError=createValidation({message:hr,name:"typeError",test(vr){return vr!==void 0&&!this.schema.isType(vr)?this.createError({params:{type:this.schema._type}}):!0}}),gr}oneOf(hr,gr=mixed.oneOf){var vr=this.clone();return hr.forEach(xr=>{vr._whitelist.add(xr),vr._blacklist.delete(xr)}),vr._whitelistError=createValidation({message:gr,name:"oneOf",test(xr){if(xr===void 0)return!0;let Er=this.schema._whitelist;return Er.has(xr,this.resolve)?!0:this.createError({params:{values:Er.toArray().join(", ")}})}}),vr}notOneOf(hr,gr=mixed.notOneOf){var vr=this.clone();return hr.forEach(xr=>{vr._blacklist.add(xr),vr._whitelist.delete(xr)}),vr._blacklistError=createValidation({message:gr,name:"notOneOf",test(xr){let Er=this.schema._blacklist;return Er.has(xr,this.resolve)?this.createError({params:{values:Er.toArray().join(", ")}}):!0}}),vr}strip(hr=!0){let gr=this.clone();return gr.spec.strip=hr,gr}describe(){const hr=this.clone(),{label:gr,meta:vr}=hr.spec;return{meta:vr,label:gr,type:hr.type,oneOf:hr._whitelist.describe(),notOneOf:hr._blacklist.describe(),tests:hr.tests.map(Er=>({name:Er.OPTIONS.name,params:Er.OPTIONS.params})).filter((Er,Cr,wr)=>wr.findIndex(Rr=>Rr.name===Er.name)===Cr)}}}BaseSchema.prototype.__isYupSchema__=!0;for(const mr of["validate","validateSync"])BaseSchema.prototype[`${mr}At`]=function(hr,gr,vr={}){const{parent:xr,parentPath:Er,schema:Cr}=getIn$1(this,hr,gr,vr.context);return Cr[mr](xr&&xr[Er],_extends$4({},vr,{parent:xr,path:hr}))};for(const mr of["equals","is"])BaseSchema.prototype[mr]=BaseSchema.prototype.oneOf;for(const mr of["not","nope"])BaseSchema.prototype[mr]=BaseSchema.prototype.notOneOf;BaseSchema.prototype.optional=BaseSchema.prototype.notRequired;const Mixed=BaseSchema;function create$6(){return new Mixed}create$6.prototype=Mixed.prototype;const isAbsent=mr=>mr==null;function create$5(){return new BooleanSchema}class BooleanSchema extends BaseSchema{constructor(){super({type:"boolean"}),this.withMutation(()=>{this.transform(function(hr){if(!this.isType(hr)){if(/^(true|1)$/i.test(String(hr)))return!0;if(/^(false|0)$/i.test(String(hr)))return!1}return hr})})}_typeCheck(hr){return hr instanceof Boolean&&(hr=hr.valueOf()),typeof hr=="boolean"}isTrue(hr=boolean.isValue){return this.test({message:hr,name:"is-value",exclusive:!0,params:{value:"true"},test(gr){return isAbsent(gr)||gr===!0}})}isFalse(hr=boolean.isValue){return this.test({message:hr,name:"is-value",exclusive:!0,params:{value:"false"},test(gr){return isAbsent(gr)||gr===!1}})}}create$5.prototype=BooleanSchema.prototype;let rEmail=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,rUrl=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,rUUID=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,isTrimmed=mr=>isAbsent(mr)||mr===mr.trim(),objStringTag={}.toString();function create$4(){return new StringSchema}class StringSchema extends BaseSchema{constructor(){super({type:"string"}),this.withMutation(()=>{this.transform(function(hr){if(this.isType(hr)||Array.isArray(hr))return hr;const gr=hr!=null&&hr.toString?hr.toString():hr;return gr===objStringTag?hr:gr})})}_typeCheck(hr){return hr instanceof String&&(hr=hr.valueOf()),typeof hr=="string"}_isPresent(hr){return super._isPresent(hr)&&!!hr.length}length(hr,gr=string.length){return this.test({message:gr,name:"length",exclusive:!0,params:{length:hr},test(vr){return isAbsent(vr)||vr.length===this.resolve(hr)}})}min(hr,gr=string.min){return this.test({message:gr,name:"min",exclusive:!0,params:{min:hr},test(vr){return isAbsent(vr)||vr.length>=this.resolve(hr)}})}max(hr,gr=string.max){return this.test({name:"max",exclusive:!0,message:gr,params:{max:hr},test(vr){return isAbsent(vr)||vr.length<=this.resolve(hr)}})}matches(hr,gr){let vr=!1,xr,Er;return gr&&(typeof gr=="object"?{excludeEmptyString:vr=!1,message:xr,name:Er}=gr:xr=gr),this.test({name:Er||"matches",message:xr||string.matches,params:{regex:hr},test:Cr=>isAbsent(Cr)||Cr===""&&vr||Cr.search(hr)!==-1})}email(hr=string.email){return this.matches(rEmail,{name:"email",message:hr,excludeEmptyString:!0})}url(hr=string.url){return this.matches(rUrl,{name:"url",message:hr,excludeEmptyString:!0})}uuid(hr=string.uuid){return this.matches(rUUID,{name:"uuid",message:hr,excludeEmptyString:!1})}ensure(){return this.default("").transform(hr=>hr===null?"":hr)}trim(hr=string.trim){return this.transform(gr=>gr!=null?gr.trim():gr).test({message:hr,name:"trim",test:isTrimmed})}lowercase(hr=string.lowercase){return this.transform(gr=>isAbsent(gr)?gr:gr.toLowerCase()).test({message:hr,name:"string_case",exclusive:!0,test:gr=>isAbsent(gr)||gr===gr.toLowerCase()})}uppercase(hr=string.uppercase){return this.transform(gr=>isAbsent(gr)?gr:gr.toUpperCase()).test({message:hr,name:"string_case",exclusive:!0,test:gr=>isAbsent(gr)||gr===gr.toUpperCase()})}}create$4.prototype=StringSchema.prototype;let isNaN$2=mr=>mr!=+mr;function create$3(){return new NumberSchema}class NumberSchema extends BaseSchema{constructor(){super({type:"number"}),this.withMutation(()=>{this.transform(function(hr){let gr=hr;if(typeof gr=="string"){if(gr=gr.replace(/\s/g,""),gr==="")return NaN;gr=+gr}return this.isType(gr)?gr:parseFloat(gr)})})}_typeCheck(hr){return hr instanceof Number&&(hr=hr.valueOf()),typeof hr=="number"&&!isNaN$2(hr)}min(hr,gr=number.min){return this.test({message:gr,name:"min",exclusive:!0,params:{min:hr},test(vr){return isAbsent(vr)||vr>=this.resolve(hr)}})}max(hr,gr=number.max){return this.test({message:gr,name:"max",exclusive:!0,params:{max:hr},test(vr){return isAbsent(vr)||vr<=this.resolve(hr)}})}lessThan(hr,gr=number.lessThan){return this.test({message:gr,name:"max",exclusive:!0,params:{less:hr},test(vr){return isAbsent(vr)||vr<this.resolve(hr)}})}moreThan(hr,gr=number.moreThan){return this.test({message:gr,name:"min",exclusive:!0,params:{more:hr},test(vr){return isAbsent(vr)||vr>this.resolve(hr)}})}positive(hr=number.positive){return this.moreThan(0,hr)}negative(hr=number.negative){return this.lessThan(0,hr)}integer(hr=number.integer){return this.test({name:"integer",message:hr,test:gr=>isAbsent(gr)||Number.isInteger(gr)})}truncate(){return this.transform(hr=>isAbsent(hr)?hr:hr|0)}round(hr){var gr,vr=["ceil","floor","round","trunc"];if(hr=((gr=hr)==null?void 0:gr.toLowerCase())||"round",hr==="trunc")return this.truncate();if(vr.indexOf(hr.toLowerCase())===-1)throw new TypeError("Only valid options for round() are: "+vr.join(", "));return this.transform(xr=>isAbsent(xr)?xr:Math[hr](xr))}}create$3.prototype=NumberSchema.prototype;var isoReg=/^(\d{4}|[+\-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;function parseIsoDate(mr){var hr=[1,4,5,6,7,10,11],gr=0,vr,xr;if(xr=isoReg.exec(mr)){for(var Er=0,Cr;Cr=hr[Er];++Er)xr[Cr]=+xr[Cr]||0;xr[2]=(+xr[2]||1)-1,xr[3]=+xr[3]||1,xr[7]=xr[7]?String(xr[7]).substr(0,3):0,(xr[8]===void 0||xr[8]==="")&&(xr[9]===void 0||xr[9]==="")?vr=+new Date(xr[1],xr[2],xr[3],xr[4],xr[5],xr[6],xr[7]):(xr[8]!=="Z"&&xr[9]!==void 0&&(gr=xr[10]*60+xr[11],xr[9]==="+"&&(gr=0-gr)),vr=Date.UTC(xr[1],xr[2],xr[3],xr[4],xr[5]+gr,xr[6],xr[7]))}else vr=Date.parse?Date.parse(mr):NaN;return vr}let invalidDate=new Date(""),isDate=mr=>Object.prototype.toString.call(mr)==="[object Date]";class DateSchema extends BaseSchema{constructor(){super({type:"date"}),this.withMutation(()=>{this.transform(function(hr){return this.isType(hr)?hr:(hr=parseIsoDate(hr),isNaN(hr)?invalidDate:new Date(hr))})})}_typeCheck(hr){return isDate(hr)&&!isNaN(hr.getTime())}prepareParam(hr,gr){let vr;if(Reference.isRef(hr))vr=hr;else{let xr=this.cast(hr);if(!this._typeCheck(xr))throw new TypeError(`\`${gr}\` must be a Date or a value that can be \`cast()\` to a Date`);vr=xr}return vr}min(hr,gr=date.min){let vr=this.prepareParam(hr,"min");return this.test({message:gr,name:"min",exclusive:!0,params:{min:hr},test(xr){return isAbsent(xr)||xr>=this.resolve(vr)}})}max(hr,gr=date.max){var vr=this.prepareParam(hr,"max");return this.test({message:gr,name:"max",exclusive:!0,params:{max:hr},test(xr){return isAbsent(xr)||xr<=this.resolve(vr)}})}}DateSchema.INVALID_DATE=invalidDate;DateSchema.prototype;var createCompounder=_createCompounder,snakeCase=createCompounder(function(mr,hr,gr){return mr+(gr?"_":"")+hr.toLowerCase()}),snakeCase_1=snakeCase;const snakeCase$1=getDefaultExportFromCjs$1(snakeCase_1);var baseAssignValue$1=_baseAssignValue,baseForOwn=_baseForOwn,baseIteratee=_baseIteratee;function mapKeys(mr,hr){var gr={};return hr=baseIteratee(hr),baseForOwn(mr,function(vr,xr,Er){baseAssignValue$1(gr,hr(vr,xr,Er),vr)}),gr}var mapKeys_1=mapKeys;const mapKeys$1=getDefaultExportFromCjs$1(mapKeys_1);var toposort$2={exports:{}};toposort$2.exports=function(mr){return toposort(uniqueNodes(mr),mr)};toposort$2.exports.array=toposort;function toposort(mr,hr){var gr=mr.length,vr=new Array(gr),xr={},Er=gr,Cr=makeOutgoingEdges(hr),wr=makeNodesHash(mr);for(hr.forEach(function(kr){if(!wr.has(kr[0])||!wr.has(kr[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")});Er--;)xr[Er]||Rr(mr[Er],Er,new Set);return vr;function Rr(kr,Dr,Br){if(Br.has(kr)){var Hr;try{Hr=", node was:"+JSON.stringify(kr)}catch{Hr=""}throw new Error("Cyclic dependency"+Hr)}if(!wr.has(kr))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(kr));if(!xr[Dr]){xr[Dr]=!0;var Gr=Cr.get(kr)||new Set;if(Gr=Array.from(Gr),Dr=Gr.length){Br.add(kr);do{var qr=Gr[--Dr];Rr(qr,wr.get(qr),Br)}while(Dr);Br.delete(kr)}vr[--gr]=kr}}}function uniqueNodes(mr){for(var hr=new Set,gr=0,vr=mr.length;gr<vr;gr++){var xr=mr[gr];hr.add(xr[0]),hr.add(xr[1])}return Array.from(hr)}function makeOutgoingEdges(mr){for(var hr=new Map,gr=0,vr=mr.length;gr<vr;gr++){var xr=mr[gr];hr.has(xr[0])||hr.set(xr[0],new Set),hr.has(xr[1])||hr.set(xr[1],new Set),hr.get(xr[0]).add(xr[1])}return hr}function makeNodesHash(mr){for(var hr=new Map,gr=0,vr=mr.length;gr<vr;gr++)hr.set(mr[gr],gr);return hr}var toposortExports=toposort$2.exports;const toposort$1=getDefaultExportFromCjs$1(toposortExports);function sortFields(mr,hr=[]){let gr=[],vr=[];function xr(Er,Cr){var wr=propertyExpr.split(Er)[0];~vr.indexOf(wr)||vr.push(wr),~hr.indexOf(`${Cr}-${wr}`)||gr.push([Cr,wr])}for(const Er in mr)if(has$1(mr,Er)){let Cr=mr[Er];~vr.indexOf(Er)||vr.push(Er),Reference.isRef(Cr)&&Cr.isSibling?xr(Cr.path,Er):isSchema(Cr)&&"deps"in Cr&&Cr.deps.forEach(wr=>xr(wr,Er))}return toposort$1.array(vr,gr).reverse()}function findIndex(mr,hr){let gr=1/0;return mr.some((vr,xr)=>{var Er;if(((Er=hr.path)==null?void 0:Er.indexOf(vr))!==-1)return gr=xr,!0}),gr}function sortByKeyOrder(mr){return(hr,gr)=>findIndex(mr,hr)-findIndex(mr,gr)}function _extends$3(){return _extends$3=Object.assign||function(mr){for(var hr=1;hr<arguments.length;hr++){var gr=arguments[hr];for(var vr in gr)Object.prototype.hasOwnProperty.call(gr,vr)&&(mr[vr]=gr[vr])}return mr},_extends$3.apply(this,arguments)}let isObject$5=mr=>Object.prototype.toString.call(mr)==="[object Object]";function unknown(mr,hr){let gr=Object.keys(mr.fields);return Object.keys(hr).filter(vr=>gr.indexOf(vr)===-1)}const defaultSort=sortByKeyOrder([]);class ObjectSchema extends BaseSchema{constructor(hr){super({type:"object"}),this.fields=Object.create(null),this._sortErrors=defaultSort,this._nodes=[],this._excludedEdges=[],this.withMutation(()=>{this.transform(function(vr){if(typeof vr=="string")try{vr=JSON.parse(vr)}catch{vr=null}return this.isType(vr)?vr:null}),hr&&this.shape(hr)})}_typeCheck(hr){return isObject$5(hr)||typeof hr=="function"}_cast(hr,gr={}){var vr;let xr=super._cast(hr,gr);if(xr===void 0)return this.getDefault();if(!this._typeCheck(xr))return xr;let Er=this.fields,Cr=(vr=gr.stripUnknown)!=null?vr:this.spec.noUnknown,wr=this._nodes.concat(Object.keys(xr).filter(Br=>this._nodes.indexOf(Br)===-1)),Rr={},kr=_extends$3({},gr,{parent:Rr,__validating:gr.__validating||!1}),Dr=!1;for(const Br of wr){let Hr=Er[Br],Gr=has$1(xr,Br);if(Hr){let qr,zr=xr[Br];kr.path=(gr.path?`${gr.path}.`:"")+Br,Hr=Hr.resolve({value:zr,context:gr.context,parent:Rr});let Qr="spec"in Hr?Hr.spec:void 0,sn=Qr?.strict;if(Qr?.strip){Dr=Dr||Br in xr;continue}qr=!gr.__validating||!sn?Hr.cast(xr[Br],kr):xr[Br],qr!==void 0&&(Rr[Br]=qr)}else Gr&&!Cr&&(Rr[Br]=xr[Br]);Rr[Br]!==xr[Br]&&(Dr=!0)}return Dr?Rr:xr}_validate(hr,gr={},vr){let xr=[],{sync:Er,from:Cr=[],originalValue:wr=hr,abortEarly:Rr=this.spec.abortEarly,recursive:kr=this.spec.recursive}=gr;Cr=[{schema:this,value:wr},...Cr],gr.__validating=!0,gr.originalValue=wr,gr.from=Cr,super._validate(hr,gr,(Dr,Br)=>{if(Dr){if(!ValidationError.isError(Dr)||Rr)return void vr(Dr,Br);xr.push(Dr)}if(!kr||!isObject$5(Br)){vr(xr[0]||null,Br);return}wr=wr||Br;let Hr=this._nodes.map(Gr=>(qr,zr)=>{let Qr=Gr.indexOf(".")===-1?(gr.path?`${gr.path}.`:"")+Gr:`${gr.path||""}["${Gr}"]`,sn=this.fields[Gr];if(sn&&"validate"in sn){sn.validate(Br[Gr],_extends$3({},gr,{path:Qr,from:Cr,strict:!0,parent:Br,originalValue:wr[Gr]}),zr);return}zr(null)});runTests({sync:Er,tests:Hr,value:Br,errors:xr,endEarly:Rr,sort:this._sortErrors,path:gr.path},vr)})}clone(hr){const gr=super.clone(hr);return gr.fields=_extends$3({},this.fields),gr._nodes=this._nodes,gr._excludedEdges=this._excludedEdges,gr._sortErrors=this._sortErrors,gr}concat(hr){let gr=super.concat(hr),vr=gr.fields;for(let[xr,Er]of Object.entries(this.fields)){const Cr=vr[xr];Cr===void 0?vr[xr]=Er:Cr instanceof BaseSchema&&Er instanceof BaseSchema&&(vr[xr]=Er.concat(Cr))}return gr.withMutation(()=>gr.shape(vr))}getDefaultFromShape(){let hr={};return this._nodes.forEach(gr=>{const vr=this.fields[gr];hr[gr]="default"in vr?vr.getDefault():void 0}),hr}_getDefault(){if("default"in this.spec)return super._getDefault();if(this._nodes.length)return this.getDefaultFromShape()}shape(hr,gr=[]){let vr=this.clone(),xr=Object.assign(vr.fields,hr);if(vr.fields=xr,vr._sortErrors=sortByKeyOrder(Object.keys(xr)),gr.length){Array.isArray(gr[0])||(gr=[gr]);let Er=gr.map(([Cr,wr])=>`${Cr}-${wr}`);vr._excludedEdges=vr._excludedEdges.concat(Er)}return vr._nodes=sortFields(xr,vr._excludedEdges),vr}pick(hr){const gr={};for(const vr of hr)this.fields[vr]&&(gr[vr]=this.fields[vr]);return this.clone().withMutation(vr=>(vr.fields={},vr.shape(gr)))}omit(hr){const gr=this.clone(),vr=gr.fields;gr.fields={};for(const xr of hr)delete vr[xr];return gr.withMutation(()=>gr.shape(vr))}from(hr,gr,vr){let xr=propertyExpr.getter(hr,!0);return this.transform(Er=>{if(Er==null)return Er;let Cr=Er;return has$1(Er,hr)&&(Cr=_extends$3({},Er),vr||delete Cr[hr],Cr[gr]=xr(Er)),Cr})}noUnknown(hr=!0,gr=object.noUnknown){typeof hr=="string"&&(gr=hr,hr=!0);let vr=this.test({name:"noUnknown",exclusive:!0,message:gr,test(xr){if(xr==null)return!0;const Er=unknown(this.schema,xr);return!hr||Er.length===0||this.createError({params:{unknown:Er.join(", ")}})}});return vr.spec.noUnknown=hr,vr}unknown(hr=!0,gr=object.noUnknown){return this.noUnknown(!hr,gr)}transformKeys(hr){return this.transform(gr=>gr&&mapKeys$1(gr,(vr,xr)=>hr(xr)))}camelCase(){return this.transformKeys(camelCase$2)}snakeCase(){return this.transformKeys(snakeCase$1)}constantCase(){return this.transformKeys(hr=>snakeCase$1(hr).toUpperCase())}describe(){let hr=super.describe();return hr.fields=mapValues(this.fields,gr=>gr.describe()),hr}}function create$2(mr){return new ObjectSchema(mr)}create$2.prototype=ObjectSchema.prototype;function _extends$2(){return _extends$2=Object.assign||function(mr){for(var hr=1;hr<arguments.length;hr++){var gr=arguments[hr];for(var vr in gr)Object.prototype.hasOwnProperty.call(gr,vr)&&(mr[vr]=gr[vr])}return mr},_extends$2.apply(this,arguments)}function create$1(mr){return new ArraySchema(mr)}class ArraySchema extends BaseSchema{constructor(hr){super({type:"array"}),this.innerType=hr,this.withMutation(()=>{this.transform(function(gr){if(typeof gr=="string")try{gr=JSON.parse(gr)}catch{gr=null}return this.isType(gr)?gr:null})})}_typeCheck(hr){return Array.isArray(hr)}get _subType(){return this.innerType}_cast(hr,gr){const vr=super._cast(hr,gr);if(!this._typeCheck(vr)||!this.innerType)return vr;let xr=!1;const Er=vr.map((Cr,wr)=>{const Rr=this.innerType.cast(Cr,_extends$2({},gr,{path:`${gr.path||""}[${wr}]`}));return Rr!==Cr&&(xr=!0),Rr});return xr?Er:vr}_validate(hr,gr={},vr){var xr,Er;let Cr=[],wr=gr.sync,Rr=gr.path,kr=this.innerType,Dr=(xr=gr.abortEarly)!=null?xr:this.spec.abortEarly,Br=(Er=gr.recursive)!=null?Er:this.spec.recursive,Hr=gr.originalValue!=null?gr.originalValue:hr;super._validate(hr,gr,(Gr,qr)=>{if(Gr){if(!ValidationError.isError(Gr)||Dr)return void vr(Gr,qr);Cr.push(Gr)}if(!Br||!kr||!this._typeCheck(qr)){vr(Cr[0]||null,qr);return}Hr=Hr||qr;let zr=new Array(qr.length);for(let Qr=0;Qr<qr.length;Qr++){let sn=qr[Qr],hn=`${gr.path||""}[${Qr}]`,vn=_extends$2({},gr,{path:hn,strict:!0,parent:qr,index:Qr,originalValue:Hr[Qr]});zr[Qr]=(yn,gn)=>kr.validate(sn,vn,gn)}runTests({sync:wr,path:Rr,value:qr,errors:Cr,endEarly:Dr,tests:zr},vr)})}clone(hr){const gr=super.clone(hr);return gr.innerType=this.innerType,gr}concat(hr){let gr=super.concat(hr);return gr.innerType=this.innerType,hr.innerType&&(gr.innerType=gr.innerType?gr.innerType.concat(hr.innerType):hr.innerType),gr}of(hr){let gr=this.clone();if(!isSchema(hr))throw new TypeError("`array.of()` sub-schema must be a valid yup schema not: "+printValue(hr));return gr.innerType=hr,gr}length(hr,gr=array.length){return this.test({message:gr,name:"length",exclusive:!0,params:{length:hr},test(vr){return isAbsent(vr)||vr.length===this.resolve(hr)}})}min(hr,gr){return gr=gr||array.min,this.test({message:gr,name:"min",exclusive:!0,params:{min:hr},test(vr){return isAbsent(vr)||vr.length>=this.resolve(hr)}})}max(hr,gr){return gr=gr||array.max,this.test({message:gr,name:"max",exclusive:!0,params:{max:hr},test(vr){return isAbsent(vr)||vr.length<=this.resolve(hr)}})}ensure(){return this.default(()=>[]).transform((hr,gr)=>this._typeCheck(hr)?hr:gr==null?[]:[].concat(gr))}compact(hr){let gr=hr?(vr,xr,Er)=>!hr(vr,xr,Er):vr=>!!vr;return this.transform(vr=>vr!=null?vr.filter(gr):vr)}describe(){let hr=super.describe();return this.innerType&&(hr.innerType=this.innerType.describe()),hr}nullable(hr=!0){return super.nullable(hr)}defined(){return super.defined()}required(hr){return super.required(hr)}}create$1.prototype=ArraySchema.prototype;function create(mr){return new Lazy(mr)}class Lazy{constructor(hr){this.type="lazy",this.__isYupSchema__=!0,this._resolve=(gr,vr={})=>{let xr=this.builder(gr,vr);if(!isSchema(xr))throw new TypeError("lazy() functions must return a valid schema");return xr.resolve(vr)},this.builder=hr}resolve(hr){return this._resolve(hr.value,hr)}cast(hr,gr){return this._resolve(hr,gr).cast(hr,gr)}validate(hr,gr,vr){return this._resolve(hr,gr).validate(hr,gr,vr)}validateSync(hr,gr){return this._resolve(hr,gr).validateSync(hr,gr)}validateAt(hr,gr,vr){return this._resolve(gr,vr).validateAt(hr,gr,vr)}validateSyncAt(hr,gr,vr){return this._resolve(gr,vr).validateSyncAt(hr,gr,vr)}describe(){return null}isValid(hr,gr){return this._resolve(hr,gr).isValid(hr,gr)}isValidSync(hr,gr){return this._resolve(hr,gr).isValidSync(hr,gr)}}const BASE_62_DIGITS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function midpoint(mr,hr,gr){const vr=gr[0];if(hr!=null&&mr>=hr)throw new Error(mr+" >= "+hr);if(mr.slice(-1)===vr||hr&&hr.slice(-1)===vr)throw new Error("trailing zero");if(hr){let Cr=0;for(;(mr[Cr]||vr)===hr[Cr];)Cr++;if(Cr>0)return hr.slice(0,Cr)+midpoint(mr.slice(Cr),hr.slice(Cr),gr)}const xr=mr?gr.indexOf(mr[0]):0,Er=hr!=null?gr.indexOf(hr[0]):gr.length;if(Er-xr>1){const Cr=Math.round(.5*(xr+Er));return gr[Cr]}else return hr&&hr.length>1?hr.slice(0,1):gr[xr]+midpoint(mr.slice(1),null,gr)}function validateInteger(mr){if(mr.length!==getIntegerLength(mr[0]))throw new Error("invalid integer part of order key: "+mr)}function getIntegerLength(mr){if(mr>="a"&&mr<="z")return mr.charCodeAt(0)-97+2;if(mr>="A"&&mr<="Z")return 90-mr.charCodeAt(0)+2;throw new Error("invalid order key head: "+mr)}function getIntegerPart(mr){const hr=getIntegerLength(mr[0]);if(hr>mr.length)throw new Error("invalid order key: "+mr);return mr.slice(0,hr)}function validateOrderKey(mr,hr){if(mr==="A"+hr[0].repeat(26))throw new Error("invalid order key: "+mr);const gr=getIntegerPart(mr);if(mr.slice(gr.length).slice(-1)===hr[0])throw new Error("invalid order key: "+mr)}function incrementInteger(mr,hr){validateInteger(mr);const[gr,...vr]=mr.split("");let xr=!0;for(let Er=vr.length-1;xr&&Er>=0;Er--){const Cr=hr.indexOf(vr[Er])+1;Cr===hr.length?vr[Er]=hr[0]:(vr[Er]=hr[Cr],xr=!1)}if(xr){if(gr==="Z")return"a"+hr[0];if(gr==="z")return null;const Er=String.fromCharCode(gr.charCodeAt(0)+1);return Er>"a"?vr.push(hr[0]):vr.pop(),Er+vr.join("")}else return gr+vr.join("")}function decrementInteger(mr,hr){validateInteger(mr);const[gr,...vr]=mr.split("");let xr=!0;for(let Er=vr.length-1;xr&&Er>=0;Er--){const Cr=hr.indexOf(vr[Er])-1;Cr===-1?vr[Er]=hr.slice(-1):(vr[Er]=hr[Cr],xr=!1)}if(xr){if(gr==="a")return"Z"+hr.slice(-1);if(gr==="A")return null;const Er=String.fromCharCode(gr.charCodeAt(0)-1);return Er<"Z"?vr.push(hr.slice(-1)):vr.pop(),Er+vr.join("")}else return gr+vr.join("")}function generateKeyBetween(mr,hr,gr=BASE_62_DIGITS){if(mr!=null&&validateOrderKey(mr,gr),hr!=null&&validateOrderKey(hr,gr),mr!=null&&hr!=null&&mr>=hr)throw new Error(mr+" >= "+hr);if(mr==null){if(hr==null)return"a"+gr[0];const Rr=getIntegerPart(hr),kr=hr.slice(Rr.length);if(Rr==="A"+gr[0].repeat(26))return Rr+midpoint("",kr,gr);if(Rr<hr)return Rr;const Dr=decrementInteger(Rr,gr);if(Dr==null)throw new Error("cannot decrement any more");return Dr}if(hr==null){const Rr=getIntegerPart(mr),kr=mr.slice(Rr.length),Dr=incrementInteger(Rr,gr);return Dr??Rr+midpoint(kr,null,gr)}const vr=getIntegerPart(mr),xr=mr.slice(vr.length),Er=getIntegerPart(hr),Cr=hr.slice(Er.length);if(vr===Er)return vr+midpoint(xr,Cr,gr);const wr=incrementInteger(vr,gr);if(wr==null)throw new Error("cannot increment any more");return wr<hr?wr:vr+midpoint(xr,null,gr)}function generateNKeysBetween(mr,hr,gr,vr=BASE_62_DIGITS){if(gr===0)return[];if(gr===1)return[generateKeyBetween(mr,hr,vr)];if(hr==null){let Cr=generateKeyBetween(mr,hr,vr);const wr=[Cr];for(let Rr=0;Rr<gr-1;Rr++)Cr=generateKeyBetween(Cr,hr,vr),wr.push(Cr);return wr}if(mr==null){let Cr=generateKeyBetween(mr,hr,vr);const wr=[Cr];for(let Rr=0;Rr<gr-1;Rr++)Cr=generateKeyBetween(mr,Cr,vr),wr.push(Cr);return wr.reverse(),wr}const xr=Math.floor(gr/2),Er=generateKeyBetween(mr,hr,vr);return[...generateNKeysBetween(mr,Er,xr,vr),Er,...generateNKeysBetween(Er,hr,gr-xr-1,vr)]}function last$1(mr){var hr=mr==null?0:mr.length;return hr?mr[hr-1]:void 0}var last_1=last$1,baseGet=_baseGet,baseSlice=_baseSlice;function parent$1(mr,hr){return hr.length<2?mr:baseGet(mr,baseSlice(hr,0,-1))}var _parent=parent$1,castPath$1=_castPath,last=last_1,parent=_parent,toKey$1=_toKey;function baseUnset$1(mr,hr){return hr=castPath$1(hr,mr),mr=parent(mr,hr),mr==null||delete mr[toKey$1(last(hr))]}var _baseUnset=baseUnset$1,isPlainObject$2=isPlainObject_1;function customOmitClone$1(mr){return isPlainObject$2(mr)?void 0:mr}var _customOmitClone=customOmitClone$1,arrayMap$1=_arrayMap,baseClone$1=_baseClone,baseUnset=_baseUnset,castPath=_castPath,copyObject$1=_copyObject,customOmitClone=_customOmitClone,flatRest=_flatRest,getAllKeysIn$1=_getAllKeysIn,CLONE_DEEP_FLAG$1=1,CLONE_FLAT_FLAG$1=2,CLONE_SYMBOLS_FLAG$2=4;flatRest(function(mr,hr){var gr={};if(mr==null)return gr;var vr=!1;hr=arrayMap$1(hr,function(Er){return Er=castPath(Er,mr),vr||(vr=Er.length>1),Er}),copyObject$1(mr,getAllKeysIn$1(mr),gr),vr&&(gr=baseClone$1(gr,CLONE_DEEP_FLAG$1|CLONE_FLAT_FLAG$1|CLONE_SYMBOLS_FLAG$2,customOmitClone));for(var xr=hr.length;xr--;)baseUnset(gr,hr[xr]);return gr});var isMergeableObject=function(hr){return isNonNullObject(hr)&&!isSpecial(hr)};function isNonNullObject(mr){return!!mr&&typeof mr=="object"}function isSpecial(mr){var hr=Object.prototype.toString.call(mr);return hr==="[object RegExp]"||hr==="[object Date]"||isReactElement(mr)}var canUseSymbol=typeof Symbol=="function"&&Symbol.for,REACT_ELEMENT_TYPE=canUseSymbol?Symbol.for("react.element"):60103;function isReactElement(mr){return mr.$$typeof===REACT_ELEMENT_TYPE}function emptyTarget(mr){return Array.isArray(mr)?[]:{}}function cloneUnlessOtherwiseSpecified(mr,hr){return hr.clone!==!1&&hr.isMergeableObject(mr)?deepmerge(emptyTarget(mr),mr,hr):mr}function defaultArrayMerge(mr,hr,gr){return mr.concat(hr).map(function(vr){return cloneUnlessOtherwiseSpecified(vr,gr)})}function mergeObject(mr,hr,gr){var vr={};return gr.isMergeableObject(mr)&&Object.keys(mr).forEach(function(xr){vr[xr]=cloneUnlessOtherwiseSpecified(mr[xr],gr)}),Object.keys(hr).forEach(function(xr){!gr.isMergeableObject(hr[xr])||!mr[xr]?vr[xr]=cloneUnlessOtherwiseSpecified(hr[xr],gr):vr[xr]=deepmerge(mr[xr],hr[xr],gr)}),vr}function deepmerge(mr,hr,gr){gr=gr||{},gr.arrayMerge=gr.arrayMerge||defaultArrayMerge,gr.isMergeableObject=gr.isMergeableObject||isMergeableObject;var vr=Array.isArray(hr),xr=Array.isArray(mr),Er=vr===xr;return Er?vr?gr.arrayMerge(mr,hr,gr):mergeObject(mr,hr,gr):cloneUnlessOtherwiseSpecified(hr,gr)}deepmerge.all=function(hr,gr){if(!Array.isArray(hr))throw new Error("first argument should be an array");return hr.reduce(function(vr,xr){return deepmerge(vr,xr,gr)},{})};var deepmerge_1=deepmerge,freeGlobal$1=typeof global=="object"&&global&&global.Object===Object&&global,freeSelf$1=typeof self=="object"&&self&&self.Object===Object&&self,root$2=freeGlobal$1||freeSelf$1||Function("return this")(),Symbol$2=root$2.Symbol,objectProto$f=Object.prototype,hasOwnProperty$c=objectProto$f.hasOwnProperty,nativeObjectToString$1=objectProto$f.toString,symToStringTag$1=Symbol$2?Symbol$2.toStringTag:void 0;function getRawTag(mr){var hr=hasOwnProperty$c.call(mr,symToStringTag$1),gr=mr[symToStringTag$1];try{mr[symToStringTag$1]=void 0;var vr=!0}catch{}var xr=nativeObjectToString$1.call(mr);return vr&&(hr?mr[symToStringTag$1]=gr:delete mr[symToStringTag$1]),xr}var objectProto$e=Object.prototype,nativeObjectToString=objectProto$e.toString;function objectToString$1(mr){return nativeObjectToString.call(mr)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$2?Symbol$2.toStringTag:void 0;function baseGetTag(mr){return mr==null?mr===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(mr)?getRawTag(mr):objectToString$1(mr)}function overArg(mr,hr){return function(gr){return mr(hr(gr))}}var getPrototype=overArg(Object.getPrototypeOf,Object);function isObjectLike$1(mr){return mr!=null&&typeof mr=="object"}var objectTag$3="[object Object]",funcProto$2=Function.prototype,objectProto$d=Object.prototype,funcToString$2=funcProto$2.toString,hasOwnProperty$b=objectProto$d.hasOwnProperty,objectCtorString=funcToString$2.call(Object);function isPlainObject$1(mr){if(!isObjectLike$1(mr)||baseGetTag(mr)!=objectTag$3)return!1;var hr=getPrototype(mr);if(hr===null)return!0;var gr=hasOwnProperty$b.call(hr,"constructor")&&hr.constructor;return typeof gr=="function"&&gr instanceof gr&&funcToString$2.call(gr)==objectCtorString}var isArray$3=Array.isArray,keyList=Object.keys,hasProp=Object.prototype.hasOwnProperty,hasElementType=typeof Element<"u";function equal$1(mr,hr){if(mr===hr)return!0;if(mr&&hr&&typeof mr=="object"&&typeof hr=="object"){var gr=isArray$3(mr),vr=isArray$3(hr),xr,Er,Cr;if(gr&&vr){if(Er=mr.length,Er!=hr.length)return!1;for(xr=Er;xr--!==0;)if(!equal$1(mr[xr],hr[xr]))return!1;return!0}if(gr!=vr)return!1;var wr=mr instanceof Date,Rr=hr instanceof Date;if(wr!=Rr)return!1;if(wr&&Rr)return mr.getTime()==hr.getTime();var kr=mr instanceof RegExp,Dr=hr instanceof RegExp;if(kr!=Dr)return!1;if(kr&&Dr)return mr.toString()==hr.toString();var Br=keyList(mr);if(Er=Br.length,Er!==keyList(hr).length)return!1;for(xr=Er;xr--!==0;)if(!hasProp.call(hr,Br[xr]))return!1;if(hasElementType&&mr instanceof Element&&hr instanceof Element)return mr===hr;for(xr=Er;xr--!==0;)if(Cr=Br[xr],!(Cr==="_owner"&&mr.$$typeof)&&!equal$1(mr[Cr],hr[Cr]))return!1;return!0}return mr!==mr&&hr!==hr}var reactFastCompare=function(hr,gr){try{return equal$1(hr,gr)}catch(vr){if(vr.message&&vr.message.match(/stack|recursion/i)||vr.number===-2146828260)return console.warn("Warning: react-fast-compare does not handle circular references.",vr.name,vr.message),!1;throw vr}};const isEqual$1=getDefaultExportFromCjs$1(reactFastCompare);function listCacheClear(){this.__data__=[],this.size=0}function eq(mr,hr){return mr===hr||mr!==mr&&hr!==hr}function assocIndexOf(mr,hr){for(var gr=mr.length;gr--;)if(eq(mr[gr][0],hr))return gr;return-1}var arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(mr){var hr=this.__data__,gr=assocIndexOf(hr,mr);if(gr<0)return!1;var vr=hr.length-1;return gr==vr?hr.pop():splice.call(hr,gr,1),--this.size,!0}function listCacheGet(mr){var hr=this.__data__,gr=assocIndexOf(hr,mr);return gr<0?void 0:hr[gr][1]}function listCacheHas(mr){return assocIndexOf(this.__data__,mr)>-1}function listCacheSet(mr,hr){var gr=this.__data__,vr=assocIndexOf(gr,mr);return vr<0?(++this.size,gr.push([mr,hr])):gr[vr][1]=hr,this}function ListCache(mr){var hr=-1,gr=mr==null?0:mr.length;for(this.clear();++hr<gr;){var vr=mr[hr];this.set(vr[0],vr[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype.delete=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(mr){var hr=this.__data__,gr=hr.delete(mr);return this.size=hr.size,gr}function stackGet(mr){return this.__data__.get(mr)}function stackHas(mr){return this.__data__.has(mr)}function isObject$4(mr){var hr=typeof mr;return mr!=null&&(hr=="object"||hr=="function")}var asyncTag="[object AsyncFunction]",funcTag$2="[object Function]",genTag$1="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$2(mr){if(!isObject$4(mr))return!1;var hr=baseGetTag(mr);return hr==funcTag$2||hr==genTag$1||hr==asyncTag||hr==proxyTag}var coreJsData=root$2["__core-js_shared__"],maskSrcKey=function(){var mr=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return mr?"Symbol(src)_1."+mr:""}();function isMasked(mr){return!!maskSrcKey&&maskSrcKey in mr}var funcProto$1=Function.prototype,funcToString$1=funcProto$1.toString;function toSource(mr){if(mr!=null){try{return funcToString$1.call(mr)}catch{}try{return mr+""}catch{}}return""}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto=Function.prototype,objectProto$c=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$a=objectProto$c.hasOwnProperty,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty$a).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(mr){if(!isObject$4(mr)||isMasked(mr))return!1;var hr=isFunction$2(mr)?reIsNative:reIsHostCtor;return hr.test(toSource(mr))}function getValue(mr,hr){return mr?.[hr]}function getNative(mr,hr){var gr=getValue(mr,hr);return baseIsNative(gr)?gr:void 0}var Map$1=getNative(root$2,"Map"),nativeCreate=getNative(Object,"create");function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0}function hashDelete(mr){var hr=this.has(mr)&&delete this.__data__[mr];return this.size-=hr?1:0,hr}var HASH_UNDEFINED$1="__lodash_hash_undefined__",objectProto$b=Object.prototype,hasOwnProperty$9=objectProto$b.hasOwnProperty;function hashGet(mr){var hr=this.__data__;if(nativeCreate){var gr=hr[mr];return gr===HASH_UNDEFINED$1?void 0:gr}return hasOwnProperty$9.call(hr,mr)?hr[mr]:void 0}var objectProto$a=Object.prototype,hasOwnProperty$8=objectProto$a.hasOwnProperty;function hashHas(mr){var hr=this.__data__;return nativeCreate?hr[mr]!==void 0:hasOwnProperty$8.call(hr,mr)}var HASH_UNDEFINED="__lodash_hash_undefined__";function hashSet(mr,hr){var gr=this.__data__;return this.size+=this.has(mr)?0:1,gr[mr]=nativeCreate&&hr===void 0?HASH_UNDEFINED:hr,this}function Hash(mr){var hr=-1,gr=mr==null?0:mr.length;for(this.clear();++hr<gr;){var vr=mr[hr];this.set(vr[0],vr[1])}}Hash.prototype.clear=hashClear;Hash.prototype.delete=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map$1||ListCache),string:new Hash}}function isKeyable(mr){var hr=typeof mr;return hr=="string"||hr=="number"||hr=="symbol"||hr=="boolean"?mr!=="__proto__":mr===null}function getMapData(mr,hr){var gr=mr.__data__;return isKeyable(hr)?gr[typeof hr=="string"?"string":"hash"]:gr.map}function mapCacheDelete(mr){var hr=getMapData(this,mr).delete(mr);return this.size-=hr?1:0,hr}function mapCacheGet(mr){return getMapData(this,mr).get(mr)}function mapCacheHas(mr){return getMapData(this,mr).has(mr)}function mapCacheSet(mr,hr){var gr=getMapData(this,mr),vr=gr.size;return gr.set(mr,hr),this.size+=gr.size==vr?0:1,this}function MapCache(mr){var hr=-1,gr=mr==null?0:mr.length;for(this.clear();++hr<gr;){var vr=mr[hr];this.set(vr[0],vr[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype.delete=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;var LARGE_ARRAY_SIZE=200;function stackSet(mr,hr){var gr=this.__data__;if(gr instanceof ListCache){var vr=gr.__data__;if(!Map$1||vr.length<LARGE_ARRAY_SIZE-1)return vr.push([mr,hr]),this.size=++gr.size,this;gr=this.__data__=new MapCache(vr)}return gr.set(mr,hr),this.size=gr.size,this}function Stack(mr){var hr=this.__data__=new ListCache(mr);this.size=hr.size}Stack.prototype.clear=stackClear;Stack.prototype.delete=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;function arrayEach(mr,hr){for(var gr=-1,vr=mr==null?0:mr.length;++gr<vr&&hr(mr[gr],gr,mr)!==!1;);return mr}var defineProperty=function(){try{var mr=getNative(Object,"defineProperty");return mr({},"",{}),mr}catch{}}();function baseAssignValue(mr,hr,gr){hr=="__proto__"&&defineProperty?defineProperty(mr,hr,{configurable:!0,enumerable:!0,value:gr,writable:!0}):mr[hr]=gr}var objectProto$9=Object.prototype,hasOwnProperty$7=objectProto$9.hasOwnProperty;function assignValue(mr,hr,gr){var vr=mr[hr];(!(hasOwnProperty$7.call(mr,hr)&&eq(vr,gr))||gr===void 0&&!(hr in mr))&&baseAssignValue(mr,hr,gr)}function copyObject(mr,hr,gr,vr){var xr=!gr;gr||(gr={});for(var Er=-1,Cr=hr.length;++Er<Cr;){var wr=hr[Er],Rr=void 0;Rr===void 0&&(Rr=mr[wr]),xr?baseAssignValue(gr,wr,Rr):assignValue(gr,wr,Rr)}return gr}function baseTimes(mr,hr){for(var gr=-1,vr=Array(mr);++gr<mr;)vr[gr]=hr(gr);return vr}var argsTag$2="[object Arguments]";function baseIsArguments(mr){return isObjectLike$1(mr)&&baseGetTag(mr)==argsTag$2}var objectProto$8=Object.prototype,hasOwnProperty$6=objectProto$8.hasOwnProperty,propertyIsEnumerable$1=objectProto$8.propertyIsEnumerable,isArguments$1=baseIsArguments(function(){return arguments}())?baseIsArguments:function(mr){return isObjectLike$1(mr)&&hasOwnProperty$6.call(mr,"callee")&&!propertyIsEnumerable$1.call(mr,"callee")},isArray$2=Array.isArray;function stubFalse(){return!1}var freeExports$2=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$2=freeExports$2&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$2=freeModule$2&&freeModule$2.exports===freeExports$2,Buffer$2=moduleExports$2?root$2.Buffer:void 0,nativeIsBuffer=Buffer$2?Buffer$2.isBuffer:void 0,isBuffer$1=nativeIsBuffer||stubFalse,MAX_SAFE_INTEGER$2=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(mr,hr){var gr=typeof mr;return hr=hr??MAX_SAFE_INTEGER$2,!!hr&&(gr=="number"||gr!="symbol"&&reIsUint.test(mr))&&mr>-1&&mr%1==0&&mr<hr}var MAX_SAFE_INTEGER$1=9007199254740991;function isLength(mr){return typeof mr=="number"&&mr>-1&&mr%1==0&&mr<=MAX_SAFE_INTEGER$1}var argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag$2="[object Boolean]",dateTag$2="[object Date]",errorTag$1="[object Error]",funcTag$1="[object Function]",mapTag$5="[object Map]",numberTag$2="[object Number]",objectTag$2="[object Object]",regexpTag$2="[object RegExp]",setTag$5="[object Set]",stringTag$2="[object String]",weakMapTag$2="[object WeakMap]",arrayBufferTag$2="[object ArrayBuffer]",dataViewTag$3="[object DataView]",float32Tag$2="[object Float32Array]",float64Tag$2="[object Float64Array]",int8Tag$2="[object Int8Array]",int16Tag$2="[object Int16Array]",int32Tag$2="[object Int32Array]",uint8Tag$2="[object Uint8Array]",uint8ClampedTag$2="[object Uint8ClampedArray]",uint16Tag$2="[object Uint16Array]",uint32Tag$2="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag$2]=typedArrayTags[float64Tag$2]=typedArrayTags[int8Tag$2]=typedArrayTags[int16Tag$2]=typedArrayTags[int32Tag$2]=typedArrayTags[uint8Tag$2]=typedArrayTags[uint8ClampedTag$2]=typedArrayTags[uint16Tag$2]=typedArrayTags[uint32Tag$2]=!0;typedArrayTags[argsTag$1]=typedArrayTags[arrayTag$1]=typedArrayTags[arrayBufferTag$2]=typedArrayTags[boolTag$2]=typedArrayTags[dataViewTag$3]=typedArrayTags[dateTag$2]=typedArrayTags[errorTag$1]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag$5]=typedArrayTags[numberTag$2]=typedArrayTags[objectTag$2]=typedArrayTags[regexpTag$2]=typedArrayTags[setTag$5]=typedArrayTags[stringTag$2]=typedArrayTags[weakMapTag$2]=!1;function baseIsTypedArray(mr){return isObjectLike$1(mr)&&isLength(mr.length)&&!!typedArrayTags[baseGetTag(mr)]}function baseUnary(mr){return function(hr){return mr(hr)}}var freeExports$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,freeProcess=moduleExports$1&&freeGlobal$1.process,nodeUtil=function(){try{var mr=freeModule$1&&freeModule$1.require&&freeModule$1.require("util").types;return mr||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch{}}(),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray$1=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray,objectProto$7=Object.prototype,hasOwnProperty$5=objectProto$7.hasOwnProperty;function arrayLikeKeys(mr,hr){var gr=isArray$2(mr),vr=!gr&&isArguments$1(mr),xr=!gr&&!vr&&isBuffer$1(mr),Er=!gr&&!vr&&!xr&&isTypedArray$1(mr),Cr=gr||vr||xr||Er,wr=Cr?baseTimes(mr.length,String):[],Rr=wr.length;for(var kr in mr)(hr||hasOwnProperty$5.call(mr,kr))&&!(Cr&&(kr=="length"||xr&&(kr=="offset"||kr=="parent")||Er&&(kr=="buffer"||kr=="byteLength"||kr=="byteOffset")||isIndex(kr,Rr)))&&wr.push(kr);return wr}var objectProto$6=Object.prototype;function isPrototype$1(mr){var hr=mr&&mr.constructor,gr=typeof hr=="function"&&hr.prototype||objectProto$6;return mr===gr}var nativeKeys=overArg(Object.keys,Object),objectProto$5=Object.prototype,hasOwnProperty$4=objectProto$5.hasOwnProperty;function baseKeys$1(mr){if(!isPrototype$1(mr))return nativeKeys(mr);var hr=[];for(var gr in Object(mr))hasOwnProperty$4.call(mr,gr)&&gr!="constructor"&&hr.push(gr);return hr}function isArrayLike$1(mr){return mr!=null&&isLength(mr.length)&&!isFunction$2(mr)}function keys(mr){return isArrayLike$1(mr)?arrayLikeKeys(mr):baseKeys$1(mr)}function baseAssign(mr,hr){return mr&&copyObject(hr,keys(hr),mr)}function nativeKeysIn(mr){var hr=[];if(mr!=null)for(var gr in Object(mr))hr.push(gr);return hr}var objectProto$4=Object.prototype,hasOwnProperty$3=objectProto$4.hasOwnProperty;function baseKeysIn(mr){if(!isObject$4(mr))return nativeKeysIn(mr);var hr=isPrototype$1(mr),gr=[];for(var vr in mr)vr=="constructor"&&(hr||!hasOwnProperty$3.call(mr,vr))||gr.push(vr);return gr}function keysIn(mr){return isArrayLike$1(mr)?arrayLikeKeys(mr,!0):baseKeysIn(mr)}function baseAssignIn(mr,hr){return mr&&copyObject(hr,keysIn(hr),mr)}var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,Buffer$1=moduleExports?root$2.Buffer:void 0,allocUnsafe=Buffer$1?Buffer$1.allocUnsafe:void 0;function cloneBuffer(mr,hr){if(hr)return mr.slice();var gr=mr.length,vr=allocUnsafe?allocUnsafe(gr):new mr.constructor(gr);return mr.copy(vr),vr}function copyArray(mr,hr){var gr=-1,vr=mr.length;for(hr||(hr=Array(vr));++gr<vr;)hr[gr]=mr[gr];return hr}function arrayFilter(mr,hr){for(var gr=-1,vr=mr==null?0:mr.length,xr=0,Er=[];++gr<vr;){var Cr=mr[gr];hr(Cr,gr,mr)&&(Er[xr++]=Cr)}return Er}function stubArray(){return[]}var objectProto$3=Object.prototype,propertyIsEnumerable=objectProto$3.propertyIsEnumerable,nativeGetSymbols$1=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols$1?function(mr){return mr==null?[]:(mr=Object(mr),arrayFilter(nativeGetSymbols$1(mr),function(hr){return propertyIsEnumerable.call(mr,hr)}))}:stubArray;function copySymbols(mr,hr){return copyObject(mr,getSymbols(mr),hr)}function arrayPush(mr,hr){for(var gr=-1,vr=hr.length,xr=mr.length;++gr<vr;)mr[xr+gr]=hr[gr];return mr}var nativeGetSymbols=Object.getOwnPropertySymbols,getSymbolsIn=nativeGetSymbols?function(mr){for(var hr=[];mr;)arrayPush(hr,getSymbols(mr)),mr=getPrototype(mr);return hr}:stubArray;function copySymbolsIn(mr,hr){return copyObject(mr,getSymbolsIn(mr),hr)}function baseGetAllKeys(mr,hr,gr){var vr=hr(mr);return isArray$2(mr)?vr:arrayPush(vr,gr(mr))}function getAllKeys(mr){return baseGetAllKeys(mr,keys,getSymbols)}function getAllKeysIn(mr){return baseGetAllKeys(mr,keysIn,getSymbolsIn)}var DataView$1=getNative(root$2,"DataView"),Promise$1=getNative(root$2,"Promise"),Set$1=getNative(root$2,"Set"),WeakMap$1=getNative(root$2,"WeakMap"),mapTag$4="[object Map]",objectTag$1="[object Object]",promiseTag="[object Promise]",setTag$4="[object Set]",weakMapTag$1="[object WeakMap]",dataViewTag$2="[object DataView]",dataViewCtorString=toSource(DataView$1),mapCtorString=toSource(Map$1),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set$1),weakMapCtorString=toSource(WeakMap$1),getTag$1=baseGetTag;(DataView$1&&getTag$1(new DataView$1(new ArrayBuffer(1)))!=dataViewTag$2||Map$1&&getTag$1(new Map$1)!=mapTag$4||Promise$1&&getTag$1(Promise$1.resolve())!=promiseTag||Set$1&&getTag$1(new Set$1)!=setTag$4||WeakMap$1&&getTag$1(new WeakMap$1)!=weakMapTag$1)&&(getTag$1=function(mr){var hr=baseGetTag(mr),gr=hr==objectTag$1?mr.constructor:void 0,vr=gr?toSource(gr):"";if(vr)switch(vr){case dataViewCtorString:return dataViewTag$2;case mapCtorString:return mapTag$4;case promiseCtorString:return promiseTag;case setCtorString:return setTag$4;case weakMapCtorString:return weakMapTag$1}return hr});var objectProto$2=Object.prototype,hasOwnProperty$2=objectProto$2.hasOwnProperty;function initCloneArray(mr){var hr=mr.length,gr=new mr.constructor(hr);return hr&&typeof mr[0]=="string"&&hasOwnProperty$2.call(mr,"index")&&(gr.index=mr.index,gr.input=mr.input),gr}var Uint8Array$1=root$2.Uint8Array;function cloneArrayBuffer(mr){var hr=new mr.constructor(mr.byteLength);return new Uint8Array$1(hr).set(new Uint8Array$1(mr)),hr}function cloneDataView(mr,hr){var gr=hr?cloneArrayBuffer(mr.buffer):mr.buffer;return new mr.constructor(gr,mr.byteOffset,mr.byteLength)}var reFlags=/\w*$/;function cloneRegExp(mr){var hr=new mr.constructor(mr.source,reFlags.exec(mr));return hr.lastIndex=mr.lastIndex,hr}var symbolProto$2=Symbol$2?Symbol$2.prototype:void 0,symbolValueOf=symbolProto$2?symbolProto$2.valueOf:void 0;function cloneSymbol(mr){return symbolValueOf?Object(symbolValueOf.call(mr)):{}}function cloneTypedArray(mr,hr){var gr=hr?cloneArrayBuffer(mr.buffer):mr.buffer;return new mr.constructor(gr,mr.byteOffset,mr.length)}var boolTag$1="[object Boolean]",dateTag$1="[object Date]",mapTag$3="[object Map]",numberTag$1="[object Number]",regexpTag$1="[object RegExp]",setTag$3="[object Set]",stringTag$1="[object String]",symbolTag$3="[object Symbol]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag$1="[object Float32Array]",float64Tag$1="[object Float64Array]",int8Tag$1="[object Int8Array]",int16Tag$1="[object Int16Array]",int32Tag$1="[object Int32Array]",uint8Tag$1="[object Uint8Array]",uint8ClampedTag$1="[object Uint8ClampedArray]",uint16Tag$1="[object Uint16Array]",uint32Tag$1="[object Uint32Array]";function initCloneByTag(mr,hr,gr){var vr=mr.constructor;switch(hr){case arrayBufferTag$1:return cloneArrayBuffer(mr);case boolTag$1:case dateTag$1:return new vr(+mr);case dataViewTag$1:return cloneDataView(mr,gr);case float32Tag$1:case float64Tag$1:case int8Tag$1:case int16Tag$1:case int32Tag$1:case uint8Tag$1:case uint8ClampedTag$1:case uint16Tag$1:case uint32Tag$1:return cloneTypedArray(mr,gr);case mapTag$3:return new vr;case numberTag$1:case stringTag$1:return new vr(mr);case regexpTag$1:return cloneRegExp(mr);case setTag$3:return new vr;case symbolTag$3:return cloneSymbol(mr)}}var objectCreate=Object.create,baseCreate=function(){function mr(){}return function(hr){if(!isObject$4(hr))return{};if(objectCreate)return objectCreate(hr);mr.prototype=hr;var gr=new mr;return mr.prototype=void 0,gr}}();function initCloneObject(mr){return typeof mr.constructor=="function"&&!isPrototype$1(mr)?baseCreate(getPrototype(mr)):{}}var mapTag$2="[object Map]";function baseIsMap(mr){return isObjectLike$1(mr)&&getTag$1(mr)==mapTag$2}var nodeIsMap=nodeUtil&&nodeUtil.isMap,isMap=nodeIsMap?baseUnary(nodeIsMap):baseIsMap,setTag$2="[object Set]";function baseIsSet(mr){return isObjectLike$1(mr)&&getTag$1(mr)==setTag$2}var nodeIsSet=nodeUtil&&nodeUtil.isSet,isSet=nodeIsSet?baseUnary(nodeIsSet):baseIsSet,CLONE_DEEP_FLAG=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG$1=4,argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag$1="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag$1="[object Set]",stringTag="[object String]",symbolTag$2="[object Symbol]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",cloneableTags={};cloneableTags[argsTag]=cloneableTags[arrayTag]=cloneableTags[arrayBufferTag]=cloneableTags[dataViewTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag$1]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[setTag$1]=cloneableTags[stringTag]=cloneableTags[symbolTag$2]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0;cloneableTags[errorTag]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=!1;function baseClone(mr,hr,gr,vr,xr,Er){var Cr,wr=hr&CLONE_DEEP_FLAG,Rr=hr&CLONE_FLAT_FLAG,kr=hr&CLONE_SYMBOLS_FLAG$1;if(Cr!==void 0)return Cr;if(!isObject$4(mr))return mr;var Dr=isArray$2(mr);if(Dr){if(Cr=initCloneArray(mr),!wr)return copyArray(mr,Cr)}else{var Br=getTag$1(mr),Hr=Br==funcTag||Br==genTag;if(isBuffer$1(mr))return cloneBuffer(mr,wr);if(Br==objectTag||Br==argsTag||Hr&&!xr){if(Cr=Rr||Hr?{}:initCloneObject(mr),!wr)return Rr?copySymbolsIn(mr,baseAssignIn(Cr,mr)):copySymbols(mr,baseAssign(Cr,mr))}else{if(!cloneableTags[Br])return xr?mr:{};Cr=initCloneByTag(mr,Br,wr)}}Er||(Er=new Stack);var Gr=Er.get(mr);if(Gr)return Gr;Er.set(mr,Cr),isSet(mr)?mr.forEach(function(Qr){Cr.add(baseClone(Qr,hr,gr,Qr,mr,Er))}):isMap(mr)&&mr.forEach(function(Qr,sn){Cr.set(sn,baseClone(Qr,hr,gr,sn,mr,Er))});var qr=kr?Rr?getAllKeysIn:getAllKeys:Rr?keysIn:keys,zr=Dr?void 0:qr(mr);return arrayEach(zr||mr,function(Qr,sn){zr&&(sn=Qr,Qr=mr[sn]),assignValue(Cr,sn,baseClone(Qr,hr,gr,sn,mr,Er))}),Cr}var CLONE_SYMBOLS_FLAG=4;function clone(mr){return baseClone(mr,CLONE_SYMBOLS_FLAG)}function arrayMap(mr,hr){for(var gr=-1,vr=mr==null?0:mr.length,xr=Array(vr);++gr<vr;)xr[gr]=hr(mr[gr],gr,mr);return xr}var symbolTag$1="[object Symbol]";function isSymbol$1(mr){return typeof mr=="symbol"||isObjectLike$1(mr)&&baseGetTag(mr)==symbolTag$1}var FUNC_ERROR_TEXT$2="Expected a function";function memoize$1(mr,hr){if(typeof mr!="function"||hr!=null&&typeof hr!="function")throw new TypeError(FUNC_ERROR_TEXT$2);var gr=function(){var vr=arguments,xr=hr?hr.apply(this,vr):vr[0],Er=gr.cache;if(Er.has(xr))return Er.get(xr);var Cr=mr.apply(this,vr);return gr.cache=Er.set(xr,Cr)||Er,Cr};return gr.cache=new(memoize$1.Cache||MapCache),gr}memoize$1.Cache=MapCache;var MAX_MEMOIZE_SIZE=500;function memoizeCapped(mr){var hr=memoize$1(mr,function(vr){return gr.size===MAX_MEMOIZE_SIZE&&gr.clear(),vr}),gr=hr.cache;return hr}var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped(function(mr){var hr=[];return mr.charCodeAt(0)===46&&hr.push(""),mr.replace(rePropName,function(gr,vr,xr,Er){hr.push(xr?Er.replace(reEscapeChar,"$1"):vr||gr)}),hr}),INFINITY$2=1/0;function toKey(mr){if(typeof mr=="string"||isSymbol$1(mr))return mr;var hr=mr+"";return hr=="0"&&1/mr==-INFINITY$2?"-0":hr}var INFINITY$1=1/0,symbolProto$1=Symbol$2?Symbol$2.prototype:void 0,symbolToString$1=symbolProto$1?symbolProto$1.toString:void 0;function baseToString$1(mr){if(typeof mr=="string")return mr;if(isArray$2(mr))return arrayMap(mr,baseToString$1)+"";if(isSymbol$1(mr))return symbolToString$1?symbolToString$1.call(mr):"";var hr=mr+"";return hr=="0"&&1/mr==-INFINITY$1?"-0":hr}function toString$1(mr){return mr==null?"":baseToString$1(mr)}function toPath(mr){return isArray$2(mr)?arrayMap(mr,toKey):isSymbol$1(mr)?[mr]:copyArray(stringToPath(toString$1(mr)))}function _extends$1(){return _extends$1=Object.assign||function(mr){for(var hr=1;hr<arguments.length;hr++){var gr=arguments[hr];for(var vr in gr)Object.prototype.hasOwnProperty.call(gr,vr)&&(mr[vr]=gr[vr])}return mr},_extends$1.apply(this,arguments)}function _objectWithoutPropertiesLoose(mr,hr){if(mr==null)return{};var gr={},vr=Object.keys(mr),xr,Er;for(Er=0;Er<vr.length;Er++)xr=vr[Er],!(hr.indexOf(xr)>=0)&&(gr[xr]=mr[xr]);return gr}var FormikContext=reactExports.createContext(void 0);FormikContext.displayName="FormikContext";var FormikProvider=FormikContext.Provider;FormikContext.Consumer;function useFormikContext(){var mr=reactExports.useContext(FormikContext);return mr}var isFunction$1=function(hr){return typeof hr=="function"},isObject$3=function(hr){return hr!==null&&typeof hr=="object"},isInteger=function(hr){return String(Math.floor(Number(hr)))===hr},isString=function(hr){return Object.prototype.toString.call(hr)==="[object String]"},isEmptyChildren=function(hr){return reactExports.Children.count(hr)===0},isPromise$1=function(hr){return isObject$3(hr)&&isFunction$1(hr.then)};function getIn(mr,hr,gr,vr){vr===void 0&&(vr=0);for(var xr=toPath(hr);mr&&vr<xr.length;)mr=mr[xr[vr++]];return vr!==xr.length&&!mr||mr===void 0?gr:mr}function setIn(mr,hr,gr){for(var vr=clone(mr),xr=vr,Er=0,Cr=toPath(hr);Er<Cr.length-1;Er++){var wr=Cr[Er],Rr=getIn(mr,Cr.slice(0,Er+1));if(Rr&&(isObject$3(Rr)||Array.isArray(Rr)))xr=xr[wr]=clone(Rr);else{var kr=Cr[Er+1];xr=xr[wr]=isInteger(kr)&&Number(kr)>=0?[]:{}}}return(Er===0?mr:xr)[Cr[Er]]===gr?mr:(gr===void 0?delete xr[Cr[Er]]:xr[Cr[Er]]=gr,Er===0&&gr===void 0&&delete vr[Cr[Er]],vr)}function setNestedObjectValues(mr,hr,gr,vr){gr===void 0&&(gr=new WeakMap),vr===void 0&&(vr={});for(var xr=0,Er=Object.keys(mr);xr<Er.length;xr++){var Cr=Er[xr],wr=mr[Cr];isObject$3(wr)?gr.get(wr)||(gr.set(wr,!0),vr[Cr]=Array.isArray(wr)?[]:{},setNestedObjectValues(wr,hr,gr,vr[Cr])):vr[Cr]=hr}return vr}function formikReducer(mr,hr){switch(hr.type){case"SET_VALUES":return _extends$1({},mr,{values:hr.payload});case"SET_TOUCHED":return _extends$1({},mr,{touched:hr.payload});case"SET_ERRORS":return isEqual$1(mr.errors,hr.payload)?mr:_extends$1({},mr,{errors:hr.payload});case"SET_STATUS":return _extends$1({},mr,{status:hr.payload});case"SET_ISSUBMITTING":return _extends$1({},mr,{isSubmitting:hr.payload});case"SET_ISVALIDATING":return _extends$1({},mr,{isValidating:hr.payload});case"SET_FIELD_VALUE":return _extends$1({},mr,{values:setIn(mr.values,hr.payload.field,hr.payload.value)});case"SET_FIELD_TOUCHED":return _extends$1({},mr,{touched:setIn(mr.touched,hr.payload.field,hr.payload.value)});case"SET_FIELD_ERROR":return _extends$1({},mr,{errors:setIn(mr.errors,hr.payload.field,hr.payload.value)});case"RESET_FORM":return _extends$1({},mr,hr.payload);case"SET_FORMIK_STATE":return hr.payload(mr);case"SUBMIT_ATTEMPT":return _extends$1({},mr,{touched:setNestedObjectValues(mr.values,!0),isSubmitting:!0,submitCount:mr.submitCount+1});case"SUBMIT_FAILURE":return _extends$1({},mr,{isSubmitting:!1});case"SUBMIT_SUCCESS":return _extends$1({},mr,{isSubmitting:!1});default:return mr}}var emptyErrors={},emptyTouched={};function useFormik(mr){var hr=mr.validateOnChange,gr=hr===void 0?!0:hr,vr=mr.validateOnBlur,xr=vr===void 0?!0:vr,Er=mr.validateOnMount,Cr=Er===void 0?!1:Er,wr=mr.isInitialValid,Rr=mr.enableReinitialize,kr=Rr===void 0?!1:Rr,Dr=mr.onSubmit,Br=_objectWithoutPropertiesLoose(mr,["validateOnChange","validateOnBlur","validateOnMount","isInitialValid","enableReinitialize","onSubmit"]),Hr=_extends$1({validateOnChange:gr,validateOnBlur:xr,validateOnMount:Cr,onSubmit:Dr},Br),Gr=reactExports.useRef(Hr.initialValues),qr=reactExports.useRef(Hr.initialErrors||emptyErrors),zr=reactExports.useRef(Hr.initialTouched||emptyTouched),Qr=reactExports.useRef(Hr.initialStatus),sn=reactExports.useRef(!1),hn=reactExports.useRef({});reactExports.useEffect(function(){return sn.current=!0,function(){sn.current=!1}},[]);var vn=reactExports.useState(0),yn=vn[1],gn=reactExports.useRef({values:Hr.initialValues,errors:Hr.initialErrors||emptyErrors,touched:Hr.initialTouched||emptyTouched,status:Hr.initialStatus,isSubmitting:!1,isValidating:!1,submitCount:0}),bn=gn.current,xn=reactExports.useCallback(function(Li){var es=gn.current;gn.current=formikReducer(es,Li),es!==gn.current&&yn(function(os){return os+1})},[]),$n=reactExports.useCallback(function(Li,es){return new Promise(function(os,ds){var Is=Hr.validate(Li,es);Is==null?os(emptyErrors):isPromise$1(Is)?Is.then(function(ws){os(ws||emptyErrors)},function(ws){ds(ws)}):os(Is)})},[Hr.validate]),Sn=reactExports.useCallback(function(Li,es){var os=Hr.validationSchema,ds=isFunction$1(os)?os(es):os,Is=es&&ds.validateAt?ds.validateAt(es,Li):validateYupSchema(Li,ds);return new Promise(function(ws,Ns){Is.then(function(){ws(emptyErrors)},function(go){go.name==="ValidationError"?ws(yupToFormErrors(go)):Ns(go)})})},[Hr.validationSchema]),Cn=reactExports.useCallback(function(Li,es){return new Promise(function(os){return os(hn.current[Li].validate(es))})},[]),Rn=reactExports.useCallback(function(Li){var es=Object.keys(hn.current).filter(function(ds){return isFunction$1(hn.current[ds].validate)}),os=es.length>0?es.map(function(ds){return Cn(ds,getIn(Li,ds))}):[Promise.resolve("DO_NOT_DELETE_YOU_WILL_BE_FIRED")];return Promise.all(os).then(function(ds){return ds.reduce(function(Is,ws,Ns){return ws==="DO_NOT_DELETE_YOU_WILL_BE_FIRED"||ws&&(Is=setIn(Is,es[Ns],ws)),Is},{})})},[Cn]),Bn=reactExports.useCallback(function(Li){return Promise.all([Rn(Li),Hr.validationSchema?Sn(Li):{},Hr.validate?$n(Li):{}]).then(function(es){var os=es[0],ds=es[1],Is=es[2],ws=deepmerge_1.all([os,ds,Is],{arrayMerge});return ws})},[Hr.validate,Hr.validationSchema,Rn,$n,Sn]),Fn=useEventCallback(function(Li){return Li===void 0&&(Li=bn.values),xn({type:"SET_ISVALIDATING",payload:!0}),Bn(Li).then(function(es){return sn.current&&(xn({type:"SET_ISVALIDATING",payload:!1}),xn({type:"SET_ERRORS",payload:es})),es})});reactExports.useEffect(function(){Cr&&sn.current===!0&&isEqual$1(Gr.current,Hr.initialValues)&&Fn(Gr.current)},[Cr,Fn]);var Hn=reactExports.useCallback(function(Li){var es=Li&&Li.values?Li.values:Gr.current,os=Li&&Li.errors?Li.errors:qr.current?qr.current:Hr.initialErrors||{},ds=Li&&Li.touched?Li.touched:zr.current?zr.current:Hr.initialTouched||{},Is=Li&&Li.status?Li.status:Qr.current?Qr.current:Hr.initialStatus;Gr.current=es,qr.current=os,zr.current=ds,Qr.current=Is;var ws=function(){xn({type:"RESET_FORM",payload:{isSubmitting:!!Li&&!!Li.isSubmitting,errors:os,touched:ds,status:Is,values:es,isValidating:!!Li&&!!Li.isValidating,submitCount:Li&&Li.submitCount&&typeof Li.submitCount=="number"?Li.submitCount:0}})};if(Hr.onReset){var Ns=Hr.onReset(bn.values,Pi);isPromise$1(Ns)?Ns.then(ws):ws()}else ws()},[Hr.initialErrors,Hr.initialStatus,Hr.initialTouched,Hr.onReset]);reactExports.useEffect(function(){sn.current===!0&&!isEqual$1(Gr.current,Hr.initialValues)&&kr&&(Gr.current=Hr.initialValues,Hn(),Cr&&Fn(Gr.current))},[kr,Hr.initialValues,Hn,Cr,Fn]),reactExports.useEffect(function(){kr&&sn.current===!0&&!isEqual$1(qr.current,Hr.initialErrors)&&(qr.current=Hr.initialErrors||emptyErrors,xn({type:"SET_ERRORS",payload:Hr.initialErrors||emptyErrors}))},[kr,Hr.initialErrors]),reactExports.useEffect(function(){kr&&sn.current===!0&&!isEqual$1(zr.current,Hr.initialTouched)&&(zr.current=Hr.initialTouched||emptyTouched,xn({type:"SET_TOUCHED",payload:Hr.initialTouched||emptyTouched}))},[kr,Hr.initialTouched]),reactExports.useEffect(function(){kr&&sn.current===!0&&!isEqual$1(Qr.current,Hr.initialStatus)&&(Qr.current=Hr.initialStatus,xn({type:"SET_STATUS",payload:Hr.initialStatus}))},[kr,Hr.initialStatus,Hr.initialTouched]);var Gn=useEventCallback(function(Li){if(hn.current[Li]&&isFunction$1(hn.current[Li].validate)){var es=getIn(bn.values,Li),os=hn.current[Li].validate(es);return isPromise$1(os)?(xn({type:"SET_ISVALIDATING",payload:!0}),os.then(function(ds){return ds}).then(function(ds){xn({type:"SET_FIELD_ERROR",payload:{field:Li,value:ds}}),xn({type:"SET_ISVALIDATING",payload:!1})})):(xn({type:"SET_FIELD_ERROR",payload:{field:Li,value:os}}),Promise.resolve(os))}else if(Hr.validationSchema)return xn({type:"SET_ISVALIDATING",payload:!0}),Sn(bn.values,Li).then(function(ds){return ds}).then(function(ds){xn({type:"SET_FIELD_ERROR",payload:{field:Li,value:getIn(ds,Li)}}),xn({type:"SET_ISVALIDATING",payload:!1})});return Promise.resolve()}),qn=reactExports.useCallback(function(Li,es){var os=es.validate;hn.current[Li]={validate:os}},[]),On=reactExports.useCallback(function(Li){delete hn.current[Li]},[]),wn=useEventCallback(function(Li,es){xn({type:"SET_TOUCHED",payload:Li});var os=es===void 0?xr:es;return os?Fn(bn.values):Promise.resolve()}),_n=reactExports.useCallback(function(Li){xn({type:"SET_ERRORS",payload:Li})},[]),Tn=useEventCallback(function(Li,es){var os=isFunction$1(Li)?Li(bn.values):Li;xn({type:"SET_VALUES",payload:os});var ds=es===void 0?gr:es;return ds?Fn(os):Promise.resolve()}),Mn=reactExports.useCallback(function(Li,es){xn({type:"SET_FIELD_ERROR",payload:{field:Li,value:es}})},[]),Ln=useEventCallback(function(Li,es,os){xn({type:"SET_FIELD_VALUE",payload:{field:Li,value:es}});var ds=os===void 0?gr:os;return ds?Fn(setIn(bn.values,Li,es)):Promise.resolve()}),jn=reactExports.useCallback(function(Li,es){var os=es,ds=Li,Is;if(!isString(Li)){Li.persist&&Li.persist();var ws=Li.target?Li.target:Li.currentTarget,Ns=ws.type,go=ws.name,vo=ws.id,ho=ws.value,al=ws.checked,ro=ws.outerHTML,ts=ws.options,Wi=ws.multiple;os=es||go||vo,ds=/number|range/.test(Ns)?(Is=parseFloat(ho),isNaN(Is)?"":Is):/checkbox/.test(Ns)?getValueForCheckbox(getIn(bn.values,os),al,ho):ts&&Wi?getSelectedValues(ts):ho}os&&Ln(os,ds)},[Ln,bn.values]),Kn=useEventCallback(function(Li){if(isString(Li))return function(es){return jn(es,Li)};jn(Li)}),Nn=useEventCallback(function(Li,es,os){es===void 0&&(es=!0),xn({type:"SET_FIELD_TOUCHED",payload:{field:Li,value:es}});var ds=os===void 0?xr:os;return ds?Fn(bn.values):Promise.resolve()}),An=reactExports.useCallback(function(Li,es){Li.persist&&Li.persist();var os=Li.target,ds=os.name,Is=os.id,ws=os.outerHTML,Ns=es||ds||Is;Nn(Ns,!0)},[Nn]),kn=useEventCallback(function(Li){if(isString(Li))return function(es){return An(es,Li)};An(Li)}),Dn=reactExports.useCallback(function(Li){isFunction$1(Li)?xn({type:"SET_FORMIK_STATE",payload:Li}):xn({type:"SET_FORMIK_STATE",payload:function(){return Li}})},[]),Vn=reactExports.useCallback(function(Li){xn({type:"SET_STATUS",payload:Li})},[]),zn=reactExports.useCallback(function(Li){xn({type:"SET_ISSUBMITTING",payload:Li})},[]),Xn=useEventCallback(function(){return xn({type:"SUBMIT_ATTEMPT"}),Fn().then(function(Li){var es=Li instanceof Error,os=!es&&Object.keys(Li).length===0;if(os){var ds;try{if(ds=Ya(),ds===void 0)return}catch(Is){throw Is}return Promise.resolve(ds).then(function(Is){return sn.current&&xn({type:"SUBMIT_SUCCESS"}),Is}).catch(function(Is){if(sn.current)throw xn({type:"SUBMIT_FAILURE"}),Is})}else if(sn.current&&(xn({type:"SUBMIT_FAILURE"}),es))throw Li})}),Zn=useEventCallback(function(Li){Li&&Li.preventDefault&&isFunction$1(Li.preventDefault)&&Li.preventDefault(),Li&&Li.stopPropagation&&isFunction$1(Li.stopPropagation)&&Li.stopPropagation(),Xn().catch(function(es){console.warn("Warning: An unhandled error was caught from submitForm()",es)})}),Pi={resetForm:Hn,validateForm:Fn,validateField:Gn,setErrors:_n,setFieldError:Mn,setFieldTouched:Nn,setFieldValue:Ln,setStatus:Vn,setSubmitting:zn,setTouched:wn,setValues:Tn,setFormikState:Dn,submitForm:Xn},Ya=useEventCallback(function(){return Dr(bn.values,Pi)}),Bi=useEventCallback(function(Li){Li&&Li.preventDefault&&isFunction$1(Li.preventDefault)&&Li.preventDefault(),Li&&Li.stopPropagation&&isFunction$1(Li.stopPropagation)&&Li.stopPropagation(),Hn()}),zi=reactExports.useCallback(function(Li){return{value:getIn(bn.values,Li),error:getIn(bn.errors,Li),touched:!!getIn(bn.touched,Li),initialValue:getIn(Gr.current,Li),initialTouched:!!getIn(zr.current,Li),initialError:getIn(qr.current,Li)}},[bn.errors,bn.touched,bn.values]),Xi=reactExports.useCallback(function(Li){return{setValue:function(os,ds){return Ln(Li,os,ds)},setTouched:function(os,ds){return Nn(Li,os,ds)},setError:function(os){return Mn(Li,os)}}},[Ln,Nn,Mn]),Ji=reactExports.useCallback(function(Li){var es=isObject$3(Li),os=es?Li.name:Li,ds=getIn(bn.values,os),Is={name:os,value:ds,onChange:Kn,onBlur:kn};if(es){var ws=Li.type,Ns=Li.value,go=Li.as,vo=Li.multiple;ws==="checkbox"?Ns===void 0?Is.checked=!!ds:(Is.checked=!!(Array.isArray(ds)&&~ds.indexOf(Ns)),Is.value=Ns):ws==="radio"?(Is.checked=ds===Ns,Is.value=Ns):go==="select"&&vo&&(Is.value=Is.value||[],Is.multiple=!0)}return Is},[kn,Kn,bn.values]),ns=reactExports.useMemo(function(){return!isEqual$1(Gr.current,bn.values)},[Gr.current,bn.values]),ps=reactExports.useMemo(function(){return typeof wr<"u"?ns?bn.errors&&Object.keys(bn.errors).length===0:wr!==!1&&isFunction$1(wr)?wr(Hr):wr:bn.errors&&Object.keys(bn.errors).length===0},[wr,ns,bn.errors,Hr]),ls=_extends$1({},bn,{initialValues:Gr.current,initialErrors:qr.current,initialTouched:zr.current,initialStatus:Qr.current,handleBlur:kn,handleChange:Kn,handleReset:Bi,handleSubmit:Zn,resetForm:Hn,setErrors:_n,setFormikState:Dn,setFieldTouched:Nn,setFieldValue:Ln,setFieldError:Mn,setStatus:Vn,setSubmitting:zn,setTouched:wn,setValues:Tn,submitForm:Xn,validateForm:Fn,validateField:Gn,isValid:ps,dirty:ns,unregisterField:On,registerField:qn,getFieldProps:Ji,getFieldMeta:zi,getFieldHelpers:Xi,validateOnBlur:xr,validateOnChange:gr,validateOnMount:Cr});return ls}function Formik(mr){var hr=useFormik(mr),gr=mr.component,vr=mr.children,xr=mr.render,Er=mr.innerRef;return reactExports.useImperativeHandle(Er,function(){return hr}),reactExports.createElement(FormikProvider,{value:hr},gr?reactExports.createElement(gr,hr):xr?xr(hr):vr?isFunction$1(vr)?vr(hr):isEmptyChildren(vr)?null:reactExports.Children.only(vr):null)}function warnAboutMissingIdentifier(mr){var hr=mr.htmlContent,gr=mr.documentationAnchorLink,vr=mr.handlerName;console.warn("Warning: Formik called `"+vr+"`, but you forgot to pass an `id` or `name` attribute to your input:\n    "+hr+`
    Formik cannot determine which value to update. For more info see https://formik.org/docs/api/formik#`+gr+`
  `)}function yupToFormErrors(mr){var hr={};if(mr.inner){if(mr.inner.length===0)return setIn(hr,mr.path,mr.message);for(var xr=mr.inner,gr=Array.isArray(xr),vr=0,xr=gr?xr:xr[Symbol.iterator]();;){var Er;if(gr){if(vr>=xr.length)break;Er=xr[vr++]}else{if(vr=xr.next(),vr.done)break;Er=vr.value}var Cr=Er;getIn(hr,Cr.path)||(hr=setIn(hr,Cr.path,Cr.message))}}return hr}function validateYupSchema(mr,hr,gr,vr){gr===void 0&&(gr=!1);var xr=prepareDataForValidation(mr);return hr[gr?"validateSync":"validate"](xr,{abortEarly:!1,context:xr})}function prepareDataForValidation(mr){var hr=Array.isArray(mr)?[]:{};for(var gr in mr)if(Object.prototype.hasOwnProperty.call(mr,gr)){var vr=String(gr);Array.isArray(mr[vr])===!0?hr[vr]=mr[vr].map(function(xr){return Array.isArray(xr)===!0||isPlainObject$1(xr)?prepareDataForValidation(xr):xr!==""?xr:void 0}):isPlainObject$1(mr[vr])?hr[vr]=prepareDataForValidation(mr[vr]):hr[vr]=mr[vr]!==""?mr[vr]:void 0}return hr}function arrayMerge(mr,hr,gr){var vr=mr.slice();return hr.forEach(function(Er,Cr){if(typeof vr[Cr]>"u"){var wr=gr.clone!==!1,Rr=wr&&gr.isMergeableObject(Er);vr[Cr]=Rr?deepmerge_1(Array.isArray(Er)?[]:{},Er,gr):Er}else gr.isMergeableObject(Er)?vr[Cr]=deepmerge_1(mr[Cr],Er,gr):mr.indexOf(Er)===-1&&vr.push(Er)}),vr}function getSelectedValues(mr){return Array.from(mr).filter(function(hr){return hr.selected}).map(function(hr){return hr.value})}function getValueForCheckbox(mr,hr,gr){if(typeof mr=="boolean")return!!hr;var vr=[],xr=!1,Er=-1;if(Array.isArray(mr))vr=mr,Er=mr.indexOf(gr),xr=Er>=0;else if(!gr||gr=="true"||gr=="false")return!!hr;return hr&&gr&&!xr?vr.concat(gr):xr?vr.slice(0,Er).concat(vr.slice(Er+1)):vr}var useIsomorphicLayoutEffect$1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function useEventCallback(mr){var hr=reactExports.useRef(mr);return useIsomorphicLayoutEffect$1(function(){hr.current=mr}),reactExports.useCallback(function(){for(var gr=arguments.length,vr=new Array(gr),xr=0;xr<gr;xr++)vr[xr]=arguments[xr];return hr.current.apply(void 0,vr)},[])}var Form$1=reactExports.forwardRef(function(mr,hr){var gr=mr.action,vr=_objectWithoutPropertiesLoose(mr,["action"]),xr=gr??"#",Er=useFormikContext(),Cr=Er.handleReset,wr=Er.handleSubmit;return reactExports.createElement("form",_extends$1({onSubmit:wr,ref:hr,onReset:Cr,action:xr},vr))});Form$1.displayName="Form";var root$1=_root,now$2=function(){return root$1.Date.now()},now_1=now$2,isObject$2=isObject_1,now$1=now_1,toNumber=toNumber_1,FUNC_ERROR_TEXT$1="Expected a function",nativeMax=Math.max,nativeMin=Math.min;function debounce$1(mr,hr,gr){var vr,xr,Er,Cr,wr,Rr,kr=0,Dr=!1,Br=!1,Hr=!0;if(typeof mr!="function")throw new TypeError(FUNC_ERROR_TEXT$1);hr=toNumber(hr)||0,isObject$2(gr)&&(Dr=!!gr.leading,Br="maxWait"in gr,Er=Br?nativeMax(toNumber(gr.maxWait)||0,hr):Er,Hr="trailing"in gr?!!gr.trailing:Hr);function Gr(bn){var xn=vr,$n=xr;return vr=xr=void 0,kr=bn,Cr=mr.apply($n,xn),Cr}function qr(bn){return kr=bn,wr=setTimeout(sn,hr),Dr?Gr(bn):Cr}function zr(bn){var xn=bn-Rr,$n=bn-kr,Sn=hr-xn;return Br?nativeMin(Sn,Er-$n):Sn}function Qr(bn){var xn=bn-Rr,$n=bn-kr;return Rr===void 0||xn>=hr||xn<0||Br&&$n>=Er}function sn(){var bn=now$1();if(Qr(bn))return hn(bn);wr=setTimeout(sn,zr(bn))}function hn(bn){return wr=void 0,Hr&&vr?Gr(bn):(vr=xr=void 0,Cr)}function vn(){wr!==void 0&&clearTimeout(wr),kr=0,vr=Rr=xr=wr=void 0}function yn(){return wr===void 0?Cr:hn(now$1())}function gn(){var bn=now$1(),xn=Qr(bn);if(vr=arguments,xr=this,Rr=bn,xn){if(wr===void 0)return qr(Rr);if(Br)return clearTimeout(wr),wr=setTimeout(sn,hr),Gr(Rr)}return wr===void 0&&(wr=setTimeout(sn,hr)),Cr}return gn.cancel=vn,gn.flush=yn,gn}var debounce_1=debounce$1;const debounce$2=getDefaultExportFromCjs$1(debounce_1);var debounce=debounce_1,isObject$1=isObject_1,FUNC_ERROR_TEXT="Expected a function";function throttle(mr,hr,gr){var vr=!0,xr=!0;if(typeof mr!="function")throw new TypeError(FUNC_ERROR_TEXT);return isObject$1(gr)&&(vr="leading"in gr?!!gr.leading:vr,xr="trailing"in gr?!!gr.trailing:xr),debounce(mr,hr,{leading:vr,maxWait:hr,trailing:xr})}var throttle_1=throttle;const throttle$1=getDefaultExportFromCjs$1(throttle_1),[Provider,useHistory]=createContext("History",{history:[],currentLocationIndex:0,currentLocation:"",canGoBack:!1,pushState:()=>{throw new Error("You must use the `HistoryProvider` to access the `pushState` function.")},goBack:()=>{throw new Error("You must use the `HistoryProvider` to access the `goBack` function.")}}),BackButton=reactExports.forwardRef(({disabled:mr,fallback:hr=""},gr)=>{const{formatMessage:vr}=useIntl$2(),xr=useNavigate(),Er=useHistory("BackButton",qr=>qr.canGoBack),Cr=useHistory("BackButton",qr=>qr.goBack),wr=useHistory("BackButton",qr=>qr.history),Rr=useHistory("BackButton",qr=>qr.currentLocationIndex),kr=hr!=="",Dr=mr||!Er&&!kr,Br=qr=>{qr.preventDefault(),Er?Cr():kr&&xr(hr)},Gr=(Er?wr.at(Rr-2):void 0)??hr;return jsxRuntimeExports.jsx(Link,{ref:gr,tag:NavLink,to:Gr,onClick:Br,disabled:Dr,"aria-disabled":Dr,startIcon:jsxRuntimeExports.jsx(ForwardRef$55,{}),children:vr({id:"global.back",defaultMessage:"Back"})})});new QueryClient({defaultOptions:{queries:{refetchOnWindowFocus:!1}}});const useClipboard=()=>({copy:reactExports.useCallback(async hr=>{try{if(typeof hr!="string"&&typeof hr!="number")throw new Error(`Cannot copy typeof ${typeof hr} to clipboard, must be a string or number`);if(hr==="")throw new Error("Cannot copy empty string to clipboard.");const gr=hr.toString();return await navigator.clipboard.writeText(gr),!0}catch{return!1}},[])});dt$3(Alert)`
  & > div:first-child {
    display: none;
  }

  & > button {
    display: none;
  }
`;dt$3(Typography)`
  word-break: break-all;
  color: ${({theme:mr})=>mr.colors.danger600};
`;const ActionLayout=({startActions:mr,endActions:hr})=>!mr&&!hr?null:jsxRuntimeExports.jsxs(Flex,{justifyContent:"space-between",alignItems:"flex-start",paddingBottom:4,paddingLeft:10,paddingRight:10,children:[jsxRuntimeExports.jsx(Flex,{gap:2,wrap:"wrap",children:mr}),jsxRuntimeExports.jsx(Flex,{gap:2,shrink:0,wrap:"wrap",children:hr})]}),ContentLayout=({children:mr})=>jsxRuntimeExports.jsx(Box,{paddingLeft:10,paddingRight:10,children:mr}),GridColSize={S:180,M:250},StyledGrid=dt$3(Box)`
  display: grid;
  grid-template-columns: repeat(
    auto-fit,
    minmax(${({$size:mr})=>`${GridColSize[mr]}px`}, 1fr)
  );
  grid-gap: ${({theme:mr})=>mr.spaces[4]};
`,GridLayout=({size:mr,children:hr})=>jsxRuntimeExports.jsx(StyledGrid,{$size:mr,children:hr}),BaseHeaderLayout=reactExports.forwardRef(({navigationAction:mr,primaryAction:hr,secondaryAction:gr,subtitle:vr,title:xr,sticky:Er,width:Cr,...wr},Rr)=>{const kr=typeof vr=="string";return Er?jsxRuntimeExports.jsx(Box,{paddingLeft:6,paddingRight:6,paddingTop:3,paddingBottom:3,position:"fixed",top:0,right:0,background:"neutral0",shadow:"tableShadow",width:`${Cr}px`,zIndex:1,"data-strapi-header-sticky":!0,children:jsxRuntimeExports.jsxs(Flex,{justifyContent:"space-between",children:[jsxRuntimeExports.jsxs(Flex,{children:[mr&&jsxRuntimeExports.jsx(Box,{paddingRight:3,children:mr}),jsxRuntimeExports.jsxs(Box,{children:[jsxRuntimeExports.jsx(Typography,{variant:"beta",tag:"h1",...wr,children:xr}),kr?jsxRuntimeExports.jsx(Typography,{variant:"pi",textColor:"neutral600",children:vr}):vr]}),gr?jsxRuntimeExports.jsx(Box,{paddingLeft:4,children:gr}):null]}),jsxRuntimeExports.jsx(Flex,{children:hr?jsxRuntimeExports.jsx(Box,{paddingLeft:2,children:hr}):void 0})]})}):jsxRuntimeExports.jsxs(Box,{ref:Rr,paddingLeft:10,paddingRight:10,paddingBottom:8,paddingTop:mr?6:8,background:"neutral100","data-strapi-header":!0,children:[mr?jsxRuntimeExports.jsx(Box,{paddingBottom:2,children:mr}):null,jsxRuntimeExports.jsxs(Flex,{justifyContent:"space-between",children:[jsxRuntimeExports.jsxs(Flex,{minWidth:0,children:[jsxRuntimeExports.jsx(Typography,{tag:"h1",variant:"alpha",...wr,children:xr}),gr?jsxRuntimeExports.jsx(Box,{paddingLeft:4,children:gr}):null]}),hr]}),kr?jsxRuntimeExports.jsx(Typography,{variant:"epsilon",textColor:"neutral600",tag:"p",children:vr}):vr]})}),HeaderLayout=mr=>{const hr=reactExports.useRef(null),[gr,vr]=reactExports.useState(null),[xr,Er]=useElementOnScreen({root:null,rootMargin:"0px",threshold:0});return useResizeObserver(xr,()=>{xr.current&&vr(xr.current.getBoundingClientRect())}),reactExports.useEffect(()=>{hr.current&&vr(hr.current.getBoundingClientRect())},[hr]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{style:{height:gr?.height},ref:xr,children:Er&&jsxRuntimeExports.jsx(BaseHeaderLayout,{ref:hr,...mr})}),!Er&&jsxRuntimeExports.jsx(BaseHeaderLayout,{...mr,sticky:!0,width:gr?.width})]})};HeaderLayout.displayName="HeaderLayout";const useElementOnScreen=mr=>{const hr=reactExports.useRef(null),[gr,vr]=reactExports.useState(!0),xr=([Er])=>{vr(Er.isIntersecting)};return reactExports.useEffect(()=>{const Er=hr.current,Cr=new IntersectionObserver(xr,mr);return Er&&Cr.observe(hr.current),()=>{Er&&Cr.disconnect()}},[hr,mr]),[hr,gr]},useResizeObserver=(mr,hr)=>{const gr=useCallbackRef(hr);reactExports.useLayoutEffect(()=>{const vr=new ResizeObserver(gr);return Array.isArray(mr)?mr.forEach(xr=>{xr.current&&vr.observe(xr.current)}):mr.current&&vr.observe(mr.current),()=>{vr.disconnect()}},[mr,gr])},GridContainer=dt$3(Box)`
  display: grid;
  grid-template-columns: ${({$hasSideNav:mr})=>mr?"auto 1fr":"1fr"};
`,OverflowingItem=dt$3(Box)`
  overflow-x: hidden;
`,RootLayout=({sideNav:mr,children:hr})=>jsxRuntimeExports.jsxs(GridContainer,{$hasSideNav:!!mr,children:[mr,jsxRuntimeExports.jsx(OverflowingItem,{paddingBottom:10,children:hr})]}),Layouts={Root:RootLayout,Header:HeaderLayout,BaseHeader:BaseHeaderLayout,Grid:GridLayout,Action:ActionLayout,Content:ContentLayout},ERR_MSG="The Form Component has not been initialised, ensure you are using this hook within a Form component",[FormProvider,useForm]=createContext("Form",{disabled:!1,errors:{},initialValues:{},isSubmitting:!1,modified:!1,addFieldRow:()=>{throw new Error(ERR_MSG)},moveFieldRow:()=>{throw new Error(ERR_MSG)},onChange:()=>{throw new Error(ERR_MSG)},removeFieldRow:()=>{throw new Error(ERR_MSG)},resetForm:()=>{throw new Error(ERR_MSG)},setErrors:()=>{throw new Error(ERR_MSG)},setValues:()=>{throw new Error(ERR_MSG)},setSubmitting:()=>{throw new Error(ERR_MSG)},validate:async()=>{throw new Error(ERR_MSG)},values:{}}),Form=reactExports.forwardRef(({disabled:mr=!1,method:hr,onSubmit:gr,initialErrors:vr,...xr},Er)=>{const Cr=reactExports.useRef(null),wr=reactExports.useRef(xr.initialValues??{}),[Rr,kr]=reactExports.useReducer(reducer,{errors:vr??{},isSubmitting:!1,values:xr.initialValues??{}});reactExports.useEffect(()=>{isEqual$3(wr.current,xr.initialValues)||(wr.current=xr.initialValues??{},kr({type:"SET_INITIAL_VALUES",payload:xr.initialValues??{}}))},[xr.initialValues]);const Dr=reactExports.useCallback(bn=>{kr({type:"SET_ERRORS",payload:bn})},[]),Br=reactExports.useCallback(bn=>{kr({type:"SET_VALUES",payload:bn})},[]);reactExports.useEffect(()=>{if(Object.keys(Rr.errors).length===0)return;const bn=setTimeout(()=>{const[xn]=Cr.current.querySelectorAll("[data-strapi-field-error]");if(xn){const $n=xn.getAttribute("id"),Sn=Cr.current.querySelector(`[aria-describedby="${$n}"]`);Sn&&Sn instanceof HTMLElement&&Sn.focus()}});return()=>clearTimeout(bn)},[Rr.errors]);const Hr=reactExports.useCallback(async(bn=!0,xn={})=>{if(Dr({}),!xr.validationSchema&&!xr.validate)return{data:Rr.values};try{let $n;if(xr.validationSchema)$n=await xr.validationSchema.validate(Rr.values,{abortEarly:!1});else if(xr.validate)$n=await xr.validate(Rr.values,xn);else throw new Error("No validation schema or validate function provided");return{data:$n}}catch($n){if(isErrorYupValidationError($n)){const Sn=getYupValidationErrors($n);return bn&&Dr(Sn),{errors:Sn}}else throw $n}},[xr,Dr,Rr.values]),Gr=async bn=>{if(bn.stopPropagation(),bn.preventDefault(),!!gr){kr({type:"SUBMIT_ATTEMPT"});try{const{data:xn,errors:$n}=await Hr();if($n)throw Dr($n),new Error("Submission failed");await gr(xn,{setErrors:Dr,setValues:Br,resetForm:vn}),kr({type:"SUBMIT_SUCCESS"})}catch(xn){if(kr({type:"SUBMIT_FAILURE"}),xn instanceof Error&&xn.message==="Submission failed")return}}},qr=reactExports.useMemo(()=>!isEqual$3(wr.current,Rr.values),[Rr.values]),zr=useCallbackRef((bn,xn)=>{if(typeof bn=="string"){kr({type:"SET_FIELD_VALUE",payload:{field:bn,value:xn}});return}const $n=bn.target||bn.currentTarget,{type:Sn,name:Cn,id:Rn,value:Bn,options:Fn,multiple:Hn}=$n,Gn=Cn||Rn;let qn;if(/number|range/.test(Sn)){const On=parseFloat(Bn);qn=isNaN(On)?"":On}else/checkbox/.test(Sn)?qn=!getIn$2(Rr.values,Gn):Fn&&Hn?qn=Array.from(Fn).filter(On=>On.selected).map(On=>On.value):Bn===""?qn=null:qn=Bn;Gn&&kr({type:"SET_FIELD_VALUE",payload:{field:Gn,value:qn}})}),Qr=reactExports.useCallback((bn,xn,$n)=>{kr({type:"ADD_FIELD_ROW",payload:{field:bn,value:xn,addAtIndex:$n}})},[]),sn=reactExports.useCallback((bn,xn)=>{kr({type:"REMOVE_FIELD_ROW",payload:{field:bn,removeAtIndex:xn}})},[]),hn=reactExports.useCallback((bn,xn,$n)=>{kr({type:"MOVE_FIELD_ROW",payload:{field:bn,fromIndex:xn,toIndex:$n}})},[]),vn=reactExports.useCallback(()=>{kr({type:"RESET_FORM",payload:{errors:{},isSubmitting:!1,values:wr.current}})},[]),yn=reactExports.useCallback(bn=>{kr({type:"SET_ISSUBMITTING",payload:bn})},[]),gn=useComposedRefs(Cr,Er);return jsxRuntimeExports.jsx("form",{ref:gn,method:hr,noValidate:!0,onSubmit:Gr,children:jsxRuntimeExports.jsx(FormProvider,{disabled:mr,onChange:zr,initialValues:wr.current,modified:qr,addFieldRow:Qr,moveFieldRow:hn,removeFieldRow:sn,resetForm:vn,setErrors:Dr,setValues:Br,setSubmitting:yn,validate:Hr,...Rr,children:typeof xr.children=="function"?xr.children({modified:qr,disabled:mr,onChange:zr,...Rr,setErrors:Dr,resetForm:vn}):xr.children})})}),isErrorYupValidationError=mr=>typeof mr=="object"&&mr!==null&&"name"in mr&&typeof mr.name=="string"&&mr.name==="ValidationError",getYupValidationErrors=mr=>{let hr={};if(mr.inner){if(mr.inner.length===0)return setIn$1(hr,mr.path,mr.message);for(const gr of mr.inner)getIn$2(hr,gr.path)||(hr=setIn$1(hr,gr.path,gr.message))}return hr},reducer=(mr,hr)=>fn(mr,gr=>{switch(hr.type){case"SET_INITIAL_VALUES":gr.values=hr.payload;break;case"SET_VALUES":gr.values=hr.payload;break;case"SUBMIT_ATTEMPT":gr.isSubmitting=!0;break;case"SUBMIT_FAILURE":gr.isSubmitting=!1;break;case"SUBMIT_SUCCESS":gr.isSubmitting=!1;break;case"SET_FIELD_VALUE":gr.values=setIn$1(mr.values,hr.payload.field,hr.payload.value);break;case"ADD_FIELD_ROW":{const vr=getIn$2(mr.values,hr.payload.field,[]);let xr=hr.payload.addAtIndex;xr===void 0?xr=vr.length:xr<0&&(xr=0);const[Er]=generateNKeysBetween(vr.at(xr-1)?.__temp_key__,vr.at(xr)?.__temp_key__,1);gr.values=setIn$1(mr.values,hr.payload.field,setIn$1(vr,xr.toString(),{...hr.payload.value,__temp_key__:Er}));break}case"MOVE_FIELD_ROW":{const{field:vr,fromIndex:xr,toIndex:Er}=hr.payload,Cr=[...getIn$2(mr.values,vr,[])],wr=Cr[xr],Rr=xr>Er?Cr[Er-1]?.__temp_key__:Cr[Er]?.__temp_key__,kr=xr>Er?Cr[Er]?.__temp_key__:Cr[Er+1]?.__temp_key__,[Dr]=generateNKeysBetween(Rr,kr,1);Cr.splice(xr,1),Cr.splice(Er,0,{...wr,__temp_key__:Dr}),gr.values=setIn$1(mr.values,vr,Cr);break}case"REMOVE_FIELD_ROW":{const vr=getIn$2(mr.values,hr.payload.field,[]);let xr=hr.payload.removeAtIndex;xr===void 0?xr=vr.length-1:xr<0&&(xr=0);const Er=setIn$1(vr,xr.toString(),void 0).filter(Cr=>Cr);gr.values=setIn$1(mr.values,hr.payload.field,Er.length>0?Er:[]);break}case"SET_ERRORS":isEqual$3(mr.errors,hr.payload)||(gr.errors=hr.payload);break;case"SET_ISSUBMITTING":gr.isSubmitting=hr.payload;break;case"RESET_FORM":gr.values=hr.payload.values,gr.errors=hr.payload.errors,gr.isSubmitting=hr.payload.isSubmitting;break}}),useField=mr=>{const{formatMessage:hr}=useIntl$2(),gr=useForm("useField",wr=>getIn$2(wr.initialValues,mr)),vr=useForm("useField",wr=>getIn$2(wr.values,mr)),xr=useForm("useField",wr=>wr.onChange),Er=useForm("useField",wr=>getIn$2(wr.errors,mr)),Cr=useForm("useField",wr=>{const Rr=getIn$2(wr.errors,mr);if(isErrorMessageDescriptor(Rr)){const{values:kr,...Dr}=Rr;return hr(Dr,kr)}return Rr});return{initialValue:gr,rawError:Er,error:isErrorMessageDescriptor(Cr)?hr({id:Cr.id,defaultMessage:Cr.defaultMessage},Cr.values):typeof Cr=="string"?Cr:void 0,onChange:xr,value:vr}},isErrorMessageDescriptor=mr=>typeof mr=="object"&&mr!==null&&!Array.isArray(mr)&&"id"in mr&&"defaultMessage"in mr,Blocker=({onProceed:mr=()=>{},onCancel:hr=()=>{}})=>{const{formatMessage:gr}=useIntl$2(),vr=useForm("Blocker",Cr=>Cr.modified),xr=useForm("Blocker",Cr=>Cr.isSubmitting),Er=useBlocker(({currentLocation:Cr,nextLocation:wr})=>!xr&&vr&&(Cr.pathname!==wr.pathname||Cr.search!==wr.search));if(Er.state==="blocked"){const Cr=wr=>{wr||(hr(),Er.reset())};return jsxRuntimeExports.jsx(Dialog.Root,{open:!0,onOpenChange:Cr,children:jsxRuntimeExports.jsxs(Dialog.Content,{children:[jsxRuntimeExports.jsx(Dialog.Header,{children:gr({id:"app.components.ConfirmDialog.title",defaultMessage:"Confirmation"})}),jsxRuntimeExports.jsx(Dialog.Body,{icon:jsxRuntimeExports.jsx(ForwardRef$3$1,{width:"24px",height:"24px",fill:"danger600"}),children:gr({id:"global.prompt.unsaved",defaultMessage:"You have unsaved changes, are you sure you want to leave?"})}),jsxRuntimeExports.jsxs(Dialog.Footer,{children:[jsxRuntimeExports.jsx(Dialog.Cancel,{children:jsxRuntimeExports.jsx(Button,{variant:"tertiary",children:gr({id:"app.components.Button.cancel",defaultMessage:"Cancel"})})}),jsxRuntimeExports.jsx(Button,{onClick:()=>{mr(),Er.proceed()},variant:"danger",children:gr({id:"app.components.Button.confirm",defaultMessage:"Confirm"})})]})]})})}return null},useFocusInputField=mr=>{const{search:hr}=useLocation(),gr=reactExports.useMemo(()=>new URLSearchParams(hr),[hr]),[vr,xr]=reactExports.useState(null);return reactExports.useEffect(()=>{gr.has("field")&&gr.get("field")===mr&&vr&&(vr.focus(),vr.scrollIntoView({block:"center"}))},[gr,mr,vr]),xr},BooleanInput=reactExports.forwardRef(({name:mr,required:hr,label:gr,hint:vr,labelAction:xr,...Er},Cr)=>{const{formatMessage:wr}=useIntl$2(),Rr=useField(mr),kr=useFocusInputField(mr),Dr=useComposedRefs(Cr,kr);return jsxRuntimeExports.jsxs(Field.Root,{error:Rr.error,name:mr,hint:vr,required:hr,maxWidth:"320px",children:[jsxRuntimeExports.jsx(Field.Label,{action:xr,children:gr}),jsxRuntimeExports.jsx(Toggle,{ref:Dr,checked:Rr.value===null?null:Rr.value||!1,offLabel:wr({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"False"}),onLabel:wr({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"True"}),onChange:Rr.onChange,...Er}),jsxRuntimeExports.jsx(Field.Hint,{}),jsxRuntimeExports.jsx(Field.Error,{})]})}),MemoizedBooleanInput=reactExports.memo(BooleanInput),CheckboxInput=reactExports.forwardRef(({name:mr,required:hr,label:gr,hint:vr,type:xr,...Er},Cr)=>{const wr=useField(mr),Rr=useFocusInputField(mr),kr=useComposedRefs(Cr,Rr);return jsxRuntimeExports.jsxs(Field.Root,{error:wr.error,name:mr,hint:vr,required:hr,children:[jsxRuntimeExports.jsx(CheckboxImpl,{onCheckedChange:Dr=>wr.onChange(mr,!!Dr),ref:kr,checked:wr.value,...Er,children:gr||Er["aria-label"]}),jsxRuntimeExports.jsx(Field.Hint,{}),jsxRuntimeExports.jsx(Field.Error,{})]})}),MemoizedCheckboxInput=reactExports.memo(CheckboxInput),DateInput=reactExports.forwardRef(({name:mr,required:hr,label:gr,hint:vr,labelAction:xr,type:Er,...Cr},wr)=>{const{formatMessage:Rr}=useIntl$2(),kr=useField(mr),Dr=useFocusInputField(mr),Br=useComposedRefs(wr,Dr),[Hr,Gr]=reactExports.useState(null),qr=typeof kr.value=="string"?new Date(kr.value):kr.value,zr=Qr=>{if(!Qr){kr.onChange(mr,null),Gr(null);return}const sn=toUTCMidnight(Qr);kr.onChange(mr,sn.toISOString()),Gr(sn)};return jsxRuntimeExports.jsxs(Field.Root,{error:kr.error,name:mr,hint:vr,required:hr,children:[jsxRuntimeExports.jsx(Field.Label,{action:xr,children:gr}),jsxRuntimeExports.jsx(DatePicker$1,{ref:Br,clearLabel:Rr({id:"clearLabel",defaultMessage:"Clear"}),onChange:zr,onClear:()=>{kr.onChange(mr,null),Gr(null)},onBlur:()=>{kr.value&&!qr&&kr.onChange(mr,Hr?.toISOString()??null)},value:qr,...Cr}),jsxRuntimeExports.jsx(Field.Hint,{}),jsxRuntimeExports.jsx(Field.Error,{})]})}),toUTCMidnight=mr=>new Date(Date.UTC(mr.getFullYear(),mr.getMonth(),mr.getDate())),MemoizedDateInput=reactExports.memo(DateInput),DateTimeInput=reactExports.forwardRef(({name:mr,required:hr,label:gr,hint:vr,labelAction:xr,...Er},Cr)=>{const{formatMessage:wr}=useIntl$2(),Rr=useField(mr),kr=useFocusInputField(mr),Dr=useComposedRefs(Cr,kr),Br=typeof Rr.value=="string"?new Date(Rr.value):Rr.value;return jsxRuntimeExports.jsxs(Field.Root,{error:Rr.error,name:mr,hint:vr,required:hr,children:[jsxRuntimeExports.jsx(Field.Label,{action:xr,children:gr}),jsxRuntimeExports.jsx(DateTimePicker,{ref:Dr,clearLabel:wr({id:"clearLabel",defaultMessage:"Clear"}),onChange:Hr=>{Rr.onChange(mr,Hr?Hr.toISOString():null)},onClear:()=>Rr.onChange(mr,null),value:Br,...Er}),jsxRuntimeExports.jsx(Field.Hint,{}),jsxRuntimeExports.jsx(Field.Error,{})]})}),MemoizedDateTimeInput=reactExports.memo(DateTimeInput),EmailInput=reactExports.forwardRef(({name:mr,required:hr,label:gr,hint:vr,labelAction:xr,...Er},Cr)=>{const wr=useField(mr),Rr=useFocusInputField(mr),kr=useComposedRefs(Cr,Rr);return jsxRuntimeExports.jsxs(Field.Root,{error:wr.error,name:mr,hint:vr,required:hr,children:[jsxRuntimeExports.jsx(Field.Label,{action:xr,children:gr}),jsxRuntimeExports.jsx(TextInput,{ref:kr,autoComplete:"email",onChange:wr.onChange,value:wr.value,...Er,type:"email"}),jsxRuntimeExports.jsx(Field.Hint,{}),jsxRuntimeExports.jsx(Field.Error,{})]})}),MemoizedEmailInput=reactExports.memo(EmailInput),EnumerationInput=reactExports.forwardRef(({name:mr,required:hr,label:gr,hint:vr,labelAction:xr,options:Er=[],...Cr},wr)=>{const{formatMessage:Rr}=useIntl$2(),kr=useField(mr),Dr=useFocusInputField(mr),Br=useComposedRefs(wr,Dr);return jsxRuntimeExports.jsxs(Field.Root,{error:kr.error,name:mr,hint:vr,required:hr,children:[jsxRuntimeExports.jsx(Field.Label,{action:xr,children:gr}),jsxRuntimeExports.jsxs(SingleSelect,{ref:Br,onChange:Hr=>{kr.onChange(mr,Hr)},value:kr.value,...Cr,children:[jsxRuntimeExports.jsx(SingleSelectOption,{value:"",disabled:hr,hidden:hr,children:Rr({id:"components.InputSelect.option.placeholder",defaultMessage:"Choose here"})}),Er.map(({value:Hr,label:Gr,disabled:qr,hidden:zr})=>jsxRuntimeExports.jsx(SingleSelectOption,{value:Hr,disabled:qr,hidden:zr,children:Gr??Hr},Hr))]}),jsxRuntimeExports.jsx(Field.Hint,{}),jsxRuntimeExports.jsx(Field.Error,{})]})}),MemoizedEnumerationInput=reactExports.memo(EnumerationInput),JsonInput=reactExports.forwardRef(({name:mr,required:hr,label:gr,hint:vr,labelAction:xr,...Er},Cr)=>{const wr=useField(mr),Rr=useFocusInputField(mr),kr=useComposedRefs(Cr,Rr);return jsxRuntimeExports.jsxs(Field.Root,{error:wr.error,name:mr,hint:vr,required:hr,children:[jsxRuntimeExports.jsx(Field.Label,{action:xr,children:gr}),jsxRuntimeExports.jsx(JSONInput,{ref:kr,value:typeof wr.value=="object"?JSON.stringify(wr.value,null,2):wr.value,onChange:Dr=>{const Br=hr&&!Dr.length?null:Dr;wr.onChange(mr,Br)},minHeight:"25.2rem",maxHeight:"50.4rem",...Er}),jsxRuntimeExports.jsx(Field.Hint,{}),jsxRuntimeExports.jsx(Field.Error,{})]})}),MemoizedJsonInput=reactExports.memo(JsonInput),NumberInputImpl=reactExports.forwardRef(({name:mr,required:hr,label:gr,hint:vr,labelAction:xr,type:Er,...Cr},wr)=>{const Rr=useField(mr),kr=useFocusInputField(mr),Dr=useComposedRefs(wr,kr);return jsxRuntimeExports.jsxs(Field.Root,{error:Rr.error,name:mr,hint:vr,required:hr,children:[jsxRuntimeExports.jsx(Field.Label,{action:xr,children:gr}),jsxRuntimeExports.jsx(NumberInput,{ref:Dr,onValueChange:Br=>{Rr.onChange(mr,Br)},step:Er==="float"||Er=="decimal"?.01:1,value:Rr.value,...Cr}),jsxRuntimeExports.jsx(Field.Hint,{}),jsxRuntimeExports.jsx(Field.Error,{})]})}),MemoizedNumberInput=reactExports.memo(NumberInputImpl),PasswordInput=reactExports.forwardRef(({name:mr,required:hr,label:gr,hint:vr,labelAction:xr,...Er},Cr)=>{const[wr,Rr]=reactExports.useState(!1),{formatMessage:kr}=useIntl$2(),Dr=useField(mr),Br=useFocusInputField(mr),Hr=useComposedRefs(Cr,Br);return jsxRuntimeExports.jsxs(Field.Root,{error:Dr.error,name:mr,hint:vr,required:hr,children:[jsxRuntimeExports.jsx(Field.Label,{action:xr,children:gr}),jsxRuntimeExports.jsx(TextInput,{ref:Hr,autoComplete:"password",endAction:jsxRuntimeExports.jsx(Field.Action,{label:kr({id:"Auth.form.password.show-password",defaultMessage:"Show password"}),onClick:()=>{Rr(Gr=>!Gr)},children:wr?jsxRuntimeExports.jsx(ForwardRef$3x,{fill:"neutral500"}):jsxRuntimeExports.jsx(ForwardRef$3v,{fill:"neutral500"})}),onChange:Dr.onChange,value:Dr.value,...Er,type:wr?"text":"password"}),jsxRuntimeExports.jsx(Field.Hint,{}),jsxRuntimeExports.jsx(Field.Error,{})]})}),MemoizedPasswordInput=reactExports.memo(PasswordInput),StringInput=reactExports.forwardRef(({name:mr,required:hr,label:gr,hint:vr,labelAction:xr,...Er},Cr)=>{const wr=useField(mr),Rr=useFocusInputField(mr),kr=useComposedRefs(Cr,Rr);return jsxRuntimeExports.jsxs(Field.Root,{error:wr.error,name:mr,hint:vr,required:hr,children:[jsxRuntimeExports.jsx(Field.Label,{action:xr,children:gr}),jsxRuntimeExports.jsx(TextInput,{ref:kr,onChange:wr.onChange,value:wr.value??"",...Er}),jsxRuntimeExports.jsx(Field.Hint,{}),jsxRuntimeExports.jsx(Field.Error,{})]})}),MemoizedStringInput=reactExports.memo(StringInput),TextareaInput=reactExports.forwardRef(({name:mr,required:hr,label:gr,hint:vr,labelAction:xr,...Er},Cr)=>{const wr=useField(mr),Rr=useFocusInputField(mr),kr=useComposedRefs(Cr,Rr);return jsxRuntimeExports.jsxs(Field.Root,{error:wr.error,name:mr,hint:vr,required:hr,children:[jsxRuntimeExports.jsx(Field.Label,{action:xr,children:gr}),jsxRuntimeExports.jsx(Textarea,{ref:kr,onChange:wr.onChange,value:wr.value??"",...Er}),jsxRuntimeExports.jsx(Field.Hint,{}),jsxRuntimeExports.jsx(Field.Error,{})]})}),MemoizedTextareaInput=reactExports.memo(TextareaInput),TimeInput=reactExports.forwardRef(({name:mr,required:hr,label:gr,hint:vr,labelAction:xr,...Er},Cr)=>{const{formatMessage:wr}=useIntl$2(),Rr=useField(mr),kr=useFocusInputField(mr),Dr=useComposedRefs(Cr,kr);return jsxRuntimeExports.jsxs(Field.Root,{error:Rr.error,name:mr,hint:vr,required:hr,children:[jsxRuntimeExports.jsx(Field.Label,{action:xr,children:gr}),jsxRuntimeExports.jsx(TimePicker$1,{ref:Dr,clearLabel:wr({id:"clearLabel",defaultMessage:"Clear"}),onChange:Br=>{Rr.onChange(mr,`${Br}:00.000`)},onClear:()=>Rr.onChange(mr,void 0),value:Rr.value??"",...Er}),jsxRuntimeExports.jsx(Field.Hint,{}),jsxRuntimeExports.jsx(Field.Error,{})]})}),MemoizedTimeInput=reactExports.memo(TimeInput),InputRenderer=reactExports.memo(reactExports.forwardRef((mr,hr)=>{switch(mr.type){case"biginteger":case"timestamp":case"string":case"uid":return jsxRuntimeExports.jsx(MemoizedStringInput,{ref:hr,...mr});case"boolean":return jsxRuntimeExports.jsx(MemoizedBooleanInput,{ref:hr,...mr});case"checkbox":return jsxRuntimeExports.jsx(MemoizedCheckboxInput,{ref:hr,...mr});case"datetime":return jsxRuntimeExports.jsx(MemoizedDateTimeInput,{ref:hr,...mr});case"date":return jsxRuntimeExports.jsx(MemoizedDateInput,{ref:hr,...mr});case"decimal":case"float":case"integer":return jsxRuntimeExports.jsx(MemoizedNumberInput,{ref:hr,...mr});case"json":return jsxRuntimeExports.jsx(MemoizedJsonInput,{ref:hr,...mr});case"email":return jsxRuntimeExports.jsx(MemoizedEmailInput,{ref:hr,...mr});case"enumeration":return jsxRuntimeExports.jsx(MemoizedEnumerationInput,{ref:hr,...mr});case"password":return jsxRuntimeExports.jsx(MemoizedPasswordInput,{ref:hr,...mr});case"text":return jsxRuntimeExports.jsx(MemoizedTextareaInput,{ref:hr,...mr});case"time":return jsxRuntimeExports.jsx(MemoizedTimeInput,{ref:hr,...mr});default:return jsxRuntimeExports.jsx(NotSupportedField,{ref:hr,...mr})}})),NotSupportedField=reactExports.forwardRef(({label:mr,hint:hr,name:gr,required:vr,type:xr,labelAction:Er},Cr)=>{const{error:wr}=useField(gr),Rr=useFocusInputField(gr),kr=useComposedRefs(Cr,Rr);return jsxRuntimeExports.jsxs(Field.Root,{error:wr,name:gr,hint:hr,required:vr,children:[jsxRuntimeExports.jsx(Field.Label,{action:Er,children:mr}),jsxRuntimeExports.jsx(TextInput,{ref:kr,disabled:!0,placeholder:`Unsupported field type: ${xr}`,required:vr,type:"text",value:""}),jsxRuntimeExports.jsx(Field.Hint,{}),jsxRuntimeExports.jsx(Field.Error,{})]})}),MemoizedInputRenderer=reactExports.memo(InputRenderer);dt$3.img`
  height: 7.2rem;
`;dt$3(Box)`
  margin: 0 auto;
  width: 552px;
`;dt$3(Flex)`
  flex-direction: column;
`;const errorsTrads={email:{id:"components.Input.error.validation.email",defaultMessage:"This is not a valid email."},json:{id:"components.Input.error.validation.json",defaultMessage:"This doesn't match the JSON format"},lowercase:{id:"components.Input.error.validation.lowercase",defaultMessage:"The value must be a lowercase string"},max:{id:"components.Input.error.validation.max",defaultMessage:"The value is too high (max: {max})."},maxLength:{id:"components.Input.error.validation.maxLength",defaultMessage:"The value is too long (max: {max})."},min:{id:"components.Input.error.validation.min",defaultMessage:"The value is too low (min: {min})."},minLength:{id:"components.Input.error.validation.minLength",defaultMessage:"The value is too short (min: {min})."},regex:{id:"components.Input.error.validation.regex",defaultMessage:"The value does not match the regex."},required:{id:"components.Input.error.validation.required",defaultMessage:"This value is required."},string:{id:"components.Input.error.validation.string",defaultMessage:"This is not a valid string."},unique:{id:"components.Input.error.validation.unique",defaultMessage:"This value is already used."},integer:{id:"component.Input.error.validation.integer",defaultMessage:"The value must be an integer"}};create$2().shape({email:create$4().nullable().email({id:errorsTrads.email.id,defaultMessage:"Not a valid email"}).required(errorsTrads.required),password:create$4().required(errorsTrads.required).nullable(),rememberMe:create$5().nullable()});dt$3(Field.Root)`
  height: 3.2rem;
  width: 3.2rem;

  > label,
  ~ input {
    display: block;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
  }

  > label {
    color: inherit;
    cursor: pointer;
    padding: ${({theme:mr})=>mr.spaces[2]};
    text-align: center;
    vertical-align: middle;
  }

  &:hover,
  &:focus-within {
    background-color: ${({theme:mr})=>mr.colors.neutral0};
  }

  &:active,
  &.selected {
    color: ${({theme:mr})=>mr.colors.primary700};
    background-color: ${({theme:mr})=>mr.colors.neutral0};
    border-color: ${({theme:mr})=>mr.colors.primary700};
  }
`;[...Array(11).keys()];create$2().shape({firstname:create$4().trim().required(errorsTrads.required).nullable(),lastname:create$4().nullable(),password:create$4().min(8,{id:errorsTrads.minLength.id,defaultMessage:"Password must be at least 8 characters",values:{min:8}}).matches(/[a-z]/,{message:{id:"components.Input.error.contain.lowercase",defaultMessage:"Password must contain at least 1 lowercase letter"}}).matches(/[A-Z]/,{message:{id:"components.Input.error.contain.uppercase",defaultMessage:"Password must contain at least 1 uppercase letter"}}).matches(/\d/,{message:{id:"components.Input.error.contain.number",defaultMessage:"Password must contain at least 1 number"}}).required({id:errorsTrads.required.id,defaultMessage:"Password is required"}).nullable(),confirmPassword:create$4().required({id:errorsTrads.required.id,defaultMessage:"Confirm password is required"}).oneOf([create$7("password"),null],{id:"components.Input.error.password.noMatch",defaultMessage:"Passwords must match"}).nullable(),registrationToken:create$4().required({id:errorsTrads.required.id,defaultMessage:"Registration token is required"})});create$2().shape({firstname:create$4().trim().required({id:errorsTrads.required.id,defaultMessage:"Firstname is required"}).nullable(),lastname:create$4().nullable(),password:create$4().min(8,{id:errorsTrads.minLength.id,defaultMessage:"Password must be at least 8 characters",values:{min:8}}).matches(/[a-z]/,{message:{id:"components.Input.error.contain.lowercase",defaultMessage:"Password must contain at least 1 lowercase letter"}}).matches(/[A-Z]/,{message:{id:"components.Input.error.contain.uppercase",defaultMessage:"Password must contain at least 1 uppercase letter"}}).matches(/\d/,{message:{id:"components.Input.error.contain.number",defaultMessage:"Password must contain at least 1 number"}}).required({id:errorsTrads.required.id,defaultMessage:"Password is required"}).nullable(),confirmPassword:create$4().required({id:errorsTrads.required,defaultMessage:"Confirm password is required"}).nullable().oneOf([create$7("password"),null],{id:"components.Input.error.password.noMatch",defaultMessage:"Passwords must match"}),email:create$4().email({id:errorsTrads.email.id,defaultMessage:"Not a valid email"}).strict().lowercase({id:errorsTrads.lowercase.id,defaultMessage:"Email must be lowercase"}).required({id:errorsTrads.required.id,defaultMessage:"Email is required"}).nullable()});dt$3.a`
  color: ${({theme:mr})=>mr.colors.primary600};
`;create$2().shape({password:create$4().min(8,{id:errorsTrads.minLength.id,defaultMessage:"Password must be at least 8 characters",values:{min:8}}).matches(/[a-z]/,{message:{id:"components.Input.error.contain.lowercase",defaultMessage:"Password must contain at least 1 lowercase letter"}}).matches(/[A-Z]/,{message:{id:"components.Input.error.contain.uppercase",defaultMessage:"Password must contain at least 1 uppercase letter"}}).matches(/\d/,{message:{id:"components.Input.error.contain.number",defaultMessage:"Password must contain at least 1 number"}}).required({id:errorsTrads.required.id,defaultMessage:"Password is required"}).nullable(),confirmPassword:create$4().required({id:errorsTrads.required.id,defaultMessage:"Confirm password is required"}).oneOf([create$7("password"),null],{id:"components.Input.error.password.noMatch",defaultMessage:"Passwords must match"}).nullable()});adminApi.reducerPath+"",adminApi.reducer;const ConfirmDialog=({children:mr,icon:hr=jsxRuntimeExports.jsx(StyledWarning,{}),onConfirm:gr,variant:vr="danger-light",startAction:xr,endAction:Er,title:Cr})=>{const{formatMessage:wr}=useIntl$2(),[Rr,kr]=reactExports.useState(!1),Dr=mr||wr({id:"app.confirm.body",defaultMessage:"Are you sure?"}),Br=async Hr=>{if(gr)try{kr(!0),await gr(Hr)}finally{kr(!1)}};return jsxRuntimeExports.jsxs(Dialog.Content,{children:[jsxRuntimeExports.jsx(Dialog.Header,{children:Cr||wr({id:"app.components.ConfirmDialog.title",defaultMessage:"Confirmation"})}),jsxRuntimeExports.jsx(Dialog.Body,{icon:hr,children:Dr}),jsxRuntimeExports.jsxs(Dialog.Footer,{children:[xr||jsxRuntimeExports.jsx(Dialog.Cancel,{children:jsxRuntimeExports.jsx(Button,{fullWidth:!0,variant:"tertiary",onClick:Hr=>{Hr.stopPropagation()},children:wr({id:"app.components.Button.cancel",defaultMessage:"Cancel"})})}),Er||jsxRuntimeExports.jsx(Dialog.Action,{children:jsxRuntimeExports.jsx(Button,{fullWidth:!0,onClick:Br,variant:vr,loading:Rr,children:wr({id:"app.components.Button.confirm",defaultMessage:"Confirm"})})})]})]})},StyledWarning=dt$3(ForwardRef$3$1)`
  width: 24px;
  height: 24px;

  path {
    fill: ${({theme:mr})=>mr.colors.danger600};
  }
`,useIsMounted=()=>{const mr=reactExports.useRef(!1);return reactExports.useLayoutEffect(()=>(mr.current=!0,()=>{mr.current=!1}),[]),mr},useForceUpdate=()=>{const[mr,hr]=reactExports.useState(),gr=useIsMounted(),vr=reactExports.useCallback(()=>{gr.current&&hr(Math.random())},[gr,hr]);return[mr,vr]},useThrottledCallback=(mr,hr,gr)=>reactExports.useMemo(()=>throttle$1(mr,hr,gr),[mr,gr,hr]),requestIdleCallbackShim=mr=>{const hr=Date.now();return setTimeout(()=>{mr({didTimeout:!1,timeRemaining(){return Math.max(0,Date.now()-hr)}})},1)},_requestIdleCallback=typeof requestIdleCallback>"u"?requestIdleCallbackShim:requestIdleCallback,cancelIdleCallbackShim=mr=>clearTimeout(mr),_cancelIdleCallback=typeof cancelIdleCallback>"u"?cancelIdleCallbackShim:cancelIdleCallback,DescriptionComponentRenderer=({children:mr,props:hr,descriptions:gr})=>{const vr=reactExports.useRef({}),[xr,Er]=useForceUpdate(),Cr=reactExports.useRef(null),wr=reactExports.useCallback(()=>{Cr.current&&_cancelIdleCallback(Cr.current),Cr.current=_requestIdleCallback(()=>{Cr.current=null,Er()})},[Er]),Rr=useThrottledCallback(wr,60,{trailing:!0}),kr=reactExports.useCallback((Hr,Gr)=>{if(Gr===null)delete vr.current[Hr];else{const qr=vr.current[Hr];vr.current[Hr]={...qr,value:{...Gr,id:Hr}}}Rr()},[Rr]),Dr=reactExports.useMemo(()=>gr.map(Hr=>getCompId(Hr)),[gr]),Br=reactExports.useMemo(()=>Dr.map(Hr=>vr.current[Hr]?.value).filter(Hr=>Hr!=null),[Dr,xr]);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[gr.map(Hr=>{const Gr=getCompId(Hr);return jsxRuntimeExports.jsx(Description,{id:Gr,description:Hr,props:hr,update:kr},Gr)}),mr(Br)]})},Description=reactExports.memo(({description:mr,id:hr,props:gr,update:vr})=>{const xr=mr(gr);return useShallowCompareEffect(()=>(vr(hr,xr),()=>{vr(hr,null)}),xr),null},(mr,hr)=>isEqual$3(mr.props,hr.props)),ids=new WeakMap;let counter$1=0;function getCompId(mr){const hr=ids.get(mr);if(hr)return hr;const gr=`${mr.name||mr.displayName||"<anonymous>"}-${counter$1++}`;return ids.set(mr,gr),gr}const useShallowCompareMemoize=mr=>{const hr=reactExports.useRef(void 0);return isEqual$3(mr,hr.current)||(hr.current=mr),[hr.current]},useShallowCompareEffect=(mr,hr)=>{reactExports.useEffect(mr,useShallowCompareMemoize(hr))},BASE_FILTERS=[{label:{id:"components.FilterOptions.FILTER_TYPES.$eq",defaultMessage:"is"},value:"$eq"},{label:{id:"components.FilterOptions.FILTER_TYPES.$ne",defaultMessage:"is not"},value:"$ne"},{label:{id:"components.FilterOptions.FILTER_TYPES.$null",defaultMessage:"is null"},value:"$null"},{label:{id:"components.FilterOptions.FILTER_TYPES.$notNull",defaultMessage:"is not null"},value:"$notNull"}],NUMERIC_FILTERS=[{label:{id:"components.FilterOptions.FILTER_TYPES.$gt",defaultMessage:"is greater than"},value:"$gt"},{label:{id:"components.FilterOptions.FILTER_TYPES.$gte",defaultMessage:"is greater than or equal to"},value:"$gte"},{label:{id:"components.FilterOptions.FILTER_TYPES.$lt",defaultMessage:"is less than"},value:"$lt"},{label:{id:"components.FilterOptions.FILTER_TYPES.$lte",defaultMessage:"is less than or equal to"},value:"$lte"}],IS_SENSITIVE_FILTERS=[{label:{id:"components.FilterOptions.FILTER_TYPES.$eqi",defaultMessage:"is (case insensitive)"},value:"$eqi"},{label:{id:"components.FilterOptions.FILTER_TYPES.$nei",defaultMessage:"is not (case insensitive)"},value:"$nei"}],CONTAINS_FILTERS=[{label:{id:"components.FilterOptions.FILTER_TYPES.$contains",defaultMessage:"contains"},value:"$contains"},{label:{id:"components.FilterOptions.FILTER_TYPES.$containsi",defaultMessage:"contains (case insensitive)"},value:"$containsi"},{label:{id:"components.FilterOptions.FILTER_TYPES.$notContains",defaultMessage:"not contains"},value:"$notContains"},{label:{id:"components.FilterOptions.FILTER_TYPES.$notContainsi",defaultMessage:"not contains (case insensitive)"},value:"$notContainsi"}],STRING_PARSE_FILTERS=[{label:{id:"components.FilterOptions.FILTER_TYPES.$startsWith",defaultMessage:"starts with"},value:"$startsWith"},{label:{id:"components.FilterOptions.FILTER_TYPES.$startsWithi",defaultMessage:"starts with (case insensitive)"},value:"$startsWithi"},{label:{id:"components.FilterOptions.FILTER_TYPES.$endsWith",defaultMessage:"ends with"},value:"$endsWith"},{label:{id:"components.FilterOptions.FILTER_TYPES.$endsWithi",defaultMessage:"ends with (case insensitive)"},value:"$endsWithi"}],FILTERS_WITH_NO_VALUE=["$null","$notNull"];function useControllableState({prop:mr,defaultProp:hr,onChange:gr=()=>{}}){const[vr,xr]=useUncontrolledState({defaultProp:hr,onChange:gr}),Er=mr!==void 0,Cr=Er?mr:vr,wr=useCallbackRef(gr),Rr=reactExports.useCallback(kr=>{if(Er){const Br=typeof kr=="function"?kr(mr):kr;Br!==mr&&wr(Br)}else xr(kr)},[Er,mr,xr,wr]);return[Cr,Rr]}function useUncontrolledState({defaultProp:mr,onChange:hr}){const gr=reactExports.useState(mr),[vr]=gr,xr=reactExports.useRef(vr),Er=useCallbackRef(hr);return reactExports.useEffect(()=>{xr.current!==vr&&(Er(vr),xr.current=vr)},[vr,xr,Er]),gr}const[FiltersProvider,useFilters]=createContext("Filters"),Root$2=({children:mr,disabled:hr=!1,onChange:gr,options:vr=[],onOpenChange:xr,open:Er,defaultOpen:Cr,...wr})=>{const Rr=Br=>{gr&&gr(Br)},[kr=!1,Dr]=useControllableState({prop:Er,defaultProp:Cr,onChange:xr});return jsxRuntimeExports.jsx(Popover.Root,{open:kr,onOpenChange:Dr,...wr,children:jsxRuntimeExports.jsx(FiltersProvider,{setOpen:Dr,disabled:hr,onChange:Rr,options:vr,children:mr})})},Trigger$1=reactExports.forwardRef(({label:mr},hr)=>{const{formatMessage:gr}=useIntl$2(),vr=useFilters("Trigger",({disabled:xr})=>xr);return jsxRuntimeExports.jsx(Popover.Trigger,{children:jsxRuntimeExports.jsx(Button,{variant:"tertiary",ref:hr,startIcon:jsxRuntimeExports.jsx(ForwardRef$3d,{}),size:"S",disabled:vr,children:mr||gr({id:"app.utils.filters",defaultMessage:"Filters"})})})}),PopoverImpl=()=>{const[{query:mr},hr]=useQueryParams(),{formatMessage:gr}=useIntl$2(),vr=useFilters("Popover",({options:wr})=>wr),xr=useFilters("Popover",({onChange:wr})=>wr),Er=useFilters("Popover",({setOpen:wr})=>wr);if(vr.length===0)return null;const Cr=wr=>{const Rr=FILTERS_WITH_NO_VALUE.includes(wr.filter)?"true":encodeURIComponent(wr.value??"");if(!Rr)return;xr&&xr(wr);const kr=vr.find(Hr=>Hr.name===wr.name),Dr={[wr.filter]:Rr},Br={...mr.filters,$and:[...mr.filters?.$and??[],{[wr.name]:kr.type==="relation"?{[kr.mainField?.name??"id"]:Dr}:Dr}]};hr({filters:Br,page:1}),Er(!1)};return jsxRuntimeExports.jsx(Popover.Content,{children:jsxRuntimeExports.jsx(Box,{padding:3,children:jsxRuntimeExports.jsx(Form,{method:"POST",initialValues:{name:vr[0]?.name,filter:BASE_FILTERS[0].value},onSubmit:Cr,children:({values:wr,modified:Rr,isSubmitting:kr})=>{const Dr=vr.find(Hr=>Hr.name===wr.name),Br=Dr?.input||MemoizedInputRenderer;return jsxRuntimeExports.jsxs(Flex,{direction:"column",alignItems:"stretch",gap:2,style:{minWidth:184},children:[[{"aria-label":gr({id:"app.utils.select-field",defaultMessage:"Select field"}),name:"name",options:vr.map(Hr=>({label:Hr.label,value:Hr.name})),placholder:gr({id:"app.utils.select-field",defaultMessage:"Select field"}),type:"enumeration"},{"aria-label":gr({id:"app.utils.select-filter",defaultMessage:"Select filter"}),name:"filter",options:Dr?.operators||getFilterList$1(Dr).map(Hr=>({label:gr(Hr.label),value:Hr.value})),placeholder:gr({id:"app.utils.select-filter",defaultMessage:"Select filter"}),type:"enumeration"}].map(Hr=>jsxRuntimeExports.jsx(MemoizedInputRenderer,{...Hr},Hr.name)),Dr&&wr.filter&&wr.filter!=="$null"&&wr.filter!=="$notNull"?jsxRuntimeExports.jsx(Br,{...Dr,label:null,"aria-label":Dr.label,name:"value",type:Dr.mainField?.type??Dr.type}):null,jsxRuntimeExports.jsx(Button,{disabled:!Rr||kr,size:"L",variant:"secondary",startIcon:jsxRuntimeExports.jsx(ForwardRef$1d,{}),type:"submit",fullWidth:!0,children:gr({id:"app.utils.add-filter",defaultMessage:"Add filter"})})]})}})})})},getFilterList$1=mr=>{if(!mr)return[];switch(mr.mainField?.type?mr.mainField.type:mr.type){case"email":case"text":case"string":return[...BASE_FILTERS,...IS_SENSITIVE_FILTERS,...CONTAINS_FILTERS,...STRING_PARSE_FILTERS];case"float":case"integer":case"biginteger":case"decimal":return[...BASE_FILTERS,...NUMERIC_FILTERS];case"time":case"date":return[...BASE_FILTERS,...NUMERIC_FILTERS,...CONTAINS_FILTERS];case"datetime":return[...BASE_FILTERS,...NUMERIC_FILTERS];case"enumeration":return BASE_FILTERS;default:return[...BASE_FILTERS,...IS_SENSITIVE_FILTERS]}},List=()=>{const[{query:mr},hr]=useQueryParams(),gr=useFilters("List",({options:xr})=>xr),vr=xr=>{const Er=(mr?.filters?.$and??[]).filter(Cr=>{const[wr]=Object.keys(Cr);if(wr!==xr.name)return!0;const{type:Rr,mainField:kr}=gr.find(({name:Dr})=>Dr===wr);if(Rr==="relation"){const Dr=Cr[wr][kr?.name??"id"];if(typeof Dr=="object"){const[Br]=Object.keys(Dr),Hr=Dr[Br];return!(Br===xr.filter&&Hr===xr.value)}return!0}else{const Dr=Cr[wr],[Br]=Object.keys(Dr),Hr=Dr[Br];return!(Br===xr.filter&&Hr===xr.value)}});hr({filters:{$and:Er},page:1})};return mr?.filters?.$and?.length?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:mr?.filters?.$and?.map(xr=>{const[Er]=Object.keys(xr),Cr=gr.find(({name:Rr})=>Rr===Er),wr=xr[Er];if(!Cr||typeof wr!="object"||wr===null)return null;if(Cr.type==="relation"){const Rr=wr[Cr.mainField?.name??"id"];if(typeof Rr=="object"){const[kr]=Object.keys(Rr),Dr=Rr[kr];return jsxRuntimeExports.jsx(AttributeTag,{...Cr,onClick:vr,operator:kr,value:Dr},`${Er}-${kr}-${Dr}`)}return null}else{const[Rr]=Object.keys(wr),kr=wr[Rr];return typeof kr=="object"?null:jsxRuntimeExports.jsx(AttributeTag,{...Cr,onClick:vr,operator:Rr,value:kr},`${Er}-${Rr}-${kr}`)}})}):null},AttributeTag=({input:mr,label:hr,mainField:gr,name:vr,onClick:xr,operator:Er,options:Cr,value:wr,...Rr})=>{const{formatMessage:kr,formatDate:Dr,formatTime:Br,formatNumber:Hr}=useIntl$2(),Gr=()=>{xr({name:vr,value:wr,filter:Er})},qr=gr?.type?gr.type:Rr.type;let zr=wr;switch(qr){case"date":zr=Dr(wr,{dateStyle:"full"});break;case"datetime":zr=Dr(wr,{dateStyle:"full",timeStyle:"short"});break;case"time":const[sn,hn]=wr.split(":"),vn=new Date;vn.setHours(Number(sn)),vn.setMinutes(Number(hn)),zr=Br(vn,{hour:"numeric",minute:"numeric"});break;case"float":case"integer":case"biginteger":case"decimal":zr=Hr(Number(wr));break}if(mr&&Cr){const sn=Cr.find(hn=>(typeof hn=="string"?hn:hn.value)===wr);zr=sn?typeof sn=="string"?sn:sn.label??sn.value:wr}const Qr=`${hr} ${kr({id:`components.FilterOptions.FILTER_TYPES.${Er}`,defaultMessage:Er})} ${Er!=="$null"&&Er!=="$notNull"?zr:""}`;return jsxRuntimeExports.jsx(Tag,{padding:1,onClick:Gr,icon:jsxRuntimeExports.jsx(ForwardRef$3$,{}),children:Qr})},Filters$1={List,Popover:PopoverImpl,Root:Root$2,Trigger:Trigger$1},[PaginationProvider,usePagination$1]=createContext("Pagination"),Root$1=reactExports.forwardRef(({children:mr,defaultPageSize:hr=10,pageCount:gr=0,defaultPage:vr=1,onPageSizeChange:xr,total:Er=0},Cr)=>{const[{query:wr},Rr]=useQueryParams({pageSize:hr.toString(),page:vr.toString()}),kr=Dr=>{Rr({pageSize:Dr,page:"1"}),xr&&xr(Dr)};return jsxRuntimeExports.jsx(Flex,{ref:Cr,paddingTop:4,paddingBottom:4,alignItems:"flex-end",justifyContent:"space-between",children:jsxRuntimeExports.jsx(PaginationProvider,{currentQuery:wr,page:wr.page,pageSize:wr.pageSize,pageCount:gr.toString(),setPageSize:kr,total:Er,children:mr})})}),PageSize$1=({options:mr=["10","20","50","100"]})=>{const{formatMessage:hr}=useIntl$2(),gr=usePagination$1("PageSize",wr=>wr.pageSize),vr=usePagination$1("PageSize",wr=>wr.total),xr=usePagination$1("PageSize",wr=>wr.setPageSize),Er=wr=>{xr(wr)};return parseInt(mr[0],10)>=vr?null:jsxRuntimeExports.jsxs(Flex,{gap:2,children:[jsxRuntimeExports.jsx(SingleSelect,{size:"S","aria-label":hr({id:"components.PageFooter.select",defaultMessage:"Entries per page"}),onChange:Er,value:gr,children:mr.map(wr=>jsxRuntimeExports.jsx(SingleSelectOption,{value:wr,children:wr},wr))}),jsxRuntimeExports.jsx(Typography,{textColor:"neutral600",tag:"span",children:hr({id:"components.PageFooter.select",defaultMessage:"Entries per page"})})]})},Links=({boundaryCount:mr=1,siblingCount:hr=1})=>{const{formatMessage:gr}=useIntl$2(),vr=usePagination$1("Links",qr=>qr.currentQuery),xr=usePagination$1("Links",qr=>qr.page),Er=usePagination$1("Links",qr=>qr.pageCount),Cr=parseInt(Er,10),wr=parseInt(xr,10),Rr=(qr,zr)=>{const Qr=zr-qr+1;return Array.from({length:Qr},(sn,hn)=>qr+hn)},kr=Rr(1,Math.min(mr,Cr)),Dr=Rr(Math.max(Cr-mr+1,mr+1),Cr),Br=Math.max(Math.min(wr-hr,Cr-mr-hr*2-1),mr+2),Hr=Math.min(Math.max(wr+hr,mr+hr*2+2),Dr.length>0?Dr[0]-2:Cr-1),Gr=[...kr,...Br>mr+2?["start-ellipsis"]:mr+1<Cr-mr?[mr+1]:[],...Rr(Br,Hr),...Hr<Cr-mr-1?["end-ellipsis"]:Cr-mr>mr?[Cr-mr]:[],...Dr];return Cr<=1?null:jsxRuntimeExports.jsxs(Pagination$2,{activePage:wr,pageCount:Cr,children:[jsxRuntimeExports.jsx(PreviousLink$1,{tag:Link$1,to:{search:lib$1.stringify({...vr,page:wr-1})},children:gr({id:"components.pagination.go-to-previous",defaultMessage:"Go to previous page"})}),Gr.map(qr=>typeof qr=="number"?jsxRuntimeExports.jsx(PageLink$1,{tag:Link$1,number:qr,to:{search:lib$1.stringify({...vr,page:qr})},children:gr({id:"components.pagination.go-to",defaultMessage:"Go to page {page}"},{page:qr})},qr):jsxRuntimeExports.jsx(Dots$1,{},qr)),jsxRuntimeExports.jsx(NextLink$1,{tag:Link$1,to:{search:lib$1.stringify({...vr,page:wr+1})},children:gr({id:"components.pagination.go-to-next",defaultMessage:"Go to next page"})})]})},Pagination$1={Root:Root$1,Links,PageSize:PageSize$1},SearchInput=({disabled:mr,label:hr,placeholder:gr,trackedEvent:vr,trackedEventDetails:xr})=>{const Er=reactExports.useRef(null),Cr=reactExports.useRef(null),[{query:wr},Rr]=useQueryParams(),[kr,Dr]=reactExports.useState(wr?._q||""),[Br,Hr]=reactExports.useState(!!kr),{formatMessage:Gr}=useIntl$2(),{trackUsage:qr}=useTracking(),zr=()=>Hr(hn=>!hn);reactExports.useLayoutEffect(()=>{Br&&Er.current&&Er.current.focus()},[Br]);const Qr=()=>{Dr(""),Rr({_q:""},"remove")},sn=hn=>{hn.preventDefault(),kr?(vr&&qr(vr,xr),Rr({_q:encodeURIComponent(kr),page:1})):(zr(),Rr({_q:""},"remove"))};return Br?jsxRuntimeExports.jsx(SearchForm,{onSubmit:sn,children:jsxRuntimeExports.jsx(Searchbar,{ref:Er,name:"search",onChange:hn=>Dr(hn.target.value),value:kr,clearLabel:Gr({id:"clearLabel",defaultMessage:"Clear"}),onClear:Qr,placeholder:gr,children:hr})}):jsxRuntimeExports.jsx(IconButton,{ref:Cr,disabled:mr,label:Gr({id:"global.search",defaultMessage:"Search"}),onClick:zr,children:jsxRuntimeExports.jsx(ForwardRef$V$1,{})})},[TableProvider,useTable]=createContext("Table"),Root=({children:mr,defaultSelectedRows:hr,footer:gr,headers:vr=[],isLoading:xr=!1,onSelectedRowsChange:Er,rows:Cr=[],selectedRows:wr})=>{const[Rr=[],kr]=useControllableState({prop:wr,defaultProp:hr,onChange:Er}),[Dr,Br]=reactExports.useState(!1),Hr=Cr.length+1,Gr=Dr?vr.length+1:vr.length,qr=zr=>{Array.isArray(zr)?kr(zr):kr((Qr=[])=>{const sn=Qr.findIndex(hn=>hn.id===zr.id);return sn>-1?Qr.toSpliced(sn,1):[...Qr,zr]})};return jsxRuntimeExports.jsx(TableProvider,{colCount:Gr,hasHeaderCheckbox:Dr,setHasHeaderCheckbox:Br,footer:gr,headers:vr,isLoading:xr,rowCount:Hr,rows:Cr,selectedRows:Rr,selectRow:qr,children:mr})},Content=({children:mr})=>{const hr=useTable("Content",xr=>xr.rowCount),gr=useTable("Content",xr=>xr.colCount),vr=useTable("Content",xr=>xr.footer);return jsxRuntimeExports.jsx(Table$1,{rowCount:hr,colCount:gr,footer:vr,children:mr})},Head=({children:mr})=>jsxRuntimeExports.jsx(Thead,{children:jsxRuntimeExports.jsx(Tr,{children:mr})}),HeaderCell=({name:mr,label:hr,sortable:gr})=>{const[{query:vr},xr]=useQueryParams(),Er=vr?.sort??"",[Cr,wr]=Er.split(":"),{formatMessage:Rr}=useIntl$2(),kr=Cr===mr,Dr=Rr({id:"components.TableHeader.sort",defaultMessage:"Sort on {label}"},{label:hr}),Br=()=>{gr&&xr({sort:`${mr}:${kr&&wr==="ASC"?"DESC":"ASC"}`})};return jsxRuntimeExports.jsx(Th,{action:kr&&gr&&jsxRuntimeExports.jsx(IconButton,{label:Dr,onClick:Br,variant:"ghost",children:jsxRuntimeExports.jsx(SortIcon,{$isUp:wr==="ASC"})}),children:jsxRuntimeExports.jsx(TooltipImpl,{label:gr?Dr:hr,children:jsxRuntimeExports.jsx(Typography,{textColor:"neutral600",tag:!kr&&gr?"button":"span",onClick:Br,variant:"sigma",children:hr})})})},SortIcon=dt$3(ForwardRef$4L)`
  transform: ${({$isUp:mr})=>`rotate(${mr?"180":"0"}deg)`};
`,ActionBar=({children:mr})=>{const{formatMessage:hr}=useIntl$2(),gr=useTable("ActionBar",vr=>vr.selectedRows);return gr.length===0?null:jsxRuntimeExports.jsxs(Flex,{gap:2,children:[jsxRuntimeExports.jsx(Typography,{variant:"omega",textColor:"neutral500",children:hr({id:"content-manager.components.TableDelete.label",defaultMessage:"{number, plural, one {# row} other {# rows}} selected"},{number:gr.length})}),mr]})},HeaderCheckboxCell=()=>{const mr=useTable("HeaderCheckboxCell",Rr=>Rr.rows),hr=useTable("HeaderCheckboxCell",Rr=>Rr.selectedRows),gr=useTable("HeaderCheckboxCell",Rr=>Rr.selectRow),vr=useTable("HeaderCheckboxCell",Rr=>Rr.setHasHeaderCheckbox),{formatMessage:xr}=useIntl$2(),Er=hr.length===mr.length&&mr.length>0,Cr=!Er&&hr.length>0;reactExports.useEffect(()=>(vr(!0),()=>vr(!1)),[vr]);const wr=()=>{gr(Er?[]:mr)};return jsxRuntimeExports.jsx(Th,{children:jsxRuntimeExports.jsx(CheckboxImpl,{"aria-label":xr({id:"global.select-all-entries",defaultMessage:"Select all entries"}),disabled:mr.length===0,checked:Cr?"indeterminate":Er,onCheckedChange:wr})})},Empty=mr=>{const{formatMessage:hr}=useIntl$2(),gr=useTable("Empty",Er=>Er.rows),vr=useTable("Empty",Er=>Er.isLoading),xr=useTable("Empty",Er=>Er.colCount);return gr.length>0||vr?null:jsxRuntimeExports.jsx(Tbody,{children:jsxRuntimeExports.jsx(Tr,{children:jsxRuntimeExports.jsx(Td,{colSpan:xr,children:jsxRuntimeExports.jsx(EmptyStateLayout,{content:hr({id:"app.components.EmptyStateLayout.content-document",defaultMessage:"No content found"}),hasRadius:!0,icon:jsxRuntimeExports.jsx(ForwardRef$J,{width:"16rem"}),...mr})})})})},Loading=({children:mr="Loading content"})=>{const hr=useTable("Loading",vr=>vr.isLoading),gr=useTable("Loading",vr=>vr.colCount);return hr?jsxRuntimeExports.jsx(Tbody,{children:jsxRuntimeExports.jsx(Tr,{children:jsxRuntimeExports.jsx(Td,{colSpan:gr,children:jsxRuntimeExports.jsx(Flex,{justifyContent:"center",padding:11,background:"neutral0",children:jsxRuntimeExports.jsx(Loader,{children:mr})})})})}):null},Body=({children:mr})=>{const hr=useTable("Body",vr=>vr.isLoading),gr=useTable("Body",vr=>vr.rows);return hr||gr.length===0?null:jsxRuntimeExports.jsx(Tbody,{children:mr})},Row$1=mr=>jsxRuntimeExports.jsx(Tr,{...mr}),Cell=mr=>jsxRuntimeExports.jsx(Td,{...mr}),CheckboxCell=({id:mr,...hr})=>{const gr=useTable("CheckboxCell",Rr=>Rr.rows),vr=useTable("CheckboxCell",Rr=>Rr.selectedRows),xr=useTable("CheckboxCell",Rr=>Rr.selectRow),{formatMessage:Er}=useIntl$2(),Cr=()=>{xr(gr.find(Rr=>Rr.id===mr))},wr=vr.findIndex(Rr=>Rr.id===mr)>-1;return jsxRuntimeExports.jsx(Cell,{...hr,onClick:Rr=>Rr.stopPropagation(),children:jsxRuntimeExports.jsx(CheckboxImpl,{"aria-label":Er({id:"app.component.table.select.one-entry",defaultMessage:"Select {target}"},{target:mr}),disabled:gr.length===0,checked:wr,onCheckedChange:Cr})})},Table={Root,Content,ActionBar,Head,HeaderCell,HeaderCheckboxCell,Body,CheckboxCell,Cell,Row:Row$1,Loading,Empty};dt$3(Flex)`
  margin-right: ${({theme:mr})=>mr.spaces[6]};

  svg {
    width: 3.2rem;
    height: 3.2rem;
  }
`;dt$3(Typography)`
  color: ${({theme:mr})=>mr.colors.neutral800};
  word-break: break-all;
`;const useFetchClient=()=>{const mr=reactExports.useRef(null);return mr.current===null&&(mr.current=new AbortController),reactExports.useEffect(()=>()=>{mr.current.abort()},[]),reactExports.useMemo(()=>getFetchClient({signal:mr.current.signal}),[])},usersService=adminApi.enhanceEndpoints({addTagTypes:["LicenseLimits","User","Role","RolePermissions"]}).injectEndpoints({endpoints:mr=>({createUser:mr.mutation({query:hr=>({url:"/admin/users",method:"POST",data:hr}),transformResponse:hr=>hr.data,invalidatesTags:["LicenseLimits",{type:"User",id:"LIST"}]}),updateUser:mr.mutation({query:({id:hr,...gr})=>({url:`/admin/users/${hr}`,method:"PUT",data:gr}),invalidatesTags:(hr,gr,{id:vr})=>[{type:"User",id:vr},{type:"User",id:"LIST"}]}),getUsers:mr.query({query:({id:hr,...gr}={})=>({url:`/admin/users/${hr??""}`,method:"GET",config:{params:gr}}),transformResponse:hr=>{let gr=[];return hr.data&&("results"in hr.data?Array.isArray(hr.data.results)&&(gr=hr.data.results):gr=[hr.data]),{users:gr,pagination:"pagination"in hr.data?hr.data.pagination:null}},providesTags:(hr,gr,vr)=>typeof vr=="object"&&"id"in vr?[{type:"User",id:vr.id}]:[...hr?.users.map(({id:xr})=>({type:"User",id:xr}))??[],{type:"User",id:"LIST"}]}),deleteManyUsers:mr.mutation({query:hr=>({url:"/admin/users/batch-delete",method:"POST",data:hr}),transformResponse:hr=>hr.data,invalidatesTags:["LicenseLimits",{type:"User",id:"LIST"}]}),createRole:mr.mutation({query:hr=>({url:"/admin/roles",method:"POST",data:hr}),transformResponse:hr=>hr.data,invalidatesTags:[{type:"Role",id:"LIST"}]}),getRoles:mr.query({query:({id:hr,...gr}={})=>({url:`/admin/roles/${hr??""}`,method:"GET",config:{params:gr}}),transformResponse:hr=>{let gr=[];return hr.data&&(Array.isArray(hr.data)?gr=hr.data:gr=[hr.data]),gr},providesTags:(hr,gr,vr)=>typeof vr=="object"&&"id"in vr?[{type:"Role",id:vr.id}]:[...hr?.map(({id:xr})=>({type:"Role",id:xr}))??[],{type:"Role",id:"LIST"}]}),updateRole:mr.mutation({query:({id:hr,...gr})=>({url:`/admin/roles/${hr}`,method:"PUT",data:gr}),transformResponse:hr=>hr.data,invalidatesTags:(hr,gr,{id:vr})=>[{type:"Role",id:vr}]}),getRolePermissions:mr.query({query:({id:hr,...gr})=>({url:`/admin/roles/${hr}/permissions`,method:"GET",config:{params:gr}}),transformResponse:hr=>hr.data,providesTags:(hr,gr,{id:vr})=>[{type:"RolePermissions",id:vr}]}),updateRolePermissions:mr.mutation({query:({id:hr,...gr})=>({url:`/admin/roles/${hr}/permissions`,method:"PUT",data:gr}),transformResponse:hr=>hr.data,invalidatesTags:(hr,gr,{id:vr})=>[{type:"RolePermissions",id:vr}]}),getRolePermissionLayout:mr.query({query:hr=>({url:"/admin/permissions",method:"GET",config:{params:hr}}),transformResponse:hr=>hr.data})}),overrideExisting:!1}),{useCreateUserMutation,useGetUsersQuery,useUpdateUserMutation,useDeleteManyUsersMutation,useGetRolesQuery,useCreateRoleMutation,useUpdateRoleMutation,useGetRolePermissionsQuery,useGetRolePermissionLayoutQuery,useUpdateRolePermissionsMutation}=usersService,useAdminUsers=useGetUsersQuery;var pluralize={exports:{}};(function(mr,hr){(function(gr,vr){typeof commonjsRequire=="function"?mr.exports=vr():gr.pluralize=vr()})(commonjsGlobal$1,function(){var gr=[],vr=[],xr={},Er={},Cr={};function wr(zr){return typeof zr=="string"?new RegExp("^"+zr+"$","i"):zr}function Rr(zr,Qr){return zr===Qr?Qr:zr===zr.toLowerCase()?Qr.toLowerCase():zr===zr.toUpperCase()?Qr.toUpperCase():zr[0]===zr[0].toUpperCase()?Qr.charAt(0).toUpperCase()+Qr.substr(1).toLowerCase():Qr.toLowerCase()}function kr(zr,Qr){return zr.replace(/\$(\d{1,2})/g,function(sn,hn){return Qr[hn]||""})}function Dr(zr,Qr){return zr.replace(Qr[0],function(sn,hn){var vn=kr(Qr[1],arguments);return Rr(sn===""?zr[hn-1]:sn,vn)})}function Br(zr,Qr,sn){if(!zr.length||xr.hasOwnProperty(zr))return Qr;for(var hn=sn.length;hn--;){var vn=sn[hn];if(vn[0].test(Qr))return Dr(Qr,vn)}return Qr}function Hr(zr,Qr,sn){return function(hn){var vn=hn.toLowerCase();return Qr.hasOwnProperty(vn)?Rr(hn,vn):zr.hasOwnProperty(vn)?Rr(hn,zr[vn]):Br(vn,hn,sn)}}function Gr(zr,Qr,sn,hn){return function(vn){var yn=vn.toLowerCase();return Qr.hasOwnProperty(yn)?!0:zr.hasOwnProperty(yn)?!1:Br(yn,yn,sn)===yn}}function qr(zr,Qr,sn){var hn=Qr===1?qr.singular(zr):qr.plural(zr);return(sn?Qr+" ":"")+hn}return qr.plural=Hr(Cr,Er,gr),qr.isPlural=Gr(Cr,Er,gr),qr.singular=Hr(Er,Cr,vr),qr.isSingular=Gr(Er,Cr,vr),qr.addPluralRule=function(zr,Qr){gr.push([wr(zr),Qr])},qr.addSingularRule=function(zr,Qr){vr.push([wr(zr),Qr])},qr.addUncountableRule=function(zr){if(typeof zr=="string"){xr[zr.toLowerCase()]=!0;return}qr.addPluralRule(zr,"$0"),qr.addSingularRule(zr,"$0")},qr.addIrregularRule=function(zr,Qr){Qr=Qr.toLowerCase(),zr=zr.toLowerCase(),Cr[zr]=Qr,Er[Qr]=zr},[["I","we"],["me","us"],["he","they"],["she","they"],["them","them"],["myself","ourselves"],["yourself","yourselves"],["itself","themselves"],["herself","themselves"],["himself","themselves"],["themself","themselves"],["is","are"],["was","were"],["has","have"],["this","these"],["that","those"],["echo","echoes"],["dingo","dingoes"],["volcano","volcanoes"],["tornado","tornadoes"],["torpedo","torpedoes"],["genus","genera"],["viscus","viscera"],["stigma","stigmata"],["stoma","stomata"],["dogma","dogmata"],["lemma","lemmata"],["schema","schemata"],["anathema","anathemata"],["ox","oxen"],["axe","axes"],["die","dice"],["yes","yeses"],["foot","feet"],["eave","eaves"],["goose","geese"],["tooth","teeth"],["quiz","quizzes"],["human","humans"],["proof","proofs"],["carve","carves"],["valve","valves"],["looey","looies"],["thief","thieves"],["groove","grooves"],["pickaxe","pickaxes"],["passerby","passersby"]].forEach(function(zr){return qr.addIrregularRule(zr[0],zr[1])}),[[/s?$/i,"s"],[/[^\u0000-\u007F]$/i,"$0"],[/([^aeiou]ese)$/i,"$1"],[/(ax|test)is$/i,"$1es"],[/(alias|[^aou]us|t[lm]as|gas|ris)$/i,"$1es"],[/(e[mn]u)s?$/i,"$1s"],[/([^l]ias|[aeiou]las|[ejzr]as|[iu]am)$/i,"$1"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1i"],[/(alumn|alg|vertebr)(?:a|ae)$/i,"$1ae"],[/(seraph|cherub)(?:im)?$/i,"$1im"],[/(her|at|gr)o$/i,"$1oes"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|automat|quor)(?:a|um)$/i,"$1a"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)(?:a|on)$/i,"$1a"],[/sis$/i,"ses"],[/(?:(kni|wi|li)fe|(ar|l|ea|eo|oa|hoo)f)$/i,"$1$2ves"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/([^ch][ieo][ln])ey$/i,"$1ies"],[/(x|ch|ss|sh|zz)$/i,"$1es"],[/(matr|cod|mur|sil|vert|ind|append)(?:ix|ex)$/i,"$1ices"],[/\b((?:tit)?m|l)(?:ice|ouse)$/i,"$1ice"],[/(pe)(?:rson|ople)$/i,"$1ople"],[/(child)(?:ren)?$/i,"$1ren"],[/eaux$/i,"$0"],[/m[ae]n$/i,"men"],["thou","you"]].forEach(function(zr){return qr.addPluralRule(zr[0],zr[1])}),[[/s$/i,""],[/(ss)$/i,"$1"],[/(wi|kni|(?:after|half|high|low|mid|non|night|[^\w]|^)li)ves$/i,"$1fe"],[/(ar|(?:wo|[ae])l|[eo][ao])ves$/i,"$1f"],[/ies$/i,"y"],[/\b([pl]|zomb|(?:neck|cross)?t|coll|faer|food|gen|goon|group|lass|talk|goal|cut)ies$/i,"$1ie"],[/\b(mon|smil)ies$/i,"$1ey"],[/\b((?:tit)?m|l)ice$/i,"$1ouse"],[/(seraph|cherub)im$/i,"$1"],[/(x|ch|ss|sh|zz|tto|go|cho|alias|[^aou]us|t[lm]as|gas|(?:her|at|gr)o|[aeiou]ris)(?:es)?$/i,"$1"],[/(analy|diagno|parenthe|progno|synop|the|empha|cri|ne)(?:sis|ses)$/i,"$1sis"],[/(movie|twelve|abuse|e[mn]u)s$/i,"$1"],[/(test)(?:is|es)$/i,"$1is"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1us"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|quor)a$/i,"$1um"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)a$/i,"$1on"],[/(alumn|alg|vertebr)ae$/i,"$1a"],[/(cod|mur|sil|vert|ind)ices$/i,"$1ex"],[/(matr|append)ices$/i,"$1ix"],[/(pe)(rson|ople)$/i,"$1rson"],[/(child)ren$/i,"$1"],[/(eau)x?$/i,"$1"],[/men$/i,"man"]].forEach(function(zr){return qr.addSingularRule(zr[0],zr[1])}),["adulthood","advice","agenda","aid","aircraft","alcohol","ammo","analytics","anime","athletics","audio","bison","blood","bream","buffalo","butter","carp","cash","chassis","chess","clothing","cod","commerce","cooperation","corps","debris","diabetes","digestion","elk","energy","equipment","excretion","expertise","firmware","flounder","fun","gallows","garbage","graffiti","hardware","headquarters","health","herpes","highjinks","homework","housework","information","jeans","justice","kudos","labour","literature","machinery","mackerel","mail","media","mews","moose","music","mud","manga","news","only","personnel","pike","plankton","pliers","police","pollution","premises","rain","research","rice","salmon","scissors","series","sewage","shambles","shrimp","software","species","staff","swine","tennis","traffic","transportation","trout","tuna","wealth","welfare","whiting","wildebeest","wildlife","you",/pok[eé]mon$/i,/[^aeiou]ese$/i,/deer$/i,/fish$/i,/measles$/i,/o[iu]s$/i,/pox$/i,/sheep$/i].forEach(qr.addUncountableRule),qr})})(pluralize);var slugify$1={exports:{}},escapeStringRegexp$3=mr=>{if(typeof mr!="string")throw new TypeError("Expected a string");return mr.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")},INFINITY=1/0,symbolTag="[object Symbol]",reLatin=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,rsComboMarksRange="\\u0300-\\u036f\\ufe20-\\ufe23",rsComboSymbolsRange="\\u20d0-\\u20f0",rsCombo="["+rsComboMarksRange+rsComboSymbolsRange+"]",reComboMark=RegExp(rsCombo,"g"),deburredLetters={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"ss"},freeGlobal=typeof commonjsGlobal$1=="object"&&commonjsGlobal$1&&commonjsGlobal$1.Object===Object&&commonjsGlobal$1,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")();function basePropertyOf(mr){return function(hr){return mr?.[hr]}}var deburrLetter=basePropertyOf(deburredLetters),objectProto$1=Object.prototype,objectToString=objectProto$1.toString,Symbol$1=root.Symbol,symbolProto=Symbol$1?Symbol$1.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0;function baseToString(mr){if(typeof mr=="string")return mr;if(isSymbol(mr))return symbolToString?symbolToString.call(mr):"";var hr=mr+"";return hr=="0"&&1/mr==-INFINITY?"-0":hr}function isObjectLike(mr){return!!mr&&typeof mr=="object"}function isSymbol(mr){return typeof mr=="symbol"||isObjectLike(mr)&&objectToString.call(mr)==symbolTag}function toString(mr){return mr==null?"":baseToString(mr)}function deburr$1(mr){return mr=toString(mr),mr&&mr.replace(reLatin,deburrLetter).replace(reComboMark,"")}var lodash_deburr=deburr$1;const matchOperatorsRegex=/[|\\{}()[\]^$+*?.-]/g;var escapeStringRegexp$2=mr=>{if(typeof mr!="string")throw new TypeError("Expected a string");return mr.replace(matchOperatorsRegex,"\\$&")},replacements=[["ß","ss"],["ä","ae"],["Ä","Ae"],["ö","oe"],["Ö","Oe"],["ü","ue"],["Ü","Ue"],["À","A"],["Á","A"],["Â","A"],["Ã","A"],["Ä","Ae"],["Å","A"],["Æ","AE"],["Ç","C"],["È","E"],["É","E"],["Ê","E"],["Ë","E"],["Ì","I"],["Í","I"],["Î","I"],["Ï","I"],["Ð","D"],["Ñ","N"],["Ò","O"],["Ó","O"],["Ô","O"],["Õ","O"],["Ö","Oe"],["Ő","O"],["Ø","O"],["Ù","U"],["Ú","U"],["Û","U"],["Ü","Ue"],["Ű","U"],["Ý","Y"],["Þ","TH"],["ß","ss"],["à","a"],["á","a"],["â","a"],["ã","a"],["ä","ae"],["å","a"],["æ","ae"],["ç","c"],["è","e"],["é","e"],["ê","e"],["ë","e"],["ì","i"],["í","i"],["î","i"],["ï","i"],["ð","d"],["ñ","n"],["ò","o"],["ó","o"],["ô","o"],["õ","o"],["ö","oe"],["ő","o"],["ø","o"],["ù","u"],["ú","u"],["û","u"],["ü","ue"],["ű","u"],["ý","y"],["þ","th"],["ÿ","y"],["ẞ","SS"],["à","a"],["À","A"],["á","a"],["Á","A"],["â","a"],["Â","A"],["ã","a"],["Ã","A"],["è","e"],["È","E"],["é","e"],["É","E"],["ê","e"],["Ê","E"],["ì","i"],["Ì","I"],["í","i"],["Í","I"],["ò","o"],["Ò","O"],["ó","o"],["Ó","O"],["ô","o"],["Ô","O"],["õ","o"],["Õ","O"],["ù","u"],["Ù","U"],["ú","u"],["Ú","U"],["ý","y"],["Ý","Y"],["ă","a"],["Ă","A"],["Đ","D"],["đ","d"],["ĩ","i"],["Ĩ","I"],["ũ","u"],["Ũ","U"],["ơ","o"],["Ơ","O"],["ư","u"],["Ư","U"],["ạ","a"],["Ạ","A"],["ả","a"],["Ả","A"],["ấ","a"],["Ấ","A"],["ầ","a"],["Ầ","A"],["ẩ","a"],["Ẩ","A"],["ẫ","a"],["Ẫ","A"],["ậ","a"],["Ậ","A"],["ắ","a"],["Ắ","A"],["ằ","a"],["Ằ","A"],["ẳ","a"],["Ẳ","A"],["ẵ","a"],["Ẵ","A"],["ặ","a"],["Ặ","A"],["ẹ","e"],["Ẹ","E"],["ẻ","e"],["Ẻ","E"],["ẽ","e"],["Ẽ","E"],["ế","e"],["Ế","E"],["ề","e"],["Ề","E"],["ể","e"],["Ể","E"],["ễ","e"],["Ễ","E"],["ệ","e"],["Ệ","E"],["ỉ","i"],["Ỉ","I"],["ị","i"],["Ị","I"],["ọ","o"],["Ọ","O"],["ỏ","o"],["Ỏ","O"],["ố","o"],["Ố","O"],["ồ","o"],["Ồ","O"],["ổ","o"],["Ổ","O"],["ỗ","o"],["Ỗ","O"],["ộ","o"],["Ộ","O"],["ớ","o"],["Ớ","O"],["ờ","o"],["Ờ","O"],["ở","o"],["Ở","O"],["ỡ","o"],["Ỡ","O"],["ợ","o"],["Ợ","O"],["ụ","u"],["Ụ","U"],["ủ","u"],["Ủ","U"],["ứ","u"],["Ứ","U"],["ừ","u"],["Ừ","U"],["ử","u"],["Ử","U"],["ữ","u"],["Ữ","U"],["ự","u"],["Ự","U"],["ỳ","y"],["Ỳ","Y"],["ỵ","y"],["Ỵ","Y"],["ỷ","y"],["Ỷ","Y"],["ỹ","y"],["Ỹ","Y"],["ء","e"],["آ","a"],["أ","a"],["ؤ","w"],["إ","i"],["ئ","y"],["ا","a"],["ب","b"],["ة","t"],["ت","t"],["ث","th"],["ج","j"],["ح","h"],["خ","kh"],["د","d"],["ذ","dh"],["ر","r"],["ز","z"],["س","s"],["ش","sh"],["ص","s"],["ض","d"],["ط","t"],["ظ","z"],["ع","e"],["غ","gh"],["ـ","_"],["ف","f"],["ق","q"],["ك","k"],["ل","l"],["م","m"],["ن","n"],["ه","h"],["و","w"],["ى","a"],["ي","y"],["َ‎","a"],["ُ","u"],["ِ‎","i"],["٠","0"],["١","1"],["٢","2"],["٣","3"],["٤","4"],["٥","5"],["٦","6"],["٧","7"],["٨","8"],["٩","9"],["چ","ch"],["ک","k"],["گ","g"],["پ","p"],["ژ","zh"],["ی","y"],["۰","0"],["۱","1"],["۲","2"],["۳","3"],["۴","4"],["۵","5"],["۶","6"],["۷","7"],["۸","8"],["۹","9"],["ټ","p"],["ځ","z"],["څ","c"],["ډ","d"],["ﺫ","d"],["ﺭ","r"],["ړ","r"],["ﺯ","z"],["ږ","g"],["ښ","x"],["ګ","g"],["ڼ","n"],["ۀ","e"],["ې","e"],["ۍ","ai"],["ٹ","t"],["ڈ","d"],["ڑ","r"],["ں","n"],["ہ","h"],["ھ","h"],["ے","e"],["А","A"],["а","a"],["Б","B"],["б","b"],["В","V"],["в","v"],["Г","G"],["г","g"],["Д","D"],["д","d"],["Е","E"],["е","e"],["Ж","Zh"],["ж","zh"],["З","Z"],["з","z"],["И","I"],["и","i"],["Й","J"],["й","j"],["К","K"],["к","k"],["Л","L"],["л","l"],["М","M"],["м","m"],["Н","N"],["н","n"],["О","O"],["о","o"],["П","P"],["п","p"],["Р","R"],["р","r"],["С","S"],["с","s"],["Т","T"],["т","t"],["У","U"],["у","u"],["Ф","F"],["ф","f"],["Х","H"],["х","h"],["Ц","Cz"],["ц","cz"],["Ч","Ch"],["ч","ch"],["Ш","Sh"],["ш","sh"],["Щ","Shh"],["щ","shh"],["Ъ",""],["ъ",""],["Ы","Y"],["ы","y"],["Ь",""],["ь",""],["Э","E"],["э","e"],["Ю","Yu"],["ю","yu"],["Я","Ya"],["я","ya"],["Ё","Yo"],["ё","yo"],["ă","a"],["Ă","A"],["ș","s"],["Ș","S"],["ț","t"],["Ț","T"],["ţ","t"],["Ţ","T"],["ş","s"],["Ş","S"],["ç","c"],["Ç","C"],["ğ","g"],["Ğ","G"],["ı","i"],["İ","I"],["ա","a"],["Ա","A"],["բ","b"],["Բ","B"],["գ","g"],["Գ","G"],["դ","d"],["Դ","D"],["ե","ye"],["Ե","Ye"],["զ","z"],["Զ","Z"],["է","e"],["Է","E"],["ը","y"],["Ը","Y"],["թ","t"],["Թ","T"],["ժ","zh"],["Ժ","Zh"],["ի","i"],["Ի","I"],["լ","l"],["Լ","L"],["խ","kh"],["Խ","Kh"],["ծ","ts"],["Ծ","Ts"],["կ","k"],["Կ","K"],["հ","h"],["Հ","H"],["ձ","dz"],["Ձ","Dz"],["ղ","gh"],["Ղ","Gh"],["ճ","tch"],["Ճ","Tch"],["մ","m"],["Մ","M"],["յ","y"],["Յ","Y"],["ն","n"],["Ն","N"],["շ","sh"],["Շ","Sh"],["ո","vo"],["Ո","Vo"],["չ","ch"],["Չ","Ch"],["պ","p"],["Պ","P"],["ջ","j"],["Ջ","J"],["ռ","r"],["Ռ","R"],["ս","s"],["Ս","S"],["վ","v"],["Վ","V"],["տ","t"],["Տ","T"],["ր","r"],["Ր","R"],["ց","c"],["Ց","C"],["ու","u"],["ՈՒ","U"],["Ու","U"],["փ","p"],["Փ","P"],["ք","q"],["Ք","Q"],["օ","o"],["Օ","O"],["ֆ","f"],["Ֆ","F"],["և","yev"],["ა","a"],["ბ","b"],["გ","g"],["დ","d"],["ე","e"],["ვ","v"],["ზ","z"],["თ","t"],["ი","i"],["კ","k"],["ლ","l"],["მ","m"],["ნ","n"],["ო","o"],["პ","p"],["ჟ","zh"],["რ","r"],["ს","s"],["ტ","t"],["უ","u"],["ფ","ph"],["ქ","q"],["ღ","gh"],["ყ","k"],["შ","sh"],["ჩ","ch"],["ც","ts"],["ძ","dz"],["წ","ts"],["ჭ","tch"],["ხ","kh"],["ჯ","j"],["ჰ","h"],["č","c"],["ď","d"],["ě","e"],["ň","n"],["ř","r"],["š","s"],["ť","t"],["ů","u"],["ž","z"],["Č","C"],["Ď","D"],["Ě","E"],["Ň","N"],["Ř","R"],["Š","S"],["Ť","T"],["Ů","U"],["Ž","Z"],["ހ","h"],["ށ","sh"],["ނ","n"],["ރ","r"],["ބ","b"],["ޅ","lh"],["ކ","k"],["އ","a"],["ވ","v"],["މ","m"],["ފ","f"],["ދ","dh"],["ތ","th"],["ލ","l"],["ގ","g"],["ޏ","gn"],["ސ","s"],["ޑ","d"],["ޒ","z"],["ޓ","t"],["ޔ","y"],["ޕ","p"],["ޖ","j"],["ޗ","ch"],["ޘ","tt"],["ޙ","hh"],["ޚ","kh"],["ޛ","th"],["ޜ","z"],["ޝ","sh"],["ޞ","s"],["ޟ","d"],["ޠ","t"],["ޡ","z"],["ޢ","a"],["ޣ","gh"],["ޤ","q"],["ޥ","w"],["ަ","a"],["ާ","aa"],["ި","i"],["ީ","ee"],["ު","u"],["ޫ","oo"],["ެ","e"],["ޭ","ey"],["ޮ","o"],["ޯ","oa"],["ް",""],["α","a"],["β","v"],["γ","g"],["δ","d"],["ε","e"],["ζ","z"],["η","i"],["θ","th"],["ι","i"],["κ","k"],["λ","l"],["μ","m"],["ν","n"],["ξ","ks"],["ο","o"],["π","p"],["ρ","r"],["σ","s"],["τ","t"],["υ","y"],["φ","f"],["χ","x"],["ψ","ps"],["ω","o"],["ά","a"],["έ","e"],["ί","i"],["ό","o"],["ύ","y"],["ή","i"],["ώ","o"],["ς","s"],["ϊ","i"],["ΰ","y"],["ϋ","y"],["ΐ","i"],["Α","A"],["Β","B"],["Γ","G"],["Δ","D"],["Ε","E"],["Ζ","Z"],["Η","I"],["Θ","TH"],["Ι","I"],["Κ","K"],["Λ","L"],["Μ","M"],["Ν","N"],["Ξ","KS"],["Ο","O"],["Π","P"],["Ρ","R"],["Σ","S"],["Τ","T"],["Υ","Y"],["Φ","F"],["Χ","X"],["Ψ","PS"],["Ω","O"],["Ά","A"],["Έ","E"],["Ί","I"],["Ό","O"],["Ύ","Y"],["Ή","I"],["Ώ","O"],["Ϊ","I"],["Ϋ","Y"],["ā","a"],["ē","e"],["ģ","g"],["ī","i"],["ķ","k"],["ļ","l"],["ņ","n"],["ū","u"],["Ā","A"],["Ē","E"],["Ģ","G"],["Ī","I"],["Ķ","K"],["Ļ","L"],["Ņ","N"],["Ū","U"],["č","c"],["š","s"],["ž","z"],["Č","C"],["Š","S"],["Ž","Z"],["ą","a"],["č","c"],["ę","e"],["ė","e"],["į","i"],["š","s"],["ų","u"],["ū","u"],["ž","z"],["Ą","A"],["Č","C"],["Ę","E"],["Ė","E"],["Į","I"],["Š","S"],["Ų","U"],["Ū","U"],["Ќ","Kj"],["ќ","kj"],["Љ","Lj"],["љ","lj"],["Њ","Nj"],["њ","nj"],["Тс","Ts"],["тс","ts"],["ą","a"],["ć","c"],["ę","e"],["ł","l"],["ń","n"],["ś","s"],["ź","z"],["ż","z"],["Ą","A"],["Ć","C"],["Ę","E"],["Ł","L"],["Ń","N"],["Ś","S"],["Ź","Z"],["Ż","Z"],["Є","Ye"],["І","I"],["Ї","Yi"],["Ґ","G"],["є","ye"],["і","i"],["ї","yi"],["ґ","g"]];const deburr=lodash_deburr,escapeStringRegexp$1=escapeStringRegexp$2,builtinReplacements=replacements,doCustomReplacements=(mr,hr)=>{for(const[gr,vr]of hr)mr=mr.replace(new RegExp(escapeStringRegexp$1(gr),"g"),vr);return mr};var transliterate$1=(mr,hr)=>{if(typeof mr!="string")throw new TypeError(`Expected a string, got \`${typeof mr}\``);hr={customReplacements:[],...hr};const gr=new Map([...builtinReplacements,...hr.customReplacements]);return mr=mr.normalize(),mr=doCustomReplacements(mr,gr),mr=deburr(mr),mr},overridableReplacements=[["&"," and "],["🦄"," unicorn "],["♥"," love "]];const escapeStringRegexp=escapeStringRegexp$3,transliterate=transliterate$1,builtinOverridableReplacements=overridableReplacements,decamelize=mr=>mr.replace(/([A-Z]{2,})(\d+)/g,"$1 $2").replace(/([a-z\d]+)([A-Z]{2,})/g,"$1 $2").replace(/([a-z\d])([A-Z])/g,"$1 $2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1 $2"),removeMootSeparators=(mr,hr)=>{const gr=escapeStringRegexp(hr);return mr.replace(new RegExp(`${gr}{2,}`,"g"),hr).replace(new RegExp(`^${gr}|${gr}$`,"g"),"")},slugify=(mr,hr)=>{if(typeof mr!="string")throw new TypeError(`Expected a string, got \`${typeof mr}\``);hr={separator:"-",lowercase:!0,decamelize:!0,customReplacements:[],preserveLeadingUnderscore:!1,...hr};const gr=hr.preserveLeadingUnderscore&&mr.startsWith("_"),vr=new Map([...builtinOverridableReplacements,...hr.customReplacements]);mr=transliterate(mr,{customReplacements:vr}),hr.decamelize&&(mr=decamelize(mr));let xr=/[^a-zA-Z\d]+/g;return hr.lowercase&&(mr=mr.toLowerCase(),xr=/[^a-z\d]+/g),mr=mr.replace(xr,hr.separator),mr=mr.replace(/\\/g,""),hr.separator&&(mr=removeMootSeparators(mr,hr.separator)),gr&&(mr=`_${mr}`),mr},counter=()=>{const mr=new Map,hr=(gr,vr)=>{if(gr=slugify(gr,vr),!gr)return"";const xr=gr.toLowerCase(),Er=mr.get(xr.replace(/(?:-\d+?)+?$/,""))||0,Cr=mr.get(xr);mr.set(xr,typeof Cr=="number"?Cr+1:1);const wr=mr.get(xr)||2;return(wr>=2||Er>2)&&(gr=`${gr}-${wr}`),gr};return hr.reset=()=>{mr.clear()},hr};slugify$1.exports=slugify;slugify$1.exports.counter=counter;reactExports.createContext({});const rotation=mt$3`
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(359deg);
    }
  `;dt$3(ForwardRef$59)`
  animation: ${rotation} 1s infinite linear;
`;dt$3(Flex)`
  position: fixed;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  /* TODO: set this up in the theme for consistence z-index values */
  z-index: 1140;
  padding-top: 16rem;

  & > * {
    position: relative;
    z-index: 1;
  }

  &:before {
    content: '';
    position: fixed;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    background: ${({theme:mr})=>mr.colors.neutral0};
    opacity: 0.9;
  }
`;dt$3(Box)`
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  svg {
    > path {
      fill: ${({theme:mr})=>mr.colors.primary600} !important;
    }
  }
`;var convert=convert_1,func=convert("mapValues",requireMapValues());func.placeholder=requirePlaceholder();function invariant$2(mr,hr,gr){if(gr===void 0&&(gr=Error),!mr)throw new gr(hr)}var defaultErrorHandler$1=function(mr){},defaultWarnHandler$1=function(mr){},DEFAULT_INTL_CONFIG$1={formats:{},messages:{},timeZone:void 0,defaultLocale:"en",defaultFormats:{},fallbackOnEmptyString:!0,onError:defaultErrorHandler$1,onWarn:defaultWarnHandler$1};function invariantIntlContext$1(mr){invariant$2(mr,"[React Intl] Could not find required `intl` object. <IntlProvider> needs to exist in the component ancestry.")}__assign(__assign({},DEFAULT_INTL_CONFIG$1),{textComponent:reactExports.Fragment});var IntlContext$1=typeof window<"u"&&!window.__REACT_INTL_BYPASS_GLOBAL_CONTEXT__?window.__REACT_INTL_CONTEXT__||(window.__REACT_INTL_CONTEXT__=reactExports.createContext(null)):reactExports.createContext(null);IntlContext$1.Consumer;IntlContext$1.Provider;var Context$1=IntlContext$1;function useIntl$1(){var mr=reactExports.useContext(Context$1);return invariantIntlContext$1(mr),mr}var DisplayName$1;(function(mr){mr.formatDate="FormattedDate",mr.formatTime="FormattedTime",mr.formatNumber="FormattedNumber",mr.formatList="FormattedList",mr.formatDisplayName="FormattedDisplayName"})(DisplayName$1||(DisplayName$1={}));var DisplayNameParts$1;(function(mr){mr.formatDate="FormattedDateParts",mr.formatTime="FormattedTimeParts",mr.formatNumber="FormattedNumberParts",mr.formatList="FormattedListParts"})(DisplayNameParts$1||(DisplayNameParts$1={}));function createFormattedDateTimePartsComponent$1(mr){var hr=function(gr){var vr=useIntl$1(),xr=gr.value,Er=gr.children,Cr=__rest(gr,["value","children"]),wr=typeof xr=="string"?new Date(xr||0):xr,Rr=mr==="formatDate"?vr.formatDateToParts(wr,Cr):vr.formatTimeToParts(wr,Cr);return Er(Rr)};return hr.displayName=DisplayNameParts$1[mr],hr}function createFormattedComponent$1(mr){var hr=function(gr){var vr=useIntl$1(),xr=gr.value,Er=gr.children,Cr=__rest(gr,["value","children"]),wr=vr[mr](xr,Cr);if(typeof Er=="function")return Er(wr);var Rr=vr.textComponent||reactExports.Fragment;return reactExports.createElement(Rr,null,wr)};return hr.displayName=DisplayName$1[mr],hr}createFormattedComponent$1("formatDate");createFormattedComponent$1("formatTime");createFormattedComponent$1("formatNumber");createFormattedComponent$1("formatList");createFormattedComponent$1("formatDisplayName");createFormattedDateTimePartsComponent$1("formatDate");createFormattedDateTimePartsComponent$1("formatTime");function toInteger$1(mr){if(mr===null||mr===!0||mr===!1)return NaN;var hr=Number(mr);return isNaN(hr)?hr:hr<0?Math.ceil(hr):Math.floor(hr)}function requiredArgs(mr,hr){if(hr.length<mr)throw new TypeError(mr+" argument"+(mr>1?"s":"")+" required, but only "+hr.length+" present")}function toDate(mr){requiredArgs(1,arguments);var hr=Object.prototype.toString.call(mr);return mr instanceof Date||_typeof$1(mr)==="object"&&hr==="[object Date]"?new Date(mr.getTime()):typeof mr=="number"||hr==="[object Number]"?new Date(mr):((typeof mr=="string"||hr==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function addDays(mr,hr){requiredArgs(2,arguments);var gr=toDate(mr),vr=toInteger$1(hr);return isNaN(vr)?new Date(NaN):(vr&&gr.setDate(gr.getDate()+vr),gr)}function addMonths(mr,hr){requiredArgs(2,arguments);var gr=toDate(mr),vr=toInteger$1(hr);if(isNaN(vr))return new Date(NaN);if(!vr)return gr;var xr=gr.getDate(),Er=new Date(gr.getTime());Er.setMonth(gr.getMonth()+vr+1,0);var Cr=Er.getDate();return xr>=Cr?Er:(gr.setFullYear(Er.getFullYear(),Er.getMonth(),xr),gr)}function add(mr,hr){if(requiredArgs(2,arguments),!hr||_typeof$1(hr)!=="object")return new Date(NaN);var gr=hr.years?toInteger$1(hr.years):0,vr=hr.months?toInteger$1(hr.months):0,xr=hr.weeks?toInteger$1(hr.weeks):0,Er=hr.days?toInteger$1(hr.days):0,Cr=hr.hours?toInteger$1(hr.hours):0,wr=hr.minutes?toInteger$1(hr.minutes):0,Rr=hr.seconds?toInteger$1(hr.seconds):0,kr=toDate(mr),Dr=vr||gr?addMonths(kr,vr+gr*12):kr,Br=Er||xr?addDays(Dr,Er+xr*7):Dr,Hr=wr+Cr*60,Gr=Rr+Hr*60,qr=Gr*1e3,zr=new Date(Br.getTime()+qr);return zr}function getTimezoneOffsetInMilliseconds(mr){var hr=new Date(Date.UTC(mr.getFullYear(),mr.getMonth(),mr.getDate(),mr.getHours(),mr.getMinutes(),mr.getSeconds(),mr.getMilliseconds()));return hr.setUTCFullYear(mr.getFullYear()),mr.getTime()-hr.getTime()}function startOfDay(mr){requiredArgs(1,arguments);var hr=toDate(mr);return hr.setHours(0,0,0,0),hr}var MILLISECONDS_IN_DAY=864e5;function differenceInCalendarDays(mr,hr){requiredArgs(2,arguments);var gr=startOfDay(mr),vr=startOfDay(hr),xr=gr.getTime()-getTimezoneOffsetInMilliseconds(gr),Er=vr.getTime()-getTimezoneOffsetInMilliseconds(vr);return Math.round((xr-Er)/MILLISECONDS_IN_DAY)}function compareAsc(mr,hr){requiredArgs(2,arguments);var gr=toDate(mr),vr=toDate(hr),xr=gr.getTime()-vr.getTime();return xr<0?-1:xr>0?1:xr}var millisecondsInMinute=6e4,millisecondsInHour=36e5;function differenceInCalendarMonths(mr,hr){requiredArgs(2,arguments);var gr=toDate(mr),vr=toDate(hr),xr=gr.getFullYear()-vr.getFullYear(),Er=gr.getMonth()-vr.getMonth();return xr*12+Er}function differenceInCalendarYears(mr,hr){requiredArgs(2,arguments);var gr=toDate(mr),vr=toDate(hr);return gr.getFullYear()-vr.getFullYear()}function compareLocalAsc(mr,hr){var gr=mr.getFullYear()-hr.getFullYear()||mr.getMonth()-hr.getMonth()||mr.getDate()-hr.getDate()||mr.getHours()-hr.getHours()||mr.getMinutes()-hr.getMinutes()||mr.getSeconds()-hr.getSeconds()||mr.getMilliseconds()-hr.getMilliseconds();return gr<0?-1:gr>0?1:gr}function differenceInDays(mr,hr){requiredArgs(2,arguments);var gr=toDate(mr),vr=toDate(hr),xr=compareLocalAsc(gr,vr),Er=Math.abs(differenceInCalendarDays(gr,vr));gr.setDate(gr.getDate()-xr*Er);var Cr=+(compareLocalAsc(gr,vr)===-xr),wr=xr*(Er-Cr);return wr===0?0:wr}function differenceInMilliseconds(mr,hr){return requiredArgs(2,arguments),toDate(mr).getTime()-toDate(hr).getTime()}var roundingMap={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(hr){return hr<0?Math.ceil(hr):Math.floor(hr)}},defaultRoundingMethod="trunc";function getRoundingMethod(mr){return mr?roundingMap[mr]:roundingMap[defaultRoundingMethod]}function differenceInHours(mr,hr,gr){requiredArgs(2,arguments);var vr=differenceInMilliseconds(mr,hr)/millisecondsInHour;return getRoundingMethod(void 0)(vr)}function differenceInMinutes(mr,hr,gr){requiredArgs(2,arguments);var vr=differenceInMilliseconds(mr,hr)/millisecondsInMinute;return getRoundingMethod(void 0)(vr)}function endOfDay(mr){requiredArgs(1,arguments);var hr=toDate(mr);return hr.setHours(23,59,59,999),hr}function endOfMonth(mr){requiredArgs(1,arguments);var hr=toDate(mr),gr=hr.getMonth();return hr.setFullYear(hr.getFullYear(),gr+1,0),hr.setHours(23,59,59,999),hr}function isLastDayOfMonth(mr){requiredArgs(1,arguments);var hr=toDate(mr);return endOfDay(hr).getTime()===endOfMonth(hr).getTime()}function differenceInMonths(mr,hr){requiredArgs(2,arguments);var gr=toDate(mr),vr=toDate(hr),xr=compareAsc(gr,vr),Er=Math.abs(differenceInCalendarMonths(gr,vr)),Cr;if(Er<1)Cr=0;else{gr.getMonth()===1&&gr.getDate()>27&&gr.setDate(30),gr.setMonth(gr.getMonth()-xr*Er);var wr=compareAsc(gr,vr)===-xr;isLastDayOfMonth(toDate(mr))&&Er===1&&compareAsc(mr,vr)===1&&(wr=!1),Cr=xr*(Er-Number(wr))}return Cr===0?0:Cr}function differenceInSeconds(mr,hr,gr){requiredArgs(2,arguments);var vr=differenceInMilliseconds(mr,hr)/1e3;return getRoundingMethod(void 0)(vr)}function differenceInYears(mr,hr){requiredArgs(2,arguments);var gr=toDate(mr),vr=toDate(hr),xr=compareAsc(gr,vr),Er=Math.abs(differenceInCalendarYears(gr,vr));gr.setFullYear(1584),vr.setFullYear(1584);var Cr=compareAsc(gr,vr)===-xr,wr=xr*(Er-Number(Cr));return wr===0?0:wr}function intervalToDuration(mr){requiredArgs(1,arguments);var hr=toDate(mr.start),gr=toDate(mr.end);if(isNaN(hr.getTime()))throw new RangeError("Start Date is invalid");if(isNaN(gr.getTime()))throw new RangeError("End Date is invalid");var vr={};vr.years=Math.abs(differenceInYears(gr,hr));var xr=compareAsc(gr,hr),Er=add(hr,{years:xr*vr.years});vr.months=Math.abs(differenceInMonths(gr,Er));var Cr=add(Er,{months:xr*vr.months});vr.days=Math.abs(differenceInDays(gr,Cr));var wr=add(Cr,{days:xr*vr.days});vr.hours=Math.abs(differenceInHours(gr,wr));var Rr=add(wr,{hours:xr*vr.hours});vr.minutes=Math.abs(differenceInMinutes(gr,Rr));var kr=add(Rr,{minutes:xr*vr.minutes});return vr.seconds=Math.abs(differenceInSeconds(gr,kr)),vr}function _arrayLikeToArray$1(mr,hr){(hr==null||hr>mr.length)&&(hr=mr.length);for(var gr=0,vr=Array(hr);gr<hr;gr++)vr[gr]=mr[gr];return vr}function _unsupportedIterableToArray$1(mr,hr){if(mr){if(typeof mr=="string")return _arrayLikeToArray$1(mr,hr);var gr={}.toString.call(mr).slice(8,-1);return gr==="Object"&&mr.constructor&&(gr=mr.constructor.name),gr==="Map"||gr==="Set"?Array.from(mr):gr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(gr)?_arrayLikeToArray$1(mr,hr):void 0}}function _assertThisInitialized(mr){if(mr===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return mr}function _inherits(mr,hr){if(typeof hr!="function"&&hr!==null)throw new TypeError("Super expression must either be null or a function");mr.prototype=Object.create(hr&&hr.prototype,{constructor:{value:mr,writable:!0,configurable:!0}}),Object.defineProperty(mr,"prototype",{writable:!1}),hr&&_setPrototypeOf(mr,hr)}function _getPrototypeOf(mr){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(hr){return hr.__proto__||Object.getPrototypeOf(hr)},_getPrototypeOf(mr)}function _isNativeReflectConstruct(){try{var mr=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct=function(){return!!mr})()}function _possibleConstructorReturn(mr,hr){if(hr&&(_typeof$1(hr)=="object"||typeof hr=="function"))return hr;if(hr!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(mr)}function _createSuper(mr){var hr=_isNativeReflectConstruct();return function(){var gr,vr=_getPrototypeOf(mr);if(hr){var xr=_getPrototypeOf(this).constructor;gr=Reflect.construct(vr,arguments,xr)}else gr=vr.apply(this,arguments);return _possibleConstructorReturn(this,gr)}}function _classCallCheck$1(mr,hr){if(!(mr instanceof hr))throw new TypeError("Cannot call a class as a function")}function _defineProperties$1(mr,hr){for(var gr=0;gr<hr.length;gr++){var vr=hr[gr];vr.enumerable=vr.enumerable||!1,vr.configurable=!0,"value"in vr&&(vr.writable=!0),Object.defineProperty(mr,toPropertyKey(vr.key),vr)}}function _createClass$1(mr,hr,gr){return hr&&_defineProperties$1(mr.prototype,hr),gr&&_defineProperties$1(mr,gr),Object.defineProperty(mr,"prototype",{writable:!1}),mr}function isPast(mr){return requiredArgs(1,arguments),toDate(mr).getTime()<Date.now()}function parseISO(mr,hr){var gr;requiredArgs(1,arguments);var vr=toInteger$1((gr=void 0)!==null&&gr!==void 0?gr:2);if(vr!==2&&vr!==1&&vr!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof mr=="string"||Object.prototype.toString.call(mr)==="[object String]"))return new Date(NaN);var xr=splitDateString(mr),Er;if(xr.date){var Cr=parseYear(xr.date,vr);Er=parseDate(Cr.restDateString,Cr.year)}if(!Er||isNaN(Er.getTime()))return new Date(NaN);var wr=Er.getTime(),Rr=0,kr;if(xr.time&&(Rr=parseTime(xr.time),isNaN(Rr)))return new Date(NaN);if(xr.timezone){if(kr=parseTimezone(xr.timezone),isNaN(kr))return new Date(NaN)}else{var Dr=new Date(wr+Rr),Br=new Date(0);return Br.setFullYear(Dr.getUTCFullYear(),Dr.getUTCMonth(),Dr.getUTCDate()),Br.setHours(Dr.getUTCHours(),Dr.getUTCMinutes(),Dr.getUTCSeconds(),Dr.getUTCMilliseconds()),Br}return new Date(wr+Rr+kr)}var patterns={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},dateRegex=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,timeRegex=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,timezoneRegex=/^([+-])(\d{2})(?::?(\d{2}))?$/;function splitDateString(mr){var hr={},gr=mr.split(patterns.dateTimeDelimiter),vr;if(gr.length>2)return hr;if(/:/.test(gr[0])?vr=gr[0]:(hr.date=gr[0],vr=gr[1],patterns.timeZoneDelimiter.test(hr.date)&&(hr.date=mr.split(patterns.timeZoneDelimiter)[0],vr=mr.substr(hr.date.length,mr.length))),vr){var xr=patterns.timezone.exec(vr);xr?(hr.time=vr.replace(xr[1],""),hr.timezone=xr[1]):hr.time=vr}return hr}function parseYear(mr,hr){var gr=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+hr)+"})|(\\d{2}|[+-]\\d{"+(2+hr)+"})$)"),vr=mr.match(gr);if(!vr)return{year:NaN,restDateString:""};var xr=vr[1]?parseInt(vr[1]):null,Er=vr[2]?parseInt(vr[2]):null;return{year:Er===null?xr:Er*100,restDateString:mr.slice((vr[1]||vr[2]).length)}}function parseDate(mr,hr){if(hr===null)return new Date(NaN);var gr=mr.match(dateRegex);if(!gr)return new Date(NaN);var vr=!!gr[4],xr=parseDateUnit(gr[1]),Er=parseDateUnit(gr[2])-1,Cr=parseDateUnit(gr[3]),wr=parseDateUnit(gr[4]),Rr=parseDateUnit(gr[5])-1;if(vr)return validateWeekDate(hr,wr,Rr)?dayOfISOWeekYear(hr,wr,Rr):new Date(NaN);var kr=new Date(0);return!validateDate(hr,Er,Cr)||!validateDayOfYearDate(hr,xr)?new Date(NaN):(kr.setUTCFullYear(hr,Er,Math.max(xr,Cr)),kr)}function parseDateUnit(mr){return mr?parseInt(mr):1}function parseTime(mr){var hr=mr.match(timeRegex);if(!hr)return NaN;var gr=parseTimeUnit(hr[1]),vr=parseTimeUnit(hr[2]),xr=parseTimeUnit(hr[3]);return validateTime(gr,vr,xr)?gr*millisecondsInHour+vr*millisecondsInMinute+xr*1e3:NaN}function parseTimeUnit(mr){return mr&&parseFloat(mr.replace(",","."))||0}function parseTimezone(mr){if(mr==="Z")return 0;var hr=mr.match(timezoneRegex);if(!hr)return 0;var gr=hr[1]==="+"?-1:1,vr=parseInt(hr[2]),xr=hr[3]&&parseInt(hr[3])||0;return validateTimezone(vr,xr)?gr*(vr*millisecondsInHour+xr*millisecondsInMinute):NaN}function dayOfISOWeekYear(mr,hr,gr){var vr=new Date(0);vr.setUTCFullYear(mr,0,4);var xr=vr.getUTCDay()||7,Er=(hr-1)*7+gr+1-xr;return vr.setUTCDate(vr.getUTCDate()+Er),vr}var daysInMonths=[31,null,31,30,31,30,31,31,30,31,30,31];function isLeapYearIndex(mr){return mr%400===0||mr%4===0&&mr%100!==0}function validateDate(mr,hr,gr){return hr>=0&&hr<=11&&gr>=1&&gr<=(daysInMonths[hr]||(isLeapYearIndex(mr)?29:28))}function validateDayOfYearDate(mr,hr){return hr>=1&&hr<=(isLeapYearIndex(mr)?366:365)}function validateWeekDate(mr,hr,gr){return hr>=1&&hr<=53&&gr>=0&&gr<=6}function validateTime(mr,hr,gr){return mr===24?hr===0&&gr===0:gr>=0&&gr<60&&hr>=0&&hr<60&&mr>=0&&mr<25}function validateTimezone(mr,hr){return hr>=0&&hr<=59}var __extends=function(){var mr=function(hr,gr){return mr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(vr,xr){vr.__proto__=xr}||function(vr,xr){for(var Er in xr)Object.prototype.hasOwnProperty.call(xr,Er)&&(vr[Er]=xr[Er])},mr(hr,gr)};return function(hr,gr){if(typeof gr!="function"&&gr!==null)throw new TypeError("Class extends value "+String(gr)+" is not a constructor or null");mr(hr,gr);function vr(){this.constructor=hr}hr.prototype=gr===null?Object.create(gr):(vr.prototype=gr.prototype,new vr)}}(),__generator=function(mr,hr){var gr={label:0,sent:function(){if(Er[0]&1)throw Er[1];return Er[1]},trys:[],ops:[]},vr,xr,Er,Cr;return Cr={next:wr(0),throw:wr(1),return:wr(2)},typeof Symbol=="function"&&(Cr[Symbol.iterator]=function(){return this}),Cr;function wr(kr){return function(Dr){return Rr([kr,Dr])}}function Rr(kr){if(vr)throw new TypeError("Generator is already executing.");for(;gr;)try{if(vr=1,xr&&(Er=kr[0]&2?xr.return:kr[0]?xr.throw||((Er=xr.return)&&Er.call(xr),0):xr.next)&&!(Er=Er.call(xr,kr[1])).done)return Er;switch(xr=0,Er&&(kr=[kr[0]&2,Er.value]),kr[0]){case 0:case 1:Er=kr;break;case 4:return gr.label++,{value:kr[1],done:!1};case 5:gr.label++,xr=kr[1],kr=[0];continue;case 7:kr=gr.ops.pop(),gr.trys.pop();continue;default:if(Er=gr.trys,!(Er=Er.length>0&&Er[Er.length-1])&&(kr[0]===6||kr[0]===2)){gr=0;continue}if(kr[0]===3&&(!Er||kr[1]>Er[0]&&kr[1]<Er[3])){gr.label=kr[1];break}if(kr[0]===6&&gr.label<Er[1]){gr.label=Er[1],Er=kr;break}if(Er&&gr.label<Er[2]){gr.label=Er[2],gr.ops.push(kr);break}Er[2]&&gr.ops.pop(),gr.trys.pop();continue}kr=hr.call(mr,gr)}catch(Dr){kr=[6,Dr],xr=0}finally{vr=Er=0}if(kr[0]&5)throw kr[1];return{value:kr[0]?kr[1]:void 0,done:!0}}},__spreadArray=function(mr,hr){for(var gr=0,vr=hr.length,xr=mr.length;gr<vr;gr++,xr++)mr[xr]=hr[gr];return mr},__defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=function(mr,hr,gr){return hr in mr?__defProp(mr,hr,{enumerable:!0,configurable:!0,writable:!0,value:gr}):mr[hr]=gr},__spreadValues=function(mr,hr){for(var gr in hr||(hr={}))__hasOwnProp.call(hr,gr)&&__defNormalProp(mr,gr,hr[gr]);if(__getOwnPropSymbols)for(var vr=0,xr=__getOwnPropSymbols(hr);vr<xr.length;vr++){var gr=xr[vr];__propIsEnum.call(hr,gr)&&__defNormalProp(mr,gr,hr[gr])}return mr},__spreadProps=function(mr,hr){return __defProps(mr,__getOwnPropDescs(hr))},__async=function(mr,hr,gr){return new Promise(function(vr,xr){var Er=function(Rr){try{wr(gr.next(Rr))}catch(kr){xr(kr)}},Cr=function(Rr){try{wr(gr.throw(Rr))}catch(kr){xr(kr)}},wr=function(Rr){return Rr.done?vr(Rr.value):Promise.resolve(Rr.value).then(Er,Cr)};wr((gr=gr.apply(mr,hr)).next())})};function createAction(mr,hr){function gr(){for(var vr=[],xr=0;xr<arguments.length;xr++)vr[xr]=arguments[xr];if(hr){var Er=hr.apply(void 0,vr);if(!Er)throw new Error("prepareAction did not return an object");return __spreadValues(__spreadValues({type:mr,payload:Er.payload},"meta"in Er&&{meta:Er.meta}),"error"in Er&&{error:Er.error})}return{type:mr,payload:vr[0]}}return gr.toString=function(){return""+mr},gr.type=mr,gr.match=function(vr){return vr.type===mr},gr}(function(mr){__extends(hr,mr);function hr(){for(var gr=[],vr=0;vr<arguments.length;vr++)gr[vr]=arguments[vr];var xr=mr.apply(this,gr)||this;return Object.setPrototypeOf(xr,hr.prototype),xr}return Object.defineProperty(hr,Symbol.species,{get:function(){return hr},enumerable:!1,configurable:!0}),hr.prototype.concat=function(){for(var gr=[],vr=0;vr<arguments.length;vr++)gr[vr]=arguments[vr];return mr.prototype.concat.apply(this,gr)},hr.prototype.prepend=function(){for(var gr=[],vr=0;vr<arguments.length;vr++)gr[vr]=arguments[vr];return gr.length===1&&Array.isArray(gr[0])?new(hr.bind.apply(hr,__spreadArray([void 0],gr[0].concat(this)))):new(hr.bind.apply(hr,__spreadArray([void 0],gr.concat(this))))},hr})(Array);(function(mr){__extends(hr,mr);function hr(){for(var gr=[],vr=0;vr<arguments.length;vr++)gr[vr]=arguments[vr];var xr=mr.apply(this,gr)||this;return Object.setPrototypeOf(xr,hr.prototype),xr}return Object.defineProperty(hr,Symbol.species,{get:function(){return hr},enumerable:!1,configurable:!0}),hr.prototype.concat=function(){for(var gr=[],vr=0;vr<arguments.length;vr++)gr[vr]=arguments[vr];return mr.prototype.concat.apply(this,gr)},hr.prototype.prepend=function(){for(var gr=[],vr=0;vr<arguments.length;vr++)gr[vr]=arguments[vr];return gr.length===1&&Array.isArray(gr[0])?new(hr.bind.apply(hr,__spreadArray([void 0],gr[0].concat(this)))):new(hr.bind.apply(hr,__spreadArray([void 0],gr.concat(this))))},hr})(Array);function freezeDraftable(mr){return t$1(mr)?fn(mr,function(){}):mr}function executeReducerBuilderCallback(mr){var hr={},gr=[],vr,xr={addCase:function(Er,Cr){var wr=typeof Er=="string"?Er:Er.type;if(!wr)throw new Error("`builder.addCase` cannot be called with an empty action type");if(wr in hr)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return hr[wr]=Cr,xr},addMatcher:function(Er,Cr){return gr.push({matcher:Er,reducer:Cr}),xr},addDefaultCase:function(Er){return vr=Er,xr}};return mr(xr),[hr,gr,vr]}function isStateFunction(mr){return typeof mr=="function"}function createReducer(mr,hr,gr,vr){gr===void 0&&(gr=[]);var xr=typeof hr=="function"?executeReducerBuilderCallback(hr):[hr,gr,vr],Er=xr[0],Cr=xr[1],wr=xr[2],Rr;if(isStateFunction(mr))Rr=function(){return freezeDraftable(mr())};else{var kr=freezeDraftable(mr);Rr=function(){return kr}}function Dr(Br,Hr){Br===void 0&&(Br=Rr());var Gr=__spreadArray([Er[Hr.type]],Cr.filter(function(qr){var zr=qr.matcher;return zr(Hr)}).map(function(qr){var zr=qr.reducer;return zr}));return Gr.filter(function(qr){return!!qr}).length===0&&(Gr=[wr]),Gr.reduce(function(qr,zr){if(zr)if(r(qr)){var Qr=qr,sn=zr(Qr,Hr);return sn===void 0?qr:sn}else{if(t$1(qr))return fn(qr,function(hn){return zr(hn,Hr)});var sn=zr(qr,Hr);if(sn===void 0){if(qr===null)return qr;throw Error("A case reducer on a non-draftable value must not return undefined")}return sn}return qr},Br)}return Dr.getInitialState=Rr,Dr}function getType2(mr,hr){return mr+"/"+hr}function createSlice(mr){var hr=mr.name;if(!hr)throw new Error("`name` is a required option for createSlice");typeof process<"u";var gr=typeof mr.initialState=="function"?mr.initialState:freezeDraftable(mr.initialState),vr=mr.reducers||{},xr=Object.keys(vr),Er={},Cr={},wr={};xr.forEach(function(Dr){var Br=vr[Dr],Hr=getType2(hr,Dr),Gr,qr;"reducer"in Br?(Gr=Br.reducer,qr=Br.prepare):Gr=Br,Er[Dr]=Gr,Cr[Hr]=Gr,wr[Dr]=qr?createAction(Hr,qr):createAction(Hr)});function Rr(){var Dr=typeof mr.extraReducers=="function"?executeReducerBuilderCallback(mr.extraReducers):[mr.extraReducers],Br=Dr[0],Hr=Br===void 0?{}:Br,Gr=Dr[1],qr=Gr===void 0?[]:Gr,zr=Dr[2],Qr=zr===void 0?void 0:zr,sn=__spreadValues(__spreadValues({},Hr),Cr);return createReducer(gr,function(hn){for(var vn in sn)hn.addCase(vn,sn[vn]);for(var yn=0,gn=qr;yn<gn.length;yn++){var bn=gn[yn];hn.addMatcher(bn.matcher,bn.reducer)}Qr&&hn.addDefaultCase(Qr)})}var kr;return{name:hr,reducer:function(Dr,Br){return kr||(kr=Rr()),kr(Dr,Br)},actions:wr,caseReducers:Er,getInitialState:function(){return kr||(kr=Rr()),kr.getInitialState()}}}var urlAlphabet="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",nanoid=function(mr){mr===void 0&&(mr=21);for(var hr="",gr=mr;gr--;)hr+=urlAlphabet[Math.random()*64|0];return hr},commonProperties=["name","message","stack","code"],RejectWithValue=function(){function mr(hr,gr){this.payload=hr,this.meta=gr}return mr}(),FulfillWithMeta=function(){function mr(hr,gr){this.payload=hr,this.meta=gr}return mr}(),miniSerializeError=function(mr){if(typeof mr=="object"&&mr!==null){for(var hr={},gr=0,vr=commonProperties;gr<vr.length;gr++){var xr=vr[gr];typeof mr[xr]=="string"&&(hr[xr]=mr[xr])}return hr}return{message:String(mr)}};(function(){function mr(hr,gr,vr){var xr=createAction(hr+"/fulfilled",function(kr,Dr,Br,Hr){return{payload:kr,meta:__spreadProps(__spreadValues({},Hr||{}),{arg:Br,requestId:Dr,requestStatus:"fulfilled"})}}),Er=createAction(hr+"/pending",function(kr,Dr,Br){return{payload:void 0,meta:__spreadProps(__spreadValues({},Br||{}),{arg:Dr,requestId:kr,requestStatus:"pending"})}}),Cr=createAction(hr+"/rejected",function(kr,Dr,Br,Hr,Gr){return{payload:Hr,error:(vr&&vr.serializeError||miniSerializeError)(kr||"Rejected"),meta:__spreadProps(__spreadValues({},Gr||{}),{arg:Br,requestId:Dr,rejectedWithValue:!!Hr,requestStatus:"rejected",aborted:kr?.name==="AbortError",condition:kr?.name==="ConditionError"})}}),wr=typeof AbortController<"u"?AbortController:function(){function kr(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return kr.prototype.abort=function(){},kr}();function Rr(kr){return function(Dr,Br,Hr){var Gr=vr?.idGenerator?vr.idGenerator(kr):nanoid(),qr=new wr,zr;function Qr(hn){zr=hn,qr.abort()}var sn=function(){return __async(this,null,function(){var hn,vn,yn,gn,bn,xn,$n;return __generator(this,function(Sn){switch(Sn.label){case 0:return Sn.trys.push([0,4,,5]),gn=(hn=vr?.condition)==null?void 0:hn.call(vr,kr,{getState:Br,extra:Hr}),isThenable(gn)?[4,gn]:[3,2];case 1:gn=Sn.sent(),Sn.label=2;case 2:if(gn===!1||qr.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return bn=new Promise(function(Cn,Rn){return qr.signal.addEventListener("abort",function(){return Rn({name:"AbortError",message:zr||"Aborted"})})}),Dr(Er(Gr,kr,(vn=vr?.getPendingMeta)==null?void 0:vn.call(vr,{requestId:Gr,arg:kr},{getState:Br,extra:Hr}))),[4,Promise.race([bn,Promise.resolve(gr(kr,{dispatch:Dr,getState:Br,extra:Hr,requestId:Gr,signal:qr.signal,abort:Qr,rejectWithValue:function(Cn,Rn){return new RejectWithValue(Cn,Rn)},fulfillWithValue:function(Cn,Rn){return new FulfillWithMeta(Cn,Rn)}})).then(function(Cn){if(Cn instanceof RejectWithValue)throw Cn;return Cn instanceof FulfillWithMeta?xr(Cn.payload,Gr,kr,Cn.meta):xr(Cn,Gr,kr)})])];case 3:return yn=Sn.sent(),[3,5];case 4:return xn=Sn.sent(),yn=xn instanceof RejectWithValue?Cr(null,Gr,kr,xn.payload,xn.meta):Cr(xn,Gr,kr),[3,5];case 5:return $n=vr&&!vr.dispatchConditionRejection&&Cr.match(yn)&&yn.meta.condition,$n||Dr(yn),[2,yn]}})})}();return Object.assign(sn,{abort:Qr,requestId:Gr,arg:kr,unwrap:function(){return sn.then(unwrapResult)}})}}return Object.assign(Rr,{pending:Er,rejected:Cr,fulfilled:xr,typePrefix:hr})}return mr.withTypes=function(){return mr},mr})();function unwrapResult(mr){if(mr.meta&&mr.meta.rejectedWithValue)throw mr.payload;if(mr.error)throw mr.error;return mr.payload}function isThenable(mr){return mr!==null&&typeof mr=="object"&&typeof mr.then=="function"}var alm="listenerMiddleware";createAction(alm+"/add");createAction(alm+"/removeAll");createAction(alm+"/remove");var promise;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);F$3();const PLUGIN_ID="content-manager",PERMISSIONS$1=["plugin::content-manager.explorer.create","plugin::content-manager.explorer.read","plugin::content-manager.explorer.update","plugin::content-manager.explorer.delete","plugin::content-manager.explorer.publish"],InjectionZone=({area:mr,...hr})=>{const gr=useInjectionZone(mr);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:gr.map(vr=>jsxRuntimeExports.jsx(vr.Component,{...hr},vr.name))})},useInjectionZone=mr=>{const gr=useStrapiApp("useInjectionZone",Er=>Er.getPlugin)(PLUGIN_ID),[vr,xr]=mr.split(".");return gr.getInjectedComponents(vr,xr)},ID="id",CREATED_BY_ATTRIBUTE_NAME="createdBy",UPDATED_BY_ATTRIBUTE_NAME="updatedBy",CREATOR_FIELDS=[CREATED_BY_ATTRIBUTE_NAME,UPDATED_BY_ATTRIBUTE_NAME],PUBLISHED_BY_ATTRIBUTE_NAME="publishedBy",CREATED_AT_ATTRIBUTE_NAME="createdAt",UPDATED_AT_ATTRIBUTE_NAME="updatedAt",PUBLISHED_AT_ATTRIBUTE_NAME="publishedAt",DOCUMENT_META_FIELDS=[ID,...CREATOR_FIELDS,PUBLISHED_BY_ATTRIBUTE_NAME,CREATED_AT_ATTRIBUTE_NAME,UPDATED_AT_ATTRIBUTE_NAME,PUBLISHED_AT_ATTRIBUTE_NAME],ATTRIBUTE_TYPES_THAT_CANNOT_BE_MAIN_FIELD=["dynamiczone","json","text","relation","component","boolean","media","password","richtext","timestamp","blocks"],SINGLE_TYPES$1="single-types",COLLECTION_TYPES="collection-types",[DocumentRBACProvider,useDocumentRBAC]=createContext("DocumentRBAC",{canCreate:!1,canCreateFields:[],canDelete:!1,canPublish:!1,canRead:!1,canReadFields:[],canUpdate:!1,canUpdateFields:[],canUserAction:()=>!1,isLoading:!1}),DocumentRBAC=({children:mr,permissions:hr})=>{const{slug:gr}=useParams();if(!gr)throw new Error("Cannot find the slug param in the URL");const[{rawQuery:vr}]=useQueryParams(),xr=useAuth("DocumentRBAC",Hr=>Hr.permissions),Er=reactExports.useMemo(()=>xr.filter(Gr=>Gr.subject===gr).reduce((Gr,qr)=>{const[zr]=qr.action.split(".").slice(-1);return{...Gr,[zr]:[qr]}},{}),[gr,xr]),{isLoading:Cr,allowedActions:wr}=useRBAC(Er,hr??void 0,vr),Rr=!Cr&&wr.canCreate?extractAndDedupeFields(Er.create):[],kr=!Cr&&wr.canRead?extractAndDedupeFields(Er.read):[],Dr=!Cr&&wr.canUpdate?extractAndDedupeFields(Er.update):[],Br=reactExports.useCallback((Hr,Gr,qr)=>{const zr=removeNumericalStrings(Hr.split(".")),Qr=Gr.filter(sn=>sn.split(".").length>1);return qr==="component"?Qr.some(sn=>sn.includes(zr.join("."))):zr.length>1?Qr.includes(zr.join(".")):Gr.includes(Hr)},[]);return Cr?jsxRuntimeExports.jsx(Page.Loading,{}):jsxRuntimeExports.jsx(DocumentRBACProvider,{isLoading:Cr,canCreateFields:Rr,canReadFields:kr,canUpdateFields:Dr,canUserAction:Br,...wr,children:mr})},extractAndDedupeFields=(mr=[])=>mr.flatMap(hr=>hr.properties?.fields).filter((hr,gr,vr)=>vr.indexOf(hr)===gr&&typeof hr=="string"),removeNumericalStrings=mr=>mr.filter(hr=>isNaN(Number(hr))),contentManagerApi=adminApi.enhanceEndpoints({addTagTypes:["ComponentConfiguration","ContentTypesConfiguration","ContentTypeSettings","Document","InitialData","HistoryVersion","Relations","UidAvailability","RecentDocumentList"]}),documentApi=contentManagerApi.injectEndpoints({overrideExisting:!0,endpoints:mr=>({autoCloneDocument:mr.mutation({query:({model:hr,sourceId:gr,query:vr})=>({url:`/content-manager/collection-types/${hr}/auto-clone/${gr}`,method:"POST",config:{params:vr}}),invalidatesTags:(hr,gr,{model:vr})=>gr?[]:[{type:"Document",id:`${vr}_LIST`},"RecentDocumentList"]}),cloneDocument:mr.mutation({query:({model:hr,sourceId:gr,data:vr,params:xr})=>({url:`/content-manager/collection-types/${hr}/clone/${gr}`,method:"POST",data:vr,config:{params:xr}}),invalidatesTags:(hr,gr,{model:vr})=>[{type:"Document",id:`${vr}_LIST`},{type:"UidAvailability",id:vr},"RecentDocumentList"]}),createDocument:mr.mutation({query:({model:hr,data:gr,params:vr})=>({url:`/content-manager/collection-types/${hr}`,method:"POST",data:gr,config:{params:vr}}),invalidatesTags:(hr,gr,{model:vr})=>[{type:"Document",id:`${vr}_LIST`},"Relations",{type:"UidAvailability",id:vr},"RecentDocumentList"],transformResponse:(hr,gr,vr)=>!("data"in hr)&&vr.model==="plugin::users-permissions.user"?{data:hr,meta:{availableStatus:[],availableLocales:[]}}:hr}),deleteDocument:mr.mutation({query:({collectionType:hr,model:gr,documentId:vr,params:xr})=>({url:`/content-manager/${hr}/${gr}${hr!==SINGLE_TYPES$1&&vr?`/${vr}`:""}`,method:"DELETE",config:{params:xr}}),invalidatesTags:(hr,gr,{collectionType:vr,model:xr})=>[{type:"Document",id:vr!==SINGLE_TYPES$1?`${xr}_LIST`:xr},"RecentDocumentList"]}),deleteManyDocuments:mr.mutation({query:({model:hr,params:gr,...vr})=>({url:`/content-manager/collection-types/${hr}/actions/bulkDelete`,method:"POST",data:vr,config:{params:gr}}),invalidatesTags:(hr,gr,{model:vr})=>[{type:"Document",id:`${vr}_LIST`},"RecentDocumentList"]}),discardDocument:mr.mutation({query:({collectionType:hr,model:gr,documentId:vr,params:xr})=>({url:vr?`/content-manager/${hr}/${gr}/${vr}/actions/discard`:`/content-manager/${hr}/${gr}/actions/discard`,method:"POST",config:{params:xr}}),invalidatesTags:(hr,gr,{collectionType:vr,model:xr,documentId:Er})=>[{type:"Document",id:vr!==SINGLE_TYPES$1?`${xr}_${Er}`:xr},{type:"Document",id:`${xr}_LIST`},"Relations",{type:"UidAvailability",id:xr},"RecentDocumentList"]}),getAllDocuments:mr.query({query:({model:hr,params:gr})=>({url:`/content-manager/collection-types/${hr}`,method:"GET",config:{params:lib$1.stringify(gr,{encode:!0})}}),providesTags:(hr,gr,vr)=>[{type:"Document",id:"ALL_LIST"},{type:"Document",id:`${vr.model}_LIST`},...hr?.results.map(({documentId:xr})=>({type:"Document",id:`${vr.model}_${xr}`}))??[]]}),getDraftRelationCount:mr.query({query:({collectionType:hr,model:gr,documentId:vr,params:xr})=>({url:vr?`/content-manager/${hr}/${gr}/${vr}/actions/countDraftRelations`:`/content-manager/${hr}/${gr}/actions/countDraftRelations`,method:"GET",config:{params:xr}})}),getDocument:mr.query({queryFn:async({collectionType:hr,model:gr,documentId:vr,params:xr},Er,Cr,wr)=>{const Rr=await wr({url:`/content-manager/${hr}/${gr}${vr?`/${vr}`:""}`,method:"GET",config:{params:xr}});return Rr.error&&Rr.error.name==="NotFoundError"&&hr===SINGLE_TYPES$1?{data:{document:void 0},error:void 0}:Rr},providesTags:(hr,gr,{collectionType:vr,model:xr,documentId:Er})=>[{type:"Document",id:vr!==SINGLE_TYPES$1?`${xr}_${hr&&"documentId"in hr?hr.documentId:Er}`:xr},{type:"Document",id:`${xr}_ALL_ITEMS`}]}),getManyDraftRelationCount:mr.query({query:({model:hr,...gr})=>({url:`/content-manager/collection-types/${hr}/actions/countManyEntriesDraftRelations`,method:"GET",config:{params:gr}}),transformResponse:hr=>hr.data}),publishDocument:mr.mutation({query:({collectionType:hr,model:gr,documentId:vr,params:xr,data:Er})=>({url:vr?`/content-manager/${hr}/${gr}/${vr}/actions/publish`:`/content-manager/${hr}/${gr}/actions/publish`,method:"POST",data:Er,config:{params:xr}}),invalidatesTags:(hr,gr,{collectionType:vr,model:xr,documentId:Er})=>[{type:"Document",id:vr!==SINGLE_TYPES$1?`${xr}_${Er}`:xr},{type:"Document",id:`${xr}_LIST`},"Relations","RecentDocumentList"]}),publishManyDocuments:mr.mutation({query:({model:hr,params:gr,...vr})=>({url:`/content-manager/collection-types/${hr}/actions/bulkPublish`,method:"POST",data:vr,config:{params:gr}}),invalidatesTags:(hr,gr,{model:vr,documentIds:xr})=>xr.map(Er=>({type:"Document",id:`${vr}_${Er}`}))}),updateDocument:mr.mutation({query:({collectionType:hr,model:gr,documentId:vr,data:xr,params:Er})=>({url:`/content-manager/${hr}/${gr}${vr?`/${vr}`:""}`,method:"PUT",data:xr,config:{params:Er}}),invalidatesTags:(hr,gr,{collectionType:vr,model:xr,documentId:Er})=>[{type:"Document",id:vr!==SINGLE_TYPES$1?`${xr}_${Er}`:xr},"Relations",{type:"UidAvailability",id:xr},"RecentDocumentList","RecentDocumentList"],async onQueryStarted({data:hr,...gr},{dispatch:vr,queryFulfilled:xr}){const Er=vr(documentApi.util.updateQueryData("getDocument",gr,Cr=>{Object.assign(Cr.data,hr)}));try{await xr}catch{Er.undo()}}}),unpublishDocument:mr.mutation({query:({collectionType:hr,model:gr,documentId:vr,params:xr,data:Er})=>({url:vr?`/content-manager/${hr}/${gr}/${vr}/actions/unpublish`:`/content-manager/${hr}/${gr}/actions/unpublish`,method:"POST",data:Er,config:{params:xr}}),invalidatesTags:(hr,gr,{collectionType:vr,model:xr,documentId:Er})=>[{type:"Document",id:vr!==SINGLE_TYPES$1?`${xr}_${Er}`:xr},"RecentDocumentList"]}),unpublishManyDocuments:mr.mutation({query:({model:hr,params:gr,...vr})=>({url:`/content-manager/collection-types/${hr}/actions/bulkUnpublish`,method:"POST",data:vr,config:{params:gr}}),invalidatesTags:(hr,gr,{model:vr,documentIds:xr})=>[...xr.map(Er=>({type:"Document",id:`${vr}_${Er}`})),"RecentDocumentList"]})})}),{useAutoCloneDocumentMutation,useCloneDocumentMutation,useCreateDocumentMutation,useDeleteDocumentMutation,useDeleteManyDocumentsMutation,useDiscardDocumentMutation,useGetAllDocumentsQuery,useLazyGetDocumentQuery,useGetDocumentQuery,useLazyGetDraftRelationCountQuery,useGetManyDraftRelationCountQuery,usePublishDocumentMutation,usePublishManyDocumentsMutation,useUpdateDocumentMutation,useUnpublishDocumentMutation,useUnpublishManyDocumentsMutation}=documentApi,buildValidParams=mr=>{if(!mr)return mr;const{plugins:hr,...gr}={...mr,...Object.values(mr?.plugins??{}).reduce((vr,xr)=>Object.assign(vr,xr),{})};return gr},arrayValidator=(mr,hr)=>({message:errorsTrads.required,test(gr){return hr.status==="draft"||!mr.required?!0:!(!gr||Array.isArray(gr)&&gr.length===0)}}),createYupSchema=(mr={},hr={},gr={status:null})=>{const vr=xr=>create$2().shape(Object.entries(xr).reduce((Er,[Cr,wr])=>{if(DOCUMENT_META_FIELDS.includes(Cr))return Er;const Rr=[addNullableValidation,addRequiredValidation,addMinLengthValidation,addMaxLengthValidation,addMinValidation,addMaxValidation,addRegexValidation].map(Dr=>Dr(wr,gr)),kr=pipe$1(...Rr);switch(wr.type){case"component":{const{attributes:Dr}=hr[wr.component];return wr.repeatable?{...Er,[Cr]:kr(create$1().of(vr(Dr).nullable(!1))).test(arrayValidator(wr,gr))}:{...Er,[Cr]:kr(vr(Dr).nullable())}}case"dynamiczone":return{...Er,[Cr]:kr(create$1().of(create(Dr=>{const Br=hr?.[Dr?.__component]?.attributes,Hr=create$2().shape({__component:create$4().required().oneOf(Object.keys(hr))}).nullable(!1);return Br?Hr.concat(vr(Br)):Hr}))).test(arrayValidator(wr,gr))};case"relation":return{...Er,[Cr]:kr(create(Dr=>Dr?Array.isArray(Dr)?create$1().of(create$2().shape({id:create$3().required()})):typeof Dr=="object"?create$2():create$6().test("type-error","Relation values must be either null, an array of objects with {id} or an object.",()=>!1):create$6().nullable(!0)))};default:return{...Er,[Cr]:kr(createAttributeSchema(wr))}}},{})).default(null);return vr(mr)},createAttributeSchema=mr=>{switch(mr.type){case"biginteger":return create$4().matches(/^-?\d*$/);case"boolean":return create$5();case"blocks":return create$6().test("isBlocks",errorsTrads.json,hr=>!!(!hr||Array.isArray(hr)));case"decimal":case"float":case"integer":return create$3();case"email":return create$4().email(errorsTrads.email);case"enumeration":return create$4().oneOf([...mr.enum,null]);case"json":return create$6().test("isJSON",errorsTrads.json,hr=>{if(!hr||typeof hr=="string"&&hr.length===0)return!0;if(typeof hr=="object")try{return JSON.stringify(hr),!0}catch{return!1}try{return JSON.parse(hr),!0}catch{return!1}});case"password":case"richtext":case"string":case"text":return create$4();case"uid":return create$4().matches(/^[A-Za-z0-9-_.~]*$/);default:return create$6()}},nullableSchema=mr=>mr?.nullable?mr.nullable():mr,addNullableValidation=()=>mr=>nullableSchema(mr),addRequiredValidation=(mr,hr)=>gr=>hr.status==="draft"||!mr.required?gr:mr.required&&"required"in gr?gr.required(errorsTrads.required):gr,addMinLengthValidation=(mr,hr)=>gr=>hr.status==="draft"?gr:"minLength"in mr&&mr.minLength&&Number.isInteger(mr.minLength)&&"min"in gr?gr.min(mr.minLength,{...errorsTrads.minLength,values:{min:mr.minLength}}):gr,addMaxLengthValidation=mr=>hr=>"maxLength"in mr&&mr.maxLength&&Number.isInteger(mr.maxLength)&&"max"in hr?hr.max(mr.maxLength,{...errorsTrads.maxLength,values:{max:mr.maxLength}}):hr,addMinValidation=(mr,hr)=>gr=>{if(hr.status==="draft")return gr;if("min"in mr&&"min"in gr){const vr=toInteger(mr.min);if(vr)return gr.min(vr,{...errorsTrads.min,values:{min:vr}})}return gr},addMaxValidation=mr=>hr=>{if("max"in mr){const gr=toInteger(mr.max);if("max"in hr&&gr)return hr.max(gr,{...errorsTrads.max,values:{max:gr}})}return hr},toInteger=mr=>{if(typeof mr=="number"||mr===void 0)return mr;{const hr=Number(mr);return isNaN(hr)?void 0:hr}},addRegexValidation=mr=>hr=>"regex"in mr&&mr.regex&&"matches"in hr?hr.matches(new RegExp(mr.regex),{message:{id:errorsTrads.regex.id,defaultMessage:"The value does not match the defined pattern."},excludeEmptyString:!mr.required}):hr,initApi=contentManagerApi.injectEndpoints({endpoints:mr=>({getInitialData:mr.query({query:()=>"/content-manager/init",transformResponse:hr=>hr.data,providesTags:["InitialData"]})})}),{useGetInitialDataQuery}=initApi,useContentTypeSchema=mr=>{const{toggleNotification:hr}=useNotification(),{_unstableFormatAPIError:gr}=useAPIErrorHandler(),{data:vr,error:xr,isLoading:Er,isFetching:Cr}=useGetInitialDataQuery(void 0),{components:wr,contentType:Rr,contentTypes:kr}=reactExports.useMemo(()=>{const Dr=vr?.contentTypes.find(Gr=>Gr.uid===mr),Br=vr?.components.reduce((Gr,qr)=>(Gr[qr.uid]=qr,Gr),{}),Hr=extractContentTypeComponents(Dr?.attributes,Br);return{components:Object.keys(Hr).length===0?void 0:Hr,contentType:Dr,contentTypes:vr?.contentTypes??[]}},[mr,vr]);return reactExports.useEffect(()=>{xr&&hr({type:"danger",message:gr(xr)})},[hr,xr,gr]),{components:reactExports.useMemo(()=>wr??{},[wr]),schema:Rr,schemas:kr,isLoading:Er||Cr}},extractContentTypeComponents=(mr={},hr={})=>{const gr=Cr=>Cr.reduce((wr,Rr)=>{if(Rr.type==="component"){const kr=Object.values(hr[Rr.component]?.attributes??{});wr.push(Rr.component,...gr(kr))}else Rr.type==="dynamiczone"&&wr.push(...Rr.components,...Rr.components.flatMap(kr=>{const Dr=Object.values(hr[kr]?.attributes??{});return gr(Dr)}));return wr},[]),vr=gr(Object.values(mr));return[...new Set(vr)].reduce((Cr,wr)=>(Cr[wr]=hr[wr],Cr),{})},HOOKS={INJECT_COLUMN_IN_TABLE:"Admin/CM/pages/ListView/inject-column-in-table",MUTATE_COLLECTION_TYPES_LINKS:"Admin/CM/pages/App/mutate-collection-types-links",MUTATE_EDIT_VIEW_LAYOUT:"Admin/CM/pages/EditView/mutate-edit-view-layout",MUTATE_SINGLE_TYPES_LINKS:"Admin/CM/pages/App/mutate-single-types-links"},contentTypesApi=contentManagerApi.injectEndpoints({endpoints:mr=>({getContentTypeConfiguration:mr.query({query:hr=>({url:`/content-manager/content-types/${hr}/configuration`,method:"GET"}),transformResponse:hr=>hr.data,providesTags:(hr,gr,vr)=>[{type:"ContentTypesConfiguration",id:vr},{type:"ContentTypeSettings",id:"LIST"}]}),getAllContentTypeSettings:mr.query({query:()=>"/content-manager/content-types-settings",transformResponse:hr=>hr.data,providesTags:[{type:"ContentTypeSettings",id:"LIST"}]}),updateContentTypeConfiguration:mr.mutation({query:({uid:hr,...gr})=>({url:`/content-manager/content-types/${hr}/configuration`,method:"PUT",data:gr}),transformResponse:hr=>hr.data,invalidatesTags:(hr,gr,{uid:vr})=>[{type:"ContentTypesConfiguration",id:vr},{type:"ContentTypeSettings",id:"LIST"},{type:"InitialData"}]})})}),{useGetContentTypeConfigurationQuery,useGetAllContentTypeSettingsQuery,useUpdateContentTypeConfigurationMutation}=contentTypesApi,checkIfAttributeIsDisplayable=mr=>{const{type:hr}=mr;return hr==="relation"?!mr.relation.toLowerCase().includes("morph"):!["json","dynamiczone","richtext","password","blocks"].includes(hr)&&!!hr},getMainField=(mr,hr,{schemas:gr,components:vr})=>{if(!hr)return;const xr=mr.type==="component"?vr[mr.component].attributes[hr].type:gr.find(Er=>Er.uid===mr.targetModel)?.attributes[hr].type;return{name:hr,type:xr??"string"}},DEFAULT_SETTINGS={bulkable:!1,filterable:!1,searchable:!1,pagination:!1,defaultSortBy:"",defaultSortOrder:"asc",mainField:"id",pageSize:10},useDocumentLayout=mr=>{const{schema:hr,components:gr}=useDocument({model:mr,collectionType:""},{skip:!0}),[{query:vr}]=useQueryParams(),xr=useStrapiApp("useDocumentLayout",sn=>sn.runHookWaterfall),{toggleNotification:Er}=useNotification(),{_unstableFormatAPIError:Cr}=useAPIErrorHandler(),{isLoading:wr,schemas:Rr}=useContentTypeSchema(),{data:kr,isLoading:Dr,error:Br,isFetching:Hr}=useGetContentTypeConfigurationQuery(mr),Gr=wr||Hr||Dr;reactExports.useEffect(()=>{Br&&Er({type:"danger",message:Cr(Br)})},[Br,Cr,Er]);const qr=reactExports.useMemo(()=>kr&&!Gr?formatEditLayout(kr,{schemas:Rr,schema:hr,components:gr}):{layout:[],components:{},metadatas:{},options:{},settings:DEFAULT_SETTINGS},[kr,Gr,Rr,hr,gr]),zr=reactExports.useMemo(()=>kr&&!Gr?formatListLayout(kr,{schemas:Rr,schema:hr,components:gr}):{layout:[],metadatas:{},options:{},settings:DEFAULT_SETTINGS},[kr,Gr,Rr,hr,gr]),{layout:Qr}=reactExports.useMemo(()=>xr(HOOKS.MUTATE_EDIT_VIEW_LAYOUT,{layout:qr,query:vr}),[qr,vr,xr]);return{error:Br,isLoading:Gr,edit:Qr,list:zr}},useDocLayout=()=>{const{model:mr}=useDoc();return useDocumentLayout(mr)},formatEditLayout=(mr,{schemas:hr,schema:gr,components:vr})=>{let xr=0;const Er=convertEditLayoutToFieldLayouts(mr.contentType.layouts.edit,gr?.attributes,mr.contentType.metadatas,{configurations:mr.components,schemas:vr},hr).reduce((Rr,kr)=>(kr.some(Dr=>Dr.type==="dynamiczone")?(Rr.push([kr]),xr+=2):Rr[xr]?Rr[xr].push(kr):Rr.push([kr]),Rr),[]),Cr=Object.entries(mr.components).reduce((Rr,[kr,Dr])=>(Rr[kr]={layout:convertEditLayoutToFieldLayouts(Dr.layouts.edit,vr[kr].attributes,Dr.metadatas,{configurations:mr.components,schemas:vr}),settings:{...Dr.settings,icon:vr[kr].info.icon,displayName:vr[kr].info.displayName}},Rr),{}),wr=Object.entries(mr.contentType.metadatas).reduce((Rr,[kr,Dr])=>({...Rr,[kr]:Dr.edit}),{});return{layout:Er,components:Cr,metadatas:wr,settings:{...mr.contentType.settings,displayName:gr?.info.displayName},options:{...gr?.options,...gr?.pluginOptions,...mr.contentType.options}}},convertEditLayoutToFieldLayouts=(mr,hr={},gr,vr,xr=[])=>mr.map(Er=>Er.map(Cr=>{const wr=hr[Cr.name];if(!wr)return null;const{edit:Rr}=gr[Cr.name],kr=wr.type==="component"&&vr?vr.configurations[wr.component].settings:{};return{attribute:wr,disabled:!Rr.editable,hint:Rr.description,label:Rr.label??"",name:Cr.name,mainField:getMainField(wr,Rr.mainField||kr.mainField,{schemas:xr,components:vr?.schemas??{}}),placeholder:Rr.placeholder??"",required:wr.required??!1,size:Cr.size,unique:"unique"in wr?wr.unique:!1,visible:Rr.visible??!0,type:wr.type}}).filter(Cr=>Cr!==null)),formatListLayout=(mr,{schemas:hr,schema:gr,components:vr})=>{const xr=Object.entries(mr.contentType.metadatas).reduce((Cr,[wr,Rr])=>({...Cr,[wr]:Rr.list}),{});return{layout:convertListLayoutToFieldLayouts(mr.contentType.layouts.list,gr?.attributes,xr,{configurations:mr.components,schemas:vr},hr),settings:{...mr.contentType.settings,displayName:gr?.info.displayName},metadatas:xr,options:{...gr?.options,...gr?.pluginOptions,...mr.contentType.options}}},convertListLayoutToFieldLayouts=(mr,hr={},gr,vr,xr=[])=>mr.map(Er=>{const Cr=hr[Er];if(!Cr)return null;const wr=gr[Er],Rr=Cr.type==="component"&&vr?vr.configurations[Cr.component].settings:{};return{attribute:Cr,label:wr.label??"",mainField:getMainField(Cr,wr.mainField||Rr.mainField,{schemas:xr,components:vr?.schemas??{}}),name:Er,searchable:wr.searchable??!0,sortable:wr.sortable??!0}}).filter(Er=>Er!==null),useDocument=(mr,hr)=>{const{toggleNotification:gr}=useNotification(),{_unstableFormatAPIError:vr}=useAPIErrorHandler(),{currentData:xr,isLoading:Er,isFetching:Cr,error:wr}=useGetDocumentQuery(mr,{...hr,skip:!mr.documentId&&mr.collectionType!==SINGLE_TYPES$1||hr?.skip}),{components:Rr,schema:kr,schemas:Dr,isLoading:Br}=useContentTypeSchema(mr.model);reactExports.useEffect(()=>{wr&&gr({type:"danger",message:vr(wr)})},[gr,wr,vr,mr.collectionType]);const Hr=reactExports.useMemo(()=>kr?createYupSchema(kr.attributes,Rr):null,[kr,Rr]),Gr=reactExports.useCallback(Qr=>{if(!Hr)throw new Error("There is no validation schema generated, this is likely due to the schema not being loaded yet.");try{return Hr.validateSync(Qr,{abortEarly:!1,strict:!0}),null}catch(sn){if(sn instanceof ValidationError)return getYupValidationErrors(sn);throw sn}},[Hr]),qr=Er||Cr||Br,zr=!!wr;return{components:Rr,document:xr?.data,meta:xr?.meta,isLoading:qr,hasError:zr,schema:kr,schemas:Dr,validate:Gr}},useDoc=()=>{const{id:mr,slug:hr,collectionType:gr,origin:vr}=useParams(),[{query:xr}]=useQueryParams(),Er=reactExports.useMemo(()=>buildValidParams(xr),[xr]);if(!gr)throw new Error("Could not find collectionType in url params");if(!hr)throw new Error("Could not find model in url params");const Cr=useDocument({documentId:vr||mr,model:hr,collectionType:gr,params:Er},{skip:mr==="create"||!vr&&!mr&&gr!==SINGLE_TYPES$1});return{collectionType:gr,model:hr,id:vr||mr==="create"?void 0:mr,...Cr}},getTranslation=mr=>`content-manager.${mr}`;reactExports.lazy(()=>__vitePreload(()=>import("./History-DTYB9CSB-BuIBTLBS.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8])).then(mr=>({default:mr.ProtectedHistoryPage})));reactExports.lazy(()=>__vitePreload(()=>import("./Preview-Zzjg2_K_-BdAtjMSh.js"),__vite__mapDeps([9,1,2,10,4,5,6,7,8])).then(mr=>({default:mr.ProtectedPreviewPage})));reactExports.lazy(()=>__vitePreload(()=>import("./EditViewPage-BPFcUbqi-BuZdpD2k.js"),__vite__mapDeps([10,1,2,4,5,6,7,8])).then(mr=>({default:mr.ProtectedEditViewPage})));reactExports.lazy(()=>__vitePreload(()=>import("./ListViewPage-GKpL5p8A-Kzk6UA5s.js"),__vite__mapDeps([11,1,2,6,3])).then(mr=>({default:mr.ProtectedListViewPage})));reactExports.lazy(()=>__vitePreload(()=>import("./ListConfigurationPage-qWx8r4D_-D9fj-Ne6.js"),__vite__mapDeps([12,1,2,3,5,13])).then(mr=>({default:mr.ProtectedListConfiguration})));reactExports.lazy(()=>__vitePreload(()=>import("./EditConfigurationPage-C1ddZ_zf-BfHz0xbL.js"),__vite__mapDeps([14,1,2,15,5,7,13,3])).then(mr=>({default:mr.ProtectedEditConfigurationPage})));reactExports.lazy(()=>__vitePreload(()=>import("./ComponentConfigurationPage-CcRDqD0e-DcmJvQHo.js"),__vite__mapDeps([16,1,2,15,5,7,13,3])).then(mr=>({default:mr.ProtectedComponentConfigurationPage})));reactExports.lazy(()=>__vitePreload(()=>import("./NoPermissionsPage-BAZlWgJ4-f2M2hX_i.js"),__vite__mapDeps([17,1,2])).then(mr=>({default:mr.NoPermissions})));reactExports.lazy(()=>__vitePreload(()=>import("./NoContentTypePage-B5Vc5Cal-Co1kwNzr.js"),__vite__mapDeps([18,1,2])).then(mr=>({default:mr.NoContentType})));const CLONE_RELATIVE_PATH=":collectionType/:slug/clone/:origin",CLONE_PATH=`/content-manager/${CLONE_RELATIVE_PATH}`,DocumentActions=({actions:mr})=>{const{formatMessage:hr}=useIntl$1(),[gr,vr,...xr]=mr.filter(Er=>Er.position===void 0?!0:(Array.isArray(Er.position)?Er.position:[Er.position]).includes("panel"));return gr?jsxRuntimeExports.jsxs(Flex,{direction:"column",gap:2,alignItems:"stretch",width:"100%",children:[jsxRuntimeExports.jsxs(Flex,{gap:2,children:[jsxRuntimeExports.jsx(DocumentActionButton,{...gr,variant:gr.variant||"default"}),xr.length>0?jsxRuntimeExports.jsx(DocumentActionsMenu,{actions:xr,label:hr({id:"content-manager.containers.edit.panels.default.more-actions",defaultMessage:"More document actions"})}):null]}),vr?jsxRuntimeExports.jsx(DocumentActionButton,{...vr,variant:vr.variant||"secondary"}):null]}):null},DocumentActionButton=mr=>{const[hr,gr]=reactExports.useState(null),{toggleNotification:vr}=useNotification(),xr=Cr=>async wr=>{const{onClick:Rr=()=>!1,dialog:kr,id:Dr}=Cr,Br=await Rr(wr);if(kr&&!Br)switch(kr.type){case"notification":vr({title:kr.title,message:kr.content,type:kr.status,timeout:kr.timeout,onClose:kr.onClose});break;case"dialog":case"modal":wr.preventDefault(),gr(Dr)}},Er=()=>{gr(null)};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Button,{flex:"auto",startIcon:mr.icon,disabled:mr.disabled,onClick:xr(mr),justifyContent:"center",variant:mr.variant||"default",paddingTop:"7px",paddingBottom:"7px",children:mr.label}),mr.dialog?.type==="dialog"?jsxRuntimeExports.jsx(DocumentActionConfirmDialog,{...mr.dialog,variant:mr.dialog?.variant??mr.variant,isOpen:hr===mr.id,onClose:Er}):null,mr.dialog?.type==="modal"?jsxRuntimeExports.jsx(DocumentActionModal,{...mr.dialog,onModalClose:Er,isOpen:hr===mr.id}):null]})},MenuItem=dt$3(Menu$2.Item)`
  &:hover {
    background: ${({theme:mr,isVariantDanger:hr,isDisabled:gr})=>hr&&!gr?mr.colors.danger100:"neutral"};
  }
`,DocumentActionsMenu=({actions:mr,children:hr,label:gr,variant:vr="tertiary"})=>{const[xr,Er]=reactExports.useState(!1),[Cr,wr]=reactExports.useState(null),{formatMessage:Rr}=useIntl$1(),{toggleNotification:kr}=useNotification(),Dr=mr.every(Gr=>Gr.disabled)||mr.length===0,Br=Gr=>async qr=>{const{onClick:zr=()=>!1,dialog:Qr,id:sn}=Gr,hn=await zr(qr);if(Qr&&!hn)switch(Qr.type){case"notification":kr({title:Qr.title,message:Qr.content,type:Qr.status,timeout:Qr.timeout,onClose:Qr.onClose});break;case"dialog":case"modal":wr(sn)}},Hr=()=>{wr(null),Er(!1)};return jsxRuntimeExports.jsxs(Menu$2.Root,{open:xr,onOpenChange:Er,children:[jsxRuntimeExports.jsxs(Menu$2.Trigger,{disabled:Dr,size:"S",endIcon:null,paddingTop:"4px",paddingLeft:"7px",paddingRight:"7px",variant:vr,children:[jsxRuntimeExports.jsx(ForwardRef$1R,{"aria-hidden":!0,focusable:!1}),jsxRuntimeExports.jsx(VisuallyHidden,{tag:"span",children:gr||Rr({id:"content-manager.containers.edit.panels.default.more-actions",defaultMessage:"More document actions"})})]}),jsxRuntimeExports.jsxs(Menu$2.Content,{maxHeight:void 0,popoverPlacement:"bottom-end",children:[mr.map(Gr=>jsxRuntimeExports.jsx(MenuItem,{disabled:Gr.disabled,onSelect:Br(Gr),display:"block",isVariantDanger:Gr.variant==="danger",isDisabled:Gr.disabled,children:jsxRuntimeExports.jsx(Flex,{justifyContent:"space-between",gap:4,children:jsxRuntimeExports.jsxs(Flex,{color:Gr.disabled?"inherit":convertActionVariantToColor(Gr.variant),gap:2,tag:"span",children:[jsxRuntimeExports.jsx(Flex,{tag:"span",color:Gr.disabled?"inherit":convertActionVariantToIconColor(Gr.variant),children:Gr.icon}),Gr.label]})})},Gr.id)),hr]}),mr.map(Gr=>jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[Gr.dialog?.type==="dialog"?jsxRuntimeExports.jsx(DocumentActionConfirmDialog,{...Gr.dialog,variant:Gr.variant,isOpen:Cr===Gr.id,onClose:Hr}):null,Gr.dialog?.type==="modal"?jsxRuntimeExports.jsx(DocumentActionModal,{...Gr.dialog,onModalClose:Hr,isOpen:Cr===Gr.id}):null]},Gr.id))]})},convertActionVariantToColor=(mr="secondary")=>{switch(mr){case"danger":return"danger600";case"secondary":return;case"success":return"success600";default:return"primary600"}},convertActionVariantToIconColor=(mr="secondary")=>{switch(mr){case"danger":return"danger600";case"secondary":return"neutral500";case"success":return"success600";default:return"primary600"}},DocumentActionConfirmDialog=({onClose:mr,onCancel:hr,onConfirm:gr,title:vr,content:xr,isOpen:Er,variant:Cr="secondary"})=>{const{formatMessage:wr}=useIntl$1(),Rr=async()=>{hr&&await hr(),mr()},kr=async()=>{gr&&await gr(),mr()};return jsxRuntimeExports.jsx(Dialog.Root,{open:Er,onOpenChange:Rr,children:jsxRuntimeExports.jsxs(Dialog.Content,{children:[jsxRuntimeExports.jsx(Dialog.Header,{children:vr}),jsxRuntimeExports.jsx(Dialog.Body,{children:xr}),jsxRuntimeExports.jsxs(Dialog.Footer,{children:[jsxRuntimeExports.jsx(Dialog.Cancel,{children:jsxRuntimeExports.jsx(Button,{variant:"tertiary",fullWidth:!0,children:wr({id:"app.components.Button.cancel",defaultMessage:"Cancel"})})}),jsxRuntimeExports.jsx(Button,{onClick:kr,variant:Cr,fullWidth:!0,children:wr({id:"app.components.Button.confirm",defaultMessage:"Confirm"})})]})]})})},DocumentActionModal=({isOpen:mr,title:hr,onClose:gr,footer:vr,content:xr,onModalClose:Er})=>{const Cr=()=>{gr&&gr(),Er()};return jsxRuntimeExports.jsx(Modal$1.Root,{open:mr,onOpenChange:Cr,children:jsxRuntimeExports.jsxs(Modal$1.Content,{children:[jsxRuntimeExports.jsx(Modal$1.Header,{children:jsxRuntimeExports.jsx(Modal$1.Title,{children:hr})}),typeof xr=="function"?jsxRuntimeExports.jsx(xr,{onClose:Cr}):jsxRuntimeExports.jsx(Modal$1.Body,{children:xr}),typeof vr=="function"?jsxRuntimeExports.jsx(vr,{onClose:Cr}):vr]})})},intervals=["years","months","days","hours","minutes","seconds"],RelativeTime=reactExports.forwardRef(({timestamp:mr,customIntervals:hr=[],...gr},vr)=>{const{formatRelativeTime:xr,formatDate:Er,formatTime:Cr}=useIntl$1(),wr=intervalToDuration({start:mr,end:Date.now()}),Rr=intervals.find(Hr=>wr[Hr]>0&&Object.keys(wr).includes(Hr))??"seconds",kr=isPast(mr)?-wr[Rr]:wr[Rr],Dr=hr.find(Hr=>wr[Hr.unit]<Hr.threshold),Br=Dr?Dr.text:xr(kr,Rr,{numeric:"auto"});return jsxRuntimeExports.jsx("time",{ref:vr,dateTime:mr.toISOString(),role:"time",title:`${Er(mr)} ${Cr(mr)}`,...gr,children:Br})}),getDisplayName=({firstname:mr,lastname:hr,username:gr,email:vr}={})=>gr||(mr?`${mr} ${hr??""}`.trim():vr??""),capitalise=mr=>mr.charAt(0).toUpperCase()+mr.slice(1),DocumentStatus=({status:mr="draft",size:hr="S",...gr})=>{const vr=mr==="draft"?"secondary":mr==="published"?"success":"alternative",{formatMessage:xr}=useIntl$1();return jsxRuntimeExports.jsx(Status$1,{...gr,size:hr,variant:vr,children:jsxRuntimeExports.jsx(Typography,{tag:"span",variant:"omega",fontWeight:"bold",children:xr({id:`content-manager.containers.List.${mr}`,defaultMessage:capitalise(mr)})})})},Header=({isCreating:mr,status:hr,title:gr="Untitled"})=>{const{formatMessage:vr}=useIntl$1(),xr=useMatch(CLONE_PATH)!==null,Er=useParams(),Cr=mr?vr({id:"content-manager.containers.edit.title.new",defaultMessage:"Create an entry"}):gr;return jsxRuntimeExports.jsxs(Flex,{direction:"column",alignItems:"flex-start",paddingTop:6,paddingBottom:4,gap:2,children:[jsxRuntimeExports.jsx(BackButton,{fallback:Er.collectionType===SINGLE_TYPES$1?void 0:`../${COLLECTION_TYPES}/${Er.slug}`}),jsxRuntimeExports.jsxs(Flex,{width:"100%",justifyContent:"space-between",gap:"80px",alignItems:"flex-start",children:[jsxRuntimeExports.jsx(Typography,{variant:"alpha",tag:"h1",children:Cr}),jsxRuntimeExports.jsx(HeaderToolbar,{})]}),hr?jsxRuntimeExports.jsx(Box,{marginTop:1,children:jsxRuntimeExports.jsx(DocumentStatus,{status:xr?"draft":hr})}):null]})},HeaderToolbar=()=>{const{formatMessage:mr}=useIntl$1(),hr=useMatch(CLONE_PATH)!==null,[{query:{status:gr="draft"}}]=useQueryParams(),{model:vr,id:xr,document:Er,meta:Cr,collectionType:wr}=useDoc(),Rr=useStrapiApp("HeaderToolbar",kr=>kr.plugins);return jsxRuntimeExports.jsxs(Flex,{gap:2,children:[jsxRuntimeExports.jsx(DescriptionComponentRenderer,{props:{activeTab:gr,model:vr,documentId:xr,document:hr?void 0:Er,meta:hr?void 0:Cr,collectionType:wr},descriptions:Rr["content-manager"].apis.getHeaderActions(),children:kr=>kr.length>0?jsxRuntimeExports.jsx(HeaderActions,{actions:kr}):null}),jsxRuntimeExports.jsx(DescriptionComponentRenderer,{props:{activeTab:gr,model:vr,documentId:xr,document:hr?void 0:Er,meta:hr?void 0:Cr,collectionType:wr},descriptions:Rr["content-manager"].apis.getDocumentActions("header"),children:kr=>{const Dr=kr.filter(Br=>(Array.isArray(Br.position)?Br.position:[Br.position]).includes("header"));return jsxRuntimeExports.jsx(DocumentActionsMenu,{actions:Dr,label:mr({id:"content-manager.containers.edit.header.more-actions",defaultMessage:"More actions"}),children:jsxRuntimeExports.jsx(Information,{activeTab:gr})})}})]})},Information=({activeTab:mr})=>{const{formatMessage:hr}=useIntl$1(),{document:gr,meta:vr}=useDoc();if(!gr||!gr.id)return null;const xr=mr==="draft"?gr:vr?.availableStatus.find(kr=>kr.publishedAt===null),Er=mr==="published"?gr:vr?.availableStatus.find(kr=>kr.publishedAt!==null),Cr=xr?.[CREATED_BY_ATTRIBUTE_NAME]?getDisplayName(xr[CREATED_BY_ATTRIBUTE_NAME]):null,wr=xr?.[UPDATED_BY_ATTRIBUTE_NAME]?getDisplayName(xr[UPDATED_BY_ATTRIBUTE_NAME]):null,Rr=[{isDisplayed:!!Er?.[PUBLISHED_AT_ATTRIBUTE_NAME],label:hr({id:"content-manager.containers.edit.information.last-published.label",defaultMessage:"Published"}),value:hr({id:"content-manager.containers.edit.information.last-published.value",defaultMessage:"{time}{isAnonymous, select, true {} other { by {author}}}"},{time:jsxRuntimeExports.jsx(RelativeTime,{timestamp:new Date(Er?.[PUBLISHED_AT_ATTRIBUTE_NAME])}),isAnonymous:!Er?.[PUBLISHED_BY_ATTRIBUTE_NAME],author:Er?.[PUBLISHED_BY_ATTRIBUTE_NAME]?getDisplayName(Er?.[PUBLISHED_BY_ATTRIBUTE_NAME]):null})},{isDisplayed:!!xr?.[UPDATED_AT_ATTRIBUTE_NAME],label:hr({id:"content-manager.containers.edit.information.last-draft.label",defaultMessage:"Updated"}),value:hr({id:"content-manager.containers.edit.information.last-draft.value",defaultMessage:"{time}{isAnonymous, select, true {} other { by {author}}}"},{time:jsxRuntimeExports.jsx(RelativeTime,{timestamp:new Date(xr?.[UPDATED_AT_ATTRIBUTE_NAME])}),isAnonymous:!wr,author:wr})},{isDisplayed:!!xr?.[CREATED_AT_ATTRIBUTE_NAME],label:hr({id:"content-manager.containers.edit.information.document.label",defaultMessage:"Created"}),value:hr({id:"content-manager.containers.edit.information.document.value",defaultMessage:"{time}{isAnonymous, select, true {} other { by {author}}}"},{time:jsxRuntimeExports.jsx(RelativeTime,{timestamp:new Date(xr?.[CREATED_AT_ATTRIBUTE_NAME])}),isAnonymous:!Cr,author:Cr})}].filter(kr=>kr.isDisplayed);return jsxRuntimeExports.jsx(Flex,{borderWidth:"1px 0 0 0",borderStyle:"solid",borderColor:"neutral150",direction:"column",marginTop:2,tag:"dl",padding:5,gap:3,alignItems:"flex-start",marginLeft:"-0.4rem",marginRight:"-0.4rem",width:"calc(100% + 8px)",children:Rr.map(kr=>jsxRuntimeExports.jsxs(Flex,{gap:1,direction:"column",alignItems:"flex-start",children:[jsxRuntimeExports.jsx(Typography,{tag:"dt",variant:"pi",fontWeight:"bold",children:kr.label}),jsxRuntimeExports.jsx(Typography,{tag:"dd",variant:"pi",textColor:"neutral600",children:kr.value})]},kr.label))})},HeaderActions=({actions:mr})=>{const[hr,gr]=reactExports.useState(null),vr=Er=>async Cr=>{if(!("options"in Er)){const{onClick:wr=()=>!1,dialog:Rr,id:kr}=Er,Dr=await wr(Cr);Rr&&!Dr&&(Cr.preventDefault(),gr(kr))}},xr=()=>{gr(null)};return jsxRuntimeExports.jsx(Flex,{gap:1,children:mr.map(Er=>{if(Er.options)return jsxRuntimeExports.jsx(SingleSelect,{size:"S",onChange:Er.onSelect,"aria-label":Er.label,...Er,children:Er.options.map(({label:Cr,...wr})=>jsxRuntimeExports.jsx(SingleSelectOption,{...wr,children:Cr},wr.value))},Er.id);if(Er.type==="icon")return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(IconButton,{disabled:Er.disabled,label:Er.label,size:"S",onClick:vr(Er),children:Er.icon}),Er.dialog?jsxRuntimeExports.jsx(HeaderActionDialog,{...Er.dialog,isOpen:hr===Er.id,onClose:xr}):null]},Er.id)})})},HeaderActionDialog=({onClose:mr,onCancel:hr,title:gr,content:vr,isOpen:xr})=>{const Er=async()=>{hr&&await hr(),mr()};return jsxRuntimeExports.jsx(Dialog.Root,{open:xr,onOpenChange:Er,children:jsxRuntimeExports.jsxs(Dialog.Content,{children:[jsxRuntimeExports.jsx(Dialog.Header,{children:gr}),typeof vr=="function"?jsxRuntimeExports.jsx(vr,{onClose:Er}):vr]})})},Panels=()=>{const mr=useMatch(CLONE_PATH)!==null,[{query:{status:hr}}]=useQueryParams({status:"draft"}),{model:gr,id:vr,document:xr,meta:Er,collectionType:Cr}=useDoc(),wr=useStrapiApp("Panels",kr=>kr.plugins),Rr={activeTab:hr,model:gr,documentId:vr,document:mr?void 0:xr,meta:mr?void 0:Er,collectionType:Cr};return jsxRuntimeExports.jsx(Flex,{direction:"column",alignItems:"stretch",gap:2,children:jsxRuntimeExports.jsx(DescriptionComponentRenderer,{props:Rr,descriptions:wr["content-manager"].apis.getEditViewSidePanels(),children:kr=>kr.map(({content:Dr,id:Br,...Hr})=>jsxRuntimeExports.jsx(Panel,{...Hr,children:Dr},Br))})})},ActionsPanel=()=>{const{formatMessage:mr}=useIntl$1();return{title:mr({id:"content-manager.containers.edit.panels.default.title",defaultMessage:"Entry"}),content:jsxRuntimeExports.jsx(ActionsPanelContent,{})}};ActionsPanel.type="actions";const ActionsPanelContent=()=>{const mr=useMatch(CLONE_PATH)!==null,[{query:{status:hr="draft"}}]=useQueryParams(),{model:gr,id:vr,document:xr,meta:Er,collectionType:Cr}=useDoc(),wr=useStrapiApp("ActionsPanel",kr=>kr.plugins),Rr={activeTab:hr,model:gr,documentId:vr,document:mr?void 0:xr,meta:mr?void 0:Er,collectionType:Cr};return jsxRuntimeExports.jsxs(Flex,{direction:"column",gap:2,width:"100%",children:[jsxRuntimeExports.jsx(DescriptionComponentRenderer,{props:Rr,descriptions:wr["content-manager"].apis.getDocumentActions("panel"),children:kr=>jsxRuntimeExports.jsx(DocumentActions,{actions:kr})}),jsxRuntimeExports.jsx(InjectionZone,{area:"editView.right-links",slug:gr})]})},Panel=reactExports.forwardRef(({children:mr,title:hr},gr)=>jsxRuntimeExports.jsxs(Flex,{ref:gr,tag:"aside","aria-labelledby":"additional-information",background:"neutral0",borderColor:"neutral150",hasRadius:!0,paddingBottom:4,paddingLeft:4,paddingRight:4,paddingTop:4,shadow:"tableShadow",gap:3,direction:"column",justifyContent:"stretch",alignItems:"flex-start",children:[jsxRuntimeExports.jsx(Typography,{tag:"h2",variant:"sigma",textTransform:"uppercase",textColor:"neutral600",children:hr}),mr]}));dt$3(Typography)`
  max-width: 300px;
`;const BulkActionsRenderer=()=>{const mr=useStrapiApp("BulkActionsRenderer",xr=>xr.plugins),{model:hr,collectionType:gr}=useDoc(),{selectedRows:vr}=useTable("BulkActionsRenderer",xr=>xr);return jsxRuntimeExports.jsx(Flex,{gap:2,children:jsxRuntimeExports.jsx(DescriptionComponentRenderer,{props:{model:hr,collectionType:gr,documents:vr},descriptions:mr["content-manager"].apis.getBulkActions(),children:xr=>xr.map(Er=>jsxRuntimeExports.jsx(DocumentActionButton,{...Er},Er.id))})})},TableActions=({document:mr})=>{const{formatMessage:hr}=useIntl$1(),{model:gr,collectionType:vr}=useDoc(),xr=useStrapiApp("TableActions",Cr=>Cr.plugins),Er={activeTab:null,model:gr,documentId:mr.documentId,collectionType:vr,document:mr};return jsxRuntimeExports.jsx(DescriptionComponentRenderer,{props:Er,descriptions:xr["content-manager"].apis.getDocumentActions("table-row").filter(Cr=>Cr.name!=="PublishAction"),children:Cr=>{const wr=Cr.filter(Rr=>(Array.isArray(Rr.position)?Rr.position:[Rr.position]).includes("table-row"));return jsxRuntimeExports.jsx(DocumentActionsMenu,{actions:wr,label:hr({id:"content-manager.containers.list.table.row-actions",defaultMessage:"Row action"}),variant:"ghost"})}})};dt$3(ForwardRef$1r)`
  path {
    fill: currentColor;
  }
`;dt$3(ForwardRef$3L)`
  path {
    fill: currentColor;
  }
`;const initialState={collectionTypeLinks:[],components:[],fieldSizes:{},models:[],singleTypeLinks:[],isLoading:!0},appSlice=createSlice({name:"app",initialState,reducers:{setInitialData(mr,hr){const{authorizedCollectionTypeLinks:gr,authorizedSingleTypeLinks:vr,components:xr,contentTypeSchemas:Er,fieldSizes:Cr}=hr.payload;mr.collectionTypeLinks=gr.filter(({isDisplayed:wr})=>wr),mr.singleTypeLinks=vr.filter(({isDisplayed:wr})=>wr),mr.components=xr,mr.models=Er,mr.fieldSizes=Cr,mr.isLoading=!1}}}),{actions,reducer:reducer$1}=appSlice;combineReducers({app:reducer$1});const previewApi=contentManagerApi.injectEndpoints({endpoints:mr=>({getPreviewUrl:mr.query({query({query:hr,params:gr}){return{url:`/content-manager/preview/url/${gr.contentType}`,method:"GET",config:{params:hr}}}})})}),{useGetPreviewUrlQuery}=previewApi;function invariant$1(mr,hr,gr){if(gr===void 0&&(gr=Error),!mr)throw new gr(hr)}var defaultErrorHandler=function(mr){},defaultWarnHandler=function(mr){},DEFAULT_INTL_CONFIG={formats:{},messages:{},timeZone:void 0,defaultLocale:"en",defaultFormats:{},fallbackOnEmptyString:!0,onError:defaultErrorHandler,onWarn:defaultWarnHandler};function invariantIntlContext(mr){invariant$1(mr,"[React Intl] Could not find required `intl` object. <IntlProvider> needs to exist in the component ancestry.")}__assign(__assign({},DEFAULT_INTL_CONFIG),{textComponent:reactExports.Fragment});var IntlContext=typeof window<"u"&&!window.__REACT_INTL_BYPASS_GLOBAL_CONTEXT__?window.__REACT_INTL_CONTEXT__||(window.__REACT_INTL_CONTEXT__=reactExports.createContext(null)):reactExports.createContext(null);IntlContext.Consumer;IntlContext.Provider;var Context=IntlContext;function useIntl(){var mr=reactExports.useContext(Context);return invariantIntlContext(mr),mr}var DisplayName;(function(mr){mr.formatDate="FormattedDate",mr.formatTime="FormattedTime",mr.formatNumber="FormattedNumber",mr.formatList="FormattedList",mr.formatDisplayName="FormattedDisplayName"})(DisplayName||(DisplayName={}));var DisplayNameParts;(function(mr){mr.formatDate="FormattedDateParts",mr.formatTime="FormattedTimeParts",mr.formatNumber="FormattedNumberParts",mr.formatList="FormattedListParts"})(DisplayNameParts||(DisplayNameParts={}));function createFormattedDateTimePartsComponent(mr){var hr=function(gr){var vr=useIntl(),xr=gr.value,Er=gr.children,Cr=__rest(gr,["value","children"]),wr=typeof xr=="string"?new Date(xr||0):xr,Rr=mr==="formatDate"?vr.formatDateToParts(wr,Cr):vr.formatTimeToParts(wr,Cr);return Er(Rr)};return hr.displayName=DisplayNameParts[mr],hr}function createFormattedComponent(mr){var hr=function(gr){var vr=useIntl(),xr=gr.value,Er=gr.children,Cr=__rest(gr,["value","children"]),wr=vr[mr](xr,Cr);if(typeof Er=="function")return Er(wr);var Rr=vr.textComponent||reactExports.Fragment;return reactExports.createElement(Rr,null,wr)};return hr.displayName=DisplayName[mr],hr}createFormattedComponent("formatDate");createFormattedComponent("formatTime");createFormattedComponent("formatNumber");createFormattedComponent("formatList");createFormattedComponent("formatDisplayName");createFormattedDateTimePartsComponent("formatDate");createFormattedDateTimePartsComponent("formatTime");let defaultOptions={};const _options=new WeakMap,referenceTables={metric:[{from:0,to:1e3,unit:"B",long:"bytes"},{from:1e3,to:1e6,unit:"kB",long:"kilobytes"},{from:1e6,to:1e9,unit:"MB",long:"megabytes"},{from:1e9,to:1e12,unit:"GB",long:"gigabytes"},{from:1e12,to:1e15,unit:"TB",long:"terabytes"},{from:1e15,to:1e18,unit:"PB",long:"petabytes"},{from:1e18,to:1e21,unit:"EB",long:"exabytes"},{from:1e21,to:1e24,unit:"ZB",long:"zettabytes"},{from:1e24,to:1e27,unit:"YB",long:"yottabytes"}],metric_octet:[{from:0,to:1e3,unit:"o",long:"octets"},{from:1e3,to:1e6,unit:"ko",long:"kilooctets"},{from:1e6,to:1e9,unit:"Mo",long:"megaoctets"},{from:1e9,to:1e12,unit:"Go",long:"gigaoctets"},{from:1e12,to:1e15,unit:"To",long:"teraoctets"},{from:1e15,to:1e18,unit:"Po",long:"petaoctets"},{from:1e18,to:1e21,unit:"Eo",long:"exaoctets"},{from:1e21,to:1e24,unit:"Zo",long:"zettaoctets"},{from:1e24,to:1e27,unit:"Yo",long:"yottaoctets"}],iec:[{from:0,to:Math.pow(1024,1),unit:"B",long:"bytes"},{from:Math.pow(1024,1),to:Math.pow(1024,2),unit:"KiB",long:"kibibytes"},{from:Math.pow(1024,2),to:Math.pow(1024,3),unit:"MiB",long:"mebibytes"},{from:Math.pow(1024,3),to:Math.pow(1024,4),unit:"GiB",long:"gibibytes"},{from:Math.pow(1024,4),to:Math.pow(1024,5),unit:"TiB",long:"tebibytes"},{from:Math.pow(1024,5),to:Math.pow(1024,6),unit:"PiB",long:"pebibytes"},{from:Math.pow(1024,6),to:Math.pow(1024,7),unit:"EiB",long:"exbibytes"},{from:Math.pow(1024,7),to:Math.pow(1024,8),unit:"ZiB",long:"zebibytes"},{from:Math.pow(1024,8),to:Math.pow(1024,9),unit:"YiB",long:"yobibytes"}],iec_octet:[{from:0,to:Math.pow(1024,1),unit:"o",long:"octets"},{from:Math.pow(1024,1),to:Math.pow(1024,2),unit:"Kio",long:"kibioctets"},{from:Math.pow(1024,2),to:Math.pow(1024,3),unit:"Mio",long:"mebioctets"},{from:Math.pow(1024,3),to:Math.pow(1024,4),unit:"Gio",long:"gibioctets"},{from:Math.pow(1024,4),to:Math.pow(1024,5),unit:"Tio",long:"tebioctets"},{from:Math.pow(1024,5),to:Math.pow(1024,6),unit:"Pio",long:"pebioctets"},{from:Math.pow(1024,6),to:Math.pow(1024,7),unit:"Eio",long:"exbioctets"},{from:Math.pow(1024,7),to:Math.pow(1024,8),unit:"Zio",long:"zebioctets"},{from:Math.pow(1024,8),to:Math.pow(1024,9),unit:"Yio",long:"yobioctets"}]};class ByteSize{constructor(hr,gr){gr=Object.assign({units:"metric",precision:1,locale:void 0},defaultOptions,gr),_options.set(this,gr),Object.assign(referenceTables,gr.customUnits);const vr=hr<0?"-":"";hr=Math.abs(hr);const xr=referenceTables[gr.units];if(xr){const Er=xr.find(Cr=>hr>=Cr.from&&hr<Cr.to);if(Er){const Cr=new Intl.NumberFormat(gr.locale,{style:"decimal",minimumFractionDigits:gr.precision,maximumFractionDigits:gr.precision}),wr=Er.from===0?vr+hr:vr+Cr.format(hr/Er.from);this.value=wr,this.unit=Er.unit,this.long=Er.long}else this.value=vr+hr,this.unit="",this.long=""}else throw new Error(`Invalid units specified: ${gr.units}`)}toString(){const hr=_options.get(this);return hr.toStringFn?hr.toStringFn.bind(this)():`${this.value} ${this.unit}`}}function byteSize(mr,hr){return new ByteSize(mr,hr)}byteSize.defaultOptions=function(mr){defaultOptions=mr};function _arrayWithHoles(mr){if(Array.isArray(mr))return mr}function _iterableToArrayLimit(mr,hr){var gr=mr==null?null:typeof Symbol<"u"&&mr[Symbol.iterator]||mr["@@iterator"];if(gr!=null){var vr,xr,Er,Cr,wr=[],Rr=!0,kr=!1;try{if(Er=(gr=gr.call(mr)).next,hr===0){if(Object(gr)!==gr)return;Rr=!1}else for(;!(Rr=(vr=Er.call(gr)).done)&&(wr.push(vr.value),wr.length!==hr);Rr=!0);}catch(Dr){kr=!0,xr=Dr}finally{try{if(!Rr&&gr.return!=null&&(Cr=gr.return(),Object(Cr)!==Cr))return}finally{if(kr)throw xr}}return wr}}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _slicedToArray(mr,hr){return _arrayWithHoles(mr)||_iterableToArrayLimit(mr,hr)||_unsupportedIterableToArray$1(mr,hr)||_nonIterableRest()}function _objectWithoutProperties(mr,hr){if(mr==null)return{};var gr,vr,xr=_objectWithoutPropertiesLoose$2(mr,hr);if(Object.getOwnPropertySymbols){var Er=Object.getOwnPropertySymbols(mr);for(vr=0;vr<Er.length;vr++)gr=Er[vr],hr.includes(gr)||{}.propertyIsEnumerable.call(mr,gr)&&(xr[gr]=mr[gr])}return xr}var _excluded$6=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function useStateManager(mr){var hr=mr.defaultInputValue,gr=hr===void 0?"":hr,vr=mr.defaultMenuIsOpen,xr=vr===void 0?!1:vr,Er=mr.defaultValue,Cr=Er===void 0?null:Er,wr=mr.inputValue,Rr=mr.menuIsOpen,kr=mr.onChange,Dr=mr.onInputChange,Br=mr.onMenuClose,Hr=mr.onMenuOpen,Gr=mr.value,qr=_objectWithoutProperties(mr,_excluded$6),zr=reactExports.useState(wr!==void 0?wr:gr),Qr=_slicedToArray(zr,2),sn=Qr[0],hn=Qr[1],vn=reactExports.useState(Rr!==void 0?Rr:xr),yn=_slicedToArray(vn,2),gn=yn[0],bn=yn[1],xn=reactExports.useState(Gr!==void 0?Gr:Cr),$n=_slicedToArray(xn,2),Sn=$n[0],Cn=$n[1],Rn=reactExports.useCallback(function(wn,_n){typeof kr=="function"&&kr(wn,_n),Cn(wn)},[kr]),Bn=reactExports.useCallback(function(wn,_n){var Tn;typeof Dr=="function"&&(Tn=Dr(wn,_n)),hn(Tn!==void 0?Tn:wn)},[Dr]),Fn=reactExports.useCallback(function(){typeof Hr=="function"&&Hr(),bn(!0)},[Hr]),Hn=reactExports.useCallback(function(){typeof Br=="function"&&Br(),bn(!1)},[Br]),Gn=wr!==void 0?wr:sn,qn=Rr!==void 0?Rr:gn,On=Gr!==void 0?Gr:Sn;return _objectSpread2$2(_objectSpread2$2({},qr),{},{inputValue:Gn,menuIsOpen:qn,onChange:Rn,onInputChange:Bn,onMenuClose:Hn,onMenuOpen:Fn,value:On})}function _arrayWithoutHoles$1(mr){if(Array.isArray(mr))return _arrayLikeToArray$1(mr)}function _iterableToArray$1(mr){if(typeof Symbol<"u"&&mr[Symbol.iterator]!=null||mr["@@iterator"]!=null)return Array.from(mr)}function _nonIterableSpread$1(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _toConsumableArray$1(mr){return _arrayWithoutHoles$1(mr)||_iterableToArray$1(mr)||_unsupportedIterableToArray$1(mr)||_nonIterableSpread$1()}var isDevelopment$2=!1;function sheetForTag(mr){if(mr.sheet)return mr.sheet;for(var hr=0;hr<document.styleSheets.length;hr++)if(document.styleSheets[hr].ownerNode===mr)return document.styleSheets[hr]}function createStyleElement(mr){var hr=document.createElement("style");return hr.setAttribute("data-emotion",mr.key),mr.nonce!==void 0&&hr.setAttribute("nonce",mr.nonce),hr.appendChild(document.createTextNode("")),hr.setAttribute("data-s",""),hr}var StyleSheet=function(){function mr(gr){var vr=this;this._insertTag=function(xr){var Er;vr.tags.length===0?vr.insertionPoint?Er=vr.insertionPoint.nextSibling:vr.prepend?Er=vr.container.firstChild:Er=vr.before:Er=vr.tags[vr.tags.length-1].nextSibling,vr.container.insertBefore(xr,Er),vr.tags.push(xr)},this.isSpeedy=gr.speedy===void 0?!isDevelopment$2:gr.speedy,this.tags=[],this.ctr=0,this.nonce=gr.nonce,this.key=gr.key,this.container=gr.container,this.prepend=gr.prepend,this.insertionPoint=gr.insertionPoint,this.before=null}var hr=mr.prototype;return hr.hydrate=function(vr){vr.forEach(this._insertTag)},hr.insert=function(vr){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(createStyleElement(this));var xr=this.tags[this.tags.length-1];if(this.isSpeedy){var Er=sheetForTag(xr);try{Er.insertRule(vr,Er.cssRules.length)}catch{}}else xr.appendChild(document.createTextNode(vr));this.ctr++},hr.flush=function(){this.tags.forEach(function(vr){var xr;return(xr=vr.parentNode)==null?void 0:xr.removeChild(vr)}),this.tags=[],this.ctr=0},mr}(),MS="-ms-",MOZ="-moz-",WEBKIT="-webkit-",COMMENT="comm",RULESET="rule",DECLARATION="decl",IMPORT="@import",KEYFRAMES="@keyframes",LAYER="@layer",abs=Math.abs,from=String.fromCharCode,assign$1=Object.assign;function hash$1(mr,hr){return charat(mr,0)^45?(((hr<<2^charat(mr,0))<<2^charat(mr,1))<<2^charat(mr,2))<<2^charat(mr,3):0}function trim(mr){return mr.trim()}function match(mr,hr){return(mr=hr.exec(mr))?mr[0]:mr}function replace(mr,hr,gr){return mr.replace(hr,gr)}function indexof(mr,hr){return mr.indexOf(hr)}function charat(mr,hr){return mr.charCodeAt(hr)|0}function substr(mr,hr,gr){return mr.slice(hr,gr)}function strlen(mr){return mr.length}function sizeof(mr){return mr.length}function append(mr,hr){return hr.push(mr),mr}function combine(mr,hr){return mr.map(hr).join("")}var line=1,column=1,length=0,position=0,character=0,characters="";function node(mr,hr,gr,vr,xr,Er,Cr){return{value:mr,root:hr,parent:gr,type:vr,props:xr,children:Er,line,column,length:Cr,return:""}}function copy(mr,hr){return assign$1(node("",null,null,"",null,null,0),mr,{length:-mr.length},hr)}function char(){return character}function prev(){return character=position>0?charat(characters,--position):0,column--,character===10&&(column=1,line--),character}function next(){return character=position<length?charat(characters,position++):0,column++,character===10&&(column=1,line++),character}function peek(){return charat(characters,position)}function caret(){return position}function slice$1(mr,hr){return substr(characters,mr,hr)}function token(mr){switch(mr){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function alloc(mr){return line=column=1,length=strlen(characters=mr),position=0,[]}function dealloc(mr){return characters="",mr}function delimit(mr){return trim(slice$1(position-1,delimiter(mr===91?mr+2:mr===40?mr+1:mr)))}function whitespace(mr){for(;(character=peek())&&character<33;)next();return token(mr)>2||token(character)>3?"":" "}function escaping(mr,hr){for(;--hr&&next()&&!(character<48||character>102||character>57&&character<65||character>70&&character<97););return slice$1(mr,caret()+(hr<6&&peek()==32&&next()==32))}function delimiter(mr){for(;next();)switch(character){case mr:return position;case 34:case 39:mr!==34&&mr!==39&&delimiter(character);break;case 40:mr===41&&delimiter(mr);break;case 92:next();break}return position}function commenter(mr,hr){for(;next()&&mr+character!==57;)if(mr+character===84&&peek()===47)break;return"/*"+slice$1(hr,position-1)+"*"+from(mr===47?mr:next())}function identifier(mr){for(;!token(peek());)next();return slice$1(mr,position)}function compile(mr){return dealloc(parse$1("",null,null,null,[""],mr=alloc(mr),0,[0],mr))}function parse$1(mr,hr,gr,vr,xr,Er,Cr,wr,Rr){for(var kr=0,Dr=0,Br=Cr,Hr=0,Gr=0,qr=0,zr=1,Qr=1,sn=1,hn=0,vn="",yn=xr,gn=Er,bn=vr,xn=vn;Qr;)switch(qr=hn,hn=next()){case 40:if(qr!=108&&charat(xn,Br-1)==58){indexof(xn+=replace(delimit(hn),"&","&\f"),"&\f")!=-1&&(sn=-1);break}case 34:case 39:case 91:xn+=delimit(hn);break;case 9:case 10:case 13:case 32:xn+=whitespace(qr);break;case 92:xn+=escaping(caret()-1,7);continue;case 47:switch(peek()){case 42:case 47:append(comment(commenter(next(),caret()),hr,gr),Rr);break;default:xn+="/"}break;case 123*zr:wr[kr++]=strlen(xn)*sn;case 125*zr:case 59:case 0:switch(hn){case 0:case 125:Qr=0;case 59+Dr:sn==-1&&(xn=replace(xn,/\f/g,"")),Gr>0&&strlen(xn)-Br&&append(Gr>32?declaration(xn+";",vr,gr,Br-1):declaration(replace(xn," ","")+";",vr,gr,Br-2),Rr);break;case 59:xn+=";";default:if(append(bn=ruleset(xn,hr,gr,kr,Dr,xr,wr,vn,yn=[],gn=[],Br),Er),hn===123)if(Dr===0)parse$1(xn,hr,bn,bn,yn,Er,Br,wr,gn);else switch(Hr===99&&charat(xn,3)===110?100:Hr){case 100:case 108:case 109:case 115:parse$1(mr,bn,bn,vr&&append(ruleset(mr,bn,bn,0,0,xr,wr,vn,xr,yn=[],Br),gn),xr,gn,Br,wr,vr?yn:gn);break;default:parse$1(xn,bn,bn,bn,[""],gn,0,wr,gn)}}kr=Dr=Gr=0,zr=sn=1,vn=xn="",Br=Cr;break;case 58:Br=1+strlen(xn),Gr=qr;default:if(zr<1){if(hn==123)--zr;else if(hn==125&&zr++==0&&prev()==125)continue}switch(xn+=from(hn),hn*zr){case 38:sn=Dr>0?1:(xn+="\f",-1);break;case 44:wr[kr++]=(strlen(xn)-1)*sn,sn=1;break;case 64:peek()===45&&(xn+=delimit(next())),Hr=peek(),Dr=Br=strlen(vn=xn+=identifier(caret())),hn++;break;case 45:qr===45&&strlen(xn)==2&&(zr=0)}}return Er}function ruleset(mr,hr,gr,vr,xr,Er,Cr,wr,Rr,kr,Dr){for(var Br=xr-1,Hr=xr===0?Er:[""],Gr=sizeof(Hr),qr=0,zr=0,Qr=0;qr<vr;++qr)for(var sn=0,hn=substr(mr,Br+1,Br=abs(zr=Cr[qr])),vn=mr;sn<Gr;++sn)(vn=trim(zr>0?Hr[sn]+" "+hn:replace(hn,/&\f/g,Hr[sn])))&&(Rr[Qr++]=vn);return node(mr,hr,gr,xr===0?RULESET:wr,Rr,kr,Dr)}function comment(mr,hr,gr){return node(mr,hr,gr,COMMENT,from(char()),substr(mr,2,-2),0)}function declaration(mr,hr,gr,vr){return node(mr,hr,gr,DECLARATION,substr(mr,0,vr),substr(mr,vr+1,-1),vr)}function serialize(mr,hr){for(var gr="",vr=sizeof(mr),xr=0;xr<vr;xr++)gr+=hr(mr[xr],xr,mr,hr)||"";return gr}function stringify(mr,hr,gr,vr){switch(mr.type){case LAYER:if(mr.children.length)break;case IMPORT:case DECLARATION:return mr.return=mr.return||mr.value;case COMMENT:return"";case KEYFRAMES:return mr.return=mr.value+"{"+serialize(mr.children,vr)+"}";case RULESET:mr.value=mr.props.join(",")}return strlen(gr=serialize(mr.children,vr))?mr.return=mr.value+"{"+gr+"}":""}function middleware(mr){var hr=sizeof(mr);return function(gr,vr,xr,Er){for(var Cr="",wr=0;wr<hr;wr++)Cr+=mr[wr](gr,vr,xr,Er)||"";return Cr}}function rulesheet(mr){return function(hr){hr.root||(hr=hr.return)&&mr(hr)}}function memoize(mr){var hr=Object.create(null);return function(gr){return hr[gr]===void 0&&(hr[gr]=mr(gr)),hr[gr]}}var identifierWithPointTracking=function(hr,gr,vr){for(var xr=0,Er=0;xr=Er,Er=peek(),xr===38&&Er===12&&(gr[vr]=1),!token(Er);)next();return slice$1(hr,position)},toRules=function(hr,gr){var vr=-1,xr=44;do switch(token(xr)){case 0:xr===38&&peek()===12&&(gr[vr]=1),hr[vr]+=identifierWithPointTracking(position-1,gr,vr);break;case 2:hr[vr]+=delimit(xr);break;case 4:if(xr===44){hr[++vr]=peek()===58?"&\f":"",gr[vr]=hr[vr].length;break}default:hr[vr]+=from(xr)}while(xr=next());return hr},getRules=function(hr,gr){return dealloc(toRules(alloc(hr),gr))},fixedElements=new WeakMap,compat=function(hr){if(!(hr.type!=="rule"||!hr.parent||hr.length<1)){for(var gr=hr.value,vr=hr.parent,xr=hr.column===vr.column&&hr.line===vr.line;vr.type!=="rule";)if(vr=vr.parent,!vr)return;if(!(hr.props.length===1&&gr.charCodeAt(0)!==58&&!fixedElements.get(vr))&&!xr){fixedElements.set(hr,!0);for(var Er=[],Cr=getRules(gr,Er),wr=vr.props,Rr=0,kr=0;Rr<Cr.length;Rr++)for(var Dr=0;Dr<wr.length;Dr++,kr++)hr.props[kr]=Er[Rr]?Cr[Rr].replace(/&\f/g,wr[Dr]):wr[Dr]+" "+Cr[Rr]}}},removeLabel=function(hr){if(hr.type==="decl"){var gr=hr.value;gr.charCodeAt(0)===108&&gr.charCodeAt(2)===98&&(hr.return="",hr.value="")}};function prefix(mr,hr){switch(hash$1(mr,hr)){case 5103:return WEBKIT+"print-"+mr+mr;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return WEBKIT+mr+mr;case 5349:case 4246:case 4810:case 6968:case 2756:return WEBKIT+mr+MOZ+mr+MS+mr+mr;case 6828:case 4268:return WEBKIT+mr+MS+mr+mr;case 6165:return WEBKIT+mr+MS+"flex-"+mr+mr;case 5187:return WEBKIT+mr+replace(mr,/(\w+).+(:[^]+)/,WEBKIT+"box-$1$2"+MS+"flex-$1$2")+mr;case 5443:return WEBKIT+mr+MS+"flex-item-"+replace(mr,/flex-|-self/,"")+mr;case 4675:return WEBKIT+mr+MS+"flex-line-pack"+replace(mr,/align-content|flex-|-self/,"")+mr;case 5548:return WEBKIT+mr+MS+replace(mr,"shrink","negative")+mr;case 5292:return WEBKIT+mr+MS+replace(mr,"basis","preferred-size")+mr;case 6060:return WEBKIT+"box-"+replace(mr,"-grow","")+WEBKIT+mr+MS+replace(mr,"grow","positive")+mr;case 4554:return WEBKIT+replace(mr,/([^-])(transform)/g,"$1"+WEBKIT+"$2")+mr;case 6187:return replace(replace(replace(mr,/(zoom-|grab)/,WEBKIT+"$1"),/(image-set)/,WEBKIT+"$1"),mr,"")+mr;case 5495:case 3959:return replace(mr,/(image-set\([^]*)/,WEBKIT+"$1$`$1");case 4968:return replace(replace(mr,/(.+:)(flex-)?(.*)/,WEBKIT+"box-pack:$3"+MS+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+WEBKIT+mr+mr;case 4095:case 3583:case 4068:case 2532:return replace(mr,/(.+)-inline(.+)/,WEBKIT+"$1$2")+mr;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(strlen(mr)-1-hr>6)switch(charat(mr,hr+1)){case 109:if(charat(mr,hr+4)!==45)break;case 102:return replace(mr,/(.+:)(.+)-([^]+)/,"$1"+WEBKIT+"$2-$3$1"+MOZ+(charat(mr,hr+3)==108?"$3":"$2-$3"))+mr;case 115:return~indexof(mr,"stretch")?prefix(replace(mr,"stretch","fill-available"),hr)+mr:mr}break;case 4949:if(charat(mr,hr+1)!==115)break;case 6444:switch(charat(mr,strlen(mr)-3-(~indexof(mr,"!important")&&10))){case 107:return replace(mr,":",":"+WEBKIT)+mr;case 101:return replace(mr,/(.+:)([^;!]+)(;|!.+)?/,"$1"+WEBKIT+(charat(mr,14)===45?"inline-":"")+"box$3$1"+WEBKIT+"$2$3$1"+MS+"$2box$3")+mr}break;case 5936:switch(charat(mr,hr+11)){case 114:return WEBKIT+mr+MS+replace(mr,/[svh]\w+-[tblr]{2}/,"tb")+mr;case 108:return WEBKIT+mr+MS+replace(mr,/[svh]\w+-[tblr]{2}/,"tb-rl")+mr;case 45:return WEBKIT+mr+MS+replace(mr,/[svh]\w+-[tblr]{2}/,"lr")+mr}return WEBKIT+mr+MS+mr+mr}return mr}var prefixer=function(hr,gr,vr,xr){if(hr.length>-1&&!hr.return)switch(hr.type){case DECLARATION:hr.return=prefix(hr.value,hr.length);break;case KEYFRAMES:return serialize([copy(hr,{value:replace(hr.value,"@","@"+WEBKIT)})],xr);case RULESET:if(hr.length)return combine(hr.props,function(Er){switch(match(Er,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return serialize([copy(hr,{props:[replace(Er,/:(read-\w+)/,":"+MOZ+"$1")]})],xr);case"::placeholder":return serialize([copy(hr,{props:[replace(Er,/:(plac\w+)/,":"+WEBKIT+"input-$1")]}),copy(hr,{props:[replace(Er,/:(plac\w+)/,":"+MOZ+"$1")]}),copy(hr,{props:[replace(Er,/:(plac\w+)/,MS+"input-$1")]})],xr)}return""})}},defaultStylisPlugins=[prefixer],createCache=function(hr){var gr=hr.key;if(gr==="css"){var vr=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(vr,function(zr){var Qr=zr.getAttribute("data-emotion");Qr.indexOf(" ")!==-1&&(document.head.appendChild(zr),zr.setAttribute("data-s",""))})}var xr=hr.stylisPlugins||defaultStylisPlugins,Er={},Cr,wr=[];Cr=hr.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+gr+' "]'),function(zr){for(var Qr=zr.getAttribute("data-emotion").split(" "),sn=1;sn<Qr.length;sn++)Er[Qr[sn]]=!0;wr.push(zr)});var Rr,kr=[compat,removeLabel];{var Dr,Br=[stringify,rulesheet(function(zr){Dr.insert(zr)})],Hr=middleware(kr.concat(xr,Br)),Gr=function(Qr){return serialize(compile(Qr),Hr)};Rr=function(Qr,sn,hn,vn){Dr=hn,Gr(Qr?Qr+"{"+sn.styles+"}":sn.styles),vn&&(qr.inserted[sn.name]=!0)}}var qr={key:gr,sheet:new StyleSheet({key:gr,container:Cr,nonce:hr.nonce,speedy:hr.speedy,prepend:hr.prepend,insertionPoint:hr.insertionPoint}),nonce:hr.nonce,inserted:Er,registered:{},insert:Rr};return qr.sheet.hydrate(wr),qr},isBrowser=!0;function getRegisteredStyles(mr,hr,gr){var vr="";return gr.split(" ").forEach(function(xr){mr[xr]!==void 0?hr.push(mr[xr]+";"):xr&&(vr+=xr+" ")}),vr}var registerStyles=function(hr,gr,vr){var xr=hr.key+"-"+gr.name;(vr===!1||isBrowser===!1)&&hr.registered[xr]===void 0&&(hr.registered[xr]=gr.styles)},insertStyles=function(hr,gr,vr){registerStyles(hr,gr,vr);var xr=hr.key+"-"+gr.name;if(hr.inserted[gr.name]===void 0){var Er=gr;do hr.insert(gr===Er?"."+xr:"",Er,hr.sheet,!0),Er=Er.next;while(Er!==void 0)}};function murmur2(mr){for(var hr=0,gr,vr=0,xr=mr.length;xr>=4;++vr,xr-=4)gr=mr.charCodeAt(vr)&255|(mr.charCodeAt(++vr)&255)<<8|(mr.charCodeAt(++vr)&255)<<16|(mr.charCodeAt(++vr)&255)<<24,gr=(gr&65535)*1540483477+((gr>>>16)*59797<<16),gr^=gr>>>24,hr=(gr&65535)*1540483477+((gr>>>16)*59797<<16)^(hr&65535)*1540483477+((hr>>>16)*59797<<16);switch(xr){case 3:hr^=(mr.charCodeAt(vr+2)&255)<<16;case 2:hr^=(mr.charCodeAt(vr+1)&255)<<8;case 1:hr^=mr.charCodeAt(vr)&255,hr=(hr&65535)*1540483477+((hr>>>16)*59797<<16)}return hr^=hr>>>13,hr=(hr&65535)*1540483477+((hr>>>16)*59797<<16),((hr^hr>>>15)>>>0).toString(36)}var unitlessKeys={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},isDevelopment$1=!1,hyphenateRegex=/[A-Z]|^ms/g,animationRegex=/_EMO_([^_]+?)_([^]*?)_EMO_/g,isCustomProperty=function(hr){return hr.charCodeAt(1)===45},isProcessableValue=function(hr){return hr!=null&&typeof hr!="boolean"},processStyleName=memoize(function(mr){return isCustomProperty(mr)?mr:mr.replace(hyphenateRegex,"-$&").toLowerCase()}),processStyleValue=function(hr,gr){switch(hr){case"animation":case"animationName":if(typeof gr=="string")return gr.replace(animationRegex,function(vr,xr,Er){return cursor={name:xr,styles:Er,next:cursor},xr})}return unitlessKeys[hr]!==1&&!isCustomProperty(hr)&&typeof gr=="number"&&gr!==0?gr+"px":gr},noComponentSelectorMessage="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function handleInterpolation(mr,hr,gr){if(gr==null)return"";var vr=gr;if(vr.__emotion_styles!==void 0)return vr;switch(typeof gr){case"boolean":return"";case"object":{var xr=gr;if(xr.anim===1)return cursor={name:xr.name,styles:xr.styles,next:cursor},xr.name;var Er=gr;if(Er.styles!==void 0){var Cr=Er.next;if(Cr!==void 0)for(;Cr!==void 0;)cursor={name:Cr.name,styles:Cr.styles,next:cursor},Cr=Cr.next;var wr=Er.styles+";";return wr}return createStringFromObject(mr,hr,gr)}case"function":{if(mr!==void 0){var Rr=cursor,kr=gr(mr);return cursor=Rr,handleInterpolation(mr,hr,kr)}break}}var Dr=gr;return Dr}function createStringFromObject(mr,hr,gr){var vr="";if(Array.isArray(gr))for(var xr=0;xr<gr.length;xr++)vr+=handleInterpolation(mr,hr,gr[xr])+";";else for(var Er in gr){var Cr=gr[Er];if(typeof Cr!="object"){var wr=Cr;isProcessableValue(wr)&&(vr+=processStyleName(Er)+":"+processStyleValue(Er,wr)+";")}else{if(Er==="NO_COMPONENT_SELECTOR"&&isDevelopment$1)throw new Error(noComponentSelectorMessage);if(Array.isArray(Cr)&&typeof Cr[0]=="string"&&hr==null)for(var Rr=0;Rr<Cr.length;Rr++)isProcessableValue(Cr[Rr])&&(vr+=processStyleName(Er)+":"+processStyleValue(Er,Cr[Rr])+";");else{var kr=handleInterpolation(mr,hr,Cr);switch(Er){case"animation":case"animationName":{vr+=processStyleName(Er)+":"+kr+";";break}default:vr+=Er+"{"+kr+"}"}}}}return vr}var labelPattern=/label:\s*([^\s;{]+)\s*(;|$)/g,cursor;function serializeStyles(mr,hr,gr){if(mr.length===1&&typeof mr[0]=="object"&&mr[0]!==null&&mr[0].styles!==void 0)return mr[0];var vr=!0,xr="";cursor=void 0;var Er=mr[0];if(Er==null||Er.raw===void 0)vr=!1,xr+=handleInterpolation(gr,hr,Er);else{var Cr=Er;xr+=Cr[0]}for(var wr=1;wr<mr.length;wr++)if(xr+=handleInterpolation(gr,hr,mr[wr]),vr){var Rr=Er;xr+=Rr[wr]}labelPattern.lastIndex=0;for(var kr="",Dr;(Dr=labelPattern.exec(xr))!==null;)kr+="-"+Dr[1];var Br=murmur2(xr)+kr;return{name:Br,styles:xr,next:cursor}}var syncFallback=function(hr){return hr()},useInsertionEffect=React$2.useInsertionEffect?React$2.useInsertionEffect:!1,useInsertionEffectAlwaysWithSyncFallback=useInsertionEffect||syncFallback,isDevelopment=!1,EmotionCacheContext=reactExports.createContext(typeof HTMLElement<"u"?createCache({key:"css"}):null);EmotionCacheContext.Provider;var withEmotionCache=function(hr){return reactExports.forwardRef(function(gr,vr){var xr=reactExports.useContext(EmotionCacheContext);return hr(gr,xr,vr)})},ThemeContext=reactExports.createContext({}),hasOwn={}.hasOwnProperty,typePropName="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",createEmotionProps=function(hr,gr){var vr={};for(var xr in gr)hasOwn.call(gr,xr)&&(vr[xr]=gr[xr]);return vr[typePropName]=hr,vr},Insertion=function(hr){var gr=hr.cache,vr=hr.serialized,xr=hr.isStringTag;return registerStyles(gr,vr,xr),useInsertionEffectAlwaysWithSyncFallback(function(){return insertStyles(gr,vr,xr)}),null},Emotion=withEmotionCache(function(mr,hr,gr){var vr=mr.css;typeof vr=="string"&&hr.registered[vr]!==void 0&&(vr=hr.registered[vr]);var xr=mr[typePropName],Er=[vr],Cr="";typeof mr.className=="string"?Cr=getRegisteredStyles(hr.registered,Er,mr.className):mr.className!=null&&(Cr=mr.className+" ");var wr=serializeStyles(Er,void 0,reactExports.useContext(ThemeContext));Cr+=hr.key+"-"+wr.name;var Rr={};for(var kr in mr)hasOwn.call(mr,kr)&&kr!=="css"&&kr!==typePropName&&!isDevelopment&&(Rr[kr]=mr[kr]);return Rr.className=Cr,gr&&(Rr.ref=gr),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(Insertion,{cache:hr,serialized:wr,isStringTag:typeof xr=="string"}),reactExports.createElement(xr,Rr))}),Emotion$1=Emotion,jsx=function(hr,gr){var vr=arguments;if(gr==null||!hasOwn.call(gr,"css"))return reactExports.createElement.apply(void 0,vr);var xr=vr.length,Er=new Array(xr);Er[0]=Emotion$1,Er[1]=createEmotionProps(hr,gr);for(var Cr=2;Cr<xr;Cr++)Er[Cr]=vr[Cr];return reactExports.createElement.apply(null,Er)};(function(mr){var hr;hr||(hr=mr.JSX||(mr.JSX={}))})(jsx||(jsx={}));function css(){for(var mr=arguments.length,hr=new Array(mr),gr=0;gr<mr;gr++)hr[gr]=arguments[gr];return serializeStyles(hr)}function keyframes(){var mr=css.apply(void 0,arguments),hr="animation-"+mr.name;return{name:hr,styles:"@keyframes "+hr+"{"+mr.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function _taggedTemplateLiteral(mr,hr){return hr||(hr=mr.slice(0)),Object.freeze(Object.defineProperties(mr,{raw:{value:Object.freeze(hr)}}))}var index=reactExports.useLayoutEffect,_excluded$4=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],noop$1=function(){};function applyPrefixToName(mr,hr){return hr?hr[0]==="-"?mr+hr:mr+"__"+hr:mr}function classNames(mr,hr){for(var gr=arguments.length,vr=new Array(gr>2?gr-2:0),xr=2;xr<gr;xr++)vr[xr-2]=arguments[xr];var Er=[].concat(vr);if(hr&&mr)for(var Cr in hr)hr.hasOwnProperty(Cr)&&hr[Cr]&&Er.push("".concat(applyPrefixToName(mr,Cr)));return Er.filter(function(wr){return wr}).map(function(wr){return String(wr).trim()}).join(" ")}var cleanValue=function(hr){return isArray$1(hr)?hr.filter(Boolean):_typeof$1(hr)==="object"&&hr!==null?[hr]:[]},cleanCommonProps=function(hr){hr.className,hr.clearValue,hr.cx,hr.getStyles,hr.getClassNames,hr.getValue,hr.hasValue,hr.isMulti,hr.isRtl,hr.options,hr.selectOption,hr.selectProps,hr.setValue,hr.theme;var gr=_objectWithoutProperties(hr,_excluded$4);return _objectSpread2$2({},gr)},getStyleProps=function(hr,gr,vr){var xr=hr.cx,Er=hr.getStyles,Cr=hr.getClassNames,wr=hr.className;return{css:Er(gr,hr),className:xr(vr??{},Cr(gr,hr),wr)}};function isDocumentElement(mr){return[document.documentElement,document.body,window].indexOf(mr)>-1}function normalizedHeight(mr){return isDocumentElement(mr)?window.innerHeight:mr.clientHeight}function getScrollTop(mr){return isDocumentElement(mr)?window.pageYOffset:mr.scrollTop}function scrollTo(mr,hr){if(isDocumentElement(mr)){window.scrollTo(0,hr);return}mr.scrollTop=hr}function getScrollParent(mr){var hr=getComputedStyle(mr),gr=hr.position==="absolute",vr=/(auto|scroll)/;if(hr.position==="fixed")return document.documentElement;for(var xr=mr;xr=xr.parentElement;)if(hr=getComputedStyle(xr),!(gr&&hr.position==="static")&&vr.test(hr.overflow+hr.overflowY+hr.overflowX))return xr;return document.documentElement}function easeOutCubic(mr,hr,gr,vr){return gr*((mr=mr/vr-1)*mr*mr+1)+hr}function animatedScrollTo(mr,hr){var gr=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,vr=arguments.length>3&&arguments[3]!==void 0?arguments[3]:noop$1,xr=getScrollTop(mr),Er=hr-xr,Cr=10,wr=0;function Rr(){wr+=Cr;var kr=easeOutCubic(wr,xr,Er,gr);scrollTo(mr,kr),wr<gr?window.requestAnimationFrame(Rr):vr(mr)}Rr()}function scrollIntoView(mr,hr){var gr=mr.getBoundingClientRect(),vr=hr.getBoundingClientRect(),xr=hr.offsetHeight/3;vr.bottom+xr>gr.bottom?scrollTo(mr,Math.min(hr.offsetTop+hr.clientHeight-mr.offsetHeight+xr,mr.scrollHeight)):vr.top-xr<gr.top&&scrollTo(mr,Math.max(hr.offsetTop-xr,0))}function getBoundingClientObj(mr){var hr=mr.getBoundingClientRect();return{bottom:hr.bottom,height:hr.height,left:hr.left,right:hr.right,top:hr.top,width:hr.width}}function isTouchCapable(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function isMobileDevice(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var passiveOptionAccessed=!1,options={get passive(){return passiveOptionAccessed=!0}},w$2=typeof window<"u"?window:{};w$2.addEventListener&&w$2.removeEventListener&&(w$2.addEventListener("p",noop$1,options),w$2.removeEventListener("p",noop$1,!1));var supportsPassiveEvents=passiveOptionAccessed;function notNullish(mr){return mr!=null}function isArray$1(mr){return Array.isArray(mr)}function valueTernary(mr,hr,gr){return mr?hr:gr}function singleValueAsValue(mr){return mr}function multiValueAsValue(mr){return mr}var removeProps=function(hr){for(var gr=arguments.length,vr=new Array(gr>1?gr-1:0),xr=1;xr<gr;xr++)vr[xr-1]=arguments[xr];var Er=Object.entries(hr).filter(function(Cr){var wr=_slicedToArray(Cr,1),Rr=wr[0];return!vr.includes(Rr)});return Er.reduce(function(Cr,wr){var Rr=_slicedToArray(wr,2),kr=Rr[0],Dr=Rr[1];return Cr[kr]=Dr,Cr},{})},_excluded$3=["children","innerProps"],_excluded2$1=["children","innerProps"];function getMenuPlacement(mr){var hr=mr.maxHeight,gr=mr.menuEl,vr=mr.minHeight,xr=mr.placement,Er=mr.shouldScroll,Cr=mr.isFixedPosition,wr=mr.controlHeight,Rr=getScrollParent(gr),kr={placement:"bottom",maxHeight:hr};if(!gr||!gr.offsetParent)return kr;var Dr=Rr.getBoundingClientRect(),Br=Dr.height,Hr=gr.getBoundingClientRect(),Gr=Hr.bottom,qr=Hr.height,zr=Hr.top,Qr=gr.offsetParent.getBoundingClientRect(),sn=Qr.top,hn=Cr?window.innerHeight:normalizedHeight(Rr),vn=getScrollTop(Rr),yn=parseInt(getComputedStyle(gr).marginBottom,10),gn=parseInt(getComputedStyle(gr).marginTop,10),bn=sn-gn,xn=hn-zr,$n=bn+vn,Sn=Br-vn-zr,Cn=Gr-hn+vn+yn,Rn=vn+zr-gn,Bn=160;switch(xr){case"auto":case"bottom":if(xn>=qr)return{placement:"bottom",maxHeight:hr};if(Sn>=qr&&!Cr)return Er&&animatedScrollTo(Rr,Cn,Bn),{placement:"bottom",maxHeight:hr};if(!Cr&&Sn>=vr||Cr&&xn>=vr){Er&&animatedScrollTo(Rr,Cn,Bn);var Fn=Cr?xn-yn:Sn-yn;return{placement:"bottom",maxHeight:Fn}}if(xr==="auto"||Cr){var Hn=hr,Gn=Cr?bn:$n;return Gn>=vr&&(Hn=Math.min(Gn-yn-wr,hr)),{placement:"top",maxHeight:Hn}}if(xr==="bottom")return Er&&scrollTo(Rr,Cn),{placement:"bottom",maxHeight:hr};break;case"top":if(bn>=qr)return{placement:"top",maxHeight:hr};if($n>=qr&&!Cr)return Er&&animatedScrollTo(Rr,Rn,Bn),{placement:"top",maxHeight:hr};if(!Cr&&$n>=vr||Cr&&bn>=vr){var qn=hr;return(!Cr&&$n>=vr||Cr&&bn>=vr)&&(qn=Cr?bn-gn:$n-gn),Er&&animatedScrollTo(Rr,Rn,Bn),{placement:"top",maxHeight:qn}}return{placement:"bottom",maxHeight:hr};default:throw new Error('Invalid placement provided "'.concat(xr,'".'))}return kr}function alignToControl(mr){var hr={bottom:"top",top:"bottom"};return mr?hr[mr]:"bottom"}var coercePlacement=function(hr){return hr==="auto"?"bottom":hr},menuCSS=function(hr,gr){var vr,xr=hr.placement,Er=hr.theme,Cr=Er.borderRadius,wr=Er.spacing,Rr=Er.colors;return _objectSpread2$2((vr={label:"menu"},_defineProperty$2(vr,alignToControl(xr),"100%"),_defineProperty$2(vr,"position","absolute"),_defineProperty$2(vr,"width","100%"),_defineProperty$2(vr,"zIndex",1),vr),gr?{}:{backgroundColor:Rr.neutral0,borderRadius:Cr,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:wr.menuGutter,marginTop:wr.menuGutter})},PortalPlacementContext=reactExports.createContext(null),MenuPlacer=function(hr){var gr=hr.children,vr=hr.minMenuHeight,xr=hr.maxMenuHeight,Er=hr.menuPlacement,Cr=hr.menuPosition,wr=hr.menuShouldScrollIntoView,Rr=hr.theme,kr=reactExports.useContext(PortalPlacementContext)||{},Dr=kr.setPortalPlacement,Br=reactExports.useRef(null),Hr=reactExports.useState(xr),Gr=_slicedToArray(Hr,2),qr=Gr[0],zr=Gr[1],Qr=reactExports.useState(null),sn=_slicedToArray(Qr,2),hn=sn[0],vn=sn[1],yn=Rr.spacing.controlHeight;return index(function(){var gn=Br.current;if(gn){var bn=Cr==="fixed",xn=wr&&!bn,$n=getMenuPlacement({maxHeight:xr,menuEl:gn,minHeight:vr,placement:Er,shouldScroll:xn,isFixedPosition:bn,controlHeight:yn});zr($n.maxHeight),vn($n.placement),Dr?.($n.placement)}},[xr,Er,Cr,wr,vr,Dr,yn]),gr({ref:Br,placerProps:_objectSpread2$2(_objectSpread2$2({},hr),{},{placement:hn||coercePlacement(Er),maxHeight:qr})})},Menu=function(hr){var gr=hr.children,vr=hr.innerRef,xr=hr.innerProps;return jsx("div",_extends$7({},getStyleProps(hr,"menu",{menu:!0}),{ref:vr},xr),gr)},Menu$1=Menu,menuListCSS=function(hr,gr){var vr=hr.maxHeight,xr=hr.theme.spacing.baseUnit;return _objectSpread2$2({maxHeight:vr,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},gr?{}:{paddingBottom:xr,paddingTop:xr})},MenuList=function(hr){var gr=hr.children,vr=hr.innerProps,xr=hr.innerRef,Er=hr.isMulti;return jsx("div",_extends$7({},getStyleProps(hr,"menuList",{"menu-list":!0,"menu-list--is-multi":Er}),{ref:xr},vr),gr)},noticeCSS=function(hr,gr){var vr=hr.theme,xr=vr.spacing.baseUnit,Er=vr.colors;return _objectSpread2$2({textAlign:"center"},gr?{}:{color:Er.neutral40,padding:"".concat(xr*2,"px ").concat(xr*3,"px")})},noOptionsMessageCSS=noticeCSS,loadingMessageCSS=noticeCSS,NoOptionsMessage=function(hr){var gr=hr.children,vr=gr===void 0?"No options":gr,xr=hr.innerProps,Er=_objectWithoutProperties(hr,_excluded$3);return jsx("div",_extends$7({},getStyleProps(_objectSpread2$2(_objectSpread2$2({},Er),{},{children:vr,innerProps:xr}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),xr),vr)},LoadingMessage=function(hr){var gr=hr.children,vr=gr===void 0?"Loading...":gr,xr=hr.innerProps,Er=_objectWithoutProperties(hr,_excluded2$1);return jsx("div",_extends$7({},getStyleProps(_objectSpread2$2(_objectSpread2$2({},Er),{},{children:vr,innerProps:xr}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),xr),vr)},menuPortalCSS=function(hr){var gr=hr.rect,vr=hr.offset,xr=hr.position;return{left:gr.left,position:xr,top:vr,width:gr.width,zIndex:1}},MenuPortal=function(hr){var gr=hr.appendTo,vr=hr.children,xr=hr.controlElement,Er=hr.innerProps,Cr=hr.menuPlacement,wr=hr.menuPosition,Rr=reactExports.useRef(null),kr=reactExports.useRef(null),Dr=reactExports.useState(coercePlacement(Cr)),Br=_slicedToArray(Dr,2),Hr=Br[0],Gr=Br[1],qr=reactExports.useMemo(function(){return{setPortalPlacement:Gr}},[]),zr=reactExports.useState(null),Qr=_slicedToArray(zr,2),sn=Qr[0],hn=Qr[1],vn=reactExports.useCallback(function(){if(xr){var xn=getBoundingClientObj(xr),$n=wr==="fixed"?0:window.pageYOffset,Sn=xn[Hr]+$n;(Sn!==sn?.offset||xn.left!==sn?.rect.left||xn.width!==sn?.rect.width)&&hn({offset:Sn,rect:xn})}},[xr,wr,Hr,sn?.offset,sn?.rect.left,sn?.rect.width]);index(function(){vn()},[vn]);var yn=reactExports.useCallback(function(){typeof kr.current=="function"&&(kr.current(),kr.current=null),xr&&Rr.current&&(kr.current=autoUpdate(xr,Rr.current,vn,{elementResize:"ResizeObserver"in window}))},[xr,vn]);index(function(){yn()},[yn]);var gn=reactExports.useCallback(function(xn){Rr.current=xn,yn()},[yn]);if(!gr&&wr!=="fixed"||!sn)return null;var bn=jsx("div",_extends$7({ref:gn},getStyleProps(_objectSpread2$2(_objectSpread2$2({},hr),{},{offset:sn.offset,position:wr,rect:sn.rect}),"menuPortal",{"menu-portal":!0}),Er),vr);return jsx(PortalPlacementContext.Provider,{value:qr},gr?reactDomExports.createPortal(bn,gr):bn)},containerCSS=function(hr){var gr=hr.isDisabled,vr=hr.isRtl;return{label:"container",direction:vr?"rtl":void 0,pointerEvents:gr?"none":void 0,position:"relative"}},SelectContainer=function(hr){var gr=hr.children,vr=hr.innerProps,xr=hr.isDisabled,Er=hr.isRtl;return jsx("div",_extends$7({},getStyleProps(hr,"container",{"--is-disabled":xr,"--is-rtl":Er}),vr),gr)},valueContainerCSS=function(hr,gr){var vr=hr.theme.spacing,xr=hr.isMulti,Er=hr.hasValue,Cr=hr.selectProps.controlShouldRenderValue;return _objectSpread2$2({alignItems:"center",display:xr&&Er&&Cr?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},gr?{}:{padding:"".concat(vr.baseUnit/2,"px ").concat(vr.baseUnit*2,"px")})},ValueContainer=function(hr){var gr=hr.children,vr=hr.innerProps,xr=hr.isMulti,Er=hr.hasValue;return jsx("div",_extends$7({},getStyleProps(hr,"valueContainer",{"value-container":!0,"value-container--is-multi":xr,"value-container--has-value":Er}),vr),gr)},indicatorsContainerCSS=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},IndicatorsContainer=function(hr){var gr=hr.children,vr=hr.innerProps;return jsx("div",_extends$7({},getStyleProps(hr,"indicatorsContainer",{indicators:!0}),vr),gr)},_templateObject,_excluded$2=["size"],_excluded2=["innerProps","isRtl","size"],_ref2$2={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},Svg=function(hr){var gr=hr.size,vr=_objectWithoutProperties(hr,_excluded$2);return jsx("svg",_extends$7({height:gr,width:gr,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:_ref2$2},vr))},CrossIcon=function(hr){return jsx(Svg,_extends$7({size:20},hr),jsx("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},DownChevron=function(hr){return jsx(Svg,_extends$7({size:20},hr),jsx("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},baseCSS=function(hr,gr){var vr=hr.isFocused,xr=hr.theme,Er=xr.spacing.baseUnit,Cr=xr.colors;return _objectSpread2$2({label:"indicatorContainer",display:"flex",transition:"color 150ms"},gr?{}:{color:vr?Cr.neutral60:Cr.neutral20,padding:Er*2,":hover":{color:vr?Cr.neutral80:Cr.neutral40}})},dropdownIndicatorCSS=baseCSS,DropdownIndicator$1=function(hr){var gr=hr.children,vr=hr.innerProps;return jsx("div",_extends$7({},getStyleProps(hr,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),vr),gr||jsx(DownChevron,null))},clearIndicatorCSS=baseCSS,ClearIndicator$1=function(hr){var gr=hr.children,vr=hr.innerProps;return jsx("div",_extends$7({},getStyleProps(hr,"clearIndicator",{indicator:!0,"clear-indicator":!0}),vr),gr||jsx(CrossIcon,null))},indicatorSeparatorCSS=function(hr,gr){var vr=hr.isDisabled,xr=hr.theme,Er=xr.spacing.baseUnit,Cr=xr.colors;return _objectSpread2$2({label:"indicatorSeparator",alignSelf:"stretch",width:1},gr?{}:{backgroundColor:vr?Cr.neutral10:Cr.neutral20,marginBottom:Er*2,marginTop:Er*2})},IndicatorSeparator=function(hr){var gr=hr.innerProps;return jsx("span",_extends$7({},gr,getStyleProps(hr,"indicatorSeparator",{"indicator-separator":!0})))},loadingDotAnimations=keyframes(_templateObject||(_templateObject=_taggedTemplateLiteral([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),loadingIndicatorCSS=function(hr,gr){var vr=hr.isFocused,xr=hr.size,Er=hr.theme,Cr=Er.colors,wr=Er.spacing.baseUnit;return _objectSpread2$2({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:xr,lineHeight:1,marginRight:xr,textAlign:"center",verticalAlign:"middle"},gr?{}:{color:vr?Cr.neutral60:Cr.neutral20,padding:wr*2})},LoadingDot=function(hr){var gr=hr.delay,vr=hr.offset;return jsx("span",{css:css({animation:"".concat(loadingDotAnimations," 1s ease-in-out ").concat(gr,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:vr?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},LoadingIndicator=function(hr){var gr=hr.innerProps,vr=hr.isRtl,xr=hr.size,Er=xr===void 0?4:xr,Cr=_objectWithoutProperties(hr,_excluded2);return jsx("div",_extends$7({},getStyleProps(_objectSpread2$2(_objectSpread2$2({},Cr),{},{innerProps:gr,isRtl:vr,size:Er}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),gr),jsx(LoadingDot,{delay:0,offset:vr}),jsx(LoadingDot,{delay:160,offset:!0}),jsx(LoadingDot,{delay:320,offset:!vr}))},css$1=function(hr,gr){var vr=hr.isDisabled,xr=hr.isFocused,Er=hr.theme,Cr=Er.colors,wr=Er.borderRadius,Rr=Er.spacing;return _objectSpread2$2({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:Rr.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},gr?{}:{backgroundColor:vr?Cr.neutral5:Cr.neutral0,borderColor:vr?Cr.neutral10:xr?Cr.primary:Cr.neutral20,borderRadius:wr,borderStyle:"solid",borderWidth:1,boxShadow:xr?"0 0 0 1px ".concat(Cr.primary):void 0,"&:hover":{borderColor:xr?Cr.primary:Cr.neutral30}})},Control=function(hr){var gr=hr.children,vr=hr.isDisabled,xr=hr.isFocused,Er=hr.innerRef,Cr=hr.innerProps,wr=hr.menuIsOpen;return jsx("div",_extends$7({ref:Er},getStyleProps(hr,"control",{control:!0,"control--is-disabled":vr,"control--is-focused":xr,"control--menu-is-open":wr}),Cr,{"aria-disabled":vr||void 0}),gr)},Control$1=Control,_excluded$1=["data"],groupCSS=function(hr,gr){var vr=hr.theme.spacing;return gr?{}:{paddingBottom:vr.baseUnit*2,paddingTop:vr.baseUnit*2}},Group=function(hr){var gr=hr.children,vr=hr.cx,xr=hr.getStyles,Er=hr.getClassNames,Cr=hr.Heading,wr=hr.headingProps,Rr=hr.innerProps,kr=hr.label,Dr=hr.theme,Br=hr.selectProps;return jsx("div",_extends$7({},getStyleProps(hr,"group",{group:!0}),Rr),jsx(Cr,_extends$7({},wr,{selectProps:Br,theme:Dr,getStyles:xr,getClassNames:Er,cx:vr}),kr),jsx("div",null,gr))},groupHeadingCSS=function(hr,gr){var vr=hr.theme,xr=vr.colors,Er=vr.spacing;return _objectSpread2$2({label:"group",cursor:"default",display:"block"},gr?{}:{color:xr.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:Er.baseUnit*3,paddingRight:Er.baseUnit*3,textTransform:"uppercase"})},GroupHeading=function(hr){var gr=cleanCommonProps(hr);gr.data;var vr=_objectWithoutProperties(gr,_excluded$1);return jsx("div",_extends$7({},getStyleProps(hr,"groupHeading",{"group-heading":!0}),vr))},Group$1=Group,_excluded$5=["innerRef","isDisabled","isHidden","inputClassName"],inputCSS=function(hr,gr){var vr=hr.isDisabled,xr=hr.value,Er=hr.theme,Cr=Er.spacing,wr=Er.colors;return _objectSpread2$2(_objectSpread2$2({visibility:vr?"hidden":"visible",transform:xr?"translateZ(0)":""},containerStyle),gr?{}:{margin:Cr.baseUnit/2,paddingBottom:Cr.baseUnit/2,paddingTop:Cr.baseUnit/2,color:wr.neutral80})},spacingStyle={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},containerStyle={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":_objectSpread2$2({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},spacingStyle)},inputStyle=function(hr){return _objectSpread2$2({label:"input",color:"inherit",background:0,opacity:hr?0:1,width:"100%"},spacingStyle)},Input=function(hr){var gr=hr.cx,vr=hr.value,xr=cleanCommonProps(hr),Er=xr.innerRef,Cr=xr.isDisabled,wr=xr.isHidden,Rr=xr.inputClassName,kr=_objectWithoutProperties(xr,_excluded$5);return jsx("div",_extends$7({},getStyleProps(hr,"input",{"input-container":!0}),{"data-value":vr||""}),jsx("input",_extends$7({className:gr({input:!0},Rr),ref:Er,style:inputStyle(wr),disabled:Cr},kr)))},Input$1=Input,multiValueCSS=function(hr,gr){var vr=hr.theme,xr=vr.spacing,Er=vr.borderRadius,Cr=vr.colors;return _objectSpread2$2({label:"multiValue",display:"flex",minWidth:0},gr?{}:{backgroundColor:Cr.neutral10,borderRadius:Er/2,margin:xr.baseUnit/2})},multiValueLabelCSS=function(hr,gr){var vr=hr.theme,xr=vr.borderRadius,Er=vr.colors,Cr=hr.cropWithEllipsis;return _objectSpread2$2({overflow:"hidden",textOverflow:Cr||Cr===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},gr?{}:{borderRadius:xr/2,color:Er.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},multiValueRemoveCSS=function(hr,gr){var vr=hr.theme,xr=vr.spacing,Er=vr.borderRadius,Cr=vr.colors,wr=hr.isFocused;return _objectSpread2$2({alignItems:"center",display:"flex"},gr?{}:{borderRadius:Er/2,backgroundColor:wr?Cr.dangerLight:void 0,paddingLeft:xr.baseUnit,paddingRight:xr.baseUnit,":hover":{backgroundColor:Cr.dangerLight,color:Cr.danger}})},MultiValueGeneric=function(hr){var gr=hr.children,vr=hr.innerProps;return jsx("div",vr,gr)},MultiValueContainer=MultiValueGeneric,MultiValueLabel=MultiValueGeneric;function MultiValueRemove(mr){var hr=mr.children,gr=mr.innerProps;return jsx("div",_extends$7({role:"button"},gr),hr||jsx(CrossIcon,{size:14}))}var MultiValue=function(hr){var gr=hr.children,vr=hr.components,xr=hr.data,Er=hr.innerProps,Cr=hr.isDisabled,wr=hr.removeProps,Rr=hr.selectProps,kr=vr.Container,Dr=vr.Label,Br=vr.Remove;return jsx(kr,{data:xr,innerProps:_objectSpread2$2(_objectSpread2$2({},getStyleProps(hr,"multiValue",{"multi-value":!0,"multi-value--is-disabled":Cr})),Er),selectProps:Rr},jsx(Dr,{data:xr,innerProps:_objectSpread2$2({},getStyleProps(hr,"multiValueLabel",{"multi-value__label":!0})),selectProps:Rr},gr),jsx(Br,{data:xr,innerProps:_objectSpread2$2(_objectSpread2$2({},getStyleProps(hr,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(gr||"option")},wr),selectProps:Rr}))},MultiValue$1=MultiValue,optionCSS=function(hr,gr){var vr=hr.isDisabled,xr=hr.isFocused,Er=hr.isSelected,Cr=hr.theme,wr=Cr.spacing,Rr=Cr.colors;return _objectSpread2$2({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},gr?{}:{backgroundColor:Er?Rr.primary:xr?Rr.primary25:"transparent",color:vr?Rr.neutral20:Er?Rr.neutral0:"inherit",padding:"".concat(wr.baseUnit*2,"px ").concat(wr.baseUnit*3,"px"),":active":{backgroundColor:vr?void 0:Er?Rr.primary:Rr.primary50}})},Option$1=function(hr){var gr=hr.children,vr=hr.isDisabled,xr=hr.isFocused,Er=hr.isSelected,Cr=hr.innerRef,wr=hr.innerProps;return jsx("div",_extends$7({},getStyleProps(hr,"option",{option:!0,"option--is-disabled":vr,"option--is-focused":xr,"option--is-selected":Er}),{ref:Cr,"aria-disabled":vr},wr),gr)},Option$1$1=Option$1,placeholderCSS=function(hr,gr){var vr=hr.theme,xr=vr.spacing,Er=vr.colors;return _objectSpread2$2({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},gr?{}:{color:Er.neutral50,marginLeft:xr.baseUnit/2,marginRight:xr.baseUnit/2})},Placeholder=function(hr){var gr=hr.children,vr=hr.innerProps;return jsx("div",_extends$7({},getStyleProps(hr,"placeholder",{placeholder:!0}),vr),gr)},Placeholder$1=Placeholder,css2=function(hr,gr){var vr=hr.isDisabled,xr=hr.theme,Er=xr.spacing,Cr=xr.colors;return _objectSpread2$2({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},gr?{}:{color:vr?Cr.neutral40:Cr.neutral80,marginLeft:Er.baseUnit/2,marginRight:Er.baseUnit/2})},SingleValue=function(hr){var gr=hr.children,vr=hr.isDisabled,xr=hr.innerProps;return jsx("div",_extends$7({},getStyleProps(hr,"singleValue",{"single-value":!0,"single-value--is-disabled":vr}),xr),gr)},SingleValue$1=SingleValue,components={ClearIndicator:ClearIndicator$1,Control:Control$1,DropdownIndicator:DropdownIndicator$1,DownChevron,CrossIcon,Group:Group$1,GroupHeading,IndicatorsContainer,IndicatorSeparator,Input:Input$1,LoadingIndicator,Menu:Menu$1,MenuList,MenuPortal,LoadingMessage,NoOptionsMessage,MultiValue:MultiValue$1,MultiValueContainer,MultiValueLabel,MultiValueRemove,Option:Option$1$1,Placeholder:Placeholder$1,SelectContainer,SingleValue:SingleValue$1,ValueContainer},defaultComponents=function(hr){return _objectSpread2$2(_objectSpread2$2({},components),hr.components)},safeIsNaN=Number.isNaN||function(hr){return typeof hr=="number"&&hr!==hr};function isEqual(mr,hr){return!!(mr===hr||safeIsNaN(mr)&&safeIsNaN(hr))}function areInputsEqual(mr,hr){if(mr.length!==hr.length)return!1;for(var gr=0;gr<mr.length;gr++)if(!isEqual(mr[gr],hr[gr]))return!1;return!0}function memoizeOne(mr,hr){hr===void 0&&(hr=areInputsEqual);var gr=null;function vr(){for(var xr=[],Er=0;Er<arguments.length;Er++)xr[Er]=arguments[Er];if(gr&&gr.lastThis===this&&hr(xr,gr.lastArgs))return gr.lastResult;var Cr=mr.apply(this,xr);return gr={lastResult:Cr,lastArgs:xr,lastThis:this},Cr}return vr.clear=function(){gr=null},vr}var _ref={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},A11yText=function(hr){return jsx("span",_extends$7({css:_ref},hr))},A11yText$1=A11yText,defaultAriaLiveMessages={guidance:function(hr){var gr=hr.isSearchable,vr=hr.isMulti,xr=hr.tabSelectsValue,Er=hr.context,Cr=hr.isInitialFocus;switch(Er){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(xr?", press Tab to select the option and exit the menu":"",".");case"input":return Cr?"".concat(hr["aria-label"]||"Select"," is focused ").concat(gr?",type to refine list":"",", press Down to open the menu, ").concat(vr?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(hr){var gr=hr.action,vr=hr.label,xr=vr===void 0?"":vr,Er=hr.labels,Cr=hr.isDisabled;switch(gr){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(xr,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(Er.length>1?"s":""," ").concat(Er.join(","),", selected.");case"select-option":return Cr?"option ".concat(xr," is disabled. Select another option."):"option ".concat(xr,", selected.");default:return""}},onFocus:function(hr){var gr=hr.context,vr=hr.focused,xr=hr.options,Er=hr.label,Cr=Er===void 0?"":Er,wr=hr.selectValue,Rr=hr.isDisabled,kr=hr.isSelected,Dr=hr.isAppleDevice,Br=function(zr,Qr){return zr&&zr.length?"".concat(zr.indexOf(Qr)+1," of ").concat(zr.length):""};if(gr==="value"&&wr)return"value ".concat(Cr," focused, ").concat(Br(wr,vr),".");if(gr==="menu"&&Dr){var Hr=Rr?" disabled":"",Gr="".concat(kr?" selected":"").concat(Hr);return"".concat(Cr).concat(Gr,", ").concat(Br(xr,vr),".")}return""},onFilter:function(hr){var gr=hr.inputValue,vr=hr.resultsMessage;return"".concat(vr).concat(gr?" for search term "+gr:"",".")}},LiveRegion=function(hr){var gr=hr.ariaSelection,vr=hr.focusedOption,xr=hr.focusedValue,Er=hr.focusableOptions,Cr=hr.isFocused,wr=hr.selectValue,Rr=hr.selectProps,kr=hr.id,Dr=hr.isAppleDevice,Br=Rr.ariaLiveMessages,Hr=Rr.getOptionLabel,Gr=Rr.inputValue,qr=Rr.isMulti,zr=Rr.isOptionDisabled,Qr=Rr.isSearchable,sn=Rr.menuIsOpen,hn=Rr.options,vn=Rr.screenReaderStatus,yn=Rr.tabSelectsValue,gn=Rr.isLoading,bn=Rr["aria-label"],xn=Rr["aria-live"],$n=reactExports.useMemo(function(){return _objectSpread2$2(_objectSpread2$2({},defaultAriaLiveMessages),Br||{})},[Br]),Sn=reactExports.useMemo(function(){var Gn="";if(gr&&$n.onChange){var qn=gr.option,On=gr.options,wn=gr.removedValue,_n=gr.removedValues,Tn=gr.value,Mn=function(Dn){return Array.isArray(Dn)?null:Dn},Ln=wn||qn||Mn(Tn),jn=Ln?Hr(Ln):"",Kn=On||_n||void 0,Nn=Kn?Kn.map(Hr):[],An=_objectSpread2$2({isDisabled:Ln&&zr(Ln,wr),label:jn,labels:Nn},gr);Gn=$n.onChange(An)}return Gn},[gr,$n,zr,wr,Hr]),Cn=reactExports.useMemo(function(){var Gn="",qn=vr||xr,On=!!(vr&&wr&&wr.includes(vr));if(qn&&$n.onFocus){var wn={focused:qn,label:Hr(qn),isDisabled:zr(qn,wr),isSelected:On,options:Er,context:qn===vr?"menu":"value",selectValue:wr,isAppleDevice:Dr};Gn=$n.onFocus(wn)}return Gn},[vr,xr,Hr,zr,$n,Er,wr,Dr]),Rn=reactExports.useMemo(function(){var Gn="";if(sn&&hn.length&&!gn&&$n.onFilter){var qn=vn({count:Er.length});Gn=$n.onFilter({inputValue:Gr,resultsMessage:qn})}return Gn},[Er,Gr,sn,$n,hn,vn,gn]),Bn=gr?.action==="initial-input-focus",Fn=reactExports.useMemo(function(){var Gn="";if($n.guidance){var qn=xr?"value":sn?"menu":"input";Gn=$n.guidance({"aria-label":bn,context:qn,isDisabled:vr&&zr(vr,wr),isMulti:qr,isSearchable:Qr,tabSelectsValue:yn,isInitialFocus:Bn})}return Gn},[bn,vr,xr,qr,zr,Qr,sn,$n,wr,yn,Bn]),Hn=jsx(reactExports.Fragment,null,jsx("span",{id:"aria-selection"},Sn),jsx("span",{id:"aria-focused"},Cn),jsx("span",{id:"aria-results"},Rn),jsx("span",{id:"aria-guidance"},Fn));return jsx(reactExports.Fragment,null,jsx(A11yText$1,{id:kr},Bn&&Hn),jsx(A11yText$1,{"aria-live":xn,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},Cr&&!Bn&&Hn))},LiveRegion$1=LiveRegion,diacritics=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],anyDiacritic=new RegExp("["+diacritics.map(function(mr){return mr.letters}).join("")+"]","g"),diacriticToBase={};for(var i$2=0;i$2<diacritics.length;i$2++)for(var diacritic=diacritics[i$2],j$2=0;j$2<diacritic.letters.length;j$2++)diacriticToBase[diacritic.letters[j$2]]=diacritic.base;var stripDiacritics=function(hr){return hr.replace(anyDiacritic,function(gr){return diacriticToBase[gr]})},memoizedStripDiacriticsForInput=memoizeOne(stripDiacritics),trimString=function(hr){return hr.replace(/^\s+|\s+$/g,"")},defaultStringify=function(hr){return"".concat(hr.label," ").concat(hr.value)},createFilter=function(hr){return function(gr,vr){if(gr.data.__isNew__)return!0;var xr=_objectSpread2$2({ignoreCase:!0,ignoreAccents:!0,stringify:defaultStringify,trim:!0,matchFrom:"any"},hr),Er=xr.ignoreCase,Cr=xr.ignoreAccents,wr=xr.stringify,Rr=xr.trim,kr=xr.matchFrom,Dr=Rr?trimString(vr):vr,Br=Rr?trimString(wr(gr)):wr(gr);return Er&&(Dr=Dr.toLowerCase(),Br=Br.toLowerCase()),Cr&&(Dr=memoizedStripDiacriticsForInput(Dr),Br=stripDiacritics(Br)),kr==="start"?Br.substr(0,Dr.length)===Dr:Br.indexOf(Dr)>-1}},_excluded=["innerRef"];function DummyInput(mr){var hr=mr.innerRef,gr=_objectWithoutProperties(mr,_excluded),vr=removeProps(gr,"onExited","in","enter","exit","appear");return jsx("input",_extends$7({ref:hr},vr,{css:css({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var cancelScroll=function(hr){hr.cancelable&&hr.preventDefault(),hr.stopPropagation()};function useScrollCapture(mr){var hr=mr.isEnabled,gr=mr.onBottomArrive,vr=mr.onBottomLeave,xr=mr.onTopArrive,Er=mr.onTopLeave,Cr=reactExports.useRef(!1),wr=reactExports.useRef(!1),Rr=reactExports.useRef(0),kr=reactExports.useRef(null),Dr=reactExports.useCallback(function(Qr,sn){if(kr.current!==null){var hn=kr.current,vn=hn.scrollTop,yn=hn.scrollHeight,gn=hn.clientHeight,bn=kr.current,xn=sn>0,$n=yn-gn-vn,Sn=!1;$n>sn&&Cr.current&&(vr&&vr(Qr),Cr.current=!1),xn&&wr.current&&(Er&&Er(Qr),wr.current=!1),xn&&sn>$n?(gr&&!Cr.current&&gr(Qr),bn.scrollTop=yn,Sn=!0,Cr.current=!0):!xn&&-sn>vn&&(xr&&!wr.current&&xr(Qr),bn.scrollTop=0,Sn=!0,wr.current=!0),Sn&&cancelScroll(Qr)}},[gr,vr,xr,Er]),Br=reactExports.useCallback(function(Qr){Dr(Qr,Qr.deltaY)},[Dr]),Hr=reactExports.useCallback(function(Qr){Rr.current=Qr.changedTouches[0].clientY},[]),Gr=reactExports.useCallback(function(Qr){var sn=Rr.current-Qr.changedTouches[0].clientY;Dr(Qr,sn)},[Dr]),qr=reactExports.useCallback(function(Qr){if(Qr){var sn=supportsPassiveEvents?{passive:!1}:!1;Qr.addEventListener("wheel",Br,sn),Qr.addEventListener("touchstart",Hr,sn),Qr.addEventListener("touchmove",Gr,sn)}},[Gr,Hr,Br]),zr=reactExports.useCallback(function(Qr){Qr&&(Qr.removeEventListener("wheel",Br,!1),Qr.removeEventListener("touchstart",Hr,!1),Qr.removeEventListener("touchmove",Gr,!1))},[Gr,Hr,Br]);return reactExports.useEffect(function(){if(hr){var Qr=kr.current;return qr(Qr),function(){zr(Qr)}}},[hr,qr,zr]),function(Qr){kr.current=Qr}}var STYLE_KEYS=["boxSizing","height","overflow","paddingRight","position"],LOCK_STYLES={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function preventTouchMove(mr){mr.preventDefault()}function allowTouchMove(mr){mr.stopPropagation()}function preventInertiaScroll(){var mr=this.scrollTop,hr=this.scrollHeight,gr=mr+this.offsetHeight;mr===0?this.scrollTop=1:gr===hr&&(this.scrollTop=mr-1)}function isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints}var canUseDOM=!!(typeof window<"u"&&window.document&&window.document.createElement),activeScrollLocks=0,listenerOptions={capture:!1,passive:!1};function useScrollLock(mr){var hr=mr.isEnabled,gr=mr.accountForScrollbars,vr=gr===void 0?!0:gr,xr=reactExports.useRef({}),Er=reactExports.useRef(null),Cr=reactExports.useCallback(function(Rr){if(canUseDOM){var kr=document.body,Dr=kr&&kr.style;if(vr&&STYLE_KEYS.forEach(function(qr){var zr=Dr&&Dr[qr];xr.current[qr]=zr}),vr&&activeScrollLocks<1){var Br=parseInt(xr.current.paddingRight,10)||0,Hr=document.body?document.body.clientWidth:0,Gr=window.innerWidth-Hr+Br||0;Object.keys(LOCK_STYLES).forEach(function(qr){var zr=LOCK_STYLES[qr];Dr&&(Dr[qr]=zr)}),Dr&&(Dr.paddingRight="".concat(Gr,"px"))}kr&&isTouchDevice()&&(kr.addEventListener("touchmove",preventTouchMove,listenerOptions),Rr&&(Rr.addEventListener("touchstart",preventInertiaScroll,listenerOptions),Rr.addEventListener("touchmove",allowTouchMove,listenerOptions))),activeScrollLocks+=1}},[vr]),wr=reactExports.useCallback(function(Rr){if(canUseDOM){var kr=document.body,Dr=kr&&kr.style;activeScrollLocks=Math.max(activeScrollLocks-1,0),vr&&activeScrollLocks<1&&STYLE_KEYS.forEach(function(Br){var Hr=xr.current[Br];Dr&&(Dr[Br]=Hr)}),kr&&isTouchDevice()&&(kr.removeEventListener("touchmove",preventTouchMove,listenerOptions),Rr&&(Rr.removeEventListener("touchstart",preventInertiaScroll,listenerOptions),Rr.removeEventListener("touchmove",allowTouchMove,listenerOptions)))}},[vr]);return reactExports.useEffect(function(){if(hr){var Rr=Er.current;return Cr(Rr),function(){wr(Rr)}}},[hr,Cr,wr]),function(Rr){Er.current=Rr}}var blurSelectInput=function(hr){var gr=hr.target;return gr.ownerDocument.activeElement&&gr.ownerDocument.activeElement.blur()},_ref2$1={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function ScrollManager(mr){var hr=mr.children,gr=mr.lockEnabled,vr=mr.captureEnabled,xr=vr===void 0?!0:vr,Er=mr.onBottomArrive,Cr=mr.onBottomLeave,wr=mr.onTopArrive,Rr=mr.onTopLeave,kr=useScrollCapture({isEnabled:xr,onBottomArrive:Er,onBottomLeave:Cr,onTopArrive:wr,onTopLeave:Rr}),Dr=useScrollLock({isEnabled:gr}),Br=function(Gr){kr(Gr),Dr(Gr)};return jsx(reactExports.Fragment,null,gr&&jsx("div",{onClick:blurSelectInput,css:_ref2$1}),hr(Br))}var _ref2={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},RequiredInput=function(hr){var gr=hr.name,vr=hr.onFocus;return jsx("input",{required:!0,name:gr,tabIndex:-1,"aria-hidden":"true",onFocus:vr,css:_ref2,value:"",onChange:function(){}})},RequiredInput$1=RequiredInput;function testPlatform(mr){var hr;return typeof window<"u"&&window.navigator!=null?mr.test(((hr=window.navigator.userAgentData)===null||hr===void 0?void 0:hr.platform)||window.navigator.platform):!1}function isIPhone(){return testPlatform(/^iPhone/i)}function isMac(){return testPlatform(/^Mac/i)}function isIPad(){return testPlatform(/^iPad/i)||isMac()&&navigator.maxTouchPoints>1}function isIOS(){return isIPhone()||isIPad()}function isAppleDevice(){return isMac()||isIOS()}var formatGroupLabel=function(hr){return hr.label},getOptionLabel$1=function(hr){return hr.label},getOptionValue$1=function(hr){return hr.value},isOptionDisabled=function(hr){return!!hr.isDisabled},defaultStyles={clearIndicator:clearIndicatorCSS,container:containerCSS,control:css$1,dropdownIndicator:dropdownIndicatorCSS,group:groupCSS,groupHeading:groupHeadingCSS,indicatorsContainer:indicatorsContainerCSS,indicatorSeparator:indicatorSeparatorCSS,input:inputCSS,loadingIndicator:loadingIndicatorCSS,loadingMessage:loadingMessageCSS,menu:menuCSS,menuList:menuListCSS,menuPortal:menuPortalCSS,multiValue:multiValueCSS,multiValueLabel:multiValueLabelCSS,multiValueRemove:multiValueRemoveCSS,noOptionsMessage:noOptionsMessageCSS,option:optionCSS,placeholder:placeholderCSS,singleValue:css2,valueContainer:valueContainerCSS},colors={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},borderRadius=4,baseUnit=4,controlHeight=38,menuGutter=baseUnit*2,spacing={baseUnit,controlHeight,menuGutter},defaultTheme={borderRadius,colors,spacing},defaultProps={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:isTouchCapable(),captureMenuScroll:!isTouchCapable(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:createFilter(),formatGroupLabel,getOptionLabel:getOptionLabel$1,getOptionValue:getOptionValue$1,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!isMobileDevice(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(hr){var gr=hr.count;return"".concat(gr," result").concat(gr!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function toCategorizedOption(mr,hr,gr,vr){var xr=_isOptionDisabled(mr,hr,gr),Er=_isOptionSelected(mr,hr,gr),Cr=getOptionLabel2(mr,hr),wr=getOptionValue2(mr,hr);return{type:"option",data:hr,isDisabled:xr,isSelected:Er,label:Cr,value:wr,index:vr}}function buildCategorizedOptions(mr,hr){return mr.options.map(function(gr,vr){if("options"in gr){var xr=gr.options.map(function(Cr,wr){return toCategorizedOption(mr,Cr,hr,wr)}).filter(function(Cr){return isFocusable(mr,Cr)});return xr.length>0?{type:"group",data:gr,options:xr,index:vr}:void 0}var Er=toCategorizedOption(mr,gr,hr,vr);return isFocusable(mr,Er)?Er:void 0}).filter(notNullish)}function buildFocusableOptionsFromCategorizedOptions(mr){return mr.reduce(function(hr,gr){return gr.type==="group"?hr.push.apply(hr,_toConsumableArray$1(gr.options.map(function(vr){return vr.data}))):hr.push(gr.data),hr},[])}function buildFocusableOptionsWithIds(mr,hr){return mr.reduce(function(gr,vr){return vr.type==="group"?gr.push.apply(gr,_toConsumableArray$1(vr.options.map(function(xr){return{data:xr.data,id:"".concat(hr,"-").concat(vr.index,"-").concat(xr.index)}}))):gr.push({data:vr.data,id:"".concat(hr,"-").concat(vr.index)}),gr},[])}function buildFocusableOptions(mr,hr){return buildFocusableOptionsFromCategorizedOptions(buildCategorizedOptions(mr,hr))}function isFocusable(mr,hr){var gr=mr.inputValue,vr=gr===void 0?"":gr,xr=hr.data,Er=hr.isSelected,Cr=hr.label,wr=hr.value;return(!shouldHideSelectedOptions(mr)||!Er)&&_filterOption(mr,{label:Cr,value:wr,data:xr},vr)}function getNextFocusedValue(mr,hr){var gr=mr.focusedValue,vr=mr.selectValue,xr=vr.indexOf(gr);if(xr>-1){var Er=hr.indexOf(gr);if(Er>-1)return gr;if(xr<hr.length)return hr[xr]}return null}function getNextFocusedOption(mr,hr){var gr=mr.focusedOption;return gr&&hr.indexOf(gr)>-1?gr:hr[0]}var getFocusedOptionId=function(hr,gr){var vr,xr=(vr=hr.find(function(Er){return Er.data===gr}))===null||vr===void 0?void 0:vr.id;return xr||null},getOptionLabel2=function(hr,gr){return hr.getOptionLabel(gr)},getOptionValue2=function(hr,gr){return hr.getOptionValue(gr)};function _isOptionDisabled(mr,hr,gr){return typeof mr.isOptionDisabled=="function"?mr.isOptionDisabled(hr,gr):!1}function _isOptionSelected(mr,hr,gr){if(gr.indexOf(hr)>-1)return!0;if(typeof mr.isOptionSelected=="function")return mr.isOptionSelected(hr,gr);var vr=getOptionValue2(mr,hr);return gr.some(function(xr){return getOptionValue2(mr,xr)===vr})}function _filterOption(mr,hr,gr){return mr.filterOption?mr.filterOption(hr,gr):!0}var shouldHideSelectedOptions=function(hr){var gr=hr.hideSelectedOptions,vr=hr.isMulti;return gr===void 0?vr:gr},instanceId=1,Select$1=function(mr){_inherits(gr,mr);var hr=_createSuper(gr);function gr(vr){var xr;if(_classCallCheck$1(this,gr),xr=hr.call(this,vr),xr.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},xr.blockOptionHover=!1,xr.isComposing=!1,xr.commonProps=void 0,xr.initialTouchX=0,xr.initialTouchY=0,xr.openAfterFocus=!1,xr.scrollToFocusedOptionOnUpdate=!1,xr.userIsDragging=void 0,xr.isAppleDevice=isAppleDevice(),xr.controlRef=null,xr.getControlRef=function(Rr){xr.controlRef=Rr},xr.focusedOptionRef=null,xr.getFocusedOptionRef=function(Rr){xr.focusedOptionRef=Rr},xr.menuListRef=null,xr.getMenuListRef=function(Rr){xr.menuListRef=Rr},xr.inputRef=null,xr.getInputRef=function(Rr){xr.inputRef=Rr},xr.focus=xr.focusInput,xr.blur=xr.blurInput,xr.onChange=function(Rr,kr){var Dr=xr.props,Br=Dr.onChange,Hr=Dr.name;kr.name=Hr,xr.ariaOnChange(Rr,kr),Br(Rr,kr)},xr.setValue=function(Rr,kr,Dr){var Br=xr.props,Hr=Br.closeMenuOnSelect,Gr=Br.isMulti,qr=Br.inputValue;xr.onInputChange("",{action:"set-value",prevInputValue:qr}),Hr&&(xr.setState({inputIsHiddenAfterUpdate:!Gr}),xr.onMenuClose()),xr.setState({clearFocusValueOnUpdate:!0}),xr.onChange(Rr,{action:kr,option:Dr})},xr.selectOption=function(Rr){var kr=xr.props,Dr=kr.blurInputOnSelect,Br=kr.isMulti,Hr=kr.name,Gr=xr.state.selectValue,qr=Br&&xr.isOptionSelected(Rr,Gr),zr=xr.isOptionDisabled(Rr,Gr);if(qr){var Qr=xr.getOptionValue(Rr);xr.setValue(Gr.filter(function(sn){return xr.getOptionValue(sn)!==Qr}),"deselect-option",Rr)}else if(!zr)Br?xr.setValue([].concat(_toConsumableArray$1(Gr),[Rr]),"select-option",Rr):xr.setValue(Rr,"select-option");else{xr.ariaOnChange(Rr,{action:"select-option",option:Rr,name:Hr});return}Dr&&xr.blurInput()},xr.removeValue=function(Rr){var kr=xr.props.isMulti,Dr=xr.state.selectValue,Br=xr.getOptionValue(Rr),Hr=Dr.filter(function(qr){return xr.getOptionValue(qr)!==Br}),Gr=valueTernary(kr,Hr,Hr[0]||null);xr.onChange(Gr,{action:"remove-value",removedValue:Rr}),xr.focusInput()},xr.clearValue=function(){var Rr=xr.state.selectValue;xr.onChange(valueTernary(xr.props.isMulti,[],null),{action:"clear",removedValues:Rr})},xr.popValue=function(){var Rr=xr.props.isMulti,kr=xr.state.selectValue,Dr=kr[kr.length-1],Br=kr.slice(0,kr.length-1),Hr=valueTernary(Rr,Br,Br[0]||null);xr.onChange(Hr,{action:"pop-value",removedValue:Dr})},xr.getFocusedOptionId=function(Rr){return getFocusedOptionId(xr.state.focusableOptionsWithIds,Rr)},xr.getFocusableOptionsWithIds=function(){return buildFocusableOptionsWithIds(buildCategorizedOptions(xr.props,xr.state.selectValue),xr.getElementId("option"))},xr.getValue=function(){return xr.state.selectValue},xr.cx=function(){for(var Rr=arguments.length,kr=new Array(Rr),Dr=0;Dr<Rr;Dr++)kr[Dr]=arguments[Dr];return classNames.apply(void 0,[xr.props.classNamePrefix].concat(kr))},xr.getOptionLabel=function(Rr){return getOptionLabel2(xr.props,Rr)},xr.getOptionValue=function(Rr){return getOptionValue2(xr.props,Rr)},xr.getStyles=function(Rr,kr){var Dr=xr.props.unstyled,Br=defaultStyles[Rr](kr,Dr);Br.boxSizing="border-box";var Hr=xr.props.styles[Rr];return Hr?Hr(Br,kr):Br},xr.getClassNames=function(Rr,kr){var Dr,Br;return(Dr=(Br=xr.props.classNames)[Rr])===null||Dr===void 0?void 0:Dr.call(Br,kr)},xr.getElementId=function(Rr){return"".concat(xr.state.instancePrefix,"-").concat(Rr)},xr.getComponents=function(){return defaultComponents(xr.props)},xr.buildCategorizedOptions=function(){return buildCategorizedOptions(xr.props,xr.state.selectValue)},xr.getCategorizedOptions=function(){return xr.props.menuIsOpen?xr.buildCategorizedOptions():[]},xr.buildFocusableOptions=function(){return buildFocusableOptionsFromCategorizedOptions(xr.buildCategorizedOptions())},xr.getFocusableOptions=function(){return xr.props.menuIsOpen?xr.buildFocusableOptions():[]},xr.ariaOnChange=function(Rr,kr){xr.setState({ariaSelection:_objectSpread2$2({value:Rr},kr)})},xr.onMenuMouseDown=function(Rr){Rr.button===0&&(Rr.stopPropagation(),Rr.preventDefault(),xr.focusInput())},xr.onMenuMouseMove=function(Rr){xr.blockOptionHover=!1},xr.onControlMouseDown=function(Rr){if(!Rr.defaultPrevented){var kr=xr.props.openMenuOnClick;xr.state.isFocused?xr.props.menuIsOpen?Rr.target.tagName!=="INPUT"&&Rr.target.tagName!=="TEXTAREA"&&xr.onMenuClose():kr&&xr.openMenu("first"):(kr&&(xr.openAfterFocus=!0),xr.focusInput()),Rr.target.tagName!=="INPUT"&&Rr.target.tagName!=="TEXTAREA"&&Rr.preventDefault()}},xr.onDropdownIndicatorMouseDown=function(Rr){if(!(Rr&&Rr.type==="mousedown"&&Rr.button!==0)&&!xr.props.isDisabled){var kr=xr.props,Dr=kr.isMulti,Br=kr.menuIsOpen;xr.focusInput(),Br?(xr.setState({inputIsHiddenAfterUpdate:!Dr}),xr.onMenuClose()):xr.openMenu("first"),Rr.preventDefault()}},xr.onClearIndicatorMouseDown=function(Rr){Rr&&Rr.type==="mousedown"&&Rr.button!==0||(xr.clearValue(),Rr.preventDefault(),xr.openAfterFocus=!1,Rr.type==="touchend"?xr.focusInput():setTimeout(function(){return xr.focusInput()}))},xr.onScroll=function(Rr){typeof xr.props.closeMenuOnScroll=="boolean"?Rr.target instanceof HTMLElement&&isDocumentElement(Rr.target)&&xr.props.onMenuClose():typeof xr.props.closeMenuOnScroll=="function"&&xr.props.closeMenuOnScroll(Rr)&&xr.props.onMenuClose()},xr.onCompositionStart=function(){xr.isComposing=!0},xr.onCompositionEnd=function(){xr.isComposing=!1},xr.onTouchStart=function(Rr){var kr=Rr.touches,Dr=kr&&kr.item(0);Dr&&(xr.initialTouchX=Dr.clientX,xr.initialTouchY=Dr.clientY,xr.userIsDragging=!1)},xr.onTouchMove=function(Rr){var kr=Rr.touches,Dr=kr&&kr.item(0);if(Dr){var Br=Math.abs(Dr.clientX-xr.initialTouchX),Hr=Math.abs(Dr.clientY-xr.initialTouchY),Gr=5;xr.userIsDragging=Br>Gr||Hr>Gr}},xr.onTouchEnd=function(Rr){xr.userIsDragging||(xr.controlRef&&!xr.controlRef.contains(Rr.target)&&xr.menuListRef&&!xr.menuListRef.contains(Rr.target)&&xr.blurInput(),xr.initialTouchX=0,xr.initialTouchY=0)},xr.onControlTouchEnd=function(Rr){xr.userIsDragging||xr.onControlMouseDown(Rr)},xr.onClearIndicatorTouchEnd=function(Rr){xr.userIsDragging||xr.onClearIndicatorMouseDown(Rr)},xr.onDropdownIndicatorTouchEnd=function(Rr){xr.userIsDragging||xr.onDropdownIndicatorMouseDown(Rr)},xr.handleInputChange=function(Rr){var kr=xr.props.inputValue,Dr=Rr.currentTarget.value;xr.setState({inputIsHiddenAfterUpdate:!1}),xr.onInputChange(Dr,{action:"input-change",prevInputValue:kr}),xr.props.menuIsOpen||xr.onMenuOpen()},xr.onInputFocus=function(Rr){xr.props.onFocus&&xr.props.onFocus(Rr),xr.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(xr.openAfterFocus||xr.props.openMenuOnFocus)&&xr.openMenu("first"),xr.openAfterFocus=!1},xr.onInputBlur=function(Rr){var kr=xr.props.inputValue;if(xr.menuListRef&&xr.menuListRef.contains(document.activeElement)){xr.inputRef.focus();return}xr.props.onBlur&&xr.props.onBlur(Rr),xr.onInputChange("",{action:"input-blur",prevInputValue:kr}),xr.onMenuClose(),xr.setState({focusedValue:null,isFocused:!1})},xr.onOptionHover=function(Rr){if(!(xr.blockOptionHover||xr.state.focusedOption===Rr)){var kr=xr.getFocusableOptions(),Dr=kr.indexOf(Rr);xr.setState({focusedOption:Rr,focusedOptionId:Dr>-1?xr.getFocusedOptionId(Rr):null})}},xr.shouldHideSelectedOptions=function(){return shouldHideSelectedOptions(xr.props)},xr.onValueInputFocus=function(Rr){Rr.preventDefault(),Rr.stopPropagation(),xr.focus()},xr.onKeyDown=function(Rr){var kr=xr.props,Dr=kr.isMulti,Br=kr.backspaceRemovesValue,Hr=kr.escapeClearsValue,Gr=kr.inputValue,qr=kr.isClearable,zr=kr.isDisabled,Qr=kr.menuIsOpen,sn=kr.onKeyDown,hn=kr.tabSelectsValue,vn=kr.openMenuOnFocus,yn=xr.state,gn=yn.focusedOption,bn=yn.focusedValue,xn=yn.selectValue;if(!zr&&!(typeof sn=="function"&&(sn(Rr),Rr.defaultPrevented))){switch(xr.blockOptionHover=!0,Rr.key){case"ArrowLeft":if(!Dr||Gr)return;xr.focusValue("previous");break;case"ArrowRight":if(!Dr||Gr)return;xr.focusValue("next");break;case"Delete":case"Backspace":if(Gr)return;if(bn)xr.removeValue(bn);else{if(!Br)return;Dr?xr.popValue():qr&&xr.clearValue()}break;case"Tab":if(xr.isComposing||Rr.shiftKey||!Qr||!hn||!gn||vn&&xr.isOptionSelected(gn,xn))return;xr.selectOption(gn);break;case"Enter":if(Rr.keyCode===229)break;if(Qr){if(!gn||xr.isComposing)return;xr.selectOption(gn);break}return;case"Escape":Qr?(xr.setState({inputIsHiddenAfterUpdate:!1}),xr.onInputChange("",{action:"menu-close",prevInputValue:Gr}),xr.onMenuClose()):qr&&Hr&&xr.clearValue();break;case" ":if(Gr)return;if(!Qr){xr.openMenu("first");break}if(!gn)return;xr.selectOption(gn);break;case"ArrowUp":Qr?xr.focusOption("up"):xr.openMenu("last");break;case"ArrowDown":Qr?xr.focusOption("down"):xr.openMenu("first");break;case"PageUp":if(!Qr)return;xr.focusOption("pageup");break;case"PageDown":if(!Qr)return;xr.focusOption("pagedown");break;case"Home":if(!Qr)return;xr.focusOption("first");break;case"End":if(!Qr)return;xr.focusOption("last");break;default:return}Rr.preventDefault()}},xr.state.instancePrefix="react-select-"+(xr.props.instanceId||++instanceId),xr.state.selectValue=cleanValue(vr.value),vr.menuIsOpen&&xr.state.selectValue.length){var Er=xr.getFocusableOptionsWithIds(),Cr=xr.buildFocusableOptions(),wr=Cr.indexOf(xr.state.selectValue[0]);xr.state.focusableOptionsWithIds=Er,xr.state.focusedOption=Cr[wr],xr.state.focusedOptionId=getFocusedOptionId(Er,Cr[wr])}return xr}return _createClass$1(gr,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&scrollIntoView(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(xr){var Er=this.props,Cr=Er.isDisabled,wr=Er.menuIsOpen,Rr=this.state.isFocused;(Rr&&!Cr&&xr.isDisabled||Rr&&wr&&!xr.menuIsOpen)&&this.focusInput(),Rr&&Cr&&!xr.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!Rr&&!Cr&&xr.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(scrollIntoView(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(xr,Er){this.props.onInputChange(xr,Er)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(xr){var Er=this,Cr=this.state,wr=Cr.selectValue,Rr=Cr.isFocused,kr=this.buildFocusableOptions(),Dr=xr==="first"?0:kr.length-1;if(!this.props.isMulti){var Br=kr.indexOf(wr[0]);Br>-1&&(Dr=Br)}this.scrollToFocusedOptionOnUpdate=!(Rr&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:kr[Dr],focusedOptionId:this.getFocusedOptionId(kr[Dr])},function(){return Er.onMenuOpen()})}},{key:"focusValue",value:function(xr){var Er=this.state,Cr=Er.selectValue,wr=Er.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var Rr=Cr.indexOf(wr);wr||(Rr=-1);var kr=Cr.length-1,Dr=-1;if(Cr.length){switch(xr){case"previous":Rr===0?Dr=0:Rr===-1?Dr=kr:Dr=Rr-1;break;case"next":Rr>-1&&Rr<kr&&(Dr=Rr+1);break}this.setState({inputIsHidden:Dr!==-1,focusedValue:Cr[Dr]})}}}},{key:"focusOption",value:function(){var xr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",Er=this.props.pageSize,Cr=this.state.focusedOption,wr=this.getFocusableOptions();if(wr.length){var Rr=0,kr=wr.indexOf(Cr);Cr||(kr=-1),xr==="up"?Rr=kr>0?kr-1:wr.length-1:xr==="down"?Rr=(kr+1)%wr.length:xr==="pageup"?(Rr=kr-Er,Rr<0&&(Rr=0)):xr==="pagedown"?(Rr=kr+Er,Rr>wr.length-1&&(Rr=wr.length-1)):xr==="last"&&(Rr=wr.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:wr[Rr],focusedValue:null,focusedOptionId:this.getFocusedOptionId(wr[Rr])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(defaultTheme):_objectSpread2$2(_objectSpread2$2({},defaultTheme),this.props.theme):defaultTheme}},{key:"getCommonProps",value:function(){var xr=this.clearValue,Er=this.cx,Cr=this.getStyles,wr=this.getClassNames,Rr=this.getValue,kr=this.selectOption,Dr=this.setValue,Br=this.props,Hr=Br.isMulti,Gr=Br.isRtl,qr=Br.options,zr=this.hasValue();return{clearValue:xr,cx:Er,getStyles:Cr,getClassNames:wr,getValue:Rr,hasValue:zr,isMulti:Hr,isRtl:Gr,options:qr,selectOption:kr,selectProps:Br,setValue:Dr,theme:this.getTheme()}}},{key:"hasValue",value:function(){var xr=this.state.selectValue;return xr.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var xr=this.props,Er=xr.isClearable,Cr=xr.isMulti;return Er===void 0?Cr:Er}},{key:"isOptionDisabled",value:function(xr,Er){return _isOptionDisabled(this.props,xr,Er)}},{key:"isOptionSelected",value:function(xr,Er){return _isOptionSelected(this.props,xr,Er)}},{key:"filterOption",value:function(xr,Er){return _filterOption(this.props,xr,Er)}},{key:"formatOptionLabel",value:function(xr,Er){if(typeof this.props.formatOptionLabel=="function"){var Cr=this.props.inputValue,wr=this.state.selectValue;return this.props.formatOptionLabel(xr,{context:Er,inputValue:Cr,selectValue:wr})}else return this.getOptionLabel(xr)}},{key:"formatGroupLabel",value:function(xr){return this.props.formatGroupLabel(xr)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var xr=this.props,Er=xr.isDisabled,Cr=xr.isSearchable,wr=xr.inputId,Rr=xr.inputValue,kr=xr.tabIndex,Dr=xr.form,Br=xr.menuIsOpen,Hr=xr.required,Gr=this.getComponents(),qr=Gr.Input,zr=this.state,Qr=zr.inputIsHidden,sn=zr.ariaSelection,hn=this.commonProps,vn=wr||this.getElementId("input"),yn=_objectSpread2$2(_objectSpread2$2(_objectSpread2$2({"aria-autocomplete":"list","aria-expanded":Br,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":Hr,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},Br&&{"aria-controls":this.getElementId("listbox")}),!Cr&&{"aria-readonly":!0}),this.hasValue()?sn?.action==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return Cr?reactExports.createElement(qr,_extends$7({},hn,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:vn,innerRef:this.getInputRef,isDisabled:Er,isHidden:Qr,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:kr,form:Dr,type:"text",value:Rr},yn)):reactExports.createElement(DummyInput,_extends$7({id:vn,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:noop$1,onFocus:this.onInputFocus,disabled:Er,tabIndex:kr,inputMode:"none",form:Dr,value:""},yn))}},{key:"renderPlaceholderOrValue",value:function(){var xr=this,Er=this.getComponents(),Cr=Er.MultiValue,wr=Er.MultiValueContainer,Rr=Er.MultiValueLabel,kr=Er.MultiValueRemove,Dr=Er.SingleValue,Br=Er.Placeholder,Hr=this.commonProps,Gr=this.props,qr=Gr.controlShouldRenderValue,zr=Gr.isDisabled,Qr=Gr.isMulti,sn=Gr.inputValue,hn=Gr.placeholder,vn=this.state,yn=vn.selectValue,gn=vn.focusedValue,bn=vn.isFocused;if(!this.hasValue()||!qr)return sn?null:reactExports.createElement(Br,_extends$7({},Hr,{key:"placeholder",isDisabled:zr,isFocused:bn,innerProps:{id:this.getElementId("placeholder")}}),hn);if(Qr)return yn.map(function($n,Sn){var Cn=$n===gn,Rn="".concat(xr.getOptionLabel($n),"-").concat(xr.getOptionValue($n));return reactExports.createElement(Cr,_extends$7({},Hr,{components:{Container:wr,Label:Rr,Remove:kr},isFocused:Cn,isDisabled:zr,key:Rn,index:Sn,removeProps:{onClick:function(){return xr.removeValue($n)},onTouchEnd:function(){return xr.removeValue($n)},onMouseDown:function(Fn){Fn.preventDefault()}},data:$n}),xr.formatOptionLabel($n,"value"))});if(sn)return null;var xn=yn[0];return reactExports.createElement(Dr,_extends$7({},Hr,{data:xn,isDisabled:zr}),this.formatOptionLabel(xn,"value"))}},{key:"renderClearIndicator",value:function(){var xr=this.getComponents(),Er=xr.ClearIndicator,Cr=this.commonProps,wr=this.props,Rr=wr.isDisabled,kr=wr.isLoading,Dr=this.state.isFocused;if(!this.isClearable()||!Er||Rr||!this.hasValue()||kr)return null;var Br={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return reactExports.createElement(Er,_extends$7({},Cr,{innerProps:Br,isFocused:Dr}))}},{key:"renderLoadingIndicator",value:function(){var xr=this.getComponents(),Er=xr.LoadingIndicator,Cr=this.commonProps,wr=this.props,Rr=wr.isDisabled,kr=wr.isLoading,Dr=this.state.isFocused;if(!Er||!kr)return null;var Br={"aria-hidden":"true"};return reactExports.createElement(Er,_extends$7({},Cr,{innerProps:Br,isDisabled:Rr,isFocused:Dr}))}},{key:"renderIndicatorSeparator",value:function(){var xr=this.getComponents(),Er=xr.DropdownIndicator,Cr=xr.IndicatorSeparator;if(!Er||!Cr)return null;var wr=this.commonProps,Rr=this.props.isDisabled,kr=this.state.isFocused;return reactExports.createElement(Cr,_extends$7({},wr,{isDisabled:Rr,isFocused:kr}))}},{key:"renderDropdownIndicator",value:function(){var xr=this.getComponents(),Er=xr.DropdownIndicator;if(!Er)return null;var Cr=this.commonProps,wr=this.props.isDisabled,Rr=this.state.isFocused,kr={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return reactExports.createElement(Er,_extends$7({},Cr,{innerProps:kr,isDisabled:wr,isFocused:Rr}))}},{key:"renderMenu",value:function(){var xr=this,Er=this.getComponents(),Cr=Er.Group,wr=Er.GroupHeading,Rr=Er.Menu,kr=Er.MenuList,Dr=Er.MenuPortal,Br=Er.LoadingMessage,Hr=Er.NoOptionsMessage,Gr=Er.Option,qr=this.commonProps,zr=this.state.focusedOption,Qr=this.props,sn=Qr.captureMenuScroll,hn=Qr.inputValue,vn=Qr.isLoading,yn=Qr.loadingMessage,gn=Qr.minMenuHeight,bn=Qr.maxMenuHeight,xn=Qr.menuIsOpen,$n=Qr.menuPlacement,Sn=Qr.menuPosition,Cn=Qr.menuPortalTarget,Rn=Qr.menuShouldBlockScroll,Bn=Qr.menuShouldScrollIntoView,Fn=Qr.noOptionsMessage,Hn=Qr.onMenuScrollToTop,Gn=Qr.onMenuScrollToBottom;if(!xn)return null;var qn=function(jn,Kn){var Nn=jn.type,An=jn.data,kn=jn.isDisabled,Dn=jn.isSelected,Vn=jn.label,zn=jn.value,Xn=zr===An,Zn=kn?void 0:function(){return xr.onOptionHover(An)},Pi=kn?void 0:function(){return xr.selectOption(An)},Ya="".concat(xr.getElementId("option"),"-").concat(Kn),Bi={id:Ya,onClick:Pi,onMouseMove:Zn,onMouseOver:Zn,tabIndex:-1,role:"option","aria-selected":xr.isAppleDevice?void 0:Dn};return reactExports.createElement(Gr,_extends$7({},qr,{innerProps:Bi,data:An,isDisabled:kn,isSelected:Dn,key:Ya,label:Vn,type:Nn,value:zn,isFocused:Xn,innerRef:Xn?xr.getFocusedOptionRef:void 0}),xr.formatOptionLabel(jn.data,"menu"))},On;if(this.hasOptions())On=this.getCategorizedOptions().map(function(Ln){if(Ln.type==="group"){var jn=Ln.data,Kn=Ln.options,Nn=Ln.index,An="".concat(xr.getElementId("group"),"-").concat(Nn),kn="".concat(An,"-heading");return reactExports.createElement(Cr,_extends$7({},qr,{key:An,data:jn,options:Kn,Heading:wr,headingProps:{id:kn,data:Ln.data},label:xr.formatGroupLabel(Ln.data)}),Ln.options.map(function(Dn){return qn(Dn,"".concat(Nn,"-").concat(Dn.index))}))}else if(Ln.type==="option")return qn(Ln,"".concat(Ln.index))});else if(vn){var wn=yn({inputValue:hn});if(wn===null)return null;On=reactExports.createElement(Br,qr,wn)}else{var _n=Fn({inputValue:hn});if(_n===null)return null;On=reactExports.createElement(Hr,qr,_n)}var Tn={minMenuHeight:gn,maxMenuHeight:bn,menuPlacement:$n,menuPosition:Sn,menuShouldScrollIntoView:Bn},Mn=reactExports.createElement(MenuPlacer,_extends$7({},qr,Tn),function(Ln){var jn=Ln.ref,Kn=Ln.placerProps,Nn=Kn.placement,An=Kn.maxHeight;return reactExports.createElement(Rr,_extends$7({},qr,Tn,{innerRef:jn,innerProps:{onMouseDown:xr.onMenuMouseDown,onMouseMove:xr.onMenuMouseMove},isLoading:vn,placement:Nn}),reactExports.createElement(ScrollManager,{captureEnabled:sn,onTopArrive:Hn,onBottomArrive:Gn,lockEnabled:Rn},function(kn){return reactExports.createElement(kr,_extends$7({},qr,{innerRef:function(Vn){xr.getMenuListRef(Vn),kn(Vn)},innerProps:{role:"listbox","aria-multiselectable":qr.isMulti,id:xr.getElementId("listbox")},isLoading:vn,maxHeight:An,focusedOption:zr}),On)}))});return Cn||Sn==="fixed"?reactExports.createElement(Dr,_extends$7({},qr,{appendTo:Cn,controlElement:this.controlRef,menuPlacement:$n,menuPosition:Sn}),Mn):Mn}},{key:"renderFormField",value:function(){var xr=this,Er=this.props,Cr=Er.delimiter,wr=Er.isDisabled,Rr=Er.isMulti,kr=Er.name,Dr=Er.required,Br=this.state.selectValue;if(Dr&&!this.hasValue()&&!wr)return reactExports.createElement(RequiredInput$1,{name:kr,onFocus:this.onValueInputFocus});if(!(!kr||wr))if(Rr)if(Cr){var Hr=Br.map(function(zr){return xr.getOptionValue(zr)}).join(Cr);return reactExports.createElement("input",{name:kr,type:"hidden",value:Hr})}else{var Gr=Br.length>0?Br.map(function(zr,Qr){return reactExports.createElement("input",{key:"i-".concat(Qr),name:kr,type:"hidden",value:xr.getOptionValue(zr)})}):reactExports.createElement("input",{name:kr,type:"hidden",value:""});return reactExports.createElement("div",null,Gr)}else{var qr=Br[0]?this.getOptionValue(Br[0]):"";return reactExports.createElement("input",{name:kr,type:"hidden",value:qr})}}},{key:"renderLiveRegion",value:function(){var xr=this.commonProps,Er=this.state,Cr=Er.ariaSelection,wr=Er.focusedOption,Rr=Er.focusedValue,kr=Er.isFocused,Dr=Er.selectValue,Br=this.getFocusableOptions();return reactExports.createElement(LiveRegion$1,_extends$7({},xr,{id:this.getElementId("live-region"),ariaSelection:Cr,focusedOption:wr,focusedValue:Rr,isFocused:kr,selectValue:Dr,focusableOptions:Br,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var xr=this.getComponents(),Er=xr.Control,Cr=xr.IndicatorsContainer,wr=xr.SelectContainer,Rr=xr.ValueContainer,kr=this.props,Dr=kr.className,Br=kr.id,Hr=kr.isDisabled,Gr=kr.menuIsOpen,qr=this.state.isFocused,zr=this.commonProps=this.getCommonProps();return reactExports.createElement(wr,_extends$7({},zr,{className:Dr,innerProps:{id:Br,onKeyDown:this.onKeyDown},isDisabled:Hr,isFocused:qr}),this.renderLiveRegion(),reactExports.createElement(Er,_extends$7({},zr,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:Hr,isFocused:qr,menuIsOpen:Gr}),reactExports.createElement(Rr,_extends$7({},zr,{isDisabled:Hr}),this.renderPlaceholderOrValue(),this.renderInput()),reactExports.createElement(Cr,_extends$7({},zr,{isDisabled:Hr}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(xr,Er){var Cr=Er.prevProps,wr=Er.clearFocusValueOnUpdate,Rr=Er.inputIsHiddenAfterUpdate,kr=Er.ariaSelection,Dr=Er.isFocused,Br=Er.prevWasFocused,Hr=Er.instancePrefix,Gr=xr.options,qr=xr.value,zr=xr.menuIsOpen,Qr=xr.inputValue,sn=xr.isMulti,hn=cleanValue(qr),vn={};if(Cr&&(qr!==Cr.value||Gr!==Cr.options||zr!==Cr.menuIsOpen||Qr!==Cr.inputValue)){var yn=zr?buildFocusableOptions(xr,hn):[],gn=zr?buildFocusableOptionsWithIds(buildCategorizedOptions(xr,hn),"".concat(Hr,"-option")):[],bn=wr?getNextFocusedValue(Er,hn):null,xn=getNextFocusedOption(Er,yn),$n=getFocusedOptionId(gn,xn);vn={selectValue:hn,focusedOption:xn,focusedOptionId:$n,focusableOptionsWithIds:gn,focusedValue:bn,clearFocusValueOnUpdate:!1}}var Sn=Rr!=null&&xr!==Cr?{inputIsHidden:Rr,inputIsHiddenAfterUpdate:void 0}:{},Cn=kr,Rn=Dr&&Br;return Dr&&!Rn&&(Cn={value:valueTernary(sn,hn,hn[0]||null),options:hn,action:"initial-input-focus"},Rn=!Br),kr?.action==="initial-input-focus"&&(Cn=null),_objectSpread2$2(_objectSpread2$2(_objectSpread2$2({},vn),Sn),{},{prevProps:xr,ariaSelection:Cn,prevWasFocused:Rn})}}]),gr}(reactExports.Component);Select$1.defaultProps=defaultProps;var StateManagedSelect=reactExports.forwardRef(function(mr,hr){var gr=useStateManager(mr);return reactExports.createElement(Select$1,_extends$7({ref:hr},gr))}),StateManagedSelect$1=StateManagedSelect;/*!
 * Cropper.js v1.6.1
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2023-09-17T03:44:19.860Z
 */function ownKeys$1(mr,hr){var gr=Object.keys(mr);if(Object.getOwnPropertySymbols){var vr=Object.getOwnPropertySymbols(mr);hr&&(vr=vr.filter(function(xr){return Object.getOwnPropertyDescriptor(mr,xr).enumerable})),gr.push.apply(gr,vr)}return gr}function _objectSpread2$1(mr){for(var hr=1;hr<arguments.length;hr++){var gr=arguments[hr]!=null?arguments[hr]:{};hr%2?ownKeys$1(Object(gr),!0).forEach(function(vr){_defineProperty$1(mr,vr,gr[vr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(mr,Object.getOwnPropertyDescriptors(gr)):ownKeys$1(Object(gr)).forEach(function(vr){Object.defineProperty(mr,vr,Object.getOwnPropertyDescriptor(gr,vr))})}return mr}function _typeof(mr){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(hr){return typeof hr}:function(hr){return hr&&typeof Symbol=="function"&&hr.constructor===Symbol&&hr!==Symbol.prototype?"symbol":typeof hr},_typeof(mr)}function _classCallCheck(mr,hr){if(!(mr instanceof hr))throw new TypeError("Cannot call a class as a function")}function _defineProperties(mr,hr){for(var gr=0;gr<hr.length;gr++){var vr=hr[gr];vr.enumerable=vr.enumerable||!1,vr.configurable=!0,"value"in vr&&(vr.writable=!0),Object.defineProperty(mr,_toPropertyKey$1(vr.key),vr)}}function _createClass(mr,hr,gr){return hr&&_defineProperties(mr.prototype,hr),gr&&_defineProperties(mr,gr),Object.defineProperty(mr,"prototype",{writable:!1}),mr}function _defineProperty$1(mr,hr,gr){return hr=_toPropertyKey$1(hr),hr in mr?Object.defineProperty(mr,hr,{value:gr,enumerable:!0,configurable:!0,writable:!0}):mr[hr]=gr,mr}function _toConsumableArray(mr){return _arrayWithoutHoles(mr)||_iterableToArray(mr)||_unsupportedIterableToArray(mr)||_nonIterableSpread()}function _arrayWithoutHoles(mr){if(Array.isArray(mr))return _arrayLikeToArray(mr)}function _iterableToArray(mr){if(typeof Symbol<"u"&&mr[Symbol.iterator]!=null||mr["@@iterator"]!=null)return Array.from(mr)}function _unsupportedIterableToArray(mr,hr){if(mr){if(typeof mr=="string")return _arrayLikeToArray(mr,hr);var gr=Object.prototype.toString.call(mr).slice(8,-1);if(gr==="Object"&&mr.constructor&&(gr=mr.constructor.name),gr==="Map"||gr==="Set")return Array.from(mr);if(gr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(gr))return _arrayLikeToArray(mr,hr)}}function _arrayLikeToArray(mr,hr){(hr==null||hr>mr.length)&&(hr=mr.length);for(var gr=0,vr=new Array(hr);gr<hr;gr++)vr[gr]=mr[gr];return vr}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _toPrimitive$1(mr,hr){if(typeof mr!="object"||mr===null)return mr;var gr=mr[Symbol.toPrimitive];if(gr!==void 0){var vr=gr.call(mr,hr||"default");if(typeof vr!="object")return vr;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hr==="string"?String:Number)(mr)}function _toPropertyKey$1(mr){var hr=_toPrimitive$1(mr,"string");return typeof hr=="symbol"?hr:String(hr)}var IS_BROWSER=typeof window<"u"&&typeof window.document<"u",WINDOW=IS_BROWSER?window:{},IS_TOUCH_DEVICE=IS_BROWSER&&WINDOW.document.documentElement?"ontouchstart"in WINDOW.document.documentElement:!1,HAS_POINTER_EVENT=IS_BROWSER?"PointerEvent"in WINDOW:!1,NAMESPACE="cropper",ACTION_ALL="all",ACTION_CROP="crop",ACTION_MOVE="move",ACTION_ZOOM="zoom",ACTION_EAST="e",ACTION_WEST="w",ACTION_SOUTH="s",ACTION_NORTH="n",ACTION_NORTH_EAST="ne",ACTION_NORTH_WEST="nw",ACTION_SOUTH_EAST="se",ACTION_SOUTH_WEST="sw",CLASS_CROP="".concat(NAMESPACE,"-crop"),CLASS_DISABLED="".concat(NAMESPACE,"-disabled"),CLASS_HIDDEN="".concat(NAMESPACE,"-hidden"),CLASS_HIDE="".concat(NAMESPACE,"-hide"),CLASS_INVISIBLE="".concat(NAMESPACE,"-invisible"),CLASS_MODAL="".concat(NAMESPACE,"-modal"),CLASS_MOVE="".concat(NAMESPACE,"-move"),DATA_ACTION="".concat(NAMESPACE,"Action"),DATA_PREVIEW="".concat(NAMESPACE,"Preview"),DRAG_MODE_CROP="crop",DRAG_MODE_MOVE="move",DRAG_MODE_NONE="none",EVENT_CROP="crop",EVENT_CROP_END="cropend",EVENT_CROP_MOVE="cropmove",EVENT_CROP_START="cropstart",EVENT_DBLCLICK="dblclick",EVENT_TOUCH_START=IS_TOUCH_DEVICE?"touchstart":"mousedown",EVENT_TOUCH_MOVE=IS_TOUCH_DEVICE?"touchmove":"mousemove",EVENT_TOUCH_END=IS_TOUCH_DEVICE?"touchend touchcancel":"mouseup",EVENT_POINTER_DOWN=HAS_POINTER_EVENT?"pointerdown":EVENT_TOUCH_START,EVENT_POINTER_MOVE=HAS_POINTER_EVENT?"pointermove":EVENT_TOUCH_MOVE,EVENT_POINTER_UP=HAS_POINTER_EVENT?"pointerup pointercancel":EVENT_TOUCH_END,EVENT_READY="ready",EVENT_RESIZE="resize",EVENT_WHEEL="wheel",EVENT_ZOOM="zoom",MIME_TYPE_JPEG="image/jpeg",REGEXP_ACTIONS=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,REGEXP_DATA_URL=/^data:/,REGEXP_DATA_URL_JPEG=/^data:image\/jpeg;base64,/,REGEXP_TAG_NAME=/^img|canvas$/i,MIN_CONTAINER_WIDTH=200,MIN_CONTAINER_HEIGHT=100,DEFAULTS={viewMode:0,dragMode:DRAG_MODE_CROP,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:MIN_CONTAINER_WIDTH,minContainerHeight:MIN_CONTAINER_HEIGHT,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},TEMPLATE='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',isNaN$1=Number.isNaN||WINDOW.isNaN;function isNumber(mr){return typeof mr=="number"&&!isNaN$1(mr)}var isPositiveNumber=function(hr){return hr>0&&hr<1/0};function isUndefined(mr){return typeof mr>"u"}function isObject(mr){return _typeof(mr)==="object"&&mr!==null}var hasOwnProperty$1=Object.prototype.hasOwnProperty;function isPlainObject(mr){if(!isObject(mr))return!1;try{var hr=mr.constructor,gr=hr.prototype;return hr&&gr&&hasOwnProperty$1.call(gr,"isPrototypeOf")}catch{return!1}}function isFunction(mr){return typeof mr=="function"}var slice=Array.prototype.slice;function toArray(mr){return Array.from?Array.from(mr):slice.call(mr)}function forEach(mr,hr){return mr&&isFunction(hr)&&(Array.isArray(mr)||isNumber(mr.length)?toArray(mr).forEach(function(gr,vr){hr.call(mr,gr,vr,mr)}):isObject(mr)&&Object.keys(mr).forEach(function(gr){hr.call(mr,mr[gr],gr,mr)})),mr}var assign=Object.assign||function(hr){for(var gr=arguments.length,vr=new Array(gr>1?gr-1:0),xr=1;xr<gr;xr++)vr[xr-1]=arguments[xr];return isObject(hr)&&vr.length>0&&vr.forEach(function(Er){isObject(Er)&&Object.keys(Er).forEach(function(Cr){hr[Cr]=Er[Cr]})}),hr},REGEXP_DECIMALS=/\.\d*(?:0|9){12}\d*$/;function normalizeDecimalNumber(mr){var hr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return REGEXP_DECIMALS.test(mr)?Math.round(mr*hr)/hr:mr}var REGEXP_SUFFIX=/^width|height|left|top|marginLeft|marginTop$/;function setStyle(mr,hr){var gr=mr.style;forEach(hr,function(vr,xr){REGEXP_SUFFIX.test(xr)&&isNumber(vr)&&(vr="".concat(vr,"px")),gr[xr]=vr})}function hasClass(mr,hr){return mr.classList?mr.classList.contains(hr):mr.className.indexOf(hr)>-1}function addClass(mr,hr){if(hr){if(isNumber(mr.length)){forEach(mr,function(vr){addClass(vr,hr)});return}if(mr.classList){mr.classList.add(hr);return}var gr=mr.className.trim();gr?gr.indexOf(hr)<0&&(mr.className="".concat(gr," ").concat(hr)):mr.className=hr}}function removeClass(mr,hr){if(hr){if(isNumber(mr.length)){forEach(mr,function(gr){removeClass(gr,hr)});return}if(mr.classList){mr.classList.remove(hr);return}mr.className.indexOf(hr)>=0&&(mr.className=mr.className.replace(hr,""))}}function toggleClass(mr,hr,gr){if(hr){if(isNumber(mr.length)){forEach(mr,function(vr){toggleClass(vr,hr,gr)});return}gr?addClass(mr,hr):removeClass(mr,hr)}}var REGEXP_CAMEL_CASE=/([a-z\d])([A-Z])/g;function toParamCase(mr){return mr.replace(REGEXP_CAMEL_CASE,"$1-$2").toLowerCase()}function getData(mr,hr){return isObject(mr[hr])?mr[hr]:mr.dataset?mr.dataset[hr]:mr.getAttribute("data-".concat(toParamCase(hr)))}function setData(mr,hr,gr){isObject(gr)?mr[hr]=gr:mr.dataset?mr.dataset[hr]=gr:mr.setAttribute("data-".concat(toParamCase(hr)),gr)}function removeData(mr,hr){if(isObject(mr[hr]))try{delete mr[hr]}catch{mr[hr]=void 0}else if(mr.dataset)try{delete mr.dataset[hr]}catch{mr.dataset[hr]=void 0}else mr.removeAttribute("data-".concat(toParamCase(hr)))}var REGEXP_SPACES=/\s\s*/,onceSupported=function(){var mr=!1;if(IS_BROWSER){var hr=!1,gr=function(){},vr=Object.defineProperty({},"once",{get:function(){return mr=!0,hr},set:function(Er){hr=Er}});WINDOW.addEventListener("test",gr,vr),WINDOW.removeEventListener("test",gr,vr)}return mr}();function removeListener(mr,hr,gr){var vr=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},xr=gr;hr.trim().split(REGEXP_SPACES).forEach(function(Er){if(!onceSupported){var Cr=mr.listeners;Cr&&Cr[Er]&&Cr[Er][gr]&&(xr=Cr[Er][gr],delete Cr[Er][gr],Object.keys(Cr[Er]).length===0&&delete Cr[Er],Object.keys(Cr).length===0&&delete mr.listeners)}mr.removeEventListener(Er,xr,vr)})}function addListener(mr,hr,gr){var vr=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},xr=gr;hr.trim().split(REGEXP_SPACES).forEach(function(Er){if(vr.once&&!onceSupported){var Cr=mr.listeners,wr=Cr===void 0?{}:Cr;xr=function(){delete wr[Er][gr],mr.removeEventListener(Er,xr,vr);for(var kr=arguments.length,Dr=new Array(kr),Br=0;Br<kr;Br++)Dr[Br]=arguments[Br];gr.apply(mr,Dr)},wr[Er]||(wr[Er]={}),wr[Er][gr]&&mr.removeEventListener(Er,wr[Er][gr],vr),wr[Er][gr]=xr,mr.listeners=wr}mr.addEventListener(Er,xr,vr)})}function dispatchEvent(mr,hr,gr){var vr;return isFunction(Event)&&isFunction(CustomEvent)?vr=new CustomEvent(hr,{detail:gr,bubbles:!0,cancelable:!0}):(vr=document.createEvent("CustomEvent"),vr.initCustomEvent(hr,!0,!0,gr)),mr.dispatchEvent(vr)}function getOffset(mr){var hr=mr.getBoundingClientRect();return{left:hr.left+(window.pageXOffset-document.documentElement.clientLeft),top:hr.top+(window.pageYOffset-document.documentElement.clientTop)}}var location$1=WINDOW.location,REGEXP_ORIGINS=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function isCrossOriginURL(mr){var hr=mr.match(REGEXP_ORIGINS);return hr!==null&&(hr[1]!==location$1.protocol||hr[2]!==location$1.hostname||hr[3]!==location$1.port)}function addTimestamp(mr){var hr="timestamp=".concat(new Date().getTime());return mr+(mr.indexOf("?")===-1?"?":"&")+hr}function getTransforms(mr){var hr=mr.rotate,gr=mr.scaleX,vr=mr.scaleY,xr=mr.translateX,Er=mr.translateY,Cr=[];isNumber(xr)&&xr!==0&&Cr.push("translateX(".concat(xr,"px)")),isNumber(Er)&&Er!==0&&Cr.push("translateY(".concat(Er,"px)")),isNumber(hr)&&hr!==0&&Cr.push("rotate(".concat(hr,"deg)")),isNumber(gr)&&gr!==1&&Cr.push("scaleX(".concat(gr,")")),isNumber(vr)&&vr!==1&&Cr.push("scaleY(".concat(vr,")"));var wr=Cr.length?Cr.join(" "):"none";return{WebkitTransform:wr,msTransform:wr,transform:wr}}function getMaxZoomRatio(mr){var hr=_objectSpread2$1({},mr),gr=0;return forEach(mr,function(vr,xr){delete hr[xr],forEach(hr,function(Er){var Cr=Math.abs(vr.startX-Er.startX),wr=Math.abs(vr.startY-Er.startY),Rr=Math.abs(vr.endX-Er.endX),kr=Math.abs(vr.endY-Er.endY),Dr=Math.sqrt(Cr*Cr+wr*wr),Br=Math.sqrt(Rr*Rr+kr*kr),Hr=(Br-Dr)/Dr;Math.abs(Hr)>Math.abs(gr)&&(gr=Hr)})}),gr}function getPointer(mr,hr){var gr=mr.pageX,vr=mr.pageY,xr={endX:gr,endY:vr};return hr?xr:_objectSpread2$1({startX:gr,startY:vr},xr)}function getPointersCenter(mr){var hr=0,gr=0,vr=0;return forEach(mr,function(xr){var Er=xr.startX,Cr=xr.startY;hr+=Er,gr+=Cr,vr+=1}),hr/=vr,gr/=vr,{pageX:hr,pageY:gr}}function getAdjustedSizes(mr){var hr=mr.aspectRatio,gr=mr.height,vr=mr.width,xr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",Er=isPositiveNumber(vr),Cr=isPositiveNumber(gr);if(Er&&Cr){var wr=gr*hr;xr==="contain"&&wr>vr||xr==="cover"&&wr<vr?gr=vr/hr:vr=gr*hr}else Er?gr=vr/hr:Cr&&(vr=gr*hr);return{width:vr,height:gr}}function getRotatedSizes(mr){var hr=mr.width,gr=mr.height,vr=mr.degree;if(vr=Math.abs(vr)%180,vr===90)return{width:gr,height:hr};var xr=vr%90*Math.PI/180,Er=Math.sin(xr),Cr=Math.cos(xr),wr=hr*Cr+gr*Er,Rr=hr*Er+gr*Cr;return vr>90?{width:Rr,height:wr}:{width:wr,height:Rr}}function getSourceCanvas(mr,hr,gr,vr){var xr=hr.aspectRatio,Er=hr.naturalWidth,Cr=hr.naturalHeight,wr=hr.rotate,Rr=wr===void 0?0:wr,kr=hr.scaleX,Dr=kr===void 0?1:kr,Br=hr.scaleY,Hr=Br===void 0?1:Br,Gr=gr.aspectRatio,qr=gr.naturalWidth,zr=gr.naturalHeight,Qr=vr.fillColor,sn=Qr===void 0?"transparent":Qr,hn=vr.imageSmoothingEnabled,vn=hn===void 0?!0:hn,yn=vr.imageSmoothingQuality,gn=yn===void 0?"low":yn,bn=vr.maxWidth,xn=bn===void 0?1/0:bn,$n=vr.maxHeight,Sn=$n===void 0?1/0:$n,Cn=vr.minWidth,Rn=Cn===void 0?0:Cn,Bn=vr.minHeight,Fn=Bn===void 0?0:Bn,Hn=document.createElement("canvas"),Gn=Hn.getContext("2d"),qn=getAdjustedSizes({aspectRatio:Gr,width:xn,height:Sn}),On=getAdjustedSizes({aspectRatio:Gr,width:Rn,height:Fn},"cover"),wn=Math.min(qn.width,Math.max(On.width,qr)),_n=Math.min(qn.height,Math.max(On.height,zr)),Tn=getAdjustedSizes({aspectRatio:xr,width:xn,height:Sn}),Mn=getAdjustedSizes({aspectRatio:xr,width:Rn,height:Fn},"cover"),Ln=Math.min(Tn.width,Math.max(Mn.width,Er)),jn=Math.min(Tn.height,Math.max(Mn.height,Cr)),Kn=[-Ln/2,-jn/2,Ln,jn];return Hn.width=normalizeDecimalNumber(wn),Hn.height=normalizeDecimalNumber(_n),Gn.fillStyle=sn,Gn.fillRect(0,0,wn,_n),Gn.save(),Gn.translate(wn/2,_n/2),Gn.rotate(Rr*Math.PI/180),Gn.scale(Dr,Hr),Gn.imageSmoothingEnabled=vn,Gn.imageSmoothingQuality=gn,Gn.drawImage.apply(Gn,[mr].concat(_toConsumableArray(Kn.map(function(Nn){return Math.floor(normalizeDecimalNumber(Nn))})))),Gn.restore(),Hn}var fromCharCode=String.fromCharCode;function getStringFromCharCode(mr,hr,gr){var vr="";gr+=hr;for(var xr=hr;xr<gr;xr+=1)vr+=fromCharCode(mr.getUint8(xr));return vr}var REGEXP_DATA_URL_HEAD=/^data:.*,/;function dataURLToArrayBuffer(mr){var hr=mr.replace(REGEXP_DATA_URL_HEAD,""),gr=atob(hr),vr=new ArrayBuffer(gr.length),xr=new Uint8Array(vr);return forEach(xr,function(Er,Cr){xr[Cr]=gr.charCodeAt(Cr)}),vr}function arrayBufferToDataURL(mr,hr){for(var gr=[],vr=8192,xr=new Uint8Array(mr);xr.length>0;)gr.push(fromCharCode.apply(null,toArray(xr.subarray(0,vr)))),xr=xr.subarray(vr);return"data:".concat(hr,";base64,").concat(btoa(gr.join("")))}function resetAndGetOrientation(mr){var hr=new DataView(mr),gr;try{var vr,xr,Er;if(hr.getUint8(0)===255&&hr.getUint8(1)===216)for(var Cr=hr.byteLength,wr=2;wr+1<Cr;){if(hr.getUint8(wr)===255&&hr.getUint8(wr+1)===225){xr=wr;break}wr+=1}if(xr){var Rr=xr+4,kr=xr+10;if(getStringFromCharCode(hr,Rr,4)==="Exif"){var Dr=hr.getUint16(kr);if(vr=Dr===18761,(vr||Dr===19789)&&hr.getUint16(kr+2,vr)===42){var Br=hr.getUint32(kr+4,vr);Br>=8&&(Er=kr+Br)}}}if(Er){var Hr=hr.getUint16(Er,vr),Gr,qr;for(qr=0;qr<Hr;qr+=1)if(Gr=Er+qr*12+2,hr.getUint16(Gr,vr)===274){Gr+=8,gr=hr.getUint16(Gr,vr),hr.setUint16(Gr,1,vr);break}}}catch{gr=1}return gr}function parseOrientation(mr){var hr=0,gr=1,vr=1;switch(mr){case 2:gr=-1;break;case 3:hr=-180;break;case 4:vr=-1;break;case 5:hr=90,vr=-1;break;case 6:hr=90;break;case 7:hr=90,gr=-1;break;case 8:hr=-90;break}return{rotate:hr,scaleX:gr,scaleY:vr}}var render={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var hr=this.element,gr=this.options,vr=this.container,xr=this.cropper,Er=Number(gr.minContainerWidth),Cr=Number(gr.minContainerHeight);addClass(xr,CLASS_HIDDEN),removeClass(hr,CLASS_HIDDEN);var wr={width:Math.max(vr.offsetWidth,Er>=0?Er:MIN_CONTAINER_WIDTH),height:Math.max(vr.offsetHeight,Cr>=0?Cr:MIN_CONTAINER_HEIGHT)};this.containerData=wr,setStyle(xr,{width:wr.width,height:wr.height}),addClass(hr,CLASS_HIDDEN),removeClass(xr,CLASS_HIDDEN)},initCanvas:function(){var hr=this.containerData,gr=this.imageData,vr=this.options.viewMode,xr=Math.abs(gr.rotate)%180===90,Er=xr?gr.naturalHeight:gr.naturalWidth,Cr=xr?gr.naturalWidth:gr.naturalHeight,wr=Er/Cr,Rr=hr.width,kr=hr.height;hr.height*wr>hr.width?vr===3?Rr=hr.height*wr:kr=hr.width/wr:vr===3?kr=hr.width/wr:Rr=hr.height*wr;var Dr={aspectRatio:wr,naturalWidth:Er,naturalHeight:Cr,width:Rr,height:kr};this.canvasData=Dr,this.limited=vr===1||vr===2,this.limitCanvas(!0,!0),Dr.width=Math.min(Math.max(Dr.width,Dr.minWidth),Dr.maxWidth),Dr.height=Math.min(Math.max(Dr.height,Dr.minHeight),Dr.maxHeight),Dr.left=(hr.width-Dr.width)/2,Dr.top=(hr.height-Dr.height)/2,Dr.oldLeft=Dr.left,Dr.oldTop=Dr.top,this.initialCanvasData=assign({},Dr)},limitCanvas:function(hr,gr){var vr=this.options,xr=this.containerData,Er=this.canvasData,Cr=this.cropBoxData,wr=vr.viewMode,Rr=Er.aspectRatio,kr=this.cropped&&Cr;if(hr){var Dr=Number(vr.minCanvasWidth)||0,Br=Number(vr.minCanvasHeight)||0;wr>1?(Dr=Math.max(Dr,xr.width),Br=Math.max(Br,xr.height),wr===3&&(Br*Rr>Dr?Dr=Br*Rr:Br=Dr/Rr)):wr>0&&(Dr?Dr=Math.max(Dr,kr?Cr.width:0):Br?Br=Math.max(Br,kr?Cr.height:0):kr&&(Dr=Cr.width,Br=Cr.height,Br*Rr>Dr?Dr=Br*Rr:Br=Dr/Rr));var Hr=getAdjustedSizes({aspectRatio:Rr,width:Dr,height:Br});Dr=Hr.width,Br=Hr.height,Er.minWidth=Dr,Er.minHeight=Br,Er.maxWidth=1/0,Er.maxHeight=1/0}if(gr)if(wr>(kr?0:1)){var Gr=xr.width-Er.width,qr=xr.height-Er.height;Er.minLeft=Math.min(0,Gr),Er.minTop=Math.min(0,qr),Er.maxLeft=Math.max(0,Gr),Er.maxTop=Math.max(0,qr),kr&&this.limited&&(Er.minLeft=Math.min(Cr.left,Cr.left+(Cr.width-Er.width)),Er.minTop=Math.min(Cr.top,Cr.top+(Cr.height-Er.height)),Er.maxLeft=Cr.left,Er.maxTop=Cr.top,wr===2&&(Er.width>=xr.width&&(Er.minLeft=Math.min(0,Gr),Er.maxLeft=Math.max(0,Gr)),Er.height>=xr.height&&(Er.minTop=Math.min(0,qr),Er.maxTop=Math.max(0,qr))))}else Er.minLeft=-Er.width,Er.minTop=-Er.height,Er.maxLeft=xr.width,Er.maxTop=xr.height},renderCanvas:function(hr,gr){var vr=this.canvasData,xr=this.imageData;if(gr){var Er=getRotatedSizes({width:xr.naturalWidth*Math.abs(xr.scaleX||1),height:xr.naturalHeight*Math.abs(xr.scaleY||1),degree:xr.rotate||0}),Cr=Er.width,wr=Er.height,Rr=vr.width*(Cr/vr.naturalWidth),kr=vr.height*(wr/vr.naturalHeight);vr.left-=(Rr-vr.width)/2,vr.top-=(kr-vr.height)/2,vr.width=Rr,vr.height=kr,vr.aspectRatio=Cr/wr,vr.naturalWidth=Cr,vr.naturalHeight=wr,this.limitCanvas(!0,!1)}(vr.width>vr.maxWidth||vr.width<vr.minWidth)&&(vr.left=vr.oldLeft),(vr.height>vr.maxHeight||vr.height<vr.minHeight)&&(vr.top=vr.oldTop),vr.width=Math.min(Math.max(vr.width,vr.minWidth),vr.maxWidth),vr.height=Math.min(Math.max(vr.height,vr.minHeight),vr.maxHeight),this.limitCanvas(!1,!0),vr.left=Math.min(Math.max(vr.left,vr.minLeft),vr.maxLeft),vr.top=Math.min(Math.max(vr.top,vr.minTop),vr.maxTop),vr.oldLeft=vr.left,vr.oldTop=vr.top,setStyle(this.canvas,assign({width:vr.width,height:vr.height},getTransforms({translateX:vr.left,translateY:vr.top}))),this.renderImage(hr),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(hr){var gr=this.canvasData,vr=this.imageData,xr=vr.naturalWidth*(gr.width/gr.naturalWidth),Er=vr.naturalHeight*(gr.height/gr.naturalHeight);assign(vr,{width:xr,height:Er,left:(gr.width-xr)/2,top:(gr.height-Er)/2}),setStyle(this.image,assign({width:vr.width,height:vr.height},getTransforms(assign({translateX:vr.left,translateY:vr.top},vr)))),hr&&this.output()},initCropBox:function(){var hr=this.options,gr=this.canvasData,vr=hr.aspectRatio||hr.initialAspectRatio,xr=Number(hr.autoCropArea)||.8,Er={width:gr.width,height:gr.height};vr&&(gr.height*vr>gr.width?Er.height=Er.width/vr:Er.width=Er.height*vr),this.cropBoxData=Er,this.limitCropBox(!0,!0),Er.width=Math.min(Math.max(Er.width,Er.minWidth),Er.maxWidth),Er.height=Math.min(Math.max(Er.height,Er.minHeight),Er.maxHeight),Er.width=Math.max(Er.minWidth,Er.width*xr),Er.height=Math.max(Er.minHeight,Er.height*xr),Er.left=gr.left+(gr.width-Er.width)/2,Er.top=gr.top+(gr.height-Er.height)/2,Er.oldLeft=Er.left,Er.oldTop=Er.top,this.initialCropBoxData=assign({},Er)},limitCropBox:function(hr,gr){var vr=this.options,xr=this.containerData,Er=this.canvasData,Cr=this.cropBoxData,wr=this.limited,Rr=vr.aspectRatio;if(hr){var kr=Number(vr.minCropBoxWidth)||0,Dr=Number(vr.minCropBoxHeight)||0,Br=wr?Math.min(xr.width,Er.width,Er.width+Er.left,xr.width-Er.left):xr.width,Hr=wr?Math.min(xr.height,Er.height,Er.height+Er.top,xr.height-Er.top):xr.height;kr=Math.min(kr,xr.width),Dr=Math.min(Dr,xr.height),Rr&&(kr&&Dr?Dr*Rr>kr?Dr=kr/Rr:kr=Dr*Rr:kr?Dr=kr/Rr:Dr&&(kr=Dr*Rr),Hr*Rr>Br?Hr=Br/Rr:Br=Hr*Rr),Cr.minWidth=Math.min(kr,Br),Cr.minHeight=Math.min(Dr,Hr),Cr.maxWidth=Br,Cr.maxHeight=Hr}gr&&(wr?(Cr.minLeft=Math.max(0,Er.left),Cr.minTop=Math.max(0,Er.top),Cr.maxLeft=Math.min(xr.width,Er.left+Er.width)-Cr.width,Cr.maxTop=Math.min(xr.height,Er.top+Er.height)-Cr.height):(Cr.minLeft=0,Cr.minTop=0,Cr.maxLeft=xr.width-Cr.width,Cr.maxTop=xr.height-Cr.height))},renderCropBox:function(){var hr=this.options,gr=this.containerData,vr=this.cropBoxData;(vr.width>vr.maxWidth||vr.width<vr.minWidth)&&(vr.left=vr.oldLeft),(vr.height>vr.maxHeight||vr.height<vr.minHeight)&&(vr.top=vr.oldTop),vr.width=Math.min(Math.max(vr.width,vr.minWidth),vr.maxWidth),vr.height=Math.min(Math.max(vr.height,vr.minHeight),vr.maxHeight),this.limitCropBox(!1,!0),vr.left=Math.min(Math.max(vr.left,vr.minLeft),vr.maxLeft),vr.top=Math.min(Math.max(vr.top,vr.minTop),vr.maxTop),vr.oldLeft=vr.left,vr.oldTop=vr.top,hr.movable&&hr.cropBoxMovable&&setData(this.face,DATA_ACTION,vr.width>=gr.width&&vr.height>=gr.height?ACTION_MOVE:ACTION_ALL),setStyle(this.cropBox,assign({width:vr.width,height:vr.height},getTransforms({translateX:vr.left,translateY:vr.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),dispatchEvent(this.element,EVENT_CROP,this.getData())}},preview={initPreview:function(){var hr=this.element,gr=this.crossOrigin,vr=this.options.preview,xr=gr?this.crossOriginUrl:this.url,Er=hr.alt||"The image to preview",Cr=document.createElement("img");if(gr&&(Cr.crossOrigin=gr),Cr.src=xr,Cr.alt=Er,this.viewBox.appendChild(Cr),this.viewBoxImage=Cr,!!vr){var wr=vr;typeof vr=="string"?wr=hr.ownerDocument.querySelectorAll(vr):vr.querySelector&&(wr=[vr]),this.previews=wr,forEach(wr,function(Rr){var kr=document.createElement("img");setData(Rr,DATA_PREVIEW,{width:Rr.offsetWidth,height:Rr.offsetHeight,html:Rr.innerHTML}),gr&&(kr.crossOrigin=gr),kr.src=xr,kr.alt=Er,kr.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',Rr.innerHTML="",Rr.appendChild(kr)})}},resetPreview:function(){forEach(this.previews,function(hr){var gr=getData(hr,DATA_PREVIEW);setStyle(hr,{width:gr.width,height:gr.height}),hr.innerHTML=gr.html,removeData(hr,DATA_PREVIEW)})},preview:function(){var hr=this.imageData,gr=this.canvasData,vr=this.cropBoxData,xr=vr.width,Er=vr.height,Cr=hr.width,wr=hr.height,Rr=vr.left-gr.left-hr.left,kr=vr.top-gr.top-hr.top;!this.cropped||this.disabled||(setStyle(this.viewBoxImage,assign({width:Cr,height:wr},getTransforms(assign({translateX:-Rr,translateY:-kr},hr)))),forEach(this.previews,function(Dr){var Br=getData(Dr,DATA_PREVIEW),Hr=Br.width,Gr=Br.height,qr=Hr,zr=Gr,Qr=1;xr&&(Qr=Hr/xr,zr=Er*Qr),Er&&zr>Gr&&(Qr=Gr/Er,qr=xr*Qr,zr=Gr),setStyle(Dr,{width:qr,height:zr}),setStyle(Dr.getElementsByTagName("img")[0],assign({width:Cr*Qr,height:wr*Qr},getTransforms(assign({translateX:-Rr*Qr,translateY:-kr*Qr},hr))))}))}},events={bind:function(){var hr=this.element,gr=this.options,vr=this.cropper;isFunction(gr.cropstart)&&addListener(hr,EVENT_CROP_START,gr.cropstart),isFunction(gr.cropmove)&&addListener(hr,EVENT_CROP_MOVE,gr.cropmove),isFunction(gr.cropend)&&addListener(hr,EVENT_CROP_END,gr.cropend),isFunction(gr.crop)&&addListener(hr,EVENT_CROP,gr.crop),isFunction(gr.zoom)&&addListener(hr,EVENT_ZOOM,gr.zoom),addListener(vr,EVENT_POINTER_DOWN,this.onCropStart=this.cropStart.bind(this)),gr.zoomable&&gr.zoomOnWheel&&addListener(vr,EVENT_WHEEL,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),gr.toggleDragModeOnDblclick&&addListener(vr,EVENT_DBLCLICK,this.onDblclick=this.dblclick.bind(this)),addListener(hr.ownerDocument,EVENT_POINTER_MOVE,this.onCropMove=this.cropMove.bind(this)),addListener(hr.ownerDocument,EVENT_POINTER_UP,this.onCropEnd=this.cropEnd.bind(this)),gr.responsive&&addListener(window,EVENT_RESIZE,this.onResize=this.resize.bind(this))},unbind:function(){var hr=this.element,gr=this.options,vr=this.cropper;isFunction(gr.cropstart)&&removeListener(hr,EVENT_CROP_START,gr.cropstart),isFunction(gr.cropmove)&&removeListener(hr,EVENT_CROP_MOVE,gr.cropmove),isFunction(gr.cropend)&&removeListener(hr,EVENT_CROP_END,gr.cropend),isFunction(gr.crop)&&removeListener(hr,EVENT_CROP,gr.crop),isFunction(gr.zoom)&&removeListener(hr,EVENT_ZOOM,gr.zoom),removeListener(vr,EVENT_POINTER_DOWN,this.onCropStart),gr.zoomable&&gr.zoomOnWheel&&removeListener(vr,EVENT_WHEEL,this.onWheel,{passive:!1,capture:!0}),gr.toggleDragModeOnDblclick&&removeListener(vr,EVENT_DBLCLICK,this.onDblclick),removeListener(hr.ownerDocument,EVENT_POINTER_MOVE,this.onCropMove),removeListener(hr.ownerDocument,EVENT_POINTER_UP,this.onCropEnd),gr.responsive&&removeListener(window,EVENT_RESIZE,this.onResize)}},handlers={resize:function(){if(!this.disabled){var hr=this.options,gr=this.container,vr=this.containerData,xr=gr.offsetWidth/vr.width,Er=gr.offsetHeight/vr.height,Cr=Math.abs(xr-1)>Math.abs(Er-1)?xr:Er;if(Cr!==1){var wr,Rr;hr.restore&&(wr=this.getCanvasData(),Rr=this.getCropBoxData()),this.render(),hr.restore&&(this.setCanvasData(forEach(wr,function(kr,Dr){wr[Dr]=kr*Cr})),this.setCropBoxData(forEach(Rr,function(kr,Dr){Rr[Dr]=kr*Cr})))}}},dblclick:function(){this.disabled||this.options.dragMode===DRAG_MODE_NONE||this.setDragMode(hasClass(this.dragBox,CLASS_CROP)?DRAG_MODE_MOVE:DRAG_MODE_CROP)},wheel:function(hr){var gr=this,vr=Number(this.options.wheelZoomRatio)||.1,xr=1;this.disabled||(hr.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){gr.wheeling=!1},50),hr.deltaY?xr=hr.deltaY>0?1:-1:hr.wheelDelta?xr=-hr.wheelDelta/120:hr.detail&&(xr=hr.detail>0?1:-1),this.zoom(-xr*vr,hr)))},cropStart:function(hr){var gr=hr.buttons,vr=hr.button;if(!(this.disabled||(hr.type==="mousedown"||hr.type==="pointerdown"&&hr.pointerType==="mouse")&&(isNumber(gr)&&gr!==1||isNumber(vr)&&vr!==0||hr.ctrlKey))){var xr=this.options,Er=this.pointers,Cr;hr.changedTouches?forEach(hr.changedTouches,function(wr){Er[wr.identifier]=getPointer(wr)}):Er[hr.pointerId||0]=getPointer(hr),Object.keys(Er).length>1&&xr.zoomable&&xr.zoomOnTouch?Cr=ACTION_ZOOM:Cr=getData(hr.target,DATA_ACTION),REGEXP_ACTIONS.test(Cr)&&dispatchEvent(this.element,EVENT_CROP_START,{originalEvent:hr,action:Cr})!==!1&&(hr.preventDefault(),this.action=Cr,this.cropping=!1,Cr===ACTION_CROP&&(this.cropping=!0,addClass(this.dragBox,CLASS_MODAL)))}},cropMove:function(hr){var gr=this.action;if(!(this.disabled||!gr)){var vr=this.pointers;hr.preventDefault(),dispatchEvent(this.element,EVENT_CROP_MOVE,{originalEvent:hr,action:gr})!==!1&&(hr.changedTouches?forEach(hr.changedTouches,function(xr){assign(vr[xr.identifier]||{},getPointer(xr,!0))}):assign(vr[hr.pointerId||0]||{},getPointer(hr,!0)),this.change(hr))}},cropEnd:function(hr){if(!this.disabled){var gr=this.action,vr=this.pointers;hr.changedTouches?forEach(hr.changedTouches,function(xr){delete vr[xr.identifier]}):delete vr[hr.pointerId||0],gr&&(hr.preventDefault(),Object.keys(vr).length||(this.action=""),this.cropping&&(this.cropping=!1,toggleClass(this.dragBox,CLASS_MODAL,this.cropped&&this.options.modal)),dispatchEvent(this.element,EVENT_CROP_END,{originalEvent:hr,action:gr}))}}},change={change:function(hr){var gr=this.options,vr=this.canvasData,xr=this.containerData,Er=this.cropBoxData,Cr=this.pointers,wr=this.action,Rr=gr.aspectRatio,kr=Er.left,Dr=Er.top,Br=Er.width,Hr=Er.height,Gr=kr+Br,qr=Dr+Hr,zr=0,Qr=0,sn=xr.width,hn=xr.height,vn=!0,yn;!Rr&&hr.shiftKey&&(Rr=Br&&Hr?Br/Hr:1),this.limited&&(zr=Er.minLeft,Qr=Er.minTop,sn=zr+Math.min(xr.width,vr.width,vr.left+vr.width),hn=Qr+Math.min(xr.height,vr.height,vr.top+vr.height));var gn=Cr[Object.keys(Cr)[0]],bn={x:gn.endX-gn.startX,y:gn.endY-gn.startY},xn=function(Sn){switch(Sn){case ACTION_EAST:Gr+bn.x>sn&&(bn.x=sn-Gr);break;case ACTION_WEST:kr+bn.x<zr&&(bn.x=zr-kr);break;case ACTION_NORTH:Dr+bn.y<Qr&&(bn.y=Qr-Dr);break;case ACTION_SOUTH:qr+bn.y>hn&&(bn.y=hn-qr);break}};switch(wr){case ACTION_ALL:kr+=bn.x,Dr+=bn.y;break;case ACTION_EAST:if(bn.x>=0&&(Gr>=sn||Rr&&(Dr<=Qr||qr>=hn))){vn=!1;break}xn(ACTION_EAST),Br+=bn.x,Br<0&&(wr=ACTION_WEST,Br=-Br,kr-=Br),Rr&&(Hr=Br/Rr,Dr+=(Er.height-Hr)/2);break;case ACTION_NORTH:if(bn.y<=0&&(Dr<=Qr||Rr&&(kr<=zr||Gr>=sn))){vn=!1;break}xn(ACTION_NORTH),Hr-=bn.y,Dr+=bn.y,Hr<0&&(wr=ACTION_SOUTH,Hr=-Hr,Dr-=Hr),Rr&&(Br=Hr*Rr,kr+=(Er.width-Br)/2);break;case ACTION_WEST:if(bn.x<=0&&(kr<=zr||Rr&&(Dr<=Qr||qr>=hn))){vn=!1;break}xn(ACTION_WEST),Br-=bn.x,kr+=bn.x,Br<0&&(wr=ACTION_EAST,Br=-Br,kr-=Br),Rr&&(Hr=Br/Rr,Dr+=(Er.height-Hr)/2);break;case ACTION_SOUTH:if(bn.y>=0&&(qr>=hn||Rr&&(kr<=zr||Gr>=sn))){vn=!1;break}xn(ACTION_SOUTH),Hr+=bn.y,Hr<0&&(wr=ACTION_NORTH,Hr=-Hr,Dr-=Hr),Rr&&(Br=Hr*Rr,kr+=(Er.width-Br)/2);break;case ACTION_NORTH_EAST:if(Rr){if(bn.y<=0&&(Dr<=Qr||Gr>=sn)){vn=!1;break}xn(ACTION_NORTH),Hr-=bn.y,Dr+=bn.y,Br=Hr*Rr}else xn(ACTION_NORTH),xn(ACTION_EAST),bn.x>=0?Gr<sn?Br+=bn.x:bn.y<=0&&Dr<=Qr&&(vn=!1):Br+=bn.x,bn.y<=0?Dr>Qr&&(Hr-=bn.y,Dr+=bn.y):(Hr-=bn.y,Dr+=bn.y);Br<0&&Hr<0?(wr=ACTION_SOUTH_WEST,Hr=-Hr,Br=-Br,Dr-=Hr,kr-=Br):Br<0?(wr=ACTION_NORTH_WEST,Br=-Br,kr-=Br):Hr<0&&(wr=ACTION_SOUTH_EAST,Hr=-Hr,Dr-=Hr);break;case ACTION_NORTH_WEST:if(Rr){if(bn.y<=0&&(Dr<=Qr||kr<=zr)){vn=!1;break}xn(ACTION_NORTH),Hr-=bn.y,Dr+=bn.y,Br=Hr*Rr,kr+=Er.width-Br}else xn(ACTION_NORTH),xn(ACTION_WEST),bn.x<=0?kr>zr?(Br-=bn.x,kr+=bn.x):bn.y<=0&&Dr<=Qr&&(vn=!1):(Br-=bn.x,kr+=bn.x),bn.y<=0?Dr>Qr&&(Hr-=bn.y,Dr+=bn.y):(Hr-=bn.y,Dr+=bn.y);Br<0&&Hr<0?(wr=ACTION_SOUTH_EAST,Hr=-Hr,Br=-Br,Dr-=Hr,kr-=Br):Br<0?(wr=ACTION_NORTH_EAST,Br=-Br,kr-=Br):Hr<0&&(wr=ACTION_SOUTH_WEST,Hr=-Hr,Dr-=Hr);break;case ACTION_SOUTH_WEST:if(Rr){if(bn.x<=0&&(kr<=zr||qr>=hn)){vn=!1;break}xn(ACTION_WEST),Br-=bn.x,kr+=bn.x,Hr=Br/Rr}else xn(ACTION_SOUTH),xn(ACTION_WEST),bn.x<=0?kr>zr?(Br-=bn.x,kr+=bn.x):bn.y>=0&&qr>=hn&&(vn=!1):(Br-=bn.x,kr+=bn.x),bn.y>=0?qr<hn&&(Hr+=bn.y):Hr+=bn.y;Br<0&&Hr<0?(wr=ACTION_NORTH_EAST,Hr=-Hr,Br=-Br,Dr-=Hr,kr-=Br):Br<0?(wr=ACTION_SOUTH_EAST,Br=-Br,kr-=Br):Hr<0&&(wr=ACTION_NORTH_WEST,Hr=-Hr,Dr-=Hr);break;case ACTION_SOUTH_EAST:if(Rr){if(bn.x>=0&&(Gr>=sn||qr>=hn)){vn=!1;break}xn(ACTION_EAST),Br+=bn.x,Hr=Br/Rr}else xn(ACTION_SOUTH),xn(ACTION_EAST),bn.x>=0?Gr<sn?Br+=bn.x:bn.y>=0&&qr>=hn&&(vn=!1):Br+=bn.x,bn.y>=0?qr<hn&&(Hr+=bn.y):Hr+=bn.y;Br<0&&Hr<0?(wr=ACTION_NORTH_WEST,Hr=-Hr,Br=-Br,Dr-=Hr,kr-=Br):Br<0?(wr=ACTION_SOUTH_WEST,Br=-Br,kr-=Br):Hr<0&&(wr=ACTION_NORTH_EAST,Hr=-Hr,Dr-=Hr);break;case ACTION_MOVE:this.move(bn.x,bn.y),vn=!1;break;case ACTION_ZOOM:this.zoom(getMaxZoomRatio(Cr),hr),vn=!1;break;case ACTION_CROP:if(!bn.x||!bn.y){vn=!1;break}yn=getOffset(this.cropper),kr=gn.startX-yn.left,Dr=gn.startY-yn.top,Br=Er.minWidth,Hr=Er.minHeight,bn.x>0?wr=bn.y>0?ACTION_SOUTH_EAST:ACTION_NORTH_EAST:bn.x<0&&(kr-=Br,wr=bn.y>0?ACTION_SOUTH_WEST:ACTION_NORTH_WEST),bn.y<0&&(Dr-=Hr),this.cropped||(removeClass(this.cropBox,CLASS_HIDDEN),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}vn&&(Er.width=Br,Er.height=Hr,Er.left=kr,Er.top=Dr,this.action=wr,this.renderCropBox()),forEach(Cr,function($n){$n.startX=$n.endX,$n.startY=$n.endY})}},methods={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&addClass(this.dragBox,CLASS_MODAL),removeClass(this.cropBox,CLASS_HIDDEN),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=assign({},this.initialImageData),this.canvasData=assign({},this.initialCanvasData),this.cropBoxData=assign({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(assign(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),removeClass(this.dragBox,CLASS_MODAL),addClass(this.cropBox,CLASS_HIDDEN)),this},replace:function(hr){var gr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&hr&&(this.isImg&&(this.element.src=hr),gr?(this.url=hr,this.image.src=hr,this.ready&&(this.viewBoxImage.src=hr,forEach(this.previews,function(vr){vr.getElementsByTagName("img")[0].src=hr}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(hr))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,removeClass(this.cropper,CLASS_DISABLED)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,addClass(this.cropper,CLASS_DISABLED)),this},destroy:function(){var hr=this.element;return hr[NAMESPACE]?(hr[NAMESPACE]=void 0,this.isImg&&this.replaced&&(hr.src=this.originalUrl),this.uncreate(),this):this},move:function(hr){var gr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:hr,vr=this.canvasData,xr=vr.left,Er=vr.top;return this.moveTo(isUndefined(hr)?hr:xr+Number(hr),isUndefined(gr)?gr:Er+Number(gr))},moveTo:function(hr){var gr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:hr,vr=this.canvasData,xr=!1;return hr=Number(hr),gr=Number(gr),this.ready&&!this.disabled&&this.options.movable&&(isNumber(hr)&&(vr.left=hr,xr=!0),isNumber(gr)&&(vr.top=gr,xr=!0),xr&&this.renderCanvas(!0)),this},zoom:function(hr,gr){var vr=this.canvasData;return hr=Number(hr),hr<0?hr=1/(1-hr):hr=1+hr,this.zoomTo(vr.width*hr/vr.naturalWidth,null,gr)},zoomTo:function(hr,gr,vr){var xr=this.options,Er=this.canvasData,Cr=Er.width,wr=Er.height,Rr=Er.naturalWidth,kr=Er.naturalHeight;if(hr=Number(hr),hr>=0&&this.ready&&!this.disabled&&xr.zoomable){var Dr=Rr*hr,Br=kr*hr;if(dispatchEvent(this.element,EVENT_ZOOM,{ratio:hr,oldRatio:Cr/Rr,originalEvent:vr})===!1)return this;if(vr){var Hr=this.pointers,Gr=getOffset(this.cropper),qr=Hr&&Object.keys(Hr).length?getPointersCenter(Hr):{pageX:vr.pageX,pageY:vr.pageY};Er.left-=(Dr-Cr)*((qr.pageX-Gr.left-Er.left)/Cr),Er.top-=(Br-wr)*((qr.pageY-Gr.top-Er.top)/wr)}else isPlainObject(gr)&&isNumber(gr.x)&&isNumber(gr.y)?(Er.left-=(Dr-Cr)*((gr.x-Er.left)/Cr),Er.top-=(Br-wr)*((gr.y-Er.top)/wr)):(Er.left-=(Dr-Cr)/2,Er.top-=(Br-wr)/2);Er.width=Dr,Er.height=Br,this.renderCanvas(!0)}return this},rotate:function(hr){return this.rotateTo((this.imageData.rotate||0)+Number(hr))},rotateTo:function(hr){return hr=Number(hr),isNumber(hr)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=hr%360,this.renderCanvas(!0,!0)),this},scaleX:function(hr){var gr=this.imageData.scaleY;return this.scale(hr,isNumber(gr)?gr:1)},scaleY:function(hr){var gr=this.imageData.scaleX;return this.scale(isNumber(gr)?gr:1,hr)},scale:function(hr){var gr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:hr,vr=this.imageData,xr=!1;return hr=Number(hr),gr=Number(gr),this.ready&&!this.disabled&&this.options.scalable&&(isNumber(hr)&&(vr.scaleX=hr,xr=!0),isNumber(gr)&&(vr.scaleY=gr,xr=!0),xr&&this.renderCanvas(!0,!0)),this},getData:function(){var hr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,gr=this.options,vr=this.imageData,xr=this.canvasData,Er=this.cropBoxData,Cr;if(this.ready&&this.cropped){Cr={x:Er.left-xr.left,y:Er.top-xr.top,width:Er.width,height:Er.height};var wr=vr.width/vr.naturalWidth;if(forEach(Cr,function(Dr,Br){Cr[Br]=Dr/wr}),hr){var Rr=Math.round(Cr.y+Cr.height),kr=Math.round(Cr.x+Cr.width);Cr.x=Math.round(Cr.x),Cr.y=Math.round(Cr.y),Cr.width=kr-Cr.x,Cr.height=Rr-Cr.y}}else Cr={x:0,y:0,width:0,height:0};return gr.rotatable&&(Cr.rotate=vr.rotate||0),gr.scalable&&(Cr.scaleX=vr.scaleX||1,Cr.scaleY=vr.scaleY||1),Cr},setData:function(hr){var gr=this.options,vr=this.imageData,xr=this.canvasData,Er={};if(this.ready&&!this.disabled&&isPlainObject(hr)){var Cr=!1;gr.rotatable&&isNumber(hr.rotate)&&hr.rotate!==vr.rotate&&(vr.rotate=hr.rotate,Cr=!0),gr.scalable&&(isNumber(hr.scaleX)&&hr.scaleX!==vr.scaleX&&(vr.scaleX=hr.scaleX,Cr=!0),isNumber(hr.scaleY)&&hr.scaleY!==vr.scaleY&&(vr.scaleY=hr.scaleY,Cr=!0)),Cr&&this.renderCanvas(!0,!0);var wr=vr.width/vr.naturalWidth;isNumber(hr.x)&&(Er.left=hr.x*wr+xr.left),isNumber(hr.y)&&(Er.top=hr.y*wr+xr.top),isNumber(hr.width)&&(Er.width=hr.width*wr),isNumber(hr.height)&&(Er.height=hr.height*wr),this.setCropBoxData(Er)}return this},getContainerData:function(){return this.ready?assign({},this.containerData):{}},getImageData:function(){return this.sized?assign({},this.imageData):{}},getCanvasData:function(){var hr=this.canvasData,gr={};return this.ready&&forEach(["left","top","width","height","naturalWidth","naturalHeight"],function(vr){gr[vr]=hr[vr]}),gr},setCanvasData:function(hr){var gr=this.canvasData,vr=gr.aspectRatio;return this.ready&&!this.disabled&&isPlainObject(hr)&&(isNumber(hr.left)&&(gr.left=hr.left),isNumber(hr.top)&&(gr.top=hr.top),isNumber(hr.width)?(gr.width=hr.width,gr.height=hr.width/vr):isNumber(hr.height)&&(gr.height=hr.height,gr.width=hr.height*vr),this.renderCanvas(!0)),this},getCropBoxData:function(){var hr=this.cropBoxData,gr;return this.ready&&this.cropped&&(gr={left:hr.left,top:hr.top,width:hr.width,height:hr.height}),gr||{}},setCropBoxData:function(hr){var gr=this.cropBoxData,vr=this.options.aspectRatio,xr,Er;return this.ready&&this.cropped&&!this.disabled&&isPlainObject(hr)&&(isNumber(hr.left)&&(gr.left=hr.left),isNumber(hr.top)&&(gr.top=hr.top),isNumber(hr.width)&&hr.width!==gr.width&&(xr=!0,gr.width=hr.width),isNumber(hr.height)&&hr.height!==gr.height&&(Er=!0,gr.height=hr.height),vr&&(xr?gr.height=gr.width/vr:Er&&(gr.width=gr.height*vr)),this.renderCropBox()),this},getCroppedCanvas:function(){var hr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var gr=this.canvasData,vr=getSourceCanvas(this.image,this.imageData,gr,hr);if(!this.cropped)return vr;var xr=this.getData(hr.rounded),Er=xr.x,Cr=xr.y,wr=xr.width,Rr=xr.height,kr=vr.width/Math.floor(gr.naturalWidth);kr!==1&&(Er*=kr,Cr*=kr,wr*=kr,Rr*=kr);var Dr=wr/Rr,Br=getAdjustedSizes({aspectRatio:Dr,width:hr.maxWidth||1/0,height:hr.maxHeight||1/0}),Hr=getAdjustedSizes({aspectRatio:Dr,width:hr.minWidth||0,height:hr.minHeight||0},"cover"),Gr=getAdjustedSizes({aspectRatio:Dr,width:hr.width||(kr!==1?vr.width:wr),height:hr.height||(kr!==1?vr.height:Rr)}),qr=Gr.width,zr=Gr.height;qr=Math.min(Br.width,Math.max(Hr.width,qr)),zr=Math.min(Br.height,Math.max(Hr.height,zr));var Qr=document.createElement("canvas"),sn=Qr.getContext("2d");Qr.width=normalizeDecimalNumber(qr),Qr.height=normalizeDecimalNumber(zr),sn.fillStyle=hr.fillColor||"transparent",sn.fillRect(0,0,qr,zr);var hn=hr.imageSmoothingEnabled,vn=hn===void 0?!0:hn,yn=hr.imageSmoothingQuality;sn.imageSmoothingEnabled=vn,yn&&(sn.imageSmoothingQuality=yn);var gn=vr.width,bn=vr.height,xn=Er,$n=Cr,Sn,Cn,Rn,Bn,Fn,Hn;xn<=-wr||xn>gn?(xn=0,Sn=0,Rn=0,Fn=0):xn<=0?(Rn=-xn,xn=0,Sn=Math.min(gn,wr+xn),Fn=Sn):xn<=gn&&(Rn=0,Sn=Math.min(wr,gn-xn),Fn=Sn),Sn<=0||$n<=-Rr||$n>bn?($n=0,Cn=0,Bn=0,Hn=0):$n<=0?(Bn=-$n,$n=0,Cn=Math.min(bn,Rr+$n),Hn=Cn):$n<=bn&&(Bn=0,Cn=Math.min(Rr,bn-$n),Hn=Cn);var Gn=[xn,$n,Sn,Cn];if(Fn>0&&Hn>0){var qn=qr/wr;Gn.push(Rn*qn,Bn*qn,Fn*qn,Hn*qn)}return sn.drawImage.apply(sn,[vr].concat(_toConsumableArray(Gn.map(function(On){return Math.floor(normalizeDecimalNumber(On))})))),Qr},setAspectRatio:function(hr){var gr=this.options;return!this.disabled&&!isUndefined(hr)&&(gr.aspectRatio=Math.max(0,hr)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(hr){var gr=this.options,vr=this.dragBox,xr=this.face;if(this.ready&&!this.disabled){var Er=hr===DRAG_MODE_CROP,Cr=gr.movable&&hr===DRAG_MODE_MOVE;hr=Er||Cr?hr:DRAG_MODE_NONE,gr.dragMode=hr,setData(vr,DATA_ACTION,hr),toggleClass(vr,CLASS_CROP,Er),toggleClass(vr,CLASS_MOVE,Cr),gr.cropBoxMovable||(setData(xr,DATA_ACTION,hr),toggleClass(xr,CLASS_CROP,Er),toggleClass(xr,CLASS_MOVE,Cr))}return this}},AnotherCropper=WINDOW.Cropper,Cropper=function(){function mr(hr){var gr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(_classCallCheck(this,mr),!hr||!REGEXP_TAG_NAME.test(hr.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=hr,this.options=assign({},DEFAULTS,isPlainObject(gr)&&gr),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return _createClass(mr,[{key:"init",value:function(){var gr=this.element,vr=gr.tagName.toLowerCase(),xr;if(!gr[NAMESPACE]){if(gr[NAMESPACE]=this,vr==="img"){if(this.isImg=!0,xr=gr.getAttribute("src")||"",this.originalUrl=xr,!xr)return;xr=gr.src}else vr==="canvas"&&window.HTMLCanvasElement&&(xr=gr.toDataURL());this.load(xr)}}},{key:"load",value:function(gr){var vr=this;if(gr){this.url=gr,this.imageData={};var xr=this.element,Er=this.options;if(!Er.rotatable&&!Er.scalable&&(Er.checkOrientation=!1),!Er.checkOrientation||!window.ArrayBuffer){this.clone();return}if(REGEXP_DATA_URL.test(gr)){REGEXP_DATA_URL_JPEG.test(gr)?this.read(dataURLToArrayBuffer(gr)):this.clone();return}var Cr=new XMLHttpRequest,wr=this.clone.bind(this);this.reloading=!0,this.xhr=Cr,Cr.onabort=wr,Cr.onerror=wr,Cr.ontimeout=wr,Cr.onprogress=function(){Cr.getResponseHeader("content-type")!==MIME_TYPE_JPEG&&Cr.abort()},Cr.onload=function(){vr.read(Cr.response)},Cr.onloadend=function(){vr.reloading=!1,vr.xhr=null},Er.checkCrossOrigin&&isCrossOriginURL(gr)&&xr.crossOrigin&&(gr=addTimestamp(gr)),Cr.open("GET",gr,!0),Cr.responseType="arraybuffer",Cr.withCredentials=xr.crossOrigin==="use-credentials",Cr.send()}}},{key:"read",value:function(gr){var vr=this.options,xr=this.imageData,Er=resetAndGetOrientation(gr),Cr=0,wr=1,Rr=1;if(Er>1){this.url=arrayBufferToDataURL(gr,MIME_TYPE_JPEG);var kr=parseOrientation(Er);Cr=kr.rotate,wr=kr.scaleX,Rr=kr.scaleY}vr.rotatable&&(xr.rotate=Cr),vr.scalable&&(xr.scaleX=wr,xr.scaleY=Rr),this.clone()}},{key:"clone",value:function(){var gr=this.element,vr=this.url,xr=gr.crossOrigin,Er=vr;this.options.checkCrossOrigin&&isCrossOriginURL(vr)&&(xr||(xr="anonymous"),Er=addTimestamp(vr)),this.crossOrigin=xr,this.crossOriginUrl=Er;var Cr=document.createElement("img");xr&&(Cr.crossOrigin=xr),Cr.src=Er||vr,Cr.alt=gr.alt||"The image to crop",this.image=Cr,Cr.onload=this.start.bind(this),Cr.onerror=this.stop.bind(this),addClass(Cr,CLASS_HIDE),gr.parentNode.insertBefore(Cr,gr.nextSibling)}},{key:"start",value:function(){var gr=this,vr=this.image;vr.onload=null,vr.onerror=null,this.sizing=!0;var xr=WINDOW.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(WINDOW.navigator.userAgent),Er=function(kr,Dr){assign(gr.imageData,{naturalWidth:kr,naturalHeight:Dr,aspectRatio:kr/Dr}),gr.initialImageData=assign({},gr.imageData),gr.sizing=!1,gr.sized=!0,gr.build()};if(vr.naturalWidth&&!xr){Er(vr.naturalWidth,vr.naturalHeight);return}var Cr=document.createElement("img"),wr=document.body||document.documentElement;this.sizingImage=Cr,Cr.onload=function(){Er(Cr.width,Cr.height),xr||wr.removeChild(Cr)},Cr.src=vr.src,xr||(Cr.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",wr.appendChild(Cr))}},{key:"stop",value:function(){var gr=this.image;gr.onload=null,gr.onerror=null,gr.parentNode.removeChild(gr),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var gr=this.element,vr=this.options,xr=this.image,Er=gr.parentNode,Cr=document.createElement("div");Cr.innerHTML=TEMPLATE;var wr=Cr.querySelector(".".concat(NAMESPACE,"-container")),Rr=wr.querySelector(".".concat(NAMESPACE,"-canvas")),kr=wr.querySelector(".".concat(NAMESPACE,"-drag-box")),Dr=wr.querySelector(".".concat(NAMESPACE,"-crop-box")),Br=Dr.querySelector(".".concat(NAMESPACE,"-face"));this.container=Er,this.cropper=wr,this.canvas=Rr,this.dragBox=kr,this.cropBox=Dr,this.viewBox=wr.querySelector(".".concat(NAMESPACE,"-view-box")),this.face=Br,Rr.appendChild(xr),addClass(gr,CLASS_HIDDEN),Er.insertBefore(wr,gr.nextSibling),removeClass(xr,CLASS_HIDE),this.initPreview(),this.bind(),vr.initialAspectRatio=Math.max(0,vr.initialAspectRatio)||NaN,vr.aspectRatio=Math.max(0,vr.aspectRatio)||NaN,vr.viewMode=Math.max(0,Math.min(3,Math.round(vr.viewMode)))||0,addClass(Dr,CLASS_HIDDEN),vr.guides||addClass(Dr.getElementsByClassName("".concat(NAMESPACE,"-dashed")),CLASS_HIDDEN),vr.center||addClass(Dr.getElementsByClassName("".concat(NAMESPACE,"-center")),CLASS_HIDDEN),vr.background&&addClass(wr,"".concat(NAMESPACE,"-bg")),vr.highlight||addClass(Br,CLASS_INVISIBLE),vr.cropBoxMovable&&(addClass(Br,CLASS_MOVE),setData(Br,DATA_ACTION,ACTION_ALL)),vr.cropBoxResizable||(addClass(Dr.getElementsByClassName("".concat(NAMESPACE,"-line")),CLASS_HIDDEN),addClass(Dr.getElementsByClassName("".concat(NAMESPACE,"-point")),CLASS_HIDDEN)),this.render(),this.ready=!0,this.setDragMode(vr.dragMode),vr.autoCrop&&this.crop(),this.setData(vr.data),isFunction(vr.ready)&&addListener(gr,EVENT_READY,vr.ready,{once:!0}),dispatchEvent(gr,EVENT_READY)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var gr=this.cropper.parentNode;gr&&gr.removeChild(this.cropper),removeClass(this.element,CLASS_HIDDEN)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=AnotherCropper,mr}},{key:"setDefaults",value:function(gr){assign(DEFAULTS,isPlainObject(gr)&&gr)}}]),mr}();assign(Cropper.prototype,render,preview,events,handlers,change,methods);var Kr=Object.create,_t$3=Object.defineProperty,Yr=Object.getOwnPropertyDescriptor,Xr=Object.getOwnPropertyNames,$r=Object.getPrototypeOf,Zr=Object.prototype.hasOwnProperty,ft$3=function(mr,hr){return function(){return mr&&(hr=mr(mr=0)),hr}},B$4=function(mr,hr){return function(){return hr||mr((hr={exports:{}}).exports,hr),hr.exports}},ea=function(mr,hr,gr,vr){if(hr&&typeof hr=="object"||typeof hr=="function")for(var xr=Xr(hr),Er=0,Cr=xr.length,wr;Er<Cr;Er++)wr=xr[Er],!Zr.call(mr,wr)&&wr!==gr&&_t$3(mr,wr,{get:(function(Rr){return hr[Rr]}).bind(null,wr),enumerable:!(vr=Yr(hr,wr))||vr.enumerable});return mr},G$2=function(mr,hr,gr){return gr=mr!=null?Kr($r(mr)):{},ea(!mr||!mr.__esModule?_t$3(gr,"default",{value:mr,enumerable:!0}):gr,mr)},J$3=B$4(function(mr,hr){var gr;typeof window<"u"?gr=window:typeof global<"u"?gr=global:typeof self<"u"?gr=self:gr={},hr.exports=gr});function U$3(mr,hr){return hr!=null&&typeof Symbol<"u"&&hr[Symbol.hasInstance]?!!hr[Symbol.hasInstance](mr):U$3(mr,hr)}var te$3=ft$3(function(){te$3()});function Ne$2(mr){"@swc/helpers - typeof";return mr&&typeof Symbol<"u"&&mr.constructor===Symbol?"symbol":typeof mr}var Je$2=ft$3(function(){}),Ye$2=B$4(function(mr,hr){var gr=Array.prototype.slice;hr.exports=vr;function vr(xr,Er){for(("length"in xr)||(xr=[xr]),xr=gr.call(xr);xr.length;){var Cr=xr.shift(),wr=Er(Cr);if(wr)return wr;Cr.childNodes&&Cr.childNodes.length&&(xr=gr.call(Cr.childNodes).concat(xr))}}}),yr=B$4(function(mr,hr){te$3(),hr.exports=gr;function gr(vr,xr){if(!U$3(this,gr))return new gr(vr,xr);this.data=vr,this.nodeValue=vr,this.length=vr.length,this.ownerDocument=xr||null}gr.prototype.nodeType=8,gr.prototype.nodeName="#comment",gr.prototype.toString=function(){return"[object Comment]"}}),br=B$4(function(mr,hr){te$3(),hr.exports=gr;function gr(vr,xr){if(!U$3(this,gr))return new gr(vr);this.data=vr||"",this.length=this.data.length,this.ownerDocument=xr||null}gr.prototype.type="DOMTextNode",gr.prototype.nodeType=3,gr.prototype.nodeName="#text",gr.prototype.toString=function(){return this.data},gr.prototype.replaceData=function(vr,xr,Er){var Cr=this.data,wr=Cr.substring(0,vr),Rr=Cr.substring(vr+xr,Cr.length);this.data=wr+Er+Rr,this.length=this.data.length}}),Xe$2=B$4(function(mr,hr){hr.exports=gr;function gr(vr){var xr=this,Er=vr.type;vr.target||(vr.target=xr),xr.listeners||(xr.listeners={});var Cr=xr.listeners[Er];if(Cr)return Cr.forEach(function(wr){vr.currentTarget=xr,typeof wr=="function"?wr(vr):wr.handleEvent(vr)});xr.parentNode&&xr.parentNode.dispatchEvent(vr)}}),$e$3=B$4(function(mr,hr){hr.exports=gr;function gr(vr,xr){var Er=this;Er.listeners||(Er.listeners={}),Er.listeners[vr]||(Er.listeners[vr]=[]),Er.listeners[vr].indexOf(xr)===-1&&Er.listeners[vr].push(xr)}}),Ze$2=B$4(function(mr,hr){hr.exports=gr;function gr(vr,xr){var Er=this;if(Er.listeners&&Er.listeners[vr]){var Cr=Er.listeners[vr],wr=Cr.indexOf(xr);wr!==-1&&Cr.splice(wr,1)}}}),Sr$1=B$4(function(mr,hr){Je$2(),hr.exports=vr;var gr=["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"];function vr(Hr){switch(Hr.nodeType){case 3:return Dr(Hr.data);case 8:return"<!--"+Hr.data+"-->";default:return xr(Hr)}}function xr(Hr){var Gr=[],qr=Hr.tagName;return Hr.namespaceURI==="http://www.w3.org/1999/xhtml"&&(qr=qr.toLowerCase()),Gr.push("<"+qr+kr(Hr)+wr(Hr)),gr.indexOf(qr)>-1?Gr.push(" />"):(Gr.push(">"),Hr.childNodes.length?Gr.push.apply(Gr,Hr.childNodes.map(vr)):Hr.textContent||Hr.innerText?Gr.push(Dr(Hr.textContent||Hr.innerText)):Hr.innerHTML&&Gr.push(Hr.innerHTML),Gr.push("</"+qr+">")),Gr.join("")}function Er(Hr,Gr){var qr=Ne$2(Hr[Gr]);return Gr==="style"&&Object.keys(Hr.style).length>0?!0:Hr.hasOwnProperty(Gr)&&(qr==="string"||qr==="boolean"||qr==="number")&&Gr!=="nodeName"&&Gr!=="className"&&Gr!=="tagName"&&Gr!=="textContent"&&Gr!=="innerText"&&Gr!=="namespaceURI"&&Gr!=="innerHTML"}function Cr(Hr){if(typeof Hr=="string")return Hr;var Gr="";return Object.keys(Hr).forEach(function(qr){var zr=Hr[qr];qr=qr.replace(/[A-Z]/g,function(Qr){return"-"+Qr.toLowerCase()}),Gr+=qr+":"+zr+";"}),Gr}function wr(Hr){var Gr=Hr.dataset,qr=[];for(var zr in Gr)qr.push({name:"data-"+zr,value:Gr[zr]});return qr.length?Rr(qr):""}function Rr(Hr){var Gr=[];return Hr.forEach(function(qr){var zr=qr.name,Qr=qr.value;zr==="style"&&(Qr=Cr(Qr)),Gr.push(zr+'="'+Br(Qr)+'"')}),Gr.length?" "+Gr.join(" "):""}function kr(Hr){var Gr=[];for(var qr in Hr)Er(Hr,qr)&&Gr.push({name:qr,value:Hr[qr]});for(var zr in Hr._attributes)for(var Qr in Hr._attributes[zr]){var sn=Hr._attributes[zr][Qr],hn=(sn.prefix?sn.prefix+":":"")+Qr;Gr.push({name:hn,value:sn.value})}return Hr.className&&Gr.push({name:"class",value:Hr.className}),Gr.length?Rr(Gr):""}function Dr(Hr){var Gr="";return typeof Hr=="string"?Gr=Hr:Hr&&(Gr=Hr.toString()),Gr.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Br(Hr){return Dr(Hr).replace(/"/g,"&quot;")}}),rt$2=B$4(function(mr,hr){te$3();var gr=Ye$2(),vr=Xe$2(),xr=$e$3(),Er=Ze$2(),Cr=Sr$1(),wr="http://www.w3.org/1999/xhtml";hr.exports=Rr;function Rr(kr,Dr,Br){if(!U$3(this,Rr))return new Rr(kr);var Hr=Br===void 0?wr:Br||null;this.tagName=Hr===wr?String(kr).toUpperCase():kr,this.nodeName=this.tagName,this.className="",this.dataset={},this.childNodes=[],this.parentNode=null,this.style={},this.ownerDocument=Dr||null,this.namespaceURI=Hr,this._attributes={},this.tagName==="INPUT"&&(this.type="text")}Rr.prototype.type="DOMElement",Rr.prototype.nodeType=1,Rr.prototype.appendChild=function(kr){return kr.parentNode&&kr.parentNode.removeChild(kr),this.childNodes.push(kr),kr.parentNode=this,kr},Rr.prototype.replaceChild=function(kr,Dr){kr.parentNode&&kr.parentNode.removeChild(kr);var Br=this.childNodes.indexOf(Dr);return Dr.parentNode=null,this.childNodes[Br]=kr,kr.parentNode=this,Dr},Rr.prototype.removeChild=function(kr){var Dr=this.childNodes.indexOf(kr);return this.childNodes.splice(Dr,1),kr.parentNode=null,kr},Rr.prototype.insertBefore=function(kr,Dr){kr.parentNode&&kr.parentNode.removeChild(kr);var Br=Dr==null?-1:this.childNodes.indexOf(Dr);return Br>-1?this.childNodes.splice(Br,0,kr):this.childNodes.push(kr),kr.parentNode=this,kr},Rr.prototype.setAttributeNS=function(kr,Dr,Br){var Hr=null,Gr=Dr,qr=Dr.indexOf(":");if(qr>-1&&(Hr=Dr.substr(0,qr),Gr=Dr.substr(qr+1)),this.tagName==="INPUT"&&Dr==="type")this.type=Br;else{var zr=this._attributes[kr]||(this._attributes[kr]={});zr[Gr]={value:Br,prefix:Hr}}},Rr.prototype.getAttributeNS=function(kr,Dr){var Br=this._attributes[kr],Hr=Br&&Br[Dr]&&Br[Dr].value;return this.tagName==="INPUT"&&Dr==="type"?this.type:typeof Hr!="string"?null:Hr},Rr.prototype.removeAttributeNS=function(kr,Dr){var Br=this._attributes[kr];Br&&delete Br[Dr]},Rr.prototype.hasAttributeNS=function(kr,Dr){var Br=this._attributes[kr];return!!Br&&Dr in Br},Rr.prototype.setAttribute=function(kr,Dr){return this.setAttributeNS(null,kr,Dr)},Rr.prototype.getAttribute=function(kr){return this.getAttributeNS(null,kr)},Rr.prototype.removeAttribute=function(kr){return this.removeAttributeNS(null,kr)},Rr.prototype.hasAttribute=function(kr){return this.hasAttributeNS(null,kr)},Rr.prototype.removeEventListener=Er,Rr.prototype.addEventListener=xr,Rr.prototype.dispatchEvent=vr,Rr.prototype.focus=function(){},Rr.prototype.toString=function(){return Cr(this)},Rr.prototype.getElementsByClassName=function(kr){var Dr=kr.split(" "),Br=[];return gr(this,function(Hr){if(Hr.nodeType===1){var Gr=Hr.className||"",qr=Gr.split(" ");Dr.every(function(zr){return qr.indexOf(zr)!==-1})&&Br.push(Hr)}}),Br},Rr.prototype.getElementsByTagName=function(kr){kr=kr.toLowerCase();var Dr=[];return gr(this.childNodes,function(Br){Br.nodeType===1&&(kr==="*"||Br.tagName.toLowerCase()===kr)&&Dr.push(Br)}),Dr},Rr.prototype.contains=function(kr){return gr(this,function(Dr){return kr===Dr})||!1}}),Or=B$4(function(mr,hr){te$3();var gr=rt$2();hr.exports=vr;function vr(xr){if(!U$3(this,vr))return new vr;this.childNodes=[],this.parentNode=null,this.ownerDocument=xr||null}vr.prototype.type="DocumentFragment",vr.prototype.nodeType=11,vr.prototype.nodeName="#document-fragment",vr.prototype.appendChild=gr.prototype.appendChild,vr.prototype.replaceChild=gr.prototype.replaceChild,vr.prototype.removeChild=gr.prototype.removeChild,vr.prototype.toString=function(){return this.childNodes.map(function(xr){return String(xr)}).join("")}}),Pr=B$4(function(mr,hr){hr.exports=gr;function gr(vr){}gr.prototype.initEvent=function(vr,xr,Er){this.type=vr,this.bubbles=xr,this.cancelable=Er},gr.prototype.preventDefault=function(){}}),Lr$1=B$4(function(mr,hr){te$3();var gr=Ye$2(),vr=yr(),xr=br(),Er=rt$2(),Cr=Or(),wr=Pr(),Rr=Xe$2(),kr=$e$3(),Dr=Ze$2();hr.exports=Br;function Br(){if(!U$3(this,Br))return new Br;this.head=this.createElement("head"),this.body=this.createElement("body"),this.documentElement=this.createElement("html"),this.documentElement.appendChild(this.head),this.documentElement.appendChild(this.body),this.childNodes=[this.documentElement],this.nodeType=9}var Hr=Br.prototype;Hr.createTextNode=function(Gr){return new xr(Gr,this)},Hr.createElementNS=function(Gr,qr){var zr=Gr===null?null:String(Gr);return new Er(qr,this,zr)},Hr.createElement=function(Gr){return new Er(Gr,this)},Hr.createDocumentFragment=function(){return new Cr(this)},Hr.createEvent=function(Gr){return new wr(Gr)},Hr.createComment=function(Gr){return new vr(Gr,this)},Hr.getElementById=function(Gr){Gr=String(Gr);var qr=gr(this.childNodes,function(zr){if(String(zr.id)===Gr)return zr});return qr||null},Hr.getElementsByClassName=Er.prototype.getElementsByClassName,Hr.getElementsByTagName=Er.prototype.getElementsByTagName,Hr.contains=Er.prototype.contains,Hr.removeEventListener=Dr,Hr.addEventListener=kr,Hr.dispatchEvent=Rr}),Mr=B$4(function(mr,hr){var gr=Lr$1();hr.exports=new gr}),Ur=B$4(function(mr,hr){var gr=typeof global<"u"?global:typeof window<"u"?window:{},vr=Mr(),xr;typeof document<"u"?xr=document:(xr=gr["__GLOBAL_DOCUMENT_CACHE@4"],xr||(xr=gr["__GLOBAL_DOCUMENT_CACHE@4"]=vr)),hr.exports=xr});function pt$2(mr){if(Array.isArray(mr))return mr}function vt$3(mr,hr){var gr=mr==null?null:typeof Symbol<"u"&&mr[Symbol.iterator]||mr["@@iterator"];if(gr!=null){var vr=[],xr=!0,Er=!1,Cr,wr;try{for(gr=gr.call(mr);!(xr=(Cr=gr.next()).done)&&(vr.push(Cr.value),!(hr&&vr.length===hr));xr=!0);}catch(Rr){Er=!0,wr=Rr}finally{try{!xr&&gr.return!=null&&gr.return()}finally{if(Er)throw wr}}return vr}}function mt$2(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ke$3(mr,hr){(hr==null||hr>mr.length)&&(hr=mr.length);for(var gr=0,vr=new Array(hr);gr<hr;gr++)vr[gr]=mr[gr];return vr}function Ae$3(mr,hr){if(mr){if(typeof mr=="string")return ke$3(mr,hr);var gr=Object.prototype.toString.call(mr).slice(8,-1);if(gr==="Object"&&mr.constructor&&(gr=mr.constructor.name),gr==="Map"||gr==="Set")return Array.from(gr);if(gr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(gr))return ke$3(mr,hr)}}function H$3(mr,hr){return pt$2(mr)||vt$3(mr,hr)||Ae$3(mr,hr)||mt$2()}var be$1=G$2(J$3()),Ge$2=G$2(J$3()),yt$2=G$2(J$3()),ta$1={now:function(){var mr=yt$2.default.performance,hr=mr&&mr.timing,gr=hr&&hr.navigationStart,vr=typeof gr=="number"&&typeof mr.now=="function"?gr+mr.now():Date.now();return Math.round(vr)}},A$2=ta$1,ee$4=function(){var mr,hr,gr;if(typeof((mr=Ge$2.default.crypto)===null||mr===void 0?void 0:mr.getRandomValues)=="function"){gr=new Uint8Array(32),Ge$2.default.crypto.getRandomValues(gr);for(var vr=0;vr<32;vr++)gr[vr]=gr[vr]%16}else{gr=[];for(var xr=0;xr<32;xr++)gr[xr]=Math.random()*16|0}var Er=0;hr="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(Rr){var kr=Rr==="x"?gr[Er]:gr[Er]&3|8;return Er++,kr.toString(16)});var Cr=A$2.now(),wr=Cr?.toString(16).substring(3);return wr?hr.substring(0,28)+wr:hr},Oe$3=function(){return("000000"+(Math.random()*Math.pow(36,6)<<0).toString(36)).slice(-6)},Q$4=function(mr){if(mr&&typeof mr.nodeName<"u")return mr.muxId||(mr.muxId=Oe$3()),mr.muxId;var hr;try{hr=document.querySelector(mr)}catch{}return hr&&!hr.muxId&&(hr.muxId=mr),hr?.muxId||mr},se$3=function(mr){var hr;mr&&typeof mr.nodeName<"u"?(hr=mr,mr=Q$4(hr)):hr=document.querySelector(mr);var gr=hr&&hr.nodeName?hr.nodeName.toLowerCase():"";return[hr,mr,gr]};function gt$2(mr){if(Array.isArray(mr))return ke$3(mr)}function bt$3(mr){if(typeof Symbol<"u"&&mr[Symbol.iterator]!=null||mr["@@iterator"]!=null)return Array.from(mr)}function Tt$3(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function V$3(mr){return gt$2(mr)||bt$3(mr)||Ae$3(mr)||Tt$3()}var Y$2={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},wt$1=function(mr){var hr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3,gr,vr,xr,Er,Cr,wr=[console,mr],Rr=(gr=console.trace).bind.apply(gr,V$3(wr)),kr=(vr=console.info).bind.apply(vr,V$3(wr)),Dr=(xr=console.debug).bind.apply(xr,V$3(wr)),Br=(Er=console.warn).bind.apply(Er,V$3(wr)),Hr=(Cr=console.error).bind.apply(Cr,V$3(wr)),Gr=hr;return{trace:function(){for(var qr=arguments.length,zr=new Array(qr),Qr=0;Qr<qr;Qr++)zr[Qr]=arguments[Qr];if(!(Gr>Y$2.TRACE))return Rr.apply(void 0,V$3(zr))},debug:function(){for(var qr=arguments.length,zr=new Array(qr),Qr=0;Qr<qr;Qr++)zr[Qr]=arguments[Qr];if(!(Gr>Y$2.DEBUG))return Dr.apply(void 0,V$3(zr))},info:function(){for(var qr=arguments.length,zr=new Array(qr),Qr=0;Qr<qr;Qr++)zr[Qr]=arguments[Qr];if(!(Gr>Y$2.INFO))return kr.apply(void 0,V$3(zr))},warn:function(){for(var qr=arguments.length,zr=new Array(qr),Qr=0;Qr<qr;Qr++)zr[Qr]=arguments[Qr];if(!(Gr>Y$2.WARN))return Br.apply(void 0,V$3(zr))},error:function(){for(var qr=arguments.length,zr=new Array(qr),Qr=0;Qr<qr;Qr++)zr[Qr]=arguments[Qr];if(!(Gr>Y$2.ERROR))return Hr.apply(void 0,V$3(zr))},get level(){return Gr},set level(qr){qr!==this.level&&(Gr=qr??hr)}}},q$2=wt$1("[mux]"),Ie$3=G$2(J$3());function ce$2(){var mr=Ie$3.default.doNotTrack||Ie$3.default.navigator&&Ie$3.default.navigator.doNotTrack;return mr==="1"}function g(mr){if(mr===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return mr}te$3();function D$2(mr,hr){if(!U$3(mr,hr))throw new TypeError("Cannot call a class as a function")}function Et$3(mr,hr){for(var gr=0;gr<hr.length;gr++){var vr=hr[gr];vr.enumerable=vr.enumerable||!1,vr.configurable=!0,"value"in vr&&(vr.writable=!0),Object.defineProperty(mr,vr.key,vr)}}function L(mr,hr,gr){return hr&&Et$3(mr.prototype,hr),mr}function l(mr,hr,gr){return hr in mr?Object.defineProperty(mr,hr,{value:gr,enumerable:!0,configurable:!0,writable:!0}):mr[hr]=gr,mr}function X$4(mr){return X$4=Object.setPrototypeOf?Object.getPrototypeOf:function(hr){return hr.__proto__||Object.getPrototypeOf(hr)},X$4(mr)}function kt$3(mr,hr){for(;!Object.prototype.hasOwnProperty.call(mr,hr)&&(mr=X$4(mr),mr!==null););return mr}function De$2(mr,hr,gr){return typeof Reflect<"u"&&Reflect.get?De$2=Reflect.get:De$2=function(vr,xr,Er){var Cr=kt$3(vr,xr);if(Cr){var wr=Object.getOwnPropertyDescriptor(Cr,xr);return wr.get?wr.get.call(Er||vr):wr.value}},De$2(mr,hr,gr||mr)}function Pe$3(mr,hr){return Pe$3=Object.setPrototypeOf||function(gr,vr){return gr.__proto__=vr,gr},Pe$3(mr,hr)}function xt$3(mr,hr){if(typeof hr!="function"&&hr!==null)throw new TypeError("Super expression must either be null or a function");mr.prototype=Object.create(hr&&hr.prototype,{constructor:{value:mr,writable:!0,configurable:!0}}),hr&&Pe$3(mr,hr)}function Dt$3(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}Je$2();function St$2(mr,hr){return hr&&(Ne$2(hr)==="object"||typeof hr=="function")?hr:g(mr)}function Rt$3(mr){var hr=Dt$3();return function(){var gr=X$4(mr),vr;if(hr){var xr=X$4(this).constructor;vr=Reflect.construct(gr,arguments,xr)}else vr=gr.apply(this,arguments);return St$2(this,vr)}}var F$2=function(mr){return re$4(mr)[0]},re$4=function(mr){if(typeof mr!="string"||mr==="")return["localhost"];var hr=/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,gr=mr.match(hr)||[],vr=gr[4],xr;return vr&&(xr=(vr.match(/[^\.]+\.[^\.]+$/)||[])[0]),[vr,xr]},Le$2=G$2(J$3()),ra={exists:function(){var mr=Le$2.default.performance,hr=mr&&mr.timing;return hr!==void 0},domContentLoadedEventEnd:function(){var mr=Le$2.default.performance,hr=mr&&mr.timing;return hr&&hr.domContentLoadedEventEnd},navigationStart:function(){var mr=Le$2.default.performance,hr=mr&&mr.timing;return hr&&hr.navigationStart}},_e$3=ra;function O$1(mr,hr,gr){gr=gr===void 0?1:gr,mr[hr]=mr[hr]||0,mr[hr]+=gr}function ue$3(mr){for(var hr=1;hr<arguments.length;hr++){var gr=arguments[hr]!=null?arguments[hr]:{},vr=Object.keys(gr);typeof Object.getOwnPropertySymbols=="function"&&(vr=vr.concat(Object.getOwnPropertySymbols(gr).filter(function(xr){return Object.getOwnPropertyDescriptor(gr,xr).enumerable}))),vr.forEach(function(xr){l(mr,xr,gr[xr])})}return mr}function aa$1(mr,hr){var gr=Object.keys(mr);if(Object.getOwnPropertySymbols){var vr=Object.getOwnPropertySymbols(mr);gr.push.apply(gr,vr)}return gr}function fe$2(mr,hr){return hr=hr??{},Object.getOwnPropertyDescriptors?Object.defineProperties(mr,Object.getOwnPropertyDescriptors(hr)):aa$1(Object(hr)).forEach(function(gr){Object.defineProperty(mr,gr,Object.getOwnPropertyDescriptor(hr,gr))}),mr}var ia$1=["x-cdn","content-type"],qt$2=["x-request-id","cf-ray","x-amz-cf-id","x-akamai-request-id"],na=ia$1.concat(qt$2);function pe$4(mr){mr=mr||"";var hr={},gr=mr.trim().split(/[\r\n]+/);return gr.forEach(function(vr){if(vr){var xr=vr.split(": "),Er=xr.shift();Er&&(na.indexOf(Er.toLowerCase())>=0||Er.toLowerCase().indexOf("x-litix-")===0)&&(hr[Er]=xr.join(": "))}}),hr}function de$3(mr){if(mr){var hr=qt$2.find(function(gr){return mr[gr]!==void 0});return hr?mr[hr]:void 0}}var oa$1=function(mr){var hr={};for(var gr in mr){var vr=mr[gr],xr=vr["DATA-ID"].search("io.litix.data.");if(xr!==-1){var Er=vr["DATA-ID"].replace("io.litix.data.","");hr[Er]=vr.VALUE}}return hr},Ce$3=oa$1,Me$3=function(mr){if(!mr)return{};var hr=_e$3.navigationStart(),gr=mr.loading,vr=gr?gr.start:mr.trequest,xr=gr?gr.first:mr.tfirst,Er=gr?gr.end:mr.tload;return{bytesLoaded:mr.total,requestStart:Math.round(hr+vr),responseStart:Math.round(hr+xr),responseEnd:Math.round(hr+Er)}},Se$3=function(mr){if(!(!mr||typeof mr.getAllResponseHeaders!="function"))return pe$4(mr.getAllResponseHeaders())},At$3=function(mr,hr,gr){var vr=arguments.length>4?arguments[4]:void 0,xr=mr.log,Er=mr.utils.secondsToMs,Cr=function(Qr){var sn=parseInt(vr.version),hn;return sn===1&&Qr.programDateTime!==null&&(hn=Qr.programDateTime),sn===0&&Qr.pdt!==null&&(hn=Qr.pdt),hn};if(!_e$3.exists()){xr.warn("performance timing not supported. Not tracking HLS.js.");return}var wr=function(Qr,sn){return mr.emit(hr,Qr,sn)},Rr=function(Qr,sn){var hn=sn.levels,vn=sn.audioTracks,yn=sn.url,gn=sn.stats,bn=sn.networkDetails,xn=sn.sessionData,$n={},Sn={};hn.forEach(function(Gn,qn){$n[qn]={width:Gn.width,height:Gn.height,bitrate:Gn.bitrate,attrs:Gn.attrs}}),vn.forEach(function(Gn,qn){Sn[qn]={name:Gn.name,language:Gn.lang,bitrate:Gn.bitrate}});var Cn=Me$3(gn),Rn=Cn.bytesLoaded,Bn=Cn.requestStart,Fn=Cn.responseStart,Hn=Cn.responseEnd;wr("requestcompleted",fe$2(ue$3({},Ce$3(xn)),{request_event_type:Qr,request_bytes_loaded:Rn,request_start:Bn,request_response_start:Fn,request_response_end:Hn,request_type:"manifest",request_hostname:F$2(yn),request_response_headers:Se$3(bn),request_rendition_lists:{media:$n,audio:Sn,video:{}}}))};gr.on(vr.Events.MANIFEST_LOADED,Rr);var kr=function(Qr,sn){var hn=sn.details,vn=sn.level,yn=sn.networkDetails,gn=sn.stats,bn=Me$3(gn),xn=bn.bytesLoaded,$n=bn.requestStart,Sn=bn.responseStart,Cn=bn.responseEnd,Rn=hn.fragments[hn.fragments.length-1],Bn=Cr(Rn)+Er(Rn.duration);wr("requestcompleted",{request_event_type:Qr,request_bytes_loaded:xn,request_start:$n,request_response_start:Sn,request_response_end:Cn,request_current_level:vn,request_type:"manifest",request_hostname:F$2(hn.url),request_response_headers:Se$3(yn),video_holdback:hn.holdBack&&Er(hn.holdBack),video_part_holdback:hn.partHoldBack&&Er(hn.partHoldBack),video_part_target_duration:hn.partTarget&&Er(hn.partTarget),video_target_duration:hn.targetduration&&Er(hn.targetduration),video_source_is_live:hn.live,player_manifest_newest_program_time:isNaN(Bn)?void 0:Bn})};gr.on(vr.Events.LEVEL_LOADED,kr);var Dr=function(Qr,sn){var hn=sn.details,vn=sn.networkDetails,yn=sn.stats,gn=Me$3(yn),bn=gn.bytesLoaded,xn=gn.requestStart,$n=gn.responseStart,Sn=gn.responseEnd;wr("requestcompleted",{request_event_type:Qr,request_bytes_loaded:bn,request_start:xn,request_response_start:$n,request_response_end:Sn,request_type:"manifest",request_hostname:F$2(hn.url),request_response_headers:Se$3(vn)})};gr.on(vr.Events.AUDIO_TRACK_LOADED,Dr);var Br=function(Qr,sn){var hn=sn.stats,vn=sn.networkDetails,yn=sn.frag;hn=hn||yn.stats;var gn=Me$3(hn),bn=gn.bytesLoaded,xn=gn.requestStart,$n=gn.responseStart,Sn=gn.responseEnd,Cn=vn?Se$3(vn):void 0,Rn={request_event_type:Qr,request_bytes_loaded:bn,request_start:xn,request_response_start:$n,request_response_end:Sn,request_hostname:vn?F$2(vn.responseURL):void 0,request_id:Cn?de$3(Cn):void 0,request_response_headers:Cn,request_media_duration:yn.duration,request_url:vn?.responseURL};yn.type==="main"?(Rn.request_type="media",Rn.request_current_level=yn.level,Rn.request_video_width=(gr.levels[yn.level]||{}).width,Rn.request_video_height=(gr.levels[yn.level]||{}).height,Rn.request_labeled_bitrate=(gr.levels[yn.level]||{}).bitrate):Rn.request_type=yn.type,wr("requestcompleted",Rn)};gr.on(vr.Events.FRAG_LOADED,Br);var Hr=function(Qr,sn){var hn=sn.frag,vn=hn.start,yn=Cr(hn),gn={currentFragmentPDT:yn,currentFragmentStart:Er(vn)};wr("fragmentchange",gn)};gr.on(vr.Events.FRAG_CHANGED,Hr);var Gr=function(Qr,sn){var hn=sn.type,vn=sn.details,yn=sn.response,gn=sn.fatal,bn=sn.frag,xn=sn.networkDetails,$n=bn?.url||sn.url||"",Sn=xn?Se$3(xn):void 0;if((vn===vr.ErrorDetails.MANIFEST_LOAD_ERROR||vn===vr.ErrorDetails.MANIFEST_LOAD_TIMEOUT||vn===vr.ErrorDetails.FRAG_LOAD_ERROR||vn===vr.ErrorDetails.FRAG_LOAD_TIMEOUT||vn===vr.ErrorDetails.LEVEL_LOAD_ERROR||vn===vr.ErrorDetails.LEVEL_LOAD_TIMEOUT||vn===vr.ErrorDetails.AUDIO_TRACK_LOAD_ERROR||vn===vr.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT||vn===vr.ErrorDetails.SUBTITLE_LOAD_ERROR||vn===vr.ErrorDetails.SUBTITLE_LOAD_TIMEOUT||vn===vr.ErrorDetails.KEY_LOAD_ERROR||vn===vr.ErrorDetails.KEY_LOAD_TIMEOUT)&&wr("requestfailed",{request_error:vn,request_url:$n,request_hostname:F$2($n),request_id:Sn?de$3(Sn):void 0,request_type:vn===vr.ErrorDetails.FRAG_LOAD_ERROR||vn===vr.ErrorDetails.FRAG_LOAD_TIMEOUT?"media":vn===vr.ErrorDetails.AUDIO_TRACK_LOAD_ERROR||vn===vr.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT?"audio":vn===vr.ErrorDetails.SUBTITLE_LOAD_ERROR||vn===vr.ErrorDetails.SUBTITLE_LOAD_TIMEOUT?"subtitle":vn===vr.ErrorDetails.KEY_LOAD_ERROR||vn===vr.ErrorDetails.KEY_LOAD_TIMEOUT?"encryption":"manifest",request_error_code:yn?.code,request_error_text:yn?.text}),gn){var Cn,Rn="".concat($n?"url: ".concat($n,`
`):"")+"".concat(yn&&(yn.code||yn.text)?"response: ".concat(yn.code,", ").concat(yn.text,`
`):"")+"".concat(sn.reason?"failure reason: ".concat(sn.reason,`
`):"")+"".concat(sn.level?"level: ".concat(sn.level,`
`):"")+"".concat(sn.parent?"parent stream controller: ".concat(sn.parent,`
`):"")+"".concat(sn.buffer?"buffer length: ".concat(sn.buffer,`
`):"")+"".concat(sn.error?"error: ".concat(sn.error,`
`):"")+"".concat(sn.event?"event: ".concat(sn.event,`
`):"")+"".concat(sn.err?"error message: ".concat((Cn=sn.err)===null||Cn===void 0?void 0:Cn.message,`
`):"");wr("error",{player_error_code:hn,player_error_message:vn,player_error_context:Rn})}};gr.on(vr.Events.ERROR,Gr);var qr=function(Qr,sn){var hn=sn.frag,vn=hn&&hn._url||"";wr("requestcanceled",{request_event_type:Qr,request_url:vn,request_type:"media",request_hostname:F$2(vn)})};gr.on(vr.Events.FRAG_LOAD_EMERGENCY_ABORTED,qr);var zr=function(Qr,sn){var hn=sn.level,vn=gr.levels[hn];if(vn&&vn.attrs&&vn.attrs.BANDWIDTH){var yn=vn.attrs.BANDWIDTH,gn,bn=parseFloat(vn.attrs["FRAME-RATE"]);isNaN(bn)||(gn=bn),yn?wr("renditionchange",{video_source_fps:gn,video_source_bitrate:yn,video_source_width:vn.width,video_source_height:vn.height,video_source_rendition_name:vn.name,video_source_codec:vn?.videoCodec}):xr.warn("missing BANDWIDTH from HLS manifest parsed by HLS.js")}};gr.on(vr.Events.LEVEL_SWITCHED,zr),gr._stopMuxMonitor=function(){gr.off(vr.Events.MANIFEST_LOADED,Rr),gr.off(vr.Events.LEVEL_LOADED,kr),gr.off(vr.Events.AUDIO_TRACK_LOADED,Dr),gr.off(vr.Events.FRAG_LOADED,Br),gr.off(vr.Events.FRAG_CHANGED,Hr),gr.off(vr.Events.ERROR,Gr),gr.off(vr.Events.FRAG_LOAD_EMERGENCY_ABORTED,qr),gr.off(vr.Events.LEVEL_SWITCHED,zr),gr.off(vr.Events.DESTROYING,gr._stopMuxMonitor),delete gr._stopMuxMonitor},gr.on(vr.Events.DESTROYING,gr._stopMuxMonitor)},Ot$2=function(mr){mr&&typeof mr._stopMuxMonitor=="function"&&mr._stopMuxMonitor()},It$3=function(mr,hr){if(!mr||!mr.requestEndDate)return{};var gr=F$2(mr.url),vr=mr.url,xr=mr.bytesLoaded,Er=new Date(mr.requestStartDate).getTime(),Cr=new Date(mr.firstByteDate).getTime(),wr=new Date(mr.requestEndDate).getTime(),Rr=isNaN(mr.duration)?0:mr.duration,kr=typeof hr.getMetricsFor=="function"?hr.getMetricsFor(mr.mediaType).HttpList:hr.getDashMetrics().getHttpRequests(mr.mediaType),Dr;kr.length>0&&(Dr=pe$4(kr[kr.length-1]._responseHeaders||""));var Br=Dr?de$3(Dr):void 0;return{requestStart:Er,requestResponseStart:Cr,requestResponseEnd:wr,requestBytesLoaded:xr,requestResponseHeaders:Dr,requestMediaDuration:Rr,requestHostname:gr,requestUrl:vr,requestId:Br}},sa$1=function(mr,hr){var gr=hr.getQualityFor(mr),vr=hr.getCurrentTrackFor(mr).bitrateList;return vr?{currentLevel:gr,renditionWidth:vr[gr].width||null,renditionHeight:vr[gr].height||null,renditionBitrate:vr[gr].bandwidth}:{}},ua$1=function(mr){var hr;return(hr=mr.match(/.*codecs\*?="(.*)"/))===null||hr===void 0?void 0:hr[1]},da$1=function(mr){try{var hr,gr,vr=(gr=mr.getVersion)===null||gr===void 0||(hr=gr.call(mr))===null||hr===void 0?void 0:hr.split(".").map(function(xr){return parseInt(xr)})[0];return vr}catch{return!1}},Pt$3=function(mr,hr,gr){var vr=mr.log;if(!gr||!gr.on){vr.warn("Invalid dash.js player reference. Monitoring blocked.");return}var xr=da$1(gr),Er=function(hn,vn){return mr.emit(hr,hn,vn)},Cr=function(hn){var vn=hn.type,yn=hn.data,gn=(yn||{}).url;Er("requestcompleted",{request_event_type:vn,request_start:0,request_response_start:0,request_response_end:0,request_bytes_loaded:-1,request_type:"manifest",request_hostname:F$2(gn),request_url:gn})};gr.on("manifestLoaded",Cr);var wr={},Rr=function(hn){if(typeof hn.getRequests!="function")return null;var vn=hn.getRequests({state:"executed"});return vn.length===0?null:vn[vn.length-1]},kr=function(hn){var vn=hn.type,yn=hn.fragmentModel,gn=hn.chunk,bn=Rr(yn);Dr({type:vn,request:bn,chunk:gn})},Dr=function(hn){var vn=hn.type,yn=hn.chunk,gn=hn.request,bn=(yn||{}).mediaInfo,xn=bn||{},$n=xn.type,Sn=xn.bitrateList;Sn=Sn||[];var Cn={};Sn.forEach(function(Tn,Mn){Cn[Mn]={},Cn[Mn].width=Tn.width,Cn[Mn].height=Tn.height,Cn[Mn].bitrate=Tn.bandwidth,Cn[Mn].attrs={}}),$n==="video"?wr.video=Cn:$n==="audio"?wr.audio=Cn:wr.media=Cn;var Rn=It$3(gn,gr),Bn=Rn.requestStart,Fn=Rn.requestResponseStart,Hn=Rn.requestResponseEnd,Gn=Rn.requestResponseHeaders,qn=Rn.requestMediaDuration,On=Rn.requestHostname,wn=Rn.requestUrl,_n=Rn.requestId;Er("requestcompleted",{request_event_type:vn,request_start:Bn,request_response_start:Fn,request_response_end:Hn,request_bytes_loaded:-1,request_type:$n+"_init",request_response_headers:Gn,request_hostname:On,request_id:_n,request_url:wn,request_media_duration:qn,request_rendition_lists:wr})};xr>=4?gr.on("initFragmentLoaded",Dr):gr.on("initFragmentLoaded",kr);var Br=function(hn){var vn=hn.type,yn=hn.fragmentModel,gn=hn.chunk,bn=Rr(yn);Hr({type:vn,request:bn,chunk:gn})},Hr=function(hn){var vn=hn.type,yn=hn.chunk,gn=hn.request,bn=yn||{},xn=bn.mediaInfo,$n=bn.start,Sn=xn||{},Cn=Sn.type,Rn=It$3(gn,gr),Bn=Rn.requestStart,Fn=Rn.requestResponseStart,Hn=Rn.requestResponseEnd,Gn=Rn.requestBytesLoaded,qn=Rn.requestResponseHeaders,On=Rn.requestMediaDuration,wn=Rn.requestHostname,_n=Rn.requestUrl,Tn=Rn.requestId,Mn=sa$1(Cn,gr),Ln=Mn.currentLevel,jn=Mn.renditionWidth,Kn=Mn.renditionHeight,Nn=Mn.renditionBitrate;Er("requestcompleted",{request_event_type:vn,request_start:Bn,request_response_start:Fn,request_response_end:Hn,request_bytes_loaded:Gn,request_type:Cn,request_response_headers:qn,request_hostname:wn,request_id:Tn,request_url:_n,request_media_start_time:$n,request_media_duration:On,request_current_level:Ln,request_labeled_bitrate:Nn,request_video_width:jn,request_video_height:Kn})};xr>=4?gr.on("mediaFragmentLoaded",Hr):gr.on("mediaFragmentLoaded",Br);var Gr={video:void 0,audio:void 0,totalBitrate:void 0},qr=function(){if(Gr.video&&typeof Gr.video.bitrate=="number"){if(!(Gr.video.width&&Gr.video.height)){vr.warn("have bitrate info for video but missing width/height");return}var hn=Gr.video.bitrate;if(Gr.audio&&typeof Gr.audio.bitrate=="number"&&(hn+=Gr.audio.bitrate),hn!==Gr.totalBitrate)return Gr.totalBitrate=hn,{video_source_bitrate:hn,video_source_height:Gr.video.height,video_source_width:Gr.video.width,video_source_codec:ua$1(Gr.video.codec)}}},zr=function(hn,vn,yn){if(typeof hn.newQuality!="number"){vr.warn("missing evt.newQuality in qualityChangeRendered event",hn);return}var gn=hn.mediaType;if(gn==="audio"||gn==="video"){var bn=gr.getBitrateInfoListFor(gn).find(function($n){var Sn=$n.qualityIndex;return Sn===hn.newQuality});if(!(bn&&typeof bn.bitrate=="number")){vr.warn("missing bitrate info for ".concat(gn));return}Gr[gn]=fe$2(ue$3({},bn),{codec:gr.getCurrentTrackFor(gn).codec});var xn=qr();xn&&Er("renditionchange",xn)}};gr.on("qualityChangeRendered",zr);var Qr=function(hn){var vn=hn.request,yn=hn.mediaType;vn=vn||{},Er("requestcanceled",{request_event_type:vn.type+"_"+vn.action,request_url:vn.url,request_type:yn,request_hostname:F$2(vn.url)})};gr.on("fragmentLoadingAbandoned",Qr);var sn=function(hn){var vn=hn.error,yn,gn,bn=(vn==null||(yn=vn.data)===null||yn===void 0?void 0:yn.request)||{},xn=(vn==null||(gn=vn.data)===null||gn===void 0?void 0:gn.response)||{};vn?.code===27&&Er("requestfailed",{request_error:bn.type+"_"+bn.action,request_url:bn.url,request_hostname:F$2(bn.url),request_type:bn.mediaType,request_error_code:xn.status,request_error_text:xn.statusText});var $n="".concat(bn!=null&&bn.url?"url: ".concat(bn.url,`
`):"")+"".concat(xn!=null&&xn.status||xn!=null&&xn.statusText?"response: ".concat(xn?.status,", ").concat(xn?.statusText,`
`):"");Er("error",{player_error_code:vn?.code,player_error_message:vn?.message,player_error_context:$n})};gr.on("error",sn),gr._stopMuxMonitor=function(){gr.off("manifestLoaded",Cr),gr.off("initFragmentLoaded",Dr),gr.off("mediaFragmentLoaded",Hr),gr.off("qualityChangeRendered",zr),gr.off("error",sn),gr.off("fragmentLoadingAbandoned",Qr),delete gr._stopMuxMonitor}},Nt$2=function(mr){mr&&typeof mr._stopMuxMonitor=="function"&&mr._stopMuxMonitor()},Lt$2=0,la$1=function(){function mr(){D$2(this,mr),l(this,"_listeners",void 0)}return L(mr,[{key:"on",value:function(hr,gr,vr){return gr._eventEmitterGuid=gr._eventEmitterGuid||++Lt$2,this._listeners=this._listeners||{},this._listeners[hr]=this._listeners[hr]||[],vr&&(gr=gr.bind(vr)),this._listeners[hr].push(gr),gr}},{key:"off",value:function(hr,gr){var vr=this._listeners&&this._listeners[hr];vr&&vr.forEach(function(xr,Er){xr._eventEmitterGuid===gr._eventEmitterGuid&&vr.splice(Er,1)})}},{key:"one",value:function(hr,gr,vr){var xr=this;gr._eventEmitterGuid=gr._eventEmitterGuid||++Lt$2;var Er=function(){xr.off(hr,Er),gr.apply(vr||this,arguments)};Er._eventEmitterGuid=gr._eventEmitterGuid,this.on(hr,Er)}},{key:"emit",value:function(hr,gr){var vr=this;if(this._listeners){gr=gr||{};var xr=this._listeners["before*"]||[],Er=this._listeners[hr]||[],Cr=this._listeners["after"+hr]||[],wr=function(Rr,kr){Rr=Rr.slice(),Rr.forEach(function(Dr){Dr.call(vr,{type:hr},kr)})};wr(xr,gr),wr(Er,gr),wr(Cr,gr)}}}]),mr}(),Ct$3=la$1,He$2=G$2(J$3()),ca$1=function(){function mr(hr){var gr=this;D$2(this,mr),l(this,"_playbackHeartbeatInterval",void 0),l(this,"_playheadShouldBeProgressing",void 0),l(this,"pm",void 0),this.pm=hr,this._playbackHeartbeatInterval=null,this._playheadShouldBeProgressing=!1,hr.on("playing",function(){gr._playheadShouldBeProgressing=!0}),hr.on("play",this._startPlaybackHeartbeatInterval.bind(this)),hr.on("playing",this._startPlaybackHeartbeatInterval.bind(this)),hr.on("adbreakstart",this._startPlaybackHeartbeatInterval.bind(this)),hr.on("adplay",this._startPlaybackHeartbeatInterval.bind(this)),hr.on("adplaying",this._startPlaybackHeartbeatInterval.bind(this)),hr.on("devicewake",this._startPlaybackHeartbeatInterval.bind(this)),hr.on("viewstart",this._startPlaybackHeartbeatInterval.bind(this)),hr.on("rebufferstart",this._startPlaybackHeartbeatInterval.bind(this)),hr.on("pause",this._stopPlaybackHeartbeatInterval.bind(this)),hr.on("ended",this._stopPlaybackHeartbeatInterval.bind(this)),hr.on("viewend",this._stopPlaybackHeartbeatInterval.bind(this)),hr.on("error",this._stopPlaybackHeartbeatInterval.bind(this)),hr.on("aderror",this._stopPlaybackHeartbeatInterval.bind(this)),hr.on("adpause",this._stopPlaybackHeartbeatInterval.bind(this)),hr.on("adended",this._stopPlaybackHeartbeatInterval.bind(this)),hr.on("adbreakend",this._stopPlaybackHeartbeatInterval.bind(this)),hr.on("seeked",function(){hr.data.player_is_paused?gr._stopPlaybackHeartbeatInterval():gr._startPlaybackHeartbeatInterval()}),hr.on("timeupdate",function(){gr._playbackHeartbeatInterval!==null&&hr.emit("playbackheartbeat")}),hr.on("devicesleep",function(vr,xr){gr._playbackHeartbeatInterval!==null&&(He$2.default.clearInterval(gr._playbackHeartbeatInterval),hr.emit("playbackheartbeatend",{viewer_time:xr.viewer_time}),gr._playbackHeartbeatInterval=null)})}return L(mr,[{key:"_startPlaybackHeartbeatInterval",value:function(){var hr=this;this._playbackHeartbeatInterval===null&&(this.pm.emit("playbackheartbeat"),this._playbackHeartbeatInterval=He$2.default.setInterval(function(){hr.pm.emit("playbackheartbeat")},this.pm.playbackHeartbeatTime))}},{key:"_stopPlaybackHeartbeatInterval",value:function(){this._playheadShouldBeProgressing=!1,this._playbackHeartbeatInterval!==null&&(He$2.default.clearInterval(this._playbackHeartbeatInterval),this.pm.emit("playbackheartbeatend"),this._playbackHeartbeatInterval=null)}}]),mr}(),Mt$1=ca$1,_a$1=function mr(hr){var gr=this;D$2(this,mr),l(this,"viewErrored",void 0),hr.on("viewinit",function(){gr.viewErrored=!1}),hr.on("error",function(vr,xr){try{var Er=hr.errorTranslator({player_error_code:xr.player_error_code,player_error_message:xr.player_error_message,player_error_context:xr.player_error_context,player_error_severity:xr.player_error_severity,player_error_business_exception:xr.player_error_business_exception});Er&&(hr.data.player_error_code=Er.player_error_code||xr.player_error_code,hr.data.player_error_message=Er.player_error_message||xr.player_error_message,hr.data.player_error_context=Er.player_error_context||xr.player_error_context,hr.data.player_error_severity=Er.player_error_severity||xr.player_error_severity,hr.data.player_error_business_exception=Er.player_error_business_exception||xr.player_error_business_exception,gr.viewErrored=!0)}catch(Cr){hr.mux.log.warn("Exception in error translator callback.",Cr),gr.viewErrored=!0}}),hr.on("aftererror",function(){var vr,xr,Er,Cr,wr;(vr=hr.data)===null||vr===void 0||delete vr.player_error_code,(xr=hr.data)===null||xr===void 0||delete xr.player_error_message,(Er=hr.data)===null||Er===void 0||delete Er.player_error_context,(Cr=hr.data)===null||Cr===void 0||delete Cr.player_error_severity,(wr=hr.data)===null||wr===void 0||delete wr.player_error_business_exception})},Ht$1=_a$1,fa=function(){function mr(hr){D$2(this,mr),l(this,"_watchTimeTrackerLastCheckedTime",void 0),l(this,"pm",void 0),this.pm=hr,this._watchTimeTrackerLastCheckedTime=null,hr.on("playbackheartbeat",this._updateWatchTime.bind(this)),hr.on("playbackheartbeatend",this._clearWatchTimeState.bind(this))}return L(mr,[{key:"_updateWatchTime",value:function(hr,gr){var vr=gr.viewer_time;this._watchTimeTrackerLastCheckedTime===null&&(this._watchTimeTrackerLastCheckedTime=vr),O$1(this.pm.data,"view_watch_time",vr-this._watchTimeTrackerLastCheckedTime),this._watchTimeTrackerLastCheckedTime=vr}},{key:"_clearWatchTimeState",value:function(hr,gr){this._updateWatchTime(hr,gr),this._watchTimeTrackerLastCheckedTime=null}}]),mr}(),Bt$2=fa,pa$1=function(){function mr(hr){var gr=this;D$2(this,mr),l(this,"_playbackTimeTrackerLastPlayheadPosition",void 0),l(this,"_lastTime",void 0),l(this,"_isAdPlaying",void 0),l(this,"_callbackUpdatePlaybackTime",void 0),l(this,"pm",void 0),this.pm=hr,this._playbackTimeTrackerLastPlayheadPosition=-1,this._lastTime=A$2.now(),this._isAdPlaying=!1,this._callbackUpdatePlaybackTime=null;var vr=this._startPlaybackTimeTracking.bind(this);hr.on("playing",vr),hr.on("adplaying",vr),hr.on("seeked",vr);var xr=this._stopPlaybackTimeTracking.bind(this);hr.on("playbackheartbeatend",xr),hr.on("seeking",xr),hr.on("adplaying",function(){gr._isAdPlaying=!0}),hr.on("adended",function(){gr._isAdPlaying=!1}),hr.on("adpause",function(){gr._isAdPlaying=!1}),hr.on("adbreakstart",function(){gr._isAdPlaying=!1}),hr.on("adbreakend",function(){gr._isAdPlaying=!1}),hr.on("adplay",function(){gr._isAdPlaying=!1}),hr.on("viewinit",function(){gr._playbackTimeTrackerLastPlayheadPosition=-1,gr._lastTime=A$2.now(),gr._isAdPlaying=!1,gr._callbackUpdatePlaybackTime=null})}return L(mr,[{key:"_startPlaybackTimeTracking",value:function(){this._callbackUpdatePlaybackTime===null&&(this._callbackUpdatePlaybackTime=this._updatePlaybackTime.bind(this),this._playbackTimeTrackerLastPlayheadPosition=this.pm.data.player_playhead_time,this.pm.on("playbackheartbeat",this._callbackUpdatePlaybackTime))}},{key:"_stopPlaybackTimeTracking",value:function(){this._callbackUpdatePlaybackTime&&(this._updatePlaybackTime(),this.pm.off("playbackheartbeat",this._callbackUpdatePlaybackTime),this._callbackUpdatePlaybackTime=null,this._playbackTimeTrackerLastPlayheadPosition=-1)}},{key:"_updatePlaybackTime",value:function(){var hr=this.pm.data.player_playhead_time,gr=A$2.now(),vr=-1;this._playbackTimeTrackerLastPlayheadPosition>=0&&hr>this._playbackTimeTrackerLastPlayheadPosition?vr=hr-this._playbackTimeTrackerLastPlayheadPosition:this._isAdPlaying&&(vr=gr-this._lastTime),vr>0&&vr<=1e3&&O$1(this.pm.data,"view_content_playback_time",vr),this._playbackTimeTrackerLastPlayheadPosition=hr,this._lastTime=gr}}]),mr}(),Ut$3=pa$1,va$1=function(){function mr(hr){D$2(this,mr),l(this,"pm",void 0),this.pm=hr;var gr=this._updatePlayheadTime.bind(this);hr.on("playbackheartbeat",gr),hr.on("playbackheartbeatend",gr),hr.on("timeupdate",gr),hr.on("destroy",function(){hr.off("timeupdate",gr)})}return L(mr,[{key:"_updateMaxPlayheadPosition",value:function(){this.pm.data.view_max_playhead_position=typeof this.pm.data.view_max_playhead_position>"u"?this.pm.data.player_playhead_time:Math.max(this.pm.data.view_max_playhead_position,this.pm.data.player_playhead_time)}},{key:"_updatePlayheadTime",value:function(hr,gr){var vr=this,xr=function(){vr.pm.currentFragmentPDT&&vr.pm.currentFragmentStart&&(vr.pm.data.player_program_time=vr.pm.currentFragmentPDT+vr.pm.data.player_playhead_time-vr.pm.currentFragmentStart)};if(gr&&gr.player_playhead_time)this.pm.data.player_playhead_time=gr.player_playhead_time,xr(),this._updateMaxPlayheadPosition();else if(this.pm.getPlayheadTime){var Er=this.pm.getPlayheadTime();typeof Er<"u"&&(this.pm.data.player_playhead_time=Er,xr(),this._updateMaxPlayheadPosition())}}}]),mr}(),Ft$2=va$1,Vt$2=5*60*1e3,ma$1=function mr(hr){if(D$2(this,mr),!hr.disableRebufferTracking){var gr,vr=function(Er,Cr){xr(Cr),gr=void 0},xr=function(Er){if(gr){var Cr=Er.viewer_time-gr;O$1(hr.data,"view_rebuffer_duration",Cr),gr=Er.viewer_time,hr.data.view_rebuffer_duration>Vt$2&&(hr.emit("viewend"),hr.send("viewend"),hr.mux.log.warn("Ending view after rebuffering for longer than ".concat(Vt$2,"ms, future events will be ignored unless a programchange or videochange occurs.")))}hr.data.view_watch_time>=0&&hr.data.view_rebuffer_count>0&&(hr.data.view_rebuffer_frequency=hr.data.view_rebuffer_count/hr.data.view_watch_time,hr.data.view_rebuffer_percentage=hr.data.view_rebuffer_duration/hr.data.view_watch_time)};hr.on("playbackheartbeat",function(Er,Cr){return xr(Cr)}),hr.on("rebufferstart",function(Er,Cr){gr||(O$1(hr.data,"view_rebuffer_count",1),gr=Cr.viewer_time,hr.one("rebufferend",vr))}),hr.on("viewinit",function(){gr=void 0,hr.off("rebufferend",vr)})}},Wt$2=ma$1,ha$1=function(){function mr(hr){var gr=this;D$2(this,mr),l(this,"_lastCheckedTime",void 0),l(this,"_lastPlayheadTime",void 0),l(this,"_lastPlayheadTimeUpdatedTime",void 0),l(this,"_rebuffering",void 0),l(this,"pm",void 0),this.pm=hr,!(hr.disableRebufferTracking||hr.disablePlayheadRebufferTracking)&&(this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null,hr.on("playbackheartbeat",this._checkIfRebuffering.bind(this)),hr.on("playbackheartbeatend",this._cleanupRebufferTracker.bind(this)),hr.on("seeking",function(){gr._cleanupRebufferTracker(null,{viewer_time:A$2.now()})}))}return L(mr,[{key:"_checkIfRebuffering",value:function(hr,gr){if(this.pm.seekingTracker.isSeeking||this.pm.adTracker.isAdBreak||!this.pm.playbackHeartbeat._playheadShouldBeProgressing){this._cleanupRebufferTracker(hr,gr);return}if(this._lastCheckedTime===null){this._prepareRebufferTrackerState(gr.viewer_time);return}if(this._lastPlayheadTime!==this.pm.data.player_playhead_time){this._cleanupRebufferTracker(hr,gr,!0);return}var vr=gr.viewer_time-this._lastPlayheadTimeUpdatedTime;typeof this.pm.sustainedRebufferThreshold=="number"&&vr>=this.pm.sustainedRebufferThreshold&&(this._rebuffering||(this._rebuffering=!0,this.pm.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}))),this._lastCheckedTime=gr.viewer_time}},{key:"_clearRebufferTrackerState",value:function(){this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null}},{key:"_prepareRebufferTrackerState",value:function(hr){this._lastCheckedTime=hr,this._lastPlayheadTime=this.pm.data.player_playhead_time,this._lastPlayheadTimeUpdatedTime=hr}},{key:"_cleanupRebufferTracker",value:function(hr,gr){var vr=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(this._rebuffering)this._rebuffering=!1,this.pm.emit("rebufferend",{viewer_time:gr.viewer_time});else{if(this._lastCheckedTime===null)return;var xr=this.pm.data.player_playhead_time-this._lastPlayheadTime,Er=gr.viewer_time-this._lastPlayheadTimeUpdatedTime;typeof this.pm.minimumRebufferDuration=="number"&&xr>0&&Er-xr>this.pm.minimumRebufferDuration&&(this._lastCheckedTime=null,this.pm.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}),this.pm.emit("rebufferend",{viewer_time:this._lastPlayheadTimeUpdatedTime+Er-xr}))}vr?this._prepareRebufferTrackerState(gr.viewer_time):this._clearRebufferTrackerState()}}]),mr}(),jt$2=ha$1,ya$1=function(){function mr(hr){var gr=this;D$2(this,mr),l(this,"NAVIGATION_START",void 0),l(this,"pm",void 0),this.pm=hr,hr.on("viewinit",function(){var vr=hr.data,xr=vr.view_id;if(!vr.view_program_changed){var Er=function(Cr,wr){var Rr=wr.viewer_time;(Cr.type==="playing"&&typeof hr.data.view_time_to_first_frame>"u"||Cr.type==="adplaying"&&(typeof hr.data.view_time_to_first_frame>"u"||gr._inPrerollPosition()))&&gr.calculateTimeToFirstFrame(Rr||A$2.now(),xr)};hr.one("playing",Er),hr.one("adplaying",Er),hr.one("viewend",function(){hr.off("playing",Er),hr.off("adplaying",Er)})}})}return L(mr,[{key:"_inPrerollPosition",value:function(){return typeof this.pm.data.view_content_playback_time>"u"||this.pm.data.view_content_playback_time<=1e3}},{key:"calculateTimeToFirstFrame",value:function(hr,gr){gr===this.pm.data.view_id&&(this.pm.watchTimeTracker._updateWatchTime(null,{viewer_time:hr}),this.pm.data.view_time_to_first_frame=this.pm.data.view_watch_time,(this.pm.data.player_autoplay_on||this.pm.data.video_is_autoplay)&&this.NAVIGATION_START&&(this.pm.data.view_aggregate_startup_time=this.pm.data.view_start+this.pm.data.view_watch_time-this.NAVIGATION_START))}}]),mr}(),Gt$2=ya$1,ga=function mr(hr){var gr=this;D$2(this,mr),l(this,"_lastPlayerHeight",void 0),l(this,"_lastPlayerWidth",void 0),l(this,"_lastPlayheadPosition",void 0),l(this,"_lastSourceHeight",void 0),l(this,"_lastSourceWidth",void 0),hr.on("viewinit",function(){gr._lastPlayheadPosition=-1});var vr=["pause","rebufferstart","seeking","error","adbreakstart","hb"],xr=["playing","hb"];vr.forEach(function(Er){hr.on(Er,function(){if(gr._lastPlayheadPosition>=0&&hr.data.player_playhead_time>=0&&gr._lastPlayerWidth>=0&&gr._lastSourceWidth>0&&gr._lastPlayerHeight>=0&&gr._lastSourceHeight>0){var Cr=hr.data.player_playhead_time-gr._lastPlayheadPosition;if(Cr<0){gr._lastPlayheadPosition=-1;return}var wr=Math.min(gr._lastPlayerWidth/gr._lastSourceWidth,gr._lastPlayerHeight/gr._lastSourceHeight),Rr=Math.max(0,wr-1),kr=Math.max(0,1-wr);hr.data.view_max_upscale_percentage=Math.max(hr.data.view_max_upscale_percentage||0,Rr),hr.data.view_max_downscale_percentage=Math.max(hr.data.view_max_downscale_percentage||0,kr),O$1(hr.data,"view_total_content_playback_time",Cr),O$1(hr.data,"view_total_upscaling",Rr*Cr),O$1(hr.data,"view_total_downscaling",kr*Cr)}gr._lastPlayheadPosition=-1})}),xr.forEach(function(Er){hr.on(Er,function(){gr._lastPlayheadPosition=hr.data.player_playhead_time,gr._lastPlayerWidth=hr.data.player_width,gr._lastPlayerHeight=hr.data.player_height,gr._lastSourceWidth=hr.data.video_source_width,gr._lastSourceHeight=hr.data.video_source_height})})},Jt$2=ga,ba$1=2e3,Ta$1=function mr(hr){var gr=this;D$2(this,mr),l(this,"isSeeking",void 0),this.isSeeking=!1;var vr=-1,xr=function(){var Er=A$2.now(),Cr=(hr.data.viewer_time||Er)-(vr||Er);O$1(hr.data,"view_seek_duration",Cr),hr.data.view_max_seek_time=Math.max(hr.data.view_max_seek_time||0,Cr),gr.isSeeking=!1,vr=-1};hr.on("seeking",function(Er,Cr){if(Object.assign(hr.data,Cr),gr.isSeeking&&Cr.viewer_time-vr<=ba$1){vr=Cr.viewer_time;return}gr.isSeeking&&xr(),gr.isSeeking=!0,vr=Cr.viewer_time,O$1(hr.data,"view_seek_count",1),hr.send("seeking")}),hr.on("seeked",function(){xr()}),hr.on("viewend",function(){gr.isSeeking&&(xr(),hr.send("seeked")),gr.isSeeking=!1,vr=-1})},Qt$1=Ta$1,zt$2=function(mr,hr){mr.push(hr),mr.sort(function(gr,vr){return gr.viewer_time-vr.viewer_time})},wa=["adbreakstart","adrequest","adresponse","adplay","adplaying","adpause","adended","adbreakend","aderror","adclicked","adskipped"],Ea$1=function(){function mr(hr){var gr=this;D$2(this,mr),l(this,"_adHasPlayed",void 0),l(this,"_adRequests",void 0),l(this,"_adResponses",void 0),l(this,"_currentAdRequestNumber",void 0),l(this,"_currentAdResponseNumber",void 0),l(this,"_prerollPlayTime",void 0),l(this,"_wouldBeNewAdPlay",void 0),l(this,"isAdBreak",void 0),l(this,"pm",void 0),this.pm=hr,hr.on("viewinit",function(){gr.isAdBreak=!1,gr._currentAdRequestNumber=0,gr._currentAdResponseNumber=0,gr._adRequests=[],gr._adResponses=[],gr._adHasPlayed=!1,gr._wouldBeNewAdPlay=!0,gr._prerollPlayTime=void 0}),wa.forEach(function(xr){return hr.on(xr,gr._updateAdData.bind(gr))});var vr=function(){gr.isAdBreak=!1};hr.on("adbreakstart",function(){gr.isAdBreak=!0}),hr.on("play",vr),hr.on("playing",vr),hr.on("viewend",vr),hr.on("adrequest",function(xr,Er){Er=Object.assign({ad_request_id:"generatedAdRequestId"+gr._currentAdRequestNumber++},Er),zt$2(gr._adRequests,Er),O$1(hr.data,"view_ad_request_count"),gr.inPrerollPosition()&&(hr.data.view_preroll_requested=!0,gr._adHasPlayed||O$1(hr.data,"view_preroll_request_count"))}),hr.on("adresponse",function(xr,Er){Er=Object.assign({ad_request_id:"generatedAdRequestId"+gr._currentAdResponseNumber++},Er),zt$2(gr._adResponses,Er);var Cr=gr.findAdRequest(Er.ad_request_id);Cr&&O$1(hr.data,"view_ad_request_time",Math.max(0,Er.viewer_time-Cr.viewer_time))}),hr.on("adplay",function(xr,Er){gr._adHasPlayed=!0,gr._wouldBeNewAdPlay&&(gr._wouldBeNewAdPlay=!1,O$1(hr.data,"view_ad_played_count")),gr.inPrerollPosition()&&!hr.data.view_preroll_played&&(hr.data.view_preroll_played=!0,gr._adRequests.length>0&&(hr.data.view_preroll_request_time=Math.max(0,Er.viewer_time-gr._adRequests[0].viewer_time)),hr.data.view_start&&(hr.data.view_startup_preroll_request_time=Math.max(0,Er.viewer_time-hr.data.view_start)),gr._prerollPlayTime=Er.viewer_time)}),hr.on("adplaying",function(xr,Er){gr.inPrerollPosition()&&typeof hr.data.view_preroll_load_time>"u"&&typeof gr._prerollPlayTime<"u"&&(hr.data.view_preroll_load_time=Er.viewer_time-gr._prerollPlayTime,hr.data.view_startup_preroll_load_time=Er.viewer_time-gr._prerollPlayTime)}),hr.on("adclicked",function(xr,Er){gr._wouldBeNewAdPlay||O$1(hr.data,"view_ad_clicked_count")}),hr.on("adskipped",function(xr,Er){gr._wouldBeNewAdPlay||O$1(hr.data,"view_ad_skipped_count")}),hr.on("adended",function(){gr._wouldBeNewAdPlay=!0}),hr.on("aderror",function(){gr._wouldBeNewAdPlay=!0})}return L(mr,[{key:"inPrerollPosition",value:function(){return typeof this.pm.data.view_content_playback_time>"u"||this.pm.data.view_content_playback_time<=1e3}},{key:"findAdRequest",value:function(hr){for(var gr=0;gr<this._adRequests.length;gr++)if(this._adRequests[gr].ad_request_id===hr)return this._adRequests[gr]}},{key:"_updateAdData",value:function(hr,gr){if(this.inPrerollPosition()){if(!this.pm.data.view_preroll_ad_tag_hostname&&gr.ad_tag_url){var vr=H$3(re$4(gr.ad_tag_url),2),xr=vr[0],Er=vr[1];this.pm.data.view_preroll_ad_tag_domain=Er,this.pm.data.view_preroll_ad_tag_hostname=xr}if(!this.pm.data.view_preroll_ad_asset_hostname&&gr.ad_asset_url){var Cr=H$3(re$4(gr.ad_asset_url),2),wr=Cr[0],Rr=Cr[1];this.pm.data.view_preroll_ad_asset_domain=Rr,this.pm.data.view_preroll_ad_asset_hostname=wr}}this.pm.data.ad_asset_url=gr?.ad_asset_url,this.pm.data.ad_tag_url=gr?.ad_tag_url,this.pm.data.ad_creative_id=gr?.ad_creative_id,this.pm.data.ad_id=gr?.ad_id,this.pm.data.ad_universal_id=gr?.ad_universal_id}}]),mr}(),Kt$1=Ea$1,Qe$2=G$2(J$3()),ka$1=function mr(hr){D$2(this,mr);var gr,vr,xr=function(){hr.disableRebufferTracking||(O$1(hr.data,"view_waiting_rebuffer_count",1),gr=A$2.now(),vr=Qe$2.default.setInterval(function(){if(gr){var kr=A$2.now();O$1(hr.data,"view_waiting_rebuffer_duration",kr-gr),gr=kr}},250))},Er=function(){hr.disableRebufferTracking||gr&&(O$1(hr.data,"view_waiting_rebuffer_duration",A$2.now()-gr),gr=!1,Qe$2.default.clearInterval(vr))},Cr=!1,wr=function(){Cr=!0},Rr=function(){Cr=!1,Er()};hr.on("waiting",function(){Cr&&xr()}),hr.on("playing",function(){Er(),wr()}),hr.on("pause",Rr),hr.on("seeking",Rr)},Yt$2=ka$1,xa$1=function mr(hr){var gr=this;D$2(this,mr),l(this,"lastWallClockTime",void 0);var vr=function(){gr.lastWallClockTime=A$2.now(),hr.on("before*",xr)},xr=function(Er){var Cr=A$2.now(),wr=gr.lastWallClockTime;gr.lastWallClockTime=Cr,Cr-wr>3e4&&(hr.emit("devicesleep",{viewer_time:wr}),Object.assign(hr.data,{viewer_time:wr}),hr.send("devicesleep"),hr.emit("devicewake",{viewer_time:Cr}),Object.assign(hr.data,{viewer_time:Cr}),hr.send("devicewake"))};hr.one("playbackheartbeat",vr),hr.on("playbackheartbeatend",function(){hr.off("before*",xr),hr.one("playbackheartbeat",vr)})},Xt$2=xa$1,Be$3=G$2(J$3()),ze$1=function(mr){return mr()}(function(){var mr=function(){for(var gr=0,vr={};gr<arguments.length;gr++){var xr=arguments[gr];for(var Er in xr)vr[Er]=xr[Er]}return vr};function hr(gr){function vr(xr,Er,Cr){var wr;if(typeof document<"u"){if(arguments.length>1){if(Cr=mr({path:"/"},vr.defaults,Cr),typeof Cr.expires=="number"){var Rr=new Date;Rr.setMilliseconds(Rr.getMilliseconds()+Cr.expires*864e5),Cr.expires=Rr}try{wr=JSON.stringify(Er),/^[\{\[]/.test(wr)&&(Er=wr)}catch{}return gr.write?Er=gr.write(Er,xr):Er=encodeURIComponent(String(Er)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),xr=encodeURIComponent(String(xr)),xr=xr.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),xr=xr.replace(/[\(\)]/g,escape),document.cookie=[xr,"=",Er,Cr.expires?"; expires="+Cr.expires.toUTCString():"",Cr.path?"; path="+Cr.path:"",Cr.domain?"; domain="+Cr.domain:"",Cr.secure?"; secure":""].join("")}xr||(wr={});for(var kr=document.cookie?document.cookie.split("; "):[],Dr=/(%[0-9A-Z]{2})+/g,Br=0;Br<kr.length;Br++){var Hr=kr[Br].split("="),Gr=Hr.slice(1).join("=");Gr.charAt(0)==='"'&&(Gr=Gr.slice(1,-1));try{var qr=Hr[0].replace(Dr,decodeURIComponent);if(Gr=gr.read?gr.read(Gr,qr):gr(Gr,qr)||Gr.replace(Dr,decodeURIComponent),this.json)try{Gr=JSON.parse(Gr)}catch{}if(xr===qr){wr=Gr;break}xr||(wr[qr]=Gr)}catch{}}return wr}}return vr.set=vr,vr.get=function(xr){return vr.call(vr,xr)},vr.getJSON=function(){return vr.apply({json:!0},[].slice.call(arguments))},vr.defaults={},vr.remove=function(xr,Er){vr(xr,"",mr(Er,{expires:-1}))},vr.withConverter=hr,vr}return hr(function(){})}),$t$2="muxData",Da$1=function(mr){return Object.entries(mr).map(function(hr){var gr=H$3(hr,2),vr=gr[0],xr=gr[1];return"".concat(vr,"=").concat(xr)}).join("&")},Sa=function(mr){return mr.split("&").reduce(function(hr,gr){var vr=H$3(gr.split("="),2),xr=vr[0],Er=vr[1],Cr=+Er,wr=Er&&Cr==Er?Cr:Er;return hr[xr]=wr,hr},{})},Zt$2=function(){var mr;try{mr=Sa(ze$1.get($t$2)||"")}catch{mr={}}return mr},er=function(mr){try{ze$1.set($t$2,Da$1(mr),{expires:365})}catch{}},tr=function(){var mr=Zt$2();return mr.mux_viewer_id=mr.mux_viewer_id||ee$4(),mr.msn=mr.msn||Math.random(),er(mr),{mux_viewer_id:mr.mux_viewer_id,mux_sample_number:mr.msn}},rr=function(){var mr=Zt$2(),hr=A$2.now();return mr.session_start&&(mr.sst=mr.session_start,delete mr.session_start),mr.session_id&&(mr.sid=mr.session_id,delete mr.session_id),mr.session_expires&&(mr.sex=mr.session_expires,delete mr.session_expires),(!mr.sex||mr.sex<hr)&&(mr.sid=ee$4(),mr.sst=hr),mr.sex=hr+25*60*1e3,er(mr),{session_id:mr.sid,session_start:mr.sst,session_expires:mr.sex}};function Ke$2(mr,hr){var gr=hr.beaconCollectionDomain,vr=hr.beaconDomain;if(gr)return"https://"+gr;mr=mr||"inferred";var xr=vr||"litix.io";return mr.match(/^[a-z0-9]+$/)?"https://"+mr+"."+xr:"https://img.litix.io/a.gif"}var ar=G$2(J$3()),ir=function(){var mr;switch(nr()){case"cellular":mr="cellular";break;case"ethernet":mr="wired";break;case"wifi":mr="wifi";break;case void 0:break;default:mr="other"}return mr},nr=function(){var mr=ar.default.navigator,hr=mr&&(mr.connection||mr.mozConnection||mr.webkitConnection);return hr&&hr.type};ir.getConnectionFromAPI=nr;var or=ir,Ra$1={a:"env",b:"beacon",c:"custom",d:"ad",e:"event",f:"experiment",i:"internal",m:"mux",n:"response",p:"player",q:"request",r:"retry",s:"session",t:"timestamp",u:"viewer",v:"video",w:"page",x:"view",y:"sub"},qa=ur(Ra$1),Aa$1={ad:"ad",ag:"aggregate",ap:"api",al:"application",ar:"architecture",as:"asset",au:"autoplay",av:"average",bi:"bitrate",br:"break",bw:"browser",by:"bytes",bz:"business",ca:"cached",cb:"cancel",cc:"codec",cd:"code",cg:"category",ch:"changed",ck:"clicked",cl:"canceled",cn:"config",co:"count",ce:"counter",cp:"complete",cr:"creative",ct:"content",cu:"current",cx:"connection",cz:"context",dg:"downscaling",dm:"domain",dn:"cdn",do:"downscale",dr:"drm",dp:"dropped",du:"duration",dv:"device",ec:"encoding",ed:"edge",en:"end",eg:"engine",em:"embed",er:"error",ep:"experiments",es:"errorcode",et:"errortext",ee:"event",ev:"events",ex:"expires",ez:"exception",fa:"failed",fi:"first",fm:"family",ft:"format",fp:"fps",fq:"frequency",fr:"frame",fs:"fullscreen",ha:"has",hb:"holdback",he:"headers",ho:"host",hn:"hostname",ht:"height",id:"id",ii:"init",in:"instance",ip:"ip",is:"is",ke:"key",la:"language",lb:"labeled",le:"level",li:"live",ld:"loaded",lo:"load",ls:"lists",lt:"latency",ma:"max",md:"media",me:"message",mf:"manifest",mi:"mime",ml:"midroll",mm:"min",mn:"manufacturer",mo:"model",mx:"mux",ne:"newest",nm:"name",no:"number",on:"on",os:"os",pa:"paused",pb:"playback",pd:"producer",pe:"percentage",pf:"played",pg:"program",ph:"playhead",pi:"plugin",pl:"preroll",pn:"playing",po:"poster",pr:"preload",ps:"position",pt:"part",py:"property",ra:"rate",rd:"requested",re:"rebuffer",rf:"rendition",rm:"remote",ro:"ratio",rp:"response",rq:"request",rs:"requests",sa:"sample",sd:"skipped",se:"session",sk:"seek",sm:"stream",so:"source",sq:"sequence",sr:"series",st:"start",su:"startup",sv:"server",sw:"software",sy:"severity",ta:"tag",tc:"tech",te:"text",tg:"target",th:"throughput",ti:"time",tl:"total",to:"to",tt:"title",ty:"type",ug:"upscaling",un:"universal",up:"upscale",ur:"url",us:"user",va:"variant",vd:"viewed",vi:"video",ve:"version",vw:"view",vr:"viewer",wd:"width",wa:"watch",wt:"waiting"},sr=ur(Aa$1);function ur(mr){var hr={};for(var gr in mr)mr.hasOwnProperty(gr)&&(hr[mr[gr]]=gr);return hr}function ve$3(mr){var hr={},gr={};return Object.keys(mr).forEach(function(vr){var xr=!1;if(mr.hasOwnProperty(vr)&&mr[vr]!==void 0){var Er=vr.split("_"),Cr=Er[0],wr=qa[Cr];wr||(q$2.info("Data key word `"+Er[0]+"` not expected in "+vr),wr=Cr+"_"),Er.splice(1).forEach(function(Rr){Rr==="url"&&(xr=!0),sr[Rr]?wr+=sr[Rr]:Number(Rr)&&Math.floor(Number(Rr))===Number(Rr)?wr+=Rr:(q$2.info("Data key word `"+Rr+"` not expected in "+vr),wr+="_"+Rr+"_")}),xr?gr[wr]=mr[vr]:hr[wr]=mr[vr]}}),Object.assign(hr,gr)}var ae$3=G$2(J$3()),Oa$1={maxBeaconSize:300,maxQueueLength:3600,baseTimeBetweenBeacons:1e4,maxPayloadKBSize:500},Ia$1=56*1024,Pa$1=["hb","requestcompleted","requestfailed","requestcanceled"],Na="https://img.litix.io",$$4=function(mr){var hr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this._beaconUrl=mr||Na,this._eventQueue=[],this._postInFlight=!1,this._failureCount=0,this._sendTimeout=!1,this._options=Object.assign({},Oa$1,hr)};$$4.prototype.queueEvent=function(mr,hr){var gr=Object.assign({},hr);return this._eventQueue.length<=this._options.maxQueueLength||mr==="eventrateexceeded"?(this._eventQueue.push(gr),this._sendTimeout||this._startBeaconSending(),this._eventQueue.length<=this._options.maxQueueLength):!1};$$4.prototype.flushEvents=function(){var mr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(mr&&this._eventQueue.length===1){this._eventQueue.pop();return}this._eventQueue.length&&this._sendBeaconQueue(),this._startBeaconSending()};$$4.prototype.destroy=function(){var mr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.destroyed=!0,mr?this._clearBeaconQueue():this.flushEvents(),ae$3.default.clearTimeout(this._sendTimeout)};$$4.prototype._clearBeaconQueue=function(){var mr=this._eventQueue.length>this._options.maxBeaconSize?this._eventQueue.length-this._options.maxBeaconSize:0,hr=this._eventQueue.slice(mr);mr>0&&Object.assign(hr[hr.length-1],ve$3({mux_view_message:"event queue truncated"}));var gr=this._createPayload(hr);dr(this._beaconUrl,gr,!0,function(){})};$$4.prototype._sendBeaconQueue=function(){var mr=this;if(!this._postInFlight){var hr=this._eventQueue.slice(0,this._options.maxBeaconSize);this._eventQueue=this._eventQueue.slice(this._options.maxBeaconSize),this._postInFlight=!0;var gr=this._createPayload(hr),vr=A$2.now();dr(this._beaconUrl,gr,!1,function(xr,Er){Er?(mr._eventQueue=hr.concat(mr._eventQueue),mr._failureCount+=1,q$2.info("Error sending beacon: "+Er)):mr._failureCount=0,mr._roundTripTime=A$2.now()-vr,mr._postInFlight=!1})}};$$4.prototype._getNextBeaconTime=function(){if(!this._failureCount)return this._options.baseTimeBetweenBeacons;var mr=Math.pow(2,this._failureCount-1);return mr=mr*Math.random(),(1+mr)*this._options.baseTimeBetweenBeacons};$$4.prototype._startBeaconSending=function(){var mr=this;ae$3.default.clearTimeout(this._sendTimeout),!this.destroyed&&(this._sendTimeout=ae$3.default.setTimeout(function(){mr._eventQueue.length&&mr._sendBeaconQueue(),mr._startBeaconSending()},this._getNextBeaconTime()))};$$4.prototype._createPayload=function(mr){var hr=this,gr={transmission_timestamp:Math.round(A$2.now())};this._roundTripTime&&(gr.rtt_ms=Math.round(this._roundTripTime));var vr,xr,Er,Cr=function(){vr=JSON.stringify({metadata:gr,events:xr||mr}),Er=vr.length/1024},wr=function(){return Er<=hr._options.maxPayloadKBSize};return Cr(),wr()||(q$2.info("Payload size is too big ("+Er+" kb). Removing unnecessary events."),xr=mr.filter(function(Rr){return Pa$1.indexOf(Rr.e)===-1}),Cr()),wr()||(q$2.info("Payload size still too big ("+Er+" kb). Cropping fields.."),xr.forEach(function(Rr){for(var kr in Rr){var Dr=Rr[kr],Br=50*1024;typeof Dr=="string"&&Dr.length>Br&&(Rr[kr]=Dr.substring(0,Br))}}),Cr()),vr};var La=function(mr){return mr.length<=Ia$1},dr=function(mr,hr,gr,vr){if(gr&&navigator&&navigator.sendBeacon&&navigator.sendBeacon(mr,hr)){vr();return}if(ae$3.default.fetch){ae$3.default.fetch(mr,{method:"POST",body:hr,headers:{"Content-Type":"text/plain"},keepalive:La(hr)}).then(function(Er){return vr(null,Er.ok?null:"Error")}).catch(function(Er){return vr(null,Er)});return}if(ae$3.default.XMLHttpRequest){var xr=new ae$3.default.XMLHttpRequest;xr.onreadystatechange=function(){if(xr.readyState===4)return vr(null,xr.status!==200?"error":void 0)},xr.open("POST",mr),xr.setRequestHeader("Content-Type","text/plain"),xr.send(hr);return}vr()},lr=$$4,Ca$1=["env_key","view_id","view_sequence_number","player_sequence_number","beacon_domain","player_playhead_time","viewer_time","mux_api_version","event","video_id","player_instance_id","player_error_code","player_error_message","player_error_context","player_error_severity","player_error_business_exception"],Ma=["adplay","adplaying","adpause","adfirstquartile","admidpoint","adthirdquartile","adended","adresponse","adrequest"],Ha$1=["ad_id","ad_creative_id","ad_universal_id"],Ba$1=["viewstart","error","ended","viewend"],Ua$1=10*60*1e3,cr=function(){function mr(hr,gr){var vr=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};D$2(this,mr);var xr,Er,Cr,wr,Rr,kr,Dr,Br,Hr,Gr,qr,zr;l(this,"mux",void 0),l(this,"envKey",void 0),l(this,"options",void 0),l(this,"eventQueue",void 0),l(this,"sampleRate",void 0),l(this,"disableCookies",void 0),l(this,"respectDoNotTrack",void 0),l(this,"previousBeaconData",void 0),l(this,"lastEventTime",void 0),l(this,"rateLimited",void 0),l(this,"pageLevelData",void 0),l(this,"viewerData",void 0),this.mux=hr,this.envKey=gr,this.options=vr,this.previousBeaconData=null,this.lastEventTime=0,this.rateLimited=!1,this.eventQueue=new lr(Ke$2(this.envKey,this.options));var Qr;this.sampleRate=(Qr=this.options.sampleRate)!==null&&Qr!==void 0?Qr:1;var sn;this.disableCookies=(sn=this.options.disableCookies)!==null&&sn!==void 0?sn:!1;var hn;this.respectDoNotTrack=(hn=this.options.respectDoNotTrack)!==null&&hn!==void 0?hn:!1,this.previousBeaconData=null,this.lastEventTime=0,this.rateLimited=!1,this.pageLevelData={mux_api_version:this.mux.API_VERSION,mux_embed:this.mux.NAME,mux_embed_version:this.mux.VERSION,viewer_application_name:(xr=this.options.platform)===null||xr===void 0?void 0:xr.name,viewer_application_version:(Er=this.options.platform)===null||Er===void 0?void 0:Er.version,viewer_application_engine:(Cr=this.options.platform)===null||Cr===void 0?void 0:Cr.layout,viewer_device_name:(wr=this.options.platform)===null||wr===void 0?void 0:wr.product,viewer_device_category:"",viewer_device_manufacturer:(Rr=this.options.platform)===null||Rr===void 0?void 0:Rr.manufacturer,viewer_os_family:(Dr=this.options.platform)===null||Dr===void 0||(kr=Dr.os)===null||kr===void 0?void 0:kr.family,viewer_os_architecture:(Hr=this.options.platform)===null||Hr===void 0||(Br=Hr.os)===null||Br===void 0?void 0:Br.architecture,viewer_os_version:(qr=this.options.platform)===null||qr===void 0||(Gr=qr.os)===null||Gr===void 0?void 0:Gr.version,viewer_connection_type:or(),page_url:Be$3.default===null||Be$3.default===void 0||(zr=Be$3.default.location)===null||zr===void 0?void 0:zr.href},this.viewerData=this.disableCookies?{}:tr()}return L(mr,[{key:"send",value:function(hr,gr){if(!(!hr||!(gr!=null&&gr.view_id))){if(this.respectDoNotTrack&&ce$2())return q$2.info("Not sending `"+hr+"` because Do Not Track is enabled");if(!gr||typeof gr!="object")return q$2.error("A data object was expected in send() but was not provided");var vr=this.disableCookies?{}:rr(),xr=fe$2(ue$3({},this.pageLevelData,gr,vr,this.viewerData),{event:hr,env_key:this.envKey});xr.user_id&&(xr.viewer_user_id=xr.user_id,delete xr.user_id);var Er,Cr=((Er=xr.mux_sample_number)!==null&&Er!==void 0?Er:0)>=this.sampleRate,wr=this._deduplicateBeaconData(hr,xr),Rr=ve$3(wr);if(this.lastEventTime=this.mux.utils.now(),Cr)return q$2.info("Not sending event due to sample rate restriction",hr,xr,Rr);if(this.envKey||q$2.info("Missing environment key (envKey) - beacons will be dropped if the video source is not a valid mux video URL",hr,xr,Rr),!this.rateLimited){if(q$2.info("Sending event",hr,xr,Rr),this.rateLimited=!this.eventQueue.queueEvent(hr,Rr),this.mux.WINDOW_UNLOADING&&hr==="viewend")this.eventQueue.destroy(!0);else if(this.mux.WINDOW_HIDDEN&&hr==="hb"?this.eventQueue.flushEvents(!0):Ba$1.indexOf(hr)>=0&&this.eventQueue.flushEvents(),this.rateLimited)return xr.event="eventrateexceeded",Rr=ve$3(xr),this.eventQueue.queueEvent(xr.event,Rr),q$2.error("Beaconing disabled due to rate limit.")}}}},{key:"destroy",value:function(){this.eventQueue.destroy(!1)}},{key:"_deduplicateBeaconData",value:function(hr,gr){var vr=this,xr={},Er=gr.view_id;if(Er==="-1"||hr==="viewstart"||hr==="viewend"||!this.previousBeaconData||this.mux.utils.now()-this.lastEventTime>=Ua$1)xr=ue$3({},gr),Er&&(this.previousBeaconData=xr),Er&&hr==="viewend"&&(this.previousBeaconData=null);else{var Cr=hr.indexOf("request")===0;Object.entries(gr).forEach(function(wr){var Rr=H$3(wr,2),kr=Rr[0],Dr=Rr[1];vr.previousBeaconData&&(Dr!==vr.previousBeaconData[kr]||Ca$1.indexOf(kr)>-1||vr.objectHasChanged(Cr,kr,Dr,vr.previousBeaconData[kr])||vr.eventRequiresKey(hr,kr))&&(xr[kr]=Dr,vr.previousBeaconData[kr]=Dr)})}return xr}},{key:"objectHasChanged",value:function(hr,gr,vr,xr){return!hr||gr.indexOf("request_")!==0?!1:gr==="request_response_headers"||typeof vr!="object"||typeof xr!="object"?!0:Object.keys(vr||{}).length!==Object.keys(xr||{}).length}},{key:"eventRequiresKey",value:function(hr,gr){return!!(hr==="renditionchange"&&gr.indexOf("video_source_")===0||Ha$1.includes(gr)&&Ma.includes(hr))}}]),mr}(),Fa$1=function mr(hr){D$2(this,mr);var gr=0,vr=0,xr=0,Er=0,Cr=0,wr=0,Rr=0,kr=function(Hr,Gr){var qr=Gr.request_start,zr=Gr.request_response_start,Qr=Gr.request_response_end,sn=Gr.request_bytes_loaded;Er++;var hn,vn;if(zr?(hn=zr-(qr??0),vn=(Qr??0)-zr):vn=(Qr??0)-(qr??0),vn>0&&sn&&sn>0){var yn=sn/vn*8e3;Cr++,vr+=sn,xr+=vn,hr.data.view_min_request_throughput=Math.min(hr.data.view_min_request_throughput||1/0,yn),hr.data.view_average_request_throughput=vr/xr*8e3,hr.data.view_request_count=Er,hn>0&&(gr+=hn,hr.data.view_max_request_latency=Math.max(hr.data.view_max_request_latency||0,hn),hr.data.view_average_request_latency=gr/Cr)}},Dr=function(Hr,Gr){Er++,wr++,hr.data.view_request_count=Er,hr.data.view_request_failed_count=wr},Br=function(Hr,Gr){Er++,Rr++,hr.data.view_request_count=Er,hr.data.view_request_canceled_count=Rr};hr.on("requestcompleted",kr),hr.on("requestfailed",Dr),hr.on("requestcanceled",Br)},_r=Fa$1,Va$1=60*60*1e3,Wa=function mr(hr){var gr=this;D$2(this,mr),l(this,"_lastEventTime",void 0),hr.on("before*",function(vr,xr){var Er=xr.viewer_time,Cr=A$2.now(),wr=gr._lastEventTime;if(gr._lastEventTime=Cr,wr&&Cr-wr>Va$1){var Rr=Object.keys(hr.data).reduce(function(Dr,Br){return Br.indexOf("video_")===0?Object.assign(Dr,l({},Br,hr.data[Br])):Dr},{});hr.mux.log.info("Received event after at least an hour inactivity, creating a new view");var kr=hr.playbackHeartbeat._playheadShouldBeProgressing;hr._resetView(Object.assign({viewer_time:Er},Rr)),hr.playbackHeartbeat._playheadShouldBeProgressing=kr,hr.playbackHeartbeat._playheadShouldBeProgressing&&vr.type!=="play"&&vr.type!=="adbreakstart"&&(hr.emit("play",{viewer_time:Er}),vr.type!=="playing"&&hr.emit("playing",{viewer_time:Er}))}})},fr=Wa,ja=["viewstart","ended","loadstart","pause","play","playing","ratechange","waiting","adplay","adpause","adended","aderror","adplaying","adrequest","adresponse","adbreakstart","adbreakend","adfirstquartile","admidpoint","adthirdquartile","rebufferstart","rebufferend","seeked","error","hb","requestcompleted","requestfailed","requestcanceled","renditionchange"],Ga=new Set(["requestcompleted","requestfailed","requestcanceled"]),Ja=function(mr){xt$3(gr,mr);var hr=Rt$3(gr);function gr(vr,xr,Er){D$2(this,gr);var Cr;Cr=hr.call(this),l(g(Cr),"DOM_CONTENT_LOADED_EVENT_END",void 0),l(g(Cr),"NAVIGATION_START",void 0),l(g(Cr),"_destroyed",void 0),l(g(Cr),"_heartBeatTimeout",void 0),l(g(Cr),"adTracker",void 0),l(g(Cr),"dashjs",void 0),l(g(Cr),"data",void 0),l(g(Cr),"disablePlayheadRebufferTracking",void 0),l(g(Cr),"disableRebufferTracking",void 0),l(g(Cr),"errorTracker",void 0),l(g(Cr),"errorTranslator",void 0),l(g(Cr),"emitTranslator",void 0),l(g(Cr),"getAdData",void 0),l(g(Cr),"getPlayheadTime",void 0),l(g(Cr),"getStateData",void 0),l(g(Cr),"stateDataTranslator",void 0),l(g(Cr),"hlsjs",void 0),l(g(Cr),"id",void 0),l(g(Cr),"longResumeTracker",void 0),l(g(Cr),"minimumRebufferDuration",void 0),l(g(Cr),"mux",void 0),l(g(Cr),"playbackEventDispatcher",void 0),l(g(Cr),"playbackHeartbeat",void 0),l(g(Cr),"playbackHeartbeatTime",void 0),l(g(Cr),"playheadTime",void 0),l(g(Cr),"seekingTracker",void 0),l(g(Cr),"sustainedRebufferThreshold",void 0),l(g(Cr),"watchTimeTracker",void 0),l(g(Cr),"currentFragmentPDT",void 0),l(g(Cr),"currentFragmentStart",void 0),Cr.DOM_CONTENT_LOADED_EVENT_END=_e$3.domContentLoadedEventEnd(),Cr.NAVIGATION_START=_e$3.navigationStart();var wr={debug:!1,minimumRebufferDuration:250,sustainedRebufferThreshold:1e3,playbackHeartbeatTime:25,beaconDomain:"litix.io",sampleRate:1,disableCookies:!1,respectDoNotTrack:!1,disableRebufferTracking:!1,disablePlayheadRebufferTracking:!1,errorTranslator:function(Hr){return Hr},emitTranslator:function(){for(var Hr=arguments.length,Gr=new Array(Hr),qr=0;qr<Hr;qr++)Gr[qr]=arguments[qr];return Gr},stateDataTranslator:function(Hr){return Hr}};Cr.mux=vr,Cr.id=xr,Er!=null&&Er.beaconDomain&&Cr.mux.log.warn("The `beaconDomain` setting has been deprecated in favor of `beaconCollectionDomain`. Please change your integration to use `beaconCollectionDomain` instead of `beaconDomain`."),Er=Object.assign(wr,Er),Er.data=Er.data||{},Er.data.property_key&&(Er.data.env_key=Er.data.property_key,delete Er.data.property_key),q$2.level=Er.debug?Y$2.DEBUG:Y$2.WARN,Cr.getPlayheadTime=Er.getPlayheadTime,Cr.getStateData=Er.getStateData||function(){return{}},Cr.getAdData=Er.getAdData||function(){},Cr.minimumRebufferDuration=Er.minimumRebufferDuration,Cr.sustainedRebufferThreshold=Er.sustainedRebufferThreshold,Cr.playbackHeartbeatTime=Er.playbackHeartbeatTime,Cr.disableRebufferTracking=Er.disableRebufferTracking,Cr.disableRebufferTracking&&Cr.mux.log.warn("Disabling rebuffer tracking. This should only be used in specific circumstances as a last resort when your player is known to unreliably track rebuffering."),Cr.disablePlayheadRebufferTracking=Er.disablePlayheadRebufferTracking,Cr.errorTranslator=Er.errorTranslator,Cr.emitTranslator=Er.emitTranslator,Cr.stateDataTranslator=Er.stateDataTranslator,Cr.playbackEventDispatcher=new cr(vr,Er.data.env_key,Er),Cr.data={player_instance_id:ee$4(),mux_sample_rate:Er.sampleRate,beacon_domain:Er.beaconCollectionDomain||Er.beaconDomain},Cr.data.view_sequence_number=1,Cr.data.player_sequence_number=1;var Rr=(function(){typeof this.data.view_start>"u"&&(this.data.view_start=this.mux.utils.now(),this.emit("viewstart"))}).bind(g(Cr));if(Cr.on("viewinit",function(Hr,Gr){this._resetVideoData(),this._resetViewData(),this._resetErrorData(),this._updateStateData(),Object.assign(this.data,Gr),this._initializeViewData(),this.one("play",Rr),this.one("adbreakstart",Rr)}),Cr.on("videochange",function(Hr,Gr){this._resetView(Gr)}),Cr.on("programchange",function(Hr,Gr){this.data.player_is_paused&&this.mux.log.warn("The `programchange` event is intended to be used when the content changes mid playback without the video source changing, however the video is not currently playing. If the video source is changing please use the videochange event otherwise you will lose startup time information."),this._resetView(Object.assign(Gr,{view_program_changed:!0})),Rr(),this.emit("play"),this.emit("playing")}),Cr.on("fragmentchange",function(Hr,Gr){this.currentFragmentPDT=Gr.currentFragmentPDT,this.currentFragmentStart=Gr.currentFragmentStart}),Cr.on("destroy",Cr.destroy),typeof window<"u"&&typeof window.addEventListener=="function"&&typeof window.removeEventListener=="function"){var kr=function(){var Hr=typeof Cr.data.view_start<"u";Cr.mux.WINDOW_HIDDEN=document.visibilityState==="hidden",Hr&&Cr.mux.WINDOW_HIDDEN&&(Cr.data.player_is_paused||Cr.emit("hb"))};window.addEventListener("visibilitychange",kr,!1);var Dr=function(Hr){Hr.persisted||Cr.destroy()};window.addEventListener("pagehide",Dr,!1),Cr.on("destroy",function(){window.removeEventListener("visibilitychange",kr),window.removeEventListener("pagehide",Dr)})}Cr.on("playerready",function(Hr,Gr){Object.assign(this.data,Gr)}),ja.forEach(function(Hr){Cr.on(Hr,function(Gr,qr){Hr.indexOf("ad")!==0&&this._updateStateData(),Object.assign(this.data,qr),this._sanitizeData()}),Cr.on("after"+Hr,function(){(Hr!=="error"||this.errorTracker.viewErrored)&&this.send(Hr)})}),Cr.on("viewend",function(Hr,Gr){Object.assign(Cr.data,Gr)});var Br=function(Hr){var Gr=this.mux.utils.now();this.data.player_init_time&&(this.data.player_startup_time=Gr-this.data.player_init_time),!this.mux.PLAYER_TRACKED&&this.NAVIGATION_START&&(this.mux.PLAYER_TRACKED=!0,(this.data.player_init_time||this.DOM_CONTENT_LOADED_EVENT_END)&&(this.data.page_load_time=Math.min(this.data.player_init_time||1/0,this.DOM_CONTENT_LOADED_EVENT_END||1/0)-this.NAVIGATION_START)),this.send("playerready"),delete this.data.player_startup_time,delete this.data.page_load_time};return Cr.one("playerready",Br),Cr.longResumeTracker=new fr(g(Cr)),Cr.errorTracker=new Ht$1(g(Cr)),new Xt$2(g(Cr)),Cr.seekingTracker=new Qt$1(g(Cr)),Cr.playheadTime=new Ft$2(g(Cr)),Cr.playbackHeartbeat=new Mt$1(g(Cr)),new Jt$2(g(Cr)),Cr.watchTimeTracker=new Bt$2(g(Cr)),new Ut$3(g(Cr)),Cr.adTracker=new Kt$1(g(Cr)),new jt$2(g(Cr)),new Wt$2(g(Cr)),new Gt$2(g(Cr)),new Yt$2(g(Cr)),new _r(g(Cr)),Er.hlsjs&&Cr.addHLSJS(Er),Er.dashjs&&Cr.addDashJS(Er),Cr.emit("viewinit",Er.data),Cr}return L(gr,[{key:"emit",value:function(vr,xr){var Er,Cr=Object.assign({viewer_time:this.mux.utils.now()},xr),wr=[vr,Cr];if(this.emitTranslator)try{wr=this.emitTranslator(vr,Cr)}catch(Rr){this.mux.log.warn("Exception in emit translator callback.",Rr)}wr!=null&&wr.length&&(Er=De$2(X$4(gr.prototype),"emit",this)).call.apply(Er,[this].concat(V$3(wr)))}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,typeof this.data.view_start<"u"&&(this.emit("viewend"),this.send("viewend")),this.playbackEventDispatcher.destroy(),this.removeHLSJS(),this.removeDashJS(),window.clearTimeout(this._heartBeatTimeout))}},{key:"send",value:function(vr){if(this.data.view_id){var xr=Object.assign({},this.data),Er=["player_program_time","player_manifest_newest_program_time","player_live_edge_program_time","player_program_time","video_holdback","video_part_holdback","video_target_duration","video_part_target_duration"];if(xr.video_source_is_live===void 0&&(xr.player_source_duration===1/0||xr.video_source_duration===1/0?xr.video_source_is_live=!0:(xr.player_source_duration>0||xr.video_source_duration>0)&&(xr.video_source_is_live=!1)),xr.video_source_is_live||Er.forEach(function(kr){xr[kr]=void 0}),xr.video_source_url=xr.video_source_url||xr.player_source_url,xr.video_source_url){var Cr=H$3(re$4(xr.video_source_url),2),wr=Cr[0],Rr=Cr[1];xr.video_source_domain=Rr,xr.video_source_hostname=wr}delete xr.ad_request_id,this.playbackEventDispatcher.send(vr,xr),this.data.view_sequence_number++,this.data.player_sequence_number++,Ga.has(vr)||this._restartHeartBeat(),vr==="viewend"&&delete this.data.view_id}}},{key:"_resetView",value:function(vr){this.emit("viewend"),this.send("viewend"),this.emit("viewinit",vr)}},{key:"_updateStateData",value:function(){var vr=this.getStateData();if(typeof this.stateDataTranslator=="function")try{vr=this.stateDataTranslator(vr)}catch(xr){this.mux.log.warn("Exception in stateDataTranslator translator callback.",xr)}Object.assign(this.data,vr),this.playheadTime._updatePlayheadTime(),this._sanitizeData()}},{key:"_sanitizeData",value:function(){var vr=this,xr=["player_width","player_height","video_source_width","video_source_height","player_playhead_time","video_source_bitrate"];xr.forEach(function(Cr){var wr=parseInt(vr.data[Cr],10);vr.data[Cr]=isNaN(wr)?void 0:wr});var Er=["player_source_url","video_source_url"];Er.forEach(function(Cr){if(vr.data[Cr]){var wr=vr.data[Cr].toLowerCase();(wr.indexOf("data:")===0||wr.indexOf("blob:")===0)&&(vr.data[Cr]="MSE style URL")}})}},{key:"_resetVideoData",value:function(){var vr=this;Object.keys(this.data).forEach(function(xr){xr.indexOf("video_")===0&&delete vr.data[xr]})}},{key:"_resetViewData",value:function(){var vr=this;Object.keys(this.data).forEach(function(xr){xr.indexOf("view_")===0&&delete vr.data[xr]}),this.data.view_sequence_number=1}},{key:"_resetErrorData",value:function(){delete this.data.player_error_code,delete this.data.player_error_message,delete this.data.player_error_context,delete this.data.player_error_severity,delete this.data.player_error_business_exception}},{key:"_initializeViewData",value:function(){var vr=this,xr=this.data.view_id=ee$4(),Er=function(){xr===vr.data.view_id&&O$1(vr.data,"player_view_count",1)};this.data.player_is_paused?this.one("play",Er):Er()}},{key:"_restartHeartBeat",value:function(){var vr=this;window.clearTimeout(this._heartBeatTimeout),this._heartBeatTimeout=window.setTimeout(function(){vr.data.player_is_paused||vr.emit("hb")},1e4)}},{key:"addHLSJS",value:function(vr){if(!vr.hlsjs){this.mux.log.warn("You must pass a valid hlsjs instance in order to track it.");return}if(this.hlsjs){this.mux.log.warn("An instance of HLS.js is already being monitored for this player.");return}this.hlsjs=vr.hlsjs,At$3(this.mux,this.id,vr.hlsjs,{},vr.Hls||window.Hls)}},{key:"removeHLSJS",value:function(){this.hlsjs&&(Ot$2(this.hlsjs),this.hlsjs=void 0)}},{key:"addDashJS",value:function(vr){if(!vr.dashjs){this.mux.log.warn("You must pass a valid dashjs instance in order to track it.");return}if(this.dashjs){this.mux.log.warn("An instance of Dash.js is already being monitored for this player.");return}this.dashjs=vr.dashjs,Pt$3(this.mux,this.id,vr.dashjs)}},{key:"removeDashJS",value:function(){this.dashjs&&(Nt$2(this.dashjs),this.dashjs=void 0)}}]),gr}(Ct$3),pr=Ja,he$2=G$2(Ur());function nt$1(){return he$2.default&&!!(he$2.default.fullscreenElement||he$2.default.webkitFullscreenElement||he$2.default.mozFullScreenElement||he$2.default.msFullscreenElement)}var yi$1=["loadstart","pause","play","playing","seeking","seeked","timeupdate","ratechange","stalled","waiting","error","ended"],gi$1={1:"MEDIA_ERR_ABORTED",2:"MEDIA_ERR_NETWORK",3:"MEDIA_ERR_DECODE",4:"MEDIA_ERR_SRC_NOT_SUPPORTED"};function ot$2(mr,hr,gr){var vr=H$3(se$3(hr),3),xr=vr[0],Er=vr[1],Cr=vr[2],wr=mr.log,Rr=mr.utils.getComputedStyle,kr=mr.utils.secondsToMs,Dr={automaticErrorTracking:!0};if(xr){if(Cr!=="video"&&Cr!=="audio")return wr.error("The element of `"+Er+"` was not a media element.")}else return wr.error("No element was found with the `"+Er+"` query selector.");xr.mux&&(xr.mux.destroy(),delete xr.mux,wr.warn("Already monitoring this video element, replacing existing event listeners"));var Br={getPlayheadTime:function(){return kr(xr.currentTime)},getStateData:function(){var Gr,qr,zr,Qr=((Gr=(qr=this).getPlayheadTime)===null||Gr===void 0?void 0:Gr.call(qr))||kr(xr.currentTime),sn=this.hlsjs&&this.hlsjs.url,hn=this.dashjs&&typeof this.dashjs.getSource=="function"&&this.dashjs.getSource(),vn={player_is_paused:xr.paused,player_width:parseInt(Rr(xr,"width")),player_height:parseInt(Rr(xr,"height")),player_autoplay_on:xr.autoplay,player_preload_on:xr.preload,player_language_code:xr.lang,player_is_fullscreen:nt$1(),video_poster_url:xr.poster,video_source_url:sn||hn||xr.currentSrc,video_source_duration:kr(xr.duration),video_source_height:xr.videoHeight,video_source_width:xr.videoWidth,view_dropped_frame_count:xr==null||(zr=xr.getVideoPlaybackQuality)===null||zr===void 0?void 0:zr.call(xr).droppedVideoFrames};if(xr.getStartDate&&Qr>0){var yn=xr.getStartDate();if(yn&&typeof yn.getTime=="function"&&yn.getTime()){var gn=yn.getTime();if(vn.player_program_time=gn+Qr,xr.seekable.length>0){var bn=gn+xr.seekable.end(xr.seekable.length-1);vn.player_live_edge_program_time=bn}}}return vn}};gr=Object.assign(Dr,gr,Br),gr.data=Object.assign({player_software:"HTML5 Video Element",player_mux_plugin_name:"VideoElementMonitor",player_mux_plugin_version:mr.VERSION},gr.data),xr.mux=xr.mux||{},xr.mux.deleted=!1,xr.mux.emit=function(Gr,qr){mr.emit(Er,Gr,qr)},xr.mux.updateData=function(Gr){xr.mux.emit("hb",Gr)};var Hr=function(){wr.error("The monitor for this video element has already been destroyed.")};xr.mux.destroy=function(){Object.keys(xr.mux.listeners).forEach(function(Gr){xr.removeEventListener(Gr,xr.mux.listeners[Gr],!1)}),delete xr.mux.listeners,xr.mux.destroy=Hr,xr.mux.swapElement=Hr,xr.mux.emit=Hr,xr.mux.addHLSJS=Hr,xr.mux.addDashJS=Hr,xr.mux.removeHLSJS=Hr,xr.mux.removeDashJS=Hr,xr.mux.updateData=Hr,xr.mux.setEmitTranslator=Hr,xr.mux.setStateDataTranslator=Hr,xr.mux.setGetPlayheadTime=Hr,xr.mux.deleted=!0,mr.emit(Er,"destroy")},xr.mux.swapElement=function(Gr){var qr=H$3(se$3(Gr),3),zr=qr[0],Qr=qr[1],sn=qr[2];if(zr){if(sn!=="video"&&sn!=="audio")return mr.log.error("The element of `"+Qr+"` was not a media element.")}else return mr.log.error("No element was found with the `"+Qr+"` query selector.");zr.muxId=xr.muxId,delete xr.muxId,zr.mux=zr.mux||{},zr.mux.listeners=Object.assign({},xr.mux.listeners),delete xr.mux.listeners,Object.keys(zr.mux.listeners).forEach(function(hn){xr.removeEventListener(hn,zr.mux.listeners[hn],!1),zr.addEventListener(hn,zr.mux.listeners[hn],!1)}),zr.mux.swapElement=xr.mux.swapElement,zr.mux.destroy=xr.mux.destroy,delete xr.mux,xr=zr},xr.mux.addHLSJS=function(Gr){mr.addHLSJS(Er,Gr)},xr.mux.addDashJS=function(Gr){mr.addDashJS(Er,Gr)},xr.mux.removeHLSJS=function(){mr.removeHLSJS(Er)},xr.mux.removeDashJS=function(){mr.removeDashJS(Er)},xr.mux.setEmitTranslator=function(Gr){mr.setEmitTranslator(Er,Gr)},xr.mux.setStateDataTranslator=function(Gr){mr.setStateDataTranslator(Er,Gr)},xr.mux.setGetPlayheadTime=function(Gr){Gr||(Gr=gr.getPlayheadTime),mr.setGetPlayheadTime(Er,Gr)},mr.init(Er,gr),mr.emit(Er,"playerready"),xr.paused||(mr.emit(Er,"play"),xr.readyState>2&&mr.emit(Er,"playing")),xr.mux.listeners={},yi$1.forEach(function(Gr){Gr==="error"&&!gr.automaticErrorTracking||(xr.mux.listeners[Gr]=function(){var qr={};if(Gr==="error"){if(!xr.error||xr.error.code===1)return;qr.player_error_code=xr.error.code,qr.player_error_message=gi$1[xr.error.code]||xr.error.message}mr.emit(Er,Gr,qr)},xr.addEventListener(Gr,xr.mux.listeners[Gr],!1))})}function st$1(mr,hr,gr,vr){var xr=vr;if(mr&&typeof mr[hr]=="function")try{xr=mr[hr].apply(mr,gr)}catch(Er){q$2.info("safeCall error",Er)}return xr}var ge$4=G$2(J$3()),ye$2;ge$4.default&&ge$4.default.WeakMap&&(ye$2=new WeakMap);function ut$3(mr,hr){if(!mr||!hr||!ge$4.default||typeof ge$4.default.getComputedStyle!="function")return"";var gr;return ye$2&&ye$2.has(mr)&&(gr=ye$2.get(mr)),gr||(gr=ge$4.default.getComputedStyle(mr,null),ye$2&&ye$2.set(mr,gr)),gr.getPropertyValue(hr)}function dt$2(mr){return Math.floor(mr*1e3)}var le$4={TARGET_DURATION:"#EXT-X-TARGETDURATION",PART_INF:"#EXT-X-PART-INF",SERVER_CONTROL:"#EXT-X-SERVER-CONTROL",INF:"#EXTINF",PROGRAM_DATE_TIME:"#EXT-X-PROGRAM-DATE-TIME",VERSION:"#EXT-X-VERSION",SESSION_DATA:"#EXT-X-SESSION-DATA"},Fe$2=function(mr){return this.buffer="",this.manifest={segments:[],serverControl:{},sessionData:{}},this.currentUri={},this.process(mr),this.manifest};Fe$2.prototype.process=function(mr){var hr;for(this.buffer+=mr,hr=this.buffer.indexOf(`
`);hr>-1;hr=this.buffer.indexOf(`
`))this.processLine(this.buffer.substring(0,hr)),this.buffer=this.buffer.substring(hr+1)};Fe$2.prototype.processLine=function(mr){var hr=mr.indexOf(":"),gr=Ei$1(mr,hr),vr=gr[0],xr=gr.length===2?ct$2(gr[1]):void 0;if(vr[0]!=="#")this.currentUri.uri=vr,this.manifest.segments.push(this.currentUri),this.manifest.targetDuration&&!("duration"in this.currentUri)&&(this.currentUri.duration=this.manifest.targetDuration),this.currentUri={};else switch(vr){case le$4.TARGET_DURATION:{if(!isFinite(xr)||xr<0)return;this.manifest.targetDuration=xr,this.setHoldBack();break}case le$4.PART_INF:{lt$3(this.manifest,gr),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),this.setHoldBack();break}case le$4.SERVER_CONTROL:{lt$3(this.manifest,gr),this.setHoldBack();break}case le$4.INF:{xr===0?this.currentUri.duration=.01:xr>0&&(this.currentUri.duration=xr);break}case le$4.PROGRAM_DATE_TIME:{var Er=xr,Cr=new Date(Er);this.manifest.dateTimeString||(this.manifest.dateTimeString=Er,this.manifest.dateTimeObject=Cr),this.currentUri.dateTimeString=Er,this.currentUri.dateTimeObject=Cr;break}case le$4.VERSION:{lt$3(this.manifest,gr);break}case le$4.SESSION_DATA:{var wr=ki(gr[1]),Rr=Ce$3(wr);Object.assign(this.manifest.sessionData,Rr)}}};Fe$2.prototype.setHoldBack=function(){var mr=this.manifest,hr=mr.serverControl,gr=mr.targetDuration,vr=mr.partTargetDuration;if(hr){var xr="holdBack",Er="partHoldBack",Cr=gr&&gr*3,wr=vr&&vr*2;gr&&!hr.hasOwnProperty(xr)&&(hr[xr]=Cr),Cr&&hr[xr]<Cr&&(hr[xr]=Cr),vr&&!hr.hasOwnProperty(Er)&&(hr[Er]=vr*3),vr&&hr[Er]<wr&&(hr[Er]=wr)}};var lt$3=function(mr,hr){var gr=Fr(hr[0].replace("#EXT-X-","")),vr;wi(hr[1])?(vr={},vr=Object.assign(Ti$1(hr[1]),vr)):vr=ct$2(hr[1]),mr[gr]=vr},Fr=function(mr){return mr.toLowerCase().replace(/-(\w)/g,function(hr){return hr[1].toUpperCase()})},ct$2=function(mr){if(mr.toLowerCase()==="yes"||mr.toLowerCase()==="no")return mr.toLowerCase()==="yes";var hr=mr.indexOf(":")!==-1?mr:parseFloat(mr);return isNaN(hr)?mr:hr},bi$1=function(mr){var hr={},gr=mr.split("=");if(gr.length>1){var vr=Fr(gr[0]);hr[vr]=ct$2(gr[1])}return hr},Ti$1=function(mr){for(var hr=mr.split(","),gr={},vr=0;hr.length>vr;vr++){var xr=hr[vr],Er=bi$1(xr);gr=Object.assign(Er,gr)}return gr},wi=function(mr){return mr.indexOf("=")>-1},Ei$1=function(mr,hr){return hr===-1?[mr]:[mr.substring(0,hr),mr.substring(hr+1)]},ki=function(mr){var hr={};if(mr){var gr=mr.search(","),vr=mr.slice(0,gr),xr=mr.slice(gr+1),Er=[vr,xr];return Er.forEach(function(Cr,wr){for(var Rr=Cr.replace(/['"]+/g,"").split("="),kr=0;kr<Rr.length;kr++)Rr[kr]==="DATA-ID"&&(hr["DATA-ID"]=Rr[1-kr]),Rr[kr]==="VALUE"&&(hr.VALUE=Rr[1-kr])}),{data:hr}}},Vr=Fe$2,xi={safeCall:st$1,safeIncrement:O$1,getComputedStyle:ut$3,secondsToMs:dt$2,assign:Object.assign,headersStringToObject:pe$4,cdnHeadersToRequestId:de$3,extractHostnameAndDomain:re$4,extractHostname:F$2,manifestParser:Vr,generateShortID:Oe$3,generateUUID:ee$4,now:A$2.now,findMediaElement:se$3},Wr=xi,Di={PLAYER_READY:"playerready",VIEW_INIT:"viewinit",VIDEO_CHANGE:"videochange",PLAY:"play",PAUSE:"pause",PLAYING:"playing",TIME_UPDATE:"timeupdate",SEEKING:"seeking",SEEKED:"seeked",REBUFFER_START:"rebufferstart",REBUFFER_END:"rebufferend",ERROR:"error",ENDED:"ended",RENDITION_CHANGE:"renditionchange",ORIENTATION_CHANGE:"orientationchange",AD_REQUEST:"adrequest",AD_RESPONSE:"adresponse",AD_BREAK_START:"adbreakstart",AD_PLAY:"adplay",AD_PLAYING:"adplaying",AD_PAUSE:"adpause",AD_FIRST_QUARTILE:"adfirstquartile",AD_MID_POINT:"admidpoint",AD_THIRD_QUARTILE:"adthirdquartile",AD_ENDED:"adended",AD_BREAK_END:"adbreakend",AD_ERROR:"aderror",REQUEST_COMPLETED:"requestcompleted",REQUEST_FAILED:"requestfailed",REQUEST_CANCELLED:"requestcanceled",HEARTBEAT:"hb",DESTROY:"destroy"},jr=Di,Si="mux-embed",Ri="5.5.0",qi="2.1",C$2={},ne$3=function(mr){var hr=arguments;typeof mr=="string"?ne$3.hasOwnProperty(mr)?be$1.default.setTimeout(function(){hr=Array.prototype.splice.call(hr,1),ne$3[mr].apply(null,hr)},0):q$2.warn("`"+mr+"` is an unknown task"):typeof mr=="function"?be$1.default.setTimeout(function(){mr(ne$3)},0):q$2.warn("`"+mr+"` is invalid.")},Ai$1={loaded:A$2.now(),NAME:Si,VERSION:Ri,API_VERSION:qi,PLAYER_TRACKED:!1,monitor:function(mr,hr){return ot$2(ne$3,mr,hr)},destroyMonitor:function(mr){var hr=H$3(se$3(mr),1),gr=hr[0];gr&&gr.mux&&typeof gr.mux.destroy=="function"?gr.mux.destroy():q$2.error("A video element monitor for `"+mr+"` has not been initialized via `mux.monitor`.")},addHLSJS:function(mr,hr){var gr=Q$4(mr);C$2[gr]?C$2[gr].addHLSJS(hr):q$2.error("A monitor for `"+gr+"` has not been initialized.")},addDashJS:function(mr,hr){var gr=Q$4(mr);C$2[gr]?C$2[gr].addDashJS(hr):q$2.error("A monitor for `"+gr+"` has not been initialized.")},removeHLSJS:function(mr){var hr=Q$4(mr);C$2[hr]?C$2[hr].removeHLSJS():q$2.error("A monitor for `"+hr+"` has not been initialized.")},removeDashJS:function(mr){var hr=Q$4(mr);C$2[hr]?C$2[hr].removeDashJS():q$2.error("A monitor for `"+hr+"` has not been initialized.")},init:function(mr,hr){ce$2()&&hr&&hr.respectDoNotTrack&&q$2.info("The browser's Do Not Track flag is enabled - Mux beaconing is disabled.");var gr=Q$4(mr);C$2[gr]=new pr(ne$3,gr,hr)},emit:function(mr,hr,gr){var vr=Q$4(mr);C$2[vr]?(C$2[vr].emit(hr,gr),hr==="destroy"&&delete C$2[vr]):q$2.error("A monitor for `"+vr+"` has not been initialized.")},updateData:function(mr,hr){var gr=Q$4(mr);C$2[gr]?C$2[gr].emit("hb",hr):q$2.error("A monitor for `"+gr+"` has not been initialized.")},setEmitTranslator:function(mr,hr){var gr=Q$4(mr);C$2[gr]?C$2[gr].emitTranslator=hr:q$2.error("A monitor for `"+gr+"` has not been initialized.")},setStateDataTranslator:function(mr,hr){var gr=Q$4(mr);C$2[gr]?C$2[gr].stateDataTranslator=hr:q$2.error("A monitor for `"+gr+"` has not been initialized.")},setGetPlayheadTime:function(mr,hr){var gr=Q$4(mr);C$2[gr]?C$2[gr].getPlayheadTime=hr:q$2.error("A monitor for `"+gr+"` has not been initialized.")},checkDoNotTrack:ce$2,log:q$2,utils:Wr,events:jr,WINDOW_HIDDEN:!1,WINDOW_UNLOADING:!1};Object.assign(ne$3,Ai$1);typeof be$1.default<"u"&&typeof be$1.default.addEventListener=="function"&&be$1.default.addEventListener("pagehide",function(mr){mr.persisted||(ne$3.WINDOW_UNLOADING=!0)},!1);var wd=ne$3;/*!
* JavaScript Cookie v2.1.3
* https://github.com/js-cookie/js-cookie
*
* Copyright 2006, 2015 Klaus Hartl & Fagner Brack
* Released under the MIT license
*/function getDefaultExportFromCjs(mr){return mr&&mr.__esModule&&Object.prototype.hasOwnProperty.call(mr,"default")?mr.default:mr}var urlToolkit={exports:{}};(function(mr,hr){(function(gr){var vr=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,xr=/^(?=([^\/?#]*))\1([^]*)$/,Er=/(?:\/|^)\.(?=\/)/g,Cr=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,wr={buildAbsoluteURL:function(Rr,kr,Dr){if(Dr=Dr||{},Rr=Rr.trim(),kr=kr.trim(),!kr){if(!Dr.alwaysNormalize)return Rr;var Br=wr.parseURL(Rr);if(!Br)throw new Error("Error trying to parse base URL.");return Br.path=wr.normalizePath(Br.path),wr.buildURLFromParts(Br)}var Hr=wr.parseURL(kr);if(!Hr)throw new Error("Error trying to parse relative URL.");if(Hr.scheme)return Dr.alwaysNormalize?(Hr.path=wr.normalizePath(Hr.path),wr.buildURLFromParts(Hr)):kr;var Gr=wr.parseURL(Rr);if(!Gr)throw new Error("Error trying to parse base URL.");if(!Gr.netLoc&&Gr.path&&Gr.path[0]!=="/"){var qr=xr.exec(Gr.path);Gr.netLoc=qr[1],Gr.path=qr[2]}Gr.netLoc&&!Gr.path&&(Gr.path="/");var zr={scheme:Gr.scheme,netLoc:Hr.netLoc,path:null,params:Hr.params,query:Hr.query,fragment:Hr.fragment};if(!Hr.netLoc&&(zr.netLoc=Gr.netLoc,Hr.path[0]!=="/"))if(!Hr.path)zr.path=Gr.path,Hr.params||(zr.params=Gr.params,Hr.query||(zr.query=Gr.query));else{var Qr=Gr.path,sn=Qr.substring(0,Qr.lastIndexOf("/")+1)+Hr.path;zr.path=wr.normalizePath(sn)}return zr.path===null&&(zr.path=Dr.alwaysNormalize?wr.normalizePath(Hr.path):Hr.path),wr.buildURLFromParts(zr)},parseURL:function(Rr){var kr=vr.exec(Rr);return kr?{scheme:kr[1]||"",netLoc:kr[2]||"",path:kr[3]||"",params:kr[4]||"",query:kr[5]||"",fragment:kr[6]||""}:null},normalizePath:function(Rr){for(Rr=Rr.split("").reverse().join("").replace(Er,"");Rr.length!==(Rr=Rr.replace(Cr,"")).length;);return Rr.split("").reverse().join("")},buildURLFromParts:function(Rr){return Rr.scheme+Rr.netLoc+Rr.path+Rr.params+Rr.query+Rr.fragment}};mr.exports=wr})()})(urlToolkit);var urlToolkitExports=urlToolkit.exports;function ownKeys(mr,hr){var gr=Object.keys(mr);if(Object.getOwnPropertySymbols){var vr=Object.getOwnPropertySymbols(mr);hr&&(vr=vr.filter(function(xr){return Object.getOwnPropertyDescriptor(mr,xr).enumerable})),gr.push.apply(gr,vr)}return gr}function _objectSpread2(mr){for(var hr=1;hr<arguments.length;hr++){var gr=arguments[hr]!=null?arguments[hr]:{};hr%2?ownKeys(Object(gr),!0).forEach(function(vr){_defineProperty(mr,vr,gr[vr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(mr,Object.getOwnPropertyDescriptors(gr)):ownKeys(Object(gr)).forEach(function(vr){Object.defineProperty(mr,vr,Object.getOwnPropertyDescriptor(gr,vr))})}return mr}function _toPrimitive(mr,hr){if(typeof mr!="object"||!mr)return mr;var gr=mr[Symbol.toPrimitive];if(gr!==void 0){var vr=gr.call(mr,hr||"default");if(typeof vr!="object")return vr;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hr==="string"?String:Number)(mr)}function _toPropertyKey(mr){var hr=_toPrimitive(mr,"string");return typeof hr=="symbol"?hr:String(hr)}function _defineProperty(mr,hr,gr){return hr=_toPropertyKey(hr),hr in mr?Object.defineProperty(mr,hr,{value:gr,enumerable:!0,configurable:!0,writable:!0}):mr[hr]=gr,mr}function _extends(){return _extends=Object.assign?Object.assign.bind():function(mr){for(var hr=1;hr<arguments.length;hr++){var gr=arguments[hr];for(var vr in gr)Object.prototype.hasOwnProperty.call(gr,vr)&&(mr[vr]=gr[vr])}return mr},_extends.apply(this,arguments)}const isFiniteNumber=Number.isFinite||function(mr){return typeof mr=="number"&&isFinite(mr)},isSafeInteger=Number.isSafeInteger||function(mr){return typeof mr=="number"&&Math.abs(mr)<=MAX_SAFE_INTEGER},MAX_SAFE_INTEGER=Number.MAX_SAFE_INTEGER||9007199254740991;let Events=function(mr){return mr.MEDIA_ATTACHING="hlsMediaAttaching",mr.MEDIA_ATTACHED="hlsMediaAttached",mr.MEDIA_DETACHING="hlsMediaDetaching",mr.MEDIA_DETACHED="hlsMediaDetached",mr.BUFFER_RESET="hlsBufferReset",mr.BUFFER_CODECS="hlsBufferCodecs",mr.BUFFER_CREATED="hlsBufferCreated",mr.BUFFER_APPENDING="hlsBufferAppending",mr.BUFFER_APPENDED="hlsBufferAppended",mr.BUFFER_EOS="hlsBufferEos",mr.BUFFER_FLUSHING="hlsBufferFlushing",mr.BUFFER_FLUSHED="hlsBufferFlushed",mr.MANIFEST_LOADING="hlsManifestLoading",mr.MANIFEST_LOADED="hlsManifestLoaded",mr.MANIFEST_PARSED="hlsManifestParsed",mr.LEVEL_SWITCHING="hlsLevelSwitching",mr.LEVEL_SWITCHED="hlsLevelSwitched",mr.LEVEL_LOADING="hlsLevelLoading",mr.LEVEL_LOADED="hlsLevelLoaded",mr.LEVEL_UPDATED="hlsLevelUpdated",mr.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",mr.LEVELS_UPDATED="hlsLevelsUpdated",mr.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",mr.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",mr.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",mr.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",mr.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",mr.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",mr.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",mr.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",mr.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",mr.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",mr.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",mr.CUES_PARSED="hlsCuesParsed",mr.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",mr.INIT_PTS_FOUND="hlsInitPtsFound",mr.FRAG_LOADING="hlsFragLoading",mr.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",mr.FRAG_LOADED="hlsFragLoaded",mr.FRAG_DECRYPTED="hlsFragDecrypted",mr.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",mr.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",mr.FRAG_PARSING_METADATA="hlsFragParsingMetadata",mr.FRAG_PARSED="hlsFragParsed",mr.FRAG_BUFFERED="hlsFragBuffered",mr.FRAG_CHANGED="hlsFragChanged",mr.FPS_DROP="hlsFpsDrop",mr.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",mr.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",mr.ERROR="hlsError",mr.DESTROYING="hlsDestroying",mr.KEY_LOADING="hlsKeyLoading",mr.KEY_LOADED="hlsKeyLoaded",mr.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",mr.BACK_BUFFER_REACHED="hlsBackBufferReached",mr.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",mr}({}),ErrorTypes=function(mr){return mr.NETWORK_ERROR="networkError",mr.MEDIA_ERROR="mediaError",mr.KEY_SYSTEM_ERROR="keySystemError",mr.MUX_ERROR="muxError",mr.OTHER_ERROR="otherError",mr}({}),ErrorDetails=function(mr){return mr.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",mr.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",mr.KEY_SYSTEM_NO_SESSION="keySystemNoSession",mr.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",mr.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",mr.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",mr.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",mr.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",mr.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",mr.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",mr.MANIFEST_LOAD_ERROR="manifestLoadError",mr.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",mr.MANIFEST_PARSING_ERROR="manifestParsingError",mr.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",mr.LEVEL_EMPTY_ERROR="levelEmptyError",mr.LEVEL_LOAD_ERROR="levelLoadError",mr.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",mr.LEVEL_PARSING_ERROR="levelParsingError",mr.LEVEL_SWITCH_ERROR="levelSwitchError",mr.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",mr.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",mr.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",mr.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",mr.FRAG_LOAD_ERROR="fragLoadError",mr.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",mr.FRAG_DECRYPT_ERROR="fragDecryptError",mr.FRAG_PARSING_ERROR="fragParsingError",mr.FRAG_GAP="fragGap",mr.REMUX_ALLOC_ERROR="remuxAllocError",mr.KEY_LOAD_ERROR="keyLoadError",mr.KEY_LOAD_TIMEOUT="keyLoadTimeOut",mr.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",mr.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",mr.BUFFER_APPEND_ERROR="bufferAppendError",mr.BUFFER_APPENDING_ERROR="bufferAppendingError",mr.BUFFER_STALLED_ERROR="bufferStalledError",mr.BUFFER_FULL_ERROR="bufferFullError",mr.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",mr.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",mr.INTERNAL_EXCEPTION="internalException",mr.INTERNAL_ABORTED="aborted",mr.UNKNOWN="unknown",mr}({});const noop=function(){},fakeLogger={trace:noop,debug:noop,log:noop,warn:noop,info:noop,error:noop};let exportedLogger=fakeLogger;function consolePrintFn(mr){const hr=self.console[mr];return hr?hr.bind(self.console,`[${mr}] >`):noop}function exportLoggerFunctions(mr,...hr){hr.forEach(function(gr){exportedLogger[gr]=mr[gr]?mr[gr].bind(mr):consolePrintFn(gr)})}function enableLogs(mr,hr){if(typeof console=="object"&&mr===!0||typeof mr=="object"){exportLoggerFunctions(mr,"debug","log","info","warn","error");try{exportedLogger.log(`Debug logs enabled for "${hr}" in hls.js version 1.5.19`)}catch{exportedLogger=fakeLogger}}else exportedLogger=fakeLogger}const logger=exportedLogger,DECIMAL_RESOLUTION_REGEX=/^(\d+)x(\d+)$/,ATTR_LIST_REGEX=/(.+?)=(".*?"|.*?)(?:,|$)/g;class AttrList{constructor(hr){typeof hr=="string"&&(hr=AttrList.parseAttrList(hr)),_extends(this,hr)}get clientAttrs(){return Object.keys(this).filter(hr=>hr.substring(0,2)==="X-")}decimalInteger(hr){const gr=parseInt(this[hr],10);return gr>Number.MAX_SAFE_INTEGER?1/0:gr}hexadecimalInteger(hr){if(this[hr]){let gr=(this[hr]||"0x").slice(2);gr=(gr.length&1?"0":"")+gr;const vr=new Uint8Array(gr.length/2);for(let xr=0;xr<gr.length/2;xr++)vr[xr]=parseInt(gr.slice(xr*2,xr*2+2),16);return vr}else return null}hexadecimalIntegerAsNumber(hr){const gr=parseInt(this[hr],16);return gr>Number.MAX_SAFE_INTEGER?1/0:gr}decimalFloatingPoint(hr){return parseFloat(this[hr])}optionalFloat(hr,gr){const vr=this[hr];return vr?parseFloat(vr):gr}enumeratedString(hr){return this[hr]}bool(hr){return this[hr]==="YES"}decimalResolution(hr){const gr=DECIMAL_RESOLUTION_REGEX.exec(this[hr]);if(gr!==null)return{width:parseInt(gr[1],10),height:parseInt(gr[2],10)}}static parseAttrList(hr){let gr;const vr={},xr='"';for(ATTR_LIST_REGEX.lastIndex=0;(gr=ATTR_LIST_REGEX.exec(hr))!==null;){let Er=gr[2];Er.indexOf(xr)===0&&Er.lastIndexOf(xr)===Er.length-1&&(Er=Er.slice(1,-1));const Cr=gr[1].trim();vr[Cr]=Er}return vr}}function isDateRangeCueAttribute(mr){return mr!=="ID"&&mr!=="CLASS"&&mr!=="START-DATE"&&mr!=="DURATION"&&mr!=="END-DATE"&&mr!=="END-ON-NEXT"}function isSCTE35Attribute(mr){return mr==="SCTE35-OUT"||mr==="SCTE35-IN"}class DateRange{constructor(hr,gr){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,gr){const vr=gr.attr;for(const xr in vr)if(Object.prototype.hasOwnProperty.call(hr,xr)&&hr[xr]!==vr[xr]){logger.warn(`DATERANGE tag attribute: "${xr}" does not match for tags with ID: "${hr.ID}"`),this._badValueForSameId=xr;break}hr=_extends(new AttrList({}),vr,hr)}if(this.attr=hr,this._startDate=new Date(hr["START-DATE"]),"END-DATE"in this.attr){const vr=new Date(this.attr["END-DATE"]);isFiniteNumber(vr.getTime())&&(this._endDate=vr)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get startDate(){return this._startDate}get endDate(){if(this._endDate)return this._endDate;const hr=this.duration;return hr!==null?new Date(this._startDate.getTime()+hr*1e3):null}get duration(){if("DURATION"in this.attr){const hr=this.attr.decimalFloatingPoint("DURATION");if(isFiniteNumber(hr))return hr}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isValid(){return!!this.id&&!this._badValueForSameId&&isFiniteNumber(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)}}class LoadStats{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var ElementaryStreamTypes={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class BaseSegment{constructor(hr){this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams={[ElementaryStreamTypes.AUDIO]:null,[ElementaryStreamTypes.VIDEO]:null,[ElementaryStreamTypes.AUDIOVIDEO]:null},this.baseurl=hr}setByteRange(hr,gr){const vr=hr.split("@",2);let xr;vr.length===1?xr=gr?.byteRangeEndOffset||0:xr=parseInt(vr[1]),this._byteRange=[xr,parseInt(vr[0])+xr]}get byteRange(){return this._byteRange?this._byteRange:[]}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=urlToolkitExports.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(hr){this._url=hr}}class Fragment extends BaseSegment{constructor(hr,gr){super(gr),this._decryptdata=null,this.rawProgramDateTime=null,this.programDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.stats=new LoadStats,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=hr}get decryptdata(){const{levelkeys:hr}=this;if(!hr&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){const gr=this.levelkeys.identity;if(gr)this._decryptdata=gr.getDecryptData(this.sn);else{const vr=Object.keys(this.levelkeys);if(vr.length===1)return this._decryptdata=this.levelkeys[vr[0]].getDecryptData(this.sn)}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(this.programDateTime===null||!isFiniteNumber(this.programDateTime))return null;const hr=isFiniteNumber(this.duration)?this.duration:0;return this.programDateTime+hr*1e3}get encrypted(){var hr;if((hr=this._decryptdata)!=null&&hr.encrypted)return!0;if(this.levelkeys){const gr=Object.keys(this.levelkeys),vr=gr.length;if(vr>1||vr===1&&this.levelkeys[gr[0]].encrypted)return!0}return!1}setKeyFormat(hr){if(this.levelkeys){const gr=this.levelkeys[hr];gr&&!this._decryptdata&&(this._decryptdata=gr.getDecryptData(this.sn))}}abortRequests(){var hr,gr;(hr=this.loader)==null||hr.abort(),(gr=this.keyLoader)==null||gr.abort()}setElementaryStreamInfo(hr,gr,vr,xr,Er,Cr=!1){const{elementaryStreams:wr}=this,Rr=wr[hr];if(!Rr){wr[hr]={startPTS:gr,endPTS:vr,startDTS:xr,endDTS:Er,partial:Cr};return}Rr.startPTS=Math.min(Rr.startPTS,gr),Rr.endPTS=Math.max(Rr.endPTS,vr),Rr.startDTS=Math.min(Rr.startDTS,xr),Rr.endDTS=Math.max(Rr.endDTS,Er)}clearElementaryStreamInfo(){const{elementaryStreams:hr}=this;hr[ElementaryStreamTypes.AUDIO]=null,hr[ElementaryStreamTypes.VIDEO]=null,hr[ElementaryStreamTypes.AUDIOVIDEO]=null}}let Part$1=class extends BaseSegment{constructor(hr,gr,vr,xr,Er){super(vr),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.stats=new LoadStats,this.duration=hr.decimalFloatingPoint("DURATION"),this.gap=hr.bool("GAP"),this.independent=hr.bool("INDEPENDENT"),this.relurl=hr.enumeratedString("URI"),this.fragment=gr,this.index=xr;const Cr=hr.enumeratedString("BYTERANGE");Cr&&this.setByteRange(Cr,Er),Er&&(this.fragOffset=Er.fragOffset+Er.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:hr}=this;return!!(hr.audio||hr.video||hr.audiovideo)}};const DEFAULT_TARGET_DURATION=10;class LevelDetails{constructor(hr){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=hr}reloaded(hr){if(!hr){this.advanced=!0,this.updated=!0;return}const gr=this.lastPartSn-hr.lastPartSn,vr=this.lastPartIndex-hr.lastPartIndex;this.updated=this.endSN!==hr.endSN||!!vr||!!gr||!this.live,this.advanced=this.endSN>hr.endSN||gr>0||gr===0&&vr>0,this.updated||this.advanced?this.misses=Math.floor(hr.misses*.6):this.misses=hr.misses+1,this.availabilityDelay=hr.availabilityDelay}get hasProgramDateTime(){return this.fragments.length?isFiniteNumber(this.fragments[this.fragments.length-1].programDateTime):!1}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||DEFAULT_TARGET_DURATION}get drift(){const hr=this.driftEndTime-this.driftStartTime;return hr>0?(this.driftEnd-this.driftStart)*1e3/hr:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var hr;return(hr=this.partList)!=null&&hr.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){var hr;return(hr=this.fragments)!=null&&hr.length?this.fragments[this.fragments.length-1].end:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var hr;return(hr=this.partList)!=null&&hr.length?this.partList[this.partList.length-1].index:-1}get lastPartSn(){var hr;return(hr=this.partList)!=null&&hr.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}function base64Decode(mr){return Uint8Array.from(atob(mr),hr=>hr.charCodeAt(0))}function getKeyIdBytes(mr){const hr=strToUtf8array(mr).subarray(0,16),gr=new Uint8Array(16);return gr.set(hr,16-hr.length),gr}function changeEndianness(mr){const hr=function(vr,xr,Er){const Cr=vr[xr];vr[xr]=vr[Er],vr[Er]=Cr};hr(mr,0,3),hr(mr,1,2),hr(mr,4,5),hr(mr,6,7)}function convertDataUriToArrayBytes(mr){const hr=mr.split(":");let gr=null;if(hr[0]==="data"&&hr.length===2){const vr=hr[1].split(";"),xr=vr[vr.length-1].split(",");if(xr.length===2){const Er=xr[0]==="base64",Cr=xr[1];Er?(vr.splice(-1,1),gr=base64Decode(Cr)):gr=getKeyIdBytes(Cr)}}return gr}function strToUtf8array(mr){return Uint8Array.from(unescape(encodeURIComponent(mr)),hr=>hr.charCodeAt(0))}const optionalSelf=typeof self<"u"?self:void 0;var KeySystems={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},KeySystemFormats={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function keySystemFormatToKeySystemDomain(mr){switch(mr){case KeySystemFormats.FAIRPLAY:return KeySystems.FAIRPLAY;case KeySystemFormats.PLAYREADY:return KeySystems.PLAYREADY;case KeySystemFormats.WIDEVINE:return KeySystems.WIDEVINE;case KeySystemFormats.CLEARKEY:return KeySystems.CLEARKEY}}var KeySystemIds={CENC:"1077efecc0b24d02ace33c1e52e2fb4b",CLEARKEY:"e2719d58a985b3c9781ab030af78d30e",FAIRPLAY:"94ce86fb07ff4f43adb893d2fa968ca2",PLAYREADY:"9a04f07998404286ab92e65be0885f95",WIDEVINE:"edef8ba979d64acea3c827dcd51d21ed"};function keySystemIdToKeySystemDomain(mr){if(mr===KeySystemIds.WIDEVINE)return KeySystems.WIDEVINE;if(mr===KeySystemIds.PLAYREADY)return KeySystems.PLAYREADY;if(mr===KeySystemIds.CENC||mr===KeySystemIds.CLEARKEY)return KeySystems.CLEARKEY}function keySystemDomainToKeySystemFormat(mr){switch(mr){case KeySystems.FAIRPLAY:return KeySystemFormats.FAIRPLAY;case KeySystems.PLAYREADY:return KeySystemFormats.PLAYREADY;case KeySystems.WIDEVINE:return KeySystemFormats.WIDEVINE;case KeySystems.CLEARKEY:return KeySystemFormats.CLEARKEY}}function getKeySystemsForConfig(mr){const{drmSystems:hr,widevineLicenseUrl:gr}=mr,vr=hr?[KeySystems.FAIRPLAY,KeySystems.WIDEVINE,KeySystems.PLAYREADY,KeySystems.CLEARKEY].filter(xr=>!!hr[xr]):[];return!vr[KeySystems.WIDEVINE]&&gr&&vr.push(KeySystems.WIDEVINE),vr}const requestMediaKeySystemAccess=function(mr){return optionalSelf!=null&&(mr=optionalSelf.navigator)!=null&&mr.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}();function getSupportedMediaKeySystemConfigurations(mr,hr,gr,vr){let xr;switch(mr){case KeySystems.FAIRPLAY:xr=["cenc","sinf"];break;case KeySystems.WIDEVINE:case KeySystems.PLAYREADY:xr=["cenc"];break;case KeySystems.CLEARKEY:xr=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${mr}`)}return createMediaKeySystemConfigurations(xr,hr,gr,vr)}function createMediaKeySystemConfigurations(mr,hr,gr,vr){return[{initDataTypes:mr,persistentState:vr.persistentState||"optional",distinctiveIdentifier:vr.distinctiveIdentifier||"optional",sessionTypes:vr.sessionTypes||[vr.sessionType||"temporary"],audioCapabilities:hr.map(Er=>({contentType:`audio/mp4; codecs="${Er}"`,robustness:vr.audioRobustness||"",encryptionScheme:vr.audioEncryptionScheme||null})),videoCapabilities:gr.map(Er=>({contentType:`video/mp4; codecs="${Er}"`,robustness:vr.videoRobustness||"",encryptionScheme:vr.videoEncryptionScheme||null}))}]}function parsePlayReadyWRM(mr){const hr=new Uint16Array(mr.buffer,mr.byteOffset,mr.byteLength/2),gr=String.fromCharCode.apply(null,Array.from(hr)),vr=gr.substring(gr.indexOf("<"),gr.length),Cr=new DOMParser().parseFromString(vr,"text/xml").getElementsByTagName("KID")[0];if(Cr){const wr=Cr.childNodes[0]?Cr.childNodes[0].nodeValue:Cr.getAttribute("VALUE");if(wr){const Rr=base64Decode(wr).subarray(0,16);return changeEndianness(Rr),Rr}}return null}function sliceUint8(mr,hr,gr){return Uint8Array.prototype.slice?mr.slice(hr,gr):new Uint8Array(Array.prototype.slice.call(mr,hr,gr))}const isHeader$2=(mr,hr)=>hr+10<=mr.length&&mr[hr]===73&&mr[hr+1]===68&&mr[hr+2]===51&&mr[hr+3]<255&&mr[hr+4]<255&&mr[hr+6]<128&&mr[hr+7]<128&&mr[hr+8]<128&&mr[hr+9]<128,isFooter=(mr,hr)=>hr+10<=mr.length&&mr[hr]===51&&mr[hr+1]===68&&mr[hr+2]===73&&mr[hr+3]<255&&mr[hr+4]<255&&mr[hr+6]<128&&mr[hr+7]<128&&mr[hr+8]<128&&mr[hr+9]<128,getID3Data=(mr,hr)=>{const gr=hr;let vr=0;for(;isHeader$2(mr,hr);){vr+=10;const xr=readSize(mr,hr+6);vr+=xr,isFooter(mr,hr+10)&&(vr+=10),hr+=vr}if(vr>0)return mr.subarray(gr,gr+vr)},readSize=(mr,hr)=>{let gr=0;return gr=(mr[hr]&127)<<21,gr|=(mr[hr+1]&127)<<14,gr|=(mr[hr+2]&127)<<7,gr|=mr[hr+3]&127,gr},canParse$2=(mr,hr)=>isHeader$2(mr,hr)&&readSize(mr,hr+6)+10<=mr.length-hr,getTimeStamp=mr=>{const hr=getID3Frames(mr);for(let gr=0;gr<hr.length;gr++){const vr=hr[gr];if(isTimeStampFrame(vr))return readTimeStamp(vr)}},isTimeStampFrame=mr=>mr&&mr.key==="PRIV"&&mr.info==="com.apple.streaming.transportStreamTimestamp",getFrameData=mr=>{const hr=String.fromCharCode(mr[0],mr[1],mr[2],mr[3]),gr=readSize(mr,4),vr=10;return{type:hr,size:gr,data:mr.subarray(vr,vr+gr)}},getID3Frames=mr=>{let hr=0;const gr=[];for(;isHeader$2(mr,hr);){const vr=readSize(mr,hr+6);hr+=10;const xr=hr+vr;for(;hr+8<xr;){const Er=getFrameData(mr.subarray(hr)),Cr=decodeFrame(Er);Cr&&gr.push(Cr),hr+=Er.size+10}isFooter(mr,hr)&&(hr+=10)}return gr},decodeFrame=mr=>mr.type==="PRIV"?decodePrivFrame(mr):mr.type[0]==="W"?decodeURLFrame(mr):decodeTextFrame(mr),decodePrivFrame=mr=>{if(mr.size<2)return;const hr=utf8ArrayToStr(mr.data,!0),gr=new Uint8Array(mr.data.subarray(hr.length+1));return{key:mr.type,info:hr,data:gr.buffer}},decodeTextFrame=mr=>{if(mr.size<2)return;if(mr.type==="TXXX"){let gr=1;const vr=utf8ArrayToStr(mr.data.subarray(gr),!0);gr+=vr.length+1;const xr=utf8ArrayToStr(mr.data.subarray(gr));return{key:mr.type,info:vr,data:xr}}const hr=utf8ArrayToStr(mr.data.subarray(1));return{key:mr.type,data:hr}},decodeURLFrame=mr=>{if(mr.type==="WXXX"){if(mr.size<2)return;let gr=1;const vr=utf8ArrayToStr(mr.data.subarray(gr),!0);gr+=vr.length+1;const xr=utf8ArrayToStr(mr.data.subarray(gr));return{key:mr.type,info:vr,data:xr}}const hr=utf8ArrayToStr(mr.data);return{key:mr.type,data:hr}},readTimeStamp=mr=>{if(mr.data.byteLength===8){const hr=new Uint8Array(mr.data),gr=hr[3]&1;let vr=(hr[4]<<23)+(hr[5]<<15)+(hr[6]<<7)+hr[7];return vr/=45,gr&&(vr+=4772185884e-2),Math.round(vr)}},utf8ArrayToStr=(mr,hr=!1)=>{const gr=getTextDecoder();if(gr){const kr=gr.decode(mr);if(hr){const Dr=kr.indexOf("\0");return Dr!==-1?kr.substring(0,Dr):kr}return kr.replace(/\0/g,"")}const vr=mr.length;let xr,Er,Cr,wr="",Rr=0;for(;Rr<vr;){if(xr=mr[Rr++],xr===0&&hr)return wr;if(xr===0||xr===3)continue;switch(xr>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:wr+=String.fromCharCode(xr);break;case 12:case 13:Er=mr[Rr++],wr+=String.fromCharCode((xr&31)<<6|Er&63);break;case 14:Er=mr[Rr++],Cr=mr[Rr++],wr+=String.fromCharCode((xr&15)<<12|(Er&63)<<6|(Cr&63)<<0);break}}return wr};let decoder;function getTextDecoder(){if(!navigator.userAgent.includes("PlayStation 4"))return!decoder&&typeof self.TextDecoder<"u"&&(decoder=new self.TextDecoder("utf-8")),decoder}const Hex={hexDump:function(mr){let hr="";for(let gr=0;gr<mr.length;gr++){let vr=mr[gr].toString(16);vr.length<2&&(vr="0"+vr),hr+=vr}return hr}},UINT32_MAX$1=Math.pow(2,32)-1,push=[].push,RemuxerTrackIdConfig={video:1,audio:2,id3:3,text:4};function bin2str(mr){return String.fromCharCode.apply(null,mr)}function readUint16(mr,hr){const gr=mr[hr]<<8|mr[hr+1];return gr<0?65536+gr:gr}function readUint32(mr,hr){const gr=readSint32(mr,hr);return gr<0?4294967296+gr:gr}function readUint64(mr,hr){let gr=readUint32(mr,hr);return gr*=Math.pow(2,32),gr+=readUint32(mr,hr+4),gr}function readSint32(mr,hr){return mr[hr]<<24|mr[hr+1]<<16|mr[hr+2]<<8|mr[hr+3]}function writeUint32(mr,hr,gr){mr[hr]=gr>>24,mr[hr+1]=gr>>16&255,mr[hr+2]=gr>>8&255,mr[hr+3]=gr&255}function hasMoofData(mr){const hr=mr.byteLength;for(let gr=0;gr<hr;){const vr=readUint32(mr,gr);if(vr>8&&mr[gr+4]===109&&mr[gr+5]===111&&mr[gr+6]===111&&mr[gr+7]===102)return!0;gr=vr>1?gr+vr:hr}return!1}function findBox(mr,hr){const gr=[];if(!hr.length)return gr;const vr=mr.byteLength;for(let xr=0;xr<vr;){const Er=readUint32(mr,xr),Cr=bin2str(mr.subarray(xr+4,xr+8)),wr=Er>1?xr+Er:vr;if(Cr===hr[0])if(hr.length===1)gr.push(mr.subarray(xr+8,wr));else{const Rr=findBox(mr.subarray(xr+8,wr),hr.slice(1));Rr.length&&push.apply(gr,Rr)}xr=wr}return gr}function parseSegmentIndex(mr){const hr=[],gr=mr[0];let vr=8;const xr=readUint32(mr,vr);vr+=4;let Er=0,Cr=0;gr===0?(Er=readUint32(mr,vr),Cr=readUint32(mr,vr+4),vr+=8):(Er=readUint64(mr,vr),Cr=readUint64(mr,vr+8),vr+=16),vr+=2;let wr=mr.length+Cr;const Rr=readUint16(mr,vr);vr+=2;for(let kr=0;kr<Rr;kr++){let Dr=vr;const Br=readUint32(mr,Dr);Dr+=4;const Hr=Br&2147483647;if((Br&2147483648)>>>31===1)return logger.warn("SIDX has hierarchical references (not supported)"),null;const qr=readUint32(mr,Dr);Dr+=4,hr.push({referenceSize:Hr,subsegmentDuration:qr,info:{duration:qr/xr,start:wr,end:wr+Hr-1}}),wr+=Hr,Dr+=4,vr=Dr}return{earliestPresentationTime:Er,timescale:xr,version:gr,referencesCount:Rr,references:hr}}function parseInitSegment(mr){const hr=[],gr=findBox(mr,["moov","trak"]);for(let xr=0;xr<gr.length;xr++){const Er=gr[xr],Cr=findBox(Er,["tkhd"])[0];if(Cr){let wr=Cr[0];const Rr=readUint32(Cr,wr===0?12:20),kr=findBox(Er,["mdia","mdhd"])[0];if(kr){wr=kr[0];const Dr=readUint32(kr,wr===0?12:20),Br=findBox(Er,["mdia","hdlr"])[0];if(Br){const Hr=bin2str(Br.subarray(8,12)),Gr={soun:ElementaryStreamTypes.AUDIO,vide:ElementaryStreamTypes.VIDEO}[Hr];if(Gr){const qr=findBox(Er,["mdia","minf","stbl","stsd"])[0],zr=parseStsd(qr);hr[Rr]={timescale:Dr,type:Gr},hr[Gr]=_objectSpread2({timescale:Dr,id:Rr},zr)}}}}}return findBox(mr,["moov","mvex","trex"]).forEach(xr=>{const Er=readUint32(xr,4),Cr=hr[Er];Cr&&(Cr.default={duration:readUint32(xr,12),flags:readUint32(xr,20)})}),hr}function parseStsd(mr){const hr=mr.subarray(8),gr=hr.subarray(86),vr=bin2str(hr.subarray(4,8));let xr=vr;const Er=vr==="enca"||vr==="encv";if(Er){const wr=findBox(hr,[vr])[0].subarray(vr==="enca"?28:78);findBox(wr,["sinf"]).forEach(kr=>{const Dr=findBox(kr,["schm"])[0];if(Dr){const Br=bin2str(Dr.subarray(4,8));if(Br==="cbcs"||Br==="cenc"){const Hr=findBox(kr,["frma"])[0];Hr&&(xr=bin2str(Hr))}}})}switch(xr){case"avc1":case"avc2":case"avc3":case"avc4":{const Cr=findBox(gr,["avcC"])[0];xr+="."+toHex(Cr[1])+toHex(Cr[2])+toHex(Cr[3]);break}case"mp4a":{const Cr=findBox(hr,[vr])[0],wr=findBox(Cr.subarray(28),["esds"])[0];if(wr&&wr.length>12){let Rr=4;if(wr[Rr++]!==3)break;Rr=skipBERInteger(wr,Rr),Rr+=2;const kr=wr[Rr++];if(kr&128&&(Rr+=2),kr&64&&(Rr+=wr[Rr++]),wr[Rr++]!==4)break;Rr=skipBERInteger(wr,Rr);const Dr=wr[Rr++];if(Dr===64)xr+="."+toHex(Dr);else break;if(Rr+=12,wr[Rr++]!==5)break;Rr=skipBERInteger(wr,Rr);const Br=wr[Rr++];let Hr=(Br&248)>>3;Hr===31&&(Hr+=1+((Br&7)<<3)+((wr[Rr]&224)>>5)),xr+="."+Hr}break}case"hvc1":case"hev1":{const Cr=findBox(gr,["hvcC"])[0],wr=Cr[1],Rr=["","A","B","C"][wr>>6],kr=wr&31,Dr=readUint32(Cr,2),Br=(wr&32)>>5?"H":"L",Hr=Cr[12],Gr=Cr.subarray(6,12);xr+="."+Rr+kr,xr+="."+Dr.toString(16).toUpperCase(),xr+="."+Br+Hr;let qr="";for(let zr=Gr.length;zr--;){const Qr=Gr[zr];(Qr||qr)&&(qr="."+Qr.toString(16).toUpperCase()+qr)}xr+=qr;break}case"dvh1":case"dvhe":{const Cr=findBox(gr,["dvcC"])[0],wr=Cr[2]>>1&127,Rr=Cr[2]<<5&32|Cr[3]>>3&31;xr+="."+addLeadingZero(wr)+"."+addLeadingZero(Rr);break}case"vp09":{const Cr=findBox(gr,["vpcC"])[0],wr=Cr[4],Rr=Cr[5],kr=Cr[6]>>4&15;xr+="."+addLeadingZero(wr)+"."+addLeadingZero(Rr)+"."+addLeadingZero(kr);break}case"av01":{const Cr=findBox(gr,["av1C"])[0],wr=Cr[1]>>>5,Rr=Cr[1]&31,kr=Cr[2]>>>7?"H":"M",Dr=(Cr[2]&64)>>6,Br=(Cr[2]&32)>>5,Hr=wr===2&&Dr?Br?12:10:Dr?10:8,Gr=(Cr[2]&16)>>4,qr=(Cr[2]&8)>>3,zr=(Cr[2]&4)>>2,Qr=Cr[2]&3;xr+="."+wr+"."+addLeadingZero(Rr)+kr+"."+addLeadingZero(Hr)+"."+Gr+"."+qr+zr+Qr+"."+addLeadingZero(1)+"."+addLeadingZero(1)+"."+addLeadingZero(1)+"."+0;break}}return{codec:xr,encrypted:Er}}function skipBERInteger(mr,hr){const gr=hr+5;for(;mr[hr++]&128&&hr<gr;);return hr}function toHex(mr){return("0"+mr.toString(16).toUpperCase()).slice(-2)}function addLeadingZero(mr){return(mr<10?"0":"")+mr}function patchEncyptionData(mr,hr){if(!mr||!hr)return mr;const gr=hr.keyId;return gr&&hr.isCommonEncryption&&findBox(mr,["moov","trak"]).forEach(xr=>{const Cr=findBox(xr,["mdia","minf","stbl","stsd"])[0].subarray(8);let wr=findBox(Cr,["enca"]);const Rr=wr.length>0;Rr||(wr=findBox(Cr,["encv"])),wr.forEach(kr=>{const Dr=Rr?kr.subarray(28):kr.subarray(78);findBox(Dr,["sinf"]).forEach(Hr=>{const Gr=parseSinf(Hr);if(Gr){const qr=Gr.subarray(8,24);qr.some(zr=>zr!==0)||(logger.log(`[eme] Patching keyId in 'enc${Rr?"a":"v"}>sinf>>tenc' box: ${Hex.hexDump(qr)} -> ${Hex.hexDump(gr)}`),Gr.set(gr,8))}})})}),mr}function parseSinf(mr){const hr=findBox(mr,["schm"])[0];if(hr){const gr=bin2str(hr.subarray(4,8));if(gr==="cbcs"||gr==="cenc")return findBox(mr,["schi","tenc"])[0]}return null}function getStartDTS(mr,hr){return findBox(hr,["moof","traf"]).reduce((gr,vr)=>{const xr=findBox(vr,["tfdt"])[0],Er=xr[0],Cr=findBox(vr,["tfhd"]).reduce((wr,Rr)=>{const kr=readUint32(Rr,4),Dr=mr[kr];if(Dr){let Br=readUint32(xr,4);if(Er===1){if(Br===UINT32_MAX$1)return logger.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"),wr;Br*=UINT32_MAX$1+1,Br+=readUint32(xr,8)}const Hr=Dr.timescale||9e4,Gr=Br/Hr;if(isFiniteNumber(Gr)&&(wr===null||Gr<wr))return Gr}return wr},null);return Cr!==null&&isFiniteNumber(Cr)&&(gr===null||Cr<gr)?Cr:gr},null)}function getDuration(mr,hr){let gr=0,vr=0,xr=0;const Er=findBox(mr,["moof","traf"]);for(let Cr=0;Cr<Er.length;Cr++){const wr=Er[Cr],Rr=findBox(wr,["tfhd"])[0],kr=readUint32(Rr,4),Dr=hr[kr];if(!Dr)continue;const Br=Dr.default,Hr=readUint32(Rr,0)|Br?.flags;let Gr=Br?.duration;Hr&8&&(Hr&2?Gr=readUint32(Rr,12):Gr=readUint32(Rr,8));const qr=Dr.timescale||9e4,zr=findBox(wr,["trun"]);for(let Qr=0;Qr<zr.length;Qr++){if(gr=computeRawDurationFromSamples(zr[Qr]),!gr&&Gr){const sn=readUint32(zr[Qr],4);gr=Gr*sn}Dr.type===ElementaryStreamTypes.VIDEO?vr+=gr/qr:Dr.type===ElementaryStreamTypes.AUDIO&&(xr+=gr/qr)}}if(vr===0&&xr===0){let Cr=1/0,wr=0,Rr=0;const kr=findBox(mr,["sidx"]);for(let Dr=0;Dr<kr.length;Dr++){const Br=parseSegmentIndex(kr[Dr]);if(Br!=null&&Br.references){Cr=Math.min(Cr,Br.earliestPresentationTime/Br.timescale);const Hr=Br.references.reduce((Gr,qr)=>Gr+qr.info.duration||0,0);wr=Math.max(wr,Hr+Br.earliestPresentationTime/Br.timescale),Rr=wr-Cr}}if(Rr&&isFiniteNumber(Rr))return Rr}return vr||xr}function computeRawDurationFromSamples(mr){const hr=readUint32(mr,0);let gr=8;hr&1&&(gr+=4),hr&4&&(gr+=4);let vr=0;const xr=readUint32(mr,4);for(let Er=0;Er<xr;Er++){if(hr&256){const Cr=readUint32(mr,gr);vr+=Cr,gr+=4}hr&512&&(gr+=4),hr&1024&&(gr+=4),hr&2048&&(gr+=4)}return vr}function offsetStartDTS(mr,hr,gr){findBox(hr,["moof","traf"]).forEach(vr=>{findBox(vr,["tfhd"]).forEach(xr=>{const Er=readUint32(xr,4),Cr=mr[Er];if(!Cr)return;const wr=Cr.timescale||9e4;findBox(vr,["tfdt"]).forEach(Rr=>{const kr=Rr[0],Dr=gr*wr;if(Dr){let Br=readUint32(Rr,4);if(kr===0)Br-=Dr,Br=Math.max(Br,0),writeUint32(Rr,4,Br);else{Br*=Math.pow(2,32),Br+=readUint32(Rr,8),Br-=Dr,Br=Math.max(Br,0);const Hr=Math.floor(Br/(UINT32_MAX$1+1)),Gr=Math.floor(Br%(UINT32_MAX$1+1));writeUint32(Rr,4,Hr),writeUint32(Rr,8,Gr)}}})})})}function segmentValidRange(mr){const hr={valid:null,remainder:null},gr=findBox(mr,["moof"]);if(gr.length<2)return hr.remainder=mr,hr;const vr=gr[gr.length-1];return hr.valid=sliceUint8(mr,0,vr.byteOffset-8),hr.remainder=sliceUint8(mr,vr.byteOffset-8),hr}function appendUint8Array(mr,hr){const gr=new Uint8Array(mr.length+hr.length);return gr.set(mr),gr.set(hr,mr.length),gr}function parseSamples(mr,hr){const gr=[],vr=hr.samples,xr=hr.timescale,Er=hr.id;let Cr=!1;return findBox(vr,["moof"]).map(Rr=>{const kr=Rr.byteOffset-8;findBox(Rr,["traf"]).map(Br=>{const Hr=findBox(Br,["tfdt"]).map(Gr=>{const qr=Gr[0];let zr=readUint32(Gr,4);return qr===1&&(zr*=Math.pow(2,32),zr+=readUint32(Gr,8)),zr/xr})[0];return Hr!==void 0&&(mr=Hr),findBox(Br,["tfhd"]).map(Gr=>{const qr=readUint32(Gr,4),zr=readUint32(Gr,0)&16777215,Qr=(zr&1)!==0,sn=(zr&2)!==0,hn=(zr&8)!==0;let vn=0;const yn=(zr&16)!==0;let gn=0;const bn=(zr&32)!==0;let xn=8;qr===Er&&(Qr&&(xn+=8),sn&&(xn+=4),hn&&(vn=readUint32(Gr,xn),xn+=4),yn&&(gn=readUint32(Gr,xn),xn+=4),bn&&(xn+=4),hr.type==="video"&&(Cr=isHEVC(hr.codec)),findBox(Br,["trun"]).map($n=>{const Sn=$n[0],Cn=readUint32($n,0)&16777215,Rn=(Cn&1)!==0;let Bn=0;const Fn=(Cn&4)!==0,Hn=(Cn&256)!==0;let Gn=0;const qn=(Cn&512)!==0;let On=0;const wn=(Cn&1024)!==0,_n=(Cn&2048)!==0;let Tn=0;const Mn=readUint32($n,4);let Ln=8;Rn&&(Bn=readUint32($n,Ln),Ln+=4),Fn&&(Ln+=4);let jn=Bn+kr;for(let Kn=0;Kn<Mn;Kn++){if(Hn?(Gn=readUint32($n,Ln),Ln+=4):Gn=vn,qn?(On=readUint32($n,Ln),Ln+=4):On=gn,wn&&(Ln+=4),_n&&(Sn===0?Tn=readUint32($n,Ln):Tn=readSint32($n,Ln),Ln+=4),hr.type===ElementaryStreamTypes.VIDEO){let Nn=0;for(;Nn<On;){const An=readUint32(vr,jn);if(jn+=4,isSEIMessage(Cr,vr[jn])){const kn=vr.subarray(jn,jn+An);parseSEIMessageFromNALu(kn,Cr?2:1,mr+Tn/xr,gr)}jn+=An,Nn+=An+4}}mr+=Gn/xr}}))})})}),gr}function isHEVC(mr){if(!mr)return!1;const hr=mr.indexOf("."),gr=hr<0?mr:mr.substring(0,hr);return gr==="hvc1"||gr==="hev1"||gr==="dvh1"||gr==="dvhe"}function isSEIMessage(mr,hr){if(mr){const gr=hr>>1&63;return gr===39||gr===40}else return(hr&31)===6}function parseSEIMessageFromNALu(mr,hr,gr,vr){const xr=discardEPB(mr);let Er=0;Er+=hr;let Cr=0,wr=0,Rr=0;for(;Er<xr.length;){Cr=0;do{if(Er>=xr.length)break;Rr=xr[Er++],Cr+=Rr}while(Rr===255);wr=0;do{if(Er>=xr.length)break;Rr=xr[Er++],wr+=Rr}while(Rr===255);const kr=xr.length-Er;let Dr=Er;if(wr<kr)Er+=wr;else if(wr>kr){logger.error(`Malformed SEI payload. ${wr} is too small, only ${kr} bytes left to parse.`);break}if(Cr===4){if(xr[Dr++]===181){const Hr=readUint16(xr,Dr);if(Dr+=2,Hr===49){const Gr=readUint32(xr,Dr);if(Dr+=4,Gr===1195456820){const qr=xr[Dr++];if(qr===3){const zr=xr[Dr++],Qr=31&zr,sn=64&zr,hn=sn?2+Qr*3:0,vn=new Uint8Array(hn);if(sn){vn[0]=zr;for(let yn=1;yn<hn;yn++)vn[yn]=xr[Dr++]}vr.push({type:qr,payloadType:Cr,pts:gr,bytes:vn})}}}}}else if(Cr===5&&wr>16){const Br=[];for(let qr=0;qr<16;qr++){const zr=xr[Dr++].toString(16);Br.push(zr.length==1?"0"+zr:zr),(qr===3||qr===5||qr===7||qr===9)&&Br.push("-")}const Hr=wr-16,Gr=new Uint8Array(Hr);for(let qr=0;qr<Hr;qr++)Gr[qr]=xr[Dr++];vr.push({payloadType:Cr,pts:gr,uuid:Br.join(""),userData:utf8ArrayToStr(Gr),userDataBytes:Gr})}}}function discardEPB(mr){const hr=mr.byteLength,gr=[];let vr=1;for(;vr<hr-2;)mr[vr]===0&&mr[vr+1]===0&&mr[vr+2]===3?(gr.push(vr+2),vr+=2):vr++;if(gr.length===0)return mr;const xr=hr-gr.length,Er=new Uint8Array(xr);let Cr=0;for(vr=0;vr<xr;Cr++,vr++)Cr===gr[0]&&(Cr++,gr.shift()),Er[vr]=mr[Cr];return Er}function parseEmsg(mr){const hr=mr[0];let gr="",vr="",xr=0,Er=0,Cr=0,wr=0,Rr=0,kr=0;if(hr===0){for(;bin2str(mr.subarray(kr,kr+1))!=="\0";)gr+=bin2str(mr.subarray(kr,kr+1)),kr+=1;for(gr+=bin2str(mr.subarray(kr,kr+1)),kr+=1;bin2str(mr.subarray(kr,kr+1))!=="\0";)vr+=bin2str(mr.subarray(kr,kr+1)),kr+=1;vr+=bin2str(mr.subarray(kr,kr+1)),kr+=1,xr=readUint32(mr,12),Er=readUint32(mr,16),wr=readUint32(mr,20),Rr=readUint32(mr,24),kr=28}else if(hr===1){kr+=4,xr=readUint32(mr,kr),kr+=4;const Br=readUint32(mr,kr);kr+=4;const Hr=readUint32(mr,kr);for(kr+=4,Cr=2**32*Br+Hr,isSafeInteger(Cr)||(Cr=Number.MAX_SAFE_INTEGER,logger.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),wr=readUint32(mr,kr),kr+=4,Rr=readUint32(mr,kr),kr+=4;bin2str(mr.subarray(kr,kr+1))!=="\0";)gr+=bin2str(mr.subarray(kr,kr+1)),kr+=1;for(gr+=bin2str(mr.subarray(kr,kr+1)),kr+=1;bin2str(mr.subarray(kr,kr+1))!=="\0";)vr+=bin2str(mr.subarray(kr,kr+1)),kr+=1;vr+=bin2str(mr.subarray(kr,kr+1)),kr+=1}const Dr=mr.subarray(kr,mr.byteLength);return{schemeIdUri:gr,value:vr,timeScale:xr,presentationTime:Cr,presentationTimeDelta:Er,eventDuration:wr,id:Rr,payload:Dr}}function mp4Box(mr,...hr){const gr=hr.length;let vr=8,xr=gr;for(;xr--;)vr+=hr[xr].byteLength;const Er=new Uint8Array(vr);for(Er[0]=vr>>24&255,Er[1]=vr>>16&255,Er[2]=vr>>8&255,Er[3]=vr&255,Er.set(mr,4),xr=0,vr=8;xr<gr;xr++)Er.set(hr[xr],vr),vr+=hr[xr].byteLength;return Er}function mp4pssh(mr,hr,gr){if(mr.byteLength!==16)throw new RangeError("Invalid system id");let vr,xr;vr=0,xr=new Uint8Array;let Er;vr>0?(Er=new Uint8Array(4),hr.length>0&&new DataView(Er.buffer).setUint32(0,hr.length,!1)):Er=new Uint8Array;const Cr=new Uint8Array(4);return gr&&gr.byteLength>0&&new DataView(Cr.buffer).setUint32(0,gr.byteLength,!1),mp4Box([112,115,115,104],new Uint8Array([vr,0,0,0]),mr,Er,xr,Cr,gr||new Uint8Array)}function parseMultiPssh(mr){const hr=[];if(mr instanceof ArrayBuffer){const gr=mr.byteLength;let vr=0;for(;vr+32<gr;){const xr=new DataView(mr,vr),Er=parsePssh(xr);hr.push(Er),vr+=Er.size}}return hr}function parsePssh(mr){const hr=mr.getUint32(0),gr=mr.byteOffset,vr=mr.byteLength;if(vr<hr)return{offset:gr,size:vr};if(mr.getUint32(4)!==1886614376)return{offset:gr,size:hr};const Er=mr.getUint32(8)>>>24;if(Er!==0&&Er!==1)return{offset:gr,size:hr};const Cr=mr.buffer,wr=Hex.hexDump(new Uint8Array(Cr,gr+12,16)),Rr=mr.getUint32(28);let kr=null,Dr=null;if(Er===0){if(hr-32<Rr||Rr<22)return{offset:gr,size:hr};Dr=new Uint8Array(Cr,gr+32,Rr)}else if(Er===1){if(!Rr||vr<gr+32+Rr*16+16)return{offset:gr,size:hr};kr=[];for(let Br=0;Br<Rr;Br++)kr.push(new Uint8Array(Cr,gr+32+Br*16,16))}return{version:Er,systemId:wr,kids:kr,data:Dr,offset:gr,size:hr}}let keyUriToKeyIdMap={};class LevelKey{static clearKeyUriToKeyIdMap(){keyUriToKeyIdMap={}}constructor(hr,gr,vr,xr=[1],Er=null){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=hr,this.uri=gr,this.keyFormat=vr,this.keyFormatVersions=xr,this.iv=Er,this.encrypted=hr?hr!=="NONE":!1,this.isCommonEncryption=this.encrypted&&hr!=="AES-128"}isSupported(){if(this.method){if(this.method==="AES-128"||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case KeySystemFormats.FAIRPLAY:case KeySystemFormats.WIDEVINE:case KeySystemFormats.PLAYREADY:case KeySystemFormats.CLEARKEY:return["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(hr){if(!this.encrypted||!this.uri)return null;if(this.method==="AES-128"&&this.uri&&!this.iv){typeof hr!="number"&&(this.method==="AES-128"&&!this.iv&&logger.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),hr=0);const vr=createInitializationVector(hr);return new LevelKey(this.method,this.uri,"identity",this.keyFormatVersions,vr)}const gr=convertDataUriToArrayBytes(this.uri);if(gr)switch(this.keyFormat){case KeySystemFormats.WIDEVINE:this.pssh=gr,gr.length>=22&&(this.keyId=gr.subarray(gr.length-22,gr.length-6));break;case KeySystemFormats.PLAYREADY:{const vr=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=mp4pssh(vr,null,gr),this.keyId=parsePlayReadyWRM(gr);break}default:{let vr=gr.subarray(0,16);if(vr.length!==16){const xr=new Uint8Array(16);xr.set(vr,16-vr.length),vr=xr}this.keyId=vr;break}}if(!this.keyId||this.keyId.byteLength!==16){let vr=keyUriToKeyIdMap[this.uri];if(!vr){const xr=Object.keys(keyUriToKeyIdMap).length%Number.MAX_SAFE_INTEGER;vr=new Uint8Array(16),new DataView(vr.buffer,12,4).setUint32(0,xr),keyUriToKeyIdMap[this.uri]=vr}this.keyId=vr}return this}}function createInitializationVector(mr){const hr=new Uint8Array(16);for(let gr=12;gr<16;gr++)hr[gr]=mr>>8*(15-gr)&255;return hr}const VARIABLE_REPLACEMENT_REGEX=/\{\$([a-zA-Z0-9-_]+)\}/g;function hasVariableReferences(mr){return VARIABLE_REPLACEMENT_REGEX.test(mr)}function substituteVariablesInAttributes(mr,hr,gr){if(mr.variableList!==null||mr.hasVariableRefs)for(let vr=gr.length;vr--;){const xr=gr[vr],Er=hr[xr];Er&&(hr[xr]=substituteVariables(mr,Er))}}function substituteVariables(mr,hr){if(mr.variableList!==null||mr.hasVariableRefs){const gr=mr.variableList;return hr.replace(VARIABLE_REPLACEMENT_REGEX,vr=>{const xr=vr.substring(2,vr.length-1),Er=gr?.[xr];return Er===void 0?(mr.playlistParsingError||(mr.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${xr}"`)),vr):Er})}return hr}function addVariableDefinition(mr,hr,gr){let vr=mr.variableList;vr||(mr.variableList=vr={});let xr,Er;if("QUERYPARAM"in hr){xr=hr.QUERYPARAM;try{const Cr=new self.URL(gr).searchParams;if(Cr.has(xr))Er=Cr.get(xr);else throw new Error(`"${xr}" does not match any query parameter in URI: "${gr}"`)}catch(Cr){mr.playlistParsingError||(mr.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${Cr.message}`))}}else xr=hr.NAME,Er=hr.VALUE;xr in vr?mr.playlistParsingError||(mr.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${xr}"`)):vr[xr]=Er||""}function importVariableDefinition(mr,hr,gr){const vr=hr.IMPORT;if(gr&&vr in gr){let xr=mr.variableList;xr||(mr.variableList=xr={}),xr[vr]=gr[vr]}else mr.playlistParsingError||(mr.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${vr}"`))}function getMediaSource(mr=!0){return typeof self>"u"?void 0:(mr||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function isManagedMediaSource(mr){return typeof self<"u"&&mr===self.ManagedMediaSource}const sampleEntryCodesISO={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function isCodecType(mr,hr){const gr=sampleEntryCodesISO[hr];return!!gr&&!!gr[mr.slice(0,4)]}function areCodecsMediaSourceSupported(mr,hr,gr=!0){return!mr.split(",").some(vr=>!isCodecMediaSourceSupported(vr,hr,gr))}function isCodecMediaSourceSupported(mr,hr,gr=!0){var vr;const xr=getMediaSource(gr);return(vr=xr?.isTypeSupported(mimeTypeForCodec(mr,hr)))!=null?vr:!1}function mimeTypeForCodec(mr,hr){return`${hr}/mp4;codecs="${mr}"`}function videoCodecPreferenceValue(mr){if(mr){const hr=mr.substring(0,4);return sampleEntryCodesISO.video[hr]}return 2}function codecsSetSelectionPreferenceValue(mr){return mr.split(",").reduce((hr,gr)=>{const vr=sampleEntryCodesISO.video[gr];return vr?(vr*2+hr)/(hr?3:2):(sampleEntryCodesISO.audio[gr]+hr)/(hr?2:1)},0)}const CODEC_COMPATIBLE_NAMES={};function getCodecCompatibleNameLower(mr,hr=!0){if(CODEC_COMPATIBLE_NAMES[mr])return CODEC_COMPATIBLE_NAMES[mr];const gr={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"]}[mr];for(let vr=0;vr<gr.length;vr++)if(isCodecMediaSourceSupported(gr[vr],"audio",hr))return CODEC_COMPATIBLE_NAMES[mr]=gr[vr],gr[vr];return mr}const AUDIO_CODEC_REGEXP=/flac|opus/i;function getCodecCompatibleName(mr,hr=!0){return mr.replace(AUDIO_CODEC_REGEXP,gr=>getCodecCompatibleNameLower(gr.toLowerCase(),hr))}function pickMostCompleteCodecName(mr,hr){return mr&&mr!=="mp4a"?mr:hr&&hr.split(",")[0]}function convertAVC1ToAVCOTI(mr){const hr=mr.split(",");for(let gr=0;gr<hr.length;gr++){const vr=hr[gr].split(".");if(vr.length>2){let xr=vr.shift()+".";xr+=parseInt(vr.shift()).toString(16),xr+=("000"+parseInt(vr.shift()).toString(16)).slice(-4),hr[gr]=xr}}return hr.join(",")}const MASTER_PLAYLIST_REGEX=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,MASTER_PLAYLIST_MEDIA_REGEX=/#EXT-X-MEDIA:(.*)/g,IS_MEDIA_PLAYLIST=/^#EXT(?:INF|-X-TARGETDURATION):/m,LEVEL_PLAYLIST_REGEX_FAST=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),LEVEL_PLAYLIST_REGEX_SLOW=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class M3U8Parser{static findGroup(hr,gr){for(let vr=0;vr<hr.length;vr++){const xr=hr[vr];if(xr.id===gr)return xr}}static resolve(hr,gr){return urlToolkitExports.buildAbsoluteURL(gr,hr,{alwaysNormalize:!0})}static isMediaPlaylist(hr){return IS_MEDIA_PLAYLIST.test(hr)}static parseMasterPlaylist(hr,gr){const vr=hasVariableReferences(hr),xr={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:vr},Er=[];MASTER_PLAYLIST_REGEX.lastIndex=0;let Cr;for(;(Cr=MASTER_PLAYLIST_REGEX.exec(hr))!=null;)if(Cr[1]){var wr;const kr=new AttrList(Cr[1]);substituteVariablesInAttributes(xr,kr,["CODECS","SUPPLEMENTAL-CODECS","ALLOWED-CPC","PATHWAY-ID","STABLE-VARIANT-ID","AUDIO","VIDEO","SUBTITLES","CLOSED-CAPTIONS","NAME"]);const Dr=substituteVariables(xr,Cr[2]),Br={attrs:kr,bitrate:kr.decimalInteger("BANDWIDTH")||kr.decimalInteger("AVERAGE-BANDWIDTH"),name:kr.NAME,url:M3U8Parser.resolve(Dr,gr)},Hr=kr.decimalResolution("RESOLUTION");Hr&&(Br.width=Hr.width,Br.height=Hr.height),setCodecs(kr.CODECS,Br),(wr=Br.unknownCodecs)!=null&&wr.length||Er.push(Br),xr.levels.push(Br)}else if(Cr[3]){const kr=Cr[3],Dr=Cr[4];switch(kr){case"SESSION-DATA":{const Br=new AttrList(Dr);substituteVariablesInAttributes(xr,Br,["DATA-ID","LANGUAGE","VALUE","URI"]);const Hr=Br["DATA-ID"];Hr&&(xr.sessionData===null&&(xr.sessionData={}),xr.sessionData[Hr]=Br);break}case"SESSION-KEY":{const Br=parseKey(Dr,gr,xr);Br.encrypted&&Br.isSupported()?(xr.sessionKeys===null&&(xr.sessionKeys=[]),xr.sessionKeys.push(Br)):logger.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${Dr}"`);break}case"DEFINE":{{const Br=new AttrList(Dr);substituteVariablesInAttributes(xr,Br,["NAME","VALUE","QUERYPARAM"]),addVariableDefinition(xr,Br,gr)}break}case"CONTENT-STEERING":{const Br=new AttrList(Dr);substituteVariablesInAttributes(xr,Br,["SERVER-URI","PATHWAY-ID"]),xr.contentSteering={uri:M3U8Parser.resolve(Br["SERVER-URI"],gr),pathwayId:Br["PATHWAY-ID"]||"."};break}case"START":{xr.startTimeOffset=parseStartTimeOffset(Dr);break}}}const Rr=Er.length>0&&Er.length<xr.levels.length;return xr.levels=Rr?Er:xr.levels,xr.levels.length===0&&(xr.playlistParsingError=new Error("no levels found in manifest")),xr}static parseMasterPlaylistMedia(hr,gr,vr){let xr;const Er={},Cr=vr.levels,wr={AUDIO:Cr.map(kr=>({id:kr.attrs.AUDIO,audioCodec:kr.audioCodec})),SUBTITLES:Cr.map(kr=>({id:kr.attrs.SUBTITLES,textCodec:kr.textCodec})),"CLOSED-CAPTIONS":[]};let Rr=0;for(MASTER_PLAYLIST_MEDIA_REGEX.lastIndex=0;(xr=MASTER_PLAYLIST_MEDIA_REGEX.exec(hr))!==null;){const kr=new AttrList(xr[1]),Dr=kr.TYPE;if(Dr){const Br=wr[Dr],Hr=Er[Dr]||[];Er[Dr]=Hr,substituteVariablesInAttributes(vr,kr,["URI","GROUP-ID","LANGUAGE","ASSOC-LANGUAGE","STABLE-RENDITION-ID","NAME","INSTREAM-ID","CHARACTERISTICS","CHANNELS"]);const Gr=kr.LANGUAGE,qr=kr["ASSOC-LANGUAGE"],zr=kr.CHANNELS,Qr=kr.CHARACTERISTICS,sn=kr["INSTREAM-ID"],hn={attrs:kr,bitrate:0,id:Rr++,groupId:kr["GROUP-ID"]||"",name:kr.NAME||Gr||"",type:Dr,default:kr.bool("DEFAULT"),autoselect:kr.bool("AUTOSELECT"),forced:kr.bool("FORCED"),lang:Gr,url:kr.URI?M3U8Parser.resolve(kr.URI,gr):""};if(qr&&(hn.assocLang=qr),zr&&(hn.channels=zr),Qr&&(hn.characteristics=Qr),sn&&(hn.instreamId=sn),Br!=null&&Br.length){const vn=M3U8Parser.findGroup(Br,hn.groupId)||Br[0];assignCodec(hn,vn,"audioCodec"),assignCodec(hn,vn,"textCodec")}Hr.push(hn)}}return Er}static parseLevelPlaylist(hr,gr,vr,xr,Er,Cr){const wr=new LevelDetails(gr),Rr=wr.fragments;let kr=null,Dr=0,Br=0,Hr=0,Gr=0,qr=null,zr=new Fragment(xr,gr),Qr,sn,hn,vn=-1,yn=!1,gn=null;for(LEVEL_PLAYLIST_REGEX_FAST.lastIndex=0,wr.m3u8=hr,wr.hasVariableRefs=hasVariableReferences(hr);(Qr=LEVEL_PLAYLIST_REGEX_FAST.exec(hr))!==null;){yn&&(yn=!1,zr=new Fragment(xr,gr),zr.start=Hr,zr.sn=Dr,zr.cc=Gr,zr.level=vr,kr&&(zr.initSegment=kr,zr.rawProgramDateTime=kr.rawProgramDateTime,kr.rawProgramDateTime=null,gn&&(zr.setByteRange(gn),gn=null)));const Sn=Qr[1];if(Sn){zr.duration=parseFloat(Sn);const Cn=(" "+Qr[2]).slice(1);zr.title=Cn||null,zr.tagList.push(Cn?["INF",Sn,Cn]:["INF",Sn])}else if(Qr[3]){if(isFiniteNumber(zr.duration)){zr.start=Hr,hn&&setFragLevelKeys(zr,hn,wr),zr.sn=Dr,zr.level=vr,zr.cc=Gr,Rr.push(zr);const Cn=(" "+Qr[3]).slice(1);zr.relurl=substituteVariables(wr,Cn),assignProgramDateTime(zr,qr),qr=zr,Hr+=zr.duration,Dr++,Br=0,yn=!0}}else if(Qr[4]){const Cn=(" "+Qr[4]).slice(1);qr?zr.setByteRange(Cn,qr):zr.setByteRange(Cn)}else if(Qr[5])zr.rawProgramDateTime=(" "+Qr[5]).slice(1),zr.tagList.push(["PROGRAM-DATE-TIME",zr.rawProgramDateTime]),vn===-1&&(vn=Rr.length);else{if(Qr=Qr[0].match(LEVEL_PLAYLIST_REGEX_SLOW),!Qr){logger.warn("No matches on slow regex match for level playlist!");continue}for(sn=1;sn<Qr.length&&!(typeof Qr[sn]<"u");sn++);const Cn=(" "+Qr[sn]).slice(1),Rn=(" "+Qr[sn+1]).slice(1),Bn=Qr[sn+2]?(" "+Qr[sn+2]).slice(1):"";switch(Cn){case"PLAYLIST-TYPE":wr.type=Rn.toUpperCase();break;case"MEDIA-SEQUENCE":Dr=wr.startSN=parseInt(Rn);break;case"SKIP":{const Fn=new AttrList(Rn);substituteVariablesInAttributes(wr,Fn,["RECENTLY-REMOVED-DATERANGES"]);const Hn=Fn.decimalInteger("SKIPPED-SEGMENTS");if(isFiniteNumber(Hn)){wr.skippedSegments=Hn;for(let qn=Hn;qn--;)Rr.unshift(null);Dr+=Hn}const Gn=Fn.enumeratedString("RECENTLY-REMOVED-DATERANGES");Gn&&(wr.recentlyRemovedDateranges=Gn.split("	"));break}case"TARGETDURATION":wr.targetduration=Math.max(parseInt(Rn),1);break;case"VERSION":wr.version=parseInt(Rn);break;case"INDEPENDENT-SEGMENTS":case"EXTM3U":break;case"ENDLIST":wr.live=!1;break;case"#":(Rn||Bn)&&zr.tagList.push(Bn?[Rn,Bn]:[Rn]);break;case"DISCONTINUITY":Gr++,zr.tagList.push(["DIS"]);break;case"GAP":zr.gap=!0,zr.tagList.push([Cn]);break;case"BITRATE":zr.tagList.push([Cn,Rn]);break;case"DATERANGE":{const Fn=new AttrList(Rn);substituteVariablesInAttributes(wr,Fn,["ID","CLASS","START-DATE","END-DATE","SCTE35-CMD","SCTE35-OUT","SCTE35-IN"]),substituteVariablesInAttributes(wr,Fn,Fn.clientAttrs);const Hn=new DateRange(Fn,wr.dateRanges[Fn.ID]);Hn.isValid||wr.skippedSegments?wr.dateRanges[Hn.id]=Hn:logger.warn(`Ignoring invalid DATERANGE tag: "${Rn}"`),zr.tagList.push(["EXT-X-DATERANGE",Rn]);break}case"DEFINE":{{const Fn=new AttrList(Rn);substituteVariablesInAttributes(wr,Fn,["NAME","VALUE","IMPORT","QUERYPARAM"]),"IMPORT"in Fn?importVariableDefinition(wr,Fn,Cr):addVariableDefinition(wr,Fn,gr)}break}case"DISCONTINUITY-SEQUENCE":Gr=parseInt(Rn);break;case"KEY":{const Fn=parseKey(Rn,gr,wr);if(Fn.isSupported()){if(Fn.method==="NONE"){hn=void 0;break}hn||(hn={}),hn[Fn.keyFormat]&&(hn=_extends({},hn)),hn[Fn.keyFormat]=Fn}else logger.warn(`[Keys] Ignoring invalid EXT-X-KEY tag: "${Rn}"`);break}case"START":wr.startTimeOffset=parseStartTimeOffset(Rn);break;case"MAP":{const Fn=new AttrList(Rn);if(substituteVariablesInAttributes(wr,Fn,["BYTERANGE","URI"]),zr.duration){const Hn=new Fragment(xr,gr);setInitSegment(Hn,Fn,vr,hn),kr=Hn,zr.initSegment=kr,kr.rawProgramDateTime&&!zr.rawProgramDateTime&&(zr.rawProgramDateTime=kr.rawProgramDateTime)}else{const Hn=zr.byteRangeEndOffset;if(Hn){const Gn=zr.byteRangeStartOffset;gn=`${Hn-Gn}@${Gn}`}else gn=null;setInitSegment(zr,Fn,vr,hn),kr=zr,yn=!0}break}case"SERVER-CONTROL":{const Fn=new AttrList(Rn);wr.canBlockReload=Fn.bool("CAN-BLOCK-RELOAD"),wr.canSkipUntil=Fn.optionalFloat("CAN-SKIP-UNTIL",0),wr.canSkipDateRanges=wr.canSkipUntil>0&&Fn.bool("CAN-SKIP-DATERANGES"),wr.partHoldBack=Fn.optionalFloat("PART-HOLD-BACK",0),wr.holdBack=Fn.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{const Fn=new AttrList(Rn);wr.partTarget=Fn.decimalFloatingPoint("PART-TARGET");break}case"PART":{let Fn=wr.partList;Fn||(Fn=wr.partList=[]);const Hn=Br>0?Fn[Fn.length-1]:void 0,Gn=Br++,qn=new AttrList(Rn);substituteVariablesInAttributes(wr,qn,["BYTERANGE","URI"]);const On=new Part$1(qn,zr,gr,Gn,Hn);Fn.push(On),zr.duration+=On.duration;break}case"PRELOAD-HINT":{const Fn=new AttrList(Rn);substituteVariablesInAttributes(wr,Fn,["URI"]),wr.preloadHint=Fn;break}case"RENDITION-REPORT":{const Fn=new AttrList(Rn);substituteVariablesInAttributes(wr,Fn,["URI"]),wr.renditionReports=wr.renditionReports||[],wr.renditionReports.push(Fn);break}default:logger.warn(`line parsed but not handled: ${Qr}`);break}}}qr&&!qr.relurl?(Rr.pop(),Hr-=qr.duration,wr.partList&&(wr.fragmentHint=qr)):wr.partList&&(assignProgramDateTime(zr,qr),zr.cc=Gr,wr.fragmentHint=zr,hn&&setFragLevelKeys(zr,hn,wr));const bn=Rr.length,xn=Rr[0],$n=Rr[bn-1];if(Hr+=wr.skippedSegments*wr.targetduration,Hr>0&&bn&&$n){wr.averagetargetduration=Hr/bn;const Sn=$n.sn;wr.endSN=Sn!=="initSegment"?Sn:0,wr.live||($n.endList=!0),xn&&(wr.startCC=xn.cc)}else wr.endSN=0,wr.startCC=0;return wr.fragmentHint&&(Hr+=wr.fragmentHint.duration),wr.totalduration=Hr,wr.endCC=Gr,vn>0&&backfillProgramDateTimes(Rr,vn),wr}}function parseKey(mr,hr,gr){var vr,xr;const Er=new AttrList(mr);substituteVariablesInAttributes(gr,Er,["KEYFORMAT","KEYFORMATVERSIONS","URI","IV","URI"]);const Cr=(vr=Er.METHOD)!=null?vr:"",wr=Er.URI,Rr=Er.hexadecimalInteger("IV"),kr=Er.KEYFORMATVERSIONS,Dr=(xr=Er.KEYFORMAT)!=null?xr:"identity";wr&&Er.IV&&!Rr&&logger.error(`Invalid IV: ${Er.IV}`);const Br=wr?M3U8Parser.resolve(wr,hr):"",Hr=(kr||"1").split("/").map(Number).filter(Number.isFinite);return new LevelKey(Cr,Br,Dr,Hr,Rr)}function parseStartTimeOffset(mr){const gr=new AttrList(mr).decimalFloatingPoint("TIME-OFFSET");return isFiniteNumber(gr)?gr:null}function setCodecs(mr,hr){let gr=(mr||"").split(/[ ,]+/).filter(vr=>vr);["video","audio","text"].forEach(vr=>{const xr=gr.filter(Er=>isCodecType(Er,vr));xr.length&&(hr[`${vr}Codec`]=xr.join(","),gr=gr.filter(Er=>xr.indexOf(Er)===-1))}),hr.unknownCodecs=gr}function assignCodec(mr,hr,gr){const vr=hr[gr];vr&&(mr[gr]=vr)}function backfillProgramDateTimes(mr,hr){let gr=mr[hr];for(let vr=hr;vr--;){const xr=mr[vr];if(!xr)return;xr.programDateTime=gr.programDateTime-xr.duration*1e3,gr=xr}}function assignProgramDateTime(mr,hr){mr.rawProgramDateTime?mr.programDateTime=Date.parse(mr.rawProgramDateTime):hr!=null&&hr.programDateTime&&(mr.programDateTime=hr.endProgramDateTime),isFiniteNumber(mr.programDateTime)||(mr.programDateTime=null,mr.rawProgramDateTime=null)}function setInitSegment(mr,hr,gr,vr){mr.relurl=hr.URI,hr.BYTERANGE&&mr.setByteRange(hr.BYTERANGE),mr.level=gr,mr.sn="initSegment",vr&&(mr.levelkeys=vr),mr.initSegment=null}function setFragLevelKeys(mr,hr,gr){mr.levelkeys=hr;const{encryptedFragments:vr}=gr;(!vr.length||vr[vr.length-1].levelkeys!==hr)&&Object.keys(hr).some(xr=>hr[xr].isCommonEncryption)&&vr.push(mr)}var PlaylistContextType={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},PlaylistLevelType={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};function mapContextToLevelType(mr){const{type:hr}=mr;switch(hr){case PlaylistContextType.AUDIO_TRACK:return PlaylistLevelType.AUDIO;case PlaylistContextType.SUBTITLE_TRACK:return PlaylistLevelType.SUBTITLE;default:return PlaylistLevelType.MAIN}}function getResponseUrl(mr,hr){let gr=mr.url;return(gr===void 0||gr.indexOf("data:")===0)&&(gr=hr.url),gr}class PlaylistLoader{constructor(hr){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.hls=hr,this.registerListeners()}startLoad(hr){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:hr}=this;hr.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),hr.on(Events.LEVEL_LOADING,this.onLevelLoading,this),hr.on(Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),hr.on(Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}unregisterListeners(){const{hls:hr}=this;hr.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),hr.off(Events.LEVEL_LOADING,this.onLevelLoading,this),hr.off(Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),hr.off(Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}createInternalLoader(hr){const gr=this.hls.config,vr=gr.pLoader,xr=gr.loader,Er=vr||xr,Cr=new Er(gr);return this.loaders[hr.type]=Cr,Cr}getInternalLoader(hr){return this.loaders[hr.type]}resetInternalLoader(hr){this.loaders[hr]&&delete this.loaders[hr]}destroyInternalLoaders(){for(const hr in this.loaders){const gr=this.loaders[hr];gr&&gr.destroy(),this.resetInternalLoader(hr)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(hr,gr){const{url:vr}=gr;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:PlaylistContextType.MANIFEST,url:vr,deliveryDirectives:null})}onLevelLoading(hr,gr){const{id:vr,level:xr,pathwayId:Er,url:Cr,deliveryDirectives:wr}=gr;this.load({id:vr,level:xr,pathwayId:Er,responseType:"text",type:PlaylistContextType.LEVEL,url:Cr,deliveryDirectives:wr})}onAudioTrackLoading(hr,gr){const{id:vr,groupId:xr,url:Er,deliveryDirectives:Cr}=gr;this.load({id:vr,groupId:xr,level:null,responseType:"text",type:PlaylistContextType.AUDIO_TRACK,url:Er,deliveryDirectives:Cr})}onSubtitleTrackLoading(hr,gr){const{id:vr,groupId:xr,url:Er,deliveryDirectives:Cr}=gr;this.load({id:vr,groupId:xr,level:null,responseType:"text",type:PlaylistContextType.SUBTITLE_TRACK,url:Er,deliveryDirectives:Cr})}load(hr){var gr;const vr=this.hls.config;let xr=this.getInternalLoader(hr);if(xr){const kr=xr.context;if(kr&&kr.url===hr.url&&kr.level===hr.level){logger.trace("[playlist-loader]: playlist request ongoing");return}logger.log(`[playlist-loader]: aborting previous loader for type: ${hr.type}`),xr.abort()}let Er;if(hr.type===PlaylistContextType.MANIFEST?Er=vr.manifestLoadPolicy.default:Er=_extends({},vr.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),xr=this.createInternalLoader(hr),isFiniteNumber((gr=hr.deliveryDirectives)==null?void 0:gr.part)){let kr;if(hr.type===PlaylistContextType.LEVEL&&hr.level!==null?kr=this.hls.levels[hr.level].details:hr.type===PlaylistContextType.AUDIO_TRACK&&hr.id!==null?kr=this.hls.audioTracks[hr.id].details:hr.type===PlaylistContextType.SUBTITLE_TRACK&&hr.id!==null&&(kr=this.hls.subtitleTracks[hr.id].details),kr){const Dr=kr.partTarget,Br=kr.targetduration;if(Dr&&Br){const Hr=Math.max(Dr*3,Br*.8)*1e3;Er=_extends({},Er,{maxTimeToFirstByteMs:Math.min(Hr,Er.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(Hr,Er.maxTimeToFirstByteMs)})}}}const Cr=Er.errorRetry||Er.timeoutRetry||{},wr={loadPolicy:Er,timeout:Er.maxLoadTimeMs,maxRetry:Cr.maxNumRetry||0,retryDelay:Cr.retryDelayMs||0,maxRetryDelay:Cr.maxRetryDelayMs||0},Rr={onSuccess:(kr,Dr,Br,Hr)=>{const Gr=this.getInternalLoader(Br);this.resetInternalLoader(Br.type);const qr=kr.data;if(qr.indexOf("#EXTM3U")!==0){this.handleManifestParsingError(kr,Br,new Error("no EXTM3U delimiter"),Hr||null,Dr);return}Dr.parsing.start=performance.now(),M3U8Parser.isMediaPlaylist(qr)?this.handleTrackOrLevelPlaylist(kr,Dr,Br,Hr||null,Gr):this.handleMasterPlaylist(kr,Dr,Br,Hr)},onError:(kr,Dr,Br,Hr)=>{this.handleNetworkError(Dr,Br,!1,kr,Hr)},onTimeout:(kr,Dr,Br)=>{this.handleNetworkError(Dr,Br,!0,void 0,kr)}};xr.load(hr,wr,Rr)}handleMasterPlaylist(hr,gr,vr,xr){const Er=this.hls,Cr=hr.data,wr=getResponseUrl(hr,vr),Rr=M3U8Parser.parseMasterPlaylist(Cr,wr);if(Rr.playlistParsingError){this.handleManifestParsingError(hr,vr,Rr.playlistParsingError,xr,gr);return}const{contentSteering:kr,levels:Dr,sessionData:Br,sessionKeys:Hr,startTimeOffset:Gr,variableList:qr}=Rr;this.variableList=qr;const{AUDIO:zr=[],SUBTITLES:Qr,"CLOSED-CAPTIONS":sn}=M3U8Parser.parseMasterPlaylistMedia(Cr,wr,Rr);zr.length&&!zr.some(vn=>!vn.url)&&Dr[0].audioCodec&&!Dr[0].attrs.AUDIO&&(logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),zr.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new AttrList({}),bitrate:0,url:""})),Er.trigger(Events.MANIFEST_LOADED,{levels:Dr,audioTracks:zr,subtitles:Qr,captions:sn,contentSteering:kr,url:wr,stats:gr,networkDetails:xr,sessionData:Br,sessionKeys:Hr,startTimeOffset:Gr,variableList:qr})}handleTrackOrLevelPlaylist(hr,gr,vr,xr,Er){const Cr=this.hls,{id:wr,level:Rr,type:kr}=vr,Dr=getResponseUrl(hr,vr),Br=0,Hr=isFiniteNumber(Rr)?Rr:isFiniteNumber(wr)?wr:0,Gr=mapContextToLevelType(vr),qr=M3U8Parser.parseLevelPlaylist(hr.data,Dr,Hr,Gr,Br,this.variableList);if(kr===PlaylistContextType.MANIFEST){const zr={attrs:new AttrList({}),bitrate:0,details:qr,name:"",url:Dr};Cr.trigger(Events.MANIFEST_LOADED,{levels:[zr],audioTracks:[],url:Dr,stats:gr,networkDetails:xr,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}gr.parsing.end=performance.now(),vr.levelDetails=qr,this.handlePlaylistLoaded(qr,hr,gr,vr,xr,Er)}handleManifestParsingError(hr,gr,vr,xr,Er){this.hls.trigger(Events.ERROR,{type:ErrorTypes.NETWORK_ERROR,details:ErrorDetails.MANIFEST_PARSING_ERROR,fatal:gr.type===PlaylistContextType.MANIFEST,url:hr.url,err:vr,error:vr,reason:vr.message,response:hr,context:gr,networkDetails:xr,stats:Er})}handleNetworkError(hr,gr,vr=!1,xr,Er){let Cr=`A network ${vr?"timeout":"error"+(xr?" (status "+xr.code+")":"")} occurred while loading ${hr.type}`;hr.type===PlaylistContextType.LEVEL?Cr+=`: ${hr.level} id: ${hr.id}`:(hr.type===PlaylistContextType.AUDIO_TRACK||hr.type===PlaylistContextType.SUBTITLE_TRACK)&&(Cr+=` id: ${hr.id} group-id: "${hr.groupId}"`);const wr=new Error(Cr);logger.warn(`[playlist-loader]: ${Cr}`);let Rr=ErrorDetails.UNKNOWN,kr=!1;const Dr=this.getInternalLoader(hr);switch(hr.type){case PlaylistContextType.MANIFEST:Rr=vr?ErrorDetails.MANIFEST_LOAD_TIMEOUT:ErrorDetails.MANIFEST_LOAD_ERROR,kr=!0;break;case PlaylistContextType.LEVEL:Rr=vr?ErrorDetails.LEVEL_LOAD_TIMEOUT:ErrorDetails.LEVEL_LOAD_ERROR,kr=!1;break;case PlaylistContextType.AUDIO_TRACK:Rr=vr?ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:ErrorDetails.AUDIO_TRACK_LOAD_ERROR,kr=!1;break;case PlaylistContextType.SUBTITLE_TRACK:Rr=vr?ErrorDetails.SUBTITLE_TRACK_LOAD_TIMEOUT:ErrorDetails.SUBTITLE_LOAD_ERROR,kr=!1;break}Dr&&this.resetInternalLoader(hr.type);const Br={type:ErrorTypes.NETWORK_ERROR,details:Rr,fatal:kr,url:hr.url,loader:Dr,context:hr,error:wr,networkDetails:gr,stats:Er};if(xr){const Hr=gr?.url||hr.url;Br.response=_objectSpread2({url:Hr,data:void 0},xr)}this.hls.trigger(Events.ERROR,Br)}handlePlaylistLoaded(hr,gr,vr,xr,Er,Cr){const wr=this.hls,{type:Rr,level:kr,id:Dr,groupId:Br,deliveryDirectives:Hr}=xr,Gr=getResponseUrl(gr,xr),qr=mapContextToLevelType(xr),zr=typeof xr.level=="number"&&qr===PlaylistLevelType.MAIN?kr:void 0;if(!hr.fragments.length){const sn=new Error("No Segments found in Playlist");wr.trigger(Events.ERROR,{type:ErrorTypes.NETWORK_ERROR,details:ErrorDetails.LEVEL_EMPTY_ERROR,fatal:!1,url:Gr,error:sn,reason:sn.message,response:gr,context:xr,level:zr,parent:qr,networkDetails:Er,stats:vr});return}hr.targetduration||(hr.playlistParsingError=new Error("Missing Target Duration"));const Qr=hr.playlistParsingError;if(Qr){wr.trigger(Events.ERROR,{type:ErrorTypes.NETWORK_ERROR,details:ErrorDetails.LEVEL_PARSING_ERROR,fatal:!1,url:Gr,error:Qr,reason:Qr.message,response:gr,context:xr,level:zr,parent:qr,networkDetails:Er,stats:vr});return}switch(hr.live&&Cr&&(Cr.getCacheAge&&(hr.ageHeader=Cr.getCacheAge()||0),(!Cr.getCacheAge||isNaN(hr.ageHeader))&&(hr.ageHeader=0)),Rr){case PlaylistContextType.MANIFEST:case PlaylistContextType.LEVEL:wr.trigger(Events.LEVEL_LOADED,{details:hr,level:zr||0,id:Dr||0,stats:vr,networkDetails:Er,deliveryDirectives:Hr});break;case PlaylistContextType.AUDIO_TRACK:wr.trigger(Events.AUDIO_TRACK_LOADED,{details:hr,id:Dr||0,groupId:Br||"",stats:vr,networkDetails:Er,deliveryDirectives:Hr});break;case PlaylistContextType.SUBTITLE_TRACK:wr.trigger(Events.SUBTITLE_TRACK_LOADED,{details:hr,id:Dr||0,groupId:Br||"",stats:vr,networkDetails:Er,deliveryDirectives:Hr});break}}}function sendAddTrackEvent(mr,hr){let gr;try{gr=new Event("addtrack")}catch{gr=document.createEvent("Event"),gr.initEvent("addtrack",!1,!1)}gr.track=mr,hr.dispatchEvent(gr)}function addCueToTrack(mr,hr){const gr=mr.mode;if(gr==="disabled"&&(mr.mode="hidden"),mr.cues&&!mr.cues.getCueById(hr.id))try{if(mr.addCue(hr),!mr.cues.getCueById(hr.id))throw new Error(`addCue is failed for: ${hr}`)}catch(vr){logger.debug(`[texttrack-utils]: ${vr}`);try{const xr=new self.TextTrackCue(hr.startTime,hr.endTime,hr.text);xr.id=hr.id,mr.addCue(xr)}catch(xr){logger.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${xr}`)}}gr==="disabled"&&(mr.mode=gr)}function clearCurrentCues(mr){const hr=mr.mode;if(hr==="disabled"&&(mr.mode="hidden"),mr.cues)for(let gr=mr.cues.length;gr--;)mr.removeCue(mr.cues[gr]);hr==="disabled"&&(mr.mode=hr)}function removeCuesInRange(mr,hr,gr,vr){const xr=mr.mode;if(xr==="disabled"&&(mr.mode="hidden"),mr.cues&&mr.cues.length>0){const Er=getCuesInRange(mr.cues,hr,gr);for(let Cr=0;Cr<Er.length;Cr++)(!vr||vr(Er[Cr]))&&mr.removeCue(Er[Cr])}xr==="disabled"&&(mr.mode=xr)}function getFirstCueIndexAfterTime(mr,hr){if(hr<mr[0].startTime)return 0;const gr=mr.length-1;if(hr>mr[gr].endTime)return-1;let vr=0,xr=gr;for(;vr<=xr;){const Er=Math.floor((xr+vr)/2);if(hr<mr[Er].startTime)xr=Er-1;else if(hr>mr[Er].startTime&&vr<gr)vr=Er+1;else return Er}return mr[vr].startTime-hr<hr-mr[xr].startTime?vr:xr}function getCuesInRange(mr,hr,gr){const vr=[],xr=getFirstCueIndexAfterTime(mr,hr);if(xr>-1)for(let Er=xr,Cr=mr.length;Er<Cr;Er++){const wr=mr[Er];if(wr.startTime>=hr&&wr.endTime<=gr)vr.push(wr);else if(wr.startTime>gr)return vr}return vr}function filterSubtitleTracks(mr){const hr=[];for(let gr=0;gr<mr.length;gr++){const vr=mr[gr];(vr.kind==="subtitles"||vr.kind==="captions")&&vr.label&&hr.push(mr[gr])}return hr}var MetadataSchema={audioId3:"org.id3",dateRange:"com.apple.quicktime.HLS",emsg:"https://aomedia.org/emsg/ID3"};const MIN_CUE_DURATION=.25;function getCueClass(){if(!(typeof self>"u"))return self.VTTCue||self.TextTrackCue}function createCueWithDataFields(mr,hr,gr,vr,xr){let Er=new mr(hr,gr,"");try{Er.value=vr,xr&&(Er.type=xr)}catch{Er=new mr(hr,gr,JSON.stringify(xr?_objectSpread2({type:xr},vr):vr))}return Er}const MAX_CUE_ENDTIME=(()=>{const mr=getCueClass();try{mr&&new mr(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();function dateRangeDateToTimelineSeconds(mr,hr){return mr.getTime()/1e3-hr}function hexToArrayBuffer(mr){return Uint8Array.from(mr.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}class ID3TrackController{constructor(hr){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=hr,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null}_registerListeners(){const{hls:hr}=this;hr.on(Events.MEDIA_ATTACHED,this.onMediaAttached,this),hr.on(Events.MEDIA_DETACHING,this.onMediaDetaching,this),hr.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),hr.on(Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),hr.on(Events.BUFFER_FLUSHING,this.onBufferFlushing,this),hr.on(Events.LEVEL_UPDATED,this.onLevelUpdated,this)}_unregisterListeners(){const{hls:hr}=this;hr.off(Events.MEDIA_ATTACHED,this.onMediaAttached,this),hr.off(Events.MEDIA_DETACHING,this.onMediaDetaching,this),hr.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),hr.off(Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),hr.off(Events.BUFFER_FLUSHING,this.onBufferFlushing,this),hr.off(Events.LEVEL_UPDATED,this.onLevelUpdated,this)}onMediaAttached(hr,gr){this.media=gr.media}onMediaDetaching(){this.id3Track&&(clearCurrentCues(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(hr){const gr=this.getID3Track(hr.textTracks);return gr.mode="hidden",gr}getID3Track(hr){if(this.media){for(let gr=0;gr<hr.length;gr++){const vr=hr[gr];if(vr.kind==="metadata"&&vr.label==="id3")return sendAddTrackEvent(vr,this.media),vr}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(hr,gr){if(!this.media)return;const{hls:{config:{enableEmsgMetadataCues:vr,enableID3MetadataCues:xr}}}=this;if(!vr&&!xr)return;const{samples:Er}=gr;this.id3Track||(this.id3Track=this.createTrack(this.media));const Cr=getCueClass();if(Cr)for(let wr=0;wr<Er.length;wr++){const Rr=Er[wr].type;if(Rr===MetadataSchema.emsg&&!vr||!xr)continue;const kr=getID3Frames(Er[wr].data);if(kr){const Dr=Er[wr].pts;let Br=Dr+Er[wr].duration;Br>MAX_CUE_ENDTIME&&(Br=MAX_CUE_ENDTIME),Br-Dr<=0&&(Br=Dr+MIN_CUE_DURATION);for(let Gr=0;Gr<kr.length;Gr++){const qr=kr[Gr];if(!isTimeStampFrame(qr)){this.updateId3CueEnds(Dr,Rr);const zr=createCueWithDataFields(Cr,Dr,Br,qr,Rr);zr&&this.id3Track.addCue(zr)}}}}}updateId3CueEnds(hr,gr){var vr;const xr=(vr=this.id3Track)==null?void 0:vr.cues;if(xr)for(let Er=xr.length;Er--;){const Cr=xr[Er];Cr.type===gr&&Cr.startTime<hr&&Cr.endTime===MAX_CUE_ENDTIME&&(Cr.endTime=hr)}}onBufferFlushing(hr,{startOffset:gr,endOffset:vr,type:xr}){const{id3Track:Er,hls:Cr}=this;if(!Cr)return;const{config:{enableEmsgMetadataCues:wr,enableID3MetadataCues:Rr}}=Cr;if(Er&&(wr||Rr)){let kr;xr==="audio"?kr=Dr=>Dr.type===MetadataSchema.audioId3&&Rr:xr==="video"?kr=Dr=>Dr.type===MetadataSchema.emsg&&wr:kr=Dr=>Dr.type===MetadataSchema.audioId3&&Rr||Dr.type===MetadataSchema.emsg&&wr,removeCuesInRange(Er,gr,vr,kr)}}onLevelUpdated(hr,{details:gr}){if(!this.media||!gr.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)return;const{dateRangeCuesAppended:vr,id3Track:xr}=this,{dateRanges:Er}=gr,Cr=Object.keys(Er);if(xr){const Dr=Object.keys(vr).filter(Br=>!Cr.includes(Br));for(let Br=Dr.length;Br--;){const Hr=Dr[Br];Object.keys(vr[Hr].cues).forEach(Gr=>{xr.removeCue(vr[Hr].cues[Gr])}),delete vr[Hr]}}const wr=gr.fragments[gr.fragments.length-1];if(Cr.length===0||!isFiniteNumber(wr?.programDateTime))return;this.id3Track||(this.id3Track=this.createTrack(this.media));const Rr=wr.programDateTime/1e3-wr.start,kr=getCueClass();for(let Dr=0;Dr<Cr.length;Dr++){const Br=Cr[Dr],Hr=Er[Br],Gr=dateRangeDateToTimelineSeconds(Hr.startDate,Rr),qr=vr[Br],zr=qr?.cues||{};let Qr=qr?.durationKnown||!1,sn=MAX_CUE_ENDTIME;const hn=Hr.endDate;if(hn)sn=dateRangeDateToTimelineSeconds(hn,Rr),Qr=!0;else if(Hr.endOnNext&&!Qr){const yn=Cr.reduce((gn,bn)=>{if(bn!==Hr.id){const xn=Er[bn];if(xn.class===Hr.class&&xn.startDate>Hr.startDate&&(!gn||Hr.startDate<gn.startDate))return xn}return gn},null);yn&&(sn=dateRangeDateToTimelineSeconds(yn.startDate,Rr),Qr=!0)}const vn=Object.keys(Hr.attr);for(let yn=0;yn<vn.length;yn++){const gn=vn[yn];if(!isDateRangeCueAttribute(gn))continue;const bn=zr[gn];if(bn)Qr&&!qr.durationKnown&&(bn.endTime=sn);else if(kr){let xn=Hr.attr[gn];isSCTE35Attribute(gn)&&(xn=hexToArrayBuffer(xn));const $n=createCueWithDataFields(kr,Gr,sn,{key:gn,data:xn},MetadataSchema.dateRange);$n&&($n.id=Br,this.id3Track.addCue($n),zr[gn]=$n)}}vr[Br]={cues:zr,dateRange:Hr,durationKnown:Qr}}}}class LatencyController{constructor(hr){this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=()=>this.timeupdate(),this.hls=hr,this.config=hr.config,this.registerListeners()}get latency(){return this._latency||0}get maxLatency(){const{config:hr,levelDetails:gr}=this;return hr.liveMaxLatencyDuration!==void 0?hr.liveMaxLatencyDuration:gr?hr.liveMaxLatencyDurationCount*gr.targetduration:0}get targetLatency(){const{levelDetails:hr}=this;if(hr===null)return null;const{holdBack:gr,partHoldBack:vr,targetduration:xr}=hr,{liveSyncDuration:Er,liveSyncDurationCount:Cr,lowLatencyMode:wr}=this.config,Rr=this.hls.userConfig;let kr=wr&&vr||gr;(Rr.liveSyncDuration||Rr.liveSyncDurationCount||kr===0)&&(kr=Er!==void 0?Er:Cr*xr);const Dr=xr;return kr+Math.min(this.stallCount*1,Dr)}get liveSyncPosition(){const hr=this.estimateLiveEdge(),gr=this.targetLatency,vr=this.levelDetails;if(hr===null||gr===null||vr===null)return null;const xr=vr.edge,Er=hr-gr-this.edgeStalled,Cr=xr-vr.totalduration,wr=xr-(this.config.lowLatencyMode&&vr.partTarget||vr.targetduration);return Math.min(Math.max(Cr,Er),wr)}get drift(){const{levelDetails:hr}=this;return hr===null?1:hr.drift}get edgeStalled(){const{levelDetails:hr}=this;if(hr===null)return 0;const gr=(this.config.lowLatencyMode&&hr.partTarget||hr.targetduration)*3;return Math.max(hr.age-gr,0)}get forwardBufferLength(){const{media:hr,levelDetails:gr}=this;if(!hr||!gr)return 0;const vr=hr.buffered.length;return(vr?hr.buffered.end(vr-1):gr.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null}registerListeners(){this.hls.on(Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(Events.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(Events.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(Events.ERROR,this.onError,this)}unregisterListeners(){this.hls.off(Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(Events.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(Events.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.off(Events.ERROR,this.onError,this)}onMediaAttached(hr,gr){this.media=gr.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)}onManifestLoading(){this.levelDetails=null,this._latency=null,this.stallCount=0}onLevelUpdated(hr,{details:gr}){this.levelDetails=gr,gr.advanced&&this.timeupdate(),!gr.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)}onError(hr,gr){var vr;gr.details===ErrorDetails.BUFFER_STALLED_ERROR&&(this.stallCount++,(vr=this.levelDetails)!=null&&vr.live&&logger.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))}timeupdate(){const{media:hr,levelDetails:gr}=this;if(!hr||!gr)return;this.currentTime=hr.currentTime;const vr=this.computeLatency();if(vr===null)return;this._latency=vr;const{lowLatencyMode:xr,maxLiveSyncPlaybackRate:Er}=this.config;if(!xr||Er===1||!gr.live)return;const Cr=this.targetLatency;if(Cr===null)return;const wr=vr-Cr,Rr=Math.min(this.maxLatency,Cr+gr.targetduration);if(wr<Rr&&wr>.05&&this.forwardBufferLength>1){const Dr=Math.min(2,Math.max(1,Er)),Br=Math.round(2/(1+Math.exp(-.75*wr-this.edgeStalled))*20)/20;hr.playbackRate=Math.min(Dr,Math.max(1,Br))}else hr.playbackRate!==1&&hr.playbackRate!==0&&(hr.playbackRate=1)}estimateLiveEdge(){const{levelDetails:hr}=this;return hr===null?null:hr.edge+hr.age}computeLatency(){const hr=this.estimateLiveEdge();return hr===null?null:hr-this.currentTime}}const HdcpLevels=["NONE","TYPE-0","TYPE-1",null];function isHdcpLevel(mr){return HdcpLevels.indexOf(mr)>-1}const VideoRangeValues=["SDR","PQ","HLG"];function isVideoRange(mr){return!!mr&&VideoRangeValues.indexOf(mr)>-1}var HlsSkip={No:"",Yes:"YES",v2:"v2"};function getSkipValue(mr){const{canSkipUntil:hr,canSkipDateRanges:gr,age:vr}=mr,xr=vr<hr/2;return hr&&xr?gr?HlsSkip.v2:HlsSkip.Yes:HlsSkip.No}class HlsUrlParameters{constructor(hr,gr,vr){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=hr,this.part=gr,this.skip=vr}addDirectives(hr){const gr=new self.URL(hr);return this.msn!==void 0&&gr.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&gr.searchParams.set("_HLS_part",this.part.toString()),this.skip&&gr.searchParams.set("_HLS_skip",this.skip),gr.href}}class Level{constructor(hr){this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[hr.url],this._attrs=[hr.attrs],this.bitrate=hr.bitrate,hr.details&&(this.details=hr.details),this.id=hr.id||0,this.name=hr.name,this.width=hr.width||0,this.height=hr.height||0,this.frameRate=hr.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=hr.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=hr.audioCodec,this.videoCodec=hr.videoCodec,this.codecSet=[hr.videoCodec,hr.audioCodec].filter(gr=>!!gr).map(gr=>gr.substring(0,4)).join(","),this.addGroupId("audio",hr.attrs.AUDIO),this.addGroupId("text",hr.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(hr){return hasGroup(this._audioGroups,hr)}hasSubtitleGroup(hr){return hasGroup(this._subtitleGroups,hr)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(hr,gr){if(gr){if(hr==="audio"){let vr=this._audioGroups;vr||(vr=this._audioGroups=[]),vr.indexOf(gr)===-1&&vr.push(gr)}else if(hr==="text"){let vr=this._subtitleGroups;vr||(vr=this._subtitleGroups=[]),vr.indexOf(gr)===-1&&vr.push(gr)}}}get urlId(){return 0}set urlId(hr){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var hr;return(hr=this.audioGroups)==null?void 0:hr[0]}get textGroupId(){var hr;return(hr=this.subtitleGroups)==null?void 0:hr[0]}addFallback(){}}function hasGroup(mr,hr){return!hr||!mr?!1:mr.indexOf(hr)!==-1}function updateFromToPTS(mr,hr){const gr=hr.startPTS;if(isFiniteNumber(gr)){let vr=0,xr;hr.sn>mr.sn?(vr=gr-mr.start,xr=mr):(vr=mr.start-gr,xr=hr),xr.duration!==vr&&(xr.duration=vr)}else hr.sn>mr.sn?mr.cc===hr.cc&&mr.minEndPTS?hr.start=mr.start+(mr.minEndPTS-mr.start):hr.start=mr.start+mr.duration:hr.start=Math.max(mr.start-hr.duration,0)}function updateFragPTSDTS(mr,hr,gr,vr,xr,Er){vr-gr<=0&&(logger.warn("Fragment should have a positive duration",hr),vr=gr+hr.duration,Er=xr+hr.duration);let wr=gr,Rr=vr;const kr=hr.startPTS,Dr=hr.endPTS;if(isFiniteNumber(kr)){const Qr=Math.abs(kr-gr);isFiniteNumber(hr.deltaPTS)?hr.deltaPTS=Math.max(Qr,hr.deltaPTS):hr.deltaPTS=Qr,wr=Math.max(gr,kr),gr=Math.min(gr,kr),xr=Math.min(xr,hr.startDTS),Rr=Math.min(vr,Dr),vr=Math.max(vr,Dr),Er=Math.max(Er,hr.endDTS)}const Br=gr-hr.start;hr.start!==0&&(hr.start=gr),hr.duration=vr-hr.start,hr.startPTS=gr,hr.maxStartPTS=wr,hr.startDTS=xr,hr.endPTS=vr,hr.minEndPTS=Rr,hr.endDTS=Er;const Hr=hr.sn;if(!mr||Hr<mr.startSN||Hr>mr.endSN)return 0;let Gr;const qr=Hr-mr.startSN,zr=mr.fragments;for(zr[qr]=hr,Gr=qr;Gr>0;Gr--)updateFromToPTS(zr[Gr],zr[Gr-1]);for(Gr=qr;Gr<zr.length-1;Gr++)updateFromToPTS(zr[Gr],zr[Gr+1]);return mr.fragmentHint&&updateFromToPTS(zr[zr.length-1],mr.fragmentHint),mr.PTSKnown=mr.alignedSliding=!0,Br}function mergeDetails(mr,hr){let gr=null;const vr=mr.fragments;for(let wr=vr.length-1;wr>=0;wr--){const Rr=vr[wr].initSegment;if(Rr){gr=Rr;break}}mr.fragmentHint&&delete mr.fragmentHint.endPTS;let xr;mapFragmentIntersection(mr,hr,(wr,Rr,kr,Dr)=>{if(hr.skippedSegments&&Rr.cc!==wr.cc){const Br=wr.cc-Rr.cc;for(let Hr=kr;Hr<Dr.length;Hr++)Dr[Hr].cc+=Br}isFiniteNumber(wr.startPTS)&&isFiniteNumber(wr.endPTS)&&(Rr.start=Rr.startPTS=wr.startPTS,Rr.startDTS=wr.startDTS,Rr.maxStartPTS=wr.maxStartPTS,Rr.endPTS=wr.endPTS,Rr.endDTS=wr.endDTS,Rr.minEndPTS=wr.minEndPTS,Rr.duration=wr.endPTS-wr.startPTS,Rr.duration&&(xr=Rr),hr.PTSKnown=hr.alignedSliding=!0),Rr.elementaryStreams=wr.elementaryStreams,Rr.loader=wr.loader,Rr.stats=wr.stats,wr.initSegment&&(Rr.initSegment=wr.initSegment,gr=wr.initSegment)});const Er=hr.fragments;if(gr&&(hr.fragmentHint?Er.concat(hr.fragmentHint):Er).forEach(Rr=>{var kr;Rr&&(!Rr.initSegment||Rr.initSegment.relurl===((kr=gr)==null?void 0:kr.relurl))&&(Rr.initSegment=gr)}),hr.skippedSegments){if(hr.deltaUpdateFailed=Er.some(wr=>!wr),hr.deltaUpdateFailed){logger.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let wr=hr.skippedSegments;wr--;)Er.shift();hr.startSN=Er[0].sn}else hr.canSkipDateRanges&&(hr.dateRanges=mergeDateRanges(mr.dateRanges,hr.dateRanges,hr.recentlyRemovedDateranges));hr.startCC=hr.fragments[0].cc,hr.endCC=Er[Er.length-1].cc}mapPartIntersection(mr.partList,hr.partList,(wr,Rr)=>{Rr.elementaryStreams=wr.elementaryStreams,Rr.stats=wr.stats}),xr?updateFragPTSDTS(hr,xr,xr.startPTS,xr.endPTS,xr.startDTS,xr.endDTS):adjustSliding(mr,hr),Er.length&&(hr.totalduration=hr.edge-Er[0].start),hr.driftStartTime=mr.driftStartTime,hr.driftStart=mr.driftStart;const Cr=hr.advancedDateTime;if(hr.advanced&&Cr){const wr=hr.edge;hr.driftStart||(hr.driftStartTime=Cr,hr.driftStart=wr),hr.driftEndTime=Cr,hr.driftEnd=wr}else hr.driftEndTime=mr.driftEndTime,hr.driftEnd=mr.driftEnd,hr.advancedDateTime=mr.advancedDateTime}function mergeDateRanges(mr,hr,gr){const vr=_extends({},mr);return gr&&gr.forEach(xr=>{delete vr[xr]}),Object.keys(hr).forEach(xr=>{const Er=new DateRange(hr[xr].attr,vr[xr]);Er.isValid?vr[xr]=Er:logger.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${JSON.stringify(hr[xr].attr)}"`)}),vr}function mapPartIntersection(mr,hr,gr){if(mr&&hr){let vr=0;for(let xr=0,Er=mr.length;xr<=Er;xr++){const Cr=mr[xr],wr=hr[xr+vr];Cr&&wr&&Cr.index===wr.index&&Cr.fragment.sn===wr.fragment.sn?gr(Cr,wr):vr--}}}function mapFragmentIntersection(mr,hr,gr){const vr=hr.skippedSegments,xr=Math.max(mr.startSN,hr.startSN)-hr.startSN,Er=(mr.fragmentHint?1:0)+(vr?hr.endSN:Math.min(mr.endSN,hr.endSN))-hr.startSN,Cr=hr.startSN-mr.startSN,wr=hr.fragmentHint?hr.fragments.concat(hr.fragmentHint):hr.fragments,Rr=mr.fragmentHint?mr.fragments.concat(mr.fragmentHint):mr.fragments;for(let kr=xr;kr<=Er;kr++){const Dr=Rr[Cr+kr];let Br=wr[kr];vr&&!Br&&kr<vr&&(Br=hr.fragments[kr]=Dr),Dr&&Br&&gr(Dr,Br,kr,wr)}}function adjustSliding(mr,hr){const gr=hr.startSN+hr.skippedSegments-mr.startSN,vr=mr.fragments;gr<0||gr>=vr.length||addSliding(hr,vr[gr].start)}function addSliding(mr,hr){if(hr){const gr=mr.fragments;for(let vr=mr.skippedSegments;vr<gr.length;vr++)gr[vr].start+=hr;mr.fragmentHint&&(mr.fragmentHint.start+=hr)}}function computeReloadInterval(mr,hr=1/0){let gr=1e3*mr.targetduration;if(mr.updated){const vr=mr.fragments;if(vr.length&&gr*4>hr){const Er=vr[vr.length-1].duration*1e3;Er<gr&&(gr=Er)}}else gr/=2;return Math.round(gr)}function getFragmentWithSN(mr,hr,gr){if(!(mr!=null&&mr.details))return null;const vr=mr.details;let xr=vr.fragments[hr-vr.startSN];return xr||(xr=vr.fragmentHint,xr&&xr.sn===hr)?xr:hr<vr.startSN&&gr&&gr.sn===hr?gr:null}function getPartWith(mr,hr,gr){var vr;return mr!=null&&mr.details?findPart((vr=mr.details)==null?void 0:vr.partList,hr,gr):null}function findPart(mr,hr,gr){if(mr)for(let vr=mr.length;vr--;){const xr=mr[vr];if(xr.index===gr&&xr.fragment.sn===hr)return xr}return null}function reassignFragmentLevelIndexes(mr){mr.forEach((hr,gr)=>{const{details:vr}=hr;vr!=null&&vr.fragments&&vr.fragments.forEach(xr=>{xr.level=gr})})}function isTimeoutError(mr){switch(mr.details){case ErrorDetails.FRAG_LOAD_TIMEOUT:case ErrorDetails.KEY_LOAD_TIMEOUT:case ErrorDetails.LEVEL_LOAD_TIMEOUT:case ErrorDetails.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function getRetryConfig(mr,hr){const gr=isTimeoutError(hr);return mr.default[`${gr?"timeout":"error"}Retry`]}function getRetryDelay(mr,hr){const gr=mr.backoff==="linear"?1:Math.pow(2,hr);return Math.min(gr*mr.retryDelayMs,mr.maxRetryDelayMs)}function getLoaderConfigWithoutReties(mr){return _objectSpread2(_objectSpread2({},mr),{errorRetry:null,timeoutRetry:null})}function shouldRetry(mr,hr,gr,vr){if(!mr)return!1;const xr=vr?.code,Er=hr<mr.maxNumRetry&&(retryForHttpStatus(xr)||!!gr);return mr.shouldRetry?mr.shouldRetry(mr,hr,gr,vr,Er):Er}function retryForHttpStatus(mr){return mr===0&&navigator.onLine===!1||!!mr&&(mr<400||mr>499)}const BinarySearch={search:function(mr,hr){let gr=0,vr=mr.length-1,xr=null,Er=null;for(;gr<=vr;){xr=(gr+vr)/2|0,Er=mr[xr];const Cr=hr(Er);if(Cr>0)gr=xr+1;else if(Cr<0)vr=xr-1;else return Er}return null}};function findFragmentByPDT(mr,hr,gr){if(hr===null||!Array.isArray(mr)||!mr.length||!isFiniteNumber(hr))return null;const vr=mr[0].programDateTime;if(hr<(vr||0))return null;const xr=mr[mr.length-1].endProgramDateTime;if(hr>=(xr||0))return null;gr=gr||0;for(let Er=0;Er<mr.length;++Er){const Cr=mr[Er];if(pdtWithinToleranceTest(hr,gr,Cr))return Cr}return null}function findFragmentByPTS(mr,hr,gr=0,vr=0,xr=.005){let Er=null;if(mr){Er=hr[mr.sn-hr[0].sn+1]||null;const wr=mr.endDTS-gr;wr>0&&wr<15e-7&&(gr+=15e-7)}else gr===0&&hr[0].start===0&&(Er=hr[0]);if(Er&&((!mr||mr.level===Er.level)&&fragmentWithinToleranceTest(gr,vr,Er)===0||fragmentWithinFastStartSwitch(Er,mr,Math.min(xr,vr))))return Er;const Cr=BinarySearch.search(hr,fragmentWithinToleranceTest.bind(null,gr,vr));return Cr&&(Cr!==mr||!Er)?Cr:Er}function fragmentWithinFastStartSwitch(mr,hr,gr){if(hr&&hr.start===0&&hr.level<mr.level&&(hr.endPTS||0)>0){const vr=hr.tagList.reduce((xr,Er)=>(Er[0]==="INF"&&(xr+=parseFloat(Er[1])),xr),gr);return mr.start<=vr}return!1}function fragmentWithinToleranceTest(mr=0,hr=0,gr){if(gr.start<=mr&&gr.start+gr.duration>mr)return 0;const vr=Math.min(hr,gr.duration+(gr.deltaPTS?gr.deltaPTS:0));return gr.start+gr.duration-vr<=mr?1:gr.start-vr>mr&&gr.start?-1:0}function pdtWithinToleranceTest(mr,hr,gr){const vr=Math.min(hr,gr.duration+(gr.deltaPTS?gr.deltaPTS:0))*1e3;return(gr.endProgramDateTime||0)-vr>mr}function findFragWithCC(mr,hr){return BinarySearch.search(mr,gr=>gr.cc<hr?1:gr.cc>hr?-1:0)}var NetworkErrorAction={DoNothing:0,SendEndCallback:1,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,InsertDiscontinuity:4,RetryRequest:5},ErrorActionFlags={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2,SwitchToSDR:4};class ErrorController{constructor(hr){this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.log=void 0,this.warn=void 0,this.error=void 0,this.hls=hr,this.log=logger.log.bind(logger,"[info]:"),this.warn=logger.warn.bind(logger,"[warning]:"),this.error=logger.error.bind(logger,"[error]:"),this.registerListeners()}registerListeners(){const hr=this.hls;hr.on(Events.ERROR,this.onError,this),hr.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),hr.on(Events.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const hr=this.hls;hr&&(hr.off(Events.ERROR,this.onError,this),hr.off(Events.ERROR,this.onErrorOut,this),hr.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),hr.off(Events.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}}startLoad(hr){}stopLoad(){this.playlistError=0}getVariantLevelIndex(hr){return hr?.type===PlaylistLevelType.MAIN?hr.level:this.hls.loadLevel}onManifestLoading(){this.playlistError=0,this.penalizedRenditions={}}onLevelUpdated(){this.playlistError=0}onError(hr,gr){var vr,xr;if(gr.fatal)return;const Er=this.hls,Cr=gr.context;switch(gr.details){case ErrorDetails.FRAG_LOAD_ERROR:case ErrorDetails.FRAG_LOAD_TIMEOUT:case ErrorDetails.KEY_LOAD_ERROR:case ErrorDetails.KEY_LOAD_TIMEOUT:gr.errorAction=this.getFragRetryOrSwitchAction(gr);return;case ErrorDetails.FRAG_PARSING_ERROR:if((vr=gr.frag)!=null&&vr.gap){gr.errorAction={action:NetworkErrorAction.DoNothing,flags:ErrorActionFlags.None};return}case ErrorDetails.FRAG_GAP:case ErrorDetails.FRAG_DECRYPT_ERROR:{gr.errorAction=this.getFragRetryOrSwitchAction(gr),gr.errorAction.action=NetworkErrorAction.SendAlternateToPenaltyBox;return}case ErrorDetails.LEVEL_EMPTY_ERROR:case ErrorDetails.LEVEL_PARSING_ERROR:{var wr,Rr;const kr=gr.parent===PlaylistLevelType.MAIN?gr.level:Er.loadLevel;gr.details===ErrorDetails.LEVEL_EMPTY_ERROR&&((wr=gr.context)!=null&&(Rr=wr.levelDetails)!=null&&Rr.live)?gr.errorAction=this.getPlaylistRetryOrSwitchAction(gr,kr):(gr.levelRetry=!1,gr.errorAction=this.getLevelSwitchAction(gr,kr))}return;case ErrorDetails.LEVEL_LOAD_ERROR:case ErrorDetails.LEVEL_LOAD_TIMEOUT:typeof Cr?.level=="number"&&(gr.errorAction=this.getPlaylistRetryOrSwitchAction(gr,Cr.level));return;case ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case ErrorDetails.SUBTITLE_LOAD_ERROR:case ErrorDetails.SUBTITLE_TRACK_LOAD_TIMEOUT:if(Cr){const kr=Er.levels[Er.loadLevel];if(kr&&(Cr.type===PlaylistContextType.AUDIO_TRACK&&kr.hasAudioGroup(Cr.groupId)||Cr.type===PlaylistContextType.SUBTITLE_TRACK&&kr.hasSubtitleGroup(Cr.groupId))){gr.errorAction=this.getPlaylistRetryOrSwitchAction(gr,Er.loadLevel),gr.errorAction.action=NetworkErrorAction.SendAlternateToPenaltyBox,gr.errorAction.flags=ErrorActionFlags.MoveAllAlternatesMatchingHost;return}}return;case ErrorDetails.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{const kr=Er.levels[Er.loadLevel],Dr=kr?.attrs["HDCP-LEVEL"];Dr?gr.errorAction={action:NetworkErrorAction.SendAlternateToPenaltyBox,flags:ErrorActionFlags.MoveAllAlternatesMatchingHDCP,hdcpLevel:Dr}:this.keySystemError(gr)}return;case ErrorDetails.BUFFER_ADD_CODEC_ERROR:case ErrorDetails.REMUX_ALLOC_ERROR:case ErrorDetails.BUFFER_APPEND_ERROR:gr.errorAction=this.getLevelSwitchAction(gr,(xr=gr.level)!=null?xr:Er.loadLevel);return;case ErrorDetails.INTERNAL_EXCEPTION:case ErrorDetails.BUFFER_APPENDING_ERROR:case ErrorDetails.BUFFER_FULL_ERROR:case ErrorDetails.LEVEL_SWITCH_ERROR:case ErrorDetails.BUFFER_STALLED_ERROR:case ErrorDetails.BUFFER_SEEK_OVER_HOLE:case ErrorDetails.BUFFER_NUDGE_ON_STALL:gr.errorAction={action:NetworkErrorAction.DoNothing,flags:ErrorActionFlags.None};return}gr.type===ErrorTypes.KEY_SYSTEM_ERROR&&this.keySystemError(gr)}keySystemError(hr){const gr=this.getVariantLevelIndex(hr.frag);hr.levelRetry=!1,hr.errorAction=this.getLevelSwitchAction(hr,gr)}getPlaylistRetryOrSwitchAction(hr,gr){const vr=this.hls,xr=getRetryConfig(vr.config.playlistLoadPolicy,hr),Er=this.playlistError++;if(shouldRetry(xr,Er,isTimeoutError(hr),hr.response))return{action:NetworkErrorAction.RetryRequest,flags:ErrorActionFlags.None,retryConfig:xr,retryCount:Er};const wr=this.getLevelSwitchAction(hr,gr);return xr&&(wr.retryConfig=xr,wr.retryCount=Er),wr}getFragRetryOrSwitchAction(hr){const gr=this.hls,vr=this.getVariantLevelIndex(hr.frag),xr=gr.levels[vr],{fragLoadPolicy:Er,keyLoadPolicy:Cr}=gr.config,wr=getRetryConfig(hr.details.startsWith("key")?Cr:Er,hr),Rr=gr.levels.reduce((Dr,Br)=>Dr+Br.fragmentError,0);if(xr&&(hr.details!==ErrorDetails.FRAG_GAP&&xr.fragmentError++,shouldRetry(wr,Rr,isTimeoutError(hr),hr.response)))return{action:NetworkErrorAction.RetryRequest,flags:ErrorActionFlags.None,retryConfig:wr,retryCount:Rr};const kr=this.getLevelSwitchAction(hr,vr);return wr&&(kr.retryConfig=wr,kr.retryCount=Rr),kr}getLevelSwitchAction(hr,gr){const vr=this.hls;gr==null&&(gr=vr.loadLevel);const xr=this.hls.levels[gr];if(xr){var Er,Cr;const kr=hr.details;xr.loadError++,kr===ErrorDetails.BUFFER_APPEND_ERROR&&xr.fragmentError++;let Dr=-1;const{levels:Br,loadLevel:Hr,minAutoLevel:Gr,maxAutoLevel:qr}=vr;vr.autoLevelEnabled||(vr.loadLevel=-1);const zr=(Er=hr.frag)==null?void 0:Er.type,sn=(zr===PlaylistLevelType.AUDIO&&kr===ErrorDetails.FRAG_PARSING_ERROR||hr.sourceBufferName==="audio"&&(kr===ErrorDetails.BUFFER_ADD_CODEC_ERROR||kr===ErrorDetails.BUFFER_APPEND_ERROR))&&Br.some(({audioCodec:bn})=>xr.audioCodec!==bn),vn=hr.sourceBufferName==="video"&&(kr===ErrorDetails.BUFFER_ADD_CODEC_ERROR||kr===ErrorDetails.BUFFER_APPEND_ERROR)&&Br.some(({codecSet:bn,audioCodec:xn})=>xr.codecSet!==bn&&xr.audioCodec===xn),{type:yn,groupId:gn}=(Cr=hr.context)!=null?Cr:{};for(let bn=Br.length;bn--;){const xn=(bn+Hr)%Br.length;if(xn!==Hr&&xn>=Gr&&xn<=qr&&Br[xn].loadError===0){var wr,Rr;const $n=Br[xn];if(kr===ErrorDetails.FRAG_GAP&&zr===PlaylistLevelType.MAIN&&hr.frag){const Sn=Br[xn].details;if(Sn){const Cn=findFragmentByPTS(hr.frag,Sn.fragments,hr.frag.start);if(Cn!=null&&Cn.gap)continue}}else{if(yn===PlaylistContextType.AUDIO_TRACK&&$n.hasAudioGroup(gn)||yn===PlaylistContextType.SUBTITLE_TRACK&&$n.hasSubtitleGroup(gn))continue;if(zr===PlaylistLevelType.AUDIO&&(wr=xr.audioGroups)!=null&&wr.some(Sn=>$n.hasAudioGroup(Sn))||zr===PlaylistLevelType.SUBTITLE&&(Rr=xr.subtitleGroups)!=null&&Rr.some(Sn=>$n.hasSubtitleGroup(Sn))||sn&&xr.audioCodec===$n.audioCodec||!sn&&xr.audioCodec!==$n.audioCodec||vn&&xr.codecSet===$n.codecSet)continue}Dr=xn;break}}if(Dr>-1&&vr.loadLevel!==Dr)return hr.levelRetry=!0,this.playlistError=0,{action:NetworkErrorAction.SendAlternateToPenaltyBox,flags:ErrorActionFlags.None,nextAutoLevel:Dr}}return{action:NetworkErrorAction.SendAlternateToPenaltyBox,flags:ErrorActionFlags.MoveAllAlternatesMatchingHost}}onErrorOut(hr,gr){var vr;switch((vr=gr.errorAction)==null?void 0:vr.action){case NetworkErrorAction.DoNothing:break;case NetworkErrorAction.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(gr),!gr.errorAction.resolved&&gr.details!==ErrorDetails.FRAG_GAP?gr.fatal=!0:/MediaSource readyState: ended/.test(gr.error.message)&&(this.warn(`MediaSource ended after "${gr.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError());break}if(gr.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(hr){const gr=this.hls,vr=hr.errorAction;if(!vr)return;const{flags:xr,hdcpLevel:Er,nextAutoLevel:Cr}=vr;switch(xr){case ErrorActionFlags.None:this.switchLevel(hr,Cr);break;case ErrorActionFlags.MoveAllAlternatesMatchingHDCP:Er&&(gr.maxHdcpLevel=HdcpLevels[HdcpLevels.indexOf(Er)-1],vr.resolved=!0),this.warn(`Restricting playback to HDCP-LEVEL of "${gr.maxHdcpLevel}" or lower`);break}vr.resolved||this.switchLevel(hr,Cr)}switchLevel(hr,gr){gr!==void 0&&hr.errorAction&&(this.warn(`switching to level ${gr} after ${hr.details}`),this.hls.nextAutoLevel=gr,hr.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel)}}class BasePlaylistController{constructor(hr,gr){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.log=void 0,this.warn=void 0,this.log=logger.log.bind(logger,`${gr}:`),this.warn=logger.warn.bind(logger,`${gr}:`),this.hls=hr}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){this.timer!==-1&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.requestScheduled=-1,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(hr,gr,vr){const xr=gr?.renditionReports;if(xr){let Er=-1;for(let Cr=0;Cr<xr.length;Cr++){const wr=xr[Cr];let Rr;try{Rr=new self.URL(wr.URI,gr.url).href}catch(kr){logger.warn(`Could not construct new URL for Rendition Report: ${kr}`),Rr=wr.URI||""}if(Rr===hr){Er=Cr;break}else Rr===hr.substring(0,Rr.length)&&(Er=Cr)}if(Er!==-1){const Cr=xr[Er],wr=parseInt(Cr["LAST-MSN"])||gr?.lastPartSn;let Rr=parseInt(Cr["LAST-PART"])||gr?.lastPartIndex;if(this.hls.config.lowLatencyMode){const Dr=Math.min(gr.age-gr.partTarget,gr.targetduration);Rr>=0&&Dr>gr.partTarget&&(Rr+=1)}const kr=vr&&getSkipValue(vr);return new HlsUrlParameters(wr,Rr>=0?Rr:void 0,kr)}}}loadPlaylist(hr){this.requestScheduled===-1&&(this.requestScheduled=self.performance.now())}shouldLoadPlaylist(hr){return this.canLoad&&!!hr&&!!hr.url&&(!hr.details||hr.details.live)}shouldReloadPlaylist(hr){return this.timer===-1&&this.requestScheduled===-1&&this.shouldLoadPlaylist(hr)}playlistLoaded(hr,gr,vr){const{details:xr,stats:Er}=gr,Cr=self.performance.now(),wr=Er.loading.first?Math.max(0,Cr-Er.loading.first):0;if(xr.advancedDateTime=Date.now()-wr,xr.live||vr!=null&&vr.live){if(xr.reloaded(vr),vr&&this.log(`live playlist ${hr} ${xr.advanced?"REFRESHED "+xr.lastPartSn+"-"+xr.lastPartIndex:xr.updated?"UPDATED":"MISSED"}`),vr&&xr.fragments.length>0&&mergeDetails(vr,xr),!this.canLoad||!xr.live)return;let Rr,kr,Dr;if(xr.canBlockReload&&xr.endSN&&xr.advanced){const Qr=this.hls.config.lowLatencyMode,sn=xr.lastPartSn,hn=xr.endSN,vn=xr.lastPartIndex,yn=vn!==-1,gn=sn===hn,bn=Qr?0:vn;yn?(kr=gn?hn+1:sn,Dr=gn?bn:vn+1):kr=hn+1;const xn=xr.age,$n=xn+xr.ageHeader;let Sn=Math.min($n-xr.partTarget,xr.targetduration*1.5);if(Sn>0){if(vr&&Sn>vr.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${vr.tuneInGoal} to: ${Sn} with playlist age: ${xr.age}`),Sn=0;else{const Cn=Math.floor(Sn/xr.targetduration);if(kr+=Cn,Dr!==void 0){const Rn=Math.round(Sn%xr.targetduration/xr.partTarget);Dr+=Rn}this.log(`CDN Tune-in age: ${xr.ageHeader}s last advanced ${xn.toFixed(2)}s goal: ${Sn} skip sn ${Cn} to part ${Dr}`)}xr.tuneInGoal=Sn}if(Rr=this.getDeliveryDirectives(xr,gr.deliveryDirectives,kr,Dr),Qr||!gn){this.loadPlaylist(Rr);return}}else(xr.canBlockReload||xr.canSkipUntil)&&(Rr=this.getDeliveryDirectives(xr,gr.deliveryDirectives,kr,Dr));const Br=this.hls.mainForwardBufferInfo,Hr=Br?Br.end-Br.len:0,Gr=(xr.edge-Hr)*1e3,qr=computeReloadInterval(xr,Gr);xr.updated&&Cr>this.requestScheduled+qr&&(this.requestScheduled=Er.loading.start),kr!==void 0&&xr.canBlockReload?this.requestScheduled=Er.loading.first+qr-(xr.partTarget*1e3||1e3):this.requestScheduled===-1||this.requestScheduled+qr<Cr?this.requestScheduled=Cr:this.requestScheduled-Cr<=0&&(this.requestScheduled+=qr);let zr=this.requestScheduled-Cr;zr=Math.max(0,zr),this.log(`reload live playlist ${hr} in ${Math.round(zr)} ms`),this.timer=self.setTimeout(()=>this.loadPlaylist(Rr),zr)}else this.clearTimer()}getDeliveryDirectives(hr,gr,vr,xr){let Er=getSkipValue(hr);return gr!=null&&gr.skip&&hr.deltaUpdateFailed&&(vr=gr.msn,xr=gr.part,Er=HlsSkip.No),new HlsUrlParameters(vr,xr,Er)}checkRetry(hr){const gr=hr.details,vr=isTimeoutError(hr),xr=hr.errorAction,{action:Er,retryCount:Cr=0,retryConfig:wr}=xr||{},Rr=!!xr&&!!wr&&(Er===NetworkErrorAction.RetryRequest||!xr.resolved&&Er===NetworkErrorAction.SendAlternateToPenaltyBox);if(Rr){var kr;if(this.requestScheduled=-1,Cr>=wr.maxNumRetry)return!1;if(vr&&(kr=hr.context)!=null&&kr.deliveryDirectives)this.warn(`Retrying playlist loading ${Cr+1}/${wr.maxNumRetry} after "${gr}" without delivery-directives`),this.loadPlaylist();else{const Dr=getRetryDelay(wr,Cr);this.timer=self.setTimeout(()=>this.loadPlaylist(),Dr),this.warn(`Retrying playlist loading ${Cr+1}/${wr.maxNumRetry} after "${gr}" in ${Dr}ms`)}hr.levelRetry=!0,xr.resolved=!0}return Rr}}class EWMA{constructor(hr,gr=0,vr=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=hr,this.alpha_=hr?Math.exp(Math.log(.5)/hr):0,this.estimate_=gr,this.totalWeight_=vr}sample(hr,gr){const vr=Math.pow(this.alpha_,hr);this.estimate_=gr*(1-vr)+vr*this.estimate_,this.totalWeight_+=hr}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const hr=1-Math.pow(this.alpha_,this.totalWeight_);if(hr)return this.estimate_/hr}return this.estimate_}}class EwmaBandWidthEstimator{constructor(hr,gr,vr,xr=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=vr,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new EWMA(hr),this.fast_=new EWMA(gr),this.defaultTTFB_=xr,this.ttfb_=new EWMA(hr)}update(hr,gr){const{slow_:vr,fast_:xr,ttfb_:Er}=this;vr.halfLife!==hr&&(this.slow_=new EWMA(hr,vr.getEstimate(),vr.getTotalWeight())),xr.halfLife!==gr&&(this.fast_=new EWMA(gr,xr.getEstimate(),xr.getTotalWeight())),Er.halfLife!==hr&&(this.ttfb_=new EWMA(hr,Er.getEstimate(),Er.getTotalWeight()))}sample(hr,gr){hr=Math.max(hr,this.minDelayMs_);const vr=8*gr,xr=hr/1e3,Er=vr/xr;this.fast_.sample(xr,Er),this.slow_.sample(xr,Er)}sampleTTFB(hr){const gr=hr/1e3,vr=Math.sqrt(2)*Math.exp(-Math.pow(gr,2)/2);this.ttfb_.sample(vr,Math.max(hr,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}destroy(){}}const SUPPORTED_INFO_DEFAULT={supported:!0,configurations:[],decodingInfoResults:[{supported:!0,powerEfficient:!0,smooth:!0}]},SUPPORTED_INFO_CACHE={};function requiresMediaCapabilitiesDecodingInfo(mr,hr,gr,vr,xr,Er){const Cr=mr.audioCodec?mr.audioGroups:null,wr=Er?.audioCodec,Rr=Er?.channels,kr=Rr?parseInt(Rr):wr?1/0:2;let Dr=null;if(Cr!=null&&Cr.length)try{Cr.length===1&&Cr[0]?Dr=hr.groups[Cr[0]].channels:Dr=Cr.reduce((Br,Hr)=>{if(Hr){const Gr=hr.groups[Hr];if(!Gr)throw new Error(`Audio track group ${Hr} not found`);Object.keys(Gr.channels).forEach(qr=>{Br[qr]=(Br[qr]||0)+Gr.channels[qr]})}return Br},{2:0})}catch{return!0}return mr.videoCodec!==void 0&&(mr.width>1920&&mr.height>1088||mr.height>1920&&mr.width>1088||mr.frameRate>Math.max(vr,30)||mr.videoRange!=="SDR"&&mr.videoRange!==gr||mr.bitrate>Math.max(xr,8e6))||!!Dr&&isFiniteNumber(kr)&&Object.keys(Dr).some(Br=>parseInt(Br)>kr)}function getMediaDecodingInfoPromise(mr,hr,gr){const vr=mr.videoCodec,xr=mr.audioCodec;if(!vr||!xr||!gr)return Promise.resolve(SUPPORTED_INFO_DEFAULT);const Er={width:mr.width,height:mr.height,bitrate:Math.ceil(Math.max(mr.bitrate*.9,mr.averageBitrate)),framerate:mr.frameRate||30},Cr=mr.videoRange;Cr!=="SDR"&&(Er.transferFunction=Cr.toLowerCase());const wr=vr.split(",").map(Rr=>({type:"media-source",video:_objectSpread2(_objectSpread2({},Er),{},{contentType:mimeTypeForCodec(Rr,"video")})}));return xr&&mr.audioGroups&&mr.audioGroups.forEach(Rr=>{var kr;Rr&&((kr=hr.groups[Rr])==null||kr.tracks.forEach(Dr=>{if(Dr.groupId===Rr){const Br=Dr.channels||"",Hr=parseFloat(Br);isFiniteNumber(Hr)&&Hr>2&&wr.push.apply(wr,xr.split(",").map(Gr=>({type:"media-source",audio:{contentType:mimeTypeForCodec(Gr,"audio"),channels:""+Hr}})))}}))}),Promise.all(wr.map(Rr=>{const kr=getMediaDecodingInfoKey(Rr);return SUPPORTED_INFO_CACHE[kr]||(SUPPORTED_INFO_CACHE[kr]=gr.decodingInfo(Rr))})).then(Rr=>({supported:!Rr.some(kr=>!kr.supported),configurations:wr,decodingInfoResults:Rr})).catch(Rr=>({supported:!1,configurations:wr,decodingInfoResults:[],error:Rr}))}function getMediaDecodingInfoKey(mr){const{audio:hr,video:gr}=mr,vr=gr||hr;if(vr){const xr=vr.contentType.split('"')[1];if(gr)return`r${gr.height}x${gr.width}f${Math.ceil(gr.framerate)}${gr.transferFunction||"sd"}_${xr}_${Math.ceil(gr.bitrate/1e5)}`;if(hr)return`c${hr.channels}${hr.spatialRendering?"s":"n"}_${xr}`}return""}function isHdrSupported(){if(typeof matchMedia=="function"){const mr=matchMedia("(dynamic-range: high)"),hr=matchMedia("bad query");if(mr.media!==hr.media)return mr.matches===!0}return!1}function getVideoSelectionOptions(mr,hr){let gr=!1,vr=[];return mr&&(gr=mr!=="SDR",vr=[mr]),hr&&(vr=hr.allowedVideoRanges||VideoRangeValues.slice(0),gr=hr.preferHDR!==void 0?hr.preferHDR:isHdrSupported(),gr?vr=vr.filter(xr=>xr!=="SDR"):vr=["SDR"]),{preferHDR:gr,allowedVideoRanges:vr}}function getStartCodecTier(mr,hr,gr,vr,xr){const Er=Object.keys(mr),Cr=vr?.channels,wr=vr?.audioCodec,Rr=Cr&&parseInt(Cr)===2;let kr=!0,Dr=!1,Br=1/0,Hr=1/0,Gr=1/0,qr=0,zr=[];const{preferHDR:Qr,allowedVideoRanges:sn}=getVideoSelectionOptions(hr,xr);for(let gn=Er.length;gn--;){const bn=mr[Er[gn]];kr=bn.channels[2]>0,Br=Math.min(Br,bn.minHeight),Hr=Math.min(Hr,bn.minFramerate),Gr=Math.min(Gr,bn.minBitrate);const xn=sn.filter($n=>bn.videoRanges[$n]>0);xn.length>0&&(Dr=!0,zr=xn)}Br=isFiniteNumber(Br)?Br:0,Hr=isFiniteNumber(Hr)?Hr:0;const hn=Math.max(1080,Br),vn=Math.max(30,Hr);return Gr=isFiniteNumber(Gr)?Gr:gr,gr=Math.max(Gr,gr),Dr||(hr=void 0,zr=[]),{codecSet:Er.reduce((gn,bn)=>{const xn=mr[bn];if(bn===gn)return gn;if(xn.minBitrate>gr)return logStartCodecCandidateIgnored(bn,`min bitrate of ${xn.minBitrate} > current estimate of ${gr}`),gn;if(!xn.hasDefaultAudio)return logStartCodecCandidateIgnored(bn,"no renditions with default or auto-select sound found"),gn;if(wr&&bn.indexOf(wr.substring(0,4))%5!==0)return logStartCodecCandidateIgnored(bn,`audio codec preference "${wr}" not found`),gn;if(Cr&&!Rr){if(!xn.channels[Cr])return logStartCodecCandidateIgnored(bn,`no renditions with ${Cr} channel sound found (channels options: ${Object.keys(xn.channels)})`),gn}else if((!wr||Rr)&&kr&&xn.channels[2]===0)return logStartCodecCandidateIgnored(bn,"no renditions with stereo sound found"),gn;return xn.minHeight>hn?(logStartCodecCandidateIgnored(bn,`min resolution of ${xn.minHeight} > maximum of ${hn}`),gn):xn.minFramerate>vn?(logStartCodecCandidateIgnored(bn,`min framerate of ${xn.minFramerate} > maximum of ${vn}`),gn):zr.some($n=>xn.videoRanges[$n]>0)?xn.maxScore<qr?(logStartCodecCandidateIgnored(bn,`max score of ${xn.maxScore} < selected max of ${qr}`),gn):gn&&(codecsSetSelectionPreferenceValue(bn)>=codecsSetSelectionPreferenceValue(gn)||xn.fragmentError>mr[gn].fragmentError)?gn:(qr=xn.maxScore,bn):(logStartCodecCandidateIgnored(bn,`no variants with VIDEO-RANGE of ${JSON.stringify(zr)} found`),gn)},void 0),videoRanges:zr,preferHDR:Qr,minFramerate:Hr,minBitrate:Gr}}function logStartCodecCandidateIgnored(mr,hr){logger.log(`[abr] start candidates with "${mr}" ignored because ${hr}`)}function getAudioTracksByGroup(mr){return mr.reduce((hr,gr)=>{let vr=hr.groups[gr.groupId];vr||(vr=hr.groups[gr.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),vr.tracks.push(gr);const xr=gr.channels||"2";return vr.channels[xr]=(vr.channels[xr]||0)+1,vr.hasDefault=vr.hasDefault||gr.default,vr.hasAutoSelect=vr.hasAutoSelect||gr.autoselect,vr.hasDefault&&(hr.hasDefaultAudio=!0),vr.hasAutoSelect&&(hr.hasAutoSelectAudio=!0),hr},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function getCodecTiers(mr,hr,gr,vr){return mr.slice(gr,vr+1).reduce((xr,Er)=>{if(!Er.codecSet)return xr;const Cr=Er.audioGroups;let wr=xr[Er.codecSet];wr||(xr[Er.codecSet]=wr={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!Cr,fragmentError:0}),wr.minBitrate=Math.min(wr.minBitrate,Er.bitrate);const Rr=Math.min(Er.height,Er.width);return wr.minHeight=Math.min(wr.minHeight,Rr),wr.minFramerate=Math.min(wr.minFramerate,Er.frameRate),wr.maxScore=Math.max(wr.maxScore,Er.score),wr.fragmentError+=Er.fragmentError,wr.videoRanges[Er.videoRange]=(wr.videoRanges[Er.videoRange]||0)+1,Cr&&Cr.forEach(kr=>{if(!kr)return;const Dr=hr.groups[kr];Dr&&(wr.hasDefaultAudio=wr.hasDefaultAudio||hr.hasDefaultAudio?Dr.hasDefault:Dr.hasAutoSelect||!hr.hasDefaultAudio&&!hr.hasAutoSelectAudio,Object.keys(Dr.channels).forEach(Br=>{wr.channels[Br]=(wr.channels[Br]||0)+Dr.channels[Br]}))}),xr},{})}function findMatchingOption(mr,hr,gr){if("attrs"in mr){const vr=hr.indexOf(mr);if(vr!==-1)return vr}for(let vr=0;vr<hr.length;vr++){const xr=hr[vr];if(matchesOption(mr,xr,gr))return vr}return-1}function matchesOption(mr,hr,gr){const{groupId:vr,name:xr,lang:Er,assocLang:Cr,characteristics:wr,default:Rr}=mr,kr=mr.forced;return(vr===void 0||hr.groupId===vr)&&(xr===void 0||hr.name===xr)&&(Er===void 0||hr.lang===Er)&&(Er===void 0||hr.assocLang===Cr)&&(Rr===void 0||hr.default===Rr)&&(kr===void 0||hr.forced===kr)&&(wr===void 0||characteristicsMatch(wr,hr.characteristics))&&(gr===void 0||gr(mr,hr))}function characteristicsMatch(mr,hr=""){const gr=mr.split(","),vr=hr.split(",");return gr.length===vr.length&&!gr.some(xr=>vr.indexOf(xr)===-1)}function audioMatchPredicate(mr,hr){const{audioCodec:gr,channels:vr}=mr;return(gr===void 0||(hr.audioCodec||"").substring(0,4)===gr.substring(0,4))&&(vr===void 0||vr===(hr.channels||"2"))}function findClosestLevelWithAudioGroup(mr,hr,gr,vr,xr){const Er=hr[vr],wr=hr.reduce((Hr,Gr,qr)=>{const zr=Gr.uri;return(Hr[zr]||(Hr[zr]=[])).push(qr),Hr},{})[Er.uri];wr.length>1&&(vr=Math.max.apply(Math,wr));const Rr=Er.videoRange,kr=Er.frameRate,Dr=Er.codecSet.substring(0,4),Br=searchDownAndUpList(hr,vr,Hr=>{if(Hr.videoRange!==Rr||Hr.frameRate!==kr||Hr.codecSet.substring(0,4)!==Dr)return!1;const Gr=Hr.audioGroups,qr=gr.filter(zr=>!Gr||Gr.indexOf(zr.groupId)!==-1);return findMatchingOption(mr,qr,xr)>-1});return Br>-1?Br:searchDownAndUpList(hr,vr,Hr=>{const Gr=Hr.audioGroups,qr=gr.filter(zr=>!Gr||Gr.indexOf(zr.groupId)!==-1);return findMatchingOption(mr,qr,xr)>-1})}function searchDownAndUpList(mr,hr,gr){for(let vr=hr;vr>-1;vr--)if(gr(mr[vr]))return vr;for(let vr=hr+1;vr<mr.length;vr++)if(gr(mr[vr]))return vr;return-1}class AbrController{constructor(hr){this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this._abandonRulesCheck=()=>{const{fragCurrent:gr,partCurrent:vr,hls:xr}=this,{autoLevelEnabled:Er,media:Cr}=xr;if(!gr||!Cr)return;const wr=performance.now(),Rr=vr?vr.stats:gr.stats,kr=vr?vr.duration:gr.duration,Dr=wr-Rr.loading.start,Br=xr.minAutoLevel;if(Rr.aborted||Rr.loaded&&Rr.loaded===Rr.total||gr.level<=Br){this.clearTimer(),this._nextAutoLevel=-1;return}if(!Er||Cr.paused||!Cr.playbackRate||!Cr.readyState)return;const Hr=xr.mainForwardBufferInfo;if(Hr===null)return;const Gr=this.bwEstimator.getEstimateTTFB(),qr=Math.abs(Cr.playbackRate);if(Dr<=Math.max(Gr,1e3*(kr/(qr*2))))return;const zr=Hr.len/qr,Qr=Rr.loading.first?Rr.loading.first-Rr.loading.start:-1,sn=Rr.loaded&&Qr>-1,hn=this.getBwEstimate(),vn=xr.levels,yn=vn[gr.level],gn=Rr.total||Math.max(Rr.loaded,Math.round(kr*yn.averageBitrate/8));let bn=sn?Dr-Qr:Dr;bn<1&&sn&&(bn=Math.min(Dr,Rr.loaded*8/hn));const xn=sn?Rr.loaded*1e3/bn:0,$n=xn?(gn-Rr.loaded)/xn:gn*8/hn+Gr/1e3;if($n<=zr)return;const Sn=xn?xn*8:hn;let Cn=Number.POSITIVE_INFINITY,Rn;for(Rn=gr.level-1;Rn>Br;Rn--){const Fn=vn[Rn].maxBitrate;if(Cn=this.getTimeToLoadFrag(Gr/1e3,Sn,kr*Fn,!vn[Rn].details),Cn<zr)break}if(Cn>=$n||Cn>kr*10)return;xr.nextLoadLevel=xr.nextAutoLevel=Rn,sn?this.bwEstimator.sample(Dr-Math.min(Gr,Qr),Rr.loaded):this.bwEstimator.sampleTTFB(Dr);const Bn=vn[Rn].maxBitrate;this.getBwEstimate()*this.hls.config.abrBandWidthUpFactor>Bn&&this.resetEstimator(Bn),this.clearTimer(),logger.warn(`[abr] Fragment ${gr.sn}${vr?" part "+vr.index:""} of level ${gr.level} is loading too slowly;
      Time to underbuffer: ${zr.toFixed(3)} s
      Estimated load time for current fragment: ${$n.toFixed(3)} s
      Estimated load time for down switch fragment: ${Cn.toFixed(3)} s
      TTFB estimate: ${Qr|0} ms
      Current BW estimate: ${isFiniteNumber(hn)?hn|0:"Unknown"} bps
      New BW estimate: ${this.getBwEstimate()|0} bps
      Switching to level ${Rn} @ ${Bn|0} bps`),xr.trigger(Events.FRAG_LOAD_EMERGENCY_ABORTED,{frag:gr,part:vr,stats:Rr})},this.hls=hr,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(hr){hr&&(logger.log(`setting initial bwe to ${hr}`),this.hls.config.abrEwmaDefaultEstimate=hr),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const hr=this.hls.config;return new EwmaBandWidthEstimator(hr.abrEwmaSlowVoD,hr.abrEwmaFastVoD,hr.abrEwmaDefaultEstimate)}registerListeners(){const{hls:hr}=this;hr.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),hr.on(Events.FRAG_LOADING,this.onFragLoading,this),hr.on(Events.FRAG_LOADED,this.onFragLoaded,this),hr.on(Events.FRAG_BUFFERED,this.onFragBuffered,this),hr.on(Events.LEVEL_SWITCHING,this.onLevelSwitching,this),hr.on(Events.LEVEL_LOADED,this.onLevelLoaded,this),hr.on(Events.LEVELS_UPDATED,this.onLevelsUpdated,this),hr.on(Events.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),hr.on(Events.ERROR,this.onError,this)}unregisterListeners(){const{hls:hr}=this;hr&&(hr.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),hr.off(Events.FRAG_LOADING,this.onFragLoading,this),hr.off(Events.FRAG_LOADED,this.onFragLoaded,this),hr.off(Events.FRAG_BUFFERED,this.onFragBuffered,this),hr.off(Events.LEVEL_SWITCHING,this.onLevelSwitching,this),hr.off(Events.LEVEL_LOADED,this.onLevelLoaded,this),hr.off(Events.LEVELS_UPDATED,this.onLevelsUpdated,this),hr.off(Events.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),hr.off(Events.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(hr,gr){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(hr,gr){const vr=gr.frag;if(!this.ignoreFragment(vr)){if(!vr.bitrateTest){var xr;this.fragCurrent=vr,this.partCurrent=(xr=gr.part)!=null?xr:null}this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(hr,gr){this.clearTimer()}onError(hr,gr){if(!gr.fatal)switch(gr.details){case ErrorDetails.BUFFER_ADD_CODEC_ERROR:case ErrorDetails.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case ErrorDetails.FRAG_LOAD_TIMEOUT:{const vr=gr.frag,{fragCurrent:xr,partCurrent:Er}=this;if(vr&&xr&&vr.sn===xr.sn&&vr.level===xr.level){const Cr=performance.now(),wr=Er?Er.stats:vr.stats,Rr=Cr-wr.loading.start,kr=wr.loading.first?wr.loading.first-wr.loading.start:-1;if(wr.loaded&&kr>-1){const Br=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(Rr-Math.min(Br,kr),wr.loaded)}else this.bwEstimator.sampleTTFB(Rr)}break}}}getTimeToLoadFrag(hr,gr,vr,xr){const Er=hr+vr/gr,Cr=xr?this.lastLevelLoadSec:0;return Er+Cr}onLevelLoaded(hr,gr){const vr=this.hls.config,{loading:xr}=gr.stats,Er=xr.end-xr.start;isFiniteNumber(Er)&&(this.lastLevelLoadSec=Er/1e3),gr.details.live?this.bwEstimator.update(vr.abrEwmaSlowLive,vr.abrEwmaFastLive):this.bwEstimator.update(vr.abrEwmaSlowVoD,vr.abrEwmaFastVoD)}onFragLoaded(hr,{frag:gr,part:vr}){const xr=vr?vr.stats:gr.stats;if(gr.type===PlaylistLevelType.MAIN&&this.bwEstimator.sampleTTFB(xr.loading.first-xr.loading.start),!this.ignoreFragment(gr)){if(this.clearTimer(),gr.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const Er=vr?vr.duration:gr.duration,Cr=this.hls.levels[gr.level],wr=(Cr.loaded?Cr.loaded.bytes:0)+xr.loaded,Rr=(Cr.loaded?Cr.loaded.duration:0)+Er;Cr.loaded={bytes:wr,duration:Rr},Cr.realBitrate=Math.round(8*wr/Rr)}if(gr.bitrateTest){const Er={stats:xr,frag:gr,part:vr,id:gr.type};this.onFragBuffered(Events.FRAG_BUFFERED,Er),gr.bitrateTest=!1}else this.lastLoadedFragLevel=gr.level}}onFragBuffered(hr,gr){const{frag:vr,part:xr}=gr,Er=xr!=null&&xr.stats.loaded?xr.stats:vr.stats;if(Er.aborted||this.ignoreFragment(vr))return;const Cr=Er.parsing.end-Er.loading.start-Math.min(Er.loading.first-Er.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(Cr,Er.loaded),Er.bwEstimate=this.getBwEstimate(),vr.bitrateTest?this.bitrateTestDelay=Cr/1e3:this.bitrateTestDelay=0}ignoreFragment(hr){return hr.type!==PlaylistLevelType.MAIN||hr.sn==="initSegment"}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:hr,minAutoLevel:gr}=this.hls,vr=this.getBwEstimate(),xr=this.hls.config.maxStarvationDelay,Er=this.findBestLevel(vr,gr,hr,0,xr,1,1);if(Er>-1)return Er;const Cr=this.hls.firstLevel,wr=Math.min(Math.max(Cr,gr),hr);return logger.warn(`[abr] Could not find best starting auto level. Defaulting to first in playlist ${Cr} clamped to ${wr}`),wr}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const hr=this.forcedAutoLevel,vr=this.bwEstimator.canEstimate(),xr=this.lastLoadedFragLevel>-1;if(hr!==-1&&(!vr||!xr||this.nextAutoLevelKey===this.getAutoLevelKey()))return hr;const Er=vr&&xr?this.getNextABRAutoLevel():this.firstAutoLevel;if(hr!==-1){const Cr=this.hls.levels;if(Cr.length>Math.max(hr,Er)&&Cr[hr].loadError<=Cr[Er].loadError)return hr}return this._nextAutoLevel=Er,this.nextAutoLevelKey=this.getAutoLevelKey(),Er}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:hr,partCurrent:gr,hls:vr}=this,{maxAutoLevel:xr,config:Er,minAutoLevel:Cr}=vr,wr=gr?gr.duration:hr?hr.duration:0,Rr=this.getBwEstimate(),kr=this.getStarvationDelay();let Dr=Er.abrBandWidthFactor,Br=Er.abrBandWidthUpFactor;if(kr){const Qr=this.findBestLevel(Rr,Cr,xr,kr,0,Dr,Br);if(Qr>=0)return Qr}let Hr=wr?Math.min(wr,Er.maxStarvationDelay):Er.maxStarvationDelay;if(!kr){const Qr=this.bitrateTestDelay;Qr&&(Hr=(wr?Math.min(wr,Er.maxLoadingDelay):Er.maxLoadingDelay)-Qr,logger.info(`[abr] bitrate test took ${Math.round(1e3*Qr)}ms, set first fragment max fetchDuration to ${Math.round(1e3*Hr)} ms`),Dr=Br=1)}const Gr=this.findBestLevel(Rr,Cr,xr,kr,Hr,Dr,Br);if(logger.info(`[abr] ${kr?"rebuffering expected":"buffer is empty"}, optimal quality level ${Gr}`),Gr>-1)return Gr;const qr=vr.levels[Cr],zr=vr.levels[vr.loadLevel];return qr?.bitrate<zr?.bitrate?Cr:vr.loadLevel}getStarvationDelay(){const hr=this.hls,gr=hr.media;if(!gr)return 1/0;const vr=gr&&gr.playbackRate!==0?Math.abs(gr.playbackRate):1,xr=hr.mainForwardBufferInfo;return(xr?xr.len:0)/vr}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(hr,gr,vr,xr,Er,Cr,wr){var Rr;const kr=xr+Er,Dr=this.lastLoadedFragLevel,Br=Dr===-1?this.hls.firstLevel:Dr,{fragCurrent:Hr,partCurrent:Gr}=this,{levels:qr,allAudioTracks:zr,loadLevel:Qr,config:sn}=this.hls;if(qr.length===1)return 0;const hn=qr[Br],vn=!!(hn!=null&&(Rr=hn.details)!=null&&Rr.live),yn=Qr===-1||Dr===-1;let gn,bn="SDR",xn=hn?.frameRate||0;const{audioPreference:$n,videoPreference:Sn}=sn,Cn=this.audioTracksByGroup||(this.audioTracksByGroup=getAudioTracksByGroup(zr));if(yn){if(this.firstSelection!==-1)return this.firstSelection;const Gn=this.codecTiers||(this.codecTiers=getCodecTiers(qr,Cn,gr,vr)),qn=getStartCodecTier(Gn,bn,hr,$n,Sn),{codecSet:On,videoRanges:wn,minFramerate:_n,minBitrate:Tn,preferHDR:Mn}=qn;gn=On,bn=Mn?wn[wn.length-1]:wn[0],xn=_n,hr=Math.max(hr,Tn),logger.log(`[abr] picked start tier ${JSON.stringify(qn)}`)}else gn=hn?.codecSet,bn=hn?.videoRange;const Rn=Gr?Gr.duration:Hr?Hr.duration:0,Bn=this.bwEstimator.getEstimateTTFB()/1e3,Fn=[];for(let Gn=vr;Gn>=gr;Gn--){var Hn;const qn=qr[Gn],On=Gn>Br;if(!qn)continue;if(sn.useMediaCapabilities&&!qn.supportedResult&&!qn.supportedPromise){const Kn=navigator.mediaCapabilities;typeof Kn?.decodingInfo=="function"&&requiresMediaCapabilitiesDecodingInfo(qn,Cn,bn,xn,hr,$n)?(qn.supportedPromise=getMediaDecodingInfoPromise(qn,Cn,Kn),qn.supportedPromise.then(Nn=>{if(!this.hls)return;qn.supportedResult=Nn;const An=this.hls.levels,kn=An.indexOf(qn);Nn.error?logger.warn(`[abr] MediaCapabilities decodingInfo error: "${Nn.error}" for level ${kn} ${JSON.stringify(Nn)}`):Nn.supported||(logger.warn(`[abr] Unsupported MediaCapabilities decodingInfo result for level ${kn} ${JSON.stringify(Nn)}`),kn>-1&&An.length>1&&(logger.log(`[abr] Removing unsupported level ${kn}`),this.hls.removeLevel(kn)))})):qn.supportedResult=SUPPORTED_INFO_DEFAULT}if(gn&&qn.codecSet!==gn||bn&&qn.videoRange!==bn||On&&xn>qn.frameRate||!On&&xn>0&&xn<qn.frameRate||qn.supportedResult&&!((Hn=qn.supportedResult.decodingInfoResults)!=null&&Hn[0].smooth)){Fn.push(Gn);continue}const wn=qn.details,_n=(Gr?wn?.partTarget:wn?.averagetargetduration)||Rn;let Tn;On?Tn=wr*hr:Tn=Cr*hr;const Mn=Rn&&xr>=Rn*2&&Er===0?qr[Gn].averageBitrate:qr[Gn].maxBitrate,Ln=this.getTimeToLoadFrag(Bn,Tn,Mn*_n,wn===void 0);if(Tn>=Mn&&(Gn===Dr||qn.loadError===0&&qn.fragmentError===0)&&(Ln<=Bn||!isFiniteNumber(Ln)||vn&&!this.bitrateTestDelay||Ln<kr)){const Kn=this.forcedAutoLevel;return Gn!==Qr&&(Kn===-1||Kn!==Qr)&&(Fn.length&&logger.trace(`[abr] Skipped level(s) ${Fn.join(",")} of ${vr} max with CODECS and VIDEO-RANGE:"${qr[Fn[0]].codecs}" ${qr[Fn[0]].videoRange}; not compatible with "${hn.codecs}" ${bn}`),logger.info(`[abr] switch candidate:${Br}->${Gn} adjustedbw(${Math.round(Tn)})-bitrate=${Math.round(Tn-Mn)} ttfb:${Bn.toFixed(1)} avgDuration:${_n.toFixed(1)} maxFetchDuration:${kr.toFixed(1)} fetchDuration:${Ln.toFixed(1)} firstSelection:${yn} codecSet:${gn} videoRange:${bn} hls.loadLevel:${Qr}`)),yn&&(this.firstSelection=Gn),Gn}}return-1}set nextAutoLevel(hr){const{maxAutoLevel:gr,minAutoLevel:vr}=this.hls,xr=Math.min(Math.max(hr,vr),gr);this._nextAutoLevel!==xr&&(this.nextAutoLevelKey="",this._nextAutoLevel=xr)}}class TaskLoop{constructor(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(hr){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,hr),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}var FragmentState={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class FragmentTracker{constructor(hr){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=hr,this._registerListeners()}_registerListeners(){const{hls:hr}=this;hr.on(Events.BUFFER_APPENDED,this.onBufferAppended,this),hr.on(Events.FRAG_BUFFERED,this.onFragBuffered,this),hr.on(Events.FRAG_LOADED,this.onFragLoaded,this)}_unregisterListeners(){const{hls:hr}=this;hr.off(Events.BUFFER_APPENDED,this.onBufferAppended,this),hr.off(Events.FRAG_BUFFERED,this.onFragBuffered,this),hr.off(Events.FRAG_LOADED,this.onFragLoaded,this)}destroy(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(hr,gr){const vr=this.activePartLists[gr];if(vr)for(let xr=vr.length;xr--;){const Er=vr[xr];if(!Er)break;const Cr=Er.end;if(Er.start<=hr&&Cr!==null&&hr<=Cr)return Er}return this.getBufferedFrag(hr,gr)}getBufferedFrag(hr,gr){const{fragments:vr}=this,xr=Object.keys(vr);for(let Er=xr.length;Er--;){const Cr=vr[xr[Er]];if(Cr?.body.type===gr&&Cr.buffered){const wr=Cr.body;if(wr.start<=hr&&hr<=wr.end)return wr}}return null}detectEvictedFragments(hr,gr,vr,xr){this.timeRanges&&(this.timeRanges[hr]=gr);const Er=xr?.fragment.sn||-1;Object.keys(this.fragments).forEach(Cr=>{const wr=this.fragments[Cr];if(!wr||Er>=wr.body.sn)return;if(!wr.buffered&&!wr.loaded){wr.body.type===vr&&this.removeFragment(wr.body);return}const Rr=wr.range[hr];Rr&&Rr.time.some(kr=>{const Dr=!this.isTimeBuffered(kr.startPTS,kr.endPTS,gr);return Dr&&this.removeFragment(wr.body),Dr})})}detectPartialFragments(hr){const gr=this.timeRanges,{frag:vr,part:xr}=hr;if(!gr||vr.sn==="initSegment")return;const Er=getFragmentKey(vr),Cr=this.fragments[Er];if(!Cr||Cr.buffered&&vr.gap)return;const wr=!vr.relurl;Object.keys(gr).forEach(Rr=>{const kr=vr.elementaryStreams[Rr];if(!kr)return;const Dr=gr[Rr],Br=wr||kr.partial===!0;Cr.range[Rr]=this.getBufferedTimes(vr,xr,Br,Dr)}),Cr.loaded=null,Object.keys(Cr.range).length?(Cr.buffered=!0,(Cr.body.endList=vr.endList||Cr.body.endList)&&(this.endListFragments[Cr.body.type]=Cr),isPartial(Cr)||this.removeParts(vr.sn-1,vr.type)):this.removeFragment(Cr.body)}removeParts(hr,gr){const vr=this.activePartLists[gr];vr&&(this.activePartLists[gr]=vr.filter(xr=>xr.fragment.sn>=hr))}fragBuffered(hr,gr){const vr=getFragmentKey(hr);let xr=this.fragments[vr];!xr&&gr&&(xr=this.fragments[vr]={body:hr,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},hr.gap&&(this.hasGaps=!0)),xr&&(xr.loaded=null,xr.buffered=!0)}getBufferedTimes(hr,gr,vr,xr){const Er={time:[],partial:vr},Cr=hr.start,wr=hr.end,Rr=hr.minEndPTS||wr,kr=hr.maxStartPTS||Cr;for(let Dr=0;Dr<xr.length;Dr++){const Br=xr.start(Dr)-this.bufferPadding,Hr=xr.end(Dr)+this.bufferPadding;if(kr>=Br&&Rr<=Hr){Er.time.push({startPTS:Math.max(Cr,xr.start(Dr)),endPTS:Math.min(wr,xr.end(Dr))});break}else if(Cr<Hr&&wr>Br){const Gr=Math.max(Cr,xr.start(Dr)),qr=Math.min(wr,xr.end(Dr));qr>Gr&&(Er.partial=!0,Er.time.push({startPTS:Gr,endPTS:qr}))}else if(wr<=Br)break}return Er}getPartialFragment(hr){let gr=null,vr,xr,Er,Cr=0;const{bufferPadding:wr,fragments:Rr}=this;return Object.keys(Rr).forEach(kr=>{const Dr=Rr[kr];Dr&&isPartial(Dr)&&(xr=Dr.body.start-wr,Er=Dr.body.end+wr,hr>=xr&&hr<=Er&&(vr=Math.min(hr-xr,Er-hr),Cr<=vr&&(gr=Dr.body,Cr=vr)))}),gr}isEndListAppended(hr){const gr=this.endListFragments[hr];return gr!==void 0&&(gr.buffered||isPartial(gr))}getState(hr){const gr=getFragmentKey(hr),vr=this.fragments[gr];return vr?vr.buffered?isPartial(vr)?FragmentState.PARTIAL:FragmentState.OK:FragmentState.APPENDING:FragmentState.NOT_LOADED}isTimeBuffered(hr,gr,vr){let xr,Er;for(let Cr=0;Cr<vr.length;Cr++){if(xr=vr.start(Cr)-this.bufferPadding,Er=vr.end(Cr)+this.bufferPadding,hr>=xr&&gr<=Er)return!0;if(gr<=xr)return!1}return!1}onFragLoaded(hr,gr){const{frag:vr,part:xr}=gr;if(vr.sn==="initSegment"||vr.bitrateTest)return;const Er=xr?null:gr,Cr=getFragmentKey(vr);this.fragments[Cr]={body:vr,appendedPTS:null,loaded:Er,buffered:!1,range:Object.create(null)}}onBufferAppended(hr,gr){const{frag:vr,part:xr,timeRanges:Er}=gr;if(vr.sn==="initSegment")return;const Cr=vr.type;if(xr){let wr=this.activePartLists[Cr];wr||(this.activePartLists[Cr]=wr=[]),wr.push(xr)}this.timeRanges=Er,Object.keys(Er).forEach(wr=>{const Rr=Er[wr];this.detectEvictedFragments(wr,Rr,Cr,xr)})}onFragBuffered(hr,gr){this.detectPartialFragments(gr)}hasFragment(hr){const gr=getFragmentKey(hr);return!!this.fragments[gr]}hasParts(hr){var gr;return!!((gr=this.activePartLists[hr])!=null&&gr.length)}removeFragmentsInRange(hr,gr,vr,xr,Er){xr&&!this.hasGaps||Object.keys(this.fragments).forEach(Cr=>{const wr=this.fragments[Cr];if(!wr)return;const Rr=wr.body;Rr.type!==vr||xr&&!Rr.gap||Rr.start<gr&&Rr.end>hr&&(wr.buffered||Er)&&this.removeFragment(Rr)})}removeFragment(hr){const gr=getFragmentKey(hr);hr.stats.loaded=0,hr.clearElementaryStreamInfo();const vr=this.activePartLists[hr.type];if(vr){const xr=hr.sn;this.activePartLists[hr.type]=vr.filter(Er=>Er.fragment.sn!==xr)}delete this.fragments[gr],hr.endList&&delete this.endListFragments[hr.type]}removeAllFragments(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1}}function isPartial(mr){var hr,gr,vr;return mr.buffered&&(mr.body.gap||((hr=mr.range.video)==null?void 0:hr.partial)||((gr=mr.range.audio)==null?void 0:gr.partial)||((vr=mr.range.audiovideo)==null?void 0:vr.partial))}function getFragmentKey(mr){return`${mr.type}_${mr.level}_${mr.sn}`}const noopBuffered={length:0,start:()=>0,end:()=>0};class BufferHelper{static isBuffered(hr,gr){try{if(hr){const vr=BufferHelper.getBuffered(hr);for(let xr=0;xr<vr.length;xr++)if(gr>=vr.start(xr)&&gr<=vr.end(xr))return!0}}catch{}return!1}static bufferInfo(hr,gr,vr){try{if(hr){const xr=BufferHelper.getBuffered(hr),Er=[];let Cr;for(Cr=0;Cr<xr.length;Cr++)Er.push({start:xr.start(Cr),end:xr.end(Cr)});return this.bufferedInfo(Er,gr,vr)}}catch{}return{len:0,start:gr,end:gr,nextStart:void 0}}static bufferedInfo(hr,gr,vr){gr=Math.max(0,gr),hr.sort(function(kr,Dr){const Br=kr.start-Dr.start;return Br||Dr.end-kr.end});let xr=[];if(vr)for(let kr=0;kr<hr.length;kr++){const Dr=xr.length;if(Dr){const Br=xr[Dr-1].end;hr[kr].start-Br<vr?hr[kr].end>Br&&(xr[Dr-1].end=hr[kr].end):xr.push(hr[kr])}else xr.push(hr[kr])}else xr=hr;let Er=0,Cr,wr=gr,Rr=gr;for(let kr=0;kr<xr.length;kr++){const Dr=xr[kr].start,Br=xr[kr].end;if(gr+vr>=Dr&&gr<Br)wr=Dr,Rr=Br,Er=Rr-gr;else if(gr+vr<Dr){Cr=Dr;break}}return{len:Er,start:wr||0,end:Rr||0,nextStart:Cr}}static getBuffered(hr){try{return hr.buffered}catch(gr){return logger.log("failed to get media.buffered",gr),noopBuffered}}}class ChunkMetadata{constructor(hr,gr,vr,xr=0,Er=-1,Cr=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=getNewPerformanceTiming(),this.buffering={audio:getNewPerformanceTiming(),video:getNewPerformanceTiming(),audiovideo:getNewPerformanceTiming()},this.level=hr,this.sn=gr,this.id=vr,this.size=xr,this.part=Er,this.partial=Cr}}function getNewPerformanceTiming(){return{start:0,executeStart:0,executeEnd:0,end:0}}function findFirstFragWithCC(mr,hr){for(let vr=0,xr=mr.length;vr<xr;vr++){var gr;if(((gr=mr[vr])==null?void 0:gr.cc)===hr)return mr[vr]}return null}function shouldAlignOnDiscontinuities(mr,hr,gr){return!!(hr&&(gr.endCC>gr.startCC||mr&&mr.cc<gr.startCC))}function findDiscontinuousReferenceFrag(mr,hr){const gr=mr.fragments,vr=hr.fragments;if(!vr.length||!gr.length){logger.log("No fragments to align");return}const xr=findFirstFragWithCC(gr,vr[0].cc);if(!xr||xr&&!xr.startPTS){logger.log("No frag in previous level to align on");return}return xr}function adjustFragmentStart(mr,hr){if(mr){const gr=mr.start+hr;mr.start=mr.startPTS=gr,mr.endPTS=gr+mr.duration}}function adjustSlidingStart(mr,hr){const gr=hr.fragments;for(let vr=0,xr=gr.length;vr<xr;vr++)adjustFragmentStart(gr[vr],mr);hr.fragmentHint&&adjustFragmentStart(hr.fragmentHint,mr),hr.alignedSliding=!0}function alignStream(mr,hr,gr){hr&&(alignDiscontinuities(mr,gr,hr),!gr.alignedSliding&&hr&&alignMediaPlaylistByPDT(gr,hr),!gr.alignedSliding&&hr&&!gr.skippedSegments&&adjustSliding(hr,gr))}function alignDiscontinuities(mr,hr,gr){if(shouldAlignOnDiscontinuities(mr,gr,hr)){const vr=findDiscontinuousReferenceFrag(gr,hr);vr&&isFiniteNumber(vr.start)&&(logger.log(`Adjusting PTS using last level due to CC increase within current level ${hr.url}`),adjustSlidingStart(vr.start,hr))}}function alignMediaPlaylistByPDT(mr,hr){if(!mr.hasProgramDateTime||!hr.hasProgramDateTime)return;const gr=mr.fragments,vr=hr.fragments;if(!gr.length||!vr.length)return;let xr,Er;const Cr=Math.min(hr.endCC,mr.endCC);hr.startCC<Cr&&mr.startCC<Cr&&(xr=findFirstFragWithCC(vr,Cr),Er=findFirstFragWithCC(gr,Cr)),(!xr||!Er)&&(xr=vr[Math.floor(vr.length/2)],Er=findFirstFragWithCC(gr,xr.cc)||gr[Math.floor(gr.length/2)]);const wr=xr.programDateTime,Rr=Er.programDateTime;if(!wr||!Rr)return;const kr=(Rr-wr)/1e3-(Er.start-xr.start);adjustSlidingStart(kr,mr)}const MIN_CHUNK_SIZE=Math.pow(2,17);class FragmentLoader{constructor(hr){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=hr}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(hr,gr){const vr=hr.url;if(!vr)return Promise.reject(new LoadError({type:ErrorTypes.NETWORK_ERROR,details:ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:hr,error:new Error(`Fragment does not have a ${vr?"part list":"url"}`),networkDetails:null}));this.abort();const xr=this.config,Er=xr.fLoader,Cr=xr.loader;return new Promise((wr,Rr)=>{if(this.loader&&this.loader.destroy(),hr.gap)if(hr.tagList.some(Gr=>Gr[0]==="GAP")){Rr(createGapLoadError(hr));return}else hr.gap=!1;const kr=this.loader=hr.loader=Er?new Er(xr):new Cr(xr),Dr=createLoaderContext(hr),Br=getLoaderConfigWithoutReties(xr.fragLoadPolicy.default),Hr={loadPolicy:Br,timeout:Br.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:hr.sn==="initSegment"?1/0:MIN_CHUNK_SIZE};hr.stats=kr.stats,kr.load(Dr,Hr,{onSuccess:(Gr,qr,zr,Qr)=>{this.resetLoader(hr,kr);let sn=Gr.data;zr.resetIV&&hr.decryptdata&&(hr.decryptdata.iv=new Uint8Array(sn.slice(0,16)),sn=sn.slice(16)),wr({frag:hr,part:null,payload:sn,networkDetails:Qr})},onError:(Gr,qr,zr,Qr)=>{this.resetLoader(hr,kr),Rr(new LoadError({type:ErrorTypes.NETWORK_ERROR,details:ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:hr,response:_objectSpread2({url:vr,data:void 0},Gr),error:new Error(`HTTP Error ${Gr.code} ${Gr.text}`),networkDetails:zr,stats:Qr}))},onAbort:(Gr,qr,zr)=>{this.resetLoader(hr,kr),Rr(new LoadError({type:ErrorTypes.NETWORK_ERROR,details:ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:hr,error:new Error("Aborted"),networkDetails:zr,stats:Gr}))},onTimeout:(Gr,qr,zr)=>{this.resetLoader(hr,kr),Rr(new LoadError({type:ErrorTypes.NETWORK_ERROR,details:ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:hr,error:new Error(`Timeout after ${Hr.timeout}ms`),networkDetails:zr,stats:Gr}))},onProgress:(Gr,qr,zr,Qr)=>{gr&&gr({frag:hr,part:null,payload:zr,networkDetails:Qr})}})})}loadPart(hr,gr,vr){this.abort();const xr=this.config,Er=xr.fLoader,Cr=xr.loader;return new Promise((wr,Rr)=>{if(this.loader&&this.loader.destroy(),hr.gap||gr.gap){Rr(createGapLoadError(hr,gr));return}const kr=this.loader=hr.loader=Er?new Er(xr):new Cr(xr),Dr=createLoaderContext(hr,gr),Br=getLoaderConfigWithoutReties(xr.fragLoadPolicy.default),Hr={loadPolicy:Br,timeout:Br.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:MIN_CHUNK_SIZE};gr.stats=kr.stats,kr.load(Dr,Hr,{onSuccess:(Gr,qr,zr,Qr)=>{this.resetLoader(hr,kr),this.updateStatsFromPart(hr,gr);const sn={frag:hr,part:gr,payload:Gr.data,networkDetails:Qr};vr(sn),wr(sn)},onError:(Gr,qr,zr,Qr)=>{this.resetLoader(hr,kr),Rr(new LoadError({type:ErrorTypes.NETWORK_ERROR,details:ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:hr,part:gr,response:_objectSpread2({url:Dr.url,data:void 0},Gr),error:new Error(`HTTP Error ${Gr.code} ${Gr.text}`),networkDetails:zr,stats:Qr}))},onAbort:(Gr,qr,zr)=>{hr.stats.aborted=gr.stats.aborted,this.resetLoader(hr,kr),Rr(new LoadError({type:ErrorTypes.NETWORK_ERROR,details:ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:hr,part:gr,error:new Error("Aborted"),networkDetails:zr,stats:Gr}))},onTimeout:(Gr,qr,zr)=>{this.resetLoader(hr,kr),Rr(new LoadError({type:ErrorTypes.NETWORK_ERROR,details:ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:hr,part:gr,error:new Error(`Timeout after ${Hr.timeout}ms`),networkDetails:zr,stats:Gr}))}})})}updateStatsFromPart(hr,gr){const vr=hr.stats,xr=gr.stats,Er=xr.total;if(vr.loaded+=xr.loaded,Er){const Rr=Math.round(hr.duration/gr.duration),kr=Math.min(Math.round(vr.loaded/Er),Rr),Br=(Rr-kr)*Math.round(vr.loaded/kr);vr.total=vr.loaded+Br}else vr.total=Math.max(vr.loaded,vr.total);const Cr=vr.loading,wr=xr.loading;Cr.start?Cr.first+=wr.first-wr.start:(Cr.start=wr.start,Cr.first=wr.first),Cr.end=wr.end}resetLoader(hr,gr){hr.loader=null,this.loader===gr&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),gr.destroy()}}function createLoaderContext(mr,hr=null){const gr=hr||mr,vr={frag:mr,part:hr,responseType:"arraybuffer",url:gr.url,headers:{},rangeStart:0,rangeEnd:0},xr=gr.byteRangeStartOffset,Er=gr.byteRangeEndOffset;if(isFiniteNumber(xr)&&isFiniteNumber(Er)){var Cr;let wr=xr,Rr=Er;if(mr.sn==="initSegment"&&((Cr=mr.decryptdata)==null?void 0:Cr.method)==="AES-128"){const kr=Er-xr;kr%16&&(Rr=Er+(16-kr%16)),xr!==0&&(vr.resetIV=!0,wr=xr-16)}vr.rangeStart=wr,vr.rangeEnd=Rr}return vr}function createGapLoadError(mr,hr){const gr=new Error(`GAP ${mr.gap?"tag":"attribute"} found`),vr={type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.FRAG_GAP,fatal:!1,frag:mr,error:gr,networkDetails:null};return hr&&(vr.part=hr),(hr||mr).stats.aborted=!0,new LoadError(vr)}class LoadError extends Error{constructor(hr){super(hr.error.message),this.data=void 0,this.data=hr}}class AESCrypto{constructor(hr,gr){this.subtle=void 0,this.aesIV=void 0,this.subtle=hr,this.aesIV=gr}decrypt(hr,gr){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},gr,hr)}}class FastAESKey{constructor(hr,gr){this.subtle=void 0,this.key=void 0,this.subtle=hr,this.key=gr}expandKey(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])}}function removePadding(mr){const hr=mr.byteLength,gr=hr&&new DataView(mr.buffer).getUint8(hr-1);return gr?sliceUint8(mr,0,hr-gr):mr}class AESDecryptor{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(hr){const gr=new DataView(hr),vr=new Uint32Array(4);for(let xr=0;xr<4;xr++)vr[xr]=gr.getUint32(xr*4);return vr}initTable(){const hr=this.sBox,gr=this.invSBox,vr=this.subMix,xr=vr[0],Er=vr[1],Cr=vr[2],wr=vr[3],Rr=this.invSubMix,kr=Rr[0],Dr=Rr[1],Br=Rr[2],Hr=Rr[3],Gr=new Uint32Array(256);let qr=0,zr=0,Qr=0;for(Qr=0;Qr<256;Qr++)Qr<128?Gr[Qr]=Qr<<1:Gr[Qr]=Qr<<1^283;for(Qr=0;Qr<256;Qr++){let sn=zr^zr<<1^zr<<2^zr<<3^zr<<4;sn=sn>>>8^sn&255^99,hr[qr]=sn,gr[sn]=qr;const hn=Gr[qr],vn=Gr[hn],yn=Gr[vn];let gn=Gr[sn]*257^sn*16843008;xr[qr]=gn<<24|gn>>>8,Er[qr]=gn<<16|gn>>>16,Cr[qr]=gn<<8|gn>>>24,wr[qr]=gn,gn=yn*16843009^vn*65537^hn*257^qr*16843008,kr[sn]=gn<<24|gn>>>8,Dr[sn]=gn<<16|gn>>>16,Br[sn]=gn<<8|gn>>>24,Hr[sn]=gn,qr?(qr=hn^Gr[Gr[Gr[yn^hn]]],zr^=Gr[Gr[zr]]):qr=zr=1}}expandKey(hr){const gr=this.uint8ArrayToUint32Array_(hr);let vr=!0,xr=0;for(;xr<gr.length&&vr;)vr=gr[xr]===this.key[xr],xr++;if(vr)return;this.key=gr;const Er=this.keySize=gr.length;if(Er!==4&&Er!==6&&Er!==8)throw new Error("Invalid aes key size="+Er);const Cr=this.ksRows=(Er+6+1)*4;let wr,Rr;const kr=this.keySchedule=new Uint32Array(Cr),Dr=this.invKeySchedule=new Uint32Array(Cr),Br=this.sBox,Hr=this.rcon,Gr=this.invSubMix,qr=Gr[0],zr=Gr[1],Qr=Gr[2],sn=Gr[3];let hn,vn;for(wr=0;wr<Cr;wr++){if(wr<Er){hn=kr[wr]=gr[wr];continue}vn=hn,wr%Er===0?(vn=vn<<8|vn>>>24,vn=Br[vn>>>24]<<24|Br[vn>>>16&255]<<16|Br[vn>>>8&255]<<8|Br[vn&255],vn^=Hr[wr/Er|0]<<24):Er>6&&wr%Er===4&&(vn=Br[vn>>>24]<<24|Br[vn>>>16&255]<<16|Br[vn>>>8&255]<<8|Br[vn&255]),kr[wr]=hn=(kr[wr-Er]^vn)>>>0}for(Rr=0;Rr<Cr;Rr++)wr=Cr-Rr,Rr&3?vn=kr[wr]:vn=kr[wr-4],Rr<4||wr<=4?Dr[Rr]=vn:Dr[Rr]=qr[Br[vn>>>24]]^zr[Br[vn>>>16&255]]^Qr[Br[vn>>>8&255]]^sn[Br[vn&255]],Dr[Rr]=Dr[Rr]>>>0}networkToHostOrderSwap(hr){return hr<<24|(hr&65280)<<8|(hr&16711680)>>8|hr>>>24}decrypt(hr,gr,vr){const xr=this.keySize+6,Er=this.invKeySchedule,Cr=this.invSBox,wr=this.invSubMix,Rr=wr[0],kr=wr[1],Dr=wr[2],Br=wr[3],Hr=this.uint8ArrayToUint32Array_(vr);let Gr=Hr[0],qr=Hr[1],zr=Hr[2],Qr=Hr[3];const sn=new Int32Array(hr),hn=new Int32Array(sn.length);let vn,yn,gn,bn,xn,$n,Sn,Cn,Rn,Bn,Fn,Hn,Gn,qn;const On=this.networkToHostOrderSwap;for(;gr<sn.length;){for(Rn=On(sn[gr]),Bn=On(sn[gr+1]),Fn=On(sn[gr+2]),Hn=On(sn[gr+3]),xn=Rn^Er[0],$n=Hn^Er[1],Sn=Fn^Er[2],Cn=Bn^Er[3],Gn=4,qn=1;qn<xr;qn++)vn=Rr[xn>>>24]^kr[$n>>16&255]^Dr[Sn>>8&255]^Br[Cn&255]^Er[Gn],yn=Rr[$n>>>24]^kr[Sn>>16&255]^Dr[Cn>>8&255]^Br[xn&255]^Er[Gn+1],gn=Rr[Sn>>>24]^kr[Cn>>16&255]^Dr[xn>>8&255]^Br[$n&255]^Er[Gn+2],bn=Rr[Cn>>>24]^kr[xn>>16&255]^Dr[$n>>8&255]^Br[Sn&255]^Er[Gn+3],xn=vn,$n=yn,Sn=gn,Cn=bn,Gn=Gn+4;vn=Cr[xn>>>24]<<24^Cr[$n>>16&255]<<16^Cr[Sn>>8&255]<<8^Cr[Cn&255]^Er[Gn],yn=Cr[$n>>>24]<<24^Cr[Sn>>16&255]<<16^Cr[Cn>>8&255]<<8^Cr[xn&255]^Er[Gn+1],gn=Cr[Sn>>>24]<<24^Cr[Cn>>16&255]<<16^Cr[xn>>8&255]<<8^Cr[$n&255]^Er[Gn+2],bn=Cr[Cn>>>24]<<24^Cr[xn>>16&255]<<16^Cr[$n>>8&255]<<8^Cr[Sn&255]^Er[Gn+3],hn[gr]=On(vn^Gr),hn[gr+1]=On(bn^qr),hn[gr+2]=On(gn^zr),hn[gr+3]=On(yn^Qr),Gr=Rn,qr=Bn,zr=Fn,Qr=Hn,gr=gr+4}return hn.buffer}}const CHUNK_SIZE=16;class Decrypter{constructor(hr,{removePKCS7Padding:gr=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=hr.enableSoftwareAES,this.removePKCS7Padding=gr,gr)try{const vr=self.crypto;vr&&(this.subtle=vr.subtle||vr.webkitSubtle)}catch{}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:hr,remainderData:gr}=this;if(!hr||gr)return this.reset(),null;const vr=new Uint8Array(hr);return this.reset(),this.removePKCS7Padding?removePadding(vr):vr}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(hr,gr,vr){return this.useSoftware?new Promise((xr,Er)=>{this.softwareDecrypt(new Uint8Array(hr),gr,vr);const Cr=this.flush();Cr?xr(Cr.buffer):Er(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(hr),gr,vr)}softwareDecrypt(hr,gr,vr){const{currentIV:xr,currentResult:Er,remainderData:Cr}=this;this.logOnce("JS AES decrypt"),Cr&&(hr=appendUint8Array(Cr,hr),this.remainderData=null);const wr=this.getValidChunk(hr);if(!wr.length)return null;xr&&(vr=xr);let Rr=this.softwareDecrypter;Rr||(Rr=this.softwareDecrypter=new AESDecryptor),Rr.expandKey(gr);const kr=Er;return this.currentResult=Rr.decrypt(wr.buffer,0,vr),this.currentIV=sliceUint8(wr,-16).buffer,kr||null}webCryptoDecrypt(hr,gr,vr){if(this.key!==gr||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(hr,gr,vr));this.key=gr,this.fastAesKey=new FastAESKey(this.subtle,gr)}return this.fastAesKey.expandKey().then(xr=>this.subtle?(this.logOnce("WebCrypto AES decrypt"),new AESCrypto(this.subtle,new Uint8Array(vr)).decrypt(hr.buffer,xr)):Promise.reject(new Error("web crypto not initialized"))).catch(xr=>(logger.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${xr.name}: ${xr.message}`),this.onWebCryptoError(hr,gr,vr)))}onWebCryptoError(hr,gr,vr){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(hr,gr,vr);const xr=this.flush();if(xr)return xr.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")}getValidChunk(hr){let gr=hr;const vr=hr.length-hr.length%CHUNK_SIZE;return vr!==hr.length&&(gr=sliceUint8(hr,0,vr),this.remainderData=sliceUint8(hr,vr)),gr}logOnce(hr){this.logEnabled&&(logger.log(`[decrypter]: ${hr}`),this.logEnabled=!1)}}const TimeRanges={toString:function(mr){let hr="";const gr=mr.length;for(let vr=0;vr<gr;vr++)hr+=`[${mr.start(vr).toFixed(3)}-${mr.end(vr).toFixed(3)}]`;return hr}},State={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class BaseStreamController extends TaskLoop{constructor(hr,gr,vr,xr,Er){super(),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=State.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.loadedmetadata=!1,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.buffering=!0,this.onvseeking=null,this.onvended=null,this.logPrefix="",this.log=void 0,this.warn=void 0,this.playlistType=Er,this.logPrefix=xr,this.log=logger.log.bind(logger,`${xr}:`),this.warn=logger.warn.bind(logger,`${xr}:`),this.hls=hr,this.fragmentLoader=new FragmentLoader(hr.config),this.keyLoader=vr,this.fragmentTracker=gr,this.config=hr.config,this.decrypter=new Decrypter(hr.config),hr.on(Events.MANIFEST_LOADED,this.onManifestLoaded,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(hr){}stopLoad(){this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const hr=this.fragCurrent;hr!=null&&hr.loader&&(hr.abortRequests(),this.fragmentTracker.removeFragment(hr)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=State.STOPPED}pauseBuffering(){this.buffering=!1}resumeBuffering(){this.buffering=!0}_streamEnded(hr,gr){if(gr.live||hr.nextStart||!hr.end||!this.media)return!1;const vr=gr.partList;if(vr!=null&&vr.length){const Er=vr[vr.length-1];return BufferHelper.isBuffered(this.media,Er.start+Er.duration/2)}const xr=gr.fragments[gr.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(xr)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null){var hr;return(hr=this.levelLastLoaded)==null?void 0:hr.details}}onMediaAttached(hr,gr){const vr=this.media=this.mediaBuffer=gr.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),vr.addEventListener("seeking",this.onvseeking),vr.addEventListener("ended",this.onvended);const xr=this.config;this.levels&&xr.autoStartLoad&&this.state===State.STOPPED&&this.startLoad(xr.startPosition)}onMediaDetaching(){const hr=this.media;hr!=null&&hr.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),hr&&this.onvseeking&&this.onvended&&(hr.removeEventListener("seeking",this.onvseeking),hr.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}onMediaSeeking(){const{config:hr,fragCurrent:gr,media:vr,mediaBuffer:xr,state:Er}=this,Cr=vr?vr.currentTime:0,wr=BufferHelper.bufferInfo(xr||vr,Cr,hr.maxBufferHole);if(this.log(`media seeking to ${isFiniteNumber(Cr)?Cr.toFixed(3):Cr}, state: ${Er}`),this.state===State.ENDED)this.resetLoadingState();else if(gr){const Rr=hr.maxFragLookUpTolerance,kr=gr.start-Rr,Dr=gr.start+gr.duration+Rr;if(!wr.len||Dr<wr.start||kr>wr.end){const Br=Cr>Dr;(Cr<kr||Br)&&(Br&&gr.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),gr.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}vr&&(this.fragmentTracker.removeFragmentsInRange(Cr,1/0,this.playlistType,!0),this.lastCurrentTime=Cr),!this.loadedmetadata&&!wr.len&&(this.nextLoadPosition=this.startPosition=Cr),this.tickImmediate()}onMediaEnded(){this.startPosition=this.lastCurrentTime=0}onManifestLoaded(hr,gr){this.startTimeOffset=gr.startTimeOffset,this.initPTS=[]}onHandlerDestroying(){this.hls.off(Events.MANIFEST_LOADED,this.onManifestLoaded,this),this.stopLoad(),super.onHandlerDestroying(),this.hls=null}onHandlerDestroyed(){this.state=State.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(hr,gr,vr){this._loadFragForPlayback(hr,gr,vr)}_loadFragForPlayback(hr,gr,vr){const xr=Er=>{if(this.fragContextChanged(hr)){this.warn(`Fragment ${hr.sn}${Er.part?" p: "+Er.part.index:""} of level ${hr.level} was dropped during download.`),this.fragmentTracker.removeFragment(hr);return}hr.stats.chunkCount++,this._handleFragmentLoadProgress(Er)};this._doFragLoad(hr,gr,vr,xr).then(Er=>{if(!Er)return;const Cr=this.state;if(this.fragContextChanged(hr)){(Cr===State.FRAG_LOADING||!this.fragCurrent&&Cr===State.PARSING)&&(this.fragmentTracker.removeFragment(hr),this.state=State.IDLE);return}"payload"in Er&&(this.log(`Loaded fragment ${hr.sn} of level ${hr.level}`),this.hls.trigger(Events.FRAG_LOADED,Er)),this._handleFragmentLoadComplete(Er)}).catch(Er=>{this.state===State.STOPPED||this.state===State.ERROR||(this.warn(`Frag error: ${Er?.message||Er}`),this.resetFragmentLoading(hr))})}clearTrackerIfNeeded(hr){var gr;const{fragmentTracker:vr}=this;if(vr.getState(hr)===FragmentState.APPENDING){const Er=hr.type,Cr=this.getFwdBufferInfo(this.mediaBuffer,Er),wr=Math.max(hr.duration,Cr?Cr.len:this.config.maxBufferLength),Rr=this.backtrackFragment;((Rr?hr.sn-Rr.sn:0)===1||this.reduceMaxBufferLength(wr,hr.duration))&&vr.removeFragment(hr)}else((gr=this.mediaBuffer)==null?void 0:gr.buffered.length)===0?vr.removeAllFragments():vr.hasParts(hr.type)&&(vr.detectPartialFragments({frag:hr,part:null,stats:hr.stats,id:hr.type}),vr.getState(hr)===FragmentState.PARTIAL&&vr.removeFragment(hr))}checkLiveUpdate(hr){if(hr.updated&&!hr.live){const gr=hr.fragments[hr.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:gr,part:null,stats:gr.stats,id:gr.type})}hr.fragments[0]||(hr.deltaUpdateFailed=!0)}flushMainBuffer(hr,gr,vr=null){if(!(hr-gr))return;const xr={startOffset:hr,endOffset:gr,type:vr};this.hls.trigger(Events.BUFFER_FLUSHING,xr)}_loadInitSegment(hr,gr){this._doFragLoad(hr,gr).then(vr=>{if(!vr||this.fragContextChanged(hr)||!this.levels)throw new Error("init load aborted");return vr}).then(vr=>{const{hls:xr}=this,{payload:Er}=vr,Cr=hr.decryptdata;if(Er&&Er.byteLength>0&&Cr!=null&&Cr.key&&Cr.iv&&Cr.method==="AES-128"){const wr=self.performance.now();return this.decrypter.decrypt(new Uint8Array(Er),Cr.key.buffer,Cr.iv.buffer).catch(Rr=>{throw xr.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!1,error:Rr,reason:Rr.message,frag:hr}),Rr}).then(Rr=>{const kr=self.performance.now();return xr.trigger(Events.FRAG_DECRYPTED,{frag:hr,payload:Rr,stats:{tstart:wr,tdecrypt:kr}}),vr.payload=Rr,this.completeInitSegmentLoad(vr)})}return this.completeInitSegmentLoad(vr)}).catch(vr=>{this.state===State.STOPPED||this.state===State.ERROR||(this.warn(vr),this.resetFragmentLoading(hr))})}completeInitSegmentLoad(hr){const{levels:gr}=this;if(!gr)throw new Error("init load aborted, missing levels");const vr=hr.frag.stats;this.state=State.IDLE,hr.frag.data=new Uint8Array(hr.payload),vr.parsing.start=vr.buffering.start=self.performance.now(),vr.parsing.end=vr.buffering.end=self.performance.now(),this.tick()}fragContextChanged(hr){const{fragCurrent:gr}=this;return!hr||!gr||hr.sn!==gr.sn||hr.level!==gr.level}fragBufferedComplete(hr,gr){var vr,xr,Er,Cr;const wr=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${hr.type} sn: ${hr.sn}${gr?" part: "+gr.index:""} of ${this.playlistType===PlaylistLevelType.MAIN?"level":"track"} ${hr.level} (frag:[${((vr=hr.startPTS)!=null?vr:NaN).toFixed(3)}-${((xr=hr.endPTS)!=null?xr:NaN).toFixed(3)}] > buffer:${wr?TimeRanges.toString(BufferHelper.getBuffered(wr)):"(detached)"})`),hr.sn!=="initSegment"){var Rr;if(hr.type!==PlaylistLevelType.SUBTITLE){const Dr=hr.elementaryStreams;if(!Object.keys(Dr).some(Br=>!!Dr[Br])){this.state=State.IDLE;return}}const kr=(Rr=this.levels)==null?void 0:Rr[hr.level];kr!=null&&kr.fragmentError&&(this.log(`Resetting level fragment error count of ${kr.fragmentError} on frag buffered`),kr.fragmentError=0)}this.state=State.IDLE,wr&&(!this.loadedmetadata&&hr.type==PlaylistLevelType.MAIN&&wr.buffered.length&&((Er=this.fragCurrent)==null?void 0:Er.sn)===((Cr=this.fragPrevious)==null?void 0:Cr.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())}seekToStartPos(){}_handleFragmentLoadComplete(hr){const{transmuxer:gr}=this;if(!gr)return;const{frag:vr,part:xr,partsLoaded:Er}=hr,Cr=!Er||Er.length===0||Er.some(Rr=>!Rr),wr=new ChunkMetadata(vr.level,vr.sn,vr.stats.chunkCount+1,0,xr?xr.index:-1,!Cr);gr.flush(wr)}_handleFragmentLoadProgress(hr){}_doFragLoad(hr,gr,vr=null,xr){var Er;const Cr=gr?.details;if(!this.levels||!Cr)throw new Error(`frag load aborted, missing level${Cr?"":" detail"}s`);let wr=null;if(hr.encrypted&&!((Er=hr.decryptdata)!=null&&Er.key)?(this.log(`Loading key for ${hr.sn} of [${Cr.startSN}-${Cr.endSN}], ${this.logPrefix==="[stream-controller]"?"level":"track"} ${hr.level}`),this.state=State.KEY_LOADING,this.fragCurrent=hr,wr=this.keyLoader.load(hr).then(Dr=>{if(!this.fragContextChanged(Dr.frag))return this.hls.trigger(Events.KEY_LOADED,Dr),this.state===State.KEY_LOADING&&(this.state=State.IDLE),Dr}),this.hls.trigger(Events.KEY_LOADING,{frag:hr}),this.fragCurrent===null&&(wr=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))):!hr.encrypted&&Cr.encryptedFragments.length&&this.keyLoader.loadClear(hr,Cr.encryptedFragments),vr=Math.max(hr.start,vr||0),this.config.lowLatencyMode&&hr.sn!=="initSegment"){const Dr=Cr.partList;if(Dr&&xr){vr>hr.end&&Cr.fragmentHint&&(hr=Cr.fragmentHint);const Br=this.getNextPart(Dr,hr,vr);if(Br>-1){const Hr=Dr[Br];this.log(`Loading part sn: ${hr.sn} p: ${Hr.index} cc: ${hr.cc} of playlist [${Cr.startSN}-${Cr.endSN}] parts [0-${Br}-${Dr.length-1}] ${this.logPrefix==="[stream-controller]"?"level":"track"}: ${hr.level}, target: ${parseFloat(vr.toFixed(3))}`),this.nextLoadPosition=Hr.start+Hr.duration,this.state=State.FRAG_LOADING;let Gr;return wr?Gr=wr.then(qr=>!qr||this.fragContextChanged(qr.frag)?null:this.doFragPartsLoad(hr,Hr,gr,xr)).catch(qr=>this.handleFragLoadError(qr)):Gr=this.doFragPartsLoad(hr,Hr,gr,xr).catch(qr=>this.handleFragLoadError(qr)),this.hls.trigger(Events.FRAG_LOADING,{frag:hr,part:Hr,targetBufferTime:vr}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):Gr}else if(!hr.url||this.loadedEndOfParts(Dr,vr))return Promise.resolve(null)}}this.log(`Loading fragment ${hr.sn} cc: ${hr.cc} ${Cr?"of ["+Cr.startSN+"-"+Cr.endSN+"] ":""}${this.logPrefix==="[stream-controller]"?"level":"track"}: ${hr.level}, target: ${parseFloat(vr.toFixed(3))}`),isFiniteNumber(hr.sn)&&!this.bitrateTest&&(this.nextLoadPosition=hr.start+hr.duration),this.state=State.FRAG_LOADING;const Rr=this.config.progressive;let kr;return Rr&&wr?kr=wr.then(Dr=>!Dr||this.fragContextChanged(Dr?.frag)?null:this.fragmentLoader.load(hr,xr)).catch(Dr=>this.handleFragLoadError(Dr)):kr=Promise.all([this.fragmentLoader.load(hr,Rr?xr:void 0),wr]).then(([Dr])=>(!Rr&&Dr&&xr&&xr(Dr),Dr)).catch(Dr=>this.handleFragLoadError(Dr)),this.hls.trigger(Events.FRAG_LOADING,{frag:hr,targetBufferTime:vr}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):kr}doFragPartsLoad(hr,gr,vr,xr){return new Promise((Er,Cr)=>{var wr;const Rr=[],kr=(wr=vr.details)==null?void 0:wr.partList,Dr=Br=>{this.fragmentLoader.loadPart(hr,Br,xr).then(Hr=>{Rr[Br.index]=Hr;const Gr=Hr.part;this.hls.trigger(Events.FRAG_LOADED,Hr);const qr=getPartWith(vr,hr.sn,Br.index+1)||findPart(kr,hr.sn,Br.index+1);if(qr)Dr(qr);else return Er({frag:hr,part:Gr,partsLoaded:Rr})}).catch(Cr)};Dr(gr)})}handleFragLoadError(hr){if("data"in hr){const gr=hr.data;hr.data&&gr.details===ErrorDetails.INTERNAL_ABORTED?this.handleFragLoadAborted(gr.frag,gr.part):this.hls.trigger(Events.ERROR,gr)}else this.hls.trigger(Events.ERROR,{type:ErrorTypes.OTHER_ERROR,details:ErrorDetails.INTERNAL_EXCEPTION,err:hr,error:hr,fatal:!0});return null}_handleTransmuxerFlush(hr){const gr=this.getCurrentContext(hr);if(!gr||this.state!==State.PARSING){!this.fragCurrent&&this.state!==State.STOPPED&&this.state!==State.ERROR&&(this.state=State.IDLE);return}const{frag:vr,part:xr,level:Er}=gr,Cr=self.performance.now();vr.stats.parsing.end=Cr,xr&&(xr.stats.parsing.end=Cr),this.updateLevelTiming(vr,xr,Er,hr.partial)}getCurrentContext(hr){const{levels:gr,fragCurrent:vr}=this,{level:xr,sn:Er,part:Cr}=hr;if(!(gr!=null&&gr[xr]))return this.warn(`Levels object was unset while buffering fragment ${Er} of level ${xr}. The current chunk will not be buffered.`),null;const wr=gr[xr],Rr=Cr>-1?getPartWith(wr,Er,Cr):null,kr=Rr?Rr.fragment:getFragmentWithSN(wr,Er,vr);return kr?(vr&&vr!==kr&&(kr.stats=vr.stats),{frag:kr,part:Rr,level:wr}):null}bufferFragmentData(hr,gr,vr,xr,Er){var Cr;if(!hr||this.state!==State.PARSING)return;const{data1:wr,data2:Rr}=hr;let kr=wr;if(wr&&Rr&&(kr=appendUint8Array(wr,Rr)),!((Cr=kr)!=null&&Cr.length))return;const Dr={type:hr.type,frag:gr,part:vr,chunkMeta:xr,parent:gr.type,data:kr};if(this.hls.trigger(Events.BUFFER_APPENDING,Dr),hr.dropped&&hr.independent&&!vr){if(Er)return;this.flushBufferGap(gr)}}flushBufferGap(hr){const gr=this.media;if(!gr)return;if(!BufferHelper.isBuffered(gr,gr.currentTime)){this.flushMainBuffer(0,hr.start);return}const vr=gr.currentTime,xr=BufferHelper.bufferInfo(gr,vr,0),Er=hr.duration,Cr=Math.min(this.config.maxFragLookUpTolerance*2,Er*.25),wr=Math.max(Math.min(hr.start-Cr,xr.end-Cr),vr+Cr);hr.start-wr>Cr&&this.flushMainBuffer(wr,hr.start)}getFwdBufferInfo(hr,gr){const vr=this.getLoadPosition();return isFiniteNumber(vr)?this.getFwdBufferInfoAtPos(hr,vr,gr):null}getFwdBufferInfoAtPos(hr,gr,vr){const{config:{maxBufferHole:xr}}=this,Er=BufferHelper.bufferInfo(hr,gr,xr);if(Er.len===0&&Er.nextStart!==void 0){const Cr=this.fragmentTracker.getBufferedFrag(gr,vr);if(Cr&&Er.nextStart<Cr.end)return BufferHelper.bufferInfo(hr,gr,Math.max(Er.nextStart,xr))}return Er}getMaxBufferLength(hr){const{config:gr}=this;let vr;return hr?vr=Math.max(8*gr.maxBufferSize/hr,gr.maxBufferLength):vr=gr.maxBufferLength,Math.min(vr,gr.maxMaxBufferLength)}reduceMaxBufferLength(hr,gr){const vr=this.config,xr=Math.max(Math.min(hr-gr,vr.maxBufferLength),gr),Er=Math.max(hr-gr*3,vr.maxMaxBufferLength/2,xr);return Er>=xr?(vr.maxMaxBufferLength=Er,this.warn(`Reduce max buffer length to ${Er}s`),!0):!1}getAppendedFrag(hr,gr=PlaylistLevelType.MAIN){const vr=this.fragmentTracker.getAppendedFrag(hr,PlaylistLevelType.MAIN);return vr&&"fragment"in vr?vr.fragment:vr}getNextFragment(hr,gr){const vr=gr.fragments,xr=vr.length;if(!xr)return null;const{config:Er}=this,Cr=vr[0].start;let wr;if(gr.live){const Rr=Er.initialLiveManifestSize;if(xr<Rr)return this.warn(`Not enough fragments to start playback (have: ${xr}, need: ${Rr})`),null;(!gr.PTSKnown&&!this.startFragRequested&&this.startPosition===-1||hr<Cr)&&(wr=this.getInitialLiveFragment(gr,vr),this.startPosition=this.nextLoadPosition=wr?this.hls.liveSyncPosition||wr.start:hr)}else hr<=Cr&&(wr=vr[0]);if(!wr){const Rr=Er.lowLatencyMode?gr.partEnd:gr.fragmentEnd;wr=this.getFragmentAtPosition(hr,Rr,gr)}return this.mapToInitFragWhenRequired(wr)}isLoopLoading(hr,gr){const vr=this.fragmentTracker.getState(hr);return(vr===FragmentState.OK||vr===FragmentState.PARTIAL&&!!hr.gap)&&this.nextLoadPosition>gr}getNextFragmentLoopLoading(hr,gr,vr,xr,Er){const Cr=hr.gap,wr=this.getNextFragment(this.nextLoadPosition,gr);if(wr===null)return wr;if(hr=wr,Cr&&hr&&!hr.gap&&vr.nextStart){const Rr=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,vr.nextStart,xr);if(Rr!==null&&vr.len+Rr.len>=Er)return this.log(`buffer full after gaps in "${xr}" playlist starting at sn: ${hr.sn}`),null}return hr}mapToInitFragWhenRequired(hr){return hr!=null&&hr.initSegment&&!(hr!=null&&hr.initSegment.data)&&!this.bitrateTest?hr.initSegment:hr}getNextPart(hr,gr,vr){let xr=-1,Er=!1,Cr=!0;for(let wr=0,Rr=hr.length;wr<Rr;wr++){const kr=hr[wr];if(Cr=Cr&&!kr.independent,xr>-1&&vr<kr.start)break;const Dr=kr.loaded;Dr?xr=-1:(Er||kr.independent||Cr)&&kr.fragment===gr&&(xr=wr),Er=Dr}return xr}loadedEndOfParts(hr,gr){const vr=hr[hr.length-1];return vr&&gr>vr.start&&vr.loaded}getInitialLiveFragment(hr,gr){const vr=this.fragPrevious;let xr=null;if(vr){if(hr.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${vr.programDateTime}`),xr=findFragmentByPDT(gr,vr.endProgramDateTime,this.config.maxFragLookUpTolerance)),!xr){const Er=vr.sn+1;if(Er>=hr.startSN&&Er<=hr.endSN){const Cr=gr[Er-hr.startSN];vr.cc===Cr.cc&&(xr=Cr,this.log(`Live playlist, switching playlist, load frag with next SN: ${xr.sn}`))}xr||(xr=findFragWithCC(gr,vr.cc),xr&&this.log(`Live playlist, switching playlist, load frag with same CC: ${xr.sn}`))}}else{const Er=this.hls.liveSyncPosition;Er!==null&&(xr=this.getFragmentAtPosition(Er,this.bitrateTest?hr.fragmentEnd:hr.edge,hr))}return xr}getFragmentAtPosition(hr,gr,vr){const{config:xr}=this;let{fragPrevious:Er}=this,{fragments:Cr,endSN:wr}=vr;const{fragmentHint:Rr}=vr,{maxFragLookUpTolerance:kr}=xr,Dr=vr.partList,Br=!!(xr.lowLatencyMode&&Dr!=null&&Dr.length&&Rr);Br&&Rr&&!this.bitrateTest&&(Cr=Cr.concat(Rr),wr=Rr.sn);let Hr;if(hr<gr){const Gr=hr>gr-kr?0:kr;Hr=findFragmentByPTS(Er,Cr,hr,Gr)}else Hr=Cr[Cr.length-1];if(Hr){const Gr=Hr.sn-vr.startSN,qr=this.fragmentTracker.getState(Hr);if((qr===FragmentState.OK||qr===FragmentState.PARTIAL&&Hr.gap)&&(Er=Hr),Er&&Hr.sn===Er.sn&&(!Br||Dr[0].fragment.sn>Hr.sn)&&Er&&Hr.level===Er.level){const Qr=Cr[Gr+1];Hr.sn<wr&&this.fragmentTracker.getState(Qr)!==FragmentState.OK?Hr=Qr:Hr=null}}return Hr}synchronizeToLiveEdge(hr){const{config:gr,media:vr}=this;if(!vr)return;const xr=this.hls.liveSyncPosition,Er=vr.currentTime,Cr=hr.fragments[0].start,wr=hr.edge,Rr=Er>=Cr-gr.maxFragLookUpTolerance&&Er<=wr;if(xr!==null&&vr.duration>xr&&(Er<xr||!Rr)){const kr=gr.liveMaxLatencyDuration!==void 0?gr.liveMaxLatencyDuration:gr.liveMaxLatencyDurationCount*hr.targetduration;(!Rr&&vr.readyState<4||Er<wr-kr)&&(this.loadedmetadata||(this.nextLoadPosition=xr),vr.readyState&&(this.warn(`Playback: ${Er.toFixed(3)} is located too far from the end of live sliding playlist: ${wr}, reset currentTime to : ${xr.toFixed(3)}`),vr.currentTime=xr))}}alignPlaylists(hr,gr,vr){const xr=hr.fragments.length;if(!xr)return this.warn("No fragments in live playlist"),0;const Er=hr.fragments[0].start,Cr=!gr,wr=hr.alignedSliding&&isFiniteNumber(Er);if(Cr||!wr&&!Er){const{fragPrevious:Rr}=this;alignStream(Rr,vr,hr);const kr=hr.fragments[0].start;return this.log(`Live playlist sliding: ${kr.toFixed(2)} start-sn: ${gr?gr.startSN:"na"}->${hr.startSN} prev-sn: ${Rr?Rr.sn:"na"} fragments: ${xr}`),kr}return Er}waitForCdnTuneIn(hr){return hr.live&&hr.canBlockReload&&hr.partTarget&&hr.tuneInGoal>Math.max(hr.partHoldBack,hr.partTarget*3)}setStartPosition(hr,gr){let vr=this.startPosition;if(vr<gr&&(vr=-1),vr===-1||this.lastCurrentTime===-1){const xr=this.startTimeOffset!==null,Er=xr?this.startTimeOffset:hr.startTimeOffset;Er!==null&&isFiniteNumber(Er)?(vr=gr+Er,Er<0&&(vr+=hr.totalduration),vr=Math.min(Math.max(gr,vr),gr+hr.totalduration),this.log(`Start time offset ${Er} found in ${xr?"multivariant":"media"} playlist, adjust startPosition to ${vr}`),this.startPosition=vr):hr.live?vr=this.hls.liveSyncPosition||gr:this.startPosition=vr=0,this.lastCurrentTime=vr}this.nextLoadPosition=vr}getLoadPosition(){const{media:hr}=this;let gr=0;return this.loadedmetadata&&hr?gr=hr.currentTime:this.nextLoadPosition&&(gr=this.nextLoadPosition),gr}handleFragLoadAborted(hr,gr){this.transmuxer&&hr.sn!=="initSegment"&&hr.stats.aborted&&(this.warn(`Fragment ${hr.sn}${gr?" part "+gr.index:""} of level ${hr.level} was aborted`),this.resetFragmentLoading(hr))}resetFragmentLoading(hr){(!this.fragCurrent||!this.fragContextChanged(hr)&&this.state!==State.FRAG_LOADING_WAITING_RETRY)&&(this.state=State.IDLE)}onFragmentOrKeyLoadError(hr,gr){if(gr.chunkMeta&&!gr.frag){const Dr=this.getCurrentContext(gr.chunkMeta);Dr&&(gr.frag=Dr.frag)}const vr=gr.frag;if(!vr||vr.type!==hr||!this.levels)return;if(this.fragContextChanged(vr)){var xr;this.warn(`Frag load error must match current frag to retry ${vr.url} > ${(xr=this.fragCurrent)==null?void 0:xr.url}`);return}const Er=gr.details===ErrorDetails.FRAG_GAP;Er&&this.fragmentTracker.fragBuffered(vr,!0);const Cr=gr.errorAction,{action:wr,retryCount:Rr=0,retryConfig:kr}=Cr||{};if(Cr&&wr===NetworkErrorAction.RetryRequest&&kr){this.resetStartWhenNotLoaded(this.levelLastLoaded);const Dr=getRetryDelay(kr,Rr);this.warn(`Fragment ${vr.sn} of ${hr} ${vr.level} errored with ${gr.details}, retrying loading ${Rr+1}/${kr.maxNumRetry} in ${Dr}ms`),Cr.resolved=!0,this.retryDate=self.performance.now()+Dr,this.state=State.FRAG_LOADING_WAITING_RETRY}else if(kr&&Cr)if(this.resetFragmentErrors(hr),Rr<kr.maxNumRetry)!Er&&wr!==NetworkErrorAction.RemoveAlternatePermanently&&(Cr.resolved=!0);else{logger.warn(`${gr.details} reached or exceeded max retry (${Rr})`);return}else Cr?.action===NetworkErrorAction.SendAlternateToPenaltyBox?this.state=State.WAITING_LEVEL:this.state=State.ERROR;this.tickImmediate()}reduceLengthAndFlushBuffer(hr){if(this.state===State.PARSING||this.state===State.PARSED){const gr=hr.frag,vr=hr.parent,xr=this.getFwdBufferInfo(this.mediaBuffer,vr),Er=xr&&xr.len>.5;Er&&this.reduceMaxBufferLength(xr.len,gr?.duration||10);const Cr=!Er;return Cr&&this.warn(`Buffer full error while media.currentTime is not buffered, flush ${vr} buffer`),gr&&(this.fragmentTracker.removeFragment(gr),this.nextLoadPosition=gr.start),this.resetLoadingState(),Cr}return!1}resetFragmentErrors(hr){hr===PlaylistLevelType.AUDIO&&(this.fragCurrent=null),this.loadedmetadata||(this.startFragRequested=!1),this.state!==State.STOPPED&&(this.state=State.IDLE)}afterBufferFlushed(hr,gr,vr){if(!hr)return;const xr=BufferHelper.getBuffered(hr);this.fragmentTracker.detectEvictedFragments(gr,xr,vr),this.state===State.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=State.IDLE}resetStartWhenNotLoaded(hr){if(!this.loadedmetadata){this.startFragRequested=!1;const gr=hr?hr.details:null;gr!=null&&gr.live?(this.startPosition=-1,this.setStartPosition(gr,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(hr){this.warn(`The loading context changed while buffering fragment ${hr.sn} of level ${hr.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState()}removeUnbufferedFrags(hr=0){this.fragmentTracker.removeFragmentsInRange(hr,1/0,this.playlistType,!1,!0)}updateLevelTiming(hr,gr,vr,xr){var Er;const Cr=vr.details;if(!Cr){this.warn("level.details undefined");return}if(!Object.keys(hr.elementaryStreams).reduce((Rr,kr)=>{const Dr=hr.elementaryStreams[kr];if(Dr){const Br=Dr.endPTS-Dr.startPTS;if(Br<=0)return this.warn(`Could not parse fragment ${hr.sn} ${kr} duration reliably (${Br})`),Rr||!1;const Hr=xr?0:updateFragPTSDTS(Cr,hr,Dr.startPTS,Dr.endPTS,Dr.startDTS,Dr.endDTS);return this.hls.trigger(Events.LEVEL_PTS_UPDATED,{details:Cr,level:vr,drift:Hr,type:kr,frag:hr,start:Dr.startPTS,end:Dr.endPTS}),!0}return Rr},!1)&&((Er=this.transmuxer)==null?void 0:Er.error)===null){const Rr=new Error(`Found no media in fragment ${hr.sn} of level ${hr.level} resetting transmuxer to fallback to playlist timing`);if(vr.fragmentError===0&&(vr.fragmentError++,hr.gap=!0,this.fragmentTracker.removeFragment(hr),this.fragmentTracker.fragBuffered(hr,!0)),this.warn(Rr.message),this.hls.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,error:Rr,frag:hr,reason:`Found no media in msn ${hr.sn} of level "${vr.url}"`}),!this.hls)return;this.resetTransmuxer()}this.state=State.PARSED,this.hls.trigger(Events.FRAG_PARSED,{frag:hr,part:gr})}resetTransmuxer(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)}recoverWorkerError(hr){hr.event==="demuxerWorker"&&(this.fragmentTracker.removeAllFragments(),this.resetTransmuxer(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState())}set state(hr){const gr=this._state;gr!==hr&&(this._state=hr,this.log(`${gr}->${hr}`))}get state(){return this._state}}class ChunkCache{constructor(){this.chunks=[],this.dataLength=0}push(hr){this.chunks.push(hr),this.dataLength+=hr.length}flush(){const{chunks:hr,dataLength:gr}=this;let vr;if(hr.length)hr.length===1?vr=hr[0]:vr=concatUint8Arrays(hr,gr);else return new Uint8Array(0);return this.reset(),vr}reset(){this.chunks.length=0,this.dataLength=0}}function concatUint8Arrays(mr,hr){const gr=new Uint8Array(hr);let vr=0;for(let xr=0;xr<mr.length;xr++){const Er=mr[xr];gr.set(Er,vr),vr+=Er.length}return gr}function hasUMDWorker(){return typeof __HLS_WORKER_BUNDLE__=="function"}function injectWorker(){const mr=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),hr=self.URL.createObjectURL(mr);return{worker:new self.Worker(hr),objectURL:hr}}function loadWorker(mr){const hr=new self.URL(mr,self.location.href).href;return{worker:new self.Worker(hr),scriptURL:hr}}function dummyTrack(mr="",hr=9e4){return{type:mr,id:-1,pid:-1,inputTimeScale:hr,sequenceNumber:-1,samples:[],dropped:0}}class BaseAudioDemuxer{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(hr,gr,vr,xr){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(hr){this.initPTS=hr,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(hr,gr){return!1}appendFrame(hr,gr,vr){}demux(hr,gr){this.cachedData&&(hr=appendUint8Array(this.cachedData,hr),this.cachedData=null);let vr=getID3Data(hr,0),xr=vr?vr.length:0,Er;const Cr=this._audioTrack,wr=this._id3Track,Rr=vr?getTimeStamp(vr):void 0,kr=hr.length;for((this.basePTS===null||this.frameIndex===0&&isFiniteNumber(Rr))&&(this.basePTS=initPTSFn(Rr,gr,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),vr&&vr.length>0&&wr.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:vr,type:MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY});xr<kr;){if(this.canParse(hr,xr)){const Dr=this.appendFrame(Cr,hr,xr);Dr?(this.frameIndex++,this.lastPTS=Dr.sample.pts,xr+=Dr.length,Er=xr):xr=kr}else canParse$2(hr,xr)?(vr=getID3Data(hr,xr),wr.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:vr,type:MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY}),xr+=vr.length,Er=xr):xr++;if(xr===kr&&Er!==kr){const Dr=sliceUint8(hr,Er);this.cachedData?this.cachedData=appendUint8Array(this.cachedData,Dr):this.cachedData=Dr}}return{audioTrack:Cr,videoTrack:dummyTrack(),id3Track:wr,textTrack:dummyTrack()}}demuxSampleAes(hr,gr,vr){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(hr){const gr=this.cachedData;return gr&&(this.cachedData=null,this.demux(gr,0)),{audioTrack:this._audioTrack,videoTrack:dummyTrack(),id3Track:this._id3Track,textTrack:dummyTrack()}}destroy(){}}const initPTSFn=(mr,hr,gr)=>{if(isFiniteNumber(mr))return mr*90;const vr=gr?gr.baseTime*9e4/gr.timescale:0;return hr*9e4+vr};function getAudioConfig(mr,hr,gr,vr){let xr,Er,Cr,wr;const Rr=navigator.userAgent.toLowerCase(),kr=vr,Dr=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];xr=((hr[gr+2]&192)>>>6)+1;const Br=(hr[gr+2]&60)>>>2;if(Br>Dr.length-1){const Hr=new Error(`invalid ADTS sampling index:${Br}`);mr.emit(Events.ERROR,Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,error:Hr,reason:Hr.message});return}return Cr=(hr[gr+2]&1)<<2,Cr|=(hr[gr+3]&192)>>>6,logger.log(`manifest codec:${vr}, ADTS type:${xr}, samplingIndex:${Br}`),/firefox/i.test(Rr)?Br>=6?(xr=5,wr=new Array(4),Er=Br-3):(xr=2,wr=new Array(2),Er=Br):Rr.indexOf("android")!==-1?(xr=2,wr=new Array(2),Er=Br):(xr=5,wr=new Array(4),vr&&(vr.indexOf("mp4a.40.29")!==-1||vr.indexOf("mp4a.40.5")!==-1)||!vr&&Br>=6?Er=Br-3:((vr&&vr.indexOf("mp4a.40.2")!==-1&&(Br>=6&&Cr===1||/vivaldi/i.test(Rr))||!vr&&Cr===1)&&(xr=2,wr=new Array(2)),Er=Br)),wr[0]=xr<<3,wr[0]|=(Br&14)>>1,wr[1]|=(Br&1)<<7,wr[1]|=Cr<<3,xr===5&&(wr[1]|=(Er&14)>>1,wr[2]=(Er&1)<<7,wr[2]|=8,wr[3]=0),{config:wr,samplerate:Dr[Br],channelCount:Cr,codec:"mp4a.40."+xr,manifestCodec:kr}}function isHeaderPattern$1(mr,hr){return mr[hr]===255&&(mr[hr+1]&246)===240}function getHeaderLength(mr,hr){return mr[hr+1]&1?7:9}function getFullFrameLength(mr,hr){return(mr[hr+3]&3)<<11|mr[hr+4]<<3|(mr[hr+5]&224)>>>5}function canGetFrameLength(mr,hr){return hr+5<mr.length}function isHeader$1(mr,hr){return hr+1<mr.length&&isHeaderPattern$1(mr,hr)}function canParse$1(mr,hr){return canGetFrameLength(mr,hr)&&isHeaderPattern$1(mr,hr)&&getFullFrameLength(mr,hr)<=mr.length-hr}function probe$1(mr,hr){if(isHeader$1(mr,hr)){const gr=getHeaderLength(mr,hr);if(hr+gr>=mr.length)return!1;const vr=getFullFrameLength(mr,hr);if(vr<=gr)return!1;const xr=hr+vr;return xr===mr.length||isHeader$1(mr,xr)}return!1}function initTrackConfig(mr,hr,gr,vr,xr){if(!mr.samplerate){const Er=getAudioConfig(hr,gr,vr,xr);if(!Er)return;mr.config=Er.config,mr.samplerate=Er.samplerate,mr.channelCount=Er.channelCount,mr.codec=Er.codec,mr.manifestCodec=Er.manifestCodec,logger.log(`parsed codec:${mr.codec}, rate:${Er.samplerate}, channels:${Er.channelCount}`)}}function getFrameDuration(mr){return 1024*9e4/mr}function parseFrameHeader(mr,hr){const gr=getHeaderLength(mr,hr);if(hr+gr<=mr.length){const vr=getFullFrameLength(mr,hr)-gr;if(vr>0)return{headerLength:gr,frameLength:vr}}}function appendFrame$2(mr,hr,gr,vr,xr){const Er=getFrameDuration(mr.samplerate),Cr=vr+xr*Er,wr=parseFrameHeader(hr,gr);let Rr;if(wr){const{frameLength:Br,headerLength:Hr}=wr,Gr=Hr+Br,qr=Math.max(0,gr+Gr-hr.length);qr?(Rr=new Uint8Array(Gr-Hr),Rr.set(hr.subarray(gr+Hr,hr.length),0)):Rr=hr.subarray(gr+Hr,gr+Gr);const zr={unit:Rr,pts:Cr};return qr||mr.samples.push(zr),{sample:zr,length:Gr,missing:qr}}const kr=hr.length-gr;return Rr=new Uint8Array(kr),Rr.set(hr.subarray(gr,hr.length),0),{sample:{unit:Rr,pts:Cr},length:kr,missing:-1}}let chromeVersion$1=null;const BitratesMap=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot=[0,1,1,4];function appendFrame$1(mr,hr,gr,vr,xr){if(gr+24>hr.length)return;const Er=parseHeader(hr,gr);if(Er&&gr+Er.frameLength<=hr.length){const Cr=Er.samplesPerFrame*9e4/Er.sampleRate,wr=vr+xr*Cr,Rr={unit:hr.subarray(gr,gr+Er.frameLength),pts:wr,dts:wr};return mr.config=[],mr.channelCount=Er.channelCount,mr.samplerate=Er.sampleRate,mr.samples.push(Rr),{sample:Rr,length:Er.frameLength,missing:0}}}function parseHeader(mr,hr){const gr=mr[hr+1]>>3&3,vr=mr[hr+1]>>1&3,xr=mr[hr+2]>>4&15,Er=mr[hr+2]>>2&3;if(gr!==1&&xr!==0&&xr!==15&&Er!==3){const Cr=mr[hr+2]>>1&1,wr=mr[hr+3]>>6,Rr=gr===3?3-vr:vr===3?3:4,kr=BitratesMap[Rr*14+xr-1]*1e3,Br=SamplingRateMap[(gr===3?0:gr===2?1:2)*3+Er],Hr=wr===3?1:2,Gr=SamplesCoefficients[gr][vr],qr=BytesInSlot[vr],zr=Gr*8*qr,Qr=Math.floor(Gr*kr/Br+Cr)*qr;if(chromeVersion$1===null){const vn=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);chromeVersion$1=vn?parseInt(vn[1]):0}return!!chromeVersion$1&&chromeVersion$1<=87&&vr===2&&kr>=224e3&&wr===0&&(mr[hr+3]=mr[hr+3]|128),{sampleRate:Br,channelCount:Hr,frameLength:Qr,samplesPerFrame:zr}}}function isHeaderPattern(mr,hr){return mr[hr]===255&&(mr[hr+1]&224)===224&&(mr[hr+1]&6)!==0}function isHeader(mr,hr){return hr+1<mr.length&&isHeaderPattern(mr,hr)}function canParse(mr,hr){return isHeaderPattern(mr,hr)&&4<=mr.length-hr}function probe(mr,hr){if(hr+1<mr.length&&isHeaderPattern(mr,hr)){const vr=parseHeader(mr,hr);let xr=4;vr!=null&&vr.frameLength&&(xr=vr.frameLength);const Er=hr+xr;return Er===mr.length||isHeader(mr,Er)}return!1}class AACDemuxer extends BaseAudioDemuxer{constructor(hr,gr){super(),this.observer=void 0,this.config=void 0,this.observer=hr,this.config=gr}resetInitSegment(hr,gr,vr,xr){super.resetInitSegment(hr,gr,vr,xr),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:gr,duration:xr,inputTimeScale:9e4,dropped:0}}static probe(hr){if(!hr)return!1;const gr=getID3Data(hr,0);let vr=gr?.length||0;if(probe(hr,vr))return!1;for(let xr=hr.length;vr<xr;vr++)if(probe$1(hr,vr))return logger.log("ADTS sync word found !"),!0;return!1}canParse(hr,gr){return canParse$1(hr,gr)}appendFrame(hr,gr,vr){initTrackConfig(hr,this.observer,gr,vr,hr.manifestCodec);const xr=appendFrame$2(hr,gr,vr,this.basePTS,this.frameIndex);if(xr&&xr.missing===0)return xr}}const emsgSchemePattern=/\/emsg[-/]ID3/i;class MP4Demuxer{constructor(hr,gr){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=gr}resetTimeStamp(){}resetInitSegment(hr,gr,vr,xr){const Er=this.videoTrack=dummyTrack("video",1),Cr=this.audioTrack=dummyTrack("audio",1),wr=this.txtTrack=dummyTrack("text",1);if(this.id3Track=dummyTrack("id3",1),this.timeOffset=0,!(hr!=null&&hr.byteLength))return;const Rr=parseInitSegment(hr);if(Rr.video){const{id:kr,timescale:Dr,codec:Br}=Rr.video;Er.id=kr,Er.timescale=wr.timescale=Dr,Er.codec=Br}if(Rr.audio){const{id:kr,timescale:Dr,codec:Br}=Rr.audio;Cr.id=kr,Cr.timescale=Dr,Cr.codec=Br}wr.id=RemuxerTrackIdConfig.text,Er.sampleDuration=0,Er.duration=Cr.duration=xr}resetContiguity(){this.remainderData=null}static probe(hr){return hasMoofData(hr)}demux(hr,gr){this.timeOffset=gr;let vr=hr;const xr=this.videoTrack,Er=this.txtTrack;if(this.config.progressive){this.remainderData&&(vr=appendUint8Array(this.remainderData,hr));const wr=segmentValidRange(vr);this.remainderData=wr.remainder,xr.samples=wr.valid||new Uint8Array}else xr.samples=vr;const Cr=this.extractID3Track(xr,gr);return Er.samples=parseSamples(gr,xr),{videoTrack:xr,audioTrack:this.audioTrack,id3Track:Cr,textTrack:this.txtTrack}}flush(){const hr=this.timeOffset,gr=this.videoTrack,vr=this.txtTrack;gr.samples=this.remainderData||new Uint8Array,this.remainderData=null;const xr=this.extractID3Track(gr,this.timeOffset);return vr.samples=parseSamples(hr,gr),{videoTrack:gr,audioTrack:dummyTrack(),id3Track:xr,textTrack:dummyTrack()}}extractID3Track(hr,gr){const vr=this.id3Track;if(hr.samples.length){const xr=findBox(hr.samples,["emsg"]);xr&&xr.forEach(Er=>{const Cr=parseEmsg(Er);if(emsgSchemePattern.test(Cr.schemeIdUri)){const wr=isFiniteNumber(Cr.presentationTime)?Cr.presentationTime/Cr.timeScale:gr+Cr.presentationTimeDelta/Cr.timeScale;let Rr=Cr.eventDuration===4294967295?Number.POSITIVE_INFINITY:Cr.eventDuration/Cr.timeScale;Rr<=.001&&(Rr=Number.POSITIVE_INFINITY);const kr=Cr.payload;vr.samples.push({data:kr,len:kr.byteLength,dts:wr,pts:wr,type:MetadataSchema.emsg,duration:Rr})}})}return vr}demuxSampleAes(hr,gr,vr){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){}}const getAudioBSID=(mr,hr)=>{let gr=0,vr=5;hr+=vr;const xr=new Uint32Array(1),Er=new Uint32Array(1),Cr=new Uint8Array(1);for(;vr>0;){Cr[0]=mr[hr];const wr=Math.min(vr,8),Rr=8-wr;Er[0]=4278190080>>>24+Rr<<Rr,xr[0]=(Cr[0]&Er[0])>>Rr,gr=gr?gr<<wr|xr[0]:xr[0],hr+=1,vr-=wr}return gr};class AC3Demuxer extends BaseAudioDemuxer{constructor(hr){super(),this.observer=void 0,this.observer=hr}resetInitSegment(hr,gr,vr,xr){super.resetInitSegment(hr,gr,vr,xr),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:gr,duration:xr,inputTimeScale:9e4,dropped:0}}canParse(hr,gr){return gr+64<hr.length}appendFrame(hr,gr,vr){const xr=appendFrame(hr,gr,vr,this.basePTS,this.frameIndex);if(xr!==-1)return{sample:hr.samples[hr.samples.length-1],length:xr,missing:0}}static probe(hr){if(!hr)return!1;const gr=getID3Data(hr,0);if(!gr)return!1;const vr=gr.length;return hr[vr]===11&&hr[vr+1]===119&&getTimeStamp(gr)!==void 0&&getAudioBSID(hr,vr)<16}}function appendFrame(mr,hr,gr,vr,xr){if(gr+8>hr.length||hr[gr]!==11||hr[gr+1]!==119)return-1;const Er=hr[gr+4]>>6;if(Er>=3)return-1;const wr=[48e3,44100,32e3][Er],Rr=hr[gr+4]&63,Dr=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][Rr*3+Er]*2;if(gr+Dr>hr.length)return-1;const Br=hr[gr+6]>>5;let Hr=0;Br===2?Hr+=2:(Br&1&&Br!==1&&(Hr+=2),Br&4&&(Hr+=2));const Gr=(hr[gr+6]<<8|hr[gr+7])>>12-Hr&1,zr=[2,1,2,3,3,4,4,5][Br]+Gr,Qr=hr[gr+5]>>3,sn=hr[gr+5]&7,hn=new Uint8Array([Er<<6|Qr<<1|sn>>2,(sn&3)<<6|Br<<3|Gr<<2|Rr>>4,Rr<<4&224]),vn=1536/wr*9e4,yn=vr+xr*vn,gn=hr.subarray(gr,gr+Dr);return mr.config=hn,mr.channelCount=zr,mr.samplerate=wr,mr.samples.push({unit:gn,pts:yn}),Dr}class BaseVideoParser{constructor(){this.VideoSample=null}createVideoSample(hr,gr,vr,xr){return{key:hr,frame:!1,pts:gr,dts:vr,units:[],debug:xr,length:0}}getLastNalUnit(hr){var gr;let vr=this.VideoSample,xr;if((!vr||vr.units.length===0)&&(vr=hr[hr.length-1]),(gr=vr)!=null&&gr.units){const Er=vr.units;xr=Er[Er.length-1]}return xr}pushAccessUnit(hr,gr){if(hr.units.length&&hr.frame){if(hr.pts===void 0){const vr=gr.samples,xr=vr.length;if(xr){const Er=vr[xr-1];hr.pts=Er.pts,hr.dts=Er.dts}else{gr.dropped++;return}}gr.samples.push(hr)}hr.debug.length&&logger.log(hr.pts+"/"+hr.dts+":"+hr.debug)}}class ExpGolomb{constructor(hr){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=hr,this.bytesAvailable=hr.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const hr=this.data,gr=this.bytesAvailable,vr=hr.byteLength-gr,xr=new Uint8Array(4),Er=Math.min(4,gr);if(Er===0)throw new Error("no bytes available");xr.set(hr.subarray(vr,vr+Er)),this.word=new DataView(xr.buffer).getUint32(0),this.bitsAvailable=Er*8,this.bytesAvailable-=Er}skipBits(hr){let gr;hr=Math.min(hr,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>hr?(this.word<<=hr,this.bitsAvailable-=hr):(hr-=this.bitsAvailable,gr=hr>>3,hr-=gr<<3,this.bytesAvailable-=gr,this.loadWord(),this.word<<=hr,this.bitsAvailable-=hr)}readBits(hr){let gr=Math.min(this.bitsAvailable,hr);const vr=this.word>>>32-gr;if(hr>32&&logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=gr,this.bitsAvailable>0)this.word<<=gr;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return gr=hr-gr,gr>0&&this.bitsAvailable?vr<<gr|this.readBits(gr):vr}skipLZ(){let hr;for(hr=0;hr<this.bitsAvailable;++hr)if(this.word&2147483648>>>hr)return this.word<<=hr,this.bitsAvailable-=hr,hr;return this.loadWord(),hr+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const hr=this.skipLZ();return this.readBits(hr+1)-1}readEG(){const hr=this.readUEG();return 1&hr?1+hr>>>1:-1*(hr>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}skipScalingList(hr){let gr=8,vr=8,xr;for(let Er=0;Er<hr;Er++)vr!==0&&(xr=this.readEG(),vr=(gr+xr+256)%256),gr=vr===0?gr:vr}readSPS(){let hr=0,gr=0,vr=0,xr=0,Er,Cr,wr;const Rr=this.readUByte.bind(this),kr=this.readBits.bind(this),Dr=this.readUEG.bind(this),Br=this.readBoolean.bind(this),Hr=this.skipBits.bind(this),Gr=this.skipEG.bind(this),qr=this.skipUEG.bind(this),zr=this.skipScalingList.bind(this);Rr();const Qr=Rr();if(kr(5),Hr(3),Rr(),qr(),Qr===100||Qr===110||Qr===122||Qr===244||Qr===44||Qr===83||Qr===86||Qr===118||Qr===128){const bn=Dr();if(bn===3&&Hr(1),qr(),qr(),Hr(1),Br())for(Cr=bn!==3?8:12,wr=0;wr<Cr;wr++)Br()&&(wr<6?zr(16):zr(64))}qr();const sn=Dr();if(sn===0)Dr();else if(sn===1)for(Hr(1),Gr(),Gr(),Er=Dr(),wr=0;wr<Er;wr++)Gr();qr(),Hr(1);const hn=Dr(),vn=Dr(),yn=kr(1);yn===0&&Hr(1),Hr(1),Br()&&(hr=Dr(),gr=Dr(),vr=Dr(),xr=Dr());let gn=[1,1];if(Br()&&Br())switch(Rr()){case 1:gn=[1,1];break;case 2:gn=[12,11];break;case 3:gn=[10,11];break;case 4:gn=[16,11];break;case 5:gn=[40,33];break;case 6:gn=[24,11];break;case 7:gn=[20,11];break;case 8:gn=[32,11];break;case 9:gn=[80,33];break;case 10:gn=[18,11];break;case 11:gn=[15,11];break;case 12:gn=[64,33];break;case 13:gn=[160,99];break;case 14:gn=[4,3];break;case 15:gn=[3,2];break;case 16:gn=[2,1];break;case 255:{gn=[Rr()<<8|Rr(),Rr()<<8|Rr()];break}}return{width:Math.ceil((hn+1)*16-hr*2-gr*2),height:(2-yn)*(vn+1)*16-(yn?2:4)*(vr+xr),pixelRatio:gn}}readSliceType(){return this.readUByte(),this.readUEG(),this.readUEG()}}class AvcVideoParser extends BaseVideoParser{parseAVCPES(hr,gr,vr,xr,Er){const Cr=this.parseAVCNALu(hr,vr.data);let wr=this.VideoSample,Rr,kr=!1;vr.data=null,wr&&Cr.length&&!hr.audFound&&(this.pushAccessUnit(wr,hr),wr=this.VideoSample=this.createVideoSample(!1,vr.pts,vr.dts,"")),Cr.forEach(Dr=>{var Br;switch(Dr.type){case 1:{let zr=!1;Rr=!0;const Qr=Dr.data;if(kr&&Qr.length>4){const sn=new ExpGolomb(Qr).readSliceType();(sn===2||sn===4||sn===7||sn===9)&&(zr=!0)}if(zr){var Hr;(Hr=wr)!=null&&Hr.frame&&!wr.key&&(this.pushAccessUnit(wr,hr),wr=this.VideoSample=null)}wr||(wr=this.VideoSample=this.createVideoSample(!0,vr.pts,vr.dts,"")),wr.frame=!0,wr.key=zr;break}case 5:Rr=!0,(Br=wr)!=null&&Br.frame&&!wr.key&&(this.pushAccessUnit(wr,hr),wr=this.VideoSample=null),wr||(wr=this.VideoSample=this.createVideoSample(!0,vr.pts,vr.dts,"")),wr.key=!0,wr.frame=!0;break;case 6:{Rr=!0,parseSEIMessageFromNALu(Dr.data,1,vr.pts,gr.samples);break}case 7:{var Gr,qr;Rr=!0,kr=!0;const zr=Dr.data,sn=new ExpGolomb(zr).readSPS();if(!hr.sps||hr.width!==sn.width||hr.height!==sn.height||((Gr=hr.pixelRatio)==null?void 0:Gr[0])!==sn.pixelRatio[0]||((qr=hr.pixelRatio)==null?void 0:qr[1])!==sn.pixelRatio[1]){hr.width=sn.width,hr.height=sn.height,hr.pixelRatio=sn.pixelRatio,hr.sps=[zr],hr.duration=Er;const hn=zr.subarray(1,4);let vn="avc1.";for(let yn=0;yn<3;yn++){let gn=hn[yn].toString(16);gn.length<2&&(gn="0"+gn),vn+=gn}hr.codec=vn}break}case 8:Rr=!0,hr.pps=[Dr.data];break;case 9:Rr=!0,hr.audFound=!0,wr&&this.pushAccessUnit(wr,hr),wr=this.VideoSample=this.createVideoSample(!1,vr.pts,vr.dts,"");break;case 12:Rr=!0;break;default:Rr=!1,wr&&(wr.debug+="unknown NAL "+Dr.type+" ");break}wr&&Rr&&wr.units.push(Dr)}),xr&&wr&&(this.pushAccessUnit(wr,hr),this.VideoSample=null)}parseAVCNALu(hr,gr){const vr=gr.byteLength;let xr=hr.naluState||0;const Er=xr,Cr=[];let wr=0,Rr,kr,Dr,Br=-1,Hr=0;for(xr===-1&&(Br=0,Hr=gr[0]&31,xr=0,wr=1);wr<vr;){if(Rr=gr[wr++],!xr){xr=Rr?0:1;continue}if(xr===1){xr=Rr?0:2;continue}if(!Rr)xr=3;else if(Rr===1){if(kr=wr-xr-1,Br>=0){const Gr={data:gr.subarray(Br,kr),type:Hr};Cr.push(Gr)}else{const Gr=this.getLastNalUnit(hr.samples);Gr&&(Er&&wr<=4-Er&&Gr.state&&(Gr.data=Gr.data.subarray(0,Gr.data.byteLength-Er)),kr>0&&(Gr.data=appendUint8Array(Gr.data,gr.subarray(0,kr)),Gr.state=0))}wr<vr?(Dr=gr[wr]&31,Br=wr,Hr=Dr,xr=0):xr=-1}else xr=0}if(Br>=0&&xr>=0){const Gr={data:gr.subarray(Br,vr),type:Hr,state:xr};Cr.push(Gr)}if(Cr.length===0){const Gr=this.getLastNalUnit(hr.samples);Gr&&(Gr.data=appendUint8Array(Gr.data,gr))}return hr.naluState=xr,Cr}}class SampleAesDecrypter{constructor(hr,gr,vr){this.keyData=void 0,this.decrypter=void 0,this.keyData=vr,this.decrypter=new Decrypter(gr,{removePKCS7Padding:!1})}decryptBuffer(hr){return this.decrypter.decrypt(hr,this.keyData.key.buffer,this.keyData.iv.buffer)}decryptAacSample(hr,gr,vr){const xr=hr[gr].unit;if(xr.length<=16)return;const Er=xr.subarray(16,xr.length-xr.length%16),Cr=Er.buffer.slice(Er.byteOffset,Er.byteOffset+Er.length);this.decryptBuffer(Cr).then(wr=>{const Rr=new Uint8Array(wr);xr.set(Rr,16),this.decrypter.isSync()||this.decryptAacSamples(hr,gr+1,vr)})}decryptAacSamples(hr,gr,vr){for(;;gr++){if(gr>=hr.length){vr();return}if(!(hr[gr].unit.length<32)&&(this.decryptAacSample(hr,gr,vr),!this.decrypter.isSync()))return}}getAvcEncryptedData(hr){const gr=Math.floor((hr.length-48)/160)*16+16,vr=new Int8Array(gr);let xr=0;for(let Er=32;Er<hr.length-16;Er+=160,xr+=16)vr.set(hr.subarray(Er,Er+16),xr);return vr}getAvcDecryptedUnit(hr,gr){const vr=new Uint8Array(gr);let xr=0;for(let Er=32;Er<hr.length-16;Er+=160,xr+=16)hr.set(vr.subarray(xr,xr+16),Er);return hr}decryptAvcSample(hr,gr,vr,xr,Er){const Cr=discardEPB(Er.data),wr=this.getAvcEncryptedData(Cr);this.decryptBuffer(wr.buffer).then(Rr=>{Er.data=this.getAvcDecryptedUnit(Cr,Rr),this.decrypter.isSync()||this.decryptAvcSamples(hr,gr,vr+1,xr)})}decryptAvcSamples(hr,gr,vr,xr){if(hr instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;gr++,vr=0){if(gr>=hr.length){xr();return}const Er=hr[gr].units;for(;!(vr>=Er.length);vr++){const Cr=Er[vr];if(!(Cr.data.length<=48||Cr.type!==1&&Cr.type!==5)&&(this.decryptAvcSample(hr,gr,vr,xr,Cr),!this.decrypter.isSync()))return}}}}const PACKET_LENGTH=188;class TSDemuxer{constructor(hr,gr,vr){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=hr,this.config=gr,this.typeSupported=vr,this.videoParser=new AvcVideoParser}static probe(hr){const gr=TSDemuxer.syncOffset(hr);return gr>0&&logger.warn(`MPEG2-TS detected but first sync word found @ offset ${gr}`),gr!==-1}static syncOffset(hr){const gr=hr.length;let vr=Math.min(PACKET_LENGTH*5,gr-PACKET_LENGTH)+1,xr=0;for(;xr<vr;){let Er=!1,Cr=-1,wr=0;for(let Rr=xr;Rr<gr;Rr+=PACKET_LENGTH)if(hr[Rr]===71&&(gr-Rr===PACKET_LENGTH||hr[Rr+PACKET_LENGTH]===71)){if(wr++,Cr===-1&&(Cr=Rr,Cr!==0&&(vr=Math.min(Cr+PACKET_LENGTH*99,hr.length-PACKET_LENGTH)+1)),Er||(Er=parsePID(hr,Rr)===0),Er&&wr>1&&(Cr===0&&wr>2||Rr+PACKET_LENGTH>vr))return Cr}else{if(wr)return-1;break}xr++}return-1}static createTrack(hr,gr){return{container:hr==="video"||hr==="audio"?"video/mp2t":void 0,type:hr,id:RemuxerTrackIdConfig[hr],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:hr==="audio"?gr:void 0}}resetInitSegment(hr,gr,vr,xr){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=TSDemuxer.createTrack("video"),this._audioTrack=TSDemuxer.createTrack("audio",xr),this._id3Track=TSDemuxer.createTrack("id3"),this._txtTrack=TSDemuxer.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.remainderData=null,this.audioCodec=gr,this.videoCodec=vr,this._duration=xr}resetTimeStamp(){}resetContiguity(){const{_audioTrack:hr,_videoTrack:gr,_id3Track:vr}=this;hr&&(hr.pesData=null),gr&&(gr.pesData=null),vr&&(vr.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(hr,gr,vr=!1,xr=!1){vr||(this.sampleAes=null);let Er;const Cr=this._videoTrack,wr=this._audioTrack,Rr=this._id3Track,kr=this._txtTrack;let Dr=Cr.pid,Br=Cr.pesData,Hr=wr.pid,Gr=Rr.pid,qr=wr.pesData,zr=Rr.pesData,Qr=null,sn=this.pmtParsed,hn=this._pmtId,vn=hr.length;if(this.remainderData&&(hr=appendUint8Array(this.remainderData,hr),vn=hr.length,this.remainderData=null),vn<PACKET_LENGTH&&!xr)return this.remainderData=hr,{audioTrack:wr,videoTrack:Cr,id3Track:Rr,textTrack:kr};const yn=Math.max(0,TSDemuxer.syncOffset(hr));vn-=(vn-yn)%PACKET_LENGTH,vn<hr.byteLength&&!xr&&(this.remainderData=new Uint8Array(hr.buffer,vn,hr.buffer.byteLength-vn));let gn=0;for(let xn=yn;xn<vn;xn+=PACKET_LENGTH)if(hr[xn]===71){const $n=!!(hr[xn+1]&64),Sn=parsePID(hr,xn),Cn=(hr[xn+3]&48)>>4;let Rn;if(Cn>1){if(Rn=xn+5+hr[xn+4],Rn===xn+PACKET_LENGTH)continue}else Rn=xn+4;switch(Sn){case Dr:$n&&(Br&&(Er=parsePES(Br))&&this.videoParser.parseAVCPES(Cr,kr,Er,!1,this._duration),Br={data:[],size:0}),Br&&(Br.data.push(hr.subarray(Rn,xn+PACKET_LENGTH)),Br.size+=xn+PACKET_LENGTH-Rn);break;case Hr:if($n){if(qr&&(Er=parsePES(qr)))switch(wr.segmentCodec){case"aac":this.parseAACPES(wr,Er);break;case"mp3":this.parseMPEGPES(wr,Er);break;case"ac3":this.parseAC3PES(wr,Er);break}qr={data:[],size:0}}qr&&(qr.data.push(hr.subarray(Rn,xn+PACKET_LENGTH)),qr.size+=xn+PACKET_LENGTH-Rn);break;case Gr:$n&&(zr&&(Er=parsePES(zr))&&this.parseID3PES(Rr,Er),zr={data:[],size:0}),zr&&(zr.data.push(hr.subarray(Rn,xn+PACKET_LENGTH)),zr.size+=xn+PACKET_LENGTH-Rn);break;case 0:$n&&(Rn+=hr[Rn]+1),hn=this._pmtId=parsePAT(hr,Rn);break;case hn:{$n&&(Rn+=hr[Rn]+1);const Bn=parsePMT(hr,Rn,this.typeSupported,vr,this.observer);Dr=Bn.videoPid,Dr>0&&(Cr.pid=Dr,Cr.segmentCodec=Bn.segmentVideoCodec),Hr=Bn.audioPid,Hr>0&&(wr.pid=Hr,wr.segmentCodec=Bn.segmentAudioCodec),Gr=Bn.id3Pid,Gr>0&&(Rr.pid=Gr),Qr!==null&&!sn&&(logger.warn(`MPEG-TS PMT found at ${xn} after unknown PID '${Qr}'. Backtracking to sync byte @${yn} to parse all TS packets.`),Qr=null,xn=yn-188),sn=this.pmtParsed=!0;break}case 17:case 8191:break;default:Qr=Sn;break}}else gn++;gn>0&&emitParsingError(this.observer,new Error(`Found ${gn} TS packet/s that do not start with 0x47`)),Cr.pesData=Br,wr.pesData=qr,Rr.pesData=zr;const bn={audioTrack:wr,videoTrack:Cr,id3Track:Rr,textTrack:kr};return xr&&this.extractRemainingSamples(bn),bn}flush(){const{remainderData:hr}=this;this.remainderData=null;let gr;return hr?gr=this.demux(hr,-1,!1,!0):gr={videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(gr),this.sampleAes?this.decrypt(gr,this.sampleAes):gr}extractRemainingSamples(hr){const{audioTrack:gr,videoTrack:vr,id3Track:xr,textTrack:Er}=hr,Cr=vr.pesData,wr=gr.pesData,Rr=xr.pesData;let kr;if(Cr&&(kr=parsePES(Cr))?(this.videoParser.parseAVCPES(vr,Er,kr,!0,this._duration),vr.pesData=null):vr.pesData=Cr,wr&&(kr=parsePES(wr))){switch(gr.segmentCodec){case"aac":this.parseAACPES(gr,kr);break;case"mp3":this.parseMPEGPES(gr,kr);break;case"ac3":this.parseAC3PES(gr,kr);break}gr.pesData=null}else wr!=null&&wr.size&&logger.log("last AAC PES packet truncated,might overlap between fragments"),gr.pesData=wr;Rr&&(kr=parsePES(Rr))?(this.parseID3PES(xr,kr),xr.pesData=null):xr.pesData=Rr}demuxSampleAes(hr,gr,vr){const xr=this.demux(hr,vr,!0,!this.config.progressive),Er=this.sampleAes=new SampleAesDecrypter(this.observer,this.config,gr);return this.decrypt(xr,Er)}decrypt(hr,gr){return new Promise(vr=>{const{audioTrack:xr,videoTrack:Er}=hr;xr.samples&&xr.segmentCodec==="aac"?gr.decryptAacSamples(xr.samples,0,()=>{Er.samples?gr.decryptAvcSamples(Er.samples,0,0,()=>{vr(hr)}):vr(hr)}):Er.samples&&gr.decryptAvcSamples(Er.samples,0,0,()=>{vr(hr)})})}destroy(){this._duration=0}parseAACPES(hr,gr){let vr=0;const xr=this.aacOverFlow;let Er=gr.data;if(xr){this.aacOverFlow=null;const Br=xr.missing,Hr=xr.sample.unit.byteLength;if(Br===-1)Er=appendUint8Array(xr.sample.unit,Er);else{const Gr=Hr-Br;xr.sample.unit.set(Er.subarray(0,Br),Gr),hr.samples.push(xr.sample),vr=xr.missing}}let Cr,wr;for(Cr=vr,wr=Er.length;Cr<wr-1&&!isHeader$1(Er,Cr);Cr++);if(Cr!==vr){let Br;const Hr=Cr<wr-1;if(Hr?Br=`AAC PES did not start with ADTS header,offset:${Cr}`:Br="No ADTS header found in AAC PES",emitParsingError(this.observer,new Error(Br),Hr),!Hr)return}initTrackConfig(hr,this.observer,Er,Cr,this.audioCodec);let Rr;if(gr.pts!==void 0)Rr=gr.pts;else if(xr){const Br=getFrameDuration(hr.samplerate);Rr=xr.sample.pts+Br}else{logger.warn("[tsdemuxer]: AAC PES unknown PTS");return}let kr=0,Dr;for(;Cr<wr;)if(Dr=appendFrame$2(hr,Er,Cr,Rr,kr),Cr+=Dr.length,Dr.missing){this.aacOverFlow=Dr;break}else for(kr++;Cr<wr-1&&!isHeader$1(Er,Cr);Cr++);}parseMPEGPES(hr,gr){const vr=gr.data,xr=vr.length;let Er=0,Cr=0;const wr=gr.pts;if(wr===void 0){logger.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;Cr<xr;)if(isHeader(vr,Cr)){const Rr=appendFrame$1(hr,vr,Cr,wr,Er);if(Rr)Cr+=Rr.length,Er++;else break}else Cr++}parseAC3PES(hr,gr){{const vr=gr.data,xr=gr.pts;if(xr===void 0){logger.warn("[tsdemuxer]: AC3 PES unknown PTS");return}const Er=vr.length;let Cr=0,wr=0,Rr;for(;wr<Er&&(Rr=appendFrame(hr,vr,wr,xr,Cr++))>0;)wr+=Rr}}parseID3PES(hr,gr){if(gr.pts===void 0){logger.warn("[tsdemuxer]: ID3 PES unknown PTS");return}const vr=_extends({},gr,{type:this._videoTrack?MetadataSchema.emsg:MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY});hr.samples.push(vr)}}function parsePID(mr,hr){return((mr[hr+1]&31)<<8)+mr[hr+2]}function parsePAT(mr,hr){return(mr[hr+10]&31)<<8|mr[hr+11]}function parsePMT(mr,hr,gr,vr,xr){const Er={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},Cr=(mr[hr+1]&15)<<8|mr[hr+2],wr=hr+3+Cr-4,Rr=(mr[hr+10]&15)<<8|mr[hr+11];for(hr+=12+Rr;hr<wr;){const kr=parsePID(mr,hr),Dr=(mr[hr+3]&15)<<8|mr[hr+4];switch(mr[hr]){case 207:if(!vr){logEncryptedSamplesFoundInUnencryptedStream("ADTS AAC");break}case 15:Er.audioPid===-1&&(Er.audioPid=kr);break;case 21:Er.id3Pid===-1&&(Er.id3Pid=kr);break;case 219:if(!vr){logEncryptedSamplesFoundInUnencryptedStream("H.264");break}case 27:Er.videoPid===-1&&(Er.videoPid=kr,Er.segmentVideoCodec="avc");break;case 3:case 4:!gr.mpeg&&!gr.mp3?logger.log("MPEG audio found, not supported in this browser"):Er.audioPid===-1&&(Er.audioPid=kr,Er.segmentAudioCodec="mp3");break;case 193:if(!vr){logEncryptedSamplesFoundInUnencryptedStream("AC-3");break}case 129:gr.ac3?Er.audioPid===-1&&(Er.audioPid=kr,Er.segmentAudioCodec="ac3"):logger.log("AC-3 audio found, not supported in this browser");break;case 6:if(Er.audioPid===-1&&Dr>0){let Br=hr+5,Hr=Dr;for(;Hr>2;){switch(mr[Br]){case 106:gr.ac3!==!0?logger.log("AC-3 audio found, not supported in this browser for now"):(Er.audioPid=kr,Er.segmentAudioCodec="ac3");break}const qr=mr[Br+1]+2;Br+=qr,Hr-=qr}}break;case 194:case 135:return emitParsingError(xr,new Error("Unsupported EC-3 in M2TS found")),Er;case 36:return emitParsingError(xr,new Error("Unsupported HEVC in M2TS found")),Er}hr+=Dr+5}return Er}function emitParsingError(mr,hr,gr){logger.warn(`parsing error: ${hr.message}`),mr.emit(Events.ERROR,Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,levelRetry:gr,error:hr,reason:hr.message})}function logEncryptedSamplesFoundInUnencryptedStream(mr){logger.log(`${mr} with AES-128-CBC encryption found in unencrypted stream`)}function parsePES(mr){let hr=0,gr,vr,xr,Er,Cr;const wr=mr.data;if(!mr||mr.size===0)return null;for(;wr[0].length<19&&wr.length>1;)wr[0]=appendUint8Array(wr[0],wr[1]),wr.splice(1,1);if(gr=wr[0],(gr[0]<<16)+(gr[1]<<8)+gr[2]===1){if(vr=(gr[4]<<8)+gr[5],vr&&vr>mr.size-6)return null;const kr=gr[7];kr&192&&(Er=(gr[9]&14)*536870912+(gr[10]&255)*4194304+(gr[11]&254)*16384+(gr[12]&255)*128+(gr[13]&254)/2,kr&64?(Cr=(gr[14]&14)*536870912+(gr[15]&255)*4194304+(gr[16]&254)*16384+(gr[17]&255)*128+(gr[18]&254)/2,Er-Cr>60*9e4&&(logger.warn(`${Math.round((Er-Cr)/9e4)}s delta between PTS and DTS, align them`),Er=Cr)):Cr=Er),xr=gr[8];let Dr=xr+9;if(mr.size<=Dr)return null;mr.size-=Dr;const Br=new Uint8Array(mr.size);for(let Hr=0,Gr=wr.length;Hr<Gr;Hr++){gr=wr[Hr];let qr=gr.byteLength;if(Dr)if(Dr>qr){Dr-=qr;continue}else gr=gr.subarray(Dr),qr-=Dr,Dr=0;Br.set(gr,hr),hr+=qr}return vr&&(vr-=xr+3),{data:Br,pts:Er,dts:Cr,len:vr}}return null}class MP3Demuxer extends BaseAudioDemuxer{resetInitSegment(hr,gr,vr,xr){super.resetInitSegment(hr,gr,vr,xr),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:gr,duration:xr,inputTimeScale:9e4,dropped:0}}static probe(hr){if(!hr)return!1;const gr=getID3Data(hr,0);let vr=gr?.length||0;if(gr&&hr[vr]===11&&hr[vr+1]===119&&getTimeStamp(gr)!==void 0&&getAudioBSID(hr,vr)<=16)return!1;for(let xr=hr.length;vr<xr;vr++)if(probe(hr,vr))return logger.log("MPEG Audio sync word found !"),!0;return!1}canParse(hr,gr){return canParse(hr,gr)}appendFrame(hr,gr,vr){if(this.basePTS!==null)return appendFrame$1(hr,gr,vr,this.basePTS,this.frameIndex)}}class AAC{static getSilentFrame(hr,gr){switch(hr){case"mp4a.40.2":if(gr===1)return new Uint8Array([0,200,0,128,35,128]);if(gr===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(gr===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(gr===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(gr===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(gr===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(gr===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(gr===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(gr===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const UINT32_MAX=Math.pow(2,32)-1;class MP4{static init(){MP4.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let hr;for(hr in MP4.types)MP4.types.hasOwnProperty(hr)&&(MP4.types[hr]=[hr.charCodeAt(0),hr.charCodeAt(1),hr.charCodeAt(2),hr.charCodeAt(3)]);const gr=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),vr=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);MP4.HDLR_TYPES={video:gr,audio:vr};const xr=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),Er=new Uint8Array([0,0,0,0,0,0,0,0]);MP4.STTS=MP4.STSC=MP4.STCO=Er,MP4.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),MP4.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),MP4.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),MP4.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const Cr=new Uint8Array([105,115,111,109]),wr=new Uint8Array([97,118,99,49]),Rr=new Uint8Array([0,0,0,1]);MP4.FTYP=MP4.box(MP4.types.ftyp,Cr,Rr,Cr,wr),MP4.DINF=MP4.box(MP4.types.dinf,MP4.box(MP4.types.dref,xr))}static box(hr,...gr){let vr=8,xr=gr.length;const Er=xr;for(;xr--;)vr+=gr[xr].byteLength;const Cr=new Uint8Array(vr);for(Cr[0]=vr>>24&255,Cr[1]=vr>>16&255,Cr[2]=vr>>8&255,Cr[3]=vr&255,Cr.set(hr,4),xr=0,vr=8;xr<Er;xr++)Cr.set(gr[xr],vr),vr+=gr[xr].byteLength;return Cr}static hdlr(hr){return MP4.box(MP4.types.hdlr,MP4.HDLR_TYPES[hr])}static mdat(hr){return MP4.box(MP4.types.mdat,hr)}static mdhd(hr,gr){gr*=hr;const vr=Math.floor(gr/(UINT32_MAX+1)),xr=Math.floor(gr%(UINT32_MAX+1));return MP4.box(MP4.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,hr>>24&255,hr>>16&255,hr>>8&255,hr&255,vr>>24,vr>>16&255,vr>>8&255,vr&255,xr>>24,xr>>16&255,xr>>8&255,xr&255,85,196,0,0]))}static mdia(hr){return MP4.box(MP4.types.mdia,MP4.mdhd(hr.timescale,hr.duration),MP4.hdlr(hr.type),MP4.minf(hr))}static mfhd(hr){return MP4.box(MP4.types.mfhd,new Uint8Array([0,0,0,0,hr>>24,hr>>16&255,hr>>8&255,hr&255]))}static minf(hr){return hr.type==="audio"?MP4.box(MP4.types.minf,MP4.box(MP4.types.smhd,MP4.SMHD),MP4.DINF,MP4.stbl(hr)):MP4.box(MP4.types.minf,MP4.box(MP4.types.vmhd,MP4.VMHD),MP4.DINF,MP4.stbl(hr))}static moof(hr,gr,vr){return MP4.box(MP4.types.moof,MP4.mfhd(hr),MP4.traf(vr,gr))}static moov(hr){let gr=hr.length;const vr=[];for(;gr--;)vr[gr]=MP4.trak(hr[gr]);return MP4.box.apply(null,[MP4.types.moov,MP4.mvhd(hr[0].timescale,hr[0].duration)].concat(vr).concat(MP4.mvex(hr)))}static mvex(hr){let gr=hr.length;const vr=[];for(;gr--;)vr[gr]=MP4.trex(hr[gr]);return MP4.box.apply(null,[MP4.types.mvex,...vr])}static mvhd(hr,gr){gr*=hr;const vr=Math.floor(gr/(UINT32_MAX+1)),xr=Math.floor(gr%(UINT32_MAX+1)),Er=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,hr>>24&255,hr>>16&255,hr>>8&255,hr&255,vr>>24,vr>>16&255,vr>>8&255,vr&255,xr>>24,xr>>16&255,xr>>8&255,xr&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return MP4.box(MP4.types.mvhd,Er)}static sdtp(hr){const gr=hr.samples||[],vr=new Uint8Array(4+gr.length);let xr,Er;for(xr=0;xr<gr.length;xr++)Er=gr[xr].flags,vr[xr+4]=Er.dependsOn<<4|Er.isDependedOn<<2|Er.hasRedundancy;return MP4.box(MP4.types.sdtp,vr)}static stbl(hr){return MP4.box(MP4.types.stbl,MP4.stsd(hr),MP4.box(MP4.types.stts,MP4.STTS),MP4.box(MP4.types.stsc,MP4.STSC),MP4.box(MP4.types.stsz,MP4.STSZ),MP4.box(MP4.types.stco,MP4.STCO))}static avc1(hr){let gr=[],vr=[],xr,Er,Cr;for(xr=0;xr<hr.sps.length;xr++)Er=hr.sps[xr],Cr=Er.byteLength,gr.push(Cr>>>8&255),gr.push(Cr&255),gr=gr.concat(Array.prototype.slice.call(Er));for(xr=0;xr<hr.pps.length;xr++)Er=hr.pps[xr],Cr=Er.byteLength,vr.push(Cr>>>8&255),vr.push(Cr&255),vr=vr.concat(Array.prototype.slice.call(Er));const wr=MP4.box(MP4.types.avcC,new Uint8Array([1,gr[3],gr[4],gr[5],255,224|hr.sps.length].concat(gr).concat([hr.pps.length]).concat(vr))),Rr=hr.width,kr=hr.height,Dr=hr.pixelRatio[0],Br=hr.pixelRatio[1];return MP4.box(MP4.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,Rr>>8&255,Rr&255,kr>>8&255,kr&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),wr,MP4.box(MP4.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),MP4.box(MP4.types.pasp,new Uint8Array([Dr>>24,Dr>>16&255,Dr>>8&255,Dr&255,Br>>24,Br>>16&255,Br>>8&255,Br&255])))}static esds(hr){const gr=hr.config.length;return new Uint8Array([0,0,0,0,3,23+gr,0,1,0,4,15+gr,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([gr]).concat(hr.config).concat([6,1,2]))}static audioStsd(hr){const gr=hr.samplerate;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,hr.channelCount,0,16,0,0,0,0,gr>>8&255,gr&255,0,0])}static mp4a(hr){return MP4.box(MP4.types.mp4a,MP4.audioStsd(hr),MP4.box(MP4.types.esds,MP4.esds(hr)))}static mp3(hr){return MP4.box(MP4.types[".mp3"],MP4.audioStsd(hr))}static ac3(hr){return MP4.box(MP4.types["ac-3"],MP4.audioStsd(hr),MP4.box(MP4.types.dac3,hr.config))}static stsd(hr){return hr.type==="audio"?hr.segmentCodec==="mp3"&&hr.codec==="mp3"?MP4.box(MP4.types.stsd,MP4.STSD,MP4.mp3(hr)):hr.segmentCodec==="ac3"?MP4.box(MP4.types.stsd,MP4.STSD,MP4.ac3(hr)):MP4.box(MP4.types.stsd,MP4.STSD,MP4.mp4a(hr)):MP4.box(MP4.types.stsd,MP4.STSD,MP4.avc1(hr))}static tkhd(hr){const gr=hr.id,vr=hr.duration*hr.timescale,xr=hr.width,Er=hr.height,Cr=Math.floor(vr/(UINT32_MAX+1)),wr=Math.floor(vr%(UINT32_MAX+1));return MP4.box(MP4.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,gr>>24&255,gr>>16&255,gr>>8&255,gr&255,0,0,0,0,Cr>>24,Cr>>16&255,Cr>>8&255,Cr&255,wr>>24,wr>>16&255,wr>>8&255,wr&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,xr>>8&255,xr&255,0,0,Er>>8&255,Er&255,0,0]))}static traf(hr,gr){const vr=MP4.sdtp(hr),xr=hr.id,Er=Math.floor(gr/(UINT32_MAX+1)),Cr=Math.floor(gr%(UINT32_MAX+1));return MP4.box(MP4.types.traf,MP4.box(MP4.types.tfhd,new Uint8Array([0,0,0,0,xr>>24,xr>>16&255,xr>>8&255,xr&255])),MP4.box(MP4.types.tfdt,new Uint8Array([1,0,0,0,Er>>24,Er>>16&255,Er>>8&255,Er&255,Cr>>24,Cr>>16&255,Cr>>8&255,Cr&255])),MP4.trun(hr,vr.length+16+20+8+16+8+8),vr)}static trak(hr){return hr.duration=hr.duration||4294967295,MP4.box(MP4.types.trak,MP4.tkhd(hr),MP4.mdia(hr))}static trex(hr){const gr=hr.id;return MP4.box(MP4.types.trex,new Uint8Array([0,0,0,0,gr>>24,gr>>16&255,gr>>8&255,gr&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(hr,gr){const vr=hr.samples||[],xr=vr.length,Er=12+16*xr,Cr=new Uint8Array(Er);let wr,Rr,kr,Dr,Br,Hr;for(gr+=8+Er,Cr.set([hr.type==="video"?1:0,0,15,1,xr>>>24&255,xr>>>16&255,xr>>>8&255,xr&255,gr>>>24&255,gr>>>16&255,gr>>>8&255,gr&255],0),wr=0;wr<xr;wr++)Rr=vr[wr],kr=Rr.duration,Dr=Rr.size,Br=Rr.flags,Hr=Rr.cts,Cr.set([kr>>>24&255,kr>>>16&255,kr>>>8&255,kr&255,Dr>>>24&255,Dr>>>16&255,Dr>>>8&255,Dr&255,Br.isLeading<<2|Br.dependsOn,Br.isDependedOn<<6|Br.hasRedundancy<<4|Br.paddingValue<<1|Br.isNonSync,Br.degradPrio&61440,Br.degradPrio&15,Hr>>>24&255,Hr>>>16&255,Hr>>>8&255,Hr&255],12+16*wr);return MP4.box(MP4.types.trun,Cr)}static initSegment(hr){MP4.types||MP4.init();const gr=MP4.moov(hr);return appendUint8Array(MP4.FTYP,gr)}}MP4.types=void 0;MP4.HDLR_TYPES=void 0;MP4.STTS=void 0;MP4.STSC=void 0;MP4.STCO=void 0;MP4.STSZ=void 0;MP4.VMHD=void 0;MP4.SMHD=void 0;MP4.STSD=void 0;MP4.FTYP=void 0;MP4.DINF=void 0;const MPEG_TS_CLOCK_FREQ_HZ=9e4;function toTimescaleFromBase(mr,hr,gr=1,vr=!1){const xr=mr*hr*gr;return vr?Math.round(xr):xr}function toTimescaleFromScale(mr,hr,gr=1,vr=!1){return toTimescaleFromBase(mr,hr,1/gr,vr)}function toMsFromMpegTsClock(mr,hr=!1){return toTimescaleFromBase(mr,1e3,1/MPEG_TS_CLOCK_FREQ_HZ,hr)}function toMpegTsClockFromTimescale(mr,hr=1){return toTimescaleFromBase(mr,MPEG_TS_CLOCK_FREQ_HZ,1/hr)}const MAX_SILENT_FRAME_DURATION=10*1e3,AAC_SAMPLES_PER_FRAME=1024,MPEG_AUDIO_SAMPLE_PER_FRAME=1152,AC3_SAMPLES_PER_FRAME=1536;let chromeVersion=null,safariWebkitVersion=null;class MP4Remuxer{constructor(hr,gr,vr,xr=""){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=hr,this.config=gr,this.typeSupported=vr,this.ISGenerated=!1,chromeVersion===null){const Cr=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);chromeVersion=Cr?parseInt(Cr[1]):0}if(safariWebkitVersion===null){const Er=navigator.userAgent.match(/Safari\/(\d+)/i);safariWebkitVersion=Er?parseInt(Er[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(hr){logger.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=hr}resetNextTimestamp(){logger.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){logger.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(hr){let gr=!1;const vr=hr[0].pts,xr=hr.reduce((Er,Cr)=>{let wr=Cr.pts,Rr=wr-Er;return Rr<-4294967296&&(gr=!0,wr=normalizePts(wr,vr),Rr=wr-Er),Rr>0?Er:wr},vr);return gr&&logger.debug("PTS rollover detected"),xr}remux(hr,gr,vr,xr,Er,Cr,wr,Rr){let kr,Dr,Br,Hr,Gr,qr,zr=Er,Qr=Er;const sn=hr.pid>-1,hn=gr.pid>-1,vn=gr.samples.length,yn=hr.samples.length>0,gn=wr&&vn>0||vn>1;if((!sn||yn)&&(!hn||gn)||this.ISGenerated||wr){if(this.ISGenerated){var xn,$n,Sn,Cn;const Hn=this.videoTrackConfig;Hn&&(gr.width!==Hn.width||gr.height!==Hn.height||((xn=gr.pixelRatio)==null?void 0:xn[0])!==(($n=Hn.pixelRatio)==null?void 0:$n[0])||((Sn=gr.pixelRatio)==null?void 0:Sn[1])!==((Cn=Hn.pixelRatio)==null?void 0:Cn[1]))&&this.resetInitSegment()}else Br=this.generateIS(hr,gr,Er,Cr);const Rn=this.isVideoContiguous;let Bn=-1,Fn;if(gn&&(Bn=findKeyframeIndex(gr.samples),!Rn&&this.config.forceKeyFrameOnDiscontinuity))if(qr=!0,Bn>0){logger.warn(`[mp4-remuxer]: Dropped ${Bn} out of ${vn} video samples due to a missing keyframe`);const Hn=this.getVideoStartPts(gr.samples);gr.samples=gr.samples.slice(Bn),gr.dropped+=Bn,Qr+=(gr.samples[0].pts-Hn)/gr.inputTimeScale,Fn=Qr}else Bn===-1&&(logger.warn(`[mp4-remuxer]: No keyframe found out of ${vn} video samples`),qr=!1);if(this.ISGenerated){if(yn&&gn){const Hn=this.getVideoStartPts(gr.samples),qn=(normalizePts(hr.samples[0].pts,Hn)-Hn)/gr.inputTimeScale;zr+=Math.max(0,qn),Qr+=Math.max(0,-qn)}if(yn){if(hr.samplerate||(logger.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),Br=this.generateIS(hr,gr,Er,Cr)),Dr=this.remuxAudio(hr,zr,this.isAudioContiguous,Cr,hn||gn||Rr===PlaylistLevelType.AUDIO?Qr:void 0),gn){const Hn=Dr?Dr.endPTS-Dr.startPTS:0;gr.inputTimeScale||(logger.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),Br=this.generateIS(hr,gr,Er,Cr)),kr=this.remuxVideo(gr,Qr,Rn,Hn)}}else gn&&(kr=this.remuxVideo(gr,Qr,Rn,0));kr&&(kr.firstKeyFrame=Bn,kr.independent=Bn!==-1,kr.firstKeyFramePTS=Fn)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(vr.samples.length&&(Gr=flushTextTrackMetadataCueSamples(vr,Er,this._initPTS,this._initDTS)),xr.samples.length&&(Hr=flushTextTrackUserdataCueSamples(xr,Er,this._initPTS))),{audio:Dr,video:kr,initSegment:Br,independent:qr,text:Hr,id3:Gr}}generateIS(hr,gr,vr,xr){const Er=hr.samples,Cr=gr.samples,wr=this.typeSupported,Rr={},kr=this._initPTS;let Dr=!kr||xr,Br="audio/mp4",Hr,Gr,qr;if(Dr&&(Hr=Gr=1/0),hr.config&&Er.length){switch(hr.timescale=hr.samplerate,hr.segmentCodec){case"mp3":wr.mpeg?(Br="audio/mpeg",hr.codec=""):wr.mp3&&(hr.codec="mp3");break;case"ac3":hr.codec="ac-3";break}Rr.audio={id:"audio",container:Br,codec:hr.codec,initSegment:hr.segmentCodec==="mp3"&&wr.mpeg?new Uint8Array(0):MP4.initSegment([hr]),metadata:{channelCount:hr.channelCount}},Dr&&(qr=hr.inputTimeScale,!kr||qr!==kr.timescale?Hr=Gr=Er[0].pts-Math.round(qr*vr):Dr=!1)}if(gr.sps&&gr.pps&&Cr.length){if(gr.timescale=gr.inputTimeScale,Rr.video={id:"main",container:"video/mp4",codec:gr.codec,initSegment:MP4.initSegment([gr]),metadata:{width:gr.width,height:gr.height}},Dr)if(qr=gr.inputTimeScale,!kr||qr!==kr.timescale){const zr=this.getVideoStartPts(Cr),Qr=Math.round(qr*vr);Gr=Math.min(Gr,normalizePts(Cr[0].dts,zr)-Qr),Hr=Math.min(Hr,zr-Qr)}else Dr=!1;this.videoTrackConfig={width:gr.width,height:gr.height,pixelRatio:gr.pixelRatio}}if(Object.keys(Rr).length)return this.ISGenerated=!0,Dr?(this._initPTS={baseTime:Hr,timescale:qr},this._initDTS={baseTime:Gr,timescale:qr}):Hr=qr=void 0,{tracks:Rr,initPTS:Hr,timescale:qr}}remuxVideo(hr,gr,vr,xr){const Er=hr.inputTimeScale,Cr=hr.samples,wr=[],Rr=Cr.length,kr=this._initPTS;let Dr=this.nextAvcDts,Br=8,Hr=this.videoSampleDuration,Gr,qr,zr=Number.POSITIVE_INFINITY,Qr=Number.NEGATIVE_INFINITY,sn=!1;if(!vr||Dr===null){const _n=gr*Er,Tn=Cr[0].pts-normalizePts(Cr[0].dts,Cr[0].pts);chromeVersion&&Dr!==null&&Math.abs(_n-Tn-Dr)<15e3?vr=!0:Dr=_n-Tn}const hn=kr.baseTime*Er/kr.timescale;for(let _n=0;_n<Rr;_n++){const Tn=Cr[_n];Tn.pts=normalizePts(Tn.pts-hn,Dr),Tn.dts=normalizePts(Tn.dts-hn,Dr),Tn.dts<Cr[_n>0?_n-1:_n].dts&&(sn=!0)}sn&&Cr.sort(function(_n,Tn){const Mn=_n.dts-Tn.dts,Ln=_n.pts-Tn.pts;return Mn||Ln}),Gr=Cr[0].dts,qr=Cr[Cr.length-1].dts;const vn=qr-Gr,yn=vn?Math.round(vn/(Rr-1)):Hr||hr.inputTimeScale/30;if(vr){const _n=Gr-Dr,Tn=_n>yn,Mn=_n<-1;if((Tn||Mn)&&(Tn?logger.warn(`AVC: ${toMsFromMpegTsClock(_n,!0)} ms (${_n}dts) hole between fragments detected at ${gr.toFixed(3)}`):logger.warn(`AVC: ${toMsFromMpegTsClock(-_n,!0)} ms (${_n}dts) overlapping between fragments detected at ${gr.toFixed(3)}`),!Mn||Dr>=Cr[0].pts||chromeVersion)){Gr=Dr;const Ln=Cr[0].pts-_n;if(Tn)Cr[0].dts=Gr,Cr[0].pts=Ln;else for(let jn=0;jn<Cr.length&&!(Cr[jn].dts>Ln);jn++)Cr[jn].dts-=_n,Cr[jn].pts-=_n;logger.log(`Video: Initial PTS/DTS adjusted: ${toMsFromMpegTsClock(Ln,!0)}/${toMsFromMpegTsClock(Gr,!0)}, delta: ${toMsFromMpegTsClock(_n,!0)} ms`)}}Gr=Math.max(0,Gr);let gn=0,bn=0,xn=Gr;for(let _n=0;_n<Rr;_n++){const Tn=Cr[_n],Mn=Tn.units,Ln=Mn.length;let jn=0;for(let Kn=0;Kn<Ln;Kn++)jn+=Mn[Kn].data.length;bn+=jn,gn+=Ln,Tn.length=jn,Tn.dts<xn?(Tn.dts=xn,xn+=yn/4|0||1):xn=Tn.dts,zr=Math.min(Tn.pts,zr),Qr=Math.max(Tn.pts,Qr)}qr=Cr[Rr-1].dts;const $n=bn+4*gn+8;let Sn;try{Sn=new Uint8Array($n)}catch(_n){this.observer.emit(Events.ERROR,Events.ERROR,{type:ErrorTypes.MUX_ERROR,details:ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,error:_n,bytes:$n,reason:`fail allocating video mdat ${$n}`});return}const Cn=new DataView(Sn.buffer);Cn.setUint32(0,$n),Sn.set(MP4.types.mdat,4);let Rn=!1,Bn=Number.POSITIVE_INFINITY,Fn=Number.POSITIVE_INFINITY,Hn=Number.NEGATIVE_INFINITY,Gn=Number.NEGATIVE_INFINITY;for(let _n=0;_n<Rr;_n++){const Tn=Cr[_n],Mn=Tn.units;let Ln=0;for(let Nn=0,An=Mn.length;Nn<An;Nn++){const kn=Mn[Nn],Dn=kn.data,Vn=kn.data.byteLength;Cn.setUint32(Br,Vn),Br+=4,Sn.set(Dn,Br),Br+=Vn,Ln+=4+Vn}let jn;if(_n<Rr-1)Hr=Cr[_n+1].dts-Tn.dts,jn=Cr[_n+1].pts-Tn.pts;else{const Nn=this.config,An=_n>0?Tn.dts-Cr[_n-1].dts:yn;if(jn=_n>0?Tn.pts-Cr[_n-1].pts:yn,Nn.stretchShortVideoTrack&&this.nextAudioPts!==null){const kn=Math.floor(Nn.maxBufferHole*Er),Dn=(xr?zr+xr*Er:this.nextAudioPts)-Tn.pts;Dn>kn?(Hr=Dn-An,Hr<0?Hr=An:Rn=!0,logger.log(`[mp4-remuxer]: It is approximately ${Dn/90} ms to the next segment; using duration ${Hr/90} ms for the last video frame.`)):Hr=An}else Hr=An}const Kn=Math.round(Tn.pts-Tn.dts);Bn=Math.min(Bn,Hr),Hn=Math.max(Hn,Hr),Fn=Math.min(Fn,jn),Gn=Math.max(Gn,jn),wr.push(new Mp4Sample(Tn.key,Hr,Ln,Kn))}if(wr.length){if(chromeVersion){if(chromeVersion<70){const _n=wr[0].flags;_n.dependsOn=2,_n.isNonSync=0}}else if(safariWebkitVersion&&Gn-Fn<Hn-Bn&&yn/Hn<.025&&wr[0].cts===0){logger.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let _n=Gr;for(let Tn=0,Mn=wr.length;Tn<Mn;Tn++){const Ln=_n+wr[Tn].duration,jn=_n+wr[Tn].cts;if(Tn<Mn-1){const Kn=Ln+wr[Tn+1].cts;wr[Tn].duration=Kn-jn}else wr[Tn].duration=Tn?wr[Tn-1].duration:yn;wr[Tn].cts=0,_n=Ln}}}Hr=Rn||!Hr?yn:Hr,this.nextAvcDts=Dr=qr+Hr,this.videoSampleDuration=Hr,this.isVideoContiguous=!0;const wn={data1:MP4.moof(hr.sequenceNumber++,Gr,_extends({},hr,{samples:wr})),data2:Sn,startPTS:zr/Er,endPTS:(Qr+Hr)/Er,startDTS:Gr/Er,endDTS:Dr/Er,type:"video",hasAudio:!1,hasVideo:!0,nb:wr.length,dropped:hr.dropped};return hr.samples=[],hr.dropped=0,wn}getSamplesPerFrame(hr){switch(hr.segmentCodec){case"mp3":return MPEG_AUDIO_SAMPLE_PER_FRAME;case"ac3":return AC3_SAMPLES_PER_FRAME;default:return AAC_SAMPLES_PER_FRAME}}remuxAudio(hr,gr,vr,xr,Er){const Cr=hr.inputTimeScale,wr=hr.samplerate?hr.samplerate:Cr,Rr=Cr/wr,kr=this.getSamplesPerFrame(hr),Dr=kr*Rr,Br=this._initPTS,Hr=hr.segmentCodec==="mp3"&&this.typeSupported.mpeg,Gr=[],qr=Er!==void 0;let zr=hr.samples,Qr=Hr?0:8,sn=this.nextAudioPts||-1;const hn=gr*Cr,vn=Br.baseTime*Cr/Br.timescale;if(this.isAudioContiguous=vr=vr||zr.length&&sn>0&&(xr&&Math.abs(hn-sn)<9e3||Math.abs(normalizePts(zr[0].pts-vn,hn)-sn)<20*Dr),zr.forEach(function(qn){qn.pts=normalizePts(qn.pts-vn,hn)}),!vr||sn<0){if(zr=zr.filter(qn=>qn.pts>=0),!zr.length)return;Er===0?sn=0:xr&&!qr?sn=Math.max(0,hn):sn=zr[0].pts}if(hr.segmentCodec==="aac"){const qn=this.config.maxAudioFramesDrift;for(let On=0,wn=sn;On<zr.length;On++){const _n=zr[On],Tn=_n.pts,Mn=Tn-wn,Ln=Math.abs(1e3*Mn/Cr);if(Mn<=-qn*Dr&&qr)On===0&&(logger.warn(`Audio frame @ ${(Tn/Cr).toFixed(3)}s overlaps nextAudioPts by ${Math.round(1e3*Mn/Cr)} ms.`),this.nextAudioPts=sn=wn=Tn);else if(Mn>=qn*Dr&&Ln<MAX_SILENT_FRAME_DURATION&&qr){let jn=Math.round(Mn/Dr);wn=Tn-jn*Dr,wn<0&&(jn--,wn+=Dr),On===0&&(this.nextAudioPts=sn=wn),logger.warn(`[mp4-remuxer]: Injecting ${jn} audio frame @ ${(wn/Cr).toFixed(3)}s due to ${Math.round(1e3*Mn/Cr)} ms gap.`);for(let Kn=0;Kn<jn;Kn++){const Nn=Math.max(wn,0);let An=AAC.getSilentFrame(hr.manifestCodec||hr.codec,hr.channelCount);An||(logger.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),An=_n.unit.subarray()),zr.splice(On,0,{unit:An,pts:Nn}),wn+=Dr,On++}}_n.pts=wn,wn+=Dr}}let yn=null,gn=null,bn,xn=0,$n=zr.length;for(;$n--;)xn+=zr[$n].unit.byteLength;for(let qn=0,On=zr.length;qn<On;qn++){const wn=zr[qn],_n=wn.unit;let Tn=wn.pts;if(gn!==null){const Ln=Gr[qn-1];Ln.duration=Math.round((Tn-gn)/Rr)}else if(vr&&hr.segmentCodec==="aac"&&(Tn=sn),yn=Tn,xn>0){xn+=Qr;try{bn=new Uint8Array(xn)}catch(Ln){this.observer.emit(Events.ERROR,Events.ERROR,{type:ErrorTypes.MUX_ERROR,details:ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,error:Ln,bytes:xn,reason:`fail allocating audio mdat ${xn}`});return}Hr||(new DataView(bn.buffer).setUint32(0,xn),bn.set(MP4.types.mdat,4))}else return;bn.set(_n,Qr);const Mn=_n.byteLength;Qr+=Mn,Gr.push(new Mp4Sample(!0,kr,Mn,0)),gn=Tn}const Sn=Gr.length;if(!Sn)return;const Cn=Gr[Gr.length-1];this.nextAudioPts=sn=gn+Rr*Cn.duration;const Rn=Hr?new Uint8Array(0):MP4.moof(hr.sequenceNumber++,yn/Rr,_extends({},hr,{samples:Gr}));hr.samples=[];const Bn=yn/Cr,Fn=sn/Cr,Gn={data1:Rn,data2:bn,startPTS:Bn,endPTS:Fn,startDTS:Bn,endDTS:Fn,type:"audio",hasAudio:!0,hasVideo:!1,nb:Sn};return this.isAudioContiguous=!0,Gn}remuxEmptyAudio(hr,gr,vr,xr){const Er=hr.inputTimeScale,Cr=hr.samplerate?hr.samplerate:Er,wr=Er/Cr,Rr=this.nextAudioPts,kr=this._initDTS,Dr=kr.baseTime*9e4/kr.timescale,Br=(Rr!==null?Rr:xr.startDTS*Er)+Dr,Hr=xr.endDTS*Er+Dr,Gr=wr*AAC_SAMPLES_PER_FRAME,qr=Math.ceil((Hr-Br)/Gr),zr=AAC.getSilentFrame(hr.manifestCodec||hr.codec,hr.channelCount);if(logger.warn("[mp4-remuxer]: remux empty Audio"),!zr){logger.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec");return}const Qr=[];for(let sn=0;sn<qr;sn++){const hn=Br+sn*Gr;Qr.push({unit:zr,pts:hn,dts:hn})}return hr.samples=Qr,this.remuxAudio(hr,gr,vr,!1)}}function normalizePts(mr,hr){let gr;if(hr===null)return mr;for(hr<mr?gr=-8589934592:gr=8589934592;Math.abs(mr-hr)>4294967296;)mr+=gr;return mr}function findKeyframeIndex(mr){for(let hr=0;hr<mr.length;hr++)if(mr[hr].key)return hr;return-1}function flushTextTrackMetadataCueSamples(mr,hr,gr,vr){const xr=mr.samples.length;if(!xr)return;const Er=mr.inputTimeScale;for(let wr=0;wr<xr;wr++){const Rr=mr.samples[wr];Rr.pts=normalizePts(Rr.pts-gr.baseTime*Er/gr.timescale,hr*Er)/Er,Rr.dts=normalizePts(Rr.dts-vr.baseTime*Er/vr.timescale,hr*Er)/Er}const Cr=mr.samples;return mr.samples=[],{samples:Cr}}function flushTextTrackUserdataCueSamples(mr,hr,gr){const vr=mr.samples.length;if(!vr)return;const xr=mr.inputTimeScale;for(let Cr=0;Cr<vr;Cr++){const wr=mr.samples[Cr];wr.pts=normalizePts(wr.pts-gr.baseTime*xr/gr.timescale,hr*xr)/xr}mr.samples.sort((Cr,wr)=>Cr.pts-wr.pts);const Er=mr.samples;return mr.samples=[],{samples:Er}}class Mp4Sample{constructor(hr,gr,vr,xr){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=gr,this.size=vr,this.cts=xr,this.flags={isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:hr?2:1,isNonSync:hr?0:1}}}class PassThroughRemuxer{constructor(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null}destroy(){}resetTimeStamp(hr){this.initPTS=hr,this.lastEndTime=null}resetNextTimestamp(){this.lastEndTime=null}resetInitSegment(hr,gr,vr,xr){this.audioCodec=gr,this.videoCodec=vr,this.generateInitSegment(patchEncyptionData(hr,xr)),this.emitInitSegment=!0}generateInitSegment(hr){let{audioCodec:gr,videoCodec:vr}=this;if(!(hr!=null&&hr.byteLength)){this.initTracks=void 0,this.initData=void 0;return}const xr=this.initData=parseInitSegment(hr);xr.audio&&(gr=getParsedTrackCodec(xr.audio,ElementaryStreamTypes.AUDIO)),xr.video&&(vr=getParsedTrackCodec(xr.video,ElementaryStreamTypes.VIDEO));const Er={};xr.audio&&xr.video?Er.audiovideo={container:"video/mp4",codec:gr+","+vr,initSegment:hr,id:"main"}:xr.audio?Er.audio={container:"audio/mp4",codec:gr,initSegment:hr,id:"audio"}:xr.video?Er.video={container:"video/mp4",codec:vr,initSegment:hr,id:"main"}:logger.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=Er}remux(hr,gr,vr,xr,Er,Cr){var wr,Rr;let{initPTS:kr,lastEndTime:Dr}=this;const Br={audio:void 0,video:void 0,text:xr,id3:vr,initSegment:void 0};isFiniteNumber(Dr)||(Dr=this.lastEndTime=Er||0);const Hr=gr.samples;if(!(Hr!=null&&Hr.length))return Br;const Gr={initPTS:void 0,timescale:1};let qr=this.initData;if((wr=qr)!=null&&wr.length||(this.generateInitSegment(Hr),qr=this.initData),!((Rr=qr)!=null&&Rr.length))return logger.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),Br;this.emitInitSegment&&(Gr.tracks=this.initTracks,this.emitInitSegment=!1);const zr=getDuration(Hr,qr),Qr=getStartDTS(qr,Hr),sn=Qr===null?Er:Qr;(isInvalidInitPts(kr,sn,Er,zr)||Gr.timescale!==kr.timescale&&Cr)&&(Gr.initPTS=sn-Er,kr&&kr.timescale===1&&logger.warn(`Adjusting initPTS by ${Gr.initPTS-kr.baseTime}`),this.initPTS=kr={baseTime:Gr.initPTS,timescale:1});const hn=hr?sn-kr.baseTime/kr.timescale:Dr,vn=hn+zr;offsetStartDTS(qr,Hr,kr.baseTime/kr.timescale),zr>0?this.lastEndTime=vn:(logger.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const yn=!!qr.audio,gn=!!qr.video;let bn="";yn&&(bn+="audio"),gn&&(bn+="video");const xn={data1:Hr,startPTS:hn,startDTS:hn,endPTS:vn,endDTS:vn,type:bn,hasAudio:yn,hasVideo:gn,nb:1,dropped:0};return Br.audio=xn.type==="audio"?xn:void 0,Br.video=xn.type!=="audio"?xn:void 0,Br.initSegment=Gr,Br.id3=flushTextTrackMetadataCueSamples(vr,Er,kr,kr),xr.samples.length&&(Br.text=flushTextTrackUserdataCueSamples(xr,Er,kr)),Br}}function isInvalidInitPts(mr,hr,gr,vr){if(mr===null)return!0;const xr=Math.max(vr,1),Er=hr-mr.baseTime/mr.timescale;return Math.abs(Er-gr)>xr}function getParsedTrackCodec(mr,hr){const gr=mr?.codec;if(gr&&gr.length>4)return gr;if(hr===ElementaryStreamTypes.AUDIO){if(gr==="ec-3"||gr==="ac-3"||gr==="alac")return gr;if(gr==="fLaC"||gr==="Opus")return getCodecCompatibleName(gr,!1);const vr="mp4a.40.5";return logger.info(`Parsed audio codec "${gr}" or audio object type not handled. Using "${vr}"`),vr}return logger.warn(`Unhandled video codec "${gr}"`),gr==="hvc1"||gr==="hev1"?"hvc1.1.6.L120.90":gr==="av01"?"av01.0.04M.08":"avc1.42e01e"}let now;try{now=self.performance.now.bind(self.performance)}catch{logger.debug("Unable to use Performance API on this environment"),now=optionalSelf?.Date.now}const muxConfig=[{demux:MP4Demuxer,remux:PassThroughRemuxer},{demux:TSDemuxer,remux:MP4Remuxer},{demux:AACDemuxer,remux:MP4Remuxer},{demux:MP3Demuxer,remux:MP4Remuxer}];muxConfig.splice(2,0,{demux:AC3Demuxer,remux:MP4Remuxer});class Transmuxer{constructor(hr,gr,vr,xr,Er){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=hr,this.typeSupported=gr,this.config=vr,this.vendor=xr,this.id=Er}configure(hr){this.transmuxConfig=hr,this.decrypter&&this.decrypter.reset()}push(hr,gr,vr,xr){const Er=vr.transmuxing;Er.executeStart=now();let Cr=new Uint8Array(hr);const{currentTransmuxState:wr,transmuxConfig:Rr}=this;xr&&(this.currentTransmuxState=xr);const{contiguous:kr,discontinuity:Dr,trackSwitch:Br,accurateTimeOffset:Hr,timeOffset:Gr,initSegmentChange:qr}=xr||wr,{audioCodec:zr,videoCodec:Qr,defaultInitPts:sn,duration:hn,initSegmentData:vn}=Rr,yn=getEncryptionType(Cr,gr);if(yn&&yn.method==="AES-128"){const $n=this.getDecrypter();if($n.isSync()){let Sn=$n.softwareDecrypt(Cr,yn.key.buffer,yn.iv.buffer);if(vr.part>-1&&(Sn=$n.flush()),!Sn)return Er.executeEnd=now(),emptyResult(vr);Cr=new Uint8Array(Sn)}else return this.decryptionPromise=$n.webCryptoDecrypt(Cr,yn.key.buffer,yn.iv.buffer).then(Sn=>{const Cn=this.push(Sn,null,vr);return this.decryptionPromise=null,Cn}),this.decryptionPromise}const gn=this.needsProbing(Dr,Br);if(gn){const $n=this.configureTransmuxer(Cr);if($n)return logger.warn(`[transmuxer] ${$n.message}`),this.observer.emit(Events.ERROR,Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,error:$n,reason:$n.message}),Er.executeEnd=now(),emptyResult(vr)}(Dr||Br||qr||gn)&&this.resetInitSegment(vn,zr,Qr,hn,gr),(Dr||qr||gn)&&this.resetInitialTimestamp(sn),kr||this.resetContiguity();const bn=this.transmux(Cr,yn,Gr,Hr,vr),xn=this.currentTransmuxState;return xn.contiguous=!0,xn.discontinuity=!1,xn.trackSwitch=!1,Er.executeEnd=now(),bn}flush(hr){const gr=hr.transmuxing;gr.executeStart=now();const{decrypter:vr,currentTransmuxState:xr,decryptionPromise:Er}=this;if(Er)return Er.then(()=>this.flush(hr));const Cr=[],{timeOffset:wr}=xr;if(vr){const Br=vr.flush();Br&&Cr.push(this.push(Br,null,hr))}const{demuxer:Rr,remuxer:kr}=this;if(!Rr||!kr)return gr.executeEnd=now(),[emptyResult(hr)];const Dr=Rr.flush(wr);return isPromise(Dr)?Dr.then(Br=>(this.flushRemux(Cr,Br,hr),Cr)):(this.flushRemux(Cr,Dr,hr),Cr)}flushRemux(hr,gr,vr){const{audioTrack:xr,videoTrack:Er,id3Track:Cr,textTrack:wr}=gr,{accurateTimeOffset:Rr,timeOffset:kr}=this.currentTransmuxState;logger.log(`[transmuxer.ts]: Flushed fragment ${vr.sn}${vr.part>-1?" p: "+vr.part:""} of level ${vr.level}`);const Dr=this.remuxer.remux(xr,Er,Cr,wr,kr,Rr,!0,this.id);hr.push({remuxResult:Dr,chunkMeta:vr}),vr.transmuxing.executeEnd=now()}resetInitialTimestamp(hr){const{demuxer:gr,remuxer:vr}=this;!gr||!vr||(gr.resetTimeStamp(hr),vr.resetTimeStamp(hr))}resetContiguity(){const{demuxer:hr,remuxer:gr}=this;!hr||!gr||(hr.resetContiguity(),gr.resetNextTimestamp())}resetInitSegment(hr,gr,vr,xr,Er){const{demuxer:Cr,remuxer:wr}=this;!Cr||!wr||(Cr.resetInitSegment(hr,gr,vr,xr),wr.resetInitSegment(hr,gr,vr,Er))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(hr,gr,vr,xr,Er){let Cr;return gr&&gr.method==="SAMPLE-AES"?Cr=this.transmuxSampleAes(hr,gr,vr,xr,Er):Cr=this.transmuxUnencrypted(hr,vr,xr,Er),Cr}transmuxUnencrypted(hr,gr,vr,xr){const{audioTrack:Er,videoTrack:Cr,id3Track:wr,textTrack:Rr}=this.demuxer.demux(hr,gr,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(Er,Cr,wr,Rr,gr,vr,!1,this.id),chunkMeta:xr}}transmuxSampleAes(hr,gr,vr,xr,Er){return this.demuxer.demuxSampleAes(hr,gr,vr).then(Cr=>({remuxResult:this.remuxer.remux(Cr.audioTrack,Cr.videoTrack,Cr.id3Track,Cr.textTrack,vr,xr,!1,this.id),chunkMeta:Er}))}configureTransmuxer(hr){const{config:gr,observer:vr,typeSupported:xr,vendor:Er}=this;let Cr;for(let Hr=0,Gr=muxConfig.length;Hr<Gr;Hr++){var wr;if((wr=muxConfig[Hr].demux)!=null&&wr.probe(hr)){Cr=muxConfig[Hr];break}}if(!Cr)return new Error("Failed to find demuxer by probing fragment data");const Rr=this.demuxer,kr=this.remuxer,Dr=Cr.remux,Br=Cr.demux;(!kr||!(kr instanceof Dr))&&(this.remuxer=new Dr(vr,gr,xr,Er)),(!Rr||!(Rr instanceof Br))&&(this.demuxer=new Br(vr,gr,xr),this.probe=Br.probe)}needsProbing(hr,gr){return!this.demuxer||!this.remuxer||hr||gr}getDecrypter(){let hr=this.decrypter;return hr||(hr=this.decrypter=new Decrypter(this.config)),hr}}function getEncryptionType(mr,hr){let gr=null;return mr.byteLength>0&&hr?.key!=null&&hr.iv!==null&&hr.method!=null&&(gr=hr),gr}const emptyResult=mr=>({remuxResult:{},chunkMeta:mr});function isPromise(mr){return"then"in mr&&mr.then instanceof Function}class TransmuxConfig{constructor(hr,gr,vr,xr,Er){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=hr,this.videoCodec=gr,this.initSegmentData=vr,this.duration=xr,this.defaultInitPts=Er||null}}class TransmuxState{constructor(hr,gr,vr,xr,Er,Cr){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=hr,this.contiguous=gr,this.accurateTimeOffset=vr,this.trackSwitch=xr,this.timeOffset=Er,this.initSegmentChange=Cr}}var eventemitter3={exports:{}};(function(mr){var hr=Object.prototype.hasOwnProperty,gr="~";function vr(){}Object.create&&(vr.prototype=Object.create(null),new vr().__proto__||(gr=!1));function xr(Rr,kr,Dr){this.fn=Rr,this.context=kr,this.once=Dr||!1}function Er(Rr,kr,Dr,Br,Hr){if(typeof Dr!="function")throw new TypeError("The listener must be a function");var Gr=new xr(Dr,Br||Rr,Hr),qr=gr?gr+kr:kr;return Rr._events[qr]?Rr._events[qr].fn?Rr._events[qr]=[Rr._events[qr],Gr]:Rr._events[qr].push(Gr):(Rr._events[qr]=Gr,Rr._eventsCount++),Rr}function Cr(Rr,kr){--Rr._eventsCount===0?Rr._events=new vr:delete Rr._events[kr]}function wr(){this._events=new vr,this._eventsCount=0}wr.prototype.eventNames=function(){var kr=[],Dr,Br;if(this._eventsCount===0)return kr;for(Br in Dr=this._events)hr.call(Dr,Br)&&kr.push(gr?Br.slice(1):Br);return Object.getOwnPropertySymbols?kr.concat(Object.getOwnPropertySymbols(Dr)):kr},wr.prototype.listeners=function(kr){var Dr=gr?gr+kr:kr,Br=this._events[Dr];if(!Br)return[];if(Br.fn)return[Br.fn];for(var Hr=0,Gr=Br.length,qr=new Array(Gr);Hr<Gr;Hr++)qr[Hr]=Br[Hr].fn;return qr},wr.prototype.listenerCount=function(kr){var Dr=gr?gr+kr:kr,Br=this._events[Dr];return Br?Br.fn?1:Br.length:0},wr.prototype.emit=function(kr,Dr,Br,Hr,Gr,qr){var zr=gr?gr+kr:kr;if(!this._events[zr])return!1;var Qr=this._events[zr],sn=arguments.length,hn,vn;if(Qr.fn){switch(Qr.once&&this.removeListener(kr,Qr.fn,void 0,!0),sn){case 1:return Qr.fn.call(Qr.context),!0;case 2:return Qr.fn.call(Qr.context,Dr),!0;case 3:return Qr.fn.call(Qr.context,Dr,Br),!0;case 4:return Qr.fn.call(Qr.context,Dr,Br,Hr),!0;case 5:return Qr.fn.call(Qr.context,Dr,Br,Hr,Gr),!0;case 6:return Qr.fn.call(Qr.context,Dr,Br,Hr,Gr,qr),!0}for(vn=1,hn=new Array(sn-1);vn<sn;vn++)hn[vn-1]=arguments[vn];Qr.fn.apply(Qr.context,hn)}else{var yn=Qr.length,gn;for(vn=0;vn<yn;vn++)switch(Qr[vn].once&&this.removeListener(kr,Qr[vn].fn,void 0,!0),sn){case 1:Qr[vn].fn.call(Qr[vn].context);break;case 2:Qr[vn].fn.call(Qr[vn].context,Dr);break;case 3:Qr[vn].fn.call(Qr[vn].context,Dr,Br);break;case 4:Qr[vn].fn.call(Qr[vn].context,Dr,Br,Hr);break;default:if(!hn)for(gn=1,hn=new Array(sn-1);gn<sn;gn++)hn[gn-1]=arguments[gn];Qr[vn].fn.apply(Qr[vn].context,hn)}}return!0},wr.prototype.on=function(kr,Dr,Br){return Er(this,kr,Dr,Br,!1)},wr.prototype.once=function(kr,Dr,Br){return Er(this,kr,Dr,Br,!0)},wr.prototype.removeListener=function(kr,Dr,Br,Hr){var Gr=gr?gr+kr:kr;if(!this._events[Gr])return this;if(!Dr)return Cr(this,Gr),this;var qr=this._events[Gr];if(qr.fn)qr.fn===Dr&&(!Hr||qr.once)&&(!Br||qr.context===Br)&&Cr(this,Gr);else{for(var zr=0,Qr=[],sn=qr.length;zr<sn;zr++)(qr[zr].fn!==Dr||Hr&&!qr[zr].once||Br&&qr[zr].context!==Br)&&Qr.push(qr[zr]);Qr.length?this._events[Gr]=Qr.length===1?Qr[0]:Qr:Cr(this,Gr)}return this},wr.prototype.removeAllListeners=function(kr){var Dr;return kr?(Dr=gr?gr+kr:kr,this._events[Dr]&&Cr(this,Dr)):(this._events=new vr,this._eventsCount=0),this},wr.prototype.off=wr.prototype.removeListener,wr.prototype.addListener=wr.prototype.on,wr.prefixed=gr,wr.EventEmitter=wr,mr.exports=wr})(eventemitter3);var eventemitter3Exports=eventemitter3.exports,EventEmitter=getDefaultExportFromCjs(eventemitter3Exports);class TransmuxerInterface{constructor(hr,gr,vr,xr){this.error=null,this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;const Er=hr.config;this.hls=hr,this.id=gr,this.useWorker=!!Er.enableWorker,this.onTransmuxComplete=vr,this.onFlush=xr;const Cr=(kr,Dr)=>{Dr=Dr||{},Dr.frag=this.frag,Dr.id=this.id,kr===Events.ERROR&&(this.error=Dr.error),this.hls.trigger(kr,Dr)};this.observer=new EventEmitter,this.observer.on(Events.FRAG_DECRYPTED,Cr),this.observer.on(Events.ERROR,Cr);const wr=getMediaSource(Er.preferManagedMediaSource)||{isTypeSupported:()=>!1},Rr={mpeg:wr.isTypeSupported("audio/mpeg"),mp3:wr.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:wr.isTypeSupported('audio/mp4; codecs="ac-3"')};if(this.useWorker&&typeof Worker<"u"&&(Er.workerPath||hasUMDWorker())){try{Er.workerPath?(logger.log(`loading Web Worker ${Er.workerPath} for "${gr}"`),this.workerContext=loadWorker(Er.workerPath)):(logger.log(`injecting Web Worker for "${gr}"`),this.workerContext=injectWorker()),this.onwmsg=Br=>this.onWorkerMessage(Br);const{worker:Dr}=this.workerContext;Dr.addEventListener("message",this.onwmsg),Dr.onerror=Br=>{const Hr=new Error(`${Br.message}  (${Br.filename}:${Br.lineno})`);Er.enableWorker=!1,logger.warn(`Error in "${gr}" Web Worker, fallback to inline`),this.hls.trigger(Events.ERROR,{type:ErrorTypes.OTHER_ERROR,details:ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:Hr})},Dr.postMessage({cmd:"init",typeSupported:Rr,vendor:"",id:gr,config:JSON.stringify(Er)})}catch(Dr){logger.warn(`Error setting up "${gr}" Web Worker, fallback to inline`,Dr),this.resetWorker(),this.error=null,this.transmuxer=new Transmuxer(this.observer,Rr,Er,"",gr)}return}this.transmuxer=new Transmuxer(this.observer,Rr,Er,"",gr)}resetWorker(){if(this.workerContext){const{worker:hr,objectURL:gr}=this.workerContext;gr&&self.URL.revokeObjectURL(gr),hr.removeEventListener("message",this.onwmsg),hr.onerror=null,hr.terminate(),this.workerContext=null}}destroy(){if(this.workerContext)this.resetWorker(),this.onwmsg=void 0;else{const gr=this.transmuxer;gr&&(gr.destroy(),this.transmuxer=null)}const hr=this.observer;hr&&hr.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null}push(hr,gr,vr,xr,Er,Cr,wr,Rr,kr,Dr){var Br,Hr;kr.transmuxing.start=self.performance.now();const{transmuxer:Gr}=this,qr=Cr?Cr.start:Er.start,zr=Er.decryptdata,Qr=this.frag,sn=!(Qr&&Er.cc===Qr.cc),hn=!(Qr&&kr.level===Qr.level),vn=Qr?kr.sn-Qr.sn:-1,yn=this.part?kr.part-this.part.index:-1,gn=vn===0&&kr.id>1&&kr.id===Qr?.stats.chunkCount,bn=!hn&&(vn===1||vn===0&&(yn===1||gn&&yn<=0)),xn=self.performance.now();(hn||vn||Er.stats.parsing.start===0)&&(Er.stats.parsing.start=xn),Cr&&(yn||!bn)&&(Cr.stats.parsing.start=xn);const $n=!(Qr&&((Br=Er.initSegment)==null?void 0:Br.url)===((Hr=Qr.initSegment)==null?void 0:Hr.url)),Sn=new TransmuxState(sn,bn,Rr,hn,qr,$n);if(!bn||sn||$n){logger.log(`[transmuxer-interface, ${Er.type}]: Starting new transmux session for sn: ${kr.sn} p: ${kr.part} level: ${kr.level} id: ${kr.id}
        discontinuity: ${sn}
        trackSwitch: ${hn}
        contiguous: ${bn}
        accurateTimeOffset: ${Rr}
        timeOffset: ${qr}
        initSegmentChange: ${$n}`);const Cn=new TransmuxConfig(vr,xr,gr,wr,Dr);this.configureTransmuxer(Cn)}if(this.frag=Er,this.part=Cr,this.workerContext)this.workerContext.worker.postMessage({cmd:"demux",data:hr,decryptdata:zr,chunkMeta:kr,state:Sn},hr instanceof ArrayBuffer?[hr]:[]);else if(Gr){const Cn=Gr.push(hr,zr,kr,Sn);isPromise(Cn)?(Gr.async=!0,Cn.then(Rn=>{this.handleTransmuxComplete(Rn)}).catch(Rn=>{this.transmuxerError(Rn,kr,"transmuxer-interface push error")})):(Gr.async=!1,this.handleTransmuxComplete(Cn))}}flush(hr){hr.transmuxing.start=self.performance.now();const{transmuxer:gr}=this;if(this.workerContext)this.workerContext.worker.postMessage({cmd:"flush",chunkMeta:hr});else if(gr){let vr=gr.flush(hr);isPromise(vr)||gr.async?(isPromise(vr)||(vr=Promise.resolve(vr)),vr.then(Er=>{this.handleFlushResult(Er,hr)}).catch(Er=>{this.transmuxerError(Er,hr,"transmuxer-interface flush error")})):this.handleFlushResult(vr,hr)}}transmuxerError(hr,gr,vr){this.hls&&(this.error=hr,this.hls.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.FRAG_PARSING_ERROR,chunkMeta:gr,frag:this.frag||void 0,fatal:!1,error:hr,err:hr,reason:vr}))}handleFlushResult(hr,gr){hr.forEach(vr=>{this.handleTransmuxComplete(vr)}),this.onFlush(gr)}onWorkerMessage(hr){const gr=hr.data;if(!(gr!=null&&gr.event)){logger.warn(`worker message received with no ${gr?"event name":"data"}`);return}const vr=this.hls;if(this.hls)switch(gr.event){case"init":{var xr;const Er=(xr=this.workerContext)==null?void 0:xr.objectURL;Er&&self.URL.revokeObjectURL(Er);break}case"transmuxComplete":{this.handleTransmuxComplete(gr.data);break}case"flush":{this.onFlush(gr.data);break}case"workerLog":logger[gr.data.logType]&&logger[gr.data.logType](gr.data.message);break;default:{gr.data=gr.data||{},gr.data.frag=this.frag,gr.data.id=this.id,vr.trigger(gr.event,gr.data);break}}}configureTransmuxer(hr){const{transmuxer:gr}=this;this.workerContext?this.workerContext.worker.postMessage({cmd:"configure",config:hr}):gr&&gr.configure(hr)}handleTransmuxComplete(hr){hr.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(hr)}}function subtitleOptionsIdentical(mr,hr){if(mr.length!==hr.length)return!1;for(let gr=0;gr<mr.length;gr++)if(!mediaAttributesIdentical(mr[gr].attrs,hr[gr].attrs))return!1;return!0}function mediaAttributesIdentical(mr,hr,gr){const vr=mr["STABLE-RENDITION-ID"];return vr&&!gr?vr===hr["STABLE-RENDITION-ID"]:!(gr||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(xr=>mr[xr]!==hr[xr])}function subtitleTrackMatchesTextTrack(mr,hr){return hr.label.toLowerCase()===mr.name.toLowerCase()&&(!hr.language||hr.language.toLowerCase()===(mr.lang||"").toLowerCase())}const TICK_INTERVAL$2=100;class AudioStreamController extends BaseStreamController{constructor(hr,gr,vr){super(hr,gr,vr,"[audio-stream-controller]",PlaylistLevelType.AUDIO),this.videoBuffer=null,this.videoTrackCC=-1,this.waitingVideoCC=-1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null,this.bufferedTrack=null,this.switchingTrack=null}_registerListeners(){const{hls:hr}=this;hr.on(Events.MEDIA_ATTACHED,this.onMediaAttached,this),hr.on(Events.MEDIA_DETACHING,this.onMediaDetaching,this),hr.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),hr.on(Events.LEVEL_LOADED,this.onLevelLoaded,this),hr.on(Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),hr.on(Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),hr.on(Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),hr.on(Events.ERROR,this.onError,this),hr.on(Events.BUFFER_RESET,this.onBufferReset,this),hr.on(Events.BUFFER_CREATED,this.onBufferCreated,this),hr.on(Events.BUFFER_FLUSHING,this.onBufferFlushing,this),hr.on(Events.BUFFER_FLUSHED,this.onBufferFlushed,this),hr.on(Events.INIT_PTS_FOUND,this.onInitPtsFound,this),hr.on(Events.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:hr}=this;hr.off(Events.MEDIA_ATTACHED,this.onMediaAttached,this),hr.off(Events.MEDIA_DETACHING,this.onMediaDetaching,this),hr.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),hr.off(Events.LEVEL_LOADED,this.onLevelLoaded,this),hr.off(Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),hr.off(Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),hr.off(Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),hr.off(Events.ERROR,this.onError,this),hr.off(Events.BUFFER_RESET,this.onBufferReset,this),hr.off(Events.BUFFER_CREATED,this.onBufferCreated,this),hr.off(Events.BUFFER_FLUSHING,this.onBufferFlushing,this),hr.off(Events.BUFFER_FLUSHED,this.onBufferFlushed,this),hr.off(Events.INIT_PTS_FOUND,this.onInitPtsFound,this),hr.off(Events.FRAG_BUFFERED,this.onFragBuffered,this)}onInitPtsFound(hr,{frag:gr,id:vr,initPTS:xr,timescale:Er}){if(vr==="main"){const Cr=gr.cc;this.initPTS[gr.cc]={baseTime:xr,timescale:Er},this.log(`InitPTS for cc: ${Cr} found from main: ${xr}`),this.videoTrackCC=Cr,this.state===State.WAITING_INIT_PTS&&this.tick()}}startLoad(hr){if(!this.levels){this.startPosition=hr,this.state=State.STOPPED;return}const gr=this.lastCurrentTime;this.stopLoad(),this.setInterval(TICK_INTERVAL$2),gr>0&&hr===-1?(this.log(`Override startPosition with lastCurrentTime @${gr.toFixed(3)}`),hr=gr,this.state=State.IDLE):(this.loadedmetadata=!1,this.state=State.WAITING_TRACK),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=hr,this.tick()}doTick(){switch(this.state){case State.IDLE:this.doTickIdle();break;case State.WAITING_TRACK:{var hr;const{levels:vr,trackId:xr}=this,Er=vr==null||(hr=vr[xr])==null?void 0:hr.details;if(Er){if(this.waitForCdnTuneIn(Er))break;this.state=State.WAITING_INIT_PTS}break}case State.FRAG_LOADING_WAITING_RETRY:{var gr;const vr=performance.now(),xr=this.retryDate;if(!xr||vr>=xr||(gr=this.media)!=null&&gr.seeking){const{levels:Er,trackId:Cr}=this;this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(Er?.[Cr]||null),this.state=State.IDLE}break}case State.WAITING_INIT_PTS:{const vr=this.waitingData;if(vr){const{frag:xr,part:Er,cache:Cr,complete:wr}=vr;if(this.initPTS[xr.cc]!==void 0){this.waitingData=null,this.waitingVideoCC=-1,this.state=State.FRAG_LOADING;const Rr=Cr.flush(),kr={frag:xr,part:Er,payload:Rr,networkDetails:null};this._handleFragmentLoadProgress(kr),wr&&super._handleFragmentLoadComplete(kr)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log(`Waiting fragment cc (${xr.cc}) cancelled because video is at cc ${this.videoTrackCC}`),this.clearWaitingFragment();else{const Rr=this.getLoadPosition(),kr=BufferHelper.bufferInfo(this.mediaBuffer,Rr,this.config.maxBufferHole);fragmentWithinToleranceTest(kr.end,this.config.maxFragLookUpTolerance,xr)<0&&(this.log(`Waiting fragment cc (${xr.cc}) @ ${xr.start} cancelled because another fragment at ${kr.end} is needed`),this.clearWaitingFragment())}}else this.state=State.IDLE}}this.onTickEnd()}clearWaitingFragment(){const hr=this.waitingData;hr&&(this.fragmentTracker.removeFragment(hr.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=State.IDLE)}resetLoadingState(){this.clearWaitingFragment(),super.resetLoadingState()}onTickEnd(){const{media:hr}=this;hr!=null&&hr.readyState&&(this.lastCurrentTime=hr.currentTime)}doTickIdle(){const{hls:hr,levels:gr,media:vr,trackId:xr}=this,Er=hr.config;if(!this.buffering||!vr&&(this.startFragRequested||!Er.startFragPrefetch)||!(gr!=null&&gr[xr]))return;const Cr=gr[xr],wr=Cr.details;if(!wr||wr.live&&this.levelLastLoaded!==Cr||this.waitForCdnTuneIn(wr)){this.state=State.WAITING_TRACK;return}const Rr=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&Rr&&(this.bufferFlushed=!1,this.afterBufferFlushed(Rr,ElementaryStreamTypes.AUDIO,PlaylistLevelType.AUDIO));const kr=this.getFwdBufferInfo(Rr,PlaylistLevelType.AUDIO);if(kr===null)return;const{bufferedTrack:Dr,switchingTrack:Br}=this;if(!Br&&this._streamEnded(kr,wr)){hr.trigger(Events.BUFFER_EOS,{type:"audio"}),this.state=State.ENDED;return}const Hr=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,PlaylistLevelType.MAIN),Gr=kr.len,qr=this.getMaxBufferLength(Hr?.len),zr=wr.fragments,Qr=zr[0].start;let sn=this.flushing?this.getLoadPosition():kr.end;if(Br&&vr){const gn=this.getLoadPosition();Dr&&!mediaAttributesIdentical(Br.attrs,Dr.attrs)&&(sn=gn),wr.PTSKnown&&gn<Qr&&(kr.end>Qr||kr.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),vr.currentTime=Qr+.05)}if(Gr>=qr&&!Br&&sn<zr[zr.length-1].start)return;let hn=this.getNextFragment(sn,wr),vn=!1;if(hn&&this.isLoopLoading(hn,sn)&&(vn=!!hn.gap,hn=this.getNextFragmentLoopLoading(hn,wr,kr,PlaylistLevelType.MAIN,qr)),!hn){this.bufferFlushed=!0;return}const yn=Hr&&hn.start>Hr.end+wr.targetduration;if(yn||!(Hr!=null&&Hr.len)&&kr.len){const gn=this.getAppendedFrag(hn.start,PlaylistLevelType.MAIN);if(gn===null||(vn||(vn=!!gn.gap||!!yn&&Hr.len===0),yn&&!vn||vn&&kr.nextStart&&kr.nextStart<gn.end))return}this.loadFragment(hn,Cr,sn)}getMaxBufferLength(hr){const gr=super.getMaxBufferLength();return hr?Math.min(Math.max(gr,hr),this.config.maxMaxBufferLength):gr}onMediaDetaching(){this.videoBuffer=null,this.bufferFlushed=this.flushing=!1,super.onMediaDetaching()}onAudioTracksUpdated(hr,{audioTracks:gr}){this.resetTransmuxer(),this.levels=gr.map(vr=>new Level(vr))}onAudioTrackSwitching(hr,gr){const vr=!!gr.url;this.trackId=gr.id;const{fragCurrent:xr}=this;xr&&(xr.abortRequests(),this.removeUnbufferedFrags(xr.start)),this.resetLoadingState(),vr?this.setInterval(TICK_INTERVAL$2):this.resetTransmuxer(),vr?(this.switchingTrack=gr,this.state=State.IDLE,this.flushAudioIfNeeded(gr)):(this.switchingTrack=null,this.bufferedTrack=gr,this.state=State.STOPPED),this.tick()}onManifestLoading(){this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=this.flushing=!1,this.levels=this.mainDetails=this.waitingData=this.bufferedTrack=this.cachedTrackLoadedData=this.switchingTrack=null,this.startFragRequested=!1,this.trackId=this.videoTrackCC=this.waitingVideoCC=-1}onLevelLoaded(hr,gr){this.mainDetails=gr.details,this.cachedTrackLoadedData!==null&&(this.hls.trigger(Events.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)}onAudioTrackLoaded(hr,gr){var vr;if(this.mainDetails==null){this.cachedTrackLoadedData=gr;return}const{levels:xr}=this,{details:Er,id:Cr}=gr;if(!xr){this.warn(`Audio tracks were reset while loading level ${Cr}`);return}this.log(`Audio track ${Cr} loaded [${Er.startSN},${Er.endSN}]${Er.lastPartSn?`[part-${Er.lastPartSn}-${Er.lastPartIndex}]`:""},duration:${Er.totalduration}`);const wr=xr[Cr];let Rr=0;if(Er.live||(vr=wr.details)!=null&&vr.live){this.checkLiveUpdate(Er);const Dr=this.mainDetails;if(Er.deltaUpdateFailed||!Dr)return;if(!wr.details&&Er.hasProgramDateTime&&Dr.hasProgramDateTime)alignMediaPlaylistByPDT(Er,Dr),Rr=Er.fragments[0].start;else{var kr;Rr=this.alignPlaylists(Er,wr.details,(kr=this.levelLastLoaded)==null?void 0:kr.details)}}wr.details=Er,this.levelLastLoaded=wr,!this.startFragRequested&&(this.mainDetails||!Er.live)&&this.setStartPosition(this.mainDetails||Er,Rr),this.state===State.WAITING_TRACK&&!this.waitForCdnTuneIn(Er)&&(this.state=State.IDLE),this.tick()}_handleFragmentLoadProgress(hr){var gr;const{frag:vr,part:xr,payload:Er}=hr,{config:Cr,trackId:wr,levels:Rr}=this;if(!Rr){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${vr.sn} of level ${vr.level} will not be buffered`);return}const kr=Rr[wr];if(!kr){this.warn("Audio track is undefined on fragment load progress");return}const Dr=kr.details;if(!Dr){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(vr.start);return}const Br=Cr.defaultAudioCodec||kr.audioCodec||"mp4a.40.2";let Hr=this.transmuxer;Hr||(Hr=this.transmuxer=new TransmuxerInterface(this.hls,PlaylistLevelType.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const Gr=this.initPTS[vr.cc],qr=(gr=vr.initSegment)==null?void 0:gr.data;if(Gr!==void 0){const Qr=xr?xr.index:-1,sn=Qr!==-1,hn=new ChunkMetadata(vr.level,vr.sn,vr.stats.chunkCount,Er.byteLength,Qr,sn);Hr.push(Er,qr,Br,"",vr,xr,Dr.totalduration,!1,hn,Gr)}else{this.log(`Unknown video PTS for cc ${vr.cc}, waiting for video PTS before demuxing audio frag ${vr.sn} of [${Dr.startSN} ,${Dr.endSN}],track ${wr}`);const{cache:zr}=this.waitingData=this.waitingData||{frag:vr,part:xr,cache:new ChunkCache,complete:!1};zr.push(new Uint8Array(Er)),this.waitingVideoCC=this.videoTrackCC,this.state=State.WAITING_INIT_PTS}}_handleFragmentLoadComplete(hr){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(hr)}onBufferReset(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1}onBufferCreated(hr,gr){const vr=gr.tracks.audio;vr&&(this.mediaBuffer=vr.buffer||null),gr.tracks.video&&(this.videoBuffer=gr.tracks.video.buffer||null)}onFragBuffered(hr,gr){const{frag:vr,part:xr}=gr;if(vr.type!==PlaylistLevelType.AUDIO){if(!this.loadedmetadata&&vr.type===PlaylistLevelType.MAIN){const Er=this.videoBuffer||this.media;Er&&BufferHelper.getBuffered(Er).length&&(this.loadedmetadata=!0)}return}if(this.fragContextChanged(vr)){this.warn(`Fragment ${vr.sn}${xr?" p: "+xr.index:""} of level ${vr.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(vr.sn!=="initSegment"){this.fragPrevious=vr;const Er=this.switchingTrack;Er&&(this.bufferedTrack=Er,this.switchingTrack=null,this.hls.trigger(Events.AUDIO_TRACK_SWITCHED,_objectSpread2({},Er)))}this.fragBufferedComplete(vr,xr)}onError(hr,gr){var vr;if(gr.fatal){this.state=State.ERROR;return}switch(gr.details){case ErrorDetails.FRAG_GAP:case ErrorDetails.FRAG_PARSING_ERROR:case ErrorDetails.FRAG_DECRYPT_ERROR:case ErrorDetails.FRAG_LOAD_ERROR:case ErrorDetails.FRAG_LOAD_TIMEOUT:case ErrorDetails.KEY_LOAD_ERROR:case ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(PlaylistLevelType.AUDIO,gr);break;case ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case ErrorDetails.LEVEL_PARSING_ERROR:!gr.levelRetry&&this.state===State.WAITING_TRACK&&((vr=gr.context)==null?void 0:vr.type)===PlaylistContextType.AUDIO_TRACK&&(this.state=State.IDLE);break;case ErrorDetails.BUFFER_APPEND_ERROR:case ErrorDetails.BUFFER_FULL_ERROR:if(!gr.parent||gr.parent!=="audio")return;if(gr.details===ErrorDetails.BUFFER_APPEND_ERROR){this.resetLoadingState();return}this.reduceLengthAndFlushBuffer(gr)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case ErrorDetails.INTERNAL_EXCEPTION:this.recoverWorkerError(gr);break}}onBufferFlushing(hr,{type:gr}){gr!==ElementaryStreamTypes.VIDEO&&(this.flushing=!0)}onBufferFlushed(hr,{type:gr}){if(gr!==ElementaryStreamTypes.VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===State.ENDED&&(this.state=State.IDLE);const vr=this.mediaBuffer||this.media;vr&&(this.afterBufferFlushed(vr,gr,PlaylistLevelType.AUDIO),this.tick())}}_handleTransmuxComplete(hr){var gr;const vr="audio",{hls:xr}=this,{remuxResult:Er,chunkMeta:Cr}=hr,wr=this.getCurrentContext(Cr);if(!wr){this.resetWhenMissingContext(Cr);return}const{frag:Rr,part:kr,level:Dr}=wr,{details:Br}=Dr,{audio:Hr,text:Gr,id3:qr,initSegment:zr}=Er;if(this.fragContextChanged(Rr)||!Br){this.fragmentTracker.removeFragment(Rr);return}if(this.state=State.PARSING,this.switchingTrack&&Hr&&this.completeAudioSwitch(this.switchingTrack),zr!=null&&zr.tracks){const Qr=Rr.initSegment||Rr;this._bufferInitSegment(Dr,zr.tracks,Qr,Cr),xr.trigger(Events.FRAG_PARSING_INIT_SEGMENT,{frag:Qr,id:vr,tracks:zr.tracks})}if(Hr){const{startPTS:Qr,endPTS:sn,startDTS:hn,endDTS:vn}=Hr;kr&&(kr.elementaryStreams[ElementaryStreamTypes.AUDIO]={startPTS:Qr,endPTS:sn,startDTS:hn,endDTS:vn}),Rr.setElementaryStreamInfo(ElementaryStreamTypes.AUDIO,Qr,sn,hn,vn),this.bufferFragmentData(Hr,Rr,kr,Cr)}if(qr!=null&&(gr=qr.samples)!=null&&gr.length){const Qr=_extends({id:vr,frag:Rr,details:Br},qr);xr.trigger(Events.FRAG_PARSING_METADATA,Qr)}if(Gr){const Qr=_extends({id:vr,frag:Rr,details:Br},Gr);xr.trigger(Events.FRAG_PARSING_USERDATA,Qr)}}_bufferInitSegment(hr,gr,vr,xr){if(this.state!==State.PARSING)return;gr.video&&delete gr.video;const Er=gr.audio;if(!Er)return;Er.id="audio";const Cr=hr.audioCodec;this.log(`Init audio buffer, container:${Er.container}, codecs[level/parsed]=[${Cr}/${Er.codec}]`),Cr&&Cr.split(",").length===1&&(Er.levelCodec=Cr),this.hls.trigger(Events.BUFFER_CODECS,gr);const wr=Er.initSegment;if(wr!=null&&wr.byteLength){const Rr={type:"audio",frag:vr,part:null,chunkMeta:xr,parent:vr.type,data:wr};this.hls.trigger(Events.BUFFER_APPENDING,Rr)}this.tickImmediate()}loadFragment(hr,gr,vr){const xr=this.fragmentTracker.getState(hr);if(this.fragCurrent=hr,this.switchingTrack||xr===FragmentState.NOT_LOADED||xr===FragmentState.PARTIAL){var Er;if(hr.sn==="initSegment")this._loadInitSegment(hr,gr);else if((Er=gr.details)!=null&&Er.live&&!this.initPTS[hr.cc]){this.log(`Waiting for video PTS in continuity counter ${hr.cc} of live stream before loading audio fragment ${hr.sn} of level ${this.trackId}`),this.state=State.WAITING_INIT_PTS;const Cr=this.mainDetails;Cr&&Cr.fragments[0].start!==gr.details.fragments[0].start&&alignMediaPlaylistByPDT(gr.details,Cr)}else this.startFragRequested=!0,super.loadFragment(hr,gr,vr)}else this.clearTrackerIfNeeded(hr)}flushAudioIfNeeded(hr){const{media:gr,bufferedTrack:vr}=this,xr=vr?.attrs,Er=hr.attrs;gr&&xr&&(xr.CHANNELS!==Er.CHANNELS||vr.name!==hr.name||vr.lang!==hr.lang)&&(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null)}completeAudioSwitch(hr){const{hls:gr}=this;this.flushAudioIfNeeded(hr),this.bufferedTrack=hr,this.switchingTrack=null,gr.trigger(Events.AUDIO_TRACK_SWITCHED,_objectSpread2({},hr))}}class AudioTrackController extends BasePlaylistController{constructor(hr){super(hr,"[audio-track-controller]"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:hr}=this;hr.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),hr.on(Events.MANIFEST_PARSED,this.onManifestParsed,this),hr.on(Events.LEVEL_LOADING,this.onLevelLoading,this),hr.on(Events.LEVEL_SWITCHING,this.onLevelSwitching,this),hr.on(Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),hr.on(Events.ERROR,this.onError,this)}unregisterListeners(){const{hls:hr}=this;hr.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),hr.off(Events.MANIFEST_PARSED,this.onManifestParsed,this),hr.off(Events.LEVEL_LOADING,this.onLevelLoading,this),hr.off(Events.LEVEL_SWITCHING,this.onLevelSwitching,this),hr.off(Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),hr.off(Events.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(hr,gr){this.tracks=gr.audioTracks||[]}onAudioTrackLoaded(hr,gr){const{id:vr,groupId:xr,details:Er}=gr,Cr=this.tracksInGroup[vr];if(!Cr||Cr.groupId!==xr){this.warn(`Audio track with id:${vr} and group:${xr} not found in active group ${Cr?.groupId}`);return}const wr=Cr.details;Cr.details=gr.details,this.log(`Audio track ${vr} "${Cr.name}" lang:${Cr.lang} group:${xr} loaded [${Er.startSN}-${Er.endSN}]`),vr===this.trackId&&this.playlistLoaded(vr,gr,wr)}onLevelLoading(hr,gr){this.switchLevel(gr.level)}onLevelSwitching(hr,gr){this.switchLevel(gr.level)}switchLevel(hr){const gr=this.hls.levels[hr];if(!gr)return;const vr=gr.audioGroups||null,xr=this.groupIds;let Er=this.currentTrack;if(!vr||xr?.length!==vr?.length||vr!=null&&vr.some(wr=>xr?.indexOf(wr)===-1)){this.groupIds=vr,this.trackId=-1,this.currentTrack=null;const wr=this.tracks.filter(Hr=>!vr||vr.indexOf(Hr.groupId)!==-1);if(wr.length)this.selectDefaultTrack&&!wr.some(Hr=>Hr.default)&&(this.selectDefaultTrack=!1),wr.forEach((Hr,Gr)=>{Hr.id=Gr});else if(!Er&&!this.tracksInGroup.length)return;this.tracksInGroup=wr;const Rr=this.hls.config.audioPreference;if(!Er&&Rr){const Hr=findMatchingOption(Rr,wr,audioMatchPredicate);if(Hr>-1)Er=wr[Hr];else{const Gr=findMatchingOption(Rr,this.tracks);Er=this.tracks[Gr]}}let kr=this.findTrackId(Er);kr===-1&&Er&&(kr=this.findTrackId(null));const Dr={audioTracks:wr};this.log(`Updating audio tracks, ${wr.length} track(s) found in group(s): ${vr?.join(",")}`),this.hls.trigger(Events.AUDIO_TRACKS_UPDATED,Dr);const Br=this.trackId;if(kr!==-1&&Br===-1)this.setAudioTrack(kr);else if(wr.length&&Br===-1){var Cr;const Hr=new Error(`No audio track selected for current audio group-ID(s): ${(Cr=this.groupIds)==null?void 0:Cr.join(",")} track count: ${wr.length}`);this.warn(Hr.message),this.hls.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:Hr})}}else this.shouldReloadPlaylist(Er)&&this.setAudioTrack(this.trackId)}onError(hr,gr){gr.fatal||!gr.context||gr.context.type===PlaylistContextType.AUDIO_TRACK&&gr.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(gr.context.groupId)!==-1)&&(this.requestScheduled=-1,this.checkRetry(gr))}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(hr){this.selectDefaultTrack=!1,this.setAudioTrack(hr)}setAudioOption(hr){const gr=this.hls;if(gr.config.audioPreference=hr,hr){const vr=this.allAudioTracks;if(this.selectDefaultTrack=!1,vr.length){const xr=this.currentTrack;if(xr&&matchesOption(hr,xr,audioMatchPredicate))return xr;const Er=findMatchingOption(hr,this.tracksInGroup,audioMatchPredicate);if(Er>-1){const Cr=this.tracksInGroup[Er];return this.setAudioTrack(Er),Cr}else if(xr){let Cr=gr.loadLevel;Cr===-1&&(Cr=gr.firstAutoLevel);const wr=findClosestLevelWithAudioGroup(hr,gr.levels,vr,Cr,audioMatchPredicate);if(wr===-1)return null;gr.nextLoadLevel=wr}if(hr.channels||hr.audioCodec){const Cr=findMatchingOption(hr,vr);if(Cr>-1)return vr[Cr]}}}return null}setAudioTrack(hr){const gr=this.tracksInGroup;if(hr<0||hr>=gr.length){this.warn(`Invalid audio track id: ${hr}`);return}this.clearTimer(),this.selectDefaultTrack=!1;const vr=this.currentTrack,xr=gr[hr],Er=xr.details&&!xr.details.live;if(hr===this.trackId&&xr===vr&&Er||(this.log(`Switching to audio-track ${hr} "${xr.name}" lang:${xr.lang} group:${xr.groupId} channels:${xr.channels}`),this.trackId=hr,this.currentTrack=xr,this.hls.trigger(Events.AUDIO_TRACK_SWITCHING,_objectSpread2({},xr)),Er))return;const Cr=this.switchParams(xr.url,vr?.details,xr.details);this.loadPlaylist(Cr)}findTrackId(hr){const gr=this.tracksInGroup;for(let vr=0;vr<gr.length;vr++){const xr=gr[vr];if(!(this.selectDefaultTrack&&!xr.default)&&(!hr||matchesOption(hr,xr,audioMatchPredicate)))return vr}if(hr){const{name:vr,lang:xr,assocLang:Er,characteristics:Cr,audioCodec:wr,channels:Rr}=hr;for(let kr=0;kr<gr.length;kr++){const Dr=gr[kr];if(matchesOption({name:vr,lang:xr,assocLang:Er,characteristics:Cr,audioCodec:wr,channels:Rr},Dr,audioMatchPredicate))return kr}for(let kr=0;kr<gr.length;kr++){const Dr=gr[kr];if(mediaAttributesIdentical(hr.attrs,Dr.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return kr}for(let kr=0;kr<gr.length;kr++){const Dr=gr[kr];if(mediaAttributesIdentical(hr.attrs,Dr.attrs,["LANGUAGE"]))return kr}}return-1}loadPlaylist(hr){const gr=this.currentTrack;if(this.shouldLoadPlaylist(gr)&&gr){super.loadPlaylist();const vr=gr.id,xr=gr.groupId;let Er=gr.url;if(hr)try{Er=hr.addDirectives(Er)}catch(Cr){this.warn(`Could not construct new URL with HLS Delivery Directives: ${Cr}`)}this.log(`loading audio-track playlist ${vr} "${gr.name}" lang:${gr.lang} group:${xr}`),this.clearTimer(),this.hls.trigger(Events.AUDIO_TRACK_LOADING,{url:Er,id:vr,groupId:xr,deliveryDirectives:hr||null})}}}const TICK_INTERVAL$1=500;class SubtitleStreamController extends BaseStreamController{constructor(hr,gr,vr){super(hr,gr,vr,"[subtitle-stream-controller]",PlaylistLevelType.SUBTITLE),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}_registerListeners(){const{hls:hr}=this;hr.on(Events.MEDIA_ATTACHED,this.onMediaAttached,this),hr.on(Events.MEDIA_DETACHING,this.onMediaDetaching,this),hr.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),hr.on(Events.LEVEL_LOADED,this.onLevelLoaded,this),hr.on(Events.ERROR,this.onError,this),hr.on(Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),hr.on(Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),hr.on(Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),hr.on(Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),hr.on(Events.BUFFER_FLUSHING,this.onBufferFlushing,this),hr.on(Events.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:hr}=this;hr.off(Events.MEDIA_ATTACHED,this.onMediaAttached,this),hr.off(Events.MEDIA_DETACHING,this.onMediaDetaching,this),hr.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),hr.off(Events.LEVEL_LOADED,this.onLevelLoaded,this),hr.off(Events.ERROR,this.onError,this),hr.off(Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),hr.off(Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),hr.off(Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),hr.off(Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),hr.off(Events.BUFFER_FLUSHING,this.onBufferFlushing,this),hr.off(Events.FRAG_BUFFERED,this.onFragBuffered,this)}startLoad(hr){this.stopLoad(),this.state=State.IDLE,this.setInterval(TICK_INTERVAL$1),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=hr,this.tick()}onManifestLoading(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()}onMediaDetaching(){this.tracksBuffered=[],super.onMediaDetaching()}onLevelLoaded(hr,gr){this.mainDetails=gr.details}onSubtitleFragProcessed(hr,gr){const{frag:vr,success:xr}=gr;if(this.fragPrevious=vr,this.state=State.IDLE,!xr)return;const Er=this.tracksBuffered[this.currentTrackId];if(!Er)return;let Cr;const wr=vr.start;for(let kr=0;kr<Er.length;kr++)if(wr>=Er[kr].start&&wr<=Er[kr].end){Cr=Er[kr];break}const Rr=vr.start+vr.duration;Cr?Cr.end=Rr:(Cr={start:wr,end:Rr},Er.push(Cr)),this.fragmentTracker.fragBuffered(vr),this.fragBufferedComplete(vr,null)}onBufferFlushing(hr,gr){const{startOffset:vr,endOffset:xr}=gr;if(vr===0&&xr!==Number.POSITIVE_INFINITY){const Er=xr-1;if(Er<=0)return;gr.endOffsetSubtitles=Math.max(0,Er),this.tracksBuffered.forEach(Cr=>{for(let wr=0;wr<Cr.length;){if(Cr[wr].end<=Er){Cr.shift();continue}else if(Cr[wr].start<Er)Cr[wr].start=Er;else break;wr++}}),this.fragmentTracker.removeFragmentsInRange(vr,Er,PlaylistLevelType.SUBTITLE)}}onFragBuffered(hr,gr){if(!this.loadedmetadata&&gr.frag.type===PlaylistLevelType.MAIN){var vr;(vr=this.media)!=null&&vr.buffered.length&&(this.loadedmetadata=!0)}}onError(hr,gr){const vr=gr.frag;vr?.type===PlaylistLevelType.SUBTITLE&&(gr.details===ErrorDetails.FRAG_GAP&&this.fragmentTracker.fragBuffered(vr,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==State.STOPPED&&(this.state=State.IDLE))}onSubtitleTracksUpdated(hr,{subtitleTracks:gr}){if(this.levels&&subtitleOptionsIdentical(this.levels,gr)){this.levels=gr.map(vr=>new Level(vr));return}this.tracksBuffered=[],this.levels=gr.map(vr=>{const xr=new Level(vr);return this.tracksBuffered[xr.id]=[],xr}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,PlaylistLevelType.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(hr,gr){var vr;if(this.currentTrackId=gr.id,!((vr=this.levels)!=null&&vr.length)||this.currentTrackId===-1){this.clearInterval();return}const xr=this.levels[this.currentTrackId];xr!=null&&xr.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,xr&&this.setInterval(TICK_INTERVAL$1)}onSubtitleTrackLoaded(hr,gr){var vr;const{currentTrackId:xr,levels:Er}=this,{details:Cr,id:wr}=gr;if(!Er){this.warn(`Subtitle tracks were reset while loading level ${wr}`);return}const Rr=Er[wr];if(wr>=Er.length||!Rr)return;this.log(`Subtitle track ${wr} loaded [${Cr.startSN},${Cr.endSN}]${Cr.lastPartSn?`[part-${Cr.lastPartSn}-${Cr.lastPartIndex}]`:""},duration:${Cr.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let kr=0;if(Cr.live||(vr=Rr.details)!=null&&vr.live){const Br=this.mainDetails;if(Cr.deltaUpdateFailed||!Br)return;const Hr=Br.fragments[0];if(!Rr.details)Cr.hasProgramDateTime&&Br.hasProgramDateTime?(alignMediaPlaylistByPDT(Cr,Br),kr=Cr.fragments[0].start):Hr&&(kr=Hr.start,addSliding(Cr,kr));else{var Dr;kr=this.alignPlaylists(Cr,Rr.details,(Dr=this.levelLastLoaded)==null?void 0:Dr.details),kr===0&&Hr&&(kr=Hr.start,addSliding(Cr,kr))}}Rr.details=Cr,this.levelLastLoaded=Rr,wr===xr&&(!this.startFragRequested&&(this.mainDetails||!Cr.live)&&this.setStartPosition(this.mainDetails||Cr,kr),this.tick(),Cr.live&&!this.fragCurrent&&this.media&&this.state===State.IDLE&&(findFragmentByPTS(null,Cr.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),Rr.details=void 0)))}_handleFragmentLoadComplete(hr){const{frag:gr,payload:vr}=hr,xr=gr.decryptdata,Er=this.hls;if(!this.fragContextChanged(gr)&&vr&&vr.byteLength>0&&xr!=null&&xr.key&&xr.iv&&xr.method==="AES-128"){const Cr=performance.now();this.decrypter.decrypt(new Uint8Array(vr),xr.key.buffer,xr.iv.buffer).catch(wr=>{throw Er.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!1,error:wr,reason:wr.message,frag:gr}),wr}).then(wr=>{const Rr=performance.now();Er.trigger(Events.FRAG_DECRYPTED,{frag:gr,payload:wr,stats:{tstart:Cr,tdecrypt:Rr}})}).catch(wr=>{this.warn(`${wr.name}: ${wr.message}`),this.state=State.IDLE})}}doTick(){if(!this.media){this.state=State.IDLE;return}if(this.state===State.IDLE){const{currentTrackId:hr,levels:gr}=this,vr=gr?.[hr];if(!vr||!gr.length||!vr.details)return;const{config:xr}=this,Er=this.getLoadPosition(),Cr=BufferHelper.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],Er,xr.maxBufferHole),{end:wr,len:Rr}=Cr,kr=this.getFwdBufferInfo(this.media,PlaylistLevelType.MAIN),Dr=vr.details,Br=this.getMaxBufferLength(kr?.len)+Dr.levelTargetDuration;if(Rr>Br)return;const Hr=Dr.fragments,Gr=Hr.length,qr=Dr.edge;let zr=null;const Qr=this.fragPrevious;if(wr<qr){const sn=xr.maxFragLookUpTolerance,hn=wr>qr-sn?0:sn;zr=findFragmentByPTS(Qr,Hr,Math.max(Hr[0].start,wr),hn),!zr&&Qr&&Qr.start<Hr[0].start&&(zr=Hr[0])}else zr=Hr[Gr-1];if(!zr)return;if(zr=this.mapToInitFragWhenRequired(zr),zr.sn!=="initSegment"){const sn=zr.sn-Dr.startSN,hn=Hr[sn-1];hn&&hn.cc===zr.cc&&this.fragmentTracker.getState(hn)===FragmentState.NOT_LOADED&&(zr=hn)}this.fragmentTracker.getState(zr)===FragmentState.NOT_LOADED&&this.loadFragment(zr,vr,wr)}}getMaxBufferLength(hr){const gr=super.getMaxBufferLength();return hr?Math.max(gr,hr):gr}loadFragment(hr,gr,vr){this.fragCurrent=hr,hr.sn==="initSegment"?this._loadInitSegment(hr,gr):(this.startFragRequested=!0,super.loadFragment(hr,gr,vr))}get mediaBufferTimeRanges(){return new BufferableInstance(this.tracksBuffered[this.currentTrackId]||[])}}class BufferableInstance{constructor(hr){this.buffered=void 0;const gr=(vr,xr,Er)=>{if(xr=xr>>>0,xr>Er-1)throw new DOMException(`Failed to execute '${vr}' on 'TimeRanges': The index provided (${xr}) is greater than the maximum bound (${Er})`);return hr[xr][vr]};this.buffered={get length(){return hr.length},end(vr){return gr("end",vr,hr.length)},start(vr){return gr("start",vr,hr.length)}}}}class SubtitleTrackController extends BasePlaylistController{constructor(hr){super(hr,"[subtitle-track-controller]"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let gr=null;const vr=filterSubtitleTracks(this.media.textTracks);for(let Er=0;Er<vr.length;Er++)if(vr[Er].mode==="hidden")gr=vr[Er];else if(vr[Er].mode==="showing"){gr=vr[Er];break}const xr=this.findTrackForTextTrack(gr);this.subtitleTrack!==xr&&this.setSubtitleTrack(xr)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(hr){this._subtitleDisplay=hr,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:hr}=this;hr.on(Events.MEDIA_ATTACHED,this.onMediaAttached,this),hr.on(Events.MEDIA_DETACHING,this.onMediaDetaching,this),hr.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),hr.on(Events.MANIFEST_PARSED,this.onManifestParsed,this),hr.on(Events.LEVEL_LOADING,this.onLevelLoading,this),hr.on(Events.LEVEL_SWITCHING,this.onLevelSwitching,this),hr.on(Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),hr.on(Events.ERROR,this.onError,this)}unregisterListeners(){const{hls:hr}=this;hr.off(Events.MEDIA_ATTACHED,this.onMediaAttached,this),hr.off(Events.MEDIA_DETACHING,this.onMediaDetaching,this),hr.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),hr.off(Events.MANIFEST_PARSED,this.onManifestParsed,this),hr.off(Events.LEVEL_LOADING,this.onLevelLoading,this),hr.off(Events.LEVEL_SWITCHING,this.onLevelSwitching,this),hr.off(Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),hr.off(Events.ERROR,this.onError,this)}onMediaAttached(hr,gr){this.media=gr.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(hr){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,hr)}onMediaDetaching(){if(!this.media)return;self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),filterSubtitleTracks(this.media.textTracks).forEach(gr=>{clearCurrentCues(gr)}),this.subtitleTrack=-1,this.media=null}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(hr,gr){this.tracks=gr.subtitleTracks}onSubtitleTrackLoaded(hr,gr){const{id:vr,groupId:xr,details:Er}=gr,Cr=this.tracksInGroup[vr];if(!Cr||Cr.groupId!==xr){this.warn(`Subtitle track with id:${vr} and group:${xr} not found in active group ${Cr?.groupId}`);return}const wr=Cr.details;Cr.details=gr.details,this.log(`Subtitle track ${vr} "${Cr.name}" lang:${Cr.lang} group:${xr} loaded [${Er.startSN}-${Er.endSN}]`),vr===this.trackId&&this.playlistLoaded(vr,gr,wr)}onLevelLoading(hr,gr){this.switchLevel(gr.level)}onLevelSwitching(hr,gr){this.switchLevel(gr.level)}switchLevel(hr){const gr=this.hls.levels[hr];if(!gr)return;const vr=gr.subtitleGroups||null,xr=this.groupIds;let Er=this.currentTrack;if(!vr||xr?.length!==vr?.length||vr!=null&&vr.some(Cr=>xr?.indexOf(Cr)===-1)){this.groupIds=vr,this.trackId=-1,this.currentTrack=null;const Cr=this.tracks.filter(Dr=>!vr||vr.indexOf(Dr.groupId)!==-1);if(Cr.length)this.selectDefaultTrack&&!Cr.some(Dr=>Dr.default)&&(this.selectDefaultTrack=!1),Cr.forEach((Dr,Br)=>{Dr.id=Br});else if(!Er&&!this.tracksInGroup.length)return;this.tracksInGroup=Cr;const wr=this.hls.config.subtitlePreference;if(!Er&&wr){this.selectDefaultTrack=!1;const Dr=findMatchingOption(wr,Cr);if(Dr>-1)Er=Cr[Dr];else{const Br=findMatchingOption(wr,this.tracks);Er=this.tracks[Br]}}let Rr=this.findTrackId(Er);Rr===-1&&Er&&(Rr=this.findTrackId(null));const kr={subtitleTracks:Cr};this.log(`Updating subtitle tracks, ${Cr.length} track(s) found in "${vr?.join(",")}" group-id`),this.hls.trigger(Events.SUBTITLE_TRACKS_UPDATED,kr),Rr!==-1&&this.trackId===-1&&this.setSubtitleTrack(Rr)}else this.shouldReloadPlaylist(Er)&&this.setSubtitleTrack(this.trackId)}findTrackId(hr){const gr=this.tracksInGroup,vr=this.selectDefaultTrack;for(let xr=0;xr<gr.length;xr++){const Er=gr[xr];if(!(vr&&!Er.default||!vr&&!hr)&&(!hr||matchesOption(Er,hr)))return xr}if(hr){for(let xr=0;xr<gr.length;xr++){const Er=gr[xr];if(mediaAttributesIdentical(hr.attrs,Er.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return xr}for(let xr=0;xr<gr.length;xr++){const Er=gr[xr];if(mediaAttributesIdentical(hr.attrs,Er.attrs,["LANGUAGE"]))return xr}}return-1}findTrackForTextTrack(hr){if(hr){const gr=this.tracksInGroup;for(let vr=0;vr<gr.length;vr++){const xr=gr[vr];if(subtitleTrackMatchesTextTrack(xr,hr))return vr}}return-1}onError(hr,gr){gr.fatal||!gr.context||gr.context.type===PlaylistContextType.SUBTITLE_TRACK&&gr.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(gr.context.groupId)!==-1)&&this.checkRetry(gr)}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(hr){this.selectDefaultTrack=!1,this.setSubtitleTrack(hr)}setSubtitleOption(hr){if(this.hls.config.subtitlePreference=hr,hr){const gr=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,gr.length){const vr=this.currentTrack;if(vr&&matchesOption(hr,vr))return vr;const xr=findMatchingOption(hr,this.tracksInGroup);if(xr>-1){const Er=this.tracksInGroup[xr];return this.setSubtitleTrack(xr),Er}else{if(vr)return null;{const Er=findMatchingOption(hr,gr);if(Er>-1)return gr[Er]}}}}return null}loadPlaylist(hr){super.loadPlaylist();const gr=this.currentTrack;if(this.shouldLoadPlaylist(gr)&&gr){const vr=gr.id,xr=gr.groupId;let Er=gr.url;if(hr)try{Er=hr.addDirectives(Er)}catch(Cr){this.warn(`Could not construct new URL with HLS Delivery Directives: ${Cr}`)}this.log(`Loading subtitle playlist for id ${vr}`),this.hls.trigger(Events.SUBTITLE_TRACK_LOADING,{url:Er,id:vr,groupId:xr,deliveryDirectives:hr||null})}}toggleTrackModes(){const{media:hr}=this;if(!hr)return;const gr=filterSubtitleTracks(hr.textTracks),vr=this.currentTrack;let xr;if(vr&&(xr=gr.filter(Er=>subtitleTrackMatchesTextTrack(vr,Er))[0],xr||this.warn(`Unable to find subtitle TextTrack with name "${vr.name}" and language "${vr.lang}"`)),[].slice.call(gr).forEach(Er=>{Er.mode!=="disabled"&&Er!==xr&&(Er.mode="disabled")}),xr){const Er=this.subtitleDisplay?"showing":"hidden";xr.mode!==Er&&(xr.mode=Er)}}setSubtitleTrack(hr){const gr=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=hr;return}if(hr<-1||hr>=gr.length||!isFiniteNumber(hr)){this.warn(`Invalid subtitle track id: ${hr}`);return}this.clearTimer(),this.selectDefaultTrack=!1;const vr=this.currentTrack,xr=gr[hr]||null;if(this.trackId=hr,this.currentTrack=xr,this.toggleTrackModes(),!xr){this.hls.trigger(Events.SUBTITLE_TRACK_SWITCH,{id:hr});return}const Er=!!xr.details&&!xr.details.live;if(hr===this.trackId&&xr===vr&&Er)return;this.log(`Switching to subtitle-track ${hr}`+(xr?` "${xr.name}" lang:${xr.lang} group:${xr.groupId}`:""));const{id:Cr,groupId:wr="",name:Rr,type:kr,url:Dr}=xr;this.hls.trigger(Events.SUBTITLE_TRACK_SWITCH,{id:Cr,groupId:wr,name:Rr,type:kr,url:Dr});const Br=this.switchParams(xr.url,vr?.details,xr.details);this.loadPlaylist(Br)}}class BufferOperationQueue{constructor(hr){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=hr}append(hr,gr,vr){const xr=this.queues[gr];xr.push(hr),xr.length===1&&!vr&&this.executeNext(gr)}insertAbort(hr,gr){this.queues[gr].unshift(hr),this.executeNext(gr)}appendBlocker(hr){let gr;const vr=new Promise(Er=>{gr=Er}),xr={execute:gr,onStart:()=>{},onComplete:()=>{},onError:()=>{}};return this.append(xr,hr),vr}executeNext(hr){const gr=this.queues[hr];if(gr.length){const vr=gr[0];try{vr.execute()}catch(xr){logger.warn(`[buffer-operation-queue]: Exception executing "${hr}" SourceBuffer operation: ${xr}`),vr.onError(xr);const Er=this.buffers[hr];Er!=null&&Er.updating||this.shiftAndExecuteNext(hr)}}}shiftAndExecuteNext(hr){this.queues[hr].shift(),this.executeNext(hr)}current(hr){return this.queues[hr][0]}}const VIDEO_CODEC_PROFILE_REPLACE=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/;class BufferController{constructor(hr){this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendSource=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this.log=void 0,this.warn=void 0,this.error=void 0,this._onEndStreaming=vr=>{this.hls&&this.hls.pauseBuffering()},this._onStartStreaming=vr=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=()=>{const{media:vr,mediaSource:xr}=this;this.log("Media source opened"),vr&&(vr.removeEventListener("emptied",this._onMediaEmptied),this.updateMediaElementDuration(),this.hls.trigger(Events.MEDIA_ATTACHED,{media:vr,mediaSource:xr})),xr&&xr.removeEventListener("sourceopen",this._onMediaSourceOpen),this.checkPendingTracks()},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:vr,_objectUrl:xr}=this;vr!==xr&&logger.error(`Media element src was set while attaching MediaSource (${xr} > ${vr})`)},this.hls=hr;const gr="[buffer-controller]";this.appendSource=isManagedMediaSource(getMediaSource(hr.config.preferManagedMediaSource)),this.log=logger.log.bind(logger,gr),this.warn=logger.warn.bind(logger,gr),this.error=logger.error.bind(logger,gr),this._initSourceBuffer(),this.registerListeners()}hasSourceTypes(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null,this.hls=null}registerListeners(){const{hls:hr}=this;hr.on(Events.MEDIA_ATTACHING,this.onMediaAttaching,this),hr.on(Events.MEDIA_DETACHING,this.onMediaDetaching,this),hr.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),hr.on(Events.MANIFEST_PARSED,this.onManifestParsed,this),hr.on(Events.BUFFER_RESET,this.onBufferReset,this),hr.on(Events.BUFFER_APPENDING,this.onBufferAppending,this),hr.on(Events.BUFFER_CODECS,this.onBufferCodecs,this),hr.on(Events.BUFFER_EOS,this.onBufferEos,this),hr.on(Events.BUFFER_FLUSHING,this.onBufferFlushing,this),hr.on(Events.LEVEL_UPDATED,this.onLevelUpdated,this),hr.on(Events.FRAG_PARSED,this.onFragParsed,this),hr.on(Events.FRAG_CHANGED,this.onFragChanged,this)}unregisterListeners(){const{hls:hr}=this;hr.off(Events.MEDIA_ATTACHING,this.onMediaAttaching,this),hr.off(Events.MEDIA_DETACHING,this.onMediaDetaching,this),hr.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),hr.off(Events.MANIFEST_PARSED,this.onManifestParsed,this),hr.off(Events.BUFFER_RESET,this.onBufferReset,this),hr.off(Events.BUFFER_APPENDING,this.onBufferAppending,this),hr.off(Events.BUFFER_CODECS,this.onBufferCodecs,this),hr.off(Events.BUFFER_EOS,this.onBufferEos,this),hr.off(Events.BUFFER_FLUSHING,this.onBufferFlushing,this),hr.off(Events.LEVEL_UPDATED,this.onLevelUpdated,this),hr.off(Events.FRAG_PARSED,this.onFragParsed,this),hr.off(Events.FRAG_CHANGED,this.onFragChanged,this)}_initSourceBuffer(){this.sourceBuffer={},this.operationQueue=new BufferOperationQueue(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.appendErrors={audio:0,video:0,audiovideo:0},this.lastMpegAudioChunk=null}onManifestLoading(){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=0,this.details=null}onManifestParsed(hr,gr){let vr=2;(gr.audio&&!gr.video||!gr.altAudio)&&(vr=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=vr,this.log(`${this.bufferCodecEventsExpected} bufferCodec event(s) expected`)}onMediaAttaching(hr,gr){const vr=this.media=gr.media,xr=getMediaSource(this.appendSource);if(vr&&xr){var Er;const Cr=this.mediaSource=new xr;this.log(`created media source: ${(Er=Cr.constructor)==null?void 0:Er.name}`),Cr.addEventListener("sourceopen",this._onMediaSourceOpen),Cr.addEventListener("sourceended",this._onMediaSourceEnded),Cr.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(Cr.addEventListener("startstreaming",this._onStartStreaming),Cr.addEventListener("endstreaming",this._onEndStreaming));const wr=this._objectUrl=self.URL.createObjectURL(Cr);if(this.appendSource)try{vr.removeAttribute("src");const Rr=self.ManagedMediaSource;vr.disableRemotePlayback=vr.disableRemotePlayback||Rr&&Cr instanceof Rr,removeSourceChildren(vr),addSource(vr,wr),vr.load()}catch{vr.src=wr}else vr.src=wr;vr.addEventListener("emptied",this._onMediaEmptied)}}onMediaDetaching(){const{media:hr,mediaSource:gr,_objectUrl:vr}=this;if(gr){if(this.log("media source detaching"),gr.readyState==="open")try{gr.endOfStream()}catch(xr){this.warn(`onMediaDetaching: ${xr.message} while calling endOfStream`)}this.onBufferReset(),gr.removeEventListener("sourceopen",this._onMediaSourceOpen),gr.removeEventListener("sourceended",this._onMediaSourceEnded),gr.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(gr.removeEventListener("startstreaming",this._onStartStreaming),gr.removeEventListener("endstreaming",this._onEndStreaming)),hr&&(hr.removeEventListener("emptied",this._onMediaEmptied),vr&&self.URL.revokeObjectURL(vr),this.mediaSrc===vr?(hr.removeAttribute("src"),this.appendSource&&removeSourceChildren(hr),hr.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(Events.MEDIA_DETACHED,void 0)}onBufferReset(){this.getSourceBufferTypes().forEach(hr=>{this.resetBuffer(hr)}),this._initSourceBuffer(),this.hls.resumeBuffering()}resetBuffer(hr){const gr=this.sourceBuffer[hr];try{if(gr){var vr;this.removeBufferListeners(hr),this.sourceBuffer[hr]=void 0,(vr=this.mediaSource)!=null&&vr.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(gr)}}catch(xr){this.warn(`onBufferReset ${hr}`,xr)}}onBufferCodecs(hr,gr){const vr=this.getSourceBufferTypes().length,xr=Object.keys(gr);if(xr.forEach(Cr=>{if(vr){const Rr=this.tracks[Cr];if(Rr&&typeof Rr.buffer.changeType=="function"){var wr;const{id:kr,codec:Dr,levelCodec:Br,container:Hr,metadata:Gr}=gr[Cr],qr=pickMostCompleteCodecName(Rr.codec,Rr.levelCodec),zr=qr?.replace(VIDEO_CODEC_PROFILE_REPLACE,"$1");let Qr=pickMostCompleteCodecName(Dr,Br);const sn=(wr=Qr)==null?void 0:wr.replace(VIDEO_CODEC_PROFILE_REPLACE,"$1");if(Qr&&zr!==sn){Cr.slice(0,5)==="audio"&&(Qr=getCodecCompatibleName(Qr,this.appendSource));const hn=`${Hr};codecs=${Qr}`;this.appendChangeType(Cr,hn),this.log(`switching codec ${qr} to ${Qr}`),this.tracks[Cr]={buffer:Rr.buffer,codec:Dr,container:Hr,levelCodec:Br,metadata:Gr,id:kr}}}}else this.pendingTracks[Cr]=gr[Cr]}),vr)return;const Er=Math.max(this.bufferCodecEventsExpected-1,0);this.bufferCodecEventsExpected!==Er&&(this.log(`${Er} bufferCodec event(s) expected ${xr.join(",")}`),this.bufferCodecEventsExpected=Er),this.mediaSource&&this.mediaSource.readyState==="open"&&this.checkPendingTracks()}appendChangeType(hr,gr){const{operationQueue:vr}=this,xr={execute:()=>{const Er=this.sourceBuffer[hr];Er&&(this.log(`changing ${hr} sourceBuffer type to ${gr}`),Er.changeType(gr)),vr.shiftAndExecuteNext(hr)},onStart:()=>{},onComplete:()=>{},onError:Er=>{this.warn(`Failed to change ${hr} SourceBuffer type`,Er)}};vr.append(xr,hr,!!this.pendingTracks[hr])}onBufferAppending(hr,gr){const{hls:vr,operationQueue:xr,tracks:Er}=this,{data:Cr,type:wr,frag:Rr,part:kr,chunkMeta:Dr}=gr,Br=Dr.buffering[wr],Hr=self.performance.now();Br.start=Hr;const Gr=Rr.stats.buffering,qr=kr?kr.stats.buffering:null;Gr.start===0&&(Gr.start=Hr),qr&&qr.start===0&&(qr.start=Hr);const zr=Er.audio;let Qr=!1;wr==="audio"&&zr?.container==="audio/mpeg"&&(Qr=!this.lastMpegAudioChunk||Dr.id===1||this.lastMpegAudioChunk.sn!==Dr.sn,this.lastMpegAudioChunk=Dr);const sn=Rr.start,hn={execute:()=>{if(Br.executeStart=self.performance.now(),Qr){const vn=this.sourceBuffer[wr];if(vn){const yn=sn-vn.timestampOffset;Math.abs(yn)>=.1&&(this.log(`Updating audio SourceBuffer timestampOffset to ${sn} (delta: ${yn}) sn: ${Rr.sn})`),vn.timestampOffset=sn)}}this.appendExecutor(Cr,wr)},onStart:()=>{},onComplete:()=>{const vn=self.performance.now();Br.executeEnd=Br.end=vn,Gr.first===0&&(Gr.first=vn),qr&&qr.first===0&&(qr.first=vn);const{sourceBuffer:yn}=this,gn={};for(const bn in yn)gn[bn]=BufferHelper.getBuffered(yn[bn]);this.appendErrors[wr]=0,wr==="audio"||wr==="video"?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(Events.BUFFER_APPENDED,{type:wr,frag:Rr,part:kr,chunkMeta:Dr,parent:Rr.type,timeRanges:gn})},onError:vn=>{const yn={type:ErrorTypes.MEDIA_ERROR,parent:Rr.type,details:ErrorDetails.BUFFER_APPEND_ERROR,sourceBufferName:wr,frag:Rr,part:kr,chunkMeta:Dr,error:vn,err:vn,fatal:!1};if(vn.code===DOMException.QUOTA_EXCEEDED_ERR)yn.details=ErrorDetails.BUFFER_FULL_ERROR;else{const gn=++this.appendErrors[wr];yn.details=ErrorDetails.BUFFER_APPEND_ERROR,this.warn(`Failed ${gn}/${vr.config.appendErrorMaxRetry} times to append segment in "${wr}" sourceBuffer`),gn>=vr.config.appendErrorMaxRetry&&(yn.fatal=!0)}vr.trigger(Events.ERROR,yn)}};xr.append(hn,wr,!!this.pendingTracks[wr])}onBufferFlushing(hr,gr){const{operationQueue:vr}=this,xr=Er=>({execute:this.removeExecutor.bind(this,Er,gr.startOffset,gr.endOffset),onStart:()=>{},onComplete:()=>{this.hls.trigger(Events.BUFFER_FLUSHED,{type:Er})},onError:Cr=>{this.warn(`Failed to remove from ${Er} SourceBuffer`,Cr)}});gr.type?vr.append(xr(gr.type),gr.type):this.getSourceBufferTypes().forEach(Er=>{vr.append(xr(Er),Er)})}onFragParsed(hr,gr){const{frag:vr,part:xr}=gr,Er=[],Cr=xr?xr.elementaryStreams:vr.elementaryStreams;Cr[ElementaryStreamTypes.AUDIOVIDEO]?Er.push("audiovideo"):(Cr[ElementaryStreamTypes.AUDIO]&&Er.push("audio"),Cr[ElementaryStreamTypes.VIDEO]&&Er.push("video"));const wr=()=>{const Rr=self.performance.now();vr.stats.buffering.end=Rr,xr&&(xr.stats.buffering.end=Rr);const kr=xr?xr.stats:vr.stats;this.hls.trigger(Events.FRAG_BUFFERED,{frag:vr,part:xr,stats:kr,id:vr.type})};Er.length===0&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${vr.type} level: ${vr.level} sn: ${vr.sn}`),this.blockBuffers(wr,Er)}onFragChanged(hr,gr){this.trimBuffers()}onBufferEos(hr,gr){this.getSourceBufferTypes().reduce((xr,Er)=>{const Cr=this.sourceBuffer[Er];return Cr&&(!gr.type||gr.type===Er)&&(Cr.ending=!0,Cr.ended||(Cr.ended=!0,this.log(`${Er} sourceBuffer now EOS`))),xr&&!!(!Cr||Cr.ended)},!0)&&(this.log("Queueing mediaSource.endOfStream()"),this.blockBuffers(()=>{this.getSourceBufferTypes().forEach(Er=>{const Cr=this.sourceBuffer[Er];Cr&&(Cr.ending=!1)});const{mediaSource:xr}=this;if(!xr||xr.readyState!=="open"){xr&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${xr.readyState}`);return}this.log("Calling mediaSource.endOfStream()"),xr.endOfStream()}))}onLevelUpdated(hr,{details:gr}){gr.fragments.length&&(this.details=gr,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())}trimBuffers(){const{hls:hr,details:gr,media:vr}=this;if(!vr||gr===null||!this.getSourceBufferTypes().length)return;const Er=hr.config,Cr=vr.currentTime,wr=gr.levelTargetDuration,Rr=gr.live&&Er.liveBackBufferLength!==null?Er.liveBackBufferLength:Er.backBufferLength;if(isFiniteNumber(Rr)&&Rr>0){const kr=Math.max(Rr,wr),Dr=Math.floor(Cr/wr)*wr-kr;this.flushBackBuffer(Cr,wr,Dr)}if(isFiniteNumber(Er.frontBufferFlushThreshold)&&Er.frontBufferFlushThreshold>0){const kr=Math.max(Er.maxBufferLength,Er.frontBufferFlushThreshold),Dr=Math.max(kr,wr),Br=Math.floor(Cr/wr)*wr+Dr;this.flushFrontBuffer(Cr,wr,Br)}}flushBackBuffer(hr,gr,vr){const{details:xr,sourceBuffer:Er}=this;this.getSourceBufferTypes().forEach(wr=>{const Rr=Er[wr];if(Rr){const kr=BufferHelper.getBuffered(Rr);if(kr.length>0&&vr>kr.start(0)){if(this.hls.trigger(Events.BACK_BUFFER_REACHED,{bufferEnd:vr}),xr!=null&&xr.live)this.hls.trigger(Events.LIVE_BACK_BUFFER_REACHED,{bufferEnd:vr});else if(Rr.ended&&kr.end(kr.length-1)-hr<gr*2){this.log(`Cannot flush ${wr} back buffer while SourceBuffer is in ended state`);return}this.hls.trigger(Events.BUFFER_FLUSHING,{startOffset:0,endOffset:vr,type:wr})}}})}flushFrontBuffer(hr,gr,vr){const{sourceBuffer:xr}=this;this.getSourceBufferTypes().forEach(Cr=>{const wr=xr[Cr];if(wr){const Rr=BufferHelper.getBuffered(wr),kr=Rr.length;if(kr<2)return;const Dr=Rr.start(kr-1),Br=Rr.end(kr-1);if(vr>Dr||hr>=Dr&&hr<=Br)return;if(wr.ended&&hr-Br<2*gr){this.log(`Cannot flush ${Cr} front buffer while SourceBuffer is in ended state`);return}this.hls.trigger(Events.BUFFER_FLUSHING,{startOffset:Dr,endOffset:1/0,type:Cr})}})}updateMediaElementDuration(){if(!this.details||!this.media||!this.mediaSource||this.mediaSource.readyState!=="open")return;const{details:hr,hls:gr,media:vr,mediaSource:xr}=this,Er=hr.fragments[0].start+hr.totalduration,Cr=vr.duration,wr=isFiniteNumber(xr.duration)?xr.duration:0;hr.live&&gr.config.liveDurationInfinity?(xr.duration=1/0,this.updateSeekableRange(hr)):(Er>wr&&Er>Cr||!isFiniteNumber(Cr))&&(this.log(`Updating Media Source duration to ${Er.toFixed(3)}`),xr.duration=Er)}updateSeekableRange(hr){const gr=this.mediaSource,vr=hr.fragments;if(vr.length&&hr.live&&gr!=null&&gr.setLiveSeekableRange){const Er=Math.max(0,vr[0].start),Cr=Math.max(Er,Er+hr.totalduration);this.log(`Media Source duration is set to ${gr.duration}. Setting seekable range to ${Er}-${Cr}.`),gr.setLiveSeekableRange(Er,Cr)}}checkPendingTracks(){const{bufferCodecEventsExpected:hr,operationQueue:gr,pendingTracks:vr}=this,xr=Object.keys(vr).length;if(xr&&(!hr||xr===2||"audiovideo"in vr)){this.createSourceBuffers(vr),this.pendingTracks={};const Er=this.getSourceBufferTypes();if(Er.length)this.hls.trigger(Events.BUFFER_CREATED,{tracks:this.tracks}),Er.forEach(Cr=>{gr.executeNext(Cr)});else{const Cr=new Error("could not create source buffer for media codec(s)");this.hls.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:Cr,reason:Cr.message})}}}createSourceBuffers(hr){const{sourceBuffer:gr,mediaSource:vr}=this;if(!vr)throw Error("createSourceBuffers called when mediaSource was null");for(const Er in hr)if(!gr[Er]){var xr;const Cr=hr[Er];if(!Cr)throw Error(`source buffer exists for track ${Er}, however track does not`);let wr=((xr=Cr.levelCodec)==null?void 0:xr.indexOf(","))===-1?Cr.levelCodec:Cr.codec;wr&&Er.slice(0,5)==="audio"&&(wr=getCodecCompatibleName(wr,this.appendSource));const Rr=`${Cr.container};codecs=${wr}`;this.log(`creating sourceBuffer(${Rr})`);try{const kr=gr[Er]=vr.addSourceBuffer(Rr),Dr=Er;this.addBufferListener(Dr,"updatestart",this._onSBUpdateStart),this.addBufferListener(Dr,"updateend",this._onSBUpdateEnd),this.addBufferListener(Dr,"error",this._onSBUpdateError),this.appendSource&&this.addBufferListener(Dr,"bufferedchange",(Br,Hr)=>{const Gr=Hr.removedRanges;Gr!=null&&Gr.length&&this.hls.trigger(Events.BUFFER_FLUSHED,{type:Er})}),this.tracks[Er]={buffer:kr,codec:wr,container:Cr.container,levelCodec:Cr.levelCodec,metadata:Cr.metadata,id:Cr.id}}catch(kr){this.error(`error while trying to add sourceBuffer: ${kr.message}`),this.hls.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:kr,sourceBufferName:Er,mimeType:Rr})}}}get mediaSrc(){var hr,gr;const vr=((hr=this.media)==null||(gr=hr.querySelector)==null?void 0:gr.call(hr,"source"))||this.media;return vr?.src}_onSBUpdateStart(hr){const{operationQueue:gr}=this;gr.current(hr).onStart()}_onSBUpdateEnd(hr){var gr;if(((gr=this.mediaSource)==null?void 0:gr.readyState)==="closed"){this.resetBuffer(hr);return}const{operationQueue:vr}=this;vr.current(hr).onComplete(),vr.shiftAndExecuteNext(hr)}_onSBUpdateError(hr,gr){var vr;const xr=new Error(`${hr} SourceBuffer error. MediaSource readyState: ${(vr=this.mediaSource)==null?void 0:vr.readyState}`);this.error(`${xr}`,gr),this.hls.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.BUFFER_APPENDING_ERROR,sourceBufferName:hr,error:xr,fatal:!1});const Er=this.operationQueue.current(hr);Er&&Er.onError(xr)}removeExecutor(hr,gr,vr){const{media:xr,mediaSource:Er,operationQueue:Cr,sourceBuffer:wr}=this,Rr=wr[hr];if(!xr||!Er||!Rr){this.warn(`Attempting to remove from the ${hr} SourceBuffer, but it does not exist`),Cr.shiftAndExecuteNext(hr);return}const kr=isFiniteNumber(xr.duration)?xr.duration:1/0,Dr=isFiniteNumber(Er.duration)?Er.duration:1/0,Br=Math.max(0,gr),Hr=Math.min(vr,kr,Dr);Hr>Br&&(!Rr.ending||Rr.ended)?(Rr.ended=!1,this.log(`Removing [${Br},${Hr}] from the ${hr} SourceBuffer`),Rr.remove(Br,Hr)):Cr.shiftAndExecuteNext(hr)}appendExecutor(hr,gr){const vr=this.sourceBuffer[gr];if(!vr){if(!this.pendingTracks[gr])throw new Error(`Attempting to append to the ${gr} SourceBuffer, but it does not exist`);return}vr.ended=!1,vr.appendBuffer(hr)}blockBuffers(hr,gr=this.getSourceBufferTypes()){if(!gr.length){this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(hr);return}const{operationQueue:vr}=this,xr=gr.map(Er=>vr.appendBlocker(Er));Promise.all(xr).then(()=>{hr(),gr.forEach(Er=>{const Cr=this.sourceBuffer[Er];Cr!=null&&Cr.updating||vr.shiftAndExecuteNext(Er)})})}getSourceBufferTypes(){return Object.keys(this.sourceBuffer)}addBufferListener(hr,gr,vr){const xr=this.sourceBuffer[hr];if(!xr)return;const Er=vr.bind(this,hr);this.listeners[hr].push({event:gr,listener:Er}),xr.addEventListener(gr,Er)}removeBufferListeners(hr){const gr=this.sourceBuffer[hr];gr&&this.listeners[hr].forEach(vr=>{gr.removeEventListener(vr.event,vr.listener)})}}function removeSourceChildren(mr){const hr=mr.querySelectorAll("source");[].slice.call(hr).forEach(gr=>{mr.removeChild(gr)})}function addSource(mr,hr){const gr=self.document.createElement("source");gr.type="video/mp4",gr.src=hr,mr.appendChild(gr)}const specialCea608CharsCodes={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},getCharForByte=mr=>String.fromCharCode(specialCea608CharsCodes[mr]||mr),NR_ROWS=15,NR_COLS=100,rowsLowCh1={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},rowsHighCh1={17:2,18:4,21:6,22:8,23:10,19:13,20:15},rowsLowCh2={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},rowsHighCh2={25:2,26:4,29:6,30:8,31:10,27:13,28:15},backgroundColors=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class CaptionsLogger{constructor(){this.time=null,this.verboseLevel=0}log(hr,gr){if(this.verboseLevel>=hr){const vr=typeof gr=="function"?gr():gr;logger.log(`${this.time} [${hr}] ${vr}`)}}}const numArrayToHexArray=function(hr){const gr=[];for(let vr=0;vr<hr.length;vr++)gr.push(hr[vr].toString(16));return gr};class PenState{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(hr){const gr=["foreground","underline","italics","background","flash"];for(let vr=0;vr<gr.length;vr++){const xr=gr[vr];hr.hasOwnProperty(xr)&&(this[xr]=hr[xr])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(hr){return this.foreground===hr.foreground&&this.underline===hr.underline&&this.italics===hr.italics&&this.background===hr.background&&this.flash===hr.flash}copy(hr){this.foreground=hr.foreground,this.underline=hr.underline,this.italics=hr.italics,this.background=hr.background,this.flash=hr.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class StyledUnicodeChar{constructor(){this.uchar=" ",this.penState=new PenState}reset(){this.uchar=" ",this.penState.reset()}setChar(hr,gr){this.uchar=hr,this.penState.copy(gr)}setPenState(hr){this.penState.copy(hr)}equals(hr){return this.uchar===hr.uchar&&this.penState.equals(hr.penState)}copy(hr){this.uchar=hr.uchar,this.penState.copy(hr.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}class Row{constructor(hr){this.chars=[],this.pos=0,this.currPenState=new PenState,this.cueStartTime=null,this.logger=void 0;for(let gr=0;gr<NR_COLS;gr++)this.chars.push(new StyledUnicodeChar);this.logger=hr}equals(hr){for(let gr=0;gr<NR_COLS;gr++)if(!this.chars[gr].equals(hr.chars[gr]))return!1;return!0}copy(hr){for(let gr=0;gr<NR_COLS;gr++)this.chars[gr].copy(hr.chars[gr])}isEmpty(){let hr=!0;for(let gr=0;gr<NR_COLS;gr++)if(!this.chars[gr].isEmpty()){hr=!1;break}return hr}setCursor(hr){this.pos!==hr&&(this.pos=hr),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>NR_COLS&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=NR_COLS)}moveCursor(hr){const gr=this.pos+hr;if(hr>1)for(let vr=this.pos+1;vr<gr+1;vr++)this.chars[vr].setPenState(this.currPenState);this.setCursor(gr)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(hr){hr>=144&&this.backSpace();const gr=getCharForByte(hr);if(this.pos>=NR_COLS){this.logger.log(0,()=>"Cannot insert "+hr.toString(16)+" ("+gr+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(gr,this.currPenState),this.moveCursor(1)}clearFromPos(hr){let gr;for(gr=hr;gr<NR_COLS;gr++)this.chars[gr].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const hr=[];let gr=!0;for(let vr=0;vr<NR_COLS;vr++){const xr=this.chars[vr].uchar;xr!==" "&&(gr=!1),hr.push(xr)}return gr?"":hr.join("")}setPenStyles(hr){this.currPenState.setStyles(hr),this.chars[this.pos].setPenState(this.currPenState)}}class CaptionScreen{constructor(hr){this.rows=[],this.currRow=NR_ROWS-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let gr=0;gr<NR_ROWS;gr++)this.rows.push(new Row(hr));this.logger=hr}reset(){for(let hr=0;hr<NR_ROWS;hr++)this.rows[hr].clear();this.currRow=NR_ROWS-1}equals(hr){let gr=!0;for(let vr=0;vr<NR_ROWS;vr++)if(!this.rows[vr].equals(hr.rows[vr])){gr=!1;break}return gr}copy(hr){for(let gr=0;gr<NR_ROWS;gr++)this.rows[gr].copy(hr.rows[gr])}isEmpty(){let hr=!0;for(let gr=0;gr<NR_ROWS;gr++)if(!this.rows[gr].isEmpty()){hr=!1;break}return hr}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(hr){this.rows[this.currRow].insertChar(hr)}setPen(hr){this.rows[this.currRow].setPenStyles(hr)}moveCursor(hr){this.rows[this.currRow].moveCursor(hr)}setCursor(hr){this.logger.log(2,"setCursor: "+hr),this.rows[this.currRow].setCursor(hr)}setPAC(hr){this.logger.log(2,()=>"pacData = "+JSON.stringify(hr));let gr=hr.row-1;if(this.nrRollUpRows&&gr<this.nrRollUpRows-1&&(gr=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==gr){for(let wr=0;wr<NR_ROWS;wr++)this.rows[wr].clear();const Er=this.currRow+1-this.nrRollUpRows,Cr=this.lastOutputScreen;if(Cr){const wr=Cr.rows[Er].cueStartTime,Rr=this.logger.time;if(wr!==null&&Rr!==null&&wr<Rr)for(let kr=0;kr<this.nrRollUpRows;kr++)this.rows[gr-this.nrRollUpRows+kr+1].copy(Cr.rows[Er+kr])}}this.currRow=gr;const vr=this.rows[this.currRow];if(hr.indent!==null){const Er=hr.indent,Cr=Math.max(Er-1,0);vr.setCursor(hr.indent),hr.color=vr.chars[Cr].penState.foreground}const xr={foreground:hr.color,underline:hr.underline,italics:hr.italics,background:"black",flash:!1};this.setPen(xr)}setBkgData(hr){this.logger.log(2,()=>"bkgData = "+JSON.stringify(hr)),this.backSpace(),this.setPen(hr),this.insertChar(32)}setRollUpRows(hr){this.nrRollUpRows=hr}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());const hr=this.currRow+1-this.nrRollUpRows,gr=this.rows.splice(hr,1)[0];gr.clear(),this.rows.splice(this.currRow,0,gr),this.logger.log(2,"Rolling up")}getDisplayText(hr){hr=hr||!1;const gr=[];let vr="",xr=-1;for(let Er=0;Er<NR_ROWS;Er++){const Cr=this.rows[Er].getTextString();Cr&&(xr=Er+1,hr?gr.push("Row "+xr+": '"+Cr+"'"):gr.push(Cr.trim()))}return gr.length>0&&(hr?vr="["+gr.join(" | ")+"]":vr=gr.join(`
`)),vr}getTextAndFormat(){return this.rows}}class Cea608Channel{constructor(hr,gr,vr){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=hr,this.outputFilter=gr,this.mode=null,this.verbose=0,this.displayedMemory=new CaptionScreen(vr),this.nonDisplayedMemory=new CaptionScreen(vr),this.lastOutputScreen=new CaptionScreen(vr),this.currRollUpRow=this.displayedMemory.rows[NR_ROWS-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=vr}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[NR_ROWS-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(hr){this.outputFilter=hr}setPAC(hr){this.writeScreen.setPAC(hr)}setBkgData(hr){this.writeScreen.setBkgData(hr)}setMode(hr){hr!==this.mode&&(this.mode=hr,this.logger.log(2,()=>"MODE="+hr),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=hr)}insertChars(hr){for(let vr=0;vr<hr.length;vr++)this.writeScreen.insertChar(hr[vr]);const gr=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>gr+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(hr){this.logger.log(2,"RU("+hr+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(hr)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const hr=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=hr,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(hr){this.logger.log(2,"TO("+hr+") - Tab Offset"),this.writeScreen.moveCursor(hr)}ccMIDROW(hr){const gr={flash:!1};if(gr.underline=hr%2===1,gr.italics=hr>=46,gr.italics)gr.foreground="white";else{const vr=Math.floor(hr/2)-16,xr=["white","green","blue","cyan","red","yellow","magenta"];gr.foreground=xr[vr]}this.logger.log(2,"MIDROW: "+JSON.stringify(gr)),this.writeScreen.setPen(gr)}outputDataUpdate(hr=!1){const gr=this.logger.time;gr!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=gr:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,gr,this.lastOutputScreen),hr&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:gr),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(hr){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,hr,this.displayedMemory),this.cueStartTime=hr))}}class Cea608Parser{constructor(hr,gr,vr){this.channels=void 0,this.currentChannel=0,this.cmdHistory=createCmdHistory(),this.logger=void 0;const xr=this.logger=new CaptionsLogger;this.channels=[null,new Cea608Channel(hr,gr,xr),new Cea608Channel(hr+1,vr,xr)]}getHandler(hr){return this.channels[hr].getHandler()}setHandler(hr,gr){this.channels[hr].setHandler(gr)}addData(hr,gr){this.logger.time=hr;for(let vr=0;vr<gr.length;vr+=2){const xr=gr[vr]&127,Er=gr[vr+1]&127;let Cr=!1,wr=null;if(xr===0&&Er===0)continue;this.logger.log(3,()=>"["+numArrayToHexArray([gr[vr],gr[vr+1]])+"] -> ("+numArrayToHexArray([xr,Er])+")");const Rr=this.cmdHistory;if(xr>=16&&xr<=31){if(hasCmdRepeated(xr,Er,Rr)){setLastCmd(null,null,Rr),this.logger.log(3,()=>"Repeated command ("+numArrayToHexArray([xr,Er])+") is dropped");continue}setLastCmd(xr,Er,this.cmdHistory),Cr=this.parseCmd(xr,Er),Cr||(Cr=this.parseMidrow(xr,Er)),Cr||(Cr=this.parsePAC(xr,Er)),Cr||(Cr=this.parseBackgroundAttributes(xr,Er))}else setLastCmd(null,null,Rr);if(!Cr&&(wr=this.parseChars(xr,Er),wr)){const Dr=this.currentChannel;Dr&&Dr>0?this.channels[Dr].insertChars(wr):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!Cr&&!wr&&this.logger.log(2,()=>"Couldn't parse cleaned data "+numArrayToHexArray([xr,Er])+" orig: "+numArrayToHexArray([gr[vr],gr[vr+1]]))}}parseCmd(hr,gr){const vr=(hr===20||hr===28||hr===21||hr===29)&&gr>=32&&gr<=47,xr=(hr===23||hr===31)&&gr>=33&&gr<=35;if(!(vr||xr))return!1;const Er=hr===20||hr===21||hr===23?1:2,Cr=this.channels[Er];return hr===20||hr===21||hr===28||hr===29?gr===32?Cr.ccRCL():gr===33?Cr.ccBS():gr===34?Cr.ccAOF():gr===35?Cr.ccAON():gr===36?Cr.ccDER():gr===37?Cr.ccRU(2):gr===38?Cr.ccRU(3):gr===39?Cr.ccRU(4):gr===40?Cr.ccFON():gr===41?Cr.ccRDC():gr===42?Cr.ccTR():gr===43?Cr.ccRTD():gr===44?Cr.ccEDM():gr===45?Cr.ccCR():gr===46?Cr.ccENM():gr===47&&Cr.ccEOC():Cr.ccTO(gr-32),this.currentChannel=Er,!0}parseMidrow(hr,gr){let vr=0;if((hr===17||hr===25)&&gr>=32&&gr<=47){if(hr===17?vr=1:vr=2,vr!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const xr=this.channels[vr];return xr?(xr.ccMIDROW(gr),this.logger.log(3,()=>"MIDROW ("+numArrayToHexArray([hr,gr])+")"),!0):!1}return!1}parsePAC(hr,gr){let vr;const xr=(hr>=17&&hr<=23||hr>=25&&hr<=31)&&gr>=64&&gr<=127,Er=(hr===16||hr===24)&&gr>=64&&gr<=95;if(!(xr||Er))return!1;const Cr=hr<=23?1:2;gr>=64&&gr<=95?vr=Cr===1?rowsLowCh1[hr]:rowsLowCh2[hr]:vr=Cr===1?rowsHighCh1[hr]:rowsHighCh2[hr];const wr=this.channels[Cr];return wr?(wr.setPAC(this.interpretPAC(vr,gr)),this.currentChannel=Cr,!0):!1}interpretPAC(hr,gr){let vr;const xr={color:null,italics:!1,indent:null,underline:!1,row:hr};return gr>95?vr=gr-96:vr=gr-64,xr.underline=(vr&1)===1,vr<=13?xr.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(vr/2)]:vr<=15?(xr.italics=!0,xr.color="white"):xr.indent=Math.floor((vr-16)/2)*4,xr}parseChars(hr,gr){let vr,xr=null,Er=null;if(hr>=25?(vr=2,Er=hr-8):(vr=1,Er=hr),Er>=17&&Er<=19){let Cr;Er===17?Cr=gr+80:Er===18?Cr=gr+112:Cr=gr+144,this.logger.log(2,()=>"Special char '"+getCharForByte(Cr)+"' in channel "+vr),xr=[Cr]}else hr>=32&&hr<=127&&(xr=gr===0?[hr]:[hr,gr]);return xr&&this.logger.log(3,()=>"Char codes =  "+numArrayToHexArray(xr).join(",")),xr}parseBackgroundAttributes(hr,gr){const vr=(hr===16||hr===24)&&gr>=32&&gr<=47,xr=(hr===23||hr===31)&&gr>=45&&gr<=47;if(!(vr||xr))return!1;let Er;const Cr={};hr===16||hr===24?(Er=Math.floor((gr-32)/2),Cr.background=backgroundColors[Er],gr%2===1&&(Cr.background=Cr.background+"_semi")):gr===45?Cr.background="transparent":(Cr.foreground="black",gr===47&&(Cr.underline=!0));const wr=hr<=23?1:2;return this.channels[wr].setBkgData(Cr),!0}reset(){for(let hr=0;hr<Object.keys(this.channels).length;hr++){const gr=this.channels[hr];gr&&gr.reset()}setLastCmd(null,null,this.cmdHistory)}cueSplitAtTime(hr){for(let gr=0;gr<this.channels.length;gr++){const vr=this.channels[gr];vr&&vr.cueSplitAtTime(hr)}}}function setLastCmd(mr,hr,gr){gr.a=mr,gr.b=hr}function hasCmdRepeated(mr,hr,gr){return gr.a===mr&&gr.b===hr}function createCmdHistory(){return{a:null,b:null}}class OutputFilter{constructor(hr,gr){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=hr,this.trackName=gr}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(hr,gr,vr){(this.startTime===null||this.startTime>hr)&&(this.startTime=hr),this.endTime=gr,this.screen=vr,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}var VTTCue$1=function(){if(optionalSelf!=null&&optionalSelf.VTTCue)return self.VTTCue;const mr=["","lr","rl"],hr=["start","middle","end","left","right"];function gr(wr,Rr){if(typeof Rr!="string"||!Array.isArray(wr))return!1;const kr=Rr.toLowerCase();return~wr.indexOf(kr)?kr:!1}function vr(wr){return gr(mr,wr)}function xr(wr){return gr(hr,wr)}function Er(wr,...Rr){let kr=1;for(;kr<arguments.length;kr++){const Dr=arguments[kr];for(const Br in Dr)wr[Br]=Dr[Br]}return wr}function Cr(wr,Rr,kr){const Dr=this,Br={enumerable:!0};Dr.hasBeenReset=!1;let Hr="",Gr=!1,qr=wr,zr=Rr,Qr=kr,sn=null,hn="",vn=!0,yn="auto",gn="start",bn=50,xn="middle",$n=50,Sn="middle";Object.defineProperty(Dr,"id",Er({},Br,{get:function(){return Hr},set:function(Cn){Hr=""+Cn}})),Object.defineProperty(Dr,"pauseOnExit",Er({},Br,{get:function(){return Gr},set:function(Cn){Gr=!!Cn}})),Object.defineProperty(Dr,"startTime",Er({},Br,{get:function(){return qr},set:function(Cn){if(typeof Cn!="number")throw new TypeError("Start time must be set to a number.");qr=Cn,this.hasBeenReset=!0}})),Object.defineProperty(Dr,"endTime",Er({},Br,{get:function(){return zr},set:function(Cn){if(typeof Cn!="number")throw new TypeError("End time must be set to a number.");zr=Cn,this.hasBeenReset=!0}})),Object.defineProperty(Dr,"text",Er({},Br,{get:function(){return Qr},set:function(Cn){Qr=""+Cn,this.hasBeenReset=!0}})),Object.defineProperty(Dr,"region",Er({},Br,{get:function(){return sn},set:function(Cn){sn=Cn,this.hasBeenReset=!0}})),Object.defineProperty(Dr,"vertical",Er({},Br,{get:function(){return hn},set:function(Cn){const Rn=vr(Cn);if(Rn===!1)throw new SyntaxError("An invalid or illegal string was specified.");hn=Rn,this.hasBeenReset=!0}})),Object.defineProperty(Dr,"snapToLines",Er({},Br,{get:function(){return vn},set:function(Cn){vn=!!Cn,this.hasBeenReset=!0}})),Object.defineProperty(Dr,"line",Er({},Br,{get:function(){return yn},set:function(Cn){if(typeof Cn!="number"&&Cn!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");yn=Cn,this.hasBeenReset=!0}})),Object.defineProperty(Dr,"lineAlign",Er({},Br,{get:function(){return gn},set:function(Cn){const Rn=xr(Cn);if(!Rn)throw new SyntaxError("An invalid or illegal string was specified.");gn=Rn,this.hasBeenReset=!0}})),Object.defineProperty(Dr,"position",Er({},Br,{get:function(){return bn},set:function(Cn){if(Cn<0||Cn>100)throw new Error("Position must be between 0 and 100.");bn=Cn,this.hasBeenReset=!0}})),Object.defineProperty(Dr,"positionAlign",Er({},Br,{get:function(){return xn},set:function(Cn){const Rn=xr(Cn);if(!Rn)throw new SyntaxError("An invalid or illegal string was specified.");xn=Rn,this.hasBeenReset=!0}})),Object.defineProperty(Dr,"size",Er({},Br,{get:function(){return $n},set:function(Cn){if(Cn<0||Cn>100)throw new Error("Size must be between 0 and 100.");$n=Cn,this.hasBeenReset=!0}})),Object.defineProperty(Dr,"align",Er({},Br,{get:function(){return Sn},set:function(Cn){const Rn=xr(Cn);if(!Rn)throw new SyntaxError("An invalid or illegal string was specified.");Sn=Rn,this.hasBeenReset=!0}})),Dr.displayState=void 0}return Cr.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},Cr}();class StringDecoder{decode(hr,gr){if(!hr)return"";if(typeof hr!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(hr))}}function parseTimeStamp(mr){function hr(vr,xr,Er,Cr){return(vr|0)*3600+(xr|0)*60+(Er|0)+parseFloat(Cr||0)}const gr=mr.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return gr?parseFloat(gr[2])>59?hr(gr[2],gr[3],0,gr[4]):hr(gr[1],gr[2],gr[3],gr[4]):null}class Settings{constructor(){this.values=Object.create(null)}set(hr,gr){!this.get(hr)&&gr!==""&&(this.values[hr]=gr)}get(hr,gr,vr){return vr?this.has(hr)?this.values[hr]:gr[vr]:this.has(hr)?this.values[hr]:gr}has(hr){return hr in this.values}alt(hr,gr,vr){for(let xr=0;xr<vr.length;++xr)if(gr===vr[xr]){this.set(hr,gr);break}}integer(hr,gr){/^-?\d+$/.test(gr)&&this.set(hr,parseInt(gr,10))}percent(hr,gr){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(gr)){const vr=parseFloat(gr);if(vr>=0&&vr<=100)return this.set(hr,vr),!0}return!1}}function parseOptions(mr,hr,gr,vr){const xr=vr?mr.split(vr):[mr];for(const Er in xr){if(typeof xr[Er]!="string")continue;const Cr=xr[Er].split(gr);if(Cr.length!==2)continue;const wr=Cr[0],Rr=Cr[1];hr(wr,Rr)}}const defaults=new VTTCue$1(0,0,""),center=defaults.align==="middle"?"middle":"center";function parseCue(mr,hr,gr){const vr=mr;function xr(){const wr=parseTimeStamp(mr);if(wr===null)throw new Error("Malformed timestamp: "+vr);return mr=mr.replace(/^[^\sa-zA-Z-]+/,""),wr}function Er(wr,Rr){const kr=new Settings;parseOptions(wr,function(Hr,Gr){let qr;switch(Hr){case"region":for(let zr=gr.length-1;zr>=0;zr--)if(gr[zr].id===Gr){kr.set(Hr,gr[zr].region);break}break;case"vertical":kr.alt(Hr,Gr,["rl","lr"]);break;case"line":qr=Gr.split(","),kr.integer(Hr,qr[0]),kr.percent(Hr,qr[0])&&kr.set("snapToLines",!1),kr.alt(Hr,qr[0],["auto"]),qr.length===2&&kr.alt("lineAlign",qr[1],["start",center,"end"]);break;case"position":qr=Gr.split(","),kr.percent(Hr,qr[0]),qr.length===2&&kr.alt("positionAlign",qr[1],["start",center,"end","line-left","line-right","auto"]);break;case"size":kr.percent(Hr,Gr);break;case"align":kr.alt(Hr,Gr,["start",center,"end","left","right"]);break}},/:/,/\s/),Rr.region=kr.get("region",null),Rr.vertical=kr.get("vertical","");let Dr=kr.get("line","auto");Dr==="auto"&&defaults.line===-1&&(Dr=-1),Rr.line=Dr,Rr.lineAlign=kr.get("lineAlign","start"),Rr.snapToLines=kr.get("snapToLines",!0),Rr.size=kr.get("size",100),Rr.align=kr.get("align",center);let Br=kr.get("position","auto");Br==="auto"&&defaults.position===50&&(Br=Rr.align==="start"||Rr.align==="left"?0:Rr.align==="end"||Rr.align==="right"?100:50),Rr.position=Br}function Cr(){mr=mr.replace(/^\s+/,"")}if(Cr(),hr.startTime=xr(),Cr(),mr.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+vr);mr=mr.slice(3),Cr(),hr.endTime=xr(),Cr(),Er(mr,hr)}function fixLineBreaks(mr){return mr.replace(/<br(?: \/)?>/gi,`
`)}class VTTParser{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new StringDecoder,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(hr){const gr=this;hr&&(gr.buffer+=gr.decoder.decode(hr,{stream:!0}));function vr(){let Er=gr.buffer,Cr=0;for(Er=fixLineBreaks(Er);Cr<Er.length&&Er[Cr]!=="\r"&&Er[Cr]!==`
`;)++Cr;const wr=Er.slice(0,Cr);return Er[Cr]==="\r"&&++Cr,Er[Cr]===`
`&&++Cr,gr.buffer=Er.slice(Cr),wr}function xr(Er){parseOptions(Er,function(Cr,wr){},/:/)}try{let Er="";if(gr.state==="INITIAL"){if(!/\r\n|\n/.test(gr.buffer))return this;Er=vr();const wr=Er.match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!(wr!=null&&wr[0]))throw new Error("Malformed WebVTT signature.");gr.state="HEADER"}let Cr=!1;for(;gr.buffer;){if(!/\r\n|\n/.test(gr.buffer))return this;switch(Cr?Cr=!1:Er=vr(),gr.state){case"HEADER":/:/.test(Er)?xr(Er):Er||(gr.state="ID");continue;case"NOTE":Er||(gr.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(Er)){gr.state="NOTE";break}if(!Er)continue;if(gr.cue=new VTTCue$1(0,0,""),gr.state="CUE",Er.indexOf("-->")===-1){gr.cue.id=Er;continue}case"CUE":if(!gr.cue){gr.state="BADCUE";continue}try{parseCue(Er,gr.cue,gr.regionList)}catch{gr.cue=null,gr.state="BADCUE";continue}gr.state="CUETEXT";continue;case"CUETEXT":{const wr=Er.indexOf("-->")!==-1;if(!Er||wr&&(Cr=!0)){gr.oncue&&gr.cue&&gr.oncue(gr.cue),gr.cue=null,gr.state="ID";continue}if(gr.cue===null)continue;gr.cue.text&&(gr.cue.text+=`
`),gr.cue.text+=Er}continue;case"BADCUE":Er||(gr.state="ID")}}}catch{gr.state==="CUETEXT"&&gr.cue&&gr.oncue&&gr.oncue(gr.cue),gr.cue=null,gr.state=gr.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){const hr=this;try{if((hr.cue||hr.state==="HEADER")&&(hr.buffer+=`

`,hr.parse()),hr.state==="INITIAL"||hr.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(gr){hr.onparsingerror&&hr.onparsingerror(gr)}return hr.onflush&&hr.onflush(),this}}const LINEBREAKS=/\r\n|\n\r|\n|\r/g,startsWith=function(hr,gr,vr=0){return hr.slice(vr,vr+gr.length)===gr},cueString2millis=function(hr){let gr=parseInt(hr.slice(-3));const vr=parseInt(hr.slice(-6,-4)),xr=parseInt(hr.slice(-9,-7)),Er=hr.length>9?parseInt(hr.substring(0,hr.indexOf(":"))):0;if(!isFiniteNumber(gr)||!isFiniteNumber(vr)||!isFiniteNumber(xr)||!isFiniteNumber(Er))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${hr}`);return gr+=1e3*vr,gr+=60*1e3*xr,gr+=60*60*1e3*Er,gr},hash=function(hr){let gr=5381,vr=hr.length;for(;vr;)gr=gr*33^hr.charCodeAt(--vr);return(gr>>>0).toString()};function generateCueId(mr,hr,gr){return hash(mr.toString())+hash(hr.toString())+hash(gr)}const calculateOffset=function(hr,gr,vr){let xr=hr[gr],Er=hr[xr.prevCC];if(!Er||!Er.new&&xr.new){hr.ccOffset=hr.presentationOffset=xr.start,xr.new=!1;return}for(;(Cr=Er)!=null&&Cr.new;){var Cr;hr.ccOffset+=xr.start-Er.start,xr.new=!1,xr=Er,Er=hr[xr.prevCC]}hr.presentationOffset=vr};function parseWebVTT(mr,hr,gr,vr,xr,Er,Cr){const wr=new VTTParser,Rr=utf8ArrayToStr(new Uint8Array(mr)).trim().replace(LINEBREAKS,`
`).split(`
`),kr=[],Dr=hr?toMpegTsClockFromTimescale(hr.baseTime,hr.timescale):0;let Br="00:00.000",Hr=0,Gr=0,qr,zr=!0;wr.oncue=function(Qr){const sn=gr[vr];let hn=gr.ccOffset;const vn=(Hr-Dr)/9e4;if(sn!=null&&sn.new&&(Gr!==void 0?hn=gr.ccOffset=sn.start:calculateOffset(gr,vr,vn)),vn){if(!hr){qr=new Error("Missing initPTS for VTT MPEGTS");return}hn=vn-gr.presentationOffset}const yn=Qr.endTime-Qr.startTime,gn=normalizePts((Qr.startTime+hn-Gr)*9e4,xr*9e4)/9e4;Qr.startTime=Math.max(gn,0),Qr.endTime=Math.max(gn+yn,0);const bn=Qr.text.trim();Qr.text=decodeURIComponent(encodeURIComponent(bn)),Qr.id||(Qr.id=generateCueId(Qr.startTime,Qr.endTime,bn)),Qr.endTime>0&&kr.push(Qr)},wr.onparsingerror=function(Qr){qr=Qr},wr.onflush=function(){if(qr){Cr(qr);return}Er(kr)},Rr.forEach(Qr=>{if(zr)if(startsWith(Qr,"X-TIMESTAMP-MAP=")){zr=!1,Qr.slice(16).split(",").forEach(sn=>{startsWith(sn,"LOCAL:")?Br=sn.slice(6):startsWith(sn,"MPEGTS:")&&(Hr=parseInt(sn.slice(7)))});try{Gr=cueString2millis(Br)/1e3}catch(sn){qr=sn}return}else Qr===""&&(zr=!1);wr.parse(Qr+`
`)}),wr.flush()}const IMSC1_CODEC="stpp.ttml.im1t",HMSF_REGEX=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,TIME_UNIT_REGEX=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,textAlignToLineAlign={left:"start",center:"center",right:"end",start:"start",end:"end"};function parseIMSC1(mr,hr,gr,vr){const xr=findBox(new Uint8Array(mr),["mdat"]);if(xr.length===0){vr(new Error("Could not parse IMSC1 mdat"));return}const Er=xr.map(wr=>utf8ArrayToStr(wr)),Cr=toTimescaleFromScale(hr.baseTime,1,hr.timescale);try{Er.forEach(wr=>gr(parseTTML(wr,Cr)))}catch(wr){vr(wr)}}function parseTTML(mr,hr){const xr=new DOMParser().parseFromString(mr,"text/xml").getElementsByTagName("tt")[0];if(!xr)throw new Error("Invalid ttml");const Er={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},Cr=Object.keys(Er).reduce((Br,Hr)=>(Br[Hr]=xr.getAttribute(`ttp:${Hr}`)||Er[Hr],Br),{}),wr=xr.getAttribute("xml:space")!=="preserve",Rr=collectionToDictionary(getElementCollection(xr,"styling","style")),kr=collectionToDictionary(getElementCollection(xr,"layout","region")),Dr=getElementCollection(xr,"body","[begin]");return[].map.call(Dr,Br=>{const Hr=getTextContent(Br,wr);if(!Hr||!Br.hasAttribute("begin"))return null;const Gr=parseTtmlTime(Br.getAttribute("begin"),Cr),qr=parseTtmlTime(Br.getAttribute("dur"),Cr);let zr=parseTtmlTime(Br.getAttribute("end"),Cr);if(Gr===null)throw timestampParsingError(Br);if(zr===null){if(qr===null)throw timestampParsingError(Br);zr=Gr+qr}const Qr=new VTTCue$1(Gr-hr,zr-hr,Hr);Qr.id=generateCueId(Qr.startTime,Qr.endTime,Qr.text);const sn=kr[Br.getAttribute("region")],hn=Rr[Br.getAttribute("style")],vn=getTtmlStyles(sn,hn,Rr),{textAlign:yn}=vn;if(yn){const gn=textAlignToLineAlign[yn];gn&&(Qr.lineAlign=gn),Qr.align=yn}return _extends(Qr,vn),Qr}).filter(Br=>Br!==null)}function getElementCollection(mr,hr,gr){const vr=mr.getElementsByTagName(hr)[0];return vr?[].slice.call(vr.querySelectorAll(gr)):[]}function collectionToDictionary(mr){return mr.reduce((hr,gr)=>{const vr=gr.getAttribute("xml:id");return vr&&(hr[vr]=gr),hr},{})}function getTextContent(mr,hr){return[].slice.call(mr.childNodes).reduce((gr,vr,xr)=>{var Er;return vr.nodeName==="br"&&xr?gr+`
`:(Er=vr.childNodes)!=null&&Er.length?getTextContent(vr,hr):hr?gr+vr.textContent.trim().replace(/\s+/g," "):gr+vr.textContent},"")}function getTtmlStyles(mr,hr,gr){const vr="http://www.w3.org/ns/ttml#styling";let xr=null;const Er=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],Cr=mr!=null&&mr.hasAttribute("style")?mr.getAttribute("style"):null;return Cr&&gr.hasOwnProperty(Cr)&&(xr=gr[Cr]),Er.reduce((wr,Rr)=>{const kr=getAttributeNS(hr,vr,Rr)||getAttributeNS(mr,vr,Rr)||getAttributeNS(xr,vr,Rr);return kr&&(wr[Rr]=kr),wr},{})}function getAttributeNS(mr,hr,gr){return mr&&mr.hasAttributeNS(hr,gr)?mr.getAttributeNS(hr,gr):null}function timestampParsingError(mr){return new Error(`Could not parse ttml timestamp ${mr}`)}function parseTtmlTime(mr,hr){if(!mr)return null;let gr=parseTimeStamp(mr);return gr===null&&(HMSF_REGEX.test(mr)?gr=parseHoursMinutesSecondsFrames(mr,hr):TIME_UNIT_REGEX.test(mr)&&(gr=parseTimeUnits(mr,hr))),gr}function parseHoursMinutesSecondsFrames(mr,hr){const gr=HMSF_REGEX.exec(mr),vr=(gr[4]|0)+(gr[5]|0)/hr.subFrameRate;return(gr[1]|0)*3600+(gr[2]|0)*60+(gr[3]|0)+vr/hr.frameRate}function parseTimeUnits(mr,hr){const gr=TIME_UNIT_REGEX.exec(mr),vr=Number(gr[1]);switch(gr[2]){case"h":return vr*3600;case"m":return vr*60;case"ms":return vr*1e3;case"f":return vr/hr.frameRate;case"t":return vr/hr.tickRate}return vr}class TimelineController{constructor(hr){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=newVTTCCs(),this.captionsProperties=void 0,this.hls=hr,this.config=hr.config,this.Cues=hr.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},hr.on(Events.MEDIA_ATTACHING,this.onMediaAttaching,this),hr.on(Events.MEDIA_DETACHING,this.onMediaDetaching,this),hr.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),hr.on(Events.MANIFEST_LOADED,this.onManifestLoaded,this),hr.on(Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),hr.on(Events.FRAG_LOADING,this.onFragLoading,this),hr.on(Events.FRAG_LOADED,this.onFragLoaded,this),hr.on(Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),hr.on(Events.FRAG_DECRYPTED,this.onFragDecrypted,this),hr.on(Events.INIT_PTS_FOUND,this.onInitPtsFound,this),hr.on(Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),hr.on(Events.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:hr}=this;hr.off(Events.MEDIA_ATTACHING,this.onMediaAttaching,this),hr.off(Events.MEDIA_DETACHING,this.onMediaDetaching,this),hr.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),hr.off(Events.MANIFEST_LOADED,this.onManifestLoaded,this),hr.off(Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),hr.off(Events.FRAG_LOADING,this.onFragLoading,this),hr.off(Events.FRAG_LOADED,this.onFragLoaded,this),hr.off(Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),hr.off(Events.FRAG_DECRYPTED,this.onFragDecrypted,this),hr.off(Events.INIT_PTS_FOUND,this.onInitPtsFound,this),hr.off(Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),hr.off(Events.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){if(this.config.enableCEA708Captions&&(!this.cea608Parser1||!this.cea608Parser2)){const hr=new OutputFilter(this,"textTrack1"),gr=new OutputFilter(this,"textTrack2"),vr=new OutputFilter(this,"textTrack3"),xr=new OutputFilter(this,"textTrack4");this.cea608Parser1=new Cea608Parser(1,hr,gr),this.cea608Parser2=new Cea608Parser(3,vr,xr)}}addCues(hr,gr,vr,xr,Er){let Cr=!1;for(let wr=Er.length;wr--;){const Rr=Er[wr],kr=intersection(Rr[0],Rr[1],gr,vr);if(kr>=0&&(Rr[0]=Math.min(Rr[0],gr),Rr[1]=Math.max(Rr[1],vr),Cr=!0,kr/(vr-gr)>.5))return}if(Cr||Er.push([gr,vr]),this.config.renderTextTracksNatively){const wr=this.captionsTracks[hr];this.Cues.newCue(wr,gr,vr,xr)}else{const wr=this.Cues.newCue(null,gr,vr,xr);this.hls.trigger(Events.CUES_PARSED,{type:"captions",cues:wr,track:hr})}}onInitPtsFound(hr,{frag:gr,id:vr,initPTS:xr,timescale:Er}){const{unparsedVttFrags:Cr}=this;vr==="main"&&(this.initPTS[gr.cc]={baseTime:xr,timescale:Er}),Cr.length&&(this.unparsedVttFrags=[],Cr.forEach(wr=>{this.onFragLoaded(Events.FRAG_LOADED,wr)}))}getExistingTrack(hr,gr){const{media:vr}=this;if(vr)for(let xr=0;xr<vr.textTracks.length;xr++){const Er=vr.textTracks[xr];if(canReuseVttTextTrack(Er,{name:hr,lang:gr,attrs:{}}))return Er}return null}createCaptionsTrack(hr){this.config.renderTextTracksNatively?this.createNativeTrack(hr):this.createNonNativeTrack(hr)}createNativeTrack(hr){if(this.captionsTracks[hr])return;const{captionsProperties:gr,captionsTracks:vr,media:xr}=this,{label:Er,languageCode:Cr}=gr[hr],wr=this.getExistingTrack(Er,Cr);if(wr)vr[hr]=wr,clearCurrentCues(vr[hr]),sendAddTrackEvent(vr[hr],xr);else{const Rr=this.createTextTrack("captions",Er,Cr);Rr&&(Rr[hr]=!0,vr[hr]=Rr)}}createNonNativeTrack(hr){if(this.nonNativeCaptionsTracks[hr])return;const gr=this.captionsProperties[hr];if(!gr)return;const vr=gr.label,xr={_id:hr,label:vr,kind:"captions",default:gr.media?!!gr.media.default:!1,closedCaptions:gr.media};this.nonNativeCaptionsTracks[hr]=xr,this.hls.trigger(Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[xr]})}createTextTrack(hr,gr,vr){const xr=this.media;if(xr)return xr.addTextTrack(hr,gr,vr)}onMediaAttaching(hr,gr){this.media=gr.media,this._cleanTracks()}onMediaDetaching(){const{captionsTracks:hr}=this;Object.keys(hr).forEach(gr=>{clearCurrentCues(hr[gr]),delete hr[gr]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=newVTTCCs(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:hr}=this;if(!hr)return;const gr=hr.textTracks;if(gr)for(let vr=0;vr<gr.length;vr++)clearCurrentCues(gr[vr])}onSubtitleTracksUpdated(hr,gr){const vr=gr.subtitleTracks||[],xr=vr.some(Er=>Er.textCodec===IMSC1_CODEC);if(this.config.enableWebVTT||xr&&this.config.enableIMSC1){if(subtitleOptionsIdentical(this.tracks,vr)){this.tracks=vr;return}if(this.textTracks=[],this.tracks=vr,this.config.renderTextTracksNatively){const Cr=this.media,wr=Cr?filterSubtitleTracks(Cr.textTracks):null;if(this.tracks.forEach((Rr,kr)=>{let Dr;if(wr){let Br=null;for(let Hr=0;Hr<wr.length;Hr++)if(wr[Hr]&&canReuseVttTextTrack(wr[Hr],Rr)){Br=wr[Hr],wr[Hr]=null;break}Br&&(Dr=Br)}if(Dr)clearCurrentCues(Dr);else{const Br=captionsOrSubtitlesFromCharacteristics(Rr);Dr=this.createTextTrack(Br,Rr.name,Rr.lang),Dr&&(Dr.mode="disabled")}Dr&&this.textTracks.push(Dr)}),wr!=null&&wr.length){const Rr=wr.filter(kr=>kr!==null).map(kr=>kr.label);Rr.length&&logger.warn(`Media element contains unused subtitle tracks: ${Rr.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const Cr=this.tracks.map(wr=>({label:wr.name,kind:wr.type.toLowerCase(),default:wr.default,subtitleTrack:wr}));this.hls.trigger(Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:Cr})}}}onManifestLoaded(hr,gr){this.config.enableCEA708Captions&&gr.captions&&gr.captions.forEach(vr=>{const xr=/(?:CC|SERVICE)([1-4])/.exec(vr.instreamId);if(!xr)return;const Er=`textTrack${xr[1]}`,Cr=this.captionsProperties[Er];Cr&&(Cr.label=vr.name,vr.lang&&(Cr.languageCode=vr.lang),Cr.media=vr)})}closedCaptionsForLevel(hr){const gr=this.hls.levels[hr.level];return gr?.attrs["CLOSED-CAPTIONS"]}onFragLoading(hr,gr){if(this.enabled&&gr.frag.type===PlaylistLevelType.MAIN){var vr,xr;const{cea608Parser1:Er,cea608Parser2:Cr,lastSn:wr}=this,{cc:Rr,sn:kr}=gr.frag,Dr=(vr=(xr=gr.part)==null?void 0:xr.index)!=null?vr:-1;Er&&Cr&&(kr!==wr+1||kr===wr&&Dr!==this.lastPartIndex+1||Rr!==this.lastCc)&&(Er.reset(),Cr.reset()),this.lastCc=Rr,this.lastSn=kr,this.lastPartIndex=Dr}}onFragLoaded(hr,gr){const{frag:vr,payload:xr}=gr;if(vr.type===PlaylistLevelType.SUBTITLE)if(xr.byteLength){const Er=vr.decryptdata,Cr="stats"in gr;if(Er==null||!Er.encrypted||Cr){const wr=this.tracks[vr.level],Rr=this.vttCCs;Rr[vr.cc]||(Rr[vr.cc]={start:vr.start,prevCC:this.prevCC,new:!0},this.prevCC=vr.cc),wr&&wr.textCodec===IMSC1_CODEC?this._parseIMSC1(vr,xr):this._parseVTTs(gr)}}else this.hls.trigger(Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:vr,error:new Error("Empty subtitle payload")})}_parseIMSC1(hr,gr){const vr=this.hls;parseIMSC1(gr,this.initPTS[hr.cc],xr=>{this._appendCues(xr,hr.level),vr.trigger(Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:hr})},xr=>{logger.log(`Failed to parse IMSC1: ${xr}`),vr.trigger(Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:hr,error:xr})})}_parseVTTs(hr){var gr;const{frag:vr,payload:xr}=hr,{initPTS:Er,unparsedVttFrags:Cr}=this,wr=Er.length-1;if(!Er[vr.cc]&&wr===-1){Cr.push(hr);return}const Rr=this.hls,kr=(gr=vr.initSegment)!=null&&gr.data?appendUint8Array(vr.initSegment.data,new Uint8Array(xr)):xr;parseWebVTT(kr,this.initPTS[vr.cc],this.vttCCs,vr.cc,vr.start,Dr=>{this._appendCues(Dr,vr.level),Rr.trigger(Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:vr})},Dr=>{const Br=Dr.message==="Missing initPTS for VTT MPEGTS";Br?Cr.push(hr):this._fallbackToIMSC1(vr,xr),logger.log(`Failed to parse VTT cue: ${Dr}`),!(Br&&wr>vr.cc)&&Rr.trigger(Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:vr,error:Dr})})}_fallbackToIMSC1(hr,gr){const vr=this.tracks[hr.level];vr.textCodec||parseIMSC1(gr,this.initPTS[hr.cc],()=>{vr.textCodec=IMSC1_CODEC,this._parseIMSC1(hr,gr)},()=>{vr.textCodec="wvtt"})}_appendCues(hr,gr){const vr=this.hls;if(this.config.renderTextTracksNatively){const xr=this.textTracks[gr];if(!xr||xr.mode==="disabled")return;hr.forEach(Er=>addCueToTrack(xr,Er))}else{const xr=this.tracks[gr];if(!xr)return;const Er=xr.default?"default":"subtitles"+gr;vr.trigger(Events.CUES_PARSED,{type:"subtitles",cues:hr,track:Er})}}onFragDecrypted(hr,gr){const{frag:vr}=gr;vr.type===PlaylistLevelType.SUBTITLE&&this.onFragLoaded(Events.FRAG_LOADED,gr)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(hr,gr){this.initCea608Parsers();const{cea608Parser1:vr,cea608Parser2:xr}=this;if(!this.enabled||!vr||!xr)return;const{frag:Er,samples:Cr}=gr;if(!(Er.type===PlaylistLevelType.MAIN&&this.closedCaptionsForLevel(Er)==="NONE"))for(let wr=0;wr<Cr.length;wr++){const Rr=Cr[wr].bytes;if(Rr){const kr=this.extractCea608Data(Rr);vr.addData(Cr[wr].pts,kr[0]),xr.addData(Cr[wr].pts,kr[1])}}}onBufferFlushing(hr,{startOffset:gr,endOffset:vr,endOffsetSubtitles:xr,type:Er}){const{media:Cr}=this;if(!(!Cr||Cr.currentTime<vr)){if(!Er||Er==="video"){const{captionsTracks:wr}=this;Object.keys(wr).forEach(Rr=>removeCuesInRange(wr[Rr],gr,vr))}if(this.config.renderTextTracksNatively&&gr===0&&xr!==void 0){const{textTracks:wr}=this;Object.keys(wr).forEach(Rr=>removeCuesInRange(wr[Rr],gr,xr))}}}extractCea608Data(hr){const gr=[[],[]],vr=hr[0]&31;let xr=2;for(let Er=0;Er<vr;Er++){const Cr=hr[xr++],wr=127&hr[xr++],Rr=127&hr[xr++];if(wr===0&&Rr===0)continue;if((4&Cr)!==0){const Dr=3&Cr;(Dr===0||Dr===1)&&(gr[Dr].push(wr),gr[Dr].push(Rr))}}return gr}}function captionsOrSubtitlesFromCharacteristics(mr){return mr.characteristics&&/transcribes-spoken-dialog/gi.test(mr.characteristics)&&/describes-music-and-sound/gi.test(mr.characteristics)?"captions":"subtitles"}function canReuseVttTextTrack(mr,hr){return!!mr&&mr.kind===captionsOrSubtitlesFromCharacteristics(hr)&&subtitleTrackMatchesTextTrack(hr,mr)}function intersection(mr,hr,gr,vr){return Math.min(hr,vr)-Math.max(mr,gr)}function newVTTCCs(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}class CapLevelController{constructor(hr){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=hr,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(hr){this.streamController=hr}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:hr}=this;hr.on(Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),hr.on(Events.MEDIA_ATTACHING,this.onMediaAttaching,this),hr.on(Events.MANIFEST_PARSED,this.onManifestParsed,this),hr.on(Events.LEVELS_UPDATED,this.onLevelsUpdated,this),hr.on(Events.BUFFER_CODECS,this.onBufferCodecs,this),hr.on(Events.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:hr}=this;hr.off(Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),hr.off(Events.MEDIA_ATTACHING,this.onMediaAttaching,this),hr.off(Events.MANIFEST_PARSED,this.onManifestParsed,this),hr.off(Events.LEVELS_UPDATED,this.onLevelsUpdated,this),hr.off(Events.BUFFER_CODECS,this.onBufferCodecs,this),hr.off(Events.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(hr,gr){const vr=this.hls.levels[gr.droppedLevel];this.isLevelAllowed(vr)&&this.restrictedLevels.push({bitrate:vr.bitrate,height:vr.height,width:vr.width})}onMediaAttaching(hr,gr){this.media=gr.media instanceof HTMLVideoElement?gr.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(hr,gr){const vr=this.hls;this.restrictedLevels=[],this.firstLevel=gr.firstLevel,vr.config.capLevelToPlayerSize&&gr.video&&this.startCapping()}onLevelsUpdated(hr,gr){this.timer&&isFiniteNumber(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(hr,gr){this.hls.config.capLevelToPlayerSize&&gr.video&&this.startCapping()}onMediaDetaching(){this.stopCapping()}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0){this.clientRect=null;return}const hr=this.hls.levels;if(hr.length){const gr=this.hls,vr=this.getMaxLevel(hr.length-1);vr!==this.autoLevelCapping&&logger.log(`Setting autoLevelCapping to ${vr}: ${hr[vr].height}p@${hr[vr].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),gr.autoLevelCapping=vr,gr.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=gr.autoLevelCapping}}}getMaxLevel(hr){const gr=this.hls.levels;if(!gr.length)return-1;const vr=gr.filter((xr,Er)=>this.isLevelAllowed(xr)&&Er<=hr);return this.clientRect=null,CapLevelController.getMaxLevelByMediaSize(vr,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const hr=this.media,gr={width:0,height:0};if(hr){const vr=hr.getBoundingClientRect();gr.width=vr.width,gr.height=vr.height,!gr.width&&!gr.height&&(gr.width=vr.right-vr.left||hr.width||0,gr.height=vr.bottom-vr.top||hr.height||0)}return this.clientRect=gr,gr}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let hr=1;if(!this.hls.config.ignoreDevicePixelRatio)try{hr=self.devicePixelRatio}catch{}return hr}isLevelAllowed(hr){return!this.restrictedLevels.some(vr=>hr.bitrate===vr.bitrate&&hr.width===vr.width&&hr.height===vr.height)}static getMaxLevelByMediaSize(hr,gr,vr){if(!(hr!=null&&hr.length))return-1;const xr=(wr,Rr)=>Rr?wr.width!==Rr.width||wr.height!==Rr.height:!0;let Er=hr.length-1;const Cr=Math.max(gr,vr);for(let wr=0;wr<hr.length;wr+=1){const Rr=hr[wr];if((Rr.width>=Cr||Rr.height>=Cr)&&xr(Rr,hr[wr+1])){Er=wr;break}}return Er}}class FPSController{constructor(hr){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=hr,this.registerListeners()}setStreamController(hr){this.streamController=hr}registerListeners(){this.hls.on(Events.MEDIA_ATTACHING,this.onMediaAttaching,this)}unregisterListeners(){this.hls.off(Events.MEDIA_ATTACHING,this.onMediaAttaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(hr,gr){const vr=this.hls.config;if(vr.capLevelOnFPSDrop){const xr=gr.media instanceof self.HTMLVideoElement?gr.media:null;this.media=xr,xr&&typeof xr.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),vr.fpsDroppedMonitoringPeriod)}}checkFPS(hr,gr,vr){const xr=performance.now();if(gr){if(this.lastTime){const Er=xr-this.lastTime,Cr=vr-this.lastDroppedFrames,wr=gr-this.lastDecodedFrames,Rr=1e3*Cr/Er,kr=this.hls;if(kr.trigger(Events.FPS_DROP,{currentDropped:Cr,currentDecoded:wr,totalDroppedFrames:vr}),Rr>0&&Cr>kr.config.fpsDroppedMonitoringThreshold*wr){let Dr=kr.currentLevel;logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+Dr),Dr>0&&(kr.autoLevelCapping===-1||kr.autoLevelCapping>=Dr)&&(Dr=Dr-1,kr.trigger(Events.FPS_DROP_LEVEL_CAPPING,{level:Dr,droppedLevel:kr.currentLevel}),kr.autoLevelCapping=Dr,this.streamController.nextLevelSwitch())}}this.lastTime=xr,this.lastDroppedFrames=vr,this.lastDecodedFrames=gr}}checkFPSInterval(){const hr=this.media;if(hr)if(this.isVideoPlaybackQualityAvailable){const gr=hr.getVideoPlaybackQuality();this.checkFPS(hr,gr.totalVideoFrames,gr.droppedVideoFrames)}else this.checkFPS(hr,hr.webkitDecodedFrameCount,hr.webkitDroppedFrameCount)}}const LOGGER_PREFIX="[eme]";class EMEController{constructor(hr){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=EMEController.CDMCleanupPromise?[EMEController.CDMCleanupPromise]:[],this.debug=logger.debug.bind(logger,LOGGER_PREFIX),this.log=logger.log.bind(logger,LOGGER_PREFIX),this.warn=logger.warn.bind(logger,LOGGER_PREFIX),this.error=logger.error.bind(logger,LOGGER_PREFIX),this.onMediaEncrypted=gr=>{const{initDataType:vr,initData:xr}=gr,Er=`"${gr.type}" event: init data type: "${vr}"`;if(this.debug(Er),xr!==null){if(!this.keyFormatPromise){let Cr=Object.keys(this.keySystemAccessPromises);Cr.length||(Cr=getKeySystemsForConfig(this.config));const wr=Cr.map(keySystemDomainToKeySystemFormat).filter(Rr=>!!Rr);this.keyFormatPromise=this.getKeyFormatPromise(wr)}this.keyFormatPromise.then(Cr=>{const wr=keySystemFormatToKeySystemDomain(Cr);let Rr,kr;if(vr==="sinf"){if(wr!==KeySystems.FAIRPLAY){this.warn(`Ignoring unexpected "${gr.type}" event with init data type: "${vr}" for selected key-system ${wr}`);return}const qr=bin2str(new Uint8Array(xr));try{const zr=base64Decode(JSON.parse(qr).sinf),Qr=parseSinf(zr);if(!Qr)throw new Error("'schm' box missing or not cbcs/cenc with schi > tenc");Rr=Qr.subarray(8,24),kr=KeySystems.FAIRPLAY}catch(zr){this.warn(`${Er} Failed to parse sinf: ${zr}`);return}}else{if(wr!==KeySystems.WIDEVINE&&wr!==KeySystems.PLAYREADY){this.warn(`Ignoring unexpected "${gr.type}" event with init data type: "${vr}" for selected key-system ${wr}`);return}const qr=parseMultiPssh(xr),zr=qr.filter(sn=>!!sn.systemId&&keySystemIdToKeySystemDomain(sn.systemId)===wr);zr.length>1&&this.warn(`${Er} Using first of ${zr.length} pssh found for selected key-system ${wr}`);const Qr=zr[0];if(!Qr){qr.length===0||qr.some(sn=>!sn.systemId)?this.warn(`${Er} contains incomplete or invalid pssh data`):this.log(`ignoring ${Er} for ${qr.map(sn=>keySystemIdToKeySystemDomain(sn.systemId)).join(",")} pssh data in favor of playlist keys`);return}if(kr=keySystemIdToKeySystemDomain(Qr.systemId),Qr.version===0&&Qr.data)if(kr===KeySystems.WIDEVINE){const sn=Qr.data.length-22;Rr=Qr.data.subarray(sn,sn+16)}else kr===KeySystems.PLAYREADY&&(Rr=parsePlayReadyWRM(Qr.data))}if(!kr||!Rr){this.log(`Unable to handle ${Er} with key-system ${wr}`);return}const Dr=Hex.hexDump(Rr),{keyIdToKeySessionPromise:Br,mediaKeySessions:Hr}=this;let Gr=Br[Dr];for(let qr=0;qr<Hr.length;qr++){const zr=Hr[qr],Qr=zr.decryptdata;if(!Qr.keyId)continue;const sn=Hex.hexDump(Qr.keyId);if(Dr===sn||Qr.uri.replace(/-/g,"").indexOf(Dr)!==-1){if(Gr=Br[sn],Qr.pssh)break;delete Br[sn],Qr.pssh=new Uint8Array(xr),Qr.keyId=Rr,Gr=Br[Dr]=Gr.then(()=>this.generateRequestWithPreferredKeySession(zr,vr,xr,"encrypted-event-key-match")),Gr.catch(hn=>this.handleError(hn));break}}if(!Gr){if(kr!==wr){this.log(`Ignoring "${Er}" with ${kr} init data for selected key-system ${wr}`);return}Gr=Br[Dr]=this.getKeySystemSelectionPromise([kr]).then(({keySystem:qr,mediaKeys:zr})=>{var Qr;this.throwIfDestroyed();const sn=new LevelKey("ISO-23001-7",Dr,(Qr=keySystemDomainToKeySystemFormat(qr))!=null?Qr:"");return sn.pssh=new Uint8Array(xr),sn.keyId=Rr,this.attemptSetMediaKeys(qr,zr).then(()=>{this.throwIfDestroyed();const hn=this.createMediaKeySessionContext({decryptdata:sn,keySystem:qr,mediaKeys:zr});return this.generateRequestWithPreferredKeySession(hn,vr,xr,"encrypted-event-no-match")})}),Gr.catch(qr=>this.handleError(qr))}})}},this.onWaitingForKey=gr=>{this.log(`"${gr.type}" event`)},this.hls=hr,this.config=hr.config,this.registerListeners()}destroy(){this.unregisterListeners(),this.onMediaDetached();const hr=this.config;hr.requestMediaKeySystemAccessFunc=null,hr.licenseXhrSetup=hr.licenseResponseCallback=void 0,hr.drmSystems=hr.drmSystemOptions={},this.hls=this.config=this.keyIdToKeySessionPromise=null,this.onMediaEncrypted=this.onWaitingForKey=null}registerListeners(){this.hls.on(Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(Events.MANIFEST_LOADED,this.onManifestLoaded,this)}unregisterListeners(){this.hls.off(Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(Events.MANIFEST_LOADED,this.onManifestLoaded,this)}getLicenseServerUrl(hr){const{drmSystems:gr,widevineLicenseUrl:vr}=this.config,xr=gr[hr];if(xr)return xr.licenseUrl;if(hr===KeySystems.WIDEVINE&&vr)return vr}getLicenseServerUrlOrThrow(hr){const gr=this.getLicenseServerUrl(hr);if(gr===void 0)throw new Error(`no license server URL configured for key-system "${hr}"`);return gr}getServerCertificateUrl(hr){const{drmSystems:gr}=this.config,vr=gr[hr];if(vr)return vr.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${hr}"]`)}attemptKeySystemAccess(hr){const gr=this.hls.levels,vr=(Cr,wr,Rr)=>!!Cr&&Rr.indexOf(Cr)===wr,xr=gr.map(Cr=>Cr.audioCodec).filter(vr),Er=gr.map(Cr=>Cr.videoCodec).filter(vr);return xr.length+Er.length===0&&Er.push("avc1.42e01e"),new Promise((Cr,wr)=>{const Rr=kr=>{const Dr=kr.shift();this.getMediaKeysPromise(Dr,xr,Er).then(Br=>Cr({keySystem:Dr,mediaKeys:Br})).catch(Br=>{kr.length?Rr(kr):Br instanceof EMEKeyError?wr(Br):wr(new EMEKeyError({type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_NO_ACCESS,error:Br,fatal:!0},Br.message))})};Rr(hr)})}requestMediaKeySystemAccess(hr,gr){const{requestMediaKeySystemAccessFunc:vr}=this.config;if(typeof vr!="function"){let xr=`Configured requestMediaKeySystemAccess is not a function ${vr}`;return requestMediaKeySystemAccess===null&&self.location.protocol==="http:"&&(xr=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(xr))}return vr(hr,gr)}getMediaKeysPromise(hr,gr,vr){const xr=getSupportedMediaKeySystemConfigurations(hr,gr,vr,this.config.drmSystemOptions),Er=this.keySystemAccessPromises[hr];let Cr=Er?.keySystemAccess;if(!Cr){this.log(`Requesting encrypted media "${hr}" key-system access with config: ${JSON.stringify(xr)}`),Cr=this.requestMediaKeySystemAccess(hr,xr);const wr=this.keySystemAccessPromises[hr]={keySystemAccess:Cr};return Cr.catch(Rr=>{this.log(`Failed to obtain access to key-system "${hr}": ${Rr}`)}),Cr.then(Rr=>{this.log(`Access for key-system "${Rr.keySystem}" obtained`);const kr=this.fetchServerCertificate(hr);return this.log(`Create media-keys for "${hr}"`),wr.mediaKeys=Rr.createMediaKeys().then(Dr=>(this.log(`Media-keys created for "${hr}"`),kr.then(Br=>Br?this.setMediaKeysServerCertificate(Dr,hr,Br):Dr))),wr.mediaKeys.catch(Dr=>{this.error(`Failed to create media-keys for "${hr}"}: ${Dr}`)}),wr.mediaKeys})}return Cr.then(()=>Er.mediaKeys)}createMediaKeySessionContext({decryptdata:hr,keySystem:gr,mediaKeys:vr}){this.log(`Creating key-system session "${gr}" keyId: ${Hex.hexDump(hr.keyId||[])}`);const xr=vr.createSession(),Er={decryptdata:hr,keySystem:gr,mediaKeys:vr,mediaKeysSession:xr,keyStatus:"status-pending"};return this.mediaKeySessions.push(Er),Er}renewKeySession(hr){const gr=hr.decryptdata;if(gr.pssh){const vr=this.createMediaKeySessionContext(hr),xr=this.getKeyIdString(gr),Er="cenc";this.keyIdToKeySessionPromise[xr]=this.generateRequestWithPreferredKeySession(vr,Er,gr.pssh,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(hr)}getKeyIdString(hr){if(!hr)throw new Error("Could not read keyId of undefined decryptdata");if(hr.keyId===null)throw new Error("keyId is null");return Hex.hexDump(hr.keyId)}updateKeySession(hr,gr){var vr;const xr=hr.mediaKeysSession;return this.log(`Updating key-session "${xr.sessionId}" for keyID ${Hex.hexDump(((vr=hr.decryptdata)==null?void 0:vr.keyId)||[])}
      } (data length: ${gr&&gr.byteLength})`),xr.update(gr)}selectKeySystemFormat(hr){const gr=Object.keys(hr.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${hr.sn} ${hr.type}: ${hr.level}) key formats ${gr.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(gr)),this.keyFormatPromise}getKeyFormatPromise(hr){return new Promise((gr,vr)=>{const xr=getKeySystemsForConfig(this.config),Er=hr.map(keySystemFormatToKeySystemDomain).filter(Cr=>!!Cr&&xr.indexOf(Cr)!==-1);return this.getKeySystemSelectionPromise(Er).then(({keySystem:Cr})=>{const wr=keySystemDomainToKeySystemFormat(Cr);wr?gr(wr):vr(new Error(`Unable to find format for key-system "${Cr}"`))}).catch(vr)})}loadKey(hr){const gr=hr.keyInfo.decryptdata,vr=this.getKeyIdString(gr),xr=`(keyId: ${vr} format: "${gr.keyFormat}" method: ${gr.method} uri: ${gr.uri})`;this.log(`Starting session for key ${xr}`);let Er=this.keyIdToKeySessionPromise[vr];return Er||(Er=this.keyIdToKeySessionPromise[vr]=this.getKeySystemForKeyPromise(gr).then(({keySystem:Cr,mediaKeys:wr})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${hr.frag.sn} ${hr.frag.type}: ${hr.frag.level} using key ${xr}`),this.attemptSetMediaKeys(Cr,wr).then(()=>{this.throwIfDestroyed();const Rr=this.createMediaKeySessionContext({keySystem:Cr,mediaKeys:wr,decryptdata:gr});return this.generateRequestWithPreferredKeySession(Rr,"cenc",gr.pssh,"playlist-key")}))),Er.catch(Cr=>this.handleError(Cr))),Er}throwIfDestroyed(hr="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(hr){this.hls&&(this.error(hr.message),hr instanceof EMEKeyError?this.hls.trigger(Events.ERROR,hr.data):this.hls.trigger(Events.ERROR,{type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_NO_KEYS,error:hr,fatal:!0}))}getKeySystemForKeyPromise(hr){const gr=this.getKeyIdString(hr),vr=this.keyIdToKeySessionPromise[gr];if(!vr){const xr=keySystemFormatToKeySystemDomain(hr.keyFormat),Er=xr?[xr]:getKeySystemsForConfig(this.config);return this.attemptKeySystemAccess(Er)}return vr}getKeySystemSelectionPromise(hr){if(hr.length||(hr=getKeySystemsForConfig(this.config)),hr.length===0)throw new EMEKeyError({type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${JSON.stringify({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(hr)}attemptSetMediaKeys(hr,gr){const vr=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${hr}"`);const xr=Promise.all(vr).then(()=>{if(!this.media)throw new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(gr)});return this.setMediaKeysQueue.push(xr),xr.then(()=>{this.log(`Media-keys set for "${hr}"`),vr.push(xr),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(Er=>vr.indexOf(Er)===-1)})}generateRequestWithPreferredKeySession(hr,gr,vr,xr){var Er,Cr;const wr=(Er=this.config.drmSystems)==null||(Cr=Er[hr.keySystem])==null?void 0:Cr.generateRequest;if(wr)try{const qr=wr.call(this.hls,gr,vr,hr);if(!qr)throw new Error("Invalid response from configured generateRequest filter");gr=qr.initDataType,vr=hr.decryptdata.pssh=qr.initData?new Uint8Array(qr.initData):null}catch(qr){var Rr;if(this.warn(qr.message),(Rr=this.hls)!=null&&Rr.config.debug)throw qr}if(vr===null)return this.log(`Skipping key-session request for "${xr}" (no initData)`),Promise.resolve(hr);const kr=this.getKeyIdString(hr.decryptdata);this.log(`Generating key-session request for "${xr}": ${kr} (init data type: ${gr} length: ${vr?vr.byteLength:null})`);const Dr=new EventEmitter,Br=hr._onmessage=qr=>{const zr=hr.mediaKeysSession;if(!zr){Dr.emit("error",new Error("invalid state"));return}const{messageType:Qr,message:sn}=qr;this.log(`"${Qr}" message event for session "${zr.sessionId}" message size: ${sn.byteLength}`),Qr==="license-request"||Qr==="license-renewal"?this.renewLicense(hr,sn).catch(hn=>{this.handleError(hn),Dr.emit("error",hn)}):Qr==="license-release"?hr.keySystem===KeySystems.FAIRPLAY&&(this.updateKeySession(hr,strToUtf8array("acknowledged")),this.removeSession(hr)):this.warn(`unhandled media key message type "${Qr}"`)},Hr=hr._onkeystatuseschange=qr=>{if(!hr.mediaKeysSession){Dr.emit("error",new Error("invalid state"));return}this.onKeyStatusChange(hr);const Qr=hr.keyStatus;Dr.emit("keyStatus",Qr),Qr==="expired"&&(this.warn(`${hr.keySystem} expired for key ${kr}`),this.renewKeySession(hr))};hr.mediaKeysSession.addEventListener("message",Br),hr.mediaKeysSession.addEventListener("keystatuseschange",Hr);const Gr=new Promise((qr,zr)=>{Dr.on("error",zr),Dr.on("keyStatus",Qr=>{Qr.startsWith("usable")?qr():Qr==="output-restricted"?zr(new EMEKeyError({type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):Qr==="internal-error"?zr(new EMEKeyError({type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},`key status changed to "${Qr}"`)):Qr==="expired"?zr(new Error("key expired while generating request")):this.warn(`unhandled key status change "${Qr}"`)})});return hr.mediaKeysSession.generateRequest(gr,vr).then(()=>{var qr;this.log(`Request generated for key-session "${(qr=hr.mediaKeysSession)==null?void 0:qr.sessionId}" keyId: ${kr}`)}).catch(qr=>{throw new EMEKeyError({type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_NO_SESSION,error:qr,fatal:!1},`Error generating key-session request: ${qr}`)}).then(()=>Gr).catch(qr=>{throw Dr.removeAllListeners(),this.removeSession(hr),qr}).then(()=>(Dr.removeAllListeners(),hr))}onKeyStatusChange(hr){hr.mediaKeysSession.keyStatuses.forEach((gr,vr)=>{this.log(`key status change "${gr}" for keyStatuses keyId: ${Hex.hexDump("buffer"in vr?new Uint8Array(vr.buffer,vr.byteOffset,vr.byteLength):new Uint8Array(vr))} session keyId: ${Hex.hexDump(new Uint8Array(hr.decryptdata.keyId||[]))} uri: ${hr.decryptdata.uri}`),hr.keyStatus=gr})}fetchServerCertificate(hr){const gr=this.config,vr=gr.loader,xr=new vr(gr),Er=this.getServerCertificateUrl(hr);return Er?(this.log(`Fetching server certificate for "${hr}"`),new Promise((Cr,wr)=>{const Rr={responseType:"arraybuffer",url:Er},kr=gr.certLoadPolicy.default,Dr={loadPolicy:kr,timeout:kr.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},Br={onSuccess:(Hr,Gr,qr,zr)=>{Cr(Hr.data)},onError:(Hr,Gr,qr,zr)=>{wr(new EMEKeyError({type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:qr,response:_objectSpread2({url:Rr.url,data:void 0},Hr)},`"${hr}" certificate request failed (${Er}). Status: ${Hr.code} (${Hr.text})`))},onTimeout:(Hr,Gr,qr)=>{wr(new EMEKeyError({type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:qr,response:{url:Rr.url,data:void 0}},`"${hr}" certificate request timed out (${Er})`))},onAbort:(Hr,Gr,qr)=>{wr(new Error("aborted"))}};xr.load(Rr,Dr,Br)})):Promise.resolve()}setMediaKeysServerCertificate(hr,gr,vr){return new Promise((xr,Er)=>{hr.setServerCertificate(vr).then(Cr=>{this.log(`setServerCertificate ${Cr?"success":"not supported by CDM"} (${vr?.byteLength}) on "${gr}"`),xr(hr)}).catch(Cr=>{Er(new EMEKeyError({type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:Cr,fatal:!0},Cr.message))})})}renewLicense(hr,gr){return this.requestLicense(hr,new Uint8Array(gr)).then(vr=>this.updateKeySession(hr,new Uint8Array(vr)).catch(xr=>{throw new EMEKeyError({type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:xr,fatal:!0},xr.message)}))}unpackPlayReadyKeyMessage(hr,gr){const vr=String.fromCharCode.apply(null,new Uint16Array(gr.buffer));if(!vr.includes("PlayReadyKeyMessage"))return hr.setRequestHeader("Content-Type","text/xml; charset=utf-8"),gr;const xr=new DOMParser().parseFromString(vr,"application/xml"),Er=xr.querySelectorAll("HttpHeader");if(Er.length>0){let Dr;for(let Br=0,Hr=Er.length;Br<Hr;Br++){var Cr,wr;Dr=Er[Br];const Gr=(Cr=Dr.querySelector("name"))==null?void 0:Cr.textContent,qr=(wr=Dr.querySelector("value"))==null?void 0:wr.textContent;Gr&&qr&&hr.setRequestHeader(Gr,qr)}}const Rr=xr.querySelector("Challenge"),kr=Rr?.textContent;if(!kr)throw new Error("Cannot find <Challenge> in key message");return strToUtf8array(atob(kr))}setupLicenseXHR(hr,gr,vr,xr){const Er=this.config.licenseXhrSetup;return Er?Promise.resolve().then(()=>{if(!vr.decryptdata)throw new Error("Key removed");return Er.call(this.hls,hr,gr,vr,xr)}).catch(Cr=>{if(!vr.decryptdata)throw Cr;return hr.open("POST",gr,!0),Er.call(this.hls,hr,gr,vr,xr)}).then(Cr=>(hr.readyState||hr.open("POST",gr,!0),{xhr:hr,licenseChallenge:Cr||xr})):(hr.open("POST",gr,!0),Promise.resolve({xhr:hr,licenseChallenge:xr}))}requestLicense(hr,gr){const vr=this.config.keyLoadPolicy.default;return new Promise((xr,Er)=>{const Cr=this.getLicenseServerUrlOrThrow(hr.keySystem);this.log(`Sending license request to URL: ${Cr}`);const wr=new XMLHttpRequest;wr.responseType="arraybuffer",wr.onreadystatechange=()=>{if(!this.hls||!hr.mediaKeysSession)return Er(new Error("invalid state"));if(wr.readyState===4)if(wr.status===200){this._requestLicenseFailureCount=0;let Rr=wr.response;this.log(`License received ${Rr instanceof ArrayBuffer?Rr.byteLength:Rr}`);const kr=this.config.licenseResponseCallback;if(kr)try{Rr=kr.call(this.hls,wr,Cr,hr)}catch(Dr){this.error(Dr)}xr(Rr)}else{const Rr=vr.errorRetry,kr=Rr?Rr.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>kr||wr.status>=400&&wr.status<500)Er(new EMEKeyError({type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:wr,response:{url:Cr,data:void 0,code:wr.status,text:wr.statusText}},`License Request XHR failed (${Cr}). Status: ${wr.status} (${wr.statusText})`));else{const Dr=kr-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${Dr} attempts left`),this.requestLicense(hr,gr).then(xr,Er)}}},hr.licenseXhr&&hr.licenseXhr.readyState!==XMLHttpRequest.DONE&&hr.licenseXhr.abort(),hr.licenseXhr=wr,this.setupLicenseXHR(wr,Cr,hr,gr).then(({xhr:Rr,licenseChallenge:kr})=>{hr.keySystem==KeySystems.PLAYREADY&&(kr=this.unpackPlayReadyKeyMessage(Rr,kr)),Rr.send(kr)})})}onMediaAttached(hr,gr){if(!this.config.emeEnabled)return;const vr=gr.media;this.media=vr,vr.removeEventListener("encrypted",this.onMediaEncrypted),vr.removeEventListener("waitingforkey",this.onWaitingForKey),vr.addEventListener("encrypted",this.onMediaEncrypted),vr.addEventListener("waitingforkey",this.onWaitingForKey)}onMediaDetached(){const hr=this.media,gr=this.mediaKeySessions;hr&&(hr.removeEventListener("encrypted",this.onMediaEncrypted),hr.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},LevelKey.clearKeyUriToKeyIdMap();const vr=gr.length;EMEController.CDMCleanupPromise=Promise.all(gr.map(xr=>this.removeSession(xr)).concat(hr?.setMediaKeys(null).catch(xr=>{this.log(`Could not clear media keys: ${xr}`)}))).then(()=>{vr&&(this.log("finished closing key sessions and clearing media keys"),gr.length=0)}).catch(xr=>{this.log(`Could not close sessions and clear media keys: ${xr}`)})}onManifestLoading(){this.keyFormatPromise=null}onManifestLoaded(hr,{sessionKeys:gr}){if(!(!gr||!this.config.emeEnabled)&&!this.keyFormatPromise){const vr=gr.reduce((xr,Er)=>(xr.indexOf(Er.keyFormat)===-1&&xr.push(Er.keyFormat),xr),[]);this.log(`Selecting key-system from session-keys ${vr.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(vr)}}removeSession(hr){const{mediaKeysSession:gr,licenseXhr:vr}=hr;if(gr){this.log(`Remove licenses and keys and close session ${gr.sessionId}`),hr._onmessage&&(gr.removeEventListener("message",hr._onmessage),hr._onmessage=void 0),hr._onkeystatuseschange&&(gr.removeEventListener("keystatuseschange",hr._onkeystatuseschange),hr._onkeystatuseschange=void 0),vr&&vr.readyState!==XMLHttpRequest.DONE&&vr.abort(),hr.mediaKeysSession=hr.decryptdata=hr.licenseXhr=void 0;const xr=this.mediaKeySessions.indexOf(hr);return xr>-1&&this.mediaKeySessions.splice(xr,1),gr.remove().catch(Er=>{this.log(`Could not remove session: ${Er}`)}).then(()=>gr.close()).catch(Er=>{this.log(`Could not close session: ${Er}`)})}}}EMEController.CDMCleanupPromise=void 0;class EMEKeyError extends Error{constructor(hr,gr){super(gr),this.data=void 0,hr.error||(hr.error=new Error(gr)),this.data=hr,hr.err=hr.error}}var CmObjectType;(function(mr){mr.MANIFEST="m",mr.AUDIO="a",mr.VIDEO="v",mr.MUXED="av",mr.INIT="i",mr.CAPTION="c",mr.TIMED_TEXT="tt",mr.KEY="k",mr.OTHER="o"})(CmObjectType||(CmObjectType={}));var CmStreamingFormat;(function(mr){mr.DASH="d",mr.HLS="h",mr.SMOOTH="s",mr.OTHER="o"})(CmStreamingFormat||(CmStreamingFormat={}));var CmcdHeaderField;(function(mr){mr.OBJECT="CMCD-Object",mr.REQUEST="CMCD-Request",mr.SESSION="CMCD-Session",mr.STATUS="CMCD-Status"})(CmcdHeaderField||(CmcdHeaderField={}));const CmcdHeaderMap={[CmcdHeaderField.OBJECT]:["br","d","ot","tb"],[CmcdHeaderField.REQUEST]:["bl","dl","mtp","nor","nrr","su"],[CmcdHeaderField.SESSION]:["cid","pr","sf","sid","st","v"],[CmcdHeaderField.STATUS]:["bs","rtp"]};class SfItem{constructor(hr,gr){this.value=void 0,this.params=void 0,Array.isArray(hr)&&(hr=hr.map(vr=>vr instanceof SfItem?vr:new SfItem(vr))),this.value=hr,this.params=gr}}class SfToken{constructor(hr){this.description=void 0,this.description=hr}}const DICT="Dict";function format(mr){return Array.isArray(mr)?JSON.stringify(mr):mr instanceof Map?"Map{}":mr instanceof Set?"Set{}":typeof mr=="object"?JSON.stringify(mr):String(mr)}function throwError(mr,hr,gr,vr){return new Error(`failed to ${mr} "${format(hr)}" as ${gr}`,{cause:vr})}const BARE_ITEM="Bare Item",BOOLEAN="Boolean",BYTES="Byte Sequence",DECIMAL="Decimal",INTEGER="Integer";function isInvalidInt(mr){return mr<-999999999999999||999999999999999<mr}const STRING_REGEX=/[\x00-\x1f\x7f]+/,TOKEN="Token",KEY="Key";function serializeError(mr,hr,gr){return throwError("serialize",mr,hr,gr)}function serializeBoolean(mr){if(typeof mr!="boolean")throw serializeError(mr,BOOLEAN);return mr?"?1":"?0"}function base64encode(mr){return btoa(String.fromCharCode(...mr))}function serializeByteSequence(mr){if(ArrayBuffer.isView(mr)===!1)throw serializeError(mr,BYTES);return`:${base64encode(mr)}:`}function serializeInteger(mr){if(isInvalidInt(mr))throw serializeError(mr,INTEGER);return mr.toString()}function serializeDate(mr){return`@${serializeInteger(mr.getTime()/1e3)}`}function roundToEven(mr,hr){if(mr<0)return-roundToEven(-mr,hr);const gr=Math.pow(10,hr);if(Math.abs(mr*gr%1-.5)<Number.EPSILON){const xr=Math.floor(mr*gr);return(xr%2===0?xr:xr+1)/gr}else return Math.round(mr*gr)/gr}function serializeDecimal(mr){const hr=roundToEven(mr,3);if(Math.floor(Math.abs(hr)).toString().length>12)throw serializeError(mr,DECIMAL);const gr=hr.toString();return gr.includes(".")?gr:`${gr}.0`}const STRING$1="String";function serializeString(mr){if(STRING_REGEX.test(mr))throw serializeError(mr,STRING$1);return`"${mr.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}function symbolToStr(mr){return mr.description||mr.toString().slice(7,-1)}function serializeToken(mr){const hr=symbolToStr(mr);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(hr)===!1)throw serializeError(hr,TOKEN);return hr}function serializeBareItem(mr){switch(typeof mr){case"number":if(!isFiniteNumber(mr))throw serializeError(mr,BARE_ITEM);return Number.isInteger(mr)?serializeInteger(mr):serializeDecimal(mr);case"string":return serializeString(mr);case"symbol":return serializeToken(mr);case"boolean":return serializeBoolean(mr);case"object":if(mr instanceof Date)return serializeDate(mr);if(mr instanceof Uint8Array)return serializeByteSequence(mr);if(mr instanceof SfToken)return serializeToken(mr);default:throw serializeError(mr,BARE_ITEM)}}function serializeKey(mr){if(/^[a-z*][a-z0-9\-_.*]*$/.test(mr)===!1)throw serializeError(mr,KEY);return mr}function serializeParams(mr){return mr==null?"":Object.entries(mr).map(([hr,gr])=>gr===!0?`;${serializeKey(hr)}`:`;${serializeKey(hr)}=${serializeBareItem(gr)}`).join("")}function serializeItem(mr){return mr instanceof SfItem?`${serializeBareItem(mr.value)}${serializeParams(mr.params)}`:serializeBareItem(mr)}function serializeInnerList(mr){return`(${mr.value.map(serializeItem).join(" ")})${serializeParams(mr.params)}`}function serializeDict(mr,hr={whitespace:!0}){if(typeof mr!="object")throw serializeError(mr,DICT);const gr=mr instanceof Map?mr.entries():Object.entries(mr),vr=hr!=null&&hr.whitespace?" ":"";return Array.from(gr).map(([xr,Er])=>{Er instanceof SfItem||(Er=new SfItem(Er));let Cr=serializeKey(xr);return Er.value===!0?Cr+=serializeParams(Er.params):(Cr+="=",Array.isArray(Er.value)?Cr+=serializeInnerList(Er):Cr+=serializeItem(Er)),Cr}).join(`,${vr}`)}function encodeSfDict(mr,hr){return serializeDict(mr,hr)}const isTokenField=mr=>mr==="ot"||mr==="sf"||mr==="st",isValid=mr=>typeof mr=="number"?isFiniteNumber(mr):mr!=null&&mr!==""&&mr!==!1;function urlToRelativePath(mr,hr){const gr=new URL(mr),vr=new URL(hr);if(gr.origin!==vr.origin)return mr;const xr=gr.pathname.split("/").slice(1),Er=vr.pathname.split("/").slice(1,-1);for(;xr[0]===Er[0];)xr.shift(),Er.shift();for(;Er.length;)Er.shift(),xr.unshift("..");return xr.join("/")}function uuid(){try{return crypto.randomUUID()}catch{try{const hr=URL.createObjectURL(new Blob),gr=hr.toString();return URL.revokeObjectURL(hr),gr.slice(gr.lastIndexOf("/")+1)}catch{let gr=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,xr=>{const Er=(gr+Math.random()*16)%16|0;return gr=Math.floor(gr/16),(xr=="x"?Er:Er&3|8).toString(16)})}}}const toRounded=mr=>Math.round(mr),toUrlSafe=(mr,hr)=>(hr!=null&&hr.baseUrl&&(mr=urlToRelativePath(mr,hr.baseUrl)),encodeURIComponent(mr)),toHundred=mr=>toRounded(mr/100)*100,CmcdFormatters={br:toRounded,d:toRounded,bl:toHundred,dl:toHundred,mtp:toHundred,nor:toUrlSafe,rtp:toHundred,tb:toRounded};function processCmcd(mr,hr){const gr={};if(mr==null||typeof mr!="object")return gr;const vr=Object.keys(mr).sort(),xr=_extends({},CmcdFormatters,hr?.formatters),Er=hr?.filter;return vr.forEach(Cr=>{if(Er!=null&&Er(Cr))return;let wr=mr[Cr];const Rr=xr[Cr];Rr&&(wr=Rr(wr,hr)),!(Cr==="v"&&wr===1)&&(Cr=="pr"&&wr===1||isValid(wr)&&(isTokenField(Cr)&&typeof wr=="string"&&(wr=new SfToken(wr)),gr[Cr]=wr))}),gr}function encodeCmcd(mr,hr={}){return mr?encodeSfDict(processCmcd(mr,hr),_extends({whitespace:!1},hr)):""}function toCmcdHeaders(mr,hr={}){if(!mr)return{};const gr=Object.entries(mr),vr=Object.entries(CmcdHeaderMap).concat(Object.entries(hr?.customHeaderMap||{})),xr=gr.reduce((Er,Cr)=>{var wr,Rr;const[kr,Dr]=Cr,Br=((wr=vr.find(Hr=>Hr[1].includes(kr)))==null?void 0:wr[0])||CmcdHeaderField.REQUEST;return(Rr=Er[Br])!=null||(Er[Br]={}),Er[Br][kr]=Dr,Er},{});return Object.entries(xr).reduce((Er,[Cr,wr])=>(Er[Cr]=encodeCmcd(wr,hr),Er),{})}function appendCmcdHeaders(mr,hr,gr){return _extends(mr,toCmcdHeaders(hr,gr))}const CMCD_PARAM="CMCD";function toCmcdQuery(mr,hr={}){if(!mr)return"";const gr=encodeCmcd(mr,hr);return`${CMCD_PARAM}=${encodeURIComponent(gr)}`}const REGEX=/CMCD=[^&#]+/;function appendCmcdQuery(mr,hr,gr){const vr=toCmcdQuery(hr,gr);if(!vr)return mr;if(REGEX.test(mr))return mr.replace(REGEX,vr);const xr=mr.includes("?")?"&":"?";return`${mr}${xr}${vr}`}class CMCDController{constructor(hr){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=xr=>{try{this.apply(xr,{ot:CmObjectType.MANIFEST,su:!this.initialized})}catch(Er){logger.warn("Could not generate manifest CMCD data.",Er)}},this.applyFragmentData=xr=>{try{const Er=xr.frag,Cr=this.hls.levels[Er.level],wr=this.getObjectType(Er),Rr={d:Er.duration*1e3,ot:wr};(wr===CmObjectType.VIDEO||wr===CmObjectType.AUDIO||wr==CmObjectType.MUXED)&&(Rr.br=Cr.bitrate/1e3,Rr.tb=this.getTopBandwidth(wr)/1e3,Rr.bl=this.getBufferLength(wr)),this.apply(xr,Rr)}catch(Er){logger.warn("Could not generate segment CMCD data.",Er)}},this.hls=hr;const gr=this.config=hr.config,{cmcd:vr}=gr;vr!=null&&(gr.pLoader=this.createPlaylistLoader(),gr.fLoader=this.createFragmentLoader(),this.sid=vr.sessionId||uuid(),this.cid=vr.contentId,this.useHeaders=vr.useHeaders===!0,this.includeKeys=vr.includeKeys,this.registerListeners())}registerListeners(){const hr=this.hls;hr.on(Events.MEDIA_ATTACHED,this.onMediaAttached,this),hr.on(Events.MEDIA_DETACHED,this.onMediaDetached,this),hr.on(Events.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const hr=this.hls;hr.off(Events.MEDIA_ATTACHED,this.onMediaAttached,this),hr.off(Events.MEDIA_DETACHED,this.onMediaDetached,this),hr.off(Events.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=null}onMediaAttached(hr,gr){this.media=gr.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(hr,gr){var vr,xr;this.audioBuffer=(vr=gr.tracks.audio)==null?void 0:vr.buffer,this.videoBuffer=(xr=gr.tracks.video)==null?void 0:xr.buffer}createData(){var hr;return{v:1,sf:CmStreamingFormat.HLS,sid:this.sid,cid:this.cid,pr:(hr=this.media)==null?void 0:hr.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(hr,gr={}){_extends(gr,this.createData());const vr=gr.ot===CmObjectType.INIT||gr.ot===CmObjectType.VIDEO||gr.ot===CmObjectType.MUXED;this.starved&&vr&&(gr.bs=!0,gr.su=!0,this.starved=!1),gr.su==null&&(gr.su=this.buffering);const{includeKeys:xr}=this;xr&&(gr=Object.keys(gr).reduce((Er,Cr)=>(xr.includes(Cr)&&(Er[Cr]=gr[Cr]),Er),{})),this.useHeaders?(hr.headers||(hr.headers={}),appendCmcdHeaders(hr.headers,gr)):hr.url=appendCmcdQuery(hr.url,gr)}getObjectType(hr){const{type:gr}=hr;if(gr==="subtitle")return CmObjectType.TIMED_TEXT;if(hr.sn==="initSegment")return CmObjectType.INIT;if(gr==="audio")return CmObjectType.AUDIO;if(gr==="main")return this.hls.audioTracks.length?CmObjectType.VIDEO:CmObjectType.MUXED}getTopBandwidth(hr){let gr=0,vr;const xr=this.hls;if(hr===CmObjectType.AUDIO)vr=xr.audioTracks;else{const Er=xr.maxAutoLevel,Cr=Er>-1?Er+1:xr.levels.length;vr=xr.levels.slice(0,Cr)}for(const Er of vr)Er.bitrate>gr&&(gr=Er.bitrate);return gr>0?gr:NaN}getBufferLength(hr){const gr=this.hls.media,vr=hr===CmObjectType.AUDIO?this.audioBuffer:this.videoBuffer;return!vr||!gr?NaN:BufferHelper.bufferInfo(vr,gr.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){const{pLoader:hr}=this.config,gr=this.applyPlaylistData,vr=hr||this.config.loader;return class{constructor(Er){this.loader=void 0,this.loader=new vr(Er)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(Er,Cr,wr){gr(Er),this.loader.load(Er,Cr,wr)}}}createFragmentLoader(){const{fLoader:hr}=this.config,gr=this.applyFragmentData,vr=hr||this.config.loader;return class{constructor(Er){this.loader=void 0,this.loader=new vr(Er)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(Er,Cr,wr){gr(Er),this.loader.load(Er,Cr,wr)}}}}const PATHWAY_PENALTY_DURATION_MS=3e5;class ContentSteeringController{constructor(hr){this.hls=void 0,this.log=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this.pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=hr,this.log=logger.log.bind(logger,"[content-steering]:"),this.registerListeners()}registerListeners(){const hr=this.hls;hr.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),hr.on(Events.MANIFEST_LOADED,this.onManifestLoaded,this),hr.on(Events.MANIFEST_PARSED,this.onManifestParsed,this),hr.on(Events.ERROR,this.onError,this)}unregisterListeners(){const hr=this.hls;hr&&(hr.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),hr.off(Events.MANIFEST_LOADED,this.onManifestLoaded,this),hr.off(Events.MANIFEST_PARSED,this.onManifestParsed,this),hr.off(Events.ERROR,this.onError,this))}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const hr=this.timeToLoad*1e3-(performance.now()-this.updated);if(hr>0){this.scheduleRefresh(this.uri,hr);return}}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){this.reloadTimer!==-1&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(hr){const gr=this.levels;gr&&(this.levels=gr.filter(vr=>vr!==hr))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(hr,gr){const{contentSteering:vr}=gr;vr!==null&&(this.pathwayId=vr.pathwayId,this.uri=vr.uri,this.started&&this.startLoad())}onManifestParsed(hr,gr){this.audioTracks=gr.audioTracks,this.subtitleTracks=gr.subtitleTracks}onError(hr,gr){const{errorAction:vr}=gr;if(vr?.action===NetworkErrorAction.SendAlternateToPenaltyBox&&vr.flags===ErrorActionFlags.MoveAllAlternatesMatchingHost){const xr=this.levels;let Er=this.pathwayPriority,Cr=this.pathwayId;if(gr.context){const{groupId:wr,pathwayId:Rr,type:kr}=gr.context;wr&&xr?Cr=this.getPathwayForGroupId(wr,kr,Cr):Rr&&(Cr=Rr)}Cr in this.penalizedPathways||(this.penalizedPathways[Cr]=performance.now()),!Er&&xr&&(Er=xr.reduce((wr,Rr)=>(wr.indexOf(Rr.pathwayId)===-1&&wr.push(Rr.pathwayId),wr),[])),Er&&Er.length>1&&(this.updatePathwayPriority(Er),vr.resolved=this.pathwayId!==Cr),vr.resolved||logger.warn(`Could not resolve ${gr.details} ("${gr.error.message}") with content-steering for Pathway: ${Cr} levels: ${xr&&xr.length} priorities: ${JSON.stringify(Er)} penalized: ${JSON.stringify(this.penalizedPathways)}`)}}filterParsedLevels(hr){this.levels=hr;let gr=this.getLevelsForPathway(this.pathwayId);if(gr.length===0){const vr=hr[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${vr}"`),gr=this.getLevelsForPathway(vr),this.pathwayId=vr}return gr.length!==hr.length&&this.log(`Found ${gr.length}/${hr.length} levels in Pathway "${this.pathwayId}"`),gr}getLevelsForPathway(hr){return this.levels===null?[]:this.levels.filter(gr=>hr===gr.pathwayId)}updatePathwayPriority(hr){this.pathwayPriority=hr;let gr;const vr=this.penalizedPathways,xr=performance.now();Object.keys(vr).forEach(Er=>{xr-vr[Er]>PATHWAY_PENALTY_DURATION_MS&&delete vr[Er]});for(let Er=0;Er<hr.length;Er++){const Cr=hr[Er];if(Cr in vr)continue;if(Cr===this.pathwayId)return;const wr=this.hls.nextLoadLevel,Rr=this.hls.levels[wr];if(gr=this.getLevelsForPathway(Cr),gr.length>0){this.log(`Setting Pathway to "${Cr}"`),this.pathwayId=Cr,reassignFragmentLevelIndexes(gr),this.hls.trigger(Events.LEVELS_UPDATED,{levels:gr});const kr=this.hls.levels[wr];Rr&&kr&&this.levels&&(kr.attrs["STABLE-VARIANT-ID"]!==Rr.attrs["STABLE-VARIANT-ID"]&&kr.bitrate!==Rr.bitrate&&this.log(`Unstable Pathways change from bitrate ${Rr.bitrate} to ${kr.bitrate}`),this.hls.nextLoadLevel=wr);break}}}getPathwayForGroupId(hr,gr,vr){const xr=this.getLevelsForPathway(vr).concat(this.levels||[]);for(let Er=0;Er<xr.length;Er++)if(gr===PlaylistContextType.AUDIO_TRACK&&xr[Er].hasAudioGroup(hr)||gr===PlaylistContextType.SUBTITLE_TRACK&&xr[Er].hasSubtitleGroup(hr))return xr[Er].pathwayId;return vr}clonePathways(hr){const gr=this.levels;if(!gr)return;const vr={},xr={};hr.forEach(Er=>{const{ID:Cr,"BASE-ID":wr,"URI-REPLACEMENT":Rr}=Er;if(gr.some(Dr=>Dr.pathwayId===Cr))return;const kr=this.getLevelsForPathway(wr).map(Dr=>{const Br=new AttrList(Dr.attrs);Br["PATHWAY-ID"]=Cr;const Hr=Br.AUDIO&&`${Br.AUDIO}_clone_${Cr}`,Gr=Br.SUBTITLES&&`${Br.SUBTITLES}_clone_${Cr}`;Hr&&(vr[Br.AUDIO]=Hr,Br.AUDIO=Hr),Gr&&(xr[Br.SUBTITLES]=Gr,Br.SUBTITLES=Gr);const qr=performUriReplacement(Dr.uri,Br["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",Rr),zr=new Level({attrs:Br,audioCodec:Dr.audioCodec,bitrate:Dr.bitrate,height:Dr.height,name:Dr.name,url:qr,videoCodec:Dr.videoCodec,width:Dr.width});if(Dr.audioGroups)for(let Qr=1;Qr<Dr.audioGroups.length;Qr++)zr.addGroupId("audio",`${Dr.audioGroups[Qr]}_clone_${Cr}`);if(Dr.subtitleGroups)for(let Qr=1;Qr<Dr.subtitleGroups.length;Qr++)zr.addGroupId("text",`${Dr.subtitleGroups[Qr]}_clone_${Cr}`);return zr});gr.push(...kr),cloneRenditionGroups(this.audioTracks,vr,Rr,Cr),cloneRenditionGroups(this.subtitleTracks,xr,Rr,Cr)})}loadSteeringManifest(hr){const gr=this.hls.config,vr=gr.loader;this.loader&&this.loader.destroy(),this.loader=new vr(gr);let xr;try{xr=new self.URL(hr)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${hr}`);return}if(xr.protocol!=="data:"){const Dr=(this.hls.bandwidthEstimate||gr.abrEwmaDefaultEstimate)|0;xr.searchParams.set("_HLS_pathway",this.pathwayId),xr.searchParams.set("_HLS_throughput",""+Dr)}const Er={responseType:"json",url:xr.href},Cr=gr.steeringManifestLoadPolicy.default,wr=Cr.errorRetry||Cr.timeoutRetry||{},Rr={loadPolicy:Cr,timeout:Cr.maxLoadTimeMs,maxRetry:wr.maxNumRetry||0,retryDelay:wr.retryDelayMs||0,maxRetryDelay:wr.maxRetryDelayMs||0},kr={onSuccess:(Dr,Br,Hr,Gr)=>{this.log(`Loaded steering manifest: "${xr}"`);const qr=Dr.data;if(qr.VERSION!==1){this.log(`Steering VERSION ${qr.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=qr.TTL;const{"RELOAD-URI":zr,"PATHWAY-CLONES":Qr,"PATHWAY-PRIORITY":sn}=qr;if(zr)try{this.uri=new self.URL(zr,xr).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${zr}`);return}this.scheduleRefresh(this.uri||Hr.url),Qr&&this.clonePathways(Qr);const hn={steeringManifest:qr,url:xr.toString()};this.hls.trigger(Events.STEERING_MANIFEST_LOADED,hn),sn&&this.updatePathwayPriority(sn)},onError:(Dr,Br,Hr,Gr)=>{if(this.log(`Error loading steering manifest: ${Dr.code} ${Dr.text} (${Br.url})`),this.stopLoad(),Dr.code===410){this.enabled=!1,this.log(`Steering manifest ${Br.url} no longer available`);return}let qr=this.timeToLoad*1e3;if(Dr.code===429){const zr=this.loader;if(typeof zr?.getResponseHeader=="function"){const Qr=zr.getResponseHeader("Retry-After");Qr&&(qr=parseFloat(Qr)*1e3)}this.log(`Steering manifest ${Br.url} rate limited`);return}this.scheduleRefresh(this.uri||Br.url,qr)},onTimeout:(Dr,Br,Hr)=>{this.log(`Timeout loading steering manifest (${Br.url})`),this.scheduleRefresh(this.uri||Br.url)}};this.log(`Requesting steering manifest: ${xr}`),this.loader.load(Er,Rr,kr)}scheduleRefresh(hr,gr=this.timeToLoad*1e3){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var vr;const xr=(vr=this.hls)==null?void 0:vr.media;if(xr&&!xr.ended){this.loadSteeringManifest(hr);return}this.scheduleRefresh(hr,this.timeToLoad*1e3)},gr)}}function cloneRenditionGroups(mr,hr,gr,vr){mr&&Object.keys(hr).forEach(xr=>{const Er=mr.filter(Cr=>Cr.groupId===xr).map(Cr=>{const wr=_extends({},Cr);return wr.details=void 0,wr.attrs=new AttrList(wr.attrs),wr.url=wr.attrs.URI=performUriReplacement(Cr.url,Cr.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",gr),wr.groupId=wr.attrs["GROUP-ID"]=hr[xr],wr.attrs["PATHWAY-ID"]=vr,wr});mr.push(...Er)})}function performUriReplacement(mr,hr,gr,vr){const{HOST:xr,PARAMS:Er,[gr]:Cr}=vr;let wr;hr&&(wr=Cr?.[hr],wr&&(mr=wr));const Rr=new self.URL(mr);return xr&&!wr&&(Rr.host=xr),Er&&Object.keys(Er).sort().forEach(kr=>{kr&&Rr.searchParams.set(kr,Er[kr])}),Rr.href}const AGE_HEADER_LINE_REGEX=/^age:\s*[\d.]+\s*$/im;class XhrLoader{constructor(hr){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=hr&&hr.xhrSetup||null,this.stats=new LoadStats,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const hr=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),hr&&(hr.onreadystatechange=null,hr.onprogress=null,hr.readyState!==4&&(this.stats.aborted=!0,hr.abort()))}abort(){var hr;this.abortInternal(),(hr=this.callbacks)!=null&&hr.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(hr,gr,vr){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=hr,this.config=gr,this.callbacks=vr,this.loadInternal()}loadInternal(){const{config:hr,context:gr}=this;if(!hr||!gr)return;const vr=this.loader=new self.XMLHttpRequest,xr=this.stats;xr.loading.first=0,xr.loaded=0,xr.aborted=!1;const Er=this.xhrSetup;Er?Promise.resolve().then(()=>{if(!(this.loader!==vr||this.stats.aborted))return Er(vr,gr.url)}).catch(Cr=>{if(!(this.loader!==vr||this.stats.aborted))return vr.open("GET",gr.url,!0),Er(vr,gr.url)}).then(()=>{this.loader!==vr||this.stats.aborted||this.openAndSendXhr(vr,gr,hr)}).catch(Cr=>{this.callbacks.onError({code:vr.status,text:Cr.message},gr,vr,xr)}):this.openAndSendXhr(vr,gr,hr)}openAndSendXhr(hr,gr,vr){hr.readyState||hr.open("GET",gr.url,!0);const xr=gr.headers,{maxTimeToFirstByteMs:Er,maxLoadTimeMs:Cr}=vr.loadPolicy;if(xr)for(const wr in xr)hr.setRequestHeader(wr,xr[wr]);gr.rangeEnd&&hr.setRequestHeader("Range","bytes="+gr.rangeStart+"-"+(gr.rangeEnd-1)),hr.onreadystatechange=this.readystatechange.bind(this),hr.onprogress=this.loadprogress.bind(this),hr.responseType=gr.responseType,self.clearTimeout(this.requestTimeout),vr.timeout=Er&&isFiniteNumber(Er)?Er:Cr,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),vr.timeout),hr.send()}readystatechange(){const{context:hr,loader:gr,stats:vr}=this;if(!hr||!gr)return;const xr=gr.readyState,Er=this.config;if(!vr.aborted&&xr>=2&&(vr.loading.first===0&&(vr.loading.first=Math.max(self.performance.now(),vr.loading.start),Er.timeout!==Er.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),Er.timeout=Er.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),Er.loadPolicy.maxLoadTimeMs-(vr.loading.first-vr.loading.start)))),xr===4)){self.clearTimeout(this.requestTimeout),gr.onreadystatechange=null,gr.onprogress=null;const Cr=gr.status,wr=gr.responseType==="text"?gr.responseText:null;if(Cr>=200&&Cr<300){const Br=wr??gr.response;if(Br!=null){vr.loading.end=Math.max(self.performance.now(),vr.loading.first);const Hr=gr.responseType==="arraybuffer"?Br.byteLength:Br.length;if(vr.loaded=vr.total=Hr,vr.bwEstimate=vr.total*8e3/(vr.loading.end-vr.loading.first),!this.callbacks)return;const Gr=this.callbacks.onProgress;if(Gr&&Gr(vr,hr,Br,gr),!this.callbacks)return;const qr={url:gr.responseURL,data:Br,code:Cr};this.callbacks.onSuccess(qr,vr,hr,gr);return}}const Rr=Er.loadPolicy.errorRetry,kr=vr.retry,Dr={url:hr.url,data:void 0,code:Cr};shouldRetry(Rr,kr,!1,Dr)?this.retry(Rr):(logger.error(`${Cr} while loading ${hr.url}`),this.callbacks.onError({code:Cr,text:gr.statusText},hr,gr,vr))}}loadtimeout(){if(!this.config)return;const hr=this.config.loadPolicy.timeoutRetry,gr=this.stats.retry;if(shouldRetry(hr,gr,!0))this.retry(hr);else{var vr;logger.warn(`timeout while loading ${(vr=this.context)==null?void 0:vr.url}`);const xr=this.callbacks;xr&&(this.abortInternal(),xr.onTimeout(this.stats,this.context,this.loader))}}retry(hr){const{context:gr,stats:vr}=this;this.retryDelay=getRetryDelay(hr,vr.retry),vr.retry++,logger.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${gr?.url}, retrying ${vr.retry}/${hr.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(hr){const gr=this.stats;gr.loaded=hr.loaded,hr.lengthComputable&&(gr.total=hr.total)}getCacheAge(){let hr=null;if(this.loader&&AGE_HEADER_LINE_REGEX.test(this.loader.getAllResponseHeaders())){const gr=this.loader.getResponseHeader("age");hr=gr?parseFloat(gr):null}return hr}getResponseHeader(hr){return this.loader&&new RegExp(`^${hr}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(hr):null}}function fetchSupported(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}const BYTERANGE=/(\d+)-(\d+)\/(\d+)/;class FetchLoader{constructor(hr){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=hr.fetchSetup||getRequest,this.controller=new self.AbortController,this.stats=new LoadStats}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var hr;this.abortInternal(),(hr=this.callbacks)!=null&&hr.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(hr,gr,vr){const xr=this.stats;if(xr.loading.start)throw new Error("Loader can only be used once.");xr.loading.start=self.performance.now();const Er=getRequestParameters(hr,this.controller.signal),Cr=vr.onProgress,wr=hr.responseType==="arraybuffer",Rr=wr?"byteLength":"length",{maxTimeToFirstByteMs:kr,maxLoadTimeMs:Dr}=gr.loadPolicy;this.context=hr,this.config=gr,this.callbacks=vr,this.request=this.fetchSetup(hr,Er),self.clearTimeout(this.requestTimeout),gr.timeout=kr&&isFiniteNumber(kr)?kr:Dr,this.requestTimeout=self.setTimeout(()=>{this.abortInternal(),vr.onTimeout(xr,hr,this.response)},gr.timeout),self.fetch(this.request).then(Br=>{this.response=this.loader=Br;const Hr=Math.max(self.performance.now(),xr.loading.start);if(self.clearTimeout(this.requestTimeout),gr.timeout=Dr,this.requestTimeout=self.setTimeout(()=>{this.abortInternal(),vr.onTimeout(xr,hr,this.response)},Dr-(Hr-xr.loading.start)),!Br.ok){const{status:Gr,statusText:qr}=Br;throw new FetchError(qr||"fetch, bad network response",Gr,Br)}return xr.loading.first=Hr,xr.total=getContentLength(Br.headers)||xr.total,Cr&&isFiniteNumber(gr.highWaterMark)?this.loadProgressively(Br,xr,hr,gr.highWaterMark,Cr):wr?Br.arrayBuffer():hr.responseType==="json"?Br.json():Br.text()}).then(Br=>{const Hr=this.response;if(!Hr)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),xr.loading.end=Math.max(self.performance.now(),xr.loading.first);const Gr=Br[Rr];Gr&&(xr.loaded=xr.total=Gr);const qr={url:Hr.url,data:Br,code:Hr.status};Cr&&!isFiniteNumber(gr.highWaterMark)&&Cr(xr,hr,Br,Hr),vr.onSuccess(qr,xr,hr,Hr)}).catch(Br=>{if(self.clearTimeout(this.requestTimeout),xr.aborted)return;const Hr=Br&&Br.code||0,Gr=Br?Br.message:null;vr.onError({code:Hr,text:Gr},hr,Br?Br.details:null,xr)})}getCacheAge(){let hr=null;if(this.response){const gr=this.response.headers.get("age");hr=gr?parseFloat(gr):null}return hr}getResponseHeader(hr){return this.response?this.response.headers.get(hr):null}loadProgressively(hr,gr,vr,xr=0,Er){const Cr=new ChunkCache,wr=hr.body.getReader(),Rr=()=>wr.read().then(kr=>{if(kr.done)return Cr.dataLength&&Er(gr,vr,Cr.flush(),hr),Promise.resolve(new ArrayBuffer(0));const Dr=kr.value,Br=Dr.length;return gr.loaded+=Br,Br<xr||Cr.dataLength?(Cr.push(Dr),Cr.dataLength>=xr&&Er(gr,vr,Cr.flush(),hr)):Er(gr,vr,Dr,hr),Rr()}).catch(()=>Promise.reject());return Rr()}}function getRequestParameters(mr,hr){const gr={method:"GET",mode:"cors",credentials:"same-origin",signal:hr,headers:new self.Headers(_extends({},mr.headers))};return mr.rangeEnd&&gr.headers.set("Range","bytes="+mr.rangeStart+"-"+String(mr.rangeEnd-1)),gr}function getByteRangeLength(mr){const hr=BYTERANGE.exec(mr);if(hr)return parseInt(hr[2])-parseInt(hr[1])+1}function getContentLength(mr){const hr=mr.get("Content-Range");if(hr){const vr=getByteRangeLength(hr);if(isFiniteNumber(vr))return vr}const gr=mr.get("Content-Length");if(gr)return parseInt(gr)}function getRequest(mr,hr){return new self.Request(mr.url,hr)}class FetchError extends Error{constructor(hr,gr,vr){super(hr),this.code=void 0,this.details=void 0,this.code=gr,this.details=vr}}const WHITESPACE_CHAR=/\s/,Cues={newCue(mr,hr,gr,vr){const xr=[];let Er,Cr,wr,Rr,kr;const Dr=self.VTTCue||self.TextTrackCue;for(let Hr=0;Hr<vr.rows.length;Hr++)if(Er=vr.rows[Hr],wr=!0,Rr=0,kr="",!Er.isEmpty()){var Br;for(let zr=0;zr<Er.chars.length;zr++)WHITESPACE_CHAR.test(Er.chars[zr].uchar)&&wr?Rr++:(kr+=Er.chars[zr].uchar,wr=!1);Er.cueStartTime=hr,hr===gr&&(gr+=1e-4),Rr>=16?Rr--:Rr++;const Gr=fixLineBreaks(kr.trim()),qr=generateCueId(hr,gr,Gr);mr!=null&&(Br=mr.cues)!=null&&Br.getCueById(qr)||(Cr=new Dr(hr,gr,Gr),Cr.id=qr,Cr.line=Hr+1,Cr.align="left",Cr.position=10+Math.min(80,Math.floor(Rr*8/32)*10),xr.push(Cr))}return mr&&xr.length&&(xr.sort((Hr,Gr)=>Hr.line==="auto"||Gr.line==="auto"?0:Hr.line>8&&Gr.line>8?Gr.line-Hr.line:Hr.line-Gr.line),xr.forEach(Hr=>addCueToTrack(mr,Hr))),xr}},defaultLoadPolicy={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},hlsDefaultConfig=_objectSpread2(_objectSpread2({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,maxBufferSize:60*1e3*1e3,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:XhrLoader,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:AbrController,bufferController:BufferController,capLevelController:CapLevelController,errorController:ErrorController,fpsController:FPSController,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:requestMediaKeySystemAccess,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0,useMediaCapabilities:!0,certLoadPolicy:{default:defaultLoadPolicy},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},timelineConfig()),{},{subtitleStreamController:SubtitleStreamController,subtitleTrackController:SubtitleTrackController,timelineController:TimelineController,audioStreamController:AudioStreamController,audioTrackController:AudioTrackController,emeController:EMEController,cmcdController:CMCDController,contentSteeringController:ContentSteeringController});function timelineConfig(){return{cueHandler:Cues,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function mergeConfig(mr,hr){if((hr.liveSyncDurationCount||hr.liveMaxLatencyDurationCount)&&(hr.liveSyncDuration||hr.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(hr.liveMaxLatencyDurationCount!==void 0&&(hr.liveSyncDurationCount===void 0||hr.liveMaxLatencyDurationCount<=hr.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(hr.liveMaxLatencyDuration!==void 0&&(hr.liveSyncDuration===void 0||hr.liveMaxLatencyDuration<=hr.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const gr=deepCpy(mr),vr=["manifest","level","frag"],xr=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return vr.forEach(Er=>{const Cr=`${Er==="level"?"playlist":Er}LoadPolicy`,wr=hr[Cr]===void 0,Rr=[];xr.forEach(kr=>{const Dr=`${Er}Loading${kr}`,Br=hr[Dr];if(Br!==void 0&&wr){Rr.push(Dr);const Hr=gr[Cr].default;switch(hr[Cr]={default:Hr},kr){case"TimeOut":Hr.maxLoadTimeMs=Br,Hr.maxTimeToFirstByteMs=Br;break;case"MaxRetry":Hr.errorRetry.maxNumRetry=Br,Hr.timeoutRetry.maxNumRetry=Br;break;case"RetryDelay":Hr.errorRetry.retryDelayMs=Br,Hr.timeoutRetry.retryDelayMs=Br;break;case"MaxRetryTimeout":Hr.errorRetry.maxRetryDelayMs=Br,Hr.timeoutRetry.maxRetryDelayMs=Br;break}}}),Rr.length&&logger.warn(`hls.js config: "${Rr.join('", "')}" setting(s) are deprecated, use "${Cr}": ${JSON.stringify(hr[Cr])}`)}),_objectSpread2(_objectSpread2({},gr),hr)}function deepCpy(mr){return mr&&typeof mr=="object"?Array.isArray(mr)?mr.map(deepCpy):Object.keys(mr).reduce((hr,gr)=>(hr[gr]=deepCpy(mr[gr]),hr),{}):mr}function enableStreamingMode(mr){const hr=mr.loader;hr!==FetchLoader&&hr!==XhrLoader?(logger.log("[config]: Custom loader detected, cannot enable progressive streaming"),mr.progressive=!1):fetchSupported()&&(mr.loader=FetchLoader,mr.progressive=!0,mr.enableSoftwareAES=!0,logger.log("[config]: Progressive streaming enabled, using FetchLoader"))}let chromeOrFirefox;class LevelController extends BasePlaylistController{constructor(hr,gr){super(hr,"[level-controller]"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=gr,this._registerListeners()}_registerListeners(){const{hls:hr}=this;hr.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),hr.on(Events.MANIFEST_LOADED,this.onManifestLoaded,this),hr.on(Events.LEVEL_LOADED,this.onLevelLoaded,this),hr.on(Events.LEVELS_UPDATED,this.onLevelsUpdated,this),hr.on(Events.FRAG_BUFFERED,this.onFragBuffered,this),hr.on(Events.ERROR,this.onError,this)}_unregisterListeners(){const{hls:hr}=this;hr.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),hr.off(Events.MANIFEST_LOADED,this.onManifestLoaded,this),hr.off(Events.LEVEL_LOADED,this.onLevelLoaded,this),hr.off(Events.LEVELS_UPDATED,this.onLevelsUpdated,this),hr.off(Events.FRAG_BUFFERED,this.onFragBuffered,this),hr.off(Events.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach(gr=>{gr.loadError=0,gr.fragmentError=0}),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(hr,gr){this.resetLevels()}onManifestLoaded(hr,gr){const vr=this.hls.config.preferManagedMediaSource,xr=[],Er={},Cr={};let wr=!1,Rr=!1,kr=!1;gr.levels.forEach(Dr=>{var Br,Hr;const Gr=Dr.attrs;let{audioCodec:qr,videoCodec:zr}=Dr;((Br=qr)==null?void 0:Br.indexOf("mp4a.40.34"))!==-1&&(chromeOrFirefox||(chromeOrFirefox=/chrome|firefox/i.test(navigator.userAgent)),chromeOrFirefox&&(Dr.audioCodec=qr=void 0)),qr&&(Dr.audioCodec=qr=getCodecCompatibleName(qr,vr)),((Hr=zr)==null?void 0:Hr.indexOf("avc1"))===0&&(zr=Dr.videoCodec=convertAVC1ToAVCOTI(zr));const{width:Qr,height:sn,unknownCodecs:hn}=Dr;if(wr||(wr=!!(Qr&&sn)),Rr||(Rr=!!zr),kr||(kr=!!qr),hn!=null&&hn.length||qr&&!areCodecsMediaSourceSupported(qr,"audio",vr)||zr&&!areCodecsMediaSourceSupported(zr,"video",vr))return;const{CODECS:vn,"FRAME-RATE":yn,"HDCP-LEVEL":gn,"PATHWAY-ID":bn,RESOLUTION:xn,"VIDEO-RANGE":$n}=Gr,Cn=`${`${bn||"."}-`}${Dr.bitrate}-${xn}-${yn}-${vn}-${$n}-${gn}`;if(Er[Cn])if(Er[Cn].uri!==Dr.url&&!Dr.attrs["PATHWAY-ID"]){const Rn=Cr[Cn]+=1;Dr.attrs["PATHWAY-ID"]=new Array(Rn+1).join(".");const Bn=new Level(Dr);Er[Cn]=Bn,xr.push(Bn)}else Er[Cn].addGroupId("audio",Gr.AUDIO),Er[Cn].addGroupId("text",Gr.SUBTITLES);else{const Rn=new Level(Dr);Er[Cn]=Rn,Cr[Cn]=1,xr.push(Rn)}}),this.filterAndSortMediaOptions(xr,gr,wr,Rr,kr)}filterAndSortMediaOptions(hr,gr,vr,xr,Er){let Cr=[],wr=[],Rr=hr;if((vr||xr)&&Er&&(Rr=Rr.filter(({videoCodec:qr,videoRange:zr,width:Qr,height:sn})=>(!!qr||!!(Qr&&sn))&&isVideoRange(zr))),Rr.length===0){Promise.resolve().then(()=>{if(this.hls){gr.levels.length&&this.warn(`One or more CODECS in variant not supported: ${JSON.stringify(gr.levels[0].attrs)}`);const qr=new Error("no level with compatible codecs found in manifest");this.hls.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:gr.url,error:qr,reason:qr.message})}});return}if(gr.audioTracks){const{preferManagedMediaSource:qr}=this.hls.config;Cr=gr.audioTracks.filter(zr=>!zr.audioCodec||areCodecsMediaSourceSupported(zr.audioCodec,"audio",qr)),assignTrackIdsByGroup(Cr)}gr.subtitles&&(wr=gr.subtitles,assignTrackIdsByGroup(wr));const kr=Rr.slice(0);Rr.sort((qr,zr)=>{if(qr.attrs["HDCP-LEVEL"]!==zr.attrs["HDCP-LEVEL"])return(qr.attrs["HDCP-LEVEL"]||"")>(zr.attrs["HDCP-LEVEL"]||"")?1:-1;if(vr&&qr.height!==zr.height)return qr.height-zr.height;if(qr.frameRate!==zr.frameRate)return qr.frameRate-zr.frameRate;if(qr.videoRange!==zr.videoRange)return VideoRangeValues.indexOf(qr.videoRange)-VideoRangeValues.indexOf(zr.videoRange);if(qr.videoCodec!==zr.videoCodec){const Qr=videoCodecPreferenceValue(qr.videoCodec),sn=videoCodecPreferenceValue(zr.videoCodec);if(Qr!==sn)return sn-Qr}if(qr.uri===zr.uri&&qr.codecSet!==zr.codecSet){const Qr=codecsSetSelectionPreferenceValue(qr.codecSet),sn=codecsSetSelectionPreferenceValue(zr.codecSet);if(Qr!==sn)return sn-Qr}return qr.averageBitrate!==zr.averageBitrate?qr.averageBitrate-zr.averageBitrate:0});let Dr=kr[0];if(this.steering&&(Rr=this.steering.filterParsedLevels(Rr),Rr.length!==kr.length)){for(let qr=0;qr<kr.length;qr++)if(kr[qr].pathwayId===Rr[0].pathwayId){Dr=kr[qr];break}}this._levels=Rr;for(let qr=0;qr<Rr.length;qr++)if(Rr[qr]===Dr){var Br;this._firstLevel=qr;const zr=Dr.bitrate,Qr=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${Rr.length} level(s) found, first bitrate: ${zr}`),((Br=this.hls.userConfig)==null?void 0:Br.abrEwmaDefaultEstimate)===void 0){const sn=Math.min(zr,this.hls.config.abrEwmaDefaultEstimateMax);sn>Qr&&Qr===hlsDefaultConfig.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=sn)}break}const Hr=Er&&!xr,Gr={levels:Rr,audioTracks:Cr,subtitleTracks:wr,sessionData:gr.sessionData,sessionKeys:gr.sessionKeys,firstLevel:this._firstLevel,stats:gr.stats,audio:Er,video:xr,altAudio:!Hr&&Cr.some(qr=>!!qr.url)};this.hls.trigger(Events.MANIFEST_PARSED,Gr),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}get levels(){return this._levels.length===0?null:this._levels}get level(){return this.currentLevelIndex}set level(hr){const gr=this._levels;if(gr.length===0)return;if(hr<0||hr>=gr.length){const Dr=new Error("invalid level idx"),Br=hr<0;if(this.hls.trigger(Events.ERROR,{type:ErrorTypes.OTHER_ERROR,details:ErrorDetails.LEVEL_SWITCH_ERROR,level:hr,fatal:Br,error:Dr,reason:Dr.message}),Br)return;hr=Math.min(hr,gr.length-1)}const vr=this.currentLevelIndex,xr=this.currentLevel,Er=xr?xr.attrs["PATHWAY-ID"]:void 0,Cr=gr[hr],wr=Cr.attrs["PATHWAY-ID"];if(this.currentLevelIndex=hr,this.currentLevel=Cr,vr===hr&&Cr.details&&xr&&Er===wr)return;this.log(`Switching to level ${hr} (${Cr.height?Cr.height+"p ":""}${Cr.videoRange?Cr.videoRange+" ":""}${Cr.codecSet?Cr.codecSet+" ":""}@${Cr.bitrate})${wr?" with Pathway "+wr:""} from level ${vr}${Er?" with Pathway "+Er:""}`);const Rr={level:hr,attrs:Cr.attrs,details:Cr.details,bitrate:Cr.bitrate,averageBitrate:Cr.averageBitrate,maxBitrate:Cr.maxBitrate,realBitrate:Cr.realBitrate,width:Cr.width,height:Cr.height,codecSet:Cr.codecSet,audioCodec:Cr.audioCodec,videoCodec:Cr.videoCodec,audioGroups:Cr.audioGroups,subtitleGroups:Cr.subtitleGroups,loaded:Cr.loaded,loadError:Cr.loadError,fragmentError:Cr.fragmentError,name:Cr.name,id:Cr.id,uri:Cr.uri,url:Cr.url,urlId:0,audioGroupIds:Cr.audioGroupIds,textGroupIds:Cr.textGroupIds};this.hls.trigger(Events.LEVEL_SWITCHING,Rr);const kr=Cr.details;if(!kr||kr.live){const Dr=this.switchParams(Cr.uri,xr?.details,kr);this.loadPlaylist(Dr)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(hr){this.manualLevelIndex=hr,this._startLevel===void 0&&(this._startLevel=hr),hr!==-1&&(this.level=hr)}get firstLevel(){return this._firstLevel}set firstLevel(hr){this._firstLevel=hr}get startLevel(){if(this._startLevel===void 0){const hr=this.hls.config.startLevel;return hr!==void 0?hr:this.hls.firstAutoLevel}return this._startLevel}set startLevel(hr){this._startLevel=hr}onError(hr,gr){gr.fatal||!gr.context||gr.context.type===PlaylistContextType.LEVEL&&gr.context.level===this.level&&this.checkRetry(gr)}onFragBuffered(hr,{frag:gr}){if(gr!==void 0&&gr.type===PlaylistLevelType.MAIN){const vr=gr.elementaryStreams;if(!Object.keys(vr).some(Er=>!!vr[Er]))return;const xr=this._levels[gr.level];xr!=null&&xr.loadError&&(this.log(`Resetting level error count of ${xr.loadError} on frag buffered`),xr.loadError=0)}}onLevelLoaded(hr,gr){var vr;const{level:xr,details:Er}=gr,Cr=this._levels[xr];if(!Cr){var wr;this.warn(`Invalid level index ${xr}`),(wr=gr.deliveryDirectives)!=null&&wr.skip&&(Er.deltaUpdateFailed=!0);return}xr===this.currentLevelIndex?(Cr.fragmentError===0&&(Cr.loadError=0),this.playlistLoaded(xr,gr,Cr.details)):(vr=gr.deliveryDirectives)!=null&&vr.skip&&(Er.deltaUpdateFailed=!0)}loadPlaylist(hr){super.loadPlaylist();const gr=this.currentLevelIndex,vr=this.currentLevel;if(vr&&this.shouldLoadPlaylist(vr)){let xr=vr.uri;if(hr)try{xr=hr.addDirectives(xr)}catch(Cr){this.warn(`Could not construct new URL with HLS Delivery Directives: ${Cr}`)}const Er=vr.attrs["PATHWAY-ID"];this.log(`Loading level index ${gr}${hr?.msn!==void 0?" at sn "+hr.msn+" part "+hr.part:""} with${Er?" Pathway "+Er:""} ${xr}`),this.clearTimer(),this.hls.trigger(Events.LEVEL_LOADING,{url:xr,level:gr,pathwayId:vr.attrs["PATHWAY-ID"],id:0,deliveryDirectives:hr||null})}}get nextLoadLevel(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(hr){this.level=hr,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=hr)}removeLevel(hr){var gr;const vr=this._levels.filter((xr,Er)=>Er!==hr?!0:(this.steering&&this.steering.removeLevel(xr),xr===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,xr.details&&xr.details.fragments.forEach(Cr=>Cr.level=-1)),!1));reassignFragmentLevelIndexes(vr),this._levels=vr,this.currentLevelIndex>-1&&(gr=this.currentLevel)!=null&&gr.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.hls.trigger(Events.LEVELS_UPDATED,{levels:vr})}onLevelsUpdated(hr,{levels:gr}){this._levels=gr}checkMaxAutoUpdated(){const{autoLevelCapping:hr,maxAutoLevel:gr,maxHdcpLevel:vr}=this.hls;this._maxAutoLevel!==gr&&(this._maxAutoLevel=gr,this.hls.trigger(Events.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:hr,levels:this.levels,maxAutoLevel:gr,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:vr}))}}function assignTrackIdsByGroup(mr){const hr={};mr.forEach(gr=>{const vr=gr.groupId||"";gr.id=hr[vr]=hr[vr]||0,hr[vr]++})}class KeyLoader{constructor(hr){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=hr}abort(hr){for(const vr in this.keyUriToKeyInfo){const xr=this.keyUriToKeyInfo[vr].loader;if(xr){var gr;if(hr&&hr!==((gr=xr.context)==null?void 0:gr.frag.type))return;xr.abort()}}}detach(){for(const hr in this.keyUriToKeyInfo){const gr=this.keyUriToKeyInfo[hr];(gr.mediaKeySessionContext||gr.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[hr]}}destroy(){this.detach();for(const hr in this.keyUriToKeyInfo){const gr=this.keyUriToKeyInfo[hr].loader;gr&&gr.destroy()}this.keyUriToKeyInfo={}}createKeyLoadError(hr,gr=ErrorDetails.KEY_LOAD_ERROR,vr,xr,Er){return new LoadError({type:ErrorTypes.NETWORK_ERROR,details:gr,fatal:!1,frag:hr,response:Er,error:vr,networkDetails:xr})}loadClear(hr,gr){if(this.emeController&&this.config.emeEnabled){const{sn:vr,cc:xr}=hr;for(let Er=0;Er<gr.length;Er++){const Cr=gr[Er];if(xr<=Cr.cc&&(vr==="initSegment"||Cr.sn==="initSegment"||vr<Cr.sn)){this.emeController.selectKeySystemFormat(Cr).then(wr=>{Cr.setKeyFormat(wr)});break}}}}load(hr){return!hr.decryptdata&&hr.encrypted&&this.emeController&&this.config.emeEnabled?this.emeController.selectKeySystemFormat(hr).then(gr=>this.loadInternal(hr,gr)):this.loadInternal(hr)}loadInternal(hr,gr){var vr,xr;gr&&hr.setKeyFormat(gr);const Er=hr.decryptdata;if(!Er){const kr=new Error(gr?`Expected frag.decryptdata to be defined after setting format ${gr}`:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(hr,ErrorDetails.KEY_LOAD_ERROR,kr))}const Cr=Er.uri;if(!Cr)return Promise.reject(this.createKeyLoadError(hr,ErrorDetails.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${Cr}"`)));let wr=this.keyUriToKeyInfo[Cr];if((vr=wr)!=null&&vr.decryptdata.key)return Er.key=wr.decryptdata.key,Promise.resolve({frag:hr,keyInfo:wr});if((xr=wr)!=null&&xr.keyLoadPromise){var Rr;switch((Rr=wr.mediaKeySessionContext)==null?void 0:Rr.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return wr.keyLoadPromise.then(kr=>(Er.key=kr.keyInfo.decryptdata.key,{frag:hr,keyInfo:wr}))}}switch(wr=this.keyUriToKeyInfo[Cr]={decryptdata:Er,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},Er.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return Er.keyFormat==="identity"?this.loadKeyHTTP(wr,hr):this.loadKeyEME(wr,hr);case"AES-128":return this.loadKeyHTTP(wr,hr);default:return Promise.reject(this.createKeyLoadError(hr,ErrorDetails.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${Er.method}"`)))}}loadKeyEME(hr,gr){const vr={frag:gr,keyInfo:hr};if(this.emeController&&this.config.emeEnabled){const xr=this.emeController.loadKey(vr);if(xr)return(hr.keyLoadPromise=xr.then(Er=>(hr.mediaKeySessionContext=Er,vr))).catch(Er=>{throw hr.keyLoadPromise=null,Er})}return Promise.resolve(vr)}loadKeyHTTP(hr,gr){const vr=this.config,xr=vr.loader,Er=new xr(vr);return gr.keyLoader=hr.loader=Er,hr.keyLoadPromise=new Promise((Cr,wr)=>{const Rr={keyInfo:hr,frag:gr,responseType:"arraybuffer",url:hr.decryptdata.uri},kr=vr.keyLoadPolicy.default,Dr={loadPolicy:kr,timeout:kr.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},Br={onSuccess:(Hr,Gr,qr,zr)=>{const{frag:Qr,keyInfo:sn,url:hn}=qr;if(!Qr.decryptdata||sn!==this.keyUriToKeyInfo[hn])return wr(this.createKeyLoadError(Qr,ErrorDetails.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),zr));sn.decryptdata.key=Qr.decryptdata.key=new Uint8Array(Hr.data),Qr.keyLoader=null,sn.loader=null,Cr({frag:Qr,keyInfo:sn})},onError:(Hr,Gr,qr,zr)=>{this.resetLoader(Gr),wr(this.createKeyLoadError(gr,ErrorDetails.KEY_LOAD_ERROR,new Error(`HTTP Error ${Hr.code} loading key ${Hr.text}`),qr,_objectSpread2({url:Rr.url,data:void 0},Hr)))},onTimeout:(Hr,Gr,qr)=>{this.resetLoader(Gr),wr(this.createKeyLoadError(gr,ErrorDetails.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),qr))},onAbort:(Hr,Gr,qr)=>{this.resetLoader(Gr),wr(this.createKeyLoadError(gr,ErrorDetails.INTERNAL_ABORTED,new Error("key loading aborted"),qr))}};Er.load(Rr,Dr,Br)})}resetLoader(hr){const{frag:gr,keyInfo:vr,url:xr}=hr,Er=vr.loader;gr.keyLoader===Er&&(gr.keyLoader=null,vr.loader=null),delete this.keyUriToKeyInfo[xr],Er&&Er.destroy()}}function getSourceBuffer(){return self.SourceBuffer||self.WebKitSourceBuffer}function isMSESupported(){if(!getMediaSource())return!1;const hr=getSourceBuffer();return!hr||hr.prototype&&typeof hr.prototype.appendBuffer=="function"&&typeof hr.prototype.remove=="function"}function isSupported(){if(!isMSESupported())return!1;const mr=getMediaSource();return typeof mr?.isTypeSupported=="function"&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(hr=>mr.isTypeSupported(mimeTypeForCodec(hr,"video")))||["mp4a.40.2","fLaC"].some(hr=>mr.isTypeSupported(mimeTypeForCodec(hr,"audio"))))}function changeTypeSupported(){var mr;const hr=getSourceBuffer();return typeof(hr==null||(mr=hr.prototype)==null?void 0:mr.changeType)=="function"}const STALL_MINIMUM_DURATION_MS=250,MAX_START_GAP_JUMP=2,SKIP_BUFFER_HOLE_STEP_SECONDS=.1,SKIP_BUFFER_RANGE_START=.05;class GapController{constructor(hr,gr,vr,xr){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=hr,this.media=gr,this.fragmentTracker=vr,this.hls=xr}destroy(){this.media=null,this.hls=this.fragmentTracker=null}poll(hr,gr){const{config:vr,media:xr,stalled:Er}=this;if(xr===null)return;const{currentTime:Cr,seeking:wr}=xr,Rr=this.seeking&&!wr,kr=!this.seeking&&wr;if(this.seeking=wr,Cr!==hr){if(this.moved=!0,wr||(this.nudgeRetry=0),Er!==null){if(this.stallReported){const Qr=self.performance.now()-Er;logger.warn(`playback not stuck anymore @${Cr}, after ${Math.round(Qr)}ms`),this.stallReported=!1}this.stalled=null}return}if(kr||Rr){this.stalled=null;return}if(xr.paused&&!wr||xr.ended||xr.playbackRate===0||!BufferHelper.getBuffered(xr).length){this.nudgeRetry=0;return}const Dr=BufferHelper.bufferInfo(xr,Cr,0),Br=Dr.nextStart||0;if(wr){const Qr=Dr.len>MAX_START_GAP_JUMP,sn=!Br||gr&&gr.start<=Cr||Br-Cr>MAX_START_GAP_JUMP&&!this.fragmentTracker.getPartialFragment(Cr);if(Qr||sn)return;this.moved=!1}if(!this.moved&&this.stalled!==null){var Hr;if(!(Dr.len>0)&&!Br)return;const sn=Math.max(Br,Dr.start||0)-Cr,hn=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,yn=(hn==null||(Hr=hn.details)==null?void 0:Hr.live)?hn.details.targetduration*2:MAX_START_GAP_JUMP,gn=this.fragmentTracker.getPartialFragment(Cr);if(sn>0&&(sn<=yn||gn)){xr.paused||this._trySkipBufferHole(gn);return}}const Gr=self.performance.now();if(Er===null){this.stalled=Gr;return}const qr=Gr-Er;if(!wr&&qr>=STALL_MINIMUM_DURATION_MS&&(this._reportStall(Dr),!this.media))return;const zr=BufferHelper.bufferInfo(xr,Cr,vr.maxBufferHole);this._tryFixBufferStall(zr,qr)}_tryFixBufferStall(hr,gr){const{config:vr,fragmentTracker:xr,media:Er}=this;if(Er===null)return;const Cr=Er.currentTime,wr=xr.getPartialFragment(Cr);wr&&(this._trySkipBufferHole(wr)||!this.media)||(hr.len>vr.maxBufferHole||hr.nextStart&&hr.nextStart-Cr<vr.maxBufferHole)&&gr>vr.highBufferWatchdogPeriod*1e3&&(logger.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}_reportStall(hr){const{hls:gr,media:vr,stallReported:xr}=this;if(!xr&&vr){this.stallReported=!0;const Er=new Error(`Playback stalling at @${vr.currentTime} due to low buffer (${JSON.stringify(hr)})`);logger.warn(Er.message),gr.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,error:Er,buffer:hr.len})}}_trySkipBufferHole(hr){const{config:gr,hls:vr,media:xr}=this;if(xr===null)return 0;const Er=xr.currentTime,Cr=BufferHelper.bufferInfo(xr,Er,0),wr=Er<Cr.start?Cr.start:Cr.nextStart;if(wr){const Rr=Cr.len<=gr.maxBufferHole,kr=Cr.len>0&&Cr.len<1&&xr.readyState<3,Dr=wr-Er;if(Dr>0&&(Rr||kr)){if(Dr>gr.maxBufferHole){const{fragmentTracker:Hr}=this;let Gr=!1;if(Er===0){const qr=Hr.getAppendedFrag(0,PlaylistLevelType.MAIN);qr&&wr<qr.end&&(Gr=!0)}if(!Gr){const qr=hr||Hr.getAppendedFrag(Er,PlaylistLevelType.MAIN);if(qr){let zr=!1,Qr=qr.end;for(;Qr<wr;){const sn=Hr.getPartialFragment(Qr);if(sn)Qr+=sn.duration;else{zr=!0;break}}if(zr)return 0}}}const Br=Math.max(wr+SKIP_BUFFER_RANGE_START,Er+SKIP_BUFFER_HOLE_STEP_SECONDS);if(logger.warn(`skipping hole, adjusting currentTime from ${Er} to ${Br}`),this.moved=!0,this.stalled=null,xr.currentTime=Br,hr&&!hr.gap){const Hr=new Error(`fragment loaded with buffer holes, seeking from ${Er} to ${Br}`);vr.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:Hr,reason:Hr.message,frag:hr})}return Br}}return 0}_tryNudgeBuffer(){const{config:hr,hls:gr,media:vr,nudgeRetry:xr}=this;if(vr===null)return;const Er=vr.currentTime;if(this.nudgeRetry++,xr<hr.nudgeMaxRetry){const Cr=Er+(xr+1)*hr.nudgeOffset,wr=new Error(`Nudging 'currentTime' from ${Er} to ${Cr}`);logger.warn(wr.message),vr.currentTime=Cr,gr.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.BUFFER_NUDGE_ON_STALL,error:wr,fatal:!1})}else{const Cr=new Error(`Playhead still not moving while enough data buffered @${Er} after ${hr.nudgeMaxRetry} nudges`);logger.error(Cr.message),gr.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.BUFFER_STALLED_ERROR,error:Cr,fatal:!0})}}}const TICK_INTERVAL=100;class StreamController extends BaseStreamController{constructor(hr,gr,vr){super(hr,gr,vr,"[stream-controller]",PlaylistLevelType.MAIN),this.audioCodecSwap=!1,this.gapController=null,this.level=-1,this._forceStartLoad=!1,this.altAudio=!1,this.audioOnly=!1,this.fragPlaying=null,this.onvplaying=null,this.onvseeked=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this._registerListeners()}_registerListeners(){const{hls:hr}=this;hr.on(Events.MEDIA_ATTACHED,this.onMediaAttached,this),hr.on(Events.MEDIA_DETACHING,this.onMediaDetaching,this),hr.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),hr.on(Events.MANIFEST_PARSED,this.onManifestParsed,this),hr.on(Events.LEVEL_LOADING,this.onLevelLoading,this),hr.on(Events.LEVEL_LOADED,this.onLevelLoaded,this),hr.on(Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),hr.on(Events.ERROR,this.onError,this),hr.on(Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),hr.on(Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),hr.on(Events.BUFFER_CREATED,this.onBufferCreated,this),hr.on(Events.BUFFER_FLUSHED,this.onBufferFlushed,this),hr.on(Events.LEVELS_UPDATED,this.onLevelsUpdated,this),hr.on(Events.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:hr}=this;hr.off(Events.MEDIA_ATTACHED,this.onMediaAttached,this),hr.off(Events.MEDIA_DETACHING,this.onMediaDetaching,this),hr.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),hr.off(Events.MANIFEST_PARSED,this.onManifestParsed,this),hr.off(Events.LEVEL_LOADED,this.onLevelLoaded,this),hr.off(Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),hr.off(Events.ERROR,this.onError,this),hr.off(Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),hr.off(Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),hr.off(Events.BUFFER_CREATED,this.onBufferCreated,this),hr.off(Events.BUFFER_FLUSHED,this.onBufferFlushed,this),hr.off(Events.LEVELS_UPDATED,this.onLevelsUpdated,this),hr.off(Events.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying()}startLoad(hr){if(this.levels){const{lastCurrentTime:gr,hls:vr}=this;if(this.stopLoad(),this.setInterval(TICK_INTERVAL),this.level=-1,!this.startFragRequested){let xr=vr.startLevel;xr===-1&&(vr.config.testBandwidth&&this.levels.length>1?(xr=0,this.bitrateTest=!0):xr=vr.firstAutoLevel),vr.nextLoadLevel=xr,this.level=vr.loadLevel,this.loadedmetadata=!1}gr>0&&hr===-1&&(this.log(`Override startPosition with lastCurrentTime @${gr.toFixed(3)}`),hr=gr),this.state=State.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=hr,this.tick()}else this._forceStartLoad=!0,this.state=State.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case State.WAITING_LEVEL:{const{levels:gr,level:vr}=this,xr=gr?.[vr],Er=xr?.details;if(Er&&(!Er.live||this.levelLastLoaded===xr)){if(this.waitForCdnTuneIn(Er))break;this.state=State.IDLE;break}else if(this.hls.nextLoadLevel!==this.level){this.state=State.IDLE;break}break}case State.FRAG_LOADING_WAITING_RETRY:{var hr;const gr=self.performance.now(),vr=this.retryDate;if(!vr||gr>=vr||(hr=this.media)!=null&&hr.seeking){const{levels:xr,level:Er}=this,Cr=xr?.[Er];this.resetStartWhenNotLoaded(Cr||null),this.state=State.IDLE}}break}this.state===State.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){super.onTickEnd(),this.checkBuffer(),this.checkFragmentChanged()}doTickIdle(){const{hls:hr,levelLastLoaded:gr,levels:vr,media:xr}=this;if(gr===null||!xr&&(this.startFragRequested||!hr.config.startFragPrefetch)||this.altAudio&&this.audioOnly)return;const Er=this.buffering?hr.nextLoadLevel:hr.loadLevel;if(!(vr!=null&&vr[Er]))return;const Cr=vr[Er],wr=this.getMainFwdBufferInfo();if(wr===null)return;const Rr=this.getLevelDetails();if(Rr&&this._streamEnded(wr,Rr)){const zr={};this.altAudio&&(zr.type="video"),this.hls.trigger(Events.BUFFER_EOS,zr),this.state=State.ENDED;return}if(!this.buffering)return;hr.loadLevel!==Er&&hr.manualLevel===-1&&this.log(`Adapting to level ${Er} from level ${this.level}`),this.level=hr.nextLoadLevel=Er;const kr=Cr.details;if(!kr||this.state===State.WAITING_LEVEL||kr.live&&this.levelLastLoaded!==Cr){this.level=Er,this.state=State.WAITING_LEVEL;return}const Dr=wr.len,Br=this.getMaxBufferLength(Cr.maxBitrate);if(Dr>=Br)return;this.backtrackFragment&&this.backtrackFragment.start>wr.end&&(this.backtrackFragment=null);const Hr=this.backtrackFragment?this.backtrackFragment.start:wr.end;let Gr=this.getNextFragment(Hr,kr);if(this.couldBacktrack&&!this.fragPrevious&&Gr&&Gr.sn!=="initSegment"&&this.fragmentTracker.getState(Gr)!==FragmentState.OK){var qr;const Qr=((qr=this.backtrackFragment)!=null?qr:Gr).sn-kr.startSN,sn=kr.fragments[Qr-1];sn&&Gr.cc===sn.cc&&(Gr=sn,this.fragmentTracker.removeFragment(sn))}else this.backtrackFragment&&wr.len&&(this.backtrackFragment=null);if(Gr&&this.isLoopLoading(Gr,Hr)){if(!Gr.gap){const Qr=this.audioOnly&&!this.altAudio?ElementaryStreamTypes.AUDIO:ElementaryStreamTypes.VIDEO,sn=(Qr===ElementaryStreamTypes.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;sn&&this.afterBufferFlushed(sn,Qr,PlaylistLevelType.MAIN)}Gr=this.getNextFragmentLoopLoading(Gr,kr,wr,PlaylistLevelType.MAIN,Br)}Gr&&(Gr.initSegment&&!Gr.initSegment.data&&!this.bitrateTest&&(Gr=Gr.initSegment),this.loadFragment(Gr,Cr,Hr))}loadFragment(hr,gr,vr){const xr=this.fragmentTracker.getState(hr);this.fragCurrent=hr,xr===FragmentState.NOT_LOADED||xr===FragmentState.PARTIAL?hr.sn==="initSegment"?this._loadInitSegment(hr,gr):this.bitrateTest?(this.log(`Fragment ${hr.sn} of level ${hr.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(hr,gr)):(this.startFragRequested=!0,super.loadFragment(hr,gr,vr)):this.clearTrackerIfNeeded(hr)}getBufferedFrag(hr){return this.fragmentTracker.getBufferedFrag(hr,PlaylistLevelType.MAIN)}followingBufferedFrag(hr){return hr?this.getBufferedFrag(hr.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:hr,media:gr}=this;if(gr!=null&&gr.readyState){let vr;const xr=this.getAppendedFrag(gr.currentTime);xr&&xr.start>1&&this.flushMainBuffer(0,xr.start-1);const Er=this.getLevelDetails();if(Er!=null&&Er.live){const wr=this.getMainFwdBufferInfo();if(!wr||wr.len<Er.targetduration*2)return}if(!gr.paused&&hr){const wr=this.hls.nextLoadLevel,Rr=hr[wr],kr=this.fragLastKbps;kr&&this.fragCurrent?vr=this.fragCurrent.duration*Rr.maxBitrate/(1e3*kr)+1:vr=0}else vr=0;const Cr=this.getBufferedFrag(gr.currentTime+vr);if(Cr){const wr=this.followingBufferedFrag(Cr);if(wr){this.abortCurrentFrag();const Rr=wr.maxStartPTS?wr.maxStartPTS:wr.start,kr=wr.duration,Dr=Math.max(Cr.end,Rr+Math.min(Math.max(kr-this.config.maxFragLookUpTolerance,kr*(this.couldBacktrack?.5:.125)),kr*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(Dr,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const hr=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,hr&&(hr.abortRequests(),this.fragmentTracker.removeFragment(hr)),this.state){case State.KEY_LOADING:case State.FRAG_LOADING:case State.FRAG_LOADING_WAITING_RETRY:case State.PARSING:case State.PARSED:this.state=State.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(hr,gr){super.flushMainBuffer(hr,gr,this.altAudio?"video":null)}onMediaAttached(hr,gr){super.onMediaAttached(hr,gr);const vr=gr.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),vr.addEventListener("playing",this.onvplaying),vr.addEventListener("seeked",this.onvseeked),this.gapController=new GapController(this.config,vr,this.fragmentTracker,this.hls)}onMediaDetaching(){const{media:hr}=this;hr&&this.onvplaying&&this.onvseeked&&(hr.removeEventListener("playing",this.onvplaying),hr.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),super.onMediaDetaching()}onMediaPlaying(){this.tick()}onMediaSeeked(){const hr=this.media,gr=hr?hr.currentTime:null;isFiniteNumber(gr)&&this.log(`Media seeked to ${gr.toFixed(3)}`);const vr=this.getMainFwdBufferInfo();if(vr===null||vr.len===0){this.warn(`Main forward buffer length on "seeked" event ${vr?vr.len:"empty"})`);return}this.tick()}onManifestLoading(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(Events.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=this.fragLastKbps=0,this.levels=this.fragPlaying=this.backtrackFragment=this.levelLastLoaded=null,this.altAudio=this.audioOnly=this.startFragRequested=!1}onManifestParsed(hr,gr){let vr=!1,xr=!1;gr.levels.forEach(Er=>{const Cr=Er.audioCodec;Cr&&(vr=vr||Cr.indexOf("mp4a.40.2")!==-1,xr=xr||Cr.indexOf("mp4a.40.5")!==-1)}),this.audioCodecSwitch=vr&&xr&&!changeTypeSupported(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=gr.levels,this.startFragRequested=!1}onLevelLoading(hr,gr){const{levels:vr}=this;if(!vr||this.state!==State.IDLE)return;const xr=vr[gr.level];(!xr.details||xr.details.live&&this.levelLastLoaded!==xr||this.waitForCdnTuneIn(xr.details))&&(this.state=State.WAITING_LEVEL)}onLevelLoaded(hr,gr){var vr;const{levels:xr}=this,Er=gr.level,Cr=gr.details,wr=Cr.totalduration;if(!xr){this.warn(`Levels were reset while loading level ${Er}`);return}this.log(`Level ${Er} loaded [${Cr.startSN},${Cr.endSN}]${Cr.lastPartSn?`[part-${Cr.lastPartSn}-${Cr.lastPartIndex}]`:""}, cc [${Cr.startCC}, ${Cr.endCC}] duration:${wr}`);const Rr=xr[Er],kr=this.fragCurrent;kr&&(this.state===State.FRAG_LOADING||this.state===State.FRAG_LOADING_WAITING_RETRY)&&kr.level!==gr.level&&kr.loader&&this.abortCurrentFrag();let Dr=0;if(Cr.live||(vr=Rr.details)!=null&&vr.live){var Br;if(this.checkLiveUpdate(Cr),Cr.deltaUpdateFailed)return;Dr=this.alignPlaylists(Cr,Rr.details,(Br=this.levelLastLoaded)==null?void 0:Br.details)}if(Rr.details=Cr,this.levelLastLoaded=Rr,this.hls.trigger(Events.LEVEL_UPDATED,{details:Cr,level:Er}),this.state===State.WAITING_LEVEL){if(this.waitForCdnTuneIn(Cr))return;this.state=State.IDLE}this.startFragRequested?Cr.live&&this.synchronizeToLiveEdge(Cr):this.setStartPosition(Cr,Dr),this.tick()}_handleFragmentLoadProgress(hr){var gr;const{frag:vr,part:xr,payload:Er}=hr,{levels:Cr}=this;if(!Cr){this.warn(`Levels were reset while fragment load was in progress. Fragment ${vr.sn} of level ${vr.level} will not be buffered`);return}const wr=Cr[vr.level],Rr=wr.details;if(!Rr){this.warn(`Dropping fragment ${vr.sn} of level ${vr.level} after level details were reset`),this.fragmentTracker.removeFragment(vr);return}const kr=wr.videoCodec,Dr=Rr.PTSKnown||!Rr.live,Br=(gr=vr.initSegment)==null?void 0:gr.data,Hr=this._getAudioCodec(wr),Gr=this.transmuxer=this.transmuxer||new TransmuxerInterface(this.hls,PlaylistLevelType.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),qr=xr?xr.index:-1,zr=qr!==-1,Qr=new ChunkMetadata(vr.level,vr.sn,vr.stats.chunkCount,Er.byteLength,qr,zr),sn=this.initPTS[vr.cc];Gr.push(Er,Br,Hr,kr,vr,xr,Rr.totalduration,Dr,Qr,sn)}onAudioTrackSwitching(hr,gr){const vr=this.altAudio;if(!!!gr.url){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const Cr=this.fragCurrent;Cr&&(this.log("Switching to main audio track, cancel main fragment load"),Cr.abortRequests(),this.fragmentTracker.removeFragment(Cr)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();const Er=this.hls;vr&&(Er.trigger(Events.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null}),this.fragmentTracker.removeAllFragments()),Er.trigger(Events.AUDIO_TRACK_SWITCHED,gr)}}onAudioTrackSwitched(hr,gr){const vr=gr.id,xr=!!this.hls.audioTracks[vr].url;if(xr){const Er=this.videoBuffer;Er&&this.mediaBuffer!==Er&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=Er)}this.altAudio=xr,this.tick()}onBufferCreated(hr,gr){const vr=gr.tracks;let xr,Er,Cr=!1;for(const wr in vr){const Rr=vr[wr];if(Rr.id==="main"){if(Er=wr,xr=Rr,wr==="video"){const kr=vr[wr];kr&&(this.videoBuffer=kr.buffer)}}else Cr=!0}Cr&&xr?(this.log(`Alternate track found, use ${Er}.buffered to schedule main fragment loading`),this.mediaBuffer=xr.buffer):this.mediaBuffer=this.media}onFragBuffered(hr,gr){const{frag:vr,part:xr}=gr;if(vr&&vr.type!==PlaylistLevelType.MAIN)return;if(this.fragContextChanged(vr)){this.warn(`Fragment ${vr.sn}${xr?" p: "+xr.index:""} of level ${vr.level} finished buffering, but was aborted. state: ${this.state}`),this.state===State.PARSED&&(this.state=State.IDLE);return}const Er=xr?xr.stats:vr.stats;this.fragLastKbps=Math.round(8*Er.total/(Er.buffering.end-Er.loading.first)),vr.sn!=="initSegment"&&(this.fragPrevious=vr),this.fragBufferedComplete(vr,xr)}onError(hr,gr){var vr;if(gr.fatal){this.state=State.ERROR;return}switch(gr.details){case ErrorDetails.FRAG_GAP:case ErrorDetails.FRAG_PARSING_ERROR:case ErrorDetails.FRAG_DECRYPT_ERROR:case ErrorDetails.FRAG_LOAD_ERROR:case ErrorDetails.FRAG_LOAD_TIMEOUT:case ErrorDetails.KEY_LOAD_ERROR:case ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(PlaylistLevelType.MAIN,gr);break;case ErrorDetails.LEVEL_LOAD_ERROR:case ErrorDetails.LEVEL_LOAD_TIMEOUT:case ErrorDetails.LEVEL_PARSING_ERROR:!gr.levelRetry&&this.state===State.WAITING_LEVEL&&((vr=gr.context)==null?void 0:vr.type)===PlaylistContextType.LEVEL&&(this.state=State.IDLE);break;case ErrorDetails.BUFFER_APPEND_ERROR:case ErrorDetails.BUFFER_FULL_ERROR:if(!gr.parent||gr.parent!=="main")return;if(gr.details===ErrorDetails.BUFFER_APPEND_ERROR){this.resetLoadingState();return}this.reduceLengthAndFlushBuffer(gr)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case ErrorDetails.INTERNAL_EXCEPTION:this.recoverWorkerError(gr);break}}checkBuffer(){const{media:hr,gapController:gr}=this;if(!(!hr||!gr||!hr.readyState)){if(this.loadedmetadata||!BufferHelper.getBuffered(hr).length){const vr=this.state!==State.IDLE?this.fragCurrent:null;gr.poll(this.lastCurrentTime,vr)}this.lastCurrentTime=hr.currentTime}}onFragLoadEmergencyAborted(){this.state=State.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()}onBufferFlushed(hr,{type:gr}){if(gr!==ElementaryStreamTypes.AUDIO||this.audioOnly&&!this.altAudio){const vr=(gr===ElementaryStreamTypes.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(vr,gr,PlaylistLevelType.MAIN),this.tick()}}onLevelsUpdated(hr,gr){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level),this.levels=gr.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:hr}=this;if(!hr)return;const gr=hr.currentTime;let vr=this.startPosition;if(vr>=0&&gr<vr){if(hr.seeking){this.log(`could not seek to ${vr}, already seeking at ${gr}`);return}const xr=BufferHelper.getBuffered(hr),Cr=(xr.length?xr.start(0):0)-vr;Cr>0&&(Cr<this.config.maxBufferHole||Cr<this.config.maxFragLookUpTolerance)&&(this.log(`adjusting start position by ${Cr} to match buffer start`),vr+=Cr,this.startPosition=vr),this.log(`seek to target start position ${vr} from current time ${gr}`),hr.currentTime=vr}}_getAudioCodec(hr){let gr=this.config.defaultAudioCodec||hr.audioCodec;return this.audioCodecSwap&&gr&&(this.log("Swapping audio codec"),gr.indexOf("mp4a.40.5")!==-1?gr="mp4a.40.2":gr="mp4a.40.5"),gr}_loadBitrateTestFrag(hr,gr){hr.bitrateTest=!0,this._doFragLoad(hr,gr).then(vr=>{const{hls:xr}=this;if(!vr||this.fragContextChanged(hr))return;gr.fragmentError=0,this.state=State.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;const Er=hr.stats;Er.parsing.start=Er.parsing.end=Er.buffering.start=Er.buffering.end=self.performance.now(),xr.trigger(Events.FRAG_LOADED,vr),hr.bitrateTest=!1})}_handleTransmuxComplete(hr){var gr;const vr="main",{hls:xr}=this,{remuxResult:Er,chunkMeta:Cr}=hr,wr=this.getCurrentContext(Cr);if(!wr){this.resetWhenMissingContext(Cr);return}const{frag:Rr,part:kr,level:Dr}=wr,{video:Br,text:Hr,id3:Gr,initSegment:qr}=Er,{details:zr}=Dr,Qr=this.altAudio?void 0:Er.audio;if(this.fragContextChanged(Rr)){this.fragmentTracker.removeFragment(Rr);return}if(this.state=State.PARSING,qr){if(qr!=null&&qr.tracks){const vn=Rr.initSegment||Rr;this._bufferInitSegment(Dr,qr.tracks,vn,Cr),xr.trigger(Events.FRAG_PARSING_INIT_SEGMENT,{frag:vn,id:vr,tracks:qr.tracks})}const sn=qr.initPTS,hn=qr.timescale;isFiniteNumber(sn)&&(this.initPTS[Rr.cc]={baseTime:sn,timescale:hn},xr.trigger(Events.INIT_PTS_FOUND,{frag:Rr,id:vr,initPTS:sn,timescale:hn}))}if(Br&&zr&&Rr.sn!=="initSegment"){const sn=zr.fragments[Rr.sn-1-zr.startSN],hn=Rr.sn===zr.startSN,vn=!sn||Rr.cc>sn.cc;if(Er.independent!==!1){const{startPTS:yn,endPTS:gn,startDTS:bn,endDTS:xn}=Br;if(kr)kr.elementaryStreams[Br.type]={startPTS:yn,endPTS:gn,startDTS:bn,endDTS:xn};else if(Br.firstKeyFrame&&Br.independent&&Cr.id===1&&!vn&&(this.couldBacktrack=!0),Br.dropped&&Br.independent){const $n=this.getMainFwdBufferInfo(),Sn=($n?$n.end:this.getLoadPosition())+this.config.maxBufferHole,Cn=Br.firstKeyFramePTS?Br.firstKeyFramePTS:yn;if(!hn&&Sn<Cn-this.config.maxBufferHole&&!vn){this.backtrack(Rr);return}else vn&&(Rr.gap=!0);Rr.setElementaryStreamInfo(Br.type,Rr.start,gn,Rr.start,xn,!0)}else hn&&yn>MAX_START_GAP_JUMP&&(Rr.gap=!0);Rr.setElementaryStreamInfo(Br.type,yn,gn,bn,xn),this.backtrackFragment&&(this.backtrackFragment=Rr),this.bufferFragmentData(Br,Rr,kr,Cr,hn||vn)}else if(hn||vn)Rr.gap=!0;else{this.backtrack(Rr);return}}if(Qr){const{startPTS:sn,endPTS:hn,startDTS:vn,endDTS:yn}=Qr;kr&&(kr.elementaryStreams[ElementaryStreamTypes.AUDIO]={startPTS:sn,endPTS:hn,startDTS:vn,endDTS:yn}),Rr.setElementaryStreamInfo(ElementaryStreamTypes.AUDIO,sn,hn,vn,yn),this.bufferFragmentData(Qr,Rr,kr,Cr)}if(zr&&Gr!=null&&(gr=Gr.samples)!=null&&gr.length){const sn={id:vr,frag:Rr,details:zr,samples:Gr.samples};xr.trigger(Events.FRAG_PARSING_METADATA,sn)}if(zr&&Hr){const sn={id:vr,frag:Rr,details:zr,samples:Hr.samples};xr.trigger(Events.FRAG_PARSING_USERDATA,sn)}}_bufferInitSegment(hr,gr,vr,xr){if(this.state!==State.PARSING)return;this.audioOnly=!!gr.audio&&!gr.video,this.altAudio&&!this.audioOnly&&delete gr.audio;const{audio:Er,video:Cr,audiovideo:wr}=gr;if(Er){let Rr=hr.audioCodec;const kr=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){Rr&&(Rr.indexOf("mp4a.40.5")!==-1?Rr="mp4a.40.2":Rr="mp4a.40.5");const Dr=Er.metadata;Dr&&"channelCount"in Dr&&(Dr.channelCount||1)!==1&&kr.indexOf("firefox")===-1&&(Rr="mp4a.40.5")}Rr&&Rr.indexOf("mp4a.40.5")!==-1&&kr.indexOf("android")!==-1&&Er.container!=="audio/mpeg"&&(Rr="mp4a.40.2",this.log(`Android: force audio codec to ${Rr}`)),hr.audioCodec&&hr.audioCodec!==Rr&&this.log(`Swapping manifest audio codec "${hr.audioCodec}" for "${Rr}"`),Er.levelCodec=Rr,Er.id="main",this.log(`Init audio buffer, container:${Er.container}, codecs[selected/level/parsed]=[${Rr||""}/${hr.audioCodec||""}/${Er.codec}]`)}Cr&&(Cr.levelCodec=hr.videoCodec,Cr.id="main",this.log(`Init video buffer, container:${Cr.container}, codecs[level/parsed]=[${hr.videoCodec||""}/${Cr.codec}]`)),wr&&this.log(`Init audiovideo buffer, container:${wr.container}, codecs[level/parsed]=[${hr.codecs}/${wr.codec}]`),this.hls.trigger(Events.BUFFER_CODECS,gr),Object.keys(gr).forEach(Rr=>{const Dr=gr[Rr].initSegment;Dr!=null&&Dr.byteLength&&this.hls.trigger(Events.BUFFER_APPENDING,{type:Rr,data:Dr,frag:vr,part:null,chunkMeta:xr,parent:vr.type})}),this.tickImmediate()}getMainFwdBufferInfo(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,PlaylistLevelType.MAIN)}backtrack(hr){this.couldBacktrack=!0,this.backtrackFragment=hr,this.resetTransmuxer(),this.flushBufferGap(hr),this.fragmentTracker.removeFragment(hr),this.fragPrevious=null,this.nextLoadPosition=hr.start,this.state=State.IDLE}checkFragmentChanged(){const hr=this.media;let gr=null;if(hr&&hr.readyState>1&&hr.seeking===!1){const vr=hr.currentTime;if(BufferHelper.isBuffered(hr,vr)?gr=this.getAppendedFrag(vr):BufferHelper.isBuffered(hr,vr+.1)&&(gr=this.getAppendedFrag(vr+.1)),gr){this.backtrackFragment=null;const xr=this.fragPlaying,Er=gr.level;(!xr||gr.sn!==xr.sn||xr.level!==Er)&&(this.fragPlaying=gr,this.hls.trigger(Events.FRAG_CHANGED,{frag:gr}),(!xr||xr.level!==Er)&&this.hls.trigger(Events.LEVEL_SWITCHED,{level:Er}))}}}get nextLevel(){const hr=this.nextBufferedFrag;return hr?hr.level:-1}get currentFrag(){const hr=this.media;return hr?this.fragPlaying||this.getAppendedFrag(hr.currentTime):null}get currentProgramDateTime(){const hr=this.media;if(hr){const gr=hr.currentTime,vr=this.currentFrag;if(vr&&isFiniteNumber(gr)&&isFiniteNumber(vr.programDateTime)){const xr=vr.programDateTime+(gr-vr.start)*1e3;return new Date(xr)}}return null}get currentLevel(){const hr=this.currentFrag;return hr?hr.level:-1}get nextBufferedFrag(){const hr=this.currentFrag;return hr?this.followingBufferedFrag(hr):null}get forceStartLoad(){return this._forceStartLoad}}class Hls{static get version(){return"1.5.19"}static isMSESupported(){return isMSESupported()}static isSupported(){return isSupported()}static getMediaSource(){return getMediaSource()}static get Events(){return Events}static get ErrorTypes(){return ErrorTypes}static get ErrorDetails(){return ErrorDetails}static get DefaultConfig(){return Hls.defaultConfig?Hls.defaultConfig:hlsDefaultConfig}static set DefaultConfig(hr){Hls.defaultConfig=hr}constructor(hr={}){this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this.started=!1,this._emitter=new EventEmitter,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null,this.triggeringException=void 0,enableLogs(hr.debug||!1,"Hls instance");const gr=this.config=mergeConfig(Hls.DefaultConfig,hr);this.userConfig=hr,gr.progressive&&enableStreamingMode(gr);const{abrController:vr,bufferController:xr,capLevelController:Er,errorController:Cr,fpsController:wr}=gr,Rr=new Cr(this),kr=this.abrController=new vr(this),Dr=this.bufferController=new xr(this),Br=this.capLevelController=new Er(this),Hr=new wr(this),Gr=new PlaylistLoader(this),qr=new ID3TrackController(this),zr=gr.contentSteeringController,Qr=zr?new zr(this):null,sn=this.levelController=new LevelController(this,Qr),hn=new FragmentTracker(this),vn=new KeyLoader(this.config),yn=this.streamController=new StreamController(this,hn,vn);Br.setStreamController(yn),Hr.setStreamController(yn);const gn=[Gr,sn,yn];Qr&&gn.splice(1,0,Qr),this.networkControllers=gn;const bn=[kr,Dr,Br,Hr,qr,hn];this.audioTrackController=this.createController(gr.audioTrackController,gn);const xn=gr.audioStreamController;xn&&gn.push(new xn(this,hn,vn)),this.subtitleTrackController=this.createController(gr.subtitleTrackController,gn);const $n=gr.subtitleStreamController;$n&&gn.push(new $n(this,hn,vn)),this.createController(gr.timelineController,bn),vn.emeController=this.emeController=this.createController(gr.emeController,bn),this.cmcdController=this.createController(gr.cmcdController,bn),this.latencyController=this.createController(LatencyController,bn),this.coreComponents=bn,gn.push(Rr);const Sn=Rr.onErrorOut;typeof Sn=="function"&&this.on(Events.ERROR,Sn,Rr)}createController(hr,gr){if(hr){const vr=new hr(this);return gr&&gr.push(vr),vr}return null}on(hr,gr,vr=this){this._emitter.on(hr,gr,vr)}once(hr,gr,vr=this){this._emitter.once(hr,gr,vr)}removeAllListeners(hr){this._emitter.removeAllListeners(hr)}off(hr,gr,vr=this,xr){this._emitter.off(hr,gr,vr,xr)}listeners(hr){return this._emitter.listeners(hr)}emit(hr,gr,vr){return this._emitter.emit(hr,gr,vr)}trigger(hr,gr){if(this.config.debug)return this.emit(hr,hr,gr);try{return this.emit(hr,hr,gr)}catch(vr){if(logger.error("An internal error happened while handling event "+hr+'. Error message: "'+vr.message+'". Here is a stacktrace:',vr),!this.triggeringException){this.triggeringException=!0;const xr=hr===Events.ERROR;this.trigger(Events.ERROR,{type:ErrorTypes.OTHER_ERROR,details:ErrorDetails.INTERNAL_EXCEPTION,fatal:xr,event:hr,error:vr}),this.triggeringException=!1}}return!1}listenerCount(hr){return this._emitter.listenerCount(hr)}destroy(){logger.log("destroy"),this.trigger(Events.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach(gr=>gr.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(gr=>gr.destroy()),this.coreComponents.length=0;const hr=this.config;hr.xhrSetup=hr.fetchSetup=void 0,this.userConfig=null}attachMedia(hr){logger.log("attachMedia"),this._media=hr,this.trigger(Events.MEDIA_ATTACHING,{media:hr})}detachMedia(){logger.log("detachMedia"),this.trigger(Events.MEDIA_DETACHING,void 0),this._media=null}loadSource(hr){this.stopLoad();const gr=this.media,vr=this.url,xr=this.url=urlToolkitExports.buildAbsoluteURL(self.location.href,hr,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,logger.log(`loadSource:${xr}`),gr&&vr&&(vr!==xr||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(gr)),this.trigger(Events.MANIFEST_LOADING,{url:hr})}startLoad(hr=-1){logger.log(`startLoad(${hr})`),this.started=!0,this.resumeBuffering();for(let gr=0;gr<this.networkControllers.length&&(this.networkControllers[gr].startLoad(hr),!(!this.started||!this.networkControllers));gr++);}stopLoad(){logger.log("stopLoad"),this.started=!1;for(let hr=0;hr<this.networkControllers.length&&(this.networkControllers[hr].stopLoad(),!(this.started||!this.networkControllers));hr++);}resumeBuffering(){logger.log("resume buffering"),this.networkControllers.forEach(hr=>{hr.resumeBuffering&&hr.resumeBuffering()})}pauseBuffering(){logger.log("pause buffering"),this.networkControllers.forEach(hr=>{hr.pauseBuffering&&hr.pauseBuffering()})}swapAudioCodec(){logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){logger.log("recoverMediaError");const hr=this._media;this.detachMedia(),hr&&this.attachMedia(hr)}removeLevel(hr){this.levelController.removeLevel(hr)}get levels(){const hr=this.levelController.levels;return hr||[]}get currentLevel(){return this.streamController.currentLevel}set currentLevel(hr){logger.log(`set currentLevel:${hr}`),this.levelController.manualLevel=hr,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(hr){logger.log(`set nextLevel:${hr}`),this.levelController.manualLevel=hr,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(hr){logger.log(`set loadLevel:${hr}`),this.levelController.manualLevel=hr}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(hr){this.levelController.nextLoadLevel=hr}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(hr){logger.log(`set firstLevel:${hr}`),this.levelController.firstLevel=hr}get startLevel(){const hr=this.levelController.startLevel;return hr===-1&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:hr}set startLevel(hr){logger.log(`set startLevel:${hr}`),hr!==-1&&(hr=Math.max(hr,this.minAutoLevel)),this.levelController.startLevel=hr}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(hr){const gr=!!hr;gr!==this.config.capLevelToPlayerSize&&(gr?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=gr)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:hr}=this.abrController;return hr?hr.getEstimate():NaN}set bandwidthEstimate(hr){this.abrController.resetEstimator(hr)}get ttfbEstimate(){const{bwEstimator:hr}=this.abrController;return hr?hr.getEstimateTTFB():NaN}set autoLevelCapping(hr){this._autoLevelCapping!==hr&&(logger.log(`set autoLevelCapping:${hr}`),this._autoLevelCapping=hr,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(hr){isHdcpLevel(hr)&&this._maxHdcpLevel!==hr&&(this._maxHdcpLevel=hr,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return this.levelController.manualLevel===-1}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:hr,config:{minAutoBitrate:gr}}=this;if(!hr)return 0;const vr=hr.length;for(let xr=0;xr<vr;xr++)if(hr[xr].maxBitrate>=gr)return xr;return 0}get maxAutoLevel(){const{levels:hr,autoLevelCapping:gr,maxHdcpLevel:vr}=this;let xr;if(gr===-1&&hr!=null&&hr.length?xr=hr.length-1:xr=gr,vr)for(let Er=xr;Er--;){const Cr=hr[Er].attrs["HDCP-LEVEL"];if(Cr&&Cr<=vr)return Er}return xr}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(hr){this.abrController.nextAutoLevel=hr}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}setAudioOption(hr){var gr;return(gr=this.audioTrackController)==null?void 0:gr.setAudioOption(hr)}setSubtitleOption(hr){var gr;return(gr=this.subtitleTrackController)==null||gr.setSubtitleOption(hr),null}get allAudioTracks(){const hr=this.audioTrackController;return hr?hr.allAudioTracks:[]}get audioTracks(){const hr=this.audioTrackController;return hr?hr.audioTracks:[]}get audioTrack(){const hr=this.audioTrackController;return hr?hr.audioTrack:-1}set audioTrack(hr){const gr=this.audioTrackController;gr&&(gr.audioTrack=hr)}get allSubtitleTracks(){const hr=this.subtitleTrackController;return hr?hr.allSubtitleTracks:[]}get subtitleTracks(){const hr=this.subtitleTrackController;return hr?hr.subtitleTracks:[]}get subtitleTrack(){const hr=this.subtitleTrackController;return hr?hr.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(hr){const gr=this.subtitleTrackController;gr&&(gr.subtitleTrack=hr)}get subtitleDisplay(){const hr=this.subtitleTrackController;return hr?hr.subtitleDisplay:!1}set subtitleDisplay(hr){const gr=this.subtitleTrackController;gr&&(gr.subtitleDisplay=hr)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(hr){this.config.lowLatencyMode=hr}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}}Hls.defaultConfig=void 0;var R$2=Hls,C$1={VIDEO:"video",THUMBNAIL:"thumbnail",STORYBOARD:"storyboard",DRM:"drm"},M$2={NOT_AN_ERROR:0,NETWORK_OFFLINE:2000002,NETWORK_UNKNOWN_ERROR:2e6,NETWORK_NO_STATUS:2000001,NETWORK_INVALID_URL:24e5,NETWORK_NOT_FOUND:2404e3,NETWORK_NOT_READY:2412e3,NETWORK_GENERIC_SERVER_FAIL:25e5,NETWORK_TOKEN_MISSING:2403201,NETWORK_TOKEN_MALFORMED:2412202,NETWORK_TOKEN_EXPIRED:2403210,NETWORK_TOKEN_AUD_MISSING:2403221,NETWORK_TOKEN_AUD_MISMATCH:2403222,NETWORK_TOKEN_SUB_MISMATCH:2403232,ENCRYPTED_ERROR:5e6,ENCRYPTED_UNSUPPORTED_KEY_SYSTEM:5000001,ENCRYPTED_GENERATE_REQUEST_FAILED:5000002,ENCRYPTED_UPDATE_LICENSE_FAILED:5000003,ENCRYPTED_UPDATE_SERVER_CERT_FAILED:5000004,ENCRYPTED_CDM_ERROR:5000005,ENCRYPTED_OUTPUT_RESTRICTED:5000006,ENCRYPTED_MISSING_TOKEN:5000002},H$2=mr=>mr===C$1.VIDEO?"playback":mr,k=class Au extends Error{constructor(hr,gr=Au.MEDIA_ERR_CUSTOM,vr,xr){var Er;super(hr),this.name="MediaError",this.code=gr,this.context=xr,this.fatal=vr??(gr>=Au.MEDIA_ERR_NETWORK&&gr<=Au.MEDIA_ERR_ENCRYPTED),this.message||(this.message=(Er=Au.defaultMessages[this.code])!=null?Er:"")}};k.MEDIA_ERR_ABORTED=1,k.MEDIA_ERR_NETWORK=2,k.MEDIA_ERR_DECODE=3,k.MEDIA_ERR_SRC_NOT_SUPPORTED=4,k.MEDIA_ERR_ENCRYPTED=5,k.MEDIA_ERR_CUSTOM=100,k.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail.",3:"A media error caused playback to be aborted. The media could be corrupt or your browser does not support this format.",4:"An unsupported error occurred. The server or network failed, or your browser does not support this format.",5:"The media is encrypted and there are no keys to decrypt it."};var T$1=k,je$1=mr=>mr==null,S$1=(mr,hr)=>je$1(hr)?!1:mr in hr,V$2={ANY:"any",MUTED:"muted"},D$1={ON_DEMAND:"on-demand",LIVE:"live",UNKNOWN:"unknown"},q$1={MSE:"mse",NATIVE:"native"},w$1={HEADER:"header",QUERY:"query",NONE:"none"},Ut$2=Object.values(w$1),N={M3U8:"application/vnd.apple.mpegurl",MP4:"video/mp4"},F$1={HLS:N.M3U8};[...Object.values(N)];var ze="en",K$2={code:ze},x=(mr,hr,gr,vr,xr=mr)=>{xr.addEventListener(hr,gr,vr),mr.addEventListener("teardown",()=>{xr.removeEventListener(hr,gr)},{once:!0})};function de$2(mr,hr,gr){hr&&gr>hr&&(gr=hr);for(let vr=0;vr<mr.length;vr++)if(mr.start(vr)<=gr&&mr.end(vr)>=gr)return!0;return!1}var Y$1=mr=>{let hr=mr.indexOf("?");if(hr<0)return[mr];let gr=mr.slice(0,hr),vr=mr.slice(hr);return[gr,vr]},O=mr=>{let hr=mr.type;if(hr){let vr=hr.toUpperCase();return S$1(vr,F$1)?F$1[vr]:hr}let{src:gr}=mr;return gr?Xe$1(gr):""},z$1=mr=>mr==="VOD"?D$1.ON_DEMAND:D$1.LIVE,X$3=mr=>mr==="EVENT"?Number.POSITIVE_INFINITY:mr==="VOD"?Number.NaN:0,Xe$1=mr=>{let hr="";try{hr=new URL(mr).pathname}catch{console.error("invalid url")}let gr=hr.lastIndexOf(".");if(gr<0)return"";let vr=hr.slice(gr+1).toUpperCase();return S$1(vr,N)?N[vr]:""},Q$3=mr=>{let hr=(mr??"").split(".")[1];if(hr)try{let gr=hr.replace(/-/g,"+").replace(/_/g,"/"),vr=decodeURIComponent(atob(gr).split("").map(function(xr){return"%"+("00"+xr.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(vr)}catch{return}},le$3=({exp:mr},hr=Date.now())=>!mr||mr*1e3<hr,pe$3=({sub:mr},hr)=>mr!==hr,fe$1=({aud:mr},hr)=>!mr,Te$2=({aud:mr},hr)=>mr!==hr,ye$1="en";function E$3(mr,hr=!0){var gr,vr;let xr=hr&&(vr=(gr=K$2)==null?void 0:gr[mr])!=null?vr:mr,Er=hr?K$2.code:ye$1;return new j$1(xr,Er)}var j$1=class{constructor(hr,gr=(vr=>(vr=K$2)!=null?vr:ye$1)()){this.message=hr,this.locale=gr}format(hr){return this.message.replace(/\{(\w+)\}/g,(gr,vr)=>{var xr;return(xr=hr[vr])!=null?xr:""})}toString(){return this.message}},Qe$1=Object.values(V$2),me$2=mr=>typeof mr=="boolean"||typeof mr=="string"&&Qe$1.includes(mr),Ee$3=(mr,hr,gr)=>{let{autoplay:vr}=mr,xr=!1,Er=!1,Cr=me$2(vr)?vr:!!vr,wr=()=>{xr||x(hr,"playing",()=>{xr=!0},{once:!0})};if(wr(),x(hr,"loadstart",()=>{xr=!1,wr(),Z$2(hr,Cr)},{once:!0}),x(hr,"loadstart",()=>{gr||(mr.streamType&&mr.streamType!==D$1.UNKNOWN?Er=mr.streamType===D$1.LIVE:Er=!Number.isFinite(hr.duration)),Z$2(hr,Cr)},{once:!0}),gr&&gr.once(R$2.Events.LEVEL_LOADED,(Rr,kr)=>{var Dr;mr.streamType&&mr.streamType!==D$1.UNKNOWN?Er=mr.streamType===D$1.LIVE:Er=(Dr=kr.details.live)!=null?Dr:!1}),!Cr){let Rr=()=>{!Er||Number.isFinite(mr.startTime)||(gr!=null&&gr.liveSyncPosition?hr.currentTime=gr.liveSyncPosition:Number.isFinite(hr.seekable.end(0))&&(hr.currentTime=hr.seekable.end(0)))};gr&&x(hr,"play",()=>{hr.preload==="metadata"?gr.once(R$2.Events.LEVEL_UPDATED,Rr):Rr()},{once:!0})}return Rr=>{xr||(Cr=me$2(Rr)?Rr:!!Rr,Z$2(hr,Cr))}},Z$2=(mr,hr)=>{if(!hr)return;let gr=mr.muted,vr=()=>mr.muted=gr;switch(hr){case V$2.ANY:mr.play().catch(()=>{mr.muted=!0,mr.play().catch(vr)});break;case V$2.MUTED:mr.muted=!0,mr.play().catch(vr);break;default:mr.play().catch(()=>{});break}},ge$3=({preload:mr,src:hr},gr,vr)=>{let xr=Br=>{Br!=null&&["","none","metadata","auto"].includes(Br)?gr.setAttribute("preload",Br):gr.removeAttribute("preload")};if(!vr)return xr(mr),xr;let Er=!1,Cr=!1,wr=vr.config.maxBufferLength,Rr=vr.config.maxBufferSize,kr=Br=>{xr(Br);let Hr=Br??gr.preload;Cr||Hr==="none"||(Hr==="metadata"?(vr.config.maxBufferLength=1,vr.config.maxBufferSize=1):(vr.config.maxBufferLength=wr,vr.config.maxBufferSize=Rr),Dr())},Dr=()=>{!Er&&hr&&(Er=!0,vr.loadSource(hr))};return x(gr,"play",()=>{Cr=!0,vr.config.maxBufferLength=wr,vr.config.maxBufferSize=Rr,Dr()},{once:!0}),kr(mr),kr};function Me$2(mr,hr){var gr;if(!("videoTracks"in mr))return;let vr=new WeakMap;hr.on(R$2.Events.MANIFEST_PARSED,function(kr,Dr){Rr();let Br=mr.addVideoTrack("main");Br.selected=!0;for(let[Hr,Gr]of Dr.levels.entries()){let qr=Br.addRendition(Gr.url[0],Gr.width,Gr.height,Gr.videoCodec,Gr.bitrate);vr.set(Gr,`${Hr}`),qr.id=`${Hr}`}}),hr.on(R$2.Events.AUDIO_TRACKS_UPDATED,function(kr,Dr){wr();for(let Br of Dr.audioTracks){let Hr=Br.default?"main":"alternative",Gr=mr.addAudioTrack(Hr,Br.name,Br.lang);Gr.id=`${Br.id}`,Br.default&&(Gr.enabled=!0)}}),mr.audioTracks.addEventListener("change",()=>{var kr;let Dr=+((kr=[...mr.audioTracks].find(Hr=>Hr.enabled))==null?void 0:kr.id),Br=hr.audioTracks.map(Hr=>Hr.id);Dr!=hr.audioTrack&&Br.includes(Dr)&&(hr.audioTrack=Dr)}),hr.on(R$2.Events.LEVELS_UPDATED,function(kr,Dr){var Br;let Hr=mr.videoTracks[(Br=mr.videoTracks.selectedIndex)!=null?Br:0];if(!Hr)return;let Gr=Dr.levels.map(qr=>vr.get(qr));for(let qr of mr.videoRenditions)qr.id&&!Gr.includes(qr.id)&&Hr.removeRendition(qr)});let xr=kr=>{let Dr=kr.target.selectedIndex;Dr!=hr.nextLevel&&Er(Dr)},Er=kr=>{let Dr=mr.currentTime,Br=!1,Hr=(Gr,qr)=>{Br||(Br=!Number.isFinite(qr.endOffset))};hr.on(R$2.Events.BUFFER_FLUSHING,Hr),hr.nextLevel=kr,hr.off(R$2.Events.BUFFER_FLUSHING,Hr),Br||hr.trigger(R$2.Events.BUFFER_FLUSHING,{startOffset:Dr+10,endOffset:1/0,type:"video"})};(gr=mr.videoRenditions)==null||gr.addEventListener("change",xr);let Cr=()=>{for(let kr of mr.videoTracks)mr.removeVideoTrack(kr)},wr=()=>{for(let kr of mr.audioTracks)mr.removeAudioTrack(kr)},Rr=()=>{Cr(),wr()};hr.once(R$2.Events.DESTROYING,Rr)}var ee$3=mr=>"time"in mr?mr.time:mr.startTime;function Re$2(mr,hr){hr.on(R$2.Events.NON_NATIVE_TEXT_TRACKS_FOUND,(xr,{tracks:Er})=>{Er.forEach(Cr=>{var wr,Rr;let kr=(wr=Cr.subtitleTrack)!=null?wr:Cr.closedCaptions,Dr=hr.subtitleTracks.findIndex(({lang:Hr,name:Gr,type:qr})=>Hr==kr?.lang&&Gr===Cr.label&&qr.toLowerCase()===Cr.kind),Br=((Rr=Cr._id)!=null?Rr:Cr.default)?"default":`${Cr.kind}${Dr}`;te$2(mr,Cr.kind,Cr.label,kr?.lang,Br,Cr.default)})});let gr=()=>{if(!hr.subtitleTracks.length)return;let xr=Array.from(mr.textTracks).find(wr=>wr.id&&wr.mode==="showing"&&["subtitles","captions"].includes(wr.kind));if(!xr)return;let Er=hr.subtitleTracks[hr.subtitleTrack],Cr=Er?Er.default?"default":`${hr.subtitleTracks[hr.subtitleTrack].type.toLowerCase()}${hr.subtitleTrack}`:void 0;if(hr.subtitleTrack<0||xr?.id!==Cr){let wr=hr.subtitleTracks.findIndex(({lang:Rr,name:kr,type:Dr,default:Br})=>xr.id==="default"&&Br||Rr==xr.language&&kr===xr.label&&Dr.toLowerCase()===xr.kind);hr.subtitleTrack=wr}xr?.id===Cr&&xr.cues&&Array.from(xr.cues).forEach(wr=>{xr.addCue(wr)})};mr.textTracks.addEventListener("change",gr),hr.on(R$2.Events.CUES_PARSED,(xr,{track:Er,cues:Cr})=>{let wr=mr.textTracks.getTrackById(Er);if(!wr)return;let Rr=wr.mode==="disabled";Rr&&(wr.mode="hidden"),Cr.forEach(kr=>{var Dr;(Dr=wr.cues)!=null&&Dr.getCueById(kr.id)||wr.addCue(kr)}),Rr&&(wr.mode="disabled")}),hr.once(R$2.Events.DESTROYING,()=>{mr.textTracks.removeEventListener("change",gr),mr.querySelectorAll("track[data-removeondestroy]").forEach(xr=>{xr.remove()})});let vr=()=>{Array.from(mr.textTracks).forEach(xr=>{var Er,Cr;if(!["subtitles","caption"].includes(xr.kind)&&(xr.label==="thumbnails"||xr.kind==="chapters")){if(!((Er=xr.cues)!=null&&Er.length)){let wr="track";xr.kind&&(wr+=`[kind="${xr.kind}"]`),xr.label&&(wr+=`[label="${xr.label}"]`);let Rr=mr.querySelector(wr),kr=(Cr=Rr?.getAttribute("src"))!=null?Cr:"";Rr?.removeAttribute("src"),setTimeout(()=>{Rr?.setAttribute("src",kr)},0)}xr.mode!=="hidden"&&(xr.mode="hidden")}})};hr.once(R$2.Events.MANIFEST_LOADED,vr),hr.once(R$2.Events.MEDIA_ATTACHED,vr)}function te$2(mr,hr,gr,vr,xr,Er){let Cr=document.createElement("track");return Cr.kind=hr,Cr.label=gr,vr&&(Cr.srclang=vr),xr&&(Cr.id=xr),Er&&(Cr.default=!0),Cr.track.mode=["subtitles","captions"].includes(hr)?"disabled":"hidden",Cr.setAttribute("data-removeondestroy",""),mr.append(Cr),Cr.track}function Ze$1(mr,hr){let gr=Array.prototype.find.call(mr.querySelectorAll("track"),vr=>vr.track===hr);gr?.remove()}function A$1(mr,hr,gr){var vr;return(vr=Array.from(mr.querySelectorAll("track")).find(xr=>xr.track.label===hr&&xr.track.kind===gr))==null?void 0:vr.track}async function Ce$2(mr,hr,gr,vr){let xr=A$1(mr,gr,vr);return xr||(xr=te$2(mr,vr,gr),xr.mode="hidden",await new Promise(Er=>setTimeout(()=>Er(void 0),0))),xr.mode!=="hidden"&&(xr.mode="hidden"),[...hr].sort((Er,Cr)=>ee$3(Cr)-ee$3(Er)).forEach(Er=>{var Cr,wr;let Rr=Er.value,kr=ee$3(Er);if("endTime"in Er&&Er.endTime!=null)xr?.addCue(new VTTCue(kr,Er.endTime,vr==="chapters"?Rr:JSON.stringify(Rr??null)));else{let Dr=Array.prototype.findIndex.call(xr?.cues,qr=>qr.startTime>=kr),Br=(Cr=xr?.cues)==null?void 0:Cr[Dr],Hr=Br?Br.startTime:Number.isFinite(mr.duration)?mr.duration:Number.MAX_SAFE_INTEGER,Gr=(wr=xr?.cues)==null?void 0:wr[Dr-1];Gr&&(Gr.endTime=kr),xr?.addCue(new VTTCue(kr,Hr,vr==="chapters"?Rr:JSON.stringify(Rr??null)))}}),mr.textTracks.dispatchEvent(new Event("change",{bubbles:!0,composed:!0})),xr}var re$3="cuepoints",be=Object.freeze({label:re$3});async function xe$1(mr,hr,gr=be){return Ce$2(mr,hr,gr.label,"metadata")}var W$2=mr=>({time:mr.startTime,value:JSON.parse(mr.text)});function et$1(mr,hr={label:re$3}){let gr=A$1(mr,hr.label,"metadata");return gr!=null&&gr.cues?Array.from(gr.cues,vr=>W$2(vr)):[]}function ve$2(mr,hr={label:re$3}){var gr,vr;let xr=A$1(mr,hr.label,"metadata");if(!((gr=xr?.activeCues)!=null&&gr.length))return;if(xr.activeCues.length===1)return W$2(xr.activeCues[0]);let{currentTime:Er}=mr,Cr=Array.prototype.find.call((vr=xr.activeCues)!=null?vr:[],({startTime:wr,endTime:Rr})=>wr<=Er&&Rr>Er);return W$2(Cr||xr.activeCues[0])}async function Pe$2(mr,hr=be){return new Promise(gr=>{x(mr,"loadstart",async()=>{let vr=await xe$1(mr,[],hr);x(mr,"cuechange",()=>{let xr=ve$2(mr);if(xr){let Er=new CustomEvent("cuepointchange",{composed:!0,bubbles:!0,detail:xr});mr.dispatchEvent(Er)}},{},vr),gr(vr)})})}var ne$2="chapters",De$1=Object.freeze({label:ne$2}),$$3=mr=>({startTime:mr.startTime,endTime:mr.endTime,value:mr.text});async function _e$2(mr,hr,gr=De$1){return Ce$2(mr,hr,gr.label,"chapters")}function tt$1(mr,hr={label:ne$2}){var gr;let vr=A$1(mr,hr.label,"chapters");return(gr=vr?.cues)!=null&&gr.length?Array.from(vr.cues,xr=>$$3(xr)):[]}function ke$2(mr,hr={label:ne$2}){var gr,vr;let xr=A$1(mr,hr.label,"chapters");if(!((gr=xr?.activeCues)!=null&&gr.length))return;if(xr.activeCues.length===1)return $$3(xr.activeCues[0]);let{currentTime:Er}=mr,Cr=Array.prototype.find.call((vr=xr.activeCues)!=null?vr:[],({startTime:wr,endTime:Rr})=>wr<=Er&&Rr>Er);return $$3(Cr||xr.activeCues[0])}async function he$1(mr,hr=De$1){return new Promise(gr=>{x(mr,"loadstart",async()=>{let vr=await _e$2(mr,[],hr);x(mr,"cuechange",()=>{let xr=ke$2(mr);if(xr){let Er=new CustomEvent("chapterchange",{composed:!0,bubbles:!0,detail:xr});mr.dispatchEvent(Er)}},{},vr),gr(vr)})})}function rt$1(mr,hr){if(hr){let gr=hr.playingDate;if(gr!=null)return new Date(gr.getTime()-mr.currentTime*1e3)}return typeof mr.getStartDate=="function"?mr.getStartDate():new Date(NaN)}function nt(mr,hr){if(hr&&hr.playingDate)return hr.playingDate;if(typeof mr.getStartDate=="function"){let gr=mr.getStartDate();return new Date(gr.getTime()+mr.currentTime*1e3)}return new Date(NaN)}var oe$3={VIDEO:"v",THUMBNAIL:"t",STORYBOARD:"s",DRM:"d"},ot$1=mr=>{if(mr===C$1.VIDEO)return oe$3.VIDEO;if(mr===C$1.DRM)return oe$3.DRM},at$1=(mr,hr)=>{var gr,vr;let xr=H$2(mr),Er=`${xr}Token`;return(gr=hr.tokens)!=null&&gr[xr]?(vr=hr.tokens)==null?void 0:vr[xr]:S$1(Er,hr)?hr[Er]:void 0},U$2=(mr,hr,gr,vr=!1,xr=!(Er=>(Er=globalThis.navigator)==null?void 0:Er.onLine)())=>{var Er,Cr;if(xr){let Qr=E$3("Your device appears to be offline",vr),sn,hn=T$1.MEDIA_ERR_NETWORK,vn=new T$1(Qr,hn,!0,sn);return vn.errorCategory=hr,vn.muxCode=M$2.NETWORK_OFFLINE,vn.data=mr,vn}let wr="status"in mr?mr.status:mr.code,Rr=Date.now(),kr=T$1.MEDIA_ERR_NETWORK;if(wr===200)return;let Dr=H$2(hr),Br=at$1(hr,gr),Hr=ot$1(hr),[Gr]=Y$1((Er=gr.playbackId)!=null?Er:"");if(!wr||!Gr)return;let qr=Q$3(Br);if(Br&&!qr){let Qr=E$3("The {tokenNamePrefix}-token provided is invalid or malformed.",vr).format({tokenNamePrefix:Dr}),sn=E$3("Compact JWT string: {token}",vr).format({token:Br}),hn=new T$1(Qr,kr,!0,sn);return hn.errorCategory=hr,hn.muxCode=M$2.NETWORK_TOKEN_MALFORMED,hn.data=mr,hn}if(wr>=500){let Qr=new T$1("",kr,!0);return Qr.errorCategory=hr,Qr.muxCode=M$2.NETWORK_UNKNOWN_ERROR,Qr}if(wr===403)if(qr){if(le$3(qr,Rr)){let Qr={timeStyle:"medium",dateStyle:"medium"},sn=E$3("The video’s secured {tokenNamePrefix}-token has expired.",vr).format({tokenNamePrefix:Dr}),hn=E$3("Expired at: {expiredDate}. Current time: {currentDate}.",vr).format({expiredDate:new Intl.DateTimeFormat("en",Qr).format((Cr=qr.exp)!=null?Cr:0*1e3),currentDate:new Intl.DateTimeFormat("en",Qr).format(Rr)}),vn=new T$1(sn,kr,!0,hn);return vn.errorCategory=hr,vn.muxCode=M$2.NETWORK_TOKEN_EXPIRED,vn.data=mr,vn}if(pe$3(qr,Gr)){let Qr=E$3("The video’s playback ID does not match the one encoded in the {tokenNamePrefix}-token.",vr).format({tokenNamePrefix:Dr}),sn=E$3("Specified playback ID: {playbackId} and the playback ID encoded in the {tokenNamePrefix}-token: {tokenPlaybackId}",vr).format({tokenNamePrefix:Dr,playbackId:Gr,tokenPlaybackId:qr.sub}),hn=new T$1(Qr,kr,!0,sn);return hn.errorCategory=hr,hn.muxCode=M$2.NETWORK_TOKEN_SUB_MISMATCH,hn.data=mr,hn}if(fe$1(qr)){let Qr=E$3("The {tokenNamePrefix}-token is formatted with incorrect information.",vr).format({tokenNamePrefix:Dr}),sn=E$3("The {tokenNamePrefix}-token has no aud value. aud value should be {expectedAud}.",vr).format({tokenNamePrefix:Dr,expectedAud:Hr}),hn=new T$1(Qr,kr,!0,sn);return hn.errorCategory=hr,hn.muxCode=M$2.NETWORK_TOKEN_AUD_MISSING,hn.data=mr,hn}if(Te$2(qr,Hr)){let Qr=E$3("The {tokenNamePrefix}-token is formatted with incorrect information.",vr).format({tokenNamePrefix:Dr}),sn=E$3("The {tokenNamePrefix}-token has an incorrect aud value: {aud}. aud value should be {expectedAud}.",vr).format({tokenNamePrefix:Dr,expectedAud:Hr,aud:qr.aud}),hn=new T$1(Qr,kr,!0,sn);return hn.errorCategory=hr,hn.muxCode=M$2.NETWORK_TOKEN_AUD_MISMATCH,hn.data=mr,hn}}else{let Qr=E$3("Authorization error trying to access this {category} URL. If this is a signed URL, you might need to provide a {tokenNamePrefix}-token.",vr).format({tokenNamePrefix:Dr,category:hr}),sn=E$3("Specified playback ID: {playbackId}",vr).format({playbackId:Gr}),hn=new T$1(Qr,kr,!0,sn);return hn.errorCategory=hr,hn.muxCode=M$2.NETWORK_TOKEN_MISSING,hn.data=mr,hn}if(wr===412){let Qr=E$3("This playback-id may belong to a live stream that is not currently active or an asset that is not ready.",vr),sn=E$3("Specified playback ID: {playbackId}",vr).format({playbackId:Gr}),hn=new T$1(Qr,kr,!0,sn);return hn.errorCategory=hr,hn.muxCode=M$2.NETWORK_NOT_READY,hn.data=mr,hn}if(wr===404){let Qr=E$3("This URL or playback-id does not exist. You may have used an Asset ID or an ID from a different resource.",vr),sn=E$3("Specified playback ID: {playbackId}",vr).format({playbackId:Gr}),hn=new T$1(Qr,kr,!0,sn);return hn.errorCategory=hr,hn.muxCode=M$2.NETWORK_NOT_FOUND,hn.data=mr,hn}if(wr===400){let Qr=E$3("The URL or playback-id was invalid. You may have used an invalid value as a playback-id."),sn=E$3("Specified playback ID: {playbackId}",vr).format({playbackId:Gr}),hn=new T$1(Qr,kr,!0,sn);return hn.errorCategory=hr,hn.muxCode=M$2.NETWORK_INVALID_URL,hn.data=mr,hn}let zr=new T$1("",kr,!0);return zr.errorCategory=hr,zr.muxCode=M$2.NETWORK_UNKNOWN_ERROR,zr.data=mr,zr},B$3={FAIRPLAY:"fairplay",PLAYREADY:"playready",WIDEVINE:"widevine"},st=mr=>{if(mr.includes("fps"))return B$3.FAIRPLAY;if(mr.includes("playready"))return B$3.PLAYREADY;if(mr.includes("widevine"))return B$3.WIDEVINE},it$1=async mr=>fetch(mr).then(hr=>hr.status!==200?Promise.reject(hr):hr.text()).then(hr=>{let gr=hr.split(`
`).find((vr,xr,Er)=>xr&&Er[xr-1].startsWith("#EXT-X-STREAM-INF"));return fetch(gr).then(vr=>vr.status!==200?Promise.reject(vr):vr.text()).then(vr=>vr.split(`
`))}),ct$1=mr=>{var hr,gr,vr;let xr=(gr=((hr=mr.find(Rr=>Rr.startsWith("#EXT-X-PLAYLIST-TYPE")))!=null?hr:"").split(":")[1])==null?void 0:gr.trim(),Er=z$1(xr),Cr=X$3(xr),wr;if(Er===D$1.LIVE){let Rr=mr.find(kr=>kr.startsWith("#EXT-X-PART-INF"));if(Rr)wr=+Rr.split(":")[1].split("=")[1]*2;else{let kr=mr.find(Br=>Br.startsWith("#EXT-X-TARGETDURATION")),Dr=(vr=kr?.split(":"))==null?void 0:vr[1];wr=+(Dr??6)*3}}return{streamType:Er,targetLiveWindow:Cr,liveEdgeStartOffset:wr}},ut$2=async(mr,hr)=>{if(hr===N.MP4)return{streamType:D$1.ON_DEMAND,targetLiveWindow:Number.NaN,liveEdgeStartOffset:void 0};if(hr===N.M3U8){let gr=await it$1(mr);return ct$1(gr)}return console.error(`Media type ${hr} is an unrecognized or unsupported type for src ${mr}.`),{streamType:void 0,targetLiveWindow:void 0,liveEdgeStartOffset:void 0}},dt$1=async(mr,hr,gr=O({src:mr}))=>{var vr,xr,Er;let{streamType:Cr,targetLiveWindow:wr,liveEdgeStartOffset:Rr}=await ut$2(mr,gr);((vr=_$1.get(hr))!=null?vr:{}).liveEdgeStartOffset=Rr,((xr=_$1.get(hr))!=null?xr:{}).targetLiveWindow=wr,hr.dispatchEvent(new CustomEvent("targetlivewindowchange",{composed:!0,bubbles:!0})),((Er=_$1.get(hr))!=null?Er:{}).streamType=Cr,hr.dispatchEvent(new CustomEvent("streamtypechange",{composed:!0,bubbles:!0}))},lt$2=mr=>{var hr;let gr=mr.type,vr=z$1(gr),xr=X$3(gr),Er,Cr=!!((hr=mr.partList)!=null&&hr.length);return vr===D$1.LIVE&&(Er=Cr?mr.partTarget*2:mr.targetduration*3),{streamType:vr,targetLiveWindow:xr,liveEdgeStartOffset:Er,lowLatency:Cr}},pt$1=(mr,hr,gr)=>{var vr,xr,Er,Cr,wr,Rr,kr,Dr;let{streamType:Br,targetLiveWindow:Hr,liveEdgeStartOffset:Gr,lowLatency:qr}=lt$2(mr);if(Br===D$1.LIVE){qr?(gr.config.backBufferLength=(vr=gr.userConfig.backBufferLength)!=null?vr:4,gr.config.maxFragLookUpTolerance=(xr=gr.userConfig.maxFragLookUpTolerance)!=null?xr:.001,gr.config.abrBandWidthUpFactor=(Er=gr.userConfig.abrBandWidthUpFactor)!=null?Er:gr.config.abrBandWidthFactor):gr.config.backBufferLength=(Cr=gr.userConfig.backBufferLength)!=null?Cr:8;let zr=Object.freeze({get length(){return hr.seekable.length},start(Qr){return hr.seekable.start(Qr)},end(Qr){var sn;return Qr>this.length||Qr<0||Number.isFinite(hr.duration)?hr.seekable.end(Qr):(sn=gr.liveSyncPosition)!=null?sn:hr.seekable.end(Qr)}});((wr=_$1.get(hr))!=null?wr:{}).seekable=zr}((Rr=_$1.get(hr))!=null?Rr:{}).liveEdgeStartOffset=Gr,((kr=_$1.get(hr))!=null?kr:{}).targetLiveWindow=Hr,hr.dispatchEvent(new CustomEvent("targetlivewindowchange",{composed:!0,bubbles:!0})),((Dr=_$1.get(hr))!=null?Dr:{}).streamType=Br,hr.dispatchEvent(new CustomEvent("streamtypechange",{composed:!0,bubbles:!0}))},Ie$2,Ae$2,ft$2=(Ae$2=(Ie$2=globalThis?.navigator)==null?void 0:Ie$2.userAgent)!=null?Ae$2:"",Se$2,we$2,Oe$2,Tt$2=(Oe$2=(we$2=(Se$2=globalThis?.navigator)==null?void 0:Se$2.userAgentData)==null?void 0:we$2.platform)!=null?Oe$2:"",yt$1=ft$2.toLowerCase().includes("android")||["x11","android"].some(mr=>Tt$2.toLowerCase().includes(mr)),_$1=new WeakMap,I$2="mux.com",Ue$1,He$1,Ve$2=(He$1=(Ue$1=R$2).isSupported)==null?void 0:He$1.call(Ue$1),mt$1=yt$1,Nr=()=>wd.utils.now(),Et$2=wd.utils.generateUUID,Lr=({playbackId:mr,customDomain:hr=I$2,maxResolution:gr,minResolution:vr,renditionOrder:xr,programStartTime:Er,programEndTime:Cr,assetStartTime:wr,assetEndTime:Rr,playbackToken:kr,tokens:{playback:Dr=kr}={},extraSourceParams:Br={}}={})=>{if(!mr)return;let[Hr,Gr=""]=Y$1(mr),qr=new URL(`https://stream.${hr}/${Hr}.m3u8${Gr}`);return Dr||qr.searchParams.has("token")?(qr.searchParams.forEach((zr,Qr)=>{Qr!="token"&&qr.searchParams.delete(Qr)}),Dr&&qr.searchParams.set("token",Dr)):(gr&&qr.searchParams.set("max_resolution",gr),vr&&(qr.searchParams.set("min_resolution",vr),gr&&+gr.slice(0,-1)<+vr.slice(0,-1)&&console.error("minResolution must be <= maxResolution","minResolution",vr,"maxResolution",gr)),xr&&qr.searchParams.set("rendition_order",xr),Er&&qr.searchParams.set("program_start_time",`${Er}`),Cr&&qr.searchParams.set("program_end_time",`${Cr}`),wr&&qr.searchParams.set("asset_start_time",`${wr}`),Rr&&qr.searchParams.set("asset_end_time",`${Rr}`),Object.entries(Br).forEach(([zr,Qr])=>{Qr!=null&&qr.searchParams.set(zr,Qr)})),qr.toString()},G$1=mr=>{if(!mr)return;let[hr]=mr.split("?");return hr||void 0},gt$1=mr=>{if(!mr||!mr.startsWith("https://stream."))return;let[hr]=new URL(mr).pathname.slice(1).split(".m3u8");return hr||void 0},Mt=mr=>{var hr,gr,vr;return(hr=mr?.metadata)!=null&&hr.video_id?mr.metadata.video_id:Be$2(mr)&&(vr=(gr=G$1(mr.playbackId))!=null?gr:gt$1(mr.src))!=null?vr:mr.src},Rt$2=mr=>{var hr;return(hr=_$1.get(mr))==null?void 0:hr.error},Le$1=mr=>{var hr,gr;return(gr=(hr=_$1.get(mr))==null?void 0:hr.streamType)!=null?gr:D$1.UNKNOWN},Ir=mr=>{var hr,gr;return(gr=(hr=_$1.get(mr))==null?void 0:hr.targetLiveWindow)!=null?gr:Number.NaN},Fe$1=mr=>{var hr,gr;return(gr=(hr=_$1.get(mr))==null?void 0:hr.seekable)!=null?gr:mr.seekable},Ar=mr=>{var hr;let gr=(hr=_$1.get(mr))==null?void 0:hr.liveEdgeStartOffset;if(typeof gr!="number")return Number.NaN;let vr=Fe$1(mr);return vr.length?vr.end(vr.length-1)-gr:Number.NaN},ie$3=.034,Ct$2=(mr,hr,gr=ie$3)=>Math.abs(mr-hr)<=gr,Ke$1=(mr,hr,gr=ie$3)=>mr>hr||Ct$2(mr,hr,gr),bt$2=(mr,hr=ie$3)=>mr.paused&&Ke$1(mr.currentTime,mr.duration,hr),Ye$1=(mr,hr)=>{var gr,vr,xr;if(!hr||!mr.buffered.length)return;if(mr.readyState>2)return!1;let Er=hr.currentLevel>=0?(vr=(gr=hr.levels)==null?void 0:gr[hr.currentLevel])==null?void 0:vr.details:(xr=hr.levels.find(Br=>!!Br.details))==null?void 0:xr.details;if(!Er||Er.live)return;let{fragments:Cr}=Er;if(!(Cr!=null&&Cr.length))return;if(mr.currentTime<mr.duration-(Er.targetduration+.5))return!1;let wr=Cr[Cr.length-1];if(mr.currentTime<=wr.start)return!1;let Rr=wr.start+wr.duration/2,kr=mr.buffered.start(mr.buffered.length-1),Dr=mr.buffered.end(mr.buffered.length-1);return Rr>kr&&Rr<Dr},xt$2=(mr,hr)=>mr.ended||mr.loop?mr.ended:hr&&Ye$1(mr,hr)?!0:bt$2(mr),Sr=(mr,hr,gr)=>{vt$2(hr,gr);let{metadata:vr={}}=mr,{view_session_id:xr=Et$2()}=vr,Er=Mt(mr);vr.view_session_id=xr,vr.video_id=Er,mr.metadata=vr;let Cr=Dr=>{var Br;(Br=hr.mux)==null||Br.emit("hb",{view_drm_type:Dr})};mr.drmTypeCb=Cr,_$1.set(hr,{});let wr=Pt$2(mr,hr),Rr=ge$3(mr,hr,wr);Lt$1(mr,hr,wr),It$2(mr,hr,wr),Pe$2(hr),he$1(hr);let kr=Ee$3(mr,hr,wr);return{engine:wr,setAutoplay:kr,setPreload:Rr}},vt$2=(mr,hr)=>{let gr=hr?.engine;gr&&(gr.detachMedia(),gr.destroy()),mr!=null&&mr.mux&&!mr.mux.deleted&&(mr.mux.destroy(),delete mr.mux),mr&&(mr.removeAttribute("src"),mr.load(),mr.removeEventListener("error",Ge$1),mr.removeEventListener("error",ae$2),mr.removeEventListener("durationchange",Je$1),_$1.delete(mr),mr.dispatchEvent(new Event("teardown")))};function We$1(mr,hr){var gr;let vr=O(mr);if(vr!==N.M3U8)return!0;let xr=!vr||((gr=hr.canPlayType(vr))!=null?gr:!0),{preferPlayback:Er}=mr,Cr=Er===q$1.MSE,wr=Er===q$1.NATIVE;return xr&&(wr||!(Ve$2&&(Cr||mt$1)))}var Pt$2=(mr,hr)=>{let{debug:gr,streamType:vr,startTime:xr=-1,metadata:Er,preferCmcd:Cr,_hlsConfig:wr={}}=mr,Rr=O(mr)===N.M3U8,kr=We$1(mr,hr);if(Rr&&!kr&&Ve$2){let Dr={backBufferLength:30,renderTextTracksNatively:!1,liveDurationInfinity:!0,capLevelToPlayerSize:!0,capLevelOnFPSDrop:!0},Br=Dt$2(vr),Hr=_t$2(mr),Gr=Cr!==w$1.NONE?{useHeaders:Cr===w$1.HEADER,sessionId:Er?.view_session_id,contentId:Er?.video_id}:void 0;return new R$2({debug:gr,startPosition:xr,cmcd:Gr,xhrSetup:(qr,zr)=>{var Qr,sn;if(Cr&&Cr!==w$1.QUERY)return;let hn=new URL(zr);if(!hn.searchParams.has("CMCD"))return;let vn=((sn=(Qr=hn.searchParams.get("CMCD"))==null?void 0:Qr.split(","))!=null?sn:[]).filter(yn=>yn.startsWith("sid")||yn.startsWith("cid")).join(",");hn.searchParams.set("CMCD",vn),qr.open("GET",hn)},...Dr,...Br,...Hr,...wr})}},Dt$2=mr=>mr===D$1.LIVE?{backBufferLength:8}:{},_t$2=mr=>{let{tokens:{drm:hr}={},playbackId:gr,drmTypeCb:vr}=mr,xr=G$1(gr);return!hr||!xr?{}:{emeEnabled:!0,drmSystems:{"com.apple.fps":{licenseUrl:J$2(mr,"fairplay"),serverCertificateUrl:$e$2(mr,"fairplay")},"com.widevine.alpha":{licenseUrl:J$2(mr,"widevine")},"com.microsoft.playready":{licenseUrl:J$2(mr,"playready")}},requestMediaKeySystemAccessFunc:(Er,Cr)=>(Er==="com.widevine.alpha"&&(Cr=[...Cr.map(wr=>{var Rr;let kr=(Rr=wr.videoCapabilities)==null?void 0:Rr.map(Dr=>({...Dr,robustness:"HW_SECURE_ALL"}));return{...wr,videoCapabilities:kr}}),...Cr]),navigator.requestMediaKeySystemAccess(Er,Cr).then(wr=>{let Rr=st(Er);return vr?.(Rr),wr}))}},kt$2=async mr=>{let hr=await fetch(mr);return hr.status!==200?Promise.reject(hr):await hr.arrayBuffer()},ht$2=async(mr,hr)=>{let gr=await fetch(hr,{method:"POST",headers:{"Content-type":"application/octet-stream"},body:mr});if(gr.status!==200)return Promise.reject(gr);let vr=await gr.arrayBuffer();return new Uint8Array(vr)},Nt$1=(mr,hr)=>{x(hr,"encrypted",async gr=>{try{let vr=gr.initDataType;if(vr!=="skd"){console.error(`Received unexpected initialization data type "${vr}"`);return}if(!hr.mediaKeys){let Rr=await navigator.requestMediaKeySystemAccess("com.apple.fps",[{initDataTypes:[vr],videoCapabilities:[{contentType:"application/vnd.apple.mpegurl",robustness:""}],distinctiveIdentifier:"not-allowed",persistentState:"not-allowed",sessionTypes:["temporary"]}]).then(Dr=>{var Br;return(Br=mr.drmTypeCb)==null||Br.call(mr,B$3.FAIRPLAY),Dr}).catch(()=>{let Dr=E$3("Cannot play DRM-protected content with current security configuration on this browser. Try playing in another browser."),Br=new T$1(Dr,T$1.MEDIA_ERR_ENCRYPTED,!0);Br.errorCategory=C$1.DRM,Br.muxCode=M$2.ENCRYPTED_UNSUPPORTED_KEY_SYSTEM,hr.dispatchEvent(new CustomEvent("error",{detail:Br}))});if(!Rr)return;let kr=await Rr.createMediaKeys();try{let Dr=await kt$2($e$2(mr,"fairplay")).catch(Br=>{if(Br instanceof Response){let Hr=U$2(Br,C$1.DRM,mr);return console.error("mediaError",Hr?.message,Hr?.context),Hr?Promise.reject(Hr):Promise.reject(new Error("Unexpected error in app cert request"))}return Promise.reject(Br)});await kr.setServerCertificate(Dr).catch(()=>{let Br=E$3("Your server certificate failed when attempting to set it. This may be an issue with a no longer valid certificate."),Hr=new T$1(Br,T$1.MEDIA_ERR_ENCRYPTED,!0);return Hr.errorCategory=C$1.DRM,Hr.muxCode=M$2.ENCRYPTED_UPDATE_SERVER_CERT_FAILED,Promise.reject(Hr)})}catch(Dr){hr.dispatchEvent(new CustomEvent("error",{detail:Dr}));return}await hr.setMediaKeys(kr)}let xr=gr.initData;if(xr==null){console.error(`Could not start encrypted playback due to missing initData in ${gr.type} event`);return}let Er=hr.mediaKeys.createSession();Er.addEventListener("keystatuseschange",()=>{Er.keyStatuses.forEach(Rr=>{let kr;if(Rr==="internal-error"){let Dr=E$3("The DRM Content Decryption Module system had an internal failure. Try reloading the page, upading your browser, or playing in another browser.");kr=new T$1(Dr,T$1.MEDIA_ERR_ENCRYPTED,!0),kr.errorCategory=C$1.DRM,kr.muxCode=M$2.ENCRYPTED_CDM_ERROR}else if(Rr==="output-restricted"||Rr==="output-downscaled"){let Dr=E$3("DRM playback is being attempted in an environment that is not sufficiently secure. User may see black screen.");kr=new T$1(Dr,T$1.MEDIA_ERR_ENCRYPTED,!1),kr.errorCategory=C$1.DRM,kr.muxCode=M$2.ENCRYPTED_OUTPUT_RESTRICTED}kr&&hr.dispatchEvent(new CustomEvent("error",{detail:kr}))})});let Cr=await Promise.all([Er.generateRequest(vr,xr).catch(()=>{let Rr=E$3("Failed to generate a DRM license request. This may be an issue with the player or your protected content."),kr=new T$1(Rr,T$1.MEDIA_ERR_ENCRYPTED,!0);kr.errorCategory=C$1.DRM,kr.muxCode=M$2.ENCRYPTED_GENERATE_REQUEST_FAILED,hr.dispatchEvent(new CustomEvent("error",{detail:kr}))}),new Promise(Rr=>{Er.addEventListener("message",kr=>{Rr(kr.message)},{once:!0})})]).then(([,Rr])=>Rr);Er.generateRequest(vr,xr);let wr=await ht$2(Cr,J$2(mr,"fairplay")).catch(Rr=>{if(Rr instanceof Response){let kr=U$2(Rr,C$1.DRM,mr);return console.error("mediaError",kr?.message,kr?.context),kr?Promise.reject(kr):Promise.reject(new Error("Unexpected error in license key request"))}return Promise.reject(Rr)});await Er.update(wr).catch(()=>{let Rr=E$3("Failed to update DRM license. This may be an issue with the player or your protected content."),kr=new T$1(Rr,T$1.MEDIA_ERR_ENCRYPTED,!0);return kr.errorCategory=C$1.DRM,kr.muxCode=M$2.ENCRYPTED_UPDATE_LICENSE_FAILED,Promise.reject(kr)})}catch(vr){hr.dispatchEvent(new CustomEvent("error",{detail:vr}));return}})},J$2=({playbackId:mr,tokens:{drm:hr}={},customDomain:gr=I$2},vr)=>{let xr=G$1(mr);return`https://license.${gr.toLocaleLowerCase().endsWith(I$2)?gr:I$2}/license/${vr}/${xr}?token=${hr}`},$e$2=({playbackId:mr,tokens:{drm:hr}={},customDomain:gr=I$2},vr)=>{let xr=G$1(mr);return`https://license.${gr.toLocaleLowerCase().endsWith(I$2)?gr:I$2}/appcert/${vr}/${xr}?token=${hr}`},Be$2=({playbackId:mr,src:hr,customDomain:gr})=>{if(mr)return!0;if(typeof hr!="string")return!1;let vr=window?.location.href,xr=new URL(hr,vr).hostname.toLocaleLowerCase();return xr.includes(I$2)||!!gr&&xr.includes(gr.toLocaleLowerCase())},Lt$1=(mr,hr,gr)=>{var vr;let{envKey:xr,disableTracking:Er}=mr,Cr=Be$2(mr);if(!Er&&(xr||Cr)){let{playerInitTime:wr,playerSoftwareName:Rr,playerSoftwareVersion:kr,beaconCollectionDomain:Dr,debug:Br,disableCookies:Hr}=mr,Gr={...mr.metadata,video_title:((vr=mr?.metadata)==null?void 0:vr.video_title)||void 0},qr=zr=>typeof zr.player_error_code=="string"?!1:typeof mr.errorTranslator=="function"?mr.errorTranslator(zr):zr;wd.monitor(hr,{debug:Br,beaconCollectionDomain:Dr,hlsjs:gr,Hls:gr?R$2:void 0,automaticErrorTracking:!1,errorTranslator:qr,disableCookies:Hr,data:{...xr?{env_key:xr}:{},player_software_name:Rr,player_software:Rr,player_software_version:kr,player_init_time:wr,...Gr}})}},It$2=(mr,hr,gr)=>{var vr,xr;let Er=We$1(mr,hr),{src:Cr}=mr,wr=()=>{hr.ended||!xt$2(hr,gr)||(Ye$1(hr,gr)?hr.currentTime=hr.buffered.end(hr.buffered.length-1):hr.dispatchEvent(new Event("ended")))},Rr,kr,Dr=()=>{let Br=Fe$1(hr),Hr,Gr;Br.length>0&&(Hr=Br.start(0),Gr=Br.end(0)),(kr!==Gr||Rr!==Hr)&&hr.dispatchEvent(new CustomEvent("seekablechange",{composed:!0})),Rr=Hr,kr=Gr};if(x(hr,"durationchange",Dr),hr&&Er){let Br=O(mr);if(typeof Cr=="string"){let Hr=()=>{if(Le$1(hr)!==D$1.LIVE||Number.isFinite(hr.duration))return;let qr=setInterval(Dr,1e3);hr.addEventListener("teardown",()=>{clearInterval(qr)},{once:!0}),x(hr,"durationchange",()=>{Number.isFinite(hr.duration)&&clearInterval(qr)})},Gr=async()=>dt$1(Cr,hr,Br).then(Hr).catch(qr=>{if(qr instanceof Response){let zr=U$2(qr,C$1.VIDEO,mr);if(zr){hr.dispatchEvent(new CustomEvent("error",{detail:zr}));return}}});if(hr.preload==="none"){let qr=()=>{Gr(),hr.removeEventListener("loadedmetadata",zr)},zr=()=>{Gr(),hr.removeEventListener("play",qr)};x(hr,"play",qr,{once:!0}),x(hr,"loadedmetadata",zr,{once:!0})}else Gr();(vr=mr.tokens)!=null&&vr.drm?Nt$1(mr,hr):x(hr,"encrypted",()=>{let qr=E$3("Attempting to play DRM-protected content without providing a DRM token."),zr=new T$1(qr,T$1.MEDIA_ERR_ENCRYPTED,!0);zr.errorCategory=C$1.DRM,zr.muxCode=M$2.ENCRYPTED_MISSING_TOKEN,hr.dispatchEvent(new CustomEvent("error",{detail:zr}))},{once:!0}),hr.setAttribute("src",Cr),mr.startTime&&(((xr=_$1.get(hr))!=null?xr:{}).startTime=mr.startTime,hr.addEventListener("durationchange",Je$1,{once:!0}))}else hr.removeAttribute("src");hr.addEventListener("error",Ge$1),hr.addEventListener("error",ae$2),hr.addEventListener("emptied",()=>{hr.querySelectorAll("track[data-removeondestroy]").forEach(Hr=>{Hr.remove()})},{once:!0}),x(hr,"pause",wr),x(hr,"seeked",wr),x(hr,"play",()=>{hr.ended||Ke$1(hr.currentTime,hr.duration)&&(hr.currentTime=hr.seekable.length?hr.seekable.start(0):0)})}else gr&&Cr?(gr.once(R$2.Events.LEVEL_LOADED,(Br,Hr)=>{pt$1(Hr.details,hr,gr),Dr(),Le$1(hr)===D$1.LIVE&&!Number.isFinite(hr.duration)&&(gr.on(R$2.Events.LEVEL_UPDATED,Dr),x(hr,"durationchange",()=>{Number.isFinite(hr.duration)&&gr.off(R$2.Events.LEVELS_UPDATED,Dr)}))}),gr.on(R$2.Events.ERROR,(Br,Hr)=>{hr.dispatchEvent(new CustomEvent("error",{detail:At$2(Hr,mr)}))}),hr.addEventListener("error",ae$2),x(hr,"waiting",wr),Me$2(mr,gr),Re$2(hr,gr),gr.attachMedia(hr)):console.error("It looks like the video you're trying to play will not work on this system! If possible, try upgrading to the newest versions of your browser or software.")};function Je$1(mr){var hr;let gr=mr.target,vr=(hr=_$1.get(gr))==null?void 0:hr.startTime;if(vr&&de$2(gr.seekable,gr.duration,vr)){let xr=gr.preload==="auto";xr&&(gr.preload="none"),gr.currentTime=vr,xr&&(gr.preload="auto")}}async function Ge$1(mr){if(!mr.isTrusted)return;mr.stopImmediatePropagation();let hr=mr.target;if(!(hr!=null&&hr.error))return;let{message:gr,code:vr}=hr.error,xr=new T$1(gr,vr);if(hr.src&&vr===T$1.MEDIA_ERR_SRC_NOT_SUPPORTED&&hr.readyState===HTMLMediaElement.HAVE_NOTHING){setTimeout(()=>{var Er;let Cr=(Er=Rt$2(hr))!=null?Er:hr.error;Cr?.code===T$1.MEDIA_ERR_SRC_NOT_SUPPORTED&&hr.dispatchEvent(new CustomEvent("error",{detail:xr}))},500);return}if(hr.src&&(vr!==T$1.MEDIA_ERR_DECODE||vr!==void 0))try{let{status:Er}=await fetch(hr.src);xr.data={response:{code:Er}}}catch{}hr.dispatchEvent(new CustomEvent("error",{detail:xr}))}function ae$2(mr){var hr,gr;if(!(mr instanceof CustomEvent)||!(mr.detail instanceof T$1))return;let vr=mr.target,xr=mr.detail;!xr||!xr.fatal||(((hr=_$1.get(vr))!=null?hr:{}).error=xr,(gr=vr.mux)==null||gr.emit("error",{player_error_code:xr.code,player_error_message:xr.message,player_error_context:xr.context}))}var At$2=(mr,hr)=>{var gr,vr,xr;console.error("getErrorFromHlsErrorData()",mr);let Er={[R$2.ErrorTypes.NETWORK_ERROR]:T$1.MEDIA_ERR_NETWORK,[R$2.ErrorTypes.MEDIA_ERROR]:T$1.MEDIA_ERR_DECODE,[R$2.ErrorTypes.KEY_SYSTEM_ERROR]:T$1.MEDIA_ERR_ENCRYPTED},Cr=Dr=>[ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED].includes(Dr.details)?T$1.MEDIA_ERR_NETWORK:Er[Dr.type],wr=Dr=>{if(Dr.type===ErrorTypes.KEY_SYSTEM_ERROR)return C$1.DRM;if(Dr.type===ErrorTypes.NETWORK_ERROR)return C$1.VIDEO},Rr,kr=Cr(mr);if(kr===T$1.MEDIA_ERR_NETWORK&&mr.response){let Dr=(gr=wr(mr))!=null?gr:C$1.VIDEO;Rr=(vr=U$2(mr.response,Dr,hr))!=null?vr:new T$1("",kr)}else if(kr===T$1.MEDIA_ERR_ENCRYPTED)if(mr.details===ErrorDetails.KEY_SYSTEM_NO_CONFIGURED_LICENSE){let Dr=E$3("Attempting to play DRM-protected content without providing a DRM token.");Rr=new T$1(Dr,T$1.MEDIA_ERR_ENCRYPTED,mr.fatal),Rr.errorCategory=C$1.DRM,Rr.muxCode=M$2.ENCRYPTED_MISSING_TOKEN}else if(mr.details===ErrorDetails.KEY_SYSTEM_NO_ACCESS){let Dr=E$3("Cannot play DRM-protected content with current security configuration on this browser. Try playing in another browser.");Rr=new T$1(Dr,T$1.MEDIA_ERR_ENCRYPTED,mr.fatal),Rr.errorCategory=C$1.DRM,Rr.muxCode=M$2.ENCRYPTED_UNSUPPORTED_KEY_SYSTEM}else if(mr.details===ErrorDetails.KEY_SYSTEM_NO_SESSION){let Dr=E$3("Failed to generate a DRM license request. This may be an issue with the player or your protected content.");Rr=new T$1(Dr,T$1.MEDIA_ERR_ENCRYPTED,!0),Rr.errorCategory=C$1.DRM,Rr.muxCode=M$2.ENCRYPTED_GENERATE_REQUEST_FAILED}else if(mr.details===ErrorDetails.KEY_SYSTEM_SESSION_UPDATE_FAILED){let Dr=E$3("Failed to update DRM license. This may be an issue with the player or your protected content.");Rr=new T$1(Dr,T$1.MEDIA_ERR_ENCRYPTED,mr.fatal),Rr.errorCategory=C$1.DRM,Rr.muxCode=M$2.ENCRYPTED_UPDATE_LICENSE_FAILED}else if(mr.details===ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED){let Dr=E$3("Your server certificate failed when attempting to set it. This may be an issue with a no longer valid certificate.");Rr=new T$1(Dr,T$1.MEDIA_ERR_ENCRYPTED,mr.fatal),Rr.errorCategory=C$1.DRM,Rr.muxCode=M$2.ENCRYPTED_UPDATE_SERVER_CERT_FAILED}else if(mr.details===ErrorDetails.KEY_SYSTEM_STATUS_INTERNAL_ERROR){let Dr=E$3("The DRM Content Decryption Module system had an internal failure. Try reloading the page, upading your browser, or playing in another browser.");Rr=new T$1(Dr,T$1.MEDIA_ERR_ENCRYPTED,mr.fatal),Rr.errorCategory=C$1.DRM,Rr.muxCode=M$2.ENCRYPTED_CDM_ERROR}else if(mr.details===ErrorDetails.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED){let Dr=E$3("DRM playback is being attempted in an environment that is not sufficiently secure. User may see black screen.");Rr=new T$1(Dr,T$1.MEDIA_ERR_ENCRYPTED,!1),Rr.errorCategory=C$1.DRM,Rr.muxCode=M$2.ENCRYPTED_OUTPUT_RESTRICTED}else Rr=new T$1(mr.error.message,T$1.MEDIA_ERR_ENCRYPTED,mr.fatal),Rr.errorCategory=C$1.DRM,Rr.muxCode=M$2.ENCRYPTED_ERROR;else Rr=new T$1("",kr,mr.fatal);return Rr.context||(Rr.context=`${mr.url?`url: ${mr.url}
`:""}${mr.response&&(mr.response.code||mr.response.text)?`response: ${mr.response.code}, ${mr.response.text}
`:""}${mr.reason?`failure reason: ${mr.reason}
`:""}${mr.level?`level: ${mr.level}
`:""}${mr.parent?`parent stream controller: ${mr.parent}
`:""}${mr.buffer?`buffer length: ${mr.buffer}
`:""}${mr.error?`error: ${mr.error}
`:""}${mr.event?`event: ${mr.event}
`:""}${mr.err?`error message: ${(xr=mr.err)==null?void 0:xr.message}
`:""}`),Rr.data=mr,Rr};const MediaUIEvents={MEDIA_PLAY_REQUEST:"mediaplayrequest",MEDIA_PAUSE_REQUEST:"mediapauserequest",MEDIA_MUTE_REQUEST:"mediamuterequest",MEDIA_UNMUTE_REQUEST:"mediaunmuterequest",MEDIA_VOLUME_REQUEST:"mediavolumerequest",MEDIA_SEEK_REQUEST:"mediaseekrequest",MEDIA_AIRPLAY_REQUEST:"mediaairplayrequest",MEDIA_ENTER_FULLSCREEN_REQUEST:"mediaenterfullscreenrequest",MEDIA_EXIT_FULLSCREEN_REQUEST:"mediaexitfullscreenrequest",MEDIA_PREVIEW_REQUEST:"mediapreviewrequest",MEDIA_ENTER_PIP_REQUEST:"mediaenterpiprequest",MEDIA_EXIT_PIP_REQUEST:"mediaexitpiprequest",MEDIA_ENTER_CAST_REQUEST:"mediaentercastrequest",MEDIA_EXIT_CAST_REQUEST:"mediaexitcastrequest",MEDIA_SHOW_TEXT_TRACKS_REQUEST:"mediashowtexttracksrequest",MEDIA_HIDE_TEXT_TRACKS_REQUEST:"mediahidetexttracksrequest",MEDIA_SHOW_SUBTITLES_REQUEST:"mediashowsubtitlesrequest",MEDIA_DISABLE_SUBTITLES_REQUEST:"mediadisablesubtitlesrequest",MEDIA_TOGGLE_SUBTITLES_REQUEST:"mediatogglesubtitlesrequest",MEDIA_PLAYBACK_RATE_REQUEST:"mediaplaybackraterequest",MEDIA_RENDITION_REQUEST:"mediarenditionrequest",MEDIA_AUDIO_TRACK_REQUEST:"mediaaudiotrackrequest",MEDIA_SEEK_TO_LIVE_REQUEST:"mediaseektoliverequest",REGISTER_MEDIA_STATE_RECEIVER:"registermediastatereceiver",UNREGISTER_MEDIA_STATE_RECEIVER:"unregistermediastatereceiver"},MediaStateReceiverAttributes={MEDIA_CHROME_ATTRIBUTES:"mediachromeattributes",MEDIA_CONTROLLER:"mediacontroller"},MediaUIProps={MEDIA_AIRPLAY_UNAVAILABLE:"mediaAirplayUnavailable",MEDIA_FULLSCREEN_UNAVAILABLE:"mediaFullscreenUnavailable",MEDIA_PIP_UNAVAILABLE:"mediaPipUnavailable",MEDIA_CAST_UNAVAILABLE:"mediaCastUnavailable",MEDIA_RENDITION_UNAVAILABLE:"mediaRenditionUnavailable",MEDIA_AUDIO_TRACK_UNAVAILABLE:"mediaAudioTrackUnavailable",MEDIA_WIDTH:"mediaWidth",MEDIA_HEIGHT:"mediaHeight",MEDIA_PAUSED:"mediaPaused",MEDIA_HAS_PLAYED:"mediaHasPlayed",MEDIA_ENDED:"mediaEnded",MEDIA_MUTED:"mediaMuted",MEDIA_VOLUME_LEVEL:"mediaVolumeLevel",MEDIA_VOLUME:"mediaVolume",MEDIA_VOLUME_UNAVAILABLE:"mediaVolumeUnavailable",MEDIA_IS_PIP:"mediaIsPip",MEDIA_IS_CASTING:"mediaIsCasting",MEDIA_IS_AIRPLAYING:"mediaIsAirplaying",MEDIA_SUBTITLES_LIST:"mediaSubtitlesList",MEDIA_SUBTITLES_SHOWING:"mediaSubtitlesShowing",MEDIA_IS_FULLSCREEN:"mediaIsFullscreen",MEDIA_PLAYBACK_RATE:"mediaPlaybackRate",MEDIA_CURRENT_TIME:"mediaCurrentTime",MEDIA_DURATION:"mediaDuration",MEDIA_SEEKABLE:"mediaSeekable",MEDIA_PREVIEW_TIME:"mediaPreviewTime",MEDIA_PREVIEW_IMAGE:"mediaPreviewImage",MEDIA_PREVIEW_COORDS:"mediaPreviewCoords",MEDIA_PREVIEW_CHAPTER:"mediaPreviewChapter",MEDIA_LOADING:"mediaLoading",MEDIA_BUFFERED:"mediaBuffered",MEDIA_STREAM_TYPE:"mediaStreamType",MEDIA_TARGET_LIVE_WINDOW:"mediaTargetLiveWindow",MEDIA_TIME_IS_LIVE:"mediaTimeIsLive",MEDIA_RENDITION_LIST:"mediaRenditionList",MEDIA_RENDITION_SELECTED:"mediaRenditionSelected",MEDIA_AUDIO_TRACK_LIST:"mediaAudioTrackList",MEDIA_AUDIO_TRACK_ENABLED:"mediaAudioTrackEnabled",MEDIA_CHAPTERS_CUES:"mediaChaptersCues"},MediaUIPropsEntries=Object.entries(MediaUIProps),MediaUIAttributes=MediaUIPropsEntries.reduce((mr,[hr,gr])=>(mr[hr]=gr.toLowerCase(),mr),{}),AdditionalStateChangeEvents={USER_INACTIVE:"userinactivechange",BREAKPOINTS_CHANGE:"breakpointchange",BREAKPOINTS_COMPUTED:"breakpointscomputed"},MediaStateChangeEvents=MediaUIPropsEntries.reduce((mr,[hr,gr])=>(mr[hr]=gr.toLowerCase(),mr),{...AdditionalStateChangeEvents});Object.entries(MediaStateChangeEvents).reduce((mr,[hr,gr])=>{const vr=MediaUIAttributes[hr];return vr&&(mr[gr]=vr),mr},{userinactivechange:"userinactive"});const AttributeToStateChangeEventMap=Object.entries(MediaUIAttributes).reduce((mr,[hr,gr])=>{const vr=MediaStateChangeEvents[hr];return vr&&(mr[gr]=vr),mr},{userinactive:"userinactivechange"}),TextTrackKinds={SUBTITLES:"subtitles",CAPTIONS:"captions",DESCRIPTIONS:"descriptions",CHAPTERS:"chapters",METADATA:"metadata"},TextTrackModes={DISABLED:"disabled",HIDDEN:"hidden",SHOWING:"showing"},PointerTypes={MOUSE:"mouse",PEN:"pen",TOUCH:"touch"},AvailabilityStates={UNAVAILABLE:"unavailable",UNSUPPORTED:"unsupported"},StreamTypes={LIVE:"live",ON_DEMAND:"on-demand",UNKNOWN:"unknown"},WebkitPresentationModes={INLINE:"inline",FULLSCREEN:"fullscreen",PICTURE_IN_PICTURE:"picture-in-picture"},tooltipLabels={ENTER_AIRPLAY:"Start airplay",EXIT_AIRPLAY:"Stop airplay",AUDIO_TRACK_MENU:"Audio",CAPTIONS:"Captions",ENABLE_CAPTIONS:"Enable captions",DISABLE_CAPTIONS:"Disable captions",START_CAST:"Start casting",STOP_CAST:"Stop casting",ENTER_FULLSCREEN:"Enter fullscreen mode",EXIT_FULLSCREEN:"Exit fullscreen mode",MUTE:"Mute",UNMUTE:"Unmute",ENTER_PIP:"Enter picture in picture mode",EXIT_PIP:"Enter picture in picture mode",PLAY:"Play",PAUSE:"Pause",PLAYBACK_RATE:"Playback rate",RENDITIONS:"Quality",SEEK_BACKWARD:"Seek backward",SEEK_FORWARD:"Seek forward",SETTINGS:"Settings"},nouns={AUDIO_PLAYER:()=>"audio player",VIDEO_PLAYER:()=>"video player",VOLUME:()=>"volume",SEEK:()=>"seek",CLOSED_CAPTIONS:()=>"closed captions",PLAYBACK_RATE:({playbackRate:mr=1}={})=>`current playback rate ${mr}`,PLAYBACK_TIME:()=>"playback time",MEDIA_LOADING:()=>"media loading",SETTINGS:()=>"settings",AUDIO_TRACKS:()=>"audio tracks",QUALITY:()=>"quality"},verbs={PLAY:()=>"play",PAUSE:()=>"pause",MUTE:()=>"mute",UNMUTE:()=>"unmute",ENTER_AIRPLAY:()=>"start airplay",EXIT_AIRPLAY:()=>"stop airplay",ENTER_CAST:()=>"start casting",EXIT_CAST:()=>"stop casting",ENTER_FULLSCREEN:()=>"enter fullscreen mode",EXIT_FULLSCREEN:()=>"exit fullscreen mode",ENTER_PIP:()=>"enter picture in picture mode",EXIT_PIP:()=>"exit picture in picture mode",SEEK_FORWARD_N_SECS:({seekOffset:mr=30}={})=>`seek forward ${mr} seconds`,SEEK_BACK_N_SECS:({seekOffset:mr=30}={})=>`seek back ${mr} seconds`,SEEK_LIVE:()=>"seek to live",PLAYING_LIVE:()=>"playing live"};function stringifyRenditionList(mr){return mr?.map(stringifyRendition).join(" ")}function parseRenditionList(mr){return mr?.split(/\s+/).map(parseRendition)}function stringifyRendition(mr){if(mr){const{id:hr,width:gr,height:vr}=mr;return[hr,gr,vr].filter(xr=>xr!=null).join(":")}}function parseRendition(mr){if(mr){const[hr,gr,vr]=mr.split(":");return{id:hr,width:+gr,height:+vr}}}function stringifyAudioTrackList(mr){return mr?.map(stringifyAudioTrack).join(" ")}function parseAudioTrackList(mr){return mr?.split(/\s+/).map(parseAudioTrack)}function stringifyAudioTrack(mr){if(mr){const{id:hr,kind:gr,language:vr,label:xr}=mr;return[hr,gr,vr,xr].filter(Er=>Er!=null).join(":")}}function parseAudioTrack(mr){if(mr){const[hr,gr,vr,xr]=mr.split(":");return{id:hr,kind:gr,language:vr,label:xr}}}function camelCase(mr){return mr.replace(/[-_]([a-z])/g,(hr,gr)=>gr.toUpperCase())}function isValidNumber(mr){return typeof mr=="number"&&!Number.isNaN(mr)&&Number.isFinite(mr)}function isNumericString(mr){return typeof mr!="string"?!1:!isNaN(mr)&&!isNaN(parseFloat(mr))}const delay=mr=>new Promise(hr=>setTimeout(hr,mr)),UnitLabels=[{singular:"hour",plural:"hours"},{singular:"minute",plural:"minutes"},{singular:"second",plural:"seconds"}],toTimeUnitPhrase=(mr,hr)=>{const gr=mr===1?UnitLabels[hr].singular:UnitLabels[hr].plural;return`${mr} ${gr}`},formatAsTimePhrase=mr=>{if(!isValidNumber(mr))return"";const hr=Math.abs(mr),gr=hr!==mr,vr=new Date(0,0,0,0,0,hr,0);return`${[vr.getHours(),vr.getMinutes(),vr.getSeconds()].map((wr,Rr)=>wr&&toTimeUnitPhrase(wr,Rr)).filter(wr=>wr).join(", ")}${gr?" remaining":""}`};function formatTime(mr,hr){let gr=!1;mr<0&&(gr=!0,mr=0-mr),mr=mr<0?0:mr;let vr=Math.floor(mr%60),xr=Math.floor(mr/60%60),Er=Math.floor(mr/3600);const Cr=Math.floor(hr/60%60),wr=Math.floor(hr/3600);return(isNaN(mr)||mr===1/0)&&(Er=xr=vr="0"),Er=Er>0||wr>0?Er+":":"",xr=((Er||Cr>=10)&&xr<10?"0"+xr:xr)+":",vr=vr<10?"0"+vr:vr,(gr?"-":"")+Er+xr+vr}let EventTarget$1=class{addEventListener(){}removeEventListener(){}dispatchEvent(){return!0}},Node$1=class extends EventTarget$1{},Element$1=class extends Node$1{constructor(){super(...arguments),this.role=null}},ResizeObserver$1=class{observe(){}unobserve(){}disconnect(){}};const documentShim={createElement:function(){return new globalThisShim.HTMLElement},createElementNS:function(){return new globalThisShim.HTMLElement},addEventListener(){},removeEventListener(){},dispatchEvent(mr){return!1}},globalThisShim={ResizeObserver:ResizeObserver$1,document:documentShim,Node:Node$1,Element:Element$1,HTMLElement:class extends Element$1{constructor(){super(...arguments),this.innerHTML=""}get content(){return new globalThisShim.DocumentFragment}},DocumentFragment:class extends EventTarget$1{},customElements:{get:function(){},define:function(){},whenDefined:function(){}},localStorage:{getItem(mr){return null},setItem(mr,hr){},removeItem(mr){}},CustomEvent:function(){},getComputedStyle:function(){},navigator:{languages:[],get userAgent(){return""}},matchMedia(mr){return{matches:!1,media:mr}}},isServer=typeof window>"u"||typeof window.customElements>"u",isShimmed=Object.keys(globalThisShim).every(mr=>mr in globalThis),GlobalThis=isServer&&!isShimmed?globalThisShim:globalThis,Document$2=isServer&&!isShimmed?documentShim:globalThis.document,callbacksMap=new WeakMap,getCallbacks=mr=>{let hr=callbacksMap.get(mr);return hr||callbacksMap.set(mr,hr=new Set),hr},observer=new GlobalThis.ResizeObserver(mr=>{for(const hr of mr)for(const gr of getCallbacks(hr.target))gr(hr)});function observeResize(mr,hr){getCallbacks(mr).add(hr),observer.observe(mr)}function unobserveResize(mr,hr){const gr=getCallbacks(mr);gr.delete(hr),gr.size||observer.unobserve(mr)}function getMediaController(mr){var hr;return(hr=getAttributeMediaController(mr))!=null?hr:closestComposedNode(mr,"media-controller")}function getAttributeMediaController(mr){var hr;const{MEDIA_CONTROLLER:gr}=MediaStateReceiverAttributes,vr=mr.getAttribute(gr);if(vr)return(hr=getDocumentOrShadowRoot(mr))==null?void 0:hr.getElementById(vr)}const updateIconText=(mr,hr,gr=".value")=>{const vr=mr.querySelector(gr);vr&&(vr.textContent=hr)},getAllSlotted=(mr,hr)=>{const gr=`slot[name="${hr}"]`,vr=mr.shadowRoot.querySelector(gr);return vr?vr.children:[]},getSlotted=(mr,hr)=>getAllSlotted(mr,hr)[0],containsComposedNode=(mr,hr)=>!mr||!hr?!1:mr?.contains(hr)?!0:containsComposedNode(mr,hr.getRootNode().host),closestComposedNode=(mr,hr)=>{if(!mr)return null;const gr=mr.closest(hr);return gr||closestComposedNode(mr.getRootNode().host,hr)};function getActiveElement(mr=document){var hr;const gr=mr?.activeElement;return gr?(hr=getActiveElement(gr.shadowRoot))!=null?hr:gr:null}function getDocumentOrShadowRoot(mr){var hr;const gr=(hr=mr?.getRootNode)==null?void 0:hr.call(mr);return gr instanceof ShadowRoot||gr instanceof Document?gr:null}function isElementVisible(mr,{depth:hr=3,checkOpacity:gr=!0,checkVisibilityCSS:vr=!0}={}){if(mr.checkVisibility)return mr.checkVisibility({checkOpacity:gr,checkVisibilityCSS:vr});let xr=mr;for(;xr&&hr>0;){const Er=getComputedStyle(xr);if(gr&&Er.opacity==="0"||vr&&Er.visibility==="hidden"||Er.display==="none")return!1;xr=xr.parentElement,hr--}return!0}function getPointProgressOnLine(mr,hr,gr,vr){const xr=distance(gr,vr),Er=distance(gr,{x:mr,y:hr}),Cr=distance(vr,{x:mr,y:hr});return Er>xr||Cr>xr?Er>Cr?1:0:Er/xr}function distance(mr,hr){return Math.sqrt(Math.pow(hr.x-mr.x,2)+Math.pow(hr.y-mr.y,2))}function getOrInsertCSSRule(mr,hr){const gr=getCSSRule(mr,vr=>vr===hr);return gr||insertCSSRule(mr,hr)}function getCSSRule(mr,hr){var gr,vr;let xr;for(xr of(gr=mr.querySelectorAll("style:not([media])"))!=null?gr:[]){let Er;try{Er=(vr=xr.sheet)==null?void 0:vr.cssRules}catch{continue}for(const Cr of Er??[])if(hr(Cr.selectorText))return Cr}}function insertCSSRule(mr,hr){var gr,vr;const xr=(gr=mr.querySelectorAll("style:not([media])"))!=null?gr:[],Er=xr?.[xr.length-1];return Er?.sheet?(Er?.sheet.insertRule(`${hr}{}`,Er.sheet.cssRules.length),(vr=Er.sheet.cssRules)==null?void 0:vr[Er.sheet.cssRules.length-1]):(console.warn("Media Chrome: No style sheet found on style tag of",mr),{style:{setProperty:()=>{},removeProperty:()=>"",getPropertyValue:()=>""}})}function getNumericAttr(mr,hr,gr=Number.NaN){const vr=mr.getAttribute(hr);return vr!=null?+vr:gr}function setNumericAttr(mr,hr,gr){const vr=+gr;if(gr==null||Number.isNaN(vr)){mr.hasAttribute(hr)&&mr.removeAttribute(hr);return}getNumericAttr(mr,hr,void 0)!==vr&&mr.setAttribute(hr,`${vr}`)}function getBooleanAttr(mr,hr){return mr.hasAttribute(hr)}function setBooleanAttr(mr,hr,gr){if(gr==null){mr.hasAttribute(hr)&&mr.removeAttribute(hr);return}getBooleanAttr(mr,hr)!=gr&&mr.toggleAttribute(hr,gr)}function getStringAttr(mr,hr,gr=null){var vr;return(vr=mr.getAttribute(hr))!=null?vr:gr}function setStringAttr(mr,hr,gr){if(gr==null){mr.hasAttribute(hr)&&mr.removeAttribute(hr);return}const vr=`${gr}`;getStringAttr(mr,hr,void 0)!==vr&&mr.setAttribute(hr,vr)}var __accessCheck$r=(mr,hr,gr)=>{if(!hr.has(mr))throw TypeError("Cannot "+gr)},__privateGet$q=(mr,hr,gr)=>(__accessCheck$r(mr,hr,"read from private field"),gr?gr.call(mr):hr.get(mr)),__privateAdd$r=(mr,hr,gr)=>{if(hr.has(mr))throw TypeError("Cannot add the same private member more than once");hr instanceof WeakSet?hr.add(mr):hr.set(mr,gr)},__privateSet$o=(mr,hr,gr,vr)=>(__accessCheck$r(mr,hr,"write to private field"),hr.set(mr,gr),gr),_mediaController$7;const template$g=Document$2.createElement("template");template$g.innerHTML=`
<style>
  :host {
    display: var(--media-control-display, var(--media-gesture-receiver-display, inline-block));
    box-sizing: border-box;
  }
</style>
`;class MediaGestureReceiver extends GlobalThis.HTMLElement{constructor(hr={}){if(super(),__privateAdd$r(this,_mediaController$7,void 0),!this.shadowRoot){const gr=this.attachShadow({mode:"open"}),vr=template$g.content.cloneNode(!0);this.nativeEl=vr;let xr=hr.slotTemplate;xr||(xr=Document$2.createElement("template"),xr.innerHTML=`<slot>${hr.defaultContent||""}</slot>`),this.nativeEl.appendChild(xr.content.cloneNode(!0)),gr.appendChild(vr)}}static get observedAttributes(){return[MediaStateReceiverAttributes.MEDIA_CONTROLLER,MediaUIAttributes.MEDIA_PAUSED]}attributeChangedCallback(hr,gr,vr){var xr,Er,Cr,wr,Rr;hr===MediaStateReceiverAttributes.MEDIA_CONTROLLER&&(gr&&((Er=(xr=__privateGet$q(this,_mediaController$7))==null?void 0:xr.unassociateElement)==null||Er.call(xr,this),__privateSet$o(this,_mediaController$7,null)),vr&&this.isConnected&&(__privateSet$o(this,_mediaController$7,(Cr=this.getRootNode())==null?void 0:Cr.getElementById(vr)),(Rr=(wr=__privateGet$q(this,_mediaController$7))==null?void 0:wr.associateElement)==null||Rr.call(wr,this)))}connectedCallback(){var hr,gr,vr,xr;this.tabIndex=-1,this.setAttribute("aria-hidden","true"),__privateSet$o(this,_mediaController$7,getMediaControllerEl(this)),this.getAttribute(MediaStateReceiverAttributes.MEDIA_CONTROLLER)&&((gr=(hr=__privateGet$q(this,_mediaController$7))==null?void 0:hr.associateElement)==null||gr.call(hr,this)),(vr=__privateGet$q(this,_mediaController$7))==null||vr.addEventListener("pointerdown",this),(xr=__privateGet$q(this,_mediaController$7))==null||xr.addEventListener("click",this)}disconnectedCallback(){var hr,gr,vr,xr;this.getAttribute(MediaStateReceiverAttributes.MEDIA_CONTROLLER)&&((gr=(hr=__privateGet$q(this,_mediaController$7))==null?void 0:hr.unassociateElement)==null||gr.call(hr,this)),(vr=__privateGet$q(this,_mediaController$7))==null||vr.removeEventListener("pointerdown",this),(xr=__privateGet$q(this,_mediaController$7))==null||xr.removeEventListener("click",this),__privateSet$o(this,_mediaController$7,null)}handleEvent(hr){var gr;const vr=(gr=hr.composedPath())==null?void 0:gr[0];if(["video","media-controller"].includes(vr?.localName)){if(hr.type==="pointerdown")this._pointerType=hr.pointerType;else if(hr.type==="click"){const{clientX:Er,clientY:Cr}=hr,{left:wr,top:Rr,width:kr,height:Dr}=this.getBoundingClientRect(),Br=Er-wr,Hr=Cr-Rr;if(Br<0||Hr<0||Br>kr||Hr>Dr||kr===0&&Dr===0)return;const{pointerType:Gr=this._pointerType}=hr;if(this._pointerType=void 0,Gr===PointerTypes.TOUCH){this.handleTap(hr);return}else if(Gr===PointerTypes.MOUSE){this.handleMouseClick(hr);return}}}}get mediaPaused(){return getBooleanAttr(this,MediaUIAttributes.MEDIA_PAUSED)}set mediaPaused(hr){setBooleanAttr(this,MediaUIAttributes.MEDIA_PAUSED,hr)}handleTap(hr){}handleMouseClick(hr){const gr=this.mediaPaused?MediaUIEvents.MEDIA_PLAY_REQUEST:MediaUIEvents.MEDIA_PAUSE_REQUEST;this.dispatchEvent(new GlobalThis.CustomEvent(gr,{composed:!0,bubbles:!0}))}}_mediaController$7=new WeakMap;function getMediaControllerEl(mr){var hr;const gr=mr.getAttribute(MediaStateReceiverAttributes.MEDIA_CONTROLLER);return gr?(hr=mr.getRootNode())==null?void 0:hr.getElementById(gr):closestComposedNode(mr,"media-controller")}GlobalThis.customElements.get("media-gesture-receiver")||GlobalThis.customElements.define("media-gesture-receiver",MediaGestureReceiver);var __accessCheck$q=(mr,hr,gr)=>{if(!hr.has(mr))throw TypeError("Cannot "+gr)},__privateGet$p=(mr,hr,gr)=>(__accessCheck$q(mr,hr,"read from private field"),gr?gr.call(mr):hr.get(mr)),__privateAdd$q=(mr,hr,gr)=>{if(hr.has(mr))throw TypeError("Cannot add the same private member more than once");hr instanceof WeakSet?hr.add(mr):hr.set(mr,gr)},__privateSet$n=(mr,hr,gr,vr)=>(__accessCheck$q(mr,hr,"write to private field"),hr.set(mr,gr),gr),__privateMethod$c=(mr,hr,gr)=>(__accessCheck$q(mr,hr,"access private method"),gr),_pointerDownTimeStamp,_currentMedia,_inactiveTimeout,_autohide,_handlePointerMove$2,handlePointerMove_fn$2,_handlePointerUp$1,handlePointerUp_fn$1,_setInactive,setInactive_fn,_setActive,setActive_fn,_scheduleInactive,scheduleInactive_fn;const Attributes$e={AUDIO:"audio",AUTOHIDE:"autohide",BREAKPOINTS:"breakpoints",GESTURES_DISABLED:"gesturesdisabled",KEYBOARD_CONTROL:"keyboardcontrol",NO_AUTOHIDE:"noautohide",USER_INACTIVE:"userinactive"},template$f=Document$2.createElement("template");template$f.innerHTML=`
  <style>
    
    :host([${MediaUIAttributes.MEDIA_IS_FULLSCREEN}]) ::slotted([slot=media]) {
      outline: none;
    }

    :host {
      box-sizing: border-box;
      position: relative;
      display: inline-block;
      line-height: 0;
      background-color: var(--media-background-color, #000);
    }

    :host(:not([${Attributes$e.AUDIO}])) [part~=layer]:not([part~=media-layer]) {
      position: absolute;
      top: 0;
      left: 0;
      bottom: 0;
      right: 0;
      display: flex;
      flex-flow: column nowrap;
      align-items: start;
      pointer-events: none;
      background: none;
    }

    slot[name=media] {
      display: var(--media-slot-display, contents);
    }

    
    :host([${Attributes$e.AUDIO}]) slot[name=media] {
      display: var(--media-slot-display, none);
    }

    
    :host([${Attributes$e.AUDIO}]) [part~=layer][part~=gesture-layer] {
      height: 0;
      display: block;
    }

    
    :host(:not([${Attributes$e.AUDIO}])[${Attributes$e.GESTURES_DISABLED}]) ::slotted([slot=gestures-chrome]),
    :host(:not([${Attributes$e.AUDIO}])[${Attributes$e.GESTURES_DISABLED}]) media-gesture-receiver[slot=gestures-chrome] {
      display: none;
    }

    
    ::slotted(:not([slot=media]):not([slot=poster]):not(media-loading-indicator):not([hidden])) {
      pointer-events: auto;
    }

    :host(:not([${Attributes$e.AUDIO}])) *[part~=layer][part~=centered-layer] {
      align-items: center;
      justify-content: center;
    }

    :host(:not([${Attributes$e.AUDIO}])) ::slotted(media-gesture-receiver[slot=gestures-chrome]),
    :host(:not([${Attributes$e.AUDIO}])) media-gesture-receiver[slot=gestures-chrome] {
      align-self: stretch;
      flex-grow: 1;
    }

    slot[name=middle-chrome] {
      display: inline;
      flex-grow: 1;
      pointer-events: none;
      background: none;
    }

    
    ::slotted([slot=media]),
    ::slotted([slot=poster]) {
      width: 100%;
      height: 100%;
    }

    
    :host(:not([${Attributes$e.AUDIO}])) .spacer {
      flex-grow: 1;
    }

    
    :host(:-webkit-full-screen) {
      
      width: 100% !important;
      height: 100% !important;
    }

    
    ::slotted(:not([slot=media]):not([slot=poster]):not([${Attributes$e.NO_AUTOHIDE}]):not([hidden])) {
      opacity: 1;
      transition: opacity 0.25s;
    }

    
    :host([${Attributes$e.USER_INACTIVE}]:not([${MediaUIAttributes.MEDIA_PAUSED}]):not([${MediaUIAttributes.MEDIA_IS_AIRPLAYING}]):not([${MediaUIAttributes.MEDIA_IS_CASTING}]):not([${Attributes$e.AUDIO}])) ::slotted(:not([slot=media]):not([slot=poster]):not([${Attributes$e.NO_AUTOHIDE}])) {
      opacity: 0;
      transition: opacity 1s;
    }

    :host([${Attributes$e.USER_INACTIVE}]:not([${MediaUIAttributes.MEDIA_PAUSED}]):not([${MediaUIAttributes.MEDIA_IS_CASTING}]):not([${Attributes$e.AUDIO}])) ::slotted([slot=media]) {
      cursor: none;
    }

    ::slotted(media-control-bar)  {
      align-self: stretch;
    }

    
    :host(:not([${Attributes$e.AUDIO}])[${MediaUIAttributes.MEDIA_HAS_PLAYED}]) slot[name=poster] {
      display: none;
    }

    ::slotted([role="menu"]) {
      align-self: end;
    }

    ::slotted([role="dialog"]) {
      align-self: center;
    }
  </style>

  <slot name="media" part="layer media-layer"></slot>
  <slot name="poster" part="layer poster-layer"></slot>
  <slot name="gestures-chrome" part="layer gesture-layer">
    <media-gesture-receiver slot="gestures-chrome"></media-gesture-receiver>
  </slot>
  <span part="layer vertical-layer">
    <slot name="top-chrome" part="top chrome"></slot>
    <slot name="middle-chrome" part="middle chrome"></slot>
    <slot name="centered-chrome" part="layer centered-layer center centered chrome"></slot>
    
    <slot part="bottom chrome"></slot>
  </span>
`;const MEDIA_UI_ATTRIBUTE_NAMES$1=Object.values(MediaUIAttributes),defaultBreakpoints="sm:384 md:576 lg:768 xl:960";function resizeCallback(mr){setBreakpoints(mr.target,mr.contentRect.width)}function setBreakpoints(mr,hr){var gr;if(!mr.isConnected)return;const vr=(gr=mr.getAttribute(Attributes$e.BREAKPOINTS))!=null?gr:defaultBreakpoints,xr=createBreakpointMap(vr),Er=getBreakpoints(xr,hr);let Cr=!1;if(Object.keys(xr).forEach(wr=>{if(Er.includes(wr)){mr.hasAttribute(`breakpoint${wr}`)||(mr.setAttribute(`breakpoint${wr}`,""),Cr=!0);return}mr.hasAttribute(`breakpoint${wr}`)&&(mr.removeAttribute(`breakpoint${wr}`),Cr=!0)}),Cr){const wr=new CustomEvent(MediaStateChangeEvents.BREAKPOINTS_CHANGE,{detail:Er});mr.dispatchEvent(wr)}}function createBreakpointMap(mr){const hr=mr.split(/\s+/);return Object.fromEntries(hr.map(gr=>gr.split(":")))}function getBreakpoints(mr,hr){return Object.keys(mr).filter(gr=>hr>=parseInt(mr[gr]))}class MediaContainer extends GlobalThis.HTMLElement{constructor(){super(),__privateAdd$q(this,_handlePointerMove$2),__privateAdd$q(this,_handlePointerUp$1),__privateAdd$q(this,_setInactive),__privateAdd$q(this,_setActive),__privateAdd$q(this,_scheduleInactive),__privateAdd$q(this,_pointerDownTimeStamp,0),__privateAdd$q(this,_currentMedia,null),__privateAdd$q(this,_inactiveTimeout,null),__privateAdd$q(this,_autohide,void 0),this.breakpointsComputed=!1,this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(template$f.content.cloneNode(!0)));const hr=Cr=>{const wr=this.media;for(const Rr of Cr)Rr.type==="childList"&&(Rr.removedNodes.forEach(kr=>{if(kr.slot=="media"&&Rr.target==this){let Dr=Rr.previousSibling&&Rr.previousSibling.previousElementSibling;if(!Dr||!wr)this.mediaUnsetCallback(kr);else{let Br=Dr.slot!=="media";for(;(Dr=Dr.previousSibling)!==null;)Dr.slot=="media"&&(Br=!1);Br&&this.mediaUnsetCallback(kr)}}}),wr&&Rr.addedNodes.forEach(kr=>{kr===wr&&this.handleMediaUpdated(wr)}))};new MutationObserver(hr).observe(this,{childList:!0,subtree:!0});let vr=!1;observeResize(this,Cr=>{vr||(setTimeout(()=>{resizeCallback(Cr),vr=!1,this.breakpointsComputed||(this.breakpointsComputed=!0,this.dispatchEvent(new CustomEvent(MediaStateChangeEvents.BREAKPOINTS_COMPUTED,{bubbles:!0,composed:!0})))},0),vr=!0)});const Er=this.querySelector(":scope > slot[slot=media]");Er&&Er.addEventListener("slotchange",()=>{if(!Er.assignedElements({flatten:!0}).length){__privateGet$p(this,_currentMedia)&&this.mediaUnsetCallback(__privateGet$p(this,_currentMedia));return}this.handleMediaUpdated(this.media)})}static get observedAttributes(){return[Attributes$e.AUTOHIDE,Attributes$e.GESTURES_DISABLED].concat(MEDIA_UI_ATTRIBUTE_NAMES$1).filter(hr=>![MediaUIAttributes.MEDIA_RENDITION_LIST,MediaUIAttributes.MEDIA_AUDIO_TRACK_LIST,MediaUIAttributes.MEDIA_CHAPTERS_CUES,MediaUIAttributes.MEDIA_WIDTH,MediaUIAttributes.MEDIA_HEIGHT].includes(hr))}attributeChangedCallback(hr,gr,vr){hr.toLowerCase()==Attributes$e.AUTOHIDE&&(this.autohide=vr)}get media(){let hr=this.querySelector(":scope > [slot=media]");return hr?.nodeName=="SLOT"&&(hr=hr.assignedElements({flatten:!0})[0]),hr}async handleMediaUpdated(hr){hr&&(__privateSet$n(this,_currentMedia,hr),hr.localName.includes("-")&&await GlobalThis.customElements.whenDefined(hr.localName),this.mediaSetCallback(hr))}connectedCallback(){var hr;const vr=this.getAttribute(Attributes$e.AUDIO)!=null?nouns.AUDIO_PLAYER():nouns.VIDEO_PLAYER();this.setAttribute("role","region"),this.setAttribute("aria-label",vr),this.handleMediaUpdated(this.media),this.setAttribute(Attributes$e.USER_INACTIVE,""),this.addEventListener("pointerdown",this),this.addEventListener("pointermove",this),this.addEventListener("pointerup",this),this.addEventListener("mouseleave",this),this.addEventListener("keyup",this),(hr=GlobalThis.window)==null||hr.addEventListener("mouseup",this)}disconnectedCallback(){var hr;this.media&&this.mediaUnsetCallback(this.media),(hr=GlobalThis.window)==null||hr.removeEventListener("mouseup",this)}mediaSetCallback(hr){}mediaUnsetCallback(hr){__privateSet$n(this,_currentMedia,null)}handleEvent(hr){switch(hr.type){case"pointerdown":__privateSet$n(this,_pointerDownTimeStamp,hr.timeStamp);break;case"pointermove":__privateMethod$c(this,_handlePointerMove$2,handlePointerMove_fn$2).call(this,hr);break;case"pointerup":__privateMethod$c(this,_handlePointerUp$1,handlePointerUp_fn$1).call(this,hr);break;case"mouseleave":__privateMethod$c(this,_setInactive,setInactive_fn).call(this);break;case"mouseup":this.removeAttribute(Attributes$e.KEYBOARD_CONTROL);break;case"keyup":__privateMethod$c(this,_scheduleInactive,scheduleInactive_fn).call(this),this.setAttribute(Attributes$e.KEYBOARD_CONTROL,"");break}}set autohide(hr){const gr=Number(hr);__privateSet$n(this,_autohide,isNaN(gr)?0:gr)}get autohide(){return(__privateGet$p(this,_autohide)===void 0?2:__privateGet$p(this,_autohide)).toString()}}_pointerDownTimeStamp=new WeakMap;_currentMedia=new WeakMap;_inactiveTimeout=new WeakMap;_autohide=new WeakMap;_handlePointerMove$2=new WeakSet;handlePointerMove_fn$2=function(mr){mr.pointerType!=="mouse"&&mr.timeStamp-__privateGet$p(this,_pointerDownTimeStamp)<250||(__privateMethod$c(this,_setActive,setActive_fn).call(this),clearTimeout(__privateGet$p(this,_inactiveTimeout)),[this,this.media].includes(mr.target)&&__privateMethod$c(this,_scheduleInactive,scheduleInactive_fn).call(this))};_handlePointerUp$1=new WeakSet;handlePointerUp_fn$1=function(mr){if(mr.pointerType==="touch"){const hr=!this.hasAttribute(Attributes$e.USER_INACTIVE);[this,this.media].includes(mr.target)&&hr?__privateMethod$c(this,_setInactive,setInactive_fn).call(this):__privateMethod$c(this,_scheduleInactive,scheduleInactive_fn).call(this)}else mr.composedPath().some(hr=>["media-play-button","media-fullscreen-button"].includes(hr?.localName))&&__privateMethod$c(this,_scheduleInactive,scheduleInactive_fn).call(this)};_setInactive=new WeakSet;setInactive_fn=function(){if(__privateGet$p(this,_autohide)<0||this.hasAttribute(Attributes$e.USER_INACTIVE))return;this.setAttribute(Attributes$e.USER_INACTIVE,"");const mr=new GlobalThis.CustomEvent(MediaStateChangeEvents.USER_INACTIVE,{composed:!0,bubbles:!0,detail:!0});this.dispatchEvent(mr)};_setActive=new WeakSet;setActive_fn=function(){if(!this.hasAttribute(Attributes$e.USER_INACTIVE))return;this.removeAttribute(Attributes$e.USER_INACTIVE);const mr=new GlobalThis.CustomEvent(MediaStateChangeEvents.USER_INACTIVE,{composed:!0,bubbles:!0,detail:!1});this.dispatchEvent(mr)};_scheduleInactive=new WeakSet;scheduleInactive_fn=function(){__privateMethod$c(this,_setActive,setActive_fn).call(this),clearTimeout(__privateGet$p(this,_inactiveTimeout));const mr=parseInt(this.autohide);mr<0||__privateSet$n(this,_inactiveTimeout,setTimeout(()=>{__privateMethod$c(this,_setInactive,setInactive_fn).call(this)},mr*1e3))};GlobalThis.customElements.get("media-container")||GlobalThis.customElements.define("media-container",MediaContainer);var __accessCheck$p=(mr,hr,gr)=>{if(!hr.has(mr))throw TypeError("Cannot "+gr)},__privateGet$o=(mr,hr,gr)=>(__accessCheck$p(mr,hr,"read from private field"),gr?gr.call(mr):hr.get(mr)),__privateAdd$p=(mr,hr,gr)=>{if(hr.has(mr))throw TypeError("Cannot add the same private member more than once");hr instanceof WeakSet?hr.add(mr):hr.set(mr,gr)},__privateSet$m=(mr,hr,gr,vr)=>(__accessCheck$p(mr,hr,"write to private field"),hr.set(mr,gr),gr),_el,_attr,_defaultSet,_tokenSet,_tokens,tokens_get;class AttributeTokenList{constructor(hr,gr,{defaultValue:vr}={defaultValue:void 0}){__privateAdd$p(this,_tokens),__privateAdd$p(this,_el,void 0),__privateAdd$p(this,_attr,void 0),__privateAdd$p(this,_defaultSet,void 0),__privateAdd$p(this,_tokenSet,new Set),__privateSet$m(this,_el,hr),__privateSet$m(this,_attr,gr),__privateSet$m(this,_defaultSet,new Set(vr))}[Symbol.iterator](){return __privateGet$o(this,_tokens,tokens_get).values()}get length(){return __privateGet$o(this,_tokens,tokens_get).size}get value(){var hr;return(hr=[...__privateGet$o(this,_tokens,tokens_get)].join(" "))!=null?hr:""}set value(hr){var gr;hr!==this.value&&(__privateSet$m(this,_tokenSet,new Set),this.add(...(gr=hr?.split(" "))!=null?gr:[]))}toString(){return this.value}item(hr){return[...__privateGet$o(this,_tokens,tokens_get)][hr]}values(){return __privateGet$o(this,_tokens,tokens_get).values()}forEach(hr,gr){__privateGet$o(this,_tokens,tokens_get).forEach(hr,gr)}add(...hr){var gr,vr;hr.forEach(xr=>__privateGet$o(this,_tokenSet).add(xr)),!(this.value===""&&!((gr=__privateGet$o(this,_el))!=null&&gr.hasAttribute(`${__privateGet$o(this,_attr)}`)))&&((vr=__privateGet$o(this,_el))==null||vr.setAttribute(`${__privateGet$o(this,_attr)}`,`${this.value}`))}remove(...hr){var gr;hr.forEach(vr=>__privateGet$o(this,_tokenSet).delete(vr)),(gr=__privateGet$o(this,_el))==null||gr.setAttribute(`${__privateGet$o(this,_attr)}`,`${this.value}`)}contains(hr){return __privateGet$o(this,_tokens,tokens_get).has(hr)}toggle(hr,gr){return typeof gr<"u"?gr?(this.add(hr),!0):(this.remove(hr),!1):this.contains(hr)?(this.remove(hr),!1):(this.add(hr),!0)}replace(hr,gr){return this.remove(hr),this.add(gr),hr===gr}}_el=new WeakMap;_attr=new WeakMap;_defaultSet=new WeakMap;_tokenSet=new WeakMap;_tokens=new WeakSet;tokens_get=function(){return __privateGet$o(this,_tokenSet).size?__privateGet$o(this,_tokenSet):__privateGet$o(this,_defaultSet)};const splitTextTracksStr=(mr="")=>mr.split(/\s+/),parseTextTrackStr=(mr="")=>{const[hr,gr,vr]=mr.split(":"),xr=vr?decodeURIComponent(vr):void 0;return{kind:hr==="cc"?TextTrackKinds.CAPTIONS:TextTrackKinds.SUBTITLES,language:gr,label:xr}},parseTextTracksStr=(mr="",hr={})=>splitTextTracksStr(mr).map(gr=>{const vr=parseTextTrackStr(gr);return{...hr,...vr}}),parseTracks=mr=>mr?Array.isArray(mr)?mr.map(hr=>typeof hr=="string"?parseTextTrackStr(hr):hr):typeof mr=="string"?parseTextTracksStr(mr):[mr]:[],formatTextTrackObj=({kind:mr,label:hr,language:gr}={kind:"subtitles"})=>hr?`${mr==="captions"?"cc":"sb"}:${gr}:${encodeURIComponent(hr)}`:gr,stringifyTextTrackList=(mr=[])=>Array.prototype.map.call(mr,formatTextTrackObj).join(" "),isMatchingPropOf=(mr,hr)=>gr=>gr[mr]===hr,textTrackObjAsPred=mr=>{const hr=Object.entries(mr).map(([gr,vr])=>isMatchingPropOf(gr,vr));return gr=>hr.every(vr=>vr(gr))},updateTracksModeTo=(mr,hr=[],gr=[])=>{const vr=parseTracks(gr).map(textTrackObjAsPred),xr=Er=>vr.some(Cr=>Cr(Er));Array.from(hr).filter(xr).forEach(Er=>{Er.mode=mr})},getTextTracksList=(mr,hr=()=>!0)=>{if(!mr?.textTracks)return[];const gr=typeof hr=="function"?hr:textTrackObjAsPred(hr);return Array.from(mr.textTracks).filter(gr)},areSubsOn=mr=>{var hr;return!!((hr=mr.mediaSubtitlesShowing)!=null&&hr.length)||mr.hasAttribute(MediaUIAttributes.MEDIA_SUBTITLES_SHOWING)},enterFullscreen=mr=>{var hr;const{media:gr,fullscreenElement:vr}=mr,xr=vr&&"requestFullscreen"in vr?"requestFullscreen":vr&&"webkitRequestFullScreen"in vr?"webkitRequestFullScreen":void 0;if(xr){const Er=(hr=vr[xr])==null?void 0:hr.call(vr);if(Er instanceof Promise)return Er.catch(()=>{})}else gr?.webkitEnterFullscreen?gr.webkitEnterFullscreen():gr?.requestFullscreen&&gr.requestFullscreen()},exitFullscreenKey="exitFullscreen"in Document$2?"exitFullscreen":"webkitExitFullscreen"in Document$2?"webkitExitFullscreen":"webkitCancelFullScreen"in Document$2?"webkitCancelFullScreen":void 0,exitFullscreen=mr=>{var hr;const{documentElement:gr}=mr;if(exitFullscreenKey){const vr=(hr=gr?.[exitFullscreenKey])==null?void 0:hr.call(gr);if(vr instanceof Promise)return vr.catch(()=>{})}},fullscreenElementKey="fullscreenElement"in Document$2?"fullscreenElement":"webkitFullscreenElement"in Document$2?"webkitFullscreenElement":void 0,getFullscreenElement=mr=>{const{documentElement:hr,media:gr}=mr,vr=hr?.[fullscreenElementKey];return!vr&&"webkitDisplayingFullscreen"in gr&&"webkitPresentationMode"in gr&&gr.webkitDisplayingFullscreen&&gr.webkitPresentationMode===WebkitPresentationModes.FULLSCREEN?gr:vr},isFullscreen=mr=>{var hr;const{media:gr,documentElement:vr,fullscreenElement:xr=gr}=mr;if(!gr||!vr)return!1;const Er=getFullscreenElement(mr);if(!Er)return!1;if(Er===xr||Er===gr)return!0;if(Er.localName.includes("-")){let Cr=Er.shadowRoot;if(!(fullscreenElementKey in Cr))return containsComposedNode(Er,xr);for(;Cr?.[fullscreenElementKey];){if(Cr[fullscreenElementKey]===xr)return!0;Cr=(hr=Cr[fullscreenElementKey])==null?void 0:hr.shadowRoot}}return!1},fullscreenEnabledKey="fullscreenEnabled"in Document$2?"fullscreenEnabled":"webkitFullscreenEnabled"in Document$2?"webkitFullscreenEnabled":void 0,isFullscreenEnabled=mr=>{const{documentElement:hr,media:gr}=mr;return!!hr?.[fullscreenEnabledKey]||gr&&"webkitSupportsFullscreen"in gr};let testMediaEl;const getTestMediaEl=()=>{var mr,hr;return testMediaEl||(testMediaEl=(hr=(mr=Document$2)==null?void 0:mr.createElement)==null?void 0:hr.call(mr,"video"),testMediaEl)},hasVolumeSupportAsync=async(mr=getTestMediaEl())=>{if(!mr)return!1;const hr=mr.volume;mr.volume=hr/2+.1;const gr=new AbortController,vr=await Promise.race([dispatchedVolumeChange(mr,gr.signal),volumeChanged(mr,hr)]);return gr.abort(),vr},dispatchedVolumeChange=(mr,hr)=>new Promise(gr=>{mr.addEventListener("volumechange",()=>gr(!0),{signal:hr})}),volumeChanged=async(mr,hr)=>{for(let gr=0;gr<10;gr++){if(mr.volume===hr)return!1;await delay(10)}return mr.volume!==hr},isSafari=/.*Version\/.*Safari\/.*/.test(GlobalThis.navigator.userAgent),hasPipSupport=(mr=getTestMediaEl())=>GlobalThis.matchMedia("(display-mode: standalone)").matches&&isSafari?!1:typeof mr?.requestPictureInPicture=="function",hasFullscreenSupport=(mr=getTestMediaEl())=>isFullscreenEnabled({documentElement:Document$2,media:mr}),fullscreenSupported=hasFullscreenSupport(),pipSupported=hasPipSupport(),airplaySupported=!!GlobalThis.WebKitPlaybackTargetAvailabilityEvent,castSupported=!!GlobalThis.chrome,getSubtitleTracks=mr=>getTextTracksList(mr.media,hr=>[TextTrackKinds.SUBTITLES,TextTrackKinds.CAPTIONS].includes(hr.kind)).sort((hr,gr)=>hr.kind>=gr.kind?1:-1),getShowingSubtitleTracks=mr=>getTextTracksList(mr.media,hr=>hr.mode===TextTrackModes.SHOWING&&[TextTrackKinds.SUBTITLES,TextTrackKinds.CAPTIONS].includes(hr.kind)),toggleSubtitleTracks=(mr,hr)=>{const gr=getSubtitleTracks(mr),vr=getShowingSubtitleTracks(mr),xr=!!vr.length;if(gr.length){if(hr===!1||xr&&hr!==!0)updateTracksModeTo(TextTrackModes.DISABLED,gr,vr);else if(hr===!0||!xr&&hr!==!1){let Er=gr[0];const{options:Cr}=mr;if(!Cr?.noSubtitlesLangPref){const Dr=globalThis.localStorage.getItem("media-chrome-pref-subtitles-lang"),Br=Dr?[Dr,...globalThis.navigator.languages]:globalThis.navigator.languages,Hr=gr.filter(Gr=>Br.some(qr=>Gr.language.toLowerCase().startsWith(qr.split("-")[0]))).sort((Gr,qr)=>{const zr=Br.findIndex(sn=>Gr.language.toLowerCase().startsWith(sn.split("-")[0])),Qr=Br.findIndex(sn=>qr.language.toLowerCase().startsWith(sn.split("-")[0]));return zr-Qr});Hr[0]&&(Er=Hr[0])}const{language:wr,label:Rr,kind:kr}=Er;updateTracksModeTo(TextTrackModes.DISABLED,gr,vr),updateTracksModeTo(TextTrackModes.SHOWING,gr,[{language:wr,label:Rr,kind:kr}])}}},areValuesEq=(mr,hr)=>mr===hr?!0:typeof mr!=typeof hr?!1:typeof mr=="number"&&Number.isNaN(mr)&&Number.isNaN(hr)?!0:typeof mr!="object"?!1:Array.isArray(mr)?areArraysEq(mr,hr):Object.entries(mr).every(([gr,vr])=>gr in hr&&areValuesEq(vr,hr[gr])),areArraysEq=(mr,hr)=>{const gr=Array.isArray(mr),vr=Array.isArray(hr);return gr!==vr?!1:gr||vr?mr.length!==hr.length?!1:mr.every((xr,Er)=>areValuesEq(xr,hr[Er])):!0},StreamTypeValues=Object.values(StreamTypes);let volumeSupported;const volumeSupportPromise=hasVolumeSupportAsync().then(mr=>(volumeSupported=mr,volumeSupported)),prepareStateOwners=async(...mr)=>{await Promise.all(mr.filter(hr=>hr).map(async hr=>{if(!("localName"in hr&&hr instanceof GlobalThis.HTMLElement))return;const gr=hr.localName;if(!gr.includes("-"))return;const vr=GlobalThis.customElements.get(gr);vr&&hr instanceof vr||(await GlobalThis.customElements.whenDefined(gr),GlobalThis.customElements.upgrade(hr))}))},stateMediator={mediaWidth:{get(mr){var hr;const{media:gr}=mr;return(hr=gr?.videoWidth)!=null?hr:0},mediaEvents:["resize"]},mediaHeight:{get(mr){var hr;const{media:gr}=mr;return(hr=gr?.videoHeight)!=null?hr:0},mediaEvents:["resize"]},mediaPaused:{get(mr){var hr;const{media:gr}=mr;return(hr=gr?.paused)!=null?hr:!0},set(mr,hr){var gr;const{media:vr}=hr;vr&&(mr?vr.pause():(gr=vr.play())==null||gr.catch(()=>{}))},mediaEvents:["play","playing","pause","emptied"]},mediaHasPlayed:{get(mr,hr){const{media:gr}=mr;return gr?hr?hr.type==="playing":!gr.paused:!1},mediaEvents:["playing","emptied"]},mediaEnded:{get(mr){var hr;const{media:gr}=mr;return(hr=gr?.ended)!=null?hr:!1},mediaEvents:["seeked","ended","emptied"]},mediaPlaybackRate:{get(mr){var hr;const{media:gr}=mr;return(hr=gr?.playbackRate)!=null?hr:1},set(mr,hr){const{media:gr}=hr;gr&&Number.isFinite(+mr)&&(gr.playbackRate=+mr)},mediaEvents:["ratechange","loadstart"]},mediaMuted:{get(mr){var hr;const{media:gr}=mr;return(hr=gr?.muted)!=null?hr:!1},set(mr,hr){const{media:gr}=hr;gr&&(gr.muted=mr)},mediaEvents:["volumechange"]},mediaVolume:{get(mr){var hr;const{media:gr}=mr;return(hr=gr?.volume)!=null?hr:1},set(mr,hr){const{media:gr}=hr;if(gr){try{mr==null?GlobalThis.localStorage.removeItem("media-chrome-pref-volume"):GlobalThis.localStorage.setItem("media-chrome-pref-volume",mr.toString())}catch{}Number.isFinite(+mr)&&(gr.volume=+mr)}},mediaEvents:["volumechange"],stateOwnersUpdateHandlers:[(mr,hr)=>{const{options:{noVolumePref:gr}}=hr;if(!gr)try{const vr=GlobalThis.localStorage.getItem("media-chrome-pref-volume");if(vr==null)return;stateMediator.mediaVolume.set(+vr,hr),mr(+vr)}catch(vr){console.debug("Error getting volume pref",vr)}}]},mediaVolumeLevel:{get(mr){const{media:hr}=mr;return typeof hr?.volume>"u"?"high":hr.muted||hr.volume===0?"off":hr.volume<.5?"low":hr.volume<.75?"medium":"high"},mediaEvents:["volumechange"]},mediaCurrentTime:{get(mr){var hr;const{media:gr}=mr;return(hr=gr?.currentTime)!=null?hr:0},set(mr,hr){const{media:gr}=hr;!gr||!isValidNumber(mr)||(gr.currentTime=mr)},mediaEvents:["timeupdate","loadedmetadata"]},mediaDuration:{get(mr){const{media:hr,options:{defaultDuration:gr}={}}=mr;return gr&&(!hr||!hr.duration||Number.isNaN(hr.duration)||!Number.isFinite(hr.duration))?gr:Number.isFinite(hr?.duration)?hr.duration:Number.NaN},mediaEvents:["durationchange","loadedmetadata","emptied"]},mediaLoading:{get(mr){const{media:hr}=mr;return hr?.readyState<3},mediaEvents:["waiting","playing","emptied"]},mediaSeekable:{get(mr){var hr;const{media:gr}=mr;if(!((hr=gr?.seekable)!=null&&hr.length))return;const vr=gr.seekable.start(0),xr=gr.seekable.end(gr.seekable.length-1);if(!(!vr&&!xr))return[Number(vr.toFixed(3)),Number(xr.toFixed(3))]},mediaEvents:["loadedmetadata","emptied","progress","seekablechange"]},mediaBuffered:{get(mr){var hr;const{media:gr}=mr,vr=(hr=gr?.buffered)!=null?hr:[];return Array.from(vr).map((xr,Er)=>[Number(vr.start(Er).toFixed(3)),Number(vr.end(Er).toFixed(3))])},mediaEvents:["progress","emptied"]},mediaStreamType:{get(mr){const{media:hr,options:{defaultStreamType:gr}={}}=mr,vr=[StreamTypes.LIVE,StreamTypes.ON_DEMAND].includes(gr)?gr:void 0;if(!hr)return vr;const{streamType:xr}=hr;if(StreamTypeValues.includes(xr))return xr===StreamTypes.UNKNOWN?vr:xr;const Er=hr.duration;return Er===1/0?StreamTypes.LIVE:Number.isFinite(Er)?StreamTypes.ON_DEMAND:vr},mediaEvents:["emptied","durationchange","loadedmetadata","streamtypechange"]},mediaTargetLiveWindow:{get(mr){const{media:hr}=mr;if(!hr)return Number.NaN;const{targetLiveWindow:gr}=hr,vr=stateMediator.mediaStreamType.get(mr);return(gr==null||Number.isNaN(gr))&&vr===StreamTypes.LIVE?0:gr},mediaEvents:["emptied","durationchange","loadedmetadata","streamtypechange","targetlivewindowchange"]},mediaTimeIsLive:{get(mr){const{media:hr,options:{liveEdgeOffset:gr=10}={}}=mr;if(!hr)return!1;if(typeof hr.liveEdgeStart=="number")return Number.isNaN(hr.liveEdgeStart)?!1:hr.currentTime>=hr.liveEdgeStart;if(!(stateMediator.mediaStreamType.get(mr)===StreamTypes.LIVE))return!1;const xr=hr.seekable;if(!xr)return!0;if(!xr.length)return!1;const Er=xr.end(xr.length-1)-gr;return hr.currentTime>=Er},mediaEvents:["playing","timeupdate","progress","waiting","emptied"]},mediaSubtitlesList:{get(mr){return getSubtitleTracks(mr).map(({kind:hr,label:gr,language:vr})=>({kind:hr,label:gr,language:vr}))},mediaEvents:["loadstart"],textTracksEvents:["addtrack","removetrack"]},mediaSubtitlesShowing:{get(mr){return getShowingSubtitleTracks(mr).map(({kind:hr,label:gr,language:vr})=>({kind:hr,label:gr,language:vr}))},mediaEvents:["loadstart"],textTracksEvents:["addtrack","removetrack","change"],stateOwnersUpdateHandlers:[(mr,hr)=>{var gr,vr;const{media:xr,options:Er}=hr;if(!xr)return;const Cr=wr=>{var Rr;!Er.defaultSubtitles||wr&&![TextTrackKinds.CAPTIONS,TextTrackKinds.SUBTITLES].includes((Rr=wr?.track)==null?void 0:Rr.kind)||toggleSubtitleTracks(hr,!0)};return(gr=xr.textTracks)==null||gr.addEventListener("addtrack",Cr),(vr=xr.textTracks)==null||vr.addEventListener("removetrack",Cr),Cr(),()=>{var wr,Rr;(wr=xr.textTracks)==null||wr.removeEventListener("addtrack",Cr),(Rr=xr.textTracks)==null||Rr.removeEventListener("removetrack",Cr)}}]},mediaChaptersCues:{get(mr){var hr;const{media:gr}=mr;if(!gr)return[];const[vr]=getTextTracksList(gr,{kind:TextTrackKinds.CHAPTERS});return Array.from((hr=vr?.cues)!=null?hr:[]).map(({text:xr,startTime:Er,endTime:Cr})=>({text:xr,startTime:Er,endTime:Cr}))},mediaEvents:["loadstart","loadedmetadata"],textTracksEvents:["addtrack","removetrack","change"],stateOwnersUpdateHandlers:[(mr,hr)=>{var gr;const{media:vr}=hr;if(!vr)return;const xr=vr.querySelector('track[kind="chapters"][default][src]'),Er=(gr=vr.shadowRoot)==null?void 0:gr.querySelector(':is(video,audio) > track[kind="chapters"][default][src]');return xr?.addEventListener("load",mr),Er?.addEventListener("load",mr),()=>{xr?.removeEventListener("load",mr),Er?.removeEventListener("load",mr)}}]},mediaIsPip:{get(mr){var hr,gr;const{media:vr,documentElement:xr}=mr;if(!vr||!xr||!xr.pictureInPictureElement)return!1;if(xr.pictureInPictureElement===vr)return!0;if(xr.pictureInPictureElement instanceof HTMLMediaElement)return(hr=vr.localName)!=null&&hr.includes("-")?containsComposedNode(vr,xr.pictureInPictureElement):!1;if(xr.pictureInPictureElement.localName.includes("-")){let Er=xr.pictureInPictureElement.shadowRoot;for(;Er?.pictureInPictureElement;){if(Er.pictureInPictureElement===vr)return!0;Er=(gr=Er.pictureInPictureElement)==null?void 0:gr.shadowRoot}}return!1},set(mr,hr){const{media:gr}=hr;if(gr)if(mr){if(!Document$2.pictureInPictureEnabled){console.warn("MediaChrome: Picture-in-picture is not enabled");return}if(!gr.requestPictureInPicture){console.warn("MediaChrome: The current media does not support picture-in-picture");return}const vr=()=>{console.warn("MediaChrome: The media is not ready for picture-in-picture. It must have a readyState > 0.")};gr.requestPictureInPicture().catch(xr=>{if(xr.code===11){if(!gr.src){console.warn("MediaChrome: The media is not ready for picture-in-picture. It must have a src set.");return}if(gr.readyState===0&&gr.preload==="none"){const Er=()=>{gr.removeEventListener("loadedmetadata",Cr),gr.preload="none"},Cr=()=>{gr.requestPictureInPicture().catch(vr),Er()};gr.addEventListener("loadedmetadata",Cr),gr.preload="metadata",setTimeout(()=>{gr.readyState===0&&vr(),Er()},1e3)}else throw xr}else throw xr})}else Document$2.pictureInPictureElement&&Document$2.exitPictureInPicture()},mediaEvents:["enterpictureinpicture","leavepictureinpicture"]},mediaRenditionList:{get(mr){var hr;const{media:gr}=mr;return[...(hr=gr?.videoRenditions)!=null?hr:[]].map(vr=>({...vr}))},mediaEvents:["emptied","loadstart"],videoRenditionsEvents:["addrendition","removerendition"]},mediaRenditionSelected:{get(mr){var hr,gr,vr;const{media:xr}=mr;return(vr=(gr=xr?.videoRenditions)==null?void 0:gr[(hr=xr.videoRenditions)==null?void 0:hr.selectedIndex])==null?void 0:vr.id},set(mr,hr){const{media:gr}=hr;if(!gr?.videoRenditions){console.warn("MediaController: Rendition selection not supported by this media.");return}const vr=mr,xr=Array.prototype.findIndex.call(gr.videoRenditions,Er=>Er.id==vr);gr.videoRenditions.selectedIndex!=xr&&(gr.videoRenditions.selectedIndex=xr)},mediaEvents:["emptied"],videoRenditionsEvents:["addrendition","removerendition","change"]},mediaAudioTrackList:{get(mr){var hr;const{media:gr}=mr;return[...(hr=gr?.audioTracks)!=null?hr:[]]},mediaEvents:["emptied","loadstart"],audioTracksEvents:["addtrack","removetrack"]},mediaAudioTrackEnabled:{get(mr){var hr,gr;const{media:vr}=mr;return(gr=[...(hr=vr?.audioTracks)!=null?hr:[]].find(xr=>xr.enabled))==null?void 0:gr.id},set(mr,hr){const{media:gr}=hr;if(!gr?.audioTracks){console.warn("MediaChrome: Audio track selection not supported by this media.");return}const vr=mr;for(const xr of gr.audioTracks)xr.enabled=vr==xr.id},mediaEvents:["emptied"],audioTracksEvents:["addtrack","removetrack","change"]},mediaIsFullscreen:{get(mr){return isFullscreen(mr)},set(mr,hr){mr?enterFullscreen(hr):exitFullscreen(hr)},rootEvents:["fullscreenchange","webkitfullscreenchange"],mediaEvents:["webkitbeginfullscreen","webkitendfullscreen","webkitpresentationmodechanged"]},mediaIsCasting:{get(mr){var hr;const{media:gr}=mr;return!gr?.remote||((hr=gr.remote)==null?void 0:hr.state)==="disconnected"?!1:!!gr.remote.state},set(mr,hr){var gr,vr;const{media:xr}=hr;if(xr&&!(mr&&((gr=xr.remote)==null?void 0:gr.state)!=="disconnected")&&!(!mr&&((vr=xr.remote)==null?void 0:vr.state)!=="connected")){if(typeof xr.remote.prompt!="function"){console.warn("MediaChrome: Casting is not supported in this environment");return}xr.remote.prompt().catch(()=>{})}},remoteEvents:["connect","connecting","disconnect"]},mediaIsAirplaying:{get(){return!1},set(mr,hr){const{media:gr}=hr;if(gr){if(!(gr.webkitShowPlaybackTargetPicker&&GlobalThis.WebKitPlaybackTargetAvailabilityEvent)){console.warn("MediaChrome: received a request to select AirPlay but AirPlay is not supported in this environment");return}gr.webkitShowPlaybackTargetPicker()}},mediaEvents:["webkitcurrentplaybacktargetiswirelesschanged"]},mediaFullscreenUnavailable:{get(mr){const{media:hr}=mr;if(!fullscreenSupported||!hasFullscreenSupport(hr))return AvailabilityStates.UNSUPPORTED}},mediaPipUnavailable:{get(mr){const{media:hr}=mr;if(!pipSupported||!hasPipSupport(hr))return AvailabilityStates.UNSUPPORTED}},mediaVolumeUnavailable:{get(mr){const{media:hr}=mr;if(volumeSupported===!1||hr?.volume==null)return AvailabilityStates.UNSUPPORTED},stateOwnersUpdateHandlers:[mr=>{volumeSupported==null&&volumeSupportPromise.then(hr=>mr(hr?void 0:AvailabilityStates.UNSUPPORTED))}]},mediaCastUnavailable:{get(mr,{availability:hr="not-available"}={}){var gr;const{media:vr}=mr;if(!castSupported||!((gr=vr?.remote)!=null&&gr.state))return AvailabilityStates.UNSUPPORTED;if(!(hr==null||hr==="available"))return AvailabilityStates.UNAVAILABLE},stateOwnersUpdateHandlers:[(mr,hr)=>{var gr;const{media:vr}=hr;return vr?(vr.disableRemotePlayback||vr.hasAttribute("disableremoteplayback")||(gr=vr?.remote)==null||gr.watchAvailability(Er=>{mr({availability:Er?"available":"not-available"})}).catch(Er=>{Er.name==="NotSupportedError"?mr({availability:null}):mr({availability:"not-available"})}),()=>{var Er;(Er=vr?.remote)==null||Er.cancelWatchAvailability().catch(()=>{})}):void 0}]},mediaAirplayUnavailable:{get(mr,hr){if(!airplaySupported)return AvailabilityStates.UNSUPPORTED;if(hr?.availability==="not-available")return AvailabilityStates.UNAVAILABLE},mediaEvents:["webkitplaybacktargetavailabilitychanged"],stateOwnersUpdateHandlers:[(mr,hr)=>{var gr;const{media:vr}=hr;return vr?(vr.disableRemotePlayback||vr.hasAttribute("disableremoteplayback")||(gr=vr?.remote)==null||gr.watchAvailability(Er=>{mr({availability:Er?"available":"not-available"})}).catch(Er=>{Er.name==="NotSupportedError"?mr({availability:null}):mr({availability:"not-available"})}),()=>{var Er;(Er=vr?.remote)==null||Er.cancelWatchAvailability().catch(()=>{})}):void 0}]},mediaRenditionUnavailable:{get(mr){var hr;const{media:gr}=mr;if(!gr?.videoRenditions)return AvailabilityStates.UNSUPPORTED;if(!((hr=gr.videoRenditions)!=null&&hr.length))return AvailabilityStates.UNAVAILABLE},mediaEvents:["emptied","loadstart"],videoRenditionsEvents:["addrendition","removerendition"]},mediaAudioTrackUnavailable:{get(mr){var hr,gr;const{media:vr}=mr;if(!vr?.audioTracks)return AvailabilityStates.UNSUPPORTED;if(((gr=(hr=vr.audioTracks)==null?void 0:hr.length)!=null?gr:0)<=1)return AvailabilityStates.UNAVAILABLE},mediaEvents:["emptied","loadstart"],audioTracksEvents:["addtrack","removetrack"]}},requestMap={[MediaUIEvents.MEDIA_PREVIEW_REQUEST](mr,hr,{detail:gr}){var vr,xr,Er;const{media:Cr}=hr,wr=gr??void 0;let Rr,kr;if(Cr&&wr!=null){const[Gr]=getTextTracksList(Cr,{kind:TextTrackKinds.METADATA,label:"thumbnails"}),qr=Array.prototype.find.call((vr=Gr?.cues)!=null?vr:[],(zr,Qr,sn)=>Qr===0?zr.endTime>wr:Qr===sn.length-1?zr.startTime<=wr:zr.startTime<=wr&&zr.endTime>wr);if(qr){const zr=/'^(?:[a-z]+:)?\/\//i.test(qr.text)||(xr=Cr?.querySelector('track[label="thumbnails"]'))==null?void 0:xr.src,Qr=new URL(qr.text,zr);kr=new URLSearchParams(Qr.hash).get("#xywh").split(",").map(hn=>+hn),Rr=Qr.href}}const Dr=mr.mediaDuration.get(hr);let Hr=(Er=mr.mediaChaptersCues.get(hr).find((Gr,qr,zr)=>qr===zr.length-1&&Dr===Gr.endTime?Gr.startTime<=wr&&Gr.endTime>=wr:Gr.startTime<=wr&&Gr.endTime>wr))==null?void 0:Er.text;return gr!=null&&Hr==null&&(Hr=""),{mediaPreviewTime:wr,mediaPreviewImage:Rr,mediaPreviewCoords:kr,mediaPreviewChapter:Hr}},[MediaUIEvents.MEDIA_PAUSE_REQUEST](mr,hr){mr["mediaPaused"].set(!0,hr)},[MediaUIEvents.MEDIA_PLAY_REQUEST](mr,hr){var gr;const vr="mediaPaused";if(mr.mediaStreamType.get(hr)===StreamTypes.LIVE){const Cr=!(mr.mediaTargetLiveWindow.get(hr)>0),wr=(gr=mr.mediaSeekable.get(hr))==null?void 0:gr[1];Cr&&wr&&mr.mediaCurrentTime.set(wr,hr)}mr[vr].set(!1,hr)},[MediaUIEvents.MEDIA_PLAYBACK_RATE_REQUEST](mr,hr,{detail:gr}){const vr="mediaPlaybackRate",xr=gr;mr[vr].set(xr,hr)},[MediaUIEvents.MEDIA_MUTE_REQUEST](mr,hr){mr["mediaMuted"].set(!0,hr)},[MediaUIEvents.MEDIA_UNMUTE_REQUEST](mr,hr){const gr="mediaMuted";mr.mediaVolume.get(hr)||mr.mediaVolume.set(.25,hr),mr[gr].set(!1,hr)},[MediaUIEvents.MEDIA_VOLUME_REQUEST](mr,hr,{detail:gr}){const vr="mediaVolume",xr=gr;xr&&mr.mediaMuted.get(hr)&&mr.mediaMuted.set(!1,hr),mr[vr].set(xr,hr)},[MediaUIEvents.MEDIA_SEEK_REQUEST](mr,hr,{detail:gr}){const vr="mediaCurrentTime",xr=gr;mr[vr].set(xr,hr)},[MediaUIEvents.MEDIA_SEEK_TO_LIVE_REQUEST](mr,hr){var gr;const vr="mediaCurrentTime",xr=(gr=mr.mediaSeekable.get(hr))==null?void 0:gr[1];Number.isNaN(Number(xr))||mr[vr].set(xr,hr)},[MediaUIEvents.MEDIA_SHOW_SUBTITLES_REQUEST](mr,hr,{detail:gr}){var vr;const{options:xr}=hr,Er=getSubtitleTracks(hr),Cr=parseTracks(gr),wr=(vr=Cr[0])==null?void 0:vr.language;wr&&!xr.noSubtitlesLangPref&&GlobalThis.localStorage.setItem("media-chrome-pref-subtitles-lang",wr),updateTracksModeTo(TextTrackModes.SHOWING,Er,Cr)},[MediaUIEvents.MEDIA_DISABLE_SUBTITLES_REQUEST](mr,hr,{detail:gr}){const vr=getSubtitleTracks(hr),xr=gr??[];updateTracksModeTo(TextTrackModes.DISABLED,vr,xr)},[MediaUIEvents.MEDIA_TOGGLE_SUBTITLES_REQUEST](mr,hr,{detail:gr}){toggleSubtitleTracks(hr,gr)},[MediaUIEvents.MEDIA_RENDITION_REQUEST](mr,hr,{detail:gr}){const vr="mediaRenditionSelected",xr=gr;mr[vr].set(xr,hr)},[MediaUIEvents.MEDIA_AUDIO_TRACK_REQUEST](mr,hr,{detail:gr}){const vr="mediaAudioTrackEnabled",xr=gr;mr[vr].set(xr,hr)},[MediaUIEvents.MEDIA_ENTER_PIP_REQUEST](mr,hr){const gr="mediaIsPip";mr.mediaIsFullscreen.get(hr)&&mr.mediaIsFullscreen.set(!1,hr),mr[gr].set(!0,hr)},[MediaUIEvents.MEDIA_EXIT_PIP_REQUEST](mr,hr){mr["mediaIsPip"].set(!1,hr)},[MediaUIEvents.MEDIA_ENTER_FULLSCREEN_REQUEST](mr,hr){const gr="mediaIsFullscreen";mr.mediaIsPip.get(hr)&&mr.mediaIsPip.set(!1,hr),mr[gr].set(!0,hr)},[MediaUIEvents.MEDIA_EXIT_FULLSCREEN_REQUEST](mr,hr){mr["mediaIsFullscreen"].set(!1,hr)},[MediaUIEvents.MEDIA_ENTER_CAST_REQUEST](mr,hr){const gr="mediaIsCasting";mr.mediaIsFullscreen.get(hr)&&mr.mediaIsFullscreen.set(!1,hr),mr[gr].set(!0,hr)},[MediaUIEvents.MEDIA_EXIT_CAST_REQUEST](mr,hr){mr["mediaIsCasting"].set(!1,hr)},[MediaUIEvents.MEDIA_AIRPLAY_REQUEST](mr,hr){mr["mediaIsAirplaying"].set(!0,hr)}},createMediaStore=({media:mr,fullscreenElement:hr,documentElement:gr,stateMediator:vr=stateMediator,requestMap:xr=requestMap,options:Er={},monitorStateOwnersOnlyWithSubscriptions:Cr=!0})=>{const wr=[],Rr={options:{...Er}};let kr=Object.freeze({mediaPreviewTime:void 0,mediaPreviewImage:void 0,mediaPreviewCoords:void 0,mediaPreviewChapter:void 0});const Dr=zr=>{zr!=null&&(areValuesEq(zr,kr)||(kr=Object.freeze({...kr,...zr}),wr.forEach(Qr=>Qr(kr))))},Br=()=>{const zr=Object.entries(vr).reduce((Qr,[sn,{get:hn}])=>(Qr[sn]=hn(Rr),Qr),{});Dr(zr)},Hr={};let Gr;const qr=async(zr,Qr)=>{var sn,hn,vn,yn,gn,bn,xn,$n,Sn,Cn,Rn,Bn,Fn,Hn,Gn,qn;const On=!!Gr;if(Gr={...Rr,...Gr??{},...zr},On)return;await prepareStateOwners(...Object.values(zr));const wn=wr.length>0&&Qr===0&&Cr,_n=Rr.media!==Gr.media,Tn=((sn=Rr.media)==null?void 0:sn.textTracks)!==((hn=Gr.media)==null?void 0:hn.textTracks),Mn=((vn=Rr.media)==null?void 0:vn.videoRenditions)!==((yn=Gr.media)==null?void 0:yn.videoRenditions),Ln=((gn=Rr.media)==null?void 0:gn.audioTracks)!==((bn=Gr.media)==null?void 0:bn.audioTracks),jn=((xn=Rr.media)==null?void 0:xn.remote)!==(($n=Gr.media)==null?void 0:$n.remote),Kn=Rr.documentElement!==Gr.documentElement,Nn=!!Rr.media&&(_n||wn),An=!!((Sn=Rr.media)!=null&&Sn.textTracks)&&(Tn||wn),kn=!!((Cn=Rr.media)!=null&&Cn.videoRenditions)&&(Mn||wn),Dn=!!((Rn=Rr.media)!=null&&Rn.audioTracks)&&(Ln||wn),Vn=!!((Bn=Rr.media)!=null&&Bn.remote)&&(jn||wn),zn=!!Rr.documentElement&&(Kn||wn),Xn=Nn||An||kn||Dn||Vn||zn,Zn=wr.length===0&&Qr===1&&Cr,Pi=!!Gr.media&&(_n||Zn),Ya=!!((Fn=Gr.media)!=null&&Fn.textTracks)&&(Tn||Zn),Bi=!!((Hn=Gr.media)!=null&&Hn.videoRenditions)&&(Mn||Zn),zi=!!((Gn=Gr.media)!=null&&Gn.audioTracks)&&(Ln||Zn),Xi=!!((qn=Gr.media)!=null&&qn.remote)&&(jn||Zn),Ji=!!Gr.documentElement&&(Kn||Zn),ns=Pi||Ya||Bi||zi||Xi||Ji;if(!(Xn||ns)){Object.entries(Gr).forEach(([ls,Li])=>{Rr[ls]=Li}),Br(),Gr=void 0;return}Object.entries(vr).forEach(([ls,{get:Li,mediaEvents:es=[],textTracksEvents:os=[],videoRenditionsEvents:ds=[],audioTracksEvents:Is=[],remoteEvents:ws=[],rootEvents:Ns=[],stateOwnersUpdateHandlers:go=[]}])=>{Hr[ls]||(Hr[ls]={});const vo=ro=>{const ts=Li(Rr,ro);Dr({[ls]:ts})};let ho;ho=Hr[ls].mediaEvents,es.forEach(ro=>{ho&&Nn&&(Rr.media.removeEventListener(ro,ho),Hr[ls].mediaEvents=void 0),Pi&&(Gr.media.addEventListener(ro,vo),Hr[ls].mediaEvents=vo)}),ho=Hr[ls].textTracksEvents,os.forEach(ro=>{var ts,Wi;ho&&An&&((ts=Rr.media.textTracks)==null||ts.removeEventListener(ro,ho),Hr[ls].textTracksEvents=void 0),Ya&&((Wi=Gr.media.textTracks)==null||Wi.addEventListener(ro,vo),Hr[ls].textTracksEvents=vo)}),ho=Hr[ls].videoRenditionsEvents,ds.forEach(ro=>{var ts,Wi;ho&&kn&&((ts=Rr.media.videoRenditions)==null||ts.removeEventListener(ro,ho),Hr[ls].videoRenditionsEvents=void 0),Bi&&((Wi=Gr.media.videoRenditions)==null||Wi.addEventListener(ro,vo),Hr[ls].videoRenditionsEvents=vo)}),ho=Hr[ls].audioTracksEvents,Is.forEach(ro=>{var ts,Wi;ho&&Dn&&((ts=Rr.media.audioTracks)==null||ts.removeEventListener(ro,ho),Hr[ls].audioTracksEvents=void 0),zi&&((Wi=Gr.media.audioTracks)==null||Wi.addEventListener(ro,vo),Hr[ls].audioTracksEvents=vo)}),ho=Hr[ls].remoteEvents,ws.forEach(ro=>{var ts,Wi;ho&&Vn&&((ts=Rr.media.remote)==null||ts.removeEventListener(ro,ho),Hr[ls].remoteEvents=void 0),Xi&&((Wi=Gr.media.remote)==null||Wi.addEventListener(ro,vo),Hr[ls].remoteEvents=vo)}),ho=Hr[ls].rootEvents,Ns.forEach(ro=>{ho&&zn&&(Rr.documentElement.removeEventListener(ro,ho),Hr[ls].rootEvents=void 0),Ji&&(Gr.documentElement.addEventListener(ro,vo),Hr[ls].rootEvents=vo)});const al=Hr[ls].stateOwnersUpdateHandlers;go.forEach(ro=>{al&&Xn&&al(),ns&&(Hr[ls].stateOwnersUpdateHandlers=ro(vo,Gr))})}),Object.entries(Gr).forEach(([ls,Li])=>{Rr[ls]=Li}),Br(),Gr=void 0};return qr({media:mr,fullscreenElement:hr,documentElement:gr,options:Er}),{dispatch(zr){const{type:Qr,detail:sn}=zr;if(xr[Qr]){Dr(xr[Qr](vr,Rr,zr));return}Qr==="mediaelementchangerequest"?qr({media:sn}):Qr==="fullscreenelementchangerequest"?qr({fullscreenElement:sn}):Qr==="documentelementchangerequest"?qr({documentElement:sn}):Qr==="optionschangerequest"&&Object.entries(sn??{}).forEach(([hn,vn])=>{Rr.options[hn]=vn})},getState(){return kr},subscribe(zr){return qr({},wr.length+1),wr.push(zr),zr(kr),()=>{const Qr=wr.indexOf(zr);Qr>=0&&(qr({},wr.length-1),wr.splice(Qr,1))}}}};var media_store_default=createMediaStore,__accessCheck$o=(mr,hr,gr)=>{if(!hr.has(mr))throw TypeError("Cannot "+gr)},__privateGet$n=(mr,hr,gr)=>(__accessCheck$o(mr,hr,"read from private field"),gr?gr.call(mr):hr.get(mr)),__privateAdd$o=(mr,hr,gr)=>{if(hr.has(mr))throw TypeError("Cannot add the same private member more than once");hr instanceof WeakSet?hr.add(mr):hr.set(mr,gr)},__privateSet$l=(mr,hr,gr,vr)=>(__accessCheck$o(mr,hr,"write to private field"),hr.set(mr,gr),gr),__privateMethod$b=(mr,hr,gr)=>(__accessCheck$o(mr,hr,"access private method"),gr),_hotKeys,_fullscreenElement,_mediaStore,_mediaStateCallback,_mediaStoreUnsubscribe,_mediaStateEventHandler,_setupDefaultStore,setupDefaultStore_fn,_keyUpHandler,keyUpHandler_fn,_keyDownHandler,keyDownHandler_fn;const ButtonPressedKeys$1=["ArrowLeft","ArrowRight","Enter"," ","f","m","k","c"],DEFAULT_SEEK_OFFSET$2=10,Attributes$d={DEFAULT_SUBTITLES:"defaultsubtitles",DEFAULT_STREAM_TYPE:"defaultstreamtype",DEFAULT_DURATION:"defaultduration",FULLSCREEN_ELEMENT:"fullscreenelement",HOTKEYS:"hotkeys",KEYS_USED:"keysused",LIVE_EDGE_OFFSET:"liveedgeoffset",NO_AUTO_SEEK_TO_LIVE:"noautoseektolive",NO_HOTKEYS:"nohotkeys",NO_VOLUME_PREF:"novolumepref",NO_SUBTITLES_LANG_PREF:"nosubtitleslangpref",NO_DEFAULT_STORE:"nodefaultstore",KEYBOARD_FORWARD_SEEK_OFFSET:"keyboardforwardseekoffset",KEYBOARD_BACKWARD_SEEK_OFFSET:"keyboardbackwardseekoffset"};class MediaController extends MediaContainer{constructor(){super(),__privateAdd$o(this,_setupDefaultStore),__privateAdd$o(this,_keyUpHandler),__privateAdd$o(this,_keyDownHandler),this.mediaStateReceivers=[],this.associatedElementSubscriptions=new Map,__privateAdd$o(this,_hotKeys,new AttributeTokenList(this,Attributes$d.HOTKEYS)),__privateAdd$o(this,_fullscreenElement,void 0),__privateAdd$o(this,_mediaStore,void 0),__privateAdd$o(this,_mediaStateCallback,void 0),__privateAdd$o(this,_mediaStoreUnsubscribe,void 0),__privateAdd$o(this,_mediaStateEventHandler,gr=>{var vr;(vr=__privateGet$n(this,_mediaStore))==null||vr.dispatch(gr)}),this.associateElement(this);let hr={};__privateSet$l(this,_mediaStateCallback,gr=>{Object.entries(gr).forEach(([vr,xr])=>{if(vr in hr&&hr[vr]===xr)return;this.propagateMediaState(vr,xr);const Er=vr.toLowerCase(),Cr=new GlobalThis.CustomEvent(AttributeToStateChangeEventMap[Er],{composed:!0,detail:xr});this.dispatchEvent(Cr)}),hr=gr}),this.enableHotkeys()}static get observedAttributes(){return super.observedAttributes.concat(Attributes$d.NO_HOTKEYS,Attributes$d.HOTKEYS,Attributes$d.DEFAULT_STREAM_TYPE,Attributes$d.DEFAULT_SUBTITLES,Attributes$d.DEFAULT_DURATION)}get mediaStore(){return __privateGet$n(this,_mediaStore)}set mediaStore(hr){var gr,vr;if(__privateGet$n(this,_mediaStore)&&((gr=__privateGet$n(this,_mediaStoreUnsubscribe))==null||gr.call(this),__privateSet$l(this,_mediaStoreUnsubscribe,void 0)),__privateSet$l(this,_mediaStore,hr),!__privateGet$n(this,_mediaStore)&&!this.hasAttribute(Attributes$d.NO_DEFAULT_STORE)){__privateMethod$b(this,_setupDefaultStore,setupDefaultStore_fn).call(this);return}__privateSet$l(this,_mediaStoreUnsubscribe,(vr=__privateGet$n(this,_mediaStore))==null?void 0:vr.subscribe(__privateGet$n(this,_mediaStateCallback)))}get fullscreenElement(){var hr;return(hr=__privateGet$n(this,_fullscreenElement))!=null?hr:this}set fullscreenElement(hr){var gr;this.hasAttribute(Attributes$d.FULLSCREEN_ELEMENT)&&this.removeAttribute(Attributes$d.FULLSCREEN_ELEMENT),__privateSet$l(this,_fullscreenElement,hr),(gr=__privateGet$n(this,_mediaStore))==null||gr.dispatch({type:"fullscreenelementchangerequest",detail:this.fullscreenElement})}attributeChangedCallback(hr,gr,vr){var xr,Er,Cr,wr,Rr,kr;if(super.attributeChangedCallback(hr,gr,vr),hr===Attributes$d.NO_HOTKEYS)vr!==gr&&vr===""?(this.hasAttribute(Attributes$d.HOTKEYS)&&console.warn("Media Chrome: Both `hotkeys` and `nohotkeys` have been set. All hotkeys will be disabled."),this.disableHotkeys()):vr!==gr&&vr===null&&this.enableHotkeys();else if(hr===Attributes$d.HOTKEYS)__privateGet$n(this,_hotKeys).value=vr;else if(hr===Attributes$d.DEFAULT_SUBTITLES&&vr!==gr)(xr=__privateGet$n(this,_mediaStore))==null||xr.dispatch({type:"optionschangerequest",detail:{defaultSubtitles:this.hasAttribute(Attributes$d.DEFAULT_SUBTITLES)}});else if(hr===Attributes$d.DEFAULT_STREAM_TYPE)(Cr=__privateGet$n(this,_mediaStore))==null||Cr.dispatch({type:"optionschangerequest",detail:{defaultStreamType:(Er=this.getAttribute(Attributes$d.DEFAULT_STREAM_TYPE))!=null?Er:void 0}});else if(hr===Attributes$d.LIVE_EDGE_OFFSET)(wr=__privateGet$n(this,_mediaStore))==null||wr.dispatch({type:"optionschangerequest",detail:{liveEdgeOffset:this.hasAttribute(Attributes$d.LIVE_EDGE_OFFSET)?+this.getAttribute(Attributes$d.LIVE_EDGE_OFFSET):void 0}});else if(hr===Attributes$d.FULLSCREEN_ELEMENT){const Dr=vr?(Rr=this.getRootNode())==null?void 0:Rr.getElementById(vr):void 0;__privateSet$l(this,_fullscreenElement,Dr),(kr=__privateGet$n(this,_mediaStore))==null||kr.dispatch({type:"fullscreenelementchangerequest",detail:this.fullscreenElement})}}connectedCallback(){var hr,gr;!__privateGet$n(this,_mediaStore)&&!this.hasAttribute(Attributes$d.NO_DEFAULT_STORE)&&__privateMethod$b(this,_setupDefaultStore,setupDefaultStore_fn).call(this),(hr=__privateGet$n(this,_mediaStore))==null||hr.dispatch({type:"documentelementchangerequest",detail:Document$2}),super.connectedCallback(),__privateGet$n(this,_mediaStore)&&!__privateGet$n(this,_mediaStoreUnsubscribe)&&__privateSet$l(this,_mediaStoreUnsubscribe,(gr=__privateGet$n(this,_mediaStore))==null?void 0:gr.subscribe(__privateGet$n(this,_mediaStateCallback))),this.enableHotkeys()}disconnectedCallback(){var hr,gr,vr,xr;(hr=super.disconnectedCallback)==null||hr.call(this),__privateGet$n(this,_mediaStore)&&((gr=__privateGet$n(this,_mediaStore))==null||gr.dispatch({type:"documentelementchangerequest",detail:void 0}),(vr=__privateGet$n(this,_mediaStore))==null||vr.dispatch({type:MediaUIEvents.MEDIA_TOGGLE_SUBTITLES_REQUEST,detail:!1})),__privateGet$n(this,_mediaStoreUnsubscribe)&&((xr=__privateGet$n(this,_mediaStoreUnsubscribe))==null||xr.call(this),__privateSet$l(this,_mediaStoreUnsubscribe,void 0))}mediaSetCallback(hr){var gr;super.mediaSetCallback(hr),(gr=__privateGet$n(this,_mediaStore))==null||gr.dispatch({type:"mediaelementchangerequest",detail:hr}),hr.hasAttribute("tabindex")||(hr.tabIndex=-1)}mediaUnsetCallback(hr){var gr;super.mediaUnsetCallback(hr),(gr=__privateGet$n(this,_mediaStore))==null||gr.dispatch({type:"mediaelementchangerequest",detail:void 0})}propagateMediaState(hr,gr){propagateMediaState(this.mediaStateReceivers,hr,gr)}associateElement(hr){if(!hr)return;const{associatedElementSubscriptions:gr}=this;if(gr.has(hr))return;const vr=this.registerMediaStateReceiver.bind(this),xr=this.unregisterMediaStateReceiver.bind(this),Er=monitorForMediaStateReceivers(hr,vr,xr);Object.values(MediaUIEvents).forEach(Cr=>{hr.addEventListener(Cr,__privateGet$n(this,_mediaStateEventHandler))}),gr.set(hr,Er)}unassociateElement(hr){if(!hr)return;const{associatedElementSubscriptions:gr}=this;if(!gr.has(hr))return;gr.get(hr)(),gr.delete(hr),Object.values(MediaUIEvents).forEach(xr=>{hr.removeEventListener(xr,__privateGet$n(this,_mediaStateEventHandler))})}registerMediaStateReceiver(hr){if(!hr)return;const gr=this.mediaStateReceivers;gr.indexOf(hr)>-1||(gr.push(hr),__privateGet$n(this,_mediaStore)&&Object.entries(__privateGet$n(this,_mediaStore).getState()).forEach(([xr,Er])=>{propagateMediaState([hr],xr,Er)}))}unregisterMediaStateReceiver(hr){const gr=this.mediaStateReceivers,vr=gr.indexOf(hr);vr<0||gr.splice(vr,1)}enableHotkeys(){this.addEventListener("keydown",__privateMethod$b(this,_keyDownHandler,keyDownHandler_fn))}disableHotkeys(){this.removeEventListener("keydown",__privateMethod$b(this,_keyDownHandler,keyDownHandler_fn)),this.removeEventListener("keyup",__privateMethod$b(this,_keyUpHandler,keyUpHandler_fn))}get hotkeys(){return __privateGet$n(this,_hotKeys)}keyboardShortcutHandler(hr){var gr,vr,xr,Er,Cr;const wr=hr.target;if(((xr=(vr=(gr=wr.getAttribute(Attributes$d.KEYS_USED))==null?void 0:gr.split(" "))!=null?vr:wr?.keysUsed)!=null?xr:[]).map(Hr=>Hr==="Space"?" ":Hr).filter(Boolean).includes(hr.key))return;let kr,Dr,Br;if(!__privateGet$n(this,_hotKeys).contains(`no${hr.key.toLowerCase()}`)&&!(hr.key===" "&&__privateGet$n(this,_hotKeys).contains("nospace")))switch(hr.key){case" ":case"k":kr=__privateGet$n(this,_mediaStore).getState().mediaPaused?MediaUIEvents.MEDIA_PLAY_REQUEST:MediaUIEvents.MEDIA_PAUSE_REQUEST,this.dispatchEvent(new GlobalThis.CustomEvent(kr,{composed:!0,bubbles:!0}));break;case"m":kr=this.mediaStore.getState().mediaVolumeLevel==="off"?MediaUIEvents.MEDIA_UNMUTE_REQUEST:MediaUIEvents.MEDIA_MUTE_REQUEST,this.dispatchEvent(new GlobalThis.CustomEvent(kr,{composed:!0,bubbles:!0}));break;case"f":kr=this.mediaStore.getState().mediaIsFullscreen?MediaUIEvents.MEDIA_EXIT_FULLSCREEN_REQUEST:MediaUIEvents.MEDIA_ENTER_FULLSCREEN_REQUEST,this.dispatchEvent(new GlobalThis.CustomEvent(kr,{composed:!0,bubbles:!0}));break;case"c":this.dispatchEvent(new GlobalThis.CustomEvent(MediaUIEvents.MEDIA_TOGGLE_SUBTITLES_REQUEST,{composed:!0,bubbles:!0}));break;case"ArrowLeft":{const Hr=this.hasAttribute(Attributes$d.KEYBOARD_BACKWARD_SEEK_OFFSET)?+this.getAttribute(Attributes$d.KEYBOARD_BACKWARD_SEEK_OFFSET):DEFAULT_SEEK_OFFSET$2;Dr=Math.max(((Er=this.mediaStore.getState().mediaCurrentTime)!=null?Er:0)-Hr,0),Br=new GlobalThis.CustomEvent(MediaUIEvents.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:Dr}),this.dispatchEvent(Br);break}case"ArrowRight":{const Hr=this.hasAttribute(Attributes$d.KEYBOARD_FORWARD_SEEK_OFFSET)?+this.getAttribute(Attributes$d.KEYBOARD_FORWARD_SEEK_OFFSET):DEFAULT_SEEK_OFFSET$2;Dr=Math.max(((Cr=this.mediaStore.getState().mediaCurrentTime)!=null?Cr:0)+Hr,0),Br=new GlobalThis.CustomEvent(MediaUIEvents.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:Dr}),this.dispatchEvent(Br);break}}}}_hotKeys=new WeakMap;_fullscreenElement=new WeakMap;_mediaStore=new WeakMap;_mediaStateCallback=new WeakMap;_mediaStoreUnsubscribe=new WeakMap;_mediaStateEventHandler=new WeakMap;_setupDefaultStore=new WeakSet;setupDefaultStore_fn=function(){var mr;this.mediaStore=media_store_default({media:this.media,fullscreenElement:this.fullscreenElement,options:{defaultSubtitles:this.hasAttribute(Attributes$d.DEFAULT_SUBTITLES),defaultDuration:this.hasAttribute(Attributes$d.DEFAULT_DURATION)?+this.getAttribute(Attributes$d.DEFAULT_DURATION):void 0,defaultStreamType:(mr=this.getAttribute(Attributes$d.DEFAULT_STREAM_TYPE))!=null?mr:void 0,liveEdgeOffset:this.hasAttribute(Attributes$d.LIVE_EDGE_OFFSET)?+this.getAttribute(Attributes$d.LIVE_EDGE_OFFSET):void 0,noVolumePref:this.hasAttribute(Attributes$d.NO_VOLUME_PREF),noSubtitlesLangPref:this.hasAttribute(Attributes$d.NO_SUBTITLES_LANG_PREF)}})};_keyUpHandler=new WeakSet;keyUpHandler_fn=function(mr){const{key:hr}=mr;if(!ButtonPressedKeys$1.includes(hr)){this.removeEventListener("keyup",__privateMethod$b(this,_keyUpHandler,keyUpHandler_fn));return}this.keyboardShortcutHandler(mr)};_keyDownHandler=new WeakSet;keyDownHandler_fn=function(mr){const{metaKey:hr,altKey:gr,key:vr}=mr;if(hr||gr||!ButtonPressedKeys$1.includes(vr)){this.removeEventListener("keyup",__privateMethod$b(this,_keyUpHandler,keyUpHandler_fn));return}[" ","ArrowLeft","ArrowRight"].includes(vr)&&!(__privateGet$n(this,_hotKeys).contains(`no${vr.toLowerCase()}`)||vr===" "&&__privateGet$n(this,_hotKeys).contains("nospace"))&&mr.preventDefault(),this.addEventListener("keyup",__privateMethod$b(this,_keyUpHandler,keyUpHandler_fn),{once:!0})};const MEDIA_UI_ATTRIBUTE_NAMES=Object.values(MediaUIAttributes),MEDIA_UI_PROP_NAMES=Object.values(MediaUIProps),getMediaUIAttributesFrom=mr=>{var hr,gr,vr,xr;let{observedAttributes:Er}=mr.constructor;!Er&&((hr=mr.nodeName)!=null&&hr.includes("-"))&&(GlobalThis.customElements.upgrade(mr),{observedAttributes:Er}=mr.constructor);const Cr=(xr=(vr=(gr=mr?.getAttribute)==null?void 0:gr.call(mr,MediaStateReceiverAttributes.MEDIA_CHROME_ATTRIBUTES))==null?void 0:vr.split)==null?void 0:xr.call(vr,/\s+/);return Array.isArray(Er||Cr)?(Er||Cr).filter(wr=>MEDIA_UI_ATTRIBUTE_NAMES.includes(wr)):[]},hasMediaUIProps=mr=>{var hr,gr;return(hr=mr.nodeName)!=null&&hr.includes("-")&&GlobalThis.customElements.get((gr=mr.nodeName)==null?void 0:gr.toLowerCase())&&!(mr instanceof GlobalThis.customElements.get(mr.nodeName.toLowerCase()))&&GlobalThis.customElements.upgrade(mr),MEDIA_UI_PROP_NAMES.some(vr=>vr in mr)},isMediaStateReceiver=mr=>hasMediaUIProps(mr)||!!getMediaUIAttributesFrom(mr).length,serializeTuple=mr=>{var hr;return(hr=mr?.join)==null?void 0:hr.call(mr,":")},CustomAttrSerializer={[MediaUIAttributes.MEDIA_SUBTITLES_LIST]:stringifyTextTrackList,[MediaUIAttributes.MEDIA_SUBTITLES_SHOWING]:stringifyTextTrackList,[MediaUIAttributes.MEDIA_SEEKABLE]:serializeTuple,[MediaUIAttributes.MEDIA_BUFFERED]:mr=>mr?.map(serializeTuple).join(" "),[MediaUIAttributes.MEDIA_PREVIEW_COORDS]:mr=>mr?.join(" "),[MediaUIAttributes.MEDIA_RENDITION_LIST]:stringifyRenditionList,[MediaUIAttributes.MEDIA_AUDIO_TRACK_LIST]:stringifyAudioTrackList},setAttr=async(mr,hr,gr)=>{var vr,xr;if(mr.isConnected||await delay(0),typeof gr=="boolean"||gr==null)return setBooleanAttr(mr,hr,gr);if(typeof gr=="number")return setNumericAttr(mr,hr,gr);if(typeof gr=="string")return setStringAttr(mr,hr,gr);if(Array.isArray(gr)&&!gr.length)return mr.removeAttribute(hr);const Er=(xr=(vr=CustomAttrSerializer[hr])==null?void 0:vr.call(CustomAttrSerializer,gr))!=null?xr:gr;return mr.setAttribute(hr,Er)},isMediaSlotElementDescendant=mr=>{var hr;return!!((hr=mr.closest)!=null&&hr.call(mr,'*[slot="media"]'))},traverseForMediaStateReceivers=(mr,hr)=>{if(isMediaSlotElementDescendant(mr))return;const gr=(xr,Er)=>{var Cr,wr;isMediaStateReceiver(xr)&&Er(xr);const{children:Rr=[]}=xr??{},kr=(wr=(Cr=xr?.shadowRoot)==null?void 0:Cr.children)!=null?wr:[];[...Rr,...kr].forEach(Br=>traverseForMediaStateReceivers(Br,Er))},vr=mr?.nodeName.toLowerCase();if(vr.includes("-")&&!isMediaStateReceiver(mr)){GlobalThis.customElements.whenDefined(vr).then(()=>{gr(mr,hr)});return}gr(mr,hr)},propagateMediaState=(mr,hr,gr)=>{mr.forEach(vr=>{if(hr in vr){vr[hr]=gr;return}const xr=getMediaUIAttributesFrom(vr),Er=hr.toLowerCase();xr.includes(Er)&&setAttr(vr,Er,gr)})},monitorForMediaStateReceivers=(mr,hr,gr)=>{traverseForMediaStateReceivers(mr,hr);const vr=Dr=>{var Br;const Hr=(Br=Dr?.composedPath()[0])!=null?Br:Dr.target;hr(Hr)},xr=Dr=>{var Br;const Hr=(Br=Dr?.composedPath()[0])!=null?Br:Dr.target;gr(Hr)};mr.addEventListener(MediaUIEvents.REGISTER_MEDIA_STATE_RECEIVER,vr),mr.addEventListener(MediaUIEvents.UNREGISTER_MEDIA_STATE_RECEIVER,xr);const Er=Dr=>{Dr.forEach(Br=>{const{addedNodes:Hr=[],removedNodes:Gr=[],type:qr,target:zr,attributeName:Qr}=Br;qr==="childList"?(Array.prototype.forEach.call(Hr,sn=>traverseForMediaStateReceivers(sn,hr)),Array.prototype.forEach.call(Gr,sn=>traverseForMediaStateReceivers(sn,gr))):qr==="attributes"&&Qr===MediaStateReceiverAttributes.MEDIA_CHROME_ATTRIBUTES&&(isMediaStateReceiver(zr)?hr(zr):gr(zr))})};let Cr=[];const wr=Dr=>{const Br=Dr.target;Br.name!=="media"&&(Cr.forEach(Hr=>traverseForMediaStateReceivers(Hr,gr)),Cr=[...Br.assignedElements({flatten:!0})],Cr.forEach(Hr=>traverseForMediaStateReceivers(Hr,hr)))};mr.addEventListener("slotchange",wr);const Rr=new MutationObserver(Er);return Rr.observe(mr,{childList:!0,attributes:!0,subtree:!0}),()=>{traverseForMediaStateReceivers(mr,gr),mr.removeEventListener("slotchange",wr),Rr.disconnect(),mr.removeEventListener(MediaUIEvents.REGISTER_MEDIA_STATE_RECEIVER,vr),mr.removeEventListener(MediaUIEvents.UNREGISTER_MEDIA_STATE_RECEIVER,xr)}};GlobalThis.customElements.get("media-controller")||GlobalThis.customElements.define("media-controller",MediaController);var media_controller_default=MediaController,__accessCheck$n=(mr,hr,gr)=>{if(!hr.has(mr))throw TypeError("Cannot "+gr)},__privateGet$m=(mr,hr,gr)=>(__accessCheck$n(mr,hr,"read from private field"),gr?gr.call(mr):hr.get(mr)),__privateAdd$n=(mr,hr,gr)=>{if(hr.has(mr))throw TypeError("Cannot add the same private member more than once");hr instanceof WeakSet?hr.add(mr):hr.set(mr,gr)},__privateSet$k=(mr,hr,gr,vr)=>(__accessCheck$n(mr,hr,"write to private field"),hr.set(mr,gr),gr),__privateMethod$a=(mr,hr,gr)=>(__accessCheck$n(mr,hr,"access private method"),gr),_mediaController$6,_clickListener,_positionTooltip,_keyupListener,_keydownListener,_setupTooltip,setupTooltip_fn;const Attributes$c={TOOLTIP_PLACEMENT:"tooltipplacement"},template$e=Document$2.createElement("template");template$e.innerHTML=`
<style>
  :host {
    position: relative;
    font: var(--media-font,
      var(--media-font-weight, bold)
      var(--media-font-size, 14px) /
      var(--media-text-content-height, var(--media-control-height, 24px))
      var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));
    color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));
    background: var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .7)));
    padding: var(--media-button-padding, var(--media-control-padding, 10px));
    justify-content: var(--media-button-justify-content, center);
    display: inline-flex;
    align-items: center;
    vertical-align: middle;
    box-sizing: border-box;
    transition: background .15s linear;
    pointer-events: auto;
    cursor: pointer;
    -webkit-tap-highlight-color: transparent;
  }

  
  :host(:focus-visible) {
    box-shadow: inset 0 0 0 2px rgb(27 127 204 / .9);
    outline: 0;
  }
  
  :host(:where(:focus)) {
    box-shadow: none;
    outline: 0;
  }

  :host(:hover) {
    background: var(--media-control-hover-background, rgba(50 50 70 / .7));
  }

  svg, img, ::slotted(svg), ::slotted(img) {
    width: var(--media-button-icon-width);
    height: var(--media-button-icon-height, var(--media-control-height, 24px));
    transform: var(--media-button-icon-transform);
    transition: var(--media-button-icon-transition);
    fill: var(--media-icon-color, var(--media-primary-color, rgb(238 238 238)));
    vertical-align: middle;
    max-width: 100%;
    max-height: 100%;
    min-width: 100%;
  }

  media-tooltip {
    
    max-width: 0;
    overflow-x: clip;
    opacity: 0;
    transition: opacity .3s, max-width 0s 9s;
  }

  :host(:hover) media-tooltip,
  :host(:focus-visible) media-tooltip {
    max-width: 100vw;
    opacity: 1;
    transition: opacity .3s;
  }

  :host([notooltip]) slot[name="tooltip"] {
    display: none;
  }
</style>

<slot name="tooltip">
  <media-tooltip part="tooltip" aria-hidden="true">
    <slot name="tooltip-content"></slot>
  </media-tooltip>
</slot>
`;class MediaChromeButton extends GlobalThis.HTMLElement{constructor(hr={}){var gr;if(super(),__privateAdd$n(this,_setupTooltip),__privateAdd$n(this,_mediaController$6,void 0),this.preventClick=!1,this.tooltipEl=null,this.tooltipContent="",__privateAdd$n(this,_clickListener,vr=>{this.preventClick||this.handleClick(vr),setTimeout(__privateGet$m(this,_positionTooltip),0)}),__privateAdd$n(this,_positionTooltip,()=>{var vr,xr;(xr=(vr=this.tooltipEl)==null?void 0:vr.updateXOffset)==null||xr.call(vr)}),__privateAdd$n(this,_keyupListener,vr=>{const{key:xr}=vr;if(!this.keysUsed.includes(xr)){this.removeEventListener("keyup",__privateGet$m(this,_keyupListener));return}this.preventClick||this.handleClick(vr)}),__privateAdd$n(this,_keydownListener,vr=>{const{metaKey:xr,altKey:Er,key:Cr}=vr;if(xr||Er||!this.keysUsed.includes(Cr)){this.removeEventListener("keyup",__privateGet$m(this,_keyupListener));return}this.addEventListener("keyup",__privateGet$m(this,_keyupListener),{once:!0})}),!this.shadowRoot){this.attachShadow({mode:"open"});const vr=template$e.content.cloneNode(!0);this.nativeEl=vr;let xr=hr.slotTemplate;xr||(xr=Document$2.createElement("template"),xr.innerHTML=`<slot>${hr.defaultContent||""}</slot>`),hr.tooltipContent&&(vr.querySelector('slot[name="tooltip-content"]').innerHTML=(gr=hr.tooltipContent)!=null?gr:"",this.tooltipContent=hr.tooltipContent),this.nativeEl.appendChild(xr.content.cloneNode(!0)),this.shadowRoot.appendChild(vr)}this.tooltipEl=this.shadowRoot.querySelector("media-tooltip")}static get observedAttributes(){return["disabled",Attributes$c.TOOLTIP_PLACEMENT,MediaStateReceiverAttributes.MEDIA_CONTROLLER]}enable(){this.addEventListener("click",__privateGet$m(this,_clickListener)),this.addEventListener("keydown",__privateGet$m(this,_keydownListener)),this.tabIndex=0}disable(){this.removeEventListener("click",__privateGet$m(this,_clickListener)),this.removeEventListener("keydown",__privateGet$m(this,_keydownListener)),this.removeEventListener("keyup",__privateGet$m(this,_keyupListener)),this.tabIndex=-1}attributeChangedCallback(hr,gr,vr){var xr,Er,Cr,wr,Rr;hr===MediaStateReceiverAttributes.MEDIA_CONTROLLER?(gr&&((Er=(xr=__privateGet$m(this,_mediaController$6))==null?void 0:xr.unassociateElement)==null||Er.call(xr,this),__privateSet$k(this,_mediaController$6,null)),vr&&this.isConnected&&(__privateSet$k(this,_mediaController$6,(Cr=this.getRootNode())==null?void 0:Cr.getElementById(vr)),(Rr=(wr=__privateGet$m(this,_mediaController$6))==null?void 0:wr.associateElement)==null||Rr.call(wr,this))):hr==="disabled"&&vr!==gr?vr==null?this.enable():this.disable():hr===Attributes$c.TOOLTIP_PLACEMENT&&this.tooltipEl&&vr!==gr&&(this.tooltipEl.placement=vr),__privateGet$m(this,_positionTooltip).call(this)}connectedCallback(){var hr,gr,vr;const{style:xr}=getOrInsertCSSRule(this.shadowRoot,":host");xr.setProperty("display",`var(--media-control-display, var(--${this.localName}-display, inline-flex))`),this.hasAttribute("disabled")||this.enable(),this.setAttribute("role","button");const Er=this.getAttribute(MediaStateReceiverAttributes.MEDIA_CONTROLLER);Er&&(__privateSet$k(this,_mediaController$6,(hr=this.getRootNode())==null?void 0:hr.getElementById(Er)),(vr=(gr=__privateGet$m(this,_mediaController$6))==null?void 0:gr.associateElement)==null||vr.call(gr,this)),GlobalThis.customElements.whenDefined("media-tooltip").then(()=>__privateMethod$a(this,_setupTooltip,setupTooltip_fn).call(this))}disconnectedCallback(){var hr,gr;this.disable(),(gr=(hr=__privateGet$m(this,_mediaController$6))==null?void 0:hr.unassociateElement)==null||gr.call(hr,this),__privateSet$k(this,_mediaController$6,null),this.removeEventListener("mouseenter",__privateGet$m(this,_positionTooltip)),this.removeEventListener("focus",__privateGet$m(this,_positionTooltip)),this.removeEventListener("click",__privateGet$m(this,_clickListener))}get keysUsed(){return["Enter"," "]}get tooltipPlacement(){return getStringAttr(this,Attributes$c.TOOLTIP_PLACEMENT)}set tooltipPlacement(hr){setStringAttr(this,Attributes$c.TOOLTIP_PLACEMENT,hr)}handleClick(hr){}}_mediaController$6=new WeakMap;_clickListener=new WeakMap;_positionTooltip=new WeakMap;_keyupListener=new WeakMap;_keydownListener=new WeakMap;_setupTooltip=new WeakSet;setupTooltip_fn=function(){this.addEventListener("mouseenter",__privateGet$m(this,_positionTooltip)),this.addEventListener("focus",__privateGet$m(this,_positionTooltip)),this.addEventListener("click",__privateGet$m(this,_clickListener));const mr=this.tooltipPlacement;mr&&this.tooltipEl&&(this.tooltipEl.placement=mr)};GlobalThis.customElements.get("media-chrome-button")||GlobalThis.customElements.define("media-chrome-button",MediaChromeButton);const airplayIcon=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M22.13 3H3.87a.87.87 0 0 0-.87.87v13.26a.87.87 0 0 0 .87.87h3.4L9 16H5V5h16v11h-4l1.72 2h3.4a.87.87 0 0 0 .87-.87V3.87a.87.87 0 0 0-.86-.87Zm-8.75 11.44a.5.5 0 0 0-.76 0l-4.91 5.73a.5.5 0 0 0 .38.83h9.82a.501.501 0 0 0 .38-.83l-4.91-5.73Z"/>
</svg>
`,slotTemplate$f=Document$2.createElement("template");slotTemplate$f.innerHTML=`
  <style>
    :host([${MediaUIAttributes.MEDIA_IS_AIRPLAYING}]) slot[name=icon] slot:not([name=exit]) {
      display: none !important;
    }

    
    :host(:not([${MediaUIAttributes.MEDIA_IS_AIRPLAYING}])) slot[name=icon] slot:not([name=enter]) {
      display: none !important;
    }

    :host([${MediaUIAttributes.MEDIA_IS_AIRPLAYING}]) slot[name=tooltip-enter],
    :host(:not([${MediaUIAttributes.MEDIA_IS_AIRPLAYING}])) slot[name=tooltip-exit] {
      display: none;
    }
  </style>

  <slot name="icon">
    <slot name="enter">${airplayIcon}</slot>
    <slot name="exit">${airplayIcon}</slot>
  </slot>
`;const tooltipContent$6=`
  <slot name="tooltip-enter">${tooltipLabels.ENTER_AIRPLAY}</slot>
  <slot name="tooltip-exit">${tooltipLabels.EXIT_AIRPLAY}</slot>
`,updateAriaLabel$5=mr=>{const hr=mr.mediaIsAirplaying?verbs.EXIT_AIRPLAY():verbs.ENTER_AIRPLAY();mr.setAttribute("aria-label",hr)};class MediaAirplayButton extends MediaChromeButton{static get observedAttributes(){return[...super.observedAttributes,MediaUIAttributes.MEDIA_IS_AIRPLAYING,MediaUIAttributes.MEDIA_AIRPLAY_UNAVAILABLE]}constructor(hr={}){super({slotTemplate:slotTemplate$f,tooltipContent:tooltipContent$6,...hr})}connectedCallback(){super.connectedCallback(),updateAriaLabel$5(this)}attributeChangedCallback(hr,gr,vr){super.attributeChangedCallback(hr,gr,vr),hr===MediaUIAttributes.MEDIA_IS_AIRPLAYING&&updateAriaLabel$5(this)}get mediaIsAirplaying(){return getBooleanAttr(this,MediaUIAttributes.MEDIA_IS_AIRPLAYING)}set mediaIsAirplaying(hr){setBooleanAttr(this,MediaUIAttributes.MEDIA_IS_AIRPLAYING,hr)}get mediaAirplayUnavailable(){return getStringAttr(this,MediaUIAttributes.MEDIA_AIRPLAY_UNAVAILABLE)}set mediaAirplayUnavailable(hr){setStringAttr(this,MediaUIAttributes.MEDIA_AIRPLAY_UNAVAILABLE,hr)}handleClick(){const hr=new GlobalThis.CustomEvent(MediaUIEvents.MEDIA_AIRPLAY_REQUEST,{composed:!0,bubbles:!0});this.dispatchEvent(hr)}}GlobalThis.customElements.get("media-airplay-button")||GlobalThis.customElements.define("media-airplay-button",MediaAirplayButton);const ccIconOn$1=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M22.83 5.68a2.58 2.58 0 0 0-2.3-2.5c-3.62-.24-11.44-.24-15.06 0a2.58 2.58 0 0 0-2.3 2.5c-.23 4.21-.23 8.43 0 12.64a2.58 2.58 0 0 0 2.3 2.5c3.62.24 11.44.24 15.06 0a2.58 2.58 0 0 0 2.3-2.5c.23-4.21.23-8.43 0-12.64Zm-11.39 9.45a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.92 3.92 0 0 1 .92-2.77 3.18 3.18 0 0 1 2.43-1 2.94 2.94 0 0 1 2.13.78c.364.359.62.813.74 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.17 1.61 1.61 0 0 0-1.29.58 2.79 2.79 0 0 0-.5 1.89 3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.48 1.48 0 0 0 1-.37 2.1 2.1 0 0 0 .59-1.14l1.4.44a3.23 3.23 0 0 1-1.07 1.69Zm7.22 0a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.88 3.88 0 0 1 .93-2.77 3.14 3.14 0 0 1 2.42-1 3 3 0 0 1 2.16.82 2.8 2.8 0 0 1 .73 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.21 1.61 1.61 0 0 0-1.29.58A2.79 2.79 0 0 0 15 12a3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.44 1.44 0 0 0 1-.37 2.1 2.1 0 0 0 .6-1.15l1.4.44a3.17 3.17 0 0 1-1.1 1.7Z"/>
</svg>`,ccIconOff$1=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M17.73 14.09a1.4 1.4 0 0 1-1 .37 1.579 1.579 0 0 1-1.27-.58A3 3 0 0 1 15 12a2.8 2.8 0 0 1 .5-1.85 1.63 1.63 0 0 1 1.29-.57 1.47 1.47 0 0 1 1.51 1.2l1.43-.34A2.89 2.89 0 0 0 19 9.07a3 3 0 0 0-2.14-.78 3.14 3.14 0 0 0-2.42 1 3.91 3.91 0 0 0-.93 2.78 3.74 3.74 0 0 0 .92 2.66 3.07 3.07 0 0 0 2.34 1 3.07 3.07 0 0 0 1.91-.57 3.17 3.17 0 0 0 1.07-1.74l-1.4-.45c-.083.43-.3.822-.62 1.12Zm-7.22 0a1.43 1.43 0 0 1-1 .37 1.58 1.58 0 0 1-1.27-.58A3 3 0 0 1 7.76 12a2.8 2.8 0 0 1 .5-1.85 1.63 1.63 0 0 1 1.29-.57 1.47 1.47 0 0 1 1.51 1.2l1.43-.34a2.81 2.81 0 0 0-.74-1.32 2.94 2.94 0 0 0-2.13-.78 3.18 3.18 0 0 0-2.43 1 4 4 0 0 0-.92 2.78 3.74 3.74 0 0 0 .92 2.66 3.07 3.07 0 0 0 2.34 1 3.07 3.07 0 0 0 1.91-.57 3.23 3.23 0 0 0 1.07-1.74l-1.4-.45a2.06 2.06 0 0 1-.6 1.07Zm12.32-8.41a2.59 2.59 0 0 0-2.3-2.51C18.72 3.05 15.86 3 13 3c-2.86 0-5.72.05-7.53.17a2.59 2.59 0 0 0-2.3 2.51c-.23 4.207-.23 8.423 0 12.63a2.57 2.57 0 0 0 2.3 2.5c1.81.13 4.67.19 7.53.19 2.86 0 5.72-.06 7.53-.19a2.57 2.57 0 0 0 2.3-2.5c.23-4.207.23-8.423 0-12.63Zm-1.49 12.53a1.11 1.11 0 0 1-.91 1.11c-1.67.11-4.45.18-7.43.18-2.98 0-5.76-.07-7.43-.18a1.11 1.11 0 0 1-.91-1.11c-.21-4.14-.21-8.29 0-12.43a1.11 1.11 0 0 1 .91-1.11C7.24 4.56 10 4.49 13 4.49s5.76.07 7.43.18a1.11 1.11 0 0 1 .91 1.11c.21 4.14.21 8.29 0 12.43Z"/>
</svg>`,slotTemplate$e=Document$2.createElement("template");slotTemplate$e.innerHTML=`
  <style>
    :host([aria-checked="true"]) slot[name=off] {
      display: none !important;
    }

    
    :host(:not([aria-checked="true"])) slot[name=on] {
      display: none !important;
    }

    :host([aria-checked="true"]) slot[name=tooltip-enable],
    :host(:not([aria-checked="true"])) slot[name=tooltip-disable] {
      display: none;
    }
  </style>

  <slot name="icon">
    <slot name="on">${ccIconOn$1}</slot>
    <slot name="off">${ccIconOff$1}</slot>
  </slot>
`;const tooltipContent$5=`
  <slot name="tooltip-enable">${tooltipLabels.ENABLE_CAPTIONS}</slot>
  <slot name="tooltip-disable">${tooltipLabels.DISABLE_CAPTIONS}</slot>
`,updateAriaChecked$1=mr=>{mr.setAttribute("aria-checked",areSubsOn(mr).toString())};class MediaCaptionsButton extends MediaChromeButton{static get observedAttributes(){return[...super.observedAttributes,MediaUIAttributes.MEDIA_SUBTITLES_LIST,MediaUIAttributes.MEDIA_SUBTITLES_SHOWING]}constructor(hr={}){super({slotTemplate:slotTemplate$e,tooltipContent:tooltipContent$5,...hr}),this._captionsReady=!1}connectedCallback(){super.connectedCallback(),this.setAttribute("role","switch"),this.setAttribute("aria-label",nouns.CLOSED_CAPTIONS()),updateAriaChecked$1(this)}attributeChangedCallback(hr,gr,vr){super.attributeChangedCallback(hr,gr,vr),hr===MediaUIAttributes.MEDIA_SUBTITLES_SHOWING&&updateAriaChecked$1(this)}get mediaSubtitlesList(){return getSubtitlesListAttr$2(this,MediaUIAttributes.MEDIA_SUBTITLES_LIST)}set mediaSubtitlesList(hr){setSubtitlesListAttr$2(this,MediaUIAttributes.MEDIA_SUBTITLES_LIST,hr)}get mediaSubtitlesShowing(){return getSubtitlesListAttr$2(this,MediaUIAttributes.MEDIA_SUBTITLES_SHOWING)}set mediaSubtitlesShowing(hr){setSubtitlesListAttr$2(this,MediaUIAttributes.MEDIA_SUBTITLES_SHOWING,hr)}handleClick(){this.dispatchEvent(new GlobalThis.CustomEvent(MediaUIEvents.MEDIA_TOGGLE_SUBTITLES_REQUEST,{composed:!0,bubbles:!0}))}}const getSubtitlesListAttr$2=(mr,hr)=>{const gr=mr.getAttribute(hr);return gr?parseTextTracksStr(gr):[]},setSubtitlesListAttr$2=(mr,hr,gr)=>{if(!gr?.length){mr.removeAttribute(hr);return}const vr=stringifyTextTrackList(gr);mr.getAttribute(hr)!==vr&&mr.setAttribute(hr,vr)};GlobalThis.customElements.get("media-captions-button")||GlobalThis.customElements.define("media-captions-button",MediaCaptionsButton);const enterIcon='<svg aria-hidden="true" viewBox="0 0 24 24"><g><path class="cast_caf_icon_arch0" d="M1,18 L1,21 L4,21 C4,19.3 2.66,18 1,18 L1,18 Z"/><path class="cast_caf_icon_arch1" d="M1,14 L1,16 C3.76,16 6,18.2 6,21 L8,21 C8,17.13 4.87,14 1,14 L1,14 Z"/><path class="cast_caf_icon_arch2" d="M1,10 L1,12 C5.97,12 10,16.0 10,21 L12,21 C12,14.92 7.07,10 1,10 L1,10 Z"/><path class="cast_caf_icon_box" d="M21,3 L3,3 C1.9,3 1,3.9 1,5 L1,8 L3,8 L3,5 L21,5 L21,19 L14,19 L14,21 L21,21 C22.1,21 23,20.1 23,19 L23,5 C23,3.9 22.1,3 21,3 L21,3 Z"/></g></svg>',exitIcon='<svg aria-hidden="true" viewBox="0 0 24 24"><g><path class="cast_caf_icon_arch0" d="M1,18 L1,21 L4,21 C4,19.3 2.66,18 1,18 L1,18 Z"/><path class="cast_caf_icon_arch1" d="M1,14 L1,16 C3.76,16 6,18.2 6,21 L8,21 C8,17.13 4.87,14 1,14 L1,14 Z"/><path class="cast_caf_icon_arch2" d="M1,10 L1,12 C5.97,12 10,16.0 10,21 L12,21 C12,14.92 7.07,10 1,10 L1,10 Z"/><path class="cast_caf_icon_box" d="M21,3 L3,3 C1.9,3 1,3.9 1,5 L1,8 L3,8 L3,5 L21,5 L21,19 L14,19 L14,21 L21,21 C22.1,21 23,20.1 23,19 L23,5 C23,3.9 22.1,3 21,3 L21,3 Z"/><path class="cast_caf_icon_boxfill" d="M5,7 L5,8.63 C8,8.6 13.37,14 13.37,17 L19,17 L19,7 Z"/></g></svg>',slotTemplate$d=Document$2.createElement("template");slotTemplate$d.innerHTML=`
  <style>
  :host([${MediaUIAttributes.MEDIA_IS_CASTING}]) slot[name=icon] slot:not([name=exit]) {
    display: none !important;
  }

  
  :host(:not([${MediaUIAttributes.MEDIA_IS_CASTING}])) slot[name=icon] slot:not([name=enter]) {
    display: none !important;
  }

  :host([${MediaUIAttributes.MEDIA_IS_CASTING}]) slot[name=tooltip-enter],
    :host(:not([${MediaUIAttributes.MEDIA_IS_CASTING}])) slot[name=tooltip-exit] {
      display: none;
    }
  </style>

  <slot name="icon">
    <slot name="enter">${enterIcon}</slot>
    <slot name="exit">${exitIcon}</slot>
  </slot>
`;const tooltipContent$4=`
  <slot name="tooltip-enter">${tooltipLabels.START_CAST}</slot>
  <slot name="tooltip-exit">${tooltipLabels.STOP_CAST}</slot>
`,updateAriaLabel$4=mr=>{const hr=mr.mediaIsCasting?verbs.EXIT_CAST():verbs.ENTER_CAST();mr.setAttribute("aria-label",hr)};class MediaCastButton extends MediaChromeButton{static get observedAttributes(){return[...super.observedAttributes,MediaUIAttributes.MEDIA_IS_CASTING,MediaUIAttributes.MEDIA_CAST_UNAVAILABLE]}constructor(hr={}){super({slotTemplate:slotTemplate$d,tooltipContent:tooltipContent$4,...hr})}connectedCallback(){super.connectedCallback(),updateAriaLabel$4(this)}attributeChangedCallback(hr,gr,vr){super.attributeChangedCallback(hr,gr,vr),hr===MediaUIAttributes.MEDIA_IS_CASTING&&updateAriaLabel$4(this)}get mediaIsCasting(){return getBooleanAttr(this,MediaUIAttributes.MEDIA_IS_CASTING)}set mediaIsCasting(hr){setBooleanAttr(this,MediaUIAttributes.MEDIA_IS_CASTING,hr)}get mediaCastUnavailable(){return getStringAttr(this,MediaUIAttributes.MEDIA_CAST_UNAVAILABLE)}set mediaCastUnavailable(hr){setStringAttr(this,MediaUIAttributes.MEDIA_CAST_UNAVAILABLE,hr)}handleClick(){const hr=this.mediaIsCasting?MediaUIEvents.MEDIA_EXIT_CAST_REQUEST:MediaUIEvents.MEDIA_ENTER_CAST_REQUEST;this.dispatchEvent(new GlobalThis.CustomEvent(hr,{composed:!0,bubbles:!0}))}}GlobalThis.customElements.get("media-cast-button")||GlobalThis.customElements.define("media-cast-button",MediaCastButton);var __accessCheck$m=(mr,hr,gr)=>{if(!hr.has(mr))throw TypeError("Cannot "+gr)},__privateGet$l=(mr,hr,gr)=>(__accessCheck$m(mr,hr,"read from private field"),gr?gr.call(mr):hr.get(mr)),__privateAdd$m=(mr,hr,gr)=>{if(hr.has(mr))throw TypeError("Cannot add the same private member more than once");hr instanceof WeakSet?hr.add(mr):hr.set(mr,gr)},__privateSet$j=(mr,hr,gr,vr)=>(__accessCheck$m(mr,hr,"write to private field"),hr.set(mr,gr),gr),__privateMethod$9=(mr,hr,gr)=>(__accessCheck$m(mr,hr,"access private method"),gr),_previouslyFocused$1,_invokerElement$1,_handleOpen$1,handleOpen_fn$1,_handleClosed$1,handleClosed_fn$1,_handleInvoke$1,handleInvoke_fn$1,_handleFocusOut$1,handleFocusOut_fn$1,_handleKeyDown$2,handleKeyDown_fn$2;const template$d=Document$2.createElement("template");template$d.innerHTML=`
  <style>
    :host {
      font: var(--media-font,
        var(--media-font-weight, normal)
        var(--media-font-size, 14px) /
        var(--media-text-content-height, var(--media-control-height, 24px))
        var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));
      color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));
      background: var(--media-dialog-background, var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .8))));
      border-radius: var(--media-dialog-border-radius);
      border: var(--media-dialog-border, none);
      display: var(--media-dialog-display, inline-flex);
      transition: var(--media-dialog-transition-in,
        visibility 0s,
        opacity .2s ease-out,
        transform .15s ease-out
      ) !important;
      
      visibility: var(--media-dialog-visibility, visible);
      opacity: var(--media-dialog-opacity, 1);
      transform: var(--media-dialog-transform-in, translateY(0) scale(1));
    }

    :host([hidden]) {
      transition: var(--media-dialog-transition-out,
        visibility .15s ease-in,
        opacity .15s ease-in,
        transform .15s ease-in
      ) !important;
      visibility: var(--media-dialog-hidden-visibility, hidden);
      opacity: var(--media-dialog-hidden-opacity, 0);
      transform: var(--media-dialog-transform-out, translateY(2px) scale(.99));
      pointer-events: none;
    }
  </style>
  <slot></slot>
`;const Attributes$b={HIDDEN:"hidden",ANCHOR:"anchor"};class MediaChromeDialog extends GlobalThis.HTMLElement{constructor(){super(),__privateAdd$m(this,_handleOpen$1),__privateAdd$m(this,_handleClosed$1),__privateAdd$m(this,_handleInvoke$1),__privateAdd$m(this,_handleFocusOut$1),__privateAdd$m(this,_handleKeyDown$2),__privateAdd$m(this,_previouslyFocused$1,null),__privateAdd$m(this,_invokerElement$1,null),this.shadowRoot||(this.attachShadow({mode:"open"}),this.nativeEl=this.constructor.template.content.cloneNode(!0),this.shadowRoot.append(this.nativeEl)),this.addEventListener("invoke",this),this.addEventListener("focusout",this),this.addEventListener("keydown",this)}static get observedAttributes(){return[Attributes$b.HIDDEN,Attributes$b.ANCHOR]}handleEvent(hr){switch(hr.type){case"invoke":__privateMethod$9(this,_handleInvoke$1,handleInvoke_fn$1).call(this,hr);break;case"focusout":__privateMethod$9(this,_handleFocusOut$1,handleFocusOut_fn$1).call(this,hr);break;case"keydown":__privateMethod$9(this,_handleKeyDown$2,handleKeyDown_fn$2).call(this,hr);break}}connectedCallback(){this.role||(this.role="dialog")}attributeChangedCallback(hr,gr,vr){hr===Attributes$b.HIDDEN&&vr!==gr&&(this.hidden?__privateMethod$9(this,_handleClosed$1,handleClosed_fn$1).call(this):__privateMethod$9(this,_handleOpen$1,handleOpen_fn$1).call(this))}focus(){__privateSet$j(this,_previouslyFocused$1,getActiveElement());const hr=this.querySelector('[autofocus], [tabindex]:not([tabindex="-1"]), [role="menu"]');hr?.focus()}get keysUsed(){return["Escape","Tab"]}}_previouslyFocused$1=new WeakMap;_invokerElement$1=new WeakMap;_handleOpen$1=new WeakSet;handleOpen_fn$1=function(){var mr;(mr=__privateGet$l(this,_invokerElement$1))==null||mr.setAttribute("aria-expanded","true"),this.addEventListener("transitionend",()=>this.focus(),{once:!0})};_handleClosed$1=new WeakSet;handleClosed_fn$1=function(){var mr;(mr=__privateGet$l(this,_invokerElement$1))==null||mr.setAttribute("aria-expanded","false")};_handleInvoke$1=new WeakSet;handleInvoke_fn$1=function(mr){__privateSet$j(this,_invokerElement$1,mr.relatedTarget),containsComposedNode(this,mr.relatedTarget)||(this.hidden=!this.hidden)};_handleFocusOut$1=new WeakSet;handleFocusOut_fn$1=function(mr){var hr;containsComposedNode(this,mr.relatedTarget)||((hr=__privateGet$l(this,_previouslyFocused$1))==null||hr.focus(),__privateGet$l(this,_invokerElement$1)&&__privateGet$l(this,_invokerElement$1)!==mr.relatedTarget&&!this.hidden&&(this.hidden=!0))};_handleKeyDown$2=new WeakSet;handleKeyDown_fn$2=function(mr){var hr,gr,vr,xr,Er;const{key:Cr,ctrlKey:wr,altKey:Rr,metaKey:kr}=mr;wr||Rr||kr||this.keysUsed.includes(Cr)&&(mr.preventDefault(),mr.stopPropagation(),Cr==="Tab"?(mr.shiftKey?(gr=(hr=this.previousElementSibling)==null?void 0:hr.focus)==null||gr.call(hr):(xr=(vr=this.nextElementSibling)==null?void 0:vr.focus)==null||xr.call(vr),this.blur()):Cr==="Escape"&&((Er=__privateGet$l(this,_previouslyFocused$1))==null||Er.focus(),this.hidden=!0))};MediaChromeDialog.template=template$d;GlobalThis.customElements.get("media-chrome-dialog")||GlobalThis.customElements.define("media-chrome-dialog",MediaChromeDialog);var __accessCheck$l=(mr,hr,gr)=>{if(!hr.has(mr))throw TypeError("Cannot "+gr)},__privateGet$k=(mr,hr,gr)=>(__accessCheck$l(mr,hr,"read from private field"),gr?gr.call(mr):hr.get(mr)),__privateAdd$l=(mr,hr,gr)=>{if(hr.has(mr))throw TypeError("Cannot add the same private member more than once");hr instanceof WeakSet?hr.add(mr):hr.set(mr,gr)},__privateSet$i=(mr,hr,gr,vr)=>(__accessCheck$l(mr,hr,"write to private field"),hr.set(mr,gr),gr),__privateMethod$8=(mr,hr,gr)=>(__accessCheck$l(mr,hr,"access private method"),gr),_mediaController$5,_isInputTarget,_startpoint,_endpoint,_cssRules,_segments,_onFocusIn,_onFocusOut,_updateComputedStyles,_updateActiveSegment,updateActiveSegment_fn,_enableUserEvents,enableUserEvents_fn,_disableUserEvents,disableUserEvents_fn,_handlePointerDown,handlePointerDown_fn,_handlePointerEnter,handlePointerEnter_fn,_handlePointerUp,handlePointerUp_fn,_handlePointerLeave,handlePointerLeave_fn,_handlePointerMove$1,handlePointerMove_fn$1;const template$c=Document$2.createElement("template");template$c.innerHTML=`
  <style>
    :host {
      --_focus-box-shadow: var(--media-focus-box-shadow, inset 0 0 0 2px rgb(27 127 204 / .9));
      --_media-range-padding: var(--media-range-padding, var(--media-control-padding, 10px));

      box-shadow: var(--_focus-visible-box-shadow, none);
      background: var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .7)));
      height: calc(var(--media-control-height, 24px) + 2 * var(--_media-range-padding));
      display: inline-flex;
      align-items: center;
      
      vertical-align: middle;
      box-sizing: border-box;
      position: relative;
      width: 100px;
      transition: background .15s linear;
      cursor: pointer;
      pointer-events: auto;
      touch-action: none; 
      z-index: 1; 
    }

    
    input[type=range]:focus {
      outline: 0;
    }
    input[type=range]:focus::-webkit-slider-runnable-track {
      outline: 0;
    }

    :host(:hover) {
      background: var(--media-control-hover-background, rgb(50 50 70 / .7));
    }

    #leftgap {
      padding-left: var(--media-range-padding-left, var(--_media-range-padding));
    }

    #rightgap {
      padding-right: var(--media-range-padding-right, var(--_media-range-padding));
    }

    #startpoint,
    #endpoint {
      position: absolute;
    }

    #endpoint {
      right: 0;
    }

    #container {
      
      width: var(--media-range-track-width, 100%);
      transform: translate(var(--media-range-track-translate-x, 0px), var(--media-range-track-translate-y, 0px));
      position: relative;
      height: 100%;
      display: flex;
      align-items: center;
      min-width: 40px;
    }

    #range {
      
      display: var(--media-time-range-hover-display, block);
      bottom: var(--media-time-range-hover-bottom, -7px);
      height: var(--media-time-range-hover-height, max(100% + 7px, 25px));
      width: 100%;
      position: absolute;
      cursor: pointer;

      -webkit-appearance: none; 
      -webkit-tap-highlight-color: transparent;
      background: transparent; 
      margin: 0;
      z-index: 1;
    }

    @media (hover: hover) {
      #range {
        bottom: var(--media-time-range-hover-bottom, -5px);
        height: var(--media-time-range-hover-height, max(100% + 5px, 20px));
      }
    }

    
    
    #range::-webkit-slider-thumb {
      -webkit-appearance: none;
      background: transparent;
      width: .1px;
      height: .1px;
    }

    
    #range::-moz-range-thumb {
      background: transparent;
      border: transparent;
      width: .1px;
      height: .1px;
    }

    #appearance {
      height: var(--media-range-track-height, 4px);
      display: flex;
      flex-direction: column;
      justify-content: center;
      width: 100%;
      position: absolute;
      
      will-change: transform;
    }

    #track {
      background: var(--media-range-track-background, rgb(255 255 255 / .2));
      border-radius: var(--media-range-track-border-radius, 1px);
      border: var(--media-range-track-border, none);
      outline: var(--media-range-track-outline);
      outline-offset: var(--media-range-track-outline-offset);
      backdrop-filter: var(--media-range-track-backdrop-filter);
      -webkit-backdrop-filter: var(--media-range-track-backdrop-filter);
      box-shadow: var(--media-range-track-box-shadow, none);
      position: absolute;
      width: 100%;
      height: 100%;
      overflow: hidden;
    }

    #progress,
    #pointer {
      position: absolute;
      height: 100%;
      will-change: width;
    }

    #progress {
      background: var(--media-range-bar-color, var(--media-primary-color, rgb(238 238 238)));
      transition: var(--media-range-track-transition);
    }

    #pointer {
      background: var(--media-range-track-pointer-background);
      border-right: var(--media-range-track-pointer-border-right);
      transition: visibility .25s, opacity .25s;
      visibility: hidden;
      opacity: 0;
    }

    @media (hover: hover) {
      :host(:hover) #pointer {
        transition: visibility .5s, opacity .5s;
        visibility: visible;
        opacity: 1;
      }
    }

    #thumb {
      width: var(--media-range-thumb-width, 10px);
      height: var(--media-range-thumb-height, 10px);
      margin-left: calc(var(--media-range-thumb-width, 10px) / -2);
      border: var(--media-range-thumb-border, none);
      border-radius: var(--media-range-thumb-border-radius, 10px);
      background: var(--media-range-thumb-background, var(--media-primary-color, rgb(238 238 238)));
      box-shadow: var(--media-range-thumb-box-shadow, 1px 1px 1px transparent);
      transition: var(--media-range-thumb-transition);
      transform: var(--media-range-thumb-transform, none);
      opacity: var(--media-range-thumb-opacity, 1);
      position: absolute;
      left: 0;
      cursor: pointer;
    }

    :host([disabled]) #thumb {
      background-color: #777;
    }

    .segments #appearance {
      height: var(--media-range-segment-hover-height, 7px);
    }

    #track {
      clip-path: url(#segments-clipping);
    }

    #segments {
      --segments-gap: var(--media-range-segments-gap, 2px);
      position: absolute;
      width: 100%;
      height: 100%;
    }

    #segments-clipping {
      transform: translateX(calc(var(--segments-gap) / 2));
    }

    #segments-clipping:empty {
      display: none;
    }

    #segments-clipping rect {
      height: var(--media-range-track-height, 4px);
      y: calc((var(--media-range-segment-hover-height, 7px) - var(--media-range-track-height, 4px)) / 2);
      transition: var(--media-range-segment-transition, transform .1s ease-in-out);
      transform: var(--media-range-segment-transform, scaleY(1));
      transform-origin: center;
    }
  </style>
  <div id="leftgap"></div>
  <div id="container">
    <div id="startpoint"></div>
    <div id="endpoint"></div>
    <div id="appearance">
      <div id="track" part="track">
        <div id="pointer"></div>
        <div id="progress" part="progress"></div>
      </div>
      <div id="thumb" part="thumb"></div>
      <svg id="segments"><clipPath id="segments-clipping"></clipPath></svg>
    </div>
    <input id="range" type="range" min="0" max="1" step="any" value="0">
  </div>
  <div id="rightgap"></div>
`;class MediaChromeRange extends GlobalThis.HTMLElement{constructor(){super(),__privateAdd$l(this,_updateActiveSegment),__privateAdd$l(this,_enableUserEvents),__privateAdd$l(this,_disableUserEvents),__privateAdd$l(this,_handlePointerDown),__privateAdd$l(this,_handlePointerEnter),__privateAdd$l(this,_handlePointerUp),__privateAdd$l(this,_handlePointerLeave),__privateAdd$l(this,_handlePointerMove$1),__privateAdd$l(this,_mediaController$5,void 0),__privateAdd$l(this,_isInputTarget,void 0),__privateAdd$l(this,_startpoint,void 0),__privateAdd$l(this,_endpoint,void 0),__privateAdd$l(this,_cssRules,{}),__privateAdd$l(this,_segments,[]),__privateAdd$l(this,_onFocusIn,()=>{if(this.range.matches(":focus-visible")){const{style:hr}=getOrInsertCSSRule(this.shadowRoot,":host");hr.setProperty("--_focus-visible-box-shadow","var(--_focus-box-shadow)")}}),__privateAdd$l(this,_onFocusOut,()=>{const{style:hr}=getOrInsertCSSRule(this.shadowRoot,":host");hr.removeProperty("--_focus-visible-box-shadow")}),__privateAdd$l(this,_updateComputedStyles,()=>{const hr=this.shadowRoot.querySelector("#segments-clipping");hr&&hr.parentNode.append(hr)}),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(template$c.content.cloneNode(!0))),this.container=this.shadowRoot.querySelector("#container"),__privateSet$i(this,_startpoint,this.shadowRoot.querySelector("#startpoint")),__privateSet$i(this,_endpoint,this.shadowRoot.querySelector("#endpoint")),this.range=this.shadowRoot.querySelector("#range"),this.appearance=this.shadowRoot.querySelector("#appearance")}static get observedAttributes(){return["disabled","aria-disabled",MediaStateReceiverAttributes.MEDIA_CONTROLLER]}attributeChangedCallback(hr,gr,vr){var xr,Er,Cr,wr,Rr;hr===MediaStateReceiverAttributes.MEDIA_CONTROLLER?(gr&&((Er=(xr=__privateGet$k(this,_mediaController$5))==null?void 0:xr.unassociateElement)==null||Er.call(xr,this),__privateSet$i(this,_mediaController$5,null)),vr&&this.isConnected&&(__privateSet$i(this,_mediaController$5,(Cr=this.getRootNode())==null?void 0:Cr.getElementById(vr)),(Rr=(wr=__privateGet$k(this,_mediaController$5))==null?void 0:wr.associateElement)==null||Rr.call(wr,this))):(hr==="disabled"||hr==="aria-disabled"&&gr!==vr)&&(vr==null?(this.range.removeAttribute(hr),__privateMethod$8(this,_enableUserEvents,enableUserEvents_fn).call(this)):(this.range.setAttribute(hr,vr),__privateMethod$8(this,_disableUserEvents,disableUserEvents_fn).call(this)))}connectedCallback(){var hr,gr,vr;const{style:xr}=getOrInsertCSSRule(this.shadowRoot,":host");xr.setProperty("display",`var(--media-control-display, var(--${this.localName}-display, inline-flex))`),__privateGet$k(this,_cssRules).pointer=getOrInsertCSSRule(this.shadowRoot,"#pointer"),__privateGet$k(this,_cssRules).progress=getOrInsertCSSRule(this.shadowRoot,"#progress"),__privateGet$k(this,_cssRules).thumb=getOrInsertCSSRule(this.shadowRoot,"#thumb"),__privateGet$k(this,_cssRules).activeSegment=getOrInsertCSSRule(this.shadowRoot,"#segments-clipping rect:nth-child(0)");const Er=this.getAttribute(MediaStateReceiverAttributes.MEDIA_CONTROLLER);Er&&(__privateSet$i(this,_mediaController$5,(hr=this.getRootNode())==null?void 0:hr.getElementById(Er)),(vr=(gr=__privateGet$k(this,_mediaController$5))==null?void 0:gr.associateElement)==null||vr.call(gr,this)),this.updateBar(),this.shadowRoot.addEventListener("focusin",__privateGet$k(this,_onFocusIn)),this.shadowRoot.addEventListener("focusout",__privateGet$k(this,_onFocusOut)),__privateMethod$8(this,_enableUserEvents,enableUserEvents_fn).call(this),observeResize(this.container,__privateGet$k(this,_updateComputedStyles))}disconnectedCallback(){var hr,gr;__privateMethod$8(this,_disableUserEvents,disableUserEvents_fn).call(this),(gr=(hr=__privateGet$k(this,_mediaController$5))==null?void 0:hr.unassociateElement)==null||gr.call(hr,this),__privateSet$i(this,_mediaController$5,null),this.shadowRoot.removeEventListener("focusin",__privateGet$k(this,_onFocusIn)),this.shadowRoot.removeEventListener("focusout",__privateGet$k(this,_onFocusOut)),unobserveResize(this.container,__privateGet$k(this,_updateComputedStyles))}updatePointerBar(hr){var gr;(gr=__privateGet$k(this,_cssRules).pointer)==null||gr.style.setProperty("width",`${this.getPointerRatio(hr)*100}%`)}updateBar(){var hr,gr;const vr=this.range.valueAsNumber*100;(hr=__privateGet$k(this,_cssRules).progress)==null||hr.style.setProperty("width",`${vr}%`),(gr=__privateGet$k(this,_cssRules).thumb)==null||gr.style.setProperty("left",`${vr}%`)}updateSegments(hr){const gr=this.shadowRoot.querySelector("#segments-clipping");if(gr.textContent="",this.container.classList.toggle("segments",!!hr?.length),!hr?.length)return;const vr=[...new Set([+this.range.min,...hr.flatMap(Er=>[Er.start,Er.end]),+this.range.max])];__privateSet$i(this,_segments,[...vr]);const xr=vr.pop();for(const[Er,Cr]of vr.entries()){const[wr,Rr]=[Er===0,Er===vr.length-1],kr=wr?"calc(var(--segments-gap) / -1)":`${Cr*100}%`,Br=`calc(${((Rr?xr:vr[Er+1])-Cr)*100}%${wr||Rr?"":" - var(--segments-gap)"})`,Hr=Document$2.createElementNS("http://www.w3.org/2000/svg","rect"),Gr=getOrInsertCSSRule(this.shadowRoot,`#segments-clipping rect:nth-child(${Er+1})`);Gr.style.setProperty("x",kr),Gr.style.setProperty("width",Br),gr.append(Hr)}}getPointerRatio(hr){const gr=getPointProgressOnLine(hr.clientX,hr.clientY,__privateGet$k(this,_startpoint).getBoundingClientRect(),__privateGet$k(this,_endpoint).getBoundingClientRect());return Math.max(0,Math.min(1,gr))}get dragging(){return this.hasAttribute("dragging")}handleEvent(hr){switch(hr.type){case"pointermove":__privateMethod$8(this,_handlePointerMove$1,handlePointerMove_fn$1).call(this,hr);break;case"input":this.updateBar();break;case"pointerenter":__privateMethod$8(this,_handlePointerEnter,handlePointerEnter_fn).call(this,hr);break;case"pointerdown":__privateMethod$8(this,_handlePointerDown,handlePointerDown_fn).call(this,hr);break;case"pointerup":__privateMethod$8(this,_handlePointerUp,handlePointerUp_fn).call(this);break;case"pointerleave":__privateMethod$8(this,_handlePointerLeave,handlePointerLeave_fn).call(this);break}}get keysUsed(){return["ArrowUp","ArrowRight","ArrowDown","ArrowLeft"]}}_mediaController$5=new WeakMap;_isInputTarget=new WeakMap;_startpoint=new WeakMap;_endpoint=new WeakMap;_cssRules=new WeakMap;_segments=new WeakMap;_onFocusIn=new WeakMap;_onFocusOut=new WeakMap;_updateComputedStyles=new WeakMap;_updateActiveSegment=new WeakSet;updateActiveSegment_fn=function(mr){const hr=__privateGet$k(this,_cssRules).activeSegment;if(!hr)return;const gr=this.getPointerRatio(mr),xr=`#segments-clipping rect:nth-child(${__privateGet$k(this,_segments).findIndex((Er,Cr,wr)=>{const Rr=wr[Cr+1];return Rr!=null&&gr>=Er&&gr<=Rr})+1})`;(hr.selectorText!=xr||!hr.style.transform)&&(hr.selectorText=xr,hr.style.setProperty("transform","var(--media-range-segment-hover-transform, scaleY(2))"))};_enableUserEvents=new WeakSet;enableUserEvents_fn=function(){this.hasAttribute("disabled")||(this.addEventListener("input",this),this.addEventListener("pointerdown",this),this.addEventListener("pointerenter",this))};_disableUserEvents=new WeakSet;disableUserEvents_fn=function(){var mr,hr;this.removeEventListener("input",this),this.removeEventListener("pointerdown",this),this.removeEventListener("pointerenter",this),(mr=GlobalThis.window)==null||mr.removeEventListener("pointerup",this),(hr=GlobalThis.window)==null||hr.removeEventListener("pointermove",this)};_handlePointerDown=new WeakSet;handlePointerDown_fn=function(mr){var hr;__privateSet$i(this,_isInputTarget,mr.composedPath().includes(this.range)),(hr=GlobalThis.window)==null||hr.addEventListener("pointerup",this)};_handlePointerEnter=new WeakSet;handlePointerEnter_fn=function(mr){var hr;mr.pointerType!=="mouse"&&__privateMethod$8(this,_handlePointerDown,handlePointerDown_fn).call(this,mr),this.addEventListener("pointerleave",this),(hr=GlobalThis.window)==null||hr.addEventListener("pointermove",this)};_handlePointerUp=new WeakSet;handlePointerUp_fn=function(){var mr;(mr=GlobalThis.window)==null||mr.removeEventListener("pointerup",this),this.toggleAttribute("dragging",!1),this.range.disabled=this.hasAttribute("disabled")};_handlePointerLeave=new WeakSet;handlePointerLeave_fn=function(){var mr,hr;this.removeEventListener("pointerleave",this),(mr=GlobalThis.window)==null||mr.removeEventListener("pointermove",this),this.toggleAttribute("dragging",!1),this.range.disabled=this.hasAttribute("disabled"),(hr=__privateGet$k(this,_cssRules).activeSegment)==null||hr.style.removeProperty("transform")};_handlePointerMove$1=new WeakSet;handlePointerMove_fn$1=function(mr){this.toggleAttribute("dragging",mr.buttons===1||mr.pointerType!=="mouse"),this.updatePointerBar(mr),__privateMethod$8(this,_updateActiveSegment,updateActiveSegment_fn).call(this,mr),this.dragging&&(mr.pointerType!=="mouse"||!__privateGet$k(this,_isInputTarget))&&(this.range.disabled=!0,this.range.valueAsNumber=this.getPointerRatio(mr),this.range.dispatchEvent(new Event("input",{bubbles:!0,composed:!0})))};GlobalThis.customElements.get("media-chrome-range")||GlobalThis.customElements.define("media-chrome-range",MediaChromeRange);var __accessCheck$k=(mr,hr,gr)=>{if(!hr.has(mr))throw TypeError("Cannot "+gr)},__privateGet$j=(mr,hr,gr)=>(__accessCheck$k(mr,hr,"read from private field"),gr?gr.call(mr):hr.get(mr)),__privateAdd$k=(mr,hr,gr)=>{if(hr.has(mr))throw TypeError("Cannot add the same private member more than once");hr instanceof WeakSet?hr.add(mr):hr.set(mr,gr)},__privateSet$h=(mr,hr,gr,vr)=>(__accessCheck$k(mr,hr,"write to private field"),hr.set(mr,gr),gr),_mediaController$4;const template$b=Document$2.createElement("template");template$b.innerHTML=`
  <style>
    :host {
      
      box-sizing: border-box;
      display: var(--media-control-display, var(--media-control-bar-display, inline-flex));
      color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));
      --media-loading-indicator-icon-height: 44px;
    }

    ::slotted(media-time-range),
    ::slotted(media-volume-range) {
      min-height: 100%;
    }

    ::slotted(media-time-range),
    ::slotted(media-clip-selector) {
      flex-grow: 1;
    }

    ::slotted([role="menu"]) {
      position: absolute;
    }
  </style>

  <slot></slot>
`;class MediaControlBar extends GlobalThis.HTMLElement{constructor(){super(),__privateAdd$k(this,_mediaController$4,void 0),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(template$b.content.cloneNode(!0)))}static get observedAttributes(){return[MediaStateReceiverAttributes.MEDIA_CONTROLLER]}attributeChangedCallback(hr,gr,vr){var xr,Er,Cr,wr,Rr;hr===MediaStateReceiverAttributes.MEDIA_CONTROLLER&&(gr&&((Er=(xr=__privateGet$j(this,_mediaController$4))==null?void 0:xr.unassociateElement)==null||Er.call(xr,this),__privateSet$h(this,_mediaController$4,null)),vr&&this.isConnected&&(__privateSet$h(this,_mediaController$4,(Cr=this.getRootNode())==null?void 0:Cr.getElementById(vr)),(Rr=(wr=__privateGet$j(this,_mediaController$4))==null?void 0:wr.associateElement)==null||Rr.call(wr,this)))}connectedCallback(){var hr,gr,vr;const xr=this.getAttribute(MediaStateReceiverAttributes.MEDIA_CONTROLLER);xr&&(__privateSet$h(this,_mediaController$4,(hr=this.getRootNode())==null?void 0:hr.getElementById(xr)),(vr=(gr=__privateGet$j(this,_mediaController$4))==null?void 0:gr.associateElement)==null||vr.call(gr,this))}disconnectedCallback(){var hr,gr;(gr=(hr=__privateGet$j(this,_mediaController$4))==null?void 0:hr.unassociateElement)==null||gr.call(hr,this),__privateSet$h(this,_mediaController$4,null)}}_mediaController$4=new WeakMap;GlobalThis.customElements.get("media-control-bar")||GlobalThis.customElements.define("media-control-bar",MediaControlBar);var __accessCheck$j=(mr,hr,gr)=>{if(!hr.has(mr))throw TypeError("Cannot "+gr)},__privateGet$i=(mr,hr,gr)=>(__accessCheck$j(mr,hr,"read from private field"),gr?gr.call(mr):hr.get(mr)),__privateAdd$j=(mr,hr,gr)=>{if(hr.has(mr))throw TypeError("Cannot add the same private member more than once");hr instanceof WeakSet?hr.add(mr):hr.set(mr,gr)},__privateSet$g=(mr,hr,gr,vr)=>(__accessCheck$j(mr,hr,"write to private field"),hr.set(mr,gr),gr),_mediaController$3;const template$a=Document$2.createElement("template");template$a.innerHTML=`
  <style>
    :host {
      font: var(--media-font,
        var(--media-font-weight, normal)
        var(--media-font-size, 14px) /
        var(--media-text-content-height, var(--media-control-height, 24px))
        var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));
      color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));
      background: var(--media-text-background, var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .7))));
      padding: var(--media-control-padding, 10px);
      display: inline-flex;
      justify-content: center;
      align-items: center;
      vertical-align: middle;
      box-sizing: border-box;
      text-align: center;
      pointer-events: auto;
    }

    
    :host(:focus-visible) {
      box-shadow: inset 0 0 0 2px rgb(27 127 204 / .9);
      outline: 0;
    }

    
    :host(:where(:focus)) {
      box-shadow: none;
      outline: 0;
    }
  </style>
  <slot></slot>
`;class MediaTextDisplay extends GlobalThis.HTMLElement{constructor(){super(),__privateAdd$j(this,_mediaController$3,void 0),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(template$a.content.cloneNode(!0)))}static get observedAttributes(){return[MediaStateReceiverAttributes.MEDIA_CONTROLLER]}attributeChangedCallback(hr,gr,vr){var xr,Er,Cr,wr,Rr;hr===MediaStateReceiverAttributes.MEDIA_CONTROLLER&&(gr&&((Er=(xr=__privateGet$i(this,_mediaController$3))==null?void 0:xr.unassociateElement)==null||Er.call(xr,this),__privateSet$g(this,_mediaController$3,null)),vr&&this.isConnected&&(__privateSet$g(this,_mediaController$3,(Cr=this.getRootNode())==null?void 0:Cr.getElementById(vr)),(Rr=(wr=__privateGet$i(this,_mediaController$3))==null?void 0:wr.associateElement)==null||Rr.call(wr,this)))}connectedCallback(){var hr,gr,vr;const{style:xr}=getOrInsertCSSRule(this.shadowRoot,":host");xr.setProperty("display",`var(--media-control-display, var(--${this.localName}-display, inline-flex))`);const Er=this.getAttribute(MediaStateReceiverAttributes.MEDIA_CONTROLLER);Er&&(__privateSet$g(this,_mediaController$3,(hr=this.getRootNode())==null?void 0:hr.getElementById(Er)),(vr=(gr=__privateGet$i(this,_mediaController$3))==null?void 0:gr.associateElement)==null||vr.call(gr,this))}disconnectedCallback(){var hr,gr;(gr=(hr=__privateGet$i(this,_mediaController$3))==null?void 0:hr.unassociateElement)==null||gr.call(hr,this),__privateSet$g(this,_mediaController$3,null)}}_mediaController$3=new WeakMap;GlobalThis.customElements.get("media-text-display")||GlobalThis.customElements.define("media-text-display",MediaTextDisplay);var __accessCheck$i=(mr,hr,gr)=>{if(!hr.has(mr))throw TypeError("Cannot "+gr)},__privateGet$h=(mr,hr,gr)=>(__accessCheck$i(mr,hr,"read from private field"),gr?gr.call(mr):hr.get(mr)),__privateAdd$i=(mr,hr,gr)=>{if(hr.has(mr))throw TypeError("Cannot add the same private member more than once");hr instanceof WeakSet?hr.add(mr):hr.set(mr,gr)},__privateSet$f=(mr,hr,gr,vr)=>(__accessCheck$i(mr,hr,"write to private field"),hr.set(mr,gr),gr),_slot$3;class MediaDurationDisplay extends MediaTextDisplay{constructor(){super(),__privateAdd$i(this,_slot$3,void 0),__privateSet$f(this,_slot$3,this.shadowRoot.querySelector("slot")),__privateGet$h(this,_slot$3).textContent=formatTime(0)}static get observedAttributes(){return[...super.observedAttributes,MediaUIAttributes.MEDIA_DURATION]}attributeChangedCallback(hr,gr,vr){hr===MediaUIAttributes.MEDIA_DURATION&&(__privateGet$h(this,_slot$3).textContent=formatTime(+vr)),super.attributeChangedCallback(hr,gr,vr)}get mediaDuration(){return getNumericAttr(this,MediaUIAttributes.MEDIA_DURATION)}set mediaDuration(hr){setNumericAttr(this,MediaUIAttributes.MEDIA_DURATION,hr)}}_slot$3=new WeakMap;GlobalThis.customElements.get("media-duration-display")||GlobalThis.customElements.define("media-duration-display",MediaDurationDisplay);const enterFullscreenIcon=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M16 3v2.5h3.5V9H22V3h-6ZM4 9h2.5V5.5H10V3H4v6Zm15.5 9.5H16V21h6v-6h-2.5v3.5ZM6.5 15H4v6h6v-2.5H6.5V15Z"/>
</svg>`,exitFullscreenIcon=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M18.5 6.5V3H16v6h6V6.5h-3.5ZM16 21h2.5v-3.5H22V15h-6v6ZM4 17.5h3.5V21H10v-6H4v2.5Zm3.5-11H4V9h6V3H7.5v3.5Z"/>
</svg>`,slotTemplate$c=Document$2.createElement("template");slotTemplate$c.innerHTML=`
  <style>
    :host([${MediaUIAttributes.MEDIA_IS_FULLSCREEN}]) slot[name=icon] slot:not([name=exit]) {
      display: none !important;
    }

    
    :host(:not([${MediaUIAttributes.MEDIA_IS_FULLSCREEN}])) slot[name=icon] slot:not([name=enter]) {
      display: none !important;
    }

    :host([${MediaUIAttributes.MEDIA_IS_FULLSCREEN}]) slot[name=tooltip-enter],
    :host(:not([${MediaUIAttributes.MEDIA_IS_FULLSCREEN}])) slot[name=tooltip-exit] {
      display: none;
    }
  </style>

  <slot name="icon">
    <slot name="enter">${enterFullscreenIcon}</slot>
    <slot name="exit">${exitFullscreenIcon}</slot>
  </slot>
`;const tooltipContent$3=`
  <slot name="tooltip-enter">${tooltipLabels.ENTER_FULLSCREEN}</slot>
  <slot name="tooltip-exit">${tooltipLabels.EXIT_FULLSCREEN}</slot>
`,updateAriaLabel$3=mr=>{const hr=mr.mediaIsFullscreen?verbs.EXIT_FULLSCREEN():verbs.ENTER_FULLSCREEN();mr.setAttribute("aria-label",hr)};class MediaFullscreenButton extends MediaChromeButton{static get observedAttributes(){return[...super.observedAttributes,MediaUIAttributes.MEDIA_IS_FULLSCREEN,MediaUIAttributes.MEDIA_FULLSCREEN_UNAVAILABLE]}constructor(hr={}){super({slotTemplate:slotTemplate$c,tooltipContent:tooltipContent$3,...hr})}connectedCallback(){super.connectedCallback(),updateAriaLabel$3(this)}attributeChangedCallback(hr,gr,vr){super.attributeChangedCallback(hr,gr,vr),hr===MediaUIAttributes.MEDIA_IS_FULLSCREEN&&updateAriaLabel$3(this)}get mediaFullscreenUnavailable(){return getStringAttr(this,MediaUIAttributes.MEDIA_FULLSCREEN_UNAVAILABLE)}set mediaFullscreenUnavailable(hr){setStringAttr(this,MediaUIAttributes.MEDIA_FULLSCREEN_UNAVAILABLE,hr)}get mediaIsFullscreen(){return getBooleanAttr(this,MediaUIAttributes.MEDIA_IS_FULLSCREEN)}set mediaIsFullscreen(hr){setBooleanAttr(this,MediaUIAttributes.MEDIA_IS_FULLSCREEN,hr)}handleClick(){const hr=this.mediaIsFullscreen?MediaUIEvents.MEDIA_EXIT_FULLSCREEN_REQUEST:MediaUIEvents.MEDIA_ENTER_FULLSCREEN_REQUEST;this.dispatchEvent(new GlobalThis.CustomEvent(hr,{composed:!0,bubbles:!0}))}}GlobalThis.customElements.get("media-fullscreen-button")||GlobalThis.customElements.define("media-fullscreen-button",MediaFullscreenButton);const{MEDIA_TIME_IS_LIVE,MEDIA_PAUSED}=MediaUIAttributes,{MEDIA_SEEK_TO_LIVE_REQUEST,MEDIA_PLAY_REQUEST}=MediaUIEvents,indicatorSVG='<svg viewBox="0 0 6 12"><circle cx="3" cy="6" r="2"></circle></svg>',slotTemplate$b=Document$2.createElement("template");slotTemplate$b.innerHTML=`
  <style>
  :host { --media-tooltip-display: none; }
  
  slot[name=indicator] > *,
  :host ::slotted([slot=indicator]) {
    
    min-width: auto;
    fill: var(--media-live-button-icon-color, rgb(140, 140, 140));
    color: var(--media-live-button-icon-color, rgb(140, 140, 140));
  }

  :host([${MEDIA_TIME_IS_LIVE}]:not([${MEDIA_PAUSED}])) slot[name=indicator] > *,
  :host([${MEDIA_TIME_IS_LIVE}]:not([${MEDIA_PAUSED}])) ::slotted([slot=indicator]) {
    fill: var(--media-live-button-indicator-color, rgb(255, 0, 0));
    color: var(--media-live-button-indicator-color, rgb(255, 0, 0));
  }

  :host([${MEDIA_TIME_IS_LIVE}]:not([${MEDIA_PAUSED}])) {
    cursor: not-allowed;
  }

  </style>

  <slot name="indicator">${indicatorSVG}</slot>
  
  <slot name="spacer">&nbsp;</slot><slot name="text">LIVE</slot>
`;const updateAriaAttributes=mr=>{const hr=mr.mediaPaused||!mr.mediaTimeIsLive,gr=hr?verbs.SEEK_LIVE():verbs.PLAYING_LIVE();mr.setAttribute("aria-label",gr),hr?mr.removeAttribute("aria-disabled"):mr.setAttribute("aria-disabled","true")};class MediaLiveButton extends MediaChromeButton{static get observedAttributes(){return[...super.observedAttributes,MEDIA_PAUSED,MEDIA_TIME_IS_LIVE]}constructor(hr={}){super({slotTemplate:slotTemplate$b,...hr})}connectedCallback(){updateAriaAttributes(this),super.connectedCallback()}attributeChangedCallback(hr,gr,vr){super.attributeChangedCallback(hr,gr,vr),updateAriaAttributes(this)}get mediaPaused(){return getBooleanAttr(this,MediaUIAttributes.MEDIA_PAUSED)}set mediaPaused(hr){setBooleanAttr(this,MediaUIAttributes.MEDIA_PAUSED,hr)}get mediaTimeIsLive(){return getBooleanAttr(this,MediaUIAttributes.MEDIA_TIME_IS_LIVE)}set mediaTimeIsLive(hr){setBooleanAttr(this,MediaUIAttributes.MEDIA_TIME_IS_LIVE,hr)}handleClick(){!this.mediaPaused&&this.mediaTimeIsLive||(this.dispatchEvent(new GlobalThis.CustomEvent(MEDIA_SEEK_TO_LIVE_REQUEST,{composed:!0,bubbles:!0})),this.hasAttribute(MEDIA_PAUSED)&&this.dispatchEvent(new GlobalThis.CustomEvent(MEDIA_PLAY_REQUEST,{composed:!0,bubbles:!0})))}}GlobalThis.customElements.get("media-live-button")||GlobalThis.customElements.define("media-live-button",MediaLiveButton);var __accessCheck$h=(mr,hr,gr)=>{if(!hr.has(mr))throw TypeError("Cannot "+gr)},__privateGet$g=(mr,hr,gr)=>(__accessCheck$h(mr,hr,"read from private field"),gr?gr.call(mr):hr.get(mr)),__privateAdd$h=(mr,hr,gr)=>{if(hr.has(mr))throw TypeError("Cannot add the same private member more than once");hr instanceof WeakSet?hr.add(mr):hr.set(mr,gr)},__privateSet$e=(mr,hr,gr,vr)=>(__accessCheck$h(mr,hr,"write to private field"),hr.set(mr,gr),gr),_mediaController$2,_delay;const Attributes$a={LOADING_DELAY:"loadingdelay"},DEFAULT_LOADING_DELAY=500,template$9=Document$2.createElement("template"),loadingIndicatorIcon=`
<svg aria-hidden="true" viewBox="0 0 100 100">
  <path d="M73,50c0-12.7-10.3-23-23-23S27,37.3,27,50 M30.9,50c0-10.5,8.5-19.1,19.1-19.1S69.1,39.5,69.1,50">
    <animateTransform
       attributeName="transform"
       attributeType="XML"
       type="rotate"
       dur="1s"
       from="0 50 50"
       to="360 50 50"
       repeatCount="indefinite" />
  </path>
</svg>
`;template$9.innerHTML=`
<style>
:host {
  display: var(--media-control-display, var(--media-loading-indicator-display, inline-block));
  vertical-align: middle;
  box-sizing: border-box;
  --_loading-indicator-delay: var(--media-loading-indicator-transition-delay, ${DEFAULT_LOADING_DELAY}ms);
}

#status {
  color: rgba(0,0,0,0);
  width: 0px;
  height: 0px;
}

:host slot[name=icon] > *,
:host ::slotted([slot=icon]) {
  opacity: var(--media-loading-indicator-opacity, 0);
  transition: opacity 0.15s;
}

:host([${MediaUIAttributes.MEDIA_LOADING}]:not([${MediaUIAttributes.MEDIA_PAUSED}])) slot[name=icon] > *,
:host([${MediaUIAttributes.MEDIA_LOADING}]:not([${MediaUIAttributes.MEDIA_PAUSED}])) ::slotted([slot=icon]) {
  opacity: var(--media-loading-indicator-opacity, 1);
  transition: opacity 0.15s var(--_loading-indicator-delay);
}

:host #status {
  visibility: var(--media-loading-indicator-opacity, hidden);
  transition: visibility 0.15s;
}

:host([${MediaUIAttributes.MEDIA_LOADING}]:not([${MediaUIAttributes.MEDIA_PAUSED}])) #status {
  visibility: var(--media-loading-indicator-opacity, visible);
  transition: visibility 0.15s var(--_loading-indicator-delay);
}

svg, img, ::slotted(svg), ::slotted(img) {
  width: var(--media-loading-indicator-icon-width);
  height: var(--media-loading-indicator-icon-height, 100px);
  fill: var(--media-icon-color, var(--media-primary-color, rgb(238 238 238)));
  vertical-align: middle;
}
</style>

<slot name="icon">${loadingIndicatorIcon}</slot>
<div id="status" role="status" aria-live="polite">${nouns.MEDIA_LOADING()}</div>
`;class MediaLoadingIndicator extends GlobalThis.HTMLElement{constructor(){if(super(),__privateAdd$h(this,_mediaController$2,void 0),__privateAdd$h(this,_delay,DEFAULT_LOADING_DELAY),!this.shadowRoot){const hr=this.attachShadow({mode:"open"}),gr=template$9.content.cloneNode(!0);hr.appendChild(gr)}}static get observedAttributes(){return[MediaStateReceiverAttributes.MEDIA_CONTROLLER,MediaUIAttributes.MEDIA_PAUSED,MediaUIAttributes.MEDIA_LOADING,Attributes$a.LOADING_DELAY]}attributeChangedCallback(hr,gr,vr){var xr,Er,Cr,wr,Rr;hr===Attributes$a.LOADING_DELAY&&gr!==vr?this.loadingDelay=Number(vr):hr===MediaStateReceiverAttributes.MEDIA_CONTROLLER&&(gr&&((Er=(xr=__privateGet$g(this,_mediaController$2))==null?void 0:xr.unassociateElement)==null||Er.call(xr,this),__privateSet$e(this,_mediaController$2,null)),vr&&this.isConnected&&(__privateSet$e(this,_mediaController$2,(Cr=this.getRootNode())==null?void 0:Cr.getElementById(vr)),(Rr=(wr=__privateGet$g(this,_mediaController$2))==null?void 0:wr.associateElement)==null||Rr.call(wr,this)))}connectedCallback(){var hr,gr,vr;const xr=this.getAttribute(MediaStateReceiverAttributes.MEDIA_CONTROLLER);xr&&(__privateSet$e(this,_mediaController$2,(hr=this.getRootNode())==null?void 0:hr.getElementById(xr)),(vr=(gr=__privateGet$g(this,_mediaController$2))==null?void 0:gr.associateElement)==null||vr.call(gr,this))}disconnectedCallback(){var hr,gr;(gr=(hr=__privateGet$g(this,_mediaController$2))==null?void 0:hr.unassociateElement)==null||gr.call(hr,this),__privateSet$e(this,_mediaController$2,null)}get loadingDelay(){return __privateGet$g(this,_delay)}set loadingDelay(hr){__privateSet$e(this,_delay,hr);const{style:gr}=getOrInsertCSSRule(this.shadowRoot,":host");gr.setProperty("--_loading-indicator-delay",`var(--media-loading-indicator-transition-delay, ${hr}ms)`)}get mediaPaused(){return getBooleanAttr(this,MediaUIAttributes.MEDIA_PAUSED)}set mediaPaused(hr){setBooleanAttr(this,MediaUIAttributes.MEDIA_PAUSED,hr)}get mediaLoading(){return getBooleanAttr(this,MediaUIAttributes.MEDIA_LOADING)}set mediaLoading(hr){setBooleanAttr(this,MediaUIAttributes.MEDIA_LOADING,hr)}}_mediaController$2=new WeakMap;_delay=new WeakMap;GlobalThis.customElements.get("media-loading-indicator")||GlobalThis.customElements.define("media-loading-indicator",MediaLoadingIndicator);const{MEDIA_VOLUME_LEVEL}=MediaUIAttributes,offIcon=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="M16.5 12A4.5 4.5 0 0 0 14 8v2.18l2.45 2.45a4.22 4.22 0 0 0 .05-.63Zm2.5 0a6.84 6.84 0 0 1-.54 2.64L20 16.15A8.8 8.8 0 0 0 21 12a9 9 0 0 0-7-8.77v2.06A7 7 0 0 1 19 12ZM4.27 3 3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25A6.92 6.92 0 0 1 14 18.7v2.06A9 9 0 0 0 17.69 19l2 2.05L21 19.73l-9-9L4.27 3ZM12 4 9.91 6.09 12 8.18V4Z"/>
</svg>`,lowIcon=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="M3 9v6h4l5 5V4L7 9H3Zm13.5 3A4.5 4.5 0 0 0 14 8v8a4.47 4.47 0 0 0 2.5-4Z"/>
</svg>`,highIcon=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="M3 9v6h4l5 5V4L7 9H3Zm13.5 3A4.5 4.5 0 0 0 14 8v8a4.47 4.47 0 0 0 2.5-4ZM14 3.23v2.06a7 7 0 0 1 0 13.42v2.06a9 9 0 0 0 0-17.54Z"/>
</svg>`,slotTemplate$a=Document$2.createElement("template");slotTemplate$a.innerHTML=`
  <style>
  
  :host(:not([${MEDIA_VOLUME_LEVEL}])) slot[name=icon] slot:not([name=high]), 
  :host([${MEDIA_VOLUME_LEVEL}=high]) slot[name=icon] slot:not([name=high]) {
    display: none !important;
  }

  :host([${MEDIA_VOLUME_LEVEL}=off]) slot[name=icon] slot:not([name=off]) {
    display: none !important;
  }

  :host([${MEDIA_VOLUME_LEVEL}=low]) slot[name=icon] slot:not([name=low]) {
    display: none !important;
  }

  :host([${MEDIA_VOLUME_LEVEL}=medium]) slot[name=icon] slot:not([name=medium]) {
    display: none !important;
  }

  :host(:not([${MEDIA_VOLUME_LEVEL}=off])) slot[name=tooltip-unmute],
  :host([${MEDIA_VOLUME_LEVEL}=off]) slot[name=tooltip-mute] {
    display: none;
  }
  </style>

  <slot name="icon">
    <slot name="off">${offIcon}</slot>
    <slot name="low">${lowIcon}</slot>
    <slot name="medium">${lowIcon}</slot>
    <slot name="high">${highIcon}</slot>
  </slot>
`;const tooltipContent$2=`
  <slot name="tooltip-mute">${tooltipLabels.MUTE}</slot>
  <slot name="tooltip-unmute">${tooltipLabels.UNMUTE}</slot>
`,updateAriaLabel$2=mr=>{const gr=mr.mediaVolumeLevel==="off"?verbs.UNMUTE():verbs.MUTE();mr.setAttribute("aria-label",gr)};class MediaMuteButton extends MediaChromeButton{static get observedAttributes(){return[...super.observedAttributes,MediaUIAttributes.MEDIA_VOLUME_LEVEL]}constructor(hr={}){super({slotTemplate:slotTemplate$a,tooltipContent:tooltipContent$2,...hr})}connectedCallback(){updateAriaLabel$2(this),super.connectedCallback()}attributeChangedCallback(hr,gr,vr){hr===MediaUIAttributes.MEDIA_VOLUME_LEVEL&&updateAriaLabel$2(this),super.attributeChangedCallback(hr,gr,vr)}get mediaVolumeLevel(){return getStringAttr(this,MediaUIAttributes.MEDIA_VOLUME_LEVEL)}set mediaVolumeLevel(hr){setStringAttr(this,MediaUIAttributes.MEDIA_VOLUME_LEVEL,hr)}handleClick(){const hr=this.mediaVolumeLevel==="off"?MediaUIEvents.MEDIA_UNMUTE_REQUEST:MediaUIEvents.MEDIA_MUTE_REQUEST;this.dispatchEvent(new GlobalThis.CustomEvent(hr,{composed:!0,bubbles:!0}))}}GlobalThis.customElements.get("media-mute-button")||GlobalThis.customElements.define("media-mute-button",MediaMuteButton);const pipIcon=`<svg aria-hidden="true" viewBox="0 0 28 24">
  <path d="M24 3H4a1 1 0 0 0-1 1v16a1 1 0 0 0 1 1h20a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1Zm-1 16H5V5h18v14Zm-3-8h-7v5h7v-5Z"/>
</svg>`,slotTemplate$9=Document$2.createElement("template");slotTemplate$9.innerHTML=`
  <style>
  :host([${MediaUIAttributes.MEDIA_IS_PIP}]) slot[name=icon] slot:not([name=exit]) {
    display: none !important;
  }

  
  :host(:not([${MediaUIAttributes.MEDIA_IS_PIP}])) slot[name=icon] slot:not([name=enter]) {
    display: none !important;
  }

  :host([${MediaUIAttributes.MEDIA_IS_PIP}]) slot[name=tooltip-enter],
  :host(:not([${MediaUIAttributes.MEDIA_IS_PIP}])) slot[name=tooltip-exit] {
    display: none;
  }
  </style>

  <slot name="icon">
    <slot name="enter">${pipIcon}</slot>
    <slot name="exit">${pipIcon}</slot>
  </slot>
`;const tooltipContent$1=`
  <slot name="tooltip-enter">${tooltipLabels.ENTER_PIP}</slot>
  <slot name="tooltip-exit">${tooltipLabels.EXIT_PIP}</slot>
`,updateAriaLabel$1=mr=>{const hr=mr.mediaIsPip?verbs.EXIT_PIP():verbs.ENTER_PIP();mr.setAttribute("aria-label",hr)};class MediaPipButton extends MediaChromeButton{static get observedAttributes(){return[...super.observedAttributes,MediaUIAttributes.MEDIA_IS_PIP,MediaUIAttributes.MEDIA_PIP_UNAVAILABLE]}constructor(hr={}){super({slotTemplate:slotTemplate$9,tooltipContent:tooltipContent$1,...hr})}connectedCallback(){updateAriaLabel$1(this),super.connectedCallback()}attributeChangedCallback(hr,gr,vr){hr===MediaUIAttributes.MEDIA_IS_PIP&&updateAriaLabel$1(this),super.attributeChangedCallback(hr,gr,vr)}get mediaPipUnavailable(){return getStringAttr(this,MediaUIAttributes.MEDIA_PIP_UNAVAILABLE)}set mediaPipUnavailable(hr){setStringAttr(this,MediaUIAttributes.MEDIA_PIP_UNAVAILABLE,hr)}get mediaIsPip(){return getBooleanAttr(this,MediaUIAttributes.MEDIA_IS_PIP)}set mediaIsPip(hr){setBooleanAttr(this,MediaUIAttributes.MEDIA_IS_PIP,hr)}handleClick(){const hr=this.mediaIsPip?MediaUIEvents.MEDIA_EXIT_PIP_REQUEST:MediaUIEvents.MEDIA_ENTER_PIP_REQUEST;this.dispatchEvent(new GlobalThis.CustomEvent(hr,{composed:!0,bubbles:!0}))}}GlobalThis.customElements.get("media-pip-button")||GlobalThis.customElements.define("media-pip-button",MediaPipButton);var __accessCheck$g=(mr,hr,gr)=>{if(!hr.has(mr))throw TypeError("Cannot "+gr)},__privateGet$f=(mr,hr,gr)=>(__accessCheck$g(mr,hr,"read from private field"),gr?gr.call(mr):hr.get(mr)),__privateAdd$g=(mr,hr,gr)=>{if(hr.has(mr))throw TypeError("Cannot add the same private member more than once");hr instanceof WeakSet?hr.add(mr):hr.set(mr,gr)},_rates$2;const Attributes$9={RATES:"rates"},DEFAULT_RATES$1=[1,1.2,1.5,1.7,2],DEFAULT_RATE$1=1,slotTemplate$8=Document$2.createElement("template");slotTemplate$8.innerHTML=`
  <style>
    :host {
      min-width: 5ch;
      padding: var(--media-button-padding, var(--media-control-padding, 10px 5px));
    }
  </style>
  <slot name="icon"></slot>
`;class MediaPlaybackRateButton extends MediaChromeButton{constructor(hr={}){super({slotTemplate:slotTemplate$8,tooltipContent:tooltipLabels.PLAYBACK_RATE,...hr}),__privateAdd$g(this,_rates$2,new AttributeTokenList(this,Attributes$9.RATES,{defaultValue:DEFAULT_RATES$1})),this.container=this.shadowRoot.querySelector('slot[name="icon"]'),this.container.innerHTML=`${DEFAULT_RATE$1}x`}static get observedAttributes(){return[...super.observedAttributes,MediaUIAttributes.MEDIA_PLAYBACK_RATE,Attributes$9.RATES]}attributeChangedCallback(hr,gr,vr){if(super.attributeChangedCallback(hr,gr,vr),hr===Attributes$9.RATES&&(__privateGet$f(this,_rates$2).value=vr),hr===MediaUIAttributes.MEDIA_PLAYBACK_RATE){const xr=vr?+vr:Number.NaN,Er=Number.isNaN(xr)?DEFAULT_RATE$1:xr;this.container.innerHTML=`${Er}x`,this.setAttribute("aria-label",nouns.PLAYBACK_RATE({playbackRate:Er}))}}get rates(){return __privateGet$f(this,_rates$2)}set rates(hr){hr?Array.isArray(hr)&&(__privateGet$f(this,_rates$2).value=hr.join(" ")):__privateGet$f(this,_rates$2).value=""}get mediaPlaybackRate(){return getNumericAttr(this,MediaUIAttributes.MEDIA_PLAYBACK_RATE,DEFAULT_RATE$1)}set mediaPlaybackRate(hr){setNumericAttr(this,MediaUIAttributes.MEDIA_PLAYBACK_RATE,hr)}handleClick(){var hr,gr;const vr=Array.from(this.rates.values(),Cr=>+Cr).sort((Cr,wr)=>Cr-wr),xr=(gr=(hr=vr.find(Cr=>Cr>this.mediaPlaybackRate))!=null?hr:vr[0])!=null?gr:DEFAULT_RATE$1,Er=new GlobalThis.CustomEvent(MediaUIEvents.MEDIA_PLAYBACK_RATE_REQUEST,{composed:!0,bubbles:!0,detail:xr});this.dispatchEvent(Er)}}_rates$2=new WeakMap;GlobalThis.customElements.get("media-playback-rate-button")||GlobalThis.customElements.define("media-playback-rate-button",MediaPlaybackRateButton);const playIcon=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="m6 21 15-9L6 3v18Z"/>
</svg>`,pauseIcon=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="M6 20h4V4H6v16Zm8-16v16h4V4h-4Z"/>
</svg>`,slotTemplate$7=Document$2.createElement("template");slotTemplate$7.innerHTML=`
  <style>
    :host([${MediaUIAttributes.MEDIA_PAUSED}]) slot[name=pause],
    :host(:not([${MediaUIAttributes.MEDIA_PAUSED}])) slot[name=play] {
      display: none !important;
    }

    :host([${MediaUIAttributes.MEDIA_PAUSED}]) slot[name=tooltip-pause],
    :host(:not([${MediaUIAttributes.MEDIA_PAUSED}])) slot[name=tooltip-play] {
      display: none;
    }
  </style>

  <slot name="icon">
    <slot name="play">${playIcon}</slot>
    <slot name="pause">${pauseIcon}</slot>
  </slot>
`;const tooltipContent=`
  <slot name="tooltip-play">${tooltipLabels.PLAY}</slot>
  <slot name="tooltip-pause">${tooltipLabels.PAUSE}</slot>
`,updateAriaLabel=mr=>{const hr=mr.mediaPaused?verbs.PLAY():verbs.PAUSE();mr.setAttribute("aria-label",hr)};class MediaPlayButton extends MediaChromeButton{static get observedAttributes(){return[...super.observedAttributes,MediaUIAttributes.MEDIA_PAUSED,MediaUIAttributes.MEDIA_ENDED]}constructor(hr={}){super({slotTemplate:slotTemplate$7,tooltipContent,...hr})}connectedCallback(){updateAriaLabel(this),super.connectedCallback()}attributeChangedCallback(hr,gr,vr){hr===MediaUIAttributes.MEDIA_PAUSED&&updateAriaLabel(this),super.attributeChangedCallback(hr,gr,vr)}get mediaPaused(){return getBooleanAttr(this,MediaUIAttributes.MEDIA_PAUSED)}set mediaPaused(hr){setBooleanAttr(this,MediaUIAttributes.MEDIA_PAUSED,hr)}handleClick(){const hr=this.mediaPaused?MediaUIEvents.MEDIA_PLAY_REQUEST:MediaUIEvents.MEDIA_PAUSE_REQUEST;this.dispatchEvent(new GlobalThis.CustomEvent(hr,{composed:!0,bubbles:!0}))}}GlobalThis.customElements.get("media-play-button")||GlobalThis.customElements.define("media-play-button",MediaPlayButton);const Attributes$8={PLACEHOLDER_SRC:"placeholdersrc",SRC:"src"},template$8=Document$2.createElement("template");template$8.innerHTML=`
  <style>
    :host {
      pointer-events: none;
      display: var(--media-poster-image-display, inline-block);
      box-sizing: border-box;
    }

    img {
      max-width: 100%;
      max-height: 100%;
      min-width: 100%;
      min-height: 100%;
      background-repeat: no-repeat;
      background-position: var(--media-poster-image-background-position, var(--media-object-position, center));
      background-size: var(--media-poster-image-background-size, var(--media-object-fit, contain));
      object-fit: var(--media-object-fit, contain);
      object-position: var(--media-object-position, center);
    }
  </style>

  <img part="poster img" aria-hidden="true" id="image"/>
`;const unsetBackgroundImage=mr=>{mr.style.removeProperty("background-image")},setBackgroundImage=(mr,hr)=>{mr.style["background-image"]=`url('${hr}')`};class MediaPosterImage extends GlobalThis.HTMLElement{static get observedAttributes(){return[Attributes$8.PLACEHOLDER_SRC,Attributes$8.SRC]}constructor(){super(),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(template$8.content.cloneNode(!0))),this.image=this.shadowRoot.querySelector("#image")}attributeChangedCallback(hr,gr,vr){hr===Attributes$8.SRC&&(vr==null?this.image.removeAttribute(Attributes$8.SRC):this.image.setAttribute(Attributes$8.SRC,vr)),hr===Attributes$8.PLACEHOLDER_SRC&&(vr==null?unsetBackgroundImage(this.image):setBackgroundImage(this.image,vr))}get placeholderSrc(){return getStringAttr(this,Attributes$8.PLACEHOLDER_SRC)}set placeholderSrc(hr){setStringAttr(this,Attributes$8.SRC,hr)}get src(){return getStringAttr(this,Attributes$8.SRC)}set src(hr){setStringAttr(this,Attributes$8.SRC,hr)}}GlobalThis.customElements.get("media-poster-image")||GlobalThis.customElements.define("media-poster-image",MediaPosterImage);var __accessCheck$f=(mr,hr,gr)=>{if(!hr.has(mr))throw TypeError("Cannot "+gr)},__privateGet$e=(mr,hr,gr)=>(__accessCheck$f(mr,hr,"read from private field"),gr?gr.call(mr):hr.get(mr)),__privateAdd$f=(mr,hr,gr)=>{if(hr.has(mr))throw TypeError("Cannot add the same private member more than once");hr instanceof WeakSet?hr.add(mr):hr.set(mr,gr)},__privateSet$d=(mr,hr,gr,vr)=>(__accessCheck$f(mr,hr,"write to private field"),hr.set(mr,gr),gr),_slot$2;class MediaPreviewChapterDisplay extends MediaTextDisplay{constructor(){super(),__privateAdd$f(this,_slot$2,void 0),__privateSet$d(this,_slot$2,this.shadowRoot.querySelector("slot"))}static get observedAttributes(){return[...super.observedAttributes,MediaUIAttributes.MEDIA_PREVIEW_CHAPTER]}attributeChangedCallback(hr,gr,vr){super.attributeChangedCallback(hr,gr,vr),hr===MediaUIAttributes.MEDIA_PREVIEW_CHAPTER&&vr!==gr&&vr!=null&&(__privateGet$e(this,_slot$2).textContent=vr,vr!==""?this.setAttribute("aria-valuetext",`chapter: ${vr}`):this.removeAttribute("aria-valuetext"))}get mediaPreviewChapter(){return getStringAttr(this,MediaUIAttributes.MEDIA_PREVIEW_CHAPTER)}set mediaPreviewChapter(hr){setStringAttr(this,MediaUIAttributes.MEDIA_PREVIEW_CHAPTER,hr)}}_slot$2=new WeakMap;GlobalThis.customElements.get("media-preview-chapter-display")||GlobalThis.customElements.define("media-preview-chapter-display",MediaPreviewChapterDisplay);var __accessCheck$e=(mr,hr,gr)=>{if(!hr.has(mr))throw TypeError("Cannot "+gr)},__privateGet$d=(mr,hr,gr)=>(__accessCheck$e(mr,hr,"read from private field"),gr?gr.call(mr):hr.get(mr)),__privateAdd$e=(mr,hr,gr)=>{if(hr.has(mr))throw TypeError("Cannot add the same private member more than once");hr instanceof WeakSet?hr.add(mr):hr.set(mr,gr)},__privateSet$c=(mr,hr,gr,vr)=>(__accessCheck$e(mr,hr,"write to private field"),hr.set(mr,gr),gr),_mediaController$1;const template$7=Document$2.createElement("template");template$7.innerHTML=`
  <style>
    :host {
      box-sizing: border-box;
      display: var(--media-control-display, var(--media-preview-thumbnail-display, inline-block));
      overflow: hidden;
    }

    img {
      display: none;
      position: relative;
    }
  </style>
  <img crossorigin loading="eager" decoding="async">
`;class MediaPreviewThumbnail extends GlobalThis.HTMLElement{constructor(){super(),__privateAdd$e(this,_mediaController$1,void 0),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(template$7.content.cloneNode(!0)))}static get observedAttributes(){return[MediaStateReceiverAttributes.MEDIA_CONTROLLER,MediaUIAttributes.MEDIA_PREVIEW_IMAGE,MediaUIAttributes.MEDIA_PREVIEW_COORDS]}connectedCallback(){var hr,gr,vr;const xr=this.getAttribute(MediaStateReceiverAttributes.MEDIA_CONTROLLER);xr&&(__privateSet$c(this,_mediaController$1,(hr=this.getRootNode())==null?void 0:hr.getElementById(xr)),(vr=(gr=__privateGet$d(this,_mediaController$1))==null?void 0:gr.associateElement)==null||vr.call(gr,this))}disconnectedCallback(){var hr,gr;(gr=(hr=__privateGet$d(this,_mediaController$1))==null?void 0:hr.unassociateElement)==null||gr.call(hr,this),__privateSet$c(this,_mediaController$1,null)}attributeChangedCallback(hr,gr,vr){var xr,Er,Cr,wr,Rr;[MediaUIAttributes.MEDIA_PREVIEW_IMAGE,MediaUIAttributes.MEDIA_PREVIEW_COORDS].includes(hr)&&this.update(),hr===MediaStateReceiverAttributes.MEDIA_CONTROLLER&&(gr&&((Er=(xr=__privateGet$d(this,_mediaController$1))==null?void 0:xr.unassociateElement)==null||Er.call(xr,this),__privateSet$c(this,_mediaController$1,null)),vr&&this.isConnected&&(__privateSet$c(this,_mediaController$1,(Cr=this.getRootNode())==null?void 0:Cr.getElementById(vr)),(Rr=(wr=__privateGet$d(this,_mediaController$1))==null?void 0:wr.associateElement)==null||Rr.call(wr,this)))}get mediaPreviewImage(){return getStringAttr(this,MediaUIAttributes.MEDIA_PREVIEW_IMAGE)}set mediaPreviewImage(hr){setStringAttr(this,MediaUIAttributes.MEDIA_PREVIEW_IMAGE,hr)}get mediaPreviewCoords(){const hr=this.getAttribute(MediaUIAttributes.MEDIA_PREVIEW_COORDS);if(hr)return hr.split(/\s+/).map(gr=>+gr)}set mediaPreviewCoords(hr){if(!hr){this.removeAttribute(MediaUIAttributes.MEDIA_PREVIEW_COORDS);return}this.setAttribute(MediaUIAttributes.MEDIA_PREVIEW_COORDS,hr.join(" "))}update(){const hr=this.mediaPreviewCoords,gr=this.mediaPreviewImage;if(!(hr&&gr))return;const[vr,xr,Er,Cr]=hr,wr=gr.split("#")[0],Rr=getComputedStyle(this),{maxWidth:kr,maxHeight:Dr,minWidth:Br,minHeight:Hr}=Rr,Gr=Math.min(parseInt(kr)/Er,parseInt(Dr)/Cr),qr=Math.max(parseInt(Br)/Er,parseInt(Hr)/Cr),zr=Gr<1,Qr=zr?Gr:qr>1?qr:1,{style:sn}=getOrInsertCSSRule(this.shadowRoot,":host"),hn=getOrInsertCSSRule(this.shadowRoot,"img").style,vn=this.shadowRoot.querySelector("img"),yn=zr?"min":"max";sn.setProperty(`${yn}-width`,"initial","important"),sn.setProperty(`${yn}-height`,"initial","important"),sn.width=`${Er*Qr}px`,sn.height=`${Cr*Qr}px`;const gn=()=>{hn.width=`${this.imgWidth*Qr}px`,hn.height=`${this.imgHeight*Qr}px`,hn.display="block"};vn.src!==wr&&(vn.onload=()=>{this.imgWidth=vn.naturalWidth,this.imgHeight=vn.naturalHeight,gn()},vn.src=wr,gn()),gn(),hn.transform=`translate(-${vr*Qr}px, -${xr*Qr}px)`}}_mediaController$1=new WeakMap;GlobalThis.customElements.get("media-preview-thumbnail")||GlobalThis.customElements.define("media-preview-thumbnail",MediaPreviewThumbnail);var __accessCheck$d=(mr,hr,gr)=>{if(!hr.has(mr))throw TypeError("Cannot "+gr)},__privateGet$c=(mr,hr,gr)=>(__accessCheck$d(mr,hr,"read from private field"),gr?gr.call(mr):hr.get(mr)),__privateAdd$d=(mr,hr,gr)=>{if(hr.has(mr))throw TypeError("Cannot add the same private member more than once");hr instanceof WeakSet?hr.add(mr):hr.set(mr,gr)},__privateSet$b=(mr,hr,gr,vr)=>(__accessCheck$d(mr,hr,"write to private field"),hr.set(mr,gr),gr),_slot$1;class MediaPreviewTimeDisplay extends MediaTextDisplay{constructor(){super(),__privateAdd$d(this,_slot$1,void 0),__privateSet$b(this,_slot$1,this.shadowRoot.querySelector("slot")),__privateGet$c(this,_slot$1).textContent=formatTime(0)}static get observedAttributes(){return[...super.observedAttributes,MediaUIAttributes.MEDIA_PREVIEW_TIME]}attributeChangedCallback(hr,gr,vr){super.attributeChangedCallback(hr,gr,vr),hr===MediaUIAttributes.MEDIA_PREVIEW_TIME&&vr!=null&&(__privateGet$c(this,_slot$1).textContent=formatTime(parseFloat(vr)))}get mediaPreviewTime(){return getNumericAttr(this,MediaUIAttributes.MEDIA_PREVIEW_TIME)}set mediaPreviewTime(hr){setNumericAttr(this,MediaUIAttributes.MEDIA_PREVIEW_TIME,hr)}}_slot$1=new WeakMap;GlobalThis.customElements.get("media-preview-time-display")||GlobalThis.customElements.define("media-preview-time-display",MediaPreviewTimeDisplay);const Attributes$7={SEEK_OFFSET:"seekoffset"},DEFAULT_SEEK_OFFSET$1=30,backwardIcon=`<svg aria-hidden="true" viewBox="0 0 20 24"><defs><style>.text{font-size:8px;font-family:Arial-BoldMT, Arial;font-weight:700;}</style></defs><text class="text value" transform="translate(2.18 19.87)">${DEFAULT_SEEK_OFFSET$1}</text><path d="M10 6V3L4.37 7 10 10.94V8a5.54 5.54 0 0 1 1.9 10.48v2.12A7.5 7.5 0 0 0 10 6Z"/></svg>`,slotTemplate$6=Document$2.createElement("template");slotTemplate$6.innerHTML=`
  <slot name="icon">${backwardIcon}</slot>
`;const DEFAULT_TIME$1=0;class MediaSeekBackwardButton extends MediaChromeButton{static get observedAttributes(){return[...super.observedAttributes,MediaUIAttributes.MEDIA_CURRENT_TIME,Attributes$7.SEEK_OFFSET]}constructor(hr={}){super({slotTemplate:slotTemplate$6,tooltipContent:tooltipLabels.SEEK_BACKWARD,...hr})}connectedCallback(){this.seekOffset=getNumericAttr(this,Attributes$7.SEEK_OFFSET,DEFAULT_SEEK_OFFSET$1),super.connectedCallback()}attributeChangedCallback(hr,gr,vr){hr===Attributes$7.SEEK_OFFSET&&(this.seekOffset=getNumericAttr(this,Attributes$7.SEEK_OFFSET,DEFAULT_SEEK_OFFSET$1)),super.attributeChangedCallback(hr,gr,vr)}get seekOffset(){return getNumericAttr(this,Attributes$7.SEEK_OFFSET,DEFAULT_SEEK_OFFSET$1)}set seekOffset(hr){setNumericAttr(this,Attributes$7.SEEK_OFFSET,hr),this.setAttribute("aria-label",verbs.SEEK_BACK_N_SECS({seekOffset:this.seekOffset})),updateIconText(getSlotted(this,"icon"),this.seekOffset)}get mediaCurrentTime(){return getNumericAttr(this,MediaUIAttributes.MEDIA_CURRENT_TIME,DEFAULT_TIME$1)}set mediaCurrentTime(hr){setNumericAttr(this,MediaUIAttributes.MEDIA_CURRENT_TIME,hr)}handleClick(){const hr=Math.max(this.mediaCurrentTime-this.seekOffset,0),gr=new GlobalThis.CustomEvent(MediaUIEvents.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:hr});this.dispatchEvent(gr)}}GlobalThis.customElements.get("media-seek-backward-button")||GlobalThis.customElements.define("media-seek-backward-button",MediaSeekBackwardButton);const Attributes$6={SEEK_OFFSET:"seekoffset"},DEFAULT_SEEK_OFFSET=30,forwardIcon=`<svg aria-hidden="true" viewBox="0 0 20 24"><defs><style>.text{font-size:8px;font-family:Arial-BoldMT, Arial;font-weight:700;}</style></defs><text class="text value" transform="translate(8.9 19.87)">${DEFAULT_SEEK_OFFSET}</text><path d="M10 6V3l5.61 4L10 10.94V8a5.54 5.54 0 0 0-1.9 10.48v2.12A7.5 7.5 0 0 1 10 6Z"/></svg>`,slotTemplate$5=Document$2.createElement("template");slotTemplate$5.innerHTML=`
  <slot name="icon">${forwardIcon}</slot>
`;const DEFAULT_TIME=0;class MediaSeekForwardButton extends MediaChromeButton{static get observedAttributes(){return[...super.observedAttributes,MediaUIAttributes.MEDIA_CURRENT_TIME,Attributes$6.SEEK_OFFSET]}constructor(hr={}){super({slotTemplate:slotTemplate$5,tooltipContent:tooltipLabels.SEEK_FORWARD,...hr})}connectedCallback(){this.seekOffset=getNumericAttr(this,Attributes$6.SEEK_OFFSET,DEFAULT_SEEK_OFFSET),super.connectedCallback()}attributeChangedCallback(hr,gr,vr){hr===Attributes$6.SEEK_OFFSET&&(this.seekOffset=getNumericAttr(this,Attributes$6.SEEK_OFFSET,DEFAULT_SEEK_OFFSET)),super.attributeChangedCallback(hr,gr,vr)}get seekOffset(){return getNumericAttr(this,Attributes$6.SEEK_OFFSET,DEFAULT_SEEK_OFFSET)}set seekOffset(hr){setNumericAttr(this,Attributes$6.SEEK_OFFSET,hr),this.setAttribute("aria-label",verbs.SEEK_FORWARD_N_SECS({seekOffset:this.seekOffset})),updateIconText(getSlotted(this,"icon"),this.seekOffset)}get mediaCurrentTime(){return getNumericAttr(this,MediaUIAttributes.MEDIA_CURRENT_TIME,DEFAULT_TIME)}set mediaCurrentTime(hr){setNumericAttr(this,MediaUIAttributes.MEDIA_CURRENT_TIME,hr)}handleClick(){const hr=this.mediaCurrentTime+this.seekOffset,gr=new GlobalThis.CustomEvent(MediaUIEvents.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:hr});this.dispatchEvent(gr)}}GlobalThis.customElements.get("media-seek-forward-button")||GlobalThis.customElements.define("media-seek-forward-button",MediaSeekForwardButton);var __accessCheck$c=(mr,hr,gr)=>{if(!hr.has(mr))throw TypeError("Cannot "+gr)},__privateGet$b=(mr,hr,gr)=>(__accessCheck$c(mr,hr,"read from private field"),gr?gr.call(mr):hr.get(mr)),__privateAdd$c=(mr,hr,gr)=>{if(hr.has(mr))throw TypeError("Cannot add the same private member more than once");hr instanceof WeakSet?hr.add(mr):hr.set(mr,gr)},__privateSet$a=(mr,hr,gr,vr)=>(__accessCheck$c(mr,hr,"write to private field"),hr.set(mr,gr),gr),_slot;const Attributes$5={REMAINING:"remaining",SHOW_DURATION:"showduration",NO_TOGGLE:"notoggle"},CombinedAttributes=[...Object.values(Attributes$5),MediaUIAttributes.MEDIA_CURRENT_TIME,MediaUIAttributes.MEDIA_DURATION,MediaUIAttributes.MEDIA_SEEKABLE],ButtonPressedKeys=["Enter"," "],DEFAULT_TIMES_SEP="&nbsp;/&nbsp;",formatTimesLabel=(mr,{timesSep:hr=DEFAULT_TIMES_SEP}={})=>{var gr,vr;const xr=mr.hasAttribute(Attributes$5.REMAINING),Er=mr.hasAttribute(Attributes$5.SHOW_DURATION),Cr=(gr=mr.mediaCurrentTime)!=null?gr:0,[,wr]=(vr=mr.mediaSeekable)!=null?vr:[];let Rr=0;Number.isFinite(mr.mediaDuration)?Rr=mr.mediaDuration:Number.isFinite(wr)&&(Rr=wr);const kr=formatTime(xr?0-(Rr-Cr):Cr);return Er?`${kr}${hr}${formatTime(Rr)}`:kr},DEFAULT_MISSING_TIME_PHRASE$1="video not loaded, unknown time.",updateAriaValueText$1=mr=>{var hr;const gr=mr.mediaCurrentTime,[,vr]=(hr=mr.mediaSeekable)!=null?hr:[];let xr=null;if(Number.isFinite(mr.mediaDuration)?xr=mr.mediaDuration:Number.isFinite(vr)&&(xr=vr),gr==null||xr===null){mr.setAttribute("aria-valuetext",DEFAULT_MISSING_TIME_PHRASE$1);return}const Er=mr.hasAttribute(Attributes$5.REMAINING),Cr=mr.hasAttribute(Attributes$5.SHOW_DURATION),wr=formatAsTimePhrase(Er?0-(xr-gr):gr);if(!Cr){mr.setAttribute("aria-valuetext",wr);return}const Rr=formatAsTimePhrase(xr),kr=`${wr} of ${Rr}`;mr.setAttribute("aria-valuetext",kr)};class MediaTimeDisplay extends MediaTextDisplay{constructor(){super(),__privateAdd$c(this,_slot,void 0),__privateSet$a(this,_slot,this.shadowRoot.querySelector("slot")),__privateGet$b(this,_slot).innerHTML=`${formatTimesLabel(this)}`}static get observedAttributes(){return[...super.observedAttributes,...CombinedAttributes,"disabled"]}connectedCallback(){const{style:hr}=getOrInsertCSSRule(this.shadowRoot,":host(:hover:not([notoggle]))");hr.setProperty("cursor","pointer"),hr.setProperty("background","var(--media-control-hover-background, rgba(50 50 70 / .7))"),this.hasAttribute("disabled")||this.enable(),this.setAttribute("role","progressbar"),this.setAttribute("aria-label",nouns.PLAYBACK_TIME());const gr=vr=>{const{key:xr}=vr;if(!ButtonPressedKeys.includes(xr)){this.removeEventListener("keyup",gr);return}this.toggleTimeDisplay()};this.addEventListener("keydown",vr=>{const{metaKey:xr,altKey:Er,key:Cr}=vr;if(xr||Er||!ButtonPressedKeys.includes(Cr)){this.removeEventListener("keyup",gr);return}this.addEventListener("keyup",gr)}),this.addEventListener("click",this.toggleTimeDisplay),super.connectedCallback()}toggleTimeDisplay(){this.noToggle||(this.hasAttribute("remaining")?this.removeAttribute("remaining"):this.setAttribute("remaining",""))}disconnectedCallback(){this.disable(),super.disconnectedCallback()}attributeChangedCallback(hr,gr,vr){CombinedAttributes.includes(hr)?this.update():hr==="disabled"&&vr!==gr&&(vr==null?this.enable():this.disable()),super.attributeChangedCallback(hr,gr,vr)}enable(){this.tabIndex=0}disable(){this.tabIndex=-1}get remaining(){return getBooleanAttr(this,Attributes$5.REMAINING)}set remaining(hr){setBooleanAttr(this,Attributes$5.REMAINING,hr)}get showDuration(){return getBooleanAttr(this,Attributes$5.SHOW_DURATION)}set showDuration(hr){setBooleanAttr(this,Attributes$5.SHOW_DURATION,hr)}get noToggle(){return getBooleanAttr(this,Attributes$5.NO_TOGGLE)}set noToggle(hr){setBooleanAttr(this,Attributes$5.NO_TOGGLE,hr)}get mediaDuration(){return getNumericAttr(this,MediaUIAttributes.MEDIA_DURATION)}set mediaDuration(hr){setNumericAttr(this,MediaUIAttributes.MEDIA_DURATION,hr)}get mediaCurrentTime(){return getNumericAttr(this,MediaUIAttributes.MEDIA_CURRENT_TIME)}set mediaCurrentTime(hr){setNumericAttr(this,MediaUIAttributes.MEDIA_CURRENT_TIME,hr)}get mediaSeekable(){const hr=this.getAttribute(MediaUIAttributes.MEDIA_SEEKABLE);if(hr)return hr.split(":").map(gr=>+gr)}set mediaSeekable(hr){if(hr==null){this.removeAttribute(MediaUIAttributes.MEDIA_SEEKABLE);return}this.setAttribute(MediaUIAttributes.MEDIA_SEEKABLE,hr.join(":"))}update(){const hr=formatTimesLabel(this);updateAriaValueText$1(this),hr!==__privateGet$b(this,_slot).innerHTML&&(__privateGet$b(this,_slot).innerHTML=hr)}}_slot=new WeakMap;GlobalThis.customElements.get("media-time-display")||GlobalThis.customElements.define("media-time-display",MediaTimeDisplay);var __accessCheck$b=(mr,hr,gr)=>{if(!hr.has(mr))throw TypeError("Cannot "+gr)},__privateGet$a=(mr,hr,gr)=>(__accessCheck$b(mr,hr,"read from private field"),gr?gr.call(mr):hr.get(mr)),__privateAdd$b=(mr,hr,gr)=>{if(hr.has(mr))throw TypeError("Cannot add the same private member more than once");hr instanceof WeakSet?hr.add(mr):hr.set(mr,gr)},__privateSet$9=(mr,hr,gr,vr)=>(__accessCheck$b(mr,hr,"write to private field"),hr.set(mr,gr),gr),__privateWrapper=(mr,hr,gr,vr)=>({set _(xr){__privateSet$9(mr,hr,xr)},get _(){return __privateGet$a(mr,hr,vr)}}),_range,_startTime,_previousTime,_deltaTime,_frameCount,_updateTimestamp,_updateStartValue,_lastRangeIncrease,_id,_animate;class RangeAnimation{constructor(hr,gr,vr){__privateAdd$b(this,_range,void 0),__privateAdd$b(this,_startTime,void 0),__privateAdd$b(this,_previousTime,void 0),__privateAdd$b(this,_deltaTime,void 0),__privateAdd$b(this,_frameCount,void 0),__privateAdd$b(this,_updateTimestamp,void 0),__privateAdd$b(this,_updateStartValue,void 0),__privateAdd$b(this,_lastRangeIncrease,void 0),__privateAdd$b(this,_id,0),__privateAdd$b(this,_animate,(xr=performance.now())=>{__privateSet$9(this,_id,requestAnimationFrame(__privateGet$a(this,_animate))),__privateSet$9(this,_deltaTime,performance.now()-__privateGet$a(this,_previousTime));const Er=1e3/this.fps;if(__privateGet$a(this,_deltaTime)>Er){__privateSet$9(this,_previousTime,xr-__privateGet$a(this,_deltaTime)%Er);const Cr=1e3/((xr-__privateGet$a(this,_startTime))/++__privateWrapper(this,_frameCount)._),wr=(xr-__privateGet$a(this,_updateTimestamp))/1e3/this.duration;let Rr=__privateGet$a(this,_updateStartValue)+wr*this.playbackRate;Rr-__privateGet$a(this,_range).valueAsNumber>0?__privateSet$9(this,_lastRangeIncrease,this.playbackRate/this.duration/Cr):(__privateSet$9(this,_lastRangeIncrease,.995*__privateGet$a(this,_lastRangeIncrease)),Rr=__privateGet$a(this,_range).valueAsNumber+__privateGet$a(this,_lastRangeIncrease)),this.callback(Rr)}}),__privateSet$9(this,_range,hr),this.callback=gr,this.fps=vr}start(){__privateGet$a(this,_id)===0&&(__privateSet$9(this,_previousTime,performance.now()),__privateSet$9(this,_startTime,__privateGet$a(this,_previousTime)),__privateSet$9(this,_frameCount,0),__privateGet$a(this,_animate).call(this))}stop(){__privateGet$a(this,_id)!==0&&(cancelAnimationFrame(__privateGet$a(this,_id)),__privateSet$9(this,_id,0))}update({start:hr,duration:gr,playbackRate:vr}){const xr=hr-__privateGet$a(this,_range).valueAsNumber,Er=Math.abs(gr-this.duration);(xr>0||xr<-.03||Er>=.5)&&this.callback(hr),__privateSet$9(this,_updateStartValue,hr),__privateSet$9(this,_updateTimestamp,performance.now()),this.duration=gr,this.playbackRate=vr}}_range=new WeakMap;_startTime=new WeakMap;_previousTime=new WeakMap;_deltaTime=new WeakMap;_frameCount=new WeakMap;_updateTimestamp=new WeakMap;_updateStartValue=new WeakMap;_lastRangeIncrease=new WeakMap;_id=new WeakMap;_animate=new WeakMap;var __accessCheck$a=(mr,hr,gr)=>{if(!hr.has(mr))throw TypeError("Cannot "+gr)},__privateGet$9=(mr,hr,gr)=>(__accessCheck$a(mr,hr,"read from private field"),gr?gr.call(mr):hr.get(mr)),__privateAdd$a=(mr,hr,gr)=>{if(hr.has(mr))throw TypeError("Cannot add the same private member more than once");hr instanceof WeakSet?hr.add(mr):hr.set(mr,gr)},__privateSet$8=(mr,hr,gr,vr)=>(__accessCheck$a(mr,hr,"write to private field"),hr.set(mr,gr),gr),__privateMethod$7=(mr,hr,gr)=>(__accessCheck$a(mr,hr,"access private method"),gr),_rootNode,_animation,_boxes,_previewTime,_previewBox,_currentBox,_boxPaddingLeft,_boxPaddingRight,_mediaChaptersCues,_toggleRangeAnimation,toggleRangeAnimation_fn,_shouldRangeAnimate,shouldRangeAnimate_fn,_updateRange,_getElementRects,getElementRects_fn,_getBoxPosition,getBoxPosition_fn,_getBoxShiftPosition,getBoxShiftPosition_fn,_handlePointerMove,handlePointerMove_fn,_previewRequest,previewRequest_fn,_seekRequest,seekRequest_fn;const DEFAULT_MISSING_TIME_PHRASE="video not loaded, unknown time.",updateAriaValueText=mr=>{const hr=mr.range,gr=formatAsTimePhrase(+calcTimeFromRangeValue(mr)),vr=formatAsTimePhrase(+mr.mediaSeekableEnd),xr=gr&&vr?`${gr} of ${vr}`:DEFAULT_MISSING_TIME_PHRASE;hr.setAttribute("aria-valuetext",xr)},template$6=Document$2.createElement("template");template$6.innerHTML=`
  <style>
    :host {
      --media-box-border-radius: 4px;
      --media-box-padding-left: 10px;
      --media-box-padding-right: 10px;
      --media-preview-border-radius: var(--media-box-border-radius);
      --media-box-arrow-offset: var(--media-box-border-radius);
      --_control-background: var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .7)));
      --_preview-background: var(--media-preview-background, var(--_control-background));

      
      contain: layout;
    }

    #buffered {
      background: var(--media-time-range-buffered-color, rgb(255 255 255 / .4));
      position: absolute;
      height: 100%;
      will-change: width;
    }

    #preview-rail,
    #current-rail {
      width: 100%;
      position: absolute;
      left: 0;
      bottom: 100%;
      pointer-events: none;
      will-change: transform;
    }

    [part~="box"] {
      width: min-content;
      
      position: absolute;
      bottom: 100%;
      flex-direction: column;
      align-items: center;
      transform: translateX(-50%);
    }

    [part~="current-box"] {
      display: var(--media-current-box-display, var(--media-box-display, flex));
      margin: var(--media-current-box-margin, var(--media-box-margin, 0 0 5px));
      visibility: hidden;
    }

    [part~="preview-box"] {
      display: var(--media-preview-box-display, var(--media-box-display, flex));
      margin: var(--media-preview-box-margin, var(--media-box-margin, 0 0 5px));
      transition-property: var(--media-preview-transition-property, visibility, opacity);
      transition-duration: var(--media-preview-transition-duration-out, .25s);
      transition-delay: var(--media-preview-transition-delay-out, 0s);
      visibility: hidden;
      opacity: 0;
    }

    :host(:is([${MediaUIAttributes.MEDIA_PREVIEW_IMAGE}], [${MediaUIAttributes.MEDIA_PREVIEW_TIME}])[dragging]) [part~="preview-box"] {
      transition-duration: var(--media-preview-transition-duration-in, .5s);
      transition-delay: var(--media-preview-transition-delay-in, .25s);
      visibility: visible;
      opacity: 1;
    }

    @media (hover: hover) {
      :host(:is([${MediaUIAttributes.MEDIA_PREVIEW_IMAGE}], [${MediaUIAttributes.MEDIA_PREVIEW_TIME}]):hover) [part~="preview-box"] {
        transition-duration: var(--media-preview-transition-duration-in, .5s);
        transition-delay: var(--media-preview-transition-delay-in, .25s);
        visibility: visible;
        opacity: 1;
      }
    }

    media-preview-thumbnail,
    ::slotted(media-preview-thumbnail) {
      visibility: hidden;
      
      transition: visibility 0s .25s;
      transition-delay: calc(var(--media-preview-transition-delay-out, 0s) + var(--media-preview-transition-duration-out, .25s));
      background: var(--media-preview-thumbnail-background, var(--_preview-background));
      box-shadow: var(--media-preview-thumbnail-box-shadow, 0 0 4px rgb(0 0 0 / .2));
      max-width: var(--media-preview-thumbnail-max-width, 180px);
      max-height: var(--media-preview-thumbnail-max-height, 160px);
      min-width: var(--media-preview-thumbnail-min-width, 120px);
      min-height: var(--media-preview-thumbnail-min-height, 80px);
      border: var(--media-preview-thumbnail-border);
      border-radius: var(--media-preview-thumbnail-border-radius,
        var(--media-preview-border-radius) var(--media-preview-border-radius) 0 0);
    }

    :host([${MediaUIAttributes.MEDIA_PREVIEW_IMAGE}][dragging]) media-preview-thumbnail,
    :host([${MediaUIAttributes.MEDIA_PREVIEW_IMAGE}][dragging]) ::slotted(media-preview-thumbnail) {
      transition-delay: var(--media-preview-transition-delay-in, .25s);
      visibility: visible;
    }

    @media (hover: hover) {
      :host([${MediaUIAttributes.MEDIA_PREVIEW_IMAGE}]:hover) media-preview-thumbnail,
      :host([${MediaUIAttributes.MEDIA_PREVIEW_IMAGE}]:hover) ::slotted(media-preview-thumbnail) {
        transition-delay: var(--media-preview-transition-delay-in, .25s);
        visibility: visible;
      }

      :host([${MediaUIAttributes.MEDIA_PREVIEW_TIME}]:hover) {
        --media-time-range-hover-display: block;
      }
    }

    media-preview-chapter-display,
    ::slotted(media-preview-chapter-display) {
      font-size: var(--media-font-size, 13px);
      line-height: 17px;
      min-width: 0;
      visibility: hidden;
      
      transition: min-width 0s, border-radius 0s, margin 0s, padding 0s, visibility 0s;
      transition-delay: calc(var(--media-preview-transition-delay-out, 0s) + var(--media-preview-transition-duration-out, .25s));
      background: var(--media-preview-chapter-background, var(--_preview-background));
      border-radius: var(--media-preview-chapter-border-radius,
        var(--media-preview-border-radius) var(--media-preview-border-radius)
        var(--media-preview-border-radius) var(--media-preview-border-radius));
      padding: var(--media-preview-chapter-padding, 3.5px 9px);
      margin: var(--media-preview-chapter-margin, 0 0 5px);
      text-shadow: var(--media-preview-chapter-text-shadow, 0 0 4px rgb(0 0 0 / .75));
    }

    :host([${MediaUIAttributes.MEDIA_PREVIEW_IMAGE}]) media-preview-chapter-display,
    :host([${MediaUIAttributes.MEDIA_PREVIEW_IMAGE}]) ::slotted(media-preview-chapter-display) {
      transition-delay: var(--media-preview-transition-delay-in, .25s);
      border-radius: var(--media-preview-chapter-border-radius, 0);
      padding: var(--media-preview-chapter-padding, 3.5px 9px 0);
      margin: var(--media-preview-chapter-margin, 0);
      min-width: 100%;
    }

    media-preview-chapter-display[${MediaUIAttributes.MEDIA_PREVIEW_CHAPTER}],
    ::slotted(media-preview-chapter-display[${MediaUIAttributes.MEDIA_PREVIEW_CHAPTER}]) {
      visibility: visible;
    }

    media-preview-chapter-display:not([aria-valuetext]),
    ::slotted(media-preview-chapter-display:not([aria-valuetext])) {
      display: none;
    }

    media-preview-time-display,
    ::slotted(media-preview-time-display),
    media-time-display,
    ::slotted(media-time-display) {
      font-size: var(--media-font-size, 13px);
      line-height: 17px;
      min-width: 0;
      
      transition: min-width 0s, border-radius 0s;
      transition-delay: calc(var(--media-preview-transition-delay-out, 0s) + var(--media-preview-transition-duration-out, .25s));
      background: var(--media-preview-time-background, var(--_preview-background));
      border-radius: var(--media-preview-time-border-radius,
        var(--media-preview-border-radius) var(--media-preview-border-radius)
        var(--media-preview-border-radius) var(--media-preview-border-radius));
      padding: var(--media-preview-time-padding, 3.5px 9px);
      margin: var(--media-preview-time-margin, 0);
      text-shadow: var(--media-preview-time-text-shadow, 0 0 4px rgb(0 0 0 / .75));
      transform: translateX(min(
        max(calc(50% - var(--_box-width) / 2),
        calc(var(--_box-shift, 0))),
        calc(var(--_box-width) / 2 - 50%)
      ));
    }

    :host([${MediaUIAttributes.MEDIA_PREVIEW_IMAGE}]) media-preview-time-display,
    :host([${MediaUIAttributes.MEDIA_PREVIEW_IMAGE}]) ::slotted(media-preview-time-display) {
      transition-delay: var(--media-preview-transition-delay-in, .25s);
      border-radius: var(--media-preview-time-border-radius,
        0 0 var(--media-preview-border-radius) var(--media-preview-border-radius));
      min-width: 100%;
    }

    :host([${MediaUIAttributes.MEDIA_PREVIEW_TIME}]:hover) {
      --media-time-range-hover-display: block;
    }

    [part~="arrow"],
    ::slotted([part~="arrow"]) {
      display: var(--media-box-arrow-display, inline-block);
      transform: translateX(min(
        max(calc(50% - var(--_box-width) / 2 + var(--media-box-arrow-offset)),
        calc(var(--_box-shift, 0))),
        calc(var(--_box-width) / 2 - 50% - var(--media-box-arrow-offset))
      ));
      
      border-color: transparent;
      border-top-color: var(--media-box-arrow-background, var(--_control-background));
      border-width: var(--media-box-arrow-border-width,
        var(--media-box-arrow-height, 5px) var(--media-box-arrow-width, 6px) 0);
      border-style: solid;
      justify-content: center;
      height: 0;
    }
  </style>
  <div id="preview-rail">
    <slot name="preview" part="box preview-box">
      <media-preview-thumbnail></media-preview-thumbnail>
      <media-preview-chapter-display></media-preview-chapter-display>
      <media-preview-time-display></media-preview-time-display>
      <slot name="preview-arrow"><div part="arrow"></div></slot>
    </slot>
  </div>
  <div id="current-rail">
    <slot name="current" part="box current-box">
      
    </slot>
  </div>
`;const calcRangeValueFromTime=(mr,hr=mr.mediaCurrentTime)=>{const gr=Number.isFinite(mr.mediaSeekableStart)?mr.mediaSeekableStart:0,vr=Number.isFinite(mr.mediaDuration)?mr.mediaDuration:mr.mediaSeekableEnd;if(Number.isNaN(vr))return 0;const xr=(hr-gr)/(vr-gr);return Math.max(0,Math.min(xr,1))},calcTimeFromRangeValue=(mr,hr=mr.range.valueAsNumber)=>{const gr=Number.isFinite(mr.mediaSeekableStart)?mr.mediaSeekableStart:0,vr=Number.isFinite(mr.mediaDuration)?mr.mediaDuration:mr.mediaSeekableEnd;return Number.isNaN(vr)?0:hr*(vr-gr)+gr};class MediaTimeRange extends MediaChromeRange{constructor(){super(),__privateAdd$a(this,_toggleRangeAnimation),__privateAdd$a(this,_shouldRangeAnimate),__privateAdd$a(this,_getElementRects),__privateAdd$a(this,_getBoxPosition),__privateAdd$a(this,_getBoxShiftPosition),__privateAdd$a(this,_handlePointerMove),__privateAdd$a(this,_previewRequest),__privateAdd$a(this,_seekRequest),__privateAdd$a(this,_rootNode,void 0),__privateAdd$a(this,_animation,void 0),__privateAdd$a(this,_boxes,void 0),__privateAdd$a(this,_previewTime,void 0),__privateAdd$a(this,_previewBox,void 0),__privateAdd$a(this,_currentBox,void 0),__privateAdd$a(this,_boxPaddingLeft,void 0),__privateAdd$a(this,_boxPaddingRight,void 0),__privateAdd$a(this,_mediaChaptersCues,void 0),__privateAdd$a(this,_updateRange,vr=>{this.dragging||(isValidNumber(vr)&&(this.range.valueAsNumber=vr),this.updateBar())}),this.container.appendChild(template$6.content.cloneNode(!0)),this.shadowRoot.querySelector("#track").insertAdjacentHTML("afterbegin",'<div id="buffered" part="buffered"></div>'),__privateSet$8(this,_boxes,this.shadowRoot.querySelectorAll('[part~="box"]')),__privateSet$8(this,_previewBox,this.shadowRoot.querySelector('[part~="preview-box"]')),__privateSet$8(this,_currentBox,this.shadowRoot.querySelector('[part~="current-box"]'));const gr=getComputedStyle(this);__privateSet$8(this,_boxPaddingLeft,parseInt(gr.getPropertyValue("--media-box-padding-left"))),__privateSet$8(this,_boxPaddingRight,parseInt(gr.getPropertyValue("--media-box-padding-right"))),__privateSet$8(this,_animation,new RangeAnimation(this.range,__privateGet$9(this,_updateRange),60))}static get observedAttributes(){return[...super.observedAttributes,MediaUIAttributes.MEDIA_PAUSED,MediaUIAttributes.MEDIA_DURATION,MediaUIAttributes.MEDIA_SEEKABLE,MediaUIAttributes.MEDIA_CURRENT_TIME,MediaUIAttributes.MEDIA_PREVIEW_IMAGE,MediaUIAttributes.MEDIA_PREVIEW_TIME,MediaUIAttributes.MEDIA_PREVIEW_CHAPTER,MediaUIAttributes.MEDIA_BUFFERED,MediaUIAttributes.MEDIA_PLAYBACK_RATE,MediaUIAttributes.MEDIA_LOADING,MediaUIAttributes.MEDIA_ENDED]}connectedCallback(){var hr;super.connectedCallback(),this.range.setAttribute("aria-label",nouns.SEEK()),__privateMethod$7(this,_toggleRangeAnimation,toggleRangeAnimation_fn).call(this),__privateSet$8(this,_rootNode,this.getRootNode()),(hr=__privateGet$9(this,_rootNode))==null||hr.addEventListener("transitionstart",this)}disconnectedCallback(){var hr;super.disconnectedCallback(),__privateMethod$7(this,_toggleRangeAnimation,toggleRangeAnimation_fn).call(this),(hr=__privateGet$9(this,_rootNode))==null||hr.removeEventListener("transitionstart",this),__privateSet$8(this,_rootNode,null)}attributeChangedCallback(hr,gr,vr){super.attributeChangedCallback(hr,gr,vr),gr!=vr&&(hr===MediaUIAttributes.MEDIA_CURRENT_TIME||hr===MediaUIAttributes.MEDIA_PAUSED||hr===MediaUIAttributes.MEDIA_ENDED||hr===MediaUIAttributes.MEDIA_LOADING||hr===MediaUIAttributes.MEDIA_DURATION||hr===MediaUIAttributes.MEDIA_SEEKABLE?(__privateGet$9(this,_animation).update({start:calcRangeValueFromTime(this),duration:this.mediaSeekableEnd-this.mediaSeekableStart,playbackRate:this.mediaPlaybackRate}),__privateMethod$7(this,_toggleRangeAnimation,toggleRangeAnimation_fn).call(this),updateAriaValueText(this)):hr===MediaUIAttributes.MEDIA_BUFFERED&&this.updateBufferedBar(),(hr===MediaUIAttributes.MEDIA_DURATION||hr===MediaUIAttributes.MEDIA_SEEKABLE)&&(this.mediaChaptersCues=__privateGet$9(this,_mediaChaptersCues),this.updateBar()))}get mediaChaptersCues(){return __privateGet$9(this,_mediaChaptersCues)}set mediaChaptersCues(hr){var gr;__privateSet$8(this,_mediaChaptersCues,hr),this.updateSegments((gr=__privateGet$9(this,_mediaChaptersCues))==null?void 0:gr.map(vr=>({start:calcRangeValueFromTime(this,vr.startTime),end:calcRangeValueFromTime(this,vr.endTime)})))}get mediaPaused(){return getBooleanAttr(this,MediaUIAttributes.MEDIA_PAUSED)}set mediaPaused(hr){setBooleanAttr(this,MediaUIAttributes.MEDIA_PAUSED,hr)}get mediaLoading(){return getBooleanAttr(this,MediaUIAttributes.MEDIA_LOADING)}set mediaLoading(hr){setBooleanAttr(this,MediaUIAttributes.MEDIA_LOADING,hr)}get mediaDuration(){return getNumericAttr(this,MediaUIAttributes.MEDIA_DURATION)}set mediaDuration(hr){setNumericAttr(this,MediaUIAttributes.MEDIA_DURATION,hr)}get mediaCurrentTime(){return getNumericAttr(this,MediaUIAttributes.MEDIA_CURRENT_TIME)}set mediaCurrentTime(hr){setNumericAttr(this,MediaUIAttributes.MEDIA_CURRENT_TIME,hr)}get mediaPlaybackRate(){return getNumericAttr(this,MediaUIAttributes.MEDIA_PLAYBACK_RATE,1)}set mediaPlaybackRate(hr){setNumericAttr(this,MediaUIAttributes.MEDIA_PLAYBACK_RATE,hr)}get mediaBuffered(){const hr=this.getAttribute(MediaUIAttributes.MEDIA_BUFFERED);return hr?hr.split(" ").map(gr=>gr.split(":").map(vr=>+vr)):[]}set mediaBuffered(hr){if(!hr){this.removeAttribute(MediaUIAttributes.MEDIA_BUFFERED);return}const gr=hr.map(vr=>vr.join(":")).join(" ");this.setAttribute(MediaUIAttributes.MEDIA_BUFFERED,gr)}get mediaSeekable(){const hr=this.getAttribute(MediaUIAttributes.MEDIA_SEEKABLE);if(hr)return hr.split(":").map(gr=>+gr)}set mediaSeekable(hr){if(hr==null){this.removeAttribute(MediaUIAttributes.MEDIA_SEEKABLE);return}this.setAttribute(MediaUIAttributes.MEDIA_SEEKABLE,hr.join(":"))}get mediaSeekableEnd(){var hr;const[,gr=this.mediaDuration]=(hr=this.mediaSeekable)!=null?hr:[];return gr}get mediaSeekableStart(){var hr;const[gr=0]=(hr=this.mediaSeekable)!=null?hr:[];return gr}get mediaPreviewImage(){return getStringAttr(this,MediaUIAttributes.MEDIA_PREVIEW_IMAGE)}set mediaPreviewImage(hr){setStringAttr(this,MediaUIAttributes.MEDIA_PREVIEW_IMAGE,hr)}get mediaPreviewTime(){return getNumericAttr(this,MediaUIAttributes.MEDIA_PREVIEW_TIME)}set mediaPreviewTime(hr){setNumericAttr(this,MediaUIAttributes.MEDIA_PREVIEW_TIME,hr)}get mediaEnded(){return getBooleanAttr(this,MediaUIAttributes.MEDIA_ENDED)}set mediaEnded(hr){setBooleanAttr(this,MediaUIAttributes.MEDIA_ENDED,hr)}updateBar(){super.updateBar(),this.updateBufferedBar(),this.updateCurrentBox()}updateBufferedBar(){var hr;const gr=this.mediaBuffered;if(!gr.length)return;let vr;if(this.mediaEnded)vr=1;else{const Er=this.mediaCurrentTime,[,Cr=this.mediaSeekableStart]=(hr=gr.find(([wr,Rr])=>wr<=Er&&Er<=Rr))!=null?hr:[];vr=calcRangeValueFromTime(this,Cr)}const{style:xr}=getOrInsertCSSRule(this.shadowRoot,"#buffered");xr.setProperty("width",`${vr*100}%`)}updateCurrentBox(){if(!this.shadowRoot.querySelector('slot[name="current"]').assignedElements().length)return;const gr=getOrInsertCSSRule(this.shadowRoot,"#current-rail"),vr=getOrInsertCSSRule(this.shadowRoot,'[part~="current-box"]'),xr=__privateMethod$7(this,_getElementRects,getElementRects_fn).call(this,__privateGet$9(this,_currentBox)),Er=__privateMethod$7(this,_getBoxPosition,getBoxPosition_fn).call(this,xr,this.range.valueAsNumber),Cr=__privateMethod$7(this,_getBoxShiftPosition,getBoxShiftPosition_fn).call(this,xr,this.range.valueAsNumber);gr.style.transform=`translateX(${Er})`,gr.style.setProperty("--_range-width",`${xr.range.width}`),vr.style.setProperty("--_box-shift",`${Cr}`),vr.style.setProperty("--_box-width",`${xr.box.width}px`),vr.style.setProperty("visibility","initial")}handleEvent(hr){switch(super.handleEvent(hr),hr.type){case"input":__privateMethod$7(this,_seekRequest,seekRequest_fn).call(this);break;case"pointermove":__privateMethod$7(this,_handlePointerMove,handlePointerMove_fn).call(this,hr);break;case"pointerup":case"pointerleave":__privateMethod$7(this,_previewRequest,previewRequest_fn).call(this,null);break;case"transitionstart":containsComposedNode(hr.target,this)&&setTimeout(()=>__privateMethod$7(this,_toggleRangeAnimation,toggleRangeAnimation_fn).call(this),0);break}}}_rootNode=new WeakMap;_animation=new WeakMap;_boxes=new WeakMap;_previewTime=new WeakMap;_previewBox=new WeakMap;_currentBox=new WeakMap;_boxPaddingLeft=new WeakMap;_boxPaddingRight=new WeakMap;_mediaChaptersCues=new WeakMap;_toggleRangeAnimation=new WeakSet;toggleRangeAnimation_fn=function(){__privateMethod$7(this,_shouldRangeAnimate,shouldRangeAnimate_fn).call(this)?__privateGet$9(this,_animation).start():__privateGet$9(this,_animation).stop()};_shouldRangeAnimate=new WeakSet;shouldRangeAnimate_fn=function(){return this.isConnected&&!this.mediaPaused&&!this.mediaLoading&&!this.mediaEnded&&this.mediaSeekableEnd>0&&isElementVisible(this)};_updateRange=new WeakMap;_getElementRects=new WeakSet;getElementRects_fn=function(mr){var hr;const vr=((hr=this.getAttribute("bounds")?closestComposedNode(this,`#${this.getAttribute("bounds")}`):this.parentElement)!=null?hr:this).getBoundingClientRect(),xr=this.range.getBoundingClientRect(),Er=mr.offsetWidth,Cr=-(xr.left-vr.left-Er/2),wr=vr.right-xr.left-Er/2;return{box:{width:Er,min:Cr,max:wr},bounds:vr,range:xr}};_getBoxPosition=new WeakSet;getBoxPosition_fn=function(mr,hr){let gr=`${hr*100}%`;const{width:vr,min:xr,max:Er}=mr.box;if(!vr)return gr;if(Number.isNaN(xr)||(gr=`max(${`calc(1 / var(--_range-width) * 100 * ${xr}% + var(--media-box-padding-left))`}, ${gr})`),!Number.isNaN(Er)){const wr=`calc(1 / var(--_range-width) * 100 * ${Er}% - var(--media-box-padding-right))`;gr=`min(${gr}, ${wr})`}return gr};_getBoxShiftPosition=new WeakSet;getBoxShiftPosition_fn=function(mr,hr){const{width:gr,min:vr,max:xr}=mr.box,Er=hr*mr.range.width;if(Er<vr+__privateGet$9(this,_boxPaddingLeft)){const Cr=mr.range.left-mr.bounds.left-__privateGet$9(this,_boxPaddingLeft);return`${Er-gr/2+Cr}px`}if(Er>xr-__privateGet$9(this,_boxPaddingRight)){const Cr=mr.bounds.right-mr.range.right-__privateGet$9(this,_boxPaddingRight);return`${Er+gr/2-Cr-mr.range.width}px`}return 0};_handlePointerMove=new WeakSet;handlePointerMove_fn=function(mr){const hr=[...__privateGet$9(this,_boxes)].some(Dr=>mr.composedPath().includes(Dr));if(!this.dragging&&(hr||!mr.composedPath().includes(this))){__privateMethod$7(this,_previewRequest,previewRequest_fn).call(this,null);return}const gr=this.mediaSeekableEnd;if(!gr)return;const vr=getOrInsertCSSRule(this.shadowRoot,"#preview-rail"),xr=getOrInsertCSSRule(this.shadowRoot,'[part~="preview-box"]'),Er=__privateMethod$7(this,_getElementRects,getElementRects_fn).call(this,__privateGet$9(this,_previewBox));let Cr=(mr.clientX-Er.range.left)/Er.range.width;Cr=Math.max(0,Math.min(1,Cr));const wr=__privateMethod$7(this,_getBoxPosition,getBoxPosition_fn).call(this,Er,Cr),Rr=__privateMethod$7(this,_getBoxShiftPosition,getBoxShiftPosition_fn).call(this,Er,Cr);vr.style.transform=`translateX(${wr})`,vr.style.setProperty("--_range-width",`${Er.range.width}`),xr.style.setProperty("--_box-shift",`${Rr}`),xr.style.setProperty("--_box-width",`${Er.box.width}px`);const kr=Math.round(__privateGet$9(this,_previewTime))-Math.round(Cr*gr);Math.abs(kr)<1&&Cr>.01&&Cr<.99||(__privateSet$8(this,_previewTime,Cr*gr),__privateMethod$7(this,_previewRequest,previewRequest_fn).call(this,__privateGet$9(this,_previewTime)))};_previewRequest=new WeakSet;previewRequest_fn=function(mr){this.dispatchEvent(new GlobalThis.CustomEvent(MediaUIEvents.MEDIA_PREVIEW_REQUEST,{composed:!0,bubbles:!0,detail:mr}))};_seekRequest=new WeakSet;seekRequest_fn=function(){__privateGet$9(this,_animation).stop();const mr=calcTimeFromRangeValue(this);this.dispatchEvent(new GlobalThis.CustomEvent(MediaUIEvents.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:mr}))};GlobalThis.customElements.get("media-time-range")||GlobalThis.customElements.define("media-time-range",MediaTimeRange);const Attributes$4={PLACEMENT:"placement",BOUNDS:"bounds"},template$5=Document$2.createElement("template");template$5.innerHTML=`
  <style>
    :host {
      --_tooltip-background-color: var(--media-tooltip-background-color, var(--media-secondary-color, rgba(20, 20, 30, .7)));
      --_tooltip-background: var(--media-tooltip-background, var(--_tooltip-background-color));
      --_tooltip-arrow-half-width: calc(var(--media-tooltip-arrow-width, 12px) / 2);
      --_tooltip-arrow-height: var(--media-tooltip-arrow-height, 5px);
      --_tooltip-arrow-background: var(--media-tooltip-arrow-color, var(--_tooltip-background-color));
      position: relative;
      pointer-events: none;
      display: var(--media-tooltip-display, inline-flex);
      justify-content: center;
      align-items: center;
      box-sizing: border-box;
      z-index: var(--media-tooltip-z-index, 1);
      background: var(--_tooltip-background);
      color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));
      font: var(--media-font,
        var(--media-font-weight, 400)
        var(--media-font-size, 13px) /
        var(--media-text-content-height, var(--media-control-height, 18px))
        var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));
      padding: var(--media-tooltip-padding, .35em .7em);
      border: var(--media-tooltip-border, none);
      border-radius: var(--media-tooltip-border-radius, 5px);
      filter: var(--media-tooltip-filter, drop-shadow(0 0 4px rgba(0, 0, 0, .2)));
      white-space: var(--media-tooltip-white-space, nowrap);
    }

    :host([hidden]) {
      display: none;
    }

    img, svg {
      display: inline-block;
    }

    #arrow {
      position: absolute;
      width: 0px;
      height: 0px;
      border-style: solid;
      display: var(--media-tooltip-arrow-display, block);
    }

    :host(:not([placement])),
    :host([placement="top"]) {
      position: absolute;
      bottom: calc(100% + var(--media-tooltip-distance, 12px));
      left: 50%;
      transform: translate(calc(-50% - var(--media-tooltip-offset-x, 0px)), 0);
    }
    :host(:not([placement])) #arrow,
    :host([placement="top"]) #arrow {
      top: 100%;
      left: 50%;
      border-width: var(--_tooltip-arrow-height) var(--_tooltip-arrow-half-width) 0 var(--_tooltip-arrow-half-width);
      border-color: var(--_tooltip-arrow-background) transparent transparent transparent;
      transform: translate(calc(-50% + var(--media-tooltip-offset-x, 0px)), 0);
    }

    :host([placement="right"]) {
      position: absolute;
      left: calc(100% + var(--media-tooltip-distance, 12px));
      top: 50%;
      transform: translate(0, -50%);
    }
    :host([placement="right"]) #arrow {
      top: 50%;
      right: 100%;
      border-width: var(--_tooltip-arrow-half-width) var(--_tooltip-arrow-height) var(--_tooltip-arrow-half-width) 0;
      border-color: transparent var(--_tooltip-arrow-background) transparent transparent;
      transform: translate(0, -50%);
    }

    :host([placement="bottom"]) {
      position: absolute;
      top: calc(100% + var(--media-tooltip-distance, 12px));
      left: 50%;
      transform: translate(calc(-50% - var(--media-tooltip-offset-x, 0px)), 0);
    }
    :host([placement="bottom"]) #arrow {
      bottom: 100%;
      left: 50%;
      border-width: 0 var(--_tooltip-arrow-half-width) var(--_tooltip-arrow-height) var(--_tooltip-arrow-half-width);
      border-color: transparent transparent var(--_tooltip-arrow-background) transparent;
      transform: translate(calc(-50% + var(--media-tooltip-offset-x, 0px)), 0);
    }

    :host([placement="left"]) {
      position: absolute;
      right: calc(100% + var(--media-tooltip-distance, 12px));
      top: 50%;
      transform: translate(0, -50%);
    }
    :host([placement="left"]) #arrow {
      top: 50%;
      left: 100%;
      border-width: var(--_tooltip-arrow-half-width) 0 var(--_tooltip-arrow-half-width) var(--_tooltip-arrow-height);
      border-color: transparent transparent transparent var(--_tooltip-arrow-background);
      transform: translate(0, -50%);
    }
    
    :host([placement="none"]) #arrow {
      display: none;
    }

  </style>
  <slot></slot>
  <div id="arrow"></div>
`;class MediaTooltip extends GlobalThis.HTMLElement{constructor(){if(super(),this.updateXOffset=()=>{var hr;if(!isElementVisible(this,{checkOpacity:!1,checkVisibilityCSS:!1}))return;const gr=this.placement;if(gr==="left"||gr==="right"){this.style.removeProperty("--media-tooltip-offset-x");return}const vr=getComputedStyle(this),xr=(hr=closestComposedNode(this,"#"+this.bounds))!=null?hr:getMediaController(this);if(!xr)return;const{x:Er,width:Cr}=xr.getBoundingClientRect(),{x:wr,width:Rr}=this.getBoundingClientRect(),kr=wr+Rr,Dr=Er+Cr,Br=vr.getPropertyValue("--media-tooltip-offset-x"),Hr=Br?parseFloat(Br.replace("px","")):0,Gr=vr.getPropertyValue("--media-tooltip-container-margin"),qr=Gr?parseFloat(Gr.replace("px","")):0,zr=wr-Er+Hr-qr,Qr=kr-Dr+Hr+qr;if(zr<0){this.style.setProperty("--media-tooltip-offset-x",`${zr}px`);return}if(Qr>0){this.style.setProperty("--media-tooltip-offset-x",`${Qr}px`);return}this.style.removeProperty("--media-tooltip-offset-x")},this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(template$5.content.cloneNode(!0))),this.arrowEl=this.shadowRoot.querySelector("#arrow"),Object.prototype.hasOwnProperty.call(this,"placement")){const hr=this.placement;delete this.placement,this.placement=hr}}static get observedAttributes(){return[Attributes$4.PLACEMENT,Attributes$4.BOUNDS]}get placement(){return getStringAttr(this,Attributes$4.PLACEMENT)}set placement(hr){setStringAttr(this,Attributes$4.PLACEMENT,hr)}get bounds(){return getStringAttr(this,Attributes$4.BOUNDS)}set bounds(hr){setStringAttr(this,Attributes$4.BOUNDS,hr)}}GlobalThis.customElements.get("media-tooltip")||GlobalThis.customElements.define("media-tooltip",MediaTooltip);const DEFAULT_VOLUME=1,toVolume=mr=>mr.mediaMuted?0:mr.mediaVolume,formatAsPercentString=mr=>`${Math.round(mr*100)}%`;class MediaVolumeRange extends MediaChromeRange{static get observedAttributes(){return[...super.observedAttributes,MediaUIAttributes.MEDIA_VOLUME,MediaUIAttributes.MEDIA_MUTED,MediaUIAttributes.MEDIA_VOLUME_UNAVAILABLE]}constructor(){super(),this.range.addEventListener("input",()=>{const hr=this.range.value,gr=new GlobalThis.CustomEvent(MediaUIEvents.MEDIA_VOLUME_REQUEST,{composed:!0,bubbles:!0,detail:hr});this.dispatchEvent(gr)})}connectedCallback(){super.connectedCallback(),this.range.setAttribute("aria-label",nouns.VOLUME())}attributeChangedCallback(hr,gr,vr){super.attributeChangedCallback(hr,gr,vr),(hr===MediaUIAttributes.MEDIA_VOLUME||hr===MediaUIAttributes.MEDIA_MUTED)&&(this.range.valueAsNumber=toVolume(this),this.range.setAttribute("aria-valuetext",formatAsPercentString(this.range.valueAsNumber)),this.updateBar())}get mediaVolume(){return getNumericAttr(this,MediaUIAttributes.MEDIA_VOLUME,DEFAULT_VOLUME)}set mediaVolume(hr){setNumericAttr(this,MediaUIAttributes.MEDIA_VOLUME,hr)}get mediaMuted(){return getBooleanAttr(this,MediaUIAttributes.MEDIA_MUTED)}set mediaMuted(hr){setBooleanAttr(this,MediaUIAttributes.MEDIA_MUTED,hr)}get mediaVolumeUnavailable(){return getStringAttr(this,MediaUIAttributes.MEDIA_VOLUME_UNAVAILABLE)}set mediaVolumeUnavailable(hr){setStringAttr(this,MediaUIAttributes.MEDIA_VOLUME_UNAVAILABLE,hr)}}GlobalThis.customElements.get("media-volume-range")||GlobalThis.customElements.define("media-volume-range",MediaVolumeRange);var di=Object.defineProperty,ui=Object.getPrototypeOf,ci=Reflect.get,hi=(mr,hr,gr)=>hr in mr?di(mr,hr,{enumerable:!0,configurable:!0,writable:!0,value:gr}):mr[hr]=gr,E$2=(mr,hr,gr)=>(hi(mr,typeof hr!="symbol"?hr+"":hr,gr),gr),ge$2=(mr,hr,gr)=>{if(!hr.has(mr))throw TypeError("Cannot "+gr)},i$1=(mr,hr,gr)=>(ge$2(mr,hr,"read from private field"),gr?gr.call(mr):hr.get(mr)),u$1=(mr,hr,gr)=>{if(hr.has(mr))throw TypeError("Cannot add the same private member more than once");hr instanceof WeakSet?hr.add(mr):hr.set(mr,gr)},h$1=(mr,hr,gr,vr)=>(ge$2(mr,hr,"write to private field"),hr.set(mr,gr),gr),A=(mr,hr,gr)=>(ge$2(mr,hr,"access private method"),gr),Jt$1=(mr,hr,gr)=>ci(ui(mr),gr,hr),Et$1=class{addEventListener(){}removeEventListener(){}dispatchEvent(hr){return!0}};if(typeof DocumentFragment>"u"){class mr extends Et$1{}globalThis.DocumentFragment=mr}var wt=class extends Et$1{},Ee$2=class extends Et$1{},li={get(mr){},define(mr,hr,gr){},getName(mr){return null},upgrade(mr){},whenDefined(mr){return Promise.resolve(wt)}},xt$1,Te$1=class{constructor(hr,gr={}){u$1(this,xt$1,void 0),h$1(this,xt$1,gr?.detail)}get detail(){return i$1(this,xt$1)}initCustomEvent(){}};xt$1=new WeakMap;function fi(mr,hr){return new wt}var Oe$1={document:{createElement:fi},DocumentFragment,customElements:li,CustomEvent:Te$1,EventTarget:Et$1,HTMLElement:wt,HTMLVideoElement:Ee$2},Pe$1=typeof window>"u"||typeof globalThis.customElements>"u",Qt=Pe$1?Oe$1:globalThis,mi=()=>{try{return"0.22.0"}catch{}return"UNKNOWN"},pi=mi(),Ie$1=()=>pi,ve$1=["abort","canplay","canplaythrough","durationchange","emptied","encrypted","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting","waitingforkey","resize","enterpictureinpicture","leavepictureinpicture","webkitbeginfullscreen","webkitendfullscreen","webkitpresentationmodechanged"];function gi(mr){return`
    <style>
      :host {
        display: inline-flex;
        line-height: 0;
        flex-direction: column;
        justify-content: end;
      }

      audio {
        width: 100%;
      }
    </style>
    <slot name="media">
      <audio${Ve$1(mr)}></audio>
    </slot>
    <slot></slot>
  `}function Ei(mr){return`
    <style>
      :host {
        display: inline-block;
        line-height: 0;
      }

      video {
        max-width: 100%;
        max-height: 100%;
        min-width: 100%;
        min-height: 100%;
        object-fit: var(--media-object-fit, contain);
        object-position: var(--media-object-position, 50% 50%);
      }

      video::-webkit-media-text-track-container {
        transform: var(--media-webkit-text-track-transform);
        transition: var(--media-webkit-text-track-transition);
      }
    </style>
    <slot name="media">
      <video${Ve$1(mr)}></video>
    </slot>
    <slot></slot>
  `}var we$1=(mr,{tag:hr,is:gr})=>{var vr,xr,Er,Cr,wr,Rr,kr,Dr,Br,Hr,Gr,qr,zr,Qr,sn,hn,vn;let yn=(xr=(vr=globalThis.document)==null?void 0:vr.createElement)==null?void 0:xr.call(vr,hr,{is:gr}),gn=yn?Ti(yn):[];return Er=class extends mr{constructor(){super(),u$1(this,Hr),u$1(this,qr),u$1(this,Qr),u$1(this,hn),u$1(this,kr,void 0),u$1(this,Dr,void 0),u$1(this,Br,new Map)}static get observedAttributes(){var bn,xn,$n;return A(bn=Er,wr,Rr).call(bn),[...($n=(xn=yn?.constructor)==null?void 0:xn.observedAttributes)!=null?$n:[],"autopictureinpicture","disablepictureinpicture","disableremoteplayback","autoplay","controls","controlslist","crossorigin","loop","muted","playsinline","poster","preload","src"]}get nativeEl(){var bn,xn,$n;return A(this,Hr,Gr).call(this),($n=(xn=(bn=i$1(this,Dr))!=null?bn:this.shadowRoot.querySelector(hr))!=null?xn:this.querySelector(":scope > [slot=media]"))!=null?$n:this.querySelector(hr)}set nativeEl(bn){h$1(this,Dr,bn)}get defaultMuted(){return this.hasAttribute("muted")}set defaultMuted(bn){this.toggleAttribute("muted",!!bn)}get src(){return this.getAttribute("src")}set src(bn){this.setAttribute("src",`${bn}`)}get preload(){var bn,xn;return(xn=this.getAttribute("preload"))!=null?xn:(bn=this.nativeEl)==null?void 0:bn.preload}set preload(bn){this.setAttribute("preload",`${bn}`)}init(){var bn,xn;if(!this.shadowRoot){this.attachShadow({mode:"open"});let $n=bi(this.attributes);gr&&($n.is=gr),hr&&($n.part=hr),this.shadowRoot.innerHTML=this.constructor.getTemplateHTML($n)}this.nativeEl.muted=this.hasAttribute("muted");for(let $n of gn)A(this,Qr,sn).call(this,$n);this.shadowRoot.addEventListener("slotchange",this),A(this,qr,zr).call(this);for(let $n of this.constructor.Events)(xn=(bn=this.shadowRoot).addEventListener)==null||xn.call(bn,$n,this,!0)}handleEvent(bn){if(bn.type==="slotchange"){A(this,qr,zr).call(this);return}bn.target===this.nativeEl&&this.dispatchEvent(new CustomEvent(bn.type,{detail:bn.detail}))}attributeChangedCallback(bn,xn,$n){A(this,Hr,Gr).call(this),A(this,hn,vn).call(this,bn,xn,$n)}connectedCallback(){A(this,Hr,Gr).call(this)}},Cr=new WeakMap,wr=new WeakSet,Rr=function(){if(i$1(this,Cr))return;h$1(this,Cr,!0);let bn=new Set(this.observedAttributes);bn.delete("muted");for(let xn of gn)if(!(xn in this.prototype))if(typeof yn[xn]=="function")this.prototype[xn]=function(...$n){return A(this,Hr,Gr).call(this),this.call?this.call(xn,...$n):this.nativeEl[xn].apply(this.nativeEl,$n)};else{let $n={get(){var Sn,Cn,Rn;A(this,Hr,Gr).call(this);let Bn=xn.toLowerCase();if(bn.has(Bn)){let Fn=this.getAttribute(Bn);return Fn===null?!1:Fn===""?!0:Fn}return(Rn=(Sn=this.get)==null?void 0:Sn.call(this,xn))!=null?Rn:(Cn=this.nativeEl)==null?void 0:Cn[xn]}};xn!==xn.toUpperCase()&&($n.set=function(Sn){A(this,Hr,Gr).call(this);let Cn=xn.toLowerCase();if(bn.has(Cn)){Sn===!0||Sn===!1||Sn==null?this.toggleAttribute(Cn,!!Sn):this.setAttribute(Cn,Sn);return}if(this.set){this.set(xn,Sn);return}this.nativeEl[xn]=Sn}),Object.defineProperty(this.prototype,xn,$n)}},kr=new WeakMap,Dr=new WeakMap,Br=new WeakMap,Hr=new WeakSet,Gr=function(){i$1(this,kr)||(h$1(this,kr,!0),this.init())},qr=new WeakSet,zr=function(){let bn=new Map(i$1(this,Br));this.shadowRoot.querySelector("slot:not([name])").assignedElements({flatten:!0}).filter(xn=>["track","source"].includes(xn.localName)).forEach(xn=>{var $n,Sn;bn.delete(xn);let Cn=i$1(this,Br).get(xn);Cn||(Cn=xn.cloneNode(),i$1(this,Br).set(xn,Cn)),(Sn=($n=this.nativeEl).append)==null||Sn.call($n,Cn),Cn.localName==="track"&&Cn.default&&(Cn.kind==="chapters"||Cn.kind==="metadata")&&Cn.track.mode==="disabled"&&(Cn.track.mode="hidden")}),bn.forEach(xn=>xn.remove())},Qr=new WeakSet,sn=function(bn){if(Object.prototype.hasOwnProperty.call(this,bn)){let xn=this[bn];delete this[bn],this[bn]=xn}},hn=new WeakSet,vn=function(bn,xn,$n){var Sn,Cn,Rn,Bn,Fn,Hn;["id","class"].includes(bn)||!Er.observedAttributes.includes(bn)&&this.constructor.observedAttributes.includes(bn)||($n===null?(Cn=(Sn=this.nativeEl).removeAttribute)==null||Cn.call(Sn,bn):((Bn=(Rn=this.nativeEl).getAttribute)==null?void 0:Bn.call(Rn,bn))!=$n&&((Hn=(Fn=this.nativeEl).setAttribute)==null||Hn.call(Fn,bn,$n)))},u$1(Er,wr),E$2(Er,"getTemplateHTML",hr.endsWith("audio")?gi:Ei),E$2(Er,"shadowRootOptions",{mode:"open"}),E$2(Er,"Events",ve$1),u$1(Er,Cr,void 0),Er};function Ti(mr){let hr=[];for(let gr=Object.getPrototypeOf(mr);gr&&gr!==HTMLElement.prototype;gr=Object.getPrototypeOf(gr))hr.push(...Object.getOwnPropertyNames(gr));return hr}function Ve$1(mr){let hr="";for(let gr in mr){let vr=mr[gr];vr===""?hr+=` ${gr}`:hr+=` ${gr}="${vr}"`}return hr}function bi(mr){let hr={};for(let gr of mr)hr[gr.name]=gr.value;return hr}var Le,Zt$1=we$1((Le=globalThis.HTMLElement)!=null?Le:class{},{tag:"video"}),Me$1;we$1((Me$1=globalThis.HTMLElement)!=null?Me$1:class{},{tag:"audio"});var V$1=new WeakMap,Tt$1=class extends Error{},te$1=class extends Error{},Ge=globalThis.WeakRef?class extends Set{add(mr){super.add(new WeakRef(mr))}forEach(mr){super.forEach(hr=>{let gr=hr.deref();gr&&mr(gr)})}}:Set;function Be$1(mr){var hr,gr,vr;(gr=(hr=globalThis.chrome)==null?void 0:hr.cast)!=null&&gr.isAvailable?(vr=globalThis.cast)!=null&&vr.framework?mr():customElements.whenDefined("google-cast-button").then(mr):globalThis.__onGCastApiAvailable=()=>{customElements.whenDefined("google-cast-button").then(mr)}}function Ke(){return globalThis.chrome}function qe(){var mr;let hr="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1";if((mr=globalThis.chrome)!=null&&mr.cast||document.querySelector(`script[src="${hr}"]`))return;let gr=document.createElement("script");gr.src=hr,document.head.append(gr)}function U$1(){var mr,hr;return(hr=(mr=globalThis.cast)==null?void 0:mr.framework)==null?void 0:hr.CastContext.getInstance()}function Nt(){var mr;return(mr=U$1())==null?void 0:mr.getCurrentSession()}function ee$2(){var mr;return(mr=Nt())==null?void 0:mr.getSessionObj().media[0]}function Fe(mr){return new Promise((hr,gr)=>{ee$2().editTracksInfo(mr,hr,gr)})}function Ue(mr){return new Promise((hr,gr)=>{ee$2().getStatus(mr,hr,gr)})}function ye(mr){return U$1().setOptions({...Ae$1(),...mr})}function Ae$1(){return{receiverApplicationId:"CC1AD845",autoJoinPolicy:"origin_scoped",androidReceiverCompatible:!1,language:"en-US",resumeSavedSession:!0}}var ie$2=new Ge,Y=new WeakSet,R$1;Be$1(()=>{var mr,hr,gr,vr;if(!((hr=(mr=globalThis.chrome)==null?void 0:mr.cast)!=null&&hr.isAvailable)){console.debug("chrome.cast.isAvailable",(vr=(gr=globalThis.chrome)==null?void 0:gr.cast)==null?void 0:vr.isAvailable);return}R$1||(R$1=cast.framework,U$1().addEventListener(R$1.CastContextEventType.CAST_STATE_CHANGED,xr=>{ie$2.forEach(Er=>{var Cr,wr;return(wr=(Cr=V$1.get(Er)).onCastStateChanged)==null?void 0:wr.call(Cr,xr)})}),U$1().addEventListener(R$1.CastContextEventType.SESSION_STATE_CHANGED,xr=>{ie$2.forEach(Er=>{var Cr,wr;return(wr=(Cr=V$1.get(Er)).onSessionStateChanged)==null?void 0:wr.call(Cr,xr)})}),ie$2.forEach(xr=>{var Er,Cr;return(Cr=(Er=V$1.get(xr)).init)==null?void 0:Cr.call(Er)}))});var Ye=0,y$1,Dt$1,I$1,G,at,dt,j,se$2,B$2,ot,ne$1,je,Vt$1,ke$1,oe$2,We,Gt$1,Se$1,ae$1,He,Bt$1,Re$1,re$2=class extends EventTarget{constructor(hr){super(),u$1(this,B$2),u$1(this,ne$1),u$1(this,Vt$1),u$1(this,oe$2),u$1(this,Gt$1),u$1(this,ae$1),u$1(this,Bt$1),u$1(this,y$1,void 0),u$1(this,Dt$1,void 0),u$1(this,I$1,void 0),u$1(this,G,void 0),u$1(this,at,"disconnected"),u$1(this,dt,!1),u$1(this,j,new Set),u$1(this,se$2,new WeakMap),h$1(this,y$1,hr),ie$2.add(this),V$1.set(this,{init:()=>A(this,Gt$1,Se$1).call(this),onCastStateChanged:()=>A(this,Vt$1,ke$1).call(this),onSessionStateChanged:()=>A(this,oe$2,We).call(this),getCastPlayer:()=>i$1(this,B$2,ot)}),A(this,Gt$1,Se$1).call(this)}get state(){return i$1(this,at)}async watchAvailability(hr){if(i$1(this,y$1).disableRemotePlayback)throw new Tt$1("disableRemotePlayback attribute is present.");return i$1(this,se$2).set(hr,++Ye),i$1(this,j).add(hr),Ye}async cancelWatchAvailability(hr){if(i$1(this,y$1).disableRemotePlayback)throw new Tt$1("disableRemotePlayback attribute is present.");hr?i$1(this,j).delete(hr):i$1(this,j).clear()}async prompt(){var hr,gr,vr,xr;if(i$1(this,y$1).disableRemotePlayback)throw new Tt$1("disableRemotePlayback attribute is present.");if(!((gr=(hr=globalThis.chrome)==null?void 0:hr.cast)!=null&&gr.isAvailable))throw new te$1("The RemotePlayback API is disabled on this platform.");let Er=Y.has(i$1(this,y$1));Y.add(i$1(this,y$1)),ye(i$1(this,y$1).castOptions),Object.entries(i$1(this,G)).forEach(([Cr,wr])=>{i$1(this,I$1).controller.addEventListener(Cr,wr)});try{await U$1().requestSession()}catch(Cr){if(Cr==="cancel"){Er||Y.delete(i$1(this,y$1));return}throw new Error(Cr)}(xr=(vr=V$1.get(i$1(this,y$1)))==null?void 0:vr.loadOnPrompt)==null||xr.call(vr)}};y$1=new WeakMap,Dt$1=new WeakMap,I$1=new WeakMap,G=new WeakMap,at=new WeakMap,dt=new WeakMap,j=new WeakMap,se$2=new WeakMap,B$2=new WeakSet,ot=function(){if(Y.has(i$1(this,y$1)))return i$1(this,I$1)},ne$1=new WeakSet,je=function(){Y.has(i$1(this,y$1))&&(Object.entries(i$1(this,G)).forEach(([mr,hr])=>{i$1(this,I$1).controller.removeEventListener(mr,hr)}),Y.delete(i$1(this,y$1)),i$1(this,y$1).muted=i$1(this,I$1).isMuted,i$1(this,y$1).currentTime=i$1(this,I$1).savedPlayerState.currentTime,i$1(this,I$1).savedPlayerState.isPaused===!1&&i$1(this,y$1).play())},Vt$1=new WeakSet,ke$1=function(){let mr=U$1().getCastState();if(Y.has(i$1(this,y$1))&&mr==="CONNECTING"&&(h$1(this,at,"connecting"),this.dispatchEvent(new Event("connecting"))),!i$1(this,dt)&&mr!=null&&mr.includes("CONNECT")){h$1(this,dt,!0);for(let hr of i$1(this,j))hr(!0)}else if(i$1(this,dt)&&(!mr||mr==="NO_DEVICES_AVAILABLE")){h$1(this,dt,!1);for(let hr of i$1(this,j))hr(!1)}},oe$2=new WeakSet,We=async function(){var mr;let{SESSION_RESUMED:hr}=R$1.SessionState;if(U$1().getSessionState()===hr&&i$1(this,y$1).castSrc===((mr=ee$2())==null?void 0:mr.media.contentId)){Y.add(i$1(this,y$1)),Object.entries(i$1(this,G)).forEach(([gr,vr])=>{i$1(this,I$1).controller.addEventListener(gr,vr)});try{await Ue(new chrome.cast.media.GetStatusRequest)}catch(gr){console.error(gr)}i$1(this,G)[R$1.RemotePlayerEventType.IS_PAUSED_CHANGED](),i$1(this,G)[R$1.RemotePlayerEventType.PLAYER_STATE_CHANGED]()}},Gt$1=new WeakSet,Se$1=function(){!R$1||i$1(this,Dt$1)||(h$1(this,Dt$1,!0),ye(i$1(this,y$1).castOptions),i$1(this,y$1).textTracks.addEventListener("change",()=>A(this,Bt$1,Re$1).call(this)),A(this,Vt$1,ke$1).call(this),h$1(this,I$1,new R$1.RemotePlayer),new R$1.RemotePlayerController(i$1(this,I$1)),h$1(this,G,{[R$1.RemotePlayerEventType.IS_CONNECTED_CHANGED]:({value:mr})=>{mr===!0?(h$1(this,at,"connected"),this.dispatchEvent(new Event("connect"))):(A(this,ne$1,je).call(this),h$1(this,at,"disconnected"),this.dispatchEvent(new Event("disconnect")))},[R$1.RemotePlayerEventType.DURATION_CHANGED]:()=>{i$1(this,y$1).dispatchEvent(new Event("durationchange"))},[R$1.RemotePlayerEventType.VOLUME_LEVEL_CHANGED]:()=>{i$1(this,y$1).dispatchEvent(new Event("volumechange"))},[R$1.RemotePlayerEventType.IS_MUTED_CHANGED]:()=>{i$1(this,y$1).dispatchEvent(new Event("volumechange"))},[R$1.RemotePlayerEventType.CURRENT_TIME_CHANGED]:()=>{var mr;(mr=i$1(this,B$2,ot))!=null&&mr.isMediaLoaded&&i$1(this,y$1).dispatchEvent(new Event("timeupdate"))},[R$1.RemotePlayerEventType.VIDEO_INFO_CHANGED]:()=>{i$1(this,y$1).dispatchEvent(new Event("resize"))},[R$1.RemotePlayerEventType.IS_PAUSED_CHANGED]:()=>{i$1(this,y$1).dispatchEvent(new Event(this.paused?"pause":"play"))},[R$1.RemotePlayerEventType.PLAYER_STATE_CHANGED]:()=>{var mr,hr;((mr=i$1(this,B$2,ot))==null?void 0:mr.playerState)!==chrome.cast.media.PlayerState.PAUSED&&i$1(this,y$1).dispatchEvent(new Event({[chrome.cast.media.PlayerState.PLAYING]:"playing",[chrome.cast.media.PlayerState.BUFFERING]:"waiting",[chrome.cast.media.PlayerState.IDLE]:"emptied"}[(hr=i$1(this,B$2,ot))==null?void 0:hr.playerState]))},[R$1.RemotePlayerEventType.IS_MEDIA_LOADED_CHANGED]:async()=>{var mr;(mr=i$1(this,B$2,ot))!=null&&mr.isMediaLoaded&&(await Promise.resolve(),A(this,ae$1,He).call(this))}}))},ae$1=new WeakSet,He=function(){A(this,Bt$1,Re$1).call(this)},Bt$1=new WeakSet,Re$1=async function(){var mr,hr,gr,vr,xr;if(!i$1(this,B$2,ot))return;let Er=((hr=(mr=i$1(this,I$1).mediaInfo)==null?void 0:mr.tracks)!=null?hr:[]).filter(({type:Hr})=>Hr===chrome.cast.media.TrackType.TEXT),Cr=[...i$1(this,y$1).textTracks].filter(({kind:Hr})=>Hr==="subtitles"||Hr==="captions"),wr=Er.map(({language:Hr,name:Gr,trackId:qr})=>{var zr;let{mode:Qr}=(zr=Cr.find(sn=>sn.language===Hr&&sn.label===Gr))!=null?zr:{};return Qr?{mode:Qr,trackId:qr}:!1}).filter(Boolean),Rr=wr.filter(({mode:Hr})=>Hr!=="showing").map(({trackId:Hr})=>Hr),kr=wr.find(({mode:Hr})=>Hr==="showing"),Dr=(xr=(vr=(gr=Nt())==null?void 0:gr.getSessionObj().media[0])==null?void 0:vr.activeTrackIds)!=null?xr:[],Br=Dr;if(Dr.length&&(Br=Br.filter(Hr=>!Rr.includes(Hr))),kr!=null&&kr.trackId&&(Br=[...Br,kr.trackId]),Br=[...new Set(Br)],!((Hr,Gr)=>Hr.length===Gr.length&&Hr.every(qr=>Gr.includes(qr)))(Dr,Br))try{let Hr=new chrome.cast.media.EditTracksInfoRequest(Br);await Fe(Hr)}catch(Hr){console.error(Hr)}};var $e$1=mr=>{var hr,gr,vr,xr,Er,Cr,wr,Rr,kr,Dr;return gr=class extends mr{constructor(){super(...arguments),u$1(this,wr),u$1(this,kr),u$1(this,vr,{paused:!1}),u$1(this,xr,Ae$1()),u$1(this,Er,void 0),u$1(this,Cr,void 0)}get remote(){return i$1(this,Cr)?i$1(this,Cr):Ke()?(qe(),V$1.set(this,{loadOnPrompt:()=>A(this,kr,Dr).call(this)}),h$1(this,Cr,new re$2(this))):super.remote}attributeChangedCallback(Br,Hr,Gr){if(super.attributeChangedCallback(Br,Hr,Gr),Br==="cast-receiver"&&Gr){i$1(this,xr).receiverApplicationId=Gr;return}if(i$1(this,wr,Rr))switch(Br){case"cast-stream-type":case"cast-src":this.load();break}}async load(){var Br,Hr;if(!i$1(this,wr,Rr))return super.load();let Gr=new chrome.cast.media.MediaInfo(this.castSrc,this.castContentType);Gr.customData=this.castCustomData;let qr=[...this.querySelectorAll("track")].filter(({kind:hn,src:vn})=>vn&&(hn==="subtitles"||hn==="captions")),zr=[],Qr=0;qr.length&&(Gr.tracks=qr.map(hn=>{let vn=++Qr;zr.length===0&&hn.track.mode==="showing"&&zr.push(vn);let yn=new chrome.cast.media.Track(vn,chrome.cast.media.TrackType.TEXT);return yn.trackContentId=hn.src,yn.trackContentType="text/vtt",yn.subtype=hn.kind==="captions"?chrome.cast.media.TextTrackType.CAPTIONS:chrome.cast.media.TextTrackType.SUBTITLES,yn.name=hn.label,yn.language=hn.srclang,yn})),this.castStreamType==="live"?Gr.streamType=chrome.cast.media.StreamType.LIVE:Gr.streamType=chrome.cast.media.StreamType.BUFFERED,Gr.metadata=new chrome.cast.media.GenericMediaMetadata,Gr.metadata.title=this.title,Gr.metadata.images=[{url:this.poster}];let sn=new chrome.cast.media.LoadRequest(Gr);sn.currentTime=(Br=super.currentTime)!=null?Br:0,sn.autoplay=!i$1(this,vr).paused,sn.activeTrackIds=zr,await((Hr=Nt())==null?void 0:Hr.loadMedia(sn)),this.dispatchEvent(new Event("volumechange"))}play(){var Br;if(i$1(this,wr,Rr)){i$1(this,wr,Rr).isPaused&&((Br=i$1(this,wr,Rr).controller)==null||Br.playOrPause());return}return super.play()}pause(){var Br;if(i$1(this,wr,Rr)){i$1(this,wr,Rr).isPaused||(Br=i$1(this,wr,Rr).controller)==null||Br.playOrPause();return}super.pause()}get castOptions(){return i$1(this,xr)}get castReceiver(){var Br;return(Br=this.getAttribute("cast-receiver"))!=null?Br:void 0}set castReceiver(Br){this.castReceiver!=Br&&this.setAttribute("cast-receiver",`${Br}`)}get castSrc(){var Br,Hr,Gr;return(Gr=(Hr=this.getAttribute("cast-src"))!=null?Hr:(Br=this.querySelector("source"))==null?void 0:Br.src)!=null?Gr:this.currentSrc}set castSrc(Br){this.castSrc!=Br&&this.setAttribute("cast-src",`${Br}`)}get castContentType(){var Br;return(Br=this.getAttribute("cast-content-type"))!=null?Br:void 0}set castContentType(Br){this.setAttribute("cast-content-type",`${Br}`)}get castStreamType(){var Br,Hr;return(Hr=(Br=this.getAttribute("cast-stream-type"))!=null?Br:this.streamType)!=null?Hr:void 0}set castStreamType(Br){this.setAttribute("cast-stream-type",`${Br}`)}get castCustomData(){return i$1(this,Er)}set castCustomData(Br){let Hr=typeof Br;if(!["object","undefined"].includes(Hr)){console.error(`castCustomData must be nullish or an object but value was of type ${Hr}`);return}h$1(this,Er,Br)}get readyState(){if(i$1(this,wr,Rr))switch(i$1(this,wr,Rr).playerState){case chrome.cast.media.PlayerState.IDLE:return 0;case chrome.cast.media.PlayerState.BUFFERING:return 2;default:return 3}return super.readyState}get paused(){return i$1(this,wr,Rr)?i$1(this,wr,Rr).isPaused:super.paused}get muted(){var Br;return i$1(this,wr,Rr)?(Br=i$1(this,wr,Rr))==null?void 0:Br.isMuted:super.muted}set muted(Br){var Hr;if(i$1(this,wr,Rr)){(Br&&!i$1(this,wr,Rr).isMuted||!Br&&i$1(this,wr,Rr).isMuted)&&((Hr=i$1(this,wr,Rr).controller)==null||Hr.muteOrUnmute());return}super.muted=Br}get volume(){var Br,Hr;return i$1(this,wr,Rr)?(Hr=(Br=i$1(this,wr,Rr))==null?void 0:Br.volumeLevel)!=null?Hr:1:super.volume}set volume(Br){var Hr;if(i$1(this,wr,Rr)){i$1(this,wr,Rr).volumeLevel=+Br,(Hr=i$1(this,wr,Rr).controller)==null||Hr.setVolumeLevel();return}super.volume=Br}get duration(){var Br,Hr,Gr;return i$1(this,wr,Rr)&&(Br=i$1(this,wr,Rr))!=null&&Br.isMediaLoaded?(Gr=(Hr=i$1(this,wr,Rr))==null?void 0:Hr.duration)!=null?Gr:NaN:super.duration}get currentTime(){var Br,Hr,Gr;return i$1(this,wr,Rr)&&(Br=i$1(this,wr,Rr))!=null&&Br.isMediaLoaded?(Gr=(Hr=i$1(this,wr,Rr))==null?void 0:Hr.currentTime)!=null?Gr:0:super.currentTime}set currentTime(Br){var Hr;if(i$1(this,wr,Rr)){i$1(this,wr,Rr).currentTime=Br,(Hr=i$1(this,wr,Rr).controller)==null||Hr.seek();return}super.currentTime=Br}},vr=new WeakMap,xr=new WeakMap,Er=new WeakMap,Cr=new WeakMap,wr=new WeakSet,Rr=function(){var Br,Hr;return(Hr=(Br=V$1.get(this.remote))==null?void 0:Br.getCastPlayer)==null?void 0:Hr.call(Br)},kr=new WeakSet,Dr=async function(){i$1(this,vr).paused=Jt$1(gr.prototype,this,"paused"),Jt$1(gr.prototype,this,"pause").call(this),this.muted=Jt$1(gr.prototype,this,"muted");try{await this.load()}catch(Br){console.error(Br)}},E$2(gr,"observedAttributes",[...(hr=mr.observedAttributes)!=null?hr:[],"cast-src","cast-content-type","cast-stream-type","cast-receiver"]),gr},K$1=class extends Event{constructor(hr,gr){super(hr),E$2(this,"track"),this.track=gr.track}},Ce$1=new WeakMap;function c$1(mr){var hr;return(hr=Ce$1.get(mr))!=null?hr:vi(mr,{})}function vi(mr,hr){let gr=Ce$1.get(mr);return gr||Ce$1.set(mr,gr={}),Object.assign(gr,hr)}function de$1(mr,hr){let gr=mr.videoTracks;c$1(hr).media=mr,c$1(hr).renditionSet||(c$1(hr).renditionSet=new Set);let vr=c$1(gr).trackSet;vr.add(hr);let xr=vr.size-1;xr in ct.prototype||Object.defineProperty(ct.prototype,xr,{get(){return[...c$1(this).trackSet][xr]}}),queueMicrotask(()=>{gr.dispatchEvent(new K$1("addtrack",{track:hr}))})}function ue$2(mr){var hr;let gr=(hr=c$1(mr).media)==null?void 0:hr.videoTracks;gr&&(c$1(gr).trackSet.delete(mr),queueMicrotask(()=>{gr.dispatchEvent(new K$1("removetrack",{track:mr}))}))}function Xe(mr){var hr;let gr=(hr=c$1(mr).media.videoTracks)!=null?hr:[],vr=!1;for(let xr of gr)xr!==mr&&(xr.selected=!1,vr=!0);if(vr){if(c$1(gr).changeRequested)return;c$1(gr).changeRequested=!0,queueMicrotask(()=>{delete c$1(gr).changeRequested,gr.dispatchEvent(new Event("change"))})}}var W$1,H$1,$$2,ut$1,Kt,ct=class extends EventTarget{constructor(){super(),u$1(this,ut$1),u$1(this,W$1,void 0),u$1(this,H$1,void 0),u$1(this,$$2,void 0),c$1(this).trackSet=new Set}[Symbol.iterator](){return i$1(this,ut$1,Kt).values()}get length(){return i$1(this,ut$1,Kt).size}getTrackById(mr){var hr;return(hr=[...i$1(this,ut$1,Kt)].find(gr=>gr.id===mr))!=null?hr:null}get selectedIndex(){return[...i$1(this,ut$1,Kt)].findIndex(mr=>mr.selected)}get onaddtrack(){return i$1(this,W$1)}set onaddtrack(mr){i$1(this,W$1)&&(this.removeEventListener("addtrack",i$1(this,W$1)),h$1(this,W$1,void 0)),typeof mr=="function"&&(h$1(this,W$1,mr),this.addEventListener("addtrack",mr))}get onremovetrack(){return i$1(this,H$1)}set onremovetrack(mr){i$1(this,H$1)&&(this.removeEventListener("removetrack",i$1(this,H$1)),h$1(this,H$1,void 0)),typeof mr=="function"&&(h$1(this,H$1,mr),this.addEventListener("removetrack",mr))}get onchange(){return i$1(this,$$2)}set onchange(mr){i$1(this,$$2)&&(this.removeEventListener("change",i$1(this,$$2)),h$1(this,$$2,void 0)),typeof mr=="function"&&(h$1(this,$$2,mr),this.addEventListener("change",mr))}};W$1=new WeakMap,H$1=new WeakMap,$$2=new WeakMap,ut$1=new WeakSet,Kt=function(){return c$1(this).trackSet};var q=class extends Event{constructor(mr,hr){super(mr),E$2(this,"rendition"),this.rendition=hr.rendition}};function Je(mr,hr){let gr=c$1(mr).media.videoRenditions;c$1(hr).media=c$1(mr).media,c$1(hr).track=mr;let vr=c$1(mr).renditionSet;vr.add(hr);let xr=vr.size-1;xr in ht$1.prototype||Object.defineProperty(ht$1.prototype,xr,{get(){return bt$1(this)[xr]}}),queueMicrotask(()=>{mr.selected&&gr.dispatchEvent(new q("addrendition",{rendition:hr}))})}function Qe(mr){let hr=c$1(mr).media.videoRenditions,gr=c$1(mr).track;c$1(gr).renditionSet.delete(mr),queueMicrotask(()=>{c$1(mr).track.selected&&hr.dispatchEvent(new q("removerendition",{rendition:mr}))})}function Ze(mr){let hr=c$1(mr).media.videoRenditions;!hr||c$1(hr).changeRequested||(c$1(hr).changeRequested=!0,queueMicrotask(()=>{delete c$1(hr).changeRequested,c$1(mr).track.selected&&hr.dispatchEvent(new Event("change"))}))}function bt$1(mr){return[...c$1(mr).media.videoTracks].filter(hr=>hr.selected).flatMap(hr=>[...c$1(hr).renditionSet])}var z,X$2,J$1,ht$1=class extends EventTarget{constructor(){super(...arguments),u$1(this,z,void 0),u$1(this,X$2,void 0),u$1(this,J$1,void 0)}[Symbol.iterator](){return bt$1(this).values()}get length(){return bt$1(this).length}getRenditionById(hr){var gr;return(gr=bt$1(this).find(vr=>`${vr.id}`==`${hr}`))!=null?gr:null}get selectedIndex(){return bt$1(this).findIndex(hr=>hr.selected)}set selectedIndex(hr){for(let[gr,vr]of bt$1(this).entries())vr.selected=gr===hr}get onaddrendition(){return i$1(this,z)}set onaddrendition(hr){i$1(this,z)&&(this.removeEventListener("addrendition",i$1(this,z)),h$1(this,z,void 0)),typeof hr=="function"&&(h$1(this,z,hr),this.addEventListener("addrendition",hr))}get onremoverendition(){return i$1(this,X$2)}set onremoverendition(hr){i$1(this,X$2)&&(this.removeEventListener("removerendition",i$1(this,X$2)),h$1(this,X$2,void 0)),typeof hr=="function"&&(h$1(this,X$2,hr),this.addEventListener("removerendition",hr))}get onchange(){return i$1(this,J$1)}set onchange(hr){i$1(this,J$1)&&(this.removeEventListener("change",i$1(this,J$1)),h$1(this,J$1,void 0)),typeof hr=="function"&&(h$1(this,J$1,hr),this.addEventListener("change",hr))}};z=new WeakMap,X$2=new WeakMap,J$1=new WeakMap;var vt$1,qt$1=class{constructor(){E$2(this,"src"),E$2(this,"id"),E$2(this,"width"),E$2(this,"height"),E$2(this,"bitrate"),E$2(this,"frameRate"),E$2(this,"codec"),u$1(this,vt$1,!1)}get selected(){return i$1(this,vt$1)}set selected(hr){i$1(this,vt$1)!==hr&&(h$1(this,vt$1,hr),Ze(this))}};vt$1=new WeakMap;var yt,At$1=class{constructor(){E$2(this,"id"),E$2(this,"kind"),E$2(this,"label",""),E$2(this,"language",""),E$2(this,"sourceBuffer"),u$1(this,yt,!1)}addRendition(hr,gr,vr,xr,Er,Cr){let wr=new qt$1;return wr.src=hr,wr.width=gr,wr.height=vr,wr.frameRate=Cr,wr.bitrate=Er,wr.codec=xr,Je(this,wr),wr}removeRendition(hr){Qe(hr)}get selected(){return i$1(this,yt)}set selected(hr){i$1(this,yt)!==hr&&(h$1(this,yt,hr),hr===!0&&Xe(this))}};yt=new WeakMap;function ti(mr,hr){let gr=c$1(mr).media.audioRenditions;c$1(hr).media=c$1(mr).media,c$1(hr).track=mr;let vr=c$1(mr).renditionSet;vr.add(hr);let xr=vr.size-1;xr in lt$1.prototype||Object.defineProperty(lt$1.prototype,xr,{get(){return kt$1(this)[xr]}}),queueMicrotask(()=>{mr.enabled&&gr.dispatchEvent(new q("addrendition",{rendition:hr}))})}function ei(mr){let hr=c$1(mr).media.audioRenditions,gr=c$1(mr).track;c$1(gr).renditionSet.delete(mr),queueMicrotask(()=>{c$1(mr).track.enabled&&hr.dispatchEvent(new q("removerendition",{rendition:mr}))})}function ii(mr){let hr=c$1(mr).media.audioRenditions;!hr||c$1(hr).changeRequested||(c$1(hr).changeRequested=!0,queueMicrotask(()=>{delete c$1(hr).changeRequested,c$1(mr).track.enabled&&hr.dispatchEvent(new Event("change"))}))}function kt$1(mr){return[...c$1(mr).media.audioTracks].filter(hr=>hr.enabled).flatMap(hr=>[...c$1(hr).renditionSet])}var Q$2,Z$1,tt,lt$1=class extends EventTarget{constructor(){super(...arguments),u$1(this,Q$2,void 0),u$1(this,Z$1,void 0),u$1(this,tt,void 0)}[Symbol.iterator](){return kt$1(this).values()}get length(){return kt$1(this).length}getRenditionById(hr){var gr;return(gr=kt$1(this).find(vr=>`${vr.id}`==`${hr}`))!=null?gr:null}get selectedIndex(){return kt$1(this).findIndex(hr=>hr.selected)}set selectedIndex(hr){for(let[gr,vr]of kt$1(this).entries())vr.selected=gr===hr}get onaddrendition(){return i$1(this,Q$2)}set onaddrendition(hr){i$1(this,Q$2)&&(this.removeEventListener("addrendition",i$1(this,Q$2)),h$1(this,Q$2,void 0)),typeof hr=="function"&&(h$1(this,Q$2,hr),this.addEventListener("addrendition",hr))}get onremoverendition(){return i$1(this,Z$1)}set onremoverendition(hr){i$1(this,Z$1)&&(this.removeEventListener("removerendition",i$1(this,Z$1)),h$1(this,Z$1,void 0)),typeof hr=="function"&&(h$1(this,Z$1,hr),this.addEventListener("removerendition",hr))}get onchange(){return i$1(this,tt)}set onchange(hr){i$1(this,tt)&&(this.removeEventListener("change",i$1(this,tt)),h$1(this,tt,void 0)),typeof hr=="function"&&(h$1(this,tt,hr),this.addEventListener("change",hr))}};Q$2=new WeakMap,Z$1=new WeakMap,tt=new WeakMap;var St$1,Ft$1=class{constructor(){E$2(this,"src"),E$2(this,"id"),E$2(this,"bitrate"),E$2(this,"codec"),u$1(this,St$1,!1)}get selected(){return i$1(this,St$1)}set selected(hr){i$1(this,St$1)!==hr&&(h$1(this,St$1,hr),ii(this))}};St$1=new WeakMap;function he(mr,hr){let gr=mr.audioTracks;c$1(hr).media=mr,c$1(hr).renditionSet||(c$1(hr).renditionSet=new Set);let vr=c$1(gr).trackSet;vr.add(hr);let xr=vr.size-1;xr in ft$1.prototype||Object.defineProperty(ft$1.prototype,xr,{get(){return[...c$1(this).trackSet][xr]}}),queueMicrotask(()=>{gr.dispatchEvent(new K$1("addtrack",{track:hr}))})}function le$2(mr){var hr;let gr=(hr=c$1(mr).media)==null?void 0:hr.audioTracks;gr&&(c$1(gr).trackSet.delete(mr),queueMicrotask(()=>{gr.dispatchEvent(new K$1("removetrack",{track:mr}))}))}function ri(mr){let hr=c$1(mr).media.audioTracks;!hr||c$1(hr).changeRequested||(c$1(hr).changeRequested=!0,queueMicrotask(()=>{delete c$1(hr).changeRequested,hr.dispatchEvent(new Event("change"))}))}var et,it,rt,Rt$1,ce$1,ft$1=class extends EventTarget{constructor(){super(),u$1(this,Rt$1),u$1(this,et,void 0),u$1(this,it,void 0),u$1(this,rt,void 0),c$1(this).trackSet=new Set}[Symbol.iterator](){return i$1(this,Rt$1,ce$1).values()}get length(){return i$1(this,Rt$1,ce$1).size}getTrackById(hr){var gr;return(gr=[...i$1(this,Rt$1,ce$1)].find(vr=>vr.id===hr))!=null?gr:null}get onaddtrack(){return i$1(this,et)}set onaddtrack(hr){i$1(this,et)&&(this.removeEventListener("addtrack",i$1(this,et)),h$1(this,et,void 0)),typeof hr=="function"&&(h$1(this,et,hr),this.addEventListener("addtrack",hr))}get onremovetrack(){return i$1(this,it)}set onremovetrack(hr){i$1(this,it)&&(this.removeEventListener("removetrack",i$1(this,it)),h$1(this,it,void 0)),typeof hr=="function"&&(h$1(this,it,hr),this.addEventListener("removetrack",hr))}get onchange(){return i$1(this,rt)}set onchange(hr){i$1(this,rt)&&(this.removeEventListener("change",i$1(this,rt)),h$1(this,rt,void 0)),typeof hr=="function"&&(h$1(this,rt,hr),this.addEventListener("change",hr))}};et=new WeakMap,it=new WeakMap,rt=new WeakMap,Rt$1=new WeakSet,ce$1=function(){return c$1(this).trackSet};var Ct$1,_t$1=class{constructor(){E$2(this,"id"),E$2(this,"kind"),E$2(this,"label",""),E$2(this,"language",""),E$2(this,"sourceBuffer"),u$1(this,Ct$1,!1)}addRendition(hr,gr,vr){let xr=new Ft$1;return xr.src=hr,xr.codec=gr,xr.bitrate=vr,ti(this,xr),xr}removeRendition(hr){ei(hr)}get enabled(){return i$1(this,Ct$1)}set enabled(hr){i$1(this,Ct$1)!==hr&&(h$1(this,Ct$1,hr),ri(this))}};Ct$1=new WeakMap;var si=fe(globalThis.HTMLMediaElement,"video"),ni=fe(globalThis.HTMLMediaElement,"audio");function oi(mr){if(!(mr!=null&&mr.prototype))return mr;let hr=fe(mr,"video");(!hr||`${hr}`.includes("[native code]"))&&Object.defineProperty(mr.prototype,"videoTracks",{get(){return yi(this)}});let gr=fe(mr,"audio");(!gr||`${gr}`.includes("[native code]"))&&Object.defineProperty(mr.prototype,"audioTracks",{get(){return Ai(this)}}),"addVideoTrack"in mr.prototype||(mr.prototype.addVideoTrack=function(Er,Cr="",wr=""){let Rr=new At$1;return Rr.kind=Er,Rr.label=Cr,Rr.language=wr,de$1(this,Rr),Rr}),"removeVideoTrack"in mr.prototype||(mr.prototype.removeVideoTrack=ue$2),"addAudioTrack"in mr.prototype||(mr.prototype.addAudioTrack=function(Er,Cr="",wr=""){let Rr=new _t$1;return Rr.kind=Er,Rr.label=Cr,Rr.language=wr,he(this,Rr),Rr}),"removeAudioTrack"in mr.prototype||(mr.prototype.removeAudioTrack=le$2),"videoRenditions"in mr.prototype||Object.defineProperty(mr.prototype,"videoRenditions",{get(){return vr(this)}});let vr=Er=>{let Cr=c$1(Er).videoRenditions;return Cr||(Cr=new ht$1,c$1(Cr).media=Er,c$1(Er).videoRenditions=Cr),Cr};"audioRenditions"in mr.prototype||Object.defineProperty(mr.prototype,"audioRenditions",{get(){return xr(this)}});let xr=Er=>{let Cr=c$1(Er).audioRenditions;return Cr||(Cr=new lt$1,c$1(Cr).media=Er,c$1(Er).audioRenditions=Cr),Cr};return mr}function fe(mr,hr){var gr;if(mr!=null&&mr.prototype)return(gr=Object.getOwnPropertyDescriptor(mr.prototype,`${hr}Tracks`))==null?void 0:gr.get}function yi(mr){var hr;let gr=c$1(mr).videoTracks;if(!gr&&(gr=new ct,c$1(mr).videoTracks=gr,si)){let vr=si.call((hr=mr.nativeEl)!=null?hr:mr);for(let xr of vr)de$1(mr,xr);vr.addEventListener("change",()=>{gr.dispatchEvent(new Event("change"))}),vr.addEventListener("addtrack",xr=>{if([...gr].some(Er=>Er instanceof At$1)){for(let Er of vr)ue$2(Er);return}de$1(mr,xr.track)}),vr.addEventListener("removetrack",xr=>{ue$2(xr.track)})}return gr}function Ai(mr){var hr;let gr=c$1(mr).audioTracks;if(!gr&&(gr=new ft$1,c$1(mr).audioTracks=gr,ni)){let vr=ni.call((hr=mr.nativeEl)!=null?hr:mr);for(let xr of vr)he(mr,xr);vr.addEventListener("change",()=>{gr.dispatchEvent(new Event("change"))}),vr.addEventListener("addtrack",xr=>{if([...gr].some(Er=>Er instanceof _t$1)){for(let Er of vr)le$2(Er);return}he(mr,xr.track)}),vr.addEventListener("removetrack",xr=>{le$2(xr.track)})}return gr}ve$1.push("castchange","entercast","leavecast");var o={BEACON_COLLECTION_DOMAIN:"beacon-collection-domain",CUSTOM_DOMAIN:"custom-domain",DEBUG:"debug",DISABLE_TRACKING:"disable-tracking",DISABLE_COOKIES:"disable-cookies",DRM_TOKEN:"drm-token",PLAYBACK_TOKEN:"playback-token",ENV_KEY:"env-key",MAX_RESOLUTION:"max-resolution",MIN_RESOLUTION:"min-resolution",RENDITION_ORDER:"rendition-order",PROGRAM_START_TIME:"program-start-time",PROGRAM_END_TIME:"program-end-time",ASSET_START_TIME:"asset-start-time",ASSET_END_TIME:"asset-end-time",METADATA_URL:"metadata-url",PLAYBACK_ID:"playback-id",PLAYER_SOFTWARE_NAME:"player-software-name",PLAYER_SOFTWARE_VERSION:"player-software-version",PREFER_CMCD:"prefer-cmcd",PREFER_PLAYBACK:"prefer-playback",START_TIME:"start-time",STREAM_TYPE:"stream-type",TARGET_LIVE_WINDOW:"target-live-window",LIVE_EDGE_OFFSET:"live-edge-offset",TYPE:"type"},Ui=Object.values(o),Yi=Ie$1(),ji="mux-video",M$1,Ot$1,Yt$1,Pt$1,jt$1,Wt$1,Ht,$t$1,zt$1,It$1,pe$2,_e$1=class extends Zt$1{constructor(){super(),u$1(this,It$1),u$1(this,M$1,void 0),u$1(this,Ot$1,void 0),u$1(this,Yt$1,void 0),u$1(this,Pt$1,{}),u$1(this,jt$1,{}),u$1(this,Wt$1,void 0),u$1(this,Ht,void 0),u$1(this,$t$1,void 0),u$1(this,zt$1,void 0),h$1(this,Yt$1,Nr())}static get observedAttributes(){var hr;return[...Ui,...(hr=Zt$1.observedAttributes)!=null?hr:[]]}get preferCmcd(){var hr;return(hr=this.getAttribute(o.PREFER_CMCD))!=null?hr:void 0}set preferCmcd(hr){hr!==this.preferCmcd&&(hr?Ut$2.includes(hr)?this.setAttribute(o.PREFER_CMCD,hr):console.warn(`Invalid value for preferCmcd. Must be one of ${Ut$2.join()}`):this.removeAttribute(o.PREFER_CMCD))}get playerInitTime(){return i$1(this,Yt$1)}get playerSoftwareName(){var hr;return(hr=i$1(this,$t$1))!=null?hr:ji}set playerSoftwareName(hr){h$1(this,$t$1,hr)}get playerSoftwareVersion(){var hr;return(hr=i$1(this,Ht))!=null?hr:Yi}set playerSoftwareVersion(hr){h$1(this,Ht,hr)}get _hls(){var hr;return(hr=i$1(this,M$1))==null?void 0:hr.engine}get mux(){var hr;return(hr=this.nativeEl)==null?void 0:hr.mux}get error(){var hr;return(hr=Rt$2(this.nativeEl))!=null?hr:null}get errorTranslator(){return i$1(this,zt$1)}set errorTranslator(hr){h$1(this,zt$1,hr)}get src(){return this.getAttribute("src")}set src(hr){hr!==this.src&&(hr==null?this.removeAttribute("src"):this.setAttribute("src",hr))}get type(){var hr;return(hr=this.getAttribute(o.TYPE))!=null?hr:void 0}set type(hr){hr!==this.type&&(hr?this.setAttribute(o.TYPE,hr):this.removeAttribute(o.TYPE))}get autoplay(){let hr=this.getAttribute("autoplay");return hr===null?!1:hr===""?!0:hr}set autoplay(hr){let gr=this.autoplay;hr!==gr&&(hr?this.setAttribute("autoplay",typeof hr=="string"?hr:""):this.removeAttribute("autoplay"))}get preload(){let hr=this.getAttribute("preload");return hr===""?"auto":["none","metadata","auto"].includes(hr)?hr:super.preload}set preload(hr){hr!=this.getAttribute("preload")&&(["","none","metadata","auto"].includes(hr)?this.setAttribute("preload",hr):this.removeAttribute("preload"))}get debug(){return this.getAttribute(o.DEBUG)!=null}set debug(hr){hr!==this.debug&&(hr?this.setAttribute(o.DEBUG,""):this.removeAttribute(o.DEBUG))}get disableTracking(){return this.hasAttribute(o.DISABLE_TRACKING)}set disableTracking(hr){hr!==this.disableTracking&&this.toggleAttribute(o.DISABLE_TRACKING,!!hr)}get disableCookies(){return this.hasAttribute(o.DISABLE_COOKIES)}set disableCookies(hr){hr!==this.disableCookies&&(hr?this.setAttribute(o.DISABLE_COOKIES,""):this.removeAttribute(o.DISABLE_COOKIES))}get startTime(){let hr=this.getAttribute(o.START_TIME);if(hr==null)return;let gr=+hr;return Number.isNaN(gr)?void 0:gr}set startTime(hr){hr!==this.startTime&&(hr==null?this.removeAttribute(o.START_TIME):this.setAttribute(o.START_TIME,`${hr}`))}get playbackId(){var hr;return this.hasAttribute(o.PLAYBACK_ID)?this.getAttribute(o.PLAYBACK_ID):(hr=gt$1(this.src))!=null?hr:void 0}set playbackId(hr){hr!==this.playbackId&&(hr?this.setAttribute(o.PLAYBACK_ID,hr):this.removeAttribute(o.PLAYBACK_ID))}get maxResolution(){var hr;return(hr=this.getAttribute(o.MAX_RESOLUTION))!=null?hr:void 0}set maxResolution(hr){hr!==this.maxResolution&&(hr?this.setAttribute(o.MAX_RESOLUTION,hr):this.removeAttribute(o.MAX_RESOLUTION))}get minResolution(){var hr;return(hr=this.getAttribute(o.MIN_RESOLUTION))!=null?hr:void 0}set minResolution(hr){hr!==this.minResolution&&(hr?this.setAttribute(o.MIN_RESOLUTION,hr):this.removeAttribute(o.MIN_RESOLUTION))}get renditionOrder(){var hr;return(hr=this.getAttribute(o.RENDITION_ORDER))!=null?hr:void 0}set renditionOrder(hr){hr!==this.renditionOrder&&(hr?this.setAttribute(o.RENDITION_ORDER,hr):this.removeAttribute(o.RENDITION_ORDER))}get programStartTime(){let hr=this.getAttribute(o.PROGRAM_START_TIME);if(hr==null)return;let gr=+hr;return Number.isNaN(gr)?void 0:gr}set programStartTime(hr){hr==null?this.removeAttribute(o.PROGRAM_START_TIME):this.setAttribute(o.PROGRAM_START_TIME,`${hr}`)}get programEndTime(){let hr=this.getAttribute(o.PROGRAM_END_TIME);if(hr==null)return;let gr=+hr;return Number.isNaN(gr)?void 0:gr}set programEndTime(hr){hr==null?this.removeAttribute(o.PROGRAM_END_TIME):this.setAttribute(o.PROGRAM_END_TIME,`${hr}`)}get assetStartTime(){let hr=this.getAttribute(o.ASSET_START_TIME);if(hr==null)return;let gr=+hr;return Number.isNaN(gr)?void 0:gr}set assetStartTime(hr){hr==null?this.removeAttribute(o.ASSET_START_TIME):this.setAttribute(o.ASSET_START_TIME,`${hr}`)}get assetEndTime(){let hr=this.getAttribute(o.ASSET_END_TIME);if(hr==null)return;let gr=+hr;return Number.isNaN(gr)?void 0:gr}set assetEndTime(hr){hr==null?this.removeAttribute(o.ASSET_END_TIME):this.setAttribute(o.ASSET_END_TIME,`${hr}`)}get customDomain(){var hr;return(hr=this.getAttribute(o.CUSTOM_DOMAIN))!=null?hr:void 0}set customDomain(hr){hr!==this.customDomain&&(hr?this.setAttribute(o.CUSTOM_DOMAIN,hr):this.removeAttribute(o.CUSTOM_DOMAIN))}get drmToken(){var hr;return(hr=this.getAttribute(o.DRM_TOKEN))!=null?hr:void 0}set drmToken(hr){hr!==this.drmToken&&(hr?this.setAttribute(o.DRM_TOKEN,hr):this.removeAttribute(o.DRM_TOKEN))}get playbackToken(){var hr,gr,vr,xr;if(this.hasAttribute(o.PLAYBACK_TOKEN))return(hr=this.getAttribute(o.PLAYBACK_TOKEN))!=null?hr:void 0;if(this.hasAttribute(o.PLAYBACK_ID)){let[,Er]=Y$1((gr=this.playbackId)!=null?gr:"");return(vr=new URLSearchParams(Er).get("token"))!=null?vr:void 0}if(this.src)return(xr=new URLSearchParams(this.src).get("token"))!=null?xr:void 0}set playbackToken(hr){hr!==this.playbackToken&&(hr?this.setAttribute(o.PLAYBACK_TOKEN,hr):this.removeAttribute(o.PLAYBACK_TOKEN))}get tokens(){let hr=this.getAttribute(o.PLAYBACK_TOKEN),gr=this.getAttribute(o.DRM_TOKEN);return{...i$1(this,jt$1),...hr!=null?{playback:hr}:{},...gr!=null?{drm:gr}:{}}}set tokens(hr){h$1(this,jt$1,hr??{})}get ended(){return xt$2(this.nativeEl,this._hls)}get envKey(){var hr;return(hr=this.getAttribute(o.ENV_KEY))!=null?hr:void 0}set envKey(hr){hr!==this.envKey&&(hr?this.setAttribute(o.ENV_KEY,hr):this.removeAttribute(o.ENV_KEY))}get beaconCollectionDomain(){var hr;return(hr=this.getAttribute(o.BEACON_COLLECTION_DOMAIN))!=null?hr:void 0}set beaconCollectionDomain(hr){hr!==this.beaconCollectionDomain&&(hr?this.setAttribute(o.BEACON_COLLECTION_DOMAIN,hr):this.removeAttribute(o.BEACON_COLLECTION_DOMAIN))}get streamType(){var hr;return(hr=this.getAttribute(o.STREAM_TYPE))!=null?hr:Le$1(this.nativeEl)}set streamType(hr){hr!==this.streamType&&(hr?this.setAttribute(o.STREAM_TYPE,hr):this.removeAttribute(o.STREAM_TYPE))}get targetLiveWindow(){return this.hasAttribute(o.TARGET_LIVE_WINDOW)?+this.getAttribute(o.TARGET_LIVE_WINDOW):Ir(this.nativeEl)}set targetLiveWindow(hr){hr!=this.targetLiveWindow&&(hr==null?this.removeAttribute(o.TARGET_LIVE_WINDOW):this.setAttribute(o.TARGET_LIVE_WINDOW,`${+hr}`))}get liveEdgeStart(){var hr,gr;if(this.hasAttribute(o.LIVE_EDGE_OFFSET)){let{liveEdgeOffset:vr}=this,xr=(hr=this.nativeEl.seekable.end(0))!=null?hr:0,Er=(gr=this.nativeEl.seekable.start(0))!=null?gr:0;return Math.max(Er,xr-vr)}return Ar(this.nativeEl)}get liveEdgeOffset(){if(this.hasAttribute(o.LIVE_EDGE_OFFSET))return+this.getAttribute(o.LIVE_EDGE_OFFSET)}set liveEdgeOffset(hr){hr!=this.targetLiveWindow&&(hr==null?this.removeAttribute(o.LIVE_EDGE_OFFSET):this.setAttribute(o.LIVE_EDGE_OFFSET,`${+hr}`))}get seekable(){return Fe$1(this.nativeEl)}async addCuePoints(hr){return xe$1(this.nativeEl,hr)}get activeCuePoint(){return ve$2(this.nativeEl)}get cuePoints(){return et$1(this.nativeEl)}async addChapters(hr){return _e$2(this.nativeEl,hr)}get activeChapter(){return ke$2(this.nativeEl)}get chapters(){return tt$1(this.nativeEl)}getStartDate(){return rt$1(this.nativeEl,this._hls)}get currentPdt(){return nt(this.nativeEl,this._hls)}get preferPlayback(){let hr=this.getAttribute(o.PREFER_PLAYBACK);if(hr===q$1.MSE||hr===q$1.NATIVE)return hr}set preferPlayback(hr){hr!==this.preferPlayback&&(hr===q$1.MSE||hr===q$1.NATIVE?this.setAttribute(o.PREFER_PLAYBACK,hr):this.removeAttribute(o.PREFER_PLAYBACK))}get metadata(){return{...this.getAttributeNames().filter(hr=>hr.startsWith("metadata-")&&![o.METADATA_URL].includes(hr)).reduce((hr,gr)=>{let vr=this.getAttribute(gr);return vr!=null&&(hr[gr.replace(/^metadata-/,"").replace(/-/g,"_")]=vr),hr},{}),...i$1(this,Pt$1)}}set metadata(hr){h$1(this,Pt$1,hr??{}),this.mux&&this.mux.emit("hb",i$1(this,Pt$1))}get _hlsConfig(){return i$1(this,Wt$1)}set _hlsConfig(hr){h$1(this,Wt$1,hr)}load(){h$1(this,M$1,Sr(this,this.nativeEl,i$1(this,M$1)))}unload(){vt$2(this.nativeEl,i$1(this,M$1)),h$1(this,M$1,void 0)}attributeChangedCallback(hr,gr,vr){var xr,Er;switch(Zt$1.observedAttributes.includes(hr)&&!["src","autoplay","preload"].includes(hr)&&super.attributeChangedCallback(hr,gr,vr),hr){case o.PLAYER_SOFTWARE_NAME:this.playerSoftwareName=vr??void 0;break;case o.PLAYER_SOFTWARE_VERSION:this.playerSoftwareVersion=vr??void 0;break;case"src":{let Cr=!!gr,wr=!!vr;!Cr&&wr?A(this,It$1,pe$2).call(this):Cr&&!wr?this.unload():Cr&&wr&&(this.unload(),A(this,It$1,pe$2).call(this));break}case"autoplay":if(vr===gr)break;(xr=i$1(this,M$1))==null||xr.setAutoplay(this.autoplay);break;case"preload":if(vr===gr)break;(Er=i$1(this,M$1))==null||Er.setPreload(vr);break;case o.PLAYBACK_ID:this.src=Lr(this);break;case o.DEBUG:{let Cr=this.debug;this.mux&&console.info("Cannot toggle debug mode of mux data after initialization. Make sure you set all metadata to override before setting the src."),this._hls&&(this._hls.config.debug=Cr);break}case o.METADATA_URL:vr&&fetch(vr).then(Cr=>Cr.json()).then(Cr=>this.metadata=Cr).catch(()=>console.error(`Unable to load or parse metadata JSON from metadata-url ${vr}!`));break;case o.STREAM_TYPE:(vr==null||vr!==gr)&&this.dispatchEvent(new CustomEvent("streamtypechange",{composed:!0,bubbles:!0}));break;case o.TARGET_LIVE_WINDOW:(vr==null||vr!==gr)&&this.dispatchEvent(new CustomEvent("targetlivewindowchange",{composed:!0,bubbles:!0,detail:this.targetLiveWindow}));break}}connectedCallback(){var hr;(hr=super.connectedCallback)==null||hr.call(this),this.nativeEl&&this.src&&!i$1(this,M$1)&&A(this,It$1,pe$2).call(this)}disconnectedCallback(){this.unload()}};M$1=new WeakMap,Ot$1=new WeakMap,Yt$1=new WeakMap,Pt$1=new WeakMap,jt$1=new WeakMap,Wt$1=new WeakMap,Ht=new WeakMap,$t$1=new WeakMap,zt$1=new WeakMap,It$1=new WeakSet,pe$2=async function(){i$1(this,Ot$1)||(await h$1(this,Ot$1,Promise.resolve()),h$1(this,Ot$1,null),this.load())};var Xt$1,Ut$1=class extends $e$1(oi(_e$1)){constructor(){super(...arguments),u$1(this,Xt$1,void 0)}get muxCastCustomData(){return{mux:{playbackId:this.playbackId,minResolution:this.minResolution,maxResolution:this.maxResolution,renditionOrder:this.renditionOrder,customDomain:this.customDomain,tokens:{drm:this.drmToken},envKey:this.envKey,metadata:this.metadata,disableCookies:this.disableCookies,disableTracking:this.disableTracking,beaconCollectionDomain:this.beaconCollectionDomain,startTime:this.startTime,preferCmcd:this.preferCmcd}}}get castCustomData(){var hr;return(hr=i$1(this,Xt$1))!=null?hr:this.muxCastCustomData}set castCustomData(hr){h$1(this,Xt$1,hr)}};Xt$1=new WeakMap;Qt.customElements.get("mux-video")||(Qt.customElements.define("mux-video",Ut$1),Qt.MuxVideoElement=Ut$1);var Cs=Ut$1,__accessCheck$9=(mr,hr,gr)=>{if(!hr.has(mr))throw TypeError("Cannot "+gr)},__privateGet$8=(mr,hr,gr)=>(__accessCheck$9(mr,hr,"read from private field"),gr?gr.call(mr):hr.get(mr)),__privateAdd$9=(mr,hr,gr)=>{if(hr.has(mr))throw TypeError("Cannot add the same private member more than once");hr instanceof WeakSet?hr.add(mr):hr.set(mr,gr)},__privateSet$7=(mr,hr,gr,vr)=>(__accessCheck$9(mr,hr,"write to private field"),hr.set(mr,gr),gr),_parts,_processor,_items,_value,_element,_attributeName,_namespaceURI,_list,list_get,_parentNode,_nodes;const ELEMENT=1,STRING=0,PART=1,defaultProcessor={processCallback(mr,hr,gr){if(gr){for(const[vr,xr]of hr)if(vr in gr){const Er=gr[vr];typeof Er=="boolean"&&xr instanceof AttrPart&&typeof xr.element[xr.attributeName]=="boolean"?xr.booleanValue=Er:typeof Er=="function"&&xr instanceof AttrPart?xr.element[xr.attributeName]=Er:xr.value=Er}}}};class TemplateInstance extends GlobalThis.DocumentFragment{constructor(hr,gr,vr=defaultProcessor){var xr;super(),__privateAdd$9(this,_parts,void 0),__privateAdd$9(this,_processor,void 0),this.append(hr.content.cloneNode(!0)),__privateSet$7(this,_parts,parse(this)),__privateSet$7(this,_processor,vr),(xr=vr.createCallback)==null||xr.call(vr,this,__privateGet$8(this,_parts),gr),vr.processCallback(this,__privateGet$8(this,_parts),gr)}update(hr){__privateGet$8(this,_processor).processCallback(this,__privateGet$8(this,_parts),hr)}}_parts=new WeakMap;_processor=new WeakMap;const parse=(mr,hr=[])=>{let gr,vr;for(const xr of mr.attributes||[])if(xr.value.includes("{{")){const Er=new AttrPartList;for([gr,vr]of tokenize$1(xr.value))if(!gr)Er.append(vr);else{const Cr=new AttrPart(mr,xr.name,xr.namespaceURI);Er.append(Cr),hr.push([vr,Cr])}xr.value=Er.toString()}for(const xr of mr.childNodes)if(xr.nodeType===ELEMENT&&!(xr instanceof HTMLTemplateElement))parse(xr,hr);else{const Er=xr.data;if(xr.nodeType===ELEMENT||Er.includes("{{")){const Cr=[];if(Er)for([gr,vr]of tokenize$1(Er))if(!gr)Cr.push(new Text(vr));else{const wr=new ChildNodePart(mr);Cr.push(wr),hr.push([vr,wr])}else if(xr instanceof HTMLTemplateElement){const wr=new InnerTemplatePart(mr,xr);Cr.push(wr),hr.push([wr.expression,wr])}xr.replaceWith(...Cr.flatMap(wr=>wr.replacementNodes||[wr]))}}return hr},mem={},tokenize$1=mr=>{let hr="",gr=0,vr=mem[mr],xr=0,Er;if(vr)return vr;for(vr=[];Er=mr[xr];xr++)Er==="{"&&mr[xr+1]==="{"&&mr[xr-1]!=="\\"&&mr[xr+2]&&++gr==1?(hr&&vr.push([STRING,hr]),hr="",xr++):Er==="}"&&mr[xr+1]==="}"&&mr[xr-1]!=="\\"&&!--gr?(vr.push([PART,hr.trim()]),hr="",xr++):hr+=Er||"";return hr&&vr.push([STRING,(gr>0?"{{":"")+hr]),mem[mr]=vr},FRAGMENT=11;class Part{get value(){return""}set value(hr){}toString(){return this.value}}const attrPartToList=new WeakMap;class AttrPartList{constructor(){__privateAdd$9(this,_items,[])}[Symbol.iterator](){return __privateGet$8(this,_items).values()}get length(){return __privateGet$8(this,_items).length}item(hr){return __privateGet$8(this,_items)[hr]}append(...hr){for(const gr of hr)gr instanceof AttrPart&&attrPartToList.set(gr,this),__privateGet$8(this,_items).push(gr)}toString(){return __privateGet$8(this,_items).join("")}}_items=new WeakMap;class AttrPart extends Part{constructor(hr,gr,vr){super(),__privateAdd$9(this,_list),__privateAdd$9(this,_value,""),__privateAdd$9(this,_element,void 0),__privateAdd$9(this,_attributeName,void 0),__privateAdd$9(this,_namespaceURI,void 0),__privateSet$7(this,_element,hr),__privateSet$7(this,_attributeName,gr),__privateSet$7(this,_namespaceURI,vr)}get attributeName(){return __privateGet$8(this,_attributeName)}get attributeNamespace(){return __privateGet$8(this,_namespaceURI)}get element(){return __privateGet$8(this,_element)}get value(){return __privateGet$8(this,_value)}set value(hr){__privateGet$8(this,_value)!==hr&&(__privateSet$7(this,_value,hr),!__privateGet$8(this,_list,list_get)||__privateGet$8(this,_list,list_get).length===1?hr==null?__privateGet$8(this,_element).removeAttributeNS(__privateGet$8(this,_namespaceURI),__privateGet$8(this,_attributeName)):__privateGet$8(this,_element).setAttributeNS(__privateGet$8(this,_namespaceURI),__privateGet$8(this,_attributeName),hr):__privateGet$8(this,_element).setAttributeNS(__privateGet$8(this,_namespaceURI),__privateGet$8(this,_attributeName),__privateGet$8(this,_list,list_get).toString()))}get booleanValue(){return __privateGet$8(this,_element).hasAttributeNS(__privateGet$8(this,_namespaceURI),__privateGet$8(this,_attributeName))}set booleanValue(hr){if(!__privateGet$8(this,_list,list_get)||__privateGet$8(this,_list,list_get).length===1)this.value=hr?"":null;else throw new DOMException("Value is not fully templatized")}}_value=new WeakMap;_element=new WeakMap;_attributeName=new WeakMap;_namespaceURI=new WeakMap;_list=new WeakSet;list_get=function(){return attrPartToList.get(this)};class ChildNodePart extends Part{constructor(hr,gr){super(),__privateAdd$9(this,_parentNode,void 0),__privateAdd$9(this,_nodes,void 0),__privateSet$7(this,_parentNode,hr),__privateSet$7(this,_nodes,gr?[...gr]:[new Text])}get replacementNodes(){return __privateGet$8(this,_nodes)}get parentNode(){return __privateGet$8(this,_parentNode)}get nextSibling(){return __privateGet$8(this,_nodes)[__privateGet$8(this,_nodes).length-1].nextSibling}get previousSibling(){return __privateGet$8(this,_nodes)[0].previousSibling}get value(){return __privateGet$8(this,_nodes).map(hr=>hr.textContent).join("")}set value(hr){this.replace(hr)}replace(...hr){const gr=hr.flat().flatMap(vr=>vr==null?[new Text]:vr.forEach?[...vr]:vr.nodeType===FRAGMENT?[...vr.childNodes]:vr.nodeType?[vr]:[new Text(vr)]);gr.length||gr.push(new Text),__privateSet$7(this,_nodes,swapdom(__privateGet$8(this,_nodes)[0].parentNode,__privateGet$8(this,_nodes),gr,this.nextSibling))}}_parentNode=new WeakMap;_nodes=new WeakMap;class InnerTemplatePart extends ChildNodePart{constructor(hr,gr){const vr=gr.getAttribute("directive")||gr.getAttribute("type");let xr=gr.getAttribute("expression")||gr.getAttribute(vr)||"";xr.startsWith("{{")&&(xr=xr.trim().slice(2,-2).trim()),super(hr),this.expression=xr,this.template=gr,this.directive=vr}}function swapdom(mr,hr,gr,vr=null){let xr=0,Er,Cr,wr,Rr=gr.length,kr=hr.length;for(;xr<Rr&&xr<kr&&hr[xr]==gr[xr];)xr++;for(;xr<Rr&&xr<kr&&gr[Rr-1]==hr[kr-1];)vr=gr[--kr,--Rr];if(xr==kr)for(;xr<Rr;)mr.insertBefore(gr[xr++],vr);if(xr==Rr)for(;xr<kr;)mr.removeChild(hr[xr++]);else{for(Er=hr[xr];xr<Rr;)wr=gr[xr++],Cr=Er?Er.nextSibling:vr,Er==wr?Er=Cr:xr<Rr&&gr[xr]==Cr?(mr.replaceChild(wr,Er),Er=Cr):mr.insertBefore(wr,Er);for(;Er!=vr;)Cr=Er.nextSibling,mr.removeChild(Er),Er=Cr}return gr}const pipeModifiers={string:mr=>String(mr)};class PartialTemplate{constructor(hr){this.template=hr,this.state=void 0}}const templates=new WeakMap,templateInstances=new WeakMap,Directives={partial:(mr,hr)=>{hr[mr.expression]=new PartialTemplate(mr.template)},if:(mr,hr)=>{var gr;if(evaluateExpression(mr.expression,hr))if(templates.get(mr)!==mr.template){templates.set(mr,mr.template);const vr=new TemplateInstance(mr.template,hr,processor);mr.replace(vr),templateInstances.set(mr,vr)}else(gr=templateInstances.get(mr))==null||gr.update(hr);else mr.replace(""),templates.delete(mr),templateInstances.delete(mr)}},DirectiveNames=Object.keys(Directives),processor={processCallback(mr,hr,gr){var vr,xr;if(gr)for(const[Er,Cr]of hr){if(Cr instanceof InnerTemplatePart){if(!Cr.directive){const Rr=DirectiveNames.find(kr=>Cr.template.hasAttribute(kr));Rr&&(Cr.directive=Rr,Cr.expression=Cr.template.getAttribute(Rr))}(vr=Directives[Cr.directive])==null||vr.call(Directives,Cr,gr);continue}let wr=evaluateExpression(Er,gr);if(wr instanceof PartialTemplate){templates.get(Cr)!==wr.template?(templates.set(Cr,wr.template),wr=new TemplateInstance(wr.template,wr.state,processor),Cr.value=wr,templateInstances.set(Cr,wr)):(xr=templateInstances.get(Cr))==null||xr.update(wr.state);continue}wr?(Cr instanceof AttrPart&&Cr.attributeName.startsWith("aria-")&&(wr=String(wr)),Cr instanceof AttrPart?typeof wr=="boolean"?Cr.booleanValue=wr:typeof wr=="function"?Cr.element[Cr.attributeName]=wr:Cr.value=wr:(Cr.value=wr,templates.delete(Cr),templateInstances.delete(Cr))):Cr instanceof AttrPart?Cr.value=void 0:(Cr.value=void 0,templates.delete(Cr),templateInstances.delete(Cr))}}},operators={"!":mr=>!mr,"!!":mr=>!!mr,"==":(mr,hr)=>mr==hr,"!=":(mr,hr)=>mr!=hr,">":(mr,hr)=>mr>hr,">=":(mr,hr)=>mr>=hr,"<":(mr,hr)=>mr<hr,"<=":(mr,hr)=>mr<=hr,"??":(mr,hr)=>mr??hr,"|":(mr,hr)=>{var gr;return(gr=pipeModifiers[hr])==null?void 0:gr.call(pipeModifiers,mr)}};function tokenizeExpression(mr){return tokenize(mr,{boolean:/true|false/,number:/-?\d+\.?\d*/,string:/(["'])((?:\\.|[^\\])*?)\1/,operator:/[!=><][=!]?|\?\?|\|/,ws:/\s+/,param:/[$a-z_][$\w]*/i}).filter(({type:hr})=>hr!=="ws")}function evaluateExpression(mr,hr={}){var gr,vr,xr,Er,Cr,wr,Rr;const kr=tokenizeExpression(mr);if(kr.length===0||kr.some(({type:Dr})=>!Dr))return invalidExpression(mr);if(((gr=kr[0])==null?void 0:gr.token)===">"){const Dr=hr[(vr=kr[1])==null?void 0:vr.token];if(!Dr)return invalidExpression(mr);const Br={...hr};Dr.state=Br;const Hr=kr.slice(2);for(let Gr=0;Gr<Hr.length;Gr+=3){const qr=(xr=Hr[Gr])==null?void 0:xr.token,zr=(Er=Hr[Gr+1])==null?void 0:Er.token,Qr=(Cr=Hr[Gr+2])==null?void 0:Cr.token;qr&&zr==="="&&(Br[qr]=getParamValue(Qr,hr))}return Dr}if(kr.length===1)return isValidParam(kr[0])?getParamValue(kr[0].token,hr):invalidExpression(mr);if(kr.length===2){const Dr=(wr=kr[0])==null?void 0:wr.token,Br=operators[Dr];if(!Br||!isValidParam(kr[1]))return invalidExpression(mr);const Hr=getParamValue(kr[1].token,hr);return Br(Hr)}if(kr.length===3){const Dr=(Rr=kr[1])==null?void 0:Rr.token,Br=operators[Dr];if(!Br||!isValidParam(kr[0])||!isValidParam(kr[2]))return invalidExpression(mr);const Hr=getParamValue(kr[0].token,hr);if(Dr==="|")return Br(Hr,kr[2].token);const Gr=getParamValue(kr[2].token,hr);return Br(Hr,Gr)}}function invalidExpression(mr){return console.warn(`Warning: invalid expression \`${mr}\``),!1}function isValidParam({type:mr}){return["number","boolean","string","param"].includes(mr)}function getParamValue(mr,hr){const gr=mr[0],vr=mr.slice(-1);return mr==="true"||mr==="false"?mr==="true":gr===vr&&["'",'"'].includes(gr)?mr.slice(1,-1):isNumericString(mr)?parseFloat(mr):hr[mr]}function tokenize(mr,hr){let gr,vr,xr;const Er=[];for(;mr;){xr=null,gr=mr.length;for(const Cr in hr)vr=hr[Cr].exec(mr),vr&&vr.index<gr&&(xr={token:vr[0],type:Cr,matches:vr.slice(1)},gr=vr.index);gr&&Er.push({token:mr.substr(0,gr),type:void 0}),xr&&Er.push(xr),mr=mr.substr(gr+(xr?xr.token.length:0))}return Er}var __accessCheck$8=(mr,hr,gr)=>{if(!hr.has(mr))throw TypeError("Cannot "+gr)},__privateGet$7=(mr,hr,gr)=>(__accessCheck$8(mr,hr,"read from private field"),gr?gr.call(mr):hr.get(mr)),__privateAdd$8=(mr,hr,gr)=>{if(hr.has(mr))throw TypeError("Cannot add the same private member more than once");hr instanceof WeakSet?hr.add(mr):hr.set(mr,gr)},__privateSet$6=(mr,hr,gr,vr)=>(__accessCheck$8(mr,hr,"write to private field"),hr.set(mr,gr),gr),__privateMethod$6=(mr,hr,gr)=>(__accessCheck$8(mr,hr,"access private method"),gr),_template,_prevTemplate,_prevTemplateId,_upgradeProperty,upgradeProperty_fn,_updateTemplate,updateTemplate_fn;const observedMediaAttributes={mediatargetlivewindow:"targetlivewindow",mediastreamtype:"streamtype"},prependTemplate=Document$2.createElement("template");prependTemplate.innerHTML=`
  <style>
    :host {
      display: inline-block;
      line-height: 0;

      /* Hide theme element until the breakpoints are available to avoid flicker. */
      visibility: hidden;
    }

    media-controller {
      width: 100%;
      height: 100%;
    }

    media-captions-button:not([mediasubtitleslist]),
    media-captions-menu:not([mediasubtitleslist]),
    media-captions-menu-button:not([mediasubtitleslist]),
    media-audio-track-menu[mediaaudiotrackunavailable],
    media-audio-track-menu-button[mediaaudiotrackunavailable],
    media-rendition-menu[mediarenditionunavailable],
    media-rendition-menu-button[mediarenditionunavailable],
    media-volume-range[mediavolumeunavailable],
    media-airplay-button[mediaairplayunavailable],
    media-fullscreen-button[mediafullscreenunavailable],
    media-cast-button[mediacastunavailable],
    media-pip-button[mediapipunavailable] {
      display: none;
    }
  </style>
`;class MediaThemeElement extends GlobalThis.HTMLElement{constructor(){super(),__privateAdd$8(this,_upgradeProperty),__privateAdd$8(this,_updateTemplate),__privateAdd$8(this,_template,void 0),__privateAdd$8(this,_prevTemplate,void 0),__privateAdd$8(this,_prevTemplateId,void 0),this.shadowRoot?this.renderRoot=this.shadowRoot:(this.renderRoot=this.attachShadow({mode:"open"}),this.createRenderer());const hr=new MutationObserver(gr=>{var vr;this.mediaController&&!((vr=this.mediaController)!=null&&vr.breakpointsComputed)||gr.some(xr=>{const Er=xr.target;return Er===this?!0:Er.localName!=="media-controller"?!1:!!(observedMediaAttributes[xr.attributeName]||xr.attributeName.startsWith("breakpoint"))})&&this.render()});hr.observe(this,{attributes:!0}),hr.observe(this.renderRoot,{attributes:!0,subtree:!0}),this.addEventListener(MediaStateChangeEvents.BREAKPOINTS_COMPUTED,this.render),__privateMethod$6(this,_upgradeProperty,upgradeProperty_fn).call(this,"template")}get mediaController(){return this.renderRoot.querySelector("media-controller")}get template(){var hr;return(hr=__privateGet$7(this,_template))!=null?hr:this.constructor.template}set template(hr){__privateSet$6(this,_prevTemplateId,null),__privateSet$6(this,_template,hr),this.createRenderer()}get props(){var hr,gr,vr;const xr=[...Array.from((gr=(hr=this.mediaController)==null?void 0:hr.attributes)!=null?gr:[]).filter(({name:Cr})=>observedMediaAttributes[Cr]||Cr.startsWith("breakpoint")),...Array.from(this.attributes)],Er={};for(const Cr of xr){const wr=(vr=observedMediaAttributes[Cr.name])!=null?vr:camelCase(Cr.name);let{value:Rr}=Cr;Rr!=null?(isNumericString(Rr)&&(Rr=parseFloat(Rr)),Er[wr]=Rr===""?!0:Rr):Er[wr]=!1}return Er}attributeChangedCallback(hr,gr,vr){hr==="template"&&gr!=vr&&__privateMethod$6(this,_updateTemplate,updateTemplate_fn).call(this)}connectedCallback(){__privateMethod$6(this,_updateTemplate,updateTemplate_fn).call(this)}createRenderer(){this.template&&this.template!==__privateGet$7(this,_prevTemplate)&&(__privateSet$6(this,_prevTemplate,this.template),this.renderer=new TemplateInstance(this.template,this.props,this.constructor.processor),this.renderRoot.textContent="",this.renderRoot.append(prependTemplate.content.cloneNode(!0),this.renderer))}render(){var hr;if((hr=this.renderer)==null||hr.update(this.props),this.renderRoot.isConnected){const{style:gr}=getOrInsertCSSRule(this.renderRoot,":host");gr.visibility==="hidden"&&gr.removeProperty("visibility")}}}_template=new WeakMap;_prevTemplate=new WeakMap;_prevTemplateId=new WeakMap;_upgradeProperty=new WeakSet;upgradeProperty_fn=function(mr){if(Object.prototype.hasOwnProperty.call(this,mr)){const hr=this[mr];delete this[mr],this[mr]=hr}};_updateTemplate=new WeakSet;updateTemplate_fn=function(){var mr;const hr=this.getAttribute("template");if(!hr||hr===__privateGet$7(this,_prevTemplateId))return;const gr=this.getRootNode(),vr=(mr=gr?.getElementById)==null?void 0:mr.call(gr,hr);if(vr){__privateSet$6(this,_prevTemplateId,hr),__privateSet$6(this,_template,vr),this.createRenderer();return}isValidUrl(hr)&&(__privateSet$6(this,_prevTemplateId,hr),request$1(hr).then(xr=>{const Er=Document$2.createElement("template");Er.innerHTML=xr,__privateSet$6(this,_template,Er),this.createRenderer()}).catch(console.error))};MediaThemeElement.observedAttributes=["template"];MediaThemeElement.processor=processor;function isValidUrl(mr){if(!/^(\/|\.\/|https?:\/\/)/.test(mr))return!1;const hr=/^https?:\/\//.test(mr)?void 0:location.origin;try{new URL(mr,hr)}catch{return!1}return!0}async function request$1(mr){const hr=await fetch(mr);if(hr.status!==200)throw new Error(`Failed to load resource: the server responded with a status of ${hr.status}`);return hr.text()}GlobalThis.customElements.get("media-theme")||GlobalThis.customElements.define("media-theme",MediaThemeElement);function computePosition({anchor:mr,floating:hr,placement:gr}){const vr=getElementRects({anchor:mr,floating:hr}),{x:xr,y:Er}=computeCoordsFromPlacement(vr,gr);return{x:xr,y:Er}}function getElementRects({anchor:mr,floating:hr}){return{anchor:getRectRelativeToOffsetParent(mr,hr.offsetParent),floating:{x:0,y:0,width:hr.offsetWidth,height:hr.offsetHeight}}}function getRectRelativeToOffsetParent(mr,hr){var gr;const vr=mr.getBoundingClientRect(),xr=(gr=hr?.getBoundingClientRect())!=null?gr:{x:0,y:0};return{x:vr.x-xr.x,y:vr.y-xr.y,width:vr.width,height:vr.height}}function computeCoordsFromPlacement({anchor:mr,floating:hr},gr){const vr=getSideAxis(gr)==="x"?"y":"x",xr=vr==="y"?"height":"width",Er=getSide(gr),Cr=mr.x+mr.width/2-hr.width/2,wr=mr.y+mr.height/2-hr.height/2,Rr=mr[xr]/2-hr[xr]/2;let kr;switch(Er){case"top":kr={x:Cr,y:mr.y-hr.height};break;case"bottom":kr={x:Cr,y:mr.y+mr.height};break;case"right":kr={x:mr.x+mr.width,y:wr};break;case"left":kr={x:mr.x-hr.width,y:wr};break;default:kr={x:mr.x,y:mr.y}}switch(gr.split("-")[1]){case"start":kr[vr]-=Rr;break;case"end":kr[vr]+=Rr;break}return kr}function getSide(mr){return mr.split("-")[0]}function getSideAxis(mr){return["top","bottom"].includes(getSide(mr))?"y":"x"}class InvokeEvent extends Event{constructor({action:hr="auto",relatedTarget:gr,...vr}){super("invoke",vr),this.action=hr,this.relatedTarget=gr}}class ToggleEvent extends Event{constructor({newState:hr,oldState:gr,...vr}){super("toggle",vr),this.newState=hr,this.oldState=gr}}var __accessCheck$7=(mr,hr,gr)=>{if(!hr.has(mr))throw TypeError("Cannot "+gr)},__privateGet$6=(mr,hr,gr)=>(__accessCheck$7(mr,hr,"read from private field"),gr?gr.call(mr):hr.get(mr)),__privateAdd$7=(mr,hr,gr)=>{if(hr.has(mr))throw TypeError("Cannot add the same private member more than once");hr instanceof WeakSet?hr.add(mr):hr.set(mr,gr)},__privateSet$5=(mr,hr,gr,vr)=>(__accessCheck$7(mr,hr,"write to private field"),hr.set(mr,gr),gr),__privateMethod$5=(mr,hr,gr)=>(__accessCheck$7(mr,hr,"access private method"),gr),_mediaController,_previouslyFocused,_invokerElement,_previousItems,_mutationObserver,_isPopover,_cssRule,_handleSlotChange$1,handleSlotChange_fn$1,_handleMenuItems,_updateLayoutStyle,updateLayoutStyle_fn,_handleInvoke,handleInvoke_fn,_handleOpen,handleOpen_fn,_handleClosed,handleClosed_fn,_handleBoundsResize,_handleMenuResize,_positionMenu,positionMenu_fn,_resizeMenu,resizeMenu_fn,_handleClick,handleClick_fn,_backButtonElement,backButtonElement_get,_handleToggle,handleToggle_fn,_checkSubmenuHasExpanded,checkSubmenuHasExpanded_fn,_handleFocusOut,handleFocusOut_fn,_handleKeyDown$1,handleKeyDown_fn$1,_getItem,getItem_fn,_getTabItem,getTabItem_fn,_setTabItem,setTabItem_fn,_selectItem,selectItem_fn;function createMenuItem({type:mr,text:hr,value:gr,checked:vr}){const xr=Document$2.createElement("media-chrome-menu-item");xr.type=mr??"",xr.part.add("menu-item"),mr&&xr.part.add(mr),xr.value=gr,xr.checked=vr;const Er=Document$2.createElement("span");return Er.textContent=hr,xr.append(Er),xr}function createIndicator(mr,hr){let gr=mr.querySelector(`:scope > [slot="${hr}"]`);if(gr?.nodeName=="SLOT"&&(gr=gr.assignedElements({flatten:!0})[0]),gr)return gr=gr.cloneNode(!0),gr;const vr=mr.shadowRoot.querySelector(`[name="${hr}"] > svg`);return vr?vr.cloneNode(!0):""}const template$4=Document$2.createElement("template");template$4.innerHTML=`
  <style>
    :host {
      font: var(--media-font,
        var(--media-font-weight, normal)
        var(--media-font-size, 14px) /
        var(--media-text-content-height, var(--media-control-height, 24px))
        var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));
      color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));
      background: var(--media-menu-background, var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .8))));
      border-radius: var(--media-menu-border-radius);
      border: var(--media-menu-border, none);
      display: var(--media-menu-display, inline-flex);
      transition: var(--media-menu-transition-in,
        visibility 0s,
        opacity .2s ease-out,
        transform .15s ease-out,
        left .2s ease-in-out,
        min-width .2s ease-in-out,
        min-height .2s ease-in-out
      ) !important;
      
      visibility: var(--media-menu-visibility, visible);
      opacity: var(--media-menu-opacity, 1);
      max-height: var(--media-menu-max-height, var(--_menu-max-height, 300px));
      transform: var(--media-menu-transform-in, translateY(0) scale(1));
      flex-direction: column;
      
      min-height: 0;
      position: relative;
      bottom: var(--_menu-bottom);
      box-sizing: border-box;
    }

    :host([hidden]) {
      transition: var(--media-menu-transition-out,
        visibility .15s ease-in,
        opacity .15s ease-in,
        transform .15s ease-in
      ) !important;
      visibility: var(--media-menu-hidden-visibility, hidden);
      opacity: var(--media-menu-hidden-opacity, 0);
      max-height: var(--media-menu-hidden-max-height,
        var(--media-menu-max-height, var(--_menu-max-height, 300px)));
      transform: var(--media-menu-transform-out, translateY(2px) scale(.99));
      pointer-events: none;
    }

    :host([slot="submenu"]) {
      background: none;
      width: 100%;
      min-height: 100%;
      position: absolute;
      bottom: 0;
      right: -100%;
    }

    #container {
      display: flex;
      flex-direction: column;
      min-height: 0;
      transition: transform .2s ease-out;
      transform: translate(0, 0);
    }

    #container.has-expanded {
      transition: transform .2s ease-in;
      transform: translate(-100%, 0);
    }

    button {
      background: none;
      color: inherit;
      border: none;
      padding: 0;
      font: inherit;
      outline: inherit;
      display: inline-flex;
      align-items: center;
    }

    slot[name="header"][hidden] {
      display: none;
    }

    slot[name="header"] > *,
    slot[name="header"]::slotted(*) {
      padding: .4em .7em;
      border-bottom: 1px solid rgb(255 255 255 / .25);
      cursor: default;
    }

    slot[name="header"] > button[part~="back"],
    slot[name="header"]::slotted(button[part~="back"]) {
      cursor: pointer;
    }

    svg[part~="back"] {
      height: var(--media-menu-icon-height, var(--media-control-height, 24px));
      fill: var(--media-icon-color, var(--media-primary-color, rgb(238 238 238)));
      display: block;
      margin-right: .5ch;
    }

    slot:not([name]) {
      gap: var(--media-menu-gap);
      flex-direction: var(--media-menu-flex-direction, column);
      overflow: var(--media-menu-overflow, hidden auto);
      display: flex;
      min-height: 0;
    }

    :host([role="menu"]) slot:not([name]) {
      padding-block: .4em;
    }

    slot:not([name])::slotted([role="menu"]) {
      background: none;
    }

    media-chrome-menu-item > span {
      margin-right: .5ch;
      max-width: var(--media-menu-item-max-width);
      text-overflow: ellipsis;
      overflow: hidden;
    }
  </style>
  <style id="layout-row" media="width:0">

    slot[name="header"] > *,
    slot[name="header"]::slotted(*) {
      padding: .4em .5em;
    }

    slot:not([name]) {
      gap: var(--media-menu-gap, .25em);
      flex-direction: var(--media-menu-flex-direction, row);
      padding-inline: .5em;
    }

    media-chrome-menu-item {
      padding: .3em .5em;
    }

    media-chrome-menu-item[aria-checked="true"] {
      background: var(--media-menu-item-checked-background, rgb(255 255 255 / .2));
    }

    
    media-chrome-menu-item::part(checked-indicator) {
      display: var(--media-menu-item-checked-indicator-display, none);
    }
  </style>
  <div id="container">
    <slot name="header" hidden>
      <button part="back button" aria-label="Back to previous menu">
        <slot name="back-icon">
          <svg aria-hidden="true" viewBox="0 0 20 24" part="back indicator">
            <path d="m11.88 17.585.742-.669-4.2-4.665 4.2-4.666-.743-.669-4.803 5.335 4.803 5.334Z"/>
          </svg>
        </slot>
        <slot name="title"></slot>
      </button>
    </slot>
    <slot></slot>
  </div>
  <slot name="checked-indicator" hidden></slot>
`;const Attributes$3={STYLE:"style",HIDDEN:"hidden",DISABLED:"disabled",ANCHOR:"anchor"};class MediaChromeMenu extends GlobalThis.HTMLElement{constructor(){super(),__privateAdd$7(this,_handleSlotChange$1),__privateAdd$7(this,_updateLayoutStyle),__privateAdd$7(this,_handleInvoke),__privateAdd$7(this,_handleOpen),__privateAdd$7(this,_handleClosed),__privateAdd$7(this,_positionMenu),__privateAdd$7(this,_resizeMenu),__privateAdd$7(this,_handleClick),__privateAdd$7(this,_backButtonElement),__privateAdd$7(this,_handleToggle),__privateAdd$7(this,_checkSubmenuHasExpanded),__privateAdd$7(this,_handleFocusOut),__privateAdd$7(this,_handleKeyDown$1),__privateAdd$7(this,_getItem),__privateAdd$7(this,_getTabItem),__privateAdd$7(this,_setTabItem),__privateAdd$7(this,_selectItem),__privateAdd$7(this,_mediaController,null),__privateAdd$7(this,_previouslyFocused,null),__privateAdd$7(this,_invokerElement,null),__privateAdd$7(this,_previousItems,new Set),__privateAdd$7(this,_mutationObserver,void 0),__privateAdd$7(this,_isPopover,!1),__privateAdd$7(this,_cssRule,null),__privateAdd$7(this,_handleMenuItems,()=>{const hr=__privateGet$6(this,_previousItems),gr=new Set(this.items);for(const vr of hr)gr.has(vr)||this.dispatchEvent(new CustomEvent("removemenuitem",{detail:vr}));for(const vr of gr)hr.has(vr)||this.dispatchEvent(new CustomEvent("addmenuitem",{detail:vr}));__privateSet$5(this,_previousItems,gr)}),__privateAdd$7(this,_handleBoundsResize,()=>{__privateMethod$5(this,_positionMenu,positionMenu_fn).call(this),__privateMethod$5(this,_resizeMenu,resizeMenu_fn).call(this,!1)}),__privateAdd$7(this,_handleMenuResize,()=>{__privateMethod$5(this,_positionMenu,positionMenu_fn).call(this)}),this.shadowRoot||(this.attachShadow({mode:"open"}),this.nativeEl=this.constructor.template.content.cloneNode(!0),this.shadowRoot.append(this.nativeEl)),this.container=this.shadowRoot.querySelector("#container"),this.defaultSlot=this.shadowRoot.querySelector("slot:not([name])"),this.shadowRoot.addEventListener("slotchange",this),__privateSet$5(this,_mutationObserver,new MutationObserver(__privateGet$6(this,_handleMenuItems))),__privateGet$6(this,_mutationObserver).observe(this.defaultSlot,{childList:!0})}static get observedAttributes(){return[Attributes$3.DISABLED,Attributes$3.HIDDEN,Attributes$3.STYLE,Attributes$3.ANCHOR,MediaStateReceiverAttributes.MEDIA_CONTROLLER]}static formatMenuItemText(hr){return hr}enable(){this.addEventListener("click",this),this.addEventListener("focusout",this),this.addEventListener("keydown",this),this.addEventListener("invoke",this),this.addEventListener("toggle",this)}disable(){this.removeEventListener("click",this),this.removeEventListener("focusout",this),this.removeEventListener("keyup",this),this.removeEventListener("invoke",this),this.removeEventListener("toggle",this)}handleEvent(hr){switch(hr.type){case"slotchange":__privateMethod$5(this,_handleSlotChange$1,handleSlotChange_fn$1).call(this,hr);break;case"invoke":__privateMethod$5(this,_handleInvoke,handleInvoke_fn).call(this,hr);break;case"click":__privateMethod$5(this,_handleClick,handleClick_fn).call(this,hr);break;case"toggle":__privateMethod$5(this,_handleToggle,handleToggle_fn).call(this,hr);break;case"focusout":__privateMethod$5(this,_handleFocusOut,handleFocusOut_fn).call(this,hr);break;case"keydown":__privateMethod$5(this,_handleKeyDown$1,handleKeyDown_fn$1).call(this,hr);break}}connectedCallback(){var hr,gr;__privateSet$5(this,_cssRule,insertCSSRule(this.shadowRoot,":host")),__privateMethod$5(this,_updateLayoutStyle,updateLayoutStyle_fn).call(this),this.hasAttribute("disabled")||this.enable(),this.role||(this.role="menu"),__privateSet$5(this,_mediaController,getAttributeMediaController(this)),(gr=(hr=__privateGet$6(this,_mediaController))==null?void 0:hr.associateElement)==null||gr.call(hr,this),this.hidden||(observeResize(getBoundsElement(this),__privateGet$6(this,_handleBoundsResize)),observeResize(this,__privateGet$6(this,_handleMenuResize)))}disconnectedCallback(){var hr,gr;unobserveResize(getBoundsElement(this),__privateGet$6(this,_handleBoundsResize)),unobserveResize(this,__privateGet$6(this,_handleMenuResize)),this.disable(),(gr=(hr=__privateGet$6(this,_mediaController))==null?void 0:hr.unassociateElement)==null||gr.call(hr,this),__privateSet$5(this,_mediaController,null)}attributeChangedCallback(hr,gr,vr){var xr,Er,Cr,wr;hr===Attributes$3.HIDDEN&&vr!==gr?(__privateGet$6(this,_isPopover)||__privateSet$5(this,_isPopover,!0),this.hidden?__privateMethod$5(this,_handleClosed,handleClosed_fn).call(this):__privateMethod$5(this,_handleOpen,handleOpen_fn).call(this),this.dispatchEvent(new ToggleEvent({oldState:this.hidden?"open":"closed",newState:this.hidden?"closed":"open",bubbles:!0}))):hr===MediaStateReceiverAttributes.MEDIA_CONTROLLER?(gr&&((Er=(xr=__privateGet$6(this,_mediaController))==null?void 0:xr.unassociateElement)==null||Er.call(xr,this),__privateSet$5(this,_mediaController,null)),vr&&this.isConnected&&(__privateSet$5(this,_mediaController,getAttributeMediaController(this)),(wr=(Cr=__privateGet$6(this,_mediaController))==null?void 0:Cr.associateElement)==null||wr.call(Cr,this))):hr===Attributes$3.DISABLED&&vr!==gr?vr==null?this.enable():this.disable():hr===Attributes$3.STYLE&&vr!==gr&&__privateMethod$5(this,_updateLayoutStyle,updateLayoutStyle_fn).call(this)}formatMenuItemText(hr,gr){return this.constructor.formatMenuItemText(hr,gr)}get anchor(){return this.getAttribute("anchor")}set anchor(hr){this.setAttribute("anchor",`${hr}`)}get anchorElement(){var hr;return this.anchor?(hr=getDocumentOrShadowRoot(this))==null?void 0:hr.querySelector(`#${this.anchor}`):null}get items(){return this.defaultSlot.assignedElements({flatten:!0}).filter(isMenuItem)}get radioGroupItems(){return this.items.filter(hr=>hr.role==="menuitemradio")}get checkedItems(){return this.items.filter(hr=>hr.checked)}get value(){var hr,gr;return(gr=(hr=this.checkedItems[0])==null?void 0:hr.value)!=null?gr:""}set value(hr){const gr=this.items.find(vr=>vr.value===hr);gr&&__privateMethod$5(this,_selectItem,selectItem_fn).call(this,gr)}focus(){if(__privateSet$5(this,_previouslyFocused,getActiveElement()),this.items.length){__privateMethod$5(this,_setTabItem,setTabItem_fn).call(this,this.items[0]),this.items[0].focus();return}const hr=this.querySelector('[autofocus], [tabindex]:not([tabindex="-1"]), [role="menu"]');hr?.focus()}handleSelect(hr){var gr;const vr=__privateMethod$5(this,_getItem,getItem_fn).call(this,hr);vr&&(__privateMethod$5(this,_selectItem,selectItem_fn).call(this,vr,vr.type==="checkbox"),__privateGet$6(this,_invokerElement)&&!this.hidden&&((gr=__privateGet$6(this,_previouslyFocused))==null||gr.focus(),this.hidden=!0))}get keysUsed(){return["Enter","Escape","Tab"," ","ArrowDown","ArrowUp","Home","End"]}handleMove(hr){var gr,vr;const{key:xr}=hr,Er=this.items,Cr=(vr=(gr=__privateMethod$5(this,_getItem,getItem_fn).call(this,hr))!=null?gr:__privateMethod$5(this,_getTabItem,getTabItem_fn).call(this))!=null?vr:Er[0],wr=Er.indexOf(Cr);let Rr=Math.max(0,wr);xr==="ArrowDown"?Rr++:xr==="ArrowUp"?Rr--:hr.key==="Home"?Rr=0:hr.key==="End"&&(Rr=Er.length-1),Rr<0&&(Rr=Er.length-1),Rr>Er.length-1&&(Rr=0),__privateMethod$5(this,_setTabItem,setTabItem_fn).call(this,Er[Rr]),Er[Rr].focus()}}_mediaController=new WeakMap;_previouslyFocused=new WeakMap;_invokerElement=new WeakMap;_previousItems=new WeakMap;_mutationObserver=new WeakMap;_isPopover=new WeakMap;_cssRule=new WeakMap;_handleSlotChange$1=new WeakSet;handleSlotChange_fn$1=function(mr){const hr=mr.target;for(const gr of hr.assignedNodes({flatten:!0}))gr.nodeType===3&&gr.textContent.trim()===""&&gr.remove();if(["header","title"].includes(hr.name)){const gr=this.shadowRoot.querySelector('slot[name="header"]');gr.hidden=hr.assignedNodes().length===0}hr.name||__privateGet$6(this,_handleMenuItems).call(this)};_handleMenuItems=new WeakMap;_updateLayoutStyle=new WeakSet;updateLayoutStyle_fn=function(){var mr;const hr=this.shadowRoot.querySelector("#layout-row"),gr=(mr=getComputedStyle(this).getPropertyValue("--media-menu-layout"))==null?void 0:mr.trim();hr.setAttribute("media",gr==="row"?"":"width:0")};_handleInvoke=new WeakSet;handleInvoke_fn=function(mr){__privateSet$5(this,_invokerElement,mr.relatedTarget),containsComposedNode(this,mr.relatedTarget)||(this.hidden=!this.hidden)};_handleOpen=new WeakSet;handleOpen_fn=function(){var mr;(mr=__privateGet$6(this,_invokerElement))==null||mr.setAttribute("aria-expanded","true"),this.addEventListener("transitionend",()=>this.focus(),{once:!0}),observeResize(getBoundsElement(this),__privateGet$6(this,_handleBoundsResize)),observeResize(this,__privateGet$6(this,_handleMenuResize))};_handleClosed=new WeakSet;handleClosed_fn=function(){var mr;(mr=__privateGet$6(this,_invokerElement))==null||mr.setAttribute("aria-expanded","false"),unobserveResize(getBoundsElement(this),__privateGet$6(this,_handleBoundsResize)),unobserveResize(this,__privateGet$6(this,_handleMenuResize))};_handleBoundsResize=new WeakMap;_handleMenuResize=new WeakMap;_positionMenu=new WeakSet;positionMenu_fn=function(mr){if(this.hasAttribute("mediacontroller")&&!this.anchor||this.hidden||!this.anchorElement)return;const{x:hr,y:gr}=computePosition({anchor:this.anchorElement,floating:this,placement:"top-start"});mr??(mr=this.offsetWidth);const xr=getBoundsElement(this).getBoundingClientRect(),Er=xr.width-hr-mr,Cr=xr.height-gr-this.offsetHeight,{style:wr}=__privateGet$6(this,_cssRule);wr.setProperty("position","absolute"),wr.setProperty("right",`${Math.max(0,Er)}px`),wr.setProperty("--_menu-bottom",`${Cr}px`);const Rr=getComputedStyle(this),Dr=wr.getPropertyValue("--_menu-bottom")===Rr.bottom?Cr:parseFloat(Rr.bottom),Br=xr.height-Dr-parseFloat(Rr.marginBottom);this.style.setProperty("--_menu-max-height",`${Br}px`)};_resizeMenu=new WeakSet;resizeMenu_fn=function(mr){const hr=this.querySelector('[role="menuitem"][aria-haspopup][aria-expanded="true"]'),gr=hr?.querySelector('[role="menu"]'),{style:vr}=__privateGet$6(this,_cssRule);if(mr||vr.setProperty("--media-menu-transition-in","none"),gr){const xr=gr.offsetHeight,Er=Math.max(gr.offsetWidth,hr.offsetWidth);this.style.setProperty("min-width",`${Er}px`),this.style.setProperty("min-height",`${xr}px`),__privateMethod$5(this,_positionMenu,positionMenu_fn).call(this,Er)}else this.style.removeProperty("min-width"),this.style.removeProperty("min-height"),__privateMethod$5(this,_positionMenu,positionMenu_fn).call(this);vr.removeProperty("--media-menu-transition-in")};_handleClick=new WeakSet;handleClick_fn=function(mr){var hr;if(mr.stopPropagation(),mr.composedPath().includes(__privateGet$6(this,_backButtonElement,backButtonElement_get))){(hr=__privateGet$6(this,_previouslyFocused))==null||hr.focus(),this.hidden=!0;return}const gr=__privateMethod$5(this,_getItem,getItem_fn).call(this,mr);!gr||gr.hasAttribute("disabled")||(__privateMethod$5(this,_setTabItem,setTabItem_fn).call(this,gr),this.handleSelect(mr))};_backButtonElement=new WeakSet;backButtonElement_get=function(){var mr;return(mr=this.shadowRoot.querySelector('slot[name="header"]').assignedElements({flatten:!0}))==null?void 0:mr.find(gr=>gr.matches('button[part~="back"]'))};_handleToggle=new WeakSet;handleToggle_fn=function(mr){if(mr.target===this)return;__privateMethod$5(this,_checkSubmenuHasExpanded,checkSubmenuHasExpanded_fn).call(this);const hr=Array.from(this.querySelectorAll('[role="menuitem"][aria-haspopup]'));for(const gr of hr)gr.invokeTargetElement!=mr.target&&mr.newState=="open"&&gr.getAttribute("aria-expanded")=="true"&&!gr.invokeTargetElement.hidden&&gr.invokeTargetElement.dispatchEvent(new InvokeEvent({relatedTarget:gr}));for(const gr of hr)gr.setAttribute("aria-expanded",`${!gr.submenuElement.hidden}`);__privateMethod$5(this,_resizeMenu,resizeMenu_fn).call(this,!0)};_checkSubmenuHasExpanded=new WeakSet;checkSubmenuHasExpanded_fn=function(){const hr=this.querySelector('[role="menuitem"] > [role="menu"]:not([hidden])');this.container.classList.toggle("has-expanded",!!hr)};_handleFocusOut=new WeakSet;handleFocusOut_fn=function(mr){var hr;containsComposedNode(this,mr.relatedTarget)||(__privateGet$6(this,_isPopover)&&((hr=__privateGet$6(this,_previouslyFocused))==null||hr.focus()),__privateGet$6(this,_invokerElement)&&__privateGet$6(this,_invokerElement)!==mr.relatedTarget&&!this.hidden&&(this.hidden=!0))};_handleKeyDown$1=new WeakSet;handleKeyDown_fn$1=function(mr){var hr,gr,vr,xr,Er;const{key:Cr,ctrlKey:wr,altKey:Rr,metaKey:kr}=mr;if(!(wr||Rr||kr)&&this.keysUsed.includes(Cr))if(mr.preventDefault(),mr.stopPropagation(),Cr==="Tab"){if(__privateGet$6(this,_isPopover)){this.hidden=!0;return}mr.shiftKey?(gr=(hr=this.previousElementSibling)==null?void 0:hr.focus)==null||gr.call(hr):(xr=(vr=this.nextElementSibling)==null?void 0:vr.focus)==null||xr.call(vr),this.blur()}else Cr==="Escape"?((Er=__privateGet$6(this,_previouslyFocused))==null||Er.focus(),__privateGet$6(this,_isPopover)&&(this.hidden=!0)):Cr==="Enter"||Cr===" "?this.handleSelect(mr):this.handleMove(mr)};_getItem=new WeakSet;getItem_fn=function(mr){return mr.composedPath().find(hr=>["menuitemradio","menuitemcheckbox"].includes(hr.role))};_getTabItem=new WeakSet;getTabItem_fn=function(){return this.items.find(mr=>mr.tabIndex===0)};_setTabItem=new WeakSet;setTabItem_fn=function(mr){for(const hr of this.items)hr.tabIndex=hr===mr?0:-1};_selectItem=new WeakSet;selectItem_fn=function(mr,hr){const gr=[...this.checkedItems];mr.type==="radio"&&this.radioGroupItems.forEach(vr=>vr.checked=!1),hr?mr.checked=!mr.checked:mr.checked=!0,this.checkedItems.some((vr,xr)=>vr!=gr[xr])&&this.dispatchEvent(new Event("change",{bubbles:!0,composed:!0}))};MediaChromeMenu.template=template$4;function isMenuItem(mr){return["menuitem","menuitemradio","menuitemcheckbox"].includes(mr?.role)}function getBoundsElement(mr){var hr;return(hr=mr.getAttribute("bounds")?closestComposedNode(mr,`#${mr.getAttribute("bounds")}`):getMediaController(mr)||mr.parentElement)!=null?hr:mr}GlobalThis.customElements.get("media-chrome-menu")||GlobalThis.customElements.define("media-chrome-menu",MediaChromeMenu);var __accessCheck$6=(mr,hr,gr)=>{if(!hr.has(mr))throw TypeError("Cannot "+gr)},__privateGet$5=(mr,hr,gr)=>(__accessCheck$6(mr,hr,"read from private field"),hr.get(mr)),__privateAdd$6=(mr,hr,gr)=>{if(hr.has(mr))throw TypeError("Cannot add the same private member more than once");hr instanceof WeakSet?hr.add(mr):hr.set(mr,gr)},__privateSet$4=(mr,hr,gr,vr)=>(__accessCheck$6(mr,hr,"write to private field"),hr.set(mr,gr),gr),__privateMethod$4=(mr,hr,gr)=>(__accessCheck$6(mr,hr,"access private method"),gr),_dirty,_ownerElement,_handleSlotChange,handleSlotChange_fn,_submenuConnected,submenuConnected_fn,_submenuDisconnected,submenuDisconnected_fn,_handleMenuItem,_handleKeyUp,handleKeyUp_fn,_handleKeyDown,handleKeyDown_fn,_reset,reset_fn;const template$3=Document$2.createElement("template");template$3.innerHTML=`
  <style>
    :host {
      transition: var(--media-menu-item-transition,
        background .15s linear,
        opacity .2s ease-in-out
      );
      outline: var(--media-menu-item-outline, 0);
      outline-offset: var(--media-menu-item-outline-offset, -1px);
      cursor: pointer;
      display: flex;
      align-items: center;
      align-self: stretch;
      justify-self: stretch;
      white-space: nowrap;
      white-space-collapse: collapse;
      text-wrap: nowrap;
      padding: .4em .8em .4em 1em;
    }

    :host(:focus-visible) {
      box-shadow: var(--media-menu-item-focus-shadow, inset 0 0 0 2px rgb(27 127 204 / .9));
      outline: var(--media-menu-item-hover-outline, 0);
      outline-offset: var(--media-menu-item-hover-outline-offset,  var(--media-menu-item-outline-offset, -1px));
    }

    :host(:hover) {
      cursor: pointer;
      background: var(--media-menu-item-hover-background, rgb(92 92 102 / .5));
      outline: var(--media-menu-item-hover-outline);
      outline-offset: var(--media-menu-item-hover-outline-offset,  var(--media-menu-item-outline-offset, -1px));
    }

    :host([aria-checked="true"]) {
      background: var(--media-menu-item-checked-background);
    }

    :host([hidden]) {
      display: none;
    }

    :host([disabled]) {
      pointer-events: none;
      color: rgba(255, 255, 255, .3);
    }

    slot:not([name]) {
      width: 100%;
    }

    slot:not([name="submenu"]) {
      display: inline-flex;
      align-items: center;
      transition: inherit;
      opacity: var(--media-menu-item-opacity, 1);
    }

    slot[name="description"] {
      justify-content: end;
    }

    slot[name="description"] > span {
      display: inline-block;
      margin-inline: 1em .2em;
      max-width: var(--media-menu-item-description-max-width, 100px);
      text-overflow: ellipsis;
      overflow: hidden;
      font-size: .8em;
      font-weight: 400;
      text-align: right;
      position: relative;
      top: .04em;
    }

    slot[name="checked-indicator"] {
      display: none;
    }

    :host(:is([role="menuitemradio"],[role="menuitemcheckbox"])) slot[name="checked-indicator"] {
      display: var(--media-menu-item-checked-indicator-display, inline-block);
    }

    
    svg, img, ::slotted(svg), ::slotted(img) {
      height: var(--media-menu-item-icon-height, var(--media-control-height, 24px));
      fill: var(--media-icon-color, var(--media-primary-color, rgb(238 238 238)));
      display: block;
    }

    
    [part~="indicator"],
    ::slotted([part~="indicator"]) {
      fill: var(--media-menu-item-indicator-fill,
        var(--media-icon-color, var(--media-primary-color, rgb(238 238 238))));
      height: var(--media-menu-item-indicator-height, 1.25em);
      margin-right: .5ch;
    }

    [part~="checked-indicator"] {
      visibility: hidden;
    }

    :host([aria-checked="true"]) [part~="checked-indicator"] {
      visibility: visible;
    }
  </style>
  <slot name="checked-indicator">
    <svg aria-hidden="true" viewBox="0 1 24 24" part="checked-indicator indicator">
      <path d="m10 15.17 9.193-9.191 1.414 1.414-10.606 10.606-6.364-6.364 1.414-1.414 4.95 4.95Z"/>
    </svg>
  </slot>
  <slot name="prefix"></slot>
  <slot></slot>
  <slot name="description"></slot>
  <slot name="suffix"></slot>
  <slot name="submenu"></slot>
`;const Attributes$2={TYPE:"type",VALUE:"value",CHECKED:"checked",DISABLED:"disabled"};class MediaChromeMenuItem extends GlobalThis.HTMLElement{constructor(){super(),__privateAdd$6(this,_handleSlotChange),__privateAdd$6(this,_submenuConnected),__privateAdd$6(this,_submenuDisconnected),__privateAdd$6(this,_handleKeyUp),__privateAdd$6(this,_handleKeyDown),__privateAdd$6(this,_reset),__privateAdd$6(this,_dirty,!1),__privateAdd$6(this,_ownerElement,void 0),__privateAdd$6(this,_handleMenuItem,()=>{var hr,gr;this.setAttribute("submenusize",`${this.submenuElement.items.length}`);const vr=this.shadowRoot.querySelector('slot[name="description"]'),xr=(hr=this.submenuElement.checkedItems)==null?void 0:hr[0],Er=(gr=xr?.dataset.description)!=null?gr:xr?.text,Cr=Document$2.createElement("span");Cr.textContent=Er??"",vr.replaceChildren(Cr)}),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.append(this.constructor.template.content.cloneNode(!0))),this.shadowRoot.addEventListener("slotchange",this)}static get observedAttributes(){return[Attributes$2.TYPE,Attributes$2.DISABLED,Attributes$2.CHECKED,Attributes$2.VALUE]}enable(){this.hasAttribute("tabindex")||this.setAttribute("tabindex","-1"),isCheckable(this)&&!this.hasAttribute("aria-checked")&&this.setAttribute("aria-checked","false"),this.addEventListener("click",this),this.addEventListener("keydown",this)}disable(){this.removeAttribute("tabindex"),this.removeEventListener("click",this),this.removeEventListener("keydown",this),this.removeEventListener("keyup",this)}handleEvent(hr){switch(hr.type){case"slotchange":__privateMethod$4(this,_handleSlotChange,handleSlotChange_fn).call(this,hr);break;case"click":this.handleClick(hr);break;case"keydown":__privateMethod$4(this,_handleKeyDown,handleKeyDown_fn).call(this,hr);break;case"keyup":__privateMethod$4(this,_handleKeyUp,handleKeyUp_fn).call(this,hr);break}}attributeChangedCallback(hr,gr,vr){hr===Attributes$2.CHECKED&&isCheckable(this)&&!__privateGet$5(this,_dirty)?this.setAttribute("aria-checked",vr!=null?"true":"false"):hr===Attributes$2.TYPE&&vr!==gr?this.role="menuitem"+vr:hr===Attributes$2.DISABLED&&vr!==gr&&(vr==null?this.enable():this.disable())}connectedCallback(){this.hasAttribute(Attributes$2.DISABLED)||this.enable(),this.role="menuitem"+this.type,__privateSet$4(this,_ownerElement,closestMenuItemsContainer(this,this.parentNode)),__privateMethod$4(this,_reset,reset_fn).call(this)}disconnectedCallback(){this.disable(),__privateMethod$4(this,_reset,reset_fn).call(this),__privateSet$4(this,_ownerElement,null)}get invokeTarget(){return this.getAttribute("invoketarget")}set invokeTarget(hr){this.setAttribute("invoketarget",`${hr}`)}get invokeTargetElement(){var hr;return this.invokeTarget?(hr=getDocumentOrShadowRoot(this))==null?void 0:hr.querySelector(`#${this.invokeTarget}`):this.submenuElement}get submenuElement(){return this.shadowRoot.querySelector('slot[name="submenu"]').assignedElements({flatten:!0})[0]}get type(){var hr;return(hr=this.getAttribute(Attributes$2.TYPE))!=null?hr:""}set type(hr){this.setAttribute(Attributes$2.TYPE,`${hr}`)}get value(){var hr;return(hr=this.getAttribute(Attributes$2.VALUE))!=null?hr:this.text}set value(hr){this.setAttribute(Attributes$2.VALUE,hr)}get text(){var hr;return((hr=this.textContent)!=null?hr:"").trim()}get checked(){if(isCheckable(this))return this.getAttribute("aria-checked")==="true"}set checked(hr){isCheckable(this)&&(__privateSet$4(this,_dirty,!0),this.setAttribute("aria-checked",hr?"true":"false"),hr?this.part.add("checked"):this.part.remove("checked"))}handleClick(hr){isCheckable(this)||this.invokeTargetElement&&containsComposedNode(this,hr.target)&&this.invokeTargetElement.dispatchEvent(new InvokeEvent({relatedTarget:this}))}get keysUsed(){return["Enter"," "]}}_dirty=new WeakMap;_ownerElement=new WeakMap;_handleSlotChange=new WeakSet;handleSlotChange_fn=function(mr){const hr=mr.target;if(!hr?.name)for(const vr of hr.assignedNodes({flatten:!0}))vr instanceof Text&&vr.textContent.trim()===""&&vr.remove();hr.name==="submenu"&&(this.submenuElement?__privateMethod$4(this,_submenuConnected,submenuConnected_fn).call(this):__privateMethod$4(this,_submenuDisconnected,submenuDisconnected_fn).call(this))};_submenuConnected=new WeakSet;submenuConnected_fn=async function(){this.setAttribute("aria-haspopup","menu"),this.setAttribute("aria-expanded",`${!this.submenuElement.hidden}`),this.submenuElement.addEventListener("change",__privateGet$5(this,_handleMenuItem)),this.submenuElement.addEventListener("addmenuitem",__privateGet$5(this,_handleMenuItem)),this.submenuElement.addEventListener("removemenuitem",__privateGet$5(this,_handleMenuItem)),__privateGet$5(this,_handleMenuItem).call(this)};_submenuDisconnected=new WeakSet;submenuDisconnected_fn=function(){this.removeAttribute("aria-haspopup"),this.removeAttribute("aria-expanded"),this.submenuElement.removeEventListener("change",__privateGet$5(this,_handleMenuItem)),this.submenuElement.removeEventListener("addmenuitem",__privateGet$5(this,_handleMenuItem)),this.submenuElement.removeEventListener("removemenuitem",__privateGet$5(this,_handleMenuItem)),__privateGet$5(this,_handleMenuItem).call(this)};_handleMenuItem=new WeakMap;_handleKeyUp=new WeakSet;handleKeyUp_fn=function(mr){const{key:hr}=mr;if(!this.keysUsed.includes(hr)){this.removeEventListener("keyup",__privateMethod$4(this,_handleKeyUp,handleKeyUp_fn));return}this.handleClick(mr)};_handleKeyDown=new WeakSet;handleKeyDown_fn=function(mr){const{metaKey:hr,altKey:gr,key:vr}=mr;if(hr||gr||!this.keysUsed.includes(vr)){this.removeEventListener("keyup",__privateMethod$4(this,_handleKeyUp,handleKeyUp_fn));return}this.addEventListener("keyup",__privateMethod$4(this,_handleKeyUp,handleKeyUp_fn),{once:!0})};_reset=new WeakSet;reset_fn=function(){var mr;const hr=(mr=__privateGet$5(this,_ownerElement))==null?void 0:mr.radioGroupItems;if(!hr)return;let gr=hr.filter(vr=>vr.getAttribute("aria-checked")==="true").pop();gr||(gr=hr[0]);for(const vr of hr)vr.setAttribute("aria-checked","false");gr?.setAttribute("aria-checked","true")};MediaChromeMenuItem.template=template$3;function isCheckable(mr){return mr.type==="radio"||mr.type==="checkbox"}function closestMenuItemsContainer(mr,hr){if(!mr)return null;const{host:gr}=mr.getRootNode();return!hr&&gr?closestMenuItemsContainer(mr,gr):hr?.items?hr:closestMenuItemsContainer(hr,hr?.parentNode)}GlobalThis.customElements.get("media-chrome-menu-item")||GlobalThis.customElements.define("media-chrome-menu-item",MediaChromeMenuItem);const template$2=Document$2.createElement("template");template$2.innerHTML=MediaChromeMenu.template.innerHTML+`
  <style>
    :host {
      background: var(--media-settings-menu-background,
        var(--media-menu-background,
        var(--media-control-background,
        var(--media-secondary-color, rgb(20 20 30 / .8)))));
      min-width: var(--media-settings-menu-min-width, 170px);
      border-radius: 2px 2px 0 0;
      overflow: hidden;
    }

    :host([role="menu"]) {
      
      justify-content: end;
    }

    slot:not([name]) {
      justify-content: var(--media-settings-menu-justify-content);
      flex-direction: var(--media-settings-menu-flex-direction, column);
      overflow: visible;
    }

    #container.has-expanded {
      --media-settings-menu-item-opacity: 0;
    }
  </style>
`;class MediaSettingsMenu extends MediaChromeMenu{get anchorElement(){return this.anchor!=="auto"?super.anchorElement:getMediaController(this).querySelector("media-settings-menu-button")}}MediaSettingsMenu.template=template$2;GlobalThis.customElements.get("media-settings-menu")||GlobalThis.customElements.define("media-settings-menu",MediaSettingsMenu);var _a;const template$1=Document$2.createElement("template");template$1.innerHTML=MediaChromeMenuItem.template.innerHTML+`
  <style>
    slot:not([name="submenu"]) {
      opacity: var(--media-settings-menu-item-opacity, var(--media-menu-item-opacity));
    }

    :host([aria-expanded="true"]:hover) {
      background: transparent;
    }
  </style>
`;(_a=template$1.content)!=null&&_a.querySelector&&(template$1.content.querySelector('slot[name="suffix"]').innerHTML=`
    <svg aria-hidden="true" viewBox="0 0 20 24">
      <path d="m8.12 17.585-.742-.669 4.2-4.665-4.2-4.666.743-.669 4.803 5.335-4.803 5.334Z"/>
    </svg>
  `);class MediaSettingsMenuItem extends MediaChromeMenuItem{}MediaSettingsMenuItem.template=template$1;GlobalThis.customElements.get("media-settings-menu-item")||GlobalThis.customElements.define("media-settings-menu-item",MediaSettingsMenuItem);class MediaChromeMenuButton extends MediaChromeButton{connectedCallback(){super.connectedCallback(),this.invokeTargetElement&&this.setAttribute("aria-haspopup","menu")}get invokeTarget(){return this.getAttribute("invoketarget")}set invokeTarget(hr){this.setAttribute("invoketarget",`${hr}`)}get invokeTargetElement(){var hr;return this.invokeTarget?(hr=getDocumentOrShadowRoot(this))==null?void 0:hr.querySelector(`#${this.invokeTarget}`):null}handleClick(){var hr;(hr=this.invokeTargetElement)==null||hr.dispatchEvent(new InvokeEvent({relatedTarget:this}))}}GlobalThis.customElements.get("media-chrome-menu-button")||GlobalThis.customElements.define("media-chrome-menu-button",MediaChromeMenuButton);const slotTemplate$4=Document$2.createElement("template");slotTemplate$4.innerHTML=`
  <style>
    :host([aria-expanded="true"]) slot[name=tooltip] {
      display: none;
    }
  </style>
  <slot name="icon">
    <svg aria-hidden="true" viewBox="0 0 24 24">
      <path d="M4.5 14.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Zm7.5 0a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Zm7.5 0a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z"/>
    </svg>
  </slot>
`;class MediaSettingsMenuButton extends MediaChromeMenuButton{static get observedAttributes(){return[...super.observedAttributes,"target"]}constructor(){super({slotTemplate:slotTemplate$4,tooltipContent:tooltipLabels.SETTINGS})}connectedCallback(){super.connectedCallback(),this.setAttribute("aria-label",nouns.SETTINGS())}get invokeTargetElement(){return this.invokeTarget!=null?super.invokeTargetElement:getMediaController(this).querySelector("media-settings-menu")}}GlobalThis.customElements.get("media-settings-menu-button")||GlobalThis.customElements.define("media-settings-menu-button",MediaSettingsMenuButton);var __accessCheck$5=(mr,hr,gr)=>{if(!hr.has(mr))throw TypeError("Cannot "+gr)},__privateGet$4=(mr,hr,gr)=>(__accessCheck$5(mr,hr,"read from private field"),gr?gr.call(mr):hr.get(mr)),__privateAdd$5=(mr,hr,gr)=>{if(hr.has(mr))throw TypeError("Cannot add the same private member more than once");hr instanceof WeakSet?hr.add(mr):hr.set(mr,gr)},__privateSet$3=(mr,hr,gr,vr)=>(__accessCheck$5(mr,hr,"write to private field"),hr.set(mr,gr),gr),__privateMethod$3=(mr,hr,gr)=>(__accessCheck$5(mr,hr,"access private method"),gr),_audioTrackList,_prevState$2,_render$3,render_fn$3,_onChange$3,onChange_fn$3;class MediaAudioTrackMenu extends MediaChromeMenu{constructor(){super(...arguments),__privateAdd$5(this,_render$3),__privateAdd$5(this,_onChange$3),__privateAdd$5(this,_audioTrackList,[]),__privateAdd$5(this,_prevState$2,void 0)}static get observedAttributes(){return[...super.observedAttributes,MediaUIAttributes.MEDIA_AUDIO_TRACK_LIST,MediaUIAttributes.MEDIA_AUDIO_TRACK_ENABLED,MediaUIAttributes.MEDIA_AUDIO_TRACK_UNAVAILABLE]}attributeChangedCallback(hr,gr,vr){super.attributeChangedCallback(hr,gr,vr),hr===MediaUIAttributes.MEDIA_AUDIO_TRACK_ENABLED&&gr!==vr?this.value=vr:hr===MediaUIAttributes.MEDIA_AUDIO_TRACK_LIST&&gr!==vr&&(__privateSet$3(this,_audioTrackList,parseAudioTrackList(vr??"")),__privateMethod$3(this,_render$3,render_fn$3).call(this))}connectedCallback(){super.connectedCallback(),this.addEventListener("change",__privateMethod$3(this,_onChange$3,onChange_fn$3))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("change",__privateMethod$3(this,_onChange$3,onChange_fn$3))}get anchorElement(){var hr;return this.anchor!=="auto"?super.anchorElement:(hr=getMediaController(this))==null?void 0:hr.querySelector("media-audio-track-menu-button")}get mediaAudioTrackList(){return __privateGet$4(this,_audioTrackList)}set mediaAudioTrackList(hr){__privateSet$3(this,_audioTrackList,hr),__privateMethod$3(this,_render$3,render_fn$3).call(this)}get mediaAudioTrackEnabled(){var hr;return(hr=getStringAttr(this,MediaUIAttributes.MEDIA_AUDIO_TRACK_ENABLED))!=null?hr:""}set mediaAudioTrackEnabled(hr){setStringAttr(this,MediaUIAttributes.MEDIA_AUDIO_TRACK_ENABLED,hr)}}_audioTrackList=new WeakMap;_prevState$2=new WeakMap;_render$3=new WeakSet;render_fn$3=function(){if(__privateGet$4(this,_prevState$2)===JSON.stringify(this.mediaAudioTrackList))return;__privateSet$3(this,_prevState$2,JSON.stringify(this.mediaAudioTrackList));const mr=this.mediaAudioTrackList;this.defaultSlot.textContent="";for(const hr of mr){const gr=this.formatMenuItemText(hr.label,hr),vr=createMenuItem({type:"radio",text:gr,value:`${hr.id}`,checked:hr.enabled});vr.prepend(createIndicator(this,"checked-indicator")),this.defaultSlot.append(vr)}};_onChange$3=new WeakSet;onChange_fn$3=function(){if(this.value==null)return;const mr=new GlobalThis.CustomEvent(MediaUIEvents.MEDIA_AUDIO_TRACK_REQUEST,{composed:!0,bubbles:!0,detail:this.value});this.dispatchEvent(mr)};GlobalThis.customElements.get("media-audio-track-menu")||GlobalThis.customElements.define("media-audio-track-menu",MediaAudioTrackMenu);const audioTrackIcon=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="M11 17H9.5V7H11v10Zm-3-3H6.5v-4H8v4Zm6-5h-1.5v6H14V9Zm3 7h-1.5V8H17v8Z"/>
  <path d="M22 12c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10Zm-2 0a8 8 0 1 0-16 0 8 8 0 0 0 16 0Z"/>
</svg>`,slotTemplate$3=Document$2.createElement("template");slotTemplate$3.innerHTML=`
  <style>
    :host([aria-expanded="true"]) slot[name=tooltip] {
      display: none;
    }
  </style>
  <slot name="icon">${audioTrackIcon}</slot>
`;class MediaAudioTrackMenuButton extends MediaChromeMenuButton{static get observedAttributes(){return[...super.observedAttributes,MediaUIAttributes.MEDIA_AUDIO_TRACK_ENABLED,MediaUIAttributes.MEDIA_AUDIO_TRACK_UNAVAILABLE]}constructor(){super({slotTemplate:slotTemplate$3,tooltipContent:tooltipLabels.AUDIO_TRACK_MENU})}connectedCallback(){super.connectedCallback(),this.setAttribute("aria-label",nouns.AUDIO_TRACKS())}attributeChangedCallback(hr,gr,vr){super.attributeChangedCallback(hr,gr,vr)}get invokeTargetElement(){var hr;return this.invokeTarget!=null?super.invokeTargetElement:(hr=getMediaController(this))==null?void 0:hr.querySelector("media-audio-track-menu")}get mediaAudioTrackEnabled(){var hr;return(hr=getStringAttr(this,MediaUIAttributes.MEDIA_AUDIO_TRACK_ENABLED))!=null?hr:""}set mediaAudioTrackEnabled(hr){setStringAttr(this,MediaUIAttributes.MEDIA_AUDIO_TRACK_ENABLED,hr)}}GlobalThis.customElements.get("media-audio-track-menu-button")||GlobalThis.customElements.define("media-audio-track-menu-button",MediaAudioTrackMenuButton);var __accessCheck$4=(mr,hr,gr)=>{if(!hr.has(mr))throw TypeError("Cannot "+gr)},__privateGet$3=(mr,hr,gr)=>(__accessCheck$4(mr,hr,"read from private field"),gr?gr.call(mr):hr.get(mr)),__privateAdd$4=(mr,hr,gr)=>{if(hr.has(mr))throw TypeError("Cannot add the same private member more than once");hr instanceof WeakSet?hr.add(mr):hr.set(mr,gr)},__privateSet$2=(mr,hr,gr,vr)=>(__accessCheck$4(mr,hr,"write to private field"),hr.set(mr,gr),gr),__privateMethod$2=(mr,hr,gr)=>(__accessCheck$4(mr,hr,"access private method"),gr),_prevState$1,_render$2,render_fn$2,_onChange$2,onChange_fn$2;const ccIcon=`
  <svg aria-hidden="true" viewBox="0 0 26 24" part="captions-indicator indicator">
    <path d="M22.83 5.68a2.58 2.58 0 0 0-2.3-2.5c-3.62-.24-11.44-.24-15.06 0a2.58 2.58 0 0 0-2.3 2.5c-.23 4.21-.23 8.43 0 12.64a2.58 2.58 0 0 0 2.3 2.5c3.62.24 11.44.24 15.06 0a2.58 2.58 0 0 0 2.3-2.5c.23-4.21.23-8.43 0-12.64Zm-11.39 9.45a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.92 3.92 0 0 1 .92-2.77 3.18 3.18 0 0 1 2.43-1 2.94 2.94 0 0 1 2.13.78c.364.359.62.813.74 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.17 1.61 1.61 0 0 0-1.29.58 2.79 2.79 0 0 0-.5 1.89 3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.48 1.48 0 0 0 1-.37 2.1 2.1 0 0 0 .59-1.14l1.4.44a3.23 3.23 0 0 1-1.07 1.69Zm7.22 0a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.88 3.88 0 0 1 .93-2.77 3.14 3.14 0 0 1 2.42-1 3 3 0 0 1 2.16.82 2.8 2.8 0 0 1 .73 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.21 1.61 1.61 0 0 0-1.29.58A2.79 2.79 0 0 0 15 12a3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.44 1.44 0 0 0 1-.37 2.1 2.1 0 0 0 .6-1.15l1.4.44a3.17 3.17 0 0 1-1.1 1.7Z"/>
  </svg>`,template=Document$2.createElement("template");template.innerHTML=MediaChromeMenu.template.innerHTML+`
  <slot name="captions-indicator" hidden>${ccIcon}</slot>`;class MediaCaptionsMenu extends MediaChromeMenu{constructor(){super(...arguments),__privateAdd$4(this,_render$2),__privateAdd$4(this,_onChange$2),__privateAdd$4(this,_prevState$1,void 0)}static get observedAttributes(){return[...super.observedAttributes,MediaUIAttributes.MEDIA_SUBTITLES_LIST,MediaUIAttributes.MEDIA_SUBTITLES_SHOWING]}attributeChangedCallback(hr,gr,vr){super.attributeChangedCallback(hr,gr,vr),hr===MediaUIAttributes.MEDIA_SUBTITLES_LIST&&gr!==vr?__privateMethod$2(this,_render$2,render_fn$2).call(this):hr===MediaUIAttributes.MEDIA_SUBTITLES_SHOWING&&gr!==vr&&(this.value=vr)}connectedCallback(){super.connectedCallback(),this.addEventListener("change",__privateMethod$2(this,_onChange$2,onChange_fn$2))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("change",__privateMethod$2(this,_onChange$2,onChange_fn$2))}get anchorElement(){return this.anchor!=="auto"?super.anchorElement:getMediaController(this).querySelector("media-captions-menu-button")}get mediaSubtitlesList(){return getSubtitlesListAttr$1(this,MediaUIAttributes.MEDIA_SUBTITLES_LIST)}set mediaSubtitlesList(hr){setSubtitlesListAttr$1(this,MediaUIAttributes.MEDIA_SUBTITLES_LIST,hr)}get mediaSubtitlesShowing(){return getSubtitlesListAttr$1(this,MediaUIAttributes.MEDIA_SUBTITLES_SHOWING)}set mediaSubtitlesShowing(hr){setSubtitlesListAttr$1(this,MediaUIAttributes.MEDIA_SUBTITLES_SHOWING,hr)}}_prevState$1=new WeakMap;_render$2=new WeakSet;render_fn$2=function(){var mr;if(__privateGet$3(this,_prevState$1)===JSON.stringify(this.mediaSubtitlesList))return;__privateSet$2(this,_prevState$1,JSON.stringify(this.mediaSubtitlesList)),this.defaultSlot.textContent="";const hr=!this.value,gr=createMenuItem({type:"radio",text:this.formatMenuItemText("Off"),value:"off",checked:hr});gr.prepend(createIndicator(this,"checked-indicator")),this.defaultSlot.append(gr);const vr=this.mediaSubtitlesList;for(const xr of vr){const Er=createMenuItem({type:"radio",text:this.formatMenuItemText(xr.label,xr),value:formatTextTrackObj(xr),checked:this.value==formatTextTrackObj(xr)});Er.prepend(createIndicator(this,"checked-indicator")),((mr=xr.kind)!=null?mr:"subs")==="captions"&&Er.append(createIndicator(this,"captions-indicator")),this.defaultSlot.append(Er)}};_onChange$2=new WeakSet;onChange_fn$2=function(){const mr=this.mediaSubtitlesShowing,hr=this.getAttribute(MediaUIAttributes.MEDIA_SUBTITLES_SHOWING),gr=this.value!==hr;if(mr?.length&&gr&&this.dispatchEvent(new GlobalThis.CustomEvent(MediaUIEvents.MEDIA_DISABLE_SUBTITLES_REQUEST,{composed:!0,bubbles:!0,detail:mr})),!this.value||!gr)return;const vr=new GlobalThis.CustomEvent(MediaUIEvents.MEDIA_SHOW_SUBTITLES_REQUEST,{composed:!0,bubbles:!0,detail:this.value});this.dispatchEvent(vr)};MediaCaptionsMenu.template=template;const getSubtitlesListAttr$1=(mr,hr)=>{const gr=mr.getAttribute(hr);return gr?parseTextTracksStr(gr):[]},setSubtitlesListAttr$1=(mr,hr,gr)=>{if(!gr?.length){mr.removeAttribute(hr);return}const vr=stringifyTextTrackList(gr);mr.getAttribute(hr)!==vr&&mr.setAttribute(hr,vr)};GlobalThis.customElements.get("media-captions-menu")||GlobalThis.customElements.define("media-captions-menu",MediaCaptionsMenu);var __accessCheck$3=(mr,hr,gr)=>{if(!hr.has(mr))throw TypeError("Cannot "+gr)},__privateAdd$3=(mr,hr,gr)=>{if(hr.has(mr))throw TypeError("Cannot add the same private member more than once");hr instanceof WeakSet?hr.add(mr):hr.set(mr,gr)},__privateSet$1=(mr,hr,gr,vr)=>(__accessCheck$3(mr,hr,"write to private field"),hr.set(mr,gr),gr),_captionsReady;const ccIconOn=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M22.83 5.68a2.58 2.58 0 0 0-2.3-2.5c-3.62-.24-11.44-.24-15.06 0a2.58 2.58 0 0 0-2.3 2.5c-.23 4.21-.23 8.43 0 12.64a2.58 2.58 0 0 0 2.3 2.5c3.62.24 11.44.24 15.06 0a2.58 2.58 0 0 0 2.3-2.5c.23-4.21.23-8.43 0-12.64Zm-11.39 9.45a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.92 3.92 0 0 1 .92-2.77 3.18 3.18 0 0 1 2.43-1 2.94 2.94 0 0 1 2.13.78c.364.359.62.813.74 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.17 1.61 1.61 0 0 0-1.29.58 2.79 2.79 0 0 0-.5 1.89 3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.48 1.48 0 0 0 1-.37 2.1 2.1 0 0 0 .59-1.14l1.4.44a3.23 3.23 0 0 1-1.07 1.69Zm7.22 0a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.88 3.88 0 0 1 .93-2.77 3.14 3.14 0 0 1 2.42-1 3 3 0 0 1 2.16.82 2.8 2.8 0 0 1 .73 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.21 1.61 1.61 0 0 0-1.29.58A2.79 2.79 0 0 0 15 12a3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.44 1.44 0 0 0 1-.37 2.1 2.1 0 0 0 .6-1.15l1.4.44a3.17 3.17 0 0 1-1.1 1.7Z"/>
</svg>`,ccIconOff=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M17.73 14.09a1.4 1.4 0 0 1-1 .37 1.579 1.579 0 0 1-1.27-.58A3 3 0 0 1 15 12a2.8 2.8 0 0 1 .5-1.85 1.63 1.63 0 0 1 1.29-.57 1.47 1.47 0 0 1 1.51 1.2l1.43-.34A2.89 2.89 0 0 0 19 9.07a3 3 0 0 0-2.14-.78 3.14 3.14 0 0 0-2.42 1 3.91 3.91 0 0 0-.93 2.78 3.74 3.74 0 0 0 .92 2.66 3.07 3.07 0 0 0 2.34 1 3.07 3.07 0 0 0 1.91-.57 3.17 3.17 0 0 0 1.07-1.74l-1.4-.45c-.083.43-.3.822-.62 1.12Zm-7.22 0a1.43 1.43 0 0 1-1 .37 1.58 1.58 0 0 1-1.27-.58A3 3 0 0 1 7.76 12a2.8 2.8 0 0 1 .5-1.85 1.63 1.63 0 0 1 1.29-.57 1.47 1.47 0 0 1 1.51 1.2l1.43-.34a2.81 2.81 0 0 0-.74-1.32 2.94 2.94 0 0 0-2.13-.78 3.18 3.18 0 0 0-2.43 1 4 4 0 0 0-.92 2.78 3.74 3.74 0 0 0 .92 2.66 3.07 3.07 0 0 0 2.34 1 3.07 3.07 0 0 0 1.91-.57 3.23 3.23 0 0 0 1.07-1.74l-1.4-.45a2.06 2.06 0 0 1-.6 1.07Zm12.32-8.41a2.59 2.59 0 0 0-2.3-2.51C18.72 3.05 15.86 3 13 3c-2.86 0-5.72.05-7.53.17a2.59 2.59 0 0 0-2.3 2.51c-.23 4.207-.23 8.423 0 12.63a2.57 2.57 0 0 0 2.3 2.5c1.81.13 4.67.19 7.53.19 2.86 0 5.72-.06 7.53-.19a2.57 2.57 0 0 0 2.3-2.5c.23-4.207.23-8.423 0-12.63Zm-1.49 12.53a1.11 1.11 0 0 1-.91 1.11c-1.67.11-4.45.18-7.43.18-2.98 0-5.76-.07-7.43-.18a1.11 1.11 0 0 1-.91-1.11c-.21-4.14-.21-8.29 0-12.43a1.11 1.11 0 0 1 .91-1.11C7.24 4.56 10 4.49 13 4.49s5.76.07 7.43.18a1.11 1.11 0 0 1 .91 1.11c.21 4.14.21 8.29 0 12.43Z"/>
</svg>`,slotTemplate$2=Document$2.createElement("template");slotTemplate$2.innerHTML=`
  <style>
    :host([aria-checked="true"]) slot[name=off] {
      display: none !important;
    }

    
    :host(:not([aria-checked="true"])) slot[name=on] {
      display: none !important;
    }

    :host([aria-expanded="true"]) slot[name=tooltip] {
      display: none;
    }
  </style>

  <slot name="icon">
    <slot name="on">${ccIconOn}</slot>
    <slot name="off">${ccIconOff}</slot>
  </slot>
`;const updateAriaChecked=mr=>{mr.setAttribute("aria-checked",areSubsOn(mr).toString())};class MediaCaptionsMenuButton extends MediaChromeMenuButton{constructor(hr={}){super({slotTemplate:slotTemplate$2,tooltipContent:tooltipLabels.CAPTIONS,...hr}),__privateAdd$3(this,_captionsReady,void 0),__privateSet$1(this,_captionsReady,!1)}static get observedAttributes(){return[...super.observedAttributes,MediaUIAttributes.MEDIA_SUBTITLES_LIST,MediaUIAttributes.MEDIA_SUBTITLES_SHOWING]}connectedCallback(){super.connectedCallback(),this.setAttribute("aria-label",nouns.CLOSED_CAPTIONS()),updateAriaChecked(this)}attributeChangedCallback(hr,gr,vr){super.attributeChangedCallback(hr,gr,vr),hr===MediaUIAttributes.MEDIA_SUBTITLES_SHOWING&&updateAriaChecked(this)}get invokeTargetElement(){var hr;return this.invokeTarget!=null?super.invokeTargetElement:(hr=getMediaController(this))==null?void 0:hr.querySelector("media-captions-menu")}get mediaSubtitlesList(){return getSubtitlesListAttr(this,MediaUIAttributes.MEDIA_SUBTITLES_LIST)}set mediaSubtitlesList(hr){setSubtitlesListAttr(this,MediaUIAttributes.MEDIA_SUBTITLES_LIST,hr)}get mediaSubtitlesShowing(){return getSubtitlesListAttr(this,MediaUIAttributes.MEDIA_SUBTITLES_SHOWING)}set mediaSubtitlesShowing(hr){setSubtitlesListAttr(this,MediaUIAttributes.MEDIA_SUBTITLES_SHOWING,hr)}}_captionsReady=new WeakMap;const getSubtitlesListAttr=(mr,hr)=>{const gr=mr.getAttribute(hr);return gr?parseTextTracksStr(gr):[]},setSubtitlesListAttr=(mr,hr,gr)=>{if(!gr?.length){mr.removeAttribute(hr);return}const vr=stringifyTextTrackList(gr);mr.getAttribute(hr)!==vr&&mr.setAttribute(hr,vr)};GlobalThis.customElements.get("media-captions-menu-button")||GlobalThis.customElements.define("media-captions-menu-button",MediaCaptionsMenuButton);var __accessCheck$2=(mr,hr,gr)=>{if(!hr.has(mr))throw TypeError("Cannot "+gr)},__privateGet$2=(mr,hr,gr)=>(__accessCheck$2(mr,hr,"read from private field"),gr?gr.call(mr):hr.get(mr)),__privateAdd$2=(mr,hr,gr)=>{if(hr.has(mr))throw TypeError("Cannot add the same private member more than once");hr instanceof WeakSet?hr.add(mr):hr.set(mr,gr)},__privateMethod$1=(mr,hr,gr)=>(__accessCheck$2(mr,hr,"access private method"),gr),_rates$1,_render$1,render_fn$1,_onChange$1,onChange_fn$1;const Attributes$1={RATES:"rates"};class MediaPlaybackRateMenu extends MediaChromeMenu{constructor(){super(),__privateAdd$2(this,_render$1),__privateAdd$2(this,_onChange$1),__privateAdd$2(this,_rates$1,new AttributeTokenList(this,Attributes$1.RATES,{defaultValue:DEFAULT_RATES$1})),__privateMethod$1(this,_render$1,render_fn$1).call(this)}static get observedAttributes(){return[...super.observedAttributes,MediaUIAttributes.MEDIA_PLAYBACK_RATE,Attributes$1.RATES]}attributeChangedCallback(hr,gr,vr){super.attributeChangedCallback(hr,gr,vr),hr===MediaUIAttributes.MEDIA_PLAYBACK_RATE&&gr!=vr?this.value=vr:hr===Attributes$1.RATES&&gr!=vr&&(__privateGet$2(this,_rates$1).value=vr,__privateMethod$1(this,_render$1,render_fn$1).call(this))}connectedCallback(){super.connectedCallback(),this.addEventListener("change",__privateMethod$1(this,_onChange$1,onChange_fn$1))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("change",__privateMethod$1(this,_onChange$1,onChange_fn$1))}get anchorElement(){return this.anchor!=="auto"?super.anchorElement:getMediaController(this).querySelector("media-playback-rate-menu-button")}get rates(){return __privateGet$2(this,_rates$1)}set rates(hr){hr?Array.isArray(hr)&&(__privateGet$2(this,_rates$1).value=hr.join(" ")):__privateGet$2(this,_rates$1).value="",__privateMethod$1(this,_render$1,render_fn$1).call(this)}get mediaPlaybackRate(){return getNumericAttr(this,MediaUIAttributes.MEDIA_PLAYBACK_RATE,DEFAULT_RATE$1)}set mediaPlaybackRate(hr){setNumericAttr(this,MediaUIAttributes.MEDIA_PLAYBACK_RATE,hr)}}_rates$1=new WeakMap;_render$1=new WeakSet;render_fn$1=function(){this.defaultSlot.textContent="";for(const mr of this.rates){const hr=createMenuItem({type:"radio",text:this.formatMenuItemText(`${mr}x`,mr),value:mr,checked:this.mediaPlaybackRate==mr});hr.prepend(createIndicator(this,"checked-indicator")),this.defaultSlot.append(hr)}};_onChange$1=new WeakSet;onChange_fn$1=function(){if(!this.value)return;const mr=new GlobalThis.CustomEvent(MediaUIEvents.MEDIA_PLAYBACK_RATE_REQUEST,{composed:!0,bubbles:!0,detail:this.value});this.dispatchEvent(mr)};GlobalThis.customElements.get("media-playback-rate-menu")||GlobalThis.customElements.define("media-playback-rate-menu",MediaPlaybackRateMenu);var __accessCheck$1=(mr,hr,gr)=>{if(!hr.has(mr))throw TypeError("Cannot "+gr)},__privateGet$1=(mr,hr,gr)=>(__accessCheck$1(mr,hr,"read from private field"),gr?gr.call(mr):hr.get(mr)),__privateAdd$1=(mr,hr,gr)=>{if(hr.has(mr))throw TypeError("Cannot add the same private member more than once");hr instanceof WeakSet?hr.add(mr):hr.set(mr,gr)},_rates;const Attributes={RATES:"rates"},DEFAULT_RATES=[1,1.2,1.5,1.7,2],DEFAULT_RATE=1,slotTemplate$1=Document$2.createElement("template");slotTemplate$1.innerHTML=`
  <style>
    :host {
      min-width: 5ch;
      padding: var(--media-button-padding, var(--media-control-padding, 10px 5px));
    }
    
    :host([aria-expanded="true"]) slot[name=tooltip] {
      display: none;
    }
  </style>
  <slot name="icon"></slot>
`;class MediaPlaybackRateMenuButton extends MediaChromeMenuButton{constructor(hr={}){super({slotTemplate:slotTemplate$1,tooltipContent:tooltipLabels.PLAYBACK_RATE,...hr}),__privateAdd$1(this,_rates,new AttributeTokenList(this,Attributes.RATES,{defaultValue:DEFAULT_RATES})),this.container=this.shadowRoot.querySelector('slot[name="icon"]'),this.container.innerHTML=`${DEFAULT_RATE}x`}static get observedAttributes(){return[...super.observedAttributes,MediaUIAttributes.MEDIA_PLAYBACK_RATE,Attributes.RATES]}attributeChangedCallback(hr,gr,vr){if(super.attributeChangedCallback(hr,gr,vr),hr===Attributes.RATES&&(__privateGet$1(this,_rates).value=vr),hr===MediaUIAttributes.MEDIA_PLAYBACK_RATE){const xr=vr?+vr:Number.NaN,Er=Number.isNaN(xr)?DEFAULT_RATE:xr;this.container.innerHTML=`${Er}x`,this.setAttribute("aria-label",nouns.PLAYBACK_RATE({playbackRate:Er}))}}get invokeTargetElement(){return this.invokeTarget!=null?super.invokeTargetElement:getMediaController(this).querySelector("media-playback-rate-menu")}get rates(){return __privateGet$1(this,_rates)}set rates(hr){hr?Array.isArray(hr)&&(__privateGet$1(this,_rates).value=hr.join(" ")):__privateGet$1(this,_rates).value=""}get mediaPlaybackRate(){return getNumericAttr(this,MediaUIAttributes.MEDIA_PLAYBACK_RATE,DEFAULT_RATE)}set mediaPlaybackRate(hr){setNumericAttr(this,MediaUIAttributes.MEDIA_PLAYBACK_RATE,hr)}}_rates=new WeakMap;GlobalThis.customElements.get("media-playback-rate-menu-button")||GlobalThis.customElements.define("media-playback-rate-menu-button",MediaPlaybackRateMenuButton);var __accessCheck=(mr,hr,gr)=>{if(!hr.has(mr))throw TypeError("Cannot "+gr)},__privateGet=(mr,hr,gr)=>(__accessCheck(mr,hr,"read from private field"),gr?gr.call(mr):hr.get(mr)),__privateAdd=(mr,hr,gr)=>{if(hr.has(mr))throw TypeError("Cannot add the same private member more than once");hr instanceof WeakSet?hr.add(mr):hr.set(mr,gr)},__privateSet=(mr,hr,gr,vr)=>(__accessCheck(mr,hr,"write to private field"),hr.set(mr,gr),gr),__privateMethod=(mr,hr,gr)=>(__accessCheck(mr,hr,"access private method"),gr),_renditionList,_prevState,_render,render_fn,_onChange,onChange_fn;class MediaRenditionMenu extends MediaChromeMenu{constructor(){super(...arguments),__privateAdd(this,_render),__privateAdd(this,_onChange),__privateAdd(this,_renditionList,[]),__privateAdd(this,_prevState,{})}static get observedAttributes(){return[...super.observedAttributes,MediaUIAttributes.MEDIA_RENDITION_LIST,MediaUIAttributes.MEDIA_RENDITION_SELECTED,MediaUIAttributes.MEDIA_RENDITION_UNAVAILABLE,MediaUIAttributes.MEDIA_HEIGHT]}attributeChangedCallback(hr,gr,vr){super.attributeChangedCallback(hr,gr,vr),hr===MediaUIAttributes.MEDIA_RENDITION_SELECTED&&gr!==vr?this.value=vr??"auto":hr===MediaUIAttributes.MEDIA_RENDITION_LIST&&gr!==vr?(__privateSet(this,_renditionList,parseRenditionList(vr)),__privateMethod(this,_render,render_fn).call(this)):hr===MediaUIAttributes.MEDIA_HEIGHT&&gr!==vr&&__privateMethod(this,_render,render_fn).call(this)}connectedCallback(){super.connectedCallback(),this.addEventListener("change",__privateMethod(this,_onChange,onChange_fn))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("change",__privateMethod(this,_onChange,onChange_fn))}get anchorElement(){return this.anchor!=="auto"?super.anchorElement:getMediaController(this).querySelector("media-rendition-menu-button")}get mediaRenditionList(){return __privateGet(this,_renditionList)}set mediaRenditionList(hr){__privateSet(this,_renditionList,hr),__privateMethod(this,_render,render_fn).call(this)}get mediaRenditionSelected(){return getStringAttr(this,MediaUIAttributes.MEDIA_RENDITION_SELECTED)}set mediaRenditionSelected(hr){setStringAttr(this,MediaUIAttributes.MEDIA_RENDITION_SELECTED,hr)}get mediaHeight(){return getNumericAttr(this,MediaUIAttributes.MEDIA_HEIGHT)}set mediaHeight(hr){setNumericAttr(this,MediaUIAttributes.MEDIA_HEIGHT,hr)}}_renditionList=new WeakMap;_prevState=new WeakMap;_render=new WeakSet;render_fn=function(){if(__privateGet(this,_prevState).mediaRenditionList===JSON.stringify(this.mediaRenditionList)&&__privateGet(this,_prevState).mediaHeight===this.mediaHeight)return;__privateGet(this,_prevState).mediaRenditionList=JSON.stringify(this.mediaRenditionList),__privateGet(this,_prevState).mediaHeight=this.mediaHeight;const mr=this.mediaRenditionList.sort((xr,Er)=>Er.height-xr.height);for(const xr of mr)xr.selected=xr.id===this.mediaRenditionSelected;this.defaultSlot.textContent="";const hr=!this.mediaRenditionSelected;for(const xr of mr){const Er=this.formatMenuItemText(`${Math.min(xr.width,xr.height)}p`,xr),Cr=createMenuItem({type:"radio",text:Er,value:`${xr.id}`,checked:xr.selected&&!hr});Cr.prepend(createIndicator(this,"checked-indicator")),this.defaultSlot.append(Cr)}const gr=createMenuItem({type:"radio",text:this.formatMenuItemText("Auto"),value:"auto",checked:hr}),vr=this.mediaHeight>0?`Auto (${this.mediaHeight}p)`:"Auto";gr.dataset.description=vr,gr.prepend(createIndicator(this,"checked-indicator")),this.defaultSlot.append(gr)};_onChange=new WeakSet;onChange_fn=function(){if(this.value==null)return;const mr=new GlobalThis.CustomEvent(MediaUIEvents.MEDIA_RENDITION_REQUEST,{composed:!0,bubbles:!0,detail:this.value});this.dispatchEvent(mr)};GlobalThis.customElements.get("media-rendition-menu")||GlobalThis.customElements.define("media-rendition-menu",MediaRenditionMenu);const renditionIcon=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="M13.5 2.5h2v6h-2v-2h-11v-2h11v-2Zm4 2h4v2h-4v-2Zm-12 4h2v6h-2v-2h-3v-2h3v-2Zm4 2h12v2h-12v-2Zm1 4h2v6h-2v-2h-8v-2h8v-2Zm4 2h7v2h-7v-2Z" />
</svg>`,slotTemplate=Document$2.createElement("template");slotTemplate.innerHTML=`
  <style>
    :host([aria-expanded="true"]) slot[name=tooltip] {
      display: none;
    }
  </style>
  <slot name="icon">${renditionIcon}</slot>
`;class MediaRenditionMenuButton extends MediaChromeMenuButton{static get observedAttributes(){return[...super.observedAttributes,MediaUIAttributes.MEDIA_RENDITION_SELECTED,MediaUIAttributes.MEDIA_RENDITION_UNAVAILABLE,MediaUIAttributes.MEDIA_HEIGHT]}constructor(){super({slotTemplate,tooltipContent:tooltipLabels.RENDITIONS})}connectedCallback(){super.connectedCallback(),this.setAttribute("aria-label",nouns.QUALITY())}get invokeTargetElement(){return this.invokeTarget!=null?super.invokeTargetElement:getMediaController(this).querySelector("media-rendition-menu")}get mediaRenditionSelected(){return getStringAttr(this,MediaUIAttributes.MEDIA_RENDITION_SELECTED)}set mediaRenditionSelected(hr){setStringAttr(this,MediaUIAttributes.MEDIA_RENDITION_SELECTED,hr)}get mediaHeight(){return getNumericAttr(this,MediaUIAttributes.MEDIA_HEIGHT)}set mediaHeight(hr){setNumericAttr(this,MediaUIAttributes.MEDIA_HEIGHT,hr)}}GlobalThis.customElements.get("media-rendition-menu-button")||GlobalThis.customElements.define("media-rendition-menu-button",MediaRenditionMenuButton);var ke=(mr,hr,gr)=>{if(!hr.has(mr))throw TypeError("Cannot "+gr)},u=(mr,hr,gr)=>(ke(mr,hr,"read from private field"),gr?gr.call(mr):hr.get(mr)),b=(mr,hr,gr)=>{if(hr.has(mr))throw TypeError("Cannot add the same private member more than once");hr instanceof WeakSet?hr.add(mr):hr.set(mr,gr)},R=(mr,hr,gr,vr)=>(ke(mr,hr,"write to private field"),hr.set(mr,gr),gr),h=(mr,hr,gr)=>(ke(mr,hr,"access private method"),gr),W=class{addEventListener(){}removeEventListener(){}dispatchEvent(mr){return!0}};if(typeof DocumentFragment>"u"){class mr extends W{}globalThis.DocumentFragment=mr}var X$1=class extends W{},Re=class extends W{},Gt={get(mr){},define(mr,hr,gr){},getName(mr){return null},upgrade(mr){},whenDefined(mr){return Promise.resolve(X$1)}},J,Oe=class{constructor(mr,hr={}){b(this,J,void 0),R(this,J,hr?.detail)}get detail(){return u(this,J)}initCustomEvent(){}};J=new WeakMap;function jt(mr,hr){return new X$1}var lt={document:{createElement:jt},DocumentFragment,customElements:Gt,CustomEvent:Oe,EventTarget:W,HTMLElement:X$1,HTMLVideoElement:Re},ut=typeof window>"u"||typeof globalThis.customElements>"u",p$1=ut?lt:globalThis,C=ut?lt.document:globalThis.document;function mt(mr){let hr="";return Object.entries(mr).forEach(([gr,vr])=>{vr!=null&&(hr+=`${le$1(gr)}: ${vr}; `)}),hr?hr.trim():void 0}function le$1(mr){return mr.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function ue$1(mr){return mr.replace(/[-_]([a-z])/g,(hr,gr)=>gr.toUpperCase())}function T(mr){if(mr==null)return;let hr=+mr;return Number.isNaN(hr)?void 0:hr}function xe(mr){let hr=qt(mr).toString();return hr?"?"+hr:""}function qt(mr){let hr={};for(let gr in mr)mr[gr]!=null&&(hr[gr]=mr[gr]);return new URLSearchParams(hr)}var _e=(mr,hr)=>!mr||!hr?!1:mr.contains(hr)?!0:_e(mr,hr.getRootNode().host),pt="mux.com",zt=()=>{try{return"3.1.0"}catch{}return"UNKNOWN"},Xt=zt(),ce=()=>Xt,bt=(mr,{token:hr,customDomain:gr=pt,thumbnailTime:vr,programTime:xr}={})=>{var Er;let Cr=hr==null?vr:void 0,{aud:wr}=(Er=Q$3(hr))!=null?Er:{};if(!(hr&&wr!=="t"))return`https://image.${gr}/${mr}/thumbnail.webp${xe({token:hr,time:Cr,program_time:xr})}`},ht=(mr,{token:hr,customDomain:gr=pt,programStartTime:vr,programEndTime:xr}={})=>{var Er;let{aud:Cr}=(Er=Q$3(hr))!=null?Er:{};if(!(hr&&Cr!=="s"))return`https://image.${gr}/${mr}/storyboard.vtt${xe({token:hr,format:"webp",program_start_time:vr,program_end_time:xr})}`},Q$1=mr=>{if(mr){if([D$1.LIVE,D$1.ON_DEMAND].includes(mr))return mr;if(mr!=null&&mr.includes("live"))return D$1.LIVE}},Jt={crossorigin:"crossOrigin",playsinline:"playsInline"};function gt(mr){var hr;return(hr=Jt[mr])!=null?hr:ue$1(mr)}var H,K,v,me$1=class{constructor(hr,gr){b(this,H,void 0),b(this,K,void 0),b(this,v,[]),R(this,H,hr),R(this,K,gr)}[Symbol.iterator](){return u(this,v).values()}get length(){return u(this,v).length}get value(){var hr;return(hr=u(this,v).join(" "))!=null?hr:""}set value(hr){var gr;hr!==this.value&&(R(this,v,[]),this.add(...(gr=hr?.split(" "))!=null?gr:[]))}toString(){return this.value}item(hr){return u(this,v)[hr]}values(){return u(this,v).values()}keys(){return u(this,v).keys()}forEach(hr){u(this,v).forEach(hr)}add(...hr){var gr,vr;hr.forEach(xr=>{this.contains(xr)||u(this,v).push(xr)}),!(this.value===""&&!((gr=u(this,H))!=null&&gr.hasAttribute(`${u(this,K)}`)))&&((vr=u(this,H))==null||vr.setAttribute(`${u(this,K)}`,`${this.value}`))}remove(...hr){var gr;hr.forEach(vr=>{u(this,v).splice(u(this,v).indexOf(vr),1)}),(gr=u(this,H))==null||gr.setAttribute(`${u(this,K)}`,`${this.value}`)}contains(hr){return u(this,v).includes(hr)}toggle(hr,gr){return typeof gr<"u"?gr?(this.add(hr),!0):(this.remove(hr),!1):this.contains(hr)?(this.remove(hr),!1):(this.add(hr),!0)}replace(hr,gr){this.remove(hr),this.add(gr)}};H=new WeakMap,K=new WeakMap,v=new WeakMap;var ft=`[mux-player ${ce()}]`;function _(...mr){console.warn(ft,...mr)}function E$1(...mr){console.error(ft,...mr)}function Me(mr){var hr;let gr=(hr=mr.message)!=null?hr:"";mr.context&&(gr+=` ${mr.context}`),mr.file&&(gr+=` ${E$3("Read more: ")}
https://github.com/muxinc/elements/blob/main/errors/${mr.file}`),_(gr)}var y={AUTOPLAY:"autoplay",CROSSORIGIN:"crossorigin",LOOP:"loop",MUTED:"muted",PLAYSINLINE:"playsinline",PRELOAD:"preload"},U={VOLUME:"volume",PLAYBACKRATE:"playbackrate",MUTED:"muted"},vt=Object.freeze({length:0,start(mr){let hr=mr>>>0;if(hr>=this.length)throw new DOMException(`Failed to execute 'start' on 'TimeRanges': The index provided (${hr}) is greater than or equal to the maximum bound (${this.length}).`);return 0},end(mr){let hr=mr>>>0;if(hr>=this.length)throw new DOMException(`Failed to execute 'end' on 'TimeRanges': The index provided (${hr}) is greater than or equal to the maximum bound (${this.length}).`);return 0}}),ta=ve$1.filter(mr=>mr!=="error"),aa=Object.values(y).filter(mr=>![y.PLAYSINLINE].includes(mr)),ia=Object.values(U),Z,Se=class extends p$1.HTMLElement{constructor(){super(),b(this,Z,new WeakMap);let mr=hr=>{for(let gr of hr)gr.type==="childList"&&(gr.removedNodes.forEach(vr=>{var xr;(xr=u(this,Z).get(vr))==null||xr.remove()}),gr.addedNodes.forEach(vr=>{var xr;let Er=vr;Er!=null&&Er.slot||(xr=this.media)==null||xr.append(Tt(u(this,Z),vr))}))};new MutationObserver(mr).observe(this,{childList:!0,subtree:!0})}static get observedAttributes(){return[...aa,...ia]}init(){this.querySelectorAll(":scope > :not([slot])").forEach(mr=>{var hr;(hr=this.media)==null||hr.append(Tt(u(this,Z),mr))}),ta.forEach(mr=>{var hr;(hr=this.media)==null||hr.addEventListener(mr,gr=>{this.dispatchEvent(new Event(gr.type))})})}attributeChangedCallback(mr,hr,gr){var vr,xr;switch(mr){case U.MUTED:{this.media&&(this.media.muted=gr!=null,this.media.defaultMuted=gr!=null);return}case U.VOLUME:{let Er=(vr=T(gr))!=null?vr:1;this.media&&(this.media.volume=Er);return}case U.PLAYBACKRATE:{let Er=(xr=T(gr))!=null?xr:1;this.media&&(this.media.playbackRate=Er,this.media.defaultPlaybackRate=Er);return}}}play(){var mr,hr;return(hr=(mr=this.media)==null?void 0:mr.play())!=null?hr:Promise.reject()}pause(){var mr;(mr=this.media)==null||mr.pause()}load(){var mr;(mr=this.media)==null||mr.load()}requestCast(mr){var hr;return(hr=this.media)==null?void 0:hr.requestCast(mr)}get media(){var mr;return(mr=this.shadowRoot)==null?void 0:mr.querySelector("mux-video")}get audioTracks(){return this.media.audioTracks}get videoTracks(){return this.media.videoTracks}get audioRenditions(){return this.media.audioRenditions}get videoRenditions(){return this.media.videoRenditions}get paused(){var mr,hr;return(hr=(mr=this.media)==null?void 0:mr.paused)!=null?hr:!0}get duration(){var mr,hr;return(hr=(mr=this.media)==null?void 0:mr.duration)!=null?hr:NaN}get ended(){var mr,hr;return(hr=(mr=this.media)==null?void 0:mr.ended)!=null?hr:!1}get buffered(){var mr,hr;return(hr=(mr=this.media)==null?void 0:mr.buffered)!=null?hr:vt}get seekable(){var mr,hr;return(hr=(mr=this.media)==null?void 0:mr.seekable)!=null?hr:vt}get readyState(){var mr,hr;return(hr=(mr=this.media)==null?void 0:mr.readyState)!=null?hr:0}get videoWidth(){var mr,hr;return(hr=(mr=this.media)==null?void 0:mr.videoWidth)!=null?hr:0}get videoHeight(){var mr,hr;return(hr=(mr=this.media)==null?void 0:mr.videoHeight)!=null?hr:0}get currentSrc(){var mr,hr;return(hr=(mr=this.media)==null?void 0:mr.currentSrc)!=null?hr:""}get currentTime(){var mr,hr;return(hr=(mr=this.media)==null?void 0:mr.currentTime)!=null?hr:0}set currentTime(mr){this.media&&(this.media.currentTime=Number(mr))}get volume(){var mr,hr;return(hr=(mr=this.media)==null?void 0:mr.volume)!=null?hr:1}set volume(mr){this.media&&(this.media.volume=Number(mr))}get playbackRate(){var mr,hr;return(hr=(mr=this.media)==null?void 0:mr.playbackRate)!=null?hr:1}set playbackRate(mr){this.media&&(this.media.playbackRate=Number(mr))}get defaultPlaybackRate(){var mr;return(mr=T(this.getAttribute(U.PLAYBACKRATE)))!=null?mr:1}set defaultPlaybackRate(mr){mr!=null?this.setAttribute(U.PLAYBACKRATE,`${mr}`):this.removeAttribute(U.PLAYBACKRATE)}get crossOrigin(){return ee$1(this,y.CROSSORIGIN)}set crossOrigin(mr){this.setAttribute(y.CROSSORIGIN,`${mr}`)}get autoplay(){return ee$1(this,y.AUTOPLAY)!=null}set autoplay(mr){mr?this.setAttribute(y.AUTOPLAY,typeof mr=="string"?mr:""):this.removeAttribute(y.AUTOPLAY)}get loop(){return ee$1(this,y.LOOP)!=null}set loop(mr){mr?this.setAttribute(y.LOOP,""):this.removeAttribute(y.LOOP)}get muted(){var mr,hr;return(hr=(mr=this.media)==null?void 0:mr.muted)!=null?hr:!1}set muted(mr){this.media&&(this.media.muted=!!mr)}get defaultMuted(){return ee$1(this,y.MUTED)!=null}set defaultMuted(mr){mr?this.setAttribute(y.MUTED,""):this.removeAttribute(y.MUTED)}get playsInline(){return ee$1(this,y.PLAYSINLINE)!=null}set playsInline(mr){E$1("playsInline is set to true by default and is not currently supported as a setter.")}get preload(){return this.media?this.media.preload:this.getAttribute("preload")}set preload(mr){["","none","metadata","auto"].includes(mr)?this.setAttribute(y.PRELOAD,mr):this.removeAttribute(y.PRELOAD)}};Z=new WeakMap;function ee$1(mr,hr){return mr.media?mr.media.getAttribute(hr):mr.getAttribute(hr)}function Tt(mr,hr){let gr=mr.get(hr);return gr||(gr=hr.cloneNode(),mr.set(hr,gr)),gr}var Ne$1=Se,Et=`:host {
  --media-control-display: var(--controls);
  --media-loading-indicator-display: var(--loading-indicator);
  --media-dialog-display: var(--dialog);
  --media-play-button-display: var(--play-button);
  --media-live-button-display: var(--live-button);
  --media-seek-backward-button-display: var(--seek-backward-button);
  --media-seek-forward-button-display: var(--seek-forward-button);
  --media-mute-button-display: var(--mute-button);
  --media-captions-button-display: var(--captions-button);
  --media-captions-menu-button-display: var(--captions-menu-button, var(--media-captions-button-display));
  --media-rendition-menu-button-display: var(--rendition-menu-button);
  --media-audio-track-menu-button-display: var(--audio-track-menu-button);
  --media-airplay-button-display: var(--airplay-button);
  --media-pip-button-display: var(--pip-button);
  --media-fullscreen-button-display: var(--fullscreen-button);
  --media-cast-button-display: var(--cast-button, var(--_cast-button-drm-display));
  --media-playback-rate-button-display: var(--playback-rate-button);
  --media-playback-rate-menu-button-display: var(--playback-rate-menu-button);
  --media-volume-range-display: var(--volume-range);
  --media-time-range-display: var(--time-range);
  --media-time-display-display: var(--time-display);
  --media-duration-display-display: var(--duration-display);
  --media-title-display-display: var(--title-display);

  display: inline-block;
  width: 100%;
  line-height: 0;
}

/* Hide custom elements that are not defined yet */
:not(:defined) {
  display: none;
}

a {
  color: #fff;
  font-size: 0.9em;
  text-decoration: underline;
}

media-theme {
  width: 100%;
  height: 100%;
  direction: ltr;
}

media-poster-image {
  width: 100%;
  height: 100%;
}

media-poster-image:not([src]):not([placeholdersrc]) {
  display: none;
}

::part(top),
[part~='top'] {
  --media-control-display: var(--controls, var(--top-controls));
  --media-play-button-display: var(--play-button, var(--top-play-button));
  --media-live-button-display: var(--live-button, var(--top-live-button));
  --media-seek-backward-button-display: var(--seek-backward-button, var(--top-seek-backward-button));
  --media-seek-forward-button-display: var(--seek-forward-button, var(--top-seek-forward-button));
  --media-mute-button-display: var(--mute-button, var(--top-mute-button));
  --media-captions-button-display: var(--captions-button, var(--top-captions-button));
  --media-captions-menu-button-display: var(
    --captions-menu-button,
    var(--media-captions-button-display, var(--top-captions-menu-button))
  );
  --media-rendition-menu-button-display: var(--rendition-menu-button, var(--top-rendition-menu-button));
  --media-audio-track-menu-button-display: var(--audio-track-menu-button, var(--top-audio-track-menu-button));
  --media-airplay-button-display: var(--airplay-button, var(--top-airplay-button));
  --media-pip-button-display: var(--pip-button, var(--top-pip-button));
  --media-fullscreen-button-display: var(--fullscreen-button, var(--top-fullscreen-button));
  --media-cast-button-display: var(--cast-button, var(--top-cast-button, var(--_cast-button-drm-display)));
  --media-playback-rate-button-display: var(--playback-rate-button, var(--top-playback-rate-button));
  --media-playback-rate-menu-button-display: var(
    --captions-menu-button,
    var(--media-playback-rate-button-display, var(--top-playback-rate-menu-button))
  );
  --media-volume-range-display: var(--volume-range, var(--top-volume-range));
  --media-time-range-display: var(--time-range, var(--top-time-range));
  --media-time-display-display: var(--time-display, var(--top-time-display));
  --media-duration-display-display: var(--duration-display, var(--top-duration-display));
  --media-title-display-display: var(--title-display, var(--top-title-display));
}

::part(center),
[part~='center'] {
  --media-control-display: var(--controls, var(--center-controls));
  --media-play-button-display: var(--play-button, var(--center-play-button));
  --media-live-button-display: var(--live-button, var(--center-live-button));
  --media-seek-backward-button-display: var(--seek-backward-button, var(--center-seek-backward-button));
  --media-seek-forward-button-display: var(--seek-forward-button, var(--center-seek-forward-button));
  --media-mute-button-display: var(--mute-button, var(--center-mute-button));
  --media-captions-button-display: var(--captions-button, var(--center-captions-button));
  --media-captions-menu-button-display: var(
    --captions-menu-button,
    var(--media-captions-button-display, var(--center-captions-menu-button))
  );
  --media-rendition-menu-button-display: var(--rendition-menu-button, var(--center-rendition-menu-button));
  --media-audio-track-menu-button-display: var(--audio-track-menu-button, var(--center-audio-track-menu-button));
  --media-airplay-button-display: var(--airplay-button, var(--center-airplay-button));
  --media-pip-button-display: var(--pip-button, var(--center-pip-button));
  --media-fullscreen-button-display: var(--fullscreen-button, var(--center-fullscreen-button));
  --media-cast-button-display: var(--cast-button, var(--center-cast-button, var(--_cast-button-drm-display)));
  --media-playback-rate-button-display: var(--playback-rate-button, var(--center-playback-rate-button));
  --media-playback-rate-menu-button-display: var(
    --playback-rate-menu-button,
    var(--media-playback-rate-button-display, var(--center-playback-rate-menu-button))
  );
  --media-volume-range-display: var(--volume-range, var(--center-volume-range));
  --media-time-range-display: var(--time-range, var(--center-time-range));
  --media-time-display-display: var(--time-display, var(--center-time-display));
  --media-duration-display-display: var(--duration-display, var(--center-duration-display));
}

::part(bottom),
[part~='bottom'] {
  --media-control-display: var(--controls, var(--bottom-controls));
  --media-play-button-display: var(--play-button, var(--bottom-play-button));
  --media-live-button-display: var(--live-button, var(--bottom-live-button));
  --media-seek-backward-button-display: var(--seek-backward-button, var(--bottom-seek-backward-button));
  --media-seek-forward-button-display: var(--seek-forward-button, var(--bottom-seek-forward-button));
  --media-mute-button-display: var(--mute-button, var(--bottom-mute-button));
  --media-captions-button-display: var(--captions-button, var(--bottom-captions-button));
  --media-captions-menu-button-display: var(
    --captions-menu-button,
    var(--media-captions-button-display, var(--bottom-captions-menu-button))
  );
  --media-rendition-menu-button-display: var(--rendition-menu-button, var(--bottom-rendition-menu-button));
  --media-audio-track-menu-button-display: var(--audio-track-menu-button, var(--bottom-audio-track-menu-button));
  --media-airplay-button-display: var(--airplay-button, var(--bottom-airplay-button));
  --media-pip-button-display: var(--pip-button, var(--bottom-pip-button));
  --media-fullscreen-button-display: var(--fullscreen-button, var(--bottom-fullscreen-button));
  --media-cast-button-display: var(--cast-button, var(--bottom-cast-button, var(--_cast-button-drm-display)));
  --media-playback-rate-button-display: var(--playback-rate-button, var(--bottom-playback-rate-button));
  --media-playback-rate-menu-button-display: var(
    --playback-rate-menu-button,
    var(--media-playback-rate-button-display, var(--bottom-playback-rate-menu-button))
  );
  --media-volume-range-display: var(--volume-range, var(--bottom-volume-range));
  --media-time-range-display: var(--time-range, var(--bottom-time-range));
  --media-time-display-display: var(--time-display, var(--bottom-time-display));
  --media-duration-display-display: var(--duration-display, var(--bottom-duration-display));
  --media-title-display-display: var(--title-display, var(--bottom-title-display));
}

:host([no-tooltips]) {
  --media-tooltip-display: none;
}
`,Ct=`
  :host {
    z-index: 100;
    display: var(--media-dialog-display, flex);
    justify-content: center;
    align-items: center;
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0;
    left: 0;
    box-sizing: border-box;
    color: #fff;
    line-height: 18px;
    font-family: Arial, sans-serif;
    padding: var(--media-dialog-backdrop-padding, 0);
    background: var(--media-dialog-backdrop-background,
      linear-gradient(to bottom, rgba(20, 20, 30, 0.7) 50%, rgba(20, 20, 30, 0.9))
    );
    /* Needs to use !important to prevent overwrite of media-chrome */
    transition: var(--media-dialog-transition-open, visibility .2s, opacity .2s) !important;
    transform: var(--media-dialog-transform-open, none) !important;
    visibility: visible !important;
    opacity: 1 !important;
    pointer-events: auto !important;
  }

  :host(:not([open])) {
    /* Needs to use !important to prevent overwrite of media-chrome */
    transition: var(--media-dialog-transition-close, visibility .1s, opacity .1s) !important;
    transform: var(--media-dialog-transform-close, none) !important;
    visibility: hidden !important;
    opacity: 0 !important;
    pointer-events: none !important;
  }

  :focus-visible {
    box-shadow: 0 0 0 2px rgba(27, 127, 204, 0.9);
  }

  .dialog {
    position: relative;
    box-sizing: border-box;
    background: var(--media-dialog-background, none);
    padding: var(--media-dialog-padding, 10px);
    width: min(320px, 100%);
    word-wrap: break-word;
    max-height: 100%;
    overflow: auto;
    text-align: center;
    line-height: 1.4;
  }
`,kt=C.createElement("template");kt.innerHTML=`
  <style>
    ${Ct}
  </style>

  <div class="dialog">
    <slot></slot>
  </div>
`;var I=class extends p$1.HTMLElement{constructor(){var mr;super(),this.attachShadow({mode:"open"}),(mr=this.shadowRoot)==null||mr.appendChild(this.constructor.template.content.cloneNode(!0))}show(){this.setAttribute("open",""),this.dispatchEvent(new CustomEvent("open",{composed:!0,bubbles:!0})),At(this)}close(){this.hasAttribute("open")&&(this.removeAttribute("open"),this.dispatchEvent(new CustomEvent("close",{composed:!0,bubbles:!0})),oa(this))}attributeChangedCallback(mr,hr,gr){mr==="open"&&hr!==gr&&(gr!=null?this.show():this.close())}connectedCallback(){this.hasAttribute("role")||this.setAttribute("role","dialog"),this.hasAttribute("open")&&At(this)}};I.styles=Ct,I.template=kt,I.observedAttributes=["open"];function At(mr){let hr=new CustomEvent("initfocus",{composed:!0,bubbles:!0,cancelable:!0});if(mr.dispatchEvent(hr),hr.defaultPrevented)return;let gr=mr.querySelector("[autofocus]:not([disabled])");!gr&&mr.tabIndex>=0&&(gr=mr),gr||(gr=Rt(mr.shadowRoot)),mr._previouslyFocusedElement=C.activeElement,C.activeElement instanceof HTMLElement&&C.activeElement.blur(),mr.addEventListener("transitionend",()=>{gr instanceof HTMLElement&&gr.focus({preventScroll:!0})},{once:!0})}function Rt(mr){let hr=["button","input","keygen","select","textarea"].map(function(vr){return vr+":not([disabled])"});hr.push('[tabindex]:not([disabled]):not([tabindex=""])');let gr=mr?.querySelector(hr.join(", "));if(!gr&&"attachShadow"in Element.prototype){let vr=mr?.querySelectorAll("*")||[];for(let xr=0;xr<vr.length&&!(vr[xr].tagName&&vr[xr].shadowRoot&&(gr=Rt(vr[xr].shadowRoot),gr));xr++);}return gr}function oa(mr){mr._previouslyFocusedElement instanceof HTMLElement&&mr._previouslyFocusedElement.focus()}p$1.customElements.get("media-dialog")||(p$1.customElements.define("media-dialog",I),p$1.MediaDialog=I);var we=I,Ot=C.createElement("template");Ot.innerHTML=`
  <style>
    ${we.styles}

    .close {
      background: none;
      color: inherit;
      border: none;
      padding: 0;
      font: inherit;
      cursor: pointer;
      outline: inherit;
      width: 28px;
      height: 28px;
      position: absolute;
      top: 1rem;
      right: 1rem;
    }
  </style>

  <div class="dialog">
    <slot></slot>
  </div>

  <slot name="close">
    <button class="close" tabindex="0">
      <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
      </svg>
    </button>
  </slot>
`;var te=class extends we{constructor(){var mr,hr;super(),(hr=(mr=this.shadowRoot)==null?void 0:mr.querySelector(".close"))==null||hr.addEventListener("click",()=>{this.close()})}};te.template=Ot;p$1.customElements.get("mxp-dialog")||(p$1.customElements.define("mxp-dialog",te),p$1.MxpDialog=te);var ae=new WeakMap,Ie=class Mp{constructor(hr,gr){this.element=hr,this.type=gr,this.element.addEventListener(this.type,this);let vr=ae.get(this.element);vr&&vr.set(this.type,this)}set(hr){if(typeof hr=="function")this.handleEvent=hr.bind(this.element);else if(typeof hr=="object"&&typeof hr.handleEvent=="function")this.handleEvent=hr.handleEvent.bind(hr);else{this.element.removeEventListener(this.type,this);let gr=ae.get(this.element);gr&&gr.delete(this.type)}}static for(hr){ae.has(hr.element)||ae.set(hr.element,new Map);let gr=hr.attributeName.slice(2),vr=ae.get(hr.element);return vr&&vr.has(gr)?vr.get(gr):new Mp(hr.element,gr)}};function sa(mr,hr){return mr instanceof AttrPart&&mr.attributeName.startsWith("on")?(Ie.for(mr).set(hr),mr.element.removeAttributeNS(mr.attributeNamespace,mr.attributeName),!0):!1}function da(mr,hr){return hr instanceof pe$1&&mr instanceof ChildNodePart?(hr.renderInto(mr),!0):!1}function la(mr,hr){return hr instanceof DocumentFragment&&mr instanceof ChildNodePart?(hr.childNodes.length&&mr.replace(...hr.childNodes),!0):!1}function ua(mr,hr){if(mr instanceof AttrPart){let gr=mr.attributeNamespace,vr=mr.element.getAttributeNS(gr,mr.attributeName);return String(hr)!==vr&&(mr.value=String(hr)),!0}return mr.value=String(hr),!0}function ma(mr,hr){if(mr instanceof AttrPart&&hr instanceof Element){let gr=mr.element;return gr[mr.attributeName]!==hr&&(mr.element.removeAttributeNS(mr.attributeNamespace,mr.attributeName),gr[mr.attributeName]=hr),!0}return!1}function ca(mr,hr){if(typeof hr=="boolean"&&mr instanceof AttrPart){let gr=mr.attributeNamespace,vr=mr.element.hasAttributeNS(gr,mr.attributeName);return hr!==vr&&(mr.booleanValue=hr),!0}return!1}function pa(mr,hr){return hr===!1&&mr instanceof ChildNodePart?(mr.replace(""),!0):!1}function ba(mr,hr){ma(mr,hr)||ca(mr,hr)||sa(mr,hr)||pa(mr,hr)||da(mr,hr)||la(mr,hr)||ua(mr,hr)}var Pe=new Map,xt=new WeakMap,_t=new WeakMap,pe$1=class{constructor(hr,gr,vr){this.strings=hr,this.values=gr,this.processor=vr,this.stringsKey=this.strings.join("")}get template(){if(Pe.has(this.stringsKey))return Pe.get(this.stringsKey);{let hr=C.createElement("template"),gr=this.strings.length-1;return hr.innerHTML=this.strings.reduce((vr,xr,Er)=>vr+xr+(Er<gr?`{{ ${Er} }}`:""),""),Pe.set(this.stringsKey,hr),hr}}renderInto(hr){var gr;let vr=this.template;if(xt.get(hr)!==vr){xt.set(hr,vr);let Er=new TemplateInstance(vr,this.values,this.processor);_t.set(hr,Er),hr instanceof ChildNodePart?hr.replace(...Er.children):hr.appendChild(Er);return}let xr=_t.get(hr);(gr=xr?.update)==null||gr.call(xr,this.values)}},ha={processCallback(mr,hr,gr){var vr;if(gr){for(let[xr,Er]of hr)if(xr in gr){let Cr=(vr=gr[xr])!=null?vr:"";ba(Er,Cr)}}}};function S(mr,...hr){return new pe$1(mr,hr,ha)}function Lt(mr,hr){mr.renderInto(hr)}var ya=mr=>{let{tokens:hr}=mr;return hr.drm?":host { --_cast-button-drm-display: none; }":""},St=mr=>S`
  <style>
    ${ya(mr)}
    ${Et}
  </style>
  ${Aa(mr)}
`,va=mr=>{let hr=mr.hotKeys?`${mr.hotKeys}`:"";return Q$1(mr.streamType)==="live"&&(hr+=" noarrowleft noarrowright"),hr},Ta={TOP:"top",CENTER:"center",BOTTOM:"bottom",LAYER:"layer",MEDIA_LAYER:"media-layer",POSTER_LAYER:"poster-layer",VERTICAL_LAYER:"vertical-layer",CENTERED_LAYER:"centered-layer",GESTURE_LAYER:"gesture-layer",CONTROLLER_LAYER:"controller",BUTTON:"button",RANGE:"range",DISPLAY:"display",CONTROL_BAR:"control-bar",MENU_BUTTON:"menu-button",LISTBOX:"listbox",OPTION:"option",POSTER:"poster",LIVE:"live",PLAY:"play",PRE_PLAY:"pre-play",SEEK_BACKWARD:"seek-backward",SEEK_FORWARD:"seek-forward",MUTE:"mute",CAPTIONS:"captions",AIRPLAY:"airplay",PIP:"pip",FULLSCREEN:"fullscreen",CAST:"cast",PLAYBACK_RATE:"playback-rate",VOLUME:"volume",TIME:"time",TITLE:"title",AUDIO_TRACK:"audio-track",RENDITION:"rendition"},Ea=Object.values(Ta).join(", "),Aa=mr=>{var hr,gr,vr,xr,Er,Cr,wr,Rr,kr,Dr,Br,Hr,Gr,qr,zr,Qr,sn,hn,vn,yn,gn,bn,xn,$n,Sn,Cn,Rn,Bn,Fn,Hn,Gn,qn,On,wn,_n,Tn,Mn,Ln;return S`
  <media-theme
    template="${mr.themeTemplate||!1}"
    defaultstreamtype="${(hr=mr.defaultStreamType)!=null?hr:!1}"
    hotkeys="${va(mr)||!1}"
    nohotkeys="${mr.noHotKeys||!mr.hasSrc||mr.isDialogOpen||!1}"
    noautoseektolive="${!!((gr=mr.streamType)!=null&&gr.includes(D$1.LIVE))&&mr.targetLiveWindow!==0}"
    novolumepref="${mr.novolumepref||!1}"
    disabled="${!mr.hasSrc||mr.isDialogOpen}"
    audio="${(vr=mr.audio)!=null?vr:!1}"
    style="${(xr=mt({"--media-primary-color":mr.primaryColor,"--media-secondary-color":mr.secondaryColor,"--media-accent-color":mr.accentColor}))!=null?xr:!1}"
    defaultsubtitles="${!mr.defaultHiddenCaptions}"
    forwardseekoffset="${(Er=mr.forwardSeekOffset)!=null?Er:!1}"
    backwardseekoffset="${(Cr=mr.backwardSeekOffset)!=null?Cr:!1}"
    playbackrates="${(wr=mr.playbackRates)!=null?wr:!1}"
    defaultshowremainingtime="${(Rr=mr.defaultShowRemainingTime)!=null?Rr:!1}"
    defaultduration="${(kr=mr.defaultDuration)!=null?kr:!1}"
    hideduration="${(Dr=mr.hideDuration)!=null?Dr:!1}"
    title="${(Br=mr.title)!=null?Br:!1}"
    exportparts="${Ea}"
  >
    <mux-video
      slot="media"
      target-live-window="${(Hr=mr.targetLiveWindow)!=null?Hr:!1}"
      stream-type="${(Gr=Q$1(mr.streamType))!=null?Gr:!1}"
      crossorigin="${(qr=mr.crossOrigin)!=null?qr:""}"
      playsinline
      autoplay="${(zr=mr.autoplay)!=null?zr:!1}"
      muted="${(Qr=mr.muted)!=null?Qr:!1}"
      loop="${(sn=mr.loop)!=null?sn:!1}"
      preload="${(hn=mr.preload)!=null?hn:!1}"
      debug="${(vn=mr.debug)!=null?vn:!1}"
      prefer-cmcd="${(yn=mr.preferCmcd)!=null?yn:!1}"
      disable-tracking="${(gn=mr.disableTracking)!=null?gn:!1}"
      disable-cookies="${(bn=mr.disableCookies)!=null?bn:!1}"
      prefer-playback="${(xn=mr.preferPlayback)!=null?xn:!1}"
      start-time="${mr.startTime!=null?mr.startTime:!1}"
      beacon-collection-domain="${($n=mr.beaconCollectionDomain)!=null?$n:!1}"
      player-software-name="${(Sn=mr.playerSoftwareName)!=null?Sn:!1}"
      player-software-version="${(Cn=mr.playerSoftwareVersion)!=null?Cn:!1}"
      env-key="${(Rn=mr.envKey)!=null?Rn:!1}"
      custom-domain="${(Bn=mr.customDomain)!=null?Bn:!1}"
      src="${mr.src?mr.src:mr.playbackId?Lr(mr):!1}"
      cast-src="${mr.src?mr.src:mr.playbackId?Lr(mr):!1}"
      cast-receiver="${(Fn=mr.castReceiver)!=null?Fn:!1}"
      drm-token="${(Gn=(Hn=mr.tokens)==null?void 0:Hn.drm)!=null?Gn:!1}"
      exportparts="video"
    >
      ${mr.storyboard?S`<track label="thumbnails" default kind="metadata" src="${mr.storyboard}" />`:S``}
    </mux-video>
    <slot name="poster" slot="poster">
      <media-poster-image
        part="poster"
        exportparts="poster, img"
        src="${mr.poster?mr.poster:!1}"
        placeholdersrc="${(qn=mr.placeholder)!=null?qn:!1}"
      ></media-poster-image>
    </slot>
    <mxp-dialog
      no-auto-hide
      open="${(On=mr.isDialogOpen)!=null?On:!1}"
      onclose="${mr.onCloseErrorDialog}"
      oninitfocus="${mr.onInitFocusDialog}"
    >
      ${(wn=mr.dialog)!=null&&wn.title?S`<h3>${mr.dialog.title}</h3>`:S``}
      <p>
        ${(_n=mr.dialog)==null?void 0:_n.message}
        ${(Tn=mr.dialog)!=null&&Tn.linkUrl?S`<a
              href="${mr.dialog.linkUrl}"
              target="_blank"
              rel="external noopener"
              aria-label="${(Mn=mr.dialog.linkText)!=null?Mn:""} ${E$3("(opens in a new window)")}"
              >${(Ln=mr.dialog.linkText)!=null?Ln:mr.dialog.linkUrl}</a
            >`:S``}
      </p>
    </mxp-dialog>
  </media-theme>
`},Pt=mr=>mr.charAt(0).toUpperCase()+mr.slice(1),Ca=(mr,hr=!1)=>{var gr,vr;if(mr.muxCode){let xr=Pt((gr=mr.errorCategory)!=null?gr:"video"),Er=H$2((vr=mr.errorCategory)!=null?vr:C$1.VIDEO);if(mr.muxCode===M$2.NETWORK_OFFLINE)return E$3("Your device appears to be offline",hr);if(mr.muxCode===M$2.NETWORK_TOKEN_EXPIRED)return E$3("{category} URL has expired",hr).format({category:xr});if([M$2.NETWORK_TOKEN_SUB_MISMATCH,M$2.NETWORK_TOKEN_AUD_MISMATCH,M$2.NETWORK_TOKEN_AUD_MISSING,M$2.NETWORK_TOKEN_MALFORMED].includes(mr.muxCode))return E$3("{category} URL is formatted incorrectly",hr).format({category:xr});if(mr.muxCode===M$2.NETWORK_TOKEN_MISSING)return E$3("Invalid {categoryName} URL",hr).format({categoryName:Er});if(mr.muxCode===M$2.NETWORK_NOT_FOUND)return E$3("{category} does not exist",hr).format({category:xr});if(mr.muxCode===M$2.NETWORK_NOT_READY)return E$3("{category} is not currently available",hr).format({category:xr})}if(mr.code){if(mr.code===T$1.MEDIA_ERR_NETWORK)return E$3("Network Error",hr);if(mr.code===T$1.MEDIA_ERR_DECODE)return E$3("Media Error",hr);if(mr.code===T$1.MEDIA_ERR_SRC_NOT_SUPPORTED)return E$3("Source Not Supported",hr)}return E$3("Error",hr)},ka=(mr,hr=!1)=>{var gr,vr;if(mr.muxCode){let xr=Pt((gr=mr.errorCategory)!=null?gr:"video"),Er=H$2((vr=mr.errorCategory)!=null?vr:C$1.VIDEO);return mr.muxCode===M$2.NETWORK_OFFLINE?E$3("Check your internet connection and try reloading this video.",hr):mr.muxCode===M$2.NETWORK_TOKEN_EXPIRED?E$3("The video’s secured {tokenNamePrefix}-token has expired.",hr).format({tokenNamePrefix:Er}):mr.muxCode===M$2.NETWORK_TOKEN_SUB_MISMATCH?E$3("The video’s playback ID does not match the one encoded in the {tokenNamePrefix}-token.",hr).format({tokenNamePrefix:Er}):mr.muxCode===M$2.NETWORK_TOKEN_MALFORMED?E$3("{category} URL is formatted incorrectly",hr).format({category:xr}):[M$2.NETWORK_TOKEN_AUD_MISMATCH,M$2.NETWORK_TOKEN_AUD_MISSING].includes(mr.muxCode)?E$3("The {tokenNamePrefix}-token is formatted with incorrect information.",hr).format({tokenNamePrefix:Er}):[M$2.NETWORK_TOKEN_MISSING,M$2.NETWORK_INVALID_URL].includes(mr.muxCode)?E$3("The video URL or {tokenNamePrefix}-token are formatted with incorrect or incomplete information.",hr).format({tokenNamePrefix:Er}):mr.muxCode===M$2.NETWORK_NOT_FOUND?"":mr.muxCode===M$2.NETWORK_NOT_READY?E$3("The live stream or video file are not yet ready.",hr):mr.message}return mr.code&&(mr.code===T$1.MEDIA_ERR_NETWORK||mr.code===T$1.MEDIA_ERR_DECODE||(mr.code,T$1.MEDIA_ERR_SRC_NOT_SUPPORTED)),mr.message},Ra=(mr,hr=!1)=>{let gr=Ca(mr,hr),vr=ka(mr,hr);return{title:gr,message:vr}},Oa=mr=>{if(mr.muxCode){if(mr.muxCode===M$2.NETWORK_TOKEN_EXPIRED)return"403-expired-token.md";if(mr.muxCode===M$2.NETWORK_TOKEN_MALFORMED)return"403-malformatted-token.md";if([M$2.NETWORK_TOKEN_AUD_MISMATCH,M$2.NETWORK_TOKEN_AUD_MISSING].includes(mr.muxCode))return"403-incorrect-aud-value.md";if(mr.muxCode===M$2.NETWORK_TOKEN_SUB_MISMATCH)return"403-playback-id-mismatch.md";if(mr.muxCode===M$2.NETWORK_TOKEN_MISSING)return"missing-signed-tokens.md";if(mr.muxCode===M$2.NETWORK_NOT_FOUND)return"404-not-found.md";if(mr.muxCode===M$2.NETWORK_NOT_READY)return"412-not-playable.md"}if(mr.code){if(mr.code===T$1.MEDIA_ERR_NETWORK)return"";if(mr.code===T$1.MEDIA_ERR_DECODE)return"media-decode-error.md";if(mr.code===T$1.MEDIA_ERR_SRC_NOT_SUPPORTED)return"media-src-not-supported.md"}return""},xa=(mr,hr)=>{let gr=Oa(mr);return{message:mr.message,context:mr.context,file:gr}};function De(mr,hr=!1){let gr=Ra(mr,hr),vr=xa(mr);return{dialog:gr,devlog:vr}}var It=`<template id="media-theme-gerwig">
  <style>
    @keyframes pre-play-hide {
      0% {
        transform: scale(1);
        opacity: 1;
      }

      30% {
        transform: scale(0.7);
      }

      100% {
        transform: scale(1.5);
        opacity: 0;
      }
    }

    :host {
      --_primary-color: var(--media-primary-color, #fff);
      --_secondary-color: var(--media-secondary-color, transparent);
      --_accent-color: var(--media-accent-color, #fa50b5);
      --_text-color: var(--media-text-color, #000);

      --media-icon-color: var(--_primary-color);
      --media-control-background: var(--_secondary-color);
      --media-control-hover-background: var(--_accent-color);
      --media-time-buffered-color: rgba(255, 255, 255, 0.4);
      --media-preview-time-text-shadow: none;
      --media-control-height: 14px;
      --media-control-padding: 6px;
      --media-tooltip-container-margin: 6px;
      --media-tooltip-distance: 18px;

      color: var(--_primary-color);
      display: inline-block;
      width: 100%;
      height: 100%;
    }

    :host([audio]) {
      --_secondary-color: var(--media-secondary-color, black);
      --media-preview-time-text-shadow: none;
    }

    :host([audio]) ::slotted([slot='media']) {
      height: 0px;
    }

    :host([audio]) media-loading-indicator {
      display: none;
    }

    :host([audio]) media-controller {
      background: transparent;
    }

    :host([audio]) media-controller::part(vertical-layer) {
      background: transparent;
    }

    :host([audio]) media-control-bar {
      width: 100%;
      background-color: var(--media-control-background);
    }

    /*
     * 0.433s is the transition duration for VTT Regions.
     * Borrowed here, so the captions don't move too fast.
     */
    media-controller {
      --media-webkit-text-track-transform: translateY(0) scale(0.98);
      --media-webkit-text-track-transition: transform 0.433s ease-out 0.3s;
    }
    media-controller:is([mediapaused], :not([userinactive])) {
      --media-webkit-text-track-transform: translateY(-50px) scale(0.98);
      --media-webkit-text-track-transition: transform 0.15s ease;
    }

    /*
     * CSS specific to iOS devices.
     * See: https://stackoverflow.com/questions/30102792/css-media-query-to-target-only-ios-devices/60220757#60220757
     */
    @supports (-webkit-touch-callout: none) {
      /* Disable subtitle adjusting for iOS Safari */
      media-controller[mediaisfullscreen] {
        --media-webkit-text-track-transform: unset;
        --media-webkit-text-track-transition: unset;
      }
    }

    media-time-range {
      --media-box-padding-left: 6px;
      --media-box-padding-right: 6px;
      --media-range-bar-color: var(--_accent-color);
      --media-time-range-buffered-color: var(--_primary-color);
      --media-range-track-color: transparent;
      --media-range-track-background: rgba(255, 255, 255, 0.4);
      --media-range-thumb-background: radial-gradient(
        circle,
        #000 0%,
        #000 25%,
        var(--_accent-color) 25%,
        var(--_accent-color)
      );
      --media-range-thumb-width: 12px;
      --media-range-thumb-height: 12px;
      --media-range-thumb-transform: scale(0);
      --media-range-thumb-transition: transform 0.3s;
      --media-range-thumb-opacity: 1;
      --media-preview-background: var(--_primary-color);
      --media-box-arrow-background: var(--_primary-color);
      --media-preview-thumbnail-border: 5px solid var(--_primary-color);
      --media-preview-border-radius: 5px;
      --media-text-color: var(--_text-color);
      --media-control-hover-background: transparent;
      --media-preview-chapter-text-shadow: none;
      color: var(--_accent-color);
      padding: 0 6px;
    }

    :host([audio]) media-time-range {
      --media-preview-time-padding: 1.5px 6px;
      --media-preview-box-margin: 0 0 -5px;
    }

    media-time-range:hover {
      --media-range-thumb-transform: scale(1);
    }

    media-preview-thumbnail {
      border-bottom-width: 0;
    }

    [part~='menu'] {
      border-radius: 2px;
      border: 1px solid rgba(0, 0, 0, 0.1);
      bottom: 50px;
      padding: 2.5px 10px;
    }

    [part~='menu']::part(indicator) {
      fill: var(--_accent-color);
    }

    [part~='menu']::part(menu-item) {
      box-sizing: border-box;
      display: flex;
      align-items: center;
      padding: 6px 10px;
      min-height: 34px;
    }

    [part~='menu']::part(checked) {
      font-weight: 700;
    }

    media-captions-menu,
    media-rendition-menu,
    media-audio-track-menu,
    media-playback-rate-menu {
      position: absolute; /* ensure they don't take up space in DOM on load */
      --media-menu-background: var(--_primary-color);
      --media-menu-item-checked-background: transparent;
      --media-text-color: var(--_text-color);
      --media-menu-item-hover-background: transparent;
      --media-menu-item-hover-outline: var(--_accent-color) solid 1px;
    }

    /* The icon is a circle so make it 16px high instead of 14px for more balance. */
    media-audio-track-menu-button {
      --media-control-padding: 5px;
      --media-control-height: 16px;
    }

    media-playback-rate-menu-button {
      --media-control-padding: 6px 3px;
      min-width: 4.4ch;
    }

    media-playback-rate-menu {
      --media-menu-flex-direction: row;
      --media-menu-item-checked-background: var(--_accent-color);
      --media-menu-item-checked-indicator-display: none;
      margin-right: 6px;
      padding: 0;
      --media-menu-gap: 0.25em;
    }

    media-playback-rate-menu[part~='menu']::part(menu-item) {
      padding: 6px 6px 6px 8px;
    }

    media-playback-rate-menu[part~='menu']::part(checked) {
      color: #fff;
    }

    :host(:not([audio])) media-time-range {
      /* Adding px is required here for calc() */
      --media-range-padding: 0px;
      background: transparent;
      z-index: 10;
      height: 10px;
      bottom: -3px;
      width: 100%;
    }

    media-control-bar :is([role='button'], [role='switch'], button) {
      line-height: 0;
    }

    media-control-bar :is([part*='button'], [part*='range'], [part*='display']) {
      border-radius: 3px;
    }

    .spacer {
      flex-grow: 1;
      background-color: var(--media-control-background, rgba(20, 20, 30, 0.7));
    }

    media-control-bar[slot~='top-chrome'] {
      min-height: 42px;
      pointer-events: none;
    }

    media-control-bar {
      --gradient-steps: hsl(0 0% 0% / 0) 0%, hsl(0 0% 0% / 0.013) 8.1%, hsl(0 0% 0% / 0.049) 15.5%,
        hsl(0 0% 0% / 0.104) 22.5%, hsl(0 0% 0% / 0.175) 29%, hsl(0 0% 0% / 0.259) 35.3%, hsl(0 0% 0% / 0.352) 41.2%,
        hsl(0 0% 0% / 0.45) 47.1%, hsl(0 0% 0% / 0.55) 52.9%, hsl(0 0% 0% / 0.648) 58.8%, hsl(0 0% 0% / 0.741) 64.7%,
        hsl(0 0% 0% / 0.825) 71%, hsl(0 0% 0% / 0.896) 77.5%, hsl(0 0% 0% / 0.951) 84.5%, hsl(0 0% 0% / 0.987) 91.9%,
        hsl(0 0% 0%) 100%;
    }

    :host([title]:not([audio])) media-control-bar[slot='top-chrome']::before {
      content: '';
      position: absolute;
      width: 100%;
      padding-bottom: min(100px, 25%);
      background: linear-gradient(to top, var(--gradient-steps));
      opacity: 0.8;
      pointer-events: none;
    }

    :host(:not([audio])) media-control-bar[part~='bottom']::before {
      content: '';
      position: absolute;
      width: 100%;
      bottom: 0;
      left: 0;
      padding-bottom: min(100px, 25%);
      background: linear-gradient(to bottom, var(--gradient-steps));
      opacity: 0.8;
      z-index: 1;
      pointer-events: none;
    }

    media-control-bar[part~='bottom'] > * {
      z-index: 20;
    }

    media-control-bar[part~='bottom'] {
      padding: 6px 6px;
    }

    media-control-bar[slot~='top-chrome'] > * {
      --media-control-background: transparent;
      --media-control-hover-background: transparent;
      position: relative;
    }

    media-controller::part(vertical-layer) {
      transition: background-color 1s;
    }

    media-controller:is([mediapaused], :not([userinactive]))::part(vertical-layer) {
      background-color: var(--controls-backdrop-color, var(--controls, transparent));
      transition: background-color 0.25s;
    }

    .center-controls {
      --media-button-icon-width: 100%;
      --media-button-icon-height: auto;
      --media-tooltip-display: none;
      pointer-events: none;
      width: 100%;
      display: flex;
      flex-flow: row;
      align-items: center;
      justify-content: center;
      filter: drop-shadow(0 0 2px rgb(0 0 0 / 0.25)) drop-shadow(0 0 6px rgb(0 0 0 / 0.25));
      paint-order: stroke;
      stroke: rgba(102, 102, 102, 1);
      stroke-width: 0.3px;
      text-shadow:
        0 0 2px rgb(0 0 0 / 0.25),
        0 0 6px rgb(0 0 0 / 0.25);
    }

    .center-controls media-play-button {
      --media-control-background: transparent;
      --media-control-hover-background: transparent;
      --media-control-padding: 0;
      width: 40px;
    }

    [breakpointsm] .center-controls media-play-button {
      width: 90px;
      height: 90px;
      border-radius: 50%;
      transition: background 0.4s;
      padding: 24px;
      --media-control-background: #000;
      --media-control-hover-background: var(--_accent-color);
    }

    .center-controls media-seek-backward-button,
    .center-controls media-seek-forward-button {
      --media-control-background: transparent;
      --media-control-hover-background: transparent;
      padding: 0;
      margin: 0 20px;
      width: max(33px, min(8%, 40px));
    }

    [breakpointsm]:not([audio]) .center-controls.pre-playback {
      display: grid;
      align-items: initial;
      justify-content: initial;
      height: 100%;
      overflow: hidden;
    }

    [breakpointsm]:not([audio]) .center-controls.pre-playback media-play-button {
      place-self: var(--_pre-playback-place, center);
      grid-area: 1 / 1;
      margin: 16px;
    }

    /* Show and hide controls or pre-playback state */

    [breakpointsm]:is([mediahasplayed], :not([mediapaused])):not([audio])
      .center-controls.pre-playback
      media-play-button {
      /* Using \`forwards\` would lead to a laggy UI after the animation got in the end state */
      animation: 0.3s linear pre-play-hide;
      opacity: 0;
      pointer-events: none;
    }

    .autoplay-unmute {
      --media-control-hover-background: transparent;
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      filter: drop-shadow(0 0 2px rgb(0 0 0 / 0.25)) drop-shadow(0 0 6px rgb(0 0 0 / 0.25));
    }

    .autoplay-unmute-btn {
      --media-control-height: 16px;
      border-radius: 8px;
      background: #000;
      color: var(--_primary-color);
      display: flex;
      align-items: center;
      padding: 8px 16px;
      font-size: 18px;
      font-weight: 500;
      cursor: pointer;
    }

    .autoplay-unmute-btn:hover {
      background: var(--_accent-color);
    }

    [breakpointsm] .autoplay-unmute-btn {
      --media-control-height: 30px;
      padding: 14px 24px;
      font-size: 26px;
    }

    .autoplay-unmute-btn svg {
      margin: 0 6px 0 0;
    }

    [breakpointsm] .autoplay-unmute-btn svg {
      margin: 0 10px 0 0;
    }

    media-controller:not([audio]):not([mediahasplayed]) *:is(media-control-bar, media-time-range) {
      display: none;
    }

    media-loading-indicator {
      --media-loading-icon-width: 100%;
      --media-button-icon-height: auto;
      display: var(--media-control-display, var(--media-loading-indicator-display, flex));
      pointer-events: none;
      position: absolute;
      width: min(15%, 150px);
      flex-flow: row;
      align-items: center;
      justify-content: center;
    }

    /* Intentionally don't target the div for transition but the children
     of the div. Prevents messing with media-chrome's autohide feature. */
    media-loading-indicator + div * {
      transition: opacity 0.15s;
      opacity: 1;
    }

    media-loading-indicator[medialoading]:not([mediapaused]) ~ div > * {
      opacity: 0;
      transition-delay: 400ms;
    }

    media-volume-range {
      width: min(100%, 100px);
      --media-range-padding-left: 10px;
      --media-range-padding-right: 10px;
      --media-range-thumb-width: 12px;
      --media-range-thumb-height: 12px;
      --media-range-thumb-background: radial-gradient(
        circle,
        #000 0%,
        #000 25%,
        var(--_primary-color) 25%,
        var(--_primary-color)
      );
      --media-control-hover-background: none;
    }

    media-time-display {
      white-space: nowrap;
    }

    /* Generic style for explicitly disabled controls */
    media-control-bar[part~='bottom'] [disabled],
    media-control-bar[part~='bottom'] [aria-disabled='true'] {
      opacity: 60%;
      cursor: not-allowed;
    }

    media-text-display {
      --media-font-size: 16px;
      --media-control-padding: 14px;
      font-weight: 500;
    }

    media-play-button.animated *:is(g, path) {
      transition: all 0.3s;
    }

    media-play-button.animated[mediapaused] .pause-icon-pt1 {
      opacity: 0;
    }

    media-play-button.animated[mediapaused] .pause-icon-pt2 {
      transform-origin: center center;
      transform: scaleY(0);
    }

    media-play-button.animated[mediapaused] .play-icon {
      clip-path: inset(0 0 0 0);
    }

    media-play-button.animated:not([mediapaused]) .play-icon {
      clip-path: inset(0 0 0 100%);
    }

    media-seek-forward-button,
    media-seek-backward-button {
      --media-font-weight: 400;
    }

    .mute-icon {
      display: inline-block;
    }

    .mute-icon :is(path, g) {
      transition: opacity 0.5s;
    }

    .muted {
      opacity: 0;
    }

    media-mute-button[mediavolumelevel='low'] :is(.volume-medium, .volume-high),
    media-mute-button[mediavolumelevel='medium'] :is(.volume-high) {
      opacity: 0;
    }

    media-mute-button[mediavolumelevel='off'] .unmuted {
      opacity: 0;
    }

    media-mute-button[mediavolumelevel='off'] .muted {
      opacity: 1;
    }

    /**
     * Our defaults for these buttons are to hide them at small sizes
     * users can override this with CSS
     */
    media-controller:not([breakpointsm]):not([audio]) {
      --bottom-play-button: none;
      --bottom-seek-backward-button: none;
      --bottom-seek-forward-button: none;
      --bottom-time-display: none;
      --bottom-playback-rate-menu-button: none;
      --bottom-pip-button: none;
    }
  </style>

  <template partial="TitleDisplay">
    <template if="title">
      <media-text-display part="top title display" class="title-display">{{title}}</media-text-display>
    </template>
  </template>

  <template partial="PlayButton">
    <media-play-button
      part="{{section ?? 'bottom'}} play button"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
      class="animated"
    >
      <svg aria-hidden="true" viewBox="0 0 18 14" slot="icon">
        <g class="play-icon">
          <path
            d="M15.5987 6.2911L3.45577 0.110898C2.83667 -0.204202 2.06287 0.189698 2.06287 0.819798V13.1802C2.06287 13.8103 2.83667 14.2042 3.45577 13.8891L15.5987 7.7089C16.2178 7.3938 16.2178 6.6061 15.5987 6.2911Z"
          />
        </g>
        <g class="pause-icon">
          <path
            class="pause-icon-pt1"
            d="M5.90709 0H2.96889C2.46857 0 2.06299 0.405585 2.06299 0.9059V13.0941C2.06299 13.5944 2.46857 14 2.96889 14H5.90709C6.4074 14 6.81299 13.5944 6.81299 13.0941V0.9059C6.81299 0.405585 6.4074 0 5.90709 0Z"
          />
          <path
            class="pause-icon-pt2"
            d="M15.1571 0H12.2189C11.7186 0 11.313 0.405585 11.313 0.9059V13.0941C11.313 13.5944 11.7186 14 12.2189 14H15.1571C15.6574 14 16.063 13.5944 16.063 13.0941V0.9059C16.063 0.405585 15.6574 0 15.1571 0Z"
          />
        </g>
      </svg>
    </media-play-button>
  </template>

  <template partial="PrePlayButton">
    <media-play-button
      part="{{section ?? 'center'}} play button pre-play"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
    >
      <svg aria-hidden="true" viewBox="0 0 18 14" slot="icon" style="transform: translate(3px, 0)">
        <path
          d="M15.5987 6.2911L3.45577 0.110898C2.83667 -0.204202 2.06287 0.189698 2.06287 0.819798V13.1802C2.06287 13.8103 2.83667 14.2042 3.45577 13.8891L15.5987 7.7089C16.2178 7.3938 16.2178 6.6061 15.5987 6.2911Z"
        />
      </svg>
    </media-play-button>
  </template>

  <template partial="SeekBackwardButton">
    <media-seek-backward-button
      seekoffset="{{backwardseekoffset}}"
      part="{{section ?? 'bottom'}} seek-backward button"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
    >
      <svg viewBox="0 0 22 14" aria-hidden="true" slot="icon">
        <path
          d="M3.65 2.07888L0.0864 6.7279C-0.0288 6.87812 -0.0288 7.12188 0.0864 7.2721L3.65 11.9211C3.7792 12.0896 4 11.9703 4 11.7321V2.26787C4 2.02968 3.7792 1.9104 3.65 2.07888Z"
        />
        <text transform="translate(6 12)" style="font-size: 14px; font-family: 'ArialMT', 'Arial'">
          {{backwardseekoffset}}
        </text>
      </svg>
    </media-seek-backward-button>
  </template>

  <template partial="SeekForwardButton">
    <media-seek-forward-button
      seekoffset="{{forwardseekoffset}}"
      part="{{section ?? 'bottom'}} seek-forward button"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
    >
      <svg viewBox="0 0 22 14" aria-hidden="true" slot="icon">
        <g>
          <text transform="translate(-1 12)" style="font-size: 14px; font-family: 'ArialMT', 'Arial'">
            {{forwardseekoffset}}
          </text>
          <path
            d="M18.35 11.9211L21.9136 7.2721C22.0288 7.12188 22.0288 6.87812 21.9136 6.7279L18.35 2.07888C18.2208 1.91041 18 2.02968 18 2.26787V11.7321C18 11.9703 18.2208 12.0896 18.35 11.9211Z"
          />
        </g>
      </svg>
    </media-seek-forward-button>
  </template>

  <template partial="MuteButton">
    <media-mute-button part="bottom mute button" disabled="{{disabled}}" aria-disabled="{{disabled}}">
      <svg viewBox="0 0 18 14" slot="icon" class="mute-icon" aria-hidden="true">
        <g class="unmuted">
          <path
            d="M6.76786 1.21233L3.98606 3.98924H1.19937C0.593146 3.98924 0.101743 4.51375 0.101743 5.1607V6.96412L0 6.99998L0.101743 7.03583V8.83926C0.101743 9.48633 0.593146 10.0108 1.19937 10.0108H3.98606L6.76773 12.7877C7.23561 13.2547 8 12.9007 8 12.2171V1.78301C8 1.09925 7.23574 0.745258 6.76786 1.21233Z"
          />
          <path
            class="volume-low"
            d="M10 3.54781C10.7452 4.55141 11.1393 5.74511 11.1393 6.99991C11.1393 8.25471 10.7453 9.44791 10 10.4515L10.7988 11.0496C11.6734 9.87201 12.1356 8.47161 12.1356 6.99991C12.1356 5.52821 11.6735 4.12731 10.7988 2.94971L10 3.54781Z"
          />
          <path
            class="volume-medium"
            d="M12.3778 2.40086C13.2709 3.76756 13.7428 5.35806 13.7428 7.00026C13.7428 8.64246 13.2709 10.233 12.3778 11.5992L13.2106 12.1484C14.2107 10.6185 14.739 8.83796 14.739 7.00016C14.739 5.16236 14.2107 3.38236 13.2106 1.85156L12.3778 2.40086Z"
          />
          <path
            class="volume-high"
            d="M15.5981 0.75L14.7478 1.2719C15.7937 2.9919 16.3468 4.9723 16.3468 7C16.3468 9.0277 15.7937 11.0082 14.7478 12.7281L15.5981 13.25C16.7398 11.3722 17.343 9.211 17.343 7C17.343 4.789 16.7398 2.6268 15.5981 0.75Z"
          />
        </g>
        <g class="muted">
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M4.39976 4.98924H1.19937C1.19429 4.98924 1.17777 4.98961 1.15296 5.01609C1.1271 5.04369 1.10174 5.09245 1.10174 5.1607V8.83926C1.10174 8.90761 1.12714 8.95641 1.15299 8.984C1.17779 9.01047 1.1943 9.01084 1.19937 9.01084H4.39977L7 11.6066V2.39357L4.39976 4.98924ZM7.47434 1.92006C7.4743 1.9201 7.47439 1.92002 7.47434 1.92006V1.92006ZM6.76773 12.7877L3.98606 10.0108H1.19937C0.593146 10.0108 0.101743 9.48633 0.101743 8.83926V7.03583L0 6.99998L0.101743 6.96412V5.1607C0.101743 4.51375 0.593146 3.98924 1.19937 3.98924H3.98606L6.76786 1.21233C7.23574 0.745258 8 1.09925 8 1.78301V12.2171C8 12.9007 7.23561 13.2547 6.76773 12.7877Z"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M15.2677 9.30323C15.463 9.49849 15.7796 9.49849 15.9749 9.30323C16.1701 9.10796 16.1701 8.79138 15.9749 8.59612L14.2071 6.82841L15.9749 5.06066C16.1702 4.8654 16.1702 4.54882 15.9749 4.35355C15.7796 4.15829 15.4631 4.15829 15.2678 4.35355L13.5 6.1213L11.7322 4.35348C11.537 4.15822 11.2204 4.15822 11.0251 4.35348C10.8298 4.54874 10.8298 4.86532 11.0251 5.06058L12.7929 6.82841L11.0251 8.59619C10.8299 8.79146 10.8299 9.10804 11.0251 9.3033C11.2204 9.49856 11.537 9.49856 11.7323 9.3033L13.5 7.53552L15.2677 9.30323Z"
          />
        </g>
      </svg>
    </media-mute-button>
  </template>

  <template partial="PipButton">
    <media-pip-button part="bottom pip button" disabled="{{disabled}}" aria-disabled="{{disabled}}">
      <svg viewBox="0 0 18 14" aria-hidden="true" slot="icon">
        <path
          d="M15.9891 0H2.011C0.9004 0 0 0.9003 0 2.0109V11.989C0 13.0996 0.9004 14 2.011 14H15.9891C17.0997 14 18 13.0997 18 11.9891V2.0109C18 0.9003 17.0997 0 15.9891 0ZM17 11.9891C17 12.5465 16.5465 13 15.9891 13H2.011C1.4536 13 1.0001 12.5465 1.0001 11.9891V2.0109C1.0001 1.4535 1.4536 0.9999 2.011 0.9999H15.9891C16.5465 0.9999 17 1.4535 17 2.0109V11.9891Z"
        />
        <path
          d="M15.356 5.67822H8.19523C8.03253 5.67822 7.90063 5.81012 7.90063 5.97282V11.3836C7.90063 11.5463 8.03253 11.6782 8.19523 11.6782H15.356C15.5187 11.6782 15.6506 11.5463 15.6506 11.3836V5.97282C15.6506 5.81012 15.5187 5.67822 15.356 5.67822Z"
        />
      </svg>
    </media-pip-button>
  </template>

  <template partial="CaptionsMenu">
    <media-captions-menu-button part="bottom captions button">
      <svg aria-hidden="true" viewBox="0 0 18 14" slot="on">
        <path
          d="M15.989 0H2.011C0.9004 0 0 0.9003 0 2.0109V11.9891C0 13.0997 0.9004 14 2.011 14H15.989C17.0997 14 18 13.0997 18 11.9891V2.0109C18 0.9003 17.0997 0 15.989 0ZM4.2292 8.7639C4.5954 9.1902 5.0935 9.4031 5.7233 9.4031C6.1852 9.4031 6.5544 9.301 6.8302 9.0969C7.1061 8.8933 7.2863 8.614 7.3702 8.26H8.4322C8.3062 8.884 8.0093 9.3733 7.5411 9.7273C7.0733 10.0813 6.4703 10.2581 5.732 10.2581C5.108 10.2581 4.5699 10.1219 4.1168 9.8489C3.6637 9.5759 3.3141 9.1946 3.0685 8.7058C2.8224 8.2165 2.6994 7.6511 2.6994 7.009C2.6994 6.3611 2.8224 5.7927 3.0685 5.3034C3.3141 4.8146 3.6637 4.4323 4.1168 4.1559C4.5699 3.88 5.108 3.7418 5.732 3.7418C6.4703 3.7418 7.0733 3.922 7.5411 4.2818C8.0094 4.6422 8.3062 5.1461 8.4322 5.794H7.3702C7.2862 5.4283 7.106 5.1368 6.8302 4.921C6.5544 4.7052 6.1852 4.5968 5.7233 4.5968C5.0934 4.5968 4.5954 4.8116 4.2292 5.2404C3.8635 5.6696 3.6804 6.259 3.6804 7.009C3.6804 7.7531 3.8635 8.3381 4.2292 8.7639ZM11.0974 8.7639C11.4636 9.1902 11.9617 9.4031 12.5915 9.4031C13.0534 9.4031 13.4226 9.301 13.6984 9.0969C13.9743 8.8933 14.1545 8.614 14.2384 8.26H15.3004C15.1744 8.884 14.8775 9.3733 14.4093 9.7273C13.9415 10.0813 13.3385 10.2581 12.6002 10.2581C11.9762 10.2581 11.4381 10.1219 10.985 9.8489C10.5319 9.5759 10.1823 9.1946 9.9367 8.7058C9.6906 8.2165 9.5676 7.6511 9.5676 7.009C9.5676 6.3611 9.6906 5.7927 9.9367 5.3034C10.1823 4.8146 10.5319 4.4323 10.985 4.1559C11.4381 3.88 11.9762 3.7418 12.6002 3.7418C13.3385 3.7418 13.9415 3.922 14.4093 4.2818C14.8776 4.6422 15.1744 5.1461 15.3004 5.794H14.2384C14.1544 5.4283 13.9742 5.1368 13.6984 4.921C13.4226 4.7052 13.0534 4.5968 12.5915 4.5968C11.9616 4.5968 11.4636 4.8116 11.0974 5.2404C10.7317 5.6696 10.5486 6.259 10.5486 7.009C10.5486 7.7531 10.7317 8.3381 11.0974 8.7639Z"
        />
      </svg>
      <svg aria-hidden="true" viewBox="0 0 18 14" slot="off">
        <path
          d="M5.73219 10.258C5.10819 10.258 4.57009 10.1218 4.11699 9.8488C3.66389 9.5758 3.31429 9.1945 3.06869 8.7057C2.82259 8.2164 2.69958 7.651 2.69958 7.0089C2.69958 6.361 2.82259 5.7926 3.06869 5.3033C3.31429 4.8145 3.66389 4.4322 4.11699 4.1558C4.57009 3.8799 5.10819 3.7417 5.73219 3.7417C6.47049 3.7417 7.07348 3.9219 7.54128 4.2817C8.00958 4.6421 8.30638 5.146 8.43238 5.7939H7.37039C7.28639 5.4282 7.10618 5.1367 6.83039 4.9209C6.55459 4.7051 6.18538 4.5967 5.72348 4.5967C5.09358 4.5967 4.59559 4.8115 4.22939 5.2403C3.86369 5.6695 3.68058 6.2589 3.68058 7.0089C3.68058 7.753 3.86369 8.338 4.22939 8.7638C4.59559 9.1901 5.09368 9.403 5.72348 9.403C6.18538 9.403 6.55459 9.3009 6.83039 9.0968C7.10629 8.8932 7.28649 8.6139 7.37039 8.2599H8.43238C8.30638 8.8839 8.00948 9.3732 7.54128 9.7272C7.07348 10.0812 6.47049 10.258 5.73219 10.258Z"
        />
        <path
          d="M12.6003 10.258C11.9763 10.258 11.4382 10.1218 10.9851 9.8488C10.532 9.5758 10.1824 9.1945 9.93685 8.7057C9.69075 8.2164 9.56775 7.651 9.56775 7.0089C9.56775 6.361 9.69075 5.7926 9.93685 5.3033C10.1824 4.8145 10.532 4.4322 10.9851 4.1558C11.4382 3.8799 11.9763 3.7417 12.6003 3.7417C13.3386 3.7417 13.9416 3.9219 14.4094 4.2817C14.8777 4.6421 15.1745 5.146 15.3005 5.7939H14.2385C14.1545 5.4282 13.9743 5.1367 13.6985 4.9209C13.4227 4.7051 13.0535 4.5967 12.5916 4.5967C11.9617 4.5967 11.4637 4.8115 11.0975 5.2403C10.7318 5.6695 10.5487 6.2589 10.5487 7.0089C10.5487 7.753 10.7318 8.338 11.0975 8.7638C11.4637 9.1901 11.9618 9.403 12.5916 9.403C13.0535 9.403 13.4227 9.3009 13.6985 9.0968C13.9744 8.8932 14.1546 8.6139 14.2385 8.2599H15.3005C15.1745 8.8839 14.8776 9.3732 14.4094 9.7272C13.9416 10.0812 13.3386 10.258 12.6003 10.258Z"
        />
        <path
          d="M15.9891 1C16.5465 1 17 1.4535 17 2.011V11.9891C17 12.5465 16.5465 13 15.9891 13H2.0109C1.4535 13 1 12.5465 1 11.9891V2.0109C1 1.4535 1.4535 0.9999 2.0109 0.9999L15.9891 1ZM15.9891 0H2.0109C0.9003 0 0 0.9003 0 2.0109V11.9891C0 13.0997 0.9003 14 2.0109 14H15.9891C17.0997 14 18 13.0997 18 11.9891V2.0109C18 0.9003 17.0997 0 15.9891 0Z"
        />
      </svg>
    </media-captions-menu-button>
    <media-captions-menu
      hidden
      anchor="auto"
      part="bottom captions menu"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
      exportparts="menu-item"
    >
      <div slot="checked-indicator">
        <style>
          .indicator {
            position: relative;
            top: 1px;
            width: 0.9em;
            height: auto;
            fill: var(--_accent-color);
            margin-right: 5px;
          }

          [aria-checked='false'] .indicator {
            display: none;
          }
        </style>
        <svg viewBox="0 0 14 18" class="indicator">
          <path
            d="M12.252 3.48c-.115.033-.301.161-.425.291-.059.063-1.407 1.815-2.995 3.894s-2.897 3.79-2.908 3.802c-.013.014-.661-.616-1.672-1.624-.908-.905-1.702-1.681-1.765-1.723-.401-.27-.783-.211-1.176.183a1.285 1.285 0 0 0-.261.342.582.582 0 0 0-.082.35c0 .165.01.205.08.35.075.153.213.296 2.182 2.271 1.156 1.159 2.17 2.159 2.253 2.222.189.143.338.196.539.194.203-.003.412-.104.618-.299.205-.193 6.7-8.693 6.804-8.903a.716.716 0 0 0 .085-.345c.01-.179.005-.203-.062-.339-.124-.252-.45-.531-.746-.639a.784.784 0 0 0-.469-.027"
            fill-rule="evenodd"
          />
        </svg></div
    ></media-captions-menu>
  </template>

  <template partial="AirplayButton">
    <media-airplay-button part="bottom airplay button" disabled="{{disabled}}" aria-disabled="{{disabled}}">
      <svg viewBox="0 0 18 14" aria-hidden="true" slot="icon">
        <path
          d="M16.1383 0H1.8618C0.8335 0 0 0.8335 0 1.8617V10.1382C0 11.1664 0.8335 12 1.8618 12H3.076C3.1204 11.9433 3.1503 11.8785 3.2012 11.826L4.004 11H1.8618C1.3866 11 1 10.6134 1 10.1382V1.8617C1 1.3865 1.3866 0.9999 1.8618 0.9999H16.1383C16.6135 0.9999 17.0001 1.3865 17.0001 1.8617V10.1382C17.0001 10.6134 16.6135 11 16.1383 11H13.9961L14.7989 11.826C14.8499 11.8785 14.8798 11.9432 14.9241 12H16.1383C17.1665 12 18.0001 11.1664 18.0001 10.1382V1.8617C18 0.8335 17.1665 0 16.1383 0Z"
        />
        <path
          d="M9.55061 8.21903C9.39981 8.06383 9.20001 7.98633 9.00011 7.98633C8.80021 7.98633 8.60031 8.06383 8.44951 8.21903L4.09771 12.697C3.62471 13.1838 3.96961 13.9998 4.64831 13.9998H13.3518C14.0304 13.9998 14.3754 13.1838 13.9023 12.697L9.55061 8.21903Z"
        />
      </svg>
    </media-airplay-button>
  </template>

  <template partial="FullscreenButton">
    <media-fullscreen-button part="bottom fullscreen button" disabled="{{disabled}}" aria-disabled="{{disabled}}">
      <svg viewBox="0 0 18 14" aria-hidden="true" slot="enter">
        <path
          d="M1.00745 4.39539L1.01445 1.98789C1.01605 1.43049 1.47085 0.978289 2.02835 0.979989L6.39375 0.992589L6.39665 -0.007411L2.03125 -0.020011C0.920646 -0.023211 0.0176463 0.874489 0.0144463 1.98509L0.00744629 4.39539H1.00745Z"
        />
        <path
          d="M17.0144 2.03431L17.0076 4.39541H18.0076L18.0144 2.03721C18.0176 0.926712 17.1199 0.0237125 16.0093 0.0205125L11.6439 0.0078125L11.641 1.00781L16.0064 1.02041C16.5638 1.02201 17.016 1.47681 17.0144 2.03431Z"
        />
        <path
          d="M16.9925 9.60498L16.9855 12.0124C16.9839 12.5698 16.5291 13.022 15.9717 13.0204L11.6063 13.0078L11.6034 14.0078L15.9688 14.0204C17.0794 14.0236 17.9823 13.1259 17.9855 12.0153L17.9925 9.60498H16.9925Z"
        />
        <path
          d="M0.985626 11.9661L0.992426 9.60498H-0.0074737L-0.0142737 11.9632C-0.0174737 13.0738 0.880226 13.9767 1.99083 13.98L6.35623 13.9926L6.35913 12.9926L1.99373 12.98C1.43633 12.9784 0.983926 12.5236 0.985626 11.9661Z"
        />
      </svg>
      <svg viewBox="0 0 18 14" aria-hidden="true" slot="exit">
        <path
          d="M5.39655 -0.0200195L5.38955 2.38748C5.38795 2.94488 4.93315 3.39708 4.37565 3.39538L0.0103463 3.38278L0.00744629 4.38278L4.37285 4.39538C5.48345 4.39858 6.38635 3.50088 6.38965 2.39028L6.39665 -0.0200195H5.39655Z"
        />
        <path
          d="M12.6411 2.36891L12.6479 0.0078125H11.6479L11.6411 2.36601C11.6379 3.47651 12.5356 4.37951 13.6462 4.38271L18.0116 4.39531L18.0145 3.39531L13.6491 3.38271C13.0917 3.38111 12.6395 2.92641 12.6411 2.36891Z"
        />
        <path
          d="M12.6034 14.0204L12.6104 11.613C12.612 11.0556 13.0668 10.6034 13.6242 10.605L17.9896 10.6176L17.9925 9.61759L13.6271 9.60499C12.5165 9.60179 11.6136 10.4995 11.6104 11.6101L11.6034 14.0204H12.6034Z"
        />
        <path
          d="M5.359 11.6315L5.3522 13.9926H6.3522L6.359 11.6344C6.3622 10.5238 5.4645 9.62088 4.3539 9.61758L-0.0115043 9.60498L-0.0144043 10.605L4.351 10.6176C4.9084 10.6192 5.3607 11.074 5.359 11.6315Z"
        />
      </svg>
    </media-fullscreen-button>
  </template>

  <template partial="CastButton">
    <media-cast-button part="bottom cast button" disabled="{{disabled}}" aria-disabled="{{disabled}}">
      <svg viewBox="0 0 18 14" aria-hidden="true" slot="enter">
        <path
          d="M16.0072 0H2.0291C0.9185 0 0.0181 0.9003 0.0181 2.011V5.5009C0.357 5.5016 0.6895 5.5275 1.0181 5.5669V2.011C1.0181 1.4536 1.4716 1 2.029 1H16.0072C16.5646 1 17.0181 1.4536 17.0181 2.011V11.9891C17.0181 12.5465 16.5646 13 16.0072 13H8.4358C8.4746 13.3286 8.4999 13.6611 8.4999 13.9999H16.0071C17.1177 13.9999 18.018 13.0996 18.018 11.989V2.011C18.0181 0.9003 17.1178 0 16.0072 0ZM0 6.4999V7.4999C3.584 7.4999 6.5 10.4159 6.5 13.9999H7.5C7.5 9.8642 4.1357 6.4999 0 6.4999ZM0 8.7499V9.7499C2.3433 9.7499 4.25 11.6566 4.25 13.9999H5.25C5.25 11.1049 2.895 8.7499 0 8.7499ZM0.0181 11V14H3.0181C3.0181 12.3431 1.675 11 0.0181 11Z"
        />
      </svg>
      <svg viewBox="0 0 18 14" aria-hidden="true" slot="exit">
        <path
          d="M15.9891 0H2.01103C0.900434 0 3.35947e-05 0.9003 3.35947e-05 2.011V5.5009C0.338934 5.5016 0.671434 5.5275 1.00003 5.5669V2.011C1.00003 1.4536 1.45353 1 2.01093 1H15.9891C16.5465 1 17 1.4536 17 2.011V11.9891C17 12.5465 16.5465 13 15.9891 13H8.41773C8.45653 13.3286 8.48183 13.6611 8.48183 13.9999H15.989C17.0996 13.9999 17.9999 13.0996 17.9999 11.989V2.011C18 0.9003 17.0997 0 15.9891 0ZM-0.0180664 6.4999V7.4999C3.56593 7.4999 6.48193 10.4159 6.48193 13.9999H7.48193C7.48193 9.8642 4.11763 6.4999 -0.0180664 6.4999ZM-0.0180664 8.7499V9.7499C2.32523 9.7499 4.23193 11.6566 4.23193 13.9999H5.23193C5.23193 11.1049 2.87693 8.7499 -0.0180664 8.7499ZM3.35947e-05 11V14H3.00003C3.00003 12.3431 1.65693 11 3.35947e-05 11Z"
        />
        <path d="M2.15002 5.634C5.18352 6.4207 7.57252 8.8151 8.35282 11.8499H15.8501V2.1499H2.15002V5.634Z" />
      </svg>
    </media-cast-button>
  </template>

  <template partial="LiveButton">
    <media-live-button part="{{section ?? 'top'}} live button" disabled="{{disabled}}" aria-disabled="{{disabled}}">
      <span slot="text">Live</span>
    </media-live-button>
  </template>

  <template partial="PlaybackRateMenu">
    <media-playback-rate-menu-button part="bottom playback-rate button"></media-playback-rate-menu-button>
    <media-playback-rate-menu
      hidden
      anchor="auto"
      rates="{{playbackrates}}"
      exportparts="menu-item"
      part="bottom playback-rate menu"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
    ></media-playback-rate-menu>
  </template>

  <template partial="VolumeRange">
    <media-volume-range
      part="bottom volume range"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
    ></media-volume-range>
  </template>

  <template partial="TimeDisplay">
    <media-time-display
      remaining="{{defaultshowremainingtime}}"
      showduration="{{!hideduration}}"
      part="bottom time display"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
    ></media-time-display>
  </template>

  <template partial="TimeRange">
    <media-time-range part="bottom time range" disabled="{{disabled}}" aria-disabled="{{disabled}}">
      <media-preview-thumbnail slot="preview"></media-preview-thumbnail>
      <media-preview-chapter-display slot="preview"></media-preview-chapter-display>
      <media-preview-time-display slot="preview"></media-preview-time-display>
      <div slot="preview" part="arrow"></div>
    </media-time-range>
  </template>

  <template partial="AudioTrackMenu">
    <media-audio-track-menu-button part="bottom audio-track button">
      <svg aria-hidden="true" slot="icon" viewBox="0 0 18 16">
        <path d="M9 15A7 7 0 1 1 9 1a7 7 0 0 1 0 14Zm0 1A8 8 0 1 0 9 0a8 8 0 0 0 0 16Z" />
        <path
          d="M5.2 6.3a.5.5 0 0 1 .5.5v2.4a.5.5 0 1 1-1 0V6.8a.5.5 0 0 1 .5-.5Zm2.4-2.4a.5.5 0 0 1 .5.5v7.2a.5.5 0 0 1-1 0V4.4a.5.5 0 0 1 .5-.5ZM10 5.5a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5Zm2.4-.8a.5.5 0 0 1 .5.5v5.6a.5.5 0 0 1-1 0V5.2a.5.5 0 0 1 .5-.5Z"
        />
      </svg>
    </media-audio-track-menu-button>
    <media-audio-track-menu
      hidden
      anchor="auto"
      part="bottom audio-track menu"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
      exportparts="menu-item"
    >
      <div slot="checked-indicator">
        <style>
          .indicator {
            position: relative;
            top: 1px;
            width: 0.9em;
            height: auto;
            fill: var(--_accent-color);
            margin-right: 5px;
          }

          [aria-checked='false'] .indicator {
            display: none;
          }
        </style>
        <svg viewBox="0 0 14 18" class="indicator">
          <path
            d="M12.252 3.48c-.115.033-.301.161-.425.291-.059.063-1.407 1.815-2.995 3.894s-2.897 3.79-2.908 3.802c-.013.014-.661-.616-1.672-1.624-.908-.905-1.702-1.681-1.765-1.723-.401-.27-.783-.211-1.176.183a1.285 1.285 0 0 0-.261.342.582.582 0 0 0-.082.35c0 .165.01.205.08.35.075.153.213.296 2.182 2.271 1.156 1.159 2.17 2.159 2.253 2.222.189.143.338.196.539.194.203-.003.412-.104.618-.299.205-.193 6.7-8.693 6.804-8.903a.716.716 0 0 0 .085-.345c.01-.179.005-.203-.062-.339-.124-.252-.45-.531-.746-.639a.784.784 0 0 0-.469-.027"
            fill-rule="evenodd"
          />
        </svg>
      </div>
    </media-audio-track-menu>
  </template>

  <template partial="RenditionMenu">
    <media-rendition-menu-button part="bottom rendition button">
      <svg aria-hidden="true" slot="icon" viewBox="0 0 18 14">
        <path
          d="M2.25 9a2 2 0 1 0 0-4 2 2 0 0 0 0 4ZM9 9a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm6.75 0a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z"
        />
      </svg>
    </media-rendition-menu-button>
    <media-rendition-menu
      hidden
      anchor="auto"
      part="bottom rendition menu"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
    >
      <div slot="checked-indicator">
        <style>
          .indicator {
            position: relative;
            top: 1px;
            width: 0.9em;
            height: auto;
            fill: var(--_accent-color);
            margin-right: 5px;
          }

          [aria-checked='false'] .indicator {
            display: none;
          }
        </style>
        <svg viewBox="0 0 14 18" class="indicator">
          <path
            d="M12.252 3.48c-.115.033-.301.161-.425.291-.059.063-1.407 1.815-2.995 3.894s-2.897 3.79-2.908 3.802c-.013.014-.661-.616-1.672-1.624-.908-.905-1.702-1.681-1.765-1.723-.401-.27-.783-.211-1.176.183a1.285 1.285 0 0 0-.261.342.582.582 0 0 0-.082.35c0 .165.01.205.08.35.075.153.213.296 2.182 2.271 1.156 1.159 2.17 2.159 2.253 2.222.189.143.338.196.539.194.203-.003.412-.104.618-.299.205-.193 6.7-8.693 6.804-8.903a.716.716 0 0 0 .085-.345c.01-.179.005-.203-.062-.339-.124-.252-.45-.531-.746-.639a.784.784 0 0 0-.469-.027"
            fill-rule="evenodd"
          />
        </svg>
      </div>
    </media-rendition-menu>
  </template>

  <media-controller
    part="controller"
    defaultstreamtype="{{defaultstreamtype ?? 'on-demand'}}"
    breakpoints="sm:470"
    gesturesdisabled="{{disabled}}"
    hotkeys="{{hotkeys}}"
    nohotkeys="{{nohotkeys}}"
    novolumepref="{{novolumepref}}"
    audio="{{audio}}"
    noautoseektolive="{{noautoseektolive}}"
    defaultsubtitles="{{defaultsubtitles}}"
    defaultduration="{{defaultduration ?? false}}"
    keyboardforwardseekoffset="{{forwardseekoffset}}"
    keyboardbackwardseekoffset="{{backwardseekoffset}}"
    exportparts="layer, media-layer, poster-layer, vertical-layer, centered-layer, gesture-layer"
    style="--_pre-playback-place:{{preplaybackplace ?? 'center'}}"
  >
    <slot name="media" slot="media"></slot>
    <slot name="poster" slot="poster"></slot>

    <media-loading-indicator slot="centered-chrome" noautohide></media-loading-indicator>

    <template if="!audio">
      <!-- Pre-playback UI -->
      <!-- same for both on-demand and live -->
      <div slot="centered-chrome" class="center-controls pre-playback">
        <template if="!breakpointsm">{{>PlayButton section="center"}}</template>
        <template if="breakpointsm">{{>PrePlayButton section="center"}}</template>
      </div>

      <!-- Autoplay centered unmute button -->
      <!--
        todo: figure out how show this with available state variables
        needs to show when:
        - autoplay is enabled
        - playback has been successful
        - audio is muted
        - in place / instead of the pre-plaback play button
        - not to show again after user has interacted with this button
          - OR user has interacted with the mute button in the control bar
      -->
      <!--
        There should be a >MuteButton to the left of the "Unmute" text, but a templating bug
        makes it appear even if commented out in the markup, add it back when code is un-commented
      -->
      <!-- <div slot="centered-chrome" class="autoplay-unmute">
        <div role="button" class="autoplay-unmute-btn">Unmute</div>
      </div> -->

      <template if="streamtype == 'on-demand'">
        <template if="breakpointsm">
          <media-control-bar part="control-bar top" slot="top-chrome">{{>TitleDisplay}} </media-control-bar>
        </template>
        {{>TimeRange}}
        <media-control-bar part="control-bar bottom">
          {{>PlayButton}} {{>SeekBackwardButton}} {{>SeekForwardButton}} {{>TimeDisplay}} {{>MuteButton}}
          {{>VolumeRange}}
          <div class="spacer"></div>
          {{>RenditionMenu}} {{>PlaybackRateMenu}} {{>AudioTrackMenu}} {{>CaptionsMenu}} {{>AirplayButton}}
          {{>CastButton}} {{>PipButton}} {{>FullscreenButton}}
        </media-control-bar>
      </template>

      <template if="streamtype == 'live'">
        <media-control-bar part="control-bar top" slot="top-chrome">
          {{>LiveButton}}
          <template if="breakpointsm"> {{>TitleDisplay}} </template>
        </media-control-bar>
        <template if="targetlivewindow > 0">{{>TimeRange}}</template>
        <media-control-bar part="control-bar bottom">
          {{>PlayButton}}
          <template if="targetlivewindow > 0">{{>SeekBackwardButton}} {{>SeekForwardButton}}</template>
          {{>MuteButton}} {{>VolumeRange}}
          <div class="spacer"></div>
          {{>RenditionMenu}} {{>AudioTrackMenu}} {{>CaptionsMenu}} {{>AirplayButton}} {{>CastButton}} {{>PipButton}}
          {{>FullscreenButton}}
        </media-control-bar>
      </template>
    </template>

    <template if="audio">
      <template if="streamtype == 'on-demand'">
        <template if="title">
          <media-control-bar part="control-bar top">{{>TitleDisplay}}</media-control-bar>
        </template>
        <media-control-bar part="control-bar bottom">
          {{>PlayButton}}
          <template if="breakpointsm"> {{>SeekBackwardButton}} {{>SeekForwardButton}} </template>
          {{>MuteButton}}
          <template if="breakpointsm">{{>VolumeRange}}</template>
          {{>TimeDisplay}} {{>TimeRange}}
          <template if="breakpointsm">{{>PlaybackRateMenu}}</template>
          {{>AirplayButton}} {{>CastButton}}
        </media-control-bar>
      </template>

      <template if="streamtype == 'live'">
        <template if="title">
          <media-control-bar part="control-bar top">{{>TitleDisplay}}</media-control-bar>
        </template>
        <media-control-bar part="control-bar bottom">
          {{>PlayButton}} {{>LiveButton section="bottom"}} {{>MuteButton}}
          <template if="breakpointsm">
            {{>VolumeRange}}
            <template if="targetlivewindow > 0"> {{>SeekBackwardButton}} {{>SeekForwardButton}} </template>
          </template>
          <template if="targetlivewindow > 0"> {{>TimeDisplay}} {{>TimeRange}} </template>
          <template if="!targetlivewindow"><div class="spacer"></div></template>
          {{>AirplayButton}} {{>CastButton}}
        </media-control-bar>
      </template>
    </template>

    <slot></slot>
  </media-controller>
</template>
`,Ve=C.createElement("template");"innerHTML"in Ve&&(Ve.innerHTML=It);var Dt,Vt,ge$1=class extends MediaThemeElement{};ge$1.template=(Vt=(Dt=Ve.content)==null?void 0:Dt.children)==null?void 0:Vt[0];p$1.customElements.get("media-theme-gerwig")||p$1.customElements.define("media-theme-gerwig",ge$1);var Pa="gerwig",w={SRC:"src",POSTER:"poster"},n={STYLE:"style",DEFAULT_HIDDEN_CAPTIONS:"default-hidden-captions",PRIMARY_COLOR:"primary-color",SECONDARY_COLOR:"secondary-color",ACCENT_COLOR:"accent-color",FORWARD_SEEK_OFFSET:"forward-seek-offset",BACKWARD_SEEK_OFFSET:"backward-seek-offset",PLAYBACK_TOKEN:"playback-token",THUMBNAIL_TOKEN:"thumbnail-token",STORYBOARD_TOKEN:"storyboard-token",DRM_TOKEN:"drm-token",STORYBOARD_SRC:"storyboard-src",THUMBNAIL_TIME:"thumbnail-time",AUDIO:"audio",NOHOTKEYS:"nohotkeys",HOTKEYS:"hotkeys",PLAYBACK_RATES:"playbackrates",DEFAULT_SHOW_REMAINING_TIME:"default-show-remaining-time",DEFAULT_DURATION:"default-duration",TITLE:"title",PLACEHOLDER:"placeholder",THEME:"theme",DEFAULT_STREAM_TYPE:"default-stream-type",TARGET_LIVE_WINDOW:"target-live-window",EXTRA_SOURCE_PARAMS:"extra-source-params",NO_VOLUME_PREF:"no-volume-pref",CAST_RECEIVER:"cast-receiver",NO_TOOLTIPS:"no-tooltips"},Be=["audio","backwardseekoffset","defaultduration","defaultshowremainingtime","defaultsubtitles","noautoseektolive","disabled","exportparts","forwardseekoffset","hideduration","hotkeys","nohotkeys","playbackrates","defaultstreamtype","streamtype","style","targetlivewindow","template","title","novolumepref"];function Ia(mr,hr){var gr;return{src:!mr.playbackId&&mr.src,playbackId:mr.playbackId,hasSrc:!!mr.playbackId||!!mr.src||!!mr.currentSrc,poster:mr.poster,storyboard:mr.storyboard,storyboardSrc:mr.getAttribute(n.STORYBOARD_SRC),placeholder:mr.getAttribute("placeholder"),themeTemplate:Da(mr),thumbnailTime:!mr.tokens.thumbnail&&mr.thumbnailTime,autoplay:mr.autoplay,crossOrigin:mr.crossOrigin,loop:mr.loop,noHotKeys:mr.hasAttribute(n.NOHOTKEYS),hotKeys:mr.getAttribute(n.HOTKEYS),muted:mr.muted,paused:mr.paused,preload:mr.preload,envKey:mr.envKey,preferCmcd:mr.preferCmcd,debug:mr.debug,disableTracking:mr.disableTracking,disableCookies:mr.disableCookies,tokens:mr.tokens,beaconCollectionDomain:mr.beaconCollectionDomain,maxResolution:mr.maxResolution,minResolution:mr.minResolution,programStartTime:mr.programStartTime,programEndTime:mr.programEndTime,assetStartTime:mr.assetStartTime,assetEndTime:mr.assetEndTime,renditionOrder:mr.renditionOrder,metadata:mr.metadata,playerSoftwareName:mr.playerSoftwareName,playerSoftwareVersion:mr.playerSoftwareVersion,startTime:mr.startTime,preferPlayback:mr.preferPlayback,audio:mr.audio,defaultStreamType:mr.defaultStreamType,targetLiveWindow:mr.getAttribute(o.TARGET_LIVE_WINDOW),streamType:Q$1(mr.getAttribute(o.STREAM_TYPE)),primaryColor:mr.getAttribute(n.PRIMARY_COLOR),secondaryColor:mr.getAttribute(n.SECONDARY_COLOR),accentColor:mr.getAttribute(n.ACCENT_COLOR),forwardSeekOffset:mr.forwardSeekOffset,backwardSeekOffset:mr.backwardSeekOffset,defaultHiddenCaptions:mr.defaultHiddenCaptions,defaultDuration:mr.defaultDuration,defaultShowRemainingTime:mr.defaultShowRemainingTime,hideDuration:Va(mr),playbackRates:mr.getAttribute(n.PLAYBACK_RATES),customDomain:(gr=mr.getAttribute(o.CUSTOM_DOMAIN))!=null?gr:void 0,title:mr.getAttribute(n.TITLE),novolumepref:mr.hasAttribute(n.NO_VOLUME_PREF),castReceiver:mr.castReceiver,...hr,extraSourceParams:mr.extraSourceParams}}function Da(mr){var hr,gr;let vr=mr.theme;if(vr){let xr=(gr=(hr=mr.getRootNode())==null?void 0:hr.getElementById)==null?void 0:gr.call(hr,vr);if(xr&&xr instanceof HTMLTemplateElement)return xr;vr.startsWith("media-theme-")||(vr=`media-theme-${vr}`);let Er=p$1.customElements.get(vr);if(Er!=null&&Er.template)return Er.template}}function Va(mr){var hr;let gr=(hr=mr.mediaController)==null?void 0:hr.querySelector("media-time-display");return gr&&getComputedStyle(gr).getPropertyValue("--media-duration-display-display").trim()==="none"}function Ut(mr){let hr=mr.hasAttribute(n.TITLE)?{video_title:mr.getAttribute(n.TITLE)}:{};return mr.getAttributeNames().filter(gr=>gr.startsWith("metadata-")).reduce((gr,vr)=>{let xr=mr.getAttribute(vr);return xr!==null&&(gr[vr.replace(/^metadata-/,"").replace(/-/g,"_")]=xr),gr},hr)}var Ha=Object.values(o),Ka=Object.values(w),Ua=Object.values(n),Ba=ce(),$a="mux-player",Bt={dialog:void 0,isDialogOpen:!1},Fa={redundant_streams:!0},re$1,oe$1,V,ne,F,M,D,ve,$t,se$1,$e,P,$$1,Te,Ft,Ee$1,Yt,Ae,Wt,Ce,Zt,ie$1=class extends Ne$1{constructor(){super(),b(this,M),b(this,ve),b(this,se$1),b(this,P),b(this,Te),b(this,Ee$1),b(this,Ae),b(this,Ce),b(this,re$1,!1),b(this,oe$1,{}),b(this,V,!0),b(this,ne,new me$1(this,"hotkeys")),b(this,F,{...Bt,onCloseErrorDialog:()=>h(this,se$1,$e).call(this,{dialog:void 0,isDialogOpen:!1}),onInitFocusDialog:hr=>{_e(this,C.activeElement)||hr.preventDefault()}}),this.attachShadow({mode:"open"}),h(this,ve,$t).call(this),this.isConnected&&h(this,M,D).call(this)}static get observedAttributes(){var hr;return[...(hr=Ne$1.observedAttributes)!=null?hr:[],...Ka,...Ha,...Ua]}get mediaTheme(){var hr;return(hr=this.shadowRoot)==null?void 0:hr.querySelector("media-theme")}get mediaController(){var hr,gr;return(gr=(hr=this.mediaTheme)==null?void 0:hr.shadowRoot)==null?void 0:gr.querySelector("media-controller")}connectedCallback(){var hr;let gr=(hr=this.shadowRoot)==null?void 0:hr.querySelector("mux-video");gr&&(gr.metadata=Ut(this))}attributeChangedCallback(hr,gr,vr){switch(h(this,M,D).call(this),super.attributeChangedCallback(hr,gr,vr),hr){case n.HOTKEYS:u(this,ne).value=vr;break;case n.THUMBNAIL_TIME:{vr!=null&&this.tokens.thumbnail&&_(E$3("Use of thumbnail-time with thumbnail-token is currently unsupported. Ignore thumbnail-time."));break}case n.THUMBNAIL_TOKEN:{if(vr){let xr=Q$3(vr);if(xr){let{aud:Er}=xr,Cr=oe$3.THUMBNAIL;Er!==Cr&&_(E$3("The {tokenNamePrefix}-token has an incorrect aud value: {aud}. aud value should be {expectedAud}.").format({aud:Er,expectedAud:Cr,tokenNamePrefix:"thumbnail"}))}}break}case n.STORYBOARD_TOKEN:{if(vr){let xr=Q$3(vr);if(xr){let{aud:Er}=xr,Cr=oe$3.STORYBOARD;Er!==Cr&&_(E$3("The {tokenNamePrefix}-token has an incorrect aud value: {aud}. aud value should be {expectedAud}.").format({aud:Er,expectedAud:Cr,tokenNamePrefix:"storyboard"}))}}break}case n.DRM_TOKEN:{if(vr){let xr=Q$3(vr);if(xr){let{aud:Er}=xr,Cr=oe$3.DRM;Er!==Cr&&_(E$3("The {tokenNamePrefix}-token has an incorrect aud value: {aud}. aud value should be {expectedAud}.").format({aud:Er,expectedAud:Cr,tokenNamePrefix:"drm"}))}}break}case o.PLAYBACK_ID:{vr!=null&&vr.includes("?token")&&E$1(E$3("The specificed playback ID {playbackId} contains a token which must be provided via the playback-token attribute.").format({playbackId:vr}));break}case o.STREAM_TYPE:vr&&![D$1.LIVE,D$1.ON_DEMAND,D$1.UNKNOWN].includes(vr)?["ll-live","live:dvr","ll-live:dvr"].includes(this.streamType)?this.targetLiveWindow=vr.includes("dvr")?Number.POSITIVE_INFINITY:0:Me({file:"invalid-stream-type.md",message:E$3("Invalid stream-type value supplied: `{streamType}`. Please provide stream-type as either: `on-demand` or `live`").format({streamType:this.streamType})}):vr===D$1.LIVE?this.getAttribute(n.TARGET_LIVE_WINDOW)==null&&(this.targetLiveWindow=0):this.targetLiveWindow=Number.NaN}[o.PLAYBACK_ID,w.SRC,n.PLAYBACK_TOKEN].includes(hr)&&gr!==vr&&R(this,F,{...u(this,F),...Bt}),h(this,P,$$1).call(this,{[gt(hr)]:vr})}get preferCmcd(){var hr;return(hr=this.getAttribute(o.PREFER_CMCD))!=null?hr:void 0}set preferCmcd(hr){hr!==this.preferCmcd&&(hr?Ut$2.includes(hr)?this.setAttribute(o.PREFER_CMCD,hr):_(`Invalid value for preferCmcd. Must be one of ${Ut$2.join()}`):this.removeAttribute(o.PREFER_CMCD))}get hasPlayed(){var hr,gr;return(gr=(hr=this.mediaController)==null?void 0:hr.hasAttribute(MediaUIAttributes.MEDIA_HAS_PLAYED))!=null?gr:!1}get inLiveWindow(){var hr;return(hr=this.mediaController)==null?void 0:hr.hasAttribute(MediaUIAttributes.MEDIA_TIME_IS_LIVE)}get _hls(){var hr;return(hr=this.media)==null?void 0:hr._hls}get mux(){var hr;return(hr=this.media)==null?void 0:hr.mux}get theme(){var hr;return(hr=this.getAttribute(n.THEME))!=null?hr:Pa}set theme(hr){this.setAttribute(n.THEME,`${hr}`)}get themeProps(){let hr=this.mediaTheme;if(!hr)return;let gr={};for(let vr of hr.getAttributeNames()){if(Be.includes(vr))continue;let xr=hr.getAttribute(vr);gr[ue$1(vr)]=xr===""?!0:xr}return gr}set themeProps(hr){var gr,vr;h(this,M,D).call(this);let xr={...this.themeProps,...hr};for(let Er in xr){if(Be.includes(Er))continue;let Cr=hr?.[Er];typeof Cr=="boolean"||Cr==null?(gr=this.mediaTheme)==null||gr.toggleAttribute(le$1(Er),!!Cr):(vr=this.mediaTheme)==null||vr.setAttribute(le$1(Er),Cr)}}get playbackId(){var hr;return(hr=this.getAttribute(o.PLAYBACK_ID))!=null?hr:void 0}set playbackId(hr){hr?this.setAttribute(o.PLAYBACK_ID,hr):this.removeAttribute(o.PLAYBACK_ID)}get src(){var hr,gr;return this.playbackId?(hr=B$1(this,w.SRC))!=null?hr:void 0:(gr=this.getAttribute(w.SRC))!=null?gr:void 0}set src(hr){hr?this.setAttribute(w.SRC,hr):this.removeAttribute(w.SRC)}get poster(){var hr;let gr=this.getAttribute(w.POSTER);if(gr!=null)return gr;let{tokens:vr}=this;if(vr.playback&&!vr.thumbnail){_("Missing expected thumbnail token. No poster image will be shown");return}if(this.playbackId&&!this.audio)return bt(this.playbackId,{customDomain:this.customDomain,thumbnailTime:(hr=this.thumbnailTime)!=null?hr:this.startTime,programTime:this.programStartTime,token:vr.thumbnail})}set poster(hr){hr||hr===""?this.setAttribute(w.POSTER,hr):this.removeAttribute(w.POSTER)}get storyboardSrc(){var hr;return(hr=this.getAttribute(n.STORYBOARD_SRC))!=null?hr:void 0}set storyboardSrc(hr){hr?this.setAttribute(n.STORYBOARD_SRC,hr):this.removeAttribute(n.STORYBOARD_SRC)}get storyboard(){let{tokens:hr}=this;if(this.storyboardSrc&&!hr.storyboard)return this.storyboardSrc;if(!(this.audio||!this.playbackId||!this.streamType||[D$1.LIVE,D$1.UNKNOWN].includes(this.streamType)||hr.playback&&!hr.storyboard))return ht(this.playbackId,{customDomain:this.customDomain,token:hr.storyboard,programStartTime:this.programStartTime,programEndTime:this.programEndTime})}get audio(){return this.hasAttribute(n.AUDIO)}set audio(hr){if(!hr){this.removeAttribute(n.AUDIO);return}this.setAttribute(n.AUDIO,"")}get hotkeys(){return u(this,ne)}get nohotkeys(){return this.hasAttribute(n.NOHOTKEYS)}set nohotkeys(hr){if(!hr){this.removeAttribute(n.NOHOTKEYS);return}this.setAttribute(n.NOHOTKEYS,"")}get thumbnailTime(){return T(this.getAttribute(n.THUMBNAIL_TIME))}set thumbnailTime(hr){this.setAttribute(n.THUMBNAIL_TIME,`${hr}`)}get title(){var hr;return(hr=this.getAttribute(n.TITLE))!=null?hr:""}set title(hr){hr!==this.title&&(hr?this.setAttribute(n.TITLE,hr):this.removeAttribute("title"),super.title=hr)}get placeholder(){var hr;return(hr=B$1(this,n.PLACEHOLDER))!=null?hr:""}set placeholder(hr){this.setAttribute(n.PLACEHOLDER,`${hr}`)}get primaryColor(){var hr,gr;let vr=this.getAttribute(n.PRIMARY_COLOR);if(vr!=null||this.mediaTheme&&(vr=(gr=(hr=p$1.getComputedStyle(this.mediaTheme))==null?void 0:hr.getPropertyValue("--_primary-color"))==null?void 0:gr.trim(),vr))return vr}set primaryColor(hr){this.setAttribute(n.PRIMARY_COLOR,`${hr}`)}get secondaryColor(){var hr,gr;let vr=this.getAttribute(n.SECONDARY_COLOR);if(vr!=null||this.mediaTheme&&(vr=(gr=(hr=p$1.getComputedStyle(this.mediaTheme))==null?void 0:hr.getPropertyValue("--_secondary-color"))==null?void 0:gr.trim(),vr))return vr}set secondaryColor(hr){this.setAttribute(n.SECONDARY_COLOR,`${hr}`)}get accentColor(){var hr,gr;let vr=this.getAttribute(n.ACCENT_COLOR);if(vr!=null||this.mediaTheme&&(vr=(gr=(hr=p$1.getComputedStyle(this.mediaTheme))==null?void 0:hr.getPropertyValue("--_accent-color"))==null?void 0:gr.trim(),vr))return vr}set accentColor(hr){this.setAttribute(n.ACCENT_COLOR,`${hr}`)}get defaultShowRemainingTime(){return this.hasAttribute(n.DEFAULT_SHOW_REMAINING_TIME)}set defaultShowRemainingTime(hr){hr?this.setAttribute(n.DEFAULT_SHOW_REMAINING_TIME,""):this.removeAttribute(n.DEFAULT_SHOW_REMAINING_TIME)}get playbackRates(){if(this.hasAttribute(n.PLAYBACK_RATES))return this.getAttribute(n.PLAYBACK_RATES).trim().split(/\s*,?\s+/).map(hr=>Number(hr)).filter(hr=>!Number.isNaN(hr)).sort((hr,gr)=>hr-gr)}set playbackRates(hr){if(!hr){this.removeAttribute(n.PLAYBACK_RATES);return}this.setAttribute(n.PLAYBACK_RATES,hr.join(" "))}get forwardSeekOffset(){var hr;return(hr=T(this.getAttribute(n.FORWARD_SEEK_OFFSET)))!=null?hr:10}set forwardSeekOffset(hr){this.setAttribute(n.FORWARD_SEEK_OFFSET,`${hr}`)}get backwardSeekOffset(){var hr;return(hr=T(this.getAttribute(n.BACKWARD_SEEK_OFFSET)))!=null?hr:10}set backwardSeekOffset(hr){this.setAttribute(n.BACKWARD_SEEK_OFFSET,`${hr}`)}get defaultHiddenCaptions(){return this.hasAttribute(n.DEFAULT_HIDDEN_CAPTIONS)}set defaultHiddenCaptions(hr){hr?this.setAttribute(n.DEFAULT_HIDDEN_CAPTIONS,""):this.removeAttribute(n.DEFAULT_HIDDEN_CAPTIONS)}get defaultDuration(){return T(this.getAttribute(n.DEFAULT_DURATION))}set defaultDuration(hr){hr==null?this.removeAttribute(n.DEFAULT_DURATION):this.setAttribute(n.DEFAULT_DURATION,`${hr}`)}get playerSoftwareName(){var hr;return(hr=this.getAttribute(o.PLAYER_SOFTWARE_NAME))!=null?hr:$a}get playerSoftwareVersion(){var hr;return(hr=this.getAttribute(o.PLAYER_SOFTWARE_VERSION))!=null?hr:Ba}get beaconCollectionDomain(){var hr;return(hr=this.getAttribute(o.BEACON_COLLECTION_DOMAIN))!=null?hr:void 0}set beaconCollectionDomain(hr){hr!==this.beaconCollectionDomain&&(hr?this.setAttribute(o.BEACON_COLLECTION_DOMAIN,hr):this.removeAttribute(o.BEACON_COLLECTION_DOMAIN))}get maxResolution(){var hr;return(hr=this.getAttribute(o.MAX_RESOLUTION))!=null?hr:void 0}set maxResolution(hr){hr!==this.maxResolution&&(hr?this.setAttribute(o.MAX_RESOLUTION,hr):this.removeAttribute(o.MAX_RESOLUTION))}get minResolution(){var hr;return(hr=this.getAttribute(o.MIN_RESOLUTION))!=null?hr:void 0}set minResolution(hr){hr!==this.minResolution&&(hr?this.setAttribute(o.MIN_RESOLUTION,hr):this.removeAttribute(o.MIN_RESOLUTION))}get renditionOrder(){var hr;return(hr=this.getAttribute(o.RENDITION_ORDER))!=null?hr:void 0}set renditionOrder(hr){hr!==this.renditionOrder&&(hr?this.setAttribute(o.RENDITION_ORDER,hr):this.removeAttribute(o.RENDITION_ORDER))}get programStartTime(){return T(this.getAttribute(o.PROGRAM_START_TIME))}set programStartTime(hr){hr==null?this.removeAttribute(o.PROGRAM_START_TIME):this.setAttribute(o.PROGRAM_START_TIME,`${hr}`)}get programEndTime(){return T(this.getAttribute(o.PROGRAM_END_TIME))}set programEndTime(hr){hr==null?this.removeAttribute(o.PROGRAM_END_TIME):this.setAttribute(o.PROGRAM_END_TIME,`${hr}`)}get assetStartTime(){return T(this.getAttribute(o.ASSET_START_TIME))}set assetStartTime(hr){hr==null?this.removeAttribute(o.ASSET_START_TIME):this.setAttribute(o.ASSET_START_TIME,`${hr}`)}get assetEndTime(){return T(this.getAttribute(o.ASSET_END_TIME))}set assetEndTime(hr){hr==null?this.removeAttribute(o.ASSET_END_TIME):this.setAttribute(o.ASSET_END_TIME,`${hr}`)}get extraSourceParams(){return this.hasAttribute(n.EXTRA_SOURCE_PARAMS)?[...new URLSearchParams(this.getAttribute(n.EXTRA_SOURCE_PARAMS)).entries()].reduce((hr,[gr,vr])=>(hr[gr]=vr,hr),{}):Fa}set extraSourceParams(hr){hr==null?this.removeAttribute(n.EXTRA_SOURCE_PARAMS):this.setAttribute(n.EXTRA_SOURCE_PARAMS,new URLSearchParams(hr).toString())}get customDomain(){var hr;return(hr=this.getAttribute(o.CUSTOM_DOMAIN))!=null?hr:void 0}set customDomain(hr){hr!==this.customDomain&&(hr?this.setAttribute(o.CUSTOM_DOMAIN,hr):this.removeAttribute(o.CUSTOM_DOMAIN))}get envKey(){var hr;return(hr=B$1(this,o.ENV_KEY))!=null?hr:void 0}set envKey(hr){this.setAttribute(o.ENV_KEY,`${hr}`)}get noVolumePref(){return this.hasAttribute(n.NO_VOLUME_PREF)}set noVolumePref(hr){hr?this.setAttribute(n.NO_VOLUME_PREF,""):this.removeAttribute(n.NO_VOLUME_PREF)}get debug(){return B$1(this,o.DEBUG)!=null}set debug(hr){hr?this.setAttribute(o.DEBUG,""):this.removeAttribute(o.DEBUG)}get disableTracking(){return B$1(this,o.DISABLE_TRACKING)!=null}set disableTracking(hr){this.toggleAttribute(o.DISABLE_TRACKING,!!hr)}get disableCookies(){return B$1(this,o.DISABLE_COOKIES)!=null}set disableCookies(hr){hr?this.setAttribute(o.DISABLE_COOKIES,""):this.removeAttribute(o.DISABLE_COOKIES)}get streamType(){var hr,gr,vr;return(vr=(gr=this.getAttribute(o.STREAM_TYPE))!=null?gr:(hr=this.media)==null?void 0:hr.streamType)!=null?vr:D$1.UNKNOWN}set streamType(hr){this.setAttribute(o.STREAM_TYPE,`${hr}`)}get defaultStreamType(){var hr,gr,vr;return(vr=(gr=this.getAttribute(n.DEFAULT_STREAM_TYPE))!=null?gr:(hr=this.mediaController)==null?void 0:hr.getAttribute(n.DEFAULT_STREAM_TYPE))!=null?vr:D$1.ON_DEMAND}set defaultStreamType(hr){hr?this.setAttribute(n.DEFAULT_STREAM_TYPE,hr):this.removeAttribute(n.DEFAULT_STREAM_TYPE)}get targetLiveWindow(){var hr,gr;return this.hasAttribute(n.TARGET_LIVE_WINDOW)?+this.getAttribute(n.TARGET_LIVE_WINDOW):(gr=(hr=this.media)==null?void 0:hr.targetLiveWindow)!=null?gr:Number.NaN}set targetLiveWindow(hr){hr==this.targetLiveWindow||Number.isNaN(hr)&&Number.isNaN(this.targetLiveWindow)||(hr==null?this.removeAttribute(n.TARGET_LIVE_WINDOW):this.setAttribute(n.TARGET_LIVE_WINDOW,`${+hr}`))}get liveEdgeStart(){var hr;return(hr=this.media)==null?void 0:hr.liveEdgeStart}get startTime(){return T(B$1(this,o.START_TIME))}set startTime(hr){this.setAttribute(o.START_TIME,`${hr}`)}get preferPlayback(){let hr=this.getAttribute(o.PREFER_PLAYBACK);if(hr===q$1.MSE||hr===q$1.NATIVE)return hr}set preferPlayback(hr){hr!==this.preferPlayback&&(hr===q$1.MSE||hr===q$1.NATIVE?this.setAttribute(o.PREFER_PLAYBACK,hr):this.removeAttribute(o.PREFER_PLAYBACK))}get metadata(){var hr;return(hr=this.media)==null?void 0:hr.metadata}set metadata(hr){if(h(this,M,D).call(this),!this.media){E$1("underlying media element missing when trying to set metadata. metadata will not be set.");return}this.media.metadata={...Ut(this),...hr}}get _hlsConfig(){var hr;return(hr=this.media)==null?void 0:hr._hlsConfig}set _hlsConfig(hr){if(h(this,M,D).call(this),!this.media){E$1("underlying media element missing when trying to set _hlsConfig. _hlsConfig will not be set.");return}this.media._hlsConfig=hr}async addCuePoints(hr){var gr;if(h(this,M,D).call(this),!this.media){E$1("underlying media element missing when trying to addCuePoints. cuePoints will not be added.");return}return(gr=this.media)==null?void 0:gr.addCuePoints(hr)}get activeCuePoint(){var hr;return(hr=this.media)==null?void 0:hr.activeCuePoint}get cuePoints(){var hr,gr;return(gr=(hr=this.media)==null?void 0:hr.cuePoints)!=null?gr:[]}addChapters(hr){var gr;if(h(this,M,D).call(this),!this.media){E$1("underlying media element missing when trying to addChapters. chapters will not be added.");return}return(gr=this.media)==null?void 0:gr.addChapters(hr)}get activeChapter(){var hr;return(hr=this.media)==null?void 0:hr.activeChapter}get chapters(){var hr,gr;return(gr=(hr=this.media)==null?void 0:hr.chapters)!=null?gr:[]}getStartDate(){var hr;return(hr=this.media)==null?void 0:hr.getStartDate()}get currentPdt(){var hr;return(hr=this.media)==null?void 0:hr.currentPdt}get tokens(){let hr=this.getAttribute(n.PLAYBACK_TOKEN),gr=this.getAttribute(n.DRM_TOKEN),vr=this.getAttribute(n.THUMBNAIL_TOKEN),xr=this.getAttribute(n.STORYBOARD_TOKEN);return{...u(this,oe$1),...hr!=null?{playback:hr}:{},...gr!=null?{drm:gr}:{},...vr!=null?{thumbnail:vr}:{},...xr!=null?{storyboard:xr}:{}}}set tokens(hr){R(this,oe$1,hr??{})}get playbackToken(){var hr;return(hr=this.getAttribute(n.PLAYBACK_TOKEN))!=null?hr:void 0}set playbackToken(hr){this.setAttribute(n.PLAYBACK_TOKEN,`${hr}`)}get drmToken(){var hr;return(hr=this.getAttribute(n.DRM_TOKEN))!=null?hr:void 0}set drmToken(hr){this.setAttribute(n.DRM_TOKEN,`${hr}`)}get thumbnailToken(){var hr;return(hr=this.getAttribute(n.THUMBNAIL_TOKEN))!=null?hr:void 0}set thumbnailToken(hr){this.setAttribute(n.THUMBNAIL_TOKEN,`${hr}`)}get storyboardToken(){var hr;return(hr=this.getAttribute(n.STORYBOARD_TOKEN))!=null?hr:void 0}set storyboardToken(hr){this.setAttribute(n.STORYBOARD_TOKEN,`${hr}`)}addTextTrack(hr,gr,vr,xr){var Er;let Cr=(Er=this.media)==null?void 0:Er.nativeEl;if(Cr)return te$2(Cr,hr,gr,vr,xr)}removeTextTrack(hr){var gr;let vr=(gr=this.media)==null?void 0:gr.nativeEl;if(vr)return Ze$1(vr,hr)}get textTracks(){var hr;return(hr=this.media)==null?void 0:hr.textTracks}get castReceiver(){var hr;return(hr=this.getAttribute(n.CAST_RECEIVER))!=null?hr:void 0}set castReceiver(hr){hr!==this.castReceiver&&(hr?this.setAttribute(n.CAST_RECEIVER,hr):this.removeAttribute(n.CAST_RECEIVER))}get castCustomData(){var hr;return(hr=this.media)==null?void 0:hr.castCustomData}set castCustomData(hr){if(!this.media){E$1("underlying media element missing when trying to set castCustomData. castCustomData will not be set.");return}this.media.castCustomData=hr}get noTooltips(){return this.hasAttribute(n.NO_TOOLTIPS)}set noTooltips(hr){if(!hr){this.removeAttribute(n.NO_TOOLTIPS);return}this.setAttribute(n.NO_TOOLTIPS,"")}};re$1=new WeakMap,oe$1=new WeakMap,V=new WeakMap,ne=new WeakMap,F=new WeakMap,M=new WeakSet,D=function(){var mr,hr,gr,vr;if(!u(this,re$1)){R(this,re$1,!0),h(this,P,$$1).call(this);try{if(customElements.upgrade(this.mediaTheme),!(this.mediaTheme instanceof p$1.HTMLElement))throw""}catch{E$1("<media-theme> failed to upgrade!")}try{if(customElements.upgrade(this.media),!(this.media instanceof Cs))throw""}catch{E$1("<mux-video> failed to upgrade!")}try{if(customElements.upgrade(this.mediaController),!(this.mediaController instanceof media_controller_default))throw""}catch{E$1("<media-controller> failed to upgrade!")}this.init(),h(this,Te,Ft).call(this),h(this,Ee$1,Yt).call(this),h(this,Ae,Wt).call(this),R(this,V,(hr=(mr=this.mediaController)==null?void 0:mr.hasAttribute(Attributes$e.USER_INACTIVE))!=null?hr:!0),h(this,Ce,Zt).call(this),(gr=this.media)==null||gr.addEventListener("streamtypechange",()=>h(this,P,$$1).call(this)),(vr=this.media)==null||vr.addEventListener("loadstart",()=>h(this,P,$$1).call(this))}},ve=new WeakSet,$t=function(){var mr,hr;try{(mr=window?.CSS)==null||mr.registerProperty({name:"--media-primary-color",syntax:"<color>",inherits:!0}),(hr=window?.CSS)==null||hr.registerProperty({name:"--media-secondary-color",syntax:"<color>",inherits:!0})}catch{}},se$1=new WeakSet,$e=function(mr){Object.assign(u(this,F),mr),h(this,P,$$1).call(this)},P=new WeakSet,$$1=function(mr={}){Lt(St(Ia(this,{...u(this,F),...mr})),this.shadowRoot)},Te=new WeakSet,Ft=function(){let mr=hr=>{var gr,vr;if(!(hr!=null&&hr.startsWith("theme-")))return;let xr=hr.replace(/^theme-/,"");if(Be.includes(xr))return;let Er=this.getAttribute(hr);Er!=null?(gr=this.mediaTheme)==null||gr.setAttribute(xr,Er):(vr=this.mediaTheme)==null||vr.removeAttribute(xr)};new MutationObserver(hr=>{for(let{attributeName:gr}of hr)mr(gr)}).observe(this,{attributes:!0}),this.getAttributeNames().forEach(mr)},Ee$1=new WeakSet,Yt=function(){var mr;let hr=gr=>{let{detail:vr}=gr;if(vr instanceof T$1||(vr=new T$1(vr.message,vr.code,vr.fatal)),!(vr!=null&&vr.fatal)){_(vr),vr.data&&_(`${vr.name} data:`,vr.data);return}let{dialog:xr,devlog:Er}=De(vr,!1);Er.message&&Me(Er),E$1(vr),vr.data&&E$1(`${vr.name} data:`,vr.data),h(this,se$1,$e).call(this,{isDialogOpen:!0,dialog:xr})};this.addEventListener("error",hr),this.media&&(this.media.errorTranslator=(gr={})=>{var vr,xr,Er;if(!(((vr=this.media)==null?void 0:vr.error)instanceof T$1))return gr;let{devlog:Cr}=De((xr=this.media)==null?void 0:xr.error,!1);return{player_error_code:(Er=this.media)==null?void 0:Er.error.code,player_error_message:Cr.message?String(Cr.message):gr.player_error_message,player_error_context:Cr.context?String(Cr.context):gr.player_error_context}}),(mr=this.media)==null||mr.addEventListener("error",gr=>{var vr,xr;let{detail:Er}=gr;if(!Er){let{message:Cr,code:wr}=(xr=(vr=this.media)==null?void 0:vr.error)!=null?xr:{};Er=new T$1(Cr,wr)}Er!=null&&Er.fatal&&this.dispatchEvent(new CustomEvent("error",{detail:Er}))})},Ae=new WeakSet,Wt=function(){var mr,hr,gr,vr;let xr=()=>h(this,P,$$1).call(this);(hr=(mr=this.media)==null?void 0:mr.textTracks)==null||hr.addEventListener("addtrack",xr),(vr=(gr=this.media)==null?void 0:gr.textTracks)==null||vr.addEventListener("removetrack",xr)},Ce=new WeakSet,Zt=function(){var mr,hr;if(!/Firefox/i.test(navigator.userAgent))return;let gr,vr=new WeakMap,xr=()=>this.streamType===D$1.LIVE&&!this.secondaryColor&&this.offsetWidth>=800,Er=(Rr,kr,Dr=!1)=>{xr()||Array.from(Rr&&Rr.activeCues||[]).forEach(Br=>{if(!(!Br.snapToLines||Br.line<-5||Br.line>=0&&Br.line<10))if(!kr||this.paused){let Hr=Br.text.split(`
`).length,Gr=-3;this.streamType===D$1.LIVE&&(Gr=-2);let qr=Gr-Hr;if(Br.line===qr&&!Dr)return;vr.has(Br)||vr.set(Br,Br.line),Br.line=qr}else setTimeout(()=>{Br.line=vr.get(Br)||"auto"},500)})},Cr=()=>{var Rr,kr;Er(gr,(kr=(Rr=this.mediaController)==null?void 0:Rr.hasAttribute(Attributes$e.USER_INACTIVE))!=null?kr:!1)},wr=()=>{var Rr,kr;let Dr=Array.from(((kr=(Rr=this.mediaController)==null?void 0:Rr.media)==null?void 0:kr.textTracks)||[]).filter(Br=>["subtitles","captions"].includes(Br.kind)&&Br.mode==="showing")[0];Dr!==gr&&gr?.removeEventListener("cuechange",Cr),gr=Dr,gr?.addEventListener("cuechange",Cr),Er(gr,u(this,V))};wr(),(mr=this.textTracks)==null||mr.addEventListener("change",wr),(hr=this.textTracks)==null||hr.addEventListener("addtrack",wr),this.addEventListener("userinactivechange",()=>{var Rr,kr;let Dr=(kr=(Rr=this.mediaController)==null?void 0:Rr.hasAttribute(Attributes$e.USER_INACTIVE))!=null?kr:!0;u(this,V)!==Dr&&(R(this,V,Dr),Er(gr,u(this,V)))})};function B$1(mr,hr){return mr.media?mr.media.getAttribute(hr):mr.getAttribute(hr)}p$1.customElements.get("mux-player")||(p$1.customElements.define("mux-player",ie$1),p$1.MuxPlayerElement=ie$1);var d={className:"class",classname:"class",htmlFor:"for",crossOrigin:"crossorigin",viewBox:"viewBox",playsInline:"playsinline",autoPlay:"autoplay",playbackRate:"playbackrate"},$=mr=>mr==null,Q=(mr,hr)=>$(hr)?!1:mr in hr,X=mr=>mr.replace(/[A-Z]/g,hr=>`-${hr.toLowerCase()}`),B=(mr,hr)=>{if(!(typeof hr=="boolean"&&!hr)){if(Q(mr,d))return d[mr];if(typeof hr!=null)return/[A-Z]/.test(mr)?X(mr):mr}},ee=(mr,hr)=>typeof mr=="boolean"?"":mr,p=(mr={})=>Object.entries(mr).reduce((hr,[gr,vr])=>{let xr=B(gr,vr);if(!xr)return hr;let Er=ee(vr);return hr[xr]=Er,hr},{}),m=(...mr)=>{let hr=reactExports.useRef(null);return reactExports.useEffect(()=>{mr.forEach(gr=>{gr&&(typeof gr=="function"?gr(hr.current):gr.current=hr.current)})},[mr]),hr},re=Object.prototype.hasOwnProperty,oe=(mr,hr)=>{if(Object.is(mr,hr))return!0;if(typeof mr!="object"||mr===null||typeof hr!="object"||hr===null)return!1;if(Array.isArray(mr))return!Array.isArray(hr)||mr.length!==hr.length?!1:mr.some((xr,Er)=>hr[Er]===xr);let gr=Object.keys(mr),vr=Object.keys(hr);if(gr.length!==vr.length)return!1;for(let xr=0;xr<gr.length;xr++)if(!re.call(hr,gr[xr])||!Object.is(mr[gr[xr]],hr[gr[xr]]))return!1;return!0},c=(mr,hr,gr)=>!oe(hr,mr[gr]),ie=(mr,hr,gr)=>{mr[gr]=hr},se=(mr,hr,gr,vr=ie,xr=c)=>reactExports.useEffect(()=>{let Er=gr?.current;Er&&xr(Er,hr,mr)&&vr(Er,hr,mr)},[gr?.current,hr]),i=se,le=()=>{try{return"3.1.0"}catch{}return"UNKNOWN"},ue=le(),E=()=>ue,de=$jFibJ$react.forwardRef(({children:mr,...hr},gr)=>$jFibJ$react.createElement("mux-player",p({...hr,ref:gr}),mr)),a=(mr,hr,gr)=>reactExports.useEffect(()=>{let vr=hr?.current;if(!(!vr||!gr))return vr.addEventListener(mr,gr),()=>{vr.removeEventListener(mr,gr)}},[hr?.current,gr]),pe=(mr,hr)=>{let{onAbort:gr,onCanPlay:vr,onCanPlayThrough:xr,onEmptied:Er,onLoadStart:Cr,onLoadedData:wr,onLoadedMetadata:Rr,onProgress:kr,onDurationChange:Dr,onVolumeChange:Br,onRateChange:Hr,onResize:Gr,onWaiting:qr,onPlay:zr,onPlaying:Qr,onTimeUpdate:sn,onPause:hn,onSeeking:vn,onSeeked:yn,onStalled:gn,onSuspend:bn,onEnded:xn,onError:$n,onCuePointChange:Sn,onCuePointsChange:Cn,onChapterChange:Rn,metadata:Bn,tokens:Fn,paused:Hn,playbackId:Gn,playbackRates:qn,currentTime:On,themeProps:wn,extraSourceParams:_n,castCustomData:Tn,_hlsConfig:Mn,...Ln}=hr;return i("playbackRates",qn,mr),i("metadata",Bn,mr),i("extraSourceParams",_n,mr),i("_hlsConfig",Mn,mr),i("themeProps",wn,mr),i("tokens",Fn,mr),i("playbackId",Gn,mr),i("castCustomData",Tn,mr),i("paused",Hn,mr,(jn,Kn)=>{Kn!=null&&(Kn?jn.pause():jn.play())},(jn,Kn,Nn)=>jn.hasAttribute("autoplay")&&!jn.hasPlayed?!1:c(jn,Kn,Nn)),i("currentTime",On,mr,(jn,Kn)=>{Kn!=null&&(jn.currentTime=Kn)}),a("abort",mr,gr),a("canplay",mr,vr),a("canplaythrough",mr,xr),a("emptied",mr,Er),a("loadstart",mr,Cr),a("loadeddata",mr,wr),a("loadedmetadata",mr,Rr),a("progress",mr,kr),a("durationchange",mr,Dr),a("volumechange",mr,Br),a("ratechange",mr,Hr),a("resize",mr,Gr),a("waiting",mr,qr),a("play",mr,zr),a("playing",mr,Qr),a("timeupdate",mr,sn),a("pause",mr,hn),a("seeking",mr,vn),a("seeked",mr,yn),a("stalled",mr,gn),a("suspend",mr,bn),a("ended",mr,xn),a("error",mr,$n),a("cuepointchange",mr,Sn),a("cuepointschange",mr,Cn),a("chapterchange",mr,Rn),[Ln]},me=E(),Ee="mux-player-react",ge=$jFibJ$react.forwardRef((mr,hr)=>{let gr=reactExports.useRef(null),vr=m(gr,hr),[xr]=pe(gr,mr);return $jFibJ$react.createElement(de,{ref:vr,playerSoftwareName:Ee,playerSoftwareVersion:me,...xr})}),Ne=ge,baseKeys=_baseKeys,getTag=_getTag,isArguments=isArguments_1,isArray=isArray_1,isArrayLike=isArrayLike_1,isBuffer=isBufferExports,isPrototype=_isPrototype,isTypedArray=isTypedArray_1,mapTag="[object Map]",setTag="[object Set]",objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;function isEmpty(mr){if(mr==null)return!0;if(isArrayLike(mr)&&(isArray(mr)||typeof mr=="string"||typeof mr.splice=="function"||isBuffer(mr)||isTypedArray(mr)||isArguments(mr)))return!mr.length;var hr=getTag(mr);if(hr==mapTag||hr==setTag)return!mr.size;if(isPrototype(mr))return!baseKeys(mr).length;for(var gr in mr)if(hasOwnProperty.call(mr,gr))return!1;return!0}var isEmpty_1=isEmpty;const isEmpty$1=getDefaultExportFromCjs$1(isEmpty_1),DndContext=reactExports.createContext({dragDropManager:void 0});function invariant(mr,hr,...gr){if(isProduction()&&hr===void 0)throw new Error("invariant requires an error message argument");if(!mr){let vr;if(hr===void 0)vr=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let xr=0;vr=new Error(hr.replace(/%s/g,function(){return gr[xr++]})),vr.name="Invariant Violation"}throw vr.framesToPop=1,vr}}function isProduction(){return typeof process<"u"&&!0}var fastDeepEqual=function mr(hr,gr){if(hr===gr)return!0;if(hr&&gr&&typeof hr=="object"&&typeof gr=="object"){if(hr.constructor!==gr.constructor)return!1;var vr,xr,Er;if(Array.isArray(hr)){if(vr=hr.length,vr!=gr.length)return!1;for(xr=vr;xr--!==0;)if(!mr(hr[xr],gr[xr]))return!1;return!0}if(hr.constructor===RegExp)return hr.source===gr.source&&hr.flags===gr.flags;if(hr.valueOf!==Object.prototype.valueOf)return hr.valueOf()===gr.valueOf();if(hr.toString!==Object.prototype.toString)return hr.toString()===gr.toString();if(Er=Object.keys(hr),vr=Er.length,vr!==Object.keys(gr).length)return!1;for(xr=vr;xr--!==0;)if(!Object.prototype.hasOwnProperty.call(gr,Er[xr]))return!1;for(xr=vr;xr--!==0;){var Cr=Er[xr];if(!mr(hr[Cr],gr[Cr]))return!1}return!0}return hr!==hr&&gr!==gr};const equal=getDefaultExportFromCjs$1(fastDeepEqual),useIsomorphicLayoutEffect=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function useCollector(mr,hr,gr){const[vr,xr]=reactExports.useState(()=>hr(mr)),Er=reactExports.useCallback(()=>{const Cr=hr(mr);equal(vr,Cr)||(xr(Cr),gr&&gr())},[vr,mr,gr]);return useIsomorphicLayoutEffect(Er),[vr,Er]}function useMonitorOutput(mr,hr,gr){const[vr,xr]=useCollector(mr,hr,gr);return useIsomorphicLayoutEffect(function(){const Cr=mr.getHandlerId();if(Cr!=null)return mr.subscribeToStateChange(xr,{handlerIds:[Cr]})},[mr,xr]),vr}function useCollectedProps(mr,hr,gr){return useMonitorOutput(hr,mr||(()=>({})),()=>gr.reconnect())}function useOptionalFactory(mr,hr){const gr=[];return typeof mr!="function"&&gr.push(mr),reactExports.useMemo(()=>typeof mr=="function"?mr():mr,gr)}function useConnectDragSource(mr){return reactExports.useMemo(()=>mr.hooks.dragSource(),[mr])}function useConnectDragPreview(mr){return reactExports.useMemo(()=>mr.hooks.dragPreview(),[mr])}let isCallingCanDrag=!1,isCallingIsDragging=!1;class DragSourceMonitorImpl{receiveHandlerId(hr){this.sourceId=hr}getHandlerId(){return this.sourceId}canDrag(){invariant(!isCallingCanDrag,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return isCallingCanDrag=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{isCallingCanDrag=!1}}isDragging(){if(!this.sourceId)return!1;invariant(!isCallingIsDragging,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return isCallingIsDragging=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{isCallingIsDragging=!1}}subscribeToStateChange(hr,gr){return this.internalMonitor.subscribeToStateChange(hr,gr)}isDraggingSource(hr){return this.internalMonitor.isDraggingSource(hr)}isOverTarget(hr,gr){return this.internalMonitor.isOverTarget(hr,gr)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(hr){return this.internalMonitor.subscribeToOffsetChange(hr)}canDragSource(hr){return this.internalMonitor.canDragSource(hr)}canDropOnTarget(hr){return this.internalMonitor.canDropOnTarget(hr)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(hr){this.sourceId=null,this.internalMonitor=hr.getMonitor()}}let isCallingCanDrop=!1;class DropTargetMonitorImpl{receiveHandlerId(hr){this.targetId=hr}getHandlerId(){return this.targetId}subscribeToStateChange(hr,gr){return this.internalMonitor.subscribeToStateChange(hr,gr)}canDrop(){if(!this.targetId)return!1;invariant(!isCallingCanDrop,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return isCallingCanDrop=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{isCallingCanDrop=!1}}isOver(hr){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,hr):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(hr){this.targetId=null,this.internalMonitor=hr.getMonitor()}}function registerTarget(mr,hr,gr){const vr=gr.getRegistry(),xr=vr.addTarget(mr,hr);return[xr,()=>vr.removeTarget(xr)]}function registerSource(mr,hr,gr){const vr=gr.getRegistry(),xr=vr.addSource(mr,hr);return[xr,()=>vr.removeSource(xr)]}function shallowEqual(mr,hr,gr,vr){let xr;if(xr!==void 0)return!!xr;if(mr===hr)return!0;if(typeof mr!="object"||!mr||typeof hr!="object"||!hr)return!1;const Er=Object.keys(mr),Cr=Object.keys(hr);if(Er.length!==Cr.length)return!1;const wr=Object.prototype.hasOwnProperty.bind(hr);for(let Rr=0;Rr<Er.length;Rr++){const kr=Er[Rr];if(!wr(kr))return!1;const Dr=mr[kr],Br=hr[kr];if(xr=void 0,xr===!1||xr===void 0&&Dr!==Br)return!1}return!0}function isRef(mr){return mr!==null&&typeof mr=="object"&&Object.prototype.hasOwnProperty.call(mr,"current")}function throwIfCompositeComponentElement(mr){if(typeof mr.type=="string")return;const hr=mr.type.displayName||mr.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${hr} into a <div>, or turn it into a drag source or a drop target itself.`)}function wrapHookToRecognizeElement(mr){return(hr=null,gr=null)=>{if(!reactExports.isValidElement(hr)){const Er=hr;return mr(Er,gr),Er}const vr=hr;return throwIfCompositeComponentElement(vr),cloneWithRef(vr,gr?Er=>mr(Er,gr):mr)}}function wrapConnectorHooks(mr){const hr={};return Object.keys(mr).forEach(gr=>{const vr=mr[gr];if(gr.endsWith("Ref"))hr[gr]=mr[gr];else{const xr=wrapHookToRecognizeElement(vr);hr[gr]=()=>xr}}),hr}function setRef(mr,hr){typeof mr=="function"?mr(hr):mr.current=hr}function cloneWithRef(mr,hr){const gr=mr.ref;return invariant(typeof gr!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),gr?reactExports.cloneElement(mr,{ref:vr=>{setRef(gr,vr),setRef(hr,vr)}}):reactExports.cloneElement(mr,{ref:hr})}class SourceConnector{receiveHandlerId(hr){this.handlerId!==hr&&(this.handlerId=hr,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(hr){this.dragSourceOptionsInternal=hr}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(hr){this.dragPreviewOptionsInternal=hr}reconnect(){const hr=this.reconnectDragSource();this.reconnectDragPreview(hr)}reconnectDragSource(){const hr=this.dragSource,gr=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return gr&&this.disconnectDragSource(),this.handlerId?hr?(gr&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=hr,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,hr,this.dragSourceOptions)),gr):(this.lastConnectedDragSource=hr,gr):gr}reconnectDragPreview(hr=!1){const gr=this.dragPreview,vr=hr||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(vr&&this.disconnectDragPreview(),!!this.handlerId){if(!gr){this.lastConnectedDragPreview=gr;return}vr&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=gr,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,gr,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!shallowEqual(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!shallowEqual(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(hr){this.hooks=wrapConnectorHooks({dragSource:(gr,vr)=>{this.clearDragSource(),this.dragSourceOptions=vr||null,isRef(gr)?this.dragSourceRef=gr:this.dragSourceNode=gr,this.reconnectDragSource()},dragPreview:(gr,vr)=>{this.clearDragPreview(),this.dragPreviewOptions=vr||null,isRef(gr)?this.dragPreviewRef=gr:this.dragPreviewNode=gr,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=hr}}class TargetConnector{get connectTarget(){return this.dropTarget}reconnect(){const hr=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();hr&&this.disconnectDropTarget();const gr=this.dropTarget;if(this.handlerId){if(!gr){this.lastConnectedDropTarget=gr;return}hr&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=gr,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,gr,this.dropTargetOptions))}}receiveHandlerId(hr){hr!==this.handlerId&&(this.handlerId=hr,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(hr){this.dropTargetOptionsInternal=hr}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!shallowEqual(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(hr){this.hooks=wrapConnectorHooks({dropTarget:(gr,vr)=>{this.clearDropTarget(),this.dropTargetOptions=vr,isRef(gr)?this.dropTargetRef=gr:this.dropTargetNode=gr,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=hr}}function useDragDropManager(){const{dragDropManager:mr}=reactExports.useContext(DndContext);return invariant(mr!=null,"Expected drag drop context"),mr}function useDragSourceConnector(mr,hr){const gr=useDragDropManager(),vr=reactExports.useMemo(()=>new SourceConnector(gr.getBackend()),[gr]);return useIsomorphicLayoutEffect(()=>(vr.dragSourceOptions=mr||null,vr.reconnect(),()=>vr.disconnectDragSource()),[vr,mr]),useIsomorphicLayoutEffect(()=>(vr.dragPreviewOptions=hr||null,vr.reconnect(),()=>vr.disconnectDragPreview()),[vr,hr]),vr}function useDragSourceMonitor(){const mr=useDragDropManager();return reactExports.useMemo(()=>new DragSourceMonitorImpl(mr),[mr])}class DragSourceImpl{beginDrag(){const hr=this.spec,gr=this.monitor;let vr=null;return typeof hr.item=="object"?vr=hr.item:typeof hr.item=="function"?vr=hr.item(gr):vr={},vr??null}canDrag(){const hr=this.spec,gr=this.monitor;return typeof hr.canDrag=="boolean"?hr.canDrag:typeof hr.canDrag=="function"?hr.canDrag(gr):!0}isDragging(hr,gr){const vr=this.spec,xr=this.monitor,{isDragging:Er}=vr;return Er?Er(xr):gr===hr.getSourceId()}endDrag(){const hr=this.spec,gr=this.monitor,vr=this.connector,{end:xr}=hr;xr&&xr(gr.getItem(),gr),vr.reconnect()}constructor(hr,gr,vr){this.spec=hr,this.monitor=gr,this.connector=vr}}function useDragSource(mr,hr,gr){const vr=reactExports.useMemo(()=>new DragSourceImpl(mr,hr,gr),[hr,gr]);return reactExports.useEffect(()=>{vr.spec=mr},[mr]),vr}function useDragType(mr){return reactExports.useMemo(()=>{const hr=mr.type;return invariant(hr!=null,"spec.type must be defined"),hr},[mr])}function useRegisteredDragSource(mr,hr,gr){const vr=useDragDropManager(),xr=useDragSource(mr,hr,gr),Er=useDragType(mr);useIsomorphicLayoutEffect(function(){if(Er!=null){const[wr,Rr]=registerSource(Er,xr,vr);return hr.receiveHandlerId(wr),gr.receiveHandlerId(wr),Rr}},[vr,hr,gr,xr,Er])}function useDrag(mr,hr){const gr=useOptionalFactory(mr);invariant(!gr.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const vr=useDragSourceMonitor(),xr=useDragSourceConnector(gr.options,gr.previewOptions);return useRegisteredDragSource(gr,vr,xr),[useCollectedProps(gr.collect,vr,xr),useConnectDragSource(xr),useConnectDragPreview(xr)]}function useConnectDropTarget(mr){return reactExports.useMemo(()=>mr.hooks.dropTarget(),[mr])}function useDropTargetConnector(mr){const hr=useDragDropManager(),gr=reactExports.useMemo(()=>new TargetConnector(hr.getBackend()),[hr]);return useIsomorphicLayoutEffect(()=>(gr.dropTargetOptions=mr||null,gr.reconnect(),()=>gr.disconnectDropTarget()),[mr]),gr}function useDropTargetMonitor(){const mr=useDragDropManager();return reactExports.useMemo(()=>new DropTargetMonitorImpl(mr),[mr])}function useAccept(mr){const{accept:hr}=mr;return reactExports.useMemo(()=>(invariant(mr.accept!=null,"accept must be defined"),Array.isArray(hr)?hr:[hr]),[hr])}class DropTargetImpl{canDrop(){const hr=this.spec,gr=this.monitor;return hr.canDrop?hr.canDrop(gr.getItem(),gr):!0}hover(){const hr=this.spec,gr=this.monitor;hr.hover&&hr.hover(gr.getItem(),gr)}drop(){const hr=this.spec,gr=this.monitor;if(hr.drop)return hr.drop(gr.getItem(),gr)}constructor(hr,gr){this.spec=hr,this.monitor=gr}}function useDropTarget(mr,hr){const gr=reactExports.useMemo(()=>new DropTargetImpl(mr,hr),[hr]);return reactExports.useEffect(()=>{gr.spec=mr},[mr]),gr}function useRegisteredDropTarget(mr,hr,gr){const vr=useDragDropManager(),xr=useDropTarget(mr,hr),Er=useAccept(mr);useIsomorphicLayoutEffect(function(){const[wr,Rr]=registerTarget(Er,xr,vr);return hr.receiveHandlerId(wr),gr.receiveHandlerId(wr),Rr},[vr,hr,xr,gr,Er.map(Cr=>Cr.toString()).join("|")])}function useDrop(mr,hr){const gr=useOptionalFactory(mr),vr=useDropTargetMonitor(),xr=useDropTargetConnector(gr.options);return useRegisteredDropTarget(gr,vr,xr),[useCollectedProps(gr.collect,vr,xr),useConnectDropTarget(xr)]}const name$1="@strapi/upload",version="5.6.0",description="Makes it easy to upload images and files to your Strapi Application.",license="SEE LICENSE IN LICENSE",author={name:"Strapi Solutions SAS",email:"hi@strapi.io",url:"https://strapi.io"},maintainers=[{name:"Strapi Solutions SAS",email:"hi@strapi.io",url:"https://strapi.io"}],exports$1={"./strapi-admin":{types:"./dist/admin/src/index.d.ts",source:"./admin/src/index.ts",import:"./dist/admin/index.mjs",require:"./dist/admin/index.js",default:"./dist/admin/index.js"},"./_internal/shared":{types:"./dist/shared/index.d.ts",source:"./shared/index.ts",import:"./dist/shared/index.mjs",require:"./dist/shared/index.js",default:"./dist/shared/index.js"},"./strapi-server":{types:"./dist/server/src/index.d.ts",source:"./server/src/index.ts",import:"./dist/server/index.mjs",require:"./dist/server/index.js",default:"./dist/server/index.js"},"./package.json":"./package.json"},files=["dist/","strapi-server.js"],scripts={build:"pack-up build",clean:"run -T rimraf dist",lint:"run -T eslint .","test:front":"run -T cross-env IS_EE=true jest --config ./jest.config.front.js","test:unit":"run -T jest","test:ts:back":"run -T tsc --noEmit -p server/tsconfig.json","test:ts:front":"run -T tsc -p admin/tsconfig.json","test:front:watch":"run -T cross-env IS_EE=true jest --config ./jest.config.front.js --watch","test:unit:watch":"run -T jest --watch",watch:"pack-up watch"},dependencies={"@mux/mux-player-react":"3.1.0","@strapi/design-system":"2.0.0-rc.14","@strapi/icons":"2.0.0-rc.14","@strapi/provider-upload-local":"5.6.0","@strapi/utils":"5.6.0","byte-size":"8.1.1",cropperjs:"1.6.1","date-fns":"2.30.0",formik:"2.4.5","fs-extra":"11.2.0",immer:"9.0.21","koa-range":"0.3.0","koa-static":"5.0.0",lodash:"4.17.21","mime-types":"2.1.35","prop-types":"^15.8.1",qs:"6.11.1","react-dnd":"16.0.1","react-intl":"6.6.2","react-query":"3.39.3","react-redux":"8.1.3","react-select":"5.8.0",sharp:"0.32.6",yup:"0.32.9"},devDependencies={"@strapi/admin":"5.6.0","@strapi/pack-up":"5.0.2","@strapi/types":"5.6.0","@testing-library/dom":"10.1.0","@testing-library/react":"15.0.7","@testing-library/user-event":"14.5.2","@types/byte-size":"8.1.2","@types/fs-extra":"11.0.4","@types/koa":"2.13.4","@types/koa-range":"0.3.5","@types/koa-static":"4.0.2",formidable:"3.5.1",koa:"2.15.2","koa-body":"6.0.1",msw:"1.3.0",react:"18.3.1","react-dom":"18.3.1","react-router-dom":"6.22.3","styled-components":"6.1.8"},peerDependencies={"@strapi/admin":"^5.0.0",react:"^17.0.0 || ^18.0.0","react-dom":"^17.0.0 || ^18.0.0","react-router-dom":"^6.0.0","styled-components":"^6.0.0"},engines={node:">=18.0.0 <=22.x.x",npm:">=6.0.0"},strapi={displayName:"Media Library",name:"upload",description:"Media file management.",required:!0,kind:"plugin"},pluginPkg={name:name$1,version,description,license,author,maintainers,exports:exports$1,files,scripts,dependencies,devDependencies,peerDependencies,engines,strapi},pluginId=pluginPkg.name.replace(/^@strapi\//i,""),useAssets=({skipWhen:mr=!1,query:hr={}}={})=>{const{formatMessage:gr}=useIntl(),{toggleNotification:vr}=useNotification(),{notifyStatus:xr}=useNotifyAT(),{get:Er}=useFetchClient(),{folderPath:Cr,_q:wr,...Rr}=hr;let kr;wr?kr={...Rr,_q:encodeURIComponent(wr)}:kr={...Rr,filters:{$and:[...Rr?.filters?.$and??[],{folderPath:{$eq:Cr??"/"}}]}};const{data:Dr,error:Br,isLoading:Hr}=useQuery([pluginId,"assets",kr],async()=>{const{data:Gr}=await Er("/upload/files",{params:kr});return Gr},{enabled:!mr,staleTime:0,cacheTime:0,select(Gr){return Gr?.results&&Array.isArray(Gr.results)?{...Gr,results:Gr.results.filter(qr=>qr.name).map(qr=>({...qr,mime:qr.mime??"",ext:qr.ext??""}))}:Gr}});return reactExports.useEffect(()=>{Dr&&xr(gr({id:"list.asset.at.finished",defaultMessage:"The assets have finished loading."}))},[Dr,gr,xr]),reactExports.useEffect(()=>{Br&&vr({type:"danger",message:gr({id:"notification.error"})})},[Br,gr,vr]),{data:Dr,error:Br,isLoading:Hr}},useFolders=({enabled:mr=!0,query:hr={}}={})=>{const{formatMessage:gr}=useIntl(),{toggleNotification:vr}=useNotification(),{notifyStatus:xr}=useNotifyAT(),{folder:Er,_q:Cr,...wr}=hr,{get:Rr}=useFetchClient();let kr;Cr?kr={...wr,pagination:{pageSize:-1},_q:Cr}:kr={...wr,pagination:{pageSize:-1},filters:{$and:[...wr?.filters?.$and??[],{parent:{id:Er??{$null:!0}}}]}};const{data:Dr,error:Br,isLoading:Hr}=useQuery([pluginId,"folders",lib$1.stringify(kr)],async()=>{const{data:{data:Gr}}=await Rr("/upload/folders",{params:kr});return Gr},{enabled:mr,staleTime:0,cacheTime:0,onError(){vr({type:"danger",message:gr({id:"notification.error"})})}});return reactExports.useEffect(()=>{Dr&&xr(gr({id:"list.asset.at.finished",defaultMessage:"The folders have finished loading."}))},[Dr,gr,xr]),{data:Dr,error:Br,isLoading:Hr}},appendSearchParamsToUrl=({url:mr,params:hr})=>{if(mr===void 0||typeof hr!="object")return mr;const gr=new URL(mr,window.strapi.backendURL);return Object.entries(hr).forEach(([vr,xr])=>{xr!=null&&gr.searchParams.append(vr,xr)}),gr.toString()},containsMimeTypeFilter=mr=>{const hr=mr?.filters?.$and;return hr?!!hr.find(vr=>Object.keys(vr).includes("mime")):!1},containsAssetFilter=mr=>containsMimeTypeFilter(mr),prefixFileUrlWithBackendUrl=mr=>mr&&mr.startsWith("/")?`${window.strapi.backendURL}${mr}`:mr,createAssetUrl=(mr,hr=!0)=>{if(mr.isLocal)return mr.url;const gr=hr&&mr?.formats?.thumbnail?.url||mr.url;return prefixFileUrlWithBackendUrl(gr)},displayedFilters=[{name:"createdAt",fieldSchema:{type:"date"},metadatas:{label:"createdAt"}},{name:"updatedAt",fieldSchema:{type:"date"},metadatas:{label:"updatedAt"}},{name:"mime",fieldSchema:{type:"enumeration",options:[{label:"audio",value:"audio"},{label:"file",value:"file"},{label:"image",value:"image"},{label:"video",value:"video"}]},metadatas:{label:"type"}}],downloadFile=async(mr,hr)=>{const gr=await fetch(mr).then(Er=>Er.blob()),vr=window.URL.createObjectURL(gr),xr=document.createElement("a");xr.href=vr,xr.setAttribute("download",hr),xr.click()};function findRecursiveFolderByValue(mr,hr){let gr;function vr(xr){return xr.value===hr?(gr=xr,!0):Array.isArray(xr.children)&&xr.children.some(vr)}return mr.some(vr),gr}function formatBytes(mr,hr=0){const gr=typeof mr=="string"?Number(mr):mr,{value:vr,unit:xr}=byteSize(gr*1e3,{precision:hr});return xr?`${vr}${xr.toUpperCase()}`:"0B"}const zeroPad=mr=>String(mr).padStart(2,"0"),formatDuration=mr=>{const hr=intervalToDuration({start:0,end:mr*1e3});return`${zeroPad(hr.hours)}:${zeroPad(hr.minutes)}:${zeroPad(hr.seconds)}`},toSingularTypes=mr=>mr?mr.map(hr=>hr.substring(0,hr.length-1)):[],getAllowedFiles=(mr,hr)=>{const gr=toSingularTypes(mr);return hr.filter(xr=>{const Er=xr?.mime?.split("/")[0];return Er?gr.includes("file")&&!["video","image","audio"].includes(Er)?!0:gr.includes(Er):!1})};function getPrefixedId(mr,hr){const gr=`apiError.${mr}`;return typeof hr=="function"?hr(gr):gr}function normalizeError(mr,{name:hr,intlMessagePrefixCallback:gr}){const{message:vr}=mr,xr={id:getPrefixedId(vr,gr),defaultMessage:vr,name:mr.name??hr,values:{}};return"path"in mr&&(xr.values={path:mr.path.join(".")}),xr}const validateErrorIsYupValidationError=mr=>typeof mr.details=="object"&&mr.details!==null&&"errors"in mr.details;function normalizeAPIError(mr,hr){const gr=mr.response?.data.error;return gr?validateErrorIsYupValidationError(gr)?{name:gr.name,message:gr?.message||null,errors:gr.details.errors.map(vr=>normalizeError(vr,{name:gr.name,intlMessagePrefixCallback:hr}))}:normalizeError(gr,{intlMessagePrefixCallback:hr}):null}function getAPIInnerErrors(mr,{getTrad:hr}){const gr=normalizeAPIError(mr,hr);return gr&&"errors"in gr?gr.errors.reduce((vr,xr)=>("path"in xr.values&&(vr[xr.values.path]={id:xr.id,defaultMessage:xr.defaultMessage}),vr),{}):gr?.defaultMessage}const getTrad=mr=>`${pluginId}.${mr}`,getBreadcrumbDataCM=mr=>{const hr=[{id:null,label:{id:getTrad("plugin.name"),defaultMessage:"Media Library"}}];return mr?.parent?.parent&&hr.push([]),mr?.parent&&hr.push({id:mr.parent.id,label:mr.parent.name,path:mr.parent.path}),mr&&hr.push({id:mr.id,label:mr.name,path:mr.path}),hr},getFolderURL=(mr,hr,{folder:gr,folderPath:vr}={})=>{const{_q:xr,...Er}=hr,Cr=lib$1.stringify({...Er,folder:gr,folderPath:vr},{encode:!1});return`${mr}${Cr?`?${Cr}`:""}`},getFileExtension=mr=>mr&&mr[0]==="."?mr.substring(1):mr;function flattenTree(mr,hr=null,gr=0){return mr.flatMap(vr=>vr.children?[{...vr,parent:hr?.value,depth:gr},...flattenTree(vr.children,vr,gr+1)]:{...vr,depth:gr,parent:hr?.value})}const getFolderParents=(mr,hr)=>{const gr=[],vr=flattenTree(mr),xr=vr.find(Cr=>Cr.value===hr);if(!xr)return[];let{parent:Er}=xr;for(;Er!==void 0;){const Cr=vr.find(({value:wr})=>wr===Er);gr.push({id:Cr?.value,label:Cr?.label}),Er=Cr?.parent}return gr.reverse()},move=(mr,hr,gr)=>(gr>=mr.length&&(gr=mr.length-1),mr.splice(gr,0,mr.splice(hr,1)[0]),mr),moveElement=(mr,hr,gr)=>{const vr=hr+gr;return move(mr,hr,vr)},typeFromMime=mr=>mr.includes(AssetType.Image)?AssetType.Image:mr.includes(AssetType.Video)?AssetType.Video:mr.includes(AssetType.Audio)?AssetType.Audio:AssetType.Document,rawFileToAsset=(mr,hr)=>({size:mr.size/1e3,createdAt:new Date(mr.lastModified).toISOString(),name:mr.name,source:hr,type:typeFromMime(mr.type),url:URL.createObjectURL(mr),ext:mr.name.split(".").pop(),mime:mr.type,rawFile:mr,isLocal:!0});function getFilenameFromURL(mr){return new URL(mr).pathname.split("/").pop()}const urlsToAssets=async mr=>{const hr=mr.map(xr=>fetch(xr).then(async Er=>{const Cr=await Er.blob(),wr=new File([Cr],getFilenameFromURL(Er.url),{type:Er.headers.get("content-type")||void 0});return{name:wr.name,url:Er.url,mime:Er.headers.get("content-type"),rawFile:wr}}));return(await Promise.all(hr)).map(xr=>({source:AssetSource.Url,name:xr.name,type:typeFromMime(xr.mime),url:xr.url,ext:xr.url.split(".").pop(),mime:xr.mime?xr.mime:void 0,rawFile:xr.rawFile}))},urlSchema=create$2().shape({urls:create$4().test({name:"isUrlValid",message:"${path}",test(mr=""){const hr=mr.split(/\r?\n/);if(hr.length===0)return this.createError({path:this.path,message:errorsTrads.min.id});if(hr.length>20)return this.createError({path:this.path,message:errorsTrads.max.id});const gr=hr.filter(Er=>{try{return new URL(Er),!1}catch{return!0}}),vr=gr.length;if(vr===0)return!0;const xr=vr>1?"form.upload-url.error.url.invalids":"form.upload-url.error.url.invalid";return this.createError({path:this.path,message:getTrad(xr),params:{number:gr.length}})}})});var AssetType=(mr=>(mr.Video="video",mr.Image="image",mr.Document="doc",mr.Audio="audio",mr))(AssetType||{}),AssetSource=(mr=>(mr.Url="url",mr.Computer="computer",mr))(AssetSource||{});const PERMISSIONS={main:[{action:"plugin::upload.read",subject:null},{action:"plugin::upload.assets.create",subject:null},{action:"plugin::upload.assets.update",subject:null}],copyLink:[{action:"plugin::upload.assets.copy-link",subject:null}],create:[{action:"plugin::upload.assets.create",subject:null}],download:[{action:"plugin::upload.assets.download",subject:null}],read:[{action:"plugin::upload.read",subject:null}],configureView:[{action:"plugin::upload.configure-view",subject:null}],settings:[{action:"plugin::upload.settings.read",subject:null}],update:[{action:"plugin::upload.assets.update",subject:null,fields:null}]},tableHeaders=[{name:"preview",key:"preview",metadatas:{label:{id:getTrad("list.table.header.preview"),defaultMessage:"preview"},isSortable:!1},type:"image"},{name:"name",key:"name",metadatas:{label:{id:getTrad("list.table.header.name"),defaultMessage:"name"},isSortable:!0},type:"text"},{name:"ext",key:"extension",metadatas:{label:{id:getTrad("list.table.header.ext"),defaultMessage:"extension"},isSortable:!1},type:"ext"},{name:"size",key:"size",metadatas:{label:{id:getTrad("list.table.header.size"),defaultMessage:"size"},isSortable:!1},type:"size"},{name:"createdAt",key:"createdAt",metadatas:{label:{id:getTrad("list.table.header.createdAt"),defaultMessage:"created"},isSortable:!0},type:"date"},{name:"updatedAt",key:"updatedAt",metadatas:{label:{id:getTrad("list.table.header.updatedAt"),defaultMessage:"last update"},isSortable:!0},type:"date"}],sortOptions=[{key:"sort.created_at_desc",value:"createdAt:DESC"},{key:"sort.created_at_asc",value:"createdAt:ASC"},{key:"sort.name_asc",value:"name:ASC"},{key:"sort.name_desc",value:"name:DESC"},{key:"sort.updated_at_desc",value:"updatedAt:DESC"},{key:"sort.updated_at_asc",value:"updatedAt:ASC"}],localStorageKeys={modalView:"STRAPI_UPLOAD_MODAL_VIEW",view:"STRAPI_UPLOAD_LIBRARY_VIEW"},viewOptions={GRID:0,LIST:1},{main:_main,...restPermissions}=PERMISSIONS,useMediaLibraryPermissions=()=>{const{allowedActions:mr,isLoading:hr}=useRBAC(restPermissions);return{...mr,isLoading:hr}},endpoint$1=`/${pluginId}/configuration`,queryKey=[pluginId,"configuration"],useConfig=()=>{const{trackUsage:mr}=useTracking(),{formatMessage:hr}=useIntl(),{toggleNotification:gr}=useNotification(),{get:vr,put:xr}=useFetchClient(),Er=useQuery(queryKey,async()=>(await vr(endpoint$1)).data.data,{onError(){return gr({type:"danger",message:hr({id:"notification.error"})})},select:wr=>wr||{}}),Cr=useMutation(async wr=>{await xr(endpoint$1,wr)},{onSuccess(){mr("didEditMediaLibraryConfig"),Er.refetch()},onError(){return gr({type:"danger",message:hr({id:"notification.error"})})}});return{config:Er,mutateConfig:Cr}},useModalQueryParams=mr=>{const{trackUsage:hr}=useTracking(),{config:{data:gr}}=useConfig(),[vr,xr]=reactExports.useState({page:1,sort:"updatedAt:DESC",pageSize:10,filters:{$and:[]},...mr});reactExports.useEffect(()=>{gr&&"sort"in gr&&"pageSize"in gr&&xr(Br=>({...Br,sort:gr.sort,pageSize:gr.pageSize}))},[gr]);const Er=Br=>{Br&&(hr("didFilterMediaLibraryElements",{location:"content-manager",filter:Object.keys(Br[Br.length-1])[0]}),xr(Hr=>({...Hr,page:1,filters:{$and:Br}})))},Cr=Br=>{xr(Hr=>({...Hr,pageSize:typeof Br=="string"?parseInt(Br,10):Br,page:1}))},wr=Br=>{xr(Hr=>({...Hr,page:Br}))},Rr=Br=>{Br&&(hr("didSortMediaLibraryElements",{location:"content-manager",sort:Br}),xr(Hr=>({...Hr,sort:Br})))},kr=Br=>{if(Br)xr(Hr=>({...Hr,_q:Br,page:1}));else{const Hr={page:1};Object.keys(vr).forEach(Gr=>{["page","_q"].includes(Gr)||(Hr[Gr]=vr[Gr])}),xr(Hr)}},Dr=(Br,Hr)=>{xr(Gr=>({...Gr,folder:Br??null,folderPath:Hr}))};return[{queryObject:vr,rawQuery:lib$1.stringify(vr,{encode:!1})},{onChangeFilters:Er,onChangeFolder:Dr,onChangePage:wr,onChangePageSize:Cr,onChangeSort:Rr,onChangeSearch:kr}]},useSelectionState=(mr,hr)=>{const[gr,vr]=reactExports.useState(hr);return[gr,{selectOne:kr=>{const Dr=gr.findIndex(Br=>mr.every(Hr=>Br[Hr]===kr[Hr]));Dr>-1?vr(Br=>[...Br.slice(0,Dr),...Br.slice(Dr+1)]):vr(Br=>[...Br,kr])},selectAll:kr=>{gr.length>0?vr([]):vr(kr)},selectOnly:kr=>{gr.findIndex(Br=>mr.every(Hr=>Br[Hr]===kr[Hr]))>-1?vr([]):vr([kr])},selectMultiple:kr=>{vr(Dr=>[...Dr,...kr.filter(Br=>Dr.findIndex(Hr=>mr.every(Gr=>Hr[Gr]===Br[Gr]))===-1)])},deselectMultiple:kr=>{vr(Dr=>[...Dr.filter(Br=>kr.findIndex(Hr=>mr.every(Gr=>Br[Gr]===Hr[Gr]))===-1)])},setSelections:vr}]},editAssetRequest=(mr,hr,gr,vr,xr)=>{const Er=`/${pluginId}?id=${mr.id}`,Cr=new FormData;return hr&&Cr.append("files",hr),Cr.append("fileInfo",JSON.stringify({alternativeText:mr.alternativeText,caption:mr.caption,folder:mr.folder,name:mr.name})),xr(Er,Cr,{signal:gr}).then(wr=>wr.data)},useEditAsset=()=>{const[mr,hr]=reactExports.useState(0),{formatMessage:gr}=useIntl(),{toggleNotification:vr}=useNotification(),xr=useQueryClient(),Er=new AbortController,Cr=Er.signal,{post:wr}=useFetchClient(),Rr=useMutation(({asset:Br,file:Hr})=>editAssetRequest(Br,Hr,Cr,hr,wr),{onSuccess(){xr.refetchQueries([pluginId,"assets"],{active:!0}),xr.refetchQueries([pluginId,"asset-count"],{active:!0}),xr.refetchQueries([pluginId,"folders"],{active:!0})},onError(Br){Br?.response?.status===403?vr({type:"info",message:gr({id:getTrad("permissions.not-allowed.update")})}):vr({type:"danger",message:Br?.message})}});return{...Rr,cancel:()=>Er.abort(),editAsset:(Br,Hr)=>Rr.mutateAsync({asset:Br,file:Hr}),progress:mr,status:Rr.status}},recursiveRenameKeys=(mr,hr)=>Object.fromEntries(Object.entries(mr).map(([gr,vr])=>{const xr=Er=>typeof Er=="object"&&Er!==null?recursiveRenameKeys(Er,hr):Er;return[hr(gr),Array.isArray(vr)?vr.map(Er=>xr(Er)):xr(vr)]})),FIELD_MAPPING={name:"label",id:"value"},useFolderStructure=({enabled:mr=!0}={})=>{const{formatMessage:hr}=useIntl(),{get:gr}=useFetchClient(),vr=async()=>{const{data:{data:wr}}=await gr("/upload/folder-structure"),Rr=wr.map(kr=>recursiveRenameKeys(kr,Dr=>FIELD_MAPPING?.[Dr]??Dr));return[{value:null,label:hr({id:getTrad("form.input.label.folder-location-default-label"),defaultMessage:"Media Library"}),children:Rr}]},{data:xr,error:Er,isLoading:Cr}=useQuery([pluginId,"folder","structure"],vr,{enabled:mr,staleTime:0,cacheTime:0});return{data:xr,error:Er,isLoading:Cr}},ContextInfo=({blocks:mr})=>jsxRuntimeExports.jsx(Box,{hasRadius:!0,paddingLeft:6,paddingRight:6,paddingTop:4,paddingBottom:4,background:"neutral100",children:jsxRuntimeExports.jsx(Grid.Root,{gap:4,children:mr.map(({label:hr,value:gr})=>jsxRuntimeExports.jsx(Grid.Item,{col:6,xs:12,direction:"column",alignItems:"stretch",children:jsxRuntimeExports.jsxs(Flex,{direction:"column",alignItems:"stretch",gap:1,children:[jsxRuntimeExports.jsx(Typography,{variant:"sigma",textColor:"neutral600",children:hr}),jsxRuntimeExports.jsx(Typography,{variant:"pi",textColor:"neutral700",children:gr})]})},hr))})}),ToggleButton=dt$3(Flex)`
  align-self: flex-end;
  height: 2.2rem;
  width: 2.8rem;

  &:hover,
  &:focus {
    background-color: ${({theme:mr})=>mr.colors.primary200};
  }
`,Option=({children:mr,data:hr,selectProps:gr,...vr})=>{const{formatMessage:xr}=useIntl(),{depth:Er,value:Cr,children:wr}=hr,{maxDisplayDepth:Rr,openValues:kr,onOptionToggle:Dr}=gr,Hr=kr.includes(Cr)?ForwardRef$4n:ForwardRef$4t;return jsxRuntimeExports.jsx(components.Option,{data:hr,selectProps:gr,...vr,children:jsxRuntimeExports.jsxs(Flex,{alignItems:"start",children:[jsxRuntimeExports.jsx(Typography,{textColor:"neutral800",ellipsis:!0,children:jsxRuntimeExports.jsx("span",{style:{paddingLeft:`${Math.min(Er,Rr)*14}px`},children:mr})}),wr&&wr?.length>0&&jsxRuntimeExports.jsx(ToggleButton,{"aria-label":xr({id:"app.utils.toggle",defaultMessage:"Toggle"}),tag:"button",alignItems:"center",hasRadius:!0,justifyContent:"center",marginLeft:"auto",onClick:Gr=>{Gr.preventDefault(),Gr.stopPropagation(),Dr(Cr)},children:jsxRuntimeExports.jsx(Hr,{width:"1.4rem",fill:"neutral500"})})]})})};function getOpenValues(mr,hr={}){const gr=[],{value:vr}=hr,xr=mr.find(Cr=>Cr.value===vr);if(!xr)return gr;gr.push(xr.value);let{parent:Er}=xr;for(;Er!==void 0;){const Cr=mr.find(({value:wr})=>wr===Er);if(!Cr)break;gr.push(Cr.value),Er=Cr.parent}return gr.reverse()}function getValuesToClose(mr,hr){const gr=mr.find(vr=>vr.value===hr);return gr?mr.filter(vr=>vr.depth>=gr.depth).map(vr=>vr.value):[]}const hasParent=mr=>!mr.parent,SelectTree=({options:mr,maxDisplayDepth:hr=5,defaultValue:gr,...vr})=>{const xr=reactExports.useMemo(()=>flattenTree(mr),[mr]),Er=reactExports.useMemo(()=>xr.filter(hasParent),[xr]),[Cr,wr]=reactExports.useState(Er),[Rr,kr]=reactExports.useState(getOpenValues(xr,gr));reactExports.useEffect(()=>{if(Rr.length===0)wr(xr.filter(Br=>Br.parent===void 0));else{const Br=Rr.reduce((Gr,qr)=>(xr.filter(Qr=>Qr.value===qr||Qr.parent===qr).forEach(Qr=>{const sn=getOpenValues(xr,Qr);Gr=[...Gr,...sn]}),Gr),[]),Hr=xr.filter(Gr=>Br.includes(Gr.value));wr(Hr)}},[Rr,xr,Er]);const Dr=Br=>{if(Rr.includes(Br)){const Hr=getValuesToClose(xr,Br);kr(Gr=>Gr.filter(qr=>!Hr.includes(qr)))}else kr(Hr=>[...Hr,Br])};return jsxRuntimeExports.jsx(Select,{components:{Option},options:Cr,defaultValue:gr,isSearchable:!1,maxDisplayDepth:hr,openValues:Rr,onOptionToggle:Dr,...vr})},Select=({components:mr={},styles:hr={},error:gr,ariaErrorMessage:vr,...xr})=>{const Er=nt$2(),Cr=getSelectStyles(Er,gr);return jsxRuntimeExports.jsx(StateManagedSelect$1,{menuPosition:"fixed",components:{...mr,ClearIndicator,DropdownIndicator,IndicatorSeparator:()=>null,LoadingIndicator:()=>null},"aria-errormessage":gr&&vr,"aria-invalid":!!gr,styles:{...Cr,...hr},...xr})},IconBox=dt$3(Box)`
  background: transparent;
  border: none;
  position: relative;
  z-index: 1;

  svg {
    height: 1.1rem;
    width: 1.1rem;
  }

  svg path {
    fill: ${({theme:mr})=>mr.colors.neutral600};
  }
`,ClearIndicator=mr=>{const hr=components.ClearIndicator;return jsxRuntimeExports.jsx(hr,{...mr,children:jsxRuntimeExports.jsx(IconBox,{tag:"button",type:"button",children:jsxRuntimeExports.jsx(ForwardRef$3$,{})})})},CarretBox=dt$3(IconBox)`
  display: flex;
  background: none;
  border: none;

  svg {
    width: 0.9rem;
  }
`,DropdownIndicator=({innerProps:mr})=>jsxRuntimeExports.jsx(CarretBox,{paddingRight:3,...mr,children:jsxRuntimeExports.jsx(ForwardRef$4L,{})}),getSelectStyles=(mr,hr)=>({clearIndicator:gr=>({...gr,padding:0,paddingRight:mr.spaces[3]}),container:gr=>({...gr,background:mr.colors.neutral0,lineHeight:"normal"}),control(gr,vr){let xr=mr.colors.neutral200,Er,Cr;return vr.isFocused?(xr=mr.colors.primary600,Er=mr.colors.primary600):hr&&(xr=mr.colors.danger600),vr.isDisabled&&(Cr=`${mr.colors.neutral150} !important`),{...gr,fontSize:mr.fontSizes[2],height:40,border:`1px solid ${xr} !important`,outline:0,backgroundColor:Cr,borderRadius:mr.borderRadius,boxShadow:Er?`${Er} 0px 0px 0px 2px`:""}},indicatorsContainer:gr=>({...gr,padding:0,paddingRight:mr.spaces[3]}),input:gr=>({...gr,margin:0,padding:0,color:mr.colors.neutral800,gridTemplateColumns:"0 100%"}),menuPortal:gr=>({...gr,zIndex:mr.zIndices.dialog,pointerEvents:"auto"}),menu(gr){return{...gr,width:"100%",marginTop:mr.spaces[1],backgroundColor:mr.colors.neutral0,color:mr.colors.neutral800,borderRadius:mr.borderRadius,border:`1px solid ${mr.colors.neutral200}`,boxShadow:mr.shadows.tableShadow,fontSize:mr.fontSizes[2],zIndex:2}},menuList:gr=>({...gr,paddingLeft:mr.spaces[1],paddingTop:mr.spaces[1],paddingRight:mr.spaces[1],paddingBottom:mr.spaces[1]}),option(gr,vr){let xr=gr?.backgroundColor;return(vr.isFocused||vr.isSelected)&&(xr=mr.colors.primary100),{...gr,color:mr.colors.neutral800,lineHeight:mr.spaces[5],backgroundColor:xr,borderRadius:mr.borderRadius,"&:active":{backgroundColor:mr.colors.primary100}}},placeholder:gr=>({...gr,color:mr.colors.neutral600,marginLeft:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"80%"}),singleValue(gr,vr){let xr=mr.colors.neutral800;return vr.isDisabled&&(xr=mr.colors.neutral600),{...gr,marginLeft:0,color:xr}},valueContainer:gr=>({...gr,cursor:"pointer",padding:0,paddingLeft:mr.spaces[4],marginLeft:0,marginRight:0})}),DialogHeader=()=>{const{formatMessage:mr}=useIntl();return jsxRuntimeExports.jsx(Modal$1.Header,{children:jsxRuntimeExports.jsx(Modal$1.Title,{children:mr({id:"global.details",defaultMessage:"Details"})})})},QUALITY=1,useCropImg=()=>{const mr=reactExports.useRef(),[hr,gr]=reactExports.useState(!1),[vr,xr]=reactExports.useState({width:void 0,height:void 0});reactExports.useEffect(()=>()=>{mr.current&&mr.current.destroy()},[]);const Er=({detail:{height:kr,width:Dr}})=>{const Br=Math.round(Dr),Hr=Math.round(kr);xr({width:Br,height:Hr})};return{crop:kr=>{mr.current||(mr.current=new Cropper(kr,{modal:!0,initialAspectRatio:16/9,movable:!0,zoomable:!1,cropBoxResizable:!0,background:!1,checkCrossOrigin:!1,crop:Er}),gr(!0))},produceFile:(kr,Dr,Br)=>new Promise((Hr,Gr)=>{mr.current?mr.current.getCroppedCanvas().toBlob(zr=>{Hr(new File([zr],kr,{type:Dr,lastModified:new Date(Br).getTime()}))},Dr,QUALITY):Gr(new Error("The cropper has not been instantiated: make sure to call the crop() function before calling produceFile()."))}),stopCropping:()=>{mr.current&&(mr.current.destroy(),mr.current=void 0,gr(!1))},isCropping:hr,isCropperReady:!!mr.current,...vr}},endpoint=`/${pluginId}`,uploadAsset=(mr,hr,gr,vr,xr)=>{const{rawFile:Er,caption:Cr,name:wr,alternativeText:Rr}=mr,kr=new FormData;return kr.append("files",Er),kr.append("fileInfo",JSON.stringify({name:wr,caption:Cr,alternativeText:Rr,folder:hr})),xr(endpoint,kr,{signal:gr}).then(Dr=>Dr.data)},useUpload=()=>{const[mr,hr]=reactExports.useState(0),gr=useQueryClient(),vr=new AbortController,xr=vr.signal,{post:Er}=useFetchClient(),Cr=useMutation(({asset:kr,folderId:Dr})=>uploadAsset(kr,Dr,xr,hr,Er),{onSuccess(){gr.refetchQueries([pluginId,"assets"],{active:!0}),gr.refetchQueries([pluginId,"asset-count"],{active:!0})}}),wr=(kr,Dr)=>Cr.mutateAsync({asset:kr,folderId:Dr}),Rr=()=>vr.abort();return{upload:wr,isLoading:Cr.isLoading,cancel:Rr,error:Cr.error,progress:mr,status:Cr.status}},CopyLinkButton=({url:mr})=>{const{toggleNotification:hr}=useNotification(),{formatMessage:gr}=useIntl(),{copy:vr}=useClipboard(),xr=async()=>{await vr(mr)&&hr({type:"success",message:gr({id:"notification.link-copied",defaultMessage:"Link copied into the clipboard"})})};return jsxRuntimeExports.jsx(IconButton,{label:gr({id:getTrad("control-card.copy-link"),defaultMessage:"Copy link"}),onClick:xr,children:jsxRuntimeExports.jsx(ForwardRef$2l,{})})},BoxWrapper=dt$3(Flex)`
  border-radius: ${({theme:mr})=>`${mr.borderRadius} ${mr.borderRadius} 0 0`};
  width: 100%;
  height: 100%;

  svg {
    path {
      fill: ${({theme:mr,error:hr})=>hr?mr.colors.danger600:void 0};
    }
  }
`,CancelButton=dt$3.button`
  border: none;
  background: none;
  width: min-content;
  color: ${({theme:mr})=>mr.colors.neutral600};

  &:hover,
  &:focus {
    color: ${({theme:mr})=>mr.colors.neutral700};
  }

  svg {
    height: 10px;
    width: 10px;

    path {
      fill: currentColor;
    }
  }
`,UploadProgress=({onCancel:mr,progress:hr=0,error:gr})=>{const{formatMessage:vr}=useIntl();return jsxRuntimeExports.jsx(BoxWrapper,{alignItems:"center",background:gr?"danger100":"neutral150",error:gr,children:gr?jsxRuntimeExports.jsx(ForwardRef$3$,{"aria-label":gr?.message}):jsxRuntimeExports.jsxs(Flex,{direction:"column",alignItems:"center",gap:2,width:"100%",children:[jsxRuntimeExports.jsx(ProgressBar,{value:hr}),jsxRuntimeExports.jsx(Typography,{children:`${hr}/100%`}),jsxRuntimeExports.jsx(CancelButton,{type:"button",onClick:mr,children:jsxRuntimeExports.jsxs(Flex,{gap:2,children:[jsxRuntimeExports.jsx(Typography,{variant:"pi",tag:"span",textColor:"inherit",children:vr({id:"app.components.Button.cancel",defaultMessage:"Cancel"})}),jsxRuntimeExports.jsx(ForwardRef$3$,{"aria-hidden":!0})]})})]})})},useRemoveAsset=mr=>{const{toggleNotification:hr}=useNotification(),{formatMessage:gr}=useIntl(),vr=useQueryClient(),{del:xr}=useFetchClient(),Er=useMutation(wr=>xr(`/upload/files/${wr}`),{onSuccess(){vr.refetchQueries([pluginId,"assets"],{active:!0}),vr.refetchQueries([pluginId,"asset-count"],{active:!0}),hr({type:"success",message:gr({id:"modal.remove.success-label",defaultMessage:"Elements have been successfully deleted."})}),mr()},onError(wr){hr({type:"danger",message:wr.message})}});return{...Er,removeAsset:async wr=>{await Er.mutateAsync(wr)}}},RemoveAssetDialog=({open:mr,onClose:hr,asset:gr})=>{const{removeAsset:vr}=useRemoveAsset(()=>{hr(null)}),xr=async Er=>{Er?.preventDefault(),await vr(gr.id)};return jsxRuntimeExports.jsx(Dialog.Root,{open:mr,onOpenChange:hr,children:jsxRuntimeExports.jsx(ConfirmDialog,{onConfirm:xr})})},CardAsset$1=dt$3(Flex)`
  min-height: 26.4rem;
  border-radius: ${({theme:mr})=>mr.borderRadius} ${({theme:mr})=>mr.borderRadius} 0 0;
  background: linear-gradient(
    180deg,
    ${({theme:mr})=>mr.colors.neutral0} 0%,
    ${({theme:mr})=>mr.colors.neutral100} 121.48%
  );
`,AssetPreview=reactExports.forwardRef(({mime:mr,url:hr,name:gr,...vr},xr)=>{const Er=nt$2(),{formatMessage:Cr}=useIntl();return mr.includes(AssetType.Image)?jsxRuntimeExports.jsx("img",{ref:xr,src:hr,alt:gr,...vr}):mr.includes(AssetType.Video)?jsxRuntimeExports.jsx(Ne,{src:hr,accentColor:Er.colors.primary500}):mr.includes(AssetType.Audio)?jsxRuntimeExports.jsx(Box,{margin:"5",children:jsxRuntimeExports.jsx("audio",{controls:!0,src:hr,ref:xr,...vr,children:gr})}):mr.includes("pdf")?jsxRuntimeExports.jsx(CardAsset$1,{width:"100%",justifyContent:"center",...vr,children:jsxRuntimeExports.jsxs(Flex,{gap:2,direction:"column",alignItems:"center",children:[jsxRuntimeExports.jsx(ForwardRef$3j,{"aria-label":gr,fill:"neutral500",width:24,height:24}),jsxRuntimeExports.jsx(Typography,{textColor:"neutral500",variant:"pi",children:Cr({id:"noPreview",defaultMessage:"No preview available"})})]})}):jsxRuntimeExports.jsx(CardAsset$1,{width:"100%",justifyContent:"center",...vr,children:jsxRuntimeExports.jsxs(Flex,{gap:2,direction:"column",alignItems:"center",children:[jsxRuntimeExports.jsx(ForwardRef$3p,{"aria-label":gr,fill:"neutral500",width:24,height:24}),jsxRuntimeExports.jsx(Typography,{textColor:"neutral500",variant:"pi",children:Cr({id:"noPreview",defaultMessage:"No preview available"})})]})})});AssetPreview.displayName="AssetPreview";const RelativeBox=dt$3(Box)`
  position: relative;
`,Wrapper$1=dt$3.div`
  position: relative;
  display: flex;
  justify-content: center;
  background: repeating-conic-gradient(
      ${({theme:mr})=>mr.colors.neutral100} 0% 25%,
      transparent 0% 50%
    )
    50% / 20px 20px;

  svg {
    height: 26px;
  }

  img,
  mux-player {
    margin: 0;
    padding: 0;
    max-height: 26.4rem;
    max-width: 100%;
  }

  mux-player {
    --play-button: inline-flex;
    --mute-button: inline-flex;
    --pip-button: inline-flex;
    --fullscreen-button: inline-flex;
    --playback-rate-button: inline-flex;
    --volume-range: inline-flex;
    --time-range: inline-flex;
    --time-display: inline-flex;
    --duration-display: inline-flex;
  }
`,ActionRow=dt$3(Flex)`
  height: 5.2rem;
  background-color: ${({$blurry:mr})=>mr?"rgba(33, 33, 52, 0.4)":void 0};
`,CroppingActionRow=dt$3(Flex)`
  z-index: 1;
  height: 5.2rem;
  position: absolute;
  background-color: rgba(33, 33, 52, 0.4);
  width: 100%;
`,BadgeOverride=dt$3(Badge)`
  span {
    color: inherit;
    font-weight: ${({theme:mr})=>mr.fontWeights.regular};
  }
`,UploadProgressWrapper$1=dt$3.div`
  position: absolute;
  z-index: 2;
  height: 100%;
  width: 100%;
`,CroppingActions=({onCancel:mr,onValidate:hr,onDuplicate:gr})=>{const{formatMessage:vr}=useIntl(),xr=nt$2();return jsxRuntimeExports.jsx(FocusTrap,{onEscape:mr,children:jsxRuntimeExports.jsx(CroppingActionRow,{justifyContent:"flex-end",paddingLeft:3,paddingRight:3,children:jsxRuntimeExports.jsxs(Flex,{gap:1,children:[jsxRuntimeExports.jsx(IconButton,{label:vr({id:getTrad("control-card.stop-crop"),defaultMessage:"Stop cropping"}),onClick:mr,children:jsxRuntimeExports.jsx(ForwardRef$3$,{})}),jsxRuntimeExports.jsxs(Menu$2.Root,{children:[jsxRuntimeExports.jsx(Trigger,{"aria-label":vr({id:getTrad("control-card.crop"),defaultMessage:"Crop"}),variant:"tertiary",paddingLeft:2,paddingRight:2,endIcon:null,children:jsxRuntimeExports.jsx(ForwardRef$4x,{"aria-hidden":!0,focusable:!1,style:{position:"relative",top:2},fill:"#C0C0D0"})}),jsxRuntimeExports.jsxs(Menu$2.Content,{zIndex:xr.zIndices.dialog,children:[jsxRuntimeExports.jsx(Menu$2.Item,{onSelect:hr,children:vr({id:getTrad("checkControl.crop-original"),defaultMessage:"Crop the original asset"})}),gr&&jsxRuntimeExports.jsx(Menu$2.Item,{onSelect:gr,children:vr({id:getTrad("checkControl.crop-duplicate"),defaultMessage:"Duplicate & crop the asset"})})]})]})]})})})},Trigger=dt$3(Menu$2.Trigger)`
  svg {
    > g,
    path {
      fill: ${({theme:mr})=>mr.colors.neutral500};
    }
  }

  &:hover {
    svg {
      > g,
      path {
        fill: ${({theme:mr})=>mr.colors.neutral600};
      }
    }
  }

  &:active {
    svg {
      > g,
      path {
        fill: ${({theme:mr})=>mr.colors.neutral400};
      }
    }
  }
`,PreviewBox=({asset:mr,canUpdate:hr,canCopyLink:gr,canDownload:vr,onDelete:xr,onCropFinish:Er,onCropStart:Cr,onCropCancel:wr,replacementFile:Rr,trackedLocation:kr})=>{const{trackUsage:Dr}=useTracking(),Br=reactExports.useRef(null),[Hr,Gr]=reactExports.useState(!1),[qr,zr]=reactExports.useState(null),[Qr,sn]=reactExports.useState(createAssetUrl(mr,!1)),[hn,vn]=reactExports.useState(createAssetUrl(mr,!0)),{formatMessage:yn}=useIntl(),[gn,bn]=reactExports.useState(!1),{crop:xn,produceFile:$n,stopCropping:Sn,isCropping:Cn,isCropperReady:Rn,width:Bn,height:Fn}=useCropImg(),{editAsset:Hn,error:Gn,isLoading:qn,progress:On,cancel:wn}=useEditAsset(),{upload:_n,isLoading:Tn,cancel:Mn,error:Ln,progress:jn}=useUpload();reactExports.useEffect(()=>{if(Rr){const Vn=URL.createObjectURL(Rr);mr.isLocal&&(mr.url=Vn),sn(Vn),vn(Vn)}},[Rr,mr]),reactExports.useEffect(()=>{qr===!1&&(Sn(),wr())},[qr,Sn,wr,Er]),reactExports.useEffect(()=>{qr&&Hr&&(xn(Br.current),Cr())},[Hr,qr,Cr,xn]);const Kn=async()=>{const Vn={...mr,width:Bn,height:Fn,folder:mr.folder?.id},zn=await $n(Vn.name,Vn.mime,Vn.updatedAt);let Xn,Zn;if(mr.isLocal)Xn=URL.createObjectURL(zn),Zn=Xn,mr.url=Xn,mr.rawFile=zn,Dr("didCropFile",{duplicatedFile:null,location:kr});else{const Pi=await Hn(Vn,zn);Xn=createAssetUrl(Pi,!1),Zn=createAssetUrl(Pi,!0),Dr("didCropFile",{duplicatedFile:!1,location:kr})}sn(Xn),vn(Zn),zr(!1)},Nn=Cn&&!qn,An=async()=>{const Vn={...mr,width:Bn,height:Fn},zn=await $n(Vn.name,Vn.mime,Vn.updatedAt);await _n({name:zn.name,rawFile:zn},mr.folder?.id?mr.folder.id:null),Dr("didCropFile",{duplicatedFile:!0,location:kr}),zr(!1),Er()},kn=()=>{zr(!1)},Dn=()=>{zr(!0)};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(RelativeBox,{hasRadius:!0,background:"neutral150",borderColor:"neutral200",children:[Rn&&Nn&&jsxRuntimeExports.jsx(CroppingActions,{onValidate:Kn,onDuplicate:mr.isLocal?void 0:An,onCancel:kn}),jsxRuntimeExports.jsx(ActionRow,{paddingLeft:3,paddingRight:3,justifyContent:"flex-end",children:jsxRuntimeExports.jsxs(Flex,{gap:1,children:[hr&&!mr.isLocal&&jsxRuntimeExports.jsx(IconButton,{label:yn({id:"global.delete",defaultMessage:"Delete"}),onClick:()=>bn(!0),children:jsxRuntimeExports.jsx(ForwardRef$j$1,{})}),vr&&jsxRuntimeExports.jsx(IconButton,{label:yn({id:getTrad("control-card.download"),defaultMessage:"Download"}),onClick:()=>downloadFile(Qr,mr.name),children:jsxRuntimeExports.jsx(ForwardRef$3P,{})}),gr&&jsxRuntimeExports.jsx(CopyLinkButton,{url:Qr}),hr&&mr.mime?.includes(AssetType.Image)&&jsxRuntimeExports.jsx(IconButton,{label:yn({id:getTrad("control-card.crop"),defaultMessage:"Crop"}),onClick:Dn,children:jsxRuntimeExports.jsx(ForwardRef$41,{})})]})}),jsxRuntimeExports.jsxs(Wrapper$1,{children:[qn&&jsxRuntimeExports.jsx(UploadProgressWrapper$1,{children:jsxRuntimeExports.jsx(UploadProgress,{error:Gn,onCancel:wn,progress:On})}),Tn&&jsxRuntimeExports.jsx(UploadProgressWrapper$1,{children:jsxRuntimeExports.jsx(UploadProgress,{error:Ln,onCancel:Mn,progress:jn})}),jsxRuntimeExports.jsx(AssetPreview,{ref:Br,mime:mr.mime,name:mr.name,url:qr?Qr:hn,onLoad:()=>{(mr.isLocal||qr)&&Gr(!0)}})]}),jsxRuntimeExports.jsx(ActionRow,{paddingLeft:2,paddingRight:2,justifyContent:"flex-end",$blurry:Nn,children:Nn&&Bn&&Fn&&jsxRuntimeExports.jsx(BadgeOverride,{background:"neutral900",color:"neutral0",children:Bn&&Fn?`${Fn}✕${Bn}`:"N/A"})})]}),jsxRuntimeExports.jsx(RemoveAssetDialog,{open:gn,onClose:()=>{bn(!1),xr(null)},asset:mr})]})},ReplaceMediaButton=({onSelectMedia:mr,acceptedMime:hr,trackedLocation:gr,...vr})=>{const{formatMessage:xr}=useIntl(),Er=reactExports.useRef(null),{trackUsage:Cr}=useTracking(),wr=kr=>{kr.preventDefault(),gr&&Cr("didReplaceMedia",{location:gr}),Er.current?.click()},Rr=()=>{const kr=Er.current?.files?.[0];mr(kr)};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Button,{variant:"secondary",onClick:wr,...vr,children:xr({id:getTrad("control-card.replace-media"),defaultMessage:"Replace media"})}),jsxRuntimeExports.jsx(VisuallyHidden,{children:jsxRuntimeExports.jsx("input",{accept:hr,type:"file",name:"file","data-testid":"file-input",tabIndex:-1,ref:Er,onChange:Rr,"aria-hidden":!0})})]})},LoadingBody$1=dt$3(Flex)`
  /* 80px are coming from the Tabs component that is not included in the ModalBody */
  min-height: ${()=>"calc(60vh + 8rem)"};
`,fileInfoSchema=create$2({name:create$4().required(),alternativeText:create$4(),caption:create$4(),folder:create$3()}),EditAssetContent=({onClose:mr,asset:hr,canUpdate:gr=!1,canCopyLink:vr=!1,canDownload:xr=!1,trackedLocation:Er})=>{const{formatMessage:Cr,formatDate:wr}=useIntl(),{trackUsage:Rr}=useTracking(),kr=reactExports.useRef(null),[Dr,Br]=reactExports.useState(!1),[Hr,Gr]=reactExports.useState(),{editAsset:qr,isLoading:zr}=useEditAsset(),{data:Qr,isLoading:sn}=useFolderStructure({enabled:!0}),hn=async Rn=>{const Bn={...hr,...Rn,folder:Rn.parent?.value};if(hr?.isLocal)mr(Bn);else{const Fn=await qr(Bn,Hr),Hn=hr?.mime?.split("/")[0],Gn=hr?.folder?.id?hr.folder.id!==Rn.parent?.value:hr?.folder===null&&!!Rn.parent?.value;Rr("didEditMediaLibraryElements",{location:Er,type:Hn,changeLocation:Gn}),mr(Fn)}},vn=()=>{Br(!0)},yn=()=>{Br(!1)},gn=()=>{Br(!1),mr()},bn=!gr||Dr,xn=()=>{window.confirm(Cr({id:"window.confirm.close-modal.file",defaultMessage:"Are you sure? Your changes will be lost."}))&&mr()},$n=hr?.folder?.id,Sn=!sn&&{name:hr?.name,alternativeText:hr?.alternativeText??void 0,caption:hr?.caption??void 0,parent:{value:$n??void 0,label:findRecursiveFolderByValue(Qr,$n)?.label??Qr[0].label}},Cn=Rn=>{isEqual$3(Sn,Rn)?mr():xn()};return sn?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(DialogHeader,{}),jsxRuntimeExports.jsx(LoadingBody$1,{minHeight:"60vh",justifyContent:"center",paddingTop:4,paddingBottom:4,children:jsxRuntimeExports.jsx(Loader,{children:Cr({id:getTrad("content.isLoading"),defaultMessage:"Content is loading."})})}),jsxRuntimeExports.jsx(Modal$1.Footer,{children:jsxRuntimeExports.jsx(Button,{onClick:()=>Cn(),variant:"tertiary",children:Cr({id:"cancel",defaultMessage:"Cancel"})})})]}):jsxRuntimeExports.jsx(Formik,{validationSchema:fileInfoSchema,validateOnChange:!1,onSubmit:hn,initialValues:Sn,children:({values:Rn,errors:Bn,handleChange:Fn,setFieldValue:Hn})=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(DialogHeader,{}),jsxRuntimeExports.jsx(Modal$1.Body,{children:jsxRuntimeExports.jsxs(Grid.Root,{gap:4,children:[jsxRuntimeExports.jsx(Grid.Item,{xs:12,col:6,direction:"column",alignItems:"stretch",children:jsxRuntimeExports.jsx(PreviewBox,{asset:hr,canUpdate:gr,canCopyLink:vr,canDownload:xr,onDelete:mr,onCropFinish:gn,onCropStart:vn,onCropCancel:yn,replacementFile:Hr,trackedLocation:Er})}),jsxRuntimeExports.jsx(Grid.Item,{xs:12,col:6,direction:"column",alignItems:"stretch",children:jsxRuntimeExports.jsxs(Form$1,{noValidate:!0,children:[jsxRuntimeExports.jsxs(Flex,{direction:"column",alignItems:"stretch",gap:3,children:[jsxRuntimeExports.jsx(ContextInfo,{blocks:[{label:Cr({id:getTrad("modal.file-details.size"),defaultMessage:"Size"}),value:formatBytes(hr?.size?hr.size:0)},{label:Cr({id:getTrad("modal.file-details.dimensions"),defaultMessage:"Dimensions"}),value:hr?.height&&hr.width?`${hr.width}✕${hr.height}`:null},{label:Cr({id:getTrad("modal.file-details.date"),defaultMessage:"Date"}),value:wr(new Date(hr?.createdAt?hr.createdAt:""))},{label:Cr({id:getTrad("modal.file-details.extension"),defaultMessage:"Extension"}),value:getFileExtension(hr?.ext)},{label:Cr({id:getTrad("modal.file-details.id"),defaultMessage:"Asset ID"}),value:hr?.id?hr.id:null}]}),jsxRuntimeExports.jsxs(Field.Root,{name:"name",error:Bn.name,children:[jsxRuntimeExports.jsx(Field.Label,{children:Cr({id:getTrad("form.input.label.file-name"),defaultMessage:"File name"})}),jsxRuntimeExports.jsx(TextInput,{value:Rn.name,onChange:Fn,disabled:bn}),jsxRuntimeExports.jsx(Field.Error,{})]}),jsxRuntimeExports.jsxs(Field.Root,{name:"alternativeText",hint:Cr({id:getTrad("form.input.decription.file-alt"),defaultMessage:"This text will be displayed if the asset can’t be shown."}),error:Bn.alternativeText,children:[jsxRuntimeExports.jsx(Field.Label,{children:Cr({id:getTrad("form.input.label.file-alt"),defaultMessage:"Alternative text"})}),jsxRuntimeExports.jsx(TextInput,{value:Rn.alternativeText,onChange:Fn,disabled:bn}),jsxRuntimeExports.jsx(Field.Hint,{}),jsxRuntimeExports.jsx(Field.Error,{})]}),jsxRuntimeExports.jsxs(Field.Root,{name:"caption",error:Bn.caption,children:[jsxRuntimeExports.jsx(Field.Label,{children:Cr({id:getTrad("form.input.label.file-caption"),defaultMessage:"Caption"})}),jsxRuntimeExports.jsx(TextInput,{value:Rn.caption,onChange:Fn,disabled:bn})]}),jsxRuntimeExports.jsx(Flex,{direction:"column",alignItems:"stretch",gap:1,children:jsxRuntimeExports.jsxs(Field.Root,{name:"parent",id:"asset-folder",children:[jsxRuntimeExports.jsx(Field.Label,{children:Cr({id:getTrad("form.input.label.file-location"),defaultMessage:"Location"})}),jsxRuntimeExports.jsx(SelectTree,{name:"parent",defaultValue:Rn.parent,options:Qr,onChange:Gn=>{Hn("parent",Gn)},menuPortalTarget:document.querySelector("body"),inputId:"asset-folder",isDisabled:bn,error:Bn?.parent,ariaErrorMessage:"folder-parent-error"})]})})]}),jsxRuntimeExports.jsx(VisuallyHidden,{children:jsxRuntimeExports.jsx("button",{type:"submit",tabIndex:-1,ref:kr,disabled:bn,children:Cr({id:"submit",defaultMessage:"Submit"})})})]})})]})}),jsxRuntimeExports.jsxs(Modal$1.Footer,{children:[jsxRuntimeExports.jsx(Button,{onClick:()=>Cn({...Rn}),variant:"tertiary",children:Cr({id:"global.cancel",defaultMessage:"Cancel"})}),jsxRuntimeExports.jsxs(Flex,{gap:2,children:[jsxRuntimeExports.jsx(ReplaceMediaButton,{onSelectMedia:Gr,acceptedMime:hr?.mime??"",disabled:bn,trackedLocation:Er}),jsxRuntimeExports.jsx(Button,{onClick:()=>kr.current?.click(),loading:zr,disabled:bn,children:Cr({id:"global.finish",defaultMessage:"Finish"})})]})]})]})})},EditAssetDialog=({open:mr,onClose:hr,canUpdate:gr=!1,canCopyLink:vr=!1,canDownload:xr=!1,...Er})=>jsxRuntimeExports.jsx(Modal$1.Root,{open:mr,onOpenChange:hr,children:jsxRuntimeExports.jsx(Modal$1.Content,{children:jsxRuntimeExports.jsx(EditAssetContent,{onClose:hr,canUpdate:gr,canCopyLink:vr,canDownload:xr,...Er})})}),useBulkRemove=()=>{const{toggleNotification:mr}=useNotification(),{formatMessage:hr}=useIntl(),gr=useQueryClient(),{post:vr}=useFetchClient(),Er=useMutation(wr=>{const Rr=wr.reduce((kr,Dr)=>{const{id:Br,type:Hr}=Dr,Gr=Hr==="asset"?"fileIds":"folderIds";return kr[Gr]||(kr[Gr]=[]),kr[Gr].push(Br),kr},{});return vr("/upload/actions/bulk-delete",Rr)},{onSuccess(wr){const{data:{data:Rr}}=wr;Rr?.files?.length>0&&(gr.refetchQueries([pluginId,"assets"],{active:!0}),gr.refetchQueries([pluginId,"asset-count"],{active:!0})),Rr?.folders?.length>0&&gr.refetchQueries([pluginId,"folders"],{active:!0}),mr({type:"success",message:hr({id:getTrad("modal.remove.success-label"),defaultMessage:"Elements have been successfully deleted."})})},onError(wr){mr({type:"danger",message:wr?.message})}});return{...Er,remove:(...wr)=>Er.mutateAsync(...wr)}},editFolderRequest=(mr,hr,{attrs:gr,id:vr})=>(!!vr?mr:hr)(`/upload/folders/${vr??""}`,gr).then(Cr=>Cr.data),useEditFolder=()=>{const mr=useQueryClient(),{put:hr,post:gr}=useFetchClient(),vr=useMutation((...Er)=>editFolderRequest(hr,gr,...Er),{async onSuccess(){await mr.refetchQueries([pluginId,"folders"],{active:!0}),await mr.refetchQueries([pluginId,"folder","structure"],{active:!0})}});return{...vr,editFolder:(Er,Cr)=>vr.mutateAsync({attrs:Er,id:Cr}),status:vr.status}},EditFolderModalHeader=({isEditing:mr=!1})=>{const{formatMessage:hr}=useIntl();return jsxRuntimeExports.jsx(Modal$1.Header,{children:jsxRuntimeExports.jsx(Modal$1.Title,{children:hr(mr?{id:getTrad("modal.folder.edit.title"),defaultMessage:"Edit folder"}:{id:getTrad("modal.folder.create.title"),defaultMessage:"Add new folder"})})})},RemoveFolderDialog=({onClose:mr,onConfirm:hr,open:gr})=>jsxRuntimeExports.jsx(Dialog.Root,{open:gr,onOpenChange:mr,children:jsxRuntimeExports.jsx(ConfirmDialog,{onConfirm:hr})}),folderSchema=create$2({name:create$4().required(),parent:create$2({label:create$4(),value:create$3().nullable(!0)}).nullable(!0)}),EditFolderContent=({onClose:mr,folder:hr,location:gr,parentFolderId:vr})=>{const{data:xr,isLoading:Er}=useFolderStructure({enabled:!0}),{canCreate:Cr,isLoading:wr,canUpdate:Rr}=useMediaLibraryPermissions(),[kr,Dr]=reactExports.useState(!1),{formatMessage:Br,formatDate:Hr}=useIntl(),{trackUsage:Gr}=useTracking(),{editFolder:qr,isLoading:zr}=useEditFolder(),{remove:Qr}=useBulkRemove(),{toggleNotification:sn}=useNotification(),hn=wr||Er,vn=!!hr,yn=hr&&!Rr||!hr&&!Cr,gn=Er?{name:"",parent:null}:{name:hr?.name??"",parent:{value:vr?parseInt(vr.toString(),10):void 0,label:vr?xr&&findRecursiveFolderByValue(xr,parseInt(vr.toString(),10))?.label:xr?.[0].label}},bn=async($n,{setErrors:Sn})=>{try{if(await qr({...$n,parent:$n.parent?.value??null},hr?.id),sn({type:"success",message:Br(vn?{id:getTrad("modal.folder-notification-edited-success"),defaultMessage:"Folder successfully edited"}:{id:getTrad("modal.folder-notification-created-success"),defaultMessage:"Folder successfully created"})}),vn){const Cn=vr?parseInt(vr.toString(),10)!==$n.parent?.value:vr===null&&!!$n.parent?.value;Gr("didEditMediaLibraryElements",{location:gr,type:"folder",changeLocation:Cn})}else Gr("didAddMediaLibraryFolders",{location:gr});mr({created:!0})}catch(Cn){const Rn=getAPIInnerErrors(Cn,{getTrad}),Bn=Object.entries(Rn).reduce((Fn,[Hn,Gn])=>(Fn[Hn]=Gn.defaultMessage,Fn),{});isEmpty$1(Bn)||Sn(Bn)}},xn=async()=>{hr&&await Qr([hr]),Dr(!1),mr()};return hn?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(EditFolderModalHeader,{isEditing:vn}),jsxRuntimeExports.jsx(Modal$1.Body,{children:jsxRuntimeExports.jsx(Flex,{justifyContent:"center",paddingTop:4,paddingBottom:4,children:jsxRuntimeExports.jsx(Loader,{children:Br({id:getTrad("content.isLoading"),defaultMessage:"Content is loading."})})})})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Formik,{validationSchema:folderSchema,validateOnChange:!1,onSubmit:bn,initialValues:gn,children:({values:$n,errors:Sn,handleChange:Cn,setFieldValue:Rn})=>jsxRuntimeExports.jsxs(Form$1,{noValidate:!0,children:[jsxRuntimeExports.jsx(EditFolderModalHeader,{isEditing:vn}),jsxRuntimeExports.jsx(Modal$1.Body,{children:jsxRuntimeExports.jsxs(Grid.Root,{gap:4,children:[vn&&jsxRuntimeExports.jsx(Grid.Item,{xs:12,col:12,direction:"column",alignItems:"stretch",children:jsxRuntimeExports.jsx(ContextInfo,{blocks:[{label:Br({id:getTrad("modal.folder.create.elements"),defaultMessage:"Elements"}),value:Br({id:getTrad("modal.folder.elements.count"),defaultMessage:"{folderCount} folders, {assetCount} assets"},{assetCount:hr?.files?.count??0,folderCount:hr?.children?.count??0})},{label:Br({id:getTrad("modal.folder.create.creation-date"),defaultMessage:"Creation Date"}),value:Hr(new Date(hr.createdAt))}]})}),jsxRuntimeExports.jsx(Grid.Item,{xs:12,col:6,direction:"column",alignItems:"stretch",children:jsxRuntimeExports.jsxs(Field.Root,{name:"name",error:typeof Sn.name=="string"?Sn.name:void 0,children:[jsxRuntimeExports.jsx(Field.Label,{children:Br({id:getTrad("form.input.label.folder-name"),defaultMessage:"Name"})}),jsxRuntimeExports.jsx(TextInput,{value:$n.name,onChange:Cn,disabled:yn}),jsxRuntimeExports.jsx(Field.Error,{})]})}),jsxRuntimeExports.jsx(Grid.Item,{xs:12,col:6,direction:"column",alignItems:"stretch",children:jsxRuntimeExports.jsxs(Field.Root,{id:"folder-parent",children:[jsxRuntimeExports.jsx(Field.Label,{children:Br({id:getTrad("form.input.label.folder-location"),defaultMessage:"Location"})}),jsxRuntimeExports.jsx(SelectTree,{options:xr,onChange:Bn=>{Rn("parent",Bn)},isDisabled:yn,defaultValue:$n.parent,name:"parent",menuPortalTarget:document.querySelector("body"),inputId:"folder-parent",disabled:yn,error:typeof Sn.parent=="string"?Sn.parent:void 0,ariaErrorMessage:"folder-parent-error"}),Sn.parent&&jsxRuntimeExports.jsx(Typography,{variant:"pi",tag:"p",id:"folder-parent-error",textColor:"danger600",children:typeof Sn.parent=="string"?Sn.parent:void 0})]})})]})}),jsxRuntimeExports.jsxs(Modal$1.Footer,{children:[jsxRuntimeExports.jsx(Button,{onClick:()=>mr(),variant:"tertiary",name:"cancel",children:Br({id:"cancel",defaultMessage:"Cancel"})}),jsxRuntimeExports.jsxs(Flex,{gap:2,children:[vn&&Rr&&jsxRuntimeExports.jsx(Button,{type:"button",variant:"danger-light",onClick:()=>Dr(!0),name:"delete",disabled:!Rr||zr,children:Br({id:getTrad("modal.folder.create.delete"),defaultMessage:"Delete folder"})}),jsxRuntimeExports.jsx(Button,{name:"submit",loading:zr,disabled:yn,type:"submit",children:Br(vn?{id:getTrad("modal.folder.edit.submit"),defaultMessage:"Save"}:{id:getTrad("modal.folder.create.submit"),defaultMessage:"Create"})})]})]})]})}),jsxRuntimeExports.jsx(RemoveFolderDialog,{open:kr,onClose:()=>Dr(!1),onConfirm:xn})]})},EditFolderDialog=({open:mr,onClose:hr,...gr})=>jsxRuntimeExports.jsx(Modal$1.Root,{open:mr,onOpenChange:hr,children:jsxRuntimeExports.jsx(Modal$1.Content,{children:jsxRuntimeExports.jsx(EditFolderContent,{...gr,onClose:hr,open:mr})})}),useFolder=(mr,{enabled:hr=!0}={})=>{const{toggleNotification:gr}=useNotification(),{get:vr}=useFetchClient(),{formatMessage:xr}=useIntl(),{data:Er,error:Cr,isLoading:wr}=useQuery([pluginId,"folder",mr],async()=>{const{data:{data:Rr}}=await vr(`/upload/folders/${mr}`,{params:{populate:{parent:{populate:{parent:"*"}}}}});return Rr},{retry:!1,enabled:hr,staleTime:0,cacheTime:0,onError(){gr({type:"danger",message:xr({id:getTrad("notification.warning.404"),defaultMessage:"Not found"})})}});return{data:Er,error:Cr,isLoading:wr}},usePersistentState=(mr,hr)=>{const[gr,vr]=reactExports.useState(()=>{const xr=window.localStorage.getItem(mr);if(xr!==null)try{return JSON.parse(xr)}catch{return xr}return hr});return reactExports.useEffect(()=>{window.localStorage.setItem(mr,JSON.stringify(gr))},[mr,gr]),[gr,vr]},Extension$1=dt$3.span`
  text-transform: uppercase;
`,CardActionsContainer=dt$3(CardActionImpl)`
  opacity: 0;

  &:focus-within {
    opacity: 1;
  }
`,CardContainer=dt$3(Card$1)`
  cursor: pointer;

  &:hover {
    ${CardActionsContainer} {
      opacity: 1;
    }
  }
`,AssetCardBase=({children:mr,extension:hr,isSelectable:gr=!0,name:vr,onSelect:xr,onRemove:Er,onEdit:Cr,selected:wr=!1,subtitle:Rr="",variant:kr="Image"})=>{const{formatMessage:Dr}=useIntl(),Br=Gr=>{Cr&&Cr(Gr)},Hr=Gr=>{Gr.stopPropagation()};return jsxRuntimeExports.jsxs(CardContainer,{role:"button",height:"100%",tabIndex:-1,onClick:Br,children:[jsxRuntimeExports.jsxs(CardHeader,{children:[gr&&jsxRuntimeExports.jsx("div",{onClick:Hr,children:jsxRuntimeExports.jsx(CardCheckbox,{checked:wr,onCheckedChange:xr})}),(Er||Cr)&&jsxRuntimeExports.jsxs(CardActionsContainer,{onClick:Hr,position:"end",children:[Er&&jsxRuntimeExports.jsx(IconButton,{label:Dr({id:getTrad("control-card.remove-selection"),defaultMessage:"Remove from selection"}),onClick:Er,children:jsxRuntimeExports.jsx(ForwardRef$j$1,{})}),Cr&&jsxRuntimeExports.jsx(IconButton,{label:Dr({id:getTrad("control-card.edit"),defaultMessage:"Edit"}),onClick:Cr,children:jsxRuntimeExports.jsx(ForwardRef$1r,{})})]}),mr]}),jsxRuntimeExports.jsxs(CardBody,{children:[jsxRuntimeExports.jsxs(CardContent,{children:[jsxRuntimeExports.jsx(Box,{paddingTop:1,children:jsxRuntimeExports.jsx(Typography,{tag:"h2",children:jsxRuntimeExports.jsx(CardTitle,{tag:"span",children:vr})})}),jsxRuntimeExports.jsxs(CardSubtitle,{children:[jsxRuntimeExports.jsx(Extension$1,{children:hr}),Rr]})]}),jsxRuntimeExports.jsx(Flex,{paddingTop:1,grow:1,children:jsxRuntimeExports.jsx(CardBadge,{children:Dr({id:getTrad(`settings.section.${kr.toLowerCase()}.label`),defaultMessage:kr})})})]})]})},AudioPreview=({url:mr,alt:hr})=>jsxRuntimeExports.jsx(Box,{children:jsxRuntimeExports.jsx("audio",{controls:!0,src:mr,children:hr})}),AudioPreviewWrapper$1=dt$3(Box)`
  canvas,
  audio {
    display: block;
    max-width: 100%;
    max-height: ${({size:mr})=>mr==="M"?16.4:8.8}rem;
  }
`,AudioAssetCard=({name:mr,url:hr,size:gr="M",selected:vr=!1,...xr})=>jsxRuntimeExports.jsx(AssetCardBase,{name:mr,selected:vr,...xr,variant:"Audio",children:jsxRuntimeExports.jsx(CardAsset$2,{size:gr,children:jsxRuntimeExports.jsx(Flex,{alignItems:"center",children:jsxRuntimeExports.jsx(AudioPreviewWrapper$1,{size:gr,children:jsxRuntimeExports.jsx(AudioPreview,{url:hr,alt:mr})})})})}),CardAsset=dt$3(Flex)`
  border-radius: ${({theme:mr})=>mr.borderRadius} ${({theme:mr})=>mr.borderRadius} 0 0;
  background: linear-gradient(
    180deg,
    ${({theme:mr})=>mr.colors.neutral0} 0%,
    ${({theme:mr})=>mr.colors.neutral100} 121.48%
  );
`,DocAssetCard=({name:mr,extension:hr,size:gr="M",selected:vr=!1,...xr})=>{const{formatMessage:Er}=useIntl();return jsxRuntimeExports.jsx(AssetCardBase,{name:mr,extension:hr,selected:vr,...xr,variant:"Doc",children:jsxRuntimeExports.jsx(CardAsset,{width:"100%",height:gr==="S"?"8.8rem":"16.4rem",justifyContent:"center",children:jsxRuntimeExports.jsxs(Flex,{gap:2,direction:"column",alignItems:"center",children:[hr==="pdf"?jsxRuntimeExports.jsx(ForwardRef$3j,{"aria-label":mr,fill:"neutral500",width:24,height:24}):jsxRuntimeExports.jsx(ForwardRef$3p,{"aria-label":mr,fill:"neutral500",width:24,height:24}),jsxRuntimeExports.jsx(Typography,{textColor:"neutral500",variant:"pi",children:Er({id:"noPreview",defaultMessage:"No preview available"})})]})})})},ImageAssetCard=({height:mr,width:hr,thumbnail:gr,size:vr="M",alt:xr,isUrlSigned:Er,selected:Cr=!1,...wr})=>{const Rr=Er?gr:appendSearchParamsToUrl({url:gr,params:{updatedAt:wr.updatedAt}}),kr=mr&&hr?` - ${hr}✕${mr}`:void 0;return jsxRuntimeExports.jsx(AssetCardBase,{...wr,selected:Cr,subtitle:kr,variant:"Image",children:jsxRuntimeExports.jsx(CardAsset$2,{src:Rr,size:vr,alt:xr})})},HAVE_FUTURE_DATA=3,VideoPreview=({url:mr,mime:hr,onLoadDuration:gr=()=>{},alt:vr,...xr})=>{const Er=wr=>{if(wr.currentTarget.currentTime>0){const Rr=wr.currentTarget,kr=document.createElement("canvas");kr.height=Rr.videoHeight,kr.width=Rr.videoWidth,kr.getContext("2d")?.drawImage(Rr,0,0,Rr.videoWidth,Rr.videoHeight),Rr.replaceWith(kr),gr&&gr(Rr.duration)}},Cr=wr=>{const Rr=wr.currentTarget;Rr.readyState<HAVE_FUTURE_DATA||Rr.play()};return jsxRuntimeExports.jsxs(Box,{tag:"figure",...xr,children:[jsxRuntimeExports.jsx("video",{muted:!0,onLoadedData:Cr,src:mr,crossOrigin:"anonymous",onTimeUpdate:Er,children:jsxRuntimeExports.jsx("source",{type:hr})}),jsxRuntimeExports.jsx(VisuallyHidden,{tag:"figcaption",children:vr})]},mr)},VideoPreviewWrapper$2=dt$3(Box)`
  canvas,
  video {
    display: block;
    pointer-events: none;
    max-width: 100%;
    max-height: ${({size:mr})=>mr==="M"?16.4:8.8}rem;
  }
`,VideoAssetCard=({name:mr,url:hr,mime:gr,size:vr="M",selected:xr=!1,...Er})=>{const[Cr,wr]=reactExports.useState(),Rr=Cr&&formatDuration(Cr);return jsxRuntimeExports.jsxs(AssetCardBase,{selected:xr,name:mr,...Er,variant:"Video",children:[jsxRuntimeExports.jsx(CardAsset$2,{size:vr,children:jsxRuntimeExports.jsx(VideoPreviewWrapper$2,{size:vr,children:jsxRuntimeExports.jsx(VideoPreview,{url:hr,mime:gr,onLoadDuration:wr,alt:mr})})}),jsxRuntimeExports.jsx(CardTimer,{children:Rr||"..."})]})},AssetCard=({asset:mr,isSelected:hr=!1,onSelect:gr,onEdit:vr,onRemove:xr,size:Er="M",local:Cr=!1})=>{const wr=gr?()=>gr(mr):void 0,Rr={id:mr.id,isSelectable:mr.isSelectable,extension:getFileExtension(mr.ext),name:mr.name,url:Cr?mr.url:createAssetUrl(mr,!0),mime:mr.mime,onEdit:vr?()=>vr(mr):void 0,onSelect:wr,onRemove:xr?()=>xr(mr):void 0,selected:hr,size:Er};return mr.mime?.includes(AssetType.Video)?jsxRuntimeExports.jsx(VideoAssetCard,{...Rr}):mr.mime?.includes(AssetType.Image)?jsxRuntimeExports.jsx(ImageAssetCard,{alt:mr.alternativeText||mr.name,height:mr.height,thumbnail:prefixFileUrlWithBackendUrl(mr?.formats?.thumbnail?.url||mr.url),width:mr.width,updatedAt:mr.updatedAt,isUrlSigned:mr?.isUrlSigned||!1,...Rr}):mr.mime?.includes(AssetType.Audio)?jsxRuntimeExports.jsx(AudioAssetCard,{...Rr}):jsxRuntimeExports.jsx(DocAssetCard,{...Rr})},Draggable=({children:mr,id:hr,index:gr,moveItem:vr})=>{const xr=reactExports.useRef(null),[,Er]=useDrop({accept:"draggable",hover(kr){xr.current&&kr.id!==hr&&(vr(kr.index,gr),kr.index=gr)}}),[{isDragging:Cr},wr]=useDrag({type:"draggable",item(){return{index:gr,id:hr}},collect:kr=>({isDragging:kr.isDragging()})}),Rr=Cr?.2:1;return wr(Er(xr)),jsxRuntimeExports.jsx("div",{ref:xr,style:{opacity:Rr,cursor:"move"},children:mr})},AssetGridList=({allowedTypes:mr=["files","images","videos","audios"],assets:hr,onEditAsset:gr,onSelectAsset:vr,selectedAssets:xr,size:Er="M",onReorderAsset:Cr,title:wr=null})=>jsxRuntimeExports.jsxs(KeyboardNavigable,{tagName:"article",children:[wr&&jsxRuntimeExports.jsx(Box,{paddingTop:2,paddingBottom:2,children:jsxRuntimeExports.jsx(Typography,{tag:"h2",variant:"delta",fontWeight:"semiBold",children:wr})}),jsxRuntimeExports.jsx(Grid.Root,{gap:4,children:hr.map((Rr,kr)=>{const Dr=!!xr.find(Br=>Br.id===Rr.id);return Cr?jsxRuntimeExports.jsx(Grid.Item,{col:3,height:"100%",children:jsxRuntimeExports.jsx(Draggable,{index:kr,moveItem:Cr,id:Rr.id,children:jsxRuntimeExports.jsx(AssetCard,{allowedTypes:mr,asset:Rr,isSelected:Dr,onEdit:gr?()=>gr(Rr):void 0,onSelect:()=>vr(Rr),size:Er})})},Rr.id):jsxRuntimeExports.jsx(Grid.Item,{col:3,height:"100%",direction:"column",alignItems:"stretch",children:jsxRuntimeExports.jsx(AssetCard,{allowedTypes:mr,asset:Rr,isSelected:Dr,onEdit:gr?()=>gr(Rr):void 0,onSelect:()=>vr(Rr),size:Er},Rr.id)},Rr.id)})})]}),CrumbSimpleMenuAsync=({parentsToOmit:mr=[],currentFolderId:hr,onChangeFolder:gr})=>{const[vr,xr]=reactExports.useState(!1),{data:Er,isLoading:Cr}=useFolderStructure({enabled:vr}),{pathname:wr}=useLocation(),[{query:Rr}]=useQueryParams(),{formatMessage:kr}=useIntl(),Dr=Er&&getFolderParents(Er,hr),Br=Dr&&Dr.filter(Hr=>typeof Hr.id=="number"&&!mr.includes(Hr.id)&&Hr.id!==null);return jsxRuntimeExports.jsxs(CrumbSimpleMenu,{onOpen:()=>xr(!0),onClose:()=>xr(!1),"aria-label":kr({id:getTrad("header.breadcrumbs.menu.label"),defaultMessage:"Get more ascendants folders"}),label:"...",children:[Cr&&jsxRuntimeExports.jsx(MenuItem$2,{children:jsxRuntimeExports.jsx(Loader,{small:!0,children:kr({id:getTrad("content.isLoading"),defaultMessage:"Content is loading."})})}),Br&&Br.map(Hr=>{if(gr)return jsxRuntimeExports.jsx(MenuItem$2,{tag:"button",type:"button",onClick:()=>gr(Number(Hr.id),Hr.path),children:Hr.label},Hr.id);const Gr=getFolderURL(wr,Rr,{folder:typeof Hr?.id=="string"?Hr.id:void 0,folderPath:Hr?.path});return jsxRuntimeExports.jsx(MenuItem$2,{isLink:!0,href:Gr,children:Hr.label},Hr.id)})]})},Breadcrumbs=({breadcrumbs:mr,onChangeFolder:hr,currentFolderId:gr,...vr})=>{const{formatMessage:xr}=useIntl();return jsxRuntimeExports.jsx(Breadcrumbs$1,{...vr,children:mr.map((Er,Cr)=>{if(Array.isArray(Er))return jsxRuntimeExports.jsx(CrumbSimpleMenuAsync,{parentsToOmit:[...mr].splice(Cr+1,mr.length-1).map(Rr=>Rr.id),currentFolderId:gr,onChangeFolder:hr},`breadcrumb-${Er?.id??"menu"}`);const wr=Er.id===null&&gr===void 0;return gr!==Er.id&&!wr?hr?jsxRuntimeExports.jsx(CrumbLink,{type:"button",onClick:()=>hr(Er.id,Er.path),children:typeof Er.label!="string"&&Er.label?.id?xr(Er.label):Er.label},`breadcrumb-${Er?.id??"root"}`):jsxRuntimeExports.jsx(CrumbLink,{to:Er.href,tag:Link$1,children:typeof Er.label!="string"&&Er.label?.id?xr(Er.label):Er.label},`breadcrumb-${Er?.id??"root"}`):jsxRuntimeExports.jsx(Crumb,{isCurrent:Cr+1===mr.length,children:typeof Er.label!="string"&&Er.label?.id?xr(Er.label):Er.label},`breadcrumb-${Er?.id??"root"}`)})})},EmptyAssetCard=dt$3(Box)`
  background: linear-gradient(
    180deg,
    rgba(234, 234, 239, 0) 0%,
    ${({theme:mr})=>mr.colors.neutral200} 100%
  );
  opacity: 0.33;
`,PlaceholderSize={S:138,M:234},EmptyAssetGrid=({count:mr,size:hr})=>jsxRuntimeExports.jsx(Layouts.Grid,{size:hr,children:Array(mr).fill(null).map((gr,vr)=>jsxRuntimeExports.jsx(EmptyAssetCard,{height:`${PlaceholderSize[hr]}px`,hasRadius:!0},`empty-asset-card-${vr}`))}),EmptyAssets=({icon:mr=ForwardRef$J,content:hr,action:gr,size:vr="M",count:xr=12})=>jsxRuntimeExports.jsxs(Box,{position:"relative",children:[jsxRuntimeExports.jsx(EmptyAssetGrid,{size:vr,count:xr}),jsxRuntimeExports.jsx(Box,{position:"absolute",top:11,width:"100%",children:jsxRuntimeExports.jsxs(Flex,{direction:"column",alignItems:"center",gap:4,textAlign:"center",children:[jsxRuntimeExports.jsxs(Flex,{direction:"column",alignItems:"center",gap:6,children:[jsxRuntimeExports.jsx(mr,{width:"160px",height:"88px"}),jsxRuntimeExports.jsx(Typography,{variant:"delta",tag:"p",textColor:"neutral600",children:hr})]}),gr]})})]}),FolderCardContext=reactExports.createContext({});function useFolderCard(){return reactExports.useContext(FolderCardContext)}const FauxClickWrapper=dt$3.button`
  height: 100%;
  left: 0;
  position: absolute;
  opacity: 0;
  top: 0;
  width: 100%;

  &:hover,
  &:focus {
    text-decoration: none;
  }
`,StyledFolder=dt$3(ForwardRef$3b)`
  path {
    fill: currentColor;
  }
`,CardActionDisplay=dt$3(Box)`
  display: none;
`,Card=dt$3(Box)`
  &:hover,
  &:focus-within {
    ${CardActionDisplay} {
      display: ${({$isCardActions:mr})=>mr?"block":""};
    }
  }
`,FolderCard=reactExports.forwardRef(({children:mr,startAction:hr=null,cardActions:gr=null,ariaLabel:vr,onClick:xr,to:Er,...Cr},wr)=>{const Rr=reactExports.useId(),kr=reactExports.useMemo(()=>({id:Rr}),[Rr]);return jsxRuntimeExports.jsx(FolderCardContext.Provider,{value:kr,children:jsxRuntimeExports.jsxs(Card,{position:"relative",tabIndex:0,$isCardActions:!!gr,ref:wr,...Cr,children:[jsxRuntimeExports.jsx(FauxClickWrapper,{to:Er||void 0,as:Er?NavLink:"button",type:Er?void 0:"button",onClick:xr,tabIndex:-1,"aria-label":vr,"aria-hidden":!0}),jsxRuntimeExports.jsxs(Flex,{hasRadius:!0,borderStyle:"solid",borderWidth:"1px",borderColor:"neutral150",background:"neutral0",shadow:"tableShadow",padding:3,gap:2,cursor:"pointer",children:[hr,jsxRuntimeExports.jsx(Box,{hasRadius:!0,background:"secondary100",color:"secondary500",paddingBottom:2,paddingLeft:3,paddingRight:3,paddingTop:2,children:jsxRuntimeExports.jsx(StyledFolder,{width:"2.4rem",height:"2.4rem"})}),mr,jsxRuntimeExports.jsx(CardActionDisplay,{children:jsxRuntimeExports.jsx(CardActionImpl,{right:4,position:"end",children:gr})})]})]})})}),StyledBox=dt$3(Flex)`
  user-select: none;
`,FolderCardBody=mr=>{const{id:hr}=useFolderCard();return jsxRuntimeExports.jsx(StyledBox,{...mr,id:`${hr}-title`,"data-testid":`${hr}-title`,alignItems:"flex-start",direction:"column",maxWidth:"100%",overflow:"hidden",position:"relative"})},BoxOutline=dt$3(Box)`
  &:focus {
    outline: 2px solid ${({theme:mr})=>mr.colors.primary600};
    outline-offset: -2px;
  }
`,BoxTextDecoration=dt$3(BoxOutline)`
  text-decoration: none;
`,FolderCardBodyAction=({to:mr,...hr})=>mr?jsxRuntimeExports.jsx(BoxTextDecoration,{padding:1,tag:NavLink,maxWidth:"100%",to:mr,...hr}):jsxRuntimeExports.jsx(BoxOutline,{padding:1,tag:"button",type:"button",maxWidth:"100%",...hr}),FolderGridList=({title:mr=null,children:hr})=>jsxRuntimeExports.jsxs(KeyboardNavigable,{tagName:"article",children:[mr&&jsxRuntimeExports.jsx(Box,{paddingBottom:2,children:jsxRuntimeExports.jsx(Typography,{tag:"h2",variant:"delta",fontWeight:"semiBold",children:mr})}),jsxRuntimeExports.jsx(Grid.Root,{gap:4,children:hr})]}),SortPicker=({onChangeSort:mr,value:hr})=>{const{formatMessage:gr}=useIntl();return jsxRuntimeExports.jsx(SingleSelect,{size:"S",value:hr,onChange:vr=>mr(vr.toString()),"aria-label":gr({id:getTrad("sort.label"),defaultMessage:"Sort by"}),placeholder:gr({id:getTrad("sort.label"),defaultMessage:"Sort by"}),children:sortOptions.map(vr=>jsxRuntimeExports.jsx(SingleSelectOption,{value:vr.value,children:gr({id:getTrad(vr.key),defaultMessage:`${vr.value}`})},vr.key))})},VideoPreviewWrapper$1=dt$3(Box)`
  figure {
    width: ${({theme:mr})=>mr.spaces[7]};
    height: ${({theme:mr})=>mr.spaces[7]};
  }

  canvas,
  video {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 50%;
  }
`,PreviewCell=({type:mr,content:hr})=>{const{formatMessage:gr}=useIntl();if(mr==="folder")return jsxRuntimeExports.jsx(Flex,{justifyContent:"center",background:"secondary100",width:"3.2rem",height:"3.2rem",borderRadius:"50%",children:jsxRuntimeExports.jsx(ForwardRef$3b,{"aria-label":gr({id:getTrad("header.actions.add-assets.folder"),defaultMessage:"folder"}),fill:"secondary500",width:"1.6rem",height:"1.6rem"})});const{alternativeText:vr,ext:xr,formats:Er,mime:Cr,name:wr,url:Rr}=hr;if(Cr?.includes(AssetType.Image)){const kr=prefixFileUrlWithBackendUrl(Er?.thumbnail?.url)??prefixFileUrlWithBackendUrl(Rr);return jsxRuntimeExports.jsx(Avatar.Item,{src:kr,alt:vr||void 0,preview:!0,fallback:vr})}return Cr?.includes(AssetType.Video)?jsxRuntimeExports.jsx(VideoPreviewWrapper$1,{children:jsxRuntimeExports.jsx(VideoPreview,{url:createAssetUrl(hr,!0)||"",mime:Cr,alt:vr??wr})}):jsxRuntimeExports.jsx(Box,{background:"secondary100",color:"secondary600",width:"3.2rem",height:"3.2rem",children:getFileExtension(xr)})},CellContent=({cellType:mr,contentType:hr,content:gr,name:vr})=>{const{formatDate:xr,formatMessage:Er}=useIntl(),Cr=gr[vr];switch(mr){case"image":return jsxRuntimeExports.jsx(PreviewCell,{type:hr,content:gr});case"date":if(typeof Cr=="string")return jsxRuntimeExports.jsx(Typography,{children:xr(parseISO(Cr),{dateStyle:"full"})});case"size":if(hr==="folder")return jsxRuntimeExports.jsx(Typography,{"aria-label":Er({id:"list.table.content.empty-label",defaultMessage:"This field is empty"}),children:"-"});if(typeof Cr=="string"||typeof Cr=="number")return jsxRuntimeExports.jsx(Typography,{children:formatBytes(Cr)});case"ext":if(hr==="folder")return jsxRuntimeExports.jsx(Typography,{"aria-label":Er({id:"list.table.content.empty-label",defaultMessage:"This field is empty"}),children:"-"});if(typeof Cr=="string")return jsxRuntimeExports.jsx(Typography,{children:getFileExtension(Cr)?.toUpperCase()});case"text":if(typeof Cr=="string")return jsxRuntimeExports.jsx(Typography,{children:Cr});default:return jsxRuntimeExports.jsx(Typography,{"aria-label":Er({id:"list.table.content.empty-label",defaultMessage:"This field is empty"}),children:"-"})}},TableRows=({onChangeFolder:mr=null,onEditAsset:hr,onEditFolder:gr,onSelectOne:vr,rows:xr=[],selected:Er=[]})=>{const{formatMessage:Cr}=useIntl(),wr=(Rr,kr,Dr,Br)=>{Br==="asset"?hr(Rr):mr&&mr(kr,Dr)};return jsxRuntimeExports.jsx(Tbody,{children:xr.map(Rr=>{const{path:kr,id:Dr,isSelectable:Br,name:Hr,folderURL:Gr,type:qr}=Rr,zr=!!Er.find(Qr=>Qr.id===Dr&&Qr.type===qr);return jsxRuntimeExports.jsxs(Tr,{onClick:()=>wr(Rr,Dr,kr||void 0,qr),children:[jsxRuntimeExports.jsx(Td,{onClick:Qr=>Qr.stopPropagation(),children:jsxRuntimeExports.jsx(CheckboxImpl,{"aria-label":Cr({id:qr==="asset"?"list-assets-select":"list.folder.select",defaultMessage:qr==="asset"?"Select {name} asset":"Select {name} folder"},{name:Hr}),disabled:!Br,onCheckedChange:()=>vr(Rr),checked:zr})}),tableHeaders.map(({name:Qr,type:sn})=>jsxRuntimeExports.jsx(Td,{children:jsxRuntimeExports.jsx(CellContent,{content:Rr,cellType:sn,contentType:qr,name:Qr})},Qr)),jsxRuntimeExports.jsx(Td,{onClick:Qr=>Qr.stopPropagation(),children:jsxRuntimeExports.jsxs(Flex,{justifyContent:"flex-end",children:[qr==="folder"&&(Gr?jsxRuntimeExports.jsx(IconButton,{tag:Link$1,label:Cr({id:getTrad("list.folders.link-label"),defaultMessage:"Access folder"}),to:Gr,variant:"ghost",children:jsxRuntimeExports.jsx(ForwardRef$3x,{})}):jsxRuntimeExports.jsx(IconButton,{tag:"button",label:Cr({id:getTrad("list.folders.link-label"),defaultMessage:"Access folder"}),onClick:()=>mr&&mr(Dr),variant:"ghost",children:jsxRuntimeExports.jsx(ForwardRef$3x,{})})),jsxRuntimeExports.jsx(IconButton,{label:Cr({id:getTrad("control-card.edit"),defaultMessage:"Edit"}),onClick:()=>qr==="asset"?hr(Rr):gr(Rr),variant:"ghost",children:jsxRuntimeExports.jsx(ForwardRef$1r,{})})]})})]},Dr)})})},TableList=({assetCount:mr=0,folderCount:hr=0,indeterminate:gr=!1,onChangeSort:vr=null,onChangeFolder:xr=null,onEditAsset:Er=null,onEditFolder:Cr=null,onSelectAll:wr,onSelectOne:Rr,rows:kr=[],selected:Dr=[],shouldDisableBulkSelect:Br=!1,sortQuery:Hr=""})=>{const{formatMessage:Gr}=useIntl(),[qr,zr]=Hr.split(":"),Qr=(sn,hn)=>{const yn=`${hn}:${sn&&zr==="ASC"?"DESC":"ASC"}`;vr&&vr(yn)};return jsxRuntimeExports.jsxs(Table$1,{colCount:tableHeaders.length+2,rowCount:mr+hr+1,children:[jsxRuntimeExports.jsx(Thead,{children:jsxRuntimeExports.jsxs(Tr,{children:[jsxRuntimeExports.jsx(Th,{children:jsxRuntimeExports.jsx(CheckboxImpl,{"aria-label":Gr({id:getTrad("bulk.select.label"),defaultMessage:"Select all folders & assets"}),disabled:Br,onCheckedChange:sn=>wr(sn,kr),checked:gr&&!Br?"indeterminate":(mr>0||hr>0)&&Dr.length===mr+hr})}),tableHeaders.map(({metadatas:{label:sn,isSortable:hn},name:vn,key:yn})=>{const gn=qr===vn,bn=zr==="ASC",xn=Gr(sn),$n=Gr({id:"list.table.header.sort",defaultMessage:"Sort on {label}"},{label:xn});return jsxRuntimeExports.jsx(Th,{action:gn&&jsxRuntimeExports.jsx(IconButton,{label:$n,onClick:()=>Qr(gn,vn),variant:"ghost",children:bn?jsxRuntimeExports.jsx(ForwardRef$4J,{}):jsxRuntimeExports.jsx(ForwardRef$4L,{})}),children:jsxRuntimeExports.jsx(TooltipImpl,{label:hn?$n:xn,children:hn?jsxRuntimeExports.jsx(Typography,{onClick:()=>Qr(gn,vn),tag:gn?"span":"button",textColor:"neutral600",variant:"sigma",children:xn}):jsxRuntimeExports.jsx(Typography,{textColor:"neutral600",variant:"sigma",children:xn})})},yn)}),jsxRuntimeExports.jsx(Th,{children:jsxRuntimeExports.jsx(VisuallyHidden,{children:Gr({id:getTrad("list.table.header.actions"),defaultMessage:"actions"})})})]})}),jsxRuntimeExports.jsx(TableRows,{onChangeFolder:xr,onEditAsset:Er,onEditFolder:Cr,rows:kr,onSelectOne:Rr,selected:Dr})]})},FilterTag=({attribute:mr,filter:hr,onClick:gr,operator:vr,value:xr})=>{const{formatMessage:Er,formatDate:Cr,formatTime:wr}=useIntl(),Rr=()=>{gr(hr)},{fieldSchema:kr}=mr,Dr=kr?.type;let Br=xr;if(Dr==="date"&&(Br=Cr(xr,{dateStyle:"full"})),Dr==="datetime"&&(Br=Cr(xr,{dateStyle:"full",timeStyle:"short"})),Dr==="time"){const[Gr,qr]=xr.split(":"),zr=new Date;zr.setHours(Number(Gr)),zr.setMinutes(Number(qr)),Br=wr(zr,{hour:"numeric",minute:"numeric"})}const Hr=`${mr.metadatas?.label} ${Er({id:`components.FilterOptions.FILTER_TYPES.${vr}`,defaultMessage:vr})} ${Br}`;return jsxRuntimeExports.jsx(Tag,{onClick:Rr,icon:jsxRuntimeExports.jsx(ForwardRef$3$,{}),padding:1,children:Hr})},FilterList=({appliedFilters:mr,filtersSchema:hr,onRemoveFilter:gr})=>{const vr=xr=>{const Er=mr.filter(Cr=>{const wr=Object.keys(xr)[0],Rr=xr[wr];if(Rr!==void 0){const kr=Object.keys(Rr)[0],Dr=Rr[kr];if(typeof Dr=="string"){const Br=decodeURIComponent(Dr);return Cr[wr]?.[kr]!==Br}}return!0});gr(Er)};return mr.map((xr,Er)=>{const Cr=Object.keys(xr)[0],wr=hr.find(({name:Hr})=>Hr===Cr);if(!wr)return null;const Rr=xr[Cr],kr=Object.keys(Rr)[0];let Dr=Rr[kr];Array.isArray(Dr)?Dr=Dr.join(", "):typeof Dr=="object"?Dr=Object.values(Dr).join(", "):Dr=Array.isArray(Dr)||typeof Dr=="object"?Object.values(Dr).join(", "):decodeURIComponent(Dr);let Br=kr;return wr?.name==="mime"&&(Br=kr==="$contains"?"$eq":"$ne",kr==="$not"&&(Dr="file",Br="$eq"),["image","video"].includes(Dr[0])&&["image","video"].includes(Dr[1])&&(Dr="file",Br="$ne")),jsxRuntimeExports.jsx(FilterTag,{attribute:wr,filter:xr,onClick:vr,operator:Br,value:Dr},`${Cr}-${Er}`)})},FilterValueInput=({label:mr="",onChange:hr,options:gr=[],type:vr,value:xr=""})=>{const{formatMessage:Er}=useIntl();return vr==="date"?jsxRuntimeExports.jsx(DateTimePicker,{clearLabel:Er({id:"clearLabel",defaultMessage:"Clear"}),"aria-label":mr,name:"datetimepicker",onChange:Cr=>{const wr=Cr?new Date(Cr).toISOString():"";hr(wr)},onClear:()=>hr(""),value:xr?new Date(xr):void 0}):jsxRuntimeExports.jsx(SingleSelect,{"aria-label":mr,onChange:Cr=>hr(Cr.toString()),value:xr,children:gr?.map(Cr=>jsxRuntimeExports.jsx(SingleSelectOption,{value:Cr.value,children:Cr.label},Cr.value))})},getFilterList=({fieldSchema:{type:mr,mainField:hr}})=>{switch(hr?.schema.type?hr.schema.type:mr){case"enumeration":return[{intlLabel:{id:"components.FilterOptions.FILTER_TYPES.$eq",defaultMessage:"is"},value:"$contains"},{intlLabel:{id:"components.FilterOptions.FILTER_TYPES.$ne",defaultMessage:"is not"},value:"$notContains"}];case"date":return[{intlLabel:{id:"components.FilterOptions.FILTER_TYPES.$eq",defaultMessage:"is"},value:"$eq"},{intlLabel:{id:"components.FilterOptions.FILTER_TYPES.$ne",defaultMessage:"is not"},value:"$ne"},{intlLabel:{id:"components.FilterOptions.FILTER_TYPES.$gt",defaultMessage:"is greater than"},value:"$gt"},{intlLabel:{id:"components.FilterOptions.FILTER_TYPES.$gte",defaultMessage:"is greater than or equal to"},value:"$gte"},{intlLabel:{id:"components.FilterOptions.FILTER_TYPES.$lt",defaultMessage:"is less than"},value:"$lt"},{intlLabel:{id:"components.FilterOptions.FILTER_TYPES.$lte",defaultMessage:"is less than or equal to"},value:"$lte"}];default:return[{intlLabel:{id:"components.FilterOptions.FILTER_TYPES.$eq",defaultMessage:"is"},value:"$eq"},{intlLabel:{id:"components.FilterOptions.FILTER_TYPES.$eqi",defaultMessage:"is (case insensitive)"},value:"$eqi"},{intlLabel:{id:"components.FilterOptions.FILTER_TYPES.$ne",defaultMessage:"is not"},value:"$ne"},{intlLabel:{id:"components.FilterOptions.FILTER_TYPES.$null",defaultMessage:"is null"},value:"$null"},{intlLabel:{id:"components.FilterOptions.FILTER_TYPES.$notNull",defaultMessage:"is not null"},value:"$notNull"}]}},FilterPopover=({displayedFilters:mr,filters:hr,onSubmit:gr,onToggle:vr})=>{const{formatMessage:xr}=useIntl(),[Er,Cr]=reactExports.useState({name:"createdAt",filter:"$eq",value:""}),wr=Br=>{const Hr=mr.find(sn=>sn.name===Br);if(!Hr)return;const{fieldSchema:{type:Gr,options:qr}}=Hr;let zr="";Gr==="enumeration"&&(zr=qr?.[0].value||"");const Qr=getFilterList(Hr)[0].value;Cr({name:Br.toString(),filter:Qr,value:zr})},Rr=Br=>{Er.name==="mime"?Cr(Hr=>({...Hr,filter:Br.toString(),value:"image"})):Cr(Hr=>({...Hr,filter:Br.toString(),value:""}))},kr=Br=>{Br.preventDefault(),Br.stopPropagation();const Hr=encodeURIComponent(Er.value);if(Hr){if(Er.name==="mime"){const qr=hr.filter(gn=>Object.keys(gn)[0]==="mime");if(Er.value==="file"){const gn=hr.filter(Sn=>Object.keys(Sn)[0]!=="mime");let bn=!1,xn;if(Er.filter==="$contains"?(bn=qr.find(Sn=>{if(typeof Sn.mime?.$not!="string"&&!Array.isArray(Sn.mime?.$not))return Sn.mime?.$not?.$contains!==void 0})!==void 0,xn={mime:{$not:{$contains:["image","video"]}}}):(bn=qr.find(Sn=>Array.isArray(Sn.mime?.$contains))!==void 0,xn={mime:{$contains:["image","video"]}}),bn){vr();return}const $n=[...gn,xn];gr($n),vr();return}if(qr.find(gn=>{const bn=Er.filter;return gn.mime&&gn.mime[bn]===Er.value})!==void 0){vr();return}const Qr=hr.filter(gn=>Object.keys(gn)[0]!=="mime"?!0:!(typeof gn.mime?.$not!="string"&&!Array.isArray(gn.mime?.$not)&&gn.mime?.$not?.$contains!==void 0||Array.isArray(gn?.mime?.$contains))),sn=Er.filter==="$contains"?"$notContains":"$contains",hn=Qr.findIndex(gn=>gn.mime?.[sn]===Er.value),vn=hn!==-1,yn={[Er.name]:{[Er.filter]:Er.value}};if(!vn){const gn=[...Qr,yn];gr(gn),vr();return}if(vn){const gn=Qr.slice();gn.splice(hn,1,yn),gr(gn),vr()}return}if(!(hr.find(qr=>{const zr=Er.name;return qr[zr]&&qr[zr]?.[zr]===Hr})!==void 0)){const qr={[Er.name]:{[Er.filter]:Hr}},zr=[...hr,qr];gr(zr)}}vr()},Dr=mr.find(Br=>Br.name===Er.name);return jsxRuntimeExports.jsx(Popover.Content,{sideOffset:4,children:jsxRuntimeExports.jsx("form",{onSubmit:kr,children:jsxRuntimeExports.jsxs(Flex,{padding:3,direction:"column",alignItems:"stretch",gap:1,style:{minWidth:184},children:[jsxRuntimeExports.jsx(Box,{children:jsxRuntimeExports.jsx(SingleSelect,{"aria-label":xr({id:"app.utils.select-field",defaultMessage:"Select field"}),name:"name",size:"M",onChange:wr,value:Er.name,children:mr.map(Br=>jsxRuntimeExports.jsx(SingleSelectOption,{value:Br.name,children:Br.metadatas?.label},Br.name))})}),jsxRuntimeExports.jsx(Box,{children:jsxRuntimeExports.jsx(SingleSelect,{"aria-label":xr({id:"app.utils.select-filter",defaultMessage:"Select filter"}),name:"filter",size:"M",value:Er.filter,onChange:Rr,children:getFilterList(Dr).map(Br=>jsxRuntimeExports.jsx(SingleSelectOption,{value:Br.value,children:xr(Br.intlLabel)},Br.value))})}),jsxRuntimeExports.jsx(Box,{children:jsxRuntimeExports.jsx(FilterValueInput,{...Dr?.metadatas,...Dr?.fieldSchema,value:Er.value,onChange:Br=>Cr(Hr=>({...Hr,value:Br}))})}),jsxRuntimeExports.jsx(Box,{children:jsxRuntimeExports.jsx(Button,{size:"L",variant:"secondary",startIcon:jsxRuntimeExports.jsx(ForwardRef$1d,{}),type:"submit",fullWidth:!0,children:xr({id:"app.utils.add-filter",defaultMessage:"Add filter"})})})]})})})},Filters=({appliedFilters:mr,onChangeFilters:hr})=>{const[gr,vr]=reactExports.useState(!1),{formatMessage:xr}=useIntl();return jsxRuntimeExports.jsxs(Popover.Root,{open:gr,onOpenChange:vr,children:[jsxRuntimeExports.jsx(Popover.Trigger,{children:jsxRuntimeExports.jsx(Button,{variant:"tertiary",startIcon:jsxRuntimeExports.jsx(ForwardRef$3d,{}),size:"S",children:xr({id:"app.utils.filters",defaultMessage:"Filters"})})}),jsxRuntimeExports.jsx(FilterPopover,{onToggle:()=>vr(Er=>!Er),displayedFilters,filters:mr,onSubmit:hr}),mr&&jsxRuntimeExports.jsx(FilterList,{appliedFilters:mr,filtersSchema:displayedFilters,onRemoveFilter:hr})]})},PageSize=({onChangePageSize:mr,pageSize:hr})=>{const{formatMessage:gr}=useIntl(),vr=xr=>{mr(Number(xr))};return jsxRuntimeExports.jsxs(Flex,{children:[jsxRuntimeExports.jsxs(SingleSelect,{size:"S","aria-label":gr({id:"components.PageFooter.select",defaultMessage:"Entries per page"}),onChange:vr,value:hr.toString(),children:[jsxRuntimeExports.jsx(SingleSelectOption,{value:"10",children:"10"}),jsxRuntimeExports.jsx(SingleSelectOption,{value:"20",children:"20"}),jsxRuntimeExports.jsx(SingleSelectOption,{value:"50",children:"50"}),jsxRuntimeExports.jsx(SingleSelectOption,{value:"100",children:"100"})]}),jsxRuntimeExports.jsx(Box,{paddingLeft:2,children:jsxRuntimeExports.jsx(Typography,{textColor:"neutral600",tag:"label",htmlFor:"page-size",children:gr({id:"components.PageFooter.select",defaultMessage:"Entries per page"})})})]})},PaginationContext=reactExports.createContext({activePage:1,pageCount:1}),usePagination=()=>reactExports.useContext(PaginationContext),Pagination=({children:mr,activePage:hr,pageCount:gr,label:vr="pagination"})=>{const xr=reactExports.useMemo(()=>({activePage:hr,pageCount:gr}),[hr,gr]);return jsxRuntimeExports.jsx(PaginationContext.Provider,{value:xr,children:jsxRuntimeExports.jsx(Box,{tag:"nav","aria-label":vr,children:jsxRuntimeExports.jsx(Flex,{tag:"ul",gap:1,children:mr})})})},PaginationText=dt$3(Typography)`
  line-height: revert;
`,linkWrapperStyles=lt$4`
  padding: ${({theme:mr})=>mr.spaces[3]};
  border-radius: ${({theme:mr})=>mr.borderRadius};
  box-shadow: ${({$active:mr,theme:hr})=>mr?hr.shadows.filterShadow:void 0};
  text-decoration: none;
  display: flex;
  position: relative;
  outline: none;

  &:after {
    transition-property: all;
    transition-duration: 0.2s;
    border-radius: 8px;
    content: '';
    position: absolute;
    top: -4px;
    bottom: -4px;
    left: -4px;
    right: -4px;
    border: 2px solid transparent;
  }

  &:focus-visible {
    outline: none;

    &:after {
      border-radius: 8px;
      content: '';
      position: absolute;
      top: -5px;
      bottom: -5px;
      left: -5px;
      right: -5px;
      border: 2px solid ${mr=>mr.theme.colors.primary600};
    }
  }
`,LinkWrapperButton=dt$3.button`
  ${linkWrapperStyles}
`,LinkWrapperDiv=dt$3.div`
  ${linkWrapperStyles}
`;LinkWrapperButton.defaultProps={type:"button"};const PageLinkWrapper=dt$3(LinkWrapperButton)`
  color: ${({theme:mr,$active:hr})=>hr?mr.colors.primary700:mr.colors.neutral800};
  background: ${({theme:mr,$active:hr})=>hr?mr.colors.neutral0:void 0};

  &:hover {
    box-shadow: ${({theme:mr})=>mr.shadows.filterShadow};
  }
`,ActionLinkWrapper=dt$3(LinkWrapperButton)`
  font-size: 1.1rem;
  svg path {
    fill: ${mr=>mr["aria-disabled"]?mr.theme.colors.neutral300:mr.theme.colors.neutral600};
  }

  &:focus,
  &:hover {
    svg path {
      fill: ${mr=>mr["aria-disabled"]?mr.theme.colors.neutral300:mr.theme.colors.neutral700};
    }
  }

  ${mr=>mr["aria-disabled"]?`
  pointer-events: none;
    `:void 0}
`,DotsWrapper=dt$3(LinkWrapperDiv)`
  color: ${({theme:mr})=>mr.colors.neutral800};
`,PreviousLink=({children:mr,...hr})=>{const{activePage:gr}=usePagination(),vr=gr===1;return jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsxs(ActionLinkWrapper,{"aria-disabled":vr,tabIndex:vr?-1:void 0,...hr,children:[jsxRuntimeExports.jsx(VisuallyHidden,{children:mr}),jsxRuntimeExports.jsx(ForwardRef$4r,{"aria-hidden":!0})]})})},NextLink=({children:mr,...hr})=>{const{activePage:gr,pageCount:vr}=usePagination(),xr=gr===vr;return jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsxs(ActionLinkWrapper,{"aria-disabled":xr,tabIndex:xr?-1:void 0,...hr,children:[jsxRuntimeExports.jsx(VisuallyHidden,{children:mr}),jsxRuntimeExports.jsx(ForwardRef$4p,{"aria-hidden":!0})]})})},PageLink=({number:mr,children:hr,...gr})=>{const{activePage:vr}=usePagination(),xr=vr===mr;return jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsxs(PageLinkWrapper,{...gr,$active:xr,children:[jsxRuntimeExports.jsx(VisuallyHidden,{children:hr}),jsxRuntimeExports.jsx(PaginationText,{"aria-hidden":!0,variant:"pi",fontWeight:xr?"bold":"",children:mr})]})})},Dots=({children:mr,...hr})=>jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsxs(DotsWrapper,{...hr,as:"div",children:[jsxRuntimeExports.jsx(VisuallyHidden,{children:mr}),jsxRuntimeExports.jsx(PaginationText,{"aria-hidden":!0,small:!0,children:"…"})]})}),PaginationFooter=({activePage:mr,onChangePage:hr,pagination:{pageCount:gr}})=>{const{formatMessage:vr}=useIntl(),xr=mr-1,Er=mr+1,Cr=[jsxRuntimeExports.jsx(PageLink,{number:1,onClick:()=>{hr(1)},children:vr({id:"components.pagination.go-to",defaultMessage:"Go to page {page}"},{page:1})},1)];if(gr<=4){const zr=Array.from({length:gr}).map((Qr,sn)=>sn+1).map(Qr=>jsxRuntimeExports.jsx(PageLink,{number:Qr,onClick:()=>hr(Qr),children:vr({id:"components.pagination.go-to",defaultMessage:"Go to page {page}"},{page:Qr})},Qr));return jsxRuntimeExports.jsxs(Pagination,{activePage:mr,pageCount:gr,children:[jsxRuntimeExports.jsx(PreviousLink,{onClick:()=>hr(xr),children:vr({id:"components.pagination.go-to-previous",defaultMessage:"Go to previous page"})}),zr,jsxRuntimeExports.jsx(NextLink,{onClick:()=>hr(Er),children:vr({id:"components.pagination.go-to-next",defaultMessage:"Go to next page"})})]})}let wr=[];const Rr=[];let kr=[];const Dr=[];gr>1&&Rr.push(jsxRuntimeExports.jsx(PageLink,{number:gr,onClick:()=>hr(gr),children:vr({id:"components.pagination.go-to",defaultMessage:"Go to page {page}"},{page:gr})},gr)),mr===1&&gr>=3&&(wr=[2]),mr===2&&gr>=3&&(gr===5?wr=[2,3,4]:gr===3?wr=[2]:wr=[2,3]),mr===4&&gr>=3&&(wr=[2]),mr===gr&&gr>=3&&(kr=[gr-1]),mr===gr-2&&gr>3&&(kr=[mr+1,mr,mr-1]),mr===gr-3&&gr>3&&mr>5&&(kr=[mr+2,mr+1,mr,mr-1]),mr===gr-1&&gr>3&&(kr=[mr,mr-1]),kr.forEach(zr=>{Rr.unshift(jsxRuntimeExports.jsxs(PageLink,{number:zr,onClick:()=>hr(zr),children:["Go to page ",zr]},zr))}),wr.forEach(zr=>{Cr.push(jsxRuntimeExports.jsx(PageLink,{number:zr,onClick:()=>hr(zr),children:vr({id:"components.pagination.go-to",defaultMessage:"Go to page {page}"},{page:zr})},zr))}),![1,2].includes(mr)&&mr<=gr-3&&Cr.length+Rr.length<6&&[mr-1,mr,mr+1].forEach(Qr=>{Dr.push(jsxRuntimeExports.jsx(PageLink,{number:Qr,onClick:()=>hr(Qr),children:vr({id:"components.pagination.go-to",defaultMessage:"Go to page {page}"},{page:Qr})},Qr))});const Br=gr>5||gr===5&&(mr===1||mr===5),Hr=Dr.length>2&&mr>4&&gr>5,Gr=Hr?gr-mr-1:gr-Cr.length-Rr.length,qr=Hr?gr-Cr.length-Rr.length:gr-mr-1;return jsxRuntimeExports.jsxs(Pagination,{activePage:mr,pageCount:gr,children:[jsxRuntimeExports.jsx(PreviousLink,{onClick:()=>hr(xr),children:vr({id:"components.pagination.go-to-previous",defaultMessage:"Go to previous page"})}),Cr,Hr&&jsxRuntimeExports.jsx(Dots,{children:vr({id:"components.pagination.remaining-links",defaultMessage:"And {number} other links"},{number:Gr})}),Dr,Br&&jsxRuntimeExports.jsx(Dots,{children:vr({id:"components.pagination.remaining-links",defaultMessage:"And {number} other links"},{number:qr})}),Rr,jsxRuntimeExports.jsx(NextLink,{onClick:()=>hr(Er),children:vr({id:"components.pagination.go-to-next",defaultMessage:"Go to next page"})})]})},SearchAsset=({onChangeSearch:mr,queryValue:hr=null})=>{const{formatMessage:gr}=useIntl(),{trackUsage:vr}=useTracking(),[xr,Er]=reactExports.useState(!!hr),[Cr,wr]=reactExports.useState(hr||""),Rr=reactExports.useRef(null);reactExports.useLayoutEffect(()=>{xr&&setTimeout(()=>{Rr.current?.querySelector("input")?.focus()},0)},[xr]);const kr=()=>{Er(Hr=>!Hr)},Dr=()=>{kr(),mr(null)},Br=Hr=>{Hr.preventDefault(),Hr.stopPropagation(),vr("didSearchMediaLibraryElements",{location:"content-manager"}),mr(Cr)};return xr?jsxRuntimeExports.jsx("div",{ref:Rr,children:jsxRuntimeExports.jsx(SearchForm,{onSubmit:Br,children:jsxRuntimeExports.jsx(Searchbar,{name:"search",onClear:Dr,onChange:Hr=>wr(Hr.target.value),clearLabel:gr({id:getTrad("search.clear.label"),defaultMessage:"Clear the search"}),"aria-label":"search",size:"S",value:Cr,placeholder:gr({id:getTrad("search.placeholder"),defaultMessage:"e.g: the first dog on the moon"}),children:gr({id:getTrad("search.label"),defaultMessage:"Search for an asset"})})})}):jsxRuntimeExports.jsx(IconButton,{label:"Search",onClick:kr,children:jsxRuntimeExports.jsx(ForwardRef$V$1,{})})},isSelectable=(mr,hr="")=>{if(!hr)return!1;const gr=hr.split("/")[0];return mr.includes(gr)||mr.includes("file")&&!["video","image","audio"].includes(gr)},TypographyMaxWidth=dt$3(Typography)`
  max-width: 100%;
`,ActionContainer=dt$3(Box)`
  svg {
    path {
      fill: ${({theme:mr})=>mr.colors.neutral500};
    }
  }
`,BrowseStep=({allowedTypes:mr=[],assets:hr,canCreate:gr,canRead:vr,folders:xr=[],multiple:Er=!1,onAddAsset:Cr,onChangeFilters:wr,onChangePage:Rr,onChangePageSize:kr,onChangeSearch:Dr,onChangeSort:Br,onChangeFolder:Hr,onEditAsset:Gr,onEditFolder:qr,onSelectAllAsset:zr,onSelectAsset:Qr,pagination:sn,queryObject:hn,selectedAssets:vn})=>{const{formatMessage:yn}=useIntl(),[gn,bn]=usePersistentState(localStorageKeys.modalView,viewOptions.GRID),xn=gn===viewOptions.GRID,{data:$n,isLoading:Sn}=useFolder(hn?.folder,{enabled:vr&&!!hn?.folder}),Cn=toSingularTypes(mr),Rn=hr.map(Ln=>({...Ln,isSelectable:isSelectable(Cn,Ln?.mime),type:"asset"})),Bn=Sn?void 0:getBreadcrumbDataCM($n),Fn=getAllowedFiles(mr,Rn),Hn=Fn.length>0&&vn.length>0&&Fn.every(Ln=>vn.findIndex(jn=>jn.id===Ln.id)!==-1),Gn=Fn.some(Ln=>vn.findIndex(jn=>jn.id===Ln.id)!==-1),qn=!!hn?._q,On=!!hn?.filters?.$and?.length&&hn.filters.$and.length>0,wn=qn||On,_n=Rn.length,Tn=xr.length,Mn=(...Ln)=>{Dr(""),Hr(...Ln)};return jsxRuntimeExports.jsxs(Box,{children:[zr&&jsxRuntimeExports.jsx(Box,{paddingBottom:4,children:jsxRuntimeExports.jsxs(Flex,{justifyContent:"space-between",alignItems:"flex-start",children:[(_n>0||Tn>0||On)&&jsxRuntimeExports.jsxs(Flex,{gap:2,wrap:"wrap",children:[Er&&xn&&jsxRuntimeExports.jsx(Flex,{paddingLeft:2,paddingRight:2,background:"neutral0",hasRadius:!0,borderColor:"neutral200",height:"3.2rem",children:jsxRuntimeExports.jsx(CheckboxImpl,{"aria-label":yn({id:getTrad("bulk.select.label"),defaultMessage:"Select all assets"}),checked:!Hn&&Gn?"indeterminate":Hn,onCheckedChange:zr})}),xn&&jsxRuntimeExports.jsx(SortPicker,{onChangeSort:Br,value:hn?.sort}),jsxRuntimeExports.jsx(Filters,{appliedFilters:hn?.filters?.$and,onChangeFilters:wr})]}),(_n>0||Tn>0||qn)&&jsxRuntimeExports.jsxs(Flex,{marginLeft:"auto",shrink:0,gap:2,children:[jsxRuntimeExports.jsx(ActionContainer,{paddingTop:1,paddingBottom:1,children:jsxRuntimeExports.jsx(IconButton,{label:yn(xn?{id:"view-switch.list",defaultMessage:"List View"}:{id:"view-switch.grid",defaultMessage:"Grid View"}),onClick:()=>bn(xn?viewOptions.LIST:viewOptions.GRID),children:xn?jsxRuntimeExports.jsx(ForwardRef$2j,{}):jsxRuntimeExports.jsx(ForwardRef$33,{})})}),jsxRuntimeExports.jsx(SearchAsset,{onChangeSearch:Dr,queryValue:hn._q||""})]})]})}),vr&&Bn?.length&&Bn.length>0&&$n&&jsxRuntimeExports.jsx(Box,{paddingTop:3,children:jsxRuntimeExports.jsx(Breadcrumbs,{onChangeFolder:Hr,label:yn({id:getTrad("header.breadcrumbs.nav.label"),defaultMessage:"Folders navigation"}),breadcrumbs:Bn,currentFolderId:hn?.folder})}),_n===0&&Tn===0&&jsxRuntimeExports.jsx(Box,{paddingBottom:6,children:jsxRuntimeExports.jsx(EmptyAssets,{size:"S",count:6,action:gr&&!On&&!qn&&jsxRuntimeExports.jsx(Button,{variant:"secondary",startIcon:jsxRuntimeExports.jsx(ForwardRef$1d,{}),onClick:Cr,children:yn({id:getTrad("header.actions.add-assets"),defaultMessage:"Add new assets"})}),content:yn(wn?{id:getTrad("list.assets-empty.title-withSearch"),defaultMessage:"There are no assets with the applied filters"}:gr&&!qn?{id:getTrad("list.assets.empty"),defaultMessage:"Upload your first assets..."}:{id:getTrad("list.assets.empty.no-permissions"),defaultMessage:"The asset list is empty"})})}),!xn&&(Tn>0||_n>0)&&jsxRuntimeExports.jsx(TableList,{allowedTypes:mr,assetCount:_n,folderCount:Tn,indeterminate:!Hn&&Gn,isFolderSelectionAllowed:!1,onChangeSort:Br,onChangeFolder:Mn,onEditAsset:Gr,onEditFolder:qr,onSelectOne:Qr,onSelectAll:zr,rows:[...xr.map(Ln=>({...Ln,type:"folder"})),...Rn],selected:vn,shouldDisableBulkSelect:!Er,sortQuery:hn?.sort??""}),xn&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[Tn>0&&jsxRuntimeExports.jsx(FolderGridList,{title:(wn&&_n>0||!wn)&&yn({id:getTrad("list.folders.title"),defaultMessage:"Folders ({count})"},{count:Tn})||"",children:xr.map(Ln=>jsxRuntimeExports.jsx(Grid.Item,{col:3,direction:"column",alignItems:"stretch",children:jsxRuntimeExports.jsx(FolderCard,{ariaLabel:Ln.name,id:`folder-${Ln.id}`,onClick:()=>Mn(Ln.id,Ln.path),cardActions:qr&&jsxRuntimeExports.jsx(IconButton,{withTooltip:!1,label:yn({id:getTrad("list.folder.edit"),defaultMessage:"Edit folder"}),onClick:()=>qr(Ln),children:jsxRuntimeExports.jsx(ForwardRef$1r,{})}),children:jsxRuntimeExports.jsx(FolderCardBody,{children:jsxRuntimeExports.jsx(FolderCardBodyAction,{onClick:()=>Mn(Ln.id,Ln.path),children:jsxRuntimeExports.jsxs(Flex,{tag:"h2",direction:"column",alignItems:"start",maxWidth:"100%",children:[jsxRuntimeExports.jsxs(TypographyMaxWidth,{fontWeight:"semiBold",ellipsis:!0,textColor:"neutral800",children:[Ln.name,jsxRuntimeExports.jsx(VisuallyHidden,{children:"-"})]}),jsxRuntimeExports.jsx(TypographyMaxWidth,{tag:"span",textColor:"neutral600",variant:"pi",ellipsis:!0,children:yn({id:getTrad("list.folder.subtitle"),defaultMessage:"{folderCount, plural, =0 {# folder} one {# folder} other {# folders}}, {filesCount, plural, =0 {# asset} one {# asset} other {# assets}}"},{folderCount:Ln.children?.count,filesCount:Ln.files?.count})})]})})})})},`folder-${Ln.id}`))}),_n>0&&Tn>0&&jsxRuntimeExports.jsx(Box,{paddingTop:6,children:jsxRuntimeExports.jsx(Divider,{})}),_n>0&&jsxRuntimeExports.jsx(Box,{paddingTop:6,children:jsxRuntimeExports.jsx(AssetGridList,{allowedTypes:mr,size:"S",assets:Rn,onSelectAsset:Qr,selectedAssets:vn,onEditAsset:Gr,title:(!wn||wn&&Tn>0)&&hn.page===1&&yn({id:getTrad("list.assets.title"),defaultMessage:"Assets ({count})"},{count:_n})||""})})]}),sn.pageCount>0&&jsxRuntimeExports.jsxs(Flex,{justifyContent:"space-between",paddingTop:4,children:[jsxRuntimeExports.jsx(PageSize,{pageSize:hn.pageSize,onChangePageSize:kr}),jsxRuntimeExports.jsx(PaginationFooter,{activePage:hn.page,onChangePage:Rr,pagination:sn})]})]})},DialogFooter=({onClose:mr,onValidate:hr})=>{const{formatMessage:gr}=useIntl();return jsxRuntimeExports.jsxs(Modal$1.Footer,{children:[jsxRuntimeExports.jsx(Button,{onClick:mr,variant:"tertiary",children:gr({id:"app.components.Button.cancel",defaultMessage:"Cancel"})}),hr&&jsxRuntimeExports.jsx(Button,{onClick:hr,children:gr({id:"global.finish",defaultMessage:"Finish"})})]})},SelectedStep=({selectedAssets:mr,onSelectAsset:hr,onReorderAsset:gr})=>{const{formatMessage:vr}=useIntl();return jsxRuntimeExports.jsxs(Flex,{direction:"column",alignItems:"stretch",gap:4,children:[jsxRuntimeExports.jsxs(Flex,{gap:0,direction:"column",alignItems:"start",children:[jsxRuntimeExports.jsx(Typography,{variant:"pi",fontWeight:"bold",textColor:"neutral800",children:vr({id:getTrad("list.assets.to-upload"),defaultMessage:"{number, plural, =0 {No asset} one {1 asset} other {# assets}} ready to upload"},{number:mr.length})}),jsxRuntimeExports.jsx(Typography,{variant:"pi",textColor:"neutral600",children:vr({id:getTrad("modal.upload-list.sub-header-subtitle"),defaultMessage:"Manage the assets before adding them to the Media Library"})})]}),jsxRuntimeExports.jsx(AssetGridList,{size:"S",assets:mr,onSelectAsset:hr,selectedAssets:mr,onReorderAsset:gr})]})},LoadingBody=dt$3(Flex)`
  /* 80px are coming from the Tabs component that is not included in the ModalBody */
  min-height: ${()=>"calc(60vh + 8rem)"};
`,AssetContent=({allowedTypes:mr=[],folderId:hr=null,onClose:gr,onAddAsset:vr,onAddFolder:xr,onChangeFolder:Er,onValidate:Cr,multiple:wr=!1,initiallySelectedAssets:Rr=[],trackedLocation:kr})=>{const[Dr,Br]=reactExports.useState(void 0),[Hr,Gr]=reactExports.useState(void 0),{formatMessage:qr}=useIntl(),{canRead:zr,canCreate:Qr,isLoading:sn,canUpdate:hn,canCopyLink:vn,canDownload:yn}=useMediaLibraryPermissions(),[{queryObject:gn},{onChangeFilters:bn,onChangePage:xn,onChangePageSize:$n,onChangeSort:Sn,onChangeSearch:Cn,onChangeFolder:Rn}]=useModalQueryParams({folder:hr}),{data:{pagination:Bn,results:Fn}={},isLoading:Hn,error:Gn}=useAssets({skipWhen:!zr,query:gn}),{data:qn,isLoading:On,error:wn}=useFolders({enabled:zr&&!containsAssetFilter(gn)&&Bn?.page===1,query:gn}),[_n,{selectOne:Tn,selectOnly:Mn,setSelections:Ln,selectMultiple:jn,deselectMultiple:Kn}]=useSelectionState(["id"],Rr),Nn=()=>{const Xn=getAllowedFiles(mr,Fn);if(!wr)return;const Zn=Xn.filter(Pi=>_n.findIndex(Ya=>Ya.id===Pi.id)!==-1);Zn.length>0?Kn(Zn):jn(Xn)},An=Xn=>wr?Tn(Xn):Mn(Xn),kn=sn||Hn||On,Dn=Gn||wn;if(kn)return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Modal$1.Header,{children:jsxRuntimeExports.jsx(Modal$1.Title,{children:qr({id:getTrad("header.actions.add-assets"),defaultMessage:"Add new assets"})})}),jsxRuntimeExports.jsx(LoadingBody,{justifyContent:"center",paddingTop:4,paddingBottom:4,children:jsxRuntimeExports.jsx(Loader,{children:qr({id:getTrad("content.isLoading"),defaultMessage:"Content is loading."})})}),jsxRuntimeExports.jsx(DialogFooter,{onClose:gr})]});if(Dn)return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Modal$1.Header,{children:jsxRuntimeExports.jsx(Modal$1.Title,{children:qr({id:getTrad("header.actions.add-assets"),defaultMessage:"Add new assets"})})}),jsxRuntimeExports.jsx(Page.Error,{}),jsxRuntimeExports.jsx(DialogFooter,{onClose:gr})]});if(!zr)return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Modal$1.Header,{children:jsxRuntimeExports.jsx(Modal$1.Title,{children:qr({id:getTrad("header.actions.add-assets"),defaultMessage:"Add new assets"})})}),jsxRuntimeExports.jsx(Page.NoPermissions,{}),jsxRuntimeExports.jsx(DialogFooter,{onClose:gr})]});if(Dr)return jsxRuntimeExports.jsx(EditAssetContent,{onClose:()=>Br(void 0),asset:Dr,canUpdate:hn,canCopyLink:vn,canDownload:yn,trackedLocation:kr});if(Hr)return jsxRuntimeExports.jsx(EditFolderContent,{folder:Hr,onClose:()=>Gr(void 0),location:"content-manager",parentFolderId:gn?.folder});const Vn=(Xn,Zn)=>{const Pi=Zn-Xn,Ya=_n.slice(),Bi=moveElement(Ya,Xn,Pi);Ln(Bi)},zn=(Xn,Zn)=>{Er(Xn),Rn&&Rn(Xn,Zn)};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Modal$1.Header,{children:jsxRuntimeExports.jsx(Modal$1.Title,{children:qr({id:getTrad("header.actions.add-assets"),defaultMessage:"Add new assets"})})}),jsxRuntimeExports.jsxs(TabsRoot,{variant:"simple",defaultValue:_n.length>0?"selected":"browse",children:[jsxRuntimeExports.jsxs(Flex,{paddingLeft:8,paddingRight:8,paddingTop:6,justifyContent:"space-between",children:[jsxRuntimeExports.jsxs(Tabs.List,{children:[jsxRuntimeExports.jsx(Tabs.Trigger,{value:"browse",children:qr({id:getTrad("modal.nav.browse"),defaultMessage:"Browse"})}),jsxRuntimeExports.jsxs(Tabs.Trigger,{value:"selected",children:[qr({id:getTrad("modal.header.select-files"),defaultMessage:"Selected files"}),jsxRuntimeExports.jsx(Badge,{marginLeft:2,children:_n.length})]})]}),jsxRuntimeExports.jsxs(Flex,{gap:2,children:[jsxRuntimeExports.jsx(Button,{variant:"secondary",onClick:()=>xr({folderId:gn?.folder}),children:qr({id:getTrad("modal.upload-list.sub-header.add-folder"),defaultMessage:"Add folder"})}),jsxRuntimeExports.jsx(Button,{onClick:()=>vr({folderId:gn?.folder}),children:qr({id:getTrad("modal.upload-list.sub-header.button"),defaultMessage:"Add more assets"})})]})]}),jsxRuntimeExports.jsx(Divider,{}),jsxRuntimeExports.jsxs(Modal$1.Body,{children:[jsxRuntimeExports.jsx(Tabs.Content,{value:"browse",children:jsxRuntimeExports.jsx(BrowseStep,{allowedTypes:mr,assets:Fn,canCreate:Qr,canRead:zr,folders:qn,onSelectAsset:An,selectedAssets:_n,multiple:wr,onSelectAllAsset:Nn,onEditAsset:Br,onEditFolder:Gr,pagination:Bn,queryObject:gn,onAddAsset:vr,onChangeFilters:Xn=>bn(Xn),onChangeFolder:zn,onChangePage:xn,onChangePageSize:$n,onChangeSort:Xn=>Sn(Xn),onChangeSearch:Cn})}),jsxRuntimeExports.jsx(Tabs.Content,{value:"selected",children:jsxRuntimeExports.jsx(SelectedStep,{selectedAssets:_n,onSelectAsset:An,onReorderAsset:Vn})})]})]}),jsxRuntimeExports.jsx(DialogFooter,{onClose:gr,onValidate:()=>Cr(_n)})]})},AssetDialog=({open:mr=!1,onClose:hr,...gr})=>jsxRuntimeExports.jsx(Modal$1.Root,{open:mr,onOpenChange:hr,children:jsxRuntimeExports.jsx(Modal$1.Content,{children:jsxRuntimeExports.jsx(AssetContent,{onClose:hr,...gr})})}),TabsRoot=dt$3(Tabs.Root)`
  display: flex;
  flex-direction: column;
  overflow: hidden;
`,Wrapper=dt$3(Flex)`
  flex-direction: column;
`,IconWrapper=dt$3.div`
  font-size: 6rem;

  svg path {
    fill: ${({theme:mr})=>mr.colors.primary600};
  }
`,MediaBox=dt$3(Box)`
  border-style: dashed;
`,OpaqueBox=dt$3(Box)`
  opacity: 0;
  cursor: pointer;
`,FromComputerForm=({onClose:mr,onAddAssets:hr,trackedLocation:gr})=>{const{formatMessage:vr}=useIntl(),[xr,Er]=reactExports.useState(!1),Cr=reactExports.useRef(null),{trackUsage:wr}=useTracking(),Rr=qr=>{qr.preventDefault()},kr=qr=>{qr.preventDefault(),Er(!0)},Dr=()=>Er(!1),Br=qr=>{qr.preventDefault(),Cr.current?.click()},Hr=()=>{const qr=Cr.current?.files,zr=[];if(qr)for(let Qr=0;Qr<qr.length;Qr++){const sn=qr.item(Qr);if(sn){const hn=rawFileToAsset(sn,AssetSource.Computer);zr.push(hn)}}gr&&wr("didSelectFile",{source:"computer",location:gr}),hr(zr)},Gr=qr=>{if(qr.preventDefault(),qr?.dataTransfer?.files){const zr=qr.dataTransfer.files,Qr=[];for(let sn=0;sn<zr.length;sn++){const hn=zr.item(sn);if(hn){const vn=rawFileToAsset(hn,AssetSource.Computer);Qr.push(vn)}}hr(Qr)}Er(!1)};return jsxRuntimeExports.jsxs("form",{children:[jsxRuntimeExports.jsx(Box,{paddingLeft:8,paddingRight:8,paddingTop:6,paddingBottom:6,children:jsxRuntimeExports.jsx("label",{children:jsxRuntimeExports.jsx(MediaBox,{paddingTop:11,paddingBottom:11,hasRadius:!0,justifyContent:"center",borderColor:xr?"primary500":"neutral300",background:xr?"primary100":"neutral100",position:"relative",onDragEnter:kr,onDragLeave:Dr,onDragOver:Rr,onDrop:Gr,children:jsxRuntimeExports.jsx(Flex,{justifyContent:"center",children:jsxRuntimeExports.jsxs(Wrapper,{children:[jsxRuntimeExports.jsx(IconWrapper,{children:jsxRuntimeExports.jsx(ForwardRef$1b,{"aria-hidden":!0,width:"3.2rem",height:"3.2rem"})}),jsxRuntimeExports.jsx(Box,{paddingTop:3,paddingBottom:5,children:jsxRuntimeExports.jsx(Typography,{variant:"delta",textColor:"neutral600",tag:"span",children:vr({id:getTrad("input.label"),defaultMessage:"Drag & Drop here or"})})}),jsxRuntimeExports.jsx(OpaqueBox,{tag:"input",position:"absolute",left:0,right:0,bottom:0,top:0,width:"100%",type:"file",multiple:!0,name:"files","aria-label":vr({id:getTrad("input.label"),defaultMessage:"Drag & Drop here or"}),tabIndex:-1,ref:Cr,zIndex:1,onChange:Hr}),jsxRuntimeExports.jsx(Box,{position:"relative",children:jsxRuntimeExports.jsx(Button,{type:"button",onClick:Br,children:vr({id:getTrad("input.button.label"),defaultMessage:"Browse files"})})})]})})})})}),jsxRuntimeExports.jsx(Modal$1.Footer,{children:jsxRuntimeExports.jsx(Button,{onClick:mr,variant:"tertiary",children:vr({id:"app.components.Button.cancel",defaultMessage:"cancel"})})})]})},FromUrlForm=({onClose:mr,onAddAsset:hr,trackedLocation:gr})=>{const[vr,xr]=reactExports.useState(!1),[Er,Cr]=reactExports.useState(void 0),{formatMessage:wr}=useIntl(),{trackUsage:Rr}=useTracking(),kr=async({urls:Dr})=>{xr(!0);const Br=Dr.split(/\r?\n/);try{const Hr=await urlsToAssets(Br);gr&&Rr("didSelectFile",{source:"url",location:gr}),hr(Hr)}catch(Hr){Cr(Hr),xr(!1)}};return jsxRuntimeExports.jsx(Formik,{enableReinitialize:!0,initialValues:{urls:""},onSubmit:kr,validationSchema:urlSchema,validateOnChange:!1,children:({values:Dr,errors:Br,handleChange:Hr})=>jsxRuntimeExports.jsxs(Form$1,{noValidate:!0,children:[jsxRuntimeExports.jsx(Box,{paddingLeft:8,paddingRight:8,paddingBottom:6,paddingTop:6,children:jsxRuntimeExports.jsxs(Field.Root,{hint:wr({id:getTrad("input.url.description"),defaultMessage:"Separate your URL links by a carriage return."}),error:Er?.message||(Br.urls?wr({id:Br.urls,defaultMessage:"An error occured"}):void 0),children:[jsxRuntimeExports.jsx(Field.Label,{children:wr({id:getTrad("input.url.label"),defaultMessage:"URL"})}),jsxRuntimeExports.jsx(Textarea,{name:"urls",onChange:Hr,value:Dr.urls}),jsxRuntimeExports.jsx(Field.Hint,{}),jsxRuntimeExports.jsx(Field.Error,{})]})}),jsxRuntimeExports.jsxs(Modal$1.Footer,{children:[jsxRuntimeExports.jsx(Button,{onClick:mr,variant:"tertiary",children:wr({id:"app.components.Button.cancel",defaultMessage:"cancel"})}),jsxRuntimeExports.jsx(Button,{type:"submit",loading:vr,children:wr({id:getTrad("button.next"),defaultMessage:"Next"})})]})]})})},AddAssetStep=({onClose:mr,onAddAsset:hr,trackedLocation:gr})=>{const{formatMessage:vr}=useIntl();return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Modal$1.Header,{children:jsxRuntimeExports.jsx(Modal$1.Title,{children:vr({id:getTrad("header.actions.add-assets"),defaultMessage:"Add new assets"})})}),jsxRuntimeExports.jsxs(Tabs.Root,{variant:"simple",defaultValue:"computer",children:[jsxRuntimeExports.jsxs(Box,{paddingLeft:8,paddingRight:8,paddingTop:6,children:[jsxRuntimeExports.jsxs(Tabs.List,{"aria-label":vr({id:getTrad("tabs.title"),defaultMessage:"How do you want to upload your assets?"}),children:[jsxRuntimeExports.jsx(Tabs.Trigger,{value:"computer",children:vr({id:getTrad("modal.nav.computer"),defaultMessage:"From computer"})}),jsxRuntimeExports.jsx(Tabs.Trigger,{value:"url",children:vr({id:getTrad("modal.nav.url"),defaultMessage:"From URL"})})]}),jsxRuntimeExports.jsx(Divider,{})]}),jsxRuntimeExports.jsx(Tabs.Content,{value:"computer",children:jsxRuntimeExports.jsx(FromComputerForm,{onClose:mr,onAddAssets:hr,trackedLocation:gr})}),jsxRuntimeExports.jsx(Tabs.Content,{value:"url",children:jsxRuntimeExports.jsx(FromUrlForm,{onClose:mr,onAddAsset:hr,trackedLocation:gr})})]})]})},UploadProgressWrapper=dt$3.div`
  height: 8.8rem;
  width: 100%;
`,Extension=dt$3.span`
  text-transform: uppercase;
`,UploadingAssetCard=({asset:mr,onCancel:hr,onStatusChange:gr,addUploadedFiles:vr,folderId:xr=null})=>{const{upload:Er,cancel:Cr,error:wr,progress:Rr,status:kr}=useUpload(),{formatMessage:Dr}=useIntl();let Br=Dr({id:getTrad("settings.section.doc.label"),defaultMessage:"Doc"});mr.type===AssetType.Image?Br=Dr({id:getTrad("settings.section.image.label"),defaultMessage:"Image"}):mr.type===AssetType.Video?Br=Dr({id:getTrad("settings.section.video.label"),defaultMessage:"Video"}):mr.type===AssetType.Audio&&(Br=Dr({id:getTrad("settings.section.audio.label"),defaultMessage:"Audio"})),reactExports.useEffect(()=>{(async()=>{const qr=await Er(mr,xr?Number(xr):null);vr&&vr(qr)})()},[]),reactExports.useEffect(()=>{gr(kr)},[kr,gr]);const Hr=()=>{Cr(),hr(mr.rawFile)};return jsxRuntimeExports.jsxs(Flex,{direction:"column",alignItems:"stretch",gap:1,children:[jsxRuntimeExports.jsxs(Card$1,{borderColor:wr?"danger600":"neutral150",children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsx(UploadProgressWrapper,{children:jsxRuntimeExports.jsx(UploadProgress,{error:wr||void 0,onCancel:Hr,progress:Rr})})}),jsxRuntimeExports.jsxs(CardBody,{children:[jsxRuntimeExports.jsxs(CardContent,{children:[jsxRuntimeExports.jsx(Box,{paddingTop:1,children:jsxRuntimeExports.jsx(Typography,{tag:"h2",children:jsxRuntimeExports.jsx(CardTitle,{tag:"span",children:mr.name})})}),jsxRuntimeExports.jsx(CardSubtitle,{children:jsxRuntimeExports.jsx(Extension,{children:mr.ext})})]}),jsxRuntimeExports.jsx(Flex,{paddingTop:1,grow:1,children:jsxRuntimeExports.jsx(CardBadge,{children:Br})})]})]}),wr?jsxRuntimeExports.jsx(Typography,{variant:"pi",fontWeight:"bold",textColor:"danger600",children:Dr(wr?.message?{id:getTrad(`apiError.${wr.message}`),defaultMessage:wr.message}:{id:getTrad("upload.generic-error"),defaultMessage:"An error occured while uploading the file."})}):void 0]})},Status={Idle:"IDLE",Uploading:"UPLOADING",Intermediate:"INTERMEDIATE"},PendingAssetStep=({addUploadedFiles:mr,folderId:hr,onClose:gr,onEditAsset:vr,onRemoveAsset:xr,assets:Er,onClickAddAsset:Cr,onCancelUpload:wr,onUploadSucceed:Rr,trackedLocation:kr})=>{const Dr=reactExports.useRef(0),{formatMessage:Br}=useIntl(),{trackUsage:Hr}=useTracking(),[Gr,qr]=reactExports.useState(Status.Idle),zr=async sn=>{sn.preventDefault(),sn.stopPropagation();const hn=Er.reduce((vn,yn)=>{const{type:gn}=yn;if(gn!==void 0&&!vn[gn]&&(vn[gn]=0),gn!==void 0){const bn=vn[gn],xn=typeof bn=="string"?bn:bn.toString();vn[gn]=`${parseInt(xn,10)+1}`}return vn},{});Hr("willAddMediaLibraryAssets",{location:kr,...hn}),qr(Status.Uploading)},Qr=(sn,hn)=>{(sn==="success"||sn==="error")&&(Dr.current++,Dr.current===Er.length&&(Dr.current=0,qr(Status.Intermediate))),sn==="success"&&Rr(hn)};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Modal$1.Header,{children:jsxRuntimeExports.jsx(Modal$1.Title,{children:Br({id:getTrad("header.actions.add-assets"),defaultMessage:"Add new assets"})})}),jsxRuntimeExports.jsx(Modal$1.Body,{children:jsxRuntimeExports.jsxs(Flex,{direction:"column",alignItems:"stretch",gap:7,children:[jsxRuntimeExports.jsxs(Flex,{justifyContent:"space-between",children:[jsxRuntimeExports.jsxs(Flex,{direction:"column",alignItems:"stretch",gap:0,children:[jsxRuntimeExports.jsx(Typography,{variant:"pi",fontWeight:"bold",textColor:"neutral800",children:Br({id:getTrad("list.assets.to-upload"),defaultMessage:"{number, plural, =0 {No asset} one {1 asset} other {# assets}} ready to upload"},{number:Er.length})}),jsxRuntimeExports.jsx(Typography,{variant:"pi",textColor:"neutral600",children:Br({id:getTrad("modal.upload-list.sub-header-subtitle"),defaultMessage:"Manage the assets before adding them to the Media Library"})})]}),jsxRuntimeExports.jsx(Button,{size:"S",onClick:Cr,children:Br({id:getTrad("header.actions.add-assets"),defaultMessage:"Add new assets"})})]}),jsxRuntimeExports.jsx(KeyboardNavigable,{tagName:"article",children:jsxRuntimeExports.jsx(Grid.Root,{gap:4,children:Er.map(sn=>{const hn=sn.url;return Gr===Status.Uploading||Gr===Status.Intermediate?jsxRuntimeExports.jsx(Grid.Item,{col:4,direction:"column",alignItems:"stretch",children:jsxRuntimeExports.jsx(UploadingAssetCard,{addUploadedFiles:mr,asset:sn,id:hn,onCancel:wr,onStatusChange:vn=>Qr(vn,sn.rawFile),size:"S",folderId:hr})},hn):jsxRuntimeExports.jsx(Grid.Item,{col:4,direction:"column",alignItems:"stretch",children:jsxRuntimeExports.jsx(AssetCard,{asset:sn,size:"S",local:!0,alt:sn.name,onEdit:vr,onRemove:xr},hn)},hn)})})})]})}),jsxRuntimeExports.jsxs(Modal$1.Footer,{children:[jsxRuntimeExports.jsx(Button,{onClick:gr,variant:"tertiary",children:Br({id:"app.components.Button.cancel",defaultMessage:"cancel"})}),jsxRuntimeExports.jsx(Button,{onClick:zr,loading:Gr===Status.Uploading,children:Br({id:getTrad("modal.upload-list.footer.button"),defaultMessage:"Upload {number, plural, one {# asset} other {# assets}} to the library"},{number:Er.length})})]})]})},Steps={AddAsset:"AddAsset",PendingAsset:"PendingAsset"},UploadAssetDialog=({initialAssetsToAdd:mr,folderId:hr=null,onClose:gr=()=>{},addUploadedFiles:vr,trackedLocation:xr,open:Er,validateAssetsTypes:Cr=(wr,Rr)=>Rr()})=>{const{formatMessage:wr}=useIntl(),[Rr,kr]=reactExports.useState(mr?Steps.PendingAsset:Steps.AddAsset),[Dr,Br]=reactExports.useState(mr||[]),[Hr,Gr]=reactExports.useState(void 0),qr=gn=>{Cr(gn,()=>{Br(bn=>bn.concat(gn)),kr(Steps.PendingAsset)})},zr=()=>{kr(Steps.AddAsset)},Qr=gn=>{const bn=Dr.filter(xn=>xn.rawFile!==gn);Br(bn),bn.length===0&&zr()},sn=gn=>{const bn=Dr.filter(xn=>xn.rawFile!==gn);Br(bn),bn.length===0&&gr()},hn=gn=>{if(gn&&typeof gn!="boolean"){const bn=Dr.map(xn=>xn===Hr?gn:xn);Br(bn)}Gr(void 0)},vn=()=>{Rr===Steps.PendingAsset&&Dr.length>0?window.confirm(wr({id:"window.confirm.close-modal.files",defaultMessage:"Are you sure? You have some files that have not been uploaded yet."}))&&gr():gr()},yn=gn=>{const bn=Dr.filter(xn=>xn!==gn);Br(bn)};return jsxRuntimeExports.jsxs(Modal$1.Root,{open:Er,onOpenChange:vn,children:[Rr===Steps.AddAsset&&jsxRuntimeExports.jsx(Modal$1.Content,{children:jsxRuntimeExports.jsx(AddAssetStep,{onClose:gr,onAddAsset:gn=>qr(gn),trackedLocation:xr})}),Rr===Steps.PendingAsset&&jsxRuntimeExports.jsx(Modal$1.Content,{children:jsxRuntimeExports.jsx(PendingAssetStep,{onClose:vn,assets:Dr,onEditAsset:Gr,onRemoveAsset:yn,onClickAddAsset:zr,onCancelUpload:Qr,onUploadSucceed:sn,initialAssetsToAdd:mr,addUploadedFiles:vr,folderId:hr,trackedLocation:xr})}),Hr&&jsxRuntimeExports.jsx(Modal$1.Content,{children:jsxRuntimeExports.jsx(EditAssetContent,{onClose:hn,asset:Hr,canUpdate:!0,canCopyLink:!1,canDownload:!1,trackedLocation:xr})})]})},DocAsset=dt$3(Flex)`
  background: linear-gradient(180deg, #ffffff 0%, #f6f6f9 121.48%);
`,VideoPreviewWrapper=dt$3(Box)`
  canvas,
  video {
    max-width: 100%;
    height: 124px;
  }
`,AudioPreviewWrapper=dt$3(Box)`
  canvas,
  audio {
    max-width: 100%;
  }
`,CarouselAsset=({asset:mr})=>mr.mime?.includes(AssetType.Video)?jsxRuntimeExports.jsx(VideoPreviewWrapper,{height:"100%",children:jsxRuntimeExports.jsx(VideoPreview,{url:createAssetUrl(mr,!0),mime:mr.mime,alt:mr.alternativeText||mr.name})}):mr.mime?.includes(AssetType.Audio)?jsxRuntimeExports.jsx(AudioPreviewWrapper,{children:jsxRuntimeExports.jsx(AudioPreview,{url:createAssetUrl(mr,!0),alt:mr.alternativeText||mr.name})}):mr.mime?.includes(AssetType.Image)?jsxRuntimeExports.jsx(Box,{tag:"img",maxHeight:"100%",maxWidth:"100%",src:createAssetUrl(mr,!0),alt:mr.alternativeText||mr.name}):jsxRuntimeExports.jsx(DocAsset,{width:"100%",height:"100%",justifyContent:"center",hasRadius:!0,children:mr.ext?.includes("pdf")?jsxRuntimeExports.jsx(ForwardRef$3j,{"aria-label":mr.alternativeText||mr.name,width:"24px",height:"32px"}):jsxRuntimeExports.jsx(ForwardRef$3p,{"aria-label":mr.alternativeText||mr.name,width:"24px",height:"32px"})}),CarouselAssetActions=({asset:mr,onDeleteAsset:hr,onAddAsset:gr,onEditAsset:vr})=>{const{formatMessage:xr}=useIntl();return jsxRuntimeExports.jsxs(CarouselActions,{children:[gr&&jsxRuntimeExports.jsx(IconButton,{label:xr({id:getTrad("control-card.add"),defaultMessage:"Add"}),onClick:()=>gr(mr),children:jsxRuntimeExports.jsx(ForwardRef$1d,{})}),jsxRuntimeExports.jsx(CopyLinkButton,{url:prefixFileUrlWithBackendUrl(mr.url)}),hr&&jsxRuntimeExports.jsx(IconButton,{label:xr({id:"global.delete",defaultMessage:"Delete"}),onClick:()=>hr(mr),children:jsxRuntimeExports.jsx(ForwardRef$j$1,{})}),vr&&jsxRuntimeExports.jsx(IconButton,{label:xr({id:getTrad("control-card.edit"),defaultMessage:"edit"}),onClick:vr,children:jsxRuntimeExports.jsx(ForwardRef$1r,{})})]})},TextAlignTypography=dt$3(Typography)`
  align-items: center;
`,EmptyStateAsset=({disabled:mr=!1,onClick:hr,onDropAsset:gr})=>{const{formatMessage:vr}=useIntl(),[xr,Er]=reactExports.useState(!1),Cr=Dr=>{Dr.preventDefault(),Er(!0)},wr=Dr=>{Dr.currentTarget.contains(Dr.relatedTarget)||Er(!1)},Rr=Dr=>{Dr.preventDefault()},kr=Dr=>{if(Dr.preventDefault(),Dr?.dataTransfer?.files){const Br=Dr.dataTransfer.files,Hr=[];for(let Gr=0;Gr<Br.length;Gr++){const qr=Br.item(Gr);if(qr){const zr=rawFileToAsset(qr,AssetSource.Computer);Hr.push(zr)}}gr(Hr)}Er(!1)};return jsxRuntimeExports.jsxs(Flex,{borderStyle:xr?"dashed":void 0,borderWidth:xr?"1px":void 0,borderColor:xr?"primary600":void 0,direction:"column",justifyContent:"center",alignItems:"center",height:"100%",width:"100%",tag:"button",type:"button",disabled:mr,onClick:hr,onDragEnter:Cr,onDragLeave:wr,onDragOver:Rr,onDrop:kr,gap:3,style:{cursor:mr?"not-allowed":"pointer"},children:[jsxRuntimeExports.jsx(ForwardRef$1b,{"aria-hidden":!0,width:"3.2rem",height:"3.2rem",fill:mr?"neutral400":"primary600"}),jsxRuntimeExports.jsx(TextAlignTypography,{variant:"pi",fontWeight:"bold",textColor:"neutral600",style:{textAlign:"center"},tag:"span",children:vr({id:getTrad("mediaLibraryInput.placeholder"),defaultMessage:"Click to add an asset or drag and drop one in this area"})})]})},CarouselAssets=reactExports.forwardRef(({assets:mr,disabled:hr=!1,error:gr,hint:vr,label:xr,labelAction:Er,onAddAsset:Cr,onDeleteAsset:wr,onDeleteAssetFromMediaLibrary:Rr,onDropAsset:kr,onEditAsset:Dr,onNext:Br,onPrevious:Hr,required:Gr=!1,selectedAssetIndex:qr,trackedLocation:zr},Qr)=>{const{formatMessage:sn}=useIntl(),[hn,vn]=reactExports.useState(!1),yn=mr[qr];return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(CarouselInput,{ref:Qr,label:xr,labelAction:Er,secondaryLabel:yn?.name,selectedSlide:qr,previousLabel:sn({id:getTrad("mediaLibraryInput.actions.previousSlide"),defaultMessage:"Previous slide"}),nextLabel:sn({id:getTrad("mediaLibraryInput.actions.nextSlide"),defaultMessage:"Next slide"}),onNext:Br,onPrevious:Hr,hint:vr,error:gr,required:Gr,actions:yn?jsxRuntimeExports.jsx(CarouselAssetActions,{asset:yn,onDeleteAsset:hr?void 0:wr,onAddAsset:hr?void 0:Cr,onEditAsset:Dr?()=>vn(!0):void 0}):void 0,children:mr.length===0?jsxRuntimeExports.jsx(CarouselSlide,{label:sn({id:getTrad("mediaLibraryInput.slideCount"),defaultMessage:"{n} of {m} slides"},{n:1,m:1}),children:jsxRuntimeExports.jsx(EmptyStateAsset,{disabled:hr,onClick:Cr,onDropAsset:kr})}):mr.map((gn,bn)=>jsxRuntimeExports.jsx(CarouselSlide,{label:sn({id:getTrad("mediaLibraryInput.slideCount"),defaultMessage:"{n} of {m} slides"},{n:bn+1,m:mr.length}),children:jsxRuntimeExports.jsx(CarouselAsset,{asset:gn})},gn.id))}),jsxRuntimeExports.jsx(EditAssetDialog,{open:hn,onClose:gn=>{vn(!1),gn===null&&Rr(),gn&&typeof gn!="boolean"&&Dr?.(gn)},asset:yn,canUpdate:!0,canCopyLink:!0,canDownload:!0,trackedLocation:zr})]})}),STEPS={AssetSelect:"SelectAsset",AssetUpload:"UploadAsset",FolderCreate:"FolderCreate"};reactExports.forwardRef(({attribute:{allowedTypes:mr=["videos","files","images","audios"],multiple:hr=!1}={},label:gr,hint:vr,disabled:xr=!1,labelAction:Er=void 0,name:Cr,required:wr=!1},Rr)=>{const{formatMessage:kr}=useIntl(),{onChange:Dr,value:Br,error:Hr}=useField(Cr),Gr=mr||["files","images","videos","audios"],[qr,zr]=reactExports.useState([]),[Qr,sn]=reactExports.useState(void 0),[hn,vn]=reactExports.useState(0),[yn,gn]=reactExports.useState(),[bn,xn]=reactExports.useState(null),{toggleNotification:$n}=useNotification();reactExports.useEffect(()=>{Qr===void 0&&zr([])},[Qr]);let Sn=[];Array.isArray(Br)?Sn=Br:Br&&(Sn=[Br]);const Cn=Tn=>{const Mn=hr?Tn:Tn[0];Dr(Cr,Mn),sn(void 0)},Rn=()=>{let Tn;if(hr){const Ln=Sn.filter((jn,Kn)=>Kn!==hn);Tn=Ln.length>0?Ln:null}else Tn=null;Dr(Cr,Tn),vn(0)},Bn=Tn=>{let Mn;if(hr){const Ln=Sn.filter(jn=>jn.id!==Tn.id);Mn=Ln.length>0?Ln:null}else Mn=null;Dr(Cr,Mn),vn(0)},Fn=Tn=>{const Mn=Sn.map(Ln=>Ln.id===Tn.id?Tn:Ln);Dr(Cr,hr?Mn:Mn[0])},Hn=(Tn,Mn)=>{const Ln=getAllowedFiles(Gr,Tn);Ln.length>0?Mn(Ln):$n({type:"danger",timeout:4e3,message:kr({id:getTrad("input.notification.not-supported"),defaultMessage:"You can't upload this type of file."},{fileTypes:Gr.join(",")})})},Gn=Tn=>{Hn(Tn,Mn=>{gn(Mn),sn(STEPS.AssetUpload)})};hr&&Sn.length>0&&(gr=`${gr} (${hn+1} / ${Sn.length})`);const qn=()=>{vn(Tn=>Tn<Sn.length-1?Tn+1:0)},On=()=>{vn(Tn=>Tn>0?Tn-1:Sn.length-1)},wn=Tn=>{zr(Mn=>[...Mn,...Tn])};let _n=Sn;if(qr.length>0){const Tn=getAllowedFiles(Gr,qr);_n=hr?[...Tn,...Sn]:[Tn[0]]}return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(CarouselAssets,{ref:Rr,assets:Sn,disabled:xr,label:gr,labelAction:Er,onDeleteAsset:Bn,onDeleteAssetFromMediaLibrary:Rn,onAddAsset:()=>sn(STEPS.AssetSelect),onDropAsset:Gn,onEditAsset:Fn,onNext:qn,onPrevious:On,error:Hr,hint:vr,required:wr,selectedAssetIndex:hn,trackedLocation:"content-manager"}),Qr===STEPS.AssetSelect&&jsxRuntimeExports.jsx(AssetDialog,{allowedTypes:Gr,initiallySelectedAssets:_n,folderId:bn,onClose:()=>{sn(void 0),xn(null)},open:Qr===STEPS.AssetSelect,onValidate:Cn,multiple:hr,onAddAsset:()=>sn(STEPS.AssetUpload),onAddFolder:()=>sn(STEPS.FolderCreate),onChangeFolder:Tn=>xn(Tn),trackedLocation:"content-manager"}),Qr===STEPS.AssetUpload&&jsxRuntimeExports.jsx(UploadAssetDialog,{open:Qr===STEPS.AssetUpload,onClose:()=>sn(STEPS.AssetSelect),initialAssetsToAdd:yn,addUploadedFiles:wn,trackedLocation:"content-manager",folderId:bn,validateAssetsTypes:Hn}),Qr===STEPS.FolderCreate&&jsxRuntimeExports.jsx(EditFolderDialog,{open:Qr===STEPS.FolderCreate,onClose:()=>sn(STEPS.AssetSelect),parentFolderId:bn})]})});dt$3(Typography)`
  text-align: center;
`;const i18nApi=adminApi.enhanceEndpoints({addTagTypes:["Locale"]});i18nApi.injectEndpoints({endpoints:mr=>({createLocale:mr.mutation({query:hr=>({url:"/i18n/locales",method:"POST",data:hr}),invalidatesTags:[{type:"Locale",id:"LIST"}]}),deleteLocale:mr.mutation({query:hr=>({url:`/i18n/locales/${hr}`,method:"DELETE"}),invalidatesTags:(hr,gr,vr)=>[{type:"Locale",id:vr}]}),getLocales:mr.query({query:()=>"/i18n/locales",providesTags:hr=>[{type:"Locale",id:"LIST"},...Array.isArray(hr)?hr.map(gr=>({type:"Locale",id:gr.id})):[]]}),getDefaultLocales:mr.query({query:()=>"/i18n/iso-locales"}),updateLocale:mr.mutation({query:({id:hr,...gr})=>({url:`/i18n/locales/${hr}`,method:"PUT",data:gr}),invalidatesTags:(hr,gr,{id:vr})=>[{type:"Locale",id:vr}]})})});i18nApi.injectEndpoints({overrideExisting:!0,endpoints:mr=>({getManyDraftRelationCount:mr.query({query:({model:hr,...gr})=>({url:`/content-manager/collection-types/${hr}/actions/countManyEntriesDraftRelations`,method:"GET",config:{params:gr}}),transformResponse:hr=>hr.data})})});dt$3(ForwardRef$j$1)`
  path {
    fill: currentColor;
  }
`;dt$3(Flex)`
  svg {
    width: 12px;
    height: 12px;

    fill: ${({theme:mr})=>mr.colors.neutral500};

    path {
      fill: ${({theme:mr})=>mr.colors.neutral500};
    }
  }
`;const extendInvalidatesTags=(mr,hr)=>{if(!mr)return;const gr=mr.invalidatesTags;Object.assign(mr,{invalidatesTags:(xr,Er,Cr,wr)=>[...(typeof gr=="function"?gr(xr,Er,Cr,wr):gr)??[],...hr]})},releaseApi=adminApi.enhanceEndpoints({addTagTypes:["Release","ReleaseAction","EntriesInRelease","ReleaseSettings","Document"],endpoints:{updateDocument(mr){extendInvalidatesTags(mr,[{type:"Release",id:"LIST"},{type:"ReleaseAction",id:"LIST"}])},deleteDocument(mr){extendInvalidatesTags(mr,[{type:"Release",id:"LIST"},{type:"ReleaseAction",id:"LIST"}])},deleteManyDocuments(mr){extendInvalidatesTags(mr,[{type:"Release",id:"LIST"},{type:"ReleaseAction",id:"LIST"}])},discardDocument(mr){extendInvalidatesTags(mr,[{type:"Release",id:"LIST"},{type:"ReleaseAction",id:"LIST"}])},createWorkflow(mr){extendInvalidatesTags(mr,[{type:"Release",id:"LIST"},{type:"ReleaseAction",id:"LIST"}])},updateWorkflow(mr){extendInvalidatesTags(mr,[{type:"Release",id:"LIST"},{type:"ReleaseAction",id:"LIST"}])},deleteWorkflow(mr){extendInvalidatesTags(mr,[{type:"Release",id:"LIST"},{type:"ReleaseAction",id:"LIST"}])}}}).injectEndpoints({endpoints:mr=>({getReleasesForEntry:mr.query({query(hr){return{url:"/content-releases/getByDocumentAttached",method:"GET",config:{params:hr}}},providesTags:hr=>hr?[...hr.data.map(({id:gr})=>({type:"Release",id:gr})),{type:"Release",id:"LIST"}]:[]}),getReleases:mr.query({query({page:hr,pageSize:gr,filters:vr}={page:1,pageSize:16,filters:{releasedAt:{$notNull:!1}}}){return{url:"/content-releases",method:"GET",config:{params:{page:hr||1,pageSize:gr||16,filters:vr||{releasedAt:{$notNull:!1}}}}}},transformResponse(hr,gr,vr){const Er=vr?.filters?.releasedAt?.$notNull==="true";return{...hr,meta:{...hr.meta,activeTab:Er?"done":"pending"}}},providesTags:hr=>hr?[...hr.data.map(({id:gr})=>({type:"Release",id:gr})),{type:"Release",id:"LIST"}]:[{type:"Release",id:"LIST"}]}),getRelease:mr.query({query({id:hr}){return{url:`/content-releases/${hr}`,method:"GET"}},providesTags:(hr,gr,vr)=>[{type:"Release",id:"LIST"},{type:"Release",id:vr.id}]}),getReleaseActions:mr.query({query({releaseId:hr,...gr}){return{url:`/content-releases/${hr}/actions`,method:"GET",config:{params:gr}}},providesTags:[{type:"ReleaseAction",id:"LIST"}]}),createRelease:mr.mutation({query(hr){return{url:"/content-releases",method:"POST",data:hr}},invalidatesTags:[{type:"Release",id:"LIST"}]}),updateRelease:mr.mutation({query({id:hr,...gr}){return{url:`/content-releases/${hr}`,method:"PUT",data:gr}},invalidatesTags:(hr,gr,vr)=>[{type:"Release",id:vr.id}]}),createReleaseAction:mr.mutation({query({body:hr,params:gr}){return{url:`/content-releases/${gr.releaseId}/actions`,method:"POST",data:hr}},invalidatesTags:[{type:"Release",id:"LIST"},{type:"ReleaseAction",id:"LIST"}]}),createManyReleaseActions:mr.mutation({query({body:hr,params:gr}){return{url:`/content-releases/${gr.releaseId}/actions/bulk`,method:"POST",data:hr}},invalidatesTags:[{type:"Release",id:"LIST"},{type:"ReleaseAction",id:"LIST"},{type:"EntriesInRelease"}]}),updateReleaseAction:mr.mutation({query({body:hr,params:gr}){return{url:`/content-releases/${gr.releaseId}/actions/${gr.actionId}`,method:"PUT",data:hr}},invalidatesTags:(hr,gr,vr)=>[{type:"ReleaseAction",id:"LIST"},{type:"Release",id:"LIST"},{type:"Release",id:vr.params.releaseId}],async onQueryStarted({body:hr,params:gr,query:vr,actionPath:xr},{dispatch:Er,queryFulfilled:Cr}){const wr={releaseId:gr.releaseId,...vr},Rr=Er(releaseApi.util.updateQueryData("getReleaseActions",wr,kr=>{const[Dr,Br]=xr,Hr=kr.data[Dr][Br];Hr&&(Hr.type=hr.type)}));try{await Cr}catch{Rr.undo()}}}),deleteReleaseAction:mr.mutation({query({params:hr}){return{url:`/content-releases/${hr.releaseId}/actions/${hr.actionId}`,method:"DELETE"}},invalidatesTags:(hr,gr,vr)=>[{type:"Release",id:"LIST"},{type:"Release",id:vr.params.releaseId},{type:"ReleaseAction",id:"LIST"},{type:"EntriesInRelease"}]}),publishRelease:mr.mutation({query({id:hr}){return{url:`/content-releases/${hr}/publish`,method:"POST"}},invalidatesTags:(hr,gr,vr)=>[{type:"Release",id:vr.id},{type:"Document",id:"ALL_LIST"}]}),deleteRelease:mr.mutation({query({id:hr}){return{url:`/content-releases/${hr}`,method:"DELETE"}},invalidatesTags:()=>[{type:"Release",id:"LIST"},{type:"EntriesInRelease"}]}),getMappedEntriesInReleases:mr.query({query(hr){return{url:"/content-releases/mapEntriesToReleases",method:"GET",config:{params:hr}}},transformResponse(hr){return hr.data},providesTags:[{type:"EntriesInRelease"}]}),getReleaseSettings:mr.query({query:()=>"/content-releases/settings",providesTags:[{type:"ReleaseSettings"}]}),updateReleaseSettings:mr.mutation({query(hr){return{url:"/content-releases/settings",method:"PUT",data:hr}},invalidatesTags:[{type:"ReleaseSettings"}]})})}),getBorderLeftRadiusValue=mr=>mr==="publish"?1:0,getBorderRightRadiusValue=mr=>mr==="publish"?0:1;dt$3(Field.Root)`
  border-top-left-radius: ${({$actionType:mr,theme:hr})=>hr.spaces[getBorderLeftRadiusValue(mr)]};
  border-bottom-left-radius: ${({$actionType:mr,theme:hr})=>hr.spaces[getBorderLeftRadiusValue(mr)]};
  border-top-right-radius: ${({$actionType:mr,theme:hr})=>hr.spaces[getBorderRightRadiusValue(mr)]};
  border-bottom-right-radius: ${({$actionType:mr,theme:hr})=>hr.spaces[getBorderRightRadiusValue(mr)]};

  > label {
    color: inherit;
    padding: ${({theme:mr})=>`${mr.spaces[2]} ${mr.spaces[3]}`};
    text-align: center;
    vertical-align: middle;
    text-transform: capitalize;
  }

  &[data-checked='true'] {
    color: ${({theme:mr,$actionType:hr})=>hr==="publish"?mr.colors.primary700:mr.colors.danger600};
    background-color: ${({theme:mr,$actionType:hr})=>hr==="publish"?mr.colors.primary100:mr.colors.danger100};
    border-color: ${({theme:mr,$actionType:hr})=>hr==="publish"?mr.colors.primary700:mr.colors.danger600};
  }

  &[data-checked='false'] {
    border-left: ${({$actionType:mr})=>mr==="unpublish"&&"none"};
    border-right: ${({$actionType:mr})=>mr==="publish"&&"none"};
  }

  &[data-checked='false'][data-disabled='false']:hover {
    color: ${({theme:mr})=>mr.colors.neutral700};
    background-color: ${({theme:mr})=>mr.colors.neutral100};
    border-color: ${({theme:mr})=>mr.colors.neutral200};

    & > label {
      cursor: pointer;
    }
  }

  &[data-disabled='true'] {
    color: ${({theme:mr})=>mr.colors.neutral600};
    background-color: ${({theme:mr})=>mr.colors.neutral150};
    border-color: ${({theme:mr})=>mr.colors.neutral300};
  }
`;create$2().shape({type:create$4().oneOf(["publish","unpublish"]).required(),releaseId:create$4().required()});dt$3(Menu$2.Item)`
  &:hover {
    background: ${({theme:mr,$variant:hr="neutral"})=>mr.colors[`${hr}100`]};

    svg {
      fill: ${({theme:mr,$variant:hr="neutral"})=>mr.colors[`${hr}600`]};
    }

    a {
      color: ${({theme:mr})=>mr.colors.neutral800};
    }
  }

  svg {
    color: ${({theme:mr,$variant:hr="neutral"})=>mr.colors[`${hr}500`]};
  }

  span {
    color: ${({theme:mr,$variant:hr="neutral"})=>mr.colors[`${hr}800`]};
  }

  span,
  a {
    width: 100%;
  }
`;dt$3(Menu$2.Trigger)`
  & > span {
    display: flex;
  }
`;lightTheme.colors.primary600;const reviewWorkflowsApi=adminApi.enhanceEndpoints({addTagTypes:["ReviewWorkflow","ReviewWorkflowStages","Document","ContentTypeSettings"]}),SINGLE_TYPES="single-types";reviewWorkflowsApi.injectEndpoints({endpoints:mr=>({getStages:mr.query({query:({model:hr,slug:gr,id:vr,params:xr})=>({url:`/review-workflows/content-manager/${gr}/${hr}/${vr}/stages`,method:"GET",config:{params:xr}}),transformResponse:hr=>({meta:hr.meta??{workflowCount:0},stages:hr.data??[]}),providesTags:["ReviewWorkflowStages"]}),updateStage:mr.mutation({query:({model:hr,slug:gr,id:vr,params:xr,...Er})=>({url:`/review-workflows/content-manager/${gr}/${hr}/${vr}/stage`,method:"PUT",data:Er,config:{params:xr}}),transformResponse:hr=>hr.data,invalidatesTags:(hr,gr,{slug:vr,id:xr,model:Er})=>[{type:"Document",id:vr!==SINGLE_TYPES?`${Er}_${xr}`:Er},{type:"Document",id:`${Er}_LIST`},"ReviewWorkflowStages"]}),updateAssignee:mr.mutation({query:({model:hr,slug:gr,id:vr,params:xr,...Er})=>({url:`/review-workflows/content-manager/${gr}/${hr}/${vr}/assignee`,method:"PUT",data:Er,config:{params:xr}}),transformResponse:hr=>hr.data,invalidatesTags:(hr,gr,{slug:vr,id:xr,model:Er})=>[{type:"Document",id:vr!==SINGLE_TYPES?`${Er}_${xr}`:Er},{type:"Document",id:`${Er}_LIST`}]}),getContentTypes:mr.query({query:()=>({url:"/content-manager/content-types",method:"GET"}),transformResponse:hr=>hr.data.reduce((gr,vr)=>(vr.isDisplayed&&gr[vr.kind].push(vr),gr),{collectionType:[],singleType:[]})})}),overrideExisting:!0});dt$3.img`
  // Margin top|right reverse the padding of ModalBody
  margin-right: ${({theme:mr})=>`-${mr.spaces[7]}`};
  margin-top: ${({theme:mr})=>`-${mr.spaces[7]}`};
  width: 360px;
`;const STAGE_COLORS={primary600:"Blue",primary200:"Lilac",alternative600:"Violet",alternative200:"Lavender",success600:"Green",success200:"Pale Green",danger500:"Cherry",danger200:"Pink",warning600:"Orange",warning200:"Yellow",secondary600:"Teal",secondary200:"Baby Blue",neutral400:"Gray",neutral0:"White"};Object.entries(STAGE_COLORS).map(([mr,hr])=>({hex:lightTheme.colors[mr].toUpperCase(),name:hr}));reviewWorkflowsApi.injectEndpoints({endpoints:mr=>({getWorkflows:mr.query({query:hr=>({url:"/review-workflows/workflows",method:"GET",config:{params:hr??{}}}),transformResponse:hr=>({workflows:hr.data,meta:"meta"in hr?hr.meta:void 0}),providesTags:hr=>[...hr?.workflows.map(({id:gr})=>({type:"ReviewWorkflow",id:gr}))??[],{type:"ReviewWorkflow",id:"LIST"}]}),createWorkflow:mr.mutation({query:hr=>({url:"/review-workflows/workflows",method:"POST",data:hr}),transformResponse:hr=>hr.data,invalidatesTags(hr){return[{type:"ReviewWorkflow",id:"LIST"},"ReviewWorkflowStages",{type:"Document",id:"ALL_LIST"},{type:"ContentTypeSettings",id:"LIST"},...hr?.contentTypes.map(gr=>({type:"Document",id:`${gr}_ALL_ITEMS`}))??[]]}}),updateWorkflow:mr.mutation({query:({id:hr,...gr})=>({url:`/review-workflows/workflows/${hr}`,method:"PUT",data:gr}),transformResponse:hr=>hr.data,invalidatesTags:(hr,gr,vr)=>[{type:"ReviewWorkflow",id:vr.id},"ReviewWorkflowStages",{type:"Document",id:"ALL_LIST"},{type:"ContentTypeSettings",id:"LIST"},...hr?.contentTypes.map(xr=>({type:"Document",id:`${xr}_ALL_ITEMS`}))??[]]}),deleteWorkflow:mr.mutation({query:({id:hr})=>({url:`/review-workflows/workflows/${hr}`,method:"DELETE"}),transformResponse:hr=>hr.data,invalidatesTags:(hr,gr,vr)=>[{type:"ReviewWorkflow",id:vr.id},"ReviewWorkflowStages",{type:"Document",id:"ALL_LIST"},{type:"ContentTypeSettings",id:"LIST"}]})}),overrideExisting:!1});var pdf={exports:{}};(function(module,exports){(function(hr,gr){module.exports=hr.pdfjsLib=gr()})(globalThis,()=>(()=>{var __webpack_modules__=[,(mr,hr)=>{Object.defineProperty(hr,"__esModule",{value:!0}),hr.VerbosityLevel=hr.Util=hr.UnknownErrorException=hr.UnexpectedResponseException=hr.TextRenderingMode=hr.RenderingIntentFlag=hr.PromiseCapability=hr.PermissionFlag=hr.PasswordResponses=hr.PasswordException=hr.PageActionEventType=hr.OPS=hr.MissingPDFException=hr.MAX_IMAGE_SIZE_TO_CACHE=hr.LINE_FACTOR=hr.LINE_DESCENT_FACTOR=hr.InvalidPDFException=hr.ImageKind=hr.IDENTITY_MATRIX=hr.FormatError=hr.FeatureTest=hr.FONT_IDENTITY_MATRIX=hr.DocumentActionEventType=hr.CMapCompressionType=hr.BaseException=hr.BASELINE_FACTOR=hr.AnnotationType=hr.AnnotationReplyType=hr.AnnotationPrefix=hr.AnnotationMode=hr.AnnotationFlag=hr.AnnotationFieldFlag=hr.AnnotationEditorType=hr.AnnotationEditorPrefix=hr.AnnotationEditorParamsType=hr.AnnotationBorderStyleType=hr.AnnotationActionEventType=hr.AbortException=void 0,hr.assert=_n,hr.bytesToString=Xn,hr.createValidAbsoluteUrl=Mn,hr.getModificationDate=ws,hr.getUuid=al,hr.getVerbosityLevel=Gn,hr.info=qn,hr.isArrayBuffer=ds,hr.isArrayEqual=Is,hr.isNodeJS=void 0,hr.normalizeUnicode=ho,hr.objectFromMap=Bi,hr.objectSize=Ya,hr.setVerbosityLevel=Hn,hr.shadow=Ln,hr.string32=Pi,hr.stringToBytes=Zn,hr.stringToPDFString=Li,hr.stringToUTF8String=es,hr.unreachable=wn,hr.utf8StringToString=os,hr.warn=On;const gr=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");hr.isNodeJS=gr;const vr=[1,0,0,1,0,0];hr.IDENTITY_MATRIX=vr;const xr=[.001,0,0,.001,0,0];hr.FONT_IDENTITY_MATRIX=xr;const Er=1e7;hr.MAX_IMAGE_SIZE_TO_CACHE=Er;const Cr=1.35;hr.LINE_FACTOR=Cr;const wr=.35;hr.LINE_DESCENT_FACTOR=wr;const Rr=wr/Cr;hr.BASELINE_FACTOR=Rr;const kr={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};hr.RenderingIntentFlag=kr;const Dr={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};hr.AnnotationMode=Dr;const Br="pdfjs_internal_editor_";hr.AnnotationEditorPrefix=Br;const Hr={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};hr.AnnotationEditorType=Hr;const Gr={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};hr.AnnotationEditorParamsType=Gr;const qr={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};hr.PermissionFlag=qr;const zr={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};hr.TextRenderingMode=zr;const Qr={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};hr.ImageKind=Qr;const sn={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};hr.AnnotationType=sn;const hn={GROUP:"Group",REPLY:"R"};hr.AnnotationReplyType=hn;const vn={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};hr.AnnotationFlag=vn;const yn={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};hr.AnnotationFieldFlag=yn;const gn={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};hr.AnnotationBorderStyleType=gn;const bn={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};hr.AnnotationActionEventType=bn;const xn={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};hr.DocumentActionEventType=xn;const $n={O:"PageOpen",C:"PageClose"};hr.PageActionEventType=$n;const Sn={ERRORS:0,WARNINGS:1,INFOS:5};hr.VerbosityLevel=Sn;const Cn={NONE:0,BINARY:1};hr.CMapCompressionType=Cn;const Rn={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};hr.OPS=Rn;const Bn={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};hr.PasswordResponses=Bn;let Fn=Sn.WARNINGS;function Hn(ts){Number.isInteger(ts)&&(Fn=ts)}function Gn(){return Fn}function qn(ts){Fn>=Sn.INFOS&&console.log(`Info: ${ts}`)}function On(ts){Fn>=Sn.WARNINGS&&console.log(`Warning: ${ts}`)}function wn(ts){throw new Error(ts)}function _n(ts,Wi){ts||wn(Wi)}function Tn(ts){switch(ts?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Mn(ts,Wi=null,Gi=null){if(!ts)return null;try{if(Gi&&typeof ts=="string"&&(Gi.addDefaultProtocol&&ts.startsWith("www.")&&ts.match(/\./g)?.length>=2&&(ts=`http://${ts}`),Gi.tryConvertEncoding))try{ts=es(ts)}catch{}const fs=Wi?new URL(ts,Wi):new URL(ts);if(Tn(fs))return fs}catch{}return null}function Ln(ts,Wi,Gi,fs=!1){return Object.defineProperty(ts,Wi,{value:Gi,enumerable:!fs,configurable:!0,writable:!1}),Gi}const jn=function(){function Wi(Gi,fs){this.constructor===Wi&&wn("Cannot initialize BaseException."),this.message=Gi,this.name=fs}return Wi.prototype=new Error,Wi.constructor=Wi,Wi}();hr.BaseException=jn;class Kn extends jn{constructor(Wi,Gi){super(Wi,"PasswordException"),this.code=Gi}}hr.PasswordException=Kn;class Nn extends jn{constructor(Wi,Gi){super(Wi,"UnknownErrorException"),this.details=Gi}}hr.UnknownErrorException=Nn;class An extends jn{constructor(Wi){super(Wi,"InvalidPDFException")}}hr.InvalidPDFException=An;class kn extends jn{constructor(Wi){super(Wi,"MissingPDFException")}}hr.MissingPDFException=kn;class Dn extends jn{constructor(Wi,Gi){super(Wi,"UnexpectedResponseException"),this.status=Gi}}hr.UnexpectedResponseException=Dn;class Vn extends jn{constructor(Wi){super(Wi,"FormatError")}}hr.FormatError=Vn;class zn extends jn{constructor(Wi){super(Wi,"AbortException")}}hr.AbortException=zn;function Xn(ts){(typeof ts!="object"||ts?.length===void 0)&&wn("Invalid argument for bytesToString");const Wi=ts.length,Gi=8192;if(Wi<Gi)return String.fromCharCode.apply(null,ts);const fs=[];for(let bo=0;bo<Wi;bo+=Gi){const Bs=Math.min(bo+Gi,Wi),oo=ts.subarray(bo,Bs);fs.push(String.fromCharCode.apply(null,oo))}return fs.join("")}function Zn(ts){typeof ts!="string"&&wn("Invalid argument for stringToBytes");const Wi=ts.length,Gi=new Uint8Array(Wi);for(let fs=0;fs<Wi;++fs)Gi[fs]=ts.charCodeAt(fs)&255;return Gi}function Pi(ts){return String.fromCharCode(ts>>24&255,ts>>16&255,ts>>8&255,ts&255)}function Ya(ts){return Object.keys(ts).length}function Bi(ts){const Wi=Object.create(null);for(const[Gi,fs]of ts)Wi[Gi]=fs;return Wi}function zi(){const ts=new Uint8Array(4);return ts[0]=1,new Uint32Array(ts.buffer,0,1)[0]===1}function Xi(){try{return new Function(""),!0}catch{return!1}}class Ji{static get isLittleEndian(){return Ln(this,"isLittleEndian",zi())}static get isEvalSupported(){return Ln(this,"isEvalSupported",Xi())}static get isOffscreenCanvasSupported(){return Ln(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?Ln(this,"platform",{isWin:!1,isMac:!1}):Ln(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){return Ln(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}hr.FeatureTest=Ji;const ns=[...Array(256).keys()].map(ts=>ts.toString(16).padStart(2,"0"));class ps{static makeHexColor(Wi,Gi,fs){return`#${ns[Wi]}${ns[Gi]}${ns[fs]}`}static scaleMinMax(Wi,Gi){let fs;Wi[0]?(Wi[0]<0&&(fs=Gi[0],Gi[0]=Gi[1],Gi[1]=fs),Gi[0]*=Wi[0],Gi[1]*=Wi[0],Wi[3]<0&&(fs=Gi[2],Gi[2]=Gi[3],Gi[3]=fs),Gi[2]*=Wi[3],Gi[3]*=Wi[3]):(fs=Gi[0],Gi[0]=Gi[2],Gi[2]=fs,fs=Gi[1],Gi[1]=Gi[3],Gi[3]=fs,Wi[1]<0&&(fs=Gi[2],Gi[2]=Gi[3],Gi[3]=fs),Gi[2]*=Wi[1],Gi[3]*=Wi[1],Wi[2]<0&&(fs=Gi[0],Gi[0]=Gi[1],Gi[1]=fs),Gi[0]*=Wi[2],Gi[1]*=Wi[2]),Gi[0]+=Wi[4],Gi[1]+=Wi[4],Gi[2]+=Wi[5],Gi[3]+=Wi[5]}static transform(Wi,Gi){return[Wi[0]*Gi[0]+Wi[2]*Gi[1],Wi[1]*Gi[0]+Wi[3]*Gi[1],Wi[0]*Gi[2]+Wi[2]*Gi[3],Wi[1]*Gi[2]+Wi[3]*Gi[3],Wi[0]*Gi[4]+Wi[2]*Gi[5]+Wi[4],Wi[1]*Gi[4]+Wi[3]*Gi[5]+Wi[5]]}static applyTransform(Wi,Gi){const fs=Wi[0]*Gi[0]+Wi[1]*Gi[2]+Gi[4],bo=Wi[0]*Gi[1]+Wi[1]*Gi[3]+Gi[5];return[fs,bo]}static applyInverseTransform(Wi,Gi){const fs=Gi[0]*Gi[3]-Gi[1]*Gi[2],bo=(Wi[0]*Gi[3]-Wi[1]*Gi[2]+Gi[2]*Gi[5]-Gi[4]*Gi[3])/fs,Bs=(-Wi[0]*Gi[1]+Wi[1]*Gi[0]+Gi[4]*Gi[1]-Gi[5]*Gi[0])/fs;return[bo,Bs]}static getAxialAlignedBoundingBox(Wi,Gi){const fs=this.applyTransform(Wi,Gi),bo=this.applyTransform(Wi.slice(2,4),Gi),Bs=this.applyTransform([Wi[0],Wi[3]],Gi),oo=this.applyTransform([Wi[2],Wi[1]],Gi);return[Math.min(fs[0],bo[0],Bs[0],oo[0]),Math.min(fs[1],bo[1],Bs[1],oo[1]),Math.max(fs[0],bo[0],Bs[0],oo[0]),Math.max(fs[1],bo[1],Bs[1],oo[1])]}static inverseTransform(Wi){const Gi=Wi[0]*Wi[3]-Wi[1]*Wi[2];return[Wi[3]/Gi,-Wi[1]/Gi,-Wi[2]/Gi,Wi[0]/Gi,(Wi[2]*Wi[5]-Wi[4]*Wi[3])/Gi,(Wi[4]*Wi[1]-Wi[5]*Wi[0])/Gi]}static singularValueDecompose2dScale(Wi){const Gi=[Wi[0],Wi[2],Wi[1],Wi[3]],fs=Wi[0]*Gi[0]+Wi[1]*Gi[2],bo=Wi[0]*Gi[1]+Wi[1]*Gi[3],Bs=Wi[2]*Gi[0]+Wi[3]*Gi[2],oo=Wi[2]*Gi[1]+Wi[3]*Gi[3],Al=(fs+oo)/2,Cl=Math.sqrt((fs+oo)**2-4*(fs*oo-Bs*bo))/2,wl=Al+Cl||1,Go=Al-Cl||1;return[Math.sqrt(wl),Math.sqrt(Go)]}static normalizeRect(Wi){const Gi=Wi.slice(0);return Wi[0]>Wi[2]&&(Gi[0]=Wi[2],Gi[2]=Wi[0]),Wi[1]>Wi[3]&&(Gi[1]=Wi[3],Gi[3]=Wi[1]),Gi}static intersect(Wi,Gi){const fs=Math.max(Math.min(Wi[0],Wi[2]),Math.min(Gi[0],Gi[2])),bo=Math.min(Math.max(Wi[0],Wi[2]),Math.max(Gi[0],Gi[2]));if(fs>bo)return null;const Bs=Math.max(Math.min(Wi[1],Wi[3]),Math.min(Gi[1],Gi[3])),oo=Math.min(Math.max(Wi[1],Wi[3]),Math.max(Gi[1],Gi[3]));return Bs>oo?null:[fs,Bs,bo,oo]}static bezierBoundingBox(Wi,Gi,fs,bo,Bs,oo,Al,Cl){const wl=[],Go=[[],[]];let bl,dl,Hl,Oo,ac,sc,Vl,vc;for(let bc=0;bc<2;++bc){if(bc===0?(dl=6*Wi-12*fs+6*Bs,bl=-3*Wi+9*fs-9*Bs+3*Al,Hl=3*fs-3*Wi):(dl=6*Gi-12*bo+6*oo,bl=-3*Gi+9*bo-9*oo+3*Cl,Hl=3*bo-3*Gi),Math.abs(bl)<1e-12){if(Math.abs(dl)<1e-12)continue;Oo=-Hl/dl,0<Oo&&Oo<1&&wl.push(Oo);continue}Vl=dl*dl-4*Hl*bl,vc=Math.sqrt(Vl),!(Vl<0)&&(ac=(-dl+vc)/(2*bl),0<ac&&ac<1&&wl.push(ac),sc=(-dl-vc)/(2*bl),0<sc&&sc<1&&wl.push(sc))}let Rl=wl.length,Ko;const Wl=Rl;for(;Rl--;)Oo=wl[Rl],Ko=1-Oo,Go[0][Rl]=Ko*Ko*Ko*Wi+3*Ko*Ko*Oo*fs+3*Ko*Oo*Oo*Bs+Oo*Oo*Oo*Al,Go[1][Rl]=Ko*Ko*Ko*Gi+3*Ko*Ko*Oo*bo+3*Ko*Oo*Oo*oo+Oo*Oo*Oo*Cl;return Go[0][Wl]=Wi,Go[1][Wl]=Gi,Go[0][Wl+1]=Al,Go[1][Wl+1]=Cl,Go[0].length=Go[1].length=Wl+2,[Math.min(...Go[0]),Math.min(...Go[1]),Math.max(...Go[0]),Math.max(...Go[1])]}}hr.Util=ps;const ls=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Li(ts){if(ts[0]>="ï"){let Gi;if(ts[0]==="þ"&&ts[1]==="ÿ"?Gi="utf-16be":ts[0]==="ÿ"&&ts[1]==="þ"?Gi="utf-16le":ts[0]==="ï"&&ts[1]==="»"&&ts[2]==="¿"&&(Gi="utf-8"),Gi)try{const fs=new TextDecoder(Gi,{fatal:!0}),bo=Zn(ts);return fs.decode(bo)}catch(fs){On(`stringToPDFString: "${fs}".`)}}const Wi=[];for(let Gi=0,fs=ts.length;Gi<fs;Gi++){const bo=ls[ts.charCodeAt(Gi)];Wi.push(bo?String.fromCharCode(bo):ts.charAt(Gi))}return Wi.join("")}function es(ts){return decodeURIComponent(escape(ts))}function os(ts){return unescape(encodeURIComponent(ts))}function ds(ts){return typeof ts=="object"&&ts?.byteLength!==void 0}function Is(ts,Wi){if(ts.length!==Wi.length)return!1;for(let Gi=0,fs=ts.length;Gi<fs;Gi++)if(ts[Gi]!==Wi[Gi])return!1;return!0}function ws(ts=new Date){return[ts.getUTCFullYear().toString(),(ts.getUTCMonth()+1).toString().padStart(2,"0"),ts.getUTCDate().toString().padStart(2,"0"),ts.getUTCHours().toString().padStart(2,"0"),ts.getUTCMinutes().toString().padStart(2,"0"),ts.getUTCSeconds().toString().padStart(2,"0")].join("")}class Ns{#e=!1;constructor(){this.promise=new Promise((Wi,Gi)=>{this.resolve=fs=>{this.#e=!0,Wi(fs)},this.reject=fs=>{this.#e=!0,Gi(fs)}})}get settled(){return this.#e}}hr.PromiseCapability=Ns;let go=null,vo=null;function ho(ts){return go||(go=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,vo=new Map([["ﬅ","ſt"]])),ts.replaceAll(go,(Wi,Gi,fs)=>Gi?Gi.normalize("NFKC"):vo.get(fs))}function al(){if(typeof crypto<"u"&&typeof crypto?.randomUUID=="function")return crypto.randomUUID();const ts=new Uint8Array(32);if(typeof crypto<"u"&&typeof crypto?.getRandomValues=="function")crypto.getRandomValues(ts);else for(let Wi=0;Wi<32;Wi++)ts[Wi]=Math.floor(Math.random()*255);return Xn(ts)}const ro="pdfjs_internal_id_";hr.AnnotationPrefix=ro},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(mr){if(typeof mr=="string"||mr instanceof URL?mr={url:mr}:(0,_util.isArrayBuffer)(mr)&&(mr={data:mr}),typeof mr!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!mr.url&&!mr.data&&!mr.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const hr=new PDFDocumentLoadingTask,{docId:gr}=hr,vr=mr.url?getUrlProp(mr.url):null,xr=mr.data?getDataProp(mr.data):null,Er=mr.httpHeaders||null,Cr=mr.withCredentials===!0,wr=mr.password??null,Rr=mr.range instanceof PDFDataRangeTransport?mr.range:null,kr=Number.isInteger(mr.rangeChunkSize)&&mr.rangeChunkSize>0?mr.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let Dr=mr.worker instanceof PDFWorker?mr.worker:null;const Br=mr.verbosity,Hr=typeof mr.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(mr.docBaseUrl)?mr.docBaseUrl:null,Gr=typeof mr.cMapUrl=="string"?mr.cMapUrl:null,qr=mr.cMapPacked!==!1,zr=mr.CMapReaderFactory||DefaultCMapReaderFactory,Qr=typeof mr.standardFontDataUrl=="string"?mr.standardFontDataUrl:null,sn=mr.StandardFontDataFactory||DefaultStandardFontDataFactory,hn=mr.stopAtErrors!==!0,vn=Number.isInteger(mr.maxImageSize)&&mr.maxImageSize>-1?mr.maxImageSize:-1,yn=mr.isEvalSupported!==!1,gn=typeof mr.isOffscreenCanvasSupported=="boolean"?mr.isOffscreenCanvasSupported:!_util.isNodeJS,bn=Number.isInteger(mr.canvasMaxAreaInBytes)?mr.canvasMaxAreaInBytes:-1,xn=typeof mr.disableFontFace=="boolean"?mr.disableFontFace:_util.isNodeJS,$n=mr.fontExtraProperties===!0,Sn=mr.enableXfa===!0,Cn=mr.ownerDocument||globalThis.document,Rn=mr.disableRange===!0,Bn=mr.disableStream===!0,Fn=mr.disableAutoFetch===!0,Hn=mr.pdfBug===!0,Gn=Rr?Rr.length:mr.length??NaN,qn=typeof mr.useSystemFonts=="boolean"?mr.useSystemFonts:!_util.isNodeJS&&!xn,On=typeof mr.useWorkerFetch=="boolean"?mr.useWorkerFetch:zr===_display_utils.DOMCMapReaderFactory&&sn===_display_utils.DOMStandardFontDataFactory&&Gr&&Qr&&(0,_display_utils.isValidFetchUrl)(Gr,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(Qr,document.baseURI),wn=mr.canvasFactory||new DefaultCanvasFactory({ownerDocument:Cn}),_n=mr.filterFactory||new DefaultFilterFactory({docId:gr,ownerDocument:Cn}),Tn=null;(0,_util.setVerbosityLevel)(Br);const Mn={canvasFactory:wn,filterFactory:_n};if(On||(Mn.cMapReaderFactory=new zr({baseUrl:Gr,isCompressed:qr}),Mn.standardFontDataFactory=new sn({baseUrl:Qr})),!Dr){const Kn={verbosity:Br,port:_worker_options.GlobalWorkerOptions.workerPort};Dr=Kn.port?PDFWorker.fromPort(Kn):new PDFWorker(Kn),hr._worker=Dr}const Ln={docId:gr,apiVersion:"3.11.174",data:xr,password:wr,disableAutoFetch:Fn,rangeChunkSize:kr,length:Gn,docBaseUrl:Hr,enableXfa:Sn,evaluatorOptions:{maxImageSize:vn,disableFontFace:xn,ignoreErrors:hn,isEvalSupported:yn,isOffscreenCanvasSupported:gn,canvasMaxAreaInBytes:bn,fontExtraProperties:$n,useSystemFonts:qn,cMapUrl:On?Gr:null,standardFontDataUrl:On?Qr:null}},jn={ignoreErrors:hn,isEvalSupported:yn,disableFontFace:xn,fontExtraProperties:$n,enableXfa:Sn,ownerDocument:Cn,disableAutoFetch:Fn,pdfBug:Hn,styleElement:Tn};return Dr.promise.then(function(){if(hr.destroyed)throw new Error("Loading aborted");const Kn=_fetchDocument(Dr,Ln),Nn=new Promise(function(An){let kn;Rr?kn=new _transport_stream.PDFDataTransportStream({length:Gn,initialData:Rr.initialData,progressiveDone:Rr.progressiveDone,contentDispositionFilename:Rr.contentDispositionFilename,disableRange:Rn,disableStream:Bn},Rr):xr||(kn=(Vn=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(Vn):(0,_display_utils.isValidFetchUrl)(Vn.url)?new _displayFetch_stream.PDFFetchStream(Vn):new _displayNetwork.PDFNetworkStream(Vn))({url:vr,length:Gn,httpHeaders:Er,withCredentials:Cr,rangeChunkSize:kr,disableRange:Rn,disableStream:Bn})),An(kn)});return Promise.all([Kn,Nn]).then(function([An,kn]){if(hr.destroyed)throw new Error("Loading aborted");const Dn=new _message_handler.MessageHandler(gr,An,Dr.port),Vn=new WorkerTransport(Dn,hr,kn,jn,Mn);hr._transport=Vn,Dn.send("Ready",null)})}).catch(hr._capability.reject),hr}async function _fetchDocument(mr,hr){if(mr.destroyed)throw new Error("Worker was destroyed");const gr=await mr.messageHandler.sendWithPromise("GetDocRequest",hr,hr.data?[hr.data.buffer]:null);if(mr.destroyed)throw new Error("Worker was destroyed");return gr}function getUrlProp(mr){if(mr instanceof URL)return mr.href;try{return new URL(mr,window.location).href}catch{if(_util.isNodeJS&&typeof mr=="string")return mr}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(mr){if(_util.isNodeJS&&typeof Buffer<"u"&&mr instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(mr instanceof Uint8Array&&mr.byteLength===mr.buffer.byteLength)return mr;if(typeof mr=="string")return(0,_util.stringToBytes)(mr);if(typeof mr=="object"&&!isNaN(mr?.length)||(0,_util.isArrayBuffer)(mr))return new Uint8Array(mr);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}class PDFDocumentLoadingTask{static#e=0;constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${PDFDocumentLoadingTask.#e++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(hr){throw this._worker?.port&&delete this._worker._pendingDestroy,hr}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(hr,gr,vr=!1,xr=null){this.length=hr,this.initialData=gr,this.progressiveDone=vr,this.contentDispositionFilename=xr,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(hr){this._rangeListeners.push(hr)}addProgressListener(hr){this._progressListeners.push(hr)}addProgressiveReadListener(hr){this._progressiveReadListeners.push(hr)}addProgressiveDoneListener(hr){this._progressiveDoneListeners.push(hr)}onDataRange(hr,gr){for(const vr of this._rangeListeners)vr(hr,gr)}onDataProgress(hr,gr){this._readyCapability.promise.then(()=>{for(const vr of this._progressListeners)vr(hr,gr)})}onDataProgressiveRead(hr){this._readyCapability.promise.then(()=>{for(const gr of this._progressiveReadListeners)gr(hr)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const hr of this._progressiveDoneListeners)hr()})}transportReady(){this._readyCapability.resolve()}requestDataRange(hr,gr){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(hr,gr){this._pdfInfo=hr,this._transport=gr,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(vr=>{if(!vr)return vr;const xr=[];for(const Er in vr)xr.push(...vr[Er]);return xr}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(hr){return this._transport.getPage(hr)}getPageIndex(hr){return this._transport.getPageIndex(hr)}getDestinations(){return this._transport.getDestinations()}getDestination(hr){return this._transport.getDestination(hr)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(hr=!1){return this._transport.startCleanup(hr||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{#e=null;#t=!1;constructor(hr,gr,vr,xr=!1){this._pageIndex=hr,this._pageInfo=gr,this._transport=vr,this._stats=xr?new _display_utils.StatTimer:null,this._pdfBug=xr,this.commonObjs=vr.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:hr,rotation:gr=this.rotate,offsetX:vr=0,offsetY:xr=0,dontFlip:Er=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:hr,rotation:gr,offsetX:vr,offsetY:xr,dontFlip:Er})}getAnnotations({intent:hr="display"}={}){const gr=this._transport.getRenderingIntent(hr);return this._transport.getAnnotations(this._pageIndex,gr.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:hr,viewport:gr,intent:vr="display",annotationMode:xr=_util.AnnotationMode.ENABLE,transform:Er=null,background:Cr=null,optionalContentConfigPromise:wr=null,annotationCanvasMap:Rr=null,pageColors:kr=null,printAnnotationStorage:Dr=null}){this._stats?.time("Overall");const Br=this._transport.getRenderingIntent(vr,xr,Dr);this.#t=!1,this.#n(),wr||(wr=this._transport.getOptionalContentConfig());let Hr=this._intentStates.get(Br.cacheKey);Hr||(Hr=Object.create(null),this._intentStates.set(Br.cacheKey,Hr)),Hr.streamReaderCancelTimeout&&(clearTimeout(Hr.streamReaderCancelTimeout),Hr.streamReaderCancelTimeout=null);const Gr=!!(Br.renderingIntent&_util.RenderingIntentFlag.PRINT);Hr.displayReadyCapability||(Hr.displayReadyCapability=new _util.PromiseCapability,Hr.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(Br));const qr=sn=>{Hr.renderTasks.delete(zr),(this._maybeCleanupAfterRender||Gr)&&(this.#t=!0),this.#r(!Gr),sn?(zr.capability.reject(sn),this._abortOperatorList({intentState:Hr,reason:sn instanceof Error?sn:new Error(sn)})):zr.capability.resolve(),this._stats?.timeEnd("Rendering"),this._stats?.timeEnd("Overall")},zr=new InternalRenderTask({callback:qr,params:{canvasContext:hr,viewport:gr,transform:Er,background:Cr},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:Rr,operatorList:Hr.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!Gr,pdfBug:this._pdfBug,pageColors:kr});(Hr.renderTasks||=new Set).add(zr);const Qr=zr.task;return Promise.all([Hr.displayReadyCapability.promise,wr]).then(([sn,hn])=>{if(this.destroyed){qr();return}this._stats?.time("Rendering"),zr.initializeGraphics({transparency:sn,optionalContentConfig:hn}),zr.operatorListChanged()}).catch(qr),Qr}getOperatorList({intent:hr="display",annotationMode:gr=_util.AnnotationMode.ENABLE,printAnnotationStorage:vr=null}={}){function xr(){Cr.operatorList.lastChunk&&(Cr.opListReadCapability.resolve(Cr.operatorList),Cr.renderTasks.delete(wr))}const Er=this._transport.getRenderingIntent(hr,gr,vr,!0);let Cr=this._intentStates.get(Er.cacheKey);Cr||(Cr=Object.create(null),this._intentStates.set(Er.cacheKey,Cr));let wr;return Cr.opListReadCapability||(wr=Object.create(null),wr.operatorListChanged=xr,Cr.opListReadCapability=new _util.PromiseCapability,(Cr.renderTasks||=new Set).add(wr),Cr.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(Er)),Cr.opListReadCapability.promise}streamTextContent({includeMarkedContent:hr=!1,disableNormalization:gr=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:hr===!0,disableNormalization:gr===!0},{highWaterMark:100,size(xr){return xr.items.length}})}getTextContent(hr={}){if(this._transport._htmlForXfa)return this.getXfa().then(vr=>_xfa_text.XfaText.textContent(vr));const gr=this.streamTextContent(hr);return new Promise(function(vr,xr){function Er(){Cr.read().then(function({value:Rr,done:kr}){if(kr){vr(wr);return}Object.assign(wr.styles,Rr.styles),wr.items.push(...Rr.items),Er()},xr)}const Cr=gr.getReader(),wr={items:[],styles:Object.create(null)};Er()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const hr=[];for(const gr of this._intentStates.values())if(this._abortOperatorList({intentState:gr,reason:new Error("Page was destroyed."),force:!0}),!gr.opListReadCapability)for(const vr of gr.renderTasks)hr.push(vr.completed),vr.cancel();return this.objs.clear(),this.#t=!1,this.#n(),Promise.all(hr)}cleanup(hr=!1){this.#t=!0;const gr=this.#r(!1);return hr&&gr&&(this._stats&&=new _display_utils.StatTimer),gr}#r(hr=!1){if(this.#n(),!this.#t||this.destroyed)return!1;if(hr)return this.#e=setTimeout(()=>{this.#e=null,this.#r(!1)},DELAYED_CLEANUP_TIMEOUT),!1;for(const{renderTasks:gr,operatorList:vr}of this._intentStates.values())if(gr.size>0||!vr.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}#n(){this.#e&&(clearTimeout(this.#e),this.#e=null)}_startRenderPage(hr,gr){const vr=this._intentStates.get(gr);vr&&(this._stats?.timeEnd("Page Request"),vr.displayReadyCapability?.resolve(hr))}_renderPageChunk(hr,gr){for(let vr=0,xr=hr.length;vr<xr;vr++)gr.operatorList.fnArray.push(hr.fnArray[vr]),gr.operatorList.argsArray.push(hr.argsArray[vr]);gr.operatorList.lastChunk=hr.lastChunk,gr.operatorList.separateAnnots=hr.separateAnnots;for(const vr of gr.renderTasks)vr.operatorListChanged();hr.lastChunk&&this.#r(!0)}_pumpOperatorList({renderingIntent:hr,cacheKey:gr,annotationStorageSerializable:vr}){const{map:xr,transfers:Er}=vr,wr=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:hr,cacheKey:gr,annotationStorage:xr},Er).getReader(),Rr=this._intentStates.get(gr);Rr.streamReader=wr;const kr=()=>{wr.read().then(({value:Dr,done:Br})=>{if(Br){Rr.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(Dr,Rr),kr())},Dr=>{if(Rr.streamReader=null,!this._transport.destroyed){if(Rr.operatorList){Rr.operatorList.lastChunk=!0;for(const Br of Rr.renderTasks)Br.operatorListChanged();this.#r(!0)}if(Rr.displayReadyCapability)Rr.displayReadyCapability.reject(Dr);else if(Rr.opListReadCapability)Rr.opListReadCapability.reject(Dr);else throw Dr}})};kr()}_abortOperatorList({intentState:hr,reason:gr,force:vr=!1}){if(hr.streamReader){if(hr.streamReaderCancelTimeout&&(clearTimeout(hr.streamReaderCancelTimeout),hr.streamReaderCancelTimeout=null),!vr){if(hr.renderTasks.size>0)return;if(gr instanceof _display_utils.RenderingCancelledException){let xr=RENDERING_CANCELLED_TIMEOUT;gr.extraDelay>0&&gr.extraDelay<1e3&&(xr+=gr.extraDelay),hr.streamReaderCancelTimeout=setTimeout(()=>{hr.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:hr,reason:gr,force:!0})},xr);return}}if(hr.streamReader.cancel(new _util.AbortException(gr.message)).catch(()=>{}),hr.streamReader=null,!this._transport.destroyed){for(const[xr,Er]of this._intentStates)if(Er===hr){this._intentStates.delete(xr);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{#e=new Set;#t=Promise.resolve();postMessage(hr,gr){const vr={data:structuredClone(hr,gr?{transfer:gr}:null)};this.#t.then(()=>{for(const xr of this.#e)xr.call(this,vr)})}addEventListener(hr,gr){this.#e.add(gr)}removeEventListener(hr,gr){this.#e.delete(gr)}terminate(){this.#e.clear()}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const mr=document?.currentScript?.src;mr&&(PDFWorkerUtil.fallbackWorkerSrc=mr.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(mr,hr){let gr;try{if(gr=new URL(mr),!gr.origin||gr.origin==="null")return!1}catch{return!1}const vr=new URL(hr,gr);return gr.origin===vr.origin},PDFWorkerUtil.createCDNWrapper=function(mr){const hr=`importScripts("${mr}");`;return URL.createObjectURL(new Blob([hr]))}}class PDFWorker{static#workerPorts;constructor({name:mr=null,port:hr=null,verbosity:gr=(0,_util.getVerbosityLevel)()}={}){if(this.name=mr,this.destroyed=!1,this.verbosity=gr,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,hr){if(PDFWorker.#workerPorts?.has(hr))throw new Error("Cannot use more than one PDFWorker per port.");(PDFWorker.#workerPorts||=new WeakMap).set(hr,this),this._initializeFromPort(hr);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(mr){this._port=mr,this._messageHandler=new _message_handler.MessageHandler("main","worker",mr),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:mr}=PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,mr)||(mr=PDFWorkerUtil.createCDNWrapper(new URL(mr,window.location).href));const hr=new Worker(mr),gr=new _message_handler.MessageHandler("main","worker",hr),vr=()=>{hr.removeEventListener("error",xr),gr.destroy(),hr.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},xr=()=>{this._webWorker||vr()};hr.addEventListener("error",xr),gr.on("test",Cr=>{if(hr.removeEventListener("error",xr),this.destroyed){vr();return}Cr?(this._messageHandler=gr,this._port=hr,this._webWorker=hr,this._readyCapability.resolve(),gr.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),gr.destroy(),hr.terminate())}),gr.on("ready",Cr=>{if(hr.removeEventListener("error",xr),this.destroyed){vr();return}try{Er()}catch{this._setupFakeWorker()}});const Er=()=>{const Cr=new Uint8Array;gr.send("test",Cr,[Cr.buffer])};Er();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then(mr=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const hr=new LoopbackPort;this._port=hr;const gr=`fake${PDFWorkerUtil.fakeWorkerId++}`,vr=new _message_handler.MessageHandler(gr+"_worker",gr,hr);mr.setup(vr,hr);const xr=new _message_handler.MessageHandler(gr,gr+"_worker",hr);this._messageHandler=xr,this._readyCapability.resolve(),xr.send("configure",{verbosity:this.verbosity})}).catch(mr=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${mr.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),PDFWorker.#workerPorts?.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(mr){if(!mr?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const hr=this.#workerPorts?.get(mr.port);if(hr){if(hr._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return hr}return new PDFWorker(mr)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports.PDFWorker=PDFWorker;class WorkerTransport{#e=new Map;#t=new Map;#r=new Map;#n=null;constructor(hr,gr,vr,xr,Er){this.messageHandler=hr,this.loadingTask=gr,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:xr.ownerDocument,styleElement:xr.styleElement}),this._params=xr,this.canvasFactory=Er.canvasFactory,this.filterFactory=Er.filterFactory,this.cMapReaderFactory=Er.cMapReaderFactory,this.standardFontDataFactory=Er.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=vr,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}#o(hr,gr=null){const vr=this.#e.get(hr);if(vr)return vr;const xr=this.messageHandler.sendWithPromise(hr,gr);return this.#e.set(hr,xr),xr}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(hr,gr=_util.AnnotationMode.ENABLE,vr=null,xr=!1){let Er=_util.RenderingIntentFlag.DISPLAY,Cr=_annotation_storage.SerializableEmpty;switch(hr){case"any":Er=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":Er=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${hr}`)}switch(gr){case _util.AnnotationMode.DISABLE:Er+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:Er+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:Er+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,Cr=(Er&_util.RenderingIntentFlag.PRINT&&vr instanceof _annotation_storage.PrintAnnotationStorage?vr:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${gr}`)}return xr&&(Er+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:Er,cacheKey:`${Er}_${Cr.hash}`,annotationStorageSerializable:Cr}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,this.#n?.reject(new Error("Worker was destroyed during onPassword callback"));const hr=[];for(const vr of this.#t.values())hr.push(vr._destroy());this.#t.clear(),this.#r.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const gr=this.messageHandler.sendWithPromise("Terminate",null);return hr.push(gr),Promise.all(hr).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),this._networkStream?.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:hr,loadingTask:gr}=this;hr.on("GetReader",(vr,xr)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=Er=>{this._lastProgress={loaded:Er.loaded,total:Er.total}},xr.onPull=()=>{this._fullReader.read().then(function({value:Er,done:Cr}){if(Cr){xr.close();return}(0,_util.assert)(Er instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),xr.enqueue(new Uint8Array(Er),1,[Er])}).catch(Er=>{xr.error(Er)})},xr.onCancel=Er=>{this._fullReader.cancel(Er),xr.ready.catch(Cr=>{if(!this.destroyed)throw Cr})}}),hr.on("ReaderHeadersReady",vr=>{const xr=new _util.PromiseCapability,Er=this._fullReader;return Er.headersReady.then(()=>{(!Er.isStreamingSupported||!Er.isRangeSupported)&&(this._lastProgress&&gr.onProgress?.(this._lastProgress),Er.onProgress=Cr=>{gr.onProgress?.({loaded:Cr.loaded,total:Cr.total})}),xr.resolve({isStreamingSupported:Er.isStreamingSupported,isRangeSupported:Er.isRangeSupported,contentLength:Er.contentLength})},xr.reject),xr.promise}),hr.on("GetRangeReader",(vr,xr)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const Er=this._networkStream.getRangeReader(vr.begin,vr.end);if(!Er){xr.close();return}xr.onPull=()=>{Er.read().then(function({value:Cr,done:wr}){if(wr){xr.close();return}(0,_util.assert)(Cr instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),xr.enqueue(new Uint8Array(Cr),1,[Cr])}).catch(Cr=>{xr.error(Cr)})},xr.onCancel=Cr=>{Er.cancel(Cr),xr.ready.catch(wr=>{if(!this.destroyed)throw wr})}}),hr.on("GetDoc",({pdfInfo:vr})=>{this._numPages=vr.numPages,this._htmlForXfa=vr.htmlForXfa,delete vr.htmlForXfa,gr._capability.resolve(new PDFDocumentProxy(vr,this))}),hr.on("DocException",function(vr){let xr;switch(vr.name){case"PasswordException":xr=new _util.PasswordException(vr.message,vr.code);break;case"InvalidPDFException":xr=new _util.InvalidPDFException(vr.message);break;case"MissingPDFException":xr=new _util.MissingPDFException(vr.message);break;case"UnexpectedResponseException":xr=new _util.UnexpectedResponseException(vr.message,vr.status);break;case"UnknownErrorException":xr=new _util.UnknownErrorException(vr.message,vr.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}gr._capability.reject(xr)}),hr.on("PasswordRequest",vr=>{if(this.#n=new _util.PromiseCapability,gr.onPassword){const xr=Er=>{Er instanceof Error?this.#n.reject(Er):this.#n.resolve({password:Er})};try{gr.onPassword(xr,vr.code)}catch(Er){this.#n.reject(Er)}}else this.#n.reject(new _util.PasswordException(vr.message,vr.code));return this.#n.promise}),hr.on("DataLoaded",vr=>{gr.onProgress?.({loaded:vr.length,total:vr.length}),this.downloadInfoCapability.resolve(vr)}),hr.on("StartRenderPage",vr=>{if(this.destroyed)return;this.#t.get(vr.pageIndex)._startRenderPage(vr.transparency,vr.cacheKey)}),hr.on("commonobj",([vr,xr,Er])=>{if(!this.destroyed&&!this.commonObjs.has(vr))switch(xr){case"Font":const Cr=this._params;if("error"in Er){const kr=Er.error;(0,_util.warn)(`Error during font loading: ${kr}`),this.commonObjs.resolve(vr,kr);break}const wr=Cr.pdfBug&&globalThis.FontInspector?.enabled?(kr,Dr)=>globalThis.FontInspector.fontAdded(kr,Dr):null,Rr=new _font_loader.FontFaceObject(Er,{isEvalSupported:Cr.isEvalSupported,disableFontFace:Cr.disableFontFace,ignoreErrors:Cr.ignoreErrors,inspectFont:wr});this.fontLoader.bind(Rr).catch(kr=>hr.sendWithPromise("FontFallback",{id:vr})).finally(()=>{!Cr.fontExtraProperties&&Rr.data&&(Rr.data=null),this.commonObjs.resolve(vr,Rr)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(vr,Er);break;default:throw new Error(`Got unknown common object type ${xr}`)}}),hr.on("obj",([vr,xr,Er,Cr])=>{if(this.destroyed)return;const wr=this.#t.get(xr);if(!wr.objs.has(vr))switch(Er){case"Image":if(wr.objs.resolve(vr,Cr),Cr){let Rr;if(Cr.bitmap){const{width:kr,height:Dr}=Cr;Rr=kr*Dr*4}else Rr=Cr.data?.length||0;Rr>_util.MAX_IMAGE_SIZE_TO_CACHE&&(wr._maybeCleanupAfterRender=!0)}break;case"Pattern":wr.objs.resolve(vr,Cr);break;default:throw new Error(`Got unknown object type ${Er}`)}}),hr.on("DocProgress",vr=>{this.destroyed||gr.onProgress?.({loaded:vr.loaded,total:vr.total})}),hr.on("FetchBuiltInCMap",vr=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(vr):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),hr.on("FetchStandardFontData",vr=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(vr):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:hr,transfers:gr}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:hr,filename:this._fullReader?.filename??null},gr).finally(()=>{this.annotationStorage.resetModified()})}getPage(hr){if(!Number.isInteger(hr)||hr<=0||hr>this._numPages)return Promise.reject(new Error("Invalid page request."));const gr=hr-1,vr=this.#r.get(gr);if(vr)return vr;const xr=this.messageHandler.sendWithPromise("GetPage",{pageIndex:gr}).then(Er=>{if(this.destroyed)throw new Error("Transport destroyed");const Cr=new PDFPageProxy(gr,Er,this,this._params.pdfBug);return this.#t.set(gr,Cr),Cr});return this.#r.set(gr,xr),xr}getPageIndex(hr){return typeof hr!="object"||hr===null||!Number.isInteger(hr.num)||hr.num<0||!Number.isInteger(hr.gen)||hr.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:hr.num,gen:hr.gen})}getAnnotations(hr,gr){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:hr,intent:gr})}getFieldObjects(){return this.#o("GetFieldObjects")}hasJSActions(){return this.#o("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(hr){return typeof hr!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:hr})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#o("GetDocJSActions")}getPageJSActions(hr){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:hr})}getStructTree(hr){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:hr})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(hr=>new _optional_content_config.OptionalContentConfig(hr))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const hr="GetMetadata",gr=this.#e.get(hr);if(gr)return gr;const vr=this.messageHandler.sendWithPromise(hr,null).then(xr=>({info:xr[0],metadata:xr[1]?new _metadata.Metadata(xr[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(hr,vr),vr}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(hr=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const gr of this.#t.values())if(!gr.cleanup())throw new Error(`startCleanup: Page ${gr.pageNumber} is currently rendering.`);this.commonObjs.clear(),hr||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:hr,enableXfa:gr}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:hr,enableXfa:gr})}}class PDFObjects{#e=Object.create(null);#t(hr){return this.#e[hr]||={capability:new _util.PromiseCapability,data:null}}get(hr,gr=null){if(gr){const xr=this.#t(hr);return xr.capability.promise.then(()=>gr(xr.data)),null}const vr=this.#e[hr];if(!vr?.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${hr}.`);return vr.data}has(hr){return this.#e[hr]?.capability.settled||!1}resolve(hr,gr=null){const vr=this.#t(hr);vr.data=gr,vr.capability.resolve()}clear(){for(const hr in this.#e){const{data:gr}=this.#e[hr];gr?.bitmap?.close()}this.#e=Object.create(null)}}class RenderTask{#e=null;constructor(hr){this.#e=hr,this.onContinue=null}get promise(){return this.#e.capability.promise}cancel(hr=0){this.#e.cancel(null,hr)}get separateAnnots(){const{separateAnnots:hr}=this.#e.operatorList;if(!hr)return!1;const{annotationCanvasMap:gr}=this.#e;return hr.form||hr.canvas&&gr?.size>0}}exports.RenderTask=RenderTask;class InternalRenderTask{static#e=new WeakSet;constructor({callback:hr,params:gr,objs:vr,commonObjs:xr,annotationCanvasMap:Er,operatorList:Cr,pageIndex:wr,canvasFactory:Rr,filterFactory:kr,useRequestAnimationFrame:Dr=!1,pdfBug:Br=!1,pageColors:Hr=null}){this.callback=hr,this.params=gr,this.objs=vr,this.commonObjs=xr,this.annotationCanvasMap=Er,this.operatorListIdx=null,this.operatorList=Cr,this._pageIndex=wr,this.canvasFactory=Rr,this.filterFactory=kr,this._pdfBug=Br,this.pageColors=Hr,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=Dr===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=gr.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:hr=!1,optionalContentConfig:gr}){if(this.cancelled)return;if(this._canvas){if(InternalRenderTask.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");InternalRenderTask.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:vr,viewport:xr,transform:Er,background:Cr}=this.params;this.gfx=new _canvas.CanvasGraphics(vr,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:gr},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:Er,viewport:xr,transparency:hr,background:Cr}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(hr=null,gr=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),InternalRenderTask.#e.delete(this._canvas),this.callback(hr||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,gr))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),InternalRenderTask.#e.delete(this._canvas),this.callback())))}}const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(mr,hr,gr)=>{Object.defineProperty(hr,"__esModule",{value:!0}),hr.SerializableEmpty=hr.PrintAnnotationStorage=hr.AnnotationStorage=void 0;var vr=gr(1),xr=gr(4),Er=gr(8);const Cr=Object.freeze({map:null,hash:"",transfers:void 0});hr.SerializableEmpty=Cr;class wr{#e=!1;#t=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(Dr,Br){const Hr=this.#t.get(Dr);return Hr===void 0?Br:Object.assign(Br,Hr)}getRawValue(Dr){return this.#t.get(Dr)}remove(Dr){if(this.#t.delete(Dr),this.#t.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const Br of this.#t.values())if(Br instanceof xr.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(Dr,Br){const Hr=this.#t.get(Dr);let Gr=!1;if(Hr!==void 0)for(const[qr,zr]of Object.entries(Br))Hr[qr]!==zr&&(Gr=!0,Hr[qr]=zr);else Gr=!0,this.#t.set(Dr,Br);Gr&&this.#r(),Br instanceof xr.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(Br.constructor._type)}has(Dr){return this.#t.has(Dr)}getAll(){return this.#t.size>0?(0,vr.objectFromMap)(this.#t):null}setAll(Dr){for(const[Br,Hr]of Object.entries(Dr))this.setValue(Br,Hr)}get size(){return this.#t.size}#r(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Rr(this)}get serializable(){if(this.#t.size===0)return Cr;const Dr=new Map,Br=new Er.MurmurHash3_64,Hr=[],Gr=Object.create(null);let qr=!1;for(const[zr,Qr]of this.#t){const sn=Qr instanceof xr.AnnotationEditor?Qr.serialize(!1,Gr):Qr;sn&&(Dr.set(zr,sn),Br.update(`${zr}:${JSON.stringify(sn)}`),qr||=!!sn.bitmap)}if(qr)for(const zr of Dr.values())zr.bitmap&&Hr.push(zr.bitmap);return Dr.size>0?{map:Dr,hash:Br.hexdigest(),transfers:Hr}:Cr}}hr.AnnotationStorage=wr;class Rr extends wr{#e;constructor(Dr){super();const{map:Br,hash:Hr,transfers:Gr}=Dr.serializable,qr=structuredClone(Br,Gr?{transfer:Gr}:null);this.#e={map:qr,hash:Hr,transfers:Gr}}get print(){(0,vr.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}}hr.PrintAnnotationStorage=Rr},(mr,hr,gr)=>{Object.defineProperty(hr,"__esModule",{value:!0}),hr.AnnotationEditor=void 0;var vr=gr(5),xr=gr(1),Er=gr(6);class Cr{#e="";#t=!1;#r=null;#n=null;#o=null;#s=!1;#a=null;#l=this.focusin.bind(this);#c=this.focusout.bind(this);#i=!1;#f=!1;#d=!1;_initialOptions=Object.create(null);_uiManager=null;_focusEventsAllowed=!0;_l10nPromise=null;#h=!1;#p=Cr._zIndex++;static _borderLineWidth=-1;static _colorManager=new vr.ColorManager;static _zIndex=1;static SMALL_EDITOR_SIZE=0;constructor(kr){this.constructor===Cr&&(0,xr.unreachable)("Cannot initialize AnnotationEditor."),this.parent=kr.parent,this.id=kr.id,this.width=this.height=null,this.pageIndex=kr.parent.pageIndex,this.name=kr.name,this.div=null,this._uiManager=kr.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=kr.isCentered,this._structTreeParentId=null;const{rotation:Dr,rawDims:{pageWidth:Br,pageHeight:Hr,pageX:Gr,pageY:qr}}=this.parent.viewport;this.rotation=Dr,this.pageRotation=(360+Dr-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[Br,Hr],this.pageTranslation=[Gr,qr];const[zr,Qr]=this.parentDimensions;this.x=kr.x/zr,this.y=kr.y/Qr,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,xr.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(kr){const Dr=new wr({id:kr.parent.getNextId(),parent:kr.parent,uiManager:kr._uiManager});Dr.annotationElementId=kr.annotationElementId,Dr.deleted=!0,Dr._uiManager.addToAnnotationStorage(Dr)}static initialize(kr,Dr=null){if(Cr._l10nPromise||=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(Hr=>[Hr,kr.get(Hr)])),Dr?.strings)for(const Hr of Dr.strings)Cr._l10nPromise.set(Hr,kr.get(Hr));if(Cr._borderLineWidth!==-1)return;const Br=getComputedStyle(document.documentElement);Cr._borderLineWidth=parseFloat(Br.getPropertyValue("--outline-width"))||0}static updateDefaultParams(kr,Dr){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(kr){return!1}static paste(kr,Dr){(0,xr.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#h}set _isDraggable(kr){this.#h=kr,this.div?.classList.toggle("draggable",kr)}center(){const[kr,Dr]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*Dr/(kr*2),this.y+=this.width*kr/(Dr*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*Dr/(kr*2),this.y-=this.width*kr/(Dr*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(kr){this._uiManager.addCommands(kr)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#p}setParent(kr){kr!==null&&(this.pageIndex=kr.pageIndex,this.pageDimensions=kr.pageDimensions),this.parent=kr}focusin(kr){this._focusEventsAllowed&&(this.#i?this.#i=!1:this.parent.setSelected(this))}focusout(kr){!this._focusEventsAllowed||!this.isAttachedToDOM||kr.relatedTarget?.closest(`#${this.id}`)||(kr.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(kr,Dr,Br,Hr){const[Gr,qr]=this.parentDimensions;[Br,Hr]=this.screenToPageTranslation(Br,Hr),this.x=(kr+Br)/Gr,this.y=(Dr+Hr)/qr,this.fixAndSetPosition()}#v([kr,Dr],Br,Hr){[Br,Hr]=this.screenToPageTranslation(Br,Hr),this.x+=Br/kr,this.y+=Hr/Dr,this.fixAndSetPosition()}translate(kr,Dr){this.#v(this.parentDimensions,kr,Dr)}translateInPage(kr,Dr){this.#v(this.pageDimensions,kr,Dr),this.div.scrollIntoView({block:"nearest"})}drag(kr,Dr){const[Br,Hr]=this.parentDimensions;if(this.x+=kr/Br,this.y+=Dr/Hr,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:sn,y:hn}=this.div.getBoundingClientRect();this.parent.findNewParent(this,sn,hn)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:Gr,y:qr}=this;const[zr,Qr]=this.#g();Gr+=zr,qr+=Qr,this.div.style.left=`${(100*Gr).toFixed(2)}%`,this.div.style.top=`${(100*qr).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}#g(){const[kr,Dr]=this.parentDimensions,{_borderLineWidth:Br}=Cr,Hr=Br/kr,Gr=Br/Dr;switch(this.rotation){case 90:return[-Hr,Gr];case 180:return[Hr,Gr];case 270:return[Hr,-Gr];default:return[-Hr,-Gr]}}fixAndSetPosition(){const[kr,Dr]=this.pageDimensions;let{x:Br,y:Hr,width:Gr,height:qr}=this;switch(Gr*=kr,qr*=Dr,Br*=kr,Hr*=Dr,this.rotation){case 0:Br=Math.max(0,Math.min(kr-Gr,Br)),Hr=Math.max(0,Math.min(Dr-qr,Hr));break;case 90:Br=Math.max(0,Math.min(kr-qr,Br)),Hr=Math.min(Dr,Math.max(Gr,Hr));break;case 180:Br=Math.min(kr,Math.max(Gr,Br)),Hr=Math.min(Dr,Math.max(qr,Hr));break;case 270:Br=Math.min(kr,Math.max(qr,Br)),Hr=Math.max(0,Math.min(Dr-Gr,Hr));break}this.x=Br/=kr,this.y=Hr/=Dr;const[zr,Qr]=this.#g();Br+=zr,Hr+=Qr;const{style:sn}=this.div;sn.left=`${(100*Br).toFixed(2)}%`,sn.top=`${(100*Hr).toFixed(2)}%`,this.moveInDOM()}static#m(kr,Dr,Br){switch(Br){case 90:return[Dr,-kr];case 180:return[-kr,-Dr];case 270:return[-Dr,kr];default:return[kr,Dr]}}screenToPageTranslation(kr,Dr){return Cr.#m(kr,Dr,this.parentRotation)}pageTranslationToScreen(kr,Dr){return Cr.#m(kr,Dr,360-this.parentRotation)}#u(kr){switch(kr){case 90:{const[Dr,Br]=this.pageDimensions;return[0,-Dr/Br,Br/Dr,0]}case 180:return[-1,0,0,-1];case 270:{const[Dr,Br]=this.pageDimensions;return[0,Dr/Br,-Br/Dr,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:kr,pageDimensions:[Dr,Br]}=this,Hr=Dr*kr,Gr=Br*kr;return xr.FeatureTest.isCSSRoundSupported?[Math.round(Hr),Math.round(Gr)]:[Hr,Gr]}setDims(kr,Dr){const[Br,Hr]=this.parentDimensions;this.div.style.width=`${(100*kr/Br).toFixed(2)}%`,this.#s||(this.div.style.height=`${(100*Dr/Hr).toFixed(2)}%`),this.#r?.classList.toggle("small",kr<Cr.SMALL_EDITOR_SIZE||Dr<Cr.SMALL_EDITOR_SIZE)}fixDims(){const{style:kr}=this.div,{height:Dr,width:Br}=kr,Hr=Br.endsWith("%"),Gr=!this.#s&&Dr.endsWith("%");if(Hr&&Gr)return;const[qr,zr]=this.parentDimensions;Hr||(kr.width=`${(100*parseFloat(Br)/qr).toFixed(2)}%`),!this.#s&&!Gr&&(kr.height=`${(100*parseFloat(Dr)/zr).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#b(){if(this.#a)return;this.#a=document.createElement("div"),this.#a.classList.add("resizers");const kr=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||kr.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const Dr of kr){const Br=document.createElement("div");this.#a.append(Br),Br.classList.add("resizer",Dr),Br.addEventListener("pointerdown",this.#_.bind(this,Dr)),Br.addEventListener("contextmenu",Er.noContextMenu)}this.div.prepend(this.#a)}#_(kr,Dr){Dr.preventDefault();const{isMac:Br}=xr.FeatureTest.platform;if(Dr.button!==0||Dr.ctrlKey&&Br)return;const Hr=this.#$.bind(this,kr),Gr=this._isDraggable;this._isDraggable=!1;const qr={passive:!0,capture:!0};window.addEventListener("pointermove",Hr,qr);const zr=this.x,Qr=this.y,sn=this.width,hn=this.height,vn=this.parent.div.style.cursor,yn=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(Dr.target).cursor;const gn=()=>{this._isDraggable=Gr,window.removeEventListener("pointerup",gn),window.removeEventListener("blur",gn),window.removeEventListener("pointermove",Hr,qr),this.parent.div.style.cursor=vn,this.div.style.cursor=yn;const bn=this.x,xn=this.y,$n=this.width,Sn=this.height;bn===zr&&xn===Qr&&$n===sn&&Sn===hn||this.addCommands({cmd:()=>{this.width=$n,this.height=Sn,this.x=bn,this.y=xn;const[Cn,Rn]=this.parentDimensions;this.setDims(Cn*$n,Rn*Sn),this.fixAndSetPosition()},undo:()=>{this.width=sn,this.height=hn,this.x=zr,this.y=Qr;const[Cn,Rn]=this.parentDimensions;this.setDims(Cn*sn,Rn*hn),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",gn),window.addEventListener("blur",gn)}#$(kr,Dr){const[Br,Hr]=this.parentDimensions,Gr=this.x,qr=this.y,zr=this.width,Qr=this.height,sn=Cr.MIN_SIZE/Br,hn=Cr.MIN_SIZE/Hr,vn=Nn=>Math.round(Nn*1e4)/1e4,yn=this.#u(this.rotation),gn=(Nn,An)=>[yn[0]*Nn+yn[2]*An,yn[1]*Nn+yn[3]*An],bn=this.#u(360-this.rotation),xn=(Nn,An)=>[bn[0]*Nn+bn[2]*An,bn[1]*Nn+bn[3]*An];let $n,Sn,Cn=!1,Rn=!1;switch(kr){case"topLeft":Cn=!0,$n=(Nn,An)=>[0,0],Sn=(Nn,An)=>[Nn,An];break;case"topMiddle":$n=(Nn,An)=>[Nn/2,0],Sn=(Nn,An)=>[Nn/2,An];break;case"topRight":Cn=!0,$n=(Nn,An)=>[Nn,0],Sn=(Nn,An)=>[0,An];break;case"middleRight":Rn=!0,$n=(Nn,An)=>[Nn,An/2],Sn=(Nn,An)=>[0,An/2];break;case"bottomRight":Cn=!0,$n=(Nn,An)=>[Nn,An],Sn=(Nn,An)=>[0,0];break;case"bottomMiddle":$n=(Nn,An)=>[Nn/2,An],Sn=(Nn,An)=>[Nn/2,0];break;case"bottomLeft":Cn=!0,$n=(Nn,An)=>[0,An],Sn=(Nn,An)=>[Nn,0];break;case"middleLeft":Rn=!0,$n=(Nn,An)=>[0,An/2],Sn=(Nn,An)=>[Nn,An/2];break}const Bn=$n(zr,Qr),Fn=Sn(zr,Qr);let Hn=gn(...Fn);const Gn=vn(Gr+Hn[0]),qn=vn(qr+Hn[1]);let On=1,wn=1,[_n,Tn]=this.screenToPageTranslation(Dr.movementX,Dr.movementY);if([_n,Tn]=xn(_n/Br,Tn/Hr),Cn){const Nn=Math.hypot(zr,Qr);On=wn=Math.max(Math.min(Math.hypot(Fn[0]-Bn[0]-_n,Fn[1]-Bn[1]-Tn)/Nn,1/zr,1/Qr),sn/zr,hn/Qr)}else Rn?On=Math.max(sn,Math.min(1,Math.abs(Fn[0]-Bn[0]-_n)))/zr:wn=Math.max(hn,Math.min(1,Math.abs(Fn[1]-Bn[1]-Tn)))/Qr;const Mn=vn(zr*On),Ln=vn(Qr*wn);Hn=gn(...Sn(Mn,Ln));const jn=Gn-Hn[0],Kn=qn-Hn[1];this.width=Mn,this.height=Ln,this.x=jn,this.y=Kn,this.setDims(Br*Mn,Hr*Ln),this.fixAndSetPosition()}async addAltTextButton(){if(this.#r)return;const kr=this.#r=document.createElement("button");kr.className="altText";const Dr=await Cr._l10nPromise.get("editor_alt_text_button_label");kr.textContent=Dr,kr.setAttribute("aria-label",Dr),kr.tabIndex="0",kr.addEventListener("contextmenu",Er.noContextMenu),kr.addEventListener("pointerdown",Br=>Br.stopPropagation()),kr.addEventListener("click",Br=>{Br.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),kr.addEventListener("keydown",Br=>{Br.target===kr&&Br.key==="Enter"&&(Br.preventDefault(),this._uiManager.editAltText(this))}),this.#A(),this.div.append(kr),Cr.SMALL_EDITOR_SIZE||(Cr.SMALL_EDITOR_SIZE=Math.min(128,Math.round(kr.getBoundingClientRect().width*1.4)))}async#A(){const kr=this.#r;if(!kr)return;if(!this.#e&&!this.#t){kr.classList.remove("done"),this.#n?.remove();return}Cr._l10nPromise.get("editor_alt_text_edit_button_label").then(Br=>{kr.setAttribute("aria-label",Br)});let Dr=this.#n;if(!Dr){this.#n=Dr=document.createElement("span"),Dr.className="tooltip",Dr.setAttribute("role","tooltip");const Br=Dr.id=`alt-text-tooltip-${this.id}`;kr.setAttribute("aria-describedby",Br);const Hr=100;kr.addEventListener("mouseenter",()=>{this.#o=setTimeout(()=>{this.#o=null,this.#n.classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},Hr)}),kr.addEventListener("mouseleave",()=>{clearTimeout(this.#o),this.#o=null,this.#n?.classList.remove("show")})}kr.classList.add("done"),Dr.innerText=this.#t?await Cr._l10nPromise.get("editor_alt_text_decorative_tooltip"):this.#e,Dr.parentNode||kr.append(Dr)}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:this.#e,decorative:this.#t}}set altTextData({altText:kr,decorative:Dr}){this.#e===kr&&this.#t===Dr||(this.#e=kr,this.#t=Dr,this.#A())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",this.#l),this.div.addEventListener("focusout",this.#c);const[kr,Dr]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*Dr/kr).toFixed(2)}%`,this.div.style.maxHeight=`${(100*kr/Dr).toFixed(2)}%`);const[Br,Hr]=this.getInitialTranslation();return this.translate(Br,Hr),(0,vr.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(kr){const{isMac:Dr}=xr.FeatureTest.platform;if(kr.button!==0||kr.ctrlKey&&Dr){kr.preventDefault();return}this.#i=!0,this.#w(kr)}#w(kr){if(!this._isDraggable)return;const Dr=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let Br,Hr;Dr&&(Br={passive:!0,capture:!0},Hr=qr=>{const[zr,Qr]=this.screenToPageTranslation(qr.movementX,qr.movementY);this._uiManager.dragSelectedEditors(zr,Qr)},window.addEventListener("pointermove",Hr,Br));const Gr=()=>{if(window.removeEventListener("pointerup",Gr),window.removeEventListener("blur",Gr),Dr&&window.removeEventListener("pointermove",Hr,Br),this.#i=!1,!this._uiManager.endDragSession()){const{isMac:qr}=xr.FeatureTest.platform;kr.ctrlKey&&!qr||kr.shiftKey||kr.metaKey&&qr?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",Gr),window.addEventListener("blur",Gr)}moveInDOM(){this.parent?.moveEditorInDOM(this)}_setParentAndPosition(kr,Dr,Br){kr.changeParent(this),this.x=Dr,this.y=Br,this.fixAndSetPosition()}getRect(kr,Dr){const Br=this.parentScale,[Hr,Gr]=this.pageDimensions,[qr,zr]=this.pageTranslation,Qr=kr/Br,sn=Dr/Br,hn=this.x*Hr,vn=this.y*Gr,yn=this.width*Hr,gn=this.height*Gr;switch(this.rotation){case 0:return[hn+Qr+qr,Gr-vn-sn-gn+zr,hn+Qr+yn+qr,Gr-vn-sn+zr];case 90:return[hn+sn+qr,Gr-vn+Qr+zr,hn+sn+gn+qr,Gr-vn+Qr+yn+zr];case 180:return[hn-Qr-yn+qr,Gr-vn+sn+zr,hn-Qr+qr,Gr-vn+sn+gn+zr];case 270:return[hn-sn-gn+qr,Gr-vn-Qr-yn+zr,hn-sn+qr,Gr-vn-Qr+zr];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(kr,Dr){const[Br,Hr,Gr,qr]=kr,zr=Gr-Br,Qr=qr-Hr;switch(this.rotation){case 0:return[Br,Dr-qr,zr,Qr];case 90:return[Br,Dr-Hr,Qr,zr];case 180:return[Gr,Dr-Hr,zr,Qr];case 270:return[Gr,Dr-qr,Qr,zr];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#d=!0}disableEditMode(){this.#d=!1}isInEditMode(){return this.#d}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){this.div?.addEventListener("focusin",this.#l),this.div?.addEventListener("focusout",this.#c)}serialize(kr=!1,Dr=null){(0,xr.unreachable)("An editor must be serializable")}static deserialize(kr,Dr,Br){const Hr=new this.prototype.constructor({parent:Dr,id:Dr.getNextId(),uiManager:Br});Hr.rotation=kr.rotation;const[Gr,qr]=Hr.pageDimensions,[zr,Qr,sn,hn]=Hr.getRectInCurrentCoords(kr.rect,qr);return Hr.x=zr/Gr,Hr.y=Qr/qr,Hr.width=sn/Gr,Hr.height=hn/qr,Hr}remove(){this.div.removeEventListener("focusin",this.#l),this.div.removeEventListener("focusout",this.#c),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#r?.remove(),this.#r=null,this.#n=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#b(),this.#a.classList.remove("hidden"))}select(){this.makeResizable(),this.div?.classList.add("selectedEditor")}unselect(){this.#a?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(kr,Dr){}disableEditing(){this.#r&&(this.#r.hidden=!0)}enableEditing(){this.#r&&(this.#r.hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return this.#f}set isEditing(kr){this.#f=kr,this.parent&&(kr?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(kr,Dr){this.#s=!0;const Br=kr/Dr,{style:Hr}=this.div;Hr.aspectRatio=Br,Hr.height="auto"}static get MIN_SIZE(){return 16}}hr.AnnotationEditor=Cr;class wr extends Cr{constructor(kr){super(kr),this.annotationElementId=kr.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(mr,hr,gr)=>{Object.defineProperty(hr,"__esModule",{value:!0}),hr.KeyboardManager=hr.CommandManager=hr.ColorManager=hr.AnnotationEditorUIManager=void 0,hr.bindEvents=Er,hr.opacityToHex=Cr;var vr=gr(1),xr=gr(6);function Er(Gr,qr,zr){for(const Qr of zr)qr.addEventListener(Qr,Gr[Qr].bind(Gr))}function Cr(Gr){return Math.round(Math.min(255,Math.max(1,255*Gr))).toString(16).padStart(2,"0")}class wr{#e=0;getId(){return`${vr.AnnotationEditorPrefix}${this.#e++}`}}class Rr{#e=(0,vr.getUuid)();#t=0;#r=null;static get _isSVGFittingCanvas(){const qr='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',Qr=new OffscreenCanvas(1,3).getContext("2d"),sn=new Image;sn.src=qr;const hn=sn.decode().then(()=>(Qr.drawImage(sn,0,0,1,1,0,0,1,3),new Uint32Array(Qr.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,vr.shadow)(this,"_isSVGFittingCanvas",hn)}async#n(qr,zr){this.#r||=new Map;let Qr=this.#r.get(qr);if(Qr===null)return null;if(Qr?.bitmap)return Qr.refCounter+=1,Qr;try{Qr||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let sn;if(typeof zr=="string"){Qr.url=zr;const hn=await fetch(zr);if(!hn.ok)throw new Error(hn.statusText);sn=await hn.blob()}else sn=Qr.file=zr;if(sn.type==="image/svg+xml"){const hn=Rr._isSVGFittingCanvas,vn=new FileReader,yn=new Image,gn=new Promise((bn,xn)=>{yn.onload=()=>{Qr.bitmap=yn,Qr.isSvg=!0,bn()},vn.onload=async()=>{const $n=Qr.svgUrl=vn.result;yn.src=await hn?`${$n}#svgView(preserveAspectRatio(none))`:$n},yn.onerror=vn.onerror=xn});vn.readAsDataURL(sn),await gn}else Qr.bitmap=await createImageBitmap(sn);Qr.refCounter=1}catch(sn){console.error(sn),Qr=null}return this.#r.set(qr,Qr),Qr&&this.#r.set(Qr.id,Qr),Qr}async getFromFile(qr){const{lastModified:zr,name:Qr,size:sn,type:hn}=qr;return this.#n(`${zr}_${Qr}_${sn}_${hn}`,qr)}async getFromUrl(qr){return this.#n(qr,qr)}async getFromId(qr){this.#r||=new Map;const zr=this.#r.get(qr);return zr?zr.bitmap?(zr.refCounter+=1,zr):zr.file?this.getFromFile(zr.file):this.getFromUrl(zr.url):null}getSvgUrl(qr){const zr=this.#r.get(qr);return zr?.isSvg?zr.svgUrl:null}deleteId(qr){this.#r||=new Map;const zr=this.#r.get(qr);zr&&(zr.refCounter-=1,zr.refCounter===0&&(zr.bitmap=null))}isValidId(qr){return qr.startsWith(`image_${this.#e}_`)}}class kr{#e=[];#t=!1;#r;#n=-1;constructor(qr=128){this.#r=qr}add({cmd:qr,undo:zr,mustExec:Qr,type:sn=NaN,overwriteIfSameType:hn=!1,keepUndo:vn=!1}){if(Qr&&qr(),this.#t)return;const yn={cmd:qr,undo:zr,type:sn};if(this.#n===-1){this.#e.length>0&&(this.#e.length=0),this.#n=0,this.#e.push(yn);return}if(hn&&this.#e[this.#n].type===sn){vn&&(yn.undo=this.#e[this.#n].undo),this.#e[this.#n]=yn;return}const gn=this.#n+1;gn===this.#r?this.#e.splice(0,1):(this.#n=gn,gn<this.#e.length&&this.#e.splice(gn)),this.#e.push(yn)}undo(){this.#n!==-1&&(this.#t=!0,this.#e[this.#n].undo(),this.#t=!1,this.#n-=1)}redo(){this.#n<this.#e.length-1&&(this.#n+=1,this.#t=!0,this.#e[this.#n].cmd(),this.#t=!1)}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#e.length-1}destroy(){this.#e=null}}hr.CommandManager=kr;class Dr{constructor(qr){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:zr}=vr.FeatureTest.platform;for(const[Qr,sn,hn={}]of qr)for(const vn of Qr){const yn=vn.startsWith("mac+");zr&&yn?(this.callbacks.set(vn.slice(4),{callback:sn,options:hn}),this.allKeys.add(vn.split("+").at(-1))):!zr&&!yn&&(this.callbacks.set(vn,{callback:sn,options:hn}),this.allKeys.add(vn.split("+").at(-1)))}}#e(qr){qr.altKey&&this.buffer.push("alt"),qr.ctrlKey&&this.buffer.push("ctrl"),qr.metaKey&&this.buffer.push("meta"),qr.shiftKey&&this.buffer.push("shift"),this.buffer.push(qr.key);const zr=this.buffer.join("+");return this.buffer.length=0,zr}exec(qr,zr){if(!this.allKeys.has(zr.key))return;const Qr=this.callbacks.get(this.#e(zr));if(!Qr)return;const{callback:sn,options:{bubbles:hn=!1,args:vn=[],checker:yn=null}}=Qr;yn&&!yn(qr,zr)||(sn.bind(qr,...vn)(),hn||(zr.stopPropagation(),zr.preventDefault()))}}hr.KeyboardManager=Dr;class Br{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const qr=new Map([["CanvasText",null],["Canvas",null]]);return(0,xr.getColorValues)(qr),(0,vr.shadow)(this,"_colors",qr)}convert(qr){const zr=(0,xr.getRGB)(qr);if(!window.matchMedia("(forced-colors: active)").matches)return zr;for(const[Qr,sn]of this._colors)if(sn.every((hn,vn)=>hn===zr[vn]))return Br._colorsMapping.get(Qr);return zr}getHexCode(qr){const zr=this._colors.get(qr);return zr?vr.Util.makeHexColor(...zr):qr}}hr.ColorManager=Br;class Hr{#e=null;#t=new Map;#r=new Map;#n=null;#o=null;#s=new kr;#a=0;#l=new Set;#c=null;#i=null;#f=new Set;#d=null;#h=new wr;#p=!1;#v=!1;#g=null;#m=vr.AnnotationEditorType.NONE;#u=new Set;#b=null;#_=this.blur.bind(this);#$=this.focus.bind(this);#A=this.copy.bind(this);#w=this.cut.bind(this);#D=this.paste.bind(this);#L=this.keydown.bind(this);#O=this.onEditingAction.bind(this);#y=this.onPageChanging.bind(this);#P=this.onScaleChanging.bind(this);#R=this.onRotationChanging.bind(this);#I={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1};#x=[0,0];#C=null;#S=null;#F=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const qr=Hr.prototype,zr=hn=>{const{activeElement:vn}=document;return vn&&hn.#S.contains(vn)&&hn.hasSomethingToControl()},Qr=this.TRANSLATE_SMALL,sn=this.TRANSLATE_BIG;return(0,vr.shadow)(this,"_keyboardManager",new Dr([[["ctrl+a","mac+meta+a"],qr.selectAll],[["ctrl+z","mac+meta+z"],qr.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],qr.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],qr.delete],[["Escape","mac+Escape"],qr.unselectAll],[["ArrowLeft","mac+ArrowLeft"],qr.translateSelectedEditors,{args:[-Qr,0],checker:zr}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],qr.translateSelectedEditors,{args:[-sn,0],checker:zr}],[["ArrowRight","mac+ArrowRight"],qr.translateSelectedEditors,{args:[Qr,0],checker:zr}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],qr.translateSelectedEditors,{args:[sn,0],checker:zr}],[["ArrowUp","mac+ArrowUp"],qr.translateSelectedEditors,{args:[0,-Qr],checker:zr}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],qr.translateSelectedEditors,{args:[0,-sn],checker:zr}],[["ArrowDown","mac+ArrowDown"],qr.translateSelectedEditors,{args:[0,Qr],checker:zr}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],qr.translateSelectedEditors,{args:[0,sn],checker:zr}]]))}constructor(qr,zr,Qr,sn,hn,vn){this.#S=qr,this.#F=zr,this.#n=Qr,this._eventBus=sn,this._eventBus._on("editingaction",this.#O),this._eventBus._on("pagechanging",this.#y),this._eventBus._on("scalechanging",this.#P),this._eventBus._on("rotationchanging",this.#R),this.#o=hn.annotationStorage,this.#d=hn.filterFactory,this.#b=vn,this.viewParameters={realScale:xr.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){this.#M(),this.#j(),this._eventBus._off("editingaction",this.#O),this._eventBus._off("pagechanging",this.#y),this._eventBus._off("scalechanging",this.#P),this._eventBus._off("rotationchanging",this.#R);for(const qr of this.#r.values())qr.destroy();this.#r.clear(),this.#t.clear(),this.#f.clear(),this.#e=null,this.#u.clear(),this.#s.destroy(),this.#n.destroy()}get hcmFilter(){return(0,vr.shadow)(this,"hcmFilter",this.#b?this.#d.addHCMFilter(this.#b.foreground,this.#b.background):"none")}get direction(){return(0,vr.shadow)(this,"direction",getComputedStyle(this.#S).direction)}editAltText(qr){this.#n?.editAltText(this,qr)}onPageChanging({pageNumber:qr}){this.#a=qr-1}focusMainContainer(){this.#S.focus()}findParent(qr,zr){for(const Qr of this.#r.values()){const{x:sn,y:hn,width:vn,height:yn}=Qr.div.getBoundingClientRect();if(qr>=sn&&qr<=sn+vn&&zr>=hn&&zr<=hn+yn)return Qr}return null}disableUserSelect(qr=!1){this.#F.classList.toggle("noUserSelect",qr)}addShouldRescale(qr){this.#f.add(qr)}removeShouldRescale(qr){this.#f.delete(qr)}onScaleChanging({scale:qr}){this.commitOrRemove(),this.viewParameters.realScale=qr*xr.PixelsPerInch.PDF_TO_CSS_UNITS;for(const zr of this.#f)zr.onScaleChanging()}onRotationChanging({pagesRotation:qr}){this.commitOrRemove(),this.viewParameters.rotation=qr}addToAnnotationStorage(qr){!qr.isEmpty()&&this.#o&&!this.#o.has(qr.id)&&this.#o.setValue(qr.id,qr)}#N(){window.addEventListener("focus",this.#$),window.addEventListener("blur",this.#_)}#j(){window.removeEventListener("focus",this.#$),window.removeEventListener("blur",this.#_)}blur(){if(!this.hasSelection)return;const{activeElement:qr}=document;for(const zr of this.#u)if(zr.div.contains(qr)){this.#g=[zr,qr],zr._focusEventsAllowed=!1;break}}focus(){if(!this.#g)return;const[qr,zr]=this.#g;this.#g=null,zr.addEventListener("focusin",()=>{qr._focusEventsAllowed=!0},{once:!0}),zr.focus()}#B(){window.addEventListener("keydown",this.#L,{capture:!0})}#M(){window.removeEventListener("keydown",this.#L,{capture:!0})}#k(){document.addEventListener("copy",this.#A),document.addEventListener("cut",this.#w),document.addEventListener("paste",this.#D)}#T(){document.removeEventListener("copy",this.#A),document.removeEventListener("cut",this.#w),document.removeEventListener("paste",this.#D)}addEditListeners(){this.#B(),this.#k()}removeEditListeners(){this.#M(),this.#T()}copy(qr){if(qr.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const zr=[];for(const Qr of this.#u){const sn=Qr.serialize(!0);sn&&zr.push(sn)}zr.length!==0&&qr.clipboardData.setData("application/pdfjs",JSON.stringify(zr))}cut(qr){this.copy(qr),this.delete()}paste(qr){qr.preventDefault();const{clipboardData:zr}=qr;for(const hn of zr.items)for(const vn of this.#i)if(vn.isHandlingMimeForPasting(hn.type)){vn.paste(hn,this.currentLayer);return}let Qr=zr.getData("application/pdfjs");if(!Qr)return;try{Qr=JSON.parse(Qr)}catch(hn){(0,vr.warn)(`paste: "${hn.message}".`);return}if(!Array.isArray(Qr))return;this.unselectAll();const sn=this.currentLayer;try{const hn=[];for(const gn of Qr){const bn=sn.deserialize(gn);if(!bn)return;hn.push(bn)}const vn=()=>{for(const gn of hn)this.#V(gn);this.#W(hn)},yn=()=>{for(const gn of hn)gn.remove()};this.addCommands({cmd:vn,undo:yn,mustExec:!0})}catch(hn){(0,vr.warn)(`paste: "${hn.message}".`)}}keydown(qr){this.getActive()?.shouldGetKeyboardEvents()||Hr._keyboardManager.exec(this,qr)}onEditingAction(qr){["undo","redo","delete","selectAll"].includes(qr.name)&&this[qr.name]()}#E(qr){Object.entries(qr).some(([Qr,sn])=>this.#I[Qr]!==sn)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#I,qr)})}#U(qr){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:qr})}setEditingState(qr){qr?(this.#N(),this.#B(),this.#k(),this.#E({isEditing:this.#m!==vr.AnnotationEditorType.NONE,isEmpty:this.#H(),hasSomethingToUndo:this.#s.hasSomethingToUndo(),hasSomethingToRedo:this.#s.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#j(),this.#M(),this.#T(),this.#E({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(qr){if(!this.#i){this.#i=qr;for(const zr of this.#i)this.#U(zr.defaultPropertiesToUpdate)}}getId(){return this.#h.getId()}get currentLayer(){return this.#r.get(this.#a)}getLayer(qr){return this.#r.get(qr)}get currentPageIndex(){return this.#a}addLayer(qr){this.#r.set(qr.pageIndex,qr),this.#p?qr.enable():qr.disable()}removeLayer(qr){this.#r.delete(qr.pageIndex)}updateMode(qr,zr=null){if(this.#m!==qr){if(this.#m=qr,qr===vr.AnnotationEditorType.NONE){this.setEditingState(!1),this.#q();return}this.setEditingState(!0),this.#G(),this.unselectAll();for(const Qr of this.#r.values())Qr.updateMode(qr);if(zr){for(const Qr of this.#t.values())if(Qr.annotationElementId===zr){this.setSelected(Qr),Qr.enterInEditMode();break}}}}updateToolbar(qr){qr!==this.#m&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:qr})}updateParams(qr,zr){if(this.#i){if(qr===vr.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(qr);return}for(const Qr of this.#u)Qr.updateParams(qr,zr);for(const Qr of this.#i)Qr.updateDefaultParams(qr,zr)}}enableWaiting(qr=!1){if(this.#v!==qr){this.#v=qr;for(const zr of this.#r.values())qr?zr.disableClick():zr.enableClick(),zr.div.classList.toggle("waiting",qr)}}#G(){if(!this.#p){this.#p=!0;for(const qr of this.#r.values())qr.enable()}}#q(){if(this.unselectAll(),this.#p){this.#p=!1;for(const qr of this.#r.values())qr.disable()}}getEditors(qr){const zr=[];for(const Qr of this.#t.values())Qr.pageIndex===qr&&zr.push(Qr);return zr}getEditor(qr){return this.#t.get(qr)}addEditor(qr){this.#t.set(qr.id,qr)}removeEditor(qr){this.#t.delete(qr.id),this.unselect(qr),(!qr.annotationElementId||!this.#l.has(qr.annotationElementId))&&this.#o?.remove(qr.id)}addDeletedAnnotationElement(qr){this.#l.add(qr.annotationElementId),qr.deleted=!0}isDeletedAnnotationElement(qr){return this.#l.has(qr)}removeDeletedAnnotationElement(qr){this.#l.delete(qr.annotationElementId),qr.deleted=!1}#V(qr){const zr=this.#r.get(qr.pageIndex);zr?zr.addOrRebuild(qr):this.addEditor(qr)}setActiveEditor(qr){this.#e!==qr&&(this.#e=qr,qr&&this.#U(qr.propertiesToUpdate))}toggleSelected(qr){if(this.#u.has(qr)){this.#u.delete(qr),qr.unselect(),this.#E({hasSelectedEditor:this.hasSelection});return}this.#u.add(qr),qr.select(),this.#U(qr.propertiesToUpdate),this.#E({hasSelectedEditor:!0})}setSelected(qr){for(const zr of this.#u)zr!==qr&&zr.unselect();this.#u.clear(),this.#u.add(qr),qr.select(),this.#U(qr.propertiesToUpdate),this.#E({hasSelectedEditor:!0})}isSelected(qr){return this.#u.has(qr)}unselect(qr){qr.unselect(),this.#u.delete(qr),this.#E({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#u.size!==0}undo(){this.#s.undo(),this.#E({hasSomethingToUndo:this.#s.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#H()})}redo(){this.#s.redo(),this.#E({hasSomethingToUndo:!0,hasSomethingToRedo:this.#s.hasSomethingToRedo(),isEmpty:this.#H()})}addCommands(qr){this.#s.add(qr),this.#E({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#H()})}#H(){if(this.#t.size===0)return!0;if(this.#t.size===1)for(const qr of this.#t.values())return qr.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const qr=[...this.#u],zr=()=>{for(const sn of qr)sn.remove()},Qr=()=>{for(const sn of qr)this.#V(sn)};this.addCommands({cmd:zr,undo:Qr,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#W(qr){this.#u.clear();for(const zr of qr)zr.isEmpty()||(this.#u.add(zr),zr.select());this.#E({hasSelectedEditor:!0})}selectAll(){for(const qr of this.#u)qr.commit();this.#W(this.#t.values())}unselectAll(){if(this.#e){this.#e.commitOrRemove();return}if(this.hasSelection){for(const qr of this.#u)qr.unselect();this.#u.clear(),this.#E({hasSelectedEditor:!1})}}translateSelectedEditors(qr,zr,Qr=!1){if(Qr||this.commitOrRemove(),!this.hasSelection)return;this.#x[0]+=qr,this.#x[1]+=zr;const[sn,hn]=this.#x,vn=[...this.#u],yn=1e3;this.#C&&clearTimeout(this.#C),this.#C=setTimeout(()=>{this.#C=null,this.#x[0]=this.#x[1]=0,this.addCommands({cmd:()=>{for(const gn of vn)this.#t.has(gn.id)&&gn.translateInPage(sn,hn)},undo:()=>{for(const gn of vn)this.#t.has(gn.id)&&gn.translateInPage(-sn,-hn)},mustExec:!1})},yn);for(const gn of vn)gn.translateInPage(qr,zr)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#c=new Map;for(const qr of this.#u)this.#c.set(qr,{savedX:qr.x,savedY:qr.y,savedPageIndex:qr.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#c)return!1;this.disableUserSelect(!1);const qr=this.#c;this.#c=null;let zr=!1;for(const[{x:sn,y:hn,pageIndex:vn},yn]of qr)yn.newX=sn,yn.newY=hn,yn.newPageIndex=vn,zr||=sn!==yn.savedX||hn!==yn.savedY||vn!==yn.savedPageIndex;if(!zr)return!1;const Qr=(sn,hn,vn,yn)=>{if(this.#t.has(sn.id)){const gn=this.#r.get(yn);gn?sn._setParentAndPosition(gn,hn,vn):(sn.pageIndex=yn,sn.x=hn,sn.y=vn)}};return this.addCommands({cmd:()=>{for(const[sn,{newX:hn,newY:vn,newPageIndex:yn}]of qr)Qr(sn,hn,vn,yn)},undo:()=>{for(const[sn,{savedX:hn,savedY:vn,savedPageIndex:yn}]of qr)Qr(sn,hn,vn,yn)},mustExec:!0}),!0}dragSelectedEditors(qr,zr){if(this.#c)for(const Qr of this.#c.keys())Qr.drag(qr,zr)}rebuild(qr){if(qr.parent===null){const zr=this.getLayer(qr.pageIndex);zr?(zr.changeParent(qr),zr.addOrRebuild(qr)):(this.addEditor(qr),this.addToAnnotationStorage(qr),qr.rebuild())}else qr.parent.addOrRebuild(qr)}isActive(qr){return this.#e===qr}getActive(){return this.#e}getMode(){return this.#m}get imageManager(){return(0,vr.shadow)(this,"imageManager",new Rr)}}hr.AnnotationEditorUIManager=Hr},(mr,hr,gr)=>{Object.defineProperty(hr,"__esModule",{value:!0}),hr.StatTimer=hr.RenderingCancelledException=hr.PixelsPerInch=hr.PageViewport=hr.PDFDateString=hr.DOMStandardFontDataFactory=hr.DOMSVGFactory=hr.DOMFilterFactory=hr.DOMCanvasFactory=hr.DOMCMapReaderFactory=void 0,hr.deprecated=xn,hr.getColorValues=Bn,hr.getCurrentTransform=Fn,hr.getCurrentTransformInverse=Hn,hr.getFilenameFromUrl=sn,hr.getPdfFilenameFromUrl=hn,hr.getRGB=Rn,hr.getXfaPageViewport=Cn,hr.isDataScheme=zr,hr.isPdfFile=Qr,hr.isValidFetchUrl=yn,hr.loadScript=bn,hr.noContextMenu=gn,hr.setLayerDimensions=Gn;var vr=gr(7),xr=gr(1);const Er="http://www.w3.org/2000/svg";class Cr{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}hr.PixelsPerInch=Cr;class wr extends vr.BaseFilterFactory{#e;#t;#r;#n;#o;#s;#a;#l;#c;#i;#f=0;constructor({docId:On,ownerDocument:wn=globalThis.document}={}){super(),this.#r=On,this.#n=wn}get#d(){return this.#e||=new Map}get#h(){if(!this.#t){const On=this.#n.createElement("div"),{style:wn}=On;wn.visibility="hidden",wn.contain="strict",wn.width=wn.height=0,wn.position="absolute",wn.top=wn.left=0,wn.zIndex=-1;const _n=this.#n.createElementNS(Er,"svg");_n.setAttribute("width",0),_n.setAttribute("height",0),this.#t=this.#n.createElementNS(Er,"defs"),On.append(_n),_n.append(this.#t),this.#n.body.append(On)}return this.#t}addFilter(On){if(!On)return"none";let wn=this.#d.get(On);if(wn)return wn;let _n,Tn,Mn,Ln;if(On.length===1){const An=On[0],kn=new Array(256);for(let Dn=0;Dn<256;Dn++)kn[Dn]=An[Dn]/255;Ln=_n=Tn=Mn=kn.join(",")}else{const[An,kn,Dn]=On,Vn=new Array(256),zn=new Array(256),Xn=new Array(256);for(let Zn=0;Zn<256;Zn++)Vn[Zn]=An[Zn]/255,zn[Zn]=kn[Zn]/255,Xn[Zn]=Dn[Zn]/255;_n=Vn.join(","),Tn=zn.join(","),Mn=Xn.join(","),Ln=`${_n}${Tn}${Mn}`}if(wn=this.#d.get(Ln),wn)return this.#d.set(On,wn),wn;const jn=`g_${this.#r}_transfer_map_${this.#f++}`,Kn=`url(#${jn})`;this.#d.set(On,Kn),this.#d.set(Ln,Kn);const Nn=this.#v(jn);return this.#m(_n,Tn,Mn,Nn),Kn}addHCMFilter(On,wn){const _n=`${On}-${wn}`;if(this.#s===_n)return this.#a;if(this.#s=_n,this.#a="none",this.#o?.remove(),!On||!wn)return this.#a;const Tn=this.#u(On);On=xr.Util.makeHexColor(...Tn);const Mn=this.#u(wn);if(wn=xr.Util.makeHexColor(...Mn),this.#h.style.color="",On==="#000000"&&wn==="#ffffff"||On===wn)return this.#a;const Ln=new Array(256);for(let kn=0;kn<=255;kn++){const Dn=kn/255;Ln[kn]=Dn<=.03928?Dn/12.92:((Dn+.055)/1.055)**2.4}const jn=Ln.join(","),Kn=`g_${this.#r}_hcm_filter`,Nn=this.#l=this.#v(Kn);this.#m(jn,jn,jn,Nn),this.#p(Nn);const An=(kn,Dn)=>{const Vn=Tn[kn]/255,zn=Mn[kn]/255,Xn=new Array(Dn+1);for(let Zn=0;Zn<=Dn;Zn++)Xn[Zn]=Vn+Zn/Dn*(zn-Vn);return Xn.join(",")};return this.#m(An(0,5),An(1,5),An(2,5),Nn),this.#a=`url(#${Kn})`,this.#a}addHighlightHCMFilter(On,wn,_n,Tn){const Mn=`${On}-${wn}-${_n}-${Tn}`;if(this.#c===Mn)return this.#i;if(this.#c=Mn,this.#i="none",this.#l?.remove(),!On||!wn)return this.#i;const[Ln,jn]=[On,wn].map(this.#u.bind(this));let Kn=Math.round(.2126*Ln[0]+.7152*Ln[1]+.0722*Ln[2]),Nn=Math.round(.2126*jn[0]+.7152*jn[1]+.0722*jn[2]),[An,kn]=[_n,Tn].map(this.#u.bind(this));Nn<Kn&&([Kn,Nn,An,kn]=[Nn,Kn,kn,An]),this.#h.style.color="";const Dn=(Xn,Zn,Pi)=>{const Ya=new Array(256),Bi=(Nn-Kn)/Pi,zi=Xn/255,Xi=(Zn-Xn)/(255*Pi);let Ji=0;for(let ns=0;ns<=Pi;ns++){const ps=Math.round(Kn+ns*Bi),ls=zi+ns*Xi;for(let Li=Ji;Li<=ps;Li++)Ya[Li]=ls;Ji=ps+1}for(let ns=Ji;ns<256;ns++)Ya[ns]=Ya[Ji-1];return Ya.join(",")},Vn=`g_${this.#r}_hcm_highlight_filter`,zn=this.#l=this.#v(Vn);return this.#p(zn),this.#m(Dn(An[0],kn[0],5),Dn(An[1],kn[1],5),Dn(An[2],kn[2],5),zn),this.#i=`url(#${Vn})`,this.#i}destroy(On=!1){On&&(this.#a||this.#i)||(this.#t&&(this.#t.parentNode.parentNode.remove(),this.#t=null),this.#e&&(this.#e.clear(),this.#e=null),this.#f=0)}#p(On){const wn=this.#n.createElementNS(Er,"feColorMatrix");wn.setAttribute("type","matrix"),wn.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),On.append(wn)}#v(On){const wn=this.#n.createElementNS(Er,"filter");return wn.setAttribute("color-interpolation-filters","sRGB"),wn.setAttribute("id",On),this.#h.append(wn),wn}#g(On,wn,_n){const Tn=this.#n.createElementNS(Er,wn);Tn.setAttribute("type","discrete"),Tn.setAttribute("tableValues",_n),On.append(Tn)}#m(On,wn,_n,Tn){const Mn=this.#n.createElementNS(Er,"feComponentTransfer");Tn.append(Mn),this.#g(Mn,"feFuncR",On),this.#g(Mn,"feFuncG",wn),this.#g(Mn,"feFuncB",_n)}#u(On){return this.#h.style.color=On,Rn(getComputedStyle(this.#h).getPropertyValue("color"))}}hr.DOMFilterFactory=wr;class Rr extends vr.BaseCanvasFactory{constructor({ownerDocument:On=globalThis.document}={}){super(),this._document=On}_createCanvas(On,wn){const _n=this._document.createElement("canvas");return _n.width=On,_n.height=wn,_n}}hr.DOMCanvasFactory=Rr;async function kr(qn,On=!1){if(yn(qn,document.baseURI)){const wn=await fetch(qn);if(!wn.ok)throw new Error(wn.statusText);return On?new Uint8Array(await wn.arrayBuffer()):(0,xr.stringToBytes)(await wn.text())}return new Promise((wn,_n)=>{const Tn=new XMLHttpRequest;Tn.open("GET",qn,!0),On&&(Tn.responseType="arraybuffer"),Tn.onreadystatechange=()=>{if(Tn.readyState===XMLHttpRequest.DONE){if(Tn.status===200||Tn.status===0){let Mn;if(On&&Tn.response?Mn=new Uint8Array(Tn.response):!On&&Tn.responseText&&(Mn=(0,xr.stringToBytes)(Tn.responseText)),Mn){wn(Mn);return}}_n(new Error(Tn.statusText))}},Tn.send(null)})}class Dr extends vr.BaseCMapReaderFactory{_fetchData(On,wn){return kr(On,this.isCompressed).then(_n=>({cMapData:_n,compressionType:wn}))}}hr.DOMCMapReaderFactory=Dr;class Br extends vr.BaseStandardFontDataFactory{_fetchData(On){return kr(On,!0)}}hr.DOMStandardFontDataFactory=Br;class Hr extends vr.BaseSVGFactory{_createSVG(On){return document.createElementNS(Er,On)}}hr.DOMSVGFactory=Hr;class Gr{constructor({viewBox:On,scale:wn,rotation:_n,offsetX:Tn=0,offsetY:Mn=0,dontFlip:Ln=!1}){this.viewBox=On,this.scale=wn,this.rotation=_n,this.offsetX=Tn,this.offsetY=Mn;const jn=(On[2]+On[0])/2,Kn=(On[3]+On[1])/2;let Nn,An,kn,Dn;switch(_n%=360,_n<0&&(_n+=360),_n){case 180:Nn=-1,An=0,kn=0,Dn=1;break;case 90:Nn=0,An=1,kn=1,Dn=0;break;case 270:Nn=0,An=-1,kn=-1,Dn=0;break;case 0:Nn=1,An=0,kn=0,Dn=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Ln&&(kn=-kn,Dn=-Dn);let Vn,zn,Xn,Zn;Nn===0?(Vn=Math.abs(Kn-On[1])*wn+Tn,zn=Math.abs(jn-On[0])*wn+Mn,Xn=(On[3]-On[1])*wn,Zn=(On[2]-On[0])*wn):(Vn=Math.abs(jn-On[0])*wn+Tn,zn=Math.abs(Kn-On[1])*wn+Mn,Xn=(On[2]-On[0])*wn,Zn=(On[3]-On[1])*wn),this.transform=[Nn*wn,An*wn,kn*wn,Dn*wn,Vn-Nn*wn*jn-kn*wn*Kn,zn-An*wn*jn-Dn*wn*Kn],this.width=Xn,this.height=Zn}get rawDims(){const{viewBox:On}=this;return(0,xr.shadow)(this,"rawDims",{pageWidth:On[2]-On[0],pageHeight:On[3]-On[1],pageX:On[0],pageY:On[1]})}clone({scale:On=this.scale,rotation:wn=this.rotation,offsetX:_n=this.offsetX,offsetY:Tn=this.offsetY,dontFlip:Mn=!1}={}){return new Gr({viewBox:this.viewBox.slice(),scale:On,rotation:wn,offsetX:_n,offsetY:Tn,dontFlip:Mn})}convertToViewportPoint(On,wn){return xr.Util.applyTransform([On,wn],this.transform)}convertToViewportRectangle(On){const wn=xr.Util.applyTransform([On[0],On[1]],this.transform),_n=xr.Util.applyTransform([On[2],On[3]],this.transform);return[wn[0],wn[1],_n[0],_n[1]]}convertToPdfPoint(On,wn){return xr.Util.applyInverseTransform([On,wn],this.transform)}}hr.PageViewport=Gr;class qr extends xr.BaseException{constructor(On,wn=0){super(On,"RenderingCancelledException"),this.extraDelay=wn}}hr.RenderingCancelledException=qr;function zr(qn){const On=qn.length;let wn=0;for(;wn<On&&qn[wn].trim()==="";)wn++;return qn.substring(wn,wn+5).toLowerCase()==="data:"}function Qr(qn){return typeof qn=="string"&&/\.pdf$/i.test(qn)}function sn(qn,On=!1){return On||([qn]=qn.split(/[#?]/,1)),qn.substring(qn.lastIndexOf("/")+1)}function hn(qn,On="document.pdf"){if(typeof qn!="string")return On;if(zr(qn))return(0,xr.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),On;const wn=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,_n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,Tn=wn.exec(qn);let Mn=_n.exec(Tn[1])||_n.exec(Tn[2])||_n.exec(Tn[3]);if(Mn&&(Mn=Mn[0],Mn.includes("%")))try{Mn=_n.exec(decodeURIComponent(Mn))[0]}catch{}return Mn||On}class vn{started=Object.create(null);times=[];time(On){On in this.started&&(0,xr.warn)(`Timer is already running for ${On}`),this.started[On]=Date.now()}timeEnd(On){On in this.started||(0,xr.warn)(`Timer has not been started for ${On}`),this.times.push({name:On,start:this.started[On],end:Date.now()}),delete this.started[On]}toString(){const On=[];let wn=0;for(const{name:_n}of this.times)wn=Math.max(_n.length,wn);for(const{name:_n,start:Tn,end:Mn}of this.times)On.push(`${_n.padEnd(wn)} ${Mn-Tn}ms
`);return On.join("")}}hr.StatTimer=vn;function yn(qn,On){try{const{protocol:wn}=On?new URL(qn,On):new URL(qn);return wn==="http:"||wn==="https:"}catch{return!1}}function gn(qn){qn.preventDefault()}function bn(qn,On=!1){return new Promise((wn,_n)=>{const Tn=document.createElement("script");Tn.src=qn,Tn.onload=function(Mn){On&&Tn.remove(),wn(Mn)},Tn.onerror=function(){_n(new Error(`Cannot load script at: ${Tn.src}`))},(document.head||document.documentElement).append(Tn)})}function xn(qn){console.log("Deprecated API usage: "+qn)}let $n;class Sn{static toDateObject(On){if(!On||typeof On!="string")return null;$n||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const wn=$n.exec(On);if(!wn)return null;const _n=parseInt(wn[1],10);let Tn=parseInt(wn[2],10);Tn=Tn>=1&&Tn<=12?Tn-1:0;let Mn=parseInt(wn[3],10);Mn=Mn>=1&&Mn<=31?Mn:1;let Ln=parseInt(wn[4],10);Ln=Ln>=0&&Ln<=23?Ln:0;let jn=parseInt(wn[5],10);jn=jn>=0&&jn<=59?jn:0;let Kn=parseInt(wn[6],10);Kn=Kn>=0&&Kn<=59?Kn:0;const Nn=wn[7]||"Z";let An=parseInt(wn[8],10);An=An>=0&&An<=23?An:0;let kn=parseInt(wn[9],10)||0;return kn=kn>=0&&kn<=59?kn:0,Nn==="-"?(Ln+=An,jn+=kn):Nn==="+"&&(Ln-=An,jn-=kn),new Date(Date.UTC(_n,Tn,Mn,Ln,jn,Kn))}}hr.PDFDateString=Sn;function Cn(qn,{scale:On=1,rotation:wn=0}){const{width:_n,height:Tn}=qn.attributes.style,Mn=[0,0,parseInt(_n),parseInt(Tn)];return new Gr({viewBox:Mn,scale:On,rotation:wn})}function Rn(qn){if(qn.startsWith("#")){const On=parseInt(qn.slice(1),16);return[(On&16711680)>>16,(On&65280)>>8,On&255]}return qn.startsWith("rgb(")?qn.slice(4,-1).split(",").map(On=>parseInt(On)):qn.startsWith("rgba(")?qn.slice(5,-1).split(",").map(On=>parseInt(On)).slice(0,3):((0,xr.warn)(`Not a valid color format: "${qn}"`),[0,0,0])}function Bn(qn){const On=document.createElement("span");On.style.visibility="hidden",document.body.append(On);for(const wn of qn.keys()){On.style.color=wn;const _n=window.getComputedStyle(On).color;qn.set(wn,Rn(_n))}On.remove()}function Fn(qn){const{a:On,b:wn,c:_n,d:Tn,e:Mn,f:Ln}=qn.getTransform();return[On,wn,_n,Tn,Mn,Ln]}function Hn(qn){const{a:On,b:wn,c:_n,d:Tn,e:Mn,f:Ln}=qn.getTransform().invertSelf();return[On,wn,_n,Tn,Mn,Ln]}function Gn(qn,On,wn=!1,_n=!0){if(On instanceof Gr){const{pageWidth:Tn,pageHeight:Mn}=On.rawDims,{style:Ln}=qn,jn=xr.FeatureTest.isCSSRoundSupported,Kn=`var(--scale-factor) * ${Tn}px`,Nn=`var(--scale-factor) * ${Mn}px`,An=jn?`round(${Kn}, 1px)`:`calc(${Kn})`,kn=jn?`round(${Nn}, 1px)`:`calc(${Nn})`;!wn||On.rotation%180===0?(Ln.width=An,Ln.height=kn):(Ln.width=kn,Ln.height=An)}_n&&qn.setAttribute("data-main-rotation",On.rotation)}},(mr,hr,gr)=>{Object.defineProperty(hr,"__esModule",{value:!0}),hr.BaseStandardFontDataFactory=hr.BaseSVGFactory=hr.BaseFilterFactory=hr.BaseCanvasFactory=hr.BaseCMapReaderFactory=void 0;var vr=gr(1);class xr{constructor(){this.constructor===xr&&(0,vr.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(Dr){return"none"}addHCMFilter(Dr,Br){return"none"}addHighlightHCMFilter(Dr,Br,Hr,Gr){return"none"}destroy(Dr=!1){}}hr.BaseFilterFactory=xr;class Er{constructor(){this.constructor===Er&&(0,vr.unreachable)("Cannot initialize BaseCanvasFactory.")}create(Dr,Br){if(Dr<=0||Br<=0)throw new Error("Invalid canvas size");const Hr=this._createCanvas(Dr,Br);return{canvas:Hr,context:Hr.getContext("2d")}}reset(Dr,Br,Hr){if(!Dr.canvas)throw new Error("Canvas is not specified");if(Br<=0||Hr<=0)throw new Error("Invalid canvas size");Dr.canvas.width=Br,Dr.canvas.height=Hr}destroy(Dr){if(!Dr.canvas)throw new Error("Canvas is not specified");Dr.canvas.width=0,Dr.canvas.height=0,Dr.canvas=null,Dr.context=null}_createCanvas(Dr,Br){(0,vr.unreachable)("Abstract method `_createCanvas` called.")}}hr.BaseCanvasFactory=Er;class Cr{constructor({baseUrl:Dr=null,isCompressed:Br=!0}){this.constructor===Cr&&(0,vr.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=Dr,this.isCompressed=Br}async fetch({name:Dr}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!Dr)throw new Error("CMap name must be specified.");const Br=this.baseUrl+Dr+(this.isCompressed?".bcmap":""),Hr=this.isCompressed?vr.CMapCompressionType.BINARY:vr.CMapCompressionType.NONE;return this._fetchData(Br,Hr).catch(Gr=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${Br}`)})}_fetchData(Dr,Br){(0,vr.unreachable)("Abstract method `_fetchData` called.")}}hr.BaseCMapReaderFactory=Cr;class wr{constructor({baseUrl:Dr=null}){this.constructor===wr&&(0,vr.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=Dr}async fetch({filename:Dr}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!Dr)throw new Error("Font filename must be specified.");const Br=`${this.baseUrl}${Dr}`;return this._fetchData(Br).catch(Hr=>{throw new Error(`Unable to load font data at: ${Br}`)})}_fetchData(Dr){(0,vr.unreachable)("Abstract method `_fetchData` called.")}}hr.BaseStandardFontDataFactory=wr;class Rr{constructor(){this.constructor===Rr&&(0,vr.unreachable)("Cannot initialize BaseSVGFactory.")}create(Dr,Br,Hr=!1){if(Dr<=0||Br<=0)throw new Error("Invalid SVG dimensions");const Gr=this._createSVG("svg:svg");return Gr.setAttribute("version","1.1"),Hr||(Gr.setAttribute("width",`${Dr}px`),Gr.setAttribute("height",`${Br}px`)),Gr.setAttribute("preserveAspectRatio","none"),Gr.setAttribute("viewBox",`0 0 ${Dr} ${Br}`),Gr}createElement(Dr){if(typeof Dr!="string")throw new Error("Invalid SVG element type");return this._createSVG(Dr)}_createSVG(Dr){(0,vr.unreachable)("Abstract method `_createSVG` called.")}}hr.BaseSVGFactory=Rr},(mr,hr,gr)=>{Object.defineProperty(hr,"__esModule",{value:!0}),hr.MurmurHash3_64=void 0;var vr=gr(1);const xr=3285377520,Er=4294901760,Cr=65535;class wr{constructor(kr){this.h1=kr?kr&4294967295:xr,this.h2=kr?kr&4294967295:xr}update(kr){let Dr,Br;if(typeof kr=="string"){Dr=new Uint8Array(kr.length*2),Br=0;for(let xn=0,$n=kr.length;xn<$n;xn++){const Sn=kr.charCodeAt(xn);Sn<=255?Dr[Br++]=Sn:(Dr[Br++]=Sn>>>8,Dr[Br++]=Sn&255)}}else if((0,vr.isArrayBuffer)(kr))Dr=kr.slice(),Br=Dr.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const Hr=Br>>2,Gr=Br-Hr*4,qr=new Uint32Array(Dr.buffer,0,Hr);let zr=0,Qr=0,sn=this.h1,hn=this.h2;const vn=3432918353,yn=461845907,gn=vn&Cr,bn=yn&Cr;for(let xn=0;xn<Hr;xn++)xn&1?(zr=qr[xn],zr=zr*vn&Er|zr*gn&Cr,zr=zr<<15|zr>>>17,zr=zr*yn&Er|zr*bn&Cr,sn^=zr,sn=sn<<13|sn>>>19,sn=sn*5+3864292196):(Qr=qr[xn],Qr=Qr*vn&Er|Qr*gn&Cr,Qr=Qr<<15|Qr>>>17,Qr=Qr*yn&Er|Qr*bn&Cr,hn^=Qr,hn=hn<<13|hn>>>19,hn=hn*5+3864292196);switch(zr=0,Gr){case 3:zr^=Dr[Hr*4+2]<<16;case 2:zr^=Dr[Hr*4+1]<<8;case 1:zr^=Dr[Hr*4],zr=zr*vn&Er|zr*gn&Cr,zr=zr<<15|zr>>>17,zr=zr*yn&Er|zr*bn&Cr,Hr&1?sn^=zr:hn^=zr}this.h1=sn,this.h2=hn}hexdigest(){let kr=this.h1,Dr=this.h2;return kr^=Dr>>>1,kr=kr*3981806797&Er|kr*36045&Cr,Dr=Dr*4283543511&Er|((Dr<<16|kr>>>16)*2950163797&Er)>>>16,kr^=Dr>>>1,kr=kr*444984403&Er|kr*60499&Cr,Dr=Dr*3301882366&Er|((Dr<<16|kr>>>16)*3120437893&Er)>>>16,kr^=Dr>>>1,(kr>>>0).toString(16).padStart(8,"0")+(Dr>>>0).toString(16).padStart(8,"0")}}hr.MurmurHash3_64=wr},(mr,hr,gr)=>{Object.defineProperty(hr,"__esModule",{value:!0}),hr.FontLoader=hr.FontFaceObject=void 0;var vr=gr(1);class xr{#e=new Set;constructor({ownerDocument:wr=globalThis.document,styleElement:Rr=null}){this._document=wr,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(wr){this.nativeFontFaces.add(wr),this._document.fonts.add(wr)}removeNativeFontFace(wr){this.nativeFontFaces.delete(wr),this._document.fonts.delete(wr)}insertRule(wr){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const Rr=this.styleElement.sheet;Rr.insertRule(wr,Rr.cssRules.length)}clear(){for(const wr of this.nativeFontFaces)this._document.fonts.delete(wr);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(wr){if(!(!wr||this.#e.has(wr.loadedName))){if((0,vr.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:Rr,src:kr,style:Dr}=wr,Br=new FontFace(Rr,kr,Dr);this.addNativeFontFace(Br);try{await Br.load(),this.#e.add(Rr)}catch{(0,vr.warn)(`Cannot load system font: ${wr.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(Br)}return}(0,vr.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(wr){if(wr.attached||wr.missingFile&&!wr.systemFontInfo)return;if(wr.attached=!0,wr.systemFontInfo){await this.loadSystemFont(wr.systemFontInfo);return}if(this.isFontLoadingAPISupported){const kr=wr.createNativeFontFace();if(kr){this.addNativeFontFace(kr);try{await kr.loaded}catch(Dr){throw(0,vr.warn)(`Failed to load font '${kr.family}': '${Dr}'.`),wr.disableFontFace=!0,Dr}}return}const Rr=wr.createFontFaceRule();if(Rr){if(this.insertRule(Rr),this.isSyncFontLoadingSupported)return;await new Promise(kr=>{const Dr=this._queueLoadingCallback(kr);this._prepareFontLoadEvent(wr,Dr)})}}get isFontLoadingAPISupported(){const wr=!!this._document?.fonts;return(0,vr.shadow)(this,"isFontLoadingAPISupported",wr)}get isSyncFontLoadingSupported(){let wr=!1;return(vr.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(wr=!0),(0,vr.shadow)(this,"isSyncFontLoadingSupported",wr)}_queueLoadingCallback(wr){function Rr(){for((0,vr.assert)(!Dr.done,"completeRequest() cannot be called twice."),Dr.done=!0;kr.length>0&&kr[0].done;){const Br=kr.shift();setTimeout(Br.callback,0)}}const{loadingRequests:kr}=this,Dr={done:!1,complete:Rr,callback:wr};return kr.push(Dr),Dr}get _loadTestFont(){const wr=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,vr.shadow)(this,"_loadTestFont",wr)}_prepareFontLoadEvent(wr,Rr){function kr(Cn,Rn){return Cn.charCodeAt(Rn)<<24|Cn.charCodeAt(Rn+1)<<16|Cn.charCodeAt(Rn+2)<<8|Cn.charCodeAt(Rn+3)&255}function Dr(Cn,Rn,Bn,Fn){const Hn=Cn.substring(0,Rn),Gn=Cn.substring(Rn+Bn);return Hn+Fn+Gn}let Br,Hr;const Gr=this._document.createElement("canvas");Gr.width=1,Gr.height=1;const qr=Gr.getContext("2d");let zr=0;function Qr(Cn,Rn){if(++zr>30){(0,vr.warn)("Load test font never loaded."),Rn();return}if(qr.font="30px "+Cn,qr.fillText(".",0,20),qr.getImageData(0,0,1,1).data[3]>0){Rn();return}setTimeout(Qr.bind(null,Cn,Rn))}const sn=`lt${Date.now()}${this.loadTestFontId++}`;let hn=this._loadTestFont;hn=Dr(hn,976,sn.length,sn);const yn=16,gn=1482184792;let bn=kr(hn,yn);for(Br=0,Hr=sn.length-3;Br<Hr;Br+=4)bn=bn-gn+kr(sn,Br)|0;Br<sn.length&&(bn=bn-gn+kr(sn+"XXX",Br)|0),hn=Dr(hn,yn,4,(0,vr.string32)(bn));const xn=`url(data:font/opentype;base64,${btoa(hn)});`,$n=`@font-face {font-family:"${sn}";src:${xn}}`;this.insertRule($n);const Sn=this._document.createElement("div");Sn.style.visibility="hidden",Sn.style.width=Sn.style.height="10px",Sn.style.position="absolute",Sn.style.top=Sn.style.left="0px";for(const Cn of[wr.loadedName,sn]){const Rn=this._document.createElement("span");Rn.textContent="Hi",Rn.style.fontFamily=Cn,Sn.append(Rn)}this._document.body.append(Sn),Qr(sn,()=>{Sn.remove(),Rr.complete()})}}hr.FontLoader=xr;class Er{constructor(wr,{isEvalSupported:Rr=!0,disableFontFace:kr=!1,ignoreErrors:Dr=!1,inspectFont:Br=null}){this.compiledGlyphs=Object.create(null);for(const Hr in wr)this[Hr]=wr[Hr];this.isEvalSupported=Rr!==!1,this.disableFontFace=kr===!0,this.ignoreErrors=Dr===!0,this._inspectFont=Br}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let wr;if(!this.cssFontInfo)wr=new FontFace(this.loadedName,this.data,{});else{const Rr={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(Rr.style=`oblique ${this.cssFontInfo.italicAngle}deg`),wr=new FontFace(this.cssFontInfo.fontFamily,this.data,Rr)}return this._inspectFont?.(this),wr}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const wr=(0,vr.bytesToString)(this.data),Rr=`url(data:${this.mimetype};base64,${btoa(wr)});`;let kr;if(!this.cssFontInfo)kr=`@font-face {font-family:"${this.loadedName}";src:${Rr}}`;else{let Dr=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(Dr+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),kr=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${Dr}src:${Rr}}`}return this._inspectFont?.(this,Rr),kr}getPathGenerator(wr,Rr){if(this.compiledGlyphs[Rr]!==void 0)return this.compiledGlyphs[Rr];let kr;try{kr=wr.get(this.loadedName+"_path_"+Rr)}catch(Dr){if(!this.ignoreErrors)throw Dr;return(0,vr.warn)(`getPathGenerator - ignoring character: "${Dr}".`),this.compiledGlyphs[Rr]=function(Br,Hr){}}if(this.isEvalSupported&&vr.FeatureTest.isEvalSupported){const Dr=[];for(const Br of kr){const Hr=Br.args!==void 0?Br.args.join(","):"";Dr.push("c.",Br.cmd,"(",Hr,`);
`)}return this.compiledGlyphs[Rr]=new Function("c","size",Dr.join(""))}return this.compiledGlyphs[Rr]=function(Dr,Br){for(const Hr of kr)Hr.cmd==="scale"&&(Hr.args=[Br,-Br]),Dr[Hr.cmd].apply(Dr,Hr.args)}}}hr.FontFaceObject=Er},(mr,hr,gr)=>{Object.defineProperty(hr,"__esModule",{value:!0}),hr.NodeStandardFontDataFactory=hr.NodeFilterFactory=hr.NodeCanvasFactory=hr.NodeCMapReaderFactory=void 0;var vr=gr(7);gr(1);const xr=function(kr){return new Promise((Dr,Br)=>{require$$2.readFile(kr,(Gr,qr)=>{if(Gr||!qr){Br(new Error(Gr));return}Dr(new Uint8Array(qr))})})};class Er extends vr.BaseFilterFactory{}hr.NodeFilterFactory=Er;class Cr extends vr.BaseCanvasFactory{_createCanvas(Dr,Br){return require$$2.createCanvas(Dr,Br)}}hr.NodeCanvasFactory=Cr;class wr extends vr.BaseCMapReaderFactory{_fetchData(Dr,Br){return xr(Dr).then(Hr=>({cMapData:Hr,compressionType:Br}))}}hr.NodeCMapReaderFactory=wr;class Rr extends vr.BaseStandardFontDataFactory{_fetchData(Dr){return xr(Dr)}}hr.NodeStandardFontDataFactory=Rr},(mr,hr,gr)=>{Object.defineProperty(hr,"__esModule",{value:!0}),hr.CanvasGraphics=void 0;var vr=gr(1),xr=gr(6),Er=gr(12),Cr=gr(13);const wr=16,Rr=100,kr=4096,Dr=15,Br=10,Hr=1e3,Gr=16;function qr(wn,_n){if(wn._removeMirroring)throw new Error("Context is already forwarding operations.");wn.__originalSave=wn.save,wn.__originalRestore=wn.restore,wn.__originalRotate=wn.rotate,wn.__originalScale=wn.scale,wn.__originalTranslate=wn.translate,wn.__originalTransform=wn.transform,wn.__originalSetTransform=wn.setTransform,wn.__originalResetTransform=wn.resetTransform,wn.__originalClip=wn.clip,wn.__originalMoveTo=wn.moveTo,wn.__originalLineTo=wn.lineTo,wn.__originalBezierCurveTo=wn.bezierCurveTo,wn.__originalRect=wn.rect,wn.__originalClosePath=wn.closePath,wn.__originalBeginPath=wn.beginPath,wn._removeMirroring=()=>{wn.save=wn.__originalSave,wn.restore=wn.__originalRestore,wn.rotate=wn.__originalRotate,wn.scale=wn.__originalScale,wn.translate=wn.__originalTranslate,wn.transform=wn.__originalTransform,wn.setTransform=wn.__originalSetTransform,wn.resetTransform=wn.__originalResetTransform,wn.clip=wn.__originalClip,wn.moveTo=wn.__originalMoveTo,wn.lineTo=wn.__originalLineTo,wn.bezierCurveTo=wn.__originalBezierCurveTo,wn.rect=wn.__originalRect,wn.closePath=wn.__originalClosePath,wn.beginPath=wn.__originalBeginPath,delete wn._removeMirroring},wn.save=function(){_n.save(),this.__originalSave()},wn.restore=function(){_n.restore(),this.__originalRestore()},wn.translate=function(Mn,Ln){_n.translate(Mn,Ln),this.__originalTranslate(Mn,Ln)},wn.scale=function(Mn,Ln){_n.scale(Mn,Ln),this.__originalScale(Mn,Ln)},wn.transform=function(Mn,Ln,jn,Kn,Nn,An){_n.transform(Mn,Ln,jn,Kn,Nn,An),this.__originalTransform(Mn,Ln,jn,Kn,Nn,An)},wn.setTransform=function(Mn,Ln,jn,Kn,Nn,An){_n.setTransform(Mn,Ln,jn,Kn,Nn,An),this.__originalSetTransform(Mn,Ln,jn,Kn,Nn,An)},wn.resetTransform=function(){_n.resetTransform(),this.__originalResetTransform()},wn.rotate=function(Mn){_n.rotate(Mn),this.__originalRotate(Mn)},wn.clip=function(Mn){_n.clip(Mn),this.__originalClip(Mn)},wn.moveTo=function(Tn,Mn){_n.moveTo(Tn,Mn),this.__originalMoveTo(Tn,Mn)},wn.lineTo=function(Tn,Mn){_n.lineTo(Tn,Mn),this.__originalLineTo(Tn,Mn)},wn.bezierCurveTo=function(Tn,Mn,Ln,jn,Kn,Nn){_n.bezierCurveTo(Tn,Mn,Ln,jn,Kn,Nn),this.__originalBezierCurveTo(Tn,Mn,Ln,jn,Kn,Nn)},wn.rect=function(Tn,Mn,Ln,jn){_n.rect(Tn,Mn,Ln,jn),this.__originalRect(Tn,Mn,Ln,jn)},wn.closePath=function(){_n.closePath(),this.__originalClosePath()},wn.beginPath=function(){_n.beginPath(),this.__originalBeginPath()}}class zr{constructor(_n){this.canvasFactory=_n,this.cache=Object.create(null)}getCanvas(_n,Tn,Mn){let Ln;return this.cache[_n]!==void 0?(Ln=this.cache[_n],this.canvasFactory.reset(Ln,Tn,Mn)):(Ln=this.canvasFactory.create(Tn,Mn),this.cache[_n]=Ln),Ln}delete(_n){delete this.cache[_n]}clear(){for(const _n in this.cache){const Tn=this.cache[_n];this.canvasFactory.destroy(Tn),delete this.cache[_n]}}}function Qr(wn,_n,Tn,Mn,Ln,jn,Kn,Nn,An,kn){const[Dn,Vn,zn,Xn,Zn,Pi]=(0,xr.getCurrentTransform)(wn);if(Vn===0&&zn===0){const zi=Kn*Dn+Zn,Xi=Math.round(zi),Ji=Nn*Xn+Pi,ns=Math.round(Ji),ps=(Kn+An)*Dn+Zn,ls=Math.abs(Math.round(ps)-Xi)||1,Li=(Nn+kn)*Xn+Pi,es=Math.abs(Math.round(Li)-ns)||1;return wn.setTransform(Math.sign(Dn),0,0,Math.sign(Xn),Xi,ns),wn.drawImage(_n,Tn,Mn,Ln,jn,0,0,ls,es),wn.setTransform(Dn,Vn,zn,Xn,Zn,Pi),[ls,es]}if(Dn===0&&Xn===0){const zi=Nn*zn+Zn,Xi=Math.round(zi),Ji=Kn*Vn+Pi,ns=Math.round(Ji),ps=(Nn+kn)*zn+Zn,ls=Math.abs(Math.round(ps)-Xi)||1,Li=(Kn+An)*Vn+Pi,es=Math.abs(Math.round(Li)-ns)||1;return wn.setTransform(0,Math.sign(Vn),Math.sign(zn),0,Xi,ns),wn.drawImage(_n,Tn,Mn,Ln,jn,0,0,es,ls),wn.setTransform(Dn,Vn,zn,Xn,Zn,Pi),[es,ls]}wn.drawImage(_n,Tn,Mn,Ln,jn,Kn,Nn,An,kn);const Ya=Math.hypot(Dn,Vn),Bi=Math.hypot(zn,Xn);return[Ya*An,Bi*kn]}function sn(wn){const{width:_n,height:Tn}=wn;if(_n>Hr||Tn>Hr)return null;const Mn=1e3,Ln=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),jn=_n+1;let Kn=new Uint8Array(jn*(Tn+1)),Nn,An,kn;const Dn=_n+7&-8;let Vn=new Uint8Array(Dn*Tn),zn=0;for(const Bi of wn.data){let zi=128;for(;zi>0;)Vn[zn++]=Bi&zi?0:255,zi>>=1}let Xn=0;for(zn=0,Vn[zn]!==0&&(Kn[0]=1,++Xn),An=1;An<_n;An++)Vn[zn]!==Vn[zn+1]&&(Kn[An]=Vn[zn]?2:1,++Xn),zn++;for(Vn[zn]!==0&&(Kn[An]=2,++Xn),Nn=1;Nn<Tn;Nn++){zn=Nn*Dn,kn=Nn*jn,Vn[zn-Dn]!==Vn[zn]&&(Kn[kn]=Vn[zn]?1:8,++Xn);let Bi=(Vn[zn]?4:0)+(Vn[zn-Dn]?8:0);for(An=1;An<_n;An++)Bi=(Bi>>2)+(Vn[zn+1]?4:0)+(Vn[zn-Dn+1]?8:0),Ln[Bi]&&(Kn[kn+An]=Ln[Bi],++Xn),zn++;if(Vn[zn-Dn]!==Vn[zn]&&(Kn[kn+An]=Vn[zn]?2:4,++Xn),Xn>Mn)return null}for(zn=Dn*(Tn-1),kn=Nn*jn,Vn[zn]!==0&&(Kn[kn]=8,++Xn),An=1;An<_n;An++)Vn[zn]!==Vn[zn+1]&&(Kn[kn+An]=Vn[zn]?4:8,++Xn),zn++;if(Vn[zn]!==0&&(Kn[kn+An]=4,++Xn),Xn>Mn)return null;const Zn=new Int32Array([0,jn,-1,0,-jn,0,0,0,1]),Pi=new Path2D;for(Nn=0;Xn&&Nn<=Tn;Nn++){let Bi=Nn*jn;const zi=Bi+_n;for(;Bi<zi&&!Kn[Bi];)Bi++;if(Bi===zi)continue;Pi.moveTo(Bi%jn,Nn);const Xi=Bi;let Ji=Kn[Bi];do{const ns=Zn[Ji];do Bi+=ns;while(!Kn[Bi]);const ps=Kn[Bi];ps!==5&&ps!==10?(Ji=ps,Kn[Bi]=0):(Ji=ps&51*Ji>>4,Kn[Bi]&=Ji>>2|Ji<<2),Pi.lineTo(Bi%jn,Bi/jn|0),Kn[Bi]||--Xn}while(Xi!==Bi);--Nn}return Vn=null,Kn=null,function(Bi){Bi.save(),Bi.scale(1/_n,-1/Tn),Bi.translate(0,-Tn),Bi.fill(Pi),Bi.beginPath(),Bi.restore()}}class hn{constructor(_n,Tn){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=vr.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=vr.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=vr.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,_n,Tn])}clone(){const _n=Object.create(this);return _n.clipBox=this.clipBox.slice(),_n}setCurrentPoint(_n,Tn){this.x=_n,this.y=Tn}updatePathMinMax(_n,Tn,Mn){[Tn,Mn]=vr.Util.applyTransform([Tn,Mn],_n),this.minX=Math.min(this.minX,Tn),this.minY=Math.min(this.minY,Mn),this.maxX=Math.max(this.maxX,Tn),this.maxY=Math.max(this.maxY,Mn)}updateRectMinMax(_n,Tn){const Mn=vr.Util.applyTransform(Tn,_n),Ln=vr.Util.applyTransform(Tn.slice(2),_n);this.minX=Math.min(this.minX,Mn[0],Ln[0]),this.minY=Math.min(this.minY,Mn[1],Ln[1]),this.maxX=Math.max(this.maxX,Mn[0],Ln[0]),this.maxY=Math.max(this.maxY,Mn[1],Ln[1])}updateScalingPathMinMax(_n,Tn){vr.Util.scaleMinMax(_n,Tn),this.minX=Math.min(this.minX,Tn[0]),this.maxX=Math.max(this.maxX,Tn[1]),this.minY=Math.min(this.minY,Tn[2]),this.maxY=Math.max(this.maxY,Tn[3])}updateCurvePathMinMax(_n,Tn,Mn,Ln,jn,Kn,Nn,An,kn,Dn){const Vn=vr.Util.bezierBoundingBox(Tn,Mn,Ln,jn,Kn,Nn,An,kn);if(Dn){Dn[0]=Math.min(Dn[0],Vn[0],Vn[2]),Dn[1]=Math.max(Dn[1],Vn[0],Vn[2]),Dn[2]=Math.min(Dn[2],Vn[1],Vn[3]),Dn[3]=Math.max(Dn[3],Vn[1],Vn[3]);return}this.updateRectMinMax(_n,Vn)}getPathBoundingBox(_n=Er.PathType.FILL,Tn=null){const Mn=[this.minX,this.minY,this.maxX,this.maxY];if(_n===Er.PathType.STROKE){Tn||(0,vr.unreachable)("Stroke bounding box must include transform.");const Ln=vr.Util.singularValueDecompose2dScale(Tn),jn=Ln[0]*this.lineWidth/2,Kn=Ln[1]*this.lineWidth/2;Mn[0]-=jn,Mn[1]-=Kn,Mn[2]+=jn,Mn[3]+=Kn}return Mn}updateClipFromPath(){const _n=vr.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(_n||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(_n){this.clipBox=_n,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(_n=Er.PathType.FILL,Tn=null){return vr.Util.intersect(this.clipBox,this.getPathBoundingBox(_n,Tn))}}function vn(wn,_n){if(typeof ImageData<"u"&&_n instanceof ImageData){wn.putImageData(_n,0,0);return}const Tn=_n.height,Mn=_n.width,Ln=Tn%Gr,jn=(Tn-Ln)/Gr,Kn=Ln===0?jn:jn+1,Nn=wn.createImageData(Mn,Gr);let An=0,kn;const Dn=_n.data,Vn=Nn.data;let zn,Xn,Zn,Pi;if(_n.kind===vr.ImageKind.GRAYSCALE_1BPP){const Ya=Dn.byteLength,Bi=new Uint32Array(Vn.buffer,0,Vn.byteLength>>2),zi=Bi.length,Xi=Mn+7>>3,Ji=4294967295,ns=vr.FeatureTest.isLittleEndian?4278190080:255;for(zn=0;zn<Kn;zn++){for(Zn=zn<jn?Gr:Ln,kn=0,Xn=0;Xn<Zn;Xn++){const ps=Ya-An;let ls=0;const Li=ps>Xi?Mn:ps*8-7,es=Li&-8;let os=0,ds=0;for(;ls<es;ls+=8)ds=Dn[An++],Bi[kn++]=ds&128?Ji:ns,Bi[kn++]=ds&64?Ji:ns,Bi[kn++]=ds&32?Ji:ns,Bi[kn++]=ds&16?Ji:ns,Bi[kn++]=ds&8?Ji:ns,Bi[kn++]=ds&4?Ji:ns,Bi[kn++]=ds&2?Ji:ns,Bi[kn++]=ds&1?Ji:ns;for(;ls<Li;ls++)os===0&&(ds=Dn[An++],os=128),Bi[kn++]=ds&os?Ji:ns,os>>=1}for(;kn<zi;)Bi[kn++]=0;wn.putImageData(Nn,0,zn*Gr)}}else if(_n.kind===vr.ImageKind.RGBA_32BPP){for(Xn=0,Pi=Mn*Gr*4,zn=0;zn<jn;zn++)Vn.set(Dn.subarray(An,An+Pi)),An+=Pi,wn.putImageData(Nn,0,Xn),Xn+=Gr;zn<Kn&&(Pi=Mn*Ln*4,Vn.set(Dn.subarray(An,An+Pi)),wn.putImageData(Nn,0,Xn))}else if(_n.kind===vr.ImageKind.RGB_24BPP)for(Zn=Gr,Pi=Mn*Zn,zn=0;zn<Kn;zn++){for(zn>=jn&&(Zn=Ln,Pi=Mn*Zn),kn=0,Xn=Pi;Xn--;)Vn[kn++]=Dn[An++],Vn[kn++]=Dn[An++],Vn[kn++]=Dn[An++],Vn[kn++]=255;wn.putImageData(Nn,0,zn*Gr)}else throw new Error(`bad image kind: ${_n.kind}`)}function yn(wn,_n){if(_n.bitmap){wn.drawImage(_n.bitmap,0,0);return}const Tn=_n.height,Mn=_n.width,Ln=Tn%Gr,jn=(Tn-Ln)/Gr,Kn=Ln===0?jn:jn+1,Nn=wn.createImageData(Mn,Gr);let An=0;const kn=_n.data,Dn=Nn.data;for(let Vn=0;Vn<Kn;Vn++){const zn=Vn<jn?Gr:Ln;({srcPos:An}=(0,Cr.convertBlackAndWhiteToRGBA)({src:kn,srcPos:An,dest:Dn,width:Mn,height:zn,nonBlackColor:0})),wn.putImageData(Nn,0,Vn*Gr)}}function gn(wn,_n){const Tn=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const Mn of Tn)wn[Mn]!==void 0&&(_n[Mn]=wn[Mn]);wn.setLineDash!==void 0&&(_n.setLineDash(wn.getLineDash()),_n.lineDashOffset=wn.lineDashOffset)}function bn(wn){if(wn.strokeStyle=wn.fillStyle="#000000",wn.fillRule="nonzero",wn.globalAlpha=1,wn.lineWidth=1,wn.lineCap="butt",wn.lineJoin="miter",wn.miterLimit=10,wn.globalCompositeOperation="source-over",wn.font="10px sans-serif",wn.setLineDash!==void 0&&(wn.setLineDash([]),wn.lineDashOffset=0),!vr.isNodeJS){const{filter:_n}=wn;_n!=="none"&&_n!==""&&(wn.filter="none")}}function xn(wn,_n,Tn,Mn){const Ln=wn.length;for(let jn=3;jn<Ln;jn+=4){const Kn=wn[jn];if(Kn===0)wn[jn-3]=_n,wn[jn-2]=Tn,wn[jn-1]=Mn;else if(Kn<255){const Nn=255-Kn;wn[jn-3]=wn[jn-3]*Kn+_n*Nn>>8,wn[jn-2]=wn[jn-2]*Kn+Tn*Nn>>8,wn[jn-1]=wn[jn-1]*Kn+Mn*Nn>>8}}}function $n(wn,_n,Tn){const Mn=wn.length,Ln=1/255;for(let jn=3;jn<Mn;jn+=4){const Kn=Tn?Tn[wn[jn]]:wn[jn];_n[jn]=_n[jn]*Kn*Ln|0}}function Sn(wn,_n,Tn){const Mn=wn.length;for(let Ln=3;Ln<Mn;Ln+=4){const jn=wn[Ln-3]*77+wn[Ln-2]*152+wn[Ln-1]*28;_n[Ln]=Tn?_n[Ln]*Tn[jn>>8]>>8:_n[Ln]*jn>>16}}function Cn(wn,_n,Tn,Mn,Ln,jn,Kn,Nn,An,kn,Dn){const Vn=!!jn,zn=Vn?jn[0]:0,Xn=Vn?jn[1]:0,Zn=Vn?jn[2]:0,Pi=Ln==="Luminosity"?Sn:$n,Bi=Math.min(Mn,Math.ceil(1048576/Tn));for(let zi=0;zi<Mn;zi+=Bi){const Xi=Math.min(Bi,Mn-zi),Ji=wn.getImageData(Nn-kn,zi+(An-Dn),Tn,Xi),ns=_n.getImageData(Nn,zi+An,Tn,Xi);Vn&&xn(Ji.data,zn,Xn,Zn),Pi(Ji.data,ns.data,Kn),_n.putImageData(ns,Nn,zi+An)}}function Rn(wn,_n,Tn,Mn){const Ln=Mn[0],jn=Mn[1],Kn=Mn[2]-Ln,Nn=Mn[3]-jn;Kn===0||Nn===0||(Cn(_n.context,Tn,Kn,Nn,_n.subtype,_n.backdrop,_n.transferMap,Ln,jn,_n.offsetX,_n.offsetY),wn.save(),wn.globalAlpha=1,wn.globalCompositeOperation="source-over",wn.setTransform(1,0,0,1,0,0),wn.drawImage(Tn.canvas,0,0),wn.restore())}function Bn(wn,_n){const Tn=vr.Util.singularValueDecompose2dScale(wn);Tn[0]=Math.fround(Tn[0]),Tn[1]=Math.fround(Tn[1]);const Mn=Math.fround((globalThis.devicePixelRatio||1)*xr.PixelsPerInch.PDF_TO_CSS_UNITS);return _n!==void 0?_n:Tn[0]<=Mn||Tn[1]<=Mn}const Fn=["butt","round","square"],Hn=["miter","round","bevel"],Gn={},qn={};class On{constructor(_n,Tn,Mn,Ln,jn,{optionalContentConfig:Kn,markedContentStack:Nn=null},An,kn){this.ctx=_n,this.current=new hn(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=Tn,this.objs=Mn,this.canvasFactory=Ln,this.filterFactory=jn,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=Nn||[],this.optionalContentConfig=Kn,this.cachedCanvases=new zr(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=An,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=kn,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(_n,Tn=null){return typeof _n=="string"?_n.startsWith("g_")?this.commonObjs.get(_n):this.objs.get(_n):Tn}beginDrawing({transform:_n,viewport:Tn,transparency:Mn=!1,background:Ln=null}){const jn=this.ctx.canvas.width,Kn=this.ctx.canvas.height,Nn=this.ctx.fillStyle;if(this.ctx.fillStyle=Ln||"#ffffff",this.ctx.fillRect(0,0,jn,Kn),this.ctx.fillStyle=Nn,Mn){const An=this.cachedCanvases.getCanvas("transparent",jn,Kn);this.compositeCtx=this.ctx,this.transparentCanvas=An.canvas,this.ctx=An.context,this.ctx.save(),this.ctx.transform(...(0,xr.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),bn(this.ctx),_n&&(this.ctx.transform(..._n),this.outputScaleX=_n[0],this.outputScaleY=_n[0]),this.ctx.transform(...Tn.transform),this.viewportScale=Tn.scale,this.baseTransform=(0,xr.getCurrentTransform)(this.ctx)}executeOperatorList(_n,Tn,Mn,Ln){const jn=_n.argsArray,Kn=_n.fnArray;let Nn=Tn||0;const An=jn.length;if(An===Nn)return Nn;const kn=An-Nn>Br&&typeof Mn=="function",Dn=kn?Date.now()+Dr:0;let Vn=0;const zn=this.commonObjs,Xn=this.objs;let Zn;for(;;){if(Ln!==void 0&&Nn===Ln.nextBreakPoint)return Ln.breakIt(Nn,Mn),Nn;if(Zn=Kn[Nn],Zn!==vr.OPS.dependency)this[Zn].apply(this,jn[Nn]);else for(const Pi of jn[Nn]){const Ya=Pi.startsWith("g_")?zn:Xn;if(!Ya.has(Pi))return Ya.get(Pi,Mn),Nn}if(Nn++,Nn===An)return Nn;if(kn&&++Vn>Br){if(Date.now()>Dn)return Mn(),Nn;Vn=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const _n of this._cachedBitmapsMap.values()){for(const Tn of _n.values())typeof HTMLCanvasElement<"u"&&Tn instanceof HTMLCanvasElement&&(Tn.width=Tn.height=0);_n.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const _n=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(_n!=="none"){const Tn=this.ctx.filter;this.ctx.filter=_n,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=Tn}}}_scaleImage(_n,Tn){const Mn=_n.width,Ln=_n.height;let jn=Math.max(Math.hypot(Tn[0],Tn[1]),1),Kn=Math.max(Math.hypot(Tn[2],Tn[3]),1),Nn=Mn,An=Ln,kn="prescale1",Dn,Vn;for(;jn>2&&Nn>1||Kn>2&&An>1;){let zn=Nn,Xn=An;jn>2&&Nn>1&&(zn=Nn>=16384?Math.floor(Nn/2)-1||1:Math.ceil(Nn/2),jn/=Nn/zn),Kn>2&&An>1&&(Xn=An>=16384?Math.floor(An/2)-1||1:Math.ceil(An)/2,Kn/=An/Xn),Dn=this.cachedCanvases.getCanvas(kn,zn,Xn),Vn=Dn.context,Vn.clearRect(0,0,zn,Xn),Vn.drawImage(_n,0,0,Nn,An,0,0,zn,Xn),_n=Dn.canvas,Nn=zn,An=Xn,kn=kn==="prescale1"?"prescale2":"prescale1"}return{img:_n,paintWidth:Nn,paintHeight:An}}_createMaskCanvas(_n){const Tn=this.ctx,{width:Mn,height:Ln}=_n,jn=this.current.fillColor,Kn=this.current.patternFill,Nn=(0,xr.getCurrentTransform)(Tn);let An,kn,Dn,Vn;if((_n.bitmap||_n.data)&&_n.count>1){const ls=_n.bitmap||_n.data.buffer;kn=JSON.stringify(Kn?Nn:[Nn.slice(0,4),jn]),An=this._cachedBitmapsMap.get(ls),An||(An=new Map,this._cachedBitmapsMap.set(ls,An));const Li=An.get(kn);if(Li&&!Kn){const es=Math.round(Math.min(Nn[0],Nn[2])+Nn[4]),os=Math.round(Math.min(Nn[1],Nn[3])+Nn[5]);return{canvas:Li,offsetX:es,offsetY:os}}Dn=Li}Dn||(Vn=this.cachedCanvases.getCanvas("maskCanvas",Mn,Ln),yn(Vn.context,_n));let zn=vr.Util.transform(Nn,[1/Mn,0,0,-1/Ln,0,0]);zn=vr.Util.transform(zn,[1,0,0,1,0,-Ln]);const Xn=vr.Util.applyTransform([0,0],zn),Zn=vr.Util.applyTransform([Mn,Ln],zn),Pi=vr.Util.normalizeRect([Xn[0],Xn[1],Zn[0],Zn[1]]),Ya=Math.round(Pi[2]-Pi[0])||1,Bi=Math.round(Pi[3]-Pi[1])||1,zi=this.cachedCanvases.getCanvas("fillCanvas",Ya,Bi),Xi=zi.context,Ji=Math.min(Xn[0],Zn[0]),ns=Math.min(Xn[1],Zn[1]);Xi.translate(-Ji,-ns),Xi.transform(...zn),Dn||(Dn=this._scaleImage(Vn.canvas,(0,xr.getCurrentTransformInverse)(Xi)),Dn=Dn.img,An&&Kn&&An.set(kn,Dn)),Xi.imageSmoothingEnabled=Bn((0,xr.getCurrentTransform)(Xi),_n.interpolate),Qr(Xi,Dn,0,0,Dn.width,Dn.height,0,0,Mn,Ln),Xi.globalCompositeOperation="source-in";const ps=vr.Util.transform((0,xr.getCurrentTransformInverse)(Xi),[1,0,0,1,-Ji,-ns]);return Xi.fillStyle=Kn?jn.getPattern(Tn,this,ps,Er.PathType.FILL):jn,Xi.fillRect(0,0,Mn,Ln),An&&!Kn&&(this.cachedCanvases.delete("fillCanvas"),An.set(kn,zi.canvas)),{canvas:zi.canvas,offsetX:Math.round(Ji),offsetY:Math.round(ns)}}setLineWidth(_n){_n!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=_n,this.ctx.lineWidth=_n}setLineCap(_n){this.ctx.lineCap=Fn[_n]}setLineJoin(_n){this.ctx.lineJoin=Hn[_n]}setMiterLimit(_n){this.ctx.miterLimit=_n}setDash(_n,Tn){const Mn=this.ctx;Mn.setLineDash!==void 0&&(Mn.setLineDash(_n),Mn.lineDashOffset=Tn)}setRenderingIntent(_n){}setFlatness(_n){}setGState(_n){for(const[Tn,Mn]of _n)switch(Tn){case"LW":this.setLineWidth(Mn);break;case"LC":this.setLineCap(Mn);break;case"LJ":this.setLineJoin(Mn);break;case"ML":this.setMiterLimit(Mn);break;case"D":this.setDash(Mn[0],Mn[1]);break;case"RI":this.setRenderingIntent(Mn);break;case"FL":this.setFlatness(Mn);break;case"Font":this.setFont(Mn[0],Mn[1]);break;case"CA":this.current.strokeAlpha=Mn;break;case"ca":this.current.fillAlpha=Mn,this.ctx.globalAlpha=Mn;break;case"BM":this.ctx.globalCompositeOperation=Mn;break;case"SMask":this.current.activeSMask=Mn?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(Mn);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const _n=this.inSMaskMode;this.current.activeSMask&&!_n?this.beginSMaskMode():!this.current.activeSMask&&_n&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const _n=this.ctx.canvas.width,Tn=this.ctx.canvas.height,Mn="smaskGroupAt"+this.groupLevel,Ln=this.cachedCanvases.getCanvas(Mn,_n,Tn);this.suspendedCtx=this.ctx,this.ctx=Ln.context;const jn=this.ctx;jn.setTransform(...(0,xr.getCurrentTransform)(this.suspendedCtx)),gn(this.suspendedCtx,jn),qr(jn,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),gn(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(_n){if(!this.current.activeSMask)return;_n?(_n[0]=Math.floor(_n[0]),_n[1]=Math.floor(_n[1]),_n[2]=Math.ceil(_n[2]),_n[3]=Math.ceil(_n[3])):_n=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const Tn=this.current.activeSMask,Mn=this.suspendedCtx;Rn(Mn,Tn,this.ctx,_n),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(gn(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const _n=this.current;this.stateStack.push(_n),this.current=_n.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),gn(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(_n,Tn,Mn,Ln,jn,Kn){this.ctx.transform(_n,Tn,Mn,Ln,jn,Kn),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(_n,Tn,Mn){const Ln=this.ctx,jn=this.current;let Kn=jn.x,Nn=jn.y,An,kn;const Dn=(0,xr.getCurrentTransform)(Ln),Vn=Dn[0]===0&&Dn[3]===0||Dn[1]===0&&Dn[2]===0,zn=Vn?Mn.slice(0):null;for(let Xn=0,Zn=0,Pi=_n.length;Xn<Pi;Xn++)switch(_n[Xn]|0){case vr.OPS.rectangle:Kn=Tn[Zn++],Nn=Tn[Zn++];const Ya=Tn[Zn++],Bi=Tn[Zn++],zi=Kn+Ya,Xi=Nn+Bi;Ln.moveTo(Kn,Nn),Ya===0||Bi===0?Ln.lineTo(zi,Xi):(Ln.lineTo(zi,Nn),Ln.lineTo(zi,Xi),Ln.lineTo(Kn,Xi)),Vn||jn.updateRectMinMax(Dn,[Kn,Nn,zi,Xi]),Ln.closePath();break;case vr.OPS.moveTo:Kn=Tn[Zn++],Nn=Tn[Zn++],Ln.moveTo(Kn,Nn),Vn||jn.updatePathMinMax(Dn,Kn,Nn);break;case vr.OPS.lineTo:Kn=Tn[Zn++],Nn=Tn[Zn++],Ln.lineTo(Kn,Nn),Vn||jn.updatePathMinMax(Dn,Kn,Nn);break;case vr.OPS.curveTo:An=Kn,kn=Nn,Kn=Tn[Zn+4],Nn=Tn[Zn+5],Ln.bezierCurveTo(Tn[Zn],Tn[Zn+1],Tn[Zn+2],Tn[Zn+3],Kn,Nn),jn.updateCurvePathMinMax(Dn,An,kn,Tn[Zn],Tn[Zn+1],Tn[Zn+2],Tn[Zn+3],Kn,Nn,zn),Zn+=6;break;case vr.OPS.curveTo2:An=Kn,kn=Nn,Ln.bezierCurveTo(Kn,Nn,Tn[Zn],Tn[Zn+1],Tn[Zn+2],Tn[Zn+3]),jn.updateCurvePathMinMax(Dn,An,kn,Kn,Nn,Tn[Zn],Tn[Zn+1],Tn[Zn+2],Tn[Zn+3],zn),Kn=Tn[Zn+2],Nn=Tn[Zn+3],Zn+=4;break;case vr.OPS.curveTo3:An=Kn,kn=Nn,Kn=Tn[Zn+2],Nn=Tn[Zn+3],Ln.bezierCurveTo(Tn[Zn],Tn[Zn+1],Kn,Nn,Kn,Nn),jn.updateCurvePathMinMax(Dn,An,kn,Tn[Zn],Tn[Zn+1],Kn,Nn,Kn,Nn,zn),Zn+=4;break;case vr.OPS.closePath:Ln.closePath();break}Vn&&jn.updateScalingPathMinMax(Dn,zn),jn.setCurrentPoint(Kn,Nn)}closePath(){this.ctx.closePath()}stroke(_n=!0){const Tn=this.ctx,Mn=this.current.strokeColor;Tn.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof Mn=="object"&&Mn?.getPattern?(Tn.save(),Tn.strokeStyle=Mn.getPattern(Tn,this,(0,xr.getCurrentTransformInverse)(Tn),Er.PathType.STROKE),this.rescaleAndStroke(!1),Tn.restore()):this.rescaleAndStroke(!0)),_n&&this.consumePath(this.current.getClippedPathBoundingBox()),Tn.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(_n=!0){const Tn=this.ctx,Mn=this.current.fillColor,Ln=this.current.patternFill;let jn=!1;Ln&&(Tn.save(),Tn.fillStyle=Mn.getPattern(Tn,this,(0,xr.getCurrentTransformInverse)(Tn),Er.PathType.FILL),jn=!0);const Kn=this.current.getClippedPathBoundingBox();this.contentVisible&&Kn!==null&&(this.pendingEOFill?(Tn.fill("evenodd"),this.pendingEOFill=!1):Tn.fill()),jn&&Tn.restore(),_n&&this.consumePath(Kn)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Gn}eoClip(){this.pendingClip=qn}beginText(){this.current.textMatrix=vr.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const _n=this.pendingTextPaths,Tn=this.ctx;if(_n===void 0){Tn.beginPath();return}Tn.save(),Tn.beginPath();for(const Mn of _n)Tn.setTransform(...Mn.transform),Tn.translate(Mn.x,Mn.y),Mn.addToPath(Tn,Mn.fontSize);Tn.restore(),Tn.clip(),Tn.beginPath(),delete this.pendingTextPaths}setCharSpacing(_n){this.current.charSpacing=_n}setWordSpacing(_n){this.current.wordSpacing=_n}setHScale(_n){this.current.textHScale=_n/100}setLeading(_n){this.current.leading=-_n}setFont(_n,Tn){const Mn=this.commonObjs.get(_n),Ln=this.current;if(!Mn)throw new Error(`Can't find font for ${_n}`);if(Ln.fontMatrix=Mn.fontMatrix||vr.FONT_IDENTITY_MATRIX,(Ln.fontMatrix[0]===0||Ln.fontMatrix[3]===0)&&(0,vr.warn)("Invalid font matrix for font "+_n),Tn<0?(Tn=-Tn,Ln.fontDirection=-1):Ln.fontDirection=1,this.current.font=Mn,this.current.fontSize=Tn,Mn.isType3Font)return;const jn=Mn.loadedName||"sans-serif",Kn=Mn.systemFontInfo?.css||`"${jn}", ${Mn.fallbackName}`;let Nn="normal";Mn.black?Nn="900":Mn.bold&&(Nn="bold");const An=Mn.italic?"italic":"normal";let kn=Tn;Tn<wr?kn=wr:Tn>Rr&&(kn=Rr),this.current.fontSizeScale=Tn/kn,this.ctx.font=`${An} ${Nn} ${kn}px ${Kn}`}setTextRenderingMode(_n){this.current.textRenderingMode=_n}setTextRise(_n){this.current.textRise=_n}moveText(_n,Tn){this.current.x=this.current.lineX+=_n,this.current.y=this.current.lineY+=Tn}setLeadingMoveText(_n,Tn){this.setLeading(-Tn),this.moveText(_n,Tn)}setTextMatrix(_n,Tn,Mn,Ln,jn,Kn){this.current.textMatrix=[_n,Tn,Mn,Ln,jn,Kn],this.current.textMatrixScale=Math.hypot(_n,Tn),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(_n,Tn,Mn,Ln){const jn=this.ctx,Kn=this.current,Nn=Kn.font,An=Kn.textRenderingMode,kn=Kn.fontSize/Kn.fontSizeScale,Dn=An&vr.TextRenderingMode.FILL_STROKE_MASK,Vn=!!(An&vr.TextRenderingMode.ADD_TO_PATH_FLAG),zn=Kn.patternFill&&!Nn.missingFile;let Xn;(Nn.disableFontFace||Vn||zn)&&(Xn=Nn.getPathGenerator(this.commonObjs,_n)),Nn.disableFontFace||zn?(jn.save(),jn.translate(Tn,Mn),jn.beginPath(),Xn(jn,kn),Ln&&jn.setTransform(...Ln),(Dn===vr.TextRenderingMode.FILL||Dn===vr.TextRenderingMode.FILL_STROKE)&&jn.fill(),(Dn===vr.TextRenderingMode.STROKE||Dn===vr.TextRenderingMode.FILL_STROKE)&&jn.stroke(),jn.restore()):((Dn===vr.TextRenderingMode.FILL||Dn===vr.TextRenderingMode.FILL_STROKE)&&jn.fillText(_n,Tn,Mn),(Dn===vr.TextRenderingMode.STROKE||Dn===vr.TextRenderingMode.FILL_STROKE)&&jn.strokeText(_n,Tn,Mn)),Vn&&(this.pendingTextPaths||=[]).push({transform:(0,xr.getCurrentTransform)(jn),x:Tn,y:Mn,fontSize:kn,addToPath:Xn})}get isFontSubpixelAAEnabled(){const{context:_n}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);_n.scale(1.5,1),_n.fillText("I",0,10);const Tn=_n.getImageData(0,0,10,10).data;let Mn=!1;for(let Ln=3;Ln<Tn.length;Ln+=4)if(Tn[Ln]>0&&Tn[Ln]<255){Mn=!0;break}return(0,vr.shadow)(this,"isFontSubpixelAAEnabled",Mn)}showText(_n){const Tn=this.current,Mn=Tn.font;if(Mn.isType3Font)return this.showType3Text(_n);const Ln=Tn.fontSize;if(Ln===0)return;const jn=this.ctx,Kn=Tn.fontSizeScale,Nn=Tn.charSpacing,An=Tn.wordSpacing,kn=Tn.fontDirection,Dn=Tn.textHScale*kn,Vn=_n.length,zn=Mn.vertical,Xn=zn?1:-1,Zn=Mn.defaultVMetrics,Pi=Ln*Tn.fontMatrix[0],Ya=Tn.textRenderingMode===vr.TextRenderingMode.FILL&&!Mn.disableFontFace&&!Tn.patternFill;jn.save(),jn.transform(...Tn.textMatrix),jn.translate(Tn.x,Tn.y+Tn.textRise),kn>0?jn.scale(Dn,-1):jn.scale(Dn,1);let Bi;if(Tn.patternFill){jn.save();const ps=Tn.fillColor.getPattern(jn,this,(0,xr.getCurrentTransformInverse)(jn),Er.PathType.FILL);Bi=(0,xr.getCurrentTransform)(jn),jn.restore(),jn.fillStyle=ps}let zi=Tn.lineWidth;const Xi=Tn.textMatrixScale;if(Xi===0||zi===0){const ps=Tn.textRenderingMode&vr.TextRenderingMode.FILL_STROKE_MASK;(ps===vr.TextRenderingMode.STROKE||ps===vr.TextRenderingMode.FILL_STROKE)&&(zi=this.getSinglePixelWidth())}else zi/=Xi;if(Kn!==1&&(jn.scale(Kn,Kn),zi/=Kn),jn.lineWidth=zi,Mn.isInvalidPDFjsFont){const ps=[];let ls=0;for(const Li of _n)ps.push(Li.unicode),ls+=Li.width;jn.fillText(ps.join(""),0,0),Tn.x+=ls*Pi*Dn,jn.restore(),this.compose();return}let Ji=0,ns;for(ns=0;ns<Vn;++ns){const ps=_n[ns];if(typeof ps=="number"){Ji+=Xn*ps*Ln/1e3;continue}let ls=!1;const Li=(ps.isSpace?An:0)+Nn,es=ps.fontChar,os=ps.accent;let ds,Is,ws=ps.width;if(zn){const go=ps.vmetric||Zn,vo=-(ps.vmetric?go[1]:ws*.5)*Pi,ho=go[2]*Pi;ws=go?-go[0]:ws,ds=vo/Kn,Is=(Ji+ho)/Kn}else ds=Ji/Kn,Is=0;if(Mn.remeasure&&ws>0){const go=jn.measureText(es).width*1e3/Ln*Kn;if(ws<go&&this.isFontSubpixelAAEnabled){const vo=ws/go;ls=!0,jn.save(),jn.scale(vo,1),ds/=vo}else ws!==go&&(ds+=(ws-go)/2e3*Ln/Kn)}if(this.contentVisible&&(ps.isInFont||Mn.missingFile)){if(Ya&&!os)jn.fillText(es,ds,Is);else if(this.paintChar(es,ds,Is,Bi),os){const go=ds+Ln*os.offset.x/Kn,vo=Is-Ln*os.offset.y/Kn;this.paintChar(os.fontChar,go,vo,Bi)}}const Ns=zn?ws*Pi-Li*kn:ws*Pi+Li*kn;Ji+=Ns,ls&&jn.restore()}zn?Tn.y-=Ji:Tn.x+=Ji*Dn,jn.restore(),this.compose()}showType3Text(_n){const Tn=this.ctx,Mn=this.current,Ln=Mn.font,jn=Mn.fontSize,Kn=Mn.fontDirection,Nn=Ln.vertical?1:-1,An=Mn.charSpacing,kn=Mn.wordSpacing,Dn=Mn.textHScale*Kn,Vn=Mn.fontMatrix||vr.FONT_IDENTITY_MATRIX,zn=_n.length,Xn=Mn.textRenderingMode===vr.TextRenderingMode.INVISIBLE;let Zn,Pi,Ya,Bi;if(!(Xn||jn===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,Tn.save(),Tn.transform(...Mn.textMatrix),Tn.translate(Mn.x,Mn.y),Tn.scale(Dn,Kn),Zn=0;Zn<zn;++Zn){if(Pi=_n[Zn],typeof Pi=="number"){Bi=Nn*Pi*jn/1e3,this.ctx.translate(Bi,0),Mn.x+=Bi*Dn;continue}const zi=(Pi.isSpace?kn:0)+An,Xi=Ln.charProcOperatorList[Pi.operatorListId];if(!Xi){(0,vr.warn)(`Type3 character "${Pi.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=Pi,this.save(),Tn.scale(jn,jn),Tn.transform(...Vn),this.executeOperatorList(Xi),this.restore()),Ya=vr.Util.applyTransform([Pi.width,0],Vn)[0]*jn+zi,Tn.translate(Ya,0),Mn.x+=Ya*Dn}Tn.restore(),this.processingType3=null}}setCharWidth(_n,Tn){}setCharWidthAndBounds(_n,Tn,Mn,Ln,jn,Kn){this.ctx.rect(Mn,Ln,jn-Mn,Kn-Ln),this.ctx.clip(),this.endPath()}getColorN_Pattern(_n){let Tn;if(_n[0]==="TilingPattern"){const Mn=_n[1],Ln=this.baseTransform||(0,xr.getCurrentTransform)(this.ctx),jn={createCanvasGraphics:Kn=>new On(Kn,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};Tn=new Er.TilingPattern(_n,Mn,this.ctx,jn,Ln)}else Tn=this._getPattern(_n[1],_n[2]);return Tn}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(_n,Tn,Mn){const Ln=vr.Util.makeHexColor(_n,Tn,Mn);this.ctx.strokeStyle=Ln,this.current.strokeColor=Ln}setFillRGBColor(_n,Tn,Mn){const Ln=vr.Util.makeHexColor(_n,Tn,Mn);this.ctx.fillStyle=Ln,this.current.fillColor=Ln,this.current.patternFill=!1}_getPattern(_n,Tn=null){let Mn;return this.cachedPatterns.has(_n)?Mn=this.cachedPatterns.get(_n):(Mn=(0,Er.getShadingPattern)(this.getObject(_n)),this.cachedPatterns.set(_n,Mn)),Tn&&(Mn.matrix=Tn),Mn}shadingFill(_n){if(!this.contentVisible)return;const Tn=this.ctx;this.save();const Mn=this._getPattern(_n);Tn.fillStyle=Mn.getPattern(Tn,this,(0,xr.getCurrentTransformInverse)(Tn),Er.PathType.SHADING);const Ln=(0,xr.getCurrentTransformInverse)(Tn);if(Ln){const{width:jn,height:Kn}=Tn.canvas,[Nn,An,kn,Dn]=vr.Util.getAxialAlignedBoundingBox([0,0,jn,Kn],Ln);this.ctx.fillRect(Nn,An,kn-Nn,Dn-An)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,vr.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,vr.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(_n,Tn){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(_n)&&_n.length===6&&this.transform(..._n),this.baseTransform=(0,xr.getCurrentTransform)(this.ctx),Tn)){const Mn=Tn[2]-Tn[0],Ln=Tn[3]-Tn[1];this.ctx.rect(Tn[0],Tn[1],Mn,Ln),this.current.updateRectMinMax((0,xr.getCurrentTransform)(this.ctx),Tn),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(_n){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const Tn=this.ctx;_n.isolated||(0,vr.info)("TODO: Support non-isolated groups."),_n.knockout&&(0,vr.warn)("Knockout groups not supported.");const Mn=(0,xr.getCurrentTransform)(Tn);if(_n.matrix&&Tn.transform(..._n.matrix),!_n.bbox)throw new Error("Bounding box is required.");let Ln=vr.Util.getAxialAlignedBoundingBox(_n.bbox,(0,xr.getCurrentTransform)(Tn));const jn=[0,0,Tn.canvas.width,Tn.canvas.height];Ln=vr.Util.intersect(Ln,jn)||[0,0,0,0];const Kn=Math.floor(Ln[0]),Nn=Math.floor(Ln[1]);let An=Math.max(Math.ceil(Ln[2])-Kn,1),kn=Math.max(Math.ceil(Ln[3])-Nn,1),Dn=1,Vn=1;An>kr&&(Dn=An/kr,An=kr),kn>kr&&(Vn=kn/kr,kn=kr),this.current.startNewPathAndClipBox([0,0,An,kn]);let zn="groupAt"+this.groupLevel;_n.smask&&(zn+="_smask_"+this.smaskCounter++%2);const Xn=this.cachedCanvases.getCanvas(zn,An,kn),Zn=Xn.context;Zn.scale(1/Dn,1/Vn),Zn.translate(-Kn,-Nn),Zn.transform(...Mn),_n.smask?this.smaskStack.push({canvas:Xn.canvas,context:Zn,offsetX:Kn,offsetY:Nn,scaleX:Dn,scaleY:Vn,subtype:_n.smask.subtype,backdrop:_n.smask.backdrop,transferMap:_n.smask.transferMap||null,startTransformInverse:null}):(Tn.setTransform(1,0,0,1,0,0),Tn.translate(Kn,Nn),Tn.scale(Dn,Vn),Tn.save()),gn(Tn,Zn),this.ctx=Zn,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(Tn),this.groupLevel++}endGroup(_n){if(!this.contentVisible)return;this.groupLevel--;const Tn=this.ctx,Mn=this.groupStack.pop();if(this.ctx=Mn,this.ctx.imageSmoothingEnabled=!1,_n.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const Ln=(0,xr.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...Ln);const jn=vr.Util.getAxialAlignedBoundingBox([0,0,Tn.canvas.width,Tn.canvas.height],Ln);this.ctx.drawImage(Tn.canvas,0,0),this.ctx.restore(),this.compose(jn)}}beginAnnotation(_n,Tn,Mn,Ln,jn){if(this.#e(),bn(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(Tn)&&Tn.length===4){const Kn=Tn[2]-Tn[0],Nn=Tn[3]-Tn[1];if(jn&&this.annotationCanvasMap){Mn=Mn.slice(),Mn[4]-=Tn[0],Mn[5]-=Tn[1],Tn=Tn.slice(),Tn[0]=Tn[1]=0,Tn[2]=Kn,Tn[3]=Nn;const[An,kn]=vr.Util.singularValueDecompose2dScale((0,xr.getCurrentTransform)(this.ctx)),{viewportScale:Dn}=this,Vn=Math.ceil(Kn*this.outputScaleX*Dn),zn=Math.ceil(Nn*this.outputScaleY*Dn);this.annotationCanvas=this.canvasFactory.create(Vn,zn);const{canvas:Xn,context:Zn}=this.annotationCanvas;this.annotationCanvasMap.set(_n,Xn),this.annotationCanvas.savedCtx=this.ctx,this.ctx=Zn,this.ctx.save(),this.ctx.setTransform(An,0,0,-kn,0,Nn*kn),bn(this.ctx)}else bn(this.ctx),this.ctx.rect(Tn[0],Tn[1],Kn,Nn),this.ctx.clip(),this.endPath()}this.current=new hn(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...Mn),this.transform(...Ln)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(_n){if(!this.contentVisible)return;const Tn=_n.count;_n=this.getObject(_n.data,_n),_n.count=Tn;const Mn=this.ctx,Ln=this.processingType3;if(Ln&&(Ln.compiled===void 0&&(Ln.compiled=sn(_n)),Ln.compiled)){Ln.compiled(Mn);return}const jn=this._createMaskCanvas(_n),Kn=jn.canvas;Mn.save(),Mn.setTransform(1,0,0,1,0,0),Mn.drawImage(Kn,jn.offsetX,jn.offsetY),Mn.restore(),this.compose()}paintImageMaskXObjectRepeat(_n,Tn,Mn=0,Ln=0,jn,Kn){if(!this.contentVisible)return;_n=this.getObject(_n.data,_n);const Nn=this.ctx;Nn.save();const An=(0,xr.getCurrentTransform)(Nn);Nn.transform(Tn,Mn,Ln,jn,0,0);const kn=this._createMaskCanvas(_n);Nn.setTransform(1,0,0,1,kn.offsetX-An[4],kn.offsetY-An[5]);for(let Dn=0,Vn=Kn.length;Dn<Vn;Dn+=2){const zn=vr.Util.transform(An,[Tn,Mn,Ln,jn,Kn[Dn],Kn[Dn+1]]),[Xn,Zn]=vr.Util.applyTransform([0,0],zn);Nn.drawImage(kn.canvas,Xn,Zn)}Nn.restore(),this.compose()}paintImageMaskXObjectGroup(_n){if(!this.contentVisible)return;const Tn=this.ctx,Mn=this.current.fillColor,Ln=this.current.patternFill;for(const jn of _n){const{data:Kn,width:Nn,height:An,transform:kn}=jn,Dn=this.cachedCanvases.getCanvas("maskCanvas",Nn,An),Vn=Dn.context;Vn.save();const zn=this.getObject(Kn,jn);yn(Vn,zn),Vn.globalCompositeOperation="source-in",Vn.fillStyle=Ln?Mn.getPattern(Vn,this,(0,xr.getCurrentTransformInverse)(Tn),Er.PathType.FILL):Mn,Vn.fillRect(0,0,Nn,An),Vn.restore(),Tn.save(),Tn.transform(...kn),Tn.scale(1,-1),Qr(Tn,Dn.canvas,0,0,Nn,An,0,-1,1,1),Tn.restore()}this.compose()}paintImageXObject(_n){if(!this.contentVisible)return;const Tn=this.getObject(_n);if(!Tn){(0,vr.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(Tn)}paintImageXObjectRepeat(_n,Tn,Mn,Ln){if(!this.contentVisible)return;const jn=this.getObject(_n);if(!jn){(0,vr.warn)("Dependent image isn't ready yet");return}const Kn=jn.width,Nn=jn.height,An=[];for(let kn=0,Dn=Ln.length;kn<Dn;kn+=2)An.push({transform:[Tn,0,0,Mn,Ln[kn],Ln[kn+1]],x:0,y:0,w:Kn,h:Nn});this.paintInlineImageXObjectGroup(jn,An)}applyTransferMapsToCanvas(_n){return this.current.transferMaps!=="none"&&(_n.filter=this.current.transferMaps,_n.drawImage(_n.canvas,0,0),_n.filter="none"),_n.canvas}applyTransferMapsToBitmap(_n){if(this.current.transferMaps==="none")return _n.bitmap;const{bitmap:Tn,width:Mn,height:Ln}=_n,jn=this.cachedCanvases.getCanvas("inlineImage",Mn,Ln),Kn=jn.context;return Kn.filter=this.current.transferMaps,Kn.drawImage(Tn,0,0),Kn.filter="none",jn.canvas}paintInlineImageXObject(_n){if(!this.contentVisible)return;const Tn=_n.width,Mn=_n.height,Ln=this.ctx;if(this.save(),!vr.isNodeJS){const{filter:Nn}=Ln;Nn!=="none"&&Nn!==""&&(Ln.filter="none")}Ln.scale(1/Tn,-1/Mn);let jn;if(_n.bitmap)jn=this.applyTransferMapsToBitmap(_n);else if(typeof HTMLElement=="function"&&_n instanceof HTMLElement||!_n.data)jn=_n;else{const An=this.cachedCanvases.getCanvas("inlineImage",Tn,Mn).context;vn(An,_n),jn=this.applyTransferMapsToCanvas(An)}const Kn=this._scaleImage(jn,(0,xr.getCurrentTransformInverse)(Ln));Ln.imageSmoothingEnabled=Bn((0,xr.getCurrentTransform)(Ln),_n.interpolate),Qr(Ln,Kn.img,0,0,Kn.paintWidth,Kn.paintHeight,0,-Mn,Tn,Mn),this.compose(),this.restore()}paintInlineImageXObjectGroup(_n,Tn){if(!this.contentVisible)return;const Mn=this.ctx;let Ln;if(_n.bitmap)Ln=_n.bitmap;else{const jn=_n.width,Kn=_n.height,An=this.cachedCanvases.getCanvas("inlineImage",jn,Kn).context;vn(An,_n),Ln=this.applyTransferMapsToCanvas(An)}for(const jn of Tn)Mn.save(),Mn.transform(...jn.transform),Mn.scale(1,-1),Qr(Mn,Ln,jn.x,jn.y,jn.w,jn.h,0,-1,1,1),Mn.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(_n){}markPointProps(_n,Tn){}beginMarkedContent(_n){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(_n,Tn){_n==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(Tn)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(_n){const Tn=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(_n);const Mn=this.ctx;this.pendingClip&&(Tn||(this.pendingClip===qn?Mn.clip("evenodd"):Mn.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),Mn.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const _n=(0,xr.getCurrentTransform)(this.ctx);if(_n[1]===0&&_n[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(_n[0]),Math.abs(_n[3]));else{const Tn=Math.abs(_n[0]*_n[3]-_n[2]*_n[1]),Mn=Math.hypot(_n[0],_n[2]),Ln=Math.hypot(_n[1],_n[3]);this._cachedGetSinglePixelWidth=Math.max(Mn,Ln)/Tn}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:_n}=this.current,{a:Tn,b:Mn,c:Ln,d:jn}=this.ctx.getTransform();let Kn,Nn;if(Mn===0&&Ln===0){const An=Math.abs(Tn),kn=Math.abs(jn);if(An===kn)if(_n===0)Kn=Nn=1/An;else{const Dn=An*_n;Kn=Nn=Dn<1?1/Dn:1}else if(_n===0)Kn=1/An,Nn=1/kn;else{const Dn=An*_n,Vn=kn*_n;Kn=Dn<1?1/Dn:1,Nn=Vn<1?1/Vn:1}}else{const An=Math.abs(Tn*jn-Mn*Ln),kn=Math.hypot(Tn,Mn),Dn=Math.hypot(Ln,jn);if(_n===0)Kn=Dn/An,Nn=kn/An;else{const Vn=_n*An;Kn=Dn>Vn?Dn/Vn:1,Nn=kn>Vn?kn/Vn:1}}this._cachedScaleForStroking[0]=Kn,this._cachedScaleForStroking[1]=Nn}return this._cachedScaleForStroking}rescaleAndStroke(_n){const{ctx:Tn}=this,{lineWidth:Mn}=this.current,[Ln,jn]=this.getScaleForStroking();if(Tn.lineWidth=Mn||1,Ln===1&&jn===1){Tn.stroke();return}const Kn=Tn.getLineDash();if(_n&&Tn.save(),Tn.scale(Ln,jn),Kn.length>0){const Nn=Math.max(Ln,jn);Tn.setLineDash(Kn.map(An=>An/Nn)),Tn.lineDashOffset/=Nn}Tn.stroke(),_n&&Tn.restore()}isContentVisible(){for(let _n=this.markedContentStack.length-1;_n>=0;_n--)if(!this.markedContentStack[_n].visible)return!1;return!0}}hr.CanvasGraphics=On;for(const wn in vr.OPS)On.prototype[wn]!==void 0&&(On.prototype[vr.OPS[wn]]=On.prototype[wn])},(mr,hr,gr)=>{Object.defineProperty(hr,"__esModule",{value:!0}),hr.TilingPattern=hr.PathType=void 0,hr.getShadingPattern=Gr;var vr=gr(1),xr=gr(6);const Er={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};hr.PathType=Er;function Cr(Qr,sn){if(!sn)return;const hn=sn[2]-sn[0],vn=sn[3]-sn[1],yn=new Path2D;yn.rect(sn[0],sn[1],hn,vn),Qr.clip(yn)}class wr{constructor(){this.constructor===wr&&(0,vr.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,vr.unreachable)("Abstract method `getPattern` called.")}}class Rr extends wr{constructor(sn){super(),this._type=sn[1],this._bbox=sn[2],this._colorStops=sn[3],this._p0=sn[4],this._p1=sn[5],this._r0=sn[6],this._r1=sn[7],this.matrix=null}_createGradient(sn){let hn;this._type==="axial"?hn=sn.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(hn=sn.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const vn of this._colorStops)hn.addColorStop(vn[0],vn[1]);return hn}getPattern(sn,hn,vn,yn){let gn;if(yn===Er.STROKE||yn===Er.FILL){const bn=hn.current.getClippedPathBoundingBox(yn,(0,xr.getCurrentTransform)(sn))||[0,0,0,0],xn=Math.ceil(bn[2]-bn[0])||1,$n=Math.ceil(bn[3]-bn[1])||1,Sn=hn.cachedCanvases.getCanvas("pattern",xn,$n,!0),Cn=Sn.context;Cn.clearRect(0,0,Cn.canvas.width,Cn.canvas.height),Cn.beginPath(),Cn.rect(0,0,Cn.canvas.width,Cn.canvas.height),Cn.translate(-bn[0],-bn[1]),vn=vr.Util.transform(vn,[1,0,0,1,bn[0],bn[1]]),Cn.transform(...hn.baseTransform),this.matrix&&Cn.transform(...this.matrix),Cr(Cn,this._bbox),Cn.fillStyle=this._createGradient(Cn),Cn.fill(),gn=sn.createPattern(Sn.canvas,"no-repeat");const Rn=new DOMMatrix(vn);gn.setTransform(Rn)}else Cr(sn,this._bbox),gn=this._createGradient(sn);return gn}}function kr(Qr,sn,hn,vn,yn,gn,bn,xn){const $n=sn.coords,Sn=sn.colors,Cn=Qr.data,Rn=Qr.width*4;let Bn;$n[hn+1]>$n[vn+1]&&(Bn=hn,hn=vn,vn=Bn,Bn=gn,gn=bn,bn=Bn),$n[vn+1]>$n[yn+1]&&(Bn=vn,vn=yn,yn=Bn,Bn=bn,bn=xn,xn=Bn),$n[hn+1]>$n[vn+1]&&(Bn=hn,hn=vn,vn=Bn,Bn=gn,gn=bn,bn=Bn);const Fn=($n[hn]+sn.offsetX)*sn.scaleX,Hn=($n[hn+1]+sn.offsetY)*sn.scaleY,Gn=($n[vn]+sn.offsetX)*sn.scaleX,qn=($n[vn+1]+sn.offsetY)*sn.scaleY,On=($n[yn]+sn.offsetX)*sn.scaleX,wn=($n[yn+1]+sn.offsetY)*sn.scaleY;if(Hn>=wn)return;const _n=Sn[gn],Tn=Sn[gn+1],Mn=Sn[gn+2],Ln=Sn[bn],jn=Sn[bn+1],Kn=Sn[bn+2],Nn=Sn[xn],An=Sn[xn+1],kn=Sn[xn+2],Dn=Math.round(Hn),Vn=Math.round(wn);let zn,Xn,Zn,Pi,Ya,Bi,zi,Xi;for(let Ji=Dn;Ji<=Vn;Ji++){if(Ji<qn){const es=Ji<Hn?0:(Hn-Ji)/(Hn-qn);zn=Fn-(Fn-Gn)*es,Xn=_n-(_n-Ln)*es,Zn=Tn-(Tn-jn)*es,Pi=Mn-(Mn-Kn)*es}else{let es;Ji>wn?es=1:qn===wn?es=0:es=(qn-Ji)/(qn-wn),zn=Gn-(Gn-On)*es,Xn=Ln-(Ln-Nn)*es,Zn=jn-(jn-An)*es,Pi=Kn-(Kn-kn)*es}let ns;Ji<Hn?ns=0:Ji>wn?ns=1:ns=(Hn-Ji)/(Hn-wn),Ya=Fn-(Fn-On)*ns,Bi=_n-(_n-Nn)*ns,zi=Tn-(Tn-An)*ns,Xi=Mn-(Mn-kn)*ns;const ps=Math.round(Math.min(zn,Ya)),ls=Math.round(Math.max(zn,Ya));let Li=Rn*Ji+ps*4;for(let es=ps;es<=ls;es++)ns=(zn-es)/(zn-Ya),ns<0?ns=0:ns>1&&(ns=1),Cn[Li++]=Xn-(Xn-Bi)*ns|0,Cn[Li++]=Zn-(Zn-zi)*ns|0,Cn[Li++]=Pi-(Pi-Xi)*ns|0,Cn[Li++]=255}}function Dr(Qr,sn,hn){const vn=sn.coords,yn=sn.colors;let gn,bn;switch(sn.type){case"lattice":const xn=sn.verticesPerRow,$n=Math.floor(vn.length/xn)-1,Sn=xn-1;for(gn=0;gn<$n;gn++){let Cn=gn*xn;for(let Rn=0;Rn<Sn;Rn++,Cn++)kr(Qr,hn,vn[Cn],vn[Cn+1],vn[Cn+xn],yn[Cn],yn[Cn+1],yn[Cn+xn]),kr(Qr,hn,vn[Cn+xn+1],vn[Cn+1],vn[Cn+xn],yn[Cn+xn+1],yn[Cn+1],yn[Cn+xn])}break;case"triangles":for(gn=0,bn=vn.length;gn<bn;gn+=3)kr(Qr,hn,vn[gn],vn[gn+1],vn[gn+2],yn[gn],yn[gn+1],yn[gn+2]);break;default:throw new Error("illegal figure")}}class Br extends wr{constructor(sn){super(),this._coords=sn[2],this._colors=sn[3],this._figures=sn[4],this._bounds=sn[5],this._bbox=sn[7],this._background=sn[8],this.matrix=null}_createMeshCanvas(sn,hn,vn){const xn=Math.floor(this._bounds[0]),$n=Math.floor(this._bounds[1]),Sn=Math.ceil(this._bounds[2])-xn,Cn=Math.ceil(this._bounds[3])-$n,Rn=Math.min(Math.ceil(Math.abs(Sn*sn[0]*1.1)),3e3),Bn=Math.min(Math.ceil(Math.abs(Cn*sn[1]*1.1)),3e3),Fn=Sn/Rn,Hn=Cn/Bn,Gn={coords:this._coords,colors:this._colors,offsetX:-xn,offsetY:-$n,scaleX:1/Fn,scaleY:1/Hn},qn=Rn+2*2,On=Bn+2*2,wn=vn.getCanvas("mesh",qn,On,!1),_n=wn.context,Tn=_n.createImageData(Rn,Bn);if(hn){const Ln=Tn.data;for(let jn=0,Kn=Ln.length;jn<Kn;jn+=4)Ln[jn]=hn[0],Ln[jn+1]=hn[1],Ln[jn+2]=hn[2],Ln[jn+3]=255}for(const Ln of this._figures)Dr(Tn,Ln,Gn);return _n.putImageData(Tn,2,2),{canvas:wn.canvas,offsetX:xn-2*Fn,offsetY:$n-2*Hn,scaleX:Fn,scaleY:Hn}}getPattern(sn,hn,vn,yn){Cr(sn,this._bbox);let gn;if(yn===Er.SHADING)gn=vr.Util.singularValueDecompose2dScale((0,xr.getCurrentTransform)(sn));else if(gn=vr.Util.singularValueDecompose2dScale(hn.baseTransform),this.matrix){const xn=vr.Util.singularValueDecompose2dScale(this.matrix);gn=[gn[0]*xn[0],gn[1]*xn[1]]}const bn=this._createMeshCanvas(gn,yn===Er.SHADING?null:this._background,hn.cachedCanvases);return yn!==Er.SHADING&&(sn.setTransform(...hn.baseTransform),this.matrix&&sn.transform(...this.matrix)),sn.translate(bn.offsetX,bn.offsetY),sn.scale(bn.scaleX,bn.scaleY),sn.createPattern(bn.canvas,"no-repeat")}}class Hr extends wr{getPattern(){return"hotpink"}}function Gr(Qr){switch(Qr[0]){case"RadialAxial":return new Rr(Qr);case"Mesh":return new Br(Qr);case"Dummy":return new Hr}throw new Error(`Unknown IR type: ${Qr[0]}`)}const qr={COLORED:1,UNCOLORED:2};class zr{static MAX_PATTERN_SIZE=3e3;constructor(sn,hn,vn,yn,gn){this.operatorList=sn[2],this.matrix=sn[3]||[1,0,0,1,0,0],this.bbox=sn[4],this.xstep=sn[5],this.ystep=sn[6],this.paintType=sn[7],this.tilingType=sn[8],this.color=hn,this.ctx=vn,this.canvasGraphicsFactory=yn,this.baseTransform=gn}createPatternCanvas(sn){const hn=this.operatorList,vn=this.bbox,yn=this.xstep,gn=this.ystep,bn=this.paintType,xn=this.tilingType,$n=this.color,Sn=this.canvasGraphicsFactory;(0,vr.info)("TilingType: "+xn);const Cn=vn[0],Rn=vn[1],Bn=vn[2],Fn=vn[3],Hn=vr.Util.singularValueDecompose2dScale(this.matrix),Gn=vr.Util.singularValueDecompose2dScale(this.baseTransform),qn=[Hn[0]*Gn[0],Hn[1]*Gn[1]],On=this.getSizeAndScale(yn,this.ctx.canvas.width,qn[0]),wn=this.getSizeAndScale(gn,this.ctx.canvas.height,qn[1]),_n=sn.cachedCanvases.getCanvas("pattern",On.size,wn.size,!0),Tn=_n.context,Mn=Sn.createCanvasGraphics(Tn);Mn.groupLevel=sn.groupLevel,this.setFillAndStrokeStyleToContext(Mn,bn,$n);let Ln=Cn,jn=Rn,Kn=Bn,Nn=Fn;return Cn<0&&(Ln=0,Kn+=Math.abs(Cn)),Rn<0&&(jn=0,Nn+=Math.abs(Rn)),Tn.translate(-(On.scale*Ln),-(wn.scale*jn)),Mn.transform(On.scale,0,0,wn.scale,0,0),Tn.save(),this.clipBbox(Mn,Ln,jn,Kn,Nn),Mn.baseTransform=(0,xr.getCurrentTransform)(Mn.ctx),Mn.executeOperatorList(hn),Mn.endDrawing(),{canvas:_n.canvas,scaleX:On.scale,scaleY:wn.scale,offsetX:Ln,offsetY:jn}}getSizeAndScale(sn,hn,vn){sn=Math.abs(sn);const yn=Math.max(zr.MAX_PATTERN_SIZE,hn);let gn=Math.ceil(sn*vn);return gn>=yn?gn=yn:vn=gn/sn,{scale:vn,size:gn}}clipBbox(sn,hn,vn,yn,gn){const bn=yn-hn,xn=gn-vn;sn.ctx.rect(hn,vn,bn,xn),sn.current.updateRectMinMax((0,xr.getCurrentTransform)(sn.ctx),[hn,vn,yn,gn]),sn.clip(),sn.endPath()}setFillAndStrokeStyleToContext(sn,hn,vn){const yn=sn.ctx,gn=sn.current;switch(hn){case qr.COLORED:const bn=this.ctx;yn.fillStyle=bn.fillStyle,yn.strokeStyle=bn.strokeStyle,gn.fillColor=bn.fillStyle,gn.strokeColor=bn.strokeStyle;break;case qr.UNCOLORED:const xn=vr.Util.makeHexColor(vn[0],vn[1],vn[2]);yn.fillStyle=xn,yn.strokeStyle=xn,gn.fillColor=xn,gn.strokeColor=xn;break;default:throw new vr.FormatError(`Unsupported paint type: ${hn}`)}}getPattern(sn,hn,vn,yn){let gn=vn;yn!==Er.SHADING&&(gn=vr.Util.transform(gn,hn.baseTransform),this.matrix&&(gn=vr.Util.transform(gn,this.matrix)));const bn=this.createPatternCanvas(hn);let xn=new DOMMatrix(gn);xn=xn.translate(bn.offsetX,bn.offsetY),xn=xn.scale(1/bn.scaleX,1/bn.scaleY);const $n=sn.createPattern(bn.canvas,"repeat");return $n.setTransform(xn),$n}}hr.TilingPattern=zr},(mr,hr,gr)=>{Object.defineProperty(hr,"__esModule",{value:!0}),hr.convertBlackAndWhiteToRGBA=Er,hr.convertToRGBA=xr,hr.grayToRGBA=wr;var vr=gr(1);function xr(Rr){switch(Rr.kind){case vr.ImageKind.GRAYSCALE_1BPP:return Er(Rr);case vr.ImageKind.RGB_24BPP:return Cr(Rr)}return null}function Er({src:Rr,srcPos:kr=0,dest:Dr,width:Br,height:Hr,nonBlackColor:Gr=4294967295,inverseDecode:qr=!1}){const zr=vr.FeatureTest.isLittleEndian?4278190080:255,[Qr,sn]=qr?[Gr,zr]:[zr,Gr],hn=Br>>3,vn=Br&7,yn=Rr.length;Dr=new Uint32Array(Dr.buffer);let gn=0;for(let bn=0;bn<Hr;bn++){for(const $n=kr+hn;kr<$n;kr++){const Sn=kr<yn?Rr[kr]:255;Dr[gn++]=Sn&128?sn:Qr,Dr[gn++]=Sn&64?sn:Qr,Dr[gn++]=Sn&32?sn:Qr,Dr[gn++]=Sn&16?sn:Qr,Dr[gn++]=Sn&8?sn:Qr,Dr[gn++]=Sn&4?sn:Qr,Dr[gn++]=Sn&2?sn:Qr,Dr[gn++]=Sn&1?sn:Qr}if(vn===0)continue;const xn=kr<yn?Rr[kr++]:255;for(let $n=0;$n<vn;$n++)Dr[gn++]=xn&1<<7-$n?sn:Qr}return{srcPos:kr,destPos:gn}}function Cr({src:Rr,srcPos:kr=0,dest:Dr,destPos:Br=0,width:Hr,height:Gr}){let qr=0;const zr=Rr.length>>2,Qr=new Uint32Array(Rr.buffer,kr,zr);if(vr.FeatureTest.isLittleEndian){for(;qr<zr-2;qr+=3,Br+=4){const sn=Qr[qr],hn=Qr[qr+1],vn=Qr[qr+2];Dr[Br]=sn|4278190080,Dr[Br+1]=sn>>>24|hn<<8|4278190080,Dr[Br+2]=hn>>>16|vn<<16|4278190080,Dr[Br+3]=vn>>>8|4278190080}for(let sn=qr*4,hn=Rr.length;sn<hn;sn+=3)Dr[Br++]=Rr[sn]|Rr[sn+1]<<8|Rr[sn+2]<<16|4278190080}else{for(;qr<zr-2;qr+=3,Br+=4){const sn=Qr[qr],hn=Qr[qr+1],vn=Qr[qr+2];Dr[Br]=sn|255,Dr[Br+1]=sn<<24|hn>>>8|255,Dr[Br+2]=hn<<16|vn>>>16|255,Dr[Br+3]=vn<<8|255}for(let sn=qr*4,hn=Rr.length;sn<hn;sn+=3)Dr[Br++]=Rr[sn]<<24|Rr[sn+1]<<16|Rr[sn+2]<<8|255}return{srcPos:kr,destPos:Br}}function wr(Rr,kr){if(vr.FeatureTest.isLittleEndian)for(let Dr=0,Br=Rr.length;Dr<Br;Dr++)kr[Dr]=Rr[Dr]*65793|4278190080;else for(let Dr=0,Br=Rr.length;Dr<Br;Dr++)kr[Dr]=Rr[Dr]*16843008|255}},(mr,hr)=>{Object.defineProperty(hr,"__esModule",{value:!0}),hr.GlobalWorkerOptions=void 0;const gr=Object.create(null);hr.GlobalWorkerOptions=gr,gr.workerPort=null,gr.workerSrc=""},(mr,hr,gr)=>{Object.defineProperty(hr,"__esModule",{value:!0}),hr.MessageHandler=void 0;var vr=gr(1);const xr={UNKNOWN:0,DATA:1,ERROR:2},Er={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Cr(Rr){switch(Rr instanceof Error||typeof Rr=="object"&&Rr!==null||(0,vr.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),Rr.name){case"AbortException":return new vr.AbortException(Rr.message);case"MissingPDFException":return new vr.MissingPDFException(Rr.message);case"PasswordException":return new vr.PasswordException(Rr.message,Rr.code);case"UnexpectedResponseException":return new vr.UnexpectedResponseException(Rr.message,Rr.status);case"UnknownErrorException":return new vr.UnknownErrorException(Rr.message,Rr.details);default:return new vr.UnknownErrorException(Rr.message,Rr.toString())}}class wr{constructor(kr,Dr,Br){this.sourceName=kr,this.targetName=Dr,this.comObj=Br,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=Hr=>{const Gr=Hr.data;if(Gr.targetName!==this.sourceName)return;if(Gr.stream){this.#t(Gr);return}if(Gr.callback){const zr=Gr.callbackId,Qr=this.callbackCapabilities[zr];if(!Qr)throw new Error(`Cannot resolve callback ${zr}`);if(delete this.callbackCapabilities[zr],Gr.callback===xr.DATA)Qr.resolve(Gr.data);else if(Gr.callback===xr.ERROR)Qr.reject(Cr(Gr.reason));else throw new Error("Unexpected callback case");return}const qr=this.actionHandler[Gr.action];if(!qr)throw new Error(`Unknown action from worker: ${Gr.action}`);if(Gr.callbackId){const zr=this.sourceName,Qr=Gr.sourceName;new Promise(function(sn){sn(qr(Gr.data))}).then(function(sn){Br.postMessage({sourceName:zr,targetName:Qr,callback:xr.DATA,callbackId:Gr.callbackId,data:sn})},function(sn){Br.postMessage({sourceName:zr,targetName:Qr,callback:xr.ERROR,callbackId:Gr.callbackId,reason:Cr(sn)})});return}if(Gr.streamId){this.#e(Gr);return}qr(Gr.data)},Br.addEventListener("message",this._onComObjOnMessage)}on(kr,Dr){const Br=this.actionHandler;if(Br[kr])throw new Error(`There is already an actionName called "${kr}"`);Br[kr]=Dr}send(kr,Dr,Br){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:kr,data:Dr},Br)}sendWithPromise(kr,Dr,Br){const Hr=this.callbackId++,Gr=new vr.PromiseCapability;this.callbackCapabilities[Hr]=Gr;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:kr,callbackId:Hr,data:Dr},Br)}catch(qr){Gr.reject(qr)}return Gr.promise}sendWithStream(kr,Dr,Br,Hr){const Gr=this.streamId++,qr=this.sourceName,zr=this.targetName,Qr=this.comObj;return new ReadableStream({start:sn=>{const hn=new vr.PromiseCapability;return this.streamControllers[Gr]={controller:sn,startCall:hn,pullCall:null,cancelCall:null,isClosed:!1},Qr.postMessage({sourceName:qr,targetName:zr,action:kr,streamId:Gr,data:Dr,desiredSize:sn.desiredSize},Hr),hn.promise},pull:sn=>{const hn=new vr.PromiseCapability;return this.streamControllers[Gr].pullCall=hn,Qr.postMessage({sourceName:qr,targetName:zr,stream:Er.PULL,streamId:Gr,desiredSize:sn.desiredSize}),hn.promise},cancel:sn=>{(0,vr.assert)(sn instanceof Error,"cancel must have a valid reason");const hn=new vr.PromiseCapability;return this.streamControllers[Gr].cancelCall=hn,this.streamControllers[Gr].isClosed=!0,Qr.postMessage({sourceName:qr,targetName:zr,stream:Er.CANCEL,streamId:Gr,reason:Cr(sn)}),hn.promise}},Br)}#e(kr){const Dr=kr.streamId,Br=this.sourceName,Hr=kr.sourceName,Gr=this.comObj,qr=this,zr=this.actionHandler[kr.action],Qr={enqueue(sn,hn=1,vn){if(this.isCancelled)return;const yn=this.desiredSize;this.desiredSize-=hn,yn>0&&this.desiredSize<=0&&(this.sinkCapability=new vr.PromiseCapability,this.ready=this.sinkCapability.promise),Gr.postMessage({sourceName:Br,targetName:Hr,stream:Er.ENQUEUE,streamId:Dr,chunk:sn},vn)},close(){this.isCancelled||(this.isCancelled=!0,Gr.postMessage({sourceName:Br,targetName:Hr,stream:Er.CLOSE,streamId:Dr}),delete qr.streamSinks[Dr])},error(sn){(0,vr.assert)(sn instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,Gr.postMessage({sourceName:Br,targetName:Hr,stream:Er.ERROR,streamId:Dr,reason:Cr(sn)}))},sinkCapability:new vr.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:kr.desiredSize,ready:null};Qr.sinkCapability.resolve(),Qr.ready=Qr.sinkCapability.promise,this.streamSinks[Dr]=Qr,new Promise(function(sn){sn(zr(kr.data,Qr))}).then(function(){Gr.postMessage({sourceName:Br,targetName:Hr,stream:Er.START_COMPLETE,streamId:Dr,success:!0})},function(sn){Gr.postMessage({sourceName:Br,targetName:Hr,stream:Er.START_COMPLETE,streamId:Dr,reason:Cr(sn)})})}#t(kr){const Dr=kr.streamId,Br=this.sourceName,Hr=kr.sourceName,Gr=this.comObj,qr=this.streamControllers[Dr],zr=this.streamSinks[Dr];switch(kr.stream){case Er.START_COMPLETE:kr.success?qr.startCall.resolve():qr.startCall.reject(Cr(kr.reason));break;case Er.PULL_COMPLETE:kr.success?qr.pullCall.resolve():qr.pullCall.reject(Cr(kr.reason));break;case Er.PULL:if(!zr){Gr.postMessage({sourceName:Br,targetName:Hr,stream:Er.PULL_COMPLETE,streamId:Dr,success:!0});break}zr.desiredSize<=0&&kr.desiredSize>0&&zr.sinkCapability.resolve(),zr.desiredSize=kr.desiredSize,new Promise(function(Qr){Qr(zr.onPull?.())}).then(function(){Gr.postMessage({sourceName:Br,targetName:Hr,stream:Er.PULL_COMPLETE,streamId:Dr,success:!0})},function(Qr){Gr.postMessage({sourceName:Br,targetName:Hr,stream:Er.PULL_COMPLETE,streamId:Dr,reason:Cr(Qr)})});break;case Er.ENQUEUE:if((0,vr.assert)(qr,"enqueue should have stream controller"),qr.isClosed)break;qr.controller.enqueue(kr.chunk);break;case Er.CLOSE:if((0,vr.assert)(qr,"close should have stream controller"),qr.isClosed)break;qr.isClosed=!0,qr.controller.close(),this.#r(qr,Dr);break;case Er.ERROR:(0,vr.assert)(qr,"error should have stream controller"),qr.controller.error(Cr(kr.reason)),this.#r(qr,Dr);break;case Er.CANCEL_COMPLETE:kr.success?qr.cancelCall.resolve():qr.cancelCall.reject(Cr(kr.reason)),this.#r(qr,Dr);break;case Er.CANCEL:if(!zr)break;new Promise(function(Qr){Qr(zr.onCancel?.(Cr(kr.reason)))}).then(function(){Gr.postMessage({sourceName:Br,targetName:Hr,stream:Er.CANCEL_COMPLETE,streamId:Dr,success:!0})},function(Qr){Gr.postMessage({sourceName:Br,targetName:Hr,stream:Er.CANCEL_COMPLETE,streamId:Dr,reason:Cr(Qr)})}),zr.sinkCapability.reject(Cr(kr.reason)),zr.isCancelled=!0,delete this.streamSinks[Dr];break;default:throw new Error("Unexpected stream case")}}async#r(kr,Dr){await Promise.allSettled([kr.startCall?.promise,kr.pullCall?.promise,kr.cancelCall?.promise]),delete this.streamControllers[Dr]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}hr.MessageHandler=wr},(mr,hr,gr)=>{Object.defineProperty(hr,"__esModule",{value:!0}),hr.Metadata=void 0;var vr=gr(1);class xr{#e;#t;constructor({parsedData:Cr,rawData:wr}){this.#e=Cr,this.#t=wr}getRaw(){return this.#t}get(Cr){return this.#e.get(Cr)??null}getAll(){return(0,vr.objectFromMap)(this.#e)}has(Cr){return this.#e.has(Cr)}}hr.Metadata=xr},(mr,hr,gr)=>{Object.defineProperty(hr,"__esModule",{value:!0}),hr.OptionalContentConfig=void 0;var vr=gr(1),xr=gr(8);const Er=Symbol("INTERNAL");class Cr{#e=!0;constructor(kr,Dr){this.name=kr,this.intent=Dr}get visible(){return this.#e}_setVisible(kr,Dr){kr!==Er&&(0,vr.unreachable)("Internal method `_setVisible` called."),this.#e=Dr}}class wr{#e=null;#t=new Map;#r=null;#n=null;constructor(kr){if(this.name=null,this.creator=null,kr!==null){this.name=kr.name,this.creator=kr.creator,this.#n=kr.order;for(const Dr of kr.groups)this.#t.set(Dr.id,new Cr(Dr.name,Dr.intent));if(kr.baseState==="OFF")for(const Dr of this.#t.values())Dr._setVisible(Er,!1);for(const Dr of kr.on)this.#t.get(Dr)._setVisible(Er,!0);for(const Dr of kr.off)this.#t.get(Dr)._setVisible(Er,!1);this.#r=this.getHash()}}#o(kr){const Dr=kr.length;if(Dr<2)return!0;const Br=kr[0];for(let Hr=1;Hr<Dr;Hr++){const Gr=kr[Hr];let qr;if(Array.isArray(Gr))qr=this.#o(Gr);else if(this.#t.has(Gr))qr=this.#t.get(Gr).visible;else return(0,vr.warn)(`Optional content group not found: ${Gr}`),!0;switch(Br){case"And":if(!qr)return!1;break;case"Or":if(qr)return!0;break;case"Not":return!qr;default:return!0}}return Br==="And"}isVisible(kr){if(this.#t.size===0)return!0;if(!kr)return(0,vr.warn)("Optional content group not defined."),!0;if(kr.type==="OCG")return this.#t.has(kr.id)?this.#t.get(kr.id).visible:((0,vr.warn)(`Optional content group not found: ${kr.id}`),!0);if(kr.type==="OCMD"){if(kr.expression)return this.#o(kr.expression);if(!kr.policy||kr.policy==="AnyOn"){for(const Dr of kr.ids){if(!this.#t.has(Dr))return(0,vr.warn)(`Optional content group not found: ${Dr}`),!0;if(this.#t.get(Dr).visible)return!0}return!1}else if(kr.policy==="AllOn"){for(const Dr of kr.ids){if(!this.#t.has(Dr))return(0,vr.warn)(`Optional content group not found: ${Dr}`),!0;if(!this.#t.get(Dr).visible)return!1}return!0}else if(kr.policy==="AnyOff"){for(const Dr of kr.ids){if(!this.#t.has(Dr))return(0,vr.warn)(`Optional content group not found: ${Dr}`),!0;if(!this.#t.get(Dr).visible)return!0}return!1}else if(kr.policy==="AllOff"){for(const Dr of kr.ids){if(!this.#t.has(Dr))return(0,vr.warn)(`Optional content group not found: ${Dr}`),!0;if(this.#t.get(Dr).visible)return!1}return!0}return(0,vr.warn)(`Unknown optional content policy ${kr.policy}.`),!0}return(0,vr.warn)(`Unknown group type ${kr.type}.`),!0}setVisibility(kr,Dr=!0){if(!this.#t.has(kr)){(0,vr.warn)(`Optional content group not found: ${kr}`);return}this.#t.get(kr)._setVisible(Er,!!Dr),this.#e=null}get hasInitialVisibility(){return this.#r===null||this.getHash()===this.#r}getOrder(){return this.#t.size?this.#n?this.#n.slice():[...this.#t.keys()]:null}getGroups(){return this.#t.size>0?(0,vr.objectFromMap)(this.#t):null}getGroup(kr){return this.#t.get(kr)||null}getHash(){if(this.#e!==null)return this.#e;const kr=new xr.MurmurHash3_64;for(const[Dr,Br]of this.#t)kr.update(`${Dr}:${Br.visible}`);return this.#e=kr.hexdigest()}}hr.OptionalContentConfig=wr},(mr,hr,gr)=>{Object.defineProperty(hr,"__esModule",{value:!0}),hr.PDFDataTransportStream=void 0;var vr=gr(1),xr=gr(6);class Er{constructor({length:kr,initialData:Dr,progressiveDone:Br=!1,contentDispositionFilename:Hr=null,disableRange:Gr=!1,disableStream:qr=!1},zr){if((0,vr.assert)(zr,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=Br,this._contentDispositionFilename=Hr,Dr?.length>0){const Qr=Dr instanceof Uint8Array&&Dr.byteLength===Dr.buffer.byteLength?Dr.buffer:new Uint8Array(Dr).buffer;this._queuedChunks.push(Qr)}this._pdfDataRangeTransport=zr,this._isStreamingSupported=!qr,this._isRangeSupported=!Gr,this._contentLength=kr,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((Qr,sn)=>{this._onReceiveData({begin:Qr,chunk:sn})}),this._pdfDataRangeTransport.addProgressListener((Qr,sn)=>{this._onProgress({loaded:Qr,total:sn})}),this._pdfDataRangeTransport.addProgressiveReadListener(Qr=>{this._onReceiveData({chunk:Qr})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:kr,chunk:Dr}){const Br=Dr instanceof Uint8Array&&Dr.byteLength===Dr.buffer.byteLength?Dr.buffer:new Uint8Array(Dr).buffer;if(kr===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(Br):this._queuedChunks.push(Br);else{const Hr=this._rangeReaders.some(function(Gr){return Gr._begin!==kr?!1:(Gr._enqueue(Br),!0)});(0,vr.assert)(Hr,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(kr){kr.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:kr.loaded}):this._fullRequestReader?.onProgress?.({loaded:kr.loaded,total:kr.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(kr){const Dr=this._rangeReaders.indexOf(kr);Dr>=0&&this._rangeReaders.splice(Dr,1)}getFullReader(){(0,vr.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const kr=this._queuedChunks;return this._queuedChunks=null,new Cr(this,kr,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(kr,Dr){if(Dr<=this._progressiveDataLength)return null;const Br=new wr(this,kr,Dr);return this._pdfDataRangeTransport.requestDataRange(kr,Dr),this._rangeReaders.push(Br),Br}cancelAllRequests(kr){this._fullRequestReader?.cancel(kr);for(const Dr of this._rangeReaders.slice(0))Dr.cancel(kr);this._pdfDataRangeTransport.abort()}}hr.PDFDataTransportStream=Er;class Cr{constructor(kr,Dr,Br=!1,Hr=null){this._stream=kr,this._done=Br||!1,this._filename=(0,xr.isPdfFile)(Hr)?Hr:null,this._queuedChunks=Dr||[],this._loaded=0;for(const Gr of this._queuedChunks)this._loaded+=Gr.byteLength;this._requests=[],this._headersReady=Promise.resolve(),kr._fullRequestReader=this,this.onProgress=null}_enqueue(kr){this._done||(this._requests.length>0?this._requests.shift().resolve({value:kr,done:!1}):this._queuedChunks.push(kr),this._loaded+=kr.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const kr=new vr.PromiseCapability;return this._requests.push(kr),kr.promise}cancel(kr){this._done=!0;for(const Dr of this._requests)Dr.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class wr{constructor(kr,Dr,Br){this._stream=kr,this._begin=Dr,this._end=Br,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(kr){if(!this._done){if(this._requests.length===0)this._queuedChunk=kr;else{this._requests.shift().resolve({value:kr,done:!1});for(const Br of this._requests)Br.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const Dr=this._queuedChunk;return this._queuedChunk=null,{value:Dr,done:!1}}if(this._done)return{value:void 0,done:!0};const kr=new vr.PromiseCapability;return this._requests.push(kr),kr.promise}cancel(kr){this._done=!0;for(const Dr of this._requests)Dr.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(mr,hr,gr)=>{Object.defineProperty(hr,"__esModule",{value:!0}),hr.PDFFetchStream=void 0;var vr=gr(1),xr=gr(20);function Er(Br,Hr,Gr){return{method:"GET",headers:Br,signal:Gr.signal,mode:"cors",credentials:Hr?"include":"same-origin",redirect:"follow"}}function Cr(Br){const Hr=new Headers;for(const Gr in Br){const qr=Br[Gr];qr!==void 0&&Hr.append(Gr,qr)}return Hr}function wr(Br){return Br instanceof Uint8Array?Br.buffer:Br instanceof ArrayBuffer?Br:((0,vr.warn)(`getArrayBuffer - unexpected data format: ${Br}`),new Uint8Array(Br).buffer)}class Rr{constructor(Hr){this.source=Hr,this.isHttp=/^https?:/i.test(Hr.url),this.httpHeaders=this.isHttp&&Hr.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,vr.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new kr(this),this._fullRequestReader}getRangeReader(Hr,Gr){if(Gr<=this._progressiveDataLength)return null;const qr=new Dr(this,Hr,Gr);return this._rangeRequestReaders.push(qr),qr}cancelAllRequests(Hr){this._fullRequestReader?.cancel(Hr);for(const Gr of this._rangeRequestReaders.slice(0))Gr.cancel(Hr)}}hr.PDFFetchStream=Rr;class kr{constructor(Hr){this._stream=Hr,this._reader=null,this._loaded=0,this._filename=null;const Gr=Hr.source;this._withCredentials=Gr.withCredentials||!1,this._contentLength=Gr.length,this._headersCapability=new vr.PromiseCapability,this._disableRange=Gr.disableRange||!1,this._rangeChunkSize=Gr.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!Gr.disableStream,this._isRangeSupported=!Gr.disableRange,this._headers=Cr(this._stream.httpHeaders);const qr=Gr.url;fetch(qr,Er(this._headers,this._withCredentials,this._abortController)).then(zr=>{if(!(0,xr.validateResponseStatus)(zr.status))throw(0,xr.createResponseStatusError)(zr.status,qr);this._reader=zr.body.getReader(),this._headersCapability.resolve();const Qr=vn=>zr.headers.get(vn),{allowRangeRequests:sn,suggestedLength:hn}=(0,xr.validateRangeRequestCapabilities)({getResponseHeader:Qr,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=sn,this._contentLength=hn||this._contentLength,this._filename=(0,xr.extractFilenameFromHeader)(Qr),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new vr.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:Hr,done:Gr}=await this._reader.read();return Gr?{value:Hr,done:Gr}:(this._loaded+=Hr.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:wr(Hr),done:!1})}cancel(Hr){this._reader?.cancel(Hr),this._abortController.abort()}}class Dr{constructor(Hr,Gr,qr){this._stream=Hr,this._reader=null,this._loaded=0;const zr=Hr.source;this._withCredentials=zr.withCredentials||!1,this._readCapability=new vr.PromiseCapability,this._isStreamingSupported=!zr.disableStream,this._abortController=new AbortController,this._headers=Cr(this._stream.httpHeaders),this._headers.append("Range",`bytes=${Gr}-${qr-1}`);const Qr=zr.url;fetch(Qr,Er(this._headers,this._withCredentials,this._abortController)).then(sn=>{if(!(0,xr.validateResponseStatus)(sn.status))throw(0,xr.createResponseStatusError)(sn.status,Qr);this._readCapability.resolve(),this._reader=sn.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:Hr,done:Gr}=await this._reader.read();return Gr?{value:Hr,done:Gr}:(this._loaded+=Hr.byteLength,this.onProgress?.({loaded:this._loaded}),{value:wr(Hr),done:!1})}cancel(Hr){this._reader?.cancel(Hr),this._abortController.abort()}}},(mr,hr,gr)=>{Object.defineProperty(hr,"__esModule",{value:!0}),hr.createResponseStatusError=Rr,hr.extractFilenameFromHeader=wr,hr.validateRangeRequestCapabilities=Cr,hr.validateResponseStatus=kr;var vr=gr(1),xr=gr(21),Er=gr(6);function Cr({getResponseHeader:Dr,isHttp:Br,rangeChunkSize:Hr,disableRange:Gr}){const qr={allowRangeRequests:!1,suggestedLength:void 0},zr=parseInt(Dr("Content-Length"),10);return!Number.isInteger(zr)||(qr.suggestedLength=zr,zr<=2*Hr)||Gr||!Br||Dr("Accept-Ranges")!=="bytes"||(Dr("Content-Encoding")||"identity")!=="identity"||(qr.allowRangeRequests=!0),qr}function wr(Dr){const Br=Dr("Content-Disposition");if(Br){let Hr=(0,xr.getFilenameFromContentDispositionHeader)(Br);if(Hr.includes("%"))try{Hr=decodeURIComponent(Hr)}catch{}if((0,Er.isPdfFile)(Hr))return Hr}return null}function Rr(Dr,Br){return Dr===404||Dr===0&&Br.startsWith("file:")?new vr.MissingPDFException('Missing PDF "'+Br+'".'):new vr.UnexpectedResponseException(`Unexpected server response (${Dr}) while retrieving PDF "${Br}".`,Dr)}function kr(Dr){return Dr===200||Dr===206}},(mr,hr,gr)=>{Object.defineProperty(hr,"__esModule",{value:!0}),hr.getFilenameFromContentDispositionHeader=xr;var vr=gr(1);function xr(Er){let Cr=!0,wr=Rr("filename\\*","i").exec(Er);if(wr){wr=wr[1];let zr=Hr(wr);return zr=unescape(zr),zr=Gr(zr),zr=qr(zr),Dr(zr)}if(wr=Br(Er),wr){const zr=qr(wr);return Dr(zr)}if(wr=Rr("filename","i").exec(Er),wr){wr=wr[1];let zr=Hr(wr);return zr=qr(zr),Dr(zr)}function Rr(zr,Qr){return new RegExp("(?:^|;)\\s*"+zr+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',Qr)}function kr(zr,Qr){if(zr){if(!/^[\x00-\xFF]+$/.test(Qr))return Qr;try{const sn=new TextDecoder(zr,{fatal:!0}),hn=(0,vr.stringToBytes)(Qr);Qr=sn.decode(hn),Cr=!1}catch{}}return Qr}function Dr(zr){return Cr&&/[\x80-\xff]/.test(zr)&&(zr=kr("utf-8",zr),Cr&&(zr=kr("iso-8859-1",zr))),zr}function Br(zr){const Qr=[];let sn;const hn=Rr("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(sn=hn.exec(zr))!==null;){let[,yn,gn,bn]=sn;if(yn=parseInt(yn,10),yn in Qr){if(yn===0)break;continue}Qr[yn]=[gn,bn]}const vn=[];for(let yn=0;yn<Qr.length&&yn in Qr;++yn){let[gn,bn]=Qr[yn];bn=Hr(bn),gn&&(bn=unescape(bn),yn===0&&(bn=Gr(bn))),vn.push(bn)}return vn.join("")}function Hr(zr){if(zr.startsWith('"')){const Qr=zr.slice(1).split('\\"');for(let sn=0;sn<Qr.length;++sn){const hn=Qr[sn].indexOf('"');hn!==-1&&(Qr[sn]=Qr[sn].slice(0,hn),Qr.length=sn+1),Qr[sn]=Qr[sn].replaceAll(/\\(.)/g,"$1")}zr=Qr.join('"')}return zr}function Gr(zr){const Qr=zr.indexOf("'");if(Qr===-1)return zr;const sn=zr.slice(0,Qr),vn=zr.slice(Qr+1).replace(/^[^']*'/,"");return kr(sn,vn)}function qr(zr){return!zr.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(zr)?zr:zr.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(Qr,sn,hn,vn){if(hn==="q"||hn==="Q")return vn=vn.replaceAll("_"," "),vn=vn.replaceAll(/=([0-9a-fA-F]{2})/g,function(yn,gn){return String.fromCharCode(parseInt(gn,16))}),kr(sn,vn);try{vn=atob(vn)}catch{}return kr(sn,vn)})}return""}},(mr,hr,gr)=>{Object.defineProperty(hr,"__esModule",{value:!0}),hr.PDFNetworkStream=void 0;var vr=gr(1),xr=gr(20);const Er=200,Cr=206;function wr(Hr){const Gr=Hr.response;return typeof Gr!="string"?Gr:(0,vr.stringToBytes)(Gr).buffer}class Rr{constructor(Gr,qr={}){this.url=Gr,this.isHttp=/^https?:/i.test(Gr),this.httpHeaders=this.isHttp&&qr.httpHeaders||Object.create(null),this.withCredentials=qr.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(Gr,qr,zr){const Qr={begin:Gr,end:qr};for(const sn in zr)Qr[sn]=zr[sn];return this.request(Qr)}requestFull(Gr){return this.request(Gr)}request(Gr){const qr=new XMLHttpRequest,zr=this.currXhrId++,Qr=this.pendingRequests[zr]={xhr:qr};qr.open("GET",this.url),qr.withCredentials=this.withCredentials;for(const sn in this.httpHeaders){const hn=this.httpHeaders[sn];hn!==void 0&&qr.setRequestHeader(sn,hn)}return this.isHttp&&"begin"in Gr&&"end"in Gr?(qr.setRequestHeader("Range",`bytes=${Gr.begin}-${Gr.end-1}`),Qr.expectedStatus=Cr):Qr.expectedStatus=Er,qr.responseType="arraybuffer",Gr.onError&&(qr.onerror=function(sn){Gr.onError(qr.status)}),qr.onreadystatechange=this.onStateChange.bind(this,zr),qr.onprogress=this.onProgress.bind(this,zr),Qr.onHeadersReceived=Gr.onHeadersReceived,Qr.onDone=Gr.onDone,Qr.onError=Gr.onError,Qr.onProgress=Gr.onProgress,qr.send(null),zr}onProgress(Gr,qr){const zr=this.pendingRequests[Gr];zr&&zr.onProgress?.(qr)}onStateChange(Gr,qr){const zr=this.pendingRequests[Gr];if(!zr)return;const Qr=zr.xhr;if(Qr.readyState>=2&&zr.onHeadersReceived&&(zr.onHeadersReceived(),delete zr.onHeadersReceived),Qr.readyState!==4||!(Gr in this.pendingRequests))return;if(delete this.pendingRequests[Gr],Qr.status===0&&this.isHttp){zr.onError?.(Qr.status);return}const sn=Qr.status||Er;if(!(sn===Er&&zr.expectedStatus===Cr)&&sn!==zr.expectedStatus){zr.onError?.(Qr.status);return}const vn=wr(Qr);if(sn===Cr){const yn=Qr.getResponseHeader("Content-Range"),gn=/bytes (\d+)-(\d+)\/(\d+)/.exec(yn);zr.onDone({begin:parseInt(gn[1],10),chunk:vn})}else vn?zr.onDone({begin:0,chunk:vn}):zr.onError?.(Qr.status)}getRequestXhr(Gr){return this.pendingRequests[Gr].xhr}isPendingRequest(Gr){return Gr in this.pendingRequests}abortRequest(Gr){const qr=this.pendingRequests[Gr].xhr;delete this.pendingRequests[Gr],qr.abort()}}class kr{constructor(Gr){this._source=Gr,this._manager=new Rr(Gr.url,{httpHeaders:Gr.httpHeaders,withCredentials:Gr.withCredentials}),this._rangeChunkSize=Gr.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(Gr){const qr=this._rangeRequestReaders.indexOf(Gr);qr>=0&&this._rangeRequestReaders.splice(qr,1)}getFullReader(){return(0,vr.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Dr(this._manager,this._source),this._fullRequestReader}getRangeReader(Gr,qr){const zr=new Br(this._manager,Gr,qr);return zr.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(zr),zr}cancelAllRequests(Gr){this._fullRequestReader?.cancel(Gr);for(const qr of this._rangeRequestReaders.slice(0))qr.cancel(Gr)}}hr.PDFNetworkStream=kr;class Dr{constructor(Gr,qr){this._manager=Gr;const zr={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=qr.url,this._fullRequestId=Gr.requestFull(zr),this._headersReceivedCapability=new vr.PromiseCapability,this._disableRange=qr.disableRange||!1,this._contentLength=qr.length,this._rangeChunkSize=qr.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const Gr=this._fullRequestId,qr=this._manager.getRequestXhr(Gr),zr=hn=>qr.getResponseHeader(hn),{allowRangeRequests:Qr,suggestedLength:sn}=(0,xr.validateRangeRequestCapabilities)({getResponseHeader:zr,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});Qr&&(this._isRangeSupported=!0),this._contentLength=sn||this._contentLength,this._filename=(0,xr.extractFilenameFromHeader)(zr),this._isRangeSupported&&this._manager.abortRequest(Gr),this._headersReceivedCapability.resolve()}_onDone(Gr){if(Gr&&(this._requests.length>0?this._requests.shift().resolve({value:Gr.chunk,done:!1}):this._cachedChunks.push(Gr.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const qr of this._requests)qr.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(Gr){this._storedError=(0,xr.createResponseStatusError)(Gr,this._url),this._headersReceivedCapability.reject(this._storedError);for(const qr of this._requests)qr.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(Gr){this.onProgress?.({loaded:Gr.loaded,total:Gr.lengthComputable?Gr.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const Gr=new vr.PromiseCapability;return this._requests.push(Gr),Gr.promise}cancel(Gr){this._done=!0,this._headersReceivedCapability.reject(Gr);for(const qr of this._requests)qr.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Br{constructor(Gr,qr,zr){this._manager=Gr;const Qr={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=Gr.url,this._requestId=Gr.requestRange(qr,zr,Qr),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(Gr){const qr=Gr.chunk;this._requests.length>0?this._requests.shift().resolve({value:qr,done:!1}):this._queuedChunk=qr,this._done=!0;for(const zr of this._requests)zr.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(Gr){this._storedError=(0,xr.createResponseStatusError)(Gr,this._url);for(const qr of this._requests)qr.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(Gr){this.isStreamingSupported||this.onProgress?.({loaded:Gr.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const qr=this._queuedChunk;return this._queuedChunk=null,{value:qr,done:!1}}if(this._done)return{value:void 0,done:!0};const Gr=new vr.PromiseCapability;return this._requests.push(Gr),Gr.promise}cancel(Gr){this._done=!0;for(const qr of this._requests)qr.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(mr,hr,gr)=>{Object.defineProperty(hr,"__esModule",{value:!0}),hr.PDFNodeStream=void 0;var vr=gr(1),xr=gr(20);const Er=/^file:\/\/\/[a-zA-Z]:\//;function Cr(zr){const Qr=require$$2,sn=Qr.parse(zr);return sn.protocol==="file:"||sn.host?sn:/^[a-z]:[/\\]/i.test(zr)?Qr.parse(`file:///${zr}`):(sn.host||(sn.protocol="file:"),sn)}class wr{constructor(Qr){this.source=Qr,this.url=Cr(Qr.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&Qr.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,vr.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new Gr(this):new Br(this),this._fullRequestReader}getRangeReader(Qr,sn){if(sn<=this._progressiveDataLength)return null;const hn=this.isFsUrl?new qr(this,Qr,sn):new Hr(this,Qr,sn);return this._rangeRequestReaders.push(hn),hn}cancelAllRequests(Qr){this._fullRequestReader?.cancel(Qr);for(const sn of this._rangeRequestReaders.slice(0))sn.cancel(Qr)}}hr.PDFNodeStream=wr;class Rr{constructor(Qr){this._url=Qr.url,this._done=!1,this._storedError=null,this.onProgress=null;const sn=Qr.source;this._contentLength=sn.length,this._loaded=0,this._filename=null,this._disableRange=sn.disableRange||!1,this._rangeChunkSize=sn.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!sn.disableStream,this._isRangeSupported=!sn.disableRange,this._readableStream=null,this._readCapability=new vr.PromiseCapability,this._headersCapability=new vr.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const Qr=this._readableStream.read();return Qr===null?(this._readCapability=new vr.PromiseCapability,this.read()):(this._loaded+=Qr.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(Qr).buffer,done:!1})}cancel(Qr){if(!this._readableStream){this._error(Qr);return}this._readableStream.destroy(Qr)}_error(Qr){this._storedError=Qr,this._readCapability.resolve()}_setReadableStream(Qr){this._readableStream=Qr,Qr.on("readable",()=>{this._readCapability.resolve()}),Qr.on("end",()=>{Qr.destroy(),this._done=!0,this._readCapability.resolve()}),Qr.on("error",sn=>{this._error(sn)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new vr.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class kr{constructor(Qr){this._url=Qr.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new vr.PromiseCapability;const sn=Qr.source;this._isStreamingSupported=!sn.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const Qr=this._readableStream.read();return Qr===null?(this._readCapability=new vr.PromiseCapability,this.read()):(this._loaded+=Qr.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(Qr).buffer,done:!1})}cancel(Qr){if(!this._readableStream){this._error(Qr);return}this._readableStream.destroy(Qr)}_error(Qr){this._storedError=Qr,this._readCapability.resolve()}_setReadableStream(Qr){this._readableStream=Qr,Qr.on("readable",()=>{this._readCapability.resolve()}),Qr.on("end",()=>{Qr.destroy(),this._done=!0,this._readCapability.resolve()}),Qr.on("error",sn=>{this._error(sn)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function Dr(zr,Qr){return{protocol:zr.protocol,auth:zr.auth,host:zr.hostname,port:zr.port,path:zr.path,method:"GET",headers:Qr}}class Br extends Rr{constructor(Qr){super(Qr);const sn=hn=>{if(hn.statusCode===404){const bn=new vr.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=bn,this._headersCapability.reject(bn);return}this._headersCapability.resolve(),this._setReadableStream(hn);const vn=bn=>this._readableStream.headers[bn.toLowerCase()],{allowRangeRequests:yn,suggestedLength:gn}=(0,xr.validateRangeRequestCapabilities)({getResponseHeader:vn,isHttp:Qr.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=yn,this._contentLength=gn||this._contentLength,this._filename=(0,xr.extractFilenameFromHeader)(vn)};if(this._request=null,this._url.protocol==="http:"){const hn=require$$2;this._request=hn.request(Dr(this._url,Qr.httpHeaders),sn)}else{const hn=require$$2;this._request=hn.request(Dr(this._url,Qr.httpHeaders),sn)}this._request.on("error",hn=>{this._storedError=hn,this._headersCapability.reject(hn)}),this._request.end()}}class Hr extends kr{constructor(Qr,sn,hn){super(Qr),this._httpHeaders={};for(const yn in Qr.httpHeaders){const gn=Qr.httpHeaders[yn];gn!==void 0&&(this._httpHeaders[yn]=gn)}this._httpHeaders.Range=`bytes=${sn}-${hn-1}`;const vn=yn=>{if(yn.statusCode===404){const gn=new vr.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=gn;return}this._setReadableStream(yn)};if(this._request=null,this._url.protocol==="http:"){const yn=require$$2;this._request=yn.request(Dr(this._url,this._httpHeaders),vn)}else{const yn=require$$2;this._request=yn.request(Dr(this._url,this._httpHeaders),vn)}this._request.on("error",yn=>{this._storedError=yn}),this._request.end()}}class Gr extends Rr{constructor(Qr){super(Qr);let sn=decodeURIComponent(this._url.path);Er.test(this._url.href)&&(sn=sn.replace(/^\//,""));const hn=require$$2;hn.lstat(sn,(vn,yn)=>{if(vn){vn.code==="ENOENT"&&(vn=new vr.MissingPDFException(`Missing PDF "${sn}".`)),this._storedError=vn,this._headersCapability.reject(vn);return}this._contentLength=yn.size,this._setReadableStream(hn.createReadStream(sn)),this._headersCapability.resolve()})}}class qr extends kr{constructor(Qr,sn,hn){super(Qr);let vn=decodeURIComponent(this._url.path);Er.test(this._url.href)&&(vn=vn.replace(/^\//,""));const yn=require$$2;this._setReadableStream(yn.createReadStream(vn,{start:sn,end:hn-1}))}}},(mr,hr,gr)=>{Object.defineProperty(hr,"__esModule",{value:!0}),hr.SVGGraphics=void 0;var vr=gr(6),xr=gr(1);const Er={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},Cr="http://www.w3.org/XML/1998/namespace",wr="http://www.w3.org/1999/xlink",Rr=["butt","round","square"],kr=["miter","round","bevel"],Dr=function(yn,gn="",bn=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!bn)return URL.createObjectURL(new Blob([yn],{type:gn}));const xn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let $n=`data:${gn};base64,`;for(let Sn=0,Cn=yn.length;Sn<Cn;Sn+=3){const Rn=yn[Sn]&255,Bn=yn[Sn+1]&255,Fn=yn[Sn+2]&255,Hn=Rn>>2,Gn=(Rn&3)<<4|Bn>>4,qn=Sn+1<Cn?(Bn&15)<<2|Fn>>6:64,On=Sn+2<Cn?Fn&63:64;$n+=xn[Hn]+xn[Gn]+xn[qn]+xn[On]}return $n},Br=function(){const yn=new Uint8Array([137,80,78,71,13,10,26,10]),gn=12,bn=new Int32Array(256);for(let Fn=0;Fn<256;Fn++){let Hn=Fn;for(let Gn=0;Gn<8;Gn++)Hn=Hn&1?3988292384^Hn>>1&2147483647:Hn>>1&2147483647;bn[Fn]=Hn}function xn(Fn,Hn,Gn){let qn=-1;for(let On=Hn;On<Gn;On++){const wn=(qn^Fn[On])&255,_n=bn[wn];qn=qn>>>8^_n}return qn^-1}function $n(Fn,Hn,Gn,qn){let On=qn;const wn=Hn.length;Gn[On]=wn>>24&255,Gn[On+1]=wn>>16&255,Gn[On+2]=wn>>8&255,Gn[On+3]=wn&255,On+=4,Gn[On]=Fn.charCodeAt(0)&255,Gn[On+1]=Fn.charCodeAt(1)&255,Gn[On+2]=Fn.charCodeAt(2)&255,Gn[On+3]=Fn.charCodeAt(3)&255,On+=4,Gn.set(Hn,On),On+=Hn.length;const _n=xn(Gn,qn+4,On);Gn[On]=_n>>24&255,Gn[On+1]=_n>>16&255,Gn[On+2]=_n>>8&255,Gn[On+3]=_n&255}function Sn(Fn,Hn,Gn){let qn=1,On=0;for(let wn=Hn;wn<Gn;++wn)qn=(qn+(Fn[wn]&255))%65521,On=(On+qn)%65521;return On<<16|qn}function Cn(Fn){if(!xr.isNodeJS)return Rn(Fn);try{const Hn=parseInt(process.versions.node)>=8?Fn:Buffer.from(Fn),Gn=require$$2.deflateSync(Hn,{level:9});return Gn instanceof Uint8Array?Gn:new Uint8Array(Gn)}catch(Hn){(0,xr.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+Hn)}return Rn(Fn)}function Rn(Fn){let Hn=Fn.length;const Gn=65535,qn=Math.ceil(Hn/Gn),On=new Uint8Array(2+Hn+qn*5+4);let wn=0;On[wn++]=120,On[wn++]=156;let _n=0;for(;Hn>Gn;)On[wn++]=0,On[wn++]=255,On[wn++]=255,On[wn++]=0,On[wn++]=0,On.set(Fn.subarray(_n,_n+Gn),wn),wn+=Gn,_n+=Gn,Hn-=Gn;On[wn++]=1,On[wn++]=Hn&255,On[wn++]=Hn>>8&255,On[wn++]=~Hn&65535&255,On[wn++]=(~Hn&65535)>>8&255,On.set(Fn.subarray(_n),wn),wn+=Fn.length-_n;const Tn=Sn(Fn,0,Fn.length);return On[wn++]=Tn>>24&255,On[wn++]=Tn>>16&255,On[wn++]=Tn>>8&255,On[wn++]=Tn&255,On}function Bn(Fn,Hn,Gn,qn){const On=Fn.width,wn=Fn.height;let _n,Tn,Mn;const Ln=Fn.data;switch(Hn){case xr.ImageKind.GRAYSCALE_1BPP:Tn=0,_n=1,Mn=On+7>>3;break;case xr.ImageKind.RGB_24BPP:Tn=2,_n=8,Mn=On*3;break;case xr.ImageKind.RGBA_32BPP:Tn=6,_n=8,Mn=On*4;break;default:throw new Error("invalid format")}const jn=new Uint8Array((1+Mn)*wn);let Kn=0,Nn=0;for(let Xn=0;Xn<wn;++Xn)jn[Kn++]=0,jn.set(Ln.subarray(Nn,Nn+Mn),Kn),Nn+=Mn,Kn+=Mn;if(Hn===xr.ImageKind.GRAYSCALE_1BPP&&qn){Kn=0;for(let Xn=0;Xn<wn;Xn++){Kn++;for(let Zn=0;Zn<Mn;Zn++)jn[Kn++]^=255}}const An=new Uint8Array([On>>24&255,On>>16&255,On>>8&255,On&255,wn>>24&255,wn>>16&255,wn>>8&255,wn&255,_n,Tn,0,0,0]),kn=Cn(jn),Dn=yn.length+gn*3+An.length+kn.length,Vn=new Uint8Array(Dn);let zn=0;return Vn.set(yn,zn),zn+=yn.length,$n("IHDR",An,Vn,zn),zn+=gn+An.length,$n("IDATA",kn,Vn,zn),zn+=gn+kn.length,$n("IEND",new Uint8Array(0),Vn,zn),Dr(Vn,"image/png",Gn)}return function(Hn,Gn,qn){const On=Hn.kind===void 0?xr.ImageKind.GRAYSCALE_1BPP:Hn.kind;return Bn(Hn,On,Gn,qn)}}();class Hr{constructor(){this.fontSizeScale=1,this.fontWeight=Er.fontWeight,this.fontSize=0,this.textMatrix=xr.IDENTITY_MATRIX,this.fontMatrix=xr.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=xr.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=Er.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(gn,bn){this.x=gn,this.y=bn}}function Gr(yn){let gn=[];const bn=[];for(const xn of yn){if(xn.fn==="save"){gn.push({fnId:92,fn:"group",items:[]}),bn.push(gn),gn=gn.at(-1).items;continue}xn.fn==="restore"?gn=bn.pop():gn.push(xn)}return gn}function qr(yn){if(Number.isInteger(yn))return yn.toString();const gn=yn.toFixed(10);let bn=gn.length-1;if(gn[bn]!=="0")return gn;do bn--;while(gn[bn]==="0");return gn.substring(0,gn[bn]==="."?bn:bn+1)}function zr(yn){if(yn[4]===0&&yn[5]===0){if(yn[1]===0&&yn[2]===0)return yn[0]===1&&yn[3]===1?"":`scale(${qr(yn[0])} ${qr(yn[3])})`;if(yn[0]===yn[3]&&yn[1]===-yn[2]){const gn=Math.acos(yn[0])*180/Math.PI;return`rotate(${qr(gn)})`}}else if(yn[0]===1&&yn[1]===0&&yn[2]===0&&yn[3]===1)return`translate(${qr(yn[4])} ${qr(yn[5])})`;return`matrix(${qr(yn[0])} ${qr(yn[1])} ${qr(yn[2])} ${qr(yn[3])} ${qr(yn[4])} ${qr(yn[5])})`}let Qr=0,sn=0,hn=0;class vn{constructor(gn,bn,xn=!1){(0,vr.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new vr.DOMSVGFactory,this.current=new Hr,this.transformMatrix=xr.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=gn,this.objs=bn,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!xn,this._operatorIdMapping=[];for(const $n in xr.OPS)this._operatorIdMapping[xr.OPS[$n]]=$n}getObject(gn,bn=null){return typeof gn=="string"?gn.startsWith("g_")?this.commonObjs.get(gn):this.objs.get(gn):bn}save(){this.transformStack.push(this.transformMatrix);const gn=this.current;this.extraStack.push(gn),this.current=gn.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(gn){this.save(),this.executeOpTree(gn),this.restore()}loadDependencies(gn){const bn=gn.fnArray,xn=gn.argsArray;for(let $n=0,Sn=bn.length;$n<Sn;$n++)if(bn[$n]===xr.OPS.dependency)for(const Cn of xn[$n]){const Rn=Cn.startsWith("g_")?this.commonObjs:this.objs,Bn=new Promise(Fn=>{Rn.get(Cn,Fn)});this.current.dependencies.push(Bn)}return Promise.all(this.current.dependencies)}transform(gn,bn,xn,$n,Sn,Cn){const Rn=[gn,bn,xn,$n,Sn,Cn];this.transformMatrix=xr.Util.transform(this.transformMatrix,Rn),this.tgrp=null}getSVG(gn,bn){this.viewport=bn;const xn=this._initialize(bn);return this.loadDependencies(gn).then(()=>(this.transformMatrix=xr.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(gn)),xn))}convertOpList(gn){const bn=this._operatorIdMapping,xn=gn.argsArray,$n=gn.fnArray,Sn=[];for(let Cn=0,Rn=$n.length;Cn<Rn;Cn++){const Bn=$n[Cn];Sn.push({fnId:Bn,fn:bn[Bn],args:xn[Cn]})}return Gr(Sn)}executeOpTree(gn){for(const bn of gn){const xn=bn.fn,$n=bn.fnId,Sn=bn.args;switch($n|0){case xr.OPS.beginText:this.beginText();break;case xr.OPS.dependency:break;case xr.OPS.setLeading:this.setLeading(Sn);break;case xr.OPS.setLeadingMoveText:this.setLeadingMoveText(Sn[0],Sn[1]);break;case xr.OPS.setFont:this.setFont(Sn);break;case xr.OPS.showText:this.showText(Sn[0]);break;case xr.OPS.showSpacedText:this.showText(Sn[0]);break;case xr.OPS.endText:this.endText();break;case xr.OPS.moveText:this.moveText(Sn[0],Sn[1]);break;case xr.OPS.setCharSpacing:this.setCharSpacing(Sn[0]);break;case xr.OPS.setWordSpacing:this.setWordSpacing(Sn[0]);break;case xr.OPS.setHScale:this.setHScale(Sn[0]);break;case xr.OPS.setTextMatrix:this.setTextMatrix(Sn[0],Sn[1],Sn[2],Sn[3],Sn[4],Sn[5]);break;case xr.OPS.setTextRise:this.setTextRise(Sn[0]);break;case xr.OPS.setTextRenderingMode:this.setTextRenderingMode(Sn[0]);break;case xr.OPS.setLineWidth:this.setLineWidth(Sn[0]);break;case xr.OPS.setLineJoin:this.setLineJoin(Sn[0]);break;case xr.OPS.setLineCap:this.setLineCap(Sn[0]);break;case xr.OPS.setMiterLimit:this.setMiterLimit(Sn[0]);break;case xr.OPS.setFillRGBColor:this.setFillRGBColor(Sn[0],Sn[1],Sn[2]);break;case xr.OPS.setStrokeRGBColor:this.setStrokeRGBColor(Sn[0],Sn[1],Sn[2]);break;case xr.OPS.setStrokeColorN:this.setStrokeColorN(Sn);break;case xr.OPS.setFillColorN:this.setFillColorN(Sn);break;case xr.OPS.shadingFill:this.shadingFill(Sn[0]);break;case xr.OPS.setDash:this.setDash(Sn[0],Sn[1]);break;case xr.OPS.setRenderingIntent:this.setRenderingIntent(Sn[0]);break;case xr.OPS.setFlatness:this.setFlatness(Sn[0]);break;case xr.OPS.setGState:this.setGState(Sn[0]);break;case xr.OPS.fill:this.fill();break;case xr.OPS.eoFill:this.eoFill();break;case xr.OPS.stroke:this.stroke();break;case xr.OPS.fillStroke:this.fillStroke();break;case xr.OPS.eoFillStroke:this.eoFillStroke();break;case xr.OPS.clip:this.clip("nonzero");break;case xr.OPS.eoClip:this.clip("evenodd");break;case xr.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case xr.OPS.paintImageXObject:this.paintImageXObject(Sn[0]);break;case xr.OPS.paintInlineImageXObject:this.paintInlineImageXObject(Sn[0]);break;case xr.OPS.paintImageMaskXObject:this.paintImageMaskXObject(Sn[0]);break;case xr.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(Sn[0],Sn[1]);break;case xr.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case xr.OPS.closePath:this.closePath();break;case xr.OPS.closeStroke:this.closeStroke();break;case xr.OPS.closeFillStroke:this.closeFillStroke();break;case xr.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case xr.OPS.nextLine:this.nextLine();break;case xr.OPS.transform:this.transform(Sn[0],Sn[1],Sn[2],Sn[3],Sn[4],Sn[5]);break;case xr.OPS.constructPath:this.constructPath(Sn[0],Sn[1]);break;case xr.OPS.endPath:this.endPath();break;case 92:this.group(bn.items);break;default:(0,xr.warn)(`Unimplemented operator ${xn}`);break}}}setWordSpacing(gn){this.current.wordSpacing=gn}setCharSpacing(gn){this.current.charSpacing=gn}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(gn,bn,xn,$n,Sn,Cn){const Rn=this.current;Rn.textMatrix=Rn.lineMatrix=[gn,bn,xn,$n,Sn,Cn],Rn.textMatrixScale=Math.hypot(gn,bn),Rn.x=Rn.lineX=0,Rn.y=Rn.lineY=0,Rn.xcoords=[],Rn.ycoords=[],Rn.tspan=this.svgFactory.createElement("svg:tspan"),Rn.tspan.setAttributeNS(null,"font-family",Rn.fontFamily),Rn.tspan.setAttributeNS(null,"font-size",`${qr(Rn.fontSize)}px`),Rn.tspan.setAttributeNS(null,"y",qr(-Rn.y)),Rn.txtElement=this.svgFactory.createElement("svg:text"),Rn.txtElement.append(Rn.tspan)}beginText(){const gn=this.current;gn.x=gn.lineX=0,gn.y=gn.lineY=0,gn.textMatrix=xr.IDENTITY_MATRIX,gn.lineMatrix=xr.IDENTITY_MATRIX,gn.textMatrixScale=1,gn.tspan=this.svgFactory.createElement("svg:tspan"),gn.txtElement=this.svgFactory.createElement("svg:text"),gn.txtgrp=this.svgFactory.createElement("svg:g"),gn.xcoords=[],gn.ycoords=[]}moveText(gn,bn){const xn=this.current;xn.x=xn.lineX+=gn,xn.y=xn.lineY+=bn,xn.xcoords=[],xn.ycoords=[],xn.tspan=this.svgFactory.createElement("svg:tspan"),xn.tspan.setAttributeNS(null,"font-family",xn.fontFamily),xn.tspan.setAttributeNS(null,"font-size",`${qr(xn.fontSize)}px`),xn.tspan.setAttributeNS(null,"y",qr(-xn.y))}showText(gn){const bn=this.current,xn=bn.font,$n=bn.fontSize;if($n===0)return;const Sn=bn.fontSizeScale,Cn=bn.charSpacing,Rn=bn.wordSpacing,Bn=bn.fontDirection,Fn=bn.textHScale*Bn,Hn=xn.vertical,Gn=Hn?1:-1,qn=xn.defaultVMetrics,On=$n*bn.fontMatrix[0];let wn=0;for(const Mn of gn){if(Mn===null){wn+=Bn*Rn;continue}else if(typeof Mn=="number"){wn+=Gn*Mn*$n/1e3;continue}const Ln=(Mn.isSpace?Rn:0)+Cn,jn=Mn.fontChar;let Kn,Nn,An=Mn.width;if(Hn){let Dn;const Vn=Mn.vmetric||qn;Dn=Mn.vmetric?Vn[1]:An*.5,Dn=-Dn*On;const zn=Vn[2]*On;An=Vn?-Vn[0]:An,Kn=Dn/Sn,Nn=(wn+zn)/Sn}else Kn=wn/Sn,Nn=0;(Mn.isInFont||xn.missingFile)&&(bn.xcoords.push(bn.x+Kn),Hn&&bn.ycoords.push(-bn.y+Nn),bn.tspan.textContent+=jn);const kn=Hn?An*On-Ln*Bn:An*On+Ln*Bn;wn+=kn}bn.tspan.setAttributeNS(null,"x",bn.xcoords.map(qr).join(" ")),Hn?bn.tspan.setAttributeNS(null,"y",bn.ycoords.map(qr).join(" ")):bn.tspan.setAttributeNS(null,"y",qr(-bn.y)),Hn?bn.y-=wn:bn.x+=wn*Fn,bn.tspan.setAttributeNS(null,"font-family",bn.fontFamily),bn.tspan.setAttributeNS(null,"font-size",`${qr(bn.fontSize)}px`),bn.fontStyle!==Er.fontStyle&&bn.tspan.setAttributeNS(null,"font-style",bn.fontStyle),bn.fontWeight!==Er.fontWeight&&bn.tspan.setAttributeNS(null,"font-weight",bn.fontWeight);const _n=bn.textRenderingMode&xr.TextRenderingMode.FILL_STROKE_MASK;if(_n===xr.TextRenderingMode.FILL||_n===xr.TextRenderingMode.FILL_STROKE?(bn.fillColor!==Er.fillColor&&bn.tspan.setAttributeNS(null,"fill",bn.fillColor),bn.fillAlpha<1&&bn.tspan.setAttributeNS(null,"fill-opacity",bn.fillAlpha)):bn.textRenderingMode===xr.TextRenderingMode.ADD_TO_PATH?bn.tspan.setAttributeNS(null,"fill","transparent"):bn.tspan.setAttributeNS(null,"fill","none"),_n===xr.TextRenderingMode.STROKE||_n===xr.TextRenderingMode.FILL_STROKE){const Mn=1/(bn.textMatrixScale||1);this._setStrokeAttributes(bn.tspan,Mn)}let Tn=bn.textMatrix;bn.textRise!==0&&(Tn=Tn.slice(),Tn[5]+=bn.textRise),bn.txtElement.setAttributeNS(null,"transform",`${zr(Tn)} scale(${qr(Fn)}, -1)`),bn.txtElement.setAttributeNS(Cr,"xml:space","preserve"),bn.txtElement.append(bn.tspan),bn.txtgrp.append(bn.txtElement),this._ensureTransformGroup().append(bn.txtElement)}setLeadingMoveText(gn,bn){this.setLeading(-bn),this.moveText(gn,bn)}addFontStyle(gn){if(!gn.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const bn=Dr(gn.data,gn.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${gn.loadedName}"; src: url(${bn}); }
`}setFont(gn){const bn=this.current,xn=this.commonObjs.get(gn[0]);let $n=gn[1];bn.font=xn,this.embedFonts&&!xn.missingFile&&!this.embeddedFonts[xn.loadedName]&&(this.addFontStyle(xn),this.embeddedFonts[xn.loadedName]=xn),bn.fontMatrix=xn.fontMatrix||xr.FONT_IDENTITY_MATRIX;let Sn="normal";xn.black?Sn="900":xn.bold&&(Sn="bold");const Cn=xn.italic?"italic":"normal";$n<0?($n=-$n,bn.fontDirection=-1):bn.fontDirection=1,bn.fontSize=$n,bn.fontFamily=xn.loadedName,bn.fontWeight=Sn,bn.fontStyle=Cn,bn.tspan=this.svgFactory.createElement("svg:tspan"),bn.tspan.setAttributeNS(null,"y",qr(-bn.y)),bn.xcoords=[],bn.ycoords=[]}endText(){const gn=this.current;gn.textRenderingMode&xr.TextRenderingMode.ADD_TO_PATH_FLAG&&gn.txtElement?.hasChildNodes()&&(gn.element=gn.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(gn){gn>0&&(this.current.lineWidth=gn)}setLineCap(gn){this.current.lineCap=Rr[gn]}setLineJoin(gn){this.current.lineJoin=kr[gn]}setMiterLimit(gn){this.current.miterLimit=gn}setStrokeAlpha(gn){this.current.strokeAlpha=gn}setStrokeRGBColor(gn,bn,xn){this.current.strokeColor=xr.Util.makeHexColor(gn,bn,xn)}setFillAlpha(gn){this.current.fillAlpha=gn}setFillRGBColor(gn,bn,xn){this.current.fillColor=xr.Util.makeHexColor(gn,bn,xn),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(gn){this.current.strokeColor=this._makeColorN_Pattern(gn)}setFillColorN(gn){this.current.fillColor=this._makeColorN_Pattern(gn)}shadingFill(gn){const{width:bn,height:xn}=this.viewport,$n=xr.Util.inverseTransform(this.transformMatrix),[Sn,Cn,Rn,Bn]=xr.Util.getAxialAlignedBoundingBox([0,0,bn,xn],$n),Fn=this.svgFactory.createElement("svg:rect");Fn.setAttributeNS(null,"x",Sn),Fn.setAttributeNS(null,"y",Cn),Fn.setAttributeNS(null,"width",Rn-Sn),Fn.setAttributeNS(null,"height",Bn-Cn),Fn.setAttributeNS(null,"fill",this._makeShadingPattern(gn)),this.current.fillAlpha<1&&Fn.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(Fn)}_makeColorN_Pattern(gn){return gn[0]==="TilingPattern"?this._makeTilingPattern(gn):this._makeShadingPattern(gn)}_makeTilingPattern(gn){const bn=gn[1],xn=gn[2],$n=gn[3]||xr.IDENTITY_MATRIX,[Sn,Cn,Rn,Bn]=gn[4],Fn=gn[5],Hn=gn[6],Gn=gn[7],qn=`shading${hn++}`,[On,wn,_n,Tn]=xr.Util.normalizeRect([...xr.Util.applyTransform([Sn,Cn],$n),...xr.Util.applyTransform([Rn,Bn],$n)]),[Mn,Ln]=xr.Util.singularValueDecompose2dScale($n),jn=Fn*Mn,Kn=Hn*Ln,Nn=this.svgFactory.createElement("svg:pattern");Nn.setAttributeNS(null,"id",qn),Nn.setAttributeNS(null,"patternUnits","userSpaceOnUse"),Nn.setAttributeNS(null,"width",jn),Nn.setAttributeNS(null,"height",Kn),Nn.setAttributeNS(null,"x",`${On}`),Nn.setAttributeNS(null,"y",`${wn}`);const An=this.svg,kn=this.transformMatrix,Dn=this.current.fillColor,Vn=this.current.strokeColor,zn=this.svgFactory.create(_n-On,Tn-wn);if(this.svg=zn,this.transformMatrix=$n,Gn===2){const Xn=xr.Util.makeHexColor(...bn);this.current.fillColor=Xn,this.current.strokeColor=Xn}return this.executeOpTree(this.convertOpList(xn)),this.svg=An,this.transformMatrix=kn,this.current.fillColor=Dn,this.current.strokeColor=Vn,Nn.append(zn.childNodes[0]),this.defs.append(Nn),`url(#${qn})`}_makeShadingPattern(gn){switch(typeof gn=="string"&&(gn=this.objs.get(gn)),gn[0]){case"RadialAxial":const bn=`shading${hn++}`,xn=gn[3];let $n;switch(gn[1]){case"axial":const Sn=gn[4],Cn=gn[5];$n=this.svgFactory.createElement("svg:linearGradient"),$n.setAttributeNS(null,"id",bn),$n.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),$n.setAttributeNS(null,"x1",Sn[0]),$n.setAttributeNS(null,"y1",Sn[1]),$n.setAttributeNS(null,"x2",Cn[0]),$n.setAttributeNS(null,"y2",Cn[1]);break;case"radial":const Rn=gn[4],Bn=gn[5],Fn=gn[6],Hn=gn[7];$n=this.svgFactory.createElement("svg:radialGradient"),$n.setAttributeNS(null,"id",bn),$n.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),$n.setAttributeNS(null,"cx",Bn[0]),$n.setAttributeNS(null,"cy",Bn[1]),$n.setAttributeNS(null,"r",Hn),$n.setAttributeNS(null,"fx",Rn[0]),$n.setAttributeNS(null,"fy",Rn[1]),$n.setAttributeNS(null,"fr",Fn);break;default:throw new Error(`Unknown RadialAxial type: ${gn[1]}`)}for(const Sn of xn){const Cn=this.svgFactory.createElement("svg:stop");Cn.setAttributeNS(null,"offset",Sn[0]),Cn.setAttributeNS(null,"stop-color",Sn[1]),$n.append(Cn)}return this.defs.append($n),`url(#${bn})`;case"Mesh":return(0,xr.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${gn[0]}`)}}setDash(gn,bn){this.current.dashArray=gn,this.current.dashPhase=bn}constructPath(gn,bn){const xn=this.current;let $n=xn.x,Sn=xn.y,Cn=[],Rn=0;for(const Bn of gn)switch(Bn|0){case xr.OPS.rectangle:$n=bn[Rn++],Sn=bn[Rn++];const Fn=bn[Rn++],Hn=bn[Rn++],Gn=$n+Fn,qn=Sn+Hn;Cn.push("M",qr($n),qr(Sn),"L",qr(Gn),qr(Sn),"L",qr(Gn),qr(qn),"L",qr($n),qr(qn),"Z");break;case xr.OPS.moveTo:$n=bn[Rn++],Sn=bn[Rn++],Cn.push("M",qr($n),qr(Sn));break;case xr.OPS.lineTo:$n=bn[Rn++],Sn=bn[Rn++],Cn.push("L",qr($n),qr(Sn));break;case xr.OPS.curveTo:$n=bn[Rn+4],Sn=bn[Rn+5],Cn.push("C",qr(bn[Rn]),qr(bn[Rn+1]),qr(bn[Rn+2]),qr(bn[Rn+3]),qr($n),qr(Sn)),Rn+=6;break;case xr.OPS.curveTo2:Cn.push("C",qr($n),qr(Sn),qr(bn[Rn]),qr(bn[Rn+1]),qr(bn[Rn+2]),qr(bn[Rn+3])),$n=bn[Rn+2],Sn=bn[Rn+3],Rn+=4;break;case xr.OPS.curveTo3:$n=bn[Rn+2],Sn=bn[Rn+3],Cn.push("C",qr(bn[Rn]),qr(bn[Rn+1]),qr($n),qr(Sn),qr($n),qr(Sn)),Rn+=4;break;case xr.OPS.closePath:Cn.push("Z");break}Cn=Cn.join(" "),xn.path&&gn.length>0&&gn[0]!==xr.OPS.rectangle&&gn[0]!==xr.OPS.moveTo?Cn=xn.path.getAttributeNS(null,"d")+Cn:(xn.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(xn.path)),xn.path.setAttributeNS(null,"d",Cn),xn.path.setAttributeNS(null,"fill","none"),xn.element=xn.path,xn.setCurrentPoint($n,Sn)}endPath(){const gn=this.current;if(gn.path=null,!this.pendingClip)return;if(!gn.element){this.pendingClip=null;return}const bn=`clippath${Qr++}`,xn=this.svgFactory.createElement("svg:clipPath");xn.setAttributeNS(null,"id",bn),xn.setAttributeNS(null,"transform",zr(this.transformMatrix));const $n=gn.element.cloneNode(!0);if(this.pendingClip==="evenodd"?$n.setAttributeNS(null,"clip-rule","evenodd"):$n.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,xn.append($n),this.defs.append(xn),gn.activeClipUrl){gn.clipGroup=null;for(const Sn of this.extraStack)Sn.clipGroup=null;xn.setAttributeNS(null,"clip-path",gn.activeClipUrl)}gn.activeClipUrl=`url(#${bn})`,this.tgrp=null}clip(gn){this.pendingClip=gn}closePath(){const gn=this.current;if(gn.path){const bn=`${gn.path.getAttributeNS(null,"d")}Z`;gn.path.setAttributeNS(null,"d",bn)}}setLeading(gn){this.current.leading=-gn}setTextRise(gn){this.current.textRise=gn}setTextRenderingMode(gn){this.current.textRenderingMode=gn}setHScale(gn){this.current.textHScale=gn/100}setRenderingIntent(gn){}setFlatness(gn){}setGState(gn){for(const[bn,xn]of gn)switch(bn){case"LW":this.setLineWidth(xn);break;case"LC":this.setLineCap(xn);break;case"LJ":this.setLineJoin(xn);break;case"ML":this.setMiterLimit(xn);break;case"D":this.setDash(xn[0],xn[1]);break;case"RI":this.setRenderingIntent(xn);break;case"FL":this.setFlatness(xn);break;case"Font":this.setFont(xn);break;case"CA":this.setStrokeAlpha(xn);break;case"ca":this.setFillAlpha(xn);break;default:(0,xr.warn)(`Unimplemented graphic state operator ${bn}`);break}}fill(){const gn=this.current;gn.element&&(gn.element.setAttributeNS(null,"fill",gn.fillColor),gn.element.setAttributeNS(null,"fill-opacity",gn.fillAlpha),this.endPath())}stroke(){const gn=this.current;gn.element&&(this._setStrokeAttributes(gn.element),gn.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(gn,bn=1){const xn=this.current;let $n=xn.dashArray;bn!==1&&$n.length>0&&($n=$n.map(function(Sn){return bn*Sn})),gn.setAttributeNS(null,"stroke",xn.strokeColor),gn.setAttributeNS(null,"stroke-opacity",xn.strokeAlpha),gn.setAttributeNS(null,"stroke-miterlimit",qr(xn.miterLimit)),gn.setAttributeNS(null,"stroke-linecap",xn.lineCap),gn.setAttributeNS(null,"stroke-linejoin",xn.lineJoin),gn.setAttributeNS(null,"stroke-width",qr(bn*xn.lineWidth)+"px"),gn.setAttributeNS(null,"stroke-dasharray",$n.map(qr).join(" ")),gn.setAttributeNS(null,"stroke-dashoffset",qr(bn*xn.dashPhase)+"px")}eoFill(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const gn=this.svgFactory.createElement("svg:rect");gn.setAttributeNS(null,"x","0"),gn.setAttributeNS(null,"y","0"),gn.setAttributeNS(null,"width","1px"),gn.setAttributeNS(null,"height","1px"),gn.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(gn)}paintImageXObject(gn){const bn=this.getObject(gn);if(!bn){(0,xr.warn)(`Dependent image with object ID ${gn} is not ready yet`);return}this.paintInlineImageXObject(bn)}paintInlineImageXObject(gn,bn){const xn=gn.width,$n=gn.height,Sn=Br(gn,this.forceDataSchema,!!bn),Cn=this.svgFactory.createElement("svg:rect");Cn.setAttributeNS(null,"x","0"),Cn.setAttributeNS(null,"y","0"),Cn.setAttributeNS(null,"width",qr(xn)),Cn.setAttributeNS(null,"height",qr($n)),this.current.element=Cn,this.clip("nonzero");const Rn=this.svgFactory.createElement("svg:image");Rn.setAttributeNS(wr,"xlink:href",Sn),Rn.setAttributeNS(null,"x","0"),Rn.setAttributeNS(null,"y",qr(-$n)),Rn.setAttributeNS(null,"width",qr(xn)+"px"),Rn.setAttributeNS(null,"height",qr($n)+"px"),Rn.setAttributeNS(null,"transform",`scale(${qr(1/xn)} ${qr(-1/$n)})`),bn?bn.append(Rn):this._ensureTransformGroup().append(Rn)}paintImageMaskXObject(gn){const bn=this.getObject(gn.data,gn);if(bn.bitmap){(0,xr.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const xn=this.current,$n=bn.width,Sn=bn.height,Cn=xn.fillColor;xn.maskId=`mask${sn++}`;const Rn=this.svgFactory.createElement("svg:mask");Rn.setAttributeNS(null,"id",xn.maskId);const Bn=this.svgFactory.createElement("svg:rect");Bn.setAttributeNS(null,"x","0"),Bn.setAttributeNS(null,"y","0"),Bn.setAttributeNS(null,"width",qr($n)),Bn.setAttributeNS(null,"height",qr(Sn)),Bn.setAttributeNS(null,"fill",Cn),Bn.setAttributeNS(null,"mask",`url(#${xn.maskId})`),this.defs.append(Rn),this._ensureTransformGroup().append(Bn),this.paintInlineImageXObject(bn,Rn)}paintFormXObjectBegin(gn,bn){if(Array.isArray(gn)&&gn.length===6&&this.transform(gn[0],gn[1],gn[2],gn[3],gn[4],gn[5]),bn){const xn=bn[2]-bn[0],$n=bn[3]-bn[1],Sn=this.svgFactory.createElement("svg:rect");Sn.setAttributeNS(null,"x",bn[0]),Sn.setAttributeNS(null,"y",bn[1]),Sn.setAttributeNS(null,"width",qr(xn)),Sn.setAttributeNS(null,"height",qr($n)),this.current.element=Sn,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(gn){const bn=this.svgFactory.create(gn.width,gn.height),xn=this.svgFactory.createElement("svg:defs");bn.append(xn),this.defs=xn;const $n=this.svgFactory.createElement("svg:g");return $n.setAttributeNS(null,"transform",zr(gn.transform)),bn.append($n),this.svg=$n,bn}_ensureClipGroup(){if(!this.current.clipGroup){const gn=this.svgFactory.createElement("svg:g");gn.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(gn),this.current.clipGroup=gn}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",zr(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}hr.SVGGraphics=vn},(mr,hr)=>{Object.defineProperty(hr,"__esModule",{value:!0}),hr.XfaText=void 0;class gr{static textContent(xr){const Er=[],Cr={items:Er,styles:Object.create(null)};function wr(Rr){if(!Rr)return;let kr=null;const Dr=Rr.name;if(Dr==="#text")kr=Rr.value;else if(gr.shouldBuildText(Dr))Rr?.attributes?.textContent?kr=Rr.attributes.textContent:Rr.value&&(kr=Rr.value);else return;if(kr!==null&&Er.push({str:kr}),!!Rr.children)for(const Br of Rr.children)wr(Br)}return wr(xr),Cr}static shouldBuildText(xr){return!(xr==="textarea"||xr==="input"||xr==="option"||xr==="select")}}hr.XfaText=gr},(mr,hr,gr)=>{Object.defineProperty(hr,"__esModule",{value:!0}),hr.TextLayerRenderTask=void 0,hr.renderTextLayer=zr,hr.updateTextLayer=Qr;var vr=gr(1),xr=gr(6);const Er=1e5,Cr=30,wr=.8,Rr=new Map;function kr(sn,hn){let vn;if(hn&&vr.FeatureTest.isOffscreenCanvasSupported)vn=new OffscreenCanvas(sn,sn).getContext("2d",{alpha:!1});else{const yn=document.createElement("canvas");yn.width=yn.height=sn,vn=yn.getContext("2d",{alpha:!1})}return vn}function Dr(sn,hn){const vn=Rr.get(sn);if(vn)return vn;const yn=kr(Cr,hn);yn.font=`${Cr}px ${sn}`;const gn=yn.measureText("");let bn=gn.fontBoundingBoxAscent,xn=Math.abs(gn.fontBoundingBoxDescent);if(bn){const Sn=bn/(bn+xn);return Rr.set(sn,Sn),yn.canvas.width=yn.canvas.height=0,Sn}yn.strokeStyle="red",yn.clearRect(0,0,Cr,Cr),yn.strokeText("g",0,0);let $n=yn.getImageData(0,0,Cr,Cr).data;xn=0;for(let Sn=$n.length-1-3;Sn>=0;Sn-=4)if($n[Sn]>0){xn=Math.ceil(Sn/4/Cr);break}yn.clearRect(0,0,Cr,Cr),yn.strokeText("A",0,Cr),$n=yn.getImageData(0,0,Cr,Cr).data,bn=0;for(let Sn=0,Cn=$n.length;Sn<Cn;Sn+=4)if($n[Sn]>0){bn=Cr-Math.floor(Sn/4/Cr);break}if(yn.canvas.width=yn.canvas.height=0,bn){const Sn=bn/(bn+xn);return Rr.set(sn,Sn),Sn}return Rr.set(sn,wr),wr}function Br(sn,hn,vn){const yn=document.createElement("span"),gn={angle:0,canvasWidth:0,hasText:hn.str!=="",hasEOL:hn.hasEOL,fontSize:0};sn._textDivs.push(yn);const bn=vr.Util.transform(sn._transform,hn.transform);let xn=Math.atan2(bn[1],bn[0]);const $n=vn[hn.fontName];$n.vertical&&(xn+=Math.PI/2);const Sn=Math.hypot(bn[2],bn[3]),Cn=Sn*Dr($n.fontFamily,sn._isOffscreenCanvasSupported);let Rn,Bn;xn===0?(Rn=bn[4],Bn=bn[5]-Cn):(Rn=bn[4]+Cn*Math.sin(xn),Bn=bn[5]-Cn*Math.cos(xn));const Fn="calc(var(--scale-factor)*",Hn=yn.style;sn._container===sn._rootContainer?(Hn.left=`${(100*Rn/sn._pageWidth).toFixed(2)}%`,Hn.top=`${(100*Bn/sn._pageHeight).toFixed(2)}%`):(Hn.left=`${Fn}${Rn.toFixed(2)}px)`,Hn.top=`${Fn}${Bn.toFixed(2)}px)`),Hn.fontSize=`${Fn}${Sn.toFixed(2)}px)`,Hn.fontFamily=$n.fontFamily,gn.fontSize=Sn,yn.setAttribute("role","presentation"),yn.textContent=hn.str,yn.dir=hn.dir,sn._fontInspectorEnabled&&(yn.dataset.fontName=hn.fontName),xn!==0&&(gn.angle=xn*(180/Math.PI));let Gn=!1;if(hn.str.length>1)Gn=!0;else if(hn.str!==" "&&hn.transform[0]!==hn.transform[3]){const qn=Math.abs(hn.transform[0]),On=Math.abs(hn.transform[3]);qn!==On&&Math.max(qn,On)/Math.min(qn,On)>1.5&&(Gn=!0)}Gn&&(gn.canvasWidth=$n.vertical?hn.height:hn.width),sn._textDivProperties.set(yn,gn),sn._isReadableStream&&sn._layoutText(yn)}function Hr(sn){const{div:hn,scale:vn,properties:yn,ctx:gn,prevFontSize:bn,prevFontFamily:xn}=sn,{style:$n}=hn;let Sn="";if(yn.canvasWidth!==0&&yn.hasText){const{fontFamily:Cn}=$n,{canvasWidth:Rn,fontSize:Bn}=yn;(bn!==Bn||xn!==Cn)&&(gn.font=`${Bn*vn}px ${Cn}`,sn.prevFontSize=Bn,sn.prevFontFamily=Cn);const{width:Fn}=gn.measureText(hn.textContent);Fn>0&&(Sn=`scaleX(${Rn*vn/Fn})`)}yn.angle!==0&&(Sn=`rotate(${yn.angle}deg) ${Sn}`),Sn.length>0&&($n.transform=Sn)}function Gr(sn){if(sn._canceled)return;const hn=sn._textDivs,vn=sn._capability;if(hn.length>Er){vn.resolve();return}if(!sn._isReadableStream)for(const gn of hn)sn._layoutText(gn);vn.resolve()}class qr{constructor({textContentSource:hn,container:vn,viewport:yn,textDivs:gn,textDivProperties:bn,textContentItemsStr:xn,isOffscreenCanvasSupported:$n}){this._textContentSource=hn,this._isReadableStream=hn instanceof ReadableStream,this._container=this._rootContainer=vn,this._textDivs=gn||[],this._textContentItemsStr=xn||[],this._isOffscreenCanvasSupported=$n,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._textDivProperties=bn||new WeakMap,this._canceled=!1,this._capability=new vr.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:yn.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:kr(0,$n)};const{pageWidth:Sn,pageHeight:Cn,pageX:Rn,pageY:Bn}=yn.rawDims;this._transform=[1,0,0,-1,-Rn,Bn+Cn],this._pageWidth=Sn,this._pageHeight=Cn,(0,xr.setLayerDimensions)(vn,yn),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new vr.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new vr.AbortException("TextLayer task cancelled."))}_processItems(hn,vn){for(const yn of hn){if(yn.str===void 0){if(yn.type==="beginMarkedContentProps"||yn.type==="beginMarkedContent"){const gn=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),yn.id!==null&&this._container.setAttribute("id",`${yn.id}`),gn.append(this._container)}else yn.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(yn.str),Br(this,yn,vn)}}_layoutText(hn){const vn=this._layoutTextParams.properties=this._textDivProperties.get(hn);if(this._layoutTextParams.div=hn,Hr(this._layoutTextParams),vn.hasText&&this._container.append(hn),vn.hasEOL){const yn=document.createElement("br");yn.setAttribute("role","presentation"),this._container.append(yn)}}_render(){const hn=new vr.PromiseCapability;let vn=Object.create(null);if(this._isReadableStream){const yn=()=>{this._reader.read().then(({value:gn,done:bn})=>{if(bn){hn.resolve();return}Object.assign(vn,gn.styles),this._processItems(gn.items,vn),yn()},hn.reject)};this._reader=this._textContentSource.getReader(),yn()}else if(this._textContentSource){const{items:yn,styles:gn}=this._textContentSource;this._processItems(yn,gn),hn.resolve()}else throw new Error('No "textContentSource" parameter specified.');hn.promise.then(()=>{vn=null,Gr(this)},this._capability.reject)}}hr.TextLayerRenderTask=qr;function zr(sn){!sn.textContentSource&&(sn.textContent||sn.textContentStream)&&((0,xr.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),sn.textContentSource=sn.textContent||sn.textContentStream);const{container:hn,viewport:vn}=sn,yn=getComputedStyle(hn),gn=yn.getPropertyValue("visibility"),bn=parseFloat(yn.getPropertyValue("--scale-factor"));gn==="visible"&&(!bn||Math.abs(bn-vn.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const xn=new qr(sn);return xn._render(),xn}function Qr({container:sn,viewport:hn,textDivs:vn,textDivProperties:yn,isOffscreenCanvasSupported:gn,mustRotate:bn=!0,mustRescale:xn=!0}){if(bn&&(0,xr.setLayerDimensions)(sn,{rotation:hn.rotation}),xn){const $n=kr(0,gn),Cn={prevFontSize:null,prevFontFamily:null,div:null,scale:hn.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:$n};for(const Rn of vn)Cn.properties=yn.get(Rn),Cn.div=Rn,Hr(Cn)}}},(mr,hr,gr)=>{Object.defineProperty(hr,"__esModule",{value:!0}),hr.AnnotationEditorLayer=void 0;var vr=gr(1),xr=gr(4),Er=gr(28),Cr=gr(33),wr=gr(6),Rr=gr(34);class kr{#e;#t=!1;#r=null;#n=this.pointerup.bind(this);#o=this.pointerdown.bind(this);#s=new Map;#a=!1;#l=!1;#c=!1;#i;static _initialized=!1;constructor({uiManager:Br,pageIndex:Hr,div:Gr,accessibilityManager:qr,annotationLayer:zr,viewport:Qr,l10n:sn}){const hn=[Er.FreeTextEditor,Cr.InkEditor,Rr.StampEditor];if(!kr._initialized){kr._initialized=!0;for(const vn of hn)vn.initialize(sn)}Br.registerEditorTypes(hn),this.#i=Br,this.pageIndex=Hr,this.div=Gr,this.#e=qr,this.#r=zr,this.viewport=Qr,this.#i.addLayer(this)}get isEmpty(){return this.#s.size===0}updateToolbar(Br){this.#i.updateToolbar(Br)}updateMode(Br=this.#i.getMode()){this.#p(),Br===vr.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),Br!==vr.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",Br===vr.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",Br===vr.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",Br===vr.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(Br){if(!Br&&this.#i.getMode()!==vr.AnnotationEditorType.INK)return;if(!Br){for(const Gr of this.#s.values())if(Gr.isEmpty()){Gr.setInBackground();return}}this.#d({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(Br){this.#i.setEditingState(Br)}addCommands(Br){this.#i.addCommands(Br)}enable(){this.div.style.pointerEvents="auto";const Br=new Set;for(const Gr of this.#s.values())Gr.enableEditing(),Gr.annotationElementId&&Br.add(Gr.annotationElementId);if(!this.#r)return;const Hr=this.#r.getEditableAnnotations();for(const Gr of Hr){if(Gr.hide(),this.#i.isDeletedAnnotationElement(Gr.data.id)||Br.has(Gr.data.id))continue;const qr=this.deserialize(Gr);qr&&(this.addOrRebuild(qr),qr.enableEditing())}}disable(){this.#c=!0,this.div.style.pointerEvents="none";const Br=new Set;for(const Hr of this.#s.values()){if(Hr.disableEditing(),!Hr.annotationElementId||Hr.serialize()!==null){Br.add(Hr.annotationElementId);continue}this.getEditableAnnotation(Hr.annotationElementId)?.show(),Hr.remove()}if(this.#r){const Hr=this.#r.getEditableAnnotations();for(const Gr of Hr){const{id:qr}=Gr.data;Br.has(qr)||this.#i.isDeletedAnnotationElement(qr)||Gr.show()}}this.#p(),this.isEmpty&&(this.div.hidden=!0),this.#c=!1}getEditableAnnotation(Br){return this.#r?.getEditableAnnotation(Br)||null}setActiveEditor(Br){this.#i.getActive()!==Br&&this.#i.setActiveEditor(Br)}enableClick(){this.div.addEventListener("pointerdown",this.#o),this.div.addEventListener("pointerup",this.#n)}disableClick(){this.div.removeEventListener("pointerdown",this.#o),this.div.removeEventListener("pointerup",this.#n)}attach(Br){this.#s.set(Br.id,Br);const{annotationElementId:Hr}=Br;Hr&&this.#i.isDeletedAnnotationElement(Hr)&&this.#i.removeDeletedAnnotationElement(Br)}detach(Br){this.#s.delete(Br.id),this.#e?.removePointerInTextLayer(Br.contentDiv),!this.#c&&Br.annotationElementId&&this.#i.addDeletedAnnotationElement(Br)}remove(Br){this.detach(Br),this.#i.removeEditor(Br),Br.div.contains(document.activeElement)&&setTimeout(()=>{this.#i.focusMainContainer()},0),Br.div.remove(),Br.isAttachedToDOM=!1,this.#l||this.addInkEditorIfNeeded(!1)}changeParent(Br){Br.parent!==this&&(Br.annotationElementId&&(this.#i.addDeletedAnnotationElement(Br.annotationElementId),xr.AnnotationEditor.deleteAnnotationElement(Br),Br.annotationElementId=null),this.attach(Br),Br.parent?.detach(Br),Br.setParent(this),Br.div&&Br.isAttachedToDOM&&(Br.div.remove(),this.div.append(Br.div)))}add(Br){if(this.changeParent(Br),this.#i.addEditor(Br),this.attach(Br),!Br.isAttachedToDOM){const Hr=Br.render();this.div.append(Hr),Br.isAttachedToDOM=!0}Br.fixAndSetPosition(),Br.onceAdded(),this.#i.addToAnnotationStorage(Br)}moveEditorInDOM(Br){if(!Br.isAttachedToDOM)return;const{activeElement:Hr}=document;Br.div.contains(Hr)&&(Br._focusEventsAllowed=!1,setTimeout(()=>{Br.div.contains(document.activeElement)?Br._focusEventsAllowed=!0:(Br.div.addEventListener("focusin",()=>{Br._focusEventsAllowed=!0},{once:!0}),Hr.focus())},0)),Br._structTreeParentId=this.#e?.moveElementInDOM(this.div,Br.div,Br.contentDiv,!0)}addOrRebuild(Br){Br.needsToBeRebuilt()?Br.rebuild():this.add(Br)}addUndoableEditor(Br){const Hr=()=>Br._uiManager.rebuild(Br),Gr=()=>{Br.remove()};this.addCommands({cmd:Hr,undo:Gr,mustExec:!1})}getNextId(){return this.#i.getId()}#f(Br){switch(this.#i.getMode()){case vr.AnnotationEditorType.FREETEXT:return new Er.FreeTextEditor(Br);case vr.AnnotationEditorType.INK:return new Cr.InkEditor(Br);case vr.AnnotationEditorType.STAMP:return new Rr.StampEditor(Br)}return null}pasteEditor(Br,Hr){this.#i.updateToolbar(Br),this.#i.updateMode(Br);const{offsetX:Gr,offsetY:qr}=this.#h(),zr=this.getNextId(),Qr=this.#f({parent:this,id:zr,x:Gr,y:qr,uiManager:this.#i,isCentered:!0,...Hr});Qr&&this.add(Qr)}deserialize(Br){switch(Br.annotationType??Br.annotationEditorType){case vr.AnnotationEditorType.FREETEXT:return Er.FreeTextEditor.deserialize(Br,this,this.#i);case vr.AnnotationEditorType.INK:return Cr.InkEditor.deserialize(Br,this,this.#i);case vr.AnnotationEditorType.STAMP:return Rr.StampEditor.deserialize(Br,this,this.#i)}return null}#d(Br,Hr){const Gr=this.getNextId(),qr=this.#f({parent:this,id:Gr,x:Br.offsetX,y:Br.offsetY,uiManager:this.#i,isCentered:Hr});return qr&&this.add(qr),qr}#h(){const{x:Br,y:Hr,width:Gr,height:qr}=this.div.getBoundingClientRect(),zr=Math.max(0,Br),Qr=Math.max(0,Hr),sn=Math.min(window.innerWidth,Br+Gr),hn=Math.min(window.innerHeight,Hr+qr),vn=(zr+sn)/2-Br,yn=(Qr+hn)/2-Hr,[gn,bn]=this.viewport.rotation%180===0?[vn,yn]:[yn,vn];return{offsetX:gn,offsetY:bn}}addNewEditor(){this.#d(this.#h(),!0)}setSelected(Br){this.#i.setSelected(Br)}toggleSelected(Br){this.#i.toggleSelected(Br)}isSelected(Br){return this.#i.isSelected(Br)}unselect(Br){this.#i.unselect(Br)}pointerup(Br){const{isMac:Hr}=vr.FeatureTest.platform;if(!(Br.button!==0||Br.ctrlKey&&Hr)&&Br.target===this.div&&this.#a){if(this.#a=!1,!this.#t){this.#t=!0;return}if(this.#i.getMode()===vr.AnnotationEditorType.STAMP){this.#i.unselectAll();return}this.#d(Br,!1)}}pointerdown(Br){if(this.#a){this.#a=!1;return}const{isMac:Hr}=vr.FeatureTest.platform;if(Br.button!==0||Br.ctrlKey&&Hr||Br.target!==this.div)return;this.#a=!0;const Gr=this.#i.getActive();this.#t=!Gr||Gr.isEmpty()}findNewParent(Br,Hr,Gr){const qr=this.#i.findParent(Hr,Gr);return qr===null||qr===this?!1:(qr.changeParent(Br),!0)}destroy(){this.#i.getActive()?.parent===this&&(this.#i.commitOrRemove(),this.#i.setActiveEditor(null));for(const Br of this.#s.values())this.#e?.removePointerInTextLayer(Br.contentDiv),Br.setParent(null),Br.isAttachedToDOM=!1,Br.div.remove();this.div=null,this.#s.clear(),this.#i.removeLayer(this)}#p(){this.#l=!0;for(const Br of this.#s.values())Br.isEmpty()&&Br.remove();this.#l=!1}render({viewport:Br}){this.viewport=Br,(0,wr.setLayerDimensions)(this.div,Br);for(const Hr of this.#i.getEditors(this.pageIndex))this.add(Hr);this.updateMode()}update({viewport:Br}){this.#i.commitOrRemove(),this.viewport=Br,(0,wr.setLayerDimensions)(this.div,{rotation:Br.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:Br,pageHeight:Hr}=this.viewport.rawDims;return[Br,Hr]}}hr.AnnotationEditorLayer=kr},(mr,hr,gr)=>{Object.defineProperty(hr,"__esModule",{value:!0}),hr.FreeTextEditor=void 0;var vr=gr(1),xr=gr(5),Er=gr(4),Cr=gr(29);class wr extends Er.AnnotationEditor{#e=this.editorDivBlur.bind(this);#t=this.editorDivFocus.bind(this);#r=this.editorDivInput.bind(this);#n=this.editorDivKeydown.bind(this);#o;#s="";#a=`${this.id}-editor`;#l;#c=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const kr=wr.prototype,Dr=Gr=>Gr.isEmpty(),Br=xr.AnnotationEditorUIManager.TRANSLATE_SMALL,Hr=xr.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,vr.shadow)(this,"_keyboardManager",new xr.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],kr.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],kr.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],kr._translateEmpty,{args:[-Br,0],checker:Dr}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],kr._translateEmpty,{args:[-Hr,0],checker:Dr}],[["ArrowRight","mac+ArrowRight"],kr._translateEmpty,{args:[Br,0],checker:Dr}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],kr._translateEmpty,{args:[Hr,0],checker:Dr}],[["ArrowUp","mac+ArrowUp"],kr._translateEmpty,{args:[0,-Br],checker:Dr}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],kr._translateEmpty,{args:[0,-Hr],checker:Dr}],[["ArrowDown","mac+ArrowDown"],kr._translateEmpty,{args:[0,Br],checker:Dr}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],kr._translateEmpty,{args:[0,Hr],checker:Dr}]]))}static _type="freetext";constructor(kr){super({...kr,name:"freeTextEditor"}),this.#o=kr.color||wr._defaultColor||Er.AnnotationEditor._defaultLineColor,this.#l=kr.fontSize||wr._defaultFontSize}static initialize(kr){Er.AnnotationEditor.initialize(kr,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const Dr=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(Dr.getPropertyValue("--freetext-padding"))}static updateDefaultParams(kr,Dr){switch(kr){case vr.AnnotationEditorParamsType.FREETEXT_SIZE:wr._defaultFontSize=Dr;break;case vr.AnnotationEditorParamsType.FREETEXT_COLOR:wr._defaultColor=Dr;break}}updateParams(kr,Dr){switch(kr){case vr.AnnotationEditorParamsType.FREETEXT_SIZE:this.#i(Dr);break;case vr.AnnotationEditorParamsType.FREETEXT_COLOR:this.#f(Dr);break}}static get defaultPropertiesToUpdate(){return[[vr.AnnotationEditorParamsType.FREETEXT_SIZE,wr._defaultFontSize],[vr.AnnotationEditorParamsType.FREETEXT_COLOR,wr._defaultColor||Er.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[vr.AnnotationEditorParamsType.FREETEXT_SIZE,this.#l],[vr.AnnotationEditorParamsType.FREETEXT_COLOR,this.#o]]}#i(kr){const Dr=Hr=>{this.editorDiv.style.fontSize=`calc(${Hr}px * var(--scale-factor))`,this.translate(0,-(Hr-this.#l)*this.parentScale),this.#l=Hr,this.#h()},Br=this.#l;this.addCommands({cmd:()=>{Dr(kr)},undo:()=>{Dr(Br)},mustExec:!0,type:vr.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#f(kr){const Dr=this.#o;this.addCommands({cmd:()=>{this.#o=this.editorDiv.style.color=kr},undo:()=>{this.#o=this.editorDiv.style.color=Dr},mustExec:!0,type:vr.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(kr,Dr){this._uiManager.translateSelectedEditors(kr,Dr,!0)}getInitialTranslation(){const kr=this.parentScale;return[-wr._internalPadding*kr,-(wr._internalPadding+this.#l)*kr]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(vr.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",this.#n),this.editorDiv.addEventListener("focus",this.#t),this.editorDiv.addEventListener("blur",this.#e),this.editorDiv.addEventListener("input",this.#r))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#a),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",this.#n),this.editorDiv.removeEventListener("focus",this.#t),this.editorDiv.removeEventListener("blur",this.#e),this.editorDiv.removeEventListener("input",this.#r),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(kr){this._focusEventsAllowed&&(super.focusin(kr),kr.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){if(this.width){this.#g();return}this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}#d(){const kr=this.editorDiv.getElementsByTagName("div");if(kr.length===0)return this.editorDiv.innerText;const Dr=[];for(const Br of kr)Dr.push(Br.innerText.replace(/\r\n?|\n/,""));return Dr.join(`
`)}#h(){const[kr,Dr]=this.parentDimensions;let Br;if(this.isAttachedToDOM)Br=this.div.getBoundingClientRect();else{const{currentLayer:Hr,div:Gr}=this,qr=Gr.style.display;Gr.style.display="hidden",Hr.div.append(this.div),Br=Gr.getBoundingClientRect(),Gr.remove(),Gr.style.display=qr}this.rotation%180===this.parentRotation%180?(this.width=Br.width/kr,this.height=Br.height/Dr):(this.width=Br.height/kr,this.height=Br.width/Dr),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const kr=this.#s,Dr=this.#s=this.#d().trimEnd();if(kr===Dr)return;const Br=Hr=>{if(this.#s=Hr,!Hr){this.remove();return}this.#p(),this._uiManager.rebuild(this),this.#h()};this.addCommands({cmd:()=>{Br(Dr)},undo:()=>{Br(kr)},mustExec:!1}),this.#h()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(kr){this.enterInEditMode()}keydown(kr){kr.target===this.div&&kr.key==="Enter"&&(this.enterInEditMode(),kr.preventDefault())}editorDivKeydown(kr){wr._keyboardManager.exec(this,kr)}editorDivFocus(kr){this.isEditing=!0}editorDivBlur(kr){this.isEditing=!1}editorDivInput(kr){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let kr,Dr;this.width&&(kr=this.x,Dr=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#a),this.enableEditing(),Er.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(Hr=>this.editorDiv?.setAttribute("aria-label",Hr)),Er.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(Hr=>this.editorDiv?.setAttribute("default-content",Hr)),this.editorDiv.contentEditable=!0;const{style:Br}=this.editorDiv;if(Br.fontSize=`calc(${this.#l}px * var(--scale-factor))`,Br.color=this.#o,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,xr.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[Hr,Gr]=this.parentDimensions;if(this.annotationElementId){const{position:qr}=this.#c;let[zr,Qr]=this.getInitialTranslation();[zr,Qr]=this.pageTranslationToScreen(zr,Qr);const[sn,hn]=this.pageDimensions,[vn,yn]=this.pageTranslation;let gn,bn;switch(this.rotation){case 0:gn=kr+(qr[0]-vn)/sn,bn=Dr+this.height-(qr[1]-yn)/hn;break;case 90:gn=kr+(qr[0]-vn)/sn,bn=Dr-(qr[1]-yn)/hn,[zr,Qr]=[Qr,-zr];break;case 180:gn=kr-this.width+(qr[0]-vn)/sn,bn=Dr-(qr[1]-yn)/hn,[zr,Qr]=[-zr,-Qr];break;case 270:gn=kr+(qr[0]-vn-this.height*hn)/sn,bn=Dr+(qr[1]-yn-this.width*sn)/hn,[zr,Qr]=[-Qr,zr];break}this.setAt(gn*Hr,bn*Gr,zr,Qr)}else this.setAt(kr*Hr,Dr*Gr,this.width*Hr,this.height*Gr);this.#p(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}#p(){if(this.editorDiv.replaceChildren(),!!this.#s)for(const kr of this.#s.split(`
`)){const Dr=document.createElement("div");Dr.append(kr?document.createTextNode(kr):document.createElement("br")),this.editorDiv.append(Dr)}}get contentDiv(){return this.editorDiv}static deserialize(kr,Dr,Br){let Hr=null;if(kr instanceof Cr.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:qr,fontColor:zr},rect:Qr,rotation:sn,id:hn},textContent:vn,textPosition:yn,parent:{page:{pageNumber:gn}}}=kr;if(!vn||vn.length===0)return null;Hr=kr={annotationType:vr.AnnotationEditorType.FREETEXT,color:Array.from(zr),fontSize:qr,value:vn.join(`
`),position:yn,pageIndex:gn-1,rect:Qr,rotation:sn,id:hn,deleted:!1}}const Gr=super.deserialize(kr,Dr,Br);return Gr.#l=kr.fontSize,Gr.#o=vr.Util.makeHexColor(...kr.color),Gr.#s=kr.value,Gr.annotationElementId=kr.id||null,Gr.#c=Hr,Gr}serialize(kr=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const Dr=wr._internalPadding*this.parentScale,Br=this.getRect(Dr,Dr),Hr=Er.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#o),Gr={annotationType:vr.AnnotationEditorType.FREETEXT,color:Hr,fontSize:this.#l,value:this.#s,pageIndex:this.pageIndex,rect:Br,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return kr?Gr:this.annotationElementId&&!this.#v(Gr)?null:(Gr.id=this.annotationElementId,Gr)}#v(kr){const{value:Dr,fontSize:Br,color:Hr,rect:Gr,pageIndex:qr}=this.#c;return kr.value!==Dr||kr.fontSize!==Br||kr.rect.some((zr,Qr)=>Math.abs(zr-Gr[Qr])>=1)||kr.color.some((zr,Qr)=>zr!==Hr[Qr])||kr.pageIndex!==qr}#g(kr=!1){if(!this.annotationElementId)return;if(this.#h(),!kr&&(this.width===0||this.height===0)){setTimeout(()=>this.#g(!0),0);return}const Dr=wr._internalPadding*this.parentScale;this.#c.rect=this.getRect(Dr,Dr)}}hr.FreeTextEditor=wr},(mr,hr,gr)=>{Object.defineProperty(hr,"__esModule",{value:!0}),hr.StampAnnotationElement=hr.InkAnnotationElement=hr.FreeTextAnnotationElement=hr.AnnotationLayer=void 0;var vr=gr(1),xr=gr(6),Er=gr(3),Cr=gr(30),wr=gr(31),Rr=gr(32);const kr=1e3,Dr=9,Br=new WeakSet;function Hr(Nn){return{width:Nn[2]-Nn[0],height:Nn[3]-Nn[1]}}class Gr{static create(An){switch(An.data.annotationType){case vr.AnnotationType.LINK:return new zr(An);case vr.AnnotationType.TEXT:return new Qr(An);case vr.AnnotationType.WIDGET:switch(An.data.fieldType){case"Tx":return new hn(An);case"Btn":return An.data.radioButton?new gn(An):An.data.checkBox?new yn(An):new bn(An);case"Ch":return new xn(An);case"Sig":return new vn(An)}return new sn(An);case vr.AnnotationType.POPUP:return new $n(An);case vr.AnnotationType.FREETEXT:return new Cn(An);case vr.AnnotationType.LINE:return new Rn(An);case vr.AnnotationType.SQUARE:return new Bn(An);case vr.AnnotationType.CIRCLE:return new Fn(An);case vr.AnnotationType.POLYLINE:return new Hn(An);case vr.AnnotationType.CARET:return new qn(An);case vr.AnnotationType.INK:return new On(An);case vr.AnnotationType.POLYGON:return new Gn(An);case vr.AnnotationType.HIGHLIGHT:return new wn(An);case vr.AnnotationType.UNDERLINE:return new _n(An);case vr.AnnotationType.SQUIGGLY:return new Tn(An);case vr.AnnotationType.STRIKEOUT:return new Mn(An);case vr.AnnotationType.STAMP:return new Ln(An);case vr.AnnotationType.FILEATTACHMENT:return new jn(An);default:return new qr(An)}}}class qr{#e=!1;constructor(An,{isRenderable:kn=!1,ignoreBorder:Dn=!1,createQuadrilaterals:Vn=!1}={}){this.isRenderable=kn,this.data=An.data,this.layer=An.layer,this.linkService=An.linkService,this.downloadManager=An.downloadManager,this.imageResourcesPath=An.imageResourcesPath,this.renderForms=An.renderForms,this.svgFactory=An.svgFactory,this.annotationStorage=An.annotationStorage,this.enableScripting=An.enableScripting,this.hasJSActions=An.hasJSActions,this._fieldObjects=An.fieldObjects,this.parent=An.parent,kn&&(this.container=this._createContainer(Dn)),Vn&&this._createQuadrilaterals()}static _hasPopupData({titleObj:An,contentsObj:kn,richText:Dn}){return!!(An?.str||kn?.str||Dn?.str)}get hasPopupData(){return qr._hasPopupData(this.data)}_createContainer(An){const{data:kn,parent:{page:Dn,viewport:Vn}}=this,zn=document.createElement("section");zn.setAttribute("data-annotation-id",kn.id),this instanceof sn||(zn.tabIndex=kr),zn.style.zIndex=this.parent.zIndex++,this.data.popupRef&&zn.setAttribute("aria-haspopup","dialog"),kn.noRotate&&zn.classList.add("norotate");const{pageWidth:Xn,pageHeight:Zn,pageX:Pi,pageY:Ya}=Vn.rawDims;if(!kn.rect||this instanceof $n){const{rotation:ns}=kn;return!kn.hasOwnCanvas&&ns!==0&&this.setRotation(ns,zn),zn}const{width:Bi,height:zi}=Hr(kn.rect),Xi=vr.Util.normalizeRect([kn.rect[0],Dn.view[3]-kn.rect[1]+Dn.view[1],kn.rect[2],Dn.view[3]-kn.rect[3]+Dn.view[1]]);if(!An&&kn.borderStyle.width>0){zn.style.borderWidth=`${kn.borderStyle.width}px`;const ns=kn.borderStyle.horizontalCornerRadius,ps=kn.borderStyle.verticalCornerRadius;if(ns>0||ps>0){const Li=`calc(${ns}px * var(--scale-factor)) / calc(${ps}px * var(--scale-factor))`;zn.style.borderRadius=Li}else if(this instanceof gn){const Li=`calc(${Bi}px * var(--scale-factor)) / calc(${zi}px * var(--scale-factor))`;zn.style.borderRadius=Li}switch(kn.borderStyle.style){case vr.AnnotationBorderStyleType.SOLID:zn.style.borderStyle="solid";break;case vr.AnnotationBorderStyleType.DASHED:zn.style.borderStyle="dashed";break;case vr.AnnotationBorderStyleType.BEVELED:(0,vr.warn)("Unimplemented border style: beveled");break;case vr.AnnotationBorderStyleType.INSET:(0,vr.warn)("Unimplemented border style: inset");break;case vr.AnnotationBorderStyleType.UNDERLINE:zn.style.borderBottomStyle="solid";break}const ls=kn.borderColor||null;ls?(this.#e=!0,zn.style.borderColor=vr.Util.makeHexColor(ls[0]|0,ls[1]|0,ls[2]|0)):zn.style.borderWidth=0}zn.style.left=`${100*(Xi[0]-Pi)/Xn}%`,zn.style.top=`${100*(Xi[1]-Ya)/Zn}%`;const{rotation:Ji}=kn;return kn.hasOwnCanvas||Ji===0?(zn.style.width=`${100*Bi/Xn}%`,zn.style.height=`${100*zi/Zn}%`):this.setRotation(Ji,zn),zn}setRotation(An,kn=this.container){if(!this.data.rect)return;const{pageWidth:Dn,pageHeight:Vn}=this.parent.viewport.rawDims,{width:zn,height:Xn}=Hr(this.data.rect);let Zn,Pi;An%180===0?(Zn=100*zn/Dn,Pi=100*Xn/Vn):(Zn=100*Xn/Dn,Pi=100*zn/Vn),kn.style.width=`${Zn}%`,kn.style.height=`${Pi}%`,kn.setAttribute("data-main-rotation",(360-An)%360)}get _commonActions(){const An=(kn,Dn,Vn)=>{const zn=Vn.detail[kn],Xn=zn[0],Zn=zn.slice(1);Vn.target.style[Dn]=Cr.ColorConverters[`${Xn}_HTML`](Zn),this.annotationStorage.setValue(this.data.id,{[Dn]:Cr.ColorConverters[`${Xn}_rgb`](Zn)})};return(0,vr.shadow)(this,"_commonActions",{display:kn=>{const{display:Dn}=kn.detail,Vn=Dn%2===1;this.container.style.visibility=Vn?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:Vn,noPrint:Dn===1||Dn===2})},print:kn=>{this.annotationStorage.setValue(this.data.id,{noPrint:!kn.detail.print})},hidden:kn=>{const{hidden:Dn}=kn.detail;this.container.style.visibility=Dn?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:Dn,noView:Dn})},focus:kn=>{setTimeout(()=>kn.target.focus({preventScroll:!1}),0)},userName:kn=>{kn.target.title=kn.detail.userName},readonly:kn=>{kn.target.disabled=kn.detail.readonly},required:kn=>{this._setRequired(kn.target,kn.detail.required)},bgColor:kn=>{An("bgColor","backgroundColor",kn)},fillColor:kn=>{An("fillColor","backgroundColor",kn)},fgColor:kn=>{An("fgColor","color",kn)},textColor:kn=>{An("textColor","color",kn)},borderColor:kn=>{An("borderColor","borderColor",kn)},strokeColor:kn=>{An("strokeColor","borderColor",kn)},rotation:kn=>{const Dn=kn.detail.rotation;this.setRotation(Dn),this.annotationStorage.setValue(this.data.id,{rotation:Dn})}})}_dispatchEventFromSandbox(An,kn){const Dn=this._commonActions;for(const Vn of Object.keys(kn.detail))(An[Vn]||Dn[Vn])?.(kn)}_setDefaultPropertiesFromJS(An){if(!this.enableScripting)return;const kn=this.annotationStorage.getRawValue(this.data.id);if(!kn)return;const Dn=this._commonActions;for(const[Vn,zn]of Object.entries(kn)){const Xn=Dn[Vn];if(Xn){const Zn={detail:{[Vn]:zn},target:An};Xn(Zn),delete kn[Vn]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:An}=this.data;if(!An)return;const[kn,Dn,Vn,zn]=this.data.rect;if(An.length===1){const[,{x:ps,y:ls},{x:Li,y:es}]=An[0];if(Vn===ps&&zn===ls&&kn===Li&&Dn===es)return}const{style:Xn}=this.container;let Zn;if(this.#e){const{borderColor:ps,borderWidth:ls}=Xn;Xn.borderWidth=0,Zn=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${ps}" stroke-width="${ls}">`],this.container.classList.add("hasBorder")}const Pi=Vn-kn,Ya=zn-Dn,{svgFactory:Bi}=this,zi=Bi.createElement("svg");zi.classList.add("quadrilateralsContainer"),zi.setAttribute("width",0),zi.setAttribute("height",0);const Xi=Bi.createElement("defs");zi.append(Xi);const Ji=Bi.createElement("clipPath"),ns=`clippath_${this.data.id}`;Ji.setAttribute("id",ns),Ji.setAttribute("clipPathUnits","objectBoundingBox"),Xi.append(Ji);for(const[,{x:ps,y:ls},{x:Li,y:es}]of An){const os=Bi.createElement("rect"),ds=(Li-kn)/Pi,Is=(zn-ls)/Ya,ws=(ps-Li)/Pi,Ns=(ls-es)/Ya;os.setAttribute("x",ds),os.setAttribute("y",Is),os.setAttribute("width",ws),os.setAttribute("height",Ns),Ji.append(os),Zn?.push(`<rect vector-effect="non-scaling-stroke" x="${ds}" y="${Is}" width="${ws}" height="${Ns}"/>`)}this.#e&&(Zn.push("</g></svg>')"),Xn.backgroundImage=Zn.join("")),this.container.append(zi),this.container.style.clipPath=`url(#${ns})`}_createPopup(){const{container:An,data:kn}=this;An.setAttribute("aria-haspopup","dialog");const Dn=new $n({data:{color:kn.color,titleObj:kn.titleObj,modificationDate:kn.modificationDate,contentsObj:kn.contentsObj,richText:kn.richText,parentRect:kn.rect,borderStyle:0,id:`popup_${kn.id}`,rotation:kn.rotation},parent:this.parent,elements:[this]});this.parent.div.append(Dn.render())}render(){(0,vr.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(An,kn=null){const Dn=[];if(this._fieldObjects){const Vn=this._fieldObjects[An];if(Vn)for(const{page:zn,id:Xn,exportValues:Zn}of Vn){if(zn===-1||Xn===kn)continue;const Pi=typeof Zn=="string"?Zn:null,Ya=document.querySelector(`[data-element-id="${Xn}"]`);if(Ya&&!Br.has(Ya)){(0,vr.warn)(`_getElementsByName - element not allowed: ${Xn}`);continue}Dn.push({id:Xn,exportValue:Pi,domElement:Ya})}return Dn}for(const Vn of document.getElementsByName(An)){const{exportValue:zn}=Vn,Xn=Vn.getAttribute("data-element-id");Xn!==kn&&Br.has(Vn)&&Dn.push({id:Xn,exportValue:zn,domElement:Vn})}return Dn}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const An=this.getElementsToTriggerPopup();if(Array.isArray(An))for(const kn of An)kn.classList.add("highlightArea");else An.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:An,data:{id:kn}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:An,editId:kn})})}}class zr extends qr{constructor(An,kn=null){super(An,{isRenderable:!0,ignoreBorder:!!kn?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=An.data.isTooltipOnly}render(){const{data:An,linkService:kn}=this,Dn=document.createElement("a");Dn.setAttribute("data-element-id",An.id);let Vn=!1;return An.url?(kn.addLinkAttributes(Dn,An.url,An.newWindow),Vn=!0):An.action?(this._bindNamedAction(Dn,An.action),Vn=!0):An.attachment?(this._bindAttachment(Dn,An.attachment),Vn=!0):An.setOCGState?(this.#t(Dn,An.setOCGState),Vn=!0):An.dest?(this._bindLink(Dn,An.dest),Vn=!0):(An.actions&&(An.actions.Action||An.actions["Mouse Up"]||An.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(Dn,An),Vn=!0),An.resetForm?(this._bindResetFormAction(Dn,An.resetForm),Vn=!0):this.isTooltipOnly&&!Vn&&(this._bindLink(Dn,""),Vn=!0)),this.container.classList.add("linkAnnotation"),Vn&&this.container.append(Dn),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(An,kn){An.href=this.linkService.getDestinationHash(kn),An.onclick=()=>(kn&&this.linkService.goToDestination(kn),!1),(kn||kn==="")&&this.#e()}_bindNamedAction(An,kn){An.href=this.linkService.getAnchorUrl(""),An.onclick=()=>(this.linkService.executeNamedAction(kn),!1),this.#e()}_bindAttachment(An,kn){An.href=this.linkService.getAnchorUrl(""),An.onclick=()=>(this.downloadManager?.openOrDownloadData(this.container,kn.content,kn.filename),!1),this.#e()}#t(An,kn){An.href=this.linkService.getAnchorUrl(""),An.onclick=()=>(this.linkService.executeSetOCGState(kn),!1),this.#e()}_bindJSAction(An,kn){An.href=this.linkService.getAnchorUrl("");const Dn=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const Vn of Object.keys(kn.actions)){const zn=Dn.get(Vn);zn&&(An[zn]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:kn.id,name:Vn}}),!1))}An.onclick||(An.onclick=()=>!1),this.#e()}_bindResetFormAction(An,kn){const Dn=An.onclick;if(Dn||(An.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){(0,vr.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),Dn||(An.onclick=()=>!1);return}An.onclick=()=>{Dn?.();const{fields:Vn,refs:zn,include:Xn}=kn,Zn=[];if(Vn.length!==0||zn.length!==0){const Bi=new Set(zn);for(const zi of Vn){const Xi=this._fieldObjects[zi]||[];for(const{id:Ji}of Xi)Bi.add(Ji)}for(const zi of Object.values(this._fieldObjects))for(const Xi of zi)Bi.has(Xi.id)===Xn&&Zn.push(Xi)}else for(const Bi of Object.values(this._fieldObjects))Zn.push(...Bi);const Pi=this.annotationStorage,Ya=[];for(const Bi of Zn){const{id:zi}=Bi;switch(Ya.push(zi),Bi.type){case"text":{const Ji=Bi.defaultValue||"";Pi.setValue(zi,{value:Ji});break}case"checkbox":case"radiobutton":{const Ji=Bi.defaultValue===Bi.exportValues;Pi.setValue(zi,{value:Ji});break}case"combobox":case"listbox":{const Ji=Bi.defaultValue||"";Pi.setValue(zi,{value:Ji});break}default:continue}const Xi=document.querySelector(`[data-element-id="${zi}"]`);if(Xi){if(!Br.has(Xi)){(0,vr.warn)(`_bindResetFormAction - element not allowed: ${zi}`);continue}}else continue;Xi.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Ya,name:"ResetForm"}}),!1}}}class Qr extends qr{constructor(An){super(An,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const An=document.createElement("img");return An.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",An.alt="[{{type}} Annotation]",An.dataset.l10nId="text_annotation_type",An.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(An),this.container}}class sn extends qr{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(An){this.data.hasOwnCanvas&&(An.previousSibling?.nodeName==="CANVAS"&&(An.previousSibling.hidden=!0),An.hidden=!1)}_getKeyModifier(An){const{isWin:kn,isMac:Dn}=vr.FeatureTest.platform;return kn&&An.ctrlKey||Dn&&An.metaKey}_setEventListener(An,kn,Dn,Vn,zn){Dn.includes("mouse")?An.addEventListener(Dn,Xn=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:Vn,value:zn(Xn),shift:Xn.shiftKey,modifier:this._getKeyModifier(Xn)}})}):An.addEventListener(Dn,Xn=>{if(Dn==="blur"){if(!kn.focused||!Xn.relatedTarget)return;kn.focused=!1}else if(Dn==="focus"){if(kn.focused)return;kn.focused=!0}zn&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:Vn,value:zn(Xn)}})})}_setEventListeners(An,kn,Dn,Vn){for(const[zn,Xn]of Dn)(Xn==="Action"||this.data.actions?.[Xn])&&((Xn==="Focus"||Xn==="Blur")&&(kn||={focused:!1}),this._setEventListener(An,kn,zn,Xn,Vn),Xn==="Focus"&&!this.data.actions?.Blur?this._setEventListener(An,kn,"blur","Blur",null):Xn==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(An,kn,"focus","Focus",null))}_setBackgroundColor(An){const kn=this.data.backgroundColor||null;An.style.backgroundColor=kn===null?"transparent":vr.Util.makeHexColor(kn[0],kn[1],kn[2])}_setTextStyle(An){const kn=["left","center","right"],{fontColor:Dn}=this.data.defaultAppearanceData,Vn=this.data.defaultAppearanceData.fontSize||Dr,zn=An.style;let Xn;const Zn=2,Pi=Ya=>Math.round(10*Ya)/10;if(this.data.multiLine){const Ya=Math.abs(this.data.rect[3]-this.data.rect[1]-Zn),Bi=Math.round(Ya/(vr.LINE_FACTOR*Vn))||1,zi=Ya/Bi;Xn=Math.min(Vn,Pi(zi/vr.LINE_FACTOR))}else{const Ya=Math.abs(this.data.rect[3]-this.data.rect[1]-Zn);Xn=Math.min(Vn,Pi(Ya/vr.LINE_FACTOR))}zn.fontSize=`calc(${Xn}px * var(--scale-factor))`,zn.color=vr.Util.makeHexColor(Dn[0],Dn[1],Dn[2]),this.data.textAlignment!==null&&(zn.textAlign=kn[this.data.textAlignment])}_setRequired(An,kn){kn?An.setAttribute("required",!0):An.removeAttribute("required"),An.setAttribute("aria-required",kn)}}class hn extends sn{constructor(An){const kn=An.renderForms||!An.data.hasAppearance&&!!An.data.fieldValue;super(An,{isRenderable:kn})}setPropertyOnSiblings(An,kn,Dn,Vn){const zn=this.annotationStorage;for(const Xn of this._getElementsByName(An.name,An.id))Xn.domElement&&(Xn.domElement[kn]=Dn),zn.setValue(Xn.id,{[Vn]:Dn})}render(){const An=this.annotationStorage,kn=this.data.id;this.container.classList.add("textWidgetAnnotation");let Dn=null;if(this.renderForms){const Vn=An.getValue(kn,{value:this.data.fieldValue});let zn=Vn.value||"";const Xn=An.getValue(kn,{charLimit:this.data.maxLen}).charLimit;Xn&&zn.length>Xn&&(zn=zn.slice(0,Xn));let Zn=Vn.formattedValue||this.data.textContent?.join(`
`)||null;Zn&&this.data.comb&&(Zn=Zn.replaceAll(/\s+/g,""));const Pi={userValue:zn,formattedValue:Zn,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(Dn=document.createElement("textarea"),Dn.textContent=Zn??zn,this.data.doNotScroll&&(Dn.style.overflowY="hidden")):(Dn=document.createElement("input"),Dn.type="text",Dn.setAttribute("value",Zn??zn),this.data.doNotScroll&&(Dn.style.overflowX="hidden")),this.data.hasOwnCanvas&&(Dn.hidden=!0),Br.add(Dn),Dn.setAttribute("data-element-id",kn),Dn.disabled=this.data.readOnly,Dn.name=this.data.fieldName,Dn.tabIndex=kr,this._setRequired(Dn,this.data.required),Xn&&(Dn.maxLength=Xn),Dn.addEventListener("input",Bi=>{An.setValue(kn,{value:Bi.target.value}),this.setPropertyOnSiblings(Dn,"value",Bi.target.value,"value"),Pi.formattedValue=null}),Dn.addEventListener("resetform",Bi=>{const zi=this.data.defaultFieldValue??"";Dn.value=Pi.userValue=zi,Pi.formattedValue=null});let Ya=Bi=>{const{formattedValue:zi}=Pi;zi!=null&&(Bi.target.value=zi),Bi.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){Dn.addEventListener("focus",zi=>{if(Pi.focused)return;const{target:Xi}=zi;Pi.userValue&&(Xi.value=Pi.userValue),Pi.lastCommittedValue=Xi.value,Pi.commitKey=1,Pi.focused=!0}),Dn.addEventListener("updatefromsandbox",zi=>{this.showElementAndHideCanvas(zi.target);const Xi={value(Ji){Pi.userValue=Ji.detail.value??"",An.setValue(kn,{value:Pi.userValue.toString()}),Ji.target.value=Pi.userValue},formattedValue(Ji){const{formattedValue:ns}=Ji.detail;Pi.formattedValue=ns,ns!=null&&Ji.target!==document.activeElement&&(Ji.target.value=ns),An.setValue(kn,{formattedValue:ns})},selRange(Ji){Ji.target.setSelectionRange(...Ji.detail.selRange)},charLimit:Ji=>{const{charLimit:ns}=Ji.detail,{target:ps}=Ji;if(ns===0){ps.removeAttribute("maxLength");return}ps.setAttribute("maxLength",ns);let ls=Pi.userValue;!ls||ls.length<=ns||(ls=ls.slice(0,ns),ps.value=Pi.userValue=ls,An.setValue(kn,{value:ls}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:kn,name:"Keystroke",value:ls,willCommit:!0,commitKey:1,selStart:ps.selectionStart,selEnd:ps.selectionEnd}}))}};this._dispatchEventFromSandbox(Xi,zi)}),Dn.addEventListener("keydown",zi=>{Pi.commitKey=1;let Xi=-1;if(zi.key==="Escape"?Xi=0:zi.key==="Enter"&&!this.data.multiLine?Xi=2:zi.key==="Tab"&&(Pi.commitKey=3),Xi===-1)return;const{value:Ji}=zi.target;Pi.lastCommittedValue!==Ji&&(Pi.lastCommittedValue=Ji,Pi.userValue=Ji,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:kn,name:"Keystroke",value:Ji,willCommit:!0,commitKey:Xi,selStart:zi.target.selectionStart,selEnd:zi.target.selectionEnd}}))});const Bi=Ya;Ya=null,Dn.addEventListener("blur",zi=>{if(!Pi.focused||!zi.relatedTarget)return;Pi.focused=!1;const{value:Xi}=zi.target;Pi.userValue=Xi,Pi.lastCommittedValue!==Xi&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:kn,name:"Keystroke",value:Xi,willCommit:!0,commitKey:Pi.commitKey,selStart:zi.target.selectionStart,selEnd:zi.target.selectionEnd}}),Bi(zi)}),this.data.actions?.Keystroke&&Dn.addEventListener("beforeinput",zi=>{Pi.lastCommittedValue=null;const{data:Xi,target:Ji}=zi,{value:ns,selectionStart:ps,selectionEnd:ls}=Ji;let Li=ps,es=ls;switch(zi.inputType){case"deleteWordBackward":{const os=ns.substring(0,ps).match(/\w*[^\w]*$/);os&&(Li-=os[0].length);break}case"deleteWordForward":{const os=ns.substring(ps).match(/^[^\w]*\w*/);os&&(es+=os[0].length);break}case"deleteContentBackward":ps===ls&&(Li-=1);break;case"deleteContentForward":ps===ls&&(es+=1);break}zi.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:kn,name:"Keystroke",value:ns,change:Xi||"",willCommit:!1,selStart:Li,selEnd:es}})}),this._setEventListeners(Dn,Pi,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],zi=>zi.target.value)}if(Ya&&Dn.addEventListener("blur",Ya),this.data.comb){const zi=(this.data.rect[2]-this.data.rect[0])/Xn;Dn.classList.add("comb"),Dn.style.letterSpacing=`calc(${zi}px * var(--scale-factor) - 1ch)`}}else Dn=document.createElement("div"),Dn.textContent=this.data.fieldValue,Dn.style.verticalAlign="middle",Dn.style.display="table-cell";return this._setTextStyle(Dn),this._setBackgroundColor(Dn),this._setDefaultPropertiesFromJS(Dn),this.container.append(Dn),this.container}}class vn extends sn{constructor(An){super(An,{isRenderable:!!An.data.hasOwnCanvas})}}class yn extends sn{constructor(An){super(An,{isRenderable:An.renderForms})}render(){const An=this.annotationStorage,kn=this.data,Dn=kn.id;let Vn=An.getValue(Dn,{value:kn.exportValue===kn.fieldValue}).value;typeof Vn=="string"&&(Vn=Vn!=="Off",An.setValue(Dn,{value:Vn})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const zn=document.createElement("input");return Br.add(zn),zn.setAttribute("data-element-id",Dn),zn.disabled=kn.readOnly,this._setRequired(zn,this.data.required),zn.type="checkbox",zn.name=kn.fieldName,Vn&&zn.setAttribute("checked",!0),zn.setAttribute("exportValue",kn.exportValue),zn.tabIndex=kr,zn.addEventListener("change",Xn=>{const{name:Zn,checked:Pi}=Xn.target;for(const Ya of this._getElementsByName(Zn,Dn)){const Bi=Pi&&Ya.exportValue===kn.exportValue;Ya.domElement&&(Ya.domElement.checked=Bi),An.setValue(Ya.id,{value:Bi})}An.setValue(Dn,{value:Pi})}),zn.addEventListener("resetform",Xn=>{const Zn=kn.defaultFieldValue||"Off";Xn.target.checked=Zn===kn.exportValue}),this.enableScripting&&this.hasJSActions&&(zn.addEventListener("updatefromsandbox",Xn=>{const Zn={value(Pi){Pi.target.checked=Pi.detail.value!=="Off",An.setValue(Dn,{value:Pi.target.checked})}};this._dispatchEventFromSandbox(Zn,Xn)}),this._setEventListeners(zn,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Xn=>Xn.target.checked)),this._setBackgroundColor(zn),this._setDefaultPropertiesFromJS(zn),this.container.append(zn),this.container}}class gn extends sn{constructor(An){super(An,{isRenderable:An.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const An=this.annotationStorage,kn=this.data,Dn=kn.id;let Vn=An.getValue(Dn,{value:kn.fieldValue===kn.buttonValue}).value;typeof Vn=="string"&&(Vn=Vn!==kn.buttonValue,An.setValue(Dn,{value:Vn}));const zn=document.createElement("input");if(Br.add(zn),zn.setAttribute("data-element-id",Dn),zn.disabled=kn.readOnly,this._setRequired(zn,this.data.required),zn.type="radio",zn.name=kn.fieldName,Vn&&zn.setAttribute("checked",!0),zn.tabIndex=kr,zn.addEventListener("change",Xn=>{const{name:Zn,checked:Pi}=Xn.target;for(const Ya of this._getElementsByName(Zn,Dn))An.setValue(Ya.id,{value:!1});An.setValue(Dn,{value:Pi})}),zn.addEventListener("resetform",Xn=>{const Zn=kn.defaultFieldValue;Xn.target.checked=Zn!=null&&Zn===kn.buttonValue}),this.enableScripting&&this.hasJSActions){const Xn=kn.buttonValue;zn.addEventListener("updatefromsandbox",Zn=>{const Pi={value:Ya=>{const Bi=Xn===Ya.detail.value;for(const zi of this._getElementsByName(Ya.target.name)){const Xi=Bi&&zi.id===Dn;zi.domElement&&(zi.domElement.checked=Xi),An.setValue(zi.id,{value:Xi})}}};this._dispatchEventFromSandbox(Pi,Zn)}),this._setEventListeners(zn,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Zn=>Zn.target.checked)}return this._setBackgroundColor(zn),this._setDefaultPropertiesFromJS(zn),this.container.append(zn),this.container}}class bn extends zr{constructor(An){super(An,{ignoreBorder:An.data.hasAppearance})}render(){const An=super.render();An.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(An.title=this.data.alternativeText);const kn=An.lastChild;return this.enableScripting&&this.hasJSActions&&kn&&(this._setDefaultPropertiesFromJS(kn),kn.addEventListener("updatefromsandbox",Dn=>{this._dispatchEventFromSandbox({},Dn)})),An}}class xn extends sn{constructor(An){super(An,{isRenderable:An.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const An=this.annotationStorage,kn=this.data.id,Dn=An.getValue(kn,{value:this.data.fieldValue}),Vn=document.createElement("select");Br.add(Vn),Vn.setAttribute("data-element-id",kn),Vn.disabled=this.data.readOnly,this._setRequired(Vn,this.data.required),Vn.name=this.data.fieldName,Vn.tabIndex=kr;let zn=this.data.combo&&this.data.options.length>0;this.data.combo||(Vn.size=this.data.options.length,this.data.multiSelect&&(Vn.multiple=!0)),Vn.addEventListener("resetform",Bi=>{const zi=this.data.defaultFieldValue;for(const Xi of Vn.options)Xi.selected=Xi.value===zi});for(const Bi of this.data.options){const zi=document.createElement("option");zi.textContent=Bi.displayValue,zi.value=Bi.exportValue,Dn.value.includes(Bi.exportValue)&&(zi.setAttribute("selected",!0),zn=!1),Vn.append(zi)}let Xn=null;if(zn){const Bi=document.createElement("option");Bi.value=" ",Bi.setAttribute("hidden",!0),Bi.setAttribute("selected",!0),Vn.prepend(Bi),Xn=()=>{Bi.remove(),Vn.removeEventListener("input",Xn),Xn=null},Vn.addEventListener("input",Xn)}const Zn=Bi=>{const zi=Bi?"value":"textContent",{options:Xi,multiple:Ji}=Vn;return Ji?Array.prototype.filter.call(Xi,ns=>ns.selected).map(ns=>ns[zi]):Xi.selectedIndex===-1?null:Xi[Xi.selectedIndex][zi]};let Pi=Zn(!1);const Ya=Bi=>{const zi=Bi.target.options;return Array.prototype.map.call(zi,Xi=>({displayValue:Xi.textContent,exportValue:Xi.value}))};return this.enableScripting&&this.hasJSActions?(Vn.addEventListener("updatefromsandbox",Bi=>{const zi={value(Xi){Xn?.();const Ji=Xi.detail.value,ns=new Set(Array.isArray(Ji)?Ji:[Ji]);for(const ps of Vn.options)ps.selected=ns.has(ps.value);An.setValue(kn,{value:Zn(!0)}),Pi=Zn(!1)},multipleSelection(Xi){Vn.multiple=!0},remove(Xi){const Ji=Vn.options,ns=Xi.detail.remove;Ji[ns].selected=!1,Vn.remove(ns),Ji.length>0&&Array.prototype.findIndex.call(Ji,ls=>ls.selected)===-1&&(Ji[0].selected=!0),An.setValue(kn,{value:Zn(!0),items:Ya(Xi)}),Pi=Zn(!1)},clear(Xi){for(;Vn.length!==0;)Vn.remove(0);An.setValue(kn,{value:null,items:[]}),Pi=Zn(!1)},insert(Xi){const{index:Ji,displayValue:ns,exportValue:ps}=Xi.detail.insert,ls=Vn.children[Ji],Li=document.createElement("option");Li.textContent=ns,Li.value=ps,ls?ls.before(Li):Vn.append(Li),An.setValue(kn,{value:Zn(!0),items:Ya(Xi)}),Pi=Zn(!1)},items(Xi){const{items:Ji}=Xi.detail;for(;Vn.length!==0;)Vn.remove(0);for(const ns of Ji){const{displayValue:ps,exportValue:ls}=ns,Li=document.createElement("option");Li.textContent=ps,Li.value=ls,Vn.append(Li)}Vn.options.length>0&&(Vn.options[0].selected=!0),An.setValue(kn,{value:Zn(!0),items:Ya(Xi)}),Pi=Zn(!1)},indices(Xi){const Ji=new Set(Xi.detail.indices);for(const ns of Xi.target.options)ns.selected=Ji.has(ns.index);An.setValue(kn,{value:Zn(!0)}),Pi=Zn(!1)},editable(Xi){Xi.target.disabled=!Xi.detail.editable}};this._dispatchEventFromSandbox(zi,Bi)}),Vn.addEventListener("input",Bi=>{const zi=Zn(!0);An.setValue(kn,{value:zi}),Bi.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:kn,name:"Keystroke",value:Pi,changeEx:zi,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(Vn,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Bi=>Bi.target.value)):Vn.addEventListener("input",function(Bi){An.setValue(kn,{value:Zn(!0)})}),this.data.combo&&this._setTextStyle(Vn),this._setBackgroundColor(Vn),this._setDefaultPropertiesFromJS(Vn),this.container.append(Vn),this.container}}class $n extends qr{constructor(An){const{data:kn,elements:Dn}=An;super(An,{isRenderable:qr._hasPopupData(kn)}),this.elements=Dn}render(){this.container.classList.add("popupAnnotation");const An=new Sn({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),kn=[];for(const Dn of this.elements)Dn.popup=An,kn.push(Dn.data.id),Dn.addHighlightArea();return this.container.setAttribute("aria-controls",kn.map(Dn=>`${vr.AnnotationPrefix}${Dn}`).join(",")),this.container}}class Sn{#e=null;#t=this.#u.bind(this);#r=this.#$.bind(this);#n=this.#_.bind(this);#o=this.#b.bind(this);#s=null;#a=null;#l=null;#c=null;#i=null;#f=null;#d=!1;#h=null;#p=null;#v=null;#g=null;#m=!1;constructor({container:An,color:kn,elements:Dn,titleObj:Vn,modificationDate:zn,contentsObj:Xn,richText:Zn,parent:Pi,rect:Ya,parentRect:Bi,open:zi}){this.#a=An,this.#g=Vn,this.#l=Xn,this.#v=Zn,this.#i=Pi,this.#s=kn,this.#p=Ya,this.#f=Bi,this.#c=Dn;const Xi=xr.PDFDateString.toDateObject(zn);Xi&&(this.#e=Pi.l10n.get("annotation_date_string",{date:Xi.toLocaleDateString(),time:Xi.toLocaleTimeString()})),this.trigger=Dn.flatMap(Ji=>Ji.getElementsToTriggerPopup());for(const Ji of this.trigger)Ji.addEventListener("click",this.#o),Ji.addEventListener("mouseenter",this.#n),Ji.addEventListener("mouseleave",this.#r),Ji.classList.add("popupTriggerArea");for(const Ji of Dn)Ji.container?.addEventListener("keydown",this.#t);this.#a.hidden=!0,zi&&this.#b()}render(){if(this.#h)return;const{page:{view:An},viewport:{rawDims:{pageWidth:kn,pageHeight:Dn,pageX:Vn,pageY:zn}}}=this.#i,Xn=this.#h=document.createElement("div");if(Xn.className="popup",this.#s){const os=Xn.style.outlineColor=vr.Util.makeHexColor(...this.#s);CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?Xn.style.backgroundColor=`color-mix(in srgb, ${os} 30%, white)`:Xn.style.backgroundColor=vr.Util.makeHexColor(...this.#s.map(Is=>Math.floor(.7*(255-Is)+Is)))}const Zn=document.createElement("span");Zn.className="header";const Pi=document.createElement("h1");if(Zn.append(Pi),{dir:Pi.dir,str:Pi.textContent}=this.#g,Xn.append(Zn),this.#e){const os=document.createElement("span");os.classList.add("popupDate"),this.#e.then(ds=>{os.textContent=ds}),Zn.append(os)}const Ya=this.#l,Bi=this.#v;if(Bi?.str&&(!Ya?.str||Ya.str===Bi.str))Rr.XfaLayer.render({xfaHtml:Bi.html,intent:"richText",div:Xn}),Xn.lastChild.classList.add("richText","popupContent");else{const os=this._formatContents(Ya);Xn.append(os)}let zi=!!this.#f,Xi=zi?this.#f:this.#p;for(const os of this.#c)if(!Xi||vr.Util.intersect(os.data.rect,Xi)!==null){Xi=os.data.rect,zi=!0;break}const Ji=vr.Util.normalizeRect([Xi[0],An[3]-Xi[1]+An[1],Xi[2],An[3]-Xi[3]+An[1]]),ps=zi?Xi[2]-Xi[0]+5:0,ls=Ji[0]+ps,Li=Ji[1],{style:es}=this.#a;es.left=`${100*(ls-Vn)/kn}%`,es.top=`${100*(Li-zn)/Dn}%`,this.#a.append(Xn)}_formatContents({str:An,dir:kn}){const Dn=document.createElement("p");Dn.classList.add("popupContent"),Dn.dir=kn;const Vn=An.split(/(?:\r\n?|\n)/);for(let zn=0,Xn=Vn.length;zn<Xn;++zn){const Zn=Vn[zn];Dn.append(document.createTextNode(Zn)),zn<Xn-1&&Dn.append(document.createElement("br"))}return Dn}#u(An){An.altKey||An.shiftKey||An.ctrlKey||An.metaKey||(An.key==="Enter"||An.key==="Escape"&&this.#d)&&this.#b()}#b(){this.#d=!this.#d,this.#d?(this.#_(),this.#a.addEventListener("click",this.#o),this.#a.addEventListener("keydown",this.#t)):(this.#$(),this.#a.removeEventListener("click",this.#o),this.#a.removeEventListener("keydown",this.#t))}#_(){this.#h||this.render(),this.isVisible?this.#d&&this.#a.classList.add("focused"):(this.#a.hidden=!1,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)+1e3)}#$(){this.#a.classList.remove("focused"),!(this.#d||!this.isVisible)&&(this.#a.hidden=!0,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)-1e3)}forceHide(){this.#m=this.isVisible,this.#m&&(this.#a.hidden=!0)}maybeShow(){this.#m&&(this.#m=!1,this.#a.hidden=!1)}get isVisible(){return this.#a.hidden===!1}}class Cn extends qr{constructor(An){super(An,{isRenderable:!0,ignoreBorder:!0}),this.textContent=An.data.textContent,this.textPosition=An.data.textPosition,this.annotationEditorType=vr.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const An=document.createElement("div");An.classList.add("annotationTextContent"),An.setAttribute("role","comment");for(const kn of this.textContent){const Dn=document.createElement("span");Dn.textContent=kn,An.append(Dn)}this.container.append(An)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}hr.FreeTextAnnotationElement=Cn;class Rn extends qr{#e=null;constructor(An){super(An,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const An=this.data,{width:kn,height:Dn}=Hr(An.rect),Vn=this.svgFactory.create(kn,Dn,!0),zn=this.#e=this.svgFactory.createElement("svg:line");return zn.setAttribute("x1",An.rect[2]-An.lineCoordinates[0]),zn.setAttribute("y1",An.rect[3]-An.lineCoordinates[1]),zn.setAttribute("x2",An.rect[2]-An.lineCoordinates[2]),zn.setAttribute("y2",An.rect[3]-An.lineCoordinates[3]),zn.setAttribute("stroke-width",An.borderStyle.width||1),zn.setAttribute("stroke","transparent"),zn.setAttribute("fill","transparent"),Vn.append(zn),this.container.append(Vn),!An.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class Bn extends qr{#e=null;constructor(An){super(An,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const An=this.data,{width:kn,height:Dn}=Hr(An.rect),Vn=this.svgFactory.create(kn,Dn,!0),zn=An.borderStyle.width,Xn=this.#e=this.svgFactory.createElement("svg:rect");return Xn.setAttribute("x",zn/2),Xn.setAttribute("y",zn/2),Xn.setAttribute("width",kn-zn),Xn.setAttribute("height",Dn-zn),Xn.setAttribute("stroke-width",zn||1),Xn.setAttribute("stroke","transparent"),Xn.setAttribute("fill","transparent"),Vn.append(Xn),this.container.append(Vn),!An.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class Fn extends qr{#e=null;constructor(An){super(An,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const An=this.data,{width:kn,height:Dn}=Hr(An.rect),Vn=this.svgFactory.create(kn,Dn,!0),zn=An.borderStyle.width,Xn=this.#e=this.svgFactory.createElement("svg:ellipse");return Xn.setAttribute("cx",kn/2),Xn.setAttribute("cy",Dn/2),Xn.setAttribute("rx",kn/2-zn/2),Xn.setAttribute("ry",Dn/2-zn/2),Xn.setAttribute("stroke-width",zn||1),Xn.setAttribute("stroke","transparent"),Xn.setAttribute("fill","transparent"),Vn.append(Xn),this.container.append(Vn),!An.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class Hn extends qr{#e=null;constructor(An){super(An,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const An=this.data,{width:kn,height:Dn}=Hr(An.rect),Vn=this.svgFactory.create(kn,Dn,!0);let zn=[];for(const Zn of An.vertices){const Pi=Zn.x-An.rect[0],Ya=An.rect[3]-Zn.y;zn.push(Pi+","+Ya)}zn=zn.join(" ");const Xn=this.#e=this.svgFactory.createElement(this.svgElementName);return Xn.setAttribute("points",zn),Xn.setAttribute("stroke-width",An.borderStyle.width||1),Xn.setAttribute("stroke","transparent"),Xn.setAttribute("fill","transparent"),Vn.append(Xn),this.container.append(Vn),!An.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class Gn extends Hn{constructor(An){super(An),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class qn extends qr{constructor(An){super(An,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class On extends qr{#e=[];constructor(An){super(An,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=vr.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const An=this.data,{width:kn,height:Dn}=Hr(An.rect),Vn=this.svgFactory.create(kn,Dn,!0);for(const zn of An.inkLists){let Xn=[];for(const Pi of zn){const Ya=Pi.x-An.rect[0],Bi=An.rect[3]-Pi.y;Xn.push(`${Ya},${Bi}`)}Xn=Xn.join(" ");const Zn=this.svgFactory.createElement(this.svgElementName);this.#e.push(Zn),Zn.setAttribute("points",Xn),Zn.setAttribute("stroke-width",An.borderStyle.width||1),Zn.setAttribute("stroke","transparent"),Zn.setAttribute("fill","transparent"),!An.popupRef&&this.hasPopupData&&this._createPopup(),Vn.append(Zn)}return this.container.append(Vn),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}hr.InkAnnotationElement=On;class wn extends qr{constructor(An){super(An,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class _n extends qr{constructor(An){super(An,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class Tn extends qr{constructor(An){super(An,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Mn extends qr{constructor(An){super(An,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Ln extends qr{constructor(An){super(An,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}hr.StampAnnotationElement=Ln;class jn extends qr{#e=null;constructor(An){super(An,{isRenderable:!0});const{filename:kn,content:Dn}=this.data.file;this.filename=(0,xr.getFilenameFromUrl)(kn,!0),this.content=Dn,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:kn,content:Dn})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:An,data:kn}=this;let Dn;kn.hasAppearance||kn.fillAlpha===0?Dn=document.createElement("div"):(Dn=document.createElement("img"),Dn.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(kn.name)?"paperclip":"pushpin"}.svg`,kn.fillAlpha&&kn.fillAlpha<1&&(Dn.style=`filter: opacity(${Math.round(kn.fillAlpha*100)}%);`)),Dn.addEventListener("dblclick",this.#t.bind(this)),this.#e=Dn;const{isMac:Vn}=vr.FeatureTest.platform;return An.addEventListener("keydown",zn=>{zn.key==="Enter"&&(Vn?zn.metaKey:zn.ctrlKey)&&this.#t()}),!kn.popupRef&&this.hasPopupData?this._createPopup():Dn.classList.add("popupTriggerArea"),An.append(Dn),An}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)}}class Kn{#e=null;#t=null;#r=new Map;constructor({div:An,accessibilityManager:kn,annotationCanvasMap:Dn,l10n:Vn,page:zn,viewport:Xn}){this.div=An,this.#e=kn,this.#t=Dn,this.l10n=Vn,this.page=zn,this.viewport=Xn,this.zIndex=0,this.l10n||=wr.NullL10n}#n(An,kn){const Dn=An.firstChild||An;Dn.id=`${vr.AnnotationPrefix}${kn}`,this.div.append(An),this.#e?.moveElementInDOM(this.div,An,Dn,!1)}async render(An){const{annotations:kn}=An,Dn=this.div;(0,xr.setLayerDimensions)(Dn,this.viewport);const Vn=new Map,zn={data:null,layer:Dn,linkService:An.linkService,downloadManager:An.downloadManager,imageResourcesPath:An.imageResourcesPath||"",renderForms:An.renderForms!==!1,svgFactory:new xr.DOMSVGFactory,annotationStorage:An.annotationStorage||new Er.AnnotationStorage,enableScripting:An.enableScripting===!0,hasJSActions:An.hasJSActions,fieldObjects:An.fieldObjects,parent:this,elements:null};for(const Xn of kn){if(Xn.noHTML)continue;const Zn=Xn.annotationType===vr.AnnotationType.POPUP;if(Zn){const Bi=Vn.get(Xn.id);if(!Bi)continue;zn.elements=Bi}else{const{width:Bi,height:zi}=Hr(Xn.rect);if(Bi<=0||zi<=0)continue}zn.data=Xn;const Pi=Gr.create(zn);if(!Pi.isRenderable)continue;if(!Zn&&Xn.popupRef){const Bi=Vn.get(Xn.popupRef);Bi?Bi.push(Pi):Vn.set(Xn.popupRef,[Pi])}Pi.annotationEditorType>0&&this.#r.set(Pi.data.id,Pi);const Ya=Pi.render();Xn.hidden&&(Ya.style.visibility="hidden"),this.#n(Ya,Xn.id)}this.#o(),await this.l10n.translate(Dn)}update({viewport:An}){const kn=this.div;this.viewport=An,(0,xr.setLayerDimensions)(kn,{rotation:An.rotation}),this.#o(),kn.hidden=!1}#o(){if(!this.#t)return;const An=this.div;for(const[kn,Dn]of this.#t){const Vn=An.querySelector(`[data-annotation-id="${kn}"]`);if(!Vn)continue;const{firstChild:zn}=Vn;zn?zn.nodeName==="CANVAS"?zn.replaceWith(Dn):zn.before(Dn):Vn.append(Dn)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#r.values())}getEditableAnnotation(An){return this.#r.get(An)}}hr.AnnotationLayer=Kn},(mr,hr)=>{Object.defineProperty(hr,"__esModule",{value:!0}),hr.ColorConverters=void 0;function gr(Er){return Math.floor(Math.max(0,Math.min(1,Er))*255).toString(16).padStart(2,"0")}function vr(Er){return Math.max(0,Math.min(255,255*Er))}class xr{static CMYK_G([Cr,wr,Rr,kr]){return["G",1-Math.min(1,.3*Cr+.59*Rr+.11*wr+kr)]}static G_CMYK([Cr]){return["CMYK",0,0,0,1-Cr]}static G_RGB([Cr]){return["RGB",Cr,Cr,Cr]}static G_rgb([Cr]){return Cr=vr(Cr),[Cr,Cr,Cr]}static G_HTML([Cr]){const wr=gr(Cr);return`#${wr}${wr}${wr}`}static RGB_G([Cr,wr,Rr]){return["G",.3*Cr+.59*wr+.11*Rr]}static RGB_rgb(Cr){return Cr.map(vr)}static RGB_HTML(Cr){return`#${Cr.map(gr).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([Cr,wr,Rr,kr]){return["RGB",1-Math.min(1,Cr+kr),1-Math.min(1,Rr+kr),1-Math.min(1,wr+kr)]}static CMYK_rgb([Cr,wr,Rr,kr]){return[vr(1-Math.min(1,Cr+kr)),vr(1-Math.min(1,Rr+kr)),vr(1-Math.min(1,wr+kr))]}static CMYK_HTML(Cr){const wr=this.CMYK_RGB(Cr).slice(1);return this.RGB_HTML(wr)}static RGB_CMYK([Cr,wr,Rr]){const kr=1-Cr,Dr=1-wr,Br=1-Rr,Hr=Math.min(kr,Dr,Br);return["CMYK",kr,Dr,Br,Hr]}}hr.ColorConverters=xr},(mr,hr)=>{Object.defineProperty(hr,"__esModule",{value:!0}),hr.NullL10n=void 0,hr.getL10nFallback=vr;const gr={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};gr.print_progress_percent="{{progress}}%";function vr(Cr,wr){switch(Cr){case"find_match_count":Cr=`find_match_count[${wr.total===1?"one":"other"}]`;break;case"find_match_count_limit":Cr=`find_match_count_limit[${wr.limit===1?"one":"other"}]`;break}return gr[Cr]||""}function xr(Cr,wr){return wr?Cr.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(Rr,kr)=>kr in wr?wr[kr]:"{{"+kr+"}}"):Cr}const Er={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(Cr,wr=null,Rr=vr(Cr,wr)){return xr(Rr,wr)},async translate(Cr){}};hr.NullL10n=Er},(mr,hr,gr)=>{Object.defineProperty(hr,"__esModule",{value:!0}),hr.XfaLayer=void 0;var vr=gr(25);class xr{static setupStorage(Cr,wr,Rr,kr,Dr){const Br=kr.getValue(wr,{value:null});switch(Rr.name){case"textarea":if(Br.value!==null&&(Cr.textContent=Br.value),Dr==="print")break;Cr.addEventListener("input",Hr=>{kr.setValue(wr,{value:Hr.target.value})});break;case"input":if(Rr.attributes.type==="radio"||Rr.attributes.type==="checkbox"){if(Br.value===Rr.attributes.xfaOn?Cr.setAttribute("checked",!0):Br.value===Rr.attributes.xfaOff&&Cr.removeAttribute("checked"),Dr==="print")break;Cr.addEventListener("change",Hr=>{kr.setValue(wr,{value:Hr.target.checked?Hr.target.getAttribute("xfaOn"):Hr.target.getAttribute("xfaOff")})})}else{if(Br.value!==null&&Cr.setAttribute("value",Br.value),Dr==="print")break;Cr.addEventListener("input",Hr=>{kr.setValue(wr,{value:Hr.target.value})})}break;case"select":if(Br.value!==null){Cr.setAttribute("value",Br.value);for(const Hr of Rr.children)Hr.attributes.value===Br.value?Hr.attributes.selected=!0:Hr.attributes.hasOwnProperty("selected")&&delete Hr.attributes.selected}Cr.addEventListener("input",Hr=>{const Gr=Hr.target.options,qr=Gr.selectedIndex===-1?"":Gr[Gr.selectedIndex].value;kr.setValue(wr,{value:qr})});break}}static setAttributes({html:Cr,element:wr,storage:Rr=null,intent:kr,linkService:Dr}){const{attributes:Br}=wr,Hr=Cr instanceof HTMLAnchorElement;Br.type==="radio"&&(Br.name=`${Br.name}-${kr}`);for(const[Gr,qr]of Object.entries(Br))if(qr!=null)switch(Gr){case"class":qr.length&&Cr.setAttribute(Gr,qr.join(" "));break;case"dataId":break;case"id":Cr.setAttribute("data-element-id",qr);break;case"style":Object.assign(Cr.style,qr);break;case"textContent":Cr.textContent=qr;break;default:(!Hr||Gr!=="href"&&Gr!=="newWindow")&&Cr.setAttribute(Gr,qr)}Hr&&Dr.addLinkAttributes(Cr,Br.href,Br.newWindow),Rr&&Br.dataId&&this.setupStorage(Cr,Br.dataId,wr,Rr)}static render(Cr){const wr=Cr.annotationStorage,Rr=Cr.linkService,kr=Cr.xfaHtml,Dr=Cr.intent||"display",Br=document.createElement(kr.name);kr.attributes&&this.setAttributes({html:Br,element:kr,intent:Dr,linkService:Rr});const Hr=[[kr,-1,Br]],Gr=Cr.div;if(Gr.append(Br),Cr.viewport){const zr=`matrix(${Cr.viewport.transform.join(",")})`;Gr.style.transform=zr}Dr!=="richText"&&Gr.setAttribute("class","xfaLayer xfaFont");const qr=[];for(;Hr.length>0;){const[zr,Qr,sn]=Hr.at(-1);if(Qr+1===zr.children.length){Hr.pop();continue}const hn=zr.children[++Hr.at(-1)[1]];if(hn===null)continue;const{name:vn}=hn;if(vn==="#text"){const gn=document.createTextNode(hn.value);qr.push(gn),sn.append(gn);continue}const yn=hn?.attributes?.xmlns?document.createElementNS(hn.attributes.xmlns,vn):document.createElement(vn);if(sn.append(yn),hn.attributes&&this.setAttributes({html:yn,element:hn,storage:wr,intent:Dr,linkService:Rr}),hn.children&&hn.children.length>0)Hr.push([hn,-1,yn]);else if(hn.value){const gn=document.createTextNode(hn.value);vr.XfaText.shouldBuildText(vn)&&qr.push(gn),yn.append(gn)}}for(const zr of Gr.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))zr.setAttribute("readOnly",!0);return{textDivs:qr}}static update(Cr){const wr=`matrix(${Cr.viewport.transform.join(",")})`;Cr.div.style.transform=wr,Cr.div.hidden=!1}}hr.XfaLayer=xr},(mr,hr,gr)=>{Object.defineProperty(hr,"__esModule",{value:!0}),hr.InkEditor=void 0;var vr=gr(1),xr=gr(4),Er=gr(29),Cr=gr(6),wr=gr(5);class Rr extends xr.AnnotationEditor{#e=0;#t=0;#r=this.canvasPointermove.bind(this);#n=this.canvasPointerleave.bind(this);#o=this.canvasPointerup.bind(this);#s=this.canvasPointerdown.bind(this);#a=new Path2D;#l=!1;#c=!1;#i=!1;#f=null;#d=0;#h=0;#p=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type="ink";constructor(Dr){super({...Dr,name:"inkEditor"}),this.color=Dr.color||null,this.thickness=Dr.thickness||null,this.opacity=Dr.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(Dr){xr.AnnotationEditor.initialize(Dr,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(Dr,Br){switch(Dr){case vr.AnnotationEditorParamsType.INK_THICKNESS:Rr._defaultThickness=Br;break;case vr.AnnotationEditorParamsType.INK_COLOR:Rr._defaultColor=Br;break;case vr.AnnotationEditorParamsType.INK_OPACITY:Rr._defaultOpacity=Br/100;break}}updateParams(Dr,Br){switch(Dr){case vr.AnnotationEditorParamsType.INK_THICKNESS:this.#v(Br);break;case vr.AnnotationEditorParamsType.INK_COLOR:this.#g(Br);break;case vr.AnnotationEditorParamsType.INK_OPACITY:this.#m(Br);break}}static get defaultPropertiesToUpdate(){return[[vr.AnnotationEditorParamsType.INK_THICKNESS,Rr._defaultThickness],[vr.AnnotationEditorParamsType.INK_COLOR,Rr._defaultColor||xr.AnnotationEditor._defaultLineColor],[vr.AnnotationEditorParamsType.INK_OPACITY,Math.round(Rr._defaultOpacity*100)]]}get propertiesToUpdate(){return[[vr.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Rr._defaultThickness],[vr.AnnotationEditorParamsType.INK_COLOR,this.color||Rr._defaultColor||xr.AnnotationEditor._defaultLineColor],[vr.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??Rr._defaultOpacity))]]}#v(Dr){const Br=this.thickness;this.addCommands({cmd:()=>{this.thickness=Dr,this.#T()},undo:()=>{this.thickness=Br,this.#T()},mustExec:!0,type:vr.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#g(Dr){const Br=this.color;this.addCommands({cmd:()=>{this.color=Dr,this.#y()},undo:()=>{this.color=Br,this.#y()},mustExec:!0,type:vr.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#m(Dr){Dr/=100;const Br=this.opacity;this.addCommands({cmd:()=>{this.opacity=Dr,this.#y()},undo:()=>{this.opacity=Br,this.#y()},mustExec:!0,type:vr.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(this.#R(),this.#I()),this.isAttachedToDOM||(this.parent.add(this),this.#x()),this.#T()))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#f.disconnect(),this.#f=null,super.remove())}setParent(Dr){!this.parent&&Dr?this._uiManager.removeShouldRescale(this):this.parent&&Dr===null&&this._uiManager.addShouldRescale(this),super.setParent(Dr)}onScaleChanging(){const[Dr,Br]=this.parentDimensions,Hr=this.width*Dr,Gr=this.height*Br;this.setDimensions(Hr,Gr)}enableEditMode(){this.#l||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",this.#s))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",this.#s))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}#u(){const{parentRotation:Dr,parentDimensions:[Br,Hr]}=this;switch(Dr){case 90:return[0,Hr,Hr,Br];case 180:return[Br,Hr,Br,Hr];case 270:return[Br,0,Hr,Br];default:return[0,0,Br,Hr]}}#b(){const{ctx:Dr,color:Br,opacity:Hr,thickness:Gr,parentScale:qr,scaleFactor:zr}=this;Dr.lineWidth=Gr*qr/zr,Dr.lineCap="round",Dr.lineJoin="round",Dr.miterLimit=10,Dr.strokeStyle=`${Br}${(0,wr.opacityToHex)(Hr)}`}#_(Dr,Br){this.canvas.addEventListener("contextmenu",Cr.noContextMenu),this.canvas.addEventListener("pointerleave",this.#n),this.canvas.addEventListener("pointermove",this.#r),this.canvas.addEventListener("pointerup",this.#o),this.canvas.removeEventListener("pointerdown",this.#s),this.isEditing=!0,this.#i||(this.#i=!0,this.#x(),this.thickness||=Rr._defaultThickness,this.color||=Rr._defaultColor||xr.AnnotationEditor._defaultLineColor,this.opacity??=Rr._defaultOpacity),this.currentPath.push([Dr,Br]),this.#c=!1,this.#b(),this.#p=()=>{this.#D(),this.#p&&window.requestAnimationFrame(this.#p)},window.requestAnimationFrame(this.#p)}#$(Dr,Br){const[Hr,Gr]=this.currentPath.at(-1);if(this.currentPath.length>1&&Dr===Hr&&Br===Gr)return;const qr=this.currentPath;let zr=this.#a;if(qr.push([Dr,Br]),this.#c=!0,qr.length<=2){zr.moveTo(...qr[0]),zr.lineTo(Dr,Br);return}qr.length===3&&(this.#a=zr=new Path2D,zr.moveTo(...qr[0])),this.#L(zr,...qr.at(-3),...qr.at(-2),Dr,Br)}#A(){if(this.currentPath.length===0)return;const Dr=this.currentPath.at(-1);this.#a.lineTo(...Dr)}#w(Dr,Br){this.#p=null,Dr=Math.min(Math.max(Dr,0),this.canvas.width),Br=Math.min(Math.max(Br,0),this.canvas.height),this.#$(Dr,Br),this.#A();let Hr;if(this.currentPath.length!==1)Hr=this.#O();else{const sn=[Dr,Br];Hr=[[sn,sn.slice(),sn.slice(),sn]]}const Gr=this.#a,qr=this.currentPath;this.currentPath=[],this.#a=new Path2D;const zr=()=>{this.allRawPaths.push(qr),this.paths.push(Hr),this.bezierPath2D.push(Gr),this.rebuild()},Qr=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(this.#R(),this.#I()),this.#T())};this.addCommands({cmd:zr,undo:Qr,mustExec:!0})}#D(){if(!this.#c)return;this.#c=!1;const Dr=Math.ceil(this.thickness*this.parentScale),Br=this.currentPath.slice(-3),Hr=Br.map(zr=>zr[0]),Gr=Br.map(zr=>zr[1]);Math.min(...Hr)-Dr,Math.max(...Hr)+Dr,Math.min(...Gr)-Dr,Math.max(...Gr)+Dr;const{ctx:qr}=this;qr.save(),qr.clearRect(0,0,this.canvas.width,this.canvas.height);for(const zr of this.bezierPath2D)qr.stroke(zr);qr.stroke(this.#a),qr.restore()}#L(Dr,Br,Hr,Gr,qr,zr,Qr){const sn=(Br+Gr)/2,hn=(Hr+qr)/2,vn=(Gr+zr)/2,yn=(qr+Qr)/2;Dr.bezierCurveTo(sn+2*(Gr-sn)/3,hn+2*(qr-hn)/3,vn+2*(Gr-vn)/3,yn+2*(qr-yn)/3,vn,yn)}#O(){const Dr=this.currentPath;if(Dr.length<=2)return[[Dr[0],Dr[0],Dr.at(-1),Dr.at(-1)]];const Br=[];let Hr,[Gr,qr]=Dr[0];for(Hr=1;Hr<Dr.length-2;Hr++){const[gn,bn]=Dr[Hr],[xn,$n]=Dr[Hr+1],Sn=(gn+xn)/2,Cn=(bn+$n)/2,Rn=[Gr+2*(gn-Gr)/3,qr+2*(bn-qr)/3],Bn=[Sn+2*(gn-Sn)/3,Cn+2*(bn-Cn)/3];Br.push([[Gr,qr],Rn,Bn,[Sn,Cn]]),[Gr,qr]=[Sn,Cn]}const[zr,Qr]=Dr[Hr],[sn,hn]=Dr[Hr+1],vn=[Gr+2*(zr-Gr)/3,qr+2*(Qr-qr)/3],yn=[sn+2*(zr-sn)/3,hn+2*(Qr-hn)/3];return Br.push([[Gr,qr],vn,yn,[sn,hn]]),Br}#y(){if(this.isEmpty()){this.#S();return}this.#b();const{canvas:Dr,ctx:Br}=this;Br.setTransform(1,0,0,1,0,0),Br.clearRect(0,0,Dr.width,Dr.height),this.#S();for(const Hr of this.bezierPath2D)Br.stroke(Hr)}commit(){this.#l||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#l=!0,this.div.classList.add("disabled"),this.#T(!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(Dr){this._focusEventsAllowed&&(super.focusin(Dr),this.enableEditMode())}canvasPointerdown(Dr){Dr.button!==0||!this.isInEditMode()||this.#l||(this.setInForeground(),Dr.preventDefault(),Dr.type!=="mouse"&&this.div.focus(),this.#_(Dr.offsetX,Dr.offsetY))}canvasPointermove(Dr){Dr.preventDefault(),this.#$(Dr.offsetX,Dr.offsetY)}canvasPointerup(Dr){Dr.preventDefault(),this.#P(Dr)}canvasPointerleave(Dr){this.#P(Dr)}#P(Dr){this.canvas.removeEventListener("pointerleave",this.#n),this.canvas.removeEventListener("pointermove",this.#r),this.canvas.removeEventListener("pointerup",this.#o),this.canvas.addEventListener("pointerdown",this.#s),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",Cr.noContextMenu)},10),this.#w(Dr.offsetX,Dr.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#R(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",xr.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(Dr=>this.canvas?.setAttribute("aria-label",Dr)),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#I(){this.#f=new ResizeObserver(Dr=>{const Br=Dr[0].contentRect;Br.width&&Br.height&&this.setDimensions(Br.width,Br.height)}),this.#f.observe(this.div)}get isResizable(){return!this.isEmpty()&&this.#l}render(){if(this.div)return this.div;let Dr,Br;this.width&&(Dr=this.x,Br=this.y),super.render(),xr.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(Qr=>this.div?.setAttribute("aria-label",Qr));const[Hr,Gr,qr,zr]=this.#u();if(this.setAt(Hr,Gr,0,0),this.setDims(qr,zr),this.#R(),this.width){const[Qr,sn]=this.parentDimensions;this.setAspectRatio(this.width*Qr,this.height*sn),this.setAt(Dr*Qr,Br*sn,this.width*Qr,this.height*sn),this.#i=!0,this.#x(),this.setDims(this.width*Qr,this.height*sn),this.#y(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#I(),this.div}#x(){if(!this.#i)return;const[Dr,Br]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*Dr),this.canvas.height=Math.ceil(this.height*Br),this.#S()}setDimensions(Dr,Br){const Hr=Math.round(Dr),Gr=Math.round(Br);if(this.#d===Hr&&this.#h===Gr)return;this.#d=Hr,this.#h=Gr,this.canvas.style.visibility="hidden";const[qr,zr]=this.parentDimensions;this.width=Dr/qr,this.height=Br/zr,this.fixAndSetPosition(),this.#l&&this.#C(Dr,Br),this.#x(),this.#y(),this.canvas.style.visibility="visible",this.fixDims()}#C(Dr,Br){const Hr=this.#k(),Gr=(Dr-Hr)/this.#t,qr=(Br-Hr)/this.#e;this.scaleFactor=Math.min(Gr,qr)}#S(){const Dr=this.#k()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+Dr,this.translationY*this.scaleFactor+Dr)}static#F(Dr){const Br=new Path2D;for(let Hr=0,Gr=Dr.length;Hr<Gr;Hr++){const[qr,zr,Qr,sn]=Dr[Hr];Hr===0&&Br.moveTo(...qr),Br.bezierCurveTo(zr[0],zr[1],Qr[0],Qr[1],sn[0],sn[1])}return Br}static#N(Dr,Br,Hr){const[Gr,qr,zr,Qr]=Br;switch(Hr){case 0:for(let sn=0,hn=Dr.length;sn<hn;sn+=2)Dr[sn]+=Gr,Dr[sn+1]=Qr-Dr[sn+1];break;case 90:for(let sn=0,hn=Dr.length;sn<hn;sn+=2){const vn=Dr[sn];Dr[sn]=Dr[sn+1]+Gr,Dr[sn+1]=vn+qr}break;case 180:for(let sn=0,hn=Dr.length;sn<hn;sn+=2)Dr[sn]=zr-Dr[sn],Dr[sn+1]+=qr;break;case 270:for(let sn=0,hn=Dr.length;sn<hn;sn+=2){const vn=Dr[sn];Dr[sn]=zr-Dr[sn+1],Dr[sn+1]=Qr-vn}break;default:throw new Error("Invalid rotation")}return Dr}static#j(Dr,Br,Hr){const[Gr,qr,zr,Qr]=Br;switch(Hr){case 0:for(let sn=0,hn=Dr.length;sn<hn;sn+=2)Dr[sn]-=Gr,Dr[sn+1]=Qr-Dr[sn+1];break;case 90:for(let sn=0,hn=Dr.length;sn<hn;sn+=2){const vn=Dr[sn];Dr[sn]=Dr[sn+1]-qr,Dr[sn+1]=vn-Gr}break;case 180:for(let sn=0,hn=Dr.length;sn<hn;sn+=2)Dr[sn]=zr-Dr[sn],Dr[sn+1]-=qr;break;case 270:for(let sn=0,hn=Dr.length;sn<hn;sn+=2){const vn=Dr[sn];Dr[sn]=Qr-Dr[sn+1],Dr[sn+1]=zr-vn}break;default:throw new Error("Invalid rotation")}return Dr}#B(Dr,Br,Hr,Gr){const qr=[],zr=this.thickness/2,Qr=Dr*Br+zr,sn=Dr*Hr+zr;for(const hn of this.paths){const vn=[],yn=[];for(let gn=0,bn=hn.length;gn<bn;gn++){const[xn,$n,Sn,Cn]=hn[gn],Rn=Dr*xn[0]+Qr,Bn=Dr*xn[1]+sn,Fn=Dr*$n[0]+Qr,Hn=Dr*$n[1]+sn,Gn=Dr*Sn[0]+Qr,qn=Dr*Sn[1]+sn,On=Dr*Cn[0]+Qr,wn=Dr*Cn[1]+sn;gn===0&&(vn.push(Rn,Bn),yn.push(Rn,Bn)),vn.push(Fn,Hn,Gn,qn,On,wn),yn.push(Fn,Hn),gn===bn-1&&yn.push(On,wn)}qr.push({bezier:Rr.#N(vn,Gr,this.rotation),points:Rr.#N(yn,Gr,this.rotation)})}return qr}#M(){let Dr=1/0,Br=-1/0,Hr=1/0,Gr=-1/0;for(const qr of this.paths)for(const[zr,Qr,sn,hn]of qr){const vn=vr.Util.bezierBoundingBox(...zr,...Qr,...sn,...hn);Dr=Math.min(Dr,vn[0]),Hr=Math.min(Hr,vn[1]),Br=Math.max(Br,vn[2]),Gr=Math.max(Gr,vn[3])}return[Dr,Hr,Br,Gr]}#k(){return this.#l?Math.ceil(this.thickness*this.parentScale):0}#T(Dr=!1){if(this.isEmpty())return;if(!this.#l){this.#y();return}const Br=this.#M(),Hr=this.#k();this.#t=Math.max(xr.AnnotationEditor.MIN_SIZE,Br[2]-Br[0]),this.#e=Math.max(xr.AnnotationEditor.MIN_SIZE,Br[3]-Br[1]);const Gr=Math.ceil(Hr+this.#t*this.scaleFactor),qr=Math.ceil(Hr+this.#e*this.scaleFactor),[zr,Qr]=this.parentDimensions;this.width=Gr/zr,this.height=qr/Qr,this.setAspectRatio(Gr,qr);const sn=this.translationX,hn=this.translationY;this.translationX=-Br[0],this.translationY=-Br[1],this.#x(),this.#y(),this.#d=Gr,this.#h=qr,this.setDims(Gr,qr);const vn=Dr?Hr/this.scaleFactor/2:0;this.translate(sn-this.translationX-vn,hn-this.translationY-vn)}static deserialize(Dr,Br,Hr){if(Dr instanceof Er.InkAnnotationElement)return null;const Gr=super.deserialize(Dr,Br,Hr);Gr.thickness=Dr.thickness,Gr.color=vr.Util.makeHexColor(...Dr.color),Gr.opacity=Dr.opacity;const[qr,zr]=Gr.pageDimensions,Qr=Gr.width*qr,sn=Gr.height*zr,hn=Gr.parentScale,vn=Dr.thickness/2;Gr.#l=!0,Gr.#d=Math.round(Qr),Gr.#h=Math.round(sn);const{paths:yn,rect:gn,rotation:bn}=Dr;for(let{bezier:$n}of yn){$n=Rr.#j($n,gn,bn);const Sn=[];Gr.paths.push(Sn);let Cn=hn*($n[0]-vn),Rn=hn*($n[1]-vn);for(let Fn=2,Hn=$n.length;Fn<Hn;Fn+=6){const Gn=hn*($n[Fn]-vn),qn=hn*($n[Fn+1]-vn),On=hn*($n[Fn+2]-vn),wn=hn*($n[Fn+3]-vn),_n=hn*($n[Fn+4]-vn),Tn=hn*($n[Fn+5]-vn);Sn.push([[Cn,Rn],[Gn,qn],[On,wn],[_n,Tn]]),Cn=_n,Rn=Tn}const Bn=this.#F(Sn);Gr.bezierPath2D.push(Bn)}const xn=Gr.#M();return Gr.#t=Math.max(xr.AnnotationEditor.MIN_SIZE,xn[2]-xn[0]),Gr.#e=Math.max(xr.AnnotationEditor.MIN_SIZE,xn[3]-xn[1]),Gr.#C(Qr,sn),Gr}serialize(){if(this.isEmpty())return null;const Dr=this.getRect(0,0),Br=xr.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:vr.AnnotationEditorType.INK,color:Br,thickness:this.thickness,opacity:this.opacity,paths:this.#B(this.scaleFactor/this.parentScale,this.translationX,this.translationY,Dr),pageIndex:this.pageIndex,rect:Dr,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}hr.InkEditor=Rr},(mr,hr,gr)=>{Object.defineProperty(hr,"__esModule",{value:!0}),hr.StampEditor=void 0;var vr=gr(1),xr=gr(4),Er=gr(6),Cr=gr(29);class wr extends xr.AnnotationEditor{#e=null;#t=null;#r=null;#n=null;#o=null;#s=null;#a=null;#l=null;#c=!1;#i=!1;static _type="stamp";constructor(kr){super({...kr,name:"stampEditor"}),this.#n=kr.bitmapUrl,this.#o=kr.bitmapFile}static initialize(kr){xr.AnnotationEditor.initialize(kr)}static get supportedTypes(){const kr=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,vr.shadow)(this,"supportedTypes",kr.map(Dr=>`image/${Dr}`))}static get supportedTypesStr(){return(0,vr.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(kr){return this.supportedTypes.includes(kr)}static paste(kr,Dr){Dr.pasteEditor(vr.AnnotationEditorType.STAMP,{bitmapFile:kr.getAsFile()})}#f(kr,Dr=!1){if(!kr){this.remove();return}this.#e=kr.bitmap,Dr||(this.#t=kr.id,this.#c=kr.isSvg),this.#p()}#d(){this.#r=null,this._uiManager.enableWaiting(!1),this.#s&&this.div.focus()}#h(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(Dr=>this.#f(Dr,!0)).finally(()=>this.#d());return}if(this.#n){const Dr=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#r=this._uiManager.imageManager.getFromUrl(Dr).then(Br=>this.#f(Br)).finally(()=>this.#d());return}if(this.#o){const Dr=this.#o;this.#o=null,this._uiManager.enableWaiting(!0),this.#r=this._uiManager.imageManager.getFromFile(Dr).then(Br=>this.#f(Br)).finally(()=>this.#d());return}const kr=document.createElement("input");kr.type="file",kr.accept=wr.supportedTypesStr,this.#r=new Promise(Dr=>{kr.addEventListener("change",async()=>{if(!kr.files||kr.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const Br=await this._uiManager.imageManager.getFromFile(kr.files[0]);this.#f(Br)}Dr()}),kr.addEventListener("cancel",()=>{this.remove(),Dr()})}).finally(()=>this.#d()),kr.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#s?.remove(),this.#s=null,this.#a?.disconnect(),this.#a=null),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#h();return}super.rebuild(),this.div!==null&&(this.#t&&this.#h(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#r||this.#e||this.#n||this.#o)}get isResizable(){return!0}render(){if(this.div)return this.div;let kr,Dr;if(this.width&&(kr=this.x,Dr=this.y),super.render(),this.div.hidden=!0,this.#e?this.#p():this.#h(),this.width){const[Br,Hr]=this.parentDimensions;this.setAt(kr*Br,Dr*Hr,this.width*Br,this.height*Hr)}return this.div}#p(){const{div:kr}=this;let{width:Dr,height:Br}=this.#e;const[Hr,Gr]=this.pageDimensions,qr=.75;if(this.width)Dr=this.width*Hr,Br=this.height*Gr;else if(Dr>qr*Hr||Br>qr*Gr){const hn=Math.min(qr*Hr/Dr,qr*Gr/Br);Dr*=hn,Br*=hn}const[zr,Qr]=this.parentDimensions;this.setDims(Dr*zr/Hr,Br*Qr/Gr),this._uiManager.enableWaiting(!1);const sn=this.#s=document.createElement("canvas");kr.append(sn),kr.hidden=!1,this.#m(Dr,Br),this.#b(),this.#i||(this.parent.addUndoableEditor(this),this.#i=!0),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()}#v(kr,Dr){const[Br,Hr]=this.parentDimensions;this.width=kr/Br,this.height=Dr/Hr,this.setDims(kr,Dr),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this.#l!==null&&clearTimeout(this.#l);const Gr=200;this.#l=setTimeout(()=>{this.#l=null,this.#m(kr,Dr)},Gr)}#g(kr,Dr){const{width:Br,height:Hr}=this.#e;let Gr=Br,qr=Hr,zr=this.#e;for(;Gr>2*kr||qr>2*Dr;){const Qr=Gr,sn=qr;Gr>2*kr&&(Gr=Gr>=16384?Math.floor(Gr/2)-1:Math.ceil(Gr/2)),qr>2*Dr&&(qr=qr>=16384?Math.floor(qr/2)-1:Math.ceil(qr/2));const hn=new OffscreenCanvas(Gr,qr);hn.getContext("2d").drawImage(zr,0,0,Qr,sn,0,0,Gr,qr),zr=hn.transferToImageBitmap()}return zr}#m(kr,Dr){kr=Math.ceil(kr),Dr=Math.ceil(Dr);const Br=this.#s;if(!Br||Br.width===kr&&Br.height===Dr)return;Br.width=kr,Br.height=Dr;const Hr=this.#c?this.#e:this.#g(kr,Dr),Gr=Br.getContext("2d");Gr.filter=this._uiManager.hcmFilter,Gr.drawImage(Hr,0,0,Hr.width,Hr.height,0,0,kr,Dr)}#u(kr){if(kr){if(this.#c){const Hr=this._uiManager.imageManager.getSvgUrl(this.#t);if(Hr)return Hr}const Dr=document.createElement("canvas");return{width:Dr.width,height:Dr.height}=this.#e,Dr.getContext("2d").drawImage(this.#e,0,0),Dr.toDataURL()}if(this.#c){const[Dr,Br]=this.pageDimensions,Hr=Math.round(this.width*Dr*Er.PixelsPerInch.PDF_TO_CSS_UNITS),Gr=Math.round(this.height*Br*Er.PixelsPerInch.PDF_TO_CSS_UNITS),qr=new OffscreenCanvas(Hr,Gr);return qr.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,Hr,Gr),qr.transferToImageBitmap()}return structuredClone(this.#e)}#b(){this.#a=new ResizeObserver(kr=>{const Dr=kr[0].contentRect;Dr.width&&Dr.height&&this.#v(Dr.width,Dr.height)}),this.#a.observe(this.div)}static deserialize(kr,Dr,Br){if(kr instanceof Cr.StampAnnotationElement)return null;const Hr=super.deserialize(kr,Dr,Br),{rect:Gr,bitmapUrl:qr,bitmapId:zr,isSvg:Qr,accessibilityData:sn}=kr;zr&&Br.imageManager.isValidId(zr)?Hr.#t=zr:Hr.#n=qr,Hr.#c=Qr;const[hn,vn]=Hr.pageDimensions;return Hr.width=(Gr[2]-Gr[0])/hn,Hr.height=(Gr[3]-Gr[1])/vn,sn&&(Hr.altTextData=sn),Hr}serialize(kr=!1,Dr=null){if(this.isEmpty())return null;const Br={annotationType:vr.AnnotationEditorType.STAMP,bitmapId:this.#t,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#c,structTreeParentId:this._structTreeParentId};if(kr)return Br.bitmapUrl=this.#u(!0),Br.accessibilityData=this.altTextData,Br;const{decorative:Hr,altText:Gr}=this.altTextData;if(!Hr&&Gr&&(Br.accessibilityData={type:"Figure",alt:Gr}),Dr===null)return Br;Dr.stamps||=new Map;const qr=this.#c?(Br.rect[2]-Br.rect[0])*(Br.rect[3]-Br.rect[1]):null;if(!Dr.stamps.has(this.#t))Dr.stamps.set(this.#t,{area:qr,serialized:Br}),Br.bitmap=this.#u(!1);else if(this.#c){const zr=Dr.stamps.get(this.#t);qr>zr.area&&(zr.area=qr,zr.serialized.bitmap.close(),zr.serialized.bitmap=this.#u(!1))}return Br}}hr.StampEditor=wr}],__webpack_module_cache__={};function __w_pdfjs_require__(mr){var hr=__webpack_module_cache__[mr];if(hr!==void 0)return hr.exports;var gr=__webpack_module_cache__[mr]={exports:{}};return __webpack_modules__[mr](gr,gr.exports,__w_pdfjs_require__),gr.exports}var __webpack_exports__={};return(()=>{var mr=__webpack_exports__;Object.defineProperty(mr,"__esModule",{value:!0}),Object.defineProperty(mr,"AbortException",{enumerable:!0,get:function(){return hr.AbortException}}),Object.defineProperty(mr,"AnnotationEditorLayer",{enumerable:!0,get:function(){return Er.AnnotationEditorLayer}}),Object.defineProperty(mr,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return hr.AnnotationEditorParamsType}}),Object.defineProperty(mr,"AnnotationEditorType",{enumerable:!0,get:function(){return hr.AnnotationEditorType}}),Object.defineProperty(mr,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return Cr.AnnotationEditorUIManager}}),Object.defineProperty(mr,"AnnotationLayer",{enumerable:!0,get:function(){return wr.AnnotationLayer}}),Object.defineProperty(mr,"AnnotationMode",{enumerable:!0,get:function(){return hr.AnnotationMode}}),Object.defineProperty(mr,"CMapCompressionType",{enumerable:!0,get:function(){return hr.CMapCompressionType}}),Object.defineProperty(mr,"DOMSVGFactory",{enumerable:!0,get:function(){return vr.DOMSVGFactory}}),Object.defineProperty(mr,"FeatureTest",{enumerable:!0,get:function(){return hr.FeatureTest}}),Object.defineProperty(mr,"GlobalWorkerOptions",{enumerable:!0,get:function(){return Rr.GlobalWorkerOptions}}),Object.defineProperty(mr,"ImageKind",{enumerable:!0,get:function(){return hr.ImageKind}}),Object.defineProperty(mr,"InvalidPDFException",{enumerable:!0,get:function(){return hr.InvalidPDFException}}),Object.defineProperty(mr,"MissingPDFException",{enumerable:!0,get:function(){return hr.MissingPDFException}}),Object.defineProperty(mr,"OPS",{enumerable:!0,get:function(){return hr.OPS}}),Object.defineProperty(mr,"PDFDataRangeTransport",{enumerable:!0,get:function(){return gr.PDFDataRangeTransport}}),Object.defineProperty(mr,"PDFDateString",{enumerable:!0,get:function(){return vr.PDFDateString}}),Object.defineProperty(mr,"PDFWorker",{enumerable:!0,get:function(){return gr.PDFWorker}}),Object.defineProperty(mr,"PasswordResponses",{enumerable:!0,get:function(){return hr.PasswordResponses}}),Object.defineProperty(mr,"PermissionFlag",{enumerable:!0,get:function(){return hr.PermissionFlag}}),Object.defineProperty(mr,"PixelsPerInch",{enumerable:!0,get:function(){return vr.PixelsPerInch}}),Object.defineProperty(mr,"PromiseCapability",{enumerable:!0,get:function(){return hr.PromiseCapability}}),Object.defineProperty(mr,"RenderingCancelledException",{enumerable:!0,get:function(){return vr.RenderingCancelledException}}),Object.defineProperty(mr,"SVGGraphics",{enumerable:!0,get:function(){return gr.SVGGraphics}}),Object.defineProperty(mr,"UnexpectedResponseException",{enumerable:!0,get:function(){return hr.UnexpectedResponseException}}),Object.defineProperty(mr,"Util",{enumerable:!0,get:function(){return hr.Util}}),Object.defineProperty(mr,"VerbosityLevel",{enumerable:!0,get:function(){return hr.VerbosityLevel}}),Object.defineProperty(mr,"XfaLayer",{enumerable:!0,get:function(){return kr.XfaLayer}}),Object.defineProperty(mr,"build",{enumerable:!0,get:function(){return gr.build}}),Object.defineProperty(mr,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return hr.createValidAbsoluteUrl}}),Object.defineProperty(mr,"getDocument",{enumerable:!0,get:function(){return gr.getDocument}}),Object.defineProperty(mr,"getFilenameFromUrl",{enumerable:!0,get:function(){return vr.getFilenameFromUrl}}),Object.defineProperty(mr,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return vr.getPdfFilenameFromUrl}}),Object.defineProperty(mr,"getXfaPageViewport",{enumerable:!0,get:function(){return vr.getXfaPageViewport}}),Object.defineProperty(mr,"isDataScheme",{enumerable:!0,get:function(){return vr.isDataScheme}}),Object.defineProperty(mr,"isPdfFile",{enumerable:!0,get:function(){return vr.isPdfFile}}),Object.defineProperty(mr,"loadScript",{enumerable:!0,get:function(){return vr.loadScript}}),Object.defineProperty(mr,"noContextMenu",{enumerable:!0,get:function(){return vr.noContextMenu}}),Object.defineProperty(mr,"normalizeUnicode",{enumerable:!0,get:function(){return hr.normalizeUnicode}}),Object.defineProperty(mr,"renderTextLayer",{enumerable:!0,get:function(){return xr.renderTextLayer}}),Object.defineProperty(mr,"setLayerDimensions",{enumerable:!0,get:function(){return vr.setLayerDimensions}}),Object.defineProperty(mr,"shadow",{enumerable:!0,get:function(){return hr.shadow}}),Object.defineProperty(mr,"updateTextLayer",{enumerable:!0,get:function(){return xr.updateTextLayer}}),Object.defineProperty(mr,"version",{enumerable:!0,get:function(){return gr.version}});var hr=__w_pdfjs_require__(1),gr=__w_pdfjs_require__(2),vr=__w_pdfjs_require__(6),xr=__w_pdfjs_require__(26),Er=__w_pdfjs_require__(27),Cr=__w_pdfjs_require__(5),wr=__w_pdfjs_require__(29),Rr=__w_pdfjs_require__(14),kr=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf);var pdfExports=pdf.exports,lib={exports:{}},core_min={};(function(mr){var hr=reactExports,gr=pdfExports;function vr(Pn){var Wn=Object.create(null);return Pn&&Object.keys(Pn).forEach(function(Jn){if(Jn!=="default"){var ai=Object.getOwnPropertyDescriptor(Pn,Jn);Object.defineProperty(Wn,Jn,ai.get?ai:{enumerable:!0,get:function(){return Pn[Jn]}})}}),Wn.default=Pn,Object.freeze(Wn)}var xr,Er=vr(hr),Cr=vr(gr);mr.AnnotationType=void 0,(xr=mr.AnnotationType||(mr.AnnotationType={}))[xr.Text=1]="Text",xr[xr.Link=2]="Link",xr[xr.FreeText=3]="FreeText",xr[xr.Line=4]="Line",xr[xr.Square=5]="Square",xr[xr.Circle=6]="Circle",xr[xr.Polygon=7]="Polygon",xr[xr.Polyline=8]="Polyline",xr[xr.Highlight=9]="Highlight",xr[xr.Underline=10]="Underline",xr[xr.Squiggly=11]="Squiggly",xr[xr.StrikeOut=12]="StrikeOut",xr[xr.Stamp=13]="Stamp",xr[xr.Caret=14]="Caret",xr[xr.Ink=15]="Ink",xr[xr.Popup=16]="Popup",xr[xr.FileAttachment=17]="FileAttachment";var wr=function(Pn,Wn){return wr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Jn,ai){Jn.__proto__=ai}||function(Jn,ai){for(var Ii in ai)Object.prototype.hasOwnProperty.call(ai,Ii)&&(Jn[Ii]=ai[Ii])},wr(Pn,Wn)};function Rr(Pn,Wn){if(typeof Wn!="function"&&Wn!==null)throw new TypeError("Class extends value "+String(Wn)+" is not a constructor or null");function Jn(){this.constructor=Pn}wr(Pn,Wn),Pn.prototype=Wn===null?Object.create(Wn):(Jn.prototype=Wn.prototype,new Jn)}var kr,Dr=function(){return Dr=Object.assign||function(Pn){for(var Wn,Jn=1,ai=arguments.length;Jn<ai;Jn++)for(var Ii in Wn=arguments[Jn])Object.prototype.hasOwnProperty.call(Wn,Ii)&&(Pn[Ii]=Wn[Ii]);return Pn},Dr.apply(this,arguments)};mr.TextDirection=void 0,(kr=mr.TextDirection||(mr.TextDirection={})).RightToLeft="RTL",kr.LeftToRight="LTR";var Br,Hr=Er.createContext({currentTheme:"light",direction:mr.TextDirection.LeftToRight,setCurrentTheme:function(){}}),Gr=function(Pn){var Wn=[];return Object.keys(Pn).forEach(function(Jn){Jn&&Pn[Jn]&&Wn.push(Jn)}),Wn.join(" ")},qr=typeof window<"u"?Er.useLayoutEffect:Er.useEffect,zr=function(Pn){var Wn=Er.useRef(null),Jn=Pn.once,ai=Pn.threshold,Ii=Pn.onVisibilityChanged;return qr(function(){var _i=Wn.current;if(_i){var Mi=new IntersectionObserver(function(Fi){Fi.forEach(function($i){var Hi=$i.isIntersecting,Ni=$i.intersectionRatio;Ii({isVisible:Hi,ratio:Ni}),Hi&&Jn&&(Mi.unobserve(_i),Mi.disconnect())})},{threshold:ai||0});return Mi.observe(_i),function(){Mi.unobserve(_i),Mi.disconnect()}}},[]),Wn},Qr=function(Pn){var Wn=Pn.children,Jn=Pn.ignoreDirection,ai=Jn!==void 0&&Jn,Ii=Pn.size,_i=Ii===void 0?24:Ii,Mi=Er.useContext(Hr).direction,Fi=!ai&&Mi===mr.TextDirection.RightToLeft,$i="".concat(_i||24,"px");return Er.createElement("svg",{"aria-hidden":"true",className:Gr({"rpv-core__icon":!0,"rpv-core__icon--rtl":Fi}),focusable:"false",height:$i,viewBox:"0 0 24 24",width:$i},Wn)},sn=function(){return Er.createElement(Qr,{size:16},Er.createElement("path",{d:"M23.5,0.499l-16.5,23l-6.5-6.5"}))},hn=function(Pn){var Wn=Pn.children,Jn=Pn.testId,ai=Pn.onClick,Ii=Er.useContext(Hr).direction===mr.TextDirection.RightToLeft,_i=Jn?{"data-testid":Jn}:{};return Er.createElement("button",Dr({className:Gr({"rpv-core__primary-button":!0,"rpv-core__primary-button--rtl":Ii}),type:"button",onClick:ai},_i),Wn)},vn=function(Pn){var Wn=Pn.size,Jn=Wn===void 0?"4rem":Wn,ai=Pn.testId,Ii=Er.useState(!1),_i=Ii[0],Mi=Ii[1],Fi=ai?{"data-testid":ai}:{},$i=zr({onVisibilityChanged:function(Hi){Mi(Hi.isVisible)}});return Er.createElement("div",Dr({},Fi,{className:Gr({"rpv-core__spinner":!0,"rpv-core__spinner--animating":_i}),ref:$i,style:{height:Jn,width:Jn}}))},yn=function(Pn){var Wn=Pn.ariaLabel,Jn=Wn===void 0?"":Wn,ai=Pn.autoFocus,Ii=ai!==void 0&&ai,_i=Pn.placeholder,Mi=_i===void 0?"":_i,Fi=Pn.testId,$i=Pn.type,Hi=$i===void 0?"text":$i,Ni=Pn.value,Za=Ni===void 0?"":Ni,Xa=Pn.onChange,za=Pn.onKeyDown,hs=za===void 0?function(){}:za,rs=Er.useContext(Hr).direction,cs=Er.useRef(),Os=rs===mr.TextDirection.RightToLeft,Ss={ref:cs,"data-testid":"","aria-label":Jn,className:Gr({"rpv-core__textbox":!0,"rpv-core__textbox--rtl":Os}),placeholder:Mi,value:Za,onChange:function(Ts){return Xa(Ts.target.value)},onKeyDown:hs};return Fi&&(Ss["data-testid"]=Fi),qr(function(){if(Ii){var Ts=cs.current;if(Ts){var $s=window.scrollX,bs=window.scrollY;Ts.focus(),window.scrollTo($s,bs)}}},[]),Hi==="text"?Er.createElement("input",Dr({type:"text"},Ss)):Er.createElement("input",Dr({type:"password"},Ss))};(function(Pn){Pn[Pn.ExitFullScreen=0]="ExitFullScreen",Pn[Pn.FullScreenChange=1]="FullScreenChange",Pn[Pn.FullScreenElement=2]="FullScreenElement",Pn[Pn.FullScreenEnabled=3]="FullScreenEnabled",Pn[Pn.RequestFullScreen=4]="RequestFullScreen"})(Br||(Br={}));var gn,bn={ExitFullScreen:"exitFullscreen",FullScreenChange:"fullscreenchange",FullScreenElement:"fullscreenElement",FullScreenEnabled:"fullscreenEnabled",RequestFullScreen:"requestFullscreen"},xn={ExitFullScreen:"webkitExitFullscreen",FullScreenChange:"webkitfullscreenchange",FullScreenElement:"webkitFullscreenElement",FullScreenEnabled:"webkitFullscreenEnabled",RequestFullScreen:"webkitRequestFullscreen"},$n={ExitFullScreen:"msExitFullscreen",FullScreenChange:"msFullscreenChange",FullScreenElement:"msFullscreenElement",FullScreenEnabled:"msFullscreenEnabled",RequestFullScreen:"msRequestFullscreen"},Sn=typeof window<"u",Cn=Sn&&(Br.FullScreenEnabled in document&&bn||xn.FullScreenEnabled in document&&xn||$n.FullScreenEnabled in document&&$n)||bn,Rn=function(){return Sn&&Cn.FullScreenEnabled in document&&document[Cn.FullScreenEnabled]===!0},Bn=function(Pn){return Sn?Pn[Cn.ExitFullScreen]():Promise.resolve({})},Fn=function(){return Sn?document[Cn.FullScreenElement]:null},Hn=function(Pn,Wn){var Jn=Er.useRef(),ai=function(){Jn.current&&clearTimeout(Jn.current)};return Er.useEffect(function(){return function(){return ai()}},[]),Er.useCallback(function(){for(var Ii=[],_i=0;_i<arguments.length;_i++)Ii[_i]=arguments[_i];ai(),Jn.current=setTimeout(function(){Pn.apply(void 0,Ii)},Wn)},[Pn,Wn])},Gn=function(){var Pn=Er.useRef(!1);return Er.useEffect(function(){return Pn.current=!0,function(){Pn.current=!1}},[]),Pn},qn=function(Pn){var Wn=Er.useRef(Pn);return Er.useEffect(function(){Wn.current=Pn},[Pn]),Wn.current};(function(Pn){Pn.NotRenderedYet="NotRenderedYet",Pn.Rendering="Rendering",Pn.Rendered="Rendered"})(gn||(gn={}));var On,wn=-9999,_n=function(Pn){var Wn=Pn.doc,Jn=Wn.numPages,ai=Wn.loadingTask.docId,Ii=Er.useMemo(function(){return Array(Jn).fill(null).map(function(Fi,$i){return{pageIndex:$i,renderStatus:gn.NotRenderedYet,visibility:wn}})},[ai]),_i=Er.useRef({currentRenderingPage:-1,startRange:0,endRange:Jn-1,visibilities:Ii}),Mi=function(Fi,$i){_i.current.visibilities[Fi].visibility=$i};return{getHighestPriorityPage:function(){var Fi=_i.current.visibilities.slice(_i.current.startRange,_i.current.endRange+1).filter(function(Xa){return Xa.visibility>wn});if(!Fi.length)return-1;for(var $i=Fi[0].pageIndex,Hi=Fi[Fi.length-1].pageIndex,Ni=Fi.length,Za=0;Za<Ni;Za++){if(Fi[Za].renderStatus===gn.Rendering)return-1;if(Fi[Za].renderStatus===gn.NotRenderedYet)return Fi[Za].pageIndex}return Hi+1<Jn&&_i.current.visibilities[Hi+1].renderStatus!==gn.Rendered?Hi+1:$i-1>=0&&_i.current.visibilities[$i-1].renderStatus!==gn.Rendered?$i-1:-1},isInRange:function(Fi){return Fi>=_i.current.startRange&&Fi<=_i.current.endRange},markNotRendered:function(){for(var Fi=0;Fi<Jn;Fi++)_i.current.visibilities[Fi].renderStatus=gn.NotRenderedYet},markRendered:function(Fi){_i.current.visibilities[Fi].renderStatus=gn.Rendered},markRendering:function(Fi){_i.current.currentRenderingPage!==-1&&_i.current.currentRenderingPage!==Fi&&_i.current.visibilities[_i.current.currentRenderingPage].renderStatus===gn.Rendering&&(_i.current.visibilities[_i.current.currentRenderingPage].renderStatus=gn.NotRenderedYet),_i.current.visibilities[Fi].renderStatus=gn.Rendering,_i.current.currentRenderingPage=Fi},setOutOfRange:function(Fi){Mi(Fi,wn)},setRange:function(Fi,$i){_i.current.startRange=Fi,_i.current.endRange=$i;for(var Hi=0;Hi<Jn;Hi++)(Hi<Fi||Hi>$i)&&(_i.current.visibilities[Hi].visibility=wn,_i.current.visibilities[Hi].renderStatus=gn.NotRenderedYet)},setVisibility:Mi}},Tn={core:{askingPassword:{requirePasswordToOpen:"This document requires a password to open",submit:"Submit"},wrongPassword:{tryAgain:"The password is wrong. Please try again"},pageLabel:"Page {{pageIndex}}"}},Mn=Er.createContext({l10n:Tn,setL10n:function(){}}),Ln=0,jn=function(){return Ln++},Kn=function(Pn,Wn,Jn){var ai=function(Ii){var _i=Wn.current;if(_i){var Mi=Ii.target;if(Mi instanceof Element&&Mi.shadowRoot){var Fi=Ii.composedPath();Fi.length>0&&!_i.contains(Fi[0])&&Jn()}else _i.contains(Mi)||Jn()}};Er.useEffect(function(){if(Pn){var Ii={capture:!0};return document.addEventListener("click",ai,Ii),function(){document.removeEventListener("click",ai,Ii)}}},[])},Nn=function(Pn){var Wn=function(Jn){Jn.key==="Escape"&&Pn()};Er.useEffect(function(){return document.addEventListener("keyup",Wn),function(){document.removeEventListener("keyup",Wn)}},[])},An=function(Pn){var Wn=Pn.ariaControlsSuffix,Jn=Pn.children,ai=Pn.closeOnClickOutside,Ii=Pn.closeOnEscape,_i=Pn.onToggle,Mi=Er.useRef(),Fi=Er.useContext(Hr).direction===mr.TextDirection.RightToLeft;return Er.useEffect(function(){var $i=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",function(){document.body.style.overflow=$i}},[]),Nn(function(){Mi.current&&Ii&&_i()}),Kn(ai,Mi,_i),qr(function(){var $i=Mi.current;if($i){var Hi=.75*document.body.clientHeight;$i.getBoundingClientRect().height>=Hi&&($i.style.overflow="auto",$i.style.maxHeight="".concat(Hi,"px"))}},[]),Er.createElement("div",{"aria-modal":"true",className:Gr({"rpv-core__modal-body":!0,"rpv-core__modal-body--rtl":Fi}),id:"rpv-core__modal-body-".concat(Wn),ref:Mi,role:"dialog",tabIndex:-1},Jn)},kn=function(Pn){var Wn=Pn.children;return Er.createElement("div",{className:"rpv-core__modal-overlay"},Wn)};mr.ToggleStatus=void 0,(On=mr.ToggleStatus||(mr.ToggleStatus={})).Close="Close",On.Open="Open",On.Toggle="Toggle";var Dn,Vn=function(Pn){var Wn=Er.useState(Pn),Jn=Wn[0],ai=Wn[1];return{opened:Jn,toggle:function(Ii){switch(Ii){case mr.ToggleStatus.Close:ai(!1);break;case mr.ToggleStatus.Open:ai(!0);break;case mr.ToggleStatus.Toggle:default:ai(function(_i){return!_i})}}}},zn=function(Pn){var Wn=Pn.content,Jn=Pn.isOpened,ai=Jn!==void 0&&Jn,Ii=Pn.target,_i=Vn(ai),Mi=_i.opened,Fi=_i.toggle;return Er.createElement(Er.Fragment,null,Ii&&Ii(Fi,Mi),Mi&&Wn(Fi))};mr.Position=void 0,(Dn=mr.Position||(mr.Position={})).TopLeft="TOP_LEFT",Dn.TopCenter="TOP_CENTER",Dn.TopRight="TOP_RIGHT",Dn.RightTop="RIGHT_TOP",Dn.RightCenter="RIGHT_CENTER",Dn.RightBottom="RIGHT_BOTTOM",Dn.BottomLeft="BOTTOM_LEFT",Dn.BottomCenter="BOTTOM_CENTER",Dn.BottomRight="BOTTOM_RIGHT",Dn.LeftTop="LEFT_TOP",Dn.LeftCenter="LEFT_CENTER",Dn.LeftBottom="LEFT_BOTTOM";var Xn,Zn,Pi,Ya,Bi,zi,Xi,Ji,ns=function(Pn,Wn,Jn,ai,Ii){qr(function(){var _i=Wn.current,Mi=Pn.current,Fi=Jn.current;if(Mi&&_i&&Fi){var $i=Fi.getBoundingClientRect(),Hi=function(Xa,za,hs,rs){var cs=za.getBoundingClientRect(),Os=Xa.getBoundingClientRect(),Ss=Os.height,Ts=Os.width,$s=0,bs=0;switch(hs){case mr.Position.TopLeft:$s=cs.top-Ss,bs=cs.left;break;case mr.Position.TopCenter:$s=cs.top-Ss,bs=cs.left+cs.width/2-Ts/2;break;case mr.Position.TopRight:$s=cs.top-Ss,bs=cs.left+cs.width-Ts;break;case mr.Position.RightTop:$s=cs.top,bs=cs.left+cs.width;break;case mr.Position.RightCenter:$s=cs.top+cs.height/2-Ss/2,bs=cs.left+cs.width;break;case mr.Position.RightBottom:$s=cs.top+cs.height-Ss,bs=cs.left+cs.width;break;case mr.Position.BottomLeft:$s=cs.top+cs.height,bs=cs.left;break;case mr.Position.BottomCenter:$s=cs.top+cs.height,bs=cs.left+cs.width/2-Ts/2;break;case mr.Position.BottomRight:$s=cs.top+cs.height,bs=cs.left+cs.width-Ts;break;case mr.Position.LeftTop:$s=cs.top,bs=cs.left-Ts;break;case mr.Position.LeftCenter:$s=cs.top+cs.height/2-Ss/2,bs=cs.left-Ts;break;case mr.Position.LeftBottom:$s=cs.top+cs.height-Ss,bs=cs.left-Ts}return{left:bs+(rs.left||0),top:$s+(rs.top||0)}}(Mi,_i,ai,Ii),Ni=Hi.top,Za=Hi.left;Mi.style.top="".concat(Ni-$i.top,"px"),Mi.style.left="".concat(Za-$i.left,"px")}},[])},ps=function(Pn){var Wn,Jn=Pn.customClassName,ai=Pn.position;return Er.createElement("div",{className:Gr((Wn={"rpv-core__arrow":!0,"rpv-core__arrow--tl":ai===mr.Position.TopLeft,"rpv-core__arrow--tc":ai===mr.Position.TopCenter,"rpv-core__arrow--tr":ai===mr.Position.TopRight,"rpv-core__arrow--rt":ai===mr.Position.RightTop,"rpv-core__arrow--rc":ai===mr.Position.RightCenter,"rpv-core__arrow--rb":ai===mr.Position.RightBottom,"rpv-core__arrow--bl":ai===mr.Position.BottomLeft,"rpv-core__arrow--bc":ai===mr.Position.BottomCenter,"rpv-core__arrow--br":ai===mr.Position.BottomRight,"rpv-core__arrow--lt":ai===mr.Position.LeftTop,"rpv-core__arrow--lc":ai===mr.Position.LeftCenter,"rpv-core__arrow--lb":ai===mr.Position.LeftBottom},Wn["".concat(Jn)]=Jn!=="",Wn))})},ls=function(Pn){var Wn=Pn.ariaControlsSuffix,Jn=Pn.children,ai=Pn.closeOnClickOutside,Ii=Pn.offset,_i=Pn.position,Mi=Pn.targetRef,Fi=Pn.onClose,$i=Er.useRef(),Hi=Er.useRef(),Ni=Er.useRef(),Za=Er.useContext(Hr).direction===mr.TextDirection.RightToLeft;Kn(ai,$i,Fi),ns($i,Mi,Ni,_i,Ii),qr(function(){var za=Hi.current;if(za){var hs=.75*document.body.clientHeight;za.getBoundingClientRect().height>=hs&&(za.style.overflow="auto",za.style.maxHeight="".concat(hs,"px"))}},[]);var Xa="rpv-core__popover-body-inner-".concat(Wn);return Er.createElement(Er.Fragment,null,Er.createElement("div",{ref:Ni,style:{left:0,position:"absolute",top:0}}),Er.createElement("div",{"aria-describedby":Xa,className:Gr({"rpv-core__popover-body":!0,"rpv-core__popover-body--rtl":Za}),id:"rpv-core__popover-body-".concat(Wn),ref:$i,role:"dialog",tabIndex:-1},Er.createElement(ps,{customClassName:"rpv-core__popover-body-arrow",position:_i}),Er.createElement("div",{id:Xa,ref:Hi},Jn)))},Li=function(Pn){var Wn=Pn.closeOnEscape,Jn=Pn.onClose,ai=Er.useRef();return Nn(function(){ai.current&&Wn&&Jn()}),Er.createElement("div",{className:"rpv-core__popover-overlay",ref:ai})},es=function(Pn){var Wn=Pn.ariaControlsSuffix,Jn=Pn.children,ai=Pn.contentRef,Ii=Pn.offset,_i=Pn.position,Mi=Pn.targetRef,Fi=Er.useRef(),$i=Er.useContext(Hr).direction===mr.TextDirection.RightToLeft;return ns(ai,Mi,Fi,_i,Ii),Er.createElement(Er.Fragment,null,Er.createElement("div",{ref:Fi,style:{left:0,position:"absolute",top:0}}),Er.createElement("div",{className:Gr({"rpv-core__tooltip-body":!0,"rpv-core__tooltip-body--rtl":$i}),id:"rpv-core__tooltip-body-".concat(Wn),ref:ai,role:"tooltip"},Er.createElement(ps,{customClassName:"rpv-core__tooltip-body-arrow",position:_i}),Er.createElement("div",{className:"rpv-core__tooltip-body-content"},Jn)))};mr.FullScreenMode=void 0,(Xn=mr.FullScreenMode||(mr.FullScreenMode={})).Normal="Normal",Xn.Entering="Entering",Xn.Entered="Entered",Xn.EnteredCompletely="EnteredCompletely",Xn.Exitting="Exitting",Xn.Exited="Exited",mr.LayerRenderStatus=void 0,(Zn=mr.LayerRenderStatus||(mr.LayerRenderStatus={}))[Zn.PreRender=0]="PreRender",Zn[Zn.DidRender=1]="DidRender",mr.PageMode=void 0,(Pi=mr.PageMode||(mr.PageMode={})).Attachments="UseAttachments",Pi.Bookmarks="UseOutlines",Pi.ContentGroup="UseOC",Pi.Default="UserNone",Pi.FullScreen="FullScreen",Pi.Thumbnails="UseThumbs",mr.PasswordStatus=void 0,(Ya=mr.PasswordStatus||(mr.PasswordStatus={})).RequiredPassword="RequiredPassword",Ya.WrongPassword="WrongPassword",mr.RotateDirection=void 0,(Bi=mr.RotateDirection||(mr.RotateDirection={})).Backward="Backward",Bi.Forward="Forward",mr.ScrollMode=void 0,(zi=mr.ScrollMode||(mr.ScrollMode={})).Page="Page",zi.Horizontal="Horizontal",zi.Vertical="Vertical",zi.Wrapped="Wrapped",mr.SpecialZoomLevel=void 0,(Xi=mr.SpecialZoomLevel||(mr.SpecialZoomLevel={})).ActualSize="ActualSize",Xi.PageFit="PageFit",Xi.PageWidth="PageWidth",mr.ViewMode=void 0,(Ji=mr.ViewMode||(mr.ViewMode={})).DualPage="DualPage",Ji.DualPageWithCover="DualPageWithCover",Ji.SinglePage="SinglePage";var os,ds=function(Pn,Wn){return Pn.reduce(function(Jn,ai,Ii){return Ii%Wn?Jn[Jn.length-1].push(ai):Jn.push([ai]),Jn},[])},Is=function(Pn,Wn){switch(Wn[1].name){case"XYZ":return{bottomOffset:function(Jn,ai){return Wn[3]===null?ai:Wn[3]},leftOffset:function(Jn,ai){return Wn[2]===null?0:Wn[2]},pageIndex:Pn,scaleTo:Wn[4]};case"Fit":case"FitB":return{bottomOffset:0,leftOffset:0,pageIndex:Pn,scaleTo:mr.SpecialZoomLevel.PageFit};case"FitH":case"FitBH":return{bottomOffset:Wn[2],leftOffset:0,pageIndex:Pn,scaleTo:mr.SpecialZoomLevel.PageWidth};default:return{bottomOffset:0,leftOffset:0,pageIndex:Pn,scaleTo:1}}},ws=new Map,Ns=new Map,go=function(Pn,Wn){return"".concat(Pn.loadingTask.docId,"___").concat(Wn.num,"R").concat(Wn.gen===0?"":Wn.gen)},vo=function(Pn,Wn,Jn){ws.set(go(Pn,Wn),Jn)},ho=function(Pn,Wn){if(!Pn)return Promise.reject("The document is not loaded yet");var Jn="".concat(Pn.loadingTask.docId,"___").concat(Wn),ai=Ns.get(Jn);return ai?Promise.resolve(ai):new Promise(function(Ii,_i){Pn.getPage(Wn+1).then(function(Mi){Ns.set(Jn,Mi),Mi.ref&&vo(Pn,Mi.ref,Wn),Ii(Mi)})})},al=function(Pn,Wn){return new Promise(function(Jn){new Promise(function(ai){typeof Wn=="string"?Pn.getDestination(Wn).then(function(Ii){ai(Ii)}):ai(Wn)}).then(function(ai){if(typeof ai[0]=="object"&&ai[0]!==null){var Ii=ai[0],_i=function(Fi,$i){var Hi=go(Fi,$i);return ws.has(Hi)?ws.get(Hi):null}(Pn,Ii);_i===null?Pn.getPageIndex(Ii).then(function(Fi){vo(Pn,Ii,Fi),al(Pn,Wn).then(function($i){return Jn($i)})}):Jn(Is(_i,ai))}else{var Mi=Is(ai[0],ai);Jn(Mi)}})})};(function(Pn){Pn[Pn.Solid=1]="Solid",Pn[Pn.Dashed=2]="Dashed",Pn[Pn.Beveled=3]="Beveled",Pn[Pn.Inset=4]="Inset",Pn[Pn.Underline=5]="Underline"})(os||(os={}));var ro,ts=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"),Wi=function(Pn,Wn,Jn,ai){var Ii=parseInt(Pn,10);return Ii>=Wn&&Ii<=Jn?Ii:ai},Gi=function(Pn){return Pn.contentsObj?Pn.contentsObj.str:Pn.contents||""},fs=function(Pn){return Pn.titleObj?Pn.titleObj.str:Pn.title||""},bo=function(Pn){var Wn=Pn.annotation,Jn=Er.useContext(Hr).direction,ai=fs(Wn),Ii=Gi(Wn),_i=Jn===mr.TextDirection.RightToLeft,Mi=Er.useRef(),Fi="";if(Wn.modificationDate){var $i=function(Hi){var Ni=ts.exec(Hi);if(!Ni)return null;var Za=parseInt(Ni[1],10),Xa=Wi(Ni[2],1,12,1)-1,za=Wi(Ni[3],1,31,1),hs=Wi(Ni[4],0,23,0),rs=Wi(Ni[5],0,59,0),cs=Wi(Ni[6],0,59,0),Os=Ni[7]||"Z",Ss=Wi(Ni[8],0,23,0),Ts=Wi(Ni[9],0,59,0);switch(Os){case"-":hs+=Ss,rs+=Ts;break;case"+":hs-=Ss,rs-=Ts}return new Date(Date.UTC(Za,Xa,za,hs,rs,cs))}(Wn.modificationDate);Fi=$i?"".concat($i.toLocaleDateString(),", ").concat($i.toLocaleTimeString()):""}return Er.useLayoutEffect(function(){if(Mi.current){var Hi=document.querySelector('[data-annotation-id="'.concat(Wn.id,'"]'));if(Hi){var Ni=Hi;return Ni.style.zIndex+=1,function(){Ni.style.zIndex="".concat(parseInt(Ni.style.zIndex,10)-1)}}}},[]),Er.createElement("div",{ref:Mi,className:Gr({"rpv-core__annotation-popup-wrapper":!0,"rpv-core__annotation-popup-wrapper--rtl":_i}),style:{top:Wn.annotationType===mr.AnnotationType.Popup?"":"100%"}},ai&&Er.createElement(Er.Fragment,null,Er.createElement("div",{className:Gr({"rpv-core__annotation-popup-title":!0,"rpv-core__annotation-popup-title--ltr":!_i,"rpv-core__annotation-popup-title--rtl":_i})},ai),Er.createElement("div",{className:"rpv-core__annotation-popup-date"},Fi)),Ii&&Er.createElement("div",{className:"rpv-core__annotation-popup-content"},Ii.split(`
`).map(function(Hi,Ni){return Er.createElement(Er.Fragment,{key:Ni},Hi,Er.createElement("br",null))})))};(function(Pn){Pn.Click="Click",Pn.Hover="Hover"})(ro||(ro={}));var Bs,oo=function(Pn){var Wn,Jn=Pn.annotation,ai=Pn.children,Ii=Pn.ignoreBorder,_i=Pn.hasPopup,Mi=Pn.isRenderable,Fi=Pn.page,$i=Pn.viewport,Hi=Jn.rect,Ni=function(){var Ms=Vn(!1),no=Ms.opened,Js=Ms.toggle,io=Er.useState(ro.Hover),Ks=io[0],fo=io[1];return{opened:no,closeOnHover:function(){Ks===ro.Hover&&Js(mr.ToggleStatus.Close)},openOnHover:function(){Ks===ro.Hover&&Js(mr.ToggleStatus.Open)},toggleOnClick:function(){switch(Ks){case ro.Click:no&&fo(ro.Hover),Js(mr.ToggleStatus.Toggle);break;case ro.Hover:fo(ro.Click),Js(mr.ToggleStatus.Open)}}}}(),Za=Ni.closeOnHover,Xa=Ni.opened,za=Ni.openOnHover,hs=Ni.toggleOnClick,rs=(Wn=[Hi[0],Fi.view[3]+Fi.view[1]-Hi[1],Hi[2],Fi.view[3]+Fi.view[1]-Hi[3]],[Math.min(Wn[0],Wn[2]),Math.min(Wn[1],Wn[3]),Math.max(Wn[0],Wn[2]),Math.max(Wn[1],Wn[3])]),cs=Hi[2]-Hi[0],Os=Hi[3]-Hi[1],Ss={borderColor:"",borderRadius:"",borderStyle:"",borderWidth:""};if(!Ii&&Jn.borderStyle.width>0){switch(Jn.borderStyle.style){case os.Dashed:Ss.borderStyle="dashed";break;case os.Solid:Ss.borderStyle="solid";break;case os.Underline:Ss=Object.assign({borderBottomStyle:"solid"},Ss);case os.Beveled:case os.Inset:}var Ts=Jn.borderStyle.width;Ss.borderWidth="".concat(Ts,"px"),Jn.borderStyle.style!==os.Underline&&(cs-=2*Ts,Os-=2*Ts);var $s=Jn.borderStyle,bs=$s.horizontalCornerRadius,Ds=$s.verticalCornerRadius;(bs>0||Ds>0)&&(Ss.borderRadius="".concat(bs,"px / ").concat(Ds,"px")),Jn.color?Ss.borderColor="rgb(".concat(0|Jn.color[0],", ").concat(0|Jn.color[1],", ").concat(0|Jn.color[2],")"):Ss.borderWidth="0"}return Er.createElement(Er.Fragment,null,Mi&&ai({popup:{opened:Xa,closeOnHover:Za,openOnHover:za,toggleOnClick:hs},slot:{attrs:{style:Object.assign({height:"".concat(Os,"px"),left:"".concat(rs[0],"px"),top:"".concat(rs[1],"px"),transform:"matrix(".concat($i.transform.join(","),")"),transformOrigin:"-".concat(rs[0],"px -").concat(rs[1],"px"),width:"".concat(cs,"px")},Ss)},children:Er.createElement(Er.Fragment,null,_i&&Xa&&Er.createElement(bo,{annotation:Jn}))}}))},Al=function(Pn){var Wn=Pn.annotation,Jn=Pn.page,ai=Pn.viewport,Ii=Wn.hasPopup===!1,_i=fs(Wn),Mi=Gi(Wn),Fi=!!(Wn.hasPopup||_i||Mi);return Er.createElement(oo,{annotation:Wn,hasPopup:Ii,ignoreBorder:!0,isRenderable:Fi,page:Jn,viewport:ai},function($i){return Er.createElement("div",Dr({},$i.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--caret","data-annotation-id":Wn.id,onClick:$i.popup.toggleOnClick,onMouseEnter:$i.popup.openOnHover,onMouseLeave:$i.popup.closeOnHover}),$i.slot.children)})},Cl=function(Pn){var Wn=Pn.annotation,Jn=Pn.page,ai=Pn.viewport,Ii=Wn.hasPopup===!1,_i=fs(Wn),Mi=Gi(Wn),Fi=!!(Wn.hasPopup||_i||Mi),$i=Wn.rect,Hi=$i[2]-$i[0],Ni=$i[3]-$i[1],Za=Wn.borderStyle.width;return Er.createElement(oo,{annotation:Wn,hasPopup:Ii,ignoreBorder:!0,isRenderable:Fi,page:Jn,viewport:ai},function(Xa){return Er.createElement("div",Dr({},Xa.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--circle","data-annotation-id":Wn.id,onClick:Xa.popup.toggleOnClick,onMouseEnter:Xa.popup.openOnHover,onMouseLeave:Xa.popup.closeOnHover}),Er.createElement("svg",{height:"".concat(Ni,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(Hi," ").concat(Ni),width:"".concat(Hi,"px")},Er.createElement("circle",{cy:Ni/2,fill:"none",rx:Hi/2-Za/2,ry:Ni/2-Za/2,stroke:"transparent",strokeWidth:Za||1})),Xa.slot.children)})},wl=function(Pn){var Wn=Pn.annotation,Jn=Pn.page,ai=Pn.viewport,Ii=fs(Wn),_i=Gi(Wn),Mi=!(Wn.hasPopup!==!1||!Ii&&!_i),Fi=function(){var $i,Hi,Ni,Za,Xa=Wn.file;Xa&&($i=Xa.filename,Hi=Xa.content,Ni=typeof Hi=="string"?"":URL.createObjectURL(new Blob([Hi],{type:""})),(Za=document.createElement("a")).style.display="none",Za.href=Ni||$i,Za.setAttribute("download",function(za){var hs=za.split("/").pop();return hs?hs.split("#")[0].split("?")[0]:za}($i)),document.body.appendChild(Za),Za.click(),document.body.removeChild(Za),Ni&&URL.revokeObjectURL(Ni))};return Er.createElement(oo,{annotation:Wn,hasPopup:Mi,ignoreBorder:!0,isRenderable:!0,page:Jn,viewport:ai},function($i){return Er.createElement("div",Dr({},$i.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--file-attachment","data-annotation-id":Wn.id,onClick:$i.popup.toggleOnClick,onDoubleClick:Fi,onMouseEnter:$i.popup.openOnHover,onMouseLeave:$i.popup.closeOnHover}),$i.slot.children)})},Go=function(Pn){var Wn=Pn.annotation,Jn=Pn.page,ai=Pn.viewport,Ii=Wn.hasPopup===!1,_i=fs(Wn),Mi=Gi(Wn),Fi=!!(Wn.hasPopup||_i||Mi);return Er.createElement(oo,{annotation:Wn,hasPopup:Ii,ignoreBorder:!0,isRenderable:Fi,page:Jn,viewport:ai},function($i){return Er.createElement("div",Dr({},$i.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--free-text","data-annotation-id":Wn.id,onClick:$i.popup.toggleOnClick,onMouseEnter:$i.popup.openOnHover,onMouseLeave:$i.popup.closeOnHover}),$i.slot.children)})},bl=function(Pn){var Wn=Pn.annotation,Jn=Pn.page,ai=Pn.viewport,Ii=fs(Wn),_i=Gi(Wn),Mi=!(!Ii&&!_i),Fi=!Wn.parentType||["Circle","Ink","Line","Polygon","PolyLine","Square"].indexOf(Wn.parentType)!==-1;return qr(function(){if(Wn.parentId){var $i=document.querySelector('[data-annotation-id="'.concat(Wn.parentId,'"]')),Hi=document.querySelector('[data-annotation-id="'.concat(Wn.id,'"]'));if($i&&Hi){var Ni=parseFloat($i.style.left),Za=parseFloat($i.style.top)+parseFloat($i.style.height);Hi.style.left="".concat(Ni,"px"),Hi.style.top="".concat(Za,"px"),Hi.style.transformOrigin="-".concat(Ni,"px -").concat(Za,"px")}}},[]),Er.createElement(oo,{annotation:Wn,hasPopup:Fi,ignoreBorder:!1,isRenderable:Mi,page:Jn,viewport:ai},function($i){return Er.createElement("div",Dr({},$i.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--popup","data-annotation-id":Wn.id}),Er.createElement(bo,{annotation:Wn}))})},dl=function(Pn){var Wn=Pn.annotation,Jn=Pn.childAnnotation,ai=Pn.page,Ii=Pn.viewport,_i=Wn.hasPopup===!1,Mi=fs(Wn),Fi=Gi(Wn),$i=!!(Wn.hasPopup||Mi||Fi);if(Wn.quadPoints&&Wn.quadPoints.length>0){var Hi=Wn.quadPoints.map(function(Ni){return Object.assign({},Wn,{rect:[Ni[2].x,Ni[2].y,Ni[1].x,Ni[1].y],quadPoints:[]})});return Er.createElement(Er.Fragment,null,Hi.map(function(Ni,Za){return Er.createElement(dl,{key:Za,annotation:Ni,childAnnotation:Jn,page:ai,viewport:Ii})}))}return Er.createElement(oo,{annotation:Wn,hasPopup:_i,ignoreBorder:!0,isRenderable:$i,page:ai,viewport:Ii},function(Ni){return Er.createElement(Er.Fragment,null,Er.createElement("div",Dr({},Ni.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--highlight","data-annotation-id":Wn.id,onClick:Ni.popup.toggleOnClick,onMouseEnter:Ni.popup.openOnHover,onMouseLeave:Ni.popup.closeOnHover}),Ni.slot.children),Jn&&Jn.annotationType===mr.AnnotationType.Popup&&Ni.popup.opened&&Er.createElement(bl,{annotation:Jn,page:ai,viewport:Ii}))})},Hl=function(Pn){var Wn=Pn.annotation,Jn=Pn.page,ai=Pn.viewport,Ii=Wn.hasPopup===!1,_i=fs(Wn),Mi=Gi(Wn),Fi=!!(Wn.hasPopup||_i||Mi),$i=Wn.rect,Hi=$i[2]-$i[0],Ni=$i[3]-$i[1],Za=Wn.borderStyle.width;return Er.createElement(oo,{annotation:Wn,hasPopup:Ii,ignoreBorder:!0,isRenderable:Fi,page:Jn,viewport:ai},function(Xa){return Er.createElement("div",Dr({},Xa.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--ink","data-annotation-id":Wn.id,onClick:Xa.popup.toggleOnClick,onMouseEnter:Xa.popup.openOnHover,onMouseLeave:Xa.popup.closeOnHover}),Wn.inkLists&&Wn.inkLists.length&&Er.createElement("svg",{height:"".concat(Ni,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(Hi," ").concat(Ni),width:"".concat(Hi,"px")},Wn.inkLists.map(function(za,hs){return Er.createElement("polyline",{key:hs,fill:"none",stroke:"transparent",strokeWidth:Za||1,points:za.map(function(rs){return"".concat(rs.x-$i[0],",").concat($i[3]-rs.y)}).join(" ")})})),Xa.slot.children)})},Oo=function(Pn){var Wn=Pn.annotation,Jn=Pn.page,ai=Pn.viewport,Ii=Wn.hasPopup===!1,_i=fs(Wn),Mi=Gi(Wn),Fi=!!(Wn.hasPopup||_i||Mi),$i=Wn.rect,Hi=$i[2]-$i[0],Ni=$i[3]-$i[1],Za=Wn.borderStyle.width;return Er.createElement(oo,{annotation:Wn,hasPopup:Ii,ignoreBorder:!0,isRenderable:Fi,page:Jn,viewport:ai},function(Xa){return Er.createElement("div",Dr({},Xa.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--line","data-annotation-id":Wn.id,onClick:Xa.popup.toggleOnClick,onMouseEnter:Xa.popup.openOnHover,onMouseLeave:Xa.popup.closeOnHover}),Er.createElement("svg",{height:"".concat(Ni,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(Hi," ").concat(Ni),width:"".concat(Hi,"px")},Er.createElement("line",{stroke:"transparent",strokeWidth:Za||1,x1:$i[2]-Wn.lineCoordinates[0],x2:$i[2]-Wn.lineCoordinates[2],y1:$i[3]-Wn.lineCoordinates[1],y2:$i[3]-Wn.lineCoordinates[3]})),Xa.slot.children)})},ac=/^([^\w]*)(javascript|data|vbscript)/im,sc=/&#(\w+)(^\w|;)?/g,Vl=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,vc=/^([^:]+):/gm,Rl=function(Pn,Wn){var Jn,ai=(Jn=Pn||"",Jn.replace(sc,function(Fi,$i){return String.fromCharCode($i)})).replace(Vl,"").trim();if(!ai)return Wn;var Ii=ai[0];if(Ii==="."||Ii==="/")return ai;var _i=ai.match(vc);if(!_i)return ai;var Mi=_i[0];return ac.test(Mi)?Wn:ai},Ko=function(Pn){var Wn,Jn=Pn.annotation,ai=Pn.annotationContainerRef,Ii=Pn.doc,_i=Pn.outlines,Mi=Pn.page,Fi=Pn.pageIndex,$i=Pn.scale,Hi=Pn.viewport,Ni=Pn.onExecuteNamedAction,Za=Pn.onJumpFromLinkAnnotation,Xa=Pn.onJumpToDest,za=Er.useRef(),hs=_i&&_i.length&&Jn.dest&&typeof Jn.dest=="string"?(Wn=_i.find(function(Ss){return Ss.dest===Jn.dest}))===null||Wn===void 0?void 0:Wn.title:"",rs=!!(Jn.url||Jn.dest||Jn.action||Jn.unsafeUrl),cs={};if(Jn.url||Jn.unsafeUrl){var Os=Rl(Jn.url||Jn.unsafeUrl,"");Os?cs={"data-target":"external",href:Os,rel:"noopener noreferrer nofollow",target:Jn.newWindow?"_blank":"",title:Os}:rs=!1}else cs={href:"","data-annotation-link":Jn.id,onClick:function(Ss){Ss.preventDefault(),Jn.action?Ni(Jn.action):al(Ii,Jn.dest).then(function(Ts){var $s=za.current,bs=ai.current;if($s&&bs){var Ds=$s.getBoundingClientRect();bs.style.setProperty("height","100%"),bs.style.setProperty("width","100%");var Ms=bs.getBoundingClientRect();bs.style.removeProperty("height"),bs.style.removeProperty("width");var no=(Ds.left-Ms.left)/$i,Js=(Ms.bottom-Ds.bottom+Ds.height)/$i;Za({bottomOffset:Js,label:hs,leftOffset:no,pageIndex:Fi})}Xa(Ts)})}};return hs&&(cs=Object.assign({},cs,{title:hs,"aria-label":hs})),Er.createElement(oo,{annotation:Jn,hasPopup:!1,ignoreBorder:!1,isRenderable:rs,page:Mi,viewport:Hi},function(Ss){return Er.createElement("div",Dr({},Ss.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--link","data-annotation-id":Jn.id,"data-testid":"core__annotation--link-".concat(Jn.id)}),Er.createElement("a",Dr({ref:za},cs)))})},Wl=function(Pn){var Wn=Pn.annotation,Jn=Pn.page,ai=Pn.viewport,Ii=Wn.hasPopup===!1,_i=fs(Wn),Mi=Gi(Wn),Fi=!!(Wn.hasPopup||_i||Mi),$i=Wn.rect,Hi=$i[2]-$i[0],Ni=$i[3]-$i[1],Za=Wn.borderStyle.width;return Er.createElement(oo,{annotation:Wn,hasPopup:Ii,ignoreBorder:!0,isRenderable:Fi,page:Jn,viewport:ai},function(Xa){return Er.createElement("div",Dr({},Xa.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polygon","data-annotation-id":Wn.id,onClick:Xa.popup.toggleOnClick,onMouseEnter:Xa.popup.openOnHover,onMouseLeave:Xa.popup.closeOnHover}),Wn.vertices&&Wn.vertices.length&&Er.createElement("svg",{height:"".concat(Ni,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(Hi," ").concat(Ni),width:"".concat(Hi,"px")},Er.createElement("polygon",{fill:"none",stroke:"transparent",strokeWidth:Za||1,points:Wn.vertices.map(function(za){return"".concat(za.x-$i[0],",").concat($i[3]-za.y)}).join(" ")})),Xa.slot.children)})},bc=function(Pn){var Wn=Pn.annotation,Jn=Pn.page,ai=Pn.viewport,Ii=Wn.hasPopup===!1,_i=fs(Wn),Mi=Gi(Wn),Fi=!!(Wn.hasPopup||_i||Mi),$i=Wn.rect,Hi=$i[2]-$i[0],Ni=$i[3]-$i[1],Za=Wn.borderStyle.width;return Er.createElement(oo,{annotation:Wn,hasPopup:Ii,ignoreBorder:!0,isRenderable:Fi,page:Jn,viewport:ai},function(Xa){return Er.createElement("div",Dr({},Xa.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polyline","data-annotation-id":Wn.id,onClick:Xa.popup.toggleOnClick,onMouseEnter:Xa.popup.openOnHover,onMouseLeave:Xa.popup.closeOnHover}),Wn.vertices&&Wn.vertices.length&&Er.createElement("svg",{height:"".concat(Ni,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(Hi," ").concat(Ni),width:"".concat(Hi,"px")},Er.createElement("polyline",{fill:"none",stroke:"transparent",strokeWidth:Za||1,points:Wn.vertices.map(function(za){return"".concat(za.x-$i[0],",").concat($i[3]-za.y)}).join(" ")})),Xa.slot.children)})},bd=function(Pn){var Wn=Pn.annotation,Jn=Pn.page,ai=Pn.viewport,Ii=Wn.hasPopup===!1,_i=fs(Wn),Mi=Gi(Wn),Fi=!!(Wn.hasPopup||_i||Mi),$i=Wn.rect,Hi=$i[2]-$i[0],Ni=$i[3]-$i[1],Za=Wn.borderStyle.width;return Er.createElement(oo,{annotation:Wn,hasPopup:Ii,ignoreBorder:!0,isRenderable:Fi,page:Jn,viewport:ai},function(Xa){return Er.createElement("div",Dr({},Xa.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--square","data-annotation-id":Wn.id,onClick:Xa.popup.toggleOnClick,onMouseEnter:Xa.popup.openOnHover,onMouseLeave:Xa.popup.closeOnHover}),Er.createElement("svg",{height:"".concat(Ni,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(Hi," ").concat(Ni),width:"".concat(Hi,"px")},Er.createElement("rect",{height:Ni-Za,fill:"none",stroke:"transparent",strokeWidth:Za||1,x:Za/2,y:Za/2,width:Hi-Za})),Xa.slot.children)})},yd=function(Pn){var Wn=Pn.annotation,Jn=Pn.page,ai=Pn.viewport,Ii=Wn.hasPopup===!1,_i=fs(Wn),Mi=Gi(Wn),Fi=!!(Wn.hasPopup||_i||Mi);return Er.createElement(oo,{annotation:Wn,hasPopup:Ii,ignoreBorder:!0,isRenderable:Fi,page:Jn,viewport:ai},function($i){return Er.createElement("div",Dr({},$i.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--squiggly","data-annotation-id":Wn.id,onClick:$i.popup.toggleOnClick,onMouseEnter:$i.popup.openOnHover,onMouseLeave:$i.popup.closeOnHover}),$i.slot.children)})},xd=function(Pn){var Wn=Pn.annotation,Jn=Pn.page,ai=Pn.viewport,Ii=Wn.hasPopup===!1,_i=fs(Wn),Mi=Gi(Wn),Fi=!!(Wn.hasPopup||_i||Mi);return Er.createElement(oo,{annotation:Wn,hasPopup:Ii,ignoreBorder:!0,isRenderable:Fi,page:Jn,viewport:ai},function($i){return Er.createElement("div",Dr({},$i.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--stamp","data-annotation-id":Wn.id,onClick:$i.popup.toggleOnClick,onMouseEnter:$i.popup.openOnHover,onMouseLeave:$i.popup.closeOnHover}),$i.slot.children)})},Ed=function(Pn){var Wn=Pn.annotation,Jn=Pn.page,ai=Pn.viewport,Ii=Wn.hasPopup===!1,_i=fs(Wn),Mi=Gi(Wn),Fi=!!(Wn.hasPopup||_i||Mi);return Er.createElement(oo,{annotation:Wn,hasPopup:Ii,ignoreBorder:!0,isRenderable:Fi,page:Jn,viewport:ai},function($i){return Er.createElement("div",Dr({},$i.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--strike-out","data-annotation-id":Wn.id,onClick:$i.popup.toggleOnClick,onMouseEnter:$i.popup.openOnHover,onMouseLeave:$i.popup.closeOnHover}),$i.slot.children)})},$d=function(){return Er.createElement(Qr,{size:16},Er.createElement("path",{d:"M.5,16.5a1,1,0,0,0,1,1h2v4l4-4h15a1,1,0,0,0,1-1V3.5a1,1,0,0,0-1-1H1.5a1,1,0,0,0-1,1Z"}),Er.createElement("path",{d:"M7.25,9.75A.25.25,0,1,1,7,10a.25.25,0,0,1,.25-.25"}),Er.createElement("path",{d:"M12,9.75a.25.25,0,1,1-.25.25A.25.25,0,0,1,12,9.75"}),Er.createElement("path",{d:"M16.75,9.75a.25.25,0,1,1-.25.25.25.25,0,0,1,.25-.25"}))},Cu=function(){return Er.createElement(Qr,{size:16},Er.createElement("path",{d:"M0.500 12.001 A11.500 11.500 0 1 0 23.500 12.001 A11.500 11.500 0 1 0 0.500 12.001 Z"}),Er.createElement("path",{d:"M6.000 12.001 A6.000 6.000 0 1 0 18.000 12.001 A6.000 6.000 0 1 0 6.000 12.001 Z"}),Er.createElement("path",{d:"M21.423 5.406L17.415 9.414"}),Er.createElement("path",{d:"M14.587 6.585L18.607 2.565"}),Er.createElement("path",{d:"M5.405 21.424L9.413 17.416"}),Er.createElement("path",{d:"M6.585 14.588L2.577 18.596"}),Er.createElement("path",{d:"M18.602 21.419L14.595 17.412"}),Er.createElement("path",{d:"M17.419 14.58L21.428 18.589"}),Er.createElement("path",{d:"M2.582 5.399L6.588 9.406"}),Er.createElement("path",{d:"M9.421 6.581L5.412 2.572"}))},_d=function(){return Er.createElement(Qr,{size:16},Er.createElement("path",{d:"M4.000 18.500 A1.500 1.500 0 1 0 7.000 18.500 A1.500 1.500 0 1 0 4.000 18.500 Z"}),Er.createElement("path",{d:"M20.5.5l-9.782,9.783a7,7,0,1,0,3,3L17,10h1.5V8.5L19,8h1.5V6.5L21,6h1.5V4.5l1-1V.5Z"}))},Sd=function(){return Er.createElement(Qr,{size:16},Er.createElement("path",{d:"M2.000 2.500 L22.000 2.500 L22.000 23.500 L2.000 23.500 Z"}),Er.createElement("path",{d:"M6 4.5L6 0.5"}),Er.createElement("path",{d:"M18 4.5L18 0.5"}),Er.createElement("path",{d:"M10 4.5L10 0.5"}),Er.createElement("path",{d:"M14 4.5L14 0.5"}))},Ad=function(){return Er.createElement(Qr,{size:16},Er.createElement("path",{d:"M17.5 0.498L17.5 23.498"}),Er.createElement("path",{d:"M10.5 0.498L10.5 23.498"}),Er.createElement("path",{d:"M23.5.5H6.5a6,6,0,0,0,0,12h4"}))},Cd=function(){return Er.createElement(Qr,{size:16},Er.createElement("path",{d:"M2.5 22.995L12 6.005 21.5 22.995 2.5 22.995z"}))},Rd=function(Pn){var Wn=Pn.annotation,Jn=Pn.childAnnotation,ai=Pn.page,Ii=Pn.viewport,_i=Wn.hasPopup===!1,Mi=fs(Wn),Fi=Gi(Wn),$i=!!(Wn.hasPopup||Mi||Fi),Hi=Wn.name?Wn.name.toLowerCase():"";return Er.createElement(oo,{annotation:Wn,hasPopup:_i,ignoreBorder:!1,isRenderable:$i,page:ai,viewport:Ii},function(Ni){return Er.createElement(Er.Fragment,null,Er.createElement("div",Dr({},Ni.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--text","data-annotation-id":Wn.id,onClick:Ni.popup.toggleOnClick,onMouseEnter:Ni.popup.openOnHover,onMouseLeave:Ni.popup.closeOnHover}),Hi&&Er.createElement("div",{className:"rpv-core__annotation-text-icon"},Hi==="check"&&Er.createElement(sn,null),Hi==="comment"&&Er.createElement($d,null),Hi==="help"&&Er.createElement(Cu,null),Hi==="insert"&&Er.createElement(Cd,null),Hi==="key"&&Er.createElement(_d,null),Hi==="note"&&Er.createElement(Sd,null),(Hi==="newparagraph"||Hi==="paragraph")&&Er.createElement(Ad,null)),Ni.slot.children),Jn&&Jn.annotationType===mr.AnnotationType.Popup&&Ni.popup.opened&&Er.createElement(bl,{annotation:Jn,page:ai,viewport:Ii}))})},Id=function(Pn){var Wn=Pn.annotation,Jn=Pn.page,ai=Pn.viewport,Ii=Wn.hasPopup===!1,_i=fs(Wn),Mi=Gi(Wn),Fi=!!(Wn.hasPopup||_i||Mi);return Er.createElement(oo,{annotation:Wn,hasPopup:Ii,ignoreBorder:!0,isRenderable:Fi,page:Jn,viewport:ai},function($i){return Er.createElement("div",Dr({},$i.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--underline","data-annotation-id":Wn.id,onClick:$i.popup.toggleOnClick,onMouseEnter:$i.popup.openOnHover,onMouseLeave:$i.popup.closeOnHover}),$i.slot.children)})},Ic=function(Pn){var Wn=Pn.annotations,Jn=Pn.doc,ai=Pn.outlines,Ii=Pn.page,_i=Pn.pageIndex,Mi=Pn.plugins,Fi=Pn.rotation,$i=Pn.scale,Hi=Pn.onExecuteNamedAction,Ni=Pn.onJumpFromLinkAnnotation,Za=Pn.onJumpToDest,Xa=Er.useRef(),za=Ii.getViewport({rotation:Fi,scale:$i}).clone({dontFlip:!0}),hs=Wn.filter(function(rs){return!rs.parentId});return qr(function(){var rs=Xa.current;rs&&Mi.forEach(function(cs){cs.onAnnotationLayerRender&&cs.onAnnotationLayerRender({annotations:hs,container:rs,pageIndex:_i,rotation:Fi,scale:$i})})},[]),Er.createElement("div",{ref:Xa,className:"rpv-core__annotation-layer","data-testid":"core__annotation-layer-".concat(_i)},hs.map(function(rs){var cs=Wn.find(function(Os){return Os.parentId===rs.id});switch(rs.annotationType){case mr.AnnotationType.Caret:return Er.createElement(Al,{key:rs.id,annotation:rs,page:Ii,viewport:za});case mr.AnnotationType.Circle:return Er.createElement(Cl,{key:rs.id,annotation:rs,page:Ii,viewport:za});case mr.AnnotationType.FileAttachment:return Er.createElement(wl,{key:rs.id,annotation:rs,page:Ii,viewport:za});case mr.AnnotationType.FreeText:return Er.createElement(Go,{key:rs.id,annotation:rs,page:Ii,viewport:za});case mr.AnnotationType.Highlight:return Er.createElement(dl,{key:rs.id,annotation:rs,childAnnotation:cs,page:Ii,viewport:za});case mr.AnnotationType.Ink:return Er.createElement(Hl,{key:rs.id,annotation:rs,page:Ii,viewport:za});case mr.AnnotationType.Line:return Er.createElement(Oo,{key:rs.id,annotation:rs,page:Ii,viewport:za});case mr.AnnotationType.Link:return Er.createElement(Ko,{key:rs.id,annotation:rs,annotationContainerRef:Xa,doc:Jn,outlines:ai,page:Ii,pageIndex:_i,scale:$i,viewport:za,onExecuteNamedAction:Hi,onJumpFromLinkAnnotation:Ni,onJumpToDest:Za});case mr.AnnotationType.Polygon:return Er.createElement(Wl,{key:rs.id,annotation:rs,page:Ii,viewport:za});case mr.AnnotationType.Polyline:return Er.createElement(bc,{key:rs.id,annotation:rs,page:Ii,viewport:za});case mr.AnnotationType.Popup:return Er.createElement(bl,{key:rs.id,annotation:rs,page:Ii,viewport:za});case mr.AnnotationType.Square:return Er.createElement(bd,{key:rs.id,annotation:rs,page:Ii,viewport:za});case mr.AnnotationType.Squiggly:return Er.createElement(yd,{key:rs.id,annotation:rs,page:Ii,viewport:za});case mr.AnnotationType.Stamp:return Er.createElement(xd,{key:rs.id,annotation:rs,page:Ii,viewport:za});case mr.AnnotationType.StrikeOut:return Er.createElement(Ed,{key:rs.id,annotation:rs,page:Ii,viewport:za});case mr.AnnotationType.Text:return Er.createElement(Rd,{key:rs.id,annotation:rs,childAnnotation:cs,page:Ii,viewport:za});case mr.AnnotationType.Underline:return Er.createElement(Id,{key:rs.id,annotation:rs,page:Ii,viewport:za});default:return Er.createElement(Er.Fragment,{key:rs.id})}}))},Md=function(Pn){var Wn=Pn.page,Jn=Pn.renderAnnotations,ai=Gn(),Ii=Er.useState({loading:!0,annotations:[]}),_i=Ii[0],Mi=Ii[1];return Er.useEffect(function(){Wn.getAnnotations({intent:"display"}).then(function(Fi){ai.current&&Mi({loading:!1,annotations:Fi})})},[]),_i.loading?Er.createElement(Er.Fragment,null):Jn(_i.annotations)},Mc=function(Pn){var Wn=Pn.doc,Jn=Pn.outlines,ai=Pn.page,Ii=Pn.pageIndex,_i=Pn.plugins,Mi=Pn.rotation,Fi=Pn.scale,$i=Pn.onExecuteNamedAction,Hi=Pn.onJumpFromLinkAnnotation,Ni=Pn.onJumpToDest;return Er.createElement(Md,{page:ai,renderAnnotations:function(Za){return Er.createElement(Ic,{annotations:Za,doc:Wn,outlines:Jn,page:ai,pageIndex:Ii,plugins:_i,rotation:Mi,scale:Fi,onExecuteNamedAction:$i,onJumpFromLinkAnnotation:Hi,onJumpToDest:Ni})}})},kc=function(Pn,Wn){var Jn=Pn%Wn;return Jn===0?Pn:Math.floor(Pn-Jn)},kd=function(Pn){var Wn=Pn.canvasLayerRef,Jn=Pn.height,ai=Pn.page,Ii=Pn.pageIndex,_i=Pn.plugins,Mi=Pn.rotation,Fi=Pn.scale,$i=Pn.width,Hi=Pn.onRenderCanvasCompleted,Ni=Er.useRef();return qr(function(){var Za=Ni.current;Za&&Za.cancel();var Xa=Wn.current;Xa.removeAttribute("data-testid"),_i.forEach(function(Ms){Ms.onCanvasLayerRender&&Ms.onCanvasLayerRender({ele:Xa,pageIndex:Ii,rotation:Mi,scale:Fi,status:mr.LayerRenderStatus.PreRender})});var za=ai.getViewport({rotation:Mi,scale:Fi}),hs=window.devicePixelRatio||1,rs=Math.sqrt(16777216/(za.width*za.height)),cs=hs>rs;cs?Xa.style.transform="scale(1, 1)":Xa.style.removeProperty("transform");var Os=Math.min(rs,hs),Ss=function(Ms,no){var Js,io;if(Math.floor(Ms)===Ms)return[Ms,1];var Ks=1/Ms;if(Ks>no)return[1,no];if(Math.floor(Ks)===Ks)return[1,Ks];for(var fo=Ms>1?Ks:Ms,po=0,wo=1,ko=1,Eo=1;;){var Ro=po+ko,Io=wo+Eo;if(Io>no)break;fo<=Ro/Io?(ko=(Js=[Ro,Io])[0],Eo=Js[1]):(po=(io=[Ro,Io])[0],wo=io[1])}return fo<(po/wo+ko/Eo)/2?fo===Ms?[po,wo]:[wo,po]:fo===Ms?[ko,Eo]:[Eo,ko]}(Os,8),Ts=Ss[0],$s=Ss[1];Xa.width=kc(za.width*Os,Ts),Xa.height=kc(za.height*Os,Ts),Xa.style.width="".concat(kc(za.width,$s),"px"),Xa.style.height="".concat(kc(za.height,$s),"px"),Xa.hidden=!0;var bs=Xa.getContext("2d",{alpha:!1}),Ds=cs||hs!==1?[Os,0,0,Os,0,0]:null;return Ni.current=ai.render({canvasContext:bs,transform:Ds,viewport:za}),Ni.current.promise.then(function(){Xa.hidden=!1,Xa.setAttribute("data-testid","core__canvas-layer-".concat(Ii)),_i.forEach(function(Ms){Ms.onCanvasLayerRender&&Ms.onCanvasLayerRender({ele:Xa,pageIndex:Ii,rotation:Mi,scale:Fi,status:mr.LayerRenderStatus.DidRender})}),Hi()},function(){Hi()}),function(){Xa&&(Xa.width=0,Xa.height=0)}},[]),Er.createElement("div",{className:"rpv-core__canvas-layer",style:{height:"".concat(Jn,"px"),width:"".concat($i,"px")}},Er.createElement("canvas",{ref:Wn}))},Pd=function(Pn){var Wn=Pn.height,Jn=Pn.page,ai=Pn.rotation,Ii=Pn.scale,_i=Pn.width,Mi=Er.useRef();return qr(function(){var Fi=Mi.current,$i=Jn.getViewport({rotation:ai,scale:Ii});Jn.getOperatorList().then(function(Hi){(function(){var Ni=Mi.current;Ni&&(Ni.innerHTML="")})(),new Cr.SVGGraphics(Jn.commonObjs,Jn.objs).getSVG(Hi,$i).then(function(Ni){Ni.style.height="".concat(Wn,"px"),Ni.style.width="".concat(_i,"px"),Fi.appendChild(Ni)})})},[]),Er.createElement("div",{className:"rpv-core__svg-layer",ref:Mi})},wu=function(Pn){var Wn=Pn.containerRef,Jn=Pn.page,ai=Pn.pageIndex,Ii=Pn.plugins,_i=Pn.rotation,Mi=Pn.scale,Fi=Pn.onRenderTextCompleted,$i=Er.useRef(),Hi=function(){var Ni=Wn.current;Ni&&([].slice.call(Ni.querySelectorAll(".rpv-core__text-layer-text")).forEach(function(Za){return Ni.removeChild(Za)}),[].slice.call(Ni.querySelectorAll('br[role="presentation"]')).forEach(function(Za){return Ni.removeChild(Za)}))};return qr(function(){var Ni=$i.current;Ni&&Ni.cancel();var Za=Wn.current;if(Za){Za.removeAttribute("data-testid");var Xa=Jn.getViewport({rotation:_i,scale:Mi});return Ii.forEach(function(za){za.onTextLayerRender&&za.onTextLayerRender({ele:Za,pageIndex:ai,scale:Mi,status:mr.LayerRenderStatus.PreRender})}),Jn.getTextContent().then(function(za){Hi(),$i.current=Cr.renderTextLayer({container:Za,textContent:za,textContentSource:za,viewport:Xa}),$i.current.promise.then(function(){Za.setAttribute("data-testid","core__text-layer-".concat(ai)),[].slice.call(Za.children).forEach(function(hs){hs.classList.contains("rpv-core__text-layer-text--not")||hs.classList.add("rpv-core__text-layer-text")}),Ii.forEach(function(hs){hs.onTextLayerRender&&hs.onTextLayerRender({ele:Za,pageIndex:ai,scale:Mi,status:mr.LayerRenderStatus.DidRender})}),Fi()},function(){Za.removeAttribute("data-testid"),Fi()})}),function(){var za;Hi(),(za=$i.current)===null||za===void 0||za.cancel()}}},[]),Er.createElement("div",{className:"rpv-core__text-layer",ref:Wn})},Ru=function(Pn){var Wn=Pn.doc,Jn=Pn.measureRef,ai=Pn.outlines,Ii=Pn.pageIndex,_i=Pn.pageRotation,Mi=Pn.pageSize,Fi=Pn.plugins,$i=Pn.renderPage,Hi=Pn.renderQueueKey,Ni=Pn.rotation,Za=Pn.scale,Xa=Pn.shouldRender,za=Pn.viewMode,hs=Pn.onExecuteNamedAction,rs=Pn.onJumpFromLinkAnnotation,cs=Pn.onJumpToDest,Os=Pn.onRenderCompleted,Ss=Pn.onRotatePage,Ts=Gn(),$s=Er.useState(null),bs=$s[0],Ds=$s[1],Ms=Er.useState(!1),no=Ms[0],Js=Ms[1],io=Er.useState(!1),Ks=io[0],fo=io[1],po=Er.useRef(),wo=Er.useRef(),ko=Math.abs(Ni+_i)%180==0,Eo=Mi.pageWidth*Za,Ro=Mi.pageHeight*Za,Io=ko?Eo:Ro,qs=ko?Ro:Eo,Mo=(Mi.rotation+Ni+_i)%360,sl=Er.useRef(0),hl=$i||function(Po){return Er.createElement(Er.Fragment,null,Po.canvasLayer.children,Po.textLayer.children,Po.annotationLayer.children)};return Er.useEffect(function(){Ds(null),Js(!1),fo(!1)},[_i,Ni,Za]),Er.useEffect(function(){Xa&&Ts.current&&!bs&&ho(Wn,Ii).then(function(Po){Ts.current&&(sl.current=Hi,Ds(Po))})},[Xa,bs]),Er.useEffect(function(){no&&Ks&&(Hi!==sl.current?(Ds(null),Js(!1),fo(!1)):Os(Ii))},[no,Ks]),Er.createElement("div",{className:Gr({"rpv-core__page-layer":!0,"rpv-core__page-layer--dual":za===mr.ViewMode.DualPage,"rpv-core__page-layer--dual-cover":za===mr.ViewMode.DualPageWithCover,"rpv-core__page-layer--single":za===mr.ViewMode.SinglePage}),"data-testid":"core__page-layer-".concat(Ii),ref:Jn,style:{height:"".concat(qs,"px"),width:"".concat(Io,"px")}},bs?Er.createElement(Er.Fragment,null,hl({annotationLayer:{attrs:{},children:Er.createElement(Mc,{doc:Wn,outlines:ai,page:bs,pageIndex:Ii,plugins:Fi,rotation:Mo,scale:Za,onExecuteNamedAction:hs,onJumpFromLinkAnnotation:rs,onJumpToDest:cs})},canvasLayer:{attrs:{},children:Er.createElement(kd,{canvasLayerRef:po,height:qs,page:bs,pageIndex:Ii,plugins:Fi,rotation:Mo,scale:Za,width:Io,onRenderCanvasCompleted:function(){Ts.current&&Js(!0)}})},canvasLayerRendered:no,doc:Wn,height:qs,pageIndex:Ii,rotation:Mo,scale:Za,svgLayer:{attrs:{},children:Er.createElement(Pd,{height:qs,page:bs,rotation:Mo,scale:Za,width:Io})},textLayer:{attrs:{},children:Er.createElement(wu,{containerRef:wo,page:bs,pageIndex:Ii,plugins:Fi,rotation:Mo,scale:Za,onRenderTextCompleted:function(){Ts.current&&fo(!0)}})},textLayerRendered:Ks,width:Io,markRendered:Os,onRotatePage:function(Po){return Ss(Ii,Po)}}),Fi.map(function(Po,Yo){return Po.renderPageLayer?Er.createElement(Er.Fragment,{key:Yo},Po.renderPageLayer({canvasLayerRef:po,canvasLayerRendered:no,doc:Wn,height:qs,pageIndex:Ii,rotation:Mo,scale:Za,textLayerRef:wo,textLayerRendered:Ks,width:Io})):Er.createElement(Er.Fragment,{key:Yo})})):Er.createElement(vn,{testId:"core__page-layer-loading-".concat(Ii)}))},Iu=function(Pn,Wn){var Jn=Wn.rect;return Pn.height!==Jn.height||Pn.width!==Jn.width?Jn:Pn};(function(Pn){Pn.Horizontal="Horizontal",Pn.Vertical="Vertical",Pn.Both="Both"})(Bs||(Bs={}));var Dd=function(Pn){return 1-Math.pow(1-Pn,4)},Pc=1e-4,Mu={left:0,top:0},ku={capture:!1,passive:!0},Pu=function(Pn){var Wn=Pn.elementRef,Jn=Pn.enableSmoothScroll,ai=Pn.isRtl,Ii=Pn.scrollDirection,_i=Pn.onSmoothScroll,Mi=Er.useState(Mu),Fi=Mi[0],$i=Mi[1],Hi=Er.useState(Wn.current),Ni=Hi[0],Za=Hi[1],Xa=ai?-1:1,za=Er.useRef(Ii);za.current=Ii;var hs=Er.useRef(Mu),rs=Er.useRef(!0),cs=Er.useCallback(function(){rs.current=!0,Jn&&$i(hs.current),_i(!1)},[]),Os=Er.useCallback(function(){if(Ni){switch(za.current){case Bs.Horizontal:hs.current={left:Xa*Ni.scrollLeft,top:0};break;case Bs.Both:hs.current={left:Xa*Ni.scrollLeft,top:Ni.scrollTop};break;case Bs.Vertical:default:hs.current={left:0,top:Ni.scrollTop}}Jn&&!rs.current||$i(hs.current)}},[Ni]);qr(function(){Za(Wn.current)}),qr(function(){if(Ni)return Ni.addEventListener("scroll",Os,ku),function(){Ni.removeEventListener("scroll",Os,ku)}},[Ni]);var Ss=Er.useCallback(function(Ts,$s){var bs=Wn.current;if(!bs)return Promise.resolve();var Ds={left:0,top:0};switch(za.current){case Bs.Horizontal:Ds.left=Xa*Ts.left;break;case Bs.Both:Ds.left=Xa*Ts.left,Ds.top=Ts.top;break;case Bs.Vertical:default:Ds.top=Ts.top}return $s?(rs.current=!1,_i(!0),new Promise(function(Ms,no){(function(Js,io,Ks,fo,po,wo){po===void 0&&(po=function(Yo){return Yo}),wo===void 0&&(wo=function(){});var ko=0,Eo=0,Ro=!1;switch(io){case Bs.Horizontal:Eo=Js.scrollLeft,ko=0;case Bs.Both:Eo=Js.scrollLeft,ko=Js.scrollTop;break;case Bs.Vertical:default:Eo=0,ko=Js.scrollTop}var Io=function(){Ro||(Ro=!0,Js.scrollLeft=Ks.left,Js.scrollTop=Ks.top,wo())};if(Math.abs(ko-Ks.top)<=Pc&&io===Bs.Vertical)Io();else if(Math.abs(Eo-Ks.left)<=Pc&&io===Bs.Horizontal)Io();else{var qs,Mo=-1,sl=Eo-Ks.left,hl=ko-Ks.top,Po=function(Yo){Mo===-1&&(Mo=Yo);var Il=Yo-Mo,Ps=Math.min(Il/fo,1),As=po(Ps),vs={left:Eo-sl*As,top:ko-hl*As};switch(io){case Bs.Horizontal:Js.scrollLeft=vs.left;break;case Bs.Both:Js.scrollLeft=vs.left,Js.scrollTop=vs.top;break;case Bs.Vertical:default:Js.scrollTop=vs.top}Math.abs(vs.top-Ks.top)<=Pc&&Math.abs(vs.left-Ks.left)<=Pc&&!Ro&&(window.cancelAnimationFrame(qs),Io()),Il<fo?qs=window.requestAnimationFrame(Po):window.cancelAnimationFrame(qs)};qs=window.requestAnimationFrame(Po)}})(bs,za.current,Ds,400,Dd,function(){cs(),Ms()})})):new Promise(function(Ms,no){switch(za.current){case Bs.Horizontal:bs.scrollLeft=Ds.left;break;case Bs.Both:bs.scrollLeft=Ds.left,bs.scrollTop=Ds.top;break;case Bs.Vertical:default:bs.scrollTop=Ds.top}Ms()})},[Wn]);return{scrollOffset:Fi,scrollTo:Ss}},oc=function(Pn,Wn,Jn){return Math.max(Pn,Math.min(Jn,Wn))},Du=function(Pn,Wn){if(Wn!==mr.ViewMode.DualPageWithCover)return 0;if(!function(Ii){var _i=Ii.length;if(_i===1)return!1;for(var Mi=1;Mi<_i;Mi++)if(Ii[Mi].height!==Ii[0].height||Ii[Mi].width!==Ii[0].width)return!0;return!1}(Pn))return 2*Pn[0].width;var Jn=ds(Pn.slice(1),2).map(function(Ii){return Ii.length===2?Ii[0].width+Ii[1].width:Ii[0].width}),ai=[Pn[0].width].concat(Jn);return Math.max.apply(Math,ai)},Jc={left:0,top:0},Ld={left:0,top:0},Dc={left:0,top:0},Lc={left:0,top:0},Lu={height:0,width:0},Ou={left:0,top:0},eu="data-virtual-index",Fu=[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1],tu=function(Pn){var Wn=Pn.enableSmoothScroll,Jn=Pn.isRtl,ai=Pn.numberOfItems,Ii=Pn.parentRef,_i=Pn.setRenderRange,Mi=Pn.sizes,Fi=Pn.scrollMode,$i=Pn.viewMode,Hi=Er.useState(!1),Ni=Hi[0],Za=Hi[1],Xa=Er.useCallback(function(Ps){return Za(Ps)},[]),za=Er.useRef(Fi);za.current=Fi;var hs=Er.useRef($i);hs.current=$i;var rs=Fi===mr.ScrollMode.Wrapped||$i===mr.ViewMode.DualPageWithCover||$i===mr.ViewMode.DualPage?Bs.Both:Fi===mr.ScrollMode.Horizontal?Bs.Horizontal:Bs.Vertical,cs=Pu({elementRef:Ii,enableSmoothScroll:Wn,isRtl:Jn,scrollDirection:rs,onSmoothScroll:Xa}),Os=cs.scrollOffset,Ss=cs.scrollTo,Ts=function(Ps){var As=Ps.elementRef,vs=Er.useState(As.current),ys=vs[0],xs=vs[1],Ls=Er.useRef(!1),Fs=Er.useReducer(Iu,{height:0,width:0}),_s=Fs[0],ms=Fs[1];return qr(function(){As.current!==ys&&xs(As.current)}),qr(function(){if(ys&&!Ls.current){Ls.current=!0;var Us=ys.getBoundingClientRect(),zs=Us.height,So=Us.width;ms({rect:{height:zs,width:So}})}},[ys]),Er.useEffect(function(){if(ys){var Us=new ResizeObserver(function(zs,So){zs.forEach(function(yo){if(yo.target===ys){var Vo=yo.contentRect,Xo=Vo.height,Rs=Vo.width;ms({rect:{height:Xo,width:Rs}})}})});return Us.observe(ys),function(){Us.unobserve(ys)}}},[ys]),_s}({elementRef:Ii}),$s=Er.useRef({scrollOffset:Ou,measurements:[]});$s.current.scrollOffset=Os;var bs=Er.useMemo(function(){return Array(ai).fill(-1)},[]),Ds=Er.useState(bs),Ms=Ds[0],no=Ds[1],Js=Er.useMemo(function(){var Ps=new IntersectionObserver(function(As){As.forEach(function(vs){var ys=vs.isIntersecting?vs.intersectionRatio:-1,xs=vs.target.getAttribute(eu);if(xs){var Ls=parseInt(xs,10);0<=Ls&&Ls<ai&&no(function(Fs){return Fs[Ls]=ys,function(_s,ms,Us){for(var zs,So=0,yo=ms.length;So<yo;So++)!zs&&So in ms||(zs||(zs=Array.prototype.slice.call(ms,0,So)),zs[So]=ms[So]);return _s.concat(zs||Array.prototype.slice.call(ms))}([],Fs)})}})},{threshold:Fu});return Ps},[]),io=Er.useMemo(function(){return Fi===mr.ScrollMode.Page&&$i===mr.ViewMode.SinglePage?function(Ps,As,vs){for(var ys=[],xs=0;xs<Ps;xs++){var Ls={height:Math.max(As.height,vs[xs].height),width:Math.max(As.width,vs[xs].width)},Fs=xs===0?Lc:ys[xs-1].end,_s={left:Fs.left+Ls.width,top:Fs.top+Ls.height};ys[xs]={index:xs,start:Fs,size:Ls,end:_s,visibility:-1}}return ys}(ai,Ts,Mi):$i===mr.ViewMode.DualPageWithCover?function(Ps,As,vs,ys){for(var xs=[],Ls=0,Fs=0,_s=Dc,ms=0;ms<Ps;ms++){var Us=ms===0?{height:ys===mr.ScrollMode.Page?Math.max(As.height,vs[ms].height):vs[ms].height,width:ys===mr.ScrollMode.Page?Math.max(As.width,vs[ms].width):vs[ms].width}:{height:ys===mr.ScrollMode.Page?Math.max(As.height,vs[ms].height):vs[ms].height,width:Math.max(As.width/2,vs[ms].width)};ys===mr.ScrollMode.Page?_s=ms===0?Dc:{left:ms%2==0?Us.width:0,top:Math.floor((ms-1)/2)*Us.height+xs[0].end.top}:ms===0?(_s=Dc,Ls=vs[0].height,Fs=0):ms%2==1?(_s={left:0,top:Ls+=Fs},Fs=ms===Ps-1?vs[ms].height:Math.max(vs[ms].height,vs[ms+1].height)):_s={left:xs[ms-1].end.left,top:Ls};var zs={left:_s.left+Us.width,top:_s.top+Us.height};xs[ms]={index:ms,start:_s,size:Us,end:zs,visibility:-1}}return xs}(ai,Ts,Mi,Fi):$i===mr.ViewMode.DualPage?function(Ps,As,vs,ys){for(var xs=[],Ls=0,Fs=0,_s=Ld,ms=0;ms<Ps;ms++){var Us={height:ys===mr.ScrollMode.Page?Math.max(As.height,vs[ms].height):vs[ms].height,width:Math.max(As.width/2,vs[ms].width)};ys===mr.ScrollMode.Page?_s={left:ms%2==0?0:Us.width,top:Math.floor(ms/2)*Us.height}:ms%2==0?(_s={left:0,top:Ls+=Fs},Fs=ms===Ps-1?vs[ms].height:Math.max(vs[ms].height,vs[ms+1].height)):_s={left:xs[ms-1].end.left,top:Ls};var zs={left:_s.left+Us.width,top:_s.top+Us.height};xs[ms]={index:ms,start:_s,size:Us,end:zs,visibility:-1}}return xs}(ai,Ts,Mi,Fi):function(Ps,As,vs,ys){for(var xs=[],Ls=0,Fs={left:0,top:0},_s=0,ms=Jc,Us=0;Us<Ps;Us++){var zs=vs[Us];if(Us===0)Ls=zs.width,Fs={left:0,top:0},_s=zs.height;else switch(ys){case mr.ScrollMode.Wrapped:(Ls+=zs.width)<As.width?(ms={left:xs[Us-1].end.left,top:Fs.top},_s=Math.max(_s,zs.height)):(Ls=zs.width,Fs={left:(ms={left:Fs.left,top:Fs.top+_s}).left,top:ms.top},_s=zs.height);break;case mr.ScrollMode.Horizontal:case mr.ScrollMode.Vertical:default:ms=xs[Us-1].end}var So={left:ms.left+zs.width,top:ms.top+zs.height};xs[Us]={index:Us,start:ms,size:zs,end:So,visibility:-1}}return xs}(ai,Ts,Mi,Fi)},[Fi,Mi,$i,Ts]),Ks=io[ai-1]?{height:io[ai-1].end.top,width:io[ai-1].end.left}:Lu;$s.current.measurements=io;var fo=Er.useMemo(function(){var Ps=function(Us,zs,So,yo){var Vo=0;switch(Us){case Bs.Horizontal:Vo=yo.left;break;case Bs.Vertical:default:Vo=yo.top}var Xo=zs.length-1,Rs=function($o,Ol,cc,Bc){for(;$o<=Ol;){var ql=($o+Ol)/2|0,yl=Bc(ql);if(yl<cc)$o=ql+1;else{if(!(yl>cc))return ql;Ol=ql-1}}return $o>0?$o-1:0}(0,Xo,Vo,function($o){switch(Us){case Bs.Horizontal:return zs[$o].start.left;case Bs.Both:case Bs.Vertical:default:return zs[$o].start.top}});if(Us===Bs.Both)for(var Fo=zs[Rs].start.top;Rs-1>=0&&zs[Rs-1].start.top===Fo&&zs[Rs-1].start.left>=yo.left;)Rs--;for(var xo=Rs;xo<=Xo;){var Ao={top:zs[xo].start.top-yo.top,left:zs[xo].start.left-yo.left},Do={height:So.height-Ao.top,width:So.width-Ao.left};if(Us===Bs.Horizontal&&Do.width<0||Us===Bs.Vertical&&Do.height<0||Us===Bs.Both&&(Do.width<0||Do.height<0))break;xo++}return{start:Rs,end:xo}}(rs,io,Ts,Os),As=Ps.start,vs=Ps.end,ys=Ms.slice(oc(0,ai,As),oc(0,ai,vs)),xs=As+ys.reduce(function(Us,zs,So,yo){return zs>yo[Us]?So:Us},0),Ls=xs=oc(0,ai-1,xs),Fs=_i({endPage:vs,numPages:ai,startPage:As}),_s=Fs.startPage,ms=Fs.endPage;switch(_s=Math.max(_s,0),ms=Math.min(ms,ai-1),$i){case mr.ViewMode.DualPageWithCover:xs>0&&(Ls=xs%2==1?xs:xs-1),_s=_s===0?0:_s%2==1?_s:_s-1,ai-(ms=ms%2==1?ms-1:ms)<=2&&(ms=ai-1);break;case mr.ViewMode.DualPage:Ls=xs%2==0?xs:xs-1,_s=_s%2==0?_s:_s-1,ms=ms%2==1?ms:ms-1;break;case mr.ViewMode.SinglePage:default:Ls=xs}return{startPage:_s,endPage:ms,maxVisbilityIndex:Ls}},[io,Ts,Os,$i,Ms]),po=fo.startPage,wo=fo.endPage,ko=fo.maxVisbilityIndex,Eo=Er.useMemo(function(){for(var Ps=[],As=function(ys){var xs=io[ys],Ls=Dr(Dr({},xs),{visibility:Ms[ys]!==void 0?Ms[ys]:-1,measureRef:function(Fs){Fs&&(Fs.setAttribute(eu,"".concat(ys)),Js.observe(Fs))}});Ps.push(Ls)},vs=po;vs<=wo;vs++)As(vs);return Ps},[po,wo,Ms,io]),Ro=Er.useCallback(function(Ps,As){var vs=$s.current.measurements[oc(0,ai-1,Ps)],ys=za.current===mr.ScrollMode.Page?Ou:As;return vs?Ss({left:ys.left+vs.start.left,top:ys.top+vs.start.top},Wn):Promise.resolve()},[Ss,Wn]),Io=Er.useCallback(function(Ps,As){var vs=$s.current.measurements,ys=vs[Ps].start,xs=vs.find(function(Fs){return Fs.start.top-ys.top>1e-12});if(!xs)return Promise.resolve();var Ls=xs.index;switch(hs.current){case mr.ViewMode.DualPage:Ls=Ls%2==0?Ls:Ls+1;break;case mr.ViewMode.DualPageWithCover:Ls=Ls%2==1?Ls:Ls+1}return Ro(Ls,As)},[]),qs=Er.useCallback(function(Ps,As){for(var vs=$s.current.measurements,ys=vs[Ps].start,xs=Ps,Ls=!1,Fs=ai-1;Fs>=0;Fs--)if(ys.top-vs[Fs].start.top>1e-12){Ls=!0,xs=vs[Fs].index;break}if(!Ls)return Promise.resolve();switch(hs.current){case mr.ViewMode.DualPage:xs=xs%2==0?xs:xs-1;break;case mr.ViewMode.DualPageWithCover:xs=xs%2==0?xs-1:xs}return xs===Ps&&(xs=Ps-1),Ro(xs,As)},[]),Mo=Er.useCallback(function(Ps,As){if(hs.current===mr.ViewMode.DualPageWithCover||hs.current===mr.ViewMode.DualPage)return Io(Ps,As);switch(za.current){case mr.ScrollMode.Wrapped:return Io(Ps,As);case mr.ScrollMode.Horizontal:case mr.ScrollMode.Vertical:default:return Ro(Ps+1,As)}},[]),sl=Er.useCallback(function(Ps,As){if(hs.current===mr.ViewMode.DualPageWithCover||hs.current===mr.ViewMode.DualPage)return qs(Ps,As);switch(za.current){case mr.ScrollMode.Wrapped:return qs(Ps,As);case mr.ScrollMode.Horizontal:case mr.ScrollMode.Vertical:default:return Ro(Ps-1,As)}},[]),hl=Er.useCallback(function(){return function(Ps,As){switch(As){case mr.ScrollMode.Horizontal:return{position:"relative",height:"100%",width:"".concat(Ps.width,"px")};case mr.ScrollMode.Vertical:default:return{position:"relative",height:"".concat(Ps.height,"px"),width:"100%"}}}(Ks,za.current)},[Ks]),Po=Er.useCallback(function(Ps){return function(As,vs,ys){return ys!==mr.ScrollMode.Page?{}:{height:"".concat(vs.height,"px"),width:"100%",position:"absolute",top:0,transform:"translateY(".concat(As.start.top,"px)")}}(Ps,Ts,za.current)},[Ts]),Yo=Er.useCallback(function(Ps){return function(As,vs,ys,xs,Ls){var Fs,_s,ms,Us,zs,So,yo,Vo=vs?"right":"left",Xo=vs?-1:1,Rs=ys.length,Fo=As.start.left*Xo,xo=As.size,Ao=xo.height,Do=xo.width;if(xs===mr.ViewMode.DualPageWithCover){var $o=Ls===mr.ScrollMode.Page?0:As.start.top;return As.index===0||Rs%2==0&&As.index===Rs-1?((Fs={height:"".concat(Ao,"px"),minWidth:"".concat(Du(ys,xs),"px"),width:"100%"})[Vo]=0,Fs.position="absolute",Fs.top=0,Fs.transform="translate(".concat(Fo,"px, ").concat($o,"px)"),Fs):((_s={height:"".concat(Ao,"px"),width:"".concat(Do,"px")})[Vo]=0,_s.position="absolute",_s.top=0,_s.transform="translate(".concat(Fo,"px, ").concat($o,"px)"),_s)}if(xs===mr.ViewMode.DualPage)return(ms={height:"".concat(Ao,"px"),width:"".concat(Do,"px")})[Vo]=0,ms.position="absolute",ms.top=0,ms.transform="translate(".concat(Fo,"px, ").concat(Ls===mr.ScrollMode.Page?0:As.start.top,"px)"),ms;switch(Ls){case mr.ScrollMode.Horizontal:return(Us={height:"100%",width:"".concat(Do,"px")})[Vo]=0,Us.position="absolute",Us.top=0,Us.transform="translateX(".concat(Fo,"px)"),Us;case mr.ScrollMode.Page:return(zs={height:"".concat(Ao,"px"),width:"".concat(Do,"px")})[Vo]=0,zs.position="absolute",zs.top=0,zs;case mr.ScrollMode.Wrapped:return(So={height:"".concat(Ao,"px"),width:"".concat(Do,"px")})[Vo]=0,So.position="absolute",So.top=0,So.transform="translate(".concat(Fo,"px, ").concat(As.start.top,"px)"),So;case mr.ScrollMode.Vertical:default:return(yo={height:"".concat(Ao,"px"),width:"100%"})[Vo]=0,yo.position="absolute",yo.top=0,yo.transform="translateY(".concat(As.start.top,"px)"),yo}}(Ps,Jn,Mi,hs.current,za.current)},[Jn,Mi]),Il=Er.useCallback(function(Ps,As){var vs=$s.current,ys=vs.measurements,xs=vs.scrollOffset,Ls=ys[oc(0,ai-1,As)];if(Ls){var Fs=za.current===mr.ScrollMode.Page?{left:Ls.start.left,top:Ls.start.top}:{left:xs.left*Ps,top:xs.top*Ps};return Ss(Fs,!1)}return Promise.resolve()},[]);return Er.useEffect(function(){return function(){Js.disconnect()}},[]),{boundingClientRect:Ts,isSmoothScrolling:Ni,startPage:po,endPage:wo,maxVisbilityIndex:ko,virtualItems:Eo,getContainerStyles:hl,getItemContainerStyles:Po,getItemStyles:Yo,scrollToItem:Ro,scrollToNextItem:Mo,scrollToPreviousItem:sl,zoom:Il}},ru=function(Pn,Wn,Jn,ai,Ii,_i){var Mi=Jn;switch(!0){case(Ii===mr.ViewMode.DualPageWithCover&&_i>=3):case(Ii===mr.ViewMode.DualPage&&_i>=3):Mi=2*Jn;break;default:Mi=Jn}switch(ai){case mr.SpecialZoomLevel.ActualSize:return 1;case mr.SpecialZoomLevel.PageFit:return Math.min((Pn.clientWidth-17)/Mi,(Pn.clientHeight-16)/Wn);case mr.SpecialZoomLevel.PageWidth:return(Pn.clientWidth-17)/Mi}},Nu=function(Pn){var Wn,Jn,ai=Pn.getCurrentPage,Ii=(Wn=50,Jn=Er.useRef([]),Er.useEffect(function(){return function(){Jn.current=[]}},[]),{push:function(Hi){var Ni=Jn.current;Ni.length+1>Wn&&Ni.shift(),Ni.push(Hi),Jn.current=Ni},map:function(Hi){return Jn.current.map(function(Ni){return Hi(Ni)})},pop:function(){var Hi=Jn.current;if(Hi.length===0)return null;var Ni=Hi.pop();return Jn.current=Hi,Ni}}),_i=function(Hi){var Ni=Er.useRef([]);return Er.useEffect(function(){return function(){Ni.current=[]}},[]),{dequeue:function(){var Za=Ni.current;if(Za.length===0)return null;var Xa=Za.shift();return Ni.current=Za,Xa||null},enqueue:function(Za){var Xa=Ni.current;Xa.length+1>Hi&&Xa.pop(),Ni.current=[Za].concat(Xa)},map:function(Za){return Ni.current.map(function(Xa){return Za(Xa)})}}}(50),Mi=function(){var Hi=_i.dequeue();return Hi&&Ii.push(Hi),Hi&&Hi.pageIndex===ai()?Mi():Hi},Fi=function(){var Hi=Ii.pop();return Hi&&_i.enqueue(Hi),Hi&&Hi.pageIndex===ai()?Fi():Hi},$i=Er.useCallback(function(Hi){Ii.push(Hi)},[]);return{getNextDestination:Mi,getPreviousDestination:Fi,markVisitedDestination:$i}},Oc=function(Pn){var Wn=[];return Pn.map(function(Jn){Wn=Wn.concat(Jn).concat(function(ai){var Ii=[];return ai.items&&ai.items.length>0&&(Ii=Ii.concat(Oc(ai.items))),Ii}(Jn))}),Wn},Fc={capture:!1,passive:!0},lc={height:0,width:0},Nc={height:0,width:0},ju=function(Pn){var Wn=Pn.getCurrentPage,Jn=Pn.getCurrentScrollMode,ai=Pn.jumpToPage,Ii=Pn.targetRef,_i=Er.useState(mr.FullScreenMode.Normal),Mi=_i[0],Fi=_i[1],$i=function(){var Ms=Er.useState(lc),no=Ms[0],Js=Ms[1],io=Hn(function(){Js({height:window.innerHeight,width:window.innerWidth})},100);return qr(function(){return window.addEventListener("resize",io,Fc),function(){window.removeEventListener("resize",io,Fc)}},[]),no}(),Hi=Er.useState(Nc),Ni=Hi[0],Za=Hi[1],Xa=Er.useRef(Nc),za=Er.useRef(Wn()),hs=Er.useRef(Nc),rs=Er.useState(Ii.current),cs=rs[0],Os=rs[1],Ss=Er.useRef();qr(function(){Ii.current!==cs&&Os(Ii.current)},[]),qr(function(){if(cs){var Ms=new ResizeObserver(function(no){no.forEach(function(Js){var io=Js.target.getBoundingClientRect(),Ks=io.height,fo=io.width;Za({height:Ks,width:fo})})});return Ms.observe(cs),function(){Ms.unobserve(cs),Ms.disconnect()}}},[cs]);var Ts=Er.useCallback(function(Ms){var no=Fn();return no&&no!==Ms?(Fi(mr.FullScreenMode.Normal),Bn(no)):Promise.resolve()},[]),$s=Er.useCallback(function(Ms){Ms&&Rn()&&(Os(Ms),Ts(Ms).then(function(){Ss.current=Ms,Fi(mr.FullScreenMode.Entering),function(no){Sn&&no[Cn.RequestFullScreen]()}(Ms)}))},[]),bs=Er.useCallback(function(){Fn()&&(Fi(mr.FullScreenMode.Exitting),Bn(document))},[]),Ds=Er.useCallback(function(){cs&&Fn()!==cs&&Fi(mr.FullScreenMode.Exitting)},[cs]);return Er.useEffect(function(){switch(Mi){case mr.FullScreenMode.Entering:Ss.current&&(Ss.current.style.backgroundColor="var(--rpv-core__full-screen-target-background-color)"),za.current=Wn(),Xa.current={height:window.innerHeight,width:window.innerWidth};break;case mr.FullScreenMode.Entered:Jn()===mr.ScrollMode.Page?ai(za.current).then(function(){Fi(mr.FullScreenMode.EnteredCompletely)}):Fi(mr.FullScreenMode.EnteredCompletely);break;case mr.FullScreenMode.Exitting:Ss.current&&(Ss.current.style.backgroundColor="",Ss.current=null),za.current=Wn();break;case mr.FullScreenMode.Exited:Fi(mr.FullScreenMode.Normal),Jn()===mr.ScrollMode.Page&&ai(za.current)}},[Mi]),Er.useEffect(function(){if(Mi!==mr.FullScreenMode.Normal)return Mi===mr.FullScreenMode.Entering&&$i.height===Ni.height&&$i.width===Ni.width&&$i.height>0&&$i.width>0&&(hs.current.height===0||$i.height==hs.current.height)?(hs.current={height:window.innerHeight,width:window.innerWidth},void Fi(mr.FullScreenMode.Entered)):void(Mi===mr.FullScreenMode.Exitting&&Xa.current.height===$i.height&&Xa.current.width===$i.width&&$i.height>0&&$i.width>0&&Fi(mr.FullScreenMode.Exited))},[Mi,$i,Ni]),Er.useEffect(function(){var Ms;return Ms=Ds,Sn&&document.addEventListener(Cn.FullScreenChange,Ms),function(){(function(no){Sn&&document.removeEventListener(Cn.FullScreenChange,no)})(Ds)}},[cs]),{enterFullScreenMode:$s,exitFullScreenMode:bs,fullScreenMode:Mi}},Od={buildPageStyles:function(){return{}},transformSize:function(Pn){return Pn.size}},Gl={left:0,top:0},Bu=function(Pn){var Wn=Pn.currentFile,Jn=Pn.defaultScale,ai=Pn.doc,Ii=Pn.enableSmoothScroll,_i=Pn.initialPage,Mi=Pn.initialRotation,Fi=Pn.initialScale,$i=Pn.pageLayout,Hi=Pn.pageSizes,Ni=Pn.plugins,Za=Pn.renderPage,Xa=Pn.scrollMode,za=Pn.setRenderRange,hs=Pn.viewMode,rs=Pn.viewerState,cs=Pn.onDocumentLoad,Os=Pn.onOpenFile,Ss=Pn.onPageChange,Ts=Pn.onRotate,$s=Pn.onRotatePage,bs=Pn.onZoom,Ds=ai.numPages,Ms=ai.loadingTask.docId,no=Er.useContext(Mn).l10n,Js=Er.useContext(Hr),io=Js.direction===mr.TextDirection.RightToLeft,Ks=Er.useRef(),fo=Er.useRef(),po=Er.useState(_i),wo=po[0],ko=po[1],Eo=Er.useRef(null),Ro=Nu({getCurrentPage:function(){return Rs.current.pageIndex}}),Io=Er.useState(Mi),qs=Io[0],Mo=Io[1],sl=qn(qs),hl=Er.useState(!1),Po=hl[0],Yo=hl[1],Il=Er.useState(new Map),Ps=Il[0],As=Il[1],vs=Er.useState(Xa),ys=vs[0],xs=vs[1],Ls=qn(ys),Fs=Er.useState(hs),_s=Fs[0],ms=Fs[1],Us=qn(_s),zs=function(Zi){var Hs=Gn(),Ys=Er.useState([]),so=Ys[0],co=Ys[1];return Er.useEffect(function(){Zi.getOutline().then(function(Qs){if(Hs.current&&Qs!==null){var No=Oc(Qs);co(No)}})},[]),so}(ai),So=Er.useState(Fi),yo=So[0],Vo=So[1],Xo=qn(yo),Rs=Er.useRef(rs),Fo=Er.useRef(typeof Jn=="string"?Jn:null),xo=Er.useRef(-1),Ao=Er.useRef(-1),Do=Er.useRef(_i),$o=ju({getCurrentPage:function(){return Rs.current.pageIndex},getCurrentScrollMode:function(){return Rs.current.scrollMode},jumpToPage:function(Zi){return Nl(Zi)},targetRef:fo}),Ol=Er.useState(-1),cc=Ol[0],Bc=Ol[1],ql=Er.useState(0),yl=ql[0],Bd=ql[1],Jo=_n({doc:ai});Er.useEffect(function(){return function(){ws.clear(),Ns.clear()}},[Ms]);var Uc=Er.useMemo(function(){return Object.assign({},Od,$i)},[]),Vu=Er.useMemo(function(){return Array(Ds).fill(0).map(function(Zi,Hs){var Ys=[Hi[Hs].pageHeight,Hi[Hs].pageWidth],so=Math.abs(qs)%180==0?{height:Ys[0],width:Ys[1]}:{height:Ys[1],width:Ys[0]},co={height:so.height*yo,width:so.width*yo};return Uc.transformSize({numPages:Ds,pageIndex:Hs,size:co})})},[qs,yo]),ao=tu({enableSmoothScroll:Ii,isRtl:io,numberOfItems:Ds,parentRef:fo,scrollMode:ys,setRenderRange:za,sizes:Vu,viewMode:_s}),Hc=Hn(function(){!Fo.current||Rs.current.fullScreenMode!==mr.FullScreenMode.Normal||_i>0&&Do.current===_i||js(Fo.current)},200);(function(Zi){var Hs=Zi.targetRef,Ys=Zi.onResize;qr(function(){var so=new ResizeObserver(function(Qs){Qs.forEach(function(No){Ys(No.target)})}),co=Hs.current;if(co)return so.observe(co),function(){so.unobserve(co)}},[])})({targetRef:fo,onResize:Hc});var Fl=function(Zi){var Hs=Zi;Ni.forEach(function(Ys){Ys.onViewerStateChange&&(Hs=Ys.onViewerStateChange(Hs))}),Rs.current=Hs},Ud=function(){return fo.current},Hd=function(){return Rs.current},uc=Er.useCallback(function(Zi){Ro.markVisitedDestination(Zi)},[]),el=Er.useCallback(function(Zi){var Hs=Zi.pageIndex,Ys=Zi.bottomOffset,so=Zi.leftOffset,co=Zi.scaleTo,Qs=fo.current,No=Rs.current;return Qs&&No?new Promise(function(fl,xl){ho(ai,Hs).then(function(zl){var Ml=zl.getViewport({scale:1}),Yl=0,du=(typeof Ys=="function"?Ys(Ml.width,Ml.height):Ys)||0,Ec=(typeof so=="function"?so(Ml.width,Ml.height):so)||0,kl=No.scale;switch(co){case mr.SpecialZoomLevel.PageFit:Yl=0,Ec=0,js(mr.SpecialZoomLevel.PageFit);break;case mr.SpecialZoomLevel.PageWidth:kl=ru(Qs,Hi[Hs].pageHeight,Hi[Hs].pageWidth,mr.SpecialZoomLevel.PageWidth,hs,Ds),Yl=(Ml.height-du)*kl,Ec*=kl,js(kl);break;default:Yl=(Ml.height-du)*kl,Ec*=kl}switch(No.scrollMode){case mr.ScrollMode.Horizontal:ao.scrollToItem(Hs,{left:Ec,top:0}).then(function(){fl()});break;case mr.ScrollMode.Vertical:default:ao.scrollToItem(Hs,{left:0,top:Yl}).then(function(){fl()})}})}):Promise.resolve()},[]),lu=Er.useCallback(function(Zi){return Ro.markVisitedDestination(Zi),el(Zi)},[]),Vd=Er.useCallback(function(){var Zi=Ro.getNextDestination();return Zi?el(Zi):Promise.resolve()},[]),Wd=Er.useCallback(function(){var Zi=Ro.getPreviousDestination();return Zi?el(Zi):Promise.resolve()},[]),Gd=Er.useCallback(function(){return ao.scrollToNextItem(Rs.current.pageIndex,Gl)},[]),Nl=Er.useCallback(function(Zi){return 0<=Zi&&Zi<Ds?ao.scrollToItem(Zi,Gl):Promise.resolve()},[]),qd=Er.useCallback(function(){return ao.scrollToPreviousItem(Rs.current.pageIndex,Gl)},[]),Kl=Er.useCallback(function(Zi){var Hs,Ys;(Hs=Zi.name,Ys=Hs.split(/\./).pop(),Ys?Ys.toLowerCase():"").toLowerCase()==="pdf"&&new Promise(function(so){var co=new FileReader;co.readAsArrayBuffer(Zi),co.onload=function(){var Qs=new Uint8Array(co.result);so(Qs)}}).then(function(so){Os(Zi.name,so)})},[Os]),Vi=Er.useCallback(function(Zi){var Hs=Zi===mr.RotateDirection.Backward?-90:90,Ys=Rs.current.rotation,so=Ys===360||Ys===-360?Hs:Ys+Hs;Jo.markNotRendered(),Mo(so),Fl(Dr(Dr({},Rs.current),{rotation:so})),Ts({direction:Zi,doc:ai,rotation:so})},[]),Qa=Er.useCallback(function(Zi,Hs){var Ys=Hs===mr.RotateDirection.Backward?-90:90,so=Rs.current.pagesRotation,co=(so.has(Zi)?so.get(Zi):Mi)+Ys,Qs=so.set(Zi,co);As(Qs),Yo(function(No){return!No}),Fl(Dr(Dr({},Rs.current),{pagesRotation:Qs,rotatedPage:Zi})),$s({direction:Hs,doc:ai,pageIndex:Zi,rotation:co}),Jo.markRendering(Zi),Bc(Zi)},[]),Qi=Er.useCallback(function(Zi){Fl(Dr(Dr({},Rs.current),{scrollMode:Zi})),xs(Zi)},[]),Es=Er.useCallback(function(Zi){Fl(Dr(Dr({},Rs.current),{viewMode:Zi})),ms(Zi)},[]),js=Er.useCallback(function(Zi){var Hs=fo.current,Ys=Rs.current.pageIndex;if(!(Ys<0||Ys>=Ds)){var so=Hi[Ys].pageHeight,co=Hi[Ys].pageWidth,Qs=Hs?typeof Zi=="string"?ru(Hs,so,co,Zi,Rs.current.viewMode,Ds):Zi:1;Fo.current=typeof Zi=="string"?Zi:null,Qs!==Rs.current.scale&&(Bd(function(No){return No+1}),Jo.markNotRendered(),Vo(Qs),bs({doc:ai,scale:Qs}),Fl(Dr(Dr({},Rs.current),{scale:Qs})))}},[]),_o=Er.useCallback(function(Zi){$o.enterFullScreenMode(Zi)},[]),Bo=Er.useCallback(function(){$o.exitFullScreenMode()},[]);Er.useEffect(function(){Fl(Dr(Dr({},Rs.current),{fullScreenMode:$o.fullScreenMode}))},[$o.fullScreenMode]),Er.useEffect(function(){var Zi={enterFullScreenMode:_o,exitFullScreenMode:Bo,getPagesContainer:Ud,getViewerState:Hd,jumpToDestination:lu,jumpToNextDestination:Vd,jumpToPreviousDestination:Wd,jumpToNextPage:Gd,jumpToPreviousPage:qd,jumpToPage:Nl,openFile:Kl,rotate:Vi,rotatePage:Qa,setViewerState:Fl,switchScrollMode:Qi,switchViewMode:Es,zoom:js};return Ni.forEach(function(Hs){Hs.install&&Hs.install(Zi)}),function(){Ni.forEach(function(Hs){Hs.uninstall&&Hs.uninstall(Zi)})}},[Ms]),Er.useEffect(function(){cs({doc:ai,file:Wn}),Ni.forEach(function(Zi){Zi.onDocumentLoad&&Zi.onDocumentLoad({doc:ai,file:Wn})})},[Ms]);var To,yc,cu,tl=ao.boundingClientRect;To=function(){_i&&Nl(_i)},yc=tl.height>0&&tl.width>0,cu=Er.useRef(!1),qr(function(){yc&&!cu.current&&(cu.current=!0,To())},[To,yc]),qr(function(){var Zi=Rs.current.pageIndex;Zi>-1&&Ls!==ys&&ao.scrollToItem(Zi,Gl).then(function(){$o.fullScreenMode===mr.FullScreenMode.EnteredCompletely&&(Ii||Jo.markNotRendered(),xo.current=-1)})},[ys]),qr(function(){var Zi=Rs.current.pageIndex;Zi>-1&&sl!==qs&&ao.scrollToItem(Zi,Gl)},[qs]),qr(function(){Xo!=0&&Xo!=Rs.current.scale&&ao.zoom(Rs.current.scale/Xo,Rs.current.pageIndex).then(function(){$o.fullScreenMode===mr.FullScreenMode.EnteredCompletely&&(Ao.current=-1)})},[yo]),qr(function(){if(Us!==Rs.current.viewMode){var Zi=ao.startPage,Hs=ao.endPage,Ys=ao.virtualItems;Jo.markNotRendered(),Jo.setRange(Zi,Hs);for(var so=function(Qs){var No=Ys.find(function(fl){return fl.index===Qs});No&&Jo.setVisibility(Qs,No.visibility)},co=Zi;co<=Hs;co++)so(co);uu()}},[_s]),qr(function(){var Zi=Rs.current.pageIndex;Zi>-1&&Us!==_s&&ao.scrollToItem(Zi,Gl)},[_s]),qr(function(){var Zi=Rs.current.pageIndex;Zi>0&&Zi===_i&&Do.current===_i&&Fo.current&&(Do.current=-1,js(Fo.current))},[wo]),Er.useEffect(function(){ao.isSmoothScrolling||Eo.current!==null&&Eo.current===wo||(Eo.current=wo,Ss({currentPage:wo,doc:ai}))},[wo,ao.isSmoothScrolling]),Er.useEffect(function(){$o.fullScreenMode===mr.FullScreenMode.Entering&&Rs.current.scrollMode===mr.ScrollMode.Page&&(xo.current=Rs.current.pageIndex),$o.fullScreenMode===mr.FullScreenMode.EnteredCompletely&&Rs.current.scrollMode===mr.ScrollMode.Page&&Ii&&(xo.current=-1),$o.fullScreenMode===mr.FullScreenMode.EnteredCompletely&&Fo.current&&(Ao.current=Rs.current.pageIndex,js(Fo.current))},[$o.fullScreenMode]),Er.useEffect(function(){if($o.fullScreenMode!==mr.FullScreenMode.Entering&&$o.fullScreenMode!==mr.FullScreenMode.Exitting&&!ao.isSmoothScrolling){var Zi=ao.startPage,Hs=ao.endPage,Ys=ao.maxVisbilityIndex,so=ao.virtualItems,co=Ys,Qs=$o.fullScreenMode===mr.FullScreenMode.Entered||$o.fullScreenMode===mr.FullScreenMode.EnteredCompletely;if(!(Qs&&co!==xo.current&&xo.current>-1||Qs&&co!==Ao.current&&Ao.current>-1)){ko(co),Fl(Dr(Dr({},Rs.current),{pageIndex:co})),Jo.setRange(Zi,Hs);for(var No=function(xl){var zl=so.find(function(Ml){return Ml.index===xl});zl&&Jo.setVisibility(xl,zl.visibility)},fl=Zi;fl<=Hs;fl++)No(fl);uu()}}},[ao.startPage,ao.endPage,ao.isSmoothScrolling,ao.maxVisbilityIndex,$o.fullScreenMode,Po,qs,yo]);var Vc=Er.useCallback(function(Zi){Jo.markRendered(Zi),uu()},[yl]),uu=function(){var Zi=Jo.getHighestPriorityPage();Zi>-1&&Jo.isInRange(Zi)&&(Jo.markRendering(Zi),Bc(Zi))},dc=function(Zi){var Hs=wo-1,Ys=wo+1;switch(Zi){case"FirstPage":Nl(0);break;case"LastPage":Nl(Ds-1);break;case"NextPage":Ys<Ds&&Nl(Ys);break;case"PrevPage":Hs>=0&&Nl(Hs)}},Wc=Er.useCallback(function(){var Zi=ao.virtualItems,Hs=[];switch(_s){case mr.ViewMode.DualPage:Hs=ds(Zi,2);break;case mr.ViewMode.DualPageWithCover:Zi.length&&(Hs=Zi[0].index===0?[[Zi[0]]].concat(ds(Zi.slice(1),2)):ds(Zi,2));break;case mr.ViewMode.SinglePage:default:Hs=ds(Zi,1)}var Ys=no&&no.core?no.core.pageLabel:"Page {{pageIndex}}",so={attrs:{className:"rpv-core__inner-container","data-testid":"core__inner-container",ref:Ks,style:{height:"100%"}},children:Er.createElement(Er.Fragment,null),subSlot:{attrs:{"data-testid":"core__inner-pages",className:Gr({"rpv-core__inner-pages":!0,"rpv-core__inner-pages--horizontal":ys===mr.ScrollMode.Horizontal,"rpv-core__inner-pages--rtl":io,"rpv-core__inner-pages--single":ys===mr.ScrollMode.Page,"rpv-core__inner-pages--vertical":ys===mr.ScrollMode.Vertical,"rpv-core__inner-pages--wrapped":ys===mr.ScrollMode.Wrapped}),ref:fo,style:{height:"100%",position:"relative"}},children:Er.createElement("div",{"data-testid":"core__inner-current-page-".concat(wo),style:Object.assign({"--scale-factor":yo},ao.getContainerStyles())},Hs.map(function(co){return Er.createElement("div",{className:Gr({"rpv-core__inner-page-container":!0,"rpv-core__inner-page-container--single":ys===mr.ScrollMode.Page}),style:ao.getItemContainerStyles(co[0]),key:"".concat(co[0].index,"-").concat(_s)},co.map(function(Qs){var No=_s===mr.ViewMode.DualPageWithCover&&(Qs.index===0||Ds%2==0&&Qs.index===Ds-1);return Er.createElement("div",{"aria-label":Ys.replace("{{pageIndex}}","".concat(Qs.index+1)),className:Gr({"rpv-core__inner-page":!0,"rpv-core__inner-page--dual-even":_s===mr.ViewMode.DualPage&&Qs.index%2==0,"rpv-core__inner-page--dual-odd":_s===mr.ViewMode.DualPage&&Qs.index%2==1,"rpv-core__inner-page--dual-cover":No,"rpv-core__inner-page--dual-cover-even":_s===mr.ViewMode.DualPageWithCover&&!No&&Qs.index%2==0,"rpv-core__inner-page--dual-cover-odd":_s===mr.ViewMode.DualPageWithCover&&!No&&Qs.index%2==1,"rpv-core__inner-page--single":_s===mr.ViewMode.SinglePage&&ys===mr.ScrollMode.Page}),role:"region",key:"".concat(Qs.index,"-").concat(_s),style:Object.assign({},ao.getItemStyles(Qs),Uc.buildPageStyles({numPages:Ds,pageIndex:Qs.index,scrollMode:ys,viewMode:_s}))},Er.createElement(Ru,{doc:ai,measureRef:Qs.measureRef,outlines:zs,pageIndex:Qs.index,pageRotation:Ps.has(Qs.index)?Ps.get(Qs.index):0,pageSize:Hi[Qs.index],plugins:Ni,renderPage:Za,renderQueueKey:yl,rotation:qs,scale:yo,shouldRender:cc===Qs.index,viewMode:_s,onExecuteNamedAction:dc,onJumpFromLinkAnnotation:uc,onJumpToDest:lu,onRenderCompleted:Vc,onRotatePage:Qa}))}))}))}};return Ni.forEach(function(co){co.renderViewer&&(so=co.renderViewer({containerRef:Ks,doc:ai,pagesContainerRef:fo,pagesRotation:Ps,pageSizes:Hi,rotation:qs,slot:so,themeContext:Js,jumpToPage:Nl,openFile:Kl,rotate:Vi,rotatePage:Qa,switchScrollMode:Qi,switchViewMode:Es,zoom:js}))}),so},[Ni,ao]),xc=Er.useCallback(function(Zi){return Er.createElement("div",Dr({},Zi.attrs,{style:Zi.attrs&&Zi.attrs.style?Zi.attrs.style:{}}),Zi.children,Zi.subSlot&&xc(Zi.subSlot))},[]);return xc(Wc())},nu=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.3,1.5,1.7,1.9,2.1,2.4,2.7,3,3.3,3.7,4.1,4.6,5.1,5.7,6.3,7,7.7,8.5,9.4,10],Uu=function(Pn){var Wn=Pn.defaultScale,Jn=Pn.doc,ai=Pn.render,Ii=Pn.scrollMode,_i=Pn.viewMode,Mi=Er.useRef(),Fi=Er.useState({pageSizes:[],scale:0}),$i=Fi[0],Hi=Fi[1];return Er.useLayoutEffect(function(){var Ni=Array(Jn.numPages).fill(0).map(function(Za,Xa){return new Promise(function(za,hs){ho(Jn,Xa).then(function(rs){var cs=rs.getViewport({scale:1});za({pageHeight:cs.height,pageWidth:cs.width,rotation:cs.rotation})})})});Promise.all(Ni).then(function(Za){var Xa=Mi.current;if(Xa&&Za.length!==0){var za=Za[0].pageWidth,hs=Za[0].pageHeight,rs=Xa.parentElement,cs=(rs.clientWidth-45)/za,Os=(rs.clientHeight-45)/hs,Ss=cs;switch(Ii){case mr.ScrollMode.Horizontal:Ss=Math.min(cs,Os);break;case mr.ScrollMode.Vertical:default:Ss=cs}var Ts,$s,bs=Wn?typeof Wn=="string"?ru(rs,hs,za,Wn,_i,Jn.numPages):Wn:(Ts=Ss,($s=nu.findIndex(function(Ds){return Ds>=Ts}))===-1||$s===0?Ts:nu[$s-1]);Hi({pageSizes:Za,scale:bs})}})},[Jn.loadingTask.docId]),$i.pageSizes.length===0||$i.scale===0?Er.createElement("div",{className:"rpv-core__page-size-calculator","data-testid":"core__page-size-calculating",ref:Mi},Er.createElement(vn,null)):ai($i.pageSizes,$i.scale)},jc=function(){},iu=function(Pn){function Wn(Jn,ai){var Ii=Pn.call(this)||this;return Ii.verifyPassword=Jn,Ii.passwordStatus=ai,Ii}return Rr(Wn,Pn),Wn}(jc),Fd=function(Pn){var Wn=Pn.passwordStatus,Jn=Pn.renderProtectedView,ai=Pn.verifyPassword,Ii=Pn.onDocumentAskPassword,_i=Er.useContext(Mn).l10n,Mi=Er.useState(""),Fi=Mi[0],$i=Mi[1],Hi=Er.useContext(Hr).direction===mr.TextDirection.RightToLeft,Ni=function(){return ai(Fi)};return Er.useEffect(function(){Ii&&Ii({verifyPassword:ai})},[]),Jn?Jn({passwordStatus:Wn,verifyPassword:ai}):Er.createElement("div",{className:"rpv-core__asking-password-wrapper"},Er.createElement("div",{className:Gr({"rpv-core__asking-password":!0,"rpv-core__asking-password--rtl":Hi})},Er.createElement("div",{className:"rpv-core__asking-password-message"},Wn===mr.PasswordStatus.RequiredPassword&&_i.core.askingPassword.requirePasswordToOpen,Wn===mr.PasswordStatus.WrongPassword&&_i.core.wrongPassword.tryAgain),Er.createElement("div",{className:"rpv-core__asking-password-body"},Er.createElement("div",{className:Gr({"rpv-core__asking-password-input":!0,"rpv-core__asking-password-input--ltr":!Hi,"rpv-core__asking-password-input--rtl":Hi})},Er.createElement(yn,{testId:"core__asking-password-input",type:"password",value:Fi,onChange:$i,onKeyDown:function(Za){Za.key==="Enter"&&Ni()}})),Er.createElement(hn,{onClick:Ni},_i.core.askingPassword.submit))))},au=function(Pn){function Wn(Jn){var ai=Pn.call(this)||this;return ai.doc=Jn,ai}return Rr(Wn,Pn),Wn}(jc),Hu=function(Pn){function Wn(Jn){var ai=Pn.call(this)||this;return ai.error=Jn,ai}return Rr(Wn,Pn),Wn}(jc),su=function(Pn){function Wn(Jn){var ai=Pn.call(this)||this;return ai.percentages=Jn,ai}return Rr(Wn,Pn),Wn}(jc),Nd=function(Pn){var Wn=Pn.characterMap,Jn=Pn.file,ai=Pn.httpHeaders,Ii=Pn.render,_i=Pn.renderError,Mi=Pn.renderLoader,Fi=Pn.renderProtectedView,$i=Pn.transformGetDocumentParams,Hi=Pn.withCredentials,Ni=Pn.onDocumentAskPassword,Za=Er.useContext(Hr).direction===mr.TextDirection.RightToLeft,Xa=Er.useState(new su(0)),za=Xa[0],hs=Xa[1],rs=Er.useRef(""),cs=Gn();return Er.useEffect(function(){rs.current="",hs(new su(0));var Os=new Cr.PDFWorker({name:"PDFWorker_".concat(Date.now())}),Ss=Object.assign({httpHeaders:ai,withCredentials:Hi,worker:Os},typeof Jn=="string"?{url:Jn}:{data:Jn},Wn?{cMapUrl:Wn.url,cMapPacked:Wn.isCompressed}:{}),Ts=$i?$i(Ss):Ss,$s=Cr.getDocument(Ts);return $s.onPassword=function(bs,Ds){switch(Ds){case Cr.PasswordResponses.NEED_PASSWORD:cs.current&&hs(new iu(bs,mr.PasswordStatus.RequiredPassword));break;case Cr.PasswordResponses.INCORRECT_PASSWORD:cs.current&&hs(new iu(bs,mr.PasswordStatus.WrongPassword))}},$s.onProgress=function(bs){var Ds=bs.total>0?Math.min(100,100*bs.loaded/bs.total):100;cs.current&&rs.current===""&&hs(new su(Ds))},$s.promise.then(function(bs){rs.current=bs.loadingTask.docId,cs.current&&hs(new au(bs))},function(bs){return cs.current&&!Os.destroyed&&hs(new Hu({message:bs.message||"Cannot load document",name:bs.name}))}),function(){$s.destroy(),Os.destroy()}},[Jn]),za instanceof iu?Er.createElement(Fd,{passwordStatus:za.passwordStatus,renderProtectedView:Fi,verifyPassword:za.verifyPassword,onDocumentAskPassword:Ni}):za instanceof au?Ii(za.doc):za instanceof Hu?_i?_i(za.error):Er.createElement("div",{className:Gr({"rpv-core__doc-error":!0,"rpv-core__doc-error--rtl":Za})},Er.createElement("div",{className:"rpv-core__doc-error-text"},za.error.message)):Er.createElement("div",{"data-testid":"core__doc-loading",className:Gr({"rpv-core__doc-loading":!0,"rpv-core__doc-loading--rtl":Za})},Mi?Mi(za.percentages):Er.createElement(vn,null))},jd=function(Pn,Wn){var Jn=Er.useMemo(function(){return Pn==="auto"?typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":Pn},[]),ai=Er.useState(Jn),Ii=ai[0],_i=ai[1],Mi=qn(Ii);return Er.useEffect(function(){if(Pn==="auto"){var Fi=window.matchMedia("(prefers-color-scheme: dark)"),$i=function(Hi){_i(Hi.matches?"dark":"light")};return Fi.addEventListener("change",$i),function(){return Fi.removeEventListener("change",$i)}}},[]),Er.useEffect(function(){Ii!==Mi&&Wn&&Wn(Ii)},[Ii]),Er.useEffect(function(){Pn!==Ii&&_i(Pn)},[Pn]),{currentTheme:Ii,setCurrentTheme:_i}},ou=function(Pn){return{startPage:Pn.startPage-3,endPage:Pn.endPage+3}};mr.Button=function(Pn){var Wn=Pn.children,Jn=Pn.testId,ai=Pn.onClick,Ii=Er.useContext(Hr).direction===mr.TextDirection.RightToLeft,_i=Jn?{"data-testid":Jn}:{};return Er.createElement("button",Dr({className:Gr({"rpv-core__button":!0,"rpv-core__button--rtl":Ii}),type:"button",onClick:ai},_i),Wn)},mr.Icon=Qr,mr.LazyRender=function(Pn){var Wn=Pn.attrs,Jn=Pn.children,ai=Pn.testId,Ii=Er.useState(!1),_i=Ii[0],Mi=Ii[1],Fi=ai?Dr(Dr({},Wn),{"data-testid":ai}):Wn,$i=zr({once:!0,onVisibilityChanged:function(Hi){Hi.isVisible&&Mi(!0)}});return Er.createElement("div",Dr({ref:$i},Fi),_i&&Jn)},mr.LocalizationContext=Mn,mr.Menu=function(Pn){var Wn=Pn.children,Jn=Er.useRef(),ai=Er.useRef([]),Ii=Er.useContext(Hr).direction===mr.TextDirection.RightToLeft,_i=function(Fi){if(Jn.current)switch(Fi.key){case"Tab":Fi.preventDefault();break;case"ArrowDown":Fi.preventDefault(),Mi(function($i,Hi){return Hi+1});break;case"ArrowUp":Fi.preventDefault(),Mi(function($i,Hi){return Hi-1});break;case"End":Fi.preventDefault(),Mi(function($i,Hi){return $i.length-1});break;case"Home":Fi.preventDefault(),Mi(function($i,Hi){return 0})}},Mi=function(Fi){if(Jn.current){var $i=ai.current,Hi=$i.findIndex(function(Za){return Za.getAttribute("tabindex")==="0"}),Ni=Math.min($i.length-1,Math.max(0,Fi($i,Hi)));Hi>=0&&Hi<=$i.length-1&&$i[Hi].setAttribute("tabindex","-1"),$i[Ni].setAttribute("tabindex","0"),$i[Ni].focus()}};return qr(function(){var Fi=Jn.current;if(Fi){var $i=function(Hi){var Ni=[];return Hi.querySelectorAll('.rpv-core__menu-item[role="menuitem"]').forEach(function(Za){if(Za instanceof HTMLElement){var Xa=Za.parentElement;(Xa===Hi||window.getComputedStyle(Xa).display!=="none")&&Ni.push(Za)}}),Ni}(Fi);ai.current=$i}},[]),qr(function(){return document.addEventListener("keydown",_i),function(){document.removeEventListener("keydown",_i)}},[]),Er.createElement("div",{ref:Jn,"aria-orientation":"vertical",className:Gr({"rpv-core__menu":!0,"rpv-core__menu--rtl":Ii}),role:"menu",tabIndex:0},Wn)},mr.MenuDivider=function(){return Er.createElement("div",{"aria-orientation":"horizontal",className:"rpv-core__menu-divider",role:"separator"})},mr.MenuItem=function(Pn){var Wn=Pn.checked,Jn=Wn!==void 0&&Wn,ai=Pn.children,Ii=Pn.icon,_i=Ii===void 0?null:Ii,Mi=Pn.isDisabled,Fi=Mi!==void 0&&Mi,$i=Pn.testId,Hi=Pn.onClick,Ni=Er.useContext(Hr).direction===mr.TextDirection.RightToLeft,Za=$i?{"data-testid":$i}:{};return Er.createElement("button",Dr({className:Gr({"rpv-core__menu-item":!0,"rpv-core__menu-item--disabled":Fi,"rpv-core__menu-item--ltr":!Ni,"rpv-core__menu-item--rtl":Ni}),role:"menuitem",tabIndex:-1,type:"button",onClick:Hi},Za),Er.createElement("div",{className:Gr({"rpv-core__menu-item-icon":!0,"rpv-core__menu-item-icon--ltr":!Ni,"rpv-core__menu-item-icon--rtl":Ni})},_i),Er.createElement("div",{className:Gr({"rpv-core__menu-item-label":!0,"rpv-core__menu-item-label--ltr":!Ni,"rpv-core__menu-item-label--rtl":Ni})},ai),Er.createElement("div",{className:Gr({"rpv-core__menu-item-check":!0,"rpv-core__menu-item-check--ltr":!Ni,"rpv-core__menu-item-check--rtl":Ni})},Jn&&Er.createElement(sn,null)))},mr.MinimalButton=function(Pn){var Wn=Pn.ariaLabel,Jn=Wn===void 0?"":Wn,ai=Pn.ariaKeyShortcuts,Ii=ai===void 0?"":ai,_i=Pn.children,Mi=Pn.isDisabled,Fi=Mi!==void 0&&Mi,$i=Pn.isSelected,Hi=$i!==void 0&&$i,Ni=Pn.testId,Za=Pn.onClick,Xa=Er.useContext(Hr).direction===mr.TextDirection.RightToLeft,za=Ni?{"data-testid":Ni}:{};return Er.createElement("button",Dr({"aria-label":Jn},Ii&&{"aria-keyshortcuts":Ii},Fi&&{"aria-disabled":!0},{className:Gr({"rpv-core__minimal-button":!0,"rpv-core__minimal-button--disabled":Fi,"rpv-core__minimal-button--rtl":Xa,"rpv-core__minimal-button--selected":Hi}),type:"button",onClick:Za},za),_i)},mr.Modal=function(Pn){var Wn=Pn.ariaControlsSuffix,Jn=Pn.closeOnClickOutside,ai=Pn.closeOnEscape,Ii=Pn.content,_i=Pn.isOpened,Mi=_i!==void 0&&_i,Fi=Pn.target,$i=Wn||"".concat(jn());return Er.createElement(zn,{target:Fi?function(Hi,Ni){return Er.createElement("div",{"aria-expanded":Ni?"true":"false","aria-haspopup":"dialog","aria-controls":"rpv-core__modal-body-".concat($i)},Fi(Hi,Ni))}:null,content:function(Hi){return Er.createElement(kn,null,Er.createElement(An,{ariaControlsSuffix:$i,closeOnClickOutside:Jn,closeOnEscape:ai,onToggle:Hi},Ii(Hi)))},isOpened:Mi})},mr.Popover=function(Pn){var Wn=Pn.ariaHasPopup,Jn=Wn===void 0?"dialog":Wn,ai=Pn.ariaControlsSuffix,Ii=Pn.closeOnClickOutside,_i=Pn.closeOnEscape,Mi=Pn.content,Fi=Pn.lockScroll,$i=Fi===void 0||Fi,Hi=Pn.offset,Ni=Pn.position,Za=Pn.target,Xa=Vn(!1),za=Xa.opened,hs=Xa.toggle,rs=Er.useRef(),cs=Er.useMemo(function(){return ai||"".concat(jn())},[]);return Er.createElement("div",{ref:rs,"aria-expanded":za?"true":"false","aria-haspopup":Jn,"aria-controls":"rpv-core__popver-body-".concat(cs)},Za(hs,za),za&&Er.createElement(Er.Fragment,null,$i&&Er.createElement(Li,{closeOnEscape:_i,onClose:hs}),Er.createElement(ls,{ariaControlsSuffix:cs,closeOnClickOutside:Ii,offset:Hi,position:Ni,targetRef:rs,onClose:hs},Mi(hs))))},mr.PrimaryButton=hn,mr.ProgressBar=function(Pn){var Wn=Pn.progress,Jn=Er.useContext(Hr).direction===mr.TextDirection.RightToLeft;return Er.createElement("div",{className:Gr({"rpv-core__progress-bar":!0,"rpv-core__progress-bar--rtl":Jn})},Er.createElement("div",{className:"rpv-core__progress-bar-progress",style:{width:"".concat(Wn,"%")}},Wn,"%"))},mr.Separator=function(){return Er.createElement("div",{className:"rpv-core__separator"})},mr.Spinner=vn,mr.Splitter=function(Pn){var Wn=Pn.constrain,Jn=Er.useContext(Hr).direction===mr.TextDirection.RightToLeft,ai=Er.useRef(),Ii=Er.useRef(),_i=Er.useRef(),Mi=Er.useRef(0),Fi=Er.useRef(0),$i=Er.useRef(0),Hi=Er.useRef(0),Ni={capture:!0},Za=function(za){var hs=ai.current,rs=Ii.current,cs=_i.current;if(hs&&rs&&cs){var Os=Hi.current,Ss=za.clientX-Mi.current,Ts=$i.current+(Jn?-Ss:Ss),$s=hs.parentElement.getBoundingClientRect().width,bs=100*Ts/$s;if(hs.classList.add("rpv-core__splitter--resizing"),Wn){var Ds=$s-Ts-Os;if(!Wn({firstHalfPercentage:bs,firstHalfSize:Ts,secondHalfPercentage:100*Ds/$s,secondHalfSize:Ds}))return}rs.style.width="".concat(bs,"%"),document.body.classList.add("rpv-core__splitter-body--resizing"),rs.classList.add("rpv-core__splitter-sibling--resizing"),cs.classList.add("rpv-core__splitter-sibling--resizing")}},Xa=function(za){var hs=ai.current,rs=Ii.current,cs=_i.current;hs&&rs&&cs&&(document.body.classList.remove("rpv-core__splitter-body--resizing"),hs.classList.remove("rpv-core__splitter--resizing"),rs.classList.remove("rpv-core__splitter-sibling--resizing"),cs.classList.remove("rpv-core__splitter-sibling--resizing"),document.removeEventListener("mousemove",Za,Ni),document.removeEventListener("mouseup",Xa,Ni))};return Er.useEffect(function(){var za=ai.current;za&&(Hi.current=za.getBoundingClientRect().width,Ii.current=za.previousElementSibling,_i.current=za.nextElementSibling)},[]),Er.createElement("div",{ref:ai,className:"rpv-core__splitter",onMouseDown:function(za){var hs=Ii.current;hs&&(Mi.current=za.clientX,Fi.current=za.clientY,$i.current=hs.getBoundingClientRect().width,document.addEventListener("mousemove",Za,Ni),document.addEventListener("mouseup",Xa,Ni))}})},mr.TextBox=yn,mr.ThemeContext=Hr,mr.Tooltip=function(Pn){var Wn=Pn.ariaControlsSuffix,Jn=Pn.content,ai=Pn.offset,Ii=Pn.position,_i=Pn.target,Mi=Vn(!1),Fi=Mi.opened,$i=Mi.toggle,Hi=Er.useRef(),Ni=Er.useRef(),Za=Er.useMemo(function(){return Wn||"".concat(jn())},[]);Nn(function(){Hi.current&&document.activeElement&&Hi.current.contains(document.activeElement)&&za()});var Xa=function(){$i(mr.ToggleStatus.Open)},za=function(){$i(mr.ToggleStatus.Close)};return Er.createElement(Er.Fragment,null,Er.createElement("div",{ref:Hi,"aria-describedby":"rpv-core__tooltip-body-".concat(Za),onBlur:function(hs){hs.relatedTarget instanceof HTMLElement&&hs.currentTarget.parentElement&&hs.currentTarget.parentElement.contains(hs.relatedTarget)?Ni.current&&(Ni.current.style.display="none"):za()},onFocus:Xa,onMouseEnter:Xa,onMouseLeave:za},_i),Fi&&Er.createElement(es,{ariaControlsSuffix:Za,contentRef:Ni,offset:ai,position:Ii,targetRef:Hi},Jn()))},mr.Viewer=function(Pn){var Wn=Pn.characterMap,Jn=Pn.defaultScale,ai=Pn.enableSmoothScroll,Ii=ai===void 0||ai,_i=Pn.fileUrl,Mi=Pn.httpHeaders,Fi=Mi===void 0?{}:Mi,$i=Pn.initialPage,Hi=$i===void 0?0:$i,Ni=Pn.pageLayout,Za=Pn.initialRotation,Xa=Za===void 0?0:Za,za=Pn.localization,hs=Pn.plugins,rs=hs===void 0?[]:hs,cs=Pn.renderError,Os=Pn.renderLoader,Ss=Pn.renderPage,Ts=Pn.renderProtectedView,$s=Pn.scrollMode,bs=$s===void 0?mr.ScrollMode.Vertical:$s,Ds=Pn.setRenderRange,Ms=Ds===void 0?ou:Ds,no=Pn.transformGetDocumentParams,Js=Pn.theme,io=Js===void 0?{direction:mr.TextDirection.LeftToRight,theme:"light"}:Js,Ks=Pn.viewMode,fo=Ks===void 0?mr.ViewMode.SinglePage:Ks,po=Pn.withCredentials,wo=po!==void 0&&po,ko=Pn.onDocumentAskPassword,Eo=Pn.onDocumentLoad,Ro=Eo===void 0?function(){}:Eo,Io=Pn.onPageChange,qs=Io===void 0?function(){}:Io,Mo=Pn.onRotate,sl=Mo===void 0?function(){}:Mo,hl=Pn.onRotatePage,Po=hl===void 0?function(){}:hl,Yo=Pn.onSwitchTheme,Il=Yo===void 0?function(){}:Yo,Ps=Pn.onZoom,As=Ps===void 0?function(){}:Ps,vs=Er.useState({data:_i,name:typeof _i=="string"?_i:"",shouldLoad:!1}),ys=vs[0],xs=vs[1],Ls=function(xo,Ao){xs({data:Ao,name:xo,shouldLoad:!0})},Fs=Er.useState(!1),_s=Fs[0],ms=Fs[1],Us=qn(ys);Er.useEffect(function(){var xo,Ao,Do,$o;xo=Us.data,$o=typeof(Ao=_i),(Do=typeof xo)=="string"&&$o==="string"&&xo===Ao||Do==="object"&&$o==="object"&&xo.length===Ao.length&&xo.every(function(Ol,cc){return Ol===Ao[cc]})||xs({data:_i,name:typeof _i=="string"?_i:"",shouldLoad:_s})},[_i,_s]);var zs=zr({onVisibilityChanged:function(xo){ms(xo.isVisible),xo.isVisible&&xs(function(Ao){return Object.assign({},Ao,{shouldLoad:!0})})}}),So=typeof io=="string"?{direction:mr.TextDirection.LeftToRight,theme:io}:io,yo=Er.useState(za||Tn),Vo=yo[0],Xo=yo[1],Rs={l10n:Vo,setL10n:Xo},Fo=Object.assign({},{direction:So.direction},jd(So.theme||"light",Il));return Er.useEffect(function(){za&&Xo(za)},[za]),Er.createElement(Mn.Provider,{value:Rs},Er.createElement(Hr.Provider,{value:Fo},Er.createElement("div",{ref:zs,className:"rpv-core__viewer rpv-core__viewer--".concat(Fo.currentTheme),"data-testid":"core__viewer",style:{height:"100%",width:"100%"}},ys.shouldLoad&&Er.createElement(Nd,{characterMap:Wn,file:ys.data,httpHeaders:Fi,render:function(xo){return Er.createElement(Uu,{defaultScale:Jn,doc:xo,render:function(Ao,Do){return Er.createElement(Bu,{currentFile:{data:ys.data,name:ys.name},defaultScale:Jn,doc:xo,enableSmoothScroll:Ii,initialPage:Hi,initialRotation:Xa,initialScale:Do,pageLayout:Ni,pageSizes:Ao,plugins:rs,renderPage:Ss,scrollMode:bs,setRenderRange:Ms,viewMode:fo,viewerState:{file:ys,fullScreenMode:mr.FullScreenMode.Normal,pageIndex:-1,pageHeight:Ao[0].pageHeight,pageWidth:Ao[0].pageWidth,pagesRotation:new Map,rotation:Xa,scale:Do,scrollMode:bs,viewMode:fo},onDocumentLoad:Ro,onOpenFile:Ls,onPageChange:qs,onRotate:sl,onRotatePage:Po,onZoom:As})},scrollMode:bs,viewMode:fo})},renderError:cs,renderLoader:Os,renderProtectedView:Ts,transformGetDocumentParams:no,withCredentials:wo,onDocumentAskPassword:ko}))))},mr.Worker=function(Pn){var Wn=Pn.children,Jn=Pn.workerUrl;return Cr.GlobalWorkerOptions.workerSrc=Jn,Er.createElement(Er.Fragment,null,Wn)},mr.chunk=ds,mr.classNames=Gr,mr.createStore=function(Pn){var Wn=Pn||{},Jn={},ai=function(_i,Mi){var Fi;Wn=Dr(Dr({},Wn),((Fi={})[_i]=Mi,Fi)),(Jn[_i]||[]).forEach(function($i){return $i(Wn[_i])})},Ii=function(_i){return Wn[_i]};return{subscribe:function(_i,Mi){Jn[_i]=(Jn[_i]||[]).concat(Mi)},unsubscribe:function(_i,Mi){Jn[_i]=(Jn[_i]||[]).filter(function(Fi){return Fi!==Mi})},update:function(_i,Mi){ai(_i,Mi)},updateCurrentValue:function(_i,Mi){var Fi=Ii(_i);Fi!==void 0&&ai(_i,Mi(Fi))},get:function(_i){return Ii(_i)}}},mr.getDestination=al,mr.getPage=ho,mr.isFullScreenEnabled=Rn,mr.isMac=function(){return typeof window<"u"&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)},mr.useDebounceCallback=Hn,mr.useIntersectionObserver=zr,mr.useIsMounted=Gn,mr.useIsomorphicLayoutEffect=qr,mr.usePrevious=qn,mr.useRenderQueue=_n})(core_min);/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */lib.exports=core_min;var libExports=lib.exports,define_process_env_default={ADMIN_PATH:"/admin",STRAPI_ADMIN_BACKEND_URL:"",STRAPI_TELEMETRY_DISABLED:"false"};class RequestService{apiUrl=window.location.protocol+"//"+window.location.hostname+":"+window.location.port+"/api";token=define_process_env_default.STRAPI_ADMIN_STRAPI_TOKEN;async request(hr,gr,vr){const xr={Authorization:`Bearer ${this.token}`,...vr.headers},Er=await fetch(this.apiUrl+hr,{method:gr,headers:xr,body:vr.body});if(!Er.ok){const Cr=await Er.json();throw new Error(`API request failed ${hr} : ${Er.status} ${Er.statusText} 
${Cr}`)}return Er}async post(hr,gr){return await(await this.request(hr,"POST",{...gr,headers:{"Content-Type":"application/json",...gr.headers},body:JSON.stringify(gr.body)})).json()}async get(hr,gr={}){return await(await this.request(hr,"GET",gr)).json()}async put(hr,gr){return await(await this.request(hr,"PUT",{...gr,headers:{"Content-Type":"application/json",...gr.headers},body:JSON.stringify(gr.body)})).json()}async delete(hr,gr={}){return await await this.request(hr,"DELETE",{...gr})}}const request=new RequestService,Modal=({isOpen:mr,onClose:hr,children:gr,style:vr={}})=>{const xr=document.getElementById("modal-root");if(reactExports.useEffect(()=>{const Rr=kr=>{kr.key==="Escape"&&hr()};return mr?(document.body.style.overflow="hidden",document.addEventListener("keydown",Rr)):document.body.style.overflow="auto",()=>{document.body.style.overflow="auto",document.removeEventListener("keydown",Rr)}},[mr,hr]),!mr||!xr)return null;const Er={position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",padding:"20px 40px",borderRadius:"8px",background:"#212134",border:0,color:"white",zIndex:1001,width:"90%",height:"90%"},Cr={position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:1e3},wr={position:"absolute",top:"10px",right:"10px",background:"none",border:"none",cursor:"pointer",width:32,height:32,fontSize:32,lineHeight:.4,color:"white"};return ReactDOM.createPortal(jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{style:Cr,onClick:hr}),jsxRuntimeExports.jsxs("dialog",{open:!0,style:{...Er,...vr},children:[jsxRuntimeExports.jsx("button",{style:wr,onClick:hr,"aria-label":"Close modal",children:"×"}),gr]})]}),xr)},textStyle={textOverflow:"ellipsis",display:"-webkit-box",WebkitBoxOrient:"vertical",overflow:"hidden",WebkitLineClamp:"3"},cardStyle={width:"100%",height:250},contentStyle={display:"flex",flexDirection:"column",height:"100%",width:"100%",gap:5,padding:16},deleteStyle={cursor:"pointer"};function formatDate(mr){const hr=String(mr.getDate()).padStart(2,"0"),gr=String(mr.getMonth()+1).padStart(2,"0"),vr=mr.getFullYear();return`${hr}.${gr}.${vr}`}const CardComponent=({name:mr,email:hr,message:gr,documentId:vr,createdAt:xr,state:Er,pdfPath:Cr,updateReplays:wr})=>{const Rr=formatDate(new Date(xr)),[kr,Dr]=reactExports.useState(!1),[Br,Hr]=reactExports.useState(Er),Gr={name:mr,email:hr,message:gr,fileName:Cr.substring(9)},qr=()=>{request.put("/contact-uses/"+vr,{body:{data:{state:Br!=="read"?"read":"unread"}}})},zr=()=>Dr(!1),Qr=()=>Dr(!0),sn=()=>{request.delete("/contact-uses/"+vr),wr(vr)};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Card$1,{style:cardStyle,children:jsxRuntimeExports.jsxs(CardContent,{style:contentStyle,children:[jsxRuntimeExports.jsxs(Flex,{justifyContent:"space-between",children:[jsxRuntimeExports.jsx(CardTitle,{children:jsxRuntimeExports.jsxs(Typography,{fontSize:"1.6rem",children:[" Name: ",mr]})}),jsxRuntimeExports.jsx(ForwardRef$j$1,{style:deleteStyle,onClick:Qr})]}),jsxRuntimeExports.jsx(Divider,{}),jsxRuntimeExports.jsx(CardTitle,{children:jsxRuntimeExports.jsxs(Typography,{fontSize:"1.6rem",children:["Email: ",hr]})}),jsxRuntimeExports.jsx(Divider,{}),jsxRuntimeExports.jsx(CardTitle,{style:textStyle,children:jsxRuntimeExports.jsxs(Typography,{fontSize:"1.6rem",children:["Message: ",gr]})}),jsxRuntimeExports.jsx(Divider,{}),jsxRuntimeExports.jsx(CardTitle,{children:jsxRuntimeExports.jsxs(Typography,{fontSize:"1.6rem",children:["Created: ",Rr]})}),jsxRuntimeExports.jsx(Divider,{}),jsxRuntimeExports.jsxs("div",{style:{marginTop:"auto",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[jsxRuntimeExports.jsx("div",{style:{display:"flex",flexDirection:"column",gap:5},children:jsxRuntimeExports.jsx(CheckboxImpl,{checked:Br==="read",onCheckedChange:()=>{qr(),Hr(hn=>hn==="read"?"unread":"read")},children:jsxRuntimeExports.jsx(Typography,{fontSize:"1.6rem",children:"Checked"})})}),jsxRuntimeExports.jsx(LinkButton,{style:{width:"45%"},tag:Link$1,to:"document/"+Cr.substring(9,Cr.length-4),state:Gr,children:jsxRuntimeExports.jsx(Typography,{fontSize:"1.6rem",children:"View more"})})]})]})}),jsxRuntimeExports.jsx(Modal,{isOpen:kr,onClose:zr,style:{width:"fit-content",height:"fit-content"},children:jsxRuntimeExports.jsxs(Flex,{direction:"column",alignItems:"flex-start",gap:2,children:[jsxRuntimeExports.jsx(Typography,{children:"Are you sure to delete?"}),jsxRuntimeExports.jsx(Divider,{}),jsxRuntimeExports.jsxs(Typography,{children:["Document ID: ",vr]}),jsxRuntimeExports.jsx(Divider,{}),jsxRuntimeExports.jsxs(Typography,{children:["Name: ",mr]}),jsxRuntimeExports.jsx(Divider,{}),jsxRuntimeExports.jsxs(Typography,{children:["Email: ",hr]}),jsxRuntimeExports.jsx(Divider,{}),jsxRuntimeExports.jsxs(Flex,{justifyContent:{initial:"space-between"},gap:2,children:[jsxRuntimeExports.jsx(Button,{variant:"secondary",onClick:zr,children:"Cancel"}),jsxRuntimeExports.jsx(Button,{variant:"danger",onClick:sn,children:"Delete"})]})]})})]})};pdfExports.GlobalWorkerOptions.workerSrc="https://unpkg.com/pdfjs-dist@3.11.174/build/pdf.worker.min.js";function HomePage(){const[mr,hr]=reactExports.useState({data:[]}),[gr,vr]=reactExports.useState("all"),xr=Cr=>{vr(Cr)};reactExports.useEffect(()=>{(async()=>{const wr=await request.get("/contact-uses?populate=file",{headers:{"Content-Type":"application/json"}});hr(wr)})()},[gr]);const Er=Cr=>{hr(wr=>({data:wr.data.filter(Rr=>Rr.documentId!==Cr)}))};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("header",{style:{position:"fixed",top:0,left:56,width:"100%",padding:"10px 0 10px 20px",background:"#181826",zIndex:10},children:jsxRuntimeExports.jsxs(SimpleMenu,{label:gr[0].toUpperCase()+gr.substring(1),style:{width:"fit-content"},children:[jsxRuntimeExports.jsx(MenuItem$2,{onSelect:()=>xr("all"),children:"All"}),jsxRuntimeExports.jsx(MenuItem$2,{onSelect:()=>xr("read"),children:"Read"}),jsxRuntimeExports.jsx(MenuItem$2,{onSelect:()=>xr("unread"),children:"Unread"})]})}),jsxRuntimeExports.jsx("div",{style:{width:"100%",margin:"56px 0",padding:"0 20px",display:"flex",flexDirection:"column",gap:10},children:jsxRuntimeExports.jsx(Grid.Root,{gap:5,children:mr.data.length&&mr.data.filter(Cr=>gr==="all"?Cr:Cr.state===gr).sort((Cr,wr)=>new Date(wr.createdAt).getTime()-new Date(Cr.createdAt).getTime()).map(Cr=>jsxRuntimeExports.jsx(Grid.Item,{gap:5,col:3,m:4,s:6,children:jsxRuntimeExports.jsx(CardComponent,{...Cr,pdfPath:Cr.file.url,updateReplays:Er})},Cr.id))})})]})}const renderError=(mr,hr)=>{let gr="";switch(mr.name){case"InvalidPDFException":gr="The document is invalid or corrupted. "+hr;break;case"MissingPDFException":gr="The document is missing or not PDF. "+hr;break;case"UnexpectedResponseException":gr="Unexpected server response";break;default:gr="Cannot load the document. "+hr;break}return jsxRuntimeExports.jsx("div",{style:{alignItems:"center",display:"flex",height:"100%",justifyContent:"center"},children:jsxRuntimeExports.jsx("div",{style:{backgroundColor:"#250700",borderRadius:"0.25rem",color:"#fff",padding:"1rem 0.5rem",fontSize:22},children:gr})})},Document$1=()=>{const{path:mr}=useParams(),{name:hr,email:gr,message:vr,fileName:xr}=useLocation().state,[Er,Cr]=reactExports.useState(!1);return jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:10,width:"90%",height:"100vh",padding:"20px 0",margin:"0 auto"},children:[jsxRuntimeExports.jsxs(Flex,{direction:{initial:"column",small:"row"},alignItems:"flex-start",justifyContent:{initial:"space-between"},gap:2,children:[jsxRuntimeExports.jsx(LinkButton,{style:{width:200,height:32},tag:Link$1,to:"../",children:"Back"}),jsxRuntimeExports.jsx(Button,{onClick:()=>Cr(!0),children:"View document"})]}),jsxRuntimeExports.jsxs(Typography,{fontSize:"1.6rem",children:["Name: ",hr]}),jsxRuntimeExports.jsxs(Typography,{fontSize:"1.6rem",children:["Email: ",gr]}),jsxRuntimeExports.jsxs(Typography,{style:{maxWidth:700},fontSize:"1.6rem",children:["Message: ",vr]}),jsxRuntimeExports.jsx(Modal,{isOpen:Er,onClose:()=>Cr(!1),children:jsxRuntimeExports.jsx(libExports.Viewer,{fileUrl:`/uploads/${mr}.pdf`,defaultScale:libExports.SpecialZoomLevel.PageFit,renderError:wr=>renderError(wr,xr)})})]})},App=()=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{index:!0,element:jsxRuntimeExports.jsx(HomePage,{})}),jsxRuntimeExports.jsx(Route,{path:"/document/:path",element:jsxRuntimeExports.jsx(Document$1,{})}),jsxRuntimeExports.jsx(Route,{path:"*",element:jsxRuntimeExports.jsx(Page.Error,{})})]}),jsxRuntimeExports.jsx("div",{id:"modal-root"})]}),AppDqQcSm7H=Object.freeze(Object.defineProperty({__proto__:null,App},Symbol.toStringTag,{value:"Module"}));export{getTranslation as $,Alert as A,Box as B,COLLECTION_TYPES as C,DocumentRBAC as D,useDocumentRBAC as E,FocusTrap as F,Grid as G,useStrapiApp as H,useDocLayout as I,Field as J,MemoizedInputRenderer as K,Link as L,Main as M,useField as N,TooltipImpl as O,Portal$1 as P,ForwardRef$l as Q,RelativeTime as R,ForwardRef$1 as S,Typography as T,Tabs as U,useGetPreviewUrlQuery as V,useClipboard as W,IconButton as X,useHistory as Y,createYupSchema as Z,Header as _,createContext as a,extractContentTypeComponents as a$,Panels as a0,Blocker as a1,SINGLE_TYPES$1 as a2,useAPIErrorHandler as a3,isEqual$3 as a4,useGetAllDocumentsQuery as a5,BackButton as a6,InjectionZone as a7,SearchInput as a8,Table as a9,useNotifyAT as aA,Loader as aB,ForwardRef$j as aC,ForwardRef$11 as aD,ForwardRef$V as aE,ForwardRef$N as aF,ForwardRef$D as aG,ForwardRef$n as aH,ForwardRef$h as aI,ForwardRef$b as aJ,ForwardRef$5 as aK,ForwardRef$r as aL,ForwardRef$3 as aM,ForwardRef$X as aN,ForwardRef$P as aO,ForwardRef$13 as aP,useGetInitialDataQuery as aQ,useUpdateContentTypeConfigurationMutation as aR,create$2 as aS,create$4 as aT,create$5 as aU,create$3 as aV,ATTRIBUTE_TYPES_THAT_CANNOT_BE_MAIN_FIELD as aW,generateNKeysBetween as aX,capitalise as aY,useComposedRefs as aZ,Modal$1 as a_,TableActions as aa,Pagination$1 as ab,useTable as ac,BulkActionsRenderer as ad,useAuth as ae,useContentTypeSchema as af,useAdminUsers as ag,useCollator as ah,CREATOR_FIELDS as ai,getMainField as aj,Filters$1 as ak,Combobox as al,Option$2 as am,isEmpty$1 as an,Popover as ao,LinkButton as ap,checkIfAttributeIsDisplayable as aq,TextButton as ar,CheckboxImpl as as,HOOKS as at,convertListLayoutToFieldLayouts as au,parseISO as av,toString$b as aw,Menu$2 as ax,Badge as ay,Avatar as az,PERMISSIONS$1 as b,DEFAULT_SETTINGS as b0,convertEditLayoutToFieldLayouts as b1,EmptyStateLayout as b2,ForwardRef$J as b3,VisuallyHidden as b4,useDrop as b5,useDrag as b6,clone$3 as b7,toPath$2 as b8,withSelectorExports as b9,DOCUMENT_META_FIELDS as bA,MenuItem$2 as bB,AppDqQcSm7H as bC,_inheritsLoose as ba,_extends$7 as bb,_assertThisInitialized as bc,useFocusInputField as bd,ln as be,dn as bf,r as bg,fn as bh,throttle$1 as bi,debounce$2 as bj,$8927f6f2acc4f386$export$250ffa63cdc0d034 as bk,$71cd76cc60e0454e$export$6f32135080cb4c3 as bl,$e42e1063c40fb3ef$export$b9ecd428b558ff10 as bm,$c512c27ab02ef895$export$50c7b4e9d9f19c1 as bn,$d7bdfb9eb0fdf311$export$c7109489551a4f4 as bo,$f631663db3294ace$export$b39126d51d94e6f3 as bp,$d7bdfb9eb0fdf311$export$be92b6f5f03c0fe9 as bq,$d7bdfb9eb0fdf311$export$6d08773d2e66f8f2 as br,escapeStringRegexp$3 as bs,Accordion as bt,CLONE_PATH as bu,TextInput as bv,BaseLinkImpl as bw,IconButtonGroup as bx,SingleSelect as by,SingleSelectOption as bz,contentManagerApi as c,Page as d,useIntl$1 as e,useDocument as f,useDocumentLayout as g,useGetContentTypeConfigurationQuery as h,useQueryParams as i,buildValidParams as j,Flex as k,lib$1 as l,useDoc as m,Layouts as n,Form as o,Divider as p,useTracking as q,useNotification as r,Dialog as s,Button as t,useRBAC as u,ConfirmDialog as v,pipe$1 as w,getDisplayName as x,DocumentStatus as y,useForm as z};
