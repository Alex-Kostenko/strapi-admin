import{r as k}from"./strapi-B5tTVWvh.js";import{b5 as F,b6 as M,b7 as L,b8 as U}from"./App-DqQcSm7H-DE-t9b3j.js";let I;function x(){return I||(I=new Image,I.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),I}const z={COMPONENT:"component",EDIT_FIELD:"editField",FIELD:"field",DYNAMIC_ZONE:"dynamicZone",RELATION:"relation",BLOCKS:"blocks"},H=(t,s,{onCancel:l,onDropItem:a,onGrabItem:n,onMoveItem:r})=>{const[i,g]=k.useState(!1),u=d=>{i&&typeof s=="number"&&r&&(d==="UP"?r(s-1,s):d==="DOWN"&&r(s+1,s))},A=()=>{i?(a&&a(s),g(!1)):(n&&n(s),g(!0))},O=()=>{i&&(g(!1),l&&l(s))};return d=>{if(t&&!(d.key==="Tab"&&!i))switch(d.preventDefault(),d.key){case" ":case"Enter":A();break;case"Escape":O();break;case"ArrowDown":case"ArrowRight":u("DOWN");break;case"ArrowUp":case"ArrowLeft":u("UP");break}}},P={UPWARD:"upward",DOWNWARD:"downward"},T={REGULAR:"regular",IMMEDIATE:"immediate"},J=(t,{type:s="STRAPI_DND",index:l,item:a,onStart:n,onEnd:r,onGrabItem:i,onDropItem:g,onCancel:u,onMoveItem:A,dropSensitivity:O=T.REGULAR})=>{const h=k.useRef(null),[{handlerId:d,isOver:b},W]=F({accept:s,collect(e){return{handlerId:e.getHandlerId(),isOver:e.isOver({shallow:!0})}},drop(e){const o=e.index;b&&g&&g(o,l)},hover(e,o){if(!h.current||!A)return;const c=e.index,f=l,E=h.current?.getBoundingClientRect(),R=(E.bottom-E.top)/2,p=o.getClientOffset();if(!p)return;const y=p&&p.y-E.top;if(typeof c=="number"&&typeof f=="number"){if(c===f||O===T.REGULAR&&(c<f&&y<R||c>f&&y>R))return;A(f,c),e.index=f}else{if(Array.isArray(c)&&Array.isArray(f)){const _=Math.min(c.length,f.length);let w=!0,C=!1,N=!1;for(let D=0;D<_;D++)if(c[D]<f[D]){C=!0,w=!1;break}else if(c[D]>f[D]){N=!0,w=!1;break}if(w&&c.length===f.length||O===T.REGULAR&&(C&&!N&&y<R||N&&!C&&y>R))return}A(f,c),e.index=f}}}),B=e=>{if(e&&e.isDragging()&&!e.didDrop()&&e.getInitialClientOffset()&&e.getClientOffset()){const o=e.getInitialClientOffset().y-e.getClientOffset().y;return o>0?P.UPWARD:o<0?P.DOWNWARD:null}return null},[{isDragging:K,direction:v},G,S]=M({type:s,item(){n&&n();const{width:e}=h.current?.getBoundingClientRect()??{};return{index:l,width:e,...a}},end(){r&&r()},canDrag:t,isDragging:a?.id?e=>a.id===e.getItem().id:void 0,collect:e=>({isDragging:e.isDragging(),initialOffset:e.getInitialClientOffset(),currentOffset:e.getClientOffset(),direction:B(e)})}),Y=H(t,l,{onGrabItem:i,onDropItem:g,onCancel:u,onMoveItem:A});return[{handlerId:d,isDragging:K,handleKeyDown:Y,isOverDropTarget:b,direction:v},h,W,G,S]};function V(t,s,l,a=0){const n=U(s);for(;t&&a<n.length;)t=t[n[a++]];return a!==n.length&&!t||t===void 0?l:t}const Z=t=>t!==null&&typeof t=="object"&&!Array.isArray(t),q=t=>String(Math.floor(Number(t)))===t;function X(t,s,l){const a=L(t);let n=a,r=0;const i=U(s);for(;r<i.length-1;r++){const g=i[r],u=V(t,i.slice(0,r+1));if(u&&(Z(u)||Array.isArray(u)))n=n[g]=L(u);else{const A=i[r+1];n=n[g]=q(A)&&Number(A)>=0?[]:{}}}return(r===0?t:n)[i[r]]===l?t:(delete n[i[r]],r===0&&l===void 0&&delete a[i[r]],a)}export{T as D,z as I,P as a,V as b,x as g,X as s,J as u};
