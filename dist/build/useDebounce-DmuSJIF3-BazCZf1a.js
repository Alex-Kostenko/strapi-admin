import{c as p,aX as l}from"./App-DqQcSm7H-vb2ZbdZ0.js";import{r}from"./strapi-DWk4IUgy.js";const u=p.injectEndpoints({endpoints:t=>({getRelations:t.query({query:({model:a,id:e,targetField:s,params:n})=>({url:`/content-manager/relations/${a}/${e}/${s}`,method:"GET",config:{params:n}}),serializeQueryArgs:a=>{const{endpointName:e,queryArgs:s}=a;return{endpointName:e,model:s.model,id:s.id,targetField:s.targetField,locale:s.params?.locale,status:s.params?.status}},merge:(a,e)=>{a.pagination&&e.pagination&&(a.pagination.page<e.pagination.page?(a.results=[...o(e.results,a.results),...a.results],a.pagination=e.pagination):e.pagination.page===1&&(a.results=o(e.results),a.pagination=e.pagination))},forceRefetch({currentArg:a,previousArg:e}){return!a?.params&&!e?.params?!1:a?.params?.page!==e?.params?.page||a?.params?.pageSize!==e?.params?.pageSize},transformResponse:a=>"results"in a&&a.results?{...a,results:o(a.results.toReversed())}:a,providesTags:["Relations"]}),searchRelations:t.query({query:({model:a,targetField:e,params:s})=>({url:`/content-manager/relations/${a}/${e}`,method:"GET",config:{params:s}}),serializeQueryArgs:a=>{const{endpointName:e,queryArgs:s}=a;return{endpointName:e,model:s.model,targetField:s.targetField,_q:s.params?._q,idsToOmit:s.params?.idsToOmit,idsToInclude:s.params?.idsToInclude}},merge:(a,e)=>{if(a.pagination&&e.pagination)if(a.pagination.page<e.pagination.page){const s=a.results.map(i=>i.documentId),n=e.results.filter(i=>!s.includes(i.documentId));a.results.push(...n),a.pagination=e.pagination}else e.pagination.page===1&&(a.results=e.results,a.pagination=e.pagination)},forceRefetch({currentArg:a,previousArg:e}){return!a?.params&&!e?.params?!1:a?.params?.page!==e?.params?.page||a?.params?.pageSize!==e?.params?.pageSize},transformResponse:a=>a.results?{...a,results:a.results}:a})})}),o=(t,a=[])=>{const[e]=a.slice(0),s=l(null,e?.__temp_key__??null,t.length);return t.map((n,i)=>({...n,__temp_key__:s[i]}))},{useGetRelationsQuery:d,useLazySearchRelationsQuery:f}=u,c=(t,a)=>{const e=a&&t[a.name]?t[a.name]:null;return typeof e=="string"?e:t.documentId},y=t=>t&&t.startsWith("/")?`${window.strapi.backendURL}${t}`:t,_=t=>{const a=r.useRef();return r.useEffect(()=>{a.current=t},[t]),a.current};function R(t,a){const[e,s]=r.useState(t);return r.useEffect(()=>{const n=setTimeout(()=>{s(t)},a);return()=>{clearTimeout(n)}},[t,a]),e}export{R as a,d as b,f as c,c as g,y as p,_ as u};
