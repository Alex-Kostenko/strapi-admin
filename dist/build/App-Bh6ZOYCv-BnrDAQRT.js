import{u as S,g as A,h as B,r as m,i as F,k as O,j as e,P as l,b as u,l as v,m as H,n as N,o as w,q as C,T as c,s as U,t as h,F as G,I as f,v as W,w as q,E as Q,D as _,C as z,d as J,L as K}from"./strapi-BOe-yMjB.js";import{u as X,a as Y,b as Z,g as a}from"./getTrad-BzQMnOxD-DlCsIBaA.js";const te=()=>{const{formatMessage:n}=S(),{toggleNotification:i}=A(),{formatAPIError:x}=B(),{data:t,isLoading:b,isError:P}=X(),[R]=Y(),[y]=Z(),[d,g]=m.useState(!1),[p,M]=m.useState(),{allowedActions:o,isLoading:L}=F(O),$=b||L,T=4,k=(t?.docVersions?.length||0)+1,I=s=>{R({version:s}).unwrap().then(()=>{i({type:"success",message:n({id:a("notification.generate.success"),defaultMessage:"Successfully generated documentation"})})}).catch(r=>{i({type:"warning",message:x(r)})})},V=async()=>{p&&(await y({version:p}).unwrap().then(()=>{i({type:"success",message:n({id:a("notification.delete.success"),defaultMessage:"Successfully deleted documentation"})})}).catch(s=>{i({type:"warning",message:x(s)})}),g(!d))},E=s=>{M(s),g(!d)},j=n({id:a("plugin.name"),defaultMessage:"Documentation"});return $?e.jsx(l.Loading,{}):P?e.jsx(l.Error,{}):e.jsxs(u.Root,{children:[e.jsx(l.Title,{children:j}),e.jsxs(l.Main,{children:[e.jsx(u.Header,{title:j,subtitle:n({id:a("pages.PluginPage.header.description"),defaultMessage:"Configure the documentation plugin"}),primaryAction:e.jsx(ee,{disabled:!o.canRead||!t?.currentVersion||!t?.prefix,href:D(`${t?.prefix}/v${t?.currentVersion}`),startIcon:e.jsx(v,{}),children:n({id:a("pages.PluginPage.Button.open"),defaultMessage:"Open Documentation"})})}),e.jsx(u.Content,{children:t?.docVersions.length?e.jsxs(H,{colCount:T,rowCount:k,children:[e.jsx(N,{children:e.jsxs(w,{children:[e.jsx(C,{children:e.jsx(c,{variant:"sigma",textColor:"neutral600",children:n({id:a("pages.PluginPage.table.version"),defaultMessage:"Version"})})}),e.jsx(C,{children:e.jsx(c,{variant:"sigma",textColor:"neutral600",children:n({id:a("pages.PluginPage.table.generated"),defaultMessage:"Last Generated"})})})]})}),e.jsx(U,{children:t.docVersions.slice(0).sort((s,r)=>s.generatedDate<r.generatedDate?1:-1).map(s=>e.jsxs(w,{children:[e.jsx(h,{width:"50%",children:e.jsx(c,{children:s.version})}),e.jsx(h,{width:"50%",children:e.jsx(c,{children:s.generatedDate})}),e.jsx(h,{children:e.jsxs(G,{justifyContent:"end",onClick:r=>r.stopPropagation(),children:[e.jsx(f,{tag:"a",disabled:!o.canRead,href:D(`${t.prefix}/v${s.version}`),variant:"ghost",target:"_blank",rel:"noopener noreferrer",label:n({id:a("pages.PluginPage.table.icon.show"),defaultMessage:"Open {target}"},{target:`${s.version}`}),children:e.jsx(v,{})}),o.canRegenerate?e.jsx(f,{onClick:()=>I(s.version),variant:"ghost",label:n({id:a("pages.PluginPage.table.icon.regenerate"),defaultMessage:"Regenerate {target}"},{target:`${s.version}`}),children:e.jsx(W,{})}):null,o.canUpdate&&s.version!==t.currentVersion?e.jsx(f,{onClick:()=>E(s.version),variant:"ghost",label:n({id:"global.delete-target",defaultMessage:"Delete {target}"},{target:`${s.version}`}),children:e.jsx(q,{})}):null]})})]},s.version))})]}):e.jsx(Q,{content:"",icon:null})}),e.jsx(_.Root,{open:d,onOpenChange:g,children:e.jsx(z,{onConfirm:V})})]})]})},ee=J(K)`
  text-decoration: none;
`,D=n=>n.startsWith("http")?n:n.startsWith("/")?`${window.strapi.backendURL}${n}`:`${window.strapi.backendURL}/${n}`;export{te as App};
